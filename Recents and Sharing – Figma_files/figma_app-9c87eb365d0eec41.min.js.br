"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="87ccdf0f-9253-5209-80c3-f08640b3f4ab")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3813],{131471:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutoLayout=t.styleForAutoLayout=void 0;let n=r(43112),i=r(652983),a=r(433497),o=r(5183),l=r(899063),s=r(432585),c=r(74495);function d(e,t,r){let{style:n,overlayStyle:i,wrapperStyle:a}=(0,o.styleForFrame)(e,t,r);return{style:Object.assign(Object.assign(Object.assign({},n),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:i,wrapperStyle:a}}t.styleForAutoLayout=d,t.AutoLayout=i.forwardRef(function(e,t){let{attributes:r,children:l}=e,u=(0,n.__rest)(e,["attributes","children"]),p=i.useContext(a.ParentContext);(0,a.warnInvalidConstraints)(Object.assign(Object.assign({},u),{parent:p}));let m=(0,c.normalizeProps)(Object.assign(Object.assign({},(0,s.getDefaultAutoLayoutProps)()),u)),h=(0,a.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},m),{parent:p})),_=i.Children.count(l)>0,g=d(m,p,_);return i.createElement(a.ParentContext.Provider,{value:{type:"autolayout",props:m}},(0,o.domNodeFromFrame)({figmaLayerName:m.name,styles:g,attributes:r,children:l,ref:(0,a.mergeRefs)([h,t])}))})},528855:(e,t,r)=>{r.r(t),r.d(t,{activeAnchorLink:()=>b,anchorLink:()=>v,anchorLinkContainer:()=>y,attributionLine:()=>l,authors:()=>c,bulletSeparator:()=>p,ctaContainer:()=>I,description:()=>w,headerContainer:()=>s,headerStickyLeftSide:()=>E,leftSide:()=>T,numberOfUsers:()=>_,resourceNameHeader:()=>o,resourcePageHeaderMaxWidth:()=>a,resourcePageHeaderSticky:()=>g,resourcePageHeaderStickyContainer:()=>f,resourceWrapper:()=>n,rightSide:()=>i,stats:()=>h,stickyTitle:()=>m,title:()=>d,title_badge_container:()=>u});let n="basic_resource_header--resourceWrapper--3-D2x",i="basic_resource_header--rightSide--M-Aoz",a="basic_resource_header--resourcePageHeaderMaxWidth--ym-5U",o="basic_resource_header--resourceNameHeader--q6w4g text--fontPos18--rYXJb text--_fontBase--QdLsd",l="basic_resource_header--attributionLine--3-ssm text--fontPos13--xW8hS text--_fontBase--QdLsd",s="basic_resource_header--headerContainer--YYSPX",c="basic_resource_header--authors--1PIBq text--fontPos13--xW8hS text--_fontBase--QdLsd",d="basic_resource_header--title--9jW4i text--fontPos24--YppUD text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k",u="basic_resource_header--title_badge_container--vH8BZ",p="basic_resource_header--bulletSeparator--OGYaL text--fontPos10--s1PI5 text--_fontBase--QdLsd",m="basic_resource_header--stickyTitle--oG0u0 ellipsis--ellipsis--Tjyfa text--fontPos18--rYXJb text--_fontBase--QdLsd",h="basic_resource_header--stats--U1D-b text--fontPos13--xW8hS text--_fontBase--QdLsd",_="basic_resource_header--numberOfUsers--oWoBg",g="basic_resource_header--resourcePageHeaderSticky--z2Rga",f="basic_resource_header--resourcePageHeaderStickyContainer--XiXE-",E="basic_resource_header--headerStickyLeftSide--OkZLQ",y="basic_resource_header--anchorLinkContainer--UaF3S",v="basic_resource_header--anchorLink--r0iNn meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",b="basic_resource_header--activeAnchorLink--3ueWI meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",I="basic_resource_header--ctaContainer--k8wqG",T="basic_resource_header--leftSide--MzgPN",w="basic_resource_header--description--718b9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},988906:(e,t,r)=>{r.d(t,{$5:()=>ed,$I:()=>d,$j:()=>k,A9:()=>ea,BA:()=>D,BD:()=>j,C8:()=>N,CX:()=>eS,Cg:()=>i,F1:()=>ec,GL:()=>ev,Hm:()=>eI,IV:()=>w,IW:()=>R,Id:()=>x,Jj:()=>e_,K0:()=>h,KJ:()=>X,Kw:()=>eE,LR:()=>a,M0:()=>Y,MR:()=>o,Mg:()=>v,Nw:()=>H,R0:()=>O,RN:()=>g,S2:()=>$,Sw:()=>er,TN:()=>U,Tx:()=>f,V1:()=>eo,WA:()=>p,Wk:()=>z,Wq:()=>M,Xz:()=>G,YW:()=>eu,Yo:()=>P,Yr:()=>et,Zg:()=>S,_X:()=>T,_u:()=>E,aU:()=>ef,bB:()=>_,c1:()=>eg,cz:()=>I,dK:()=>eO,dR:()=>L,gC:()=>Z,g_:()=>l,hr:()=>ep,i8:()=>C,iT:()=>Q,ii:()=>eh,jW:()=>eC,k5:()=>ew,lY:()=>q,mV:()=>V,mg:()=>c,nY:()=>W,p3:()=>F,ph:()=>m,qA:()=>ey,qr:()=>s,rQ:()=>el,rT:()=>es,rc:()=>u,uS:()=>K,uz:()=>ei,v:()=>B,v4:()=>ee,vC:()=>n,vR:()=>en,x5:()=>y,xo:()=>A,y3:()=>em,yV:()=>eT,z1:()=>b,zW:()=>J,zl:()=>eb});let n="feed_page--feedApp--CMcLD text--fontPos15--IR8IB text--_fontBase--QdLsd",i="feed_page--exploreFeedApp--OHHs6 feed_page--feedApp--CMcLD text--fontPos15--IR8IB text--_fontBase--QdLsd",a="feed_page--feed--7UNQq text--fontPos13--xW8hS text--_fontBase--QdLsd",o="feed_page--feedResourceGridContainer--yisWJ",l="feed_page--feedSection--Vnk47",s="feed_page--magicH1--EOWil text--fontPos40WhyteInktrap--SVcxi text--_fontBaseWhyteInktrap--YiiGP",c="feed_page--magic---00EQ",d="feed_page--subHeading--Q5oY3 text--fontPos20Whyte--o3mBO text--_fontBaseWhyte--efAjI",u="feed_page--sidebar---2-0D",p="feed_page--selectedSidebarBackdrop--qrbTt",m="feed_page--numSearchResults--pkhEL",h="feed_page--resourceHumanName--Sw7yE",_="feed_page--active--47Vpq",g="feed_page--feedFilterControls--3WYYx",f="feed_page--leftSideControls--cbPMx",E="feed_page--subheader--UGVYE text--fontPos22--4H4Fc text--_fontBase--QdLsd",y="feed_page--fullWidthFeed--hizyU",v="feed_page--seeAllCollectionsLink--A7xYb text--fontPos13--xW8hS text--_fontBase--QdLsd",b="feed_page--feedGrid--Wm-8Q",I="feed_page--compactFeedGrid--S8yrv feed_page--feedGrid--Wm-8Q",T="feed_page--compactFeedRows--jlDLG feed_page--feedGrid--Wm-8Q",w="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",S="feed_page--widget--CnSI2 feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",C="feed_page--compactProfileViewGrid--Vz5I9 feed_page--compactFeedGrid--S8yrv feed_page--feedGrid--Wm-8Q",O="feed_page--resourcePreviewContentWrapper--H1eHK",A="feed_page--prototypeIcon--JlZyq",N="feed_page--tileUpperLeftWrapper--mwqC-",L="feed_page--tileEditorIcon--ymAxC",P="feed_page--pluginIcon--NQjwf",R="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",k="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",D="feed_page--plugin--eimaR feed_page--resourceLinkTag--5KQz7",M="feed_page--resourcePreview--IePch",F="feed_page--resourceMeta--7vtas text--fontPos13--xW8hS text--_fontBase--QdLsd",x="feed_page--titleAndAuthor--P2cvB text--fontPos13--xW8hS text--_fontBase--QdLsd",U="feed_page--title--qJMsk",B="feed_page--author--pH7Iw text--fontPos11--2LvXf text--_fontBase--QdLsd",V="feed_page--resourceAvatar--Nwl7h",G="feed_page--resourceStatsContainer--dgRFn",H="feed_page--actions--UXu0g",W="feed_page--actionNoHover--QdLcL",K="feed_page--action__default_like--xlPBc feed_page--actionNoHover--QdLcL",z="feed_page--action__liked--8ZiFG feed_page--actionNoHover--QdLcL",Z="feed_page--resourceMetaAuthor--3wNr7",Y="feed_page--viewMoreButton--RWti3",j="feed_page--pluginDescription--fL9Cf text--fontPos11--2LvXf text--_fontBase--QdLsd",$="feed_page--resourceTypeDropdown--mkxpn dropdown--selectDropdown--Lqj6J dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",q="feed_page--spinner--Z0jz3",X="feed_page--profileRow--YIiOy",J="feed_page--pluginRow--urF1M",Q="feed_page--pluginRowImageContainer--pBAdP",ee="feed_page--pluginRowButtonContainer--ZXV-4",et="feed_page--pluginRowIcon--Gj3Ol",er="feed_page--pluginRowDescription--9U39k",en="feed_page--pluginRowAuthor--Vg6sm",ei="feed_page--pluginRowUpdatedAt--T2K-9",ea="feed_page--pluginMeta--Z8DkK",eo="feed_page--pluginRowTitle--2c-r8",el="feed_page--pluginRowTitleNameText--lPAaZ",es="feed_page--pluginInstallCount---BhkG",ec="feed_page--pluginInstallStat--Vz1ZU feed_page--pluginInstallCount---BhkG",ed="feed_page--profileRowAvatar--h2azi",eu="feed_page--profileRowMeta--sfwOx",ep="feed_page--profileRowFollowBox--j7BRa",em="feed_page--profileRowResources--TLbIS",eh="feed_page--profileRowResourceWrapper--hI5Wd",e_="feed_page--profileRowFollowersMetadata--tlFVr text--fontPos12--YsUAh text--_fontBase--QdLsd",eg="feed_page--profileRowFollowersHeader--q5m62",ef="feed_page--profileRowFollowers--8L1-o",eE="feed_page--profileRowName--p-4KA",ey="feed_page--profileRowProfileHandle--eDbiU text--fontPos12--YsUAh text--_fontBase--QdLsd",ev="feed_page--feedFilterDropdown--aG2Hk dropdown--selectDropdown--Lqj6J dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",eb="feed_page--tileTooltip--44prj dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",eI="feed_page--hideUnder600--IF6C7",eT="feed_page--feedFilterDropdownMobileHidden--jdfbK",ew="feed_page--pluginRowTitleWithBadge--qTn5u",eS="feed_page--pluginRowDescriptionWithBadge--95gmZ",eC="feed_page--filterContainer--AHPDj text--fontPos15--IR8IB text--_fontBase--QdLsd",eO="feed_page--footerContainer--PdYUf"},411215:(e,t,r)=>{r.d(t,{CP:()=>c,Eh:()=>p,G5:()=>s,LZ:()=>h,NH:()=>o,PZ:()=>a,Pb:()=>_,Vn:()=>n,ZU:()=>m,_Z:()=>u,_n:()=>l,hk:()=>i,jj:()=>d});let n="meta_container--metaContainer--kaSwh",i="meta_container--leftSide--KSlX8",a="meta_container--rightSide--FQNL-",o="meta_container--tabbedMetaContainer--DJyPv meta_container--metaContainer--kaSwh",l="meta_container--metaTabContainer--lvUtb",s="meta_container--metaContainerDivider--ZXFZP",c="meta_container--metaContainerDividerSpacer--OW9jB",d="meta_container--mobileMetaContainer--gGQKv",u="meta_container--mobileButtonRow--a-eRc",p="meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",m="meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",h="meta_container--metaTabCommentCount--B1a21",_="meta_container--selectedMetaTabCommentCount--lS1BF meta_container--metaTabCommentCount--B1a21"},619276:(e,t,r)=>{r.r(t),r.d(t,{authedAccountEmail:()=>g,avatar:()=>v,button:()=>u,figmaAuthModal:()=>o,genericSelectorExternalTeamsIcon:()=>E,genericSelectorInner:()=>_,genericSelectorModal:()=>h,genericSelectorModalCancel:()=>f,graphic:()=>l,header:()=>c,logInButton:()=>m,loggedOutCommunityActionModal:()=>a,modal:()=>n,modalBackdrop:()=>i,modalCloseButton:()=>s,primaryWideButton:()=>p,subHeader:()=>d,workspaceTitleWrapper:()=>y});let n="index--modal--vmXNN",i="index--modalBackdrop--VqLCO",a="index--loggedOutCommunityActionModal--P-hYZ index--modalBackdrop--VqLCO",o="index--figmaAuthModal--rNJVQ index--modalBackdrop--VqLCO",l="index--graphic--iU2RU",s="index--modalCloseButton--Migyu text--fontPos24--YppUD text--_fontBase--QdLsd",c="index--header--ZtRxZ text--fontPos22--4H4Fc text--_fontBase--QdLsd",d="index--subHeader--6bNQO text--fontPos16--oMC-G text--_fontBase--QdLsd",u="index--button--NGLN1 text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI",p="index--primaryWideButton--jq1BX index--button--NGLN1 text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI",m="index--logInButton--LMXFW index--button--NGLN1 text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI",h="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",_="index--genericSelectorInner--HBJH2",g="index--authedAccountEmail--zhDrH text--fontPos11--2LvXf text--_fontBase--QdLsd",f="index--genericSelectorModalCancel--WOjxG",E="index--genericSelectorExternalTeamsIcon--KL8jt",y="index--workspaceTitleWrapper--e9YT2",v="index--avatar--nIkKj"},229949:(e,t,r)=>{r.d(t,{Z:()=>n});let n="dragged_styles--transparent--k4E4U"},511978:(e,t,r)=>{r.d(t,{EW:()=>u,Jk:()=>s,LO:()=>p,PT:()=>a,SC:()=>i,mN:()=>d,mc:()=>o,ng:()=>n,q3:()=>c,s2:()=>m,tj:()=>l});let n="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingResource--RyWym",i="dragging_resource--isDraggingOverCanvas--PgYby",a="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",o="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",l="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",s="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",c="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",d="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",m="dragging_resource--expandAnimation--4FamY"},432578:(e,t,r)=>{r.d(t,{Cr:()=>w,Do:()=>_,Iv:()=>b,Kj:()=>c,NK:()=>y,Qu:()=>E,S5:()=>T,Wq:()=>d,Xm:()=>l,Xw:()=>i,fC:()=>g,go:()=>v,h6:()=>o,jF:()=>f,nu:()=>I,pr:()=>m,qB:()=>h,ri:()=>n,sy:()=>p,um:()=>u,x2:()=>a,z4:()=>s});let n="avatar--avatar--fFibd",i="avatar--circle--ag36Q",a="avatar--roundedSquare--cq522",o="avatar--square--p4eL1",l="avatar--dim--UbqLc",s="avatar--avatarBellWrapper--sd6MY",c="avatar--bell--Lk6s9",d="avatar--avatarWithHandle--Z3934",u="avatar--info--vDGTn",p="avatar--handleRow--0K2-H",m="avatar--handle--wlTXK",h="avatar--isMe--LeNkH",_="avatar--email--G3FcZ",g="avatar--emailHover--ekuTn",f="avatar--clickableAvatarWithHandle--d90vX",E="avatar--disabledDimAvatarWithHandle--5l6cM",y="avatar--multiTeamAvatarContainer--Rb-Kn",v="avatar--multiTeamAvatarContainerHovered--2V7AO",b="avatar--workspaceAvatarBlue--XbbpI",I="avatar--workspaceAvatarPurple--FOGSP",T="avatar--workspaceAvatarGreen--PWm5o",w="avatar--workspaceAvatarTeal--4j3FH"},963142:(e,t,r)=>{r.d(t,{AQ:()=>v,D:()=>m,Eu:()=>y,FP:()=>M,GP:()=>f,Iy:()=>V,Jn:()=>I,OY:()=>p,Oh:()=>L,Pz:()=>C,Q4:()=>c,Qn:()=>T,Rk:()=>o,SY:()=>N,UB:()=>k,WT:()=>S,Zl:()=>w,a1:()=>F,ad:()=>l,dX:()=>n,e4:()=>d,f4:()=>h,f6:()=>O,fs:()=>A,jM:()=>g,k2:()=>i,kB:()=>u,lb:()=>b,oU:()=>R,qm:()=>B,rL:()=>x,tH:()=>a,uH:()=>U,ui:()=>s,vP:()=>P,vX:()=>D,vf:()=>E,y1:()=>_});let n="community_cards--cardChildDisplayOnHover--7KpMt",i="community_cards--cardLayoutContainer--nPcgb",a="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",l="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",s="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",p="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",m="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",v="community_cards--cardBottomRow_ResourceActionButton--v146M",b="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",I="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--publisherDropdown--m7Bx2",C="community_cards--publisherDropdownContent_Row--iIBB3",O="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",A="community_cards--creatorPreviewDummySpace_Name--fb75z",N="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",L="community_cards--figjamTileMeta--Sh90c",P="community_cards--figjamTextMetadataCaret--bqK8s",R="community_cards--figjamMetadataContainer--4kXQt",k="community_cards--defaultCursor--K5TUO",D="community_cards--figjamTextMetadataContainer--LBupv",M="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},71013:(e,t,r)=>{r.d(t,{A:()=>I,Bc:()=>M,Fo:()=>c,IK:()=>u,J6:()=>f,MO:()=>y,Nd:()=>L,P5:()=>g,PG:()=>p,RP:()=>h,S3:()=>A,Sz:()=>w,U4:()=>m,VO:()=>R,Vb:()=>b,Vs:()=>P,ar:()=>n,bj:()=>D,dQ:()=>T,e$:()=>S,ej:()=>F,f3:()=>d,kC:()=>i,l6:()=>_,ld:()=>N,mW:()=>o,nu:()=>C,q6:()=>E,tA:()=>l,vT:()=>v,vd:()=>a,vs:()=>O,xT:()=>k,yS:()=>s});let n="comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",i="comment_tile--commentContainerFadeOut--AMWrR",a="comment_tile--nextSiblingCommentReset--4shUj",o="comment_tile--pinnedCommentTile--kYpb3 comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",l="comment_tile--replyComposerContainer--Cfzby",s="comment_tile--iconButton--MZmz1",c="comment_tile--isHiddenIcon--isUzt",d="comment_tile--iconButtonSelected--CaL6y raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",u="comment_tile--selectedCommentTile--9xoJJ comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",p="comment_tile--tempSelectedCommentTile--eo1zi comment_tile--selectedCommentTile--9xoJJ comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",m="comment_tile--commentContent--QUN--",h="comment_tile--commentMetaAndOptions--Avk6k",_="comment_tile--commentOptions--hNQQM",g="comment_tile--commentContentWrapper--L2vv2",f="comment_tile--commentContentWrapperNoBorder--Poey3 comment_tile--commentContentWrapper--L2vv2",E="comment_tile--commentAvatarContainer--e8z35",y="comment_tile--commentAvatar--5xfu2 community_hub_view--creatorInsetBorder--trdtF community_hub_view--creatorInsetBorderNoHover--sfqB-",v="comment_tile--newCommentPinIcon--nHdnf",b="comment_tile--commentAuthor--X2tiN text--fontPos13--xW8hS text--_fontBase--QdLsd",I="comment_tile--commentAuthorLink--3Q-Ty ellipsis--ellipsis--Tjyfa",T="comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd",w="comment_tile--commentAuthorHandle--qrjUX comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",S="comment_tile--commentMetaDivider--pzekb text--fontPos13--xW8hS text--_fontBase--QdLsd",C="comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd",O="comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd",A="comment_tile--messageIsHidden--e-XiE comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd",N="comment_tile--pinnedMetadata--fM0Jb text--fontPos13--xW8hS text--_fontBase--QdLsd",L="comment_tile--pinnedMetadataWithReplies--yZ0-r comment_tile--pinnedMetadata--fM0Jb text--fontPos13--xW8hS text--_fontBase--QdLsd",P="comment_tile--creatorReply--OO0It",R="comment_tile--creatorReplySelectedParent--aVNCs comment_tile--creatorReply--OO0It",k="comment_tile--noSeparator--RL2vm",D="comment_tile--replyAvatars--AkQQd",M="comment_tile--replyCount--rp8ut",F="comment_tile--previewLink--6JK-i"},692765:(e,t,r)=>{r.d(t,{E:()=>n,Eq:()=>o,G1:()=>i,WO:()=>s,fF:()=>l,it:()=>a});let n="detail_view--installButton--IloIX",i="detail_view--installButtonSubtext--iqsQz text--fontPos11--2LvXf text--_fontBase--QdLsd",a="detail_view--pendingInviteBanner--Jfy7s text--fontPos13--xW8hS text--_fontBase--QdLsd",o="detail_view--pendingInviteButton--XYgKx",l="detail_view--paidResourceSection--crSbo detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd",s="detail_view--reportSection--qDu-P detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd"},597927:(e,t,r)=>{r.d(t,{AP:()=>S,DN:()=>p,FZ:()=>C,GO:()=>f,HF:()=>a,IY:()=>E,Ij:()=>i,Lw:()=>m,Mv:()=>d,RL:()=>O,RM:()=>b,Sj:()=>o,Tc:()=>w,Wd:()=>u,YE:()=>y,Yp:()=>l,Zk:()=>h,aY:()=>g,db:()=>c,eC:()=>s,eK:()=>A,oF:()=>v,p4:()=>T,s9:()=>_,w4:()=>I,xf:()=>n});let n="universal_posting_modal--loadingContainer--5giX-",i="universal_posting_modal--modalClose--eqgHH",a="universal_posting_modal--toolBarContainer--9HhzX",o="universal_posting_modal--toolbar--hWp2O",l="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",c="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",d="universal_posting_modal--footer--A-QeR",u="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",p="universal_posting_modal--buttonGroup--C-atN",m="universal_posting_modal--scrollContainer--YtNZ-",h="universal_posting_modal--developmentPluginsListContainer--NCC-b",_="universal_posting_modal--pluginContainer--y5Lud universal_posting_modal--_pluginContainerBase--jcMw7",g="universal_posting_modal--pluginContainerSelected--1Een3 universal_posting_modal--_pluginContainerBase--jcMw7",f="universal_posting_modal--workspaceBarContainer--VHcn1",E="universal_posting_modal--workspaceInfoContainer--l3mjM text--fontPos13--xW8hS text--_fontBase--QdLsd",y="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",v="universal_posting_modal--desktopMessageTitle--3XDQ-",b="universal_posting_modal--desktopMessageSubTitle--UGHlr",I="universal_posting_modal--searchQuery--07ulH",T="universal_posting_modal--link--h1jPd",w="universal_posting_modal--pluginInfo--Kx70e text--fontPos14--OL9Hp text--_fontBase--QdLsd",S="universal_posting_modal--universalPostingSearchContainer--BFSZI",C="universal_posting_modal--xIcon--9icra",O="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",A="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},416830:(e,t,r)=>{r.r(t),r.d(t,{_thumbnailBase:()=>g,buttons:()=>l,contextMenu:()=>b,fieldContainer:()=>a,fieldContainerFaded:()=>o,gridContainer:()=>m,label:()=>n,learnMore:()=>i,listContainer:()=>p,listItemContainer:()=>h,listItemRemoveButton:()=>_,offlineIcon:()=>P,outerContainer:()=>s,outerContainerBorderBottom:()=>c,publishCTA:()=>S,scrollContainer_grid:()=>u,scrollContainer_list:()=>d,skeletonText:()=>L,skeletonThumbnailGrid:()=>N,skeletonThumbnailList:()=>A,thumbnailGrid:()=>E,thumbnailGridBase:()=>f,thumbnailList:()=>v,thumbnailListBase:()=>y,tryAgain:()=>R,trying:()=>k,warning:()=>I,warningIcon:()=>C,warningIconList:()=>O,warningOfflineContainer:()=>T,warningPublish:()=>w});let n="preferred_values_instance_picker--label--to5M3",i="preferred_values_instance_picker--learnMore--zD-c7",a="preferred_values_instance_picker--fieldContainer--JJx3j",o="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",s="preferred_values_instance_picker--outerContainer---jRbV",c="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--scrollContainer_list--kaH92",u="preferred_values_instance_picker--scrollContainer_grid--8kvKL",p="preferred_values_instance_picker--listContainer--BPie-",m="preferred_values_instance_picker--gridContainer--2LTF6",h="preferred_values_instance_picker--listItemContainer--a4t-g",_="preferred_values_instance_picker--listItemRemoveButton--HO05L",g="preferred_values_instance_picker--_thumbnailBase--eAxDp",f="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",y="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",v="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",b="preferred_values_instance_picker--contextMenu--qSN6X",I="preferred_values_instance_picker--warning--bgA-c",T="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--publishCTA--FlNCB",C="preferred_values_instance_picker--warningIcon--2TXXz",O="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",A="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",N="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",L="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",R="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},63888:(e,t,r)=>{r.d(t,{Ah:()=>g,Aj:()=>_,BH:()=>o,Bj:()=>i,Me:()=>b,Mr:()=>l,Se:()=>c,TN:()=>d,_5:()=>f,aU:()=>w,c8:()=>p,cH:()=>E,eB:()=>h,ef:()=>y,er:()=>n,fL:()=>u,h6:()=>v,mJ:()=>s,rB:()=>T,sp:()=>I,uh:()=>a,wz:()=>m});let n="onboard_figjam_viewer--contentContainer--t9zim",i="onboard_figjam_viewer--imageContainer--rvqD8",a="onboard_figjam_viewer--imgHelper--SJXYZ",o="onboard_figjam_viewer--image--ZdwAA",l="onboard_figjam_viewer--mainContent--8TgvP text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",s="onboard_figjam_viewer--normal--HjE2J",c="onboard_figjam_viewer--bold--kC3mV",d="onboard_figjam_viewer--title--k1Gpk",u="onboard_figjam_viewer--text--xkcTB",p="onboard_figjam_viewer--bottomContentRow--PgTeU",m="onboard_figjam_viewer--secondaryText--THVcI",h="onboard_figjam_viewer--secondaryTextClickable--iF6eC onboard_figjam_viewer--secondaryText--THVcI",_="onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",g="onboard_figjam_viewer--closeButton--hm43f close_button--closeX--Bc-63",f="onboard_figjam_viewer--openTutorialModalContainer--O1ld1",E="onboard_figjam_viewer--openTutorialModal--3j-H4 onboard_figjam_viewer--openTutorialModalBase--vDoVP",y="onboard_figjam_viewer--openTutorialModalShadow--HF-Gb onboard_figjam_viewer--openTutorialModalBase--vDoVP",v="onboard_figjam_viewer--openTutorialModalText--9oABQ onboard_figjam_viewer--text--xkcTB",b="onboard_figjam_viewer--openTutorialBottomContentRow--rVWqG onboard_figjam_viewer--bottomContentRow--PgTeU",I="onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",T="onboard_figjam_viewer--openTutorialButtonDisabled--EYffC onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",w="onboard_figjam_viewer--openTutorialSpinner--zV-nH publish_modal--spinner--7DaqW"},834657:(e,t,r)=>{r.d(t,{Aw:()=>_,BY:()=>a,HC:()=>h,LT:()=>g,QQ:()=>n,QX:()=>o,U0:()=>s,Vp:()=>m,b6:()=>c,cL:()=>p,ei:()=>u,lX:()=>i,lq:()=>d,mg:()=>l});let n="-144px",i="desktop_new_tab_view--newTabView--xPTS3",a="desktop_new_tab_view--topSection--YiYaE",o="desktop_new_tab_view--topSectionContent--CzXg6",l="desktop_new_tab_view--topSectionContentWithSlides--KqkAl",s="desktop_new_tab_view--topSectionWithDropdown--i82fQ",c="desktop_new_tab_view--folderDropdown--NyFdh",d="desktop_new_tab_view--folderDropdownPlaceholder--bosVZ",u="desktop_new_tab_view--folderHeader--72sHl",p="desktop_new_tab_view--primaryText--YjgdS",m="desktop_new_tab_view--topSectionDivider--hQ6La",h="desktop_new_tab_view--fileCardsSection--d7yQC",_="desktop_new_tab_view--bottomSection--aWNBL",g="desktop_new_tab_view--hideNewTab--0jOy2"},438049:(e,t,r)=>{r.d(t,{$C:()=>q,A2:()=>a,Af:()=>N,Ap:()=>W,B$:()=>C,BB:()=>D,BH:()=>p,Cp:()=>z,D4:()=>h,E_:()=>P,Fj:()=>c,Fm:()=>l,Js:()=>x,LH:()=>G,ML:()=>T,Nk:()=>Y,OJ:()=>o,Oc:()=>R,PM:()=>$,Qy:()=>f,TN:()=>w,WO:()=>m,WP:()=>F,Wl:()=>J,Xd:()=>V,Zl:()=>A,aX:()=>S,by:()=>y,dJ:()=>M,gR:()=>O,gm:()=>u,ib:()=>k,lg:()=>X,mT:()=>d,nC:()=>n,nM:()=>v,oP:()=>j,rG:()=>Z,sc:()=>E,si:()=>L,t6:()=>B,uw:()=>U,v4:()=>b,vU:()=>_,vy:()=>H,ww:()=>i,xM:()=>g,yl:()=>K,yp:()=>s,ze:()=>I});let n="generic_tile--container--xqtp4",i="generic_tile--selectedContainer--E5qwL generic_tile--container--xqtp4",a="generic_tile--tileBorder--R9mwE",o="generic_tile--genericTile--2zpKN",l="generic_tile--fileTileAvatar---ZvFe",s="generic_tile--subtitleWrapper--QdEiL",c="generic_tile--subtitleWrapperInner--0Yojb",d="generic_tile--ghostTileBorder--bStjU generic_tile--tileBorder--R9mwE",u="generic_tile--pinned--r78GO",p="generic_tile--image--tA2Qx",m="generic_tile--pinnedRedesign--iqXUu",h="generic_tile--pinnedThumbnail--S-sdk",_="generic_tile--pinnedSelected--hHfkd",g="generic_tile--pinnedTitle--lFRyh text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="generic_tile--pinnedSubtitle--VYhL9 ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile--flexHorizontally--yi1QW ellipsis--ellipsis--Tjyfa",E="generic_tile--bottomControls--jJuoY",y="generic_tile--listViewGrid--MRJts generic_tile--_listViewGridBase--AYcYT",v="generic_tile--listView--C0K4U text--fontPos13--xW8hS text--_fontBase--QdLsd",b="generic_tile--listContainerWithStar--pXp0k",I="generic_tile--facePile--fyaBg",T="generic_tile--lowerPartTitles---tAGJ generic_tile--flexVertically--6-8AL",w="generic_tile--title--W6mgQ text--fontPos13--xW8hS text--_fontBase--QdLsd",S="generic_tile--restoreIcon--hJYMc",C="generic_tile--dragFileTile--DQRjU generic_tile--selectedContainer--E5qwL generic_tile--container--xqtp4",O="generic_tile--listViewSlightlyLarger--PWzS9 generic_tile--listView--C0K4U text--fontPos13--xW8hS text--_fontBase--QdLsd",A="generic_tile--gridView--zQM-B",N="generic_tile--tileBorderWithHover--nnP1Q",L="generic_tile--standaloneFileTile--sn0RU generic_tile--container--xqtp4",P="generic_tile--dragContainer--K9eeC",R="generic_tile--subtitle--YfMEL ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile--flexHorizontally--yi1QW",k="generic_tile--listViewStarContainer--56dt8",D="generic_tile--subtitleContainer--1-czM",M="generic_tile--renameInput--BRv-A text--fontPos13--xW8hS text--_fontBase--QdLsd",F="generic_tile--disabledTitle--epMIq generic_tile--title--W6mgQ text--fontPos13--xW8hS text--_fontBase--QdLsd",x="generic_tile--renameInputListView--tXt9j generic_tile--renameInput--BRv-A text--fontPos13--xW8hS text--_fontBase--QdLsd",U="generic_tile--disabledSubtitle--KUU7j generic_tile--subtitle--YfMEL ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile--flexHorizontally--yi1QW",B="generic_tile--subtitleTime--iSNkH ellipsis--ellipsis--Tjyfa",V="generic_tile--settings--0XFMh",G="generic_tile--ellipsis--sTyP8 ellipsis--ellipsis--Tjyfa",H="generic_tile--subtitleMetadata--UTzJB text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",W="generic_tile--modifiedMetadata--rGn83",K="generic_tile--deletedTimestamp--ccQuk ellipsis--ellipsis--Tjyfa",z="generic_tile--genericTileRedesign--ImuaI",Z="generic_tile--topLeftControls---WePt",Y="generic_tile--topRightControls--HQST-",j="generic_tile--visible--YZlHi",$="generic_tile--facepile--gBxnw",q="generic_tile--control--3ci9-",X="generic_tile--branchIndicator--xtKv2",J="generic_tile--disabledThumbnail--nCyNn"},273331:(e,t,r)=>{r.d(t,{Cc:()=>b,Cz:()=>C,IJ:()=>v,JQ:()=>l,MT:()=>f,O3:()=>S,Oh:()=>p,QH:()=>_,Qi:()=>T,SD:()=>s,VW:()=>c,Wz:()=>i,ZJ:()=>n,_q:()=>N,gq:()=>I,gr:()=>d,h2:()=>E,hl:()=>y,k5:()=>g,mg:()=>w,nb:()=>A,qW:()=>L,ux:()=>o,vn:()=>a,w9:()=>h,xj:()=>u,xz:()=>O,yc:()=>m});let n="mobile_download_prompt--mobilePromptContainer--WxLtl",i="mobile_download_prompt--mobileRedesignedDownloadPromptContainer--Kyyn4",a="mobile_download_prompt--mobileDownloadPromptContainer--1KRZt",o="mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--F94m4",l="mobile_download_prompt--mobileDownloadPromptContainerClosed--9wXc1",s="mobile_download_prompt--fullHeightPrompt--mi3KX",c="mobile_download_prompt--mobilePromptImage--CsEnm",d="mobile_download_prompt--mobilePromptTitle--tKWO- text--fontPos13--xW8hS text--_fontBase--QdLsd",u="mobile_download_prompt--mobilePromptSubTitle--5fPJb text--fontPos13--xW8hS text--_fontBase--QdLsd",p="mobile_download_prompt--mobilePromptHR--wjA7i",m="mobile_download_prompt--fullWidthHR--r3OLf",h="mobile_download_prompt--mobilePromptOption--764X8",_="mobile_download_prompt--mobilePromptOptionTitle--TUnFb text--fontPos13--xW8hS text--_fontBase--QdLsd",g="mobile_download_prompt--mobilePromptOptionDescription--tWFT7 text--fontPos11--2LvXf text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOptionImage--vBsWG",E="mobile_download_prompt--downloadActionButton--oyD35",y="mobile_download_prompt--continueActionButton--uhXzD",v="mobile_download_prompt--overlay--mTXMJ",b="mobile_download_prompt--overlayClosed--7-jAV",I="mobile_download_prompt--overlayAnimateEnd--E5M6f",T="mobile_download_prompt--mobilePromoContainer---dQpR",w="mobile_download_prompt--mobilePromoHeaderImg--xPm3z",S="mobile_download_prompt--mobilePromoContent--MD4Ul",C="mobile_download_prompt--extendedIcon--Nuaqr",O="mobile_download_prompt--mobileOptionIcon--sk-Td",A="mobile_download_prompt--mobileOptionsContainer--YApG4",N="mobile_download_prompt--mobilePromptDescriptionContainer--qj1Ie",L="mobile_download_prompt--mobilePromptTitleContainer--LU90S"},760527:(e,t,r)=>{r.d(t,{Ah:()=>i,JB:()=>a,_X:()=>n,qv:()=>o});let n="toolbar_action--hideOnMobile--g1Orc",i="toolbar_action--hideOnDesktop--rBlVs",a="toolbar_action--getDesktop--P1TpW",o="toolbar_action--icon--mDC1q"},346150:(e,t,r)=>{r.d(t,{Ek:()=>E,NT:()=>b,Vn:()=>l,Y2:()=>I,_:()=>i,_X:()=>d,bI:()=>m,bT:()=>p,eG:()=>u,er:()=>o,fF:()=>a,j3:()=>_,jZ:()=>y,lM:()=>s,mP:()=>g,nC:()=>n,u7:()=>v,uE:()=>c,vi:()=>h,zz:()=>f});let n="file_browser_page_view--container--wgWQp",i="file_browser_page_view--tabletOptimizedContainer--rxoPd file_browser_page_view--container--wgWQp",a="file_browser_page_view--scrollableContainerClass--TCxy-",o="file_browser_page_view--contentContainer--lirCR",l="file_browser_page_view--metaContainer--Cz3PC",s="file_browser_page_view--tabletOptimizedMetaContainer--l-KYt file_browser_page_view--metaContainer--Cz3PC",c="file_browser_page_view--mobileToolBarSpacer--yNIQP",d="file_browser_page_view--hideOnMobile--P06ka",u="file_browser_page_view--mx16Mobile--vznBd",p="file_browser_page_view--newDesignFileButton--55uaa basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",m="file_browser_page_view--newFigjamBoardButton--Y44dM basic_form--primaryBtnFigjam--sOysn basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",h="file_browser_page_view--newSlideDeckButton--H0GDP basic_form--primaryBtnSlides--oGUKg basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",_="file_browser_page_view--newFilePlusIcon--XTojv",g="file_browser_page_view--newSlideFilePlusIcon--0H2sm",f="file_browser_page_view--viewBarWrapper--lzAB1",E="file_browser_page_view--viewBarSticky--zMoxz",y="file_browser_page_view--viewBarWrapperNoExtraLeftPadding--ouLqt",v="file_browser_page_view--headerWrapper--QTnvE",b="file_browser_page_view--headerWrapperNoTop--e5kKC",I="file_browser_page_view--footerWrapper--J4DbG"},508735:(e,t,r)=>{r.d(t,{CP:()=>i,KQ:()=>o,Rr:()=>l,qw:()=>a,su:()=>n});let n="feed_post_zoom_pan--zoomPanContainer--bkxcW",i="feed_post_zoom_pan--zoomPanInteractionLayer--sL-Ta",a="feed_post_zoom_pan--guidelineLayer--jYm0- feed_post_zoom_pan--zoomPanInteractionLayer--sL-Ta",o="feed_post_zoom_pan--transformedImage--bE4uG",l="feed_post_zoom_pan--zoomControls--hNwPS feed_post_detail_modal--contentOverlayPill--kpVlk"},814527:(e,t,r)=>{r.d(t,{E0:()=>c,Rx:()=>a,Zu:()=>i,l5:()=>n,q8:()=>l,tq:()=>o,wU:()=>s});let n="team_tile--teamIcon--vtfgY",i="team_tile--emptyState--9kn67 tiles_view--emptyState--uQFY5 text--fontPos11--2LvXf text--_fontBase--QdLsd",a="team_tile--emptyTitle--wz7tU tiles_view--emptyTitle--3l1KM",o="team_tile--emptyButton--eSEvu tiles_view--emptyButton--LWIYf",l="team_tile--newTeamIcon--BXh0F tiles_view--newFileIcon--tOc0Z",s="team_tile--joinSpinner--imJ7Z",c="team_tile--favoriteStarContainer---OsRP button_styles--button--Ix6rT"},925187:(e,t,r)=>{r.d(t,{$o:()=>k,Ac:()=>p,D:()=>m,Db:()=>g,H7:()=>ea,H8:()=>F,HP:()=>T,J:()=>_,Jq:()=>K,KC:()=>q,K_:()=>R,Km:()=>ee,Kp:()=>d,M8:()=>er,MJ:()=>w,MZ:()=>j,Mt:()=>et,Ng:()=>N,Nm:()=>y,Nv:()=>v,Pe:()=>h,R0:()=>ei,TM:()=>J,Vl:()=>U,Wx:()=>l,Xb:()=>L,Yn:()=>x,a0:()=>Y,a7:()=>M,aL:()=>$,bg:()=>s,dp:()=>W,eG:()=>A,fD:()=>O,fL:()=>Q,fz:()=>H,g1:()=>B,g2:()=>X,gl:()=>f,hC:()=>b,iK:()=>n,kZ:()=>C,me:()=>G,mu:()=>S,nt:()=>Z,nx:()=>c,ok:()=>I,pV:()=>o,qR:()=>P,qd:()=>E,r0:()=>D,uR:()=>en,vO:()=>u,wt:()=>a,yP:()=>i,zV:()=>z,zk:()=>V});let n="team_upgrade_v2--teamUpgrade--emch2",i="team_upgrade_v2--breadCrumbsMenuContainer--KtEmN",a="team_upgrade_v2--cancelMenuItem--bjGcr",o="team_upgrade_v2--checkoutStepContainer--Vmcfq",l="team_upgrade_v2--checkoutPageContent--j-2g3",s="team_upgrade_v2--checkoutSidebarContainer---1wVl",c="team_upgrade_v2--stepTitle--8iV70",d="team_upgrade_v2--stepSubtitle--RKsis",u="team_upgrade_v2--adjustEditorsBody--LEJYR",p="team_upgrade_v2--adjustEditorsSection--FFme1",m="team_upgrade_v2--teamWithAvatarHandle--3w-x2",h="team_upgrade_v2--adjustEditorsRow--cSROb",_="team_upgrade_v2--adjustEditorsRowStart--l-tLI team_upgrade_v2--adjustEditorsRow--cSROb",g="team_upgrade_v2--greyDivider--mHQ7e",f="team_upgrade_v2--columnTitle--Z8-gj",E="team_upgrade_v2--editorColumn--L87RK",y="team_upgrade_v2--editorInfo--YQZ1H",v="team_upgrade_v2--normalGreyText--JAc48",b="team_upgrade_v2--truncateEditorColumnText--vM7sa",I="team_upgrade_v2--editorEmail--Wn-b5 team_upgrade_v2--normalGreyText--JAc48 team_upgrade_v2--truncateEditorColumnText--vM7sa",T="team_upgrade_v2--checkboxColumn--hhJ1s",w="team_upgrade_v2--checkbox---aBF3",S="team_upgrade_v2--plusSvg--GLi67",C="team_upgrade_v2--textLink--ZxoEU",O="team_upgrade_v2--paymentStripeContainer--6-Ttk",A="team_upgrade_v2--reviewStepBody--W-yYD",N="team_upgrade_v2--reviewStepBodyWithBusinessDetails--IUuAd",L="team_upgrade_v2--reviewStepBusinessDetails--DXfwr",P="team_upgrade_v2--reviewStepSummary--7rgPo",R="team_upgrade_v2--banner--zZD-Q",k="team_upgrade_v2--reviewStepCheckbox--lu1Yk",D="team_upgrade_v2--reviewStepUpgradeTitle--0OQIl",M="team_upgrade_v2--sidebarTitle--h0CCa",F="team_upgrade_v2--sidebarOption--axo8r",x="team_upgrade_v2--sidebarOptionLabel--DCism",U="team_upgrade_v2--sidebarOptionLabelWithAnnualSavings--3TFBs",B="team_upgrade_v2--sidebarCurrencyContainer--xqYZz",V="team_upgrade_v2--sidebarPayInText--NspAn",G="team_upgrade_v2--teamName--zecVG",H="team_upgrade_v2--billingCycleHeader--64mbk",W="team_upgrade_v2--radioRow--7q8jH",K="team_upgrade_v2--strikethrough--5aHSA",z="team_upgrade_v2--greyStrikethrough--v6928 team_upgrade_v2--strikethrough--5aHSA",Z="team_upgrade_v2--editorCostRow--avzd-",Y="team_upgrade_v2--calculationRow--AUGmm",j="team_upgrade_v2--planComparison--b-Jrh",$="team_upgrade_v2--createTeamButton--pmLjn",q="team_upgrade_v2--createTeamNameInput--E-cTS",X="team_upgrade_v2--createTeamIcon--OlWEH",J="team_upgrade_v2--createTeamTextInput--Drx5a",Q="team_upgrade_v2--createTeamUpgradeExisting--Tde8n",ee="team_upgrade_v2--cartButton--a9UAE",et="team_upgrade_v2--centered--ExzVe",er="team_upgrade_v2--loadingSpinner---zNsR publish_modal--spinner--7DaqW",en="team_upgrade_v2--numeric--AdnQb",ei="team_upgrade_v2--badge--glbGY",ea="team_upgrade_v2--infoSection--nkK4j"},593148:(e,t,r)=>{r.d(t,{CW:()=>c,EG:()=>g,Hp:()=>_,JO:()=>a,Mw:()=>l,Os:()=>u,Oz:()=>E,Rx:()=>I,V_:()=>s,Zu:()=>f,_D:()=>n,cx:()=>h,gG:()=>d,hR:()=>o,jZ:()=>b,nC:()=>m,oT:()=>v,sf:()=>p,tq:()=>T,uv:()=>i,zz:()=>y});let n="tiles_view--tilesGrid--sFT-k tiles_view--tiles--81NRr",i="tiles_view--tilesGridPinned--DWb7M",a="tiles_view--upgradeOverlay---iaEH",o="tiles_view--upgradeTitle--fdiXA text--fontPos20--Bcz97 text--_fontBase--QdLsd",l="tiles_view--upgradeText--pC5vS text--fontPos14--OL9Hp text--_fontBase--QdLsd",s="tiles_view--loading--6s2Gp",c="tiles_view--tilesList--j3ODm tiles_view--tiles--81NRr",d="tiles_view--squashFavoritingColumn--T2vm0",u="tiles_view--fileCount--O-ayw",p="tiles_view--tileActions--vPlRU",m="tiles_view--container--tNe1-",h="tiles_view--pinnedContainer--A-8d3",_="tiles_view--dragSelection--8f-xv",g="tiles_view--emptyStateContainer--FADB9",f="tiles_view--emptyState--uQFY5 text--fontPos11--2LvXf text--_fontBase--QdLsd",E="tiles_view--importPrompt--jO5-9",y="tiles_view--viewBarWrapper--Qk0wb",v="tiles_view--viewBarWrapperWithTopPadding--IETnZ",b="tiles_view--viewBarWrapperNoExtraLeftPadding--FIqUr",I="tiles_view--emptyTitle--3l1KM",T="tiles_view--emptyButton--LWIYf"},147369:(e,t,r)=>{r.d(t,{HF:()=>a,JY:()=>n,Ls:()=>f,Ox:()=>c,ST:()=>E,Sf:()=>_,UR:()=>m,XV:()=>l,_i:()=>y,h$:()=>u,js:()=>h,kb:()=>d,qF:()=>s,r3:()=>i,rA:()=>p,xT:()=>g,yQ:()=>o});let n="desktop_tool_bar--toolBarSpacerContainer--oPlpz",i="desktop_tool_bar--toolBarSpacerContainerTabletOptimized--PKt6e desktop_tool_bar--toolBarSpacerContainer--oPlpz",a="desktop_tool_bar--toolBarContainer--zDA63",o="desktop_tool_bar--pageViewToolBarContainer--4qHRW desktop_tool_bar--toolBarContainer--zDA63",l="desktop_tool_bar--settingsModalToolbarStickyContainer--Yo61U",s="desktop_tool_bar--toolBarContainerFullWidth--21c1o desktop_tool_bar--toolBarContainer--zDA63",c="desktop_tool_bar--toolBarLeftSide--eR-Jx text--fontPos13--xW8hS text--_fontBase--QdLsd",d="desktop_tool_bar--toolBarCenter--r5vRZ",u="desktop_tool_bar--toolBarCenterFullWidth--G-sL8",p="desktop_tool_bar--toolBarRightSide--4p7p3",m="desktop_tool_bar--toolBarTabContent--caJt- ellipsis--ellipsis--Tjyfa",h="desktop_tool_bar--toolBarTabContentBase--8pAAU",_="desktop_tool_bar--chevron--DVjy2",g="desktop_tool_bar--adminSettingsToolBarTabContentBase--HqqkQ",f="desktop_tool_bar--adminSettingsToolBarTabContentSelected--uVXuj",E="desktop_tool_bar--chevronWithoutPadding--5v5-B",y="desktop_tool_bar--chevronSvgContainer--2Mks6"},722955:(e,t,r)=>{r.d(t,{AR:()=>g,Cg:()=>i,Du:()=>_,J1:()=>T,KT:()=>v,OB:()=>m,Ov:()=>p,QM:()=>b,Ve:()=>s,X7:()=>c,YU:()=>E,Yq:()=>d,Zk:()=>u,_T:()=>l,bY:()=>f,cL:()=>h,lH:()=>a,lY:()=>w,nC:()=>n,no:()=>S,tV:()=>I,wz:()=>y,yS:()=>o});let n="footer_banner--container--HxFNE",i="footer_banner--bannerContainer--uRlsy",a="footer_banner--mobileBannerContainer--u6y9d",o="footer_banner--iconButton--XmgF1",l="footer_banner--googleBanner--ic9N1 footer_banner--banner--i9JNi",s="footer_banner--mobileBanner--qguYw footer_banner--banner--i9JNi",c="footer_banner--wordWrapper--w2SGa",d="footer_banner--buttonWrapper--H2Stl",u="footer_banner--clickable--99aMM",p="footer_banner--figmaIcon--sGo3W footer_banner--clickable--99aMM",m="footer_banner--timerIcon--9khH9",h="footer_banner--primaryText--UWvyo",_="footer_banner--mobilePrimaryText--AHCZ9",g="footer_banner--textContainer--T1Z8U",f="footer_banner--mobileTextContainer--MUP8u",E="footer_banner--primaryTextPlaceholder--NbLik",y="footer_banner--secondaryText--6-Mgk",v="footer_banner--mobileSecondaryText--RNxnV",b="footer_banner--mobileSignUpButton--dFlxi",I="footer_banner--mobileSignUpButtonContent--9xsVM",T="footer_banner--fullWidthButtonWrapper--dTHM2",w="footer_banner--spinner--xrqKX",S="footer_banner--spinnerBlade--oJ-MF"},960751:(e,t,r)=>{r.d(t,{J8:()=>d,WH:()=>a,bN:()=>l,dH:()=>u,jy:()=>n,kg:()=>o,nC:()=>i,o6:()=>s,pt:()=>c});let n="fullscreen_accessibility_tree--visuallyHidden---8P2O",i="fullscreen_accessibility_tree--container--rXuNd",a="fullscreen_accessibility_tree--debugModeNode--aGne7",o="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",l="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",u="fullscreen_accessibility_tree--node--WGNTu"},951187:(e,t,r)=>{r.d(t,{CU:()=>C,EO:()=>V,ES:()=>F,Em:()=>I,F2:()=>O,Hi:()=>N,IJ:()=>D,M0:()=>o,Nc:()=>H,OK:()=>u,P_:()=>n,Ud:()=>s,Vm:()=>S,WG:()=>T,XT:()=>v,Yw:()=>M,ZT:()=>_,_P:()=>d,aq:()=>a,bp:()=>y,cw:()=>h,cz:()=>l,dH:()=>c,e5:()=>x,eL:()=>b,gx:()=>R,hQ:()=>p,h_:()=>f,j$:()=>P,jV:()=>E,k4:()=>G,qE:()=>i,rA:()=>m,rp:()=>U,s9:()=>L,t$:()=>w,wC:()=>A,xw:()=>k,yb:()=>B,zp:()=>g});let n="chunk_diff_details--chunkDiffDetails--jy2yz text--fontPos11--2LvXf text--_fontBase--QdLsd",i="chunk_diff_details--divider--2Mr-q",a="chunk_diff_details--layersList--e9S0c",o="chunk_diff_details--mainTitle--vdyvJ text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="chunk_diff_details--disclosure--vEErG",s="chunk_diff_details--caret--u2yzQ",c="chunk_diff_details--node--c80fZ",d="chunk_diff_details--nodeLego--I9McS",u="chunk_diff_details--nodeNames--KWP3B",p="chunk_diff_details--scrollableSection--D4PjI",m="chunk_diff_details--scrollableLayers--hBhdL",h="chunk_diff_details--layersWrapper--kf9DV",_="chunk_diff_details--selectedNode--r8k42",g="chunk_diff_details--nodeTitle--hzugs",f="chunk_diff_details--nodeTitleLego--32B5s",E="chunk_diff_details--nodeTitleRowLego--ajdsT chunk_diff_details--nodeTitleLego--32B5s",y="chunk_diff_details--nodeIcon--ui-4E",v="chunk_diff_details--nodeIconLego--6JkAh",b="chunk_diff_details--leftRightContainer--b0GkS",I="chunk_diff_details--fullWidthContainer--omBg2",T="chunk_diff_details--leftRightContainerLeft--XQxsR",w="chunk_diff_details--left--aF7sL",S="chunk_diff_details--fieldName--3vTK7",C="chunk_diff_details--fieldValue--3wOgr",O="chunk_diff_details--right--Wx1G8",A="chunk_diff_details--changedElement---NaHQ",N="chunk_diff_details--layerColumn--yUJ5S",L="chunk_diff_details--layerColumnHeader--Pyum0",P="chunk_diff_details--layerColumnHeaderBold--hYrEv",R="chunk_diff_details--detailsColumnTreatments--S7L50",k="chunk_diff_details--changedLabel--jqma6 chunk_diff_details--label---p6Jd",D="chunk_diff_details--addedLabel--gLd-C chunk_diff_details--label---p6Jd",M="chunk_diff_details--removedLabel--h5i2C chunk_diff_details--label---p6Jd",F="chunk_diff_details--skipMargin--CW5U-",x="chunk_diff_details--propertyRow--XbRK9",U="chunk_diff_details--propertyElement--NIJBh",B="chunk_diff_details--changesInset--DVnsf",V="chunk_diff_details--fieldNameLego--OdYt4",G="chunk_diff_details--truncTextPadRight--E-Ke0",H="chunk_diff_details--copyableChanges--1LoXJ"},642017:(e,t,r)=>{r.d(t,{$:()=>c,FZ:()=>p,MA:()=>s,Mb:()=>i,Qb:()=>o,RH:()=>d,db:()=>l,pf:()=>n,qI:()=>a,vs:()=>u});let n="attachment--thumbnailButton--CfAkK",i="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",a="attachment--thumbnailImage--Jx4fa",o="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",l="attachment--publishedThumbnailContainer--oFj0f",s="attachment--pendingThumbnailContainer--iL-xu",c="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",d="attachment--composerContainer--mP7Kx",u="attachment--deleteBadge--9aSjm",p="attachment--xIcon--hhlua"},670329:(e,t,r)=>{r.d(t,{AC:()=>y,Fe:()=>T,Ip:()=>_,Ix:()=>v,J8:()=>i,K8:()=>C,O2:()=>S,O_:()=>h,Oh:()=>E,Vm:()=>b,Vr:()=>f,_m:()=>c,a:()=>a,b7:()=>m,cp:()=>n,dU:()=>s,eD:()=>o,fL:()=>I,jn:()=>p,oP:()=>O,sd:()=>A,tc:()=>l,tw:()=>w,vR:()=>d,wH:()=>g,zm:()=>u});let n="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",i="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",a="thread_comment--threadHeaderContainer--0TaTS",o="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",s="thread_comment--addReactionButton--n1Dj5",c="thread_comment--loader--GUeJt",d="thread_comment--threadContainer--oH8Ia",u="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerInner--Bzqm7",h="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd",_="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd",g="thread_comment--threadSubelementNoMargin--aGW6z",f="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--rightJustified--lK8hG",y="thread_comment--leftJustified--HHuN0",v="thread_comment--authorAvatar--xOCLt",b="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",I="thread_comment--text--FHTSU text--fontPos13--xW8hS text--_fontBase--QdLsd",T="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar text--fontPos13--xW8hS text--_fontBase--QdLsd",w="thread_comment--iconButtonSpace--VkGFf",S="thread_comment--attachmentsContainer--lOeTy",C="thread_comment--reactionsContainer--n2YcQ",O="thread_comment--resolvedIcon--YSM3V",A="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},614711:(e,t,r)=>{r.d(t,{IV:()=>d,Kr:()=>l,Nw:()=>f,VE:()=>n,Wr:()=>p,XJ:()=>g,Z2:()=>c,aS:()=>o,fS:()=>s,fU:()=>a,lD:()=>_,oA:()=>u,tA:()=>m,vP:()=>i,vl:()=>h});let n="thread_comment_composer--inputSectionWrapper--Bxyab",i="thread_comment_composer--newComment--eYLj7",a="thread_comment_composer--composerEmpty--VgMY7",o="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",s="thread_comment_composer--leftComposerButtonGroup--6jQ3I",c="thread_comment_composer--submitUpArrowIcon--e8uT9",d="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--textButton--GUo5c",p="thread_comment_composer--editSubmitButtons--GyqGL",m="thread_comment_composer--replyComposerContainer---8DSl",h="thread_comment_composer--replyAuthorElement--qze1r",_="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",g="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",f="thread_comment_composer--actions--7LRnN"},347228:(e,t,r)=>{r.d(t,{BH:()=>T,C5:()=>c,DZ:()=>_,Dr:()=>E,Dx:()=>i,Fs:()=>s,G3:()=>D,JT:()=>S,LH:()=>x,LY:()=>F,OM:()=>v,On:()=>g,QP:()=>G,QR:()=>l,Rv:()=>B,T1:()=>w,TN:()=>m,V_:()=>h,W0:()=>d,YG:()=>k,Zd:()=>f,Zg:()=>o,_u:()=>P,a5:()=>y,cI:()=>C,e3:()=>M,hD:()=>p,m8:()=>u,n4:()=>R,nr:()=>n,pf:()=>N,qi:()=>I,rg:()=>L,uL:()=>b,v1:()=>O,vC:()=>U,vV:()=>V,vs:()=>a,zs:()=>A});let n="compare_changes_modal--modalContainerLarge---iAsD",i="compare_changes_modal--modalInnerContainer--TQZcV",a="compare_changes_modal--compareChangesContainer--81M8-",o="compare_changes_modal--compareChangesContainerLarge--qGkOy",l="compare_changes_modal--containerWithSidePanel--uvMV9",s="compare_changes_modal--header--Y0WnE text--fontPos11--2LvXf text--_fontBase--QdLsd",c="compare_changes_modal--compareChangesInner--873zA",d="compare_changes_modal--leftPanel--1Kn-R",u="compare_changes_modal--history--HO13m",p="compare_changes_modal--compareChanges--r2iMv",m="compare_changes_modal--title--dK8IH",h="compare_changes_modal--loading--9Gj-T",_="compare_changes_modal--versionSubheader--IYdmY",g="compare_changes_modal--imagesContainer--g7KiK",f="compare_changes_modal--imagesContainerSideBySide--Xhrzv compare_changes_modal--imagesContainer--g7KiK",E="compare_changes_modal--imagesContainerSideBySideFullHeight--uk2gl compare_changes_modal--imagesContainerSideBySide--Xhrzv compare_changes_modal--imagesContainer--g7KiK",y="compare_changes_modal--imagesContainerFullHeight--R9vqh compare_changes_modal--imagesContainer--g7KiK",v="compare_changes_modal--imageBoxSideBySide--6Ixmv compare_changes_modal--imageBox---7rqx",b="compare_changes_modal--imageBoxOverlay--m11a8 compare_changes_modal--imageBox---7rqx",I="compare_changes_modal--imageHeader--hifS9 text--fontPos11--2LvXf text--_fontBase--QdLsd",T="compare_changes_modal--image--ikCOw",w="compare_changes_modal--noImage--MWmW0",S="compare_changes_modal--imageBoxDivider--PeKgh",C="compare_changes_modal--changeDetailsContainer--DxPGO",O="compare_changes_modal--changeDetails--Zba3y text--fontPos11--2LvXf text--_fontBase--QdLsd",A="compare_changes_modal--changeDetailsStatus--d0YuM text--fontPos11--2LvXf text--_fontBase--QdLsd",N="compare_changes_modal--fullHeightContainer--TrbSu",L="compare_changes_modal--comparableControls--D403G",P="compare_changes_modal--subheader--rEZjG",R="compare_changes_modal--subheaderSection--0Ma9N",k="compare_changes_modal--historyTitle--eRow5",D="compare_changes_modal--debugUploadFileButton--a-7YM",M="compare_changes_modal--versionName--bA2k4",F="compare_changes_modal--subheaderTitle--hQs3R",x="compare_changes_modal--ellipsis--7w991 ellipsis--ellipsis--Tjyfa",U="compare_changes_modal--versionLabel--9xe00",B="compare_changes_modal--subheaderDivider--NNzCi",V="compare_changes_modal--loadingImage--eCKqt",G="compare_changes_modal--modalError--j-tLH text--fontPos11--2LvXf text--_fontBase--QdLsd"},901778:(e,t,r)=>{r.d(t,{$Q:()=>I,$c:()=>n,$n:()=>i,BL:()=>x,BP:()=>u,DJ:()=>R,DU:()=>m,FU:()=>v,HB:()=>o,I:()=>U,I$:()=>B,IG:()=>F,IQ:()=>b,NQ:()=>C,P9:()=>y,VJ:()=>T,_v:()=>h,a0:()=>L,bN:()=>_,c3:()=>O,ds:()=>M,fI:()=>c,fN:()=>A,gK:()=>D,hj:()=>E,j_:()=>V,kE:()=>s,n2:()=>a,py:()=>p,rJ:()=>d,su:()=>l,t2:()=>S,vI:()=>w,wf:()=>f,xD:()=>P,yy:()=>k,zc:()=>g,zs:()=>N});let n="keyboard_shortcut_panel--keyboardShortcutPanel--M0Z-f",i="keyboard_shortcut_panel--nav--rmt2R",a="keyboard_shortcut_panel--tab--9t5Mb",o="keyboard_shortcut_panel--thinnerTab--lUwLL",l="keyboard_shortcut_panel--spacerTab--yNO02",s="keyboard_shortcut_panel--tabActive--xPG7y keyboard_shortcut_panel--tab--9t5Mb",c="keyboard_shortcut_panel--tabLeftOfActive--aapeI keyboard_shortcut_panel--tab--9t5Mb",d="keyboard_shortcut_panel--tabRightOfActive--pA4GA keyboard_shortcut_panel--tab--9t5Mb",u="keyboard_shortcut_panel--tabActiveCompletedFirstTime--qYX3O keyboard_shortcut_panel--tabActive--xPG7y keyboard_shortcut_panel--tab--9t5Mb",p="keyboard_shortcut_panel--navWithFirstTabActive--KBbpA keyboard_shortcut_panel--nav--rmt2R",m="keyboard_shortcut_panel--navWithLastTabActive--ptUFB keyboard_shortcut_panel--nav--rmt2R",h="keyboard_shortcut_panel--closeX--QSyPA",_="keyboard_shortcut_panel--replayAnimation--ZpPzH",g="keyboard_shortcut_panel--replayAnimationActive--entZF keyboard_shortcut_panel--replayAnimation--ZpPzH",f="keyboard_shortcut_panel--tabContents--UBIdJ",E="keyboard_shortcut_panel--tabContentsCompleted--YcQRt keyboard_shortcut_panel--tabContents--UBIdJ",y="keyboard_shortcut_panel--tabContentsCompletedFirstTime--5s31O keyboard_shortcut_panel--tabContents--UBIdJ",v="keyboard_shortcut_panel--categoryCaption--7m7qR",b="keyboard_shortcut_panel--contents--8ae0D",I="keyboard_shortcut_panel--column--lHvov",T="keyboard_shortcut_panel--caption--a6WBZ",w="keyboard_shortcut_panel--shortcutRow--6AogW",S="keyboard_shortcut_panel--shortcutRowUsed--COYQU keyboard_shortcut_panel--shortcutRow--6AogW",C="keyboard_shortcut_panel--shortcutRowPressed--eQ-Vp keyboard_shortcut_panel--shortcutRow--6AogW",O="keyboard_shortcut_panel--shortcutRowPressedFirstTime--DZrX7 keyboard_shortcut_panel--shortcutRow--6AogW",A="keyboard_shortcut_panel--shortcutRowCompletedTab--F1jL4 keyboard_shortcut_panel--shortcutRowUsed--COYQU keyboard_shortcut_panel--shortcutRow--6AogW",N="keyboard_shortcut_panel--shortcutRowCompletedAllTabs--J5zY3 keyboard_shortcut_panel--shortcutRowUsed--COYQU keyboard_shortcut_panel--shortcutRow--6AogW",L="keyboard_shortcut_panel--shortcutRowHeld--XwsHX keyboard_shortcut_panel--shortcutRowUsed--COYQU keyboard_shortcut_panel--shortcutRow--6AogW",P="keyboard_shortcut_panel--and---b-w4",R="keyboard_shortcut_panel--shortcutName--Q5dhd",k="keyboard_shortcut_panel--shortcutIconCanvas---wufa",D="keyboard_shortcut_panel--shortcutIcon--zS4rz",M="keyboard_shortcut_panel--keyBindings--8LxQV",F="keyboard_shortcut_panel--keyBinding--wvHKI",x="keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp",U="keyboard_shortcut_panel--contentsSpacedOut--Jp-4I keyboard_shortcut_panel--contents--8ae0D",B="keyboard_shortcut_panel--multiCharKeyBox--LZwGA keyboard_shortcut_panel--shortcutBox--9Ltqp",V="keyboard_shortcut_panel--usage--qzeP9"},979391:(e,t,r)=>{r.d(t,{$h:()=>l,Cy:()=>i,I_:()=>p,Lv:()=>n,U7:()=>f,Vv:()=>g,bl:()=>a,eF:()=>u,gG:()=>m,gT:()=>c,gv:()=>d,i$:()=>h,kQ:()=>o,wu:()=>s,y5:()=>_});let n="left_panel--panelContainer--BIp-B left_panel--panelContainerBase--hT1dd",i="left_panel--panelContainerFullHeight--TkS19 left_panel--panelContainerBase--hT1dd",a="left_panel--panelContainerCollapsed--R7QPw",o="left_panel--content--Ba2lL",l="left_panel--panelContainerLoading--ncZv- left_panel--panelContainer--BIp-B left_panel--panelContainerBase--hT1dd",s="left_panel--insetForRulers--Lw1ZT",c="left_panel--edgeInsetForRulers--rcPU4",d="left_panel--insetForRulersFullHeight--ZxsMu",u="left_panel--backgroundGradient--3az9i left_panel--_backgroundGradientBase--IYAcr",p="left_panel--backgroundGradientFullHeight---omeh left_panel--_backgroundGradientBase--IYAcr",m="left_panel--panelContainerResizing--fotih",h="left_panel--edge--YB9lL",_="left_panel--panelContainerHidden--NAQHy left_panel--panelContainer--BIp-B left_panel--panelContainerBase--hT1dd",g="left_panel--noChanges--MUudM",f="left_panel--motionContainer---p-M4"},949925:(e,t,r)=>{r.d(t,{BD:()=>i,F6:()=>p,GY:()=>m,J1:()=>d,PE:()=>h,Ud:()=>c,WG:()=>_,YS:()=>l,Yp:()=>n,hz:()=>u,lf:()=>a,qS:()=>s,u2:()=>o});let n="component_sidebar_asset_tile--fileName--J2dQ0 ellipsis--ellipsis--Tjyfa",i="component_sidebar_asset_tile--secondary--nsKER",a="component_sidebar_asset_tile--nameWrapper--rAA6d",o="component_sidebar_asset_tile--name--3gVvZ ellipsis--ellipsis--Tjyfa",l="component_sidebar_asset_tile--wrapper--5fJmf component_sidebar_asset_tile--_wrapperBase--7olel",s="component_sidebar_asset_tile--listWrapper--WJAUr component_sidebar_asset_tile--_wrapperBase--7olel",c="component_sidebar_asset_tile--caret---LMDc component_sidebar_asset_tile--_caretBase--eIh4G",d="component_sidebar_asset_tile--listCaret--cs9bq component_sidebar_asset_tile--_caretBase--eIh4G",u="component_sidebar_asset_tile--focusableElementWrapper---mXHu",p="component_sidebar_asset_tile--tileWrapper--GTsPX",m="component_sidebar_asset_tile--shownInFlyout--Vku5Q",h="component_sidebar_asset_tile--hoverableElementWrapper--5cPDu",_="component_sidebar_asset_tile--selectedFlyoutFocus--W6bG1"},476534:(e,t,r)=>{r.d(t,{Ih:()=>l,Jm:()=>i,Ne:()=>s,Q:()=>o,ai:()=>c,ld:()=>n,ox:()=>a});let n="cursor_bot--smoothScroll--8NqWp",i="cursor_bot--cursorBotContainer--u2vDL",a="cursor_bot--progressIslandContainer--tuyOW",o="cursor_bot--progressIslandWrapper--Y6p21 cursor_bot--progressIslandBase--R1s-s",l="cursor_bot--progressIslandControls--RN9UK",s="cursor_bot--playbackButton--fHpmO",c="cursor_bot--fullscreenEventBlocker--jPF73"},595616:(e,t,r)=>{r.d(t,{AU:()=>o,Zs:()=>a,bQ:()=>l,n4:()=>n,wN:()=>s,zS:()=>i});let n="chit--chitThumbnail--KxCGp",i="chit--chitAlpha--Mn-aK",a="chit--chit--WdWdx",o="chit--chitBorder--ydYLm",l="chit--chitShowFocus--M0ub5 chit--chit--WdWdx",s="/** @postcss-export-raw */\n\n.chit--chitThumbnail--KxCGp {\n  width: 16px;\n  height: 16px;\n}\n\n.chit--chitAlpha--Mn-aK {\n  right: 0;\n  top: 0;\n  width: 50%;\n  height: 100%;\n  position: absolute;\n  border-top-right-radius: 1px;\n  border-bottom-right-radius: 1px;\n\n  background: url('data:image/svg+xml;utf8,%3Csvg%20width%3D%226%22%20height%3D%226%22%20viewBox%3D%220%200%206%206%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M0%200H3V3H0V0Z%22%20fill%3D%22%23E1E1E1%22/%3E%3Cpath%20d%3D%22M3%200H6V3H3V0Z%22%20fill%3D%22white%22/%3E%3Cpath%20d%3D%22M3%203H6V6H3V3Z%22%20fill%3D%22%23E1E1E1%22/%3E%3Cpath%20d%3D%22M0%203H3V6H0V3Z%22%20fill%3D%22white%22/%3E%3C/svg%3E%0A');\n}\n\n.chit--chit--WdWdx {\n  border-radius: 1px;\n\n  overflow: hidden;\n  position: relative;\n  flex-shrink: 0;\n  height: 16px;\n  width: 16px;\n}\n\n[data-fpl-version='ui3'] .chit--chit--WdWdx {\n    border-radius: var(--radius-small);\n    height: 14px;\n    width: 14px;\n  }\n\n.chit--chitBorder--ydYLm {\n  position: absolute;\n\n  /* Our goal is to draw a 0.5px \"hairline\" border around these chits. However, Chrome\n      doesn't support sub-pixel borders and Safari doesn't support sub-pixel box-shadows,\n      so we use this hack where we draw a 1px box at twice the size and then scale it down. */\n  top: -50%;\n  left: -50%;\n  right: -50%;\n  bottom: -50%;\n  box-shadow: inset 0 0 0 1px var(--color-border, rgba(0, 0, 0, 0.1));\n  transform-origin: center center;\n  transform: scale(0.5);\n}\n\n[data-fpl-version='ui3'] .chit--chitBorder--ydYLm {\n    /* Border radius is twice that of the chit element since we are scaling down */\n    border-radius: calc(var(--radius-small) * 2);\n  }\n\n/* The above fix looks good everywhere except in FireFox on low-density displays. In that\n   case, we just throw our hands in the air and render a 1px border around the chit. */\n\n@media screen and (-webkit-max-device-pixel-ratio: 1.5), screen and (max-resolution: 1.5dppx) {\n  @supports (-moz-appearance: none) {\n    .chit--chitBorder--ydYLm {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: inset 0 0 0 1px var(--color-border, rgba(0, 0, 0, 0.1));\n      transform: none;\n    }\n  }\n}\n\n.chit--chitShowFocus--M0ub5:focus::after {\n    content: '';\n    position: absolute;\n\n    /* Render a border using a shadow on top of the content in .chit */\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    box-shadow: inset 0 0 0 1px var(--color-border-selected, #0d99ff);\n    transform: scale(1);\n  }\n"},708353:(e,t,r)=>{r.d(t,{AM:()=>d,E_:()=>c,Hs:()=>s,Jh:()=>p,K7:()=>_,NO:()=>o,Pf:()=>a,Vm:()=>i,XS:()=>l,lR:()=>g,t5:()=>m,ts:()=>n,vr:()=>u,z2:()=>h});let n="code_inspection_panels--stylePreviewCodeScrollContainer--BgxmE",i="code_inspection_panels--swatch--k-GyP",a="code_inspection_panels--inspectorRow--VL6Ua",o="code_inspection_panels--inspectionGroup--xesmI",l="code_inspection_panels--formattingControls--D3Bma",s="code_inspection_panels--platformSelect--Cq3OJ",c="code_inspection_panels--paintInspector--F0bwe",d="code_inspection_panels--generatedCode--AibGI",u="code_inspection_panels--codePanelContainer--IXb8m",p="code_inspection_panels--codePanelTitle---3WbH inspect_panels--panelTitle--HvsFh text--fontPos11--2LvXf text--_fontBase--QdLsd",m="code_inspection_panels--instancePanel--53DAN",h="code_inspection_panels--instancePanelTitle--s-rGx",_="code_inspection_panels--findSymbolLink--a-bxC blue_link--blueLink--9rlnd",g="code_inspection_panels--findSymbolLinkDisabled--cNFY5 code_inspection_panels--findSymbolLink--a-bxC blue_link--blueLink--9rlnd"},272995:(e,t,r)=>{r.d(t,{E5:()=>n,EV:()=>d,FS:()=>s,J$:()=>m,J3:()=>_,JU:()=>f,Jj:()=>l,Qh:()=>p,TJ:()=>y,Wg:()=>u,bL:()=>a,es:()=>E,kP:()=>i,qt:()=>o,v2:()=>h,xV:()=>g,yp:()=>c});let n="collapsible_property_panel--showOnTitleHover--yqPoD",i="collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",a="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",o="collapsible_property_panel--ui3RowButtons--xHUX3",l="collapsible_property_panel--styleTitle--a7BMw",s="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",c="collapsible_property_panel--titleButton--7yILK",d="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",u="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",p="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",m="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",h="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",_="collapsible_property_panel--panelMixedMessage--UuCKj",g="collapsible_property_panel--panelTitleText--vFGYT",f="collapsible_property_panel--titleButtons--k6Lxk",E="collapsible_property_panel--dropdownOption--cy1JZ",y="collapsible_property_panel--updateIcon--0YXMO"},835143:(e,t,r)=>{r.d(t,{$h:()=>u,Ct:()=>O,I_:()=>s,Il:()=>A,Jn:()=>k,Lv:()=>o,Lw:()=>d,O_:()=>L,Qm:()=>w,Qs:()=>I,Tp:()=>b,VU:()=>g,Yw:()=>D,al:()=>m,bc:()=>c,bp:()=>p,cN:()=>R,cm:()=>f,eF:()=>l,hV:()=>n,hk:()=>S,j_:()=>N,kE:()=>v,n2:()=>y,p4:()=>a,pY:()=>E,rX:()=>C,t6:()=>T,tD:()=>P,u2:()=>h,uR:()=>_,wu:()=>i});let n="properties_panel--panelPosition--oppQ8",i="properties_panel--insetForRulers--rk7or",a="properties_panel--fullHeight--9zPYb",o="properties_panel--panelContainer--cKjqh",l="properties_panel--backgroundGradient--kX5JD left_panel--_backgroundGradientBase--IYAcr",s="properties_panel--backgroundGradientFullHeight--UMg8X left_panel--backgroundGradientFullHeight---omeh left_panel--_backgroundGradientBase--IYAcr",c="properties_panel--scrollOuterContainer--rxp11",d="properties_panel--scrollContainer--o2LxW",u="properties_panel--panelContainerLoading--wdXCI",p="properties_panel--drillDownContainer--VaNDa",m="properties_panel--hidden--JXxwt",h="properties_panel--externalStyleLink--NJGQN",_="properties_panel--propertiesPanel--BQ7Lw",g="properties_panel--propertiesPanelFull--KUhse",f="properties_panel--tabsHeader--b5J9f pages_panel--tabsHeader--ez-pH",E="properties_panel--tabsHeaderBordered--UTQmW properties_panel--tabsHeader--b5J9f pages_panel--tabsHeader--ez-pH",y="properties_panel--tab--G8lIz pages_panel--tab--Uge5B",v="properties_panel--tabActive--s04ep pages_panel--tabActive--BitzC pages_panel--tab--Uge5B",b="properties_panel--stylePreviewContainer--KAG5V",I="properties_panel--exportDefaultPanel--Ha9Bz",T="properties_panel--exportDefaultPanelTitle---Yyle",w="properties_panel--exportDefaultPanelTitleIcon--YfUgd",S="properties_panel--exportDefaultPanelMessage--PnzZn text--fontPos11--2LvXf text--_fontBase--QdLsd",C="properties_panel--prototypePanel--BXFg-",O="properties_panel--toolbarPanel--hkUZX raw_components--panel--0lt3E",A="properties_panel--collapsed--BwTyj",N="properties_panel--flexibleRow--iIqLU",L="properties_panel--rightPanelHeader--97mxh",P="properties_panel--panelHeaderControls--oFMeq",R="properties_panel--fullHeightSidebarTabsHeader--PHP85",k="properties_panel--fullHeightSidebarTabs--WP5tu pages_panel--tabsHeader--ez-pH",D="properties_panel--fullHeightSidebarTabsHeaderControls--qBtE0"},701671:(e,t,r)=>{r.d(t,{Bn:()=>v,C:()=>u,Cg:()=>n,EY:()=>h,FS:()=>C,GN:()=>A,H:()=>g,PS:()=>o,QF:()=>a,QL:()=>T,Qg:()=>k,Sf:()=>m,TH:()=>l,VO:()=>R,Xb:()=>d,Xt:()=>P,Y2:()=>s,YD:()=>c,YM:()=>y,Yp:()=>S,ct:()=>E,e1:()=>I,eA:()=>b,f3:()=>f,ry:()=>O,sm:()=>w,tU:()=>_,ux:()=>p,v6:()=>N,vN:()=>L,xo:()=>i});let n="raw_components--border--SKh2u",i="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",a="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",o="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",s="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",c="raw_components--noPlaceholderLine--KBoD7",d="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="raw_components--noLeftBorder--QE-ZB",p="raw_components--squareRightBorder--ktojw",m="raw_components--chevron--nJiSt",h="raw_components--wide--F33jp",_="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",g="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",f="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",E="raw_components--outlineButton--FyUoF",y="raw_components--modalPanel--wmDfl",v="raw_components--panel--0lt3E",b="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",I="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",T="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",w="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--rowSelected--M2Eip",C="raw_components--panelTitle--VAQQA",O="raw_components--collapsiblePanelTitle--PXa3p",A="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",N="raw_components--panelTitleWithTip--iJvZe raw_components--panelTitle--VAQQA",L="raw_components--panelTitleWithTipText--o5oVa",P="raw_components--panelTitleWithTipIcon---l6SX",R="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",k="raw_components--panelIconContainer--V9E3Z"},397770:(e,t,r)=>{r.d(t,{$F:()=>u,A$:()=>D,BF:()=>P,HF:()=>g,HK:()=>m,I1:()=>S,Kw:()=>b,MP:()=>_,SB:()=>a,Sf:()=>c,U5:()=>l,V3:()=>A,V8:()=>v,W5:()=>s,XD:()=>C,Z:()=>O,ZR:()=>N,Zi:()=>x,a6:()=>L,bE:()=>p,dU:()=>d,fF:()=>i,iJ:()=>h,j6:()=>y,jK:()=>M,mJ:()=>U,nC:()=>n,pp:()=>T,qE:()=>I,qH:()=>o,tR:()=>f,vT:()=>k,w4:()=>E,xA:()=>w,y3:()=>F,zt:()=>R});let n="select--container--UJhOt raw_components--singleRowHeight--dKM4t",i="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",a="select--safariVoiceover--meUJ0",o="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",s="select--inputTextWrapper--kEwIr",c="select--chevron--KfTY2",d="select--inputWithSvg--t6hLE",u="select--inputAlignRight--5HWz5",p="select--boldActionDropdown--ZAbhZ",m="select--inputSvg--Sqy6u",h="select--inputText--I3JIv select--inputTextWrapper--kEwIr",_="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",g="select--inputTextFill--H3tO-",f="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",E="select--dropdownScrollClip--5ft6D",y="select--dropdown--8DAM-",v="select--dropdownContentWrapper--yDAla",b="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",I="select--divider--HfbAX",T="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",w="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",S="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",C="select--optionTruncatedText--QqUBO",O="select--optionTextRemoveRightPadding--ULI6k",A="select--optionFullWidth--sW3Zl",N="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",L="select--rightLabel--I-ojL",P="select--check--xQ8c3",R="select--rightCheck--UdnTu",k="select--rightCheckText--vWTPu",D="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",M="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",F="select--scrollIndicatorChevron--9-te-",x="select--optionIcon--yngNx",U="select--iconToReplaceCheck--MMwXJ"},389479:(e,t,r)=>{r.d(t,{Jt:()=>a,Sf:()=>c,ai:()=>n,kI:()=>l,qH:()=>s,qT:()=>o,x_:()=>i});let n="stack_layout_details_modal--controls--SFjhS",i="stack_layout_details_modal--dropdownControl--PRPD5",a="stack_layout_details_modal--onboardingBody--SQp9T",o="stack_layout_details_modal--onboardingFooter--zfQ2X",l="stack_layout_details_modal--onboardingImg--4Uak-",s="stack_layout_details_modal--input--h2Yc7",c="stack_layout_details_modal--chevron--tW9wo"},356668:(e,t,r)=>{r.d(t,{$o:()=>p,AR:()=>c,Ac:()=>d,GX:()=>a,H7:()=>o,KJ:()=>g,MY:()=>E,Sl:()=>m,Us:()=>s,Vm:()=>h,WK:()=>f,fr:()=>n,ko:()=>_,mY:()=>i,n5:()=>l,tA:()=>u});let n="states_panel--selectPropertyRow--WgdpJ raw_components--_row--rHucX",i="states_panel--selectPropertyLabel--yEdA7",a="states_panel--indentedSelectPropertyLabel--VJ5Tf states_panel--selectPropertyLabel--yEdA7",o="states_panel--indentedExtendedSelectPropertyLabel--42OP1 states_panel--selectPropertyLabel--yEdA7",l="states_panel--selectPropertyDropdown--3zHBh",s="states_panel--selectExtendedPropertyDropdown--mcjM0",c="states_panel--toggleContainer--aBTvd raw_components--singleRowHeight--dKM4t",d="states_panel--toggleExtendedContainer--4-k9b raw_components--singleRowHeight--dKM4t",u="states_panel--errorStateWithCloseButtonBox--jayB0",p="states_panel--errorStateBoxFlush--LYAGK states_panel--errorStateBox--AYnRU",m="states_panel--errorStateBoxRegular--nhPoJ states_panel--errorStateBox--AYnRU",h="states_panel--errorStateBoxHeader--zgSnc",_="states_panel--errorStateBoxTitle--pZ8tj",g="states_panel--errorStateBoxWarningIcon--5BPCj",f="states_panel--errorStateBoxLink--N1Bq6",E="states_panel--instanceSwapConsumptionPanel--OeQdP"},523902:(e,t,r)=>{r.d(t,{$d:()=>I,Cr:()=>O,HP:()=>w,NQ:()=>m,Oh:()=>f,Oi:()=>u,QH:()=>g,QX:()=>S,Qq:()=>d,S5:()=>c,UF:()=>o,Xz:()=>T,bH:()=>h,ik:()=>C,kW:()=>p,ks:()=>E,lb:()=>i,mW:()=>b,no:()=>l,ol:()=>s,rr:()=>a,st:()=>_,uQ:()=>n,uR:()=>v,yB:()=>y});let n="ui3_rows--rowGrabber--LEdtF",i="ui3_rows--rowGrabberDragging--SzSmY ui3_rows--rowGrabber--LEdtF",a="ui3_rows--ui3ToggleInputRow--Vw5k8 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",o="ui3_rows--ui3RowLabelSecond--saDrr ui3_rows--_ui3OrderedRowLabel--zh7nh ui3_rows--_ui3RowLabelBase--wNPq0",l="ui3_rows--ui3RowLabelFirst--vgDpj ui3_rows--_ui3OrderedRowLabel--zh7nh ui3_rows--_ui3RowLabelBase--wNPq0",s="ui3_rows--ui3TwoInputOneIconRow--jbrpq ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",c="ui3_rows--ui3RowIcon--3iLFx",d="ui3_rows--ui3RowInput1--njeCl",u="ui3_rows--ui3RowInput2--6COuW",p="ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_rows--ui3OneIconOneInputTwoIconRow--XFaZl ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",h="ui3_rows--ui3RowInput--fFlpS",_="ui3_rows--ui3RowIcon1--C8EPS",g="ui3_rows--ui3RowIcon2--sXIvf",f="ui3_rows--ui3RowIcon3--DlHQY",E="ui3_rows--ui3OneInputTwoIconRow--Dvqj6 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",y="ui3_rows--ui3FirstInput--7IqAC",v="ui3_rows--ui3LeftIcon--NcU3i",b="ui3_rows--ui3RightIcon--HmYd-",I="ui3_rows--ui3OneInputRow--Vb42b ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",T="ui3_rows--ui3GridDualInput--M3rNu ui3_rows--_grid--cP2Wu",w="ui3_rows--ui3GridDualIcon--LZSvA ui3_rows--_grid--cP2Wu",S="ui3_rows--ui3WideOnly--OIKCn",C="ui3_rows--ui3TwoRow--5SdCR",O="ui3_rows--ui3ClearRow--JcG2u"},394004:(e,t,r)=>{r.d(t,{$k:()=>l,BS:()=>h,D5:()=>T,Li:()=>v,MJ:()=>w,Pm:()=>g,Q1:()=>b,Qr:()=>I,RL:()=>p,Wl:()=>f,Xj:()=>_,Xl:()=>E,Yo:()=>m,cV:()=>i,eK:()=>o,gs:()=>u,h$:()=>d,h8:()=>s,hZ:()=>S,nR:()=>y,oA:()=>n,q6:()=>c,yC:()=>a});let n="quick_actions--compact--vJwJM text--fontPos13--xW8hS text--_fontBase--QdLsd",i="quick_actions--floating--Fwn36 text--fontPos13--xW8hS text--_fontBase--QdLsd",a="quick_actions--search--idQ-C quick_actions--centerItemsVertically--P51YU",o="quick_actions--searchInput--lDesz",l="quick_actions--noresult--XSmr2 quick_actions--centerItemsVertically--P51YU",s="quick_actions--notAvailable---gBi7 quick_actions--centerItemsVertically--P51YU",c="quick_actions--result--vcMc- quick_actions--centerItemsVertically--P51YU",d="quick_actions--resultActive--4xxqK quick_actions--result--vcMc- quick_actions--centerItemsVertically--P51YU",u="quick_actions--resultDisabled--NUR49",p="quick_actions--searchIcon--0Ctmv",m="quick_actions--pluginIcon--huChm",h="quick_actions--iconHolder--dqwl3 quick_actions--centerItemsVertically--P51YU",_="quick_actions--pluginIconSvg--KCxc-",g="quick_actions--resultTextHolder--7XTlu quick_actions--centerItemsVertically--P51YU",f="quick_actions--resultText--opIj8 text--fontPos13--xW8hS text--_fontBase--QdLsd",E="quick_actions--shortcut---PX-w text--fontPos13--xW8hS text--_fontBase--QdLsd quick_actions--centerItemsVertically--P51YU",y="quick_actions--itemCheckedDisabled---SUD4",v="quick_actions--itemChecked--DZ6yH",b="quick_actions--tabShortcutIcon--iQbJc quick_actions--keyIcon--t82RS",I="quick_actions--developmentPluginLabel--Z3GtK text--fontPos9--naThA text--_fontBase--QdLsd quick_actions--centerItemsVertically--P51YU",T="quick_actions--keyLabel--Raj-I",w="quick_actions--checkbox--Tp8PR",S="quick_actions--resultsHeader--wm0KV"},855550:(e,t,r)=>{r.d(t,{$k:()=>o,BS:()=>p,D5:()=>I,Li:()=>y,MJ:()=>T,Pm:()=>_,Q1:()=>v,Qr:()=>b,RL:()=>d,Wl:()=>g,Xj:()=>m,Xl:()=>f,Yo:()=>u,bI:()=>h,cV:()=>n,eK:()=>a,gs:()=>c,h$:()=>s,nR:()=>E,q6:()=>l,yC:()=>i});let n="quick_actions--floating--uGf99 text--fontPos13--xW8hS text--_fontBase--QdLsd",i="quick_actions--search---Oi-e quick_actions--centerItemsVertically--Nb6JD",a="quick_actions--searchInput--PSRk5",o="quick_actions--noresult--NZsEA quick_actions--centerItemsVertically--Nb6JD",l="quick_actions--result--a2QFG quick_actions--centerItemsVertically--Nb6JD",s="quick_actions--resultActive--JnXEf quick_actions--result--a2QFG quick_actions--centerItemsVertically--Nb6JD",c="quick_actions--resultDisabled--Zuza5",d="quick_actions--searchIcon--prXl4",u="quick_actions--pluginIcon--oSF9D",p="quick_actions--iconHolder--dMD0c quick_actions--centerItemsVertically--Nb6JD",m="quick_actions--pluginIconSvg--WMsjq",h="quick_actions--rightChevronIcon--1S5oG",_="quick_actions--resultTextHolder--kfqzE quick_actions--centerItemsVertically--Nb6JD",g="quick_actions--resultText--x40-- text--fontPos13--xW8hS text--_fontBase--QdLsd",f="quick_actions--shortcut--GMKpE text--fontPos13--xW8hS text--_fontBase--QdLsd quick_actions--centerItemsVertically--Nb6JD",E="quick_actions--itemCheckedDisabled--nl8jU",y="quick_actions--itemChecked--zTpUC",v="quick_actions--tabShortcutIcon--f-UdB quick_actions--keyIcon--GFkIK",b="quick_actions--developmentPluginLabel--nhw9I text--fontPos9--naThA text--_fontBase--QdLsd quick_actions--centerItemsVertically--Nb6JD",I="quick_actions--keyLabel--pZTZK",T="quick_actions--checkbox--g-nqt"},894039:(e,t,r)=>{r.r(t),r.d(t,{activeButton:()=>a,chevron:()=>_,delightfulMenu:()=>l,disabledButton:()=>i,enabledButton:()=>n,flyout:()=>s,flyoutButton:()=>u,flyoutDropdownShown:()=>c,fullHeightSidebarChevronActive:()=>g,fullHeightSidebarFlyout:()=>d,fullHeightSidebarFlyoutButton:()=>p,fullHeightSidebarFlyoutDropdownShown:()=>m,grid:()=>h,pointingDropdown:()=>o});let n="toolbar_styles--enabledButton--fEwmC",i="toolbar_styles--disabledButton--wv8Iu",a="toolbar_styles--activeButton--YHzcB",o="toolbar_styles--pointingDropdown--6rrL3",l="toolbar_styles--delightfulMenu--A6bY7",s="toolbar_styles--flyout--S3qfl",c="toolbar_styles--flyoutDropdownShown--WU8JV",d="toolbar_styles--fullHeightSidebarFlyout--d9LJ3 toolbar_styles--flyout--S3qfl",u="toolbar_styles--flyoutButton--lyOUg",p="toolbar_styles--fullHeightSidebarFlyoutButton--dU4LR toolbar_styles--flyout--S3qfl",m="toolbar_styles--fullHeightSidebarFlyoutDropdownShown--rT9w3 toolbar_styles--flyoutDropdownShown--WU8JV",h="toolbar_styles--grid--M8sVG",_="toolbar_styles--chevron--3YF14",g="toolbar_styles--fullHeightSidebarChevronActive--uKzVC"},541389:(e,t,r)=>{r.d(t,{BT:()=>b,Bb:()=>R,DN:()=>c,EY:()=>y,Gq:()=>V,Iv:()=>A,JY:()=>S,MT:()=>N,PI:()=>k,PS:()=>T,Pm:()=>w,Q_:()=>P,Qg:()=>M,Qx:()=>C,Sj:()=>n,Ti:()=>x,Ug:()=>h,VY:()=>g,V_:()=>l,ZY:()=>H,ab:()=>m,ae:()=>d,al:()=>s,fT:()=>U,fv:()=>v,h4:()=>o,im:()=>p,kd:()=>O,mN:()=>I,oA:()=>D,oU:()=>B,qE:()=>G,r5:()=>W,rA:()=>_,u$:()=>u,wQ:()=>f,wu:()=>a,xr:()=>F,yF:()=>L,yS:()=>E,zO:()=>i});let n="toolbar_view--toolbar--RuPI6",i="toolbar_view--toolbarTransparent--wNgal",a="toolbar_view--insetForRulers--YtCJE",o="toolbar_view--figjamBorder--KF3VY",l="toolbar_view--loading--fU68L",s="toolbar_view--hidden--eM-fR",c="toolbar_view--buttonGroup--UA9-B",d="toolbar_view--leftButtonGroup--qkjBh",u="toolbar_view--rightButtonGroup--weV86",p="toolbar_view--pillStyle---KKcU",m="toolbar_view--hideTools--No4T8",h="toolbar_view--centerButtonGroup--kxpQA",_="toolbar_view--cachedFilenameViewSubtree--JoP3h",g="toolbar_view--menuButton--nAIP3",f="toolbar_view--fullHeightSidebarsMenuButton--n1GxQ toolbar_view--menuButton--nAIP3",E="toolbar_view--iconButton--1MUm6",y="toolbar_view--wide--Mpb1c",v="toolbar_view--toolbarIconButtonContainer--1fBp0",b="toolbar_view--actionButtonContainer--7fDmd",I="toolbar_view--actionButtonBadge--2cmhk",T="toolbar_view--label--O5fOT ellipsis--ellipsis--Tjyfa",w="toolbar_view--textButtonContainer--17OKy",S="toolbar_view--shareButtonBadge--59oG8",C="toolbar_view--shareButtonContainer---NffN",O="toolbar_view--fullHeightSidebarShareButtonContainer--sFbr3 toolbar_view--shareButtonContainer---NffN",A="toolbar_view--shareButton--BQHDt toolbar_view--textButtonContainer--17OKy",N="toolbar_view--shareButtonZoomControlRedesign--b9hOl toolbar_view--shareButton--BQHDt toolbar_view--textButtonContainer--17OKy",L="toolbar_view--shareButtonWorkshop---w1IS",P="toolbar_view--shareButtonLoading--qqvrA",R="toolbar_view--shareButtonPersonalDraftDisabled--agioS toolbar_view--shareButton--BQHDt toolbar_view--textButtonContainer--17OKy",k="toolbar_view--shareButtonFigjamDisabled--QvCqb",D="toolbar_view--textButton--THnFZ basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",M="toolbar_view--toolButtonContainer--IRGt-",F="toolbar_view--unreadDotActive--KHyuc",x="toolbar_view--unreadDot--zuWYA",U="toolbar_view--loginButton--kH7Jx",B="toolbar_view--unsavedChangesIconContainer--zEmEv",V="toolbar_view--unsavedChangesIcon--rYfws",G="toolbar_view--missingFontSvg--hHv5S",H="toolbar_view--sidebarCollapseIcon--WaEZ-",W="toolbar_view--focusModeVariantsToggleActiveButton--VqPiO"},52002:(e,t,r)=>{r.d(t,{$C:()=>i,I1:()=>o,Jz:()=>n,Op:()=>c,Q6:()=>l,fL:()=>a,uh:()=>s,wN:()=>d});let n="variable_pill--root--0ibUT",i="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",a="variable_pill--text--Fm5k5",o="variable_pill--invalid--dxyCJ",l="variable_pill--deletedIcon--QaRlG",s="variable_pill--inferredIcon--eLJef",c="variable_pill--isHovered--qumV3",d="/** @postcss-export-raw */\n\n.variable_pill--root--0ibUT {\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 8px;\n  overflow: hidden;\n  max-width: 100%;\n}\n\n.variable_pill--pill--NU8eR {\n  display: flex;\n  gap: 3px;\n}\n\n.variable_pill--text--Fm5k5 {\n  -webkit-user-select: none;\n          user-select: none;\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.variable_pill--invalid--dxyCJ {\n  -webkit-text-decoration: line-through;\n  text-decoration: line-through;\n}\n\n.variable_pill--deletedIcon--QaRlG {\n  fill: var(--color-icon-secondary);\n}\n\n.variable_pill--inferredIcon--eLJef {\n  fill: var(--color-icon-secondary);\n}\n\n.variable_pill--inferredIcon--eLJef:hover {\n    fill: var(--color-icon-tertiary-hover);\n  }\n\n.variable_pill--root--0ibUT.variable_pill--isHovered--qumV3 .variable_pill--inferredIcon--eLJef {\n  fill: var(--color-icon-tertiary-hover);\n}\n"},197897:(e,t,r)=>{r.d(t,{QE:()=>n,R1:()=>i,T5:()=>c,U3:()=>u,W9:()=>l,ho:()=>o,p:()=>a,qZ:()=>s,wN:()=>p,yS:()=>d});let n="variable_pill_base--pillBase--HIf9B",i="variable_pill_base--pillHasIcon--qR8Mw",a="variable_pill_base--pillDefault--5YSwx",o="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDisabled--Xci9C",s="variable_pill_base--pillDisabledTertiary--C2fJb",c="variable_pill_base--pillSelected--WuPhz",d="variable_pill_base--pillInSelection--HupPT",u="variable_pill_base--pillNarrow--Oai69",p="/** @postcss-export-raw */\n\n.variable_pill_base--pillBase--HIf9B {\n  align-items: center;\n  border-radius: 4px;\n  border-width: 1px;\n  border-style: solid;\n  box-sizing: border-box;\n  height: 20px;\n  overflow: hidden;\n  padding: 0 5px;\n  display: inline;\n}\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillHasIcon--qR8Mw {\n    padding: 0 5px 0 3px;\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillDefault--5YSwx {\n    color: var(--color-text);\n    background-color: var(--color-bg-secondary);\n    border-color: var(--color-border);\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillDefault--5YSwx:not(.variable_pill_base--pillDisableHover--A9znd):hover {\n      background-color: var(--color-bg-tertiary);\n      border-color: var(--color-bg-tertiary);\n    }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillDisabled--Xci9C {\n    color: var(--color-text-disabled);\n    background-color: var(--color-bg-secondary);\n    border-color: var(--color-border);\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillDisabled--Xci9C:not(.variable_pill_base--pillDisableHover--A9znd):hover {\n      background-color: var(--color-bg);\n      border-color: var(--color-border);\n    }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillDisabledTertiary--C2fJb {\n    color: var(--color-text-tertiary);\n    background-color: var(--color-bg);\n    border-color: var(--color-border);\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillSelected--WuPhz {\n    color: var(--color-text);\n    background-color: var(--color-bg-selected);\n    border-color: var(--color-border-selected);\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillInSelection--HupPT {\n    color: var(--color-text);\n    background-color: var(--color-bg-onselected);\n    border-color: var(--color-border-onselected);\n  }\n\n.variable_pill_base--pillBase--HIf9B.variable_pill_base--pillNarrow--Oai69 {\n    padding: 0 2px;\n  }\n\n[data-fpl-version='ui3'] .variable_pill_base--pillBase--HIf9B {\n    height: var(--spacer-3);\n    border-radius: var(--radius-medium);\n    padding: var(--spacer-0) var(--spacer-1);\n  }\n"},661829:(e,t,r)=>{r.d(t,{Cg:()=>l,LI:()=>n,LV:()=>d,R0:()=>a,TE:()=>i,tO:()=>o,wo:()=>s,z$:()=>c});let n="go_to_stripe_button--button--7wJjr",i="go_to_stripe_button--buttonConstrained--f8nDf",a="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",o="go_to_stripe_button--warningIcon--eeAU7",l="go_to_stripe_button--bannerContainer--QiRC1",s="go_to_stripe_button--bannerContainerWarning--pqfuE go_to_stripe_button--bannerContainer--QiRC1",c="go_to_stripe_button--updatePaymentText--OJxG9 text--fontPos11--2LvXf text--_fontBase--QdLsd",d="go_to_stripe_button--bannerRight--pD3Zz"},19567:(e,t,r)=>{r.d(t,{A$:()=>a,Dv:()=>i,Mu:()=>n});let n="dock--dock--A6jIs",i="dock--dockDesign--kbym5 dock--dock--A6jIs",a="dock--dockLeft--fAueV dock--dock--A6jIs"},943275:(e,t,r)=>{r.d(t,{$x:()=>P,Aj:()=>S,An:()=>U,C7:()=>c,E$:()=>s,E6:()=>b,EB:()=>K,F7:()=>W,Fl:()=>Z,Hp:()=>k,IO:()=>o,Iz:()=>_,J:()=>h,L0:()=>n,L3:()=>u,LO:()=>a,NP:()=>M,Nd:()=>T,Qw:()=>d,R:()=>D,RV:()=>V,T2:()=>y,Uu:()=>m,VY:()=>g,Vs:()=>w,Ym:()=>A,ZY:()=>x,_5:()=>i,_W:()=>R,_b:()=>f,a$:()=>l,ar:()=>C,c8:()=>H,j5:()=>E,l4:()=>F,nH:()=>v,qh:()=>O,sJ:()=>B,t9:()=>N,vb:()=>p,x:()=>G,x$:()=>L,yc:()=>I,zB:()=>z});let n="resource_tiles--showOnHover--2v687",i="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",a="resource_tiles--fauxFocused--Tk7MC",o="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",s="resource_tiles--pluginTitleBadgeContainer--Q-9cz",c="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",d="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",u="resource_tiles--pluginTileMeta--xgpJR",p="resource_tiles--browsePluginTileDevModeWizard--ApW9E",m="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",h="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",_="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",g="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileCommunityDescription__OLD--AQ2X1 ellipsis--ellipsis--Tjyfa",E="resource_tiles--pluginTileCommunityDescription--TiroQ ellipsis--ellipsis--Tjyfa",y="resource_tiles--communityTilePublisherAndMetrics--49SDI",v="resource_tiles--communityTileMetricsContainer--J2NZy",b="resource_tiles--communityTilePublisherAndMetricsDivider--ifJSy",I="resource_tiles--ctaButtonContainer--z2HxW",T="resource_tiles--priceBadgeContainer--6O7DF",w="resource_tiles--widgetMonetizationBadge--hXbF6",S="resource_tiles--ctaButton--qu-bG",C="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",O="resource_tiles--buttonSubmenuChevron--af8r9",A="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",N="resource_tiles--rowChevron--tIIjl",L="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",P="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",R="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",k="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",D="resource_tiles--widgetTileMetadata--Ggrsh",M="resource_tiles--widgetTileNameContainer--HqAEf",F="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",x="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",U="resource_tiles--paymentErrorIcon--w-8j9",B="resource_tiles--widgetTileDescription--Nbm5J ellipsis--ellipsis--Tjyfa",V="resource_tiles--developmentIcon--cQxaQ",G="resource_tiles--relativeContainer--7lvHF",H="resource_tiles--redDot---lNFV red_dot--baseRedDot--AZelu",W="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",K="resource_tiles--saveButtonVisible---tZad",z="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",Z="resource_tiles--svg16--B1UCN"},16249:(e,t,r)=>{r.d(t,{$l:()=>R,$m:()=>v,DN:()=>f,Es:()=>w,Fn:()=>i,Gr:()=>y,IJ:()=>N,KZ:()=>_,O4:()=>L,PS:()=>u,Ry:()=>n,Ti:()=>h,UA:()=>I,VX:()=>c,Wg:()=>l,Wi:()=>S,Wj:()=>a,Y2:()=>p,ZE:()=>b,dV:()=>k,df:()=>C,dr:()=>E,eL:()=>m,fP:()=>g,kW:()=>P,oC:()=>o,r7:()=>s,r8:()=>A,rZ:()=>O,uu:()=>T,vb:()=>d});let n="bug_reporter_modal--draggableModalHeader--0xz5X",i="bug_reporter_modal--dragTarget--PzWPP",a="bug_reporter_modal--dragOverlay---tMtc",o="bug_reporter_modal--modal--V8CL-",l="bug_reporter_modal--asanaSection--71SIy",s="bug_reporter_modal--asanaHint--I0Tif",c="bug_reporter_modal--testWarning--2XO-z",d="bug_reporter_modal--warningLink--Gqqm8",u="bug_reporter_modal--label--2Af-p",p="bug_reporter_modal--textInput--VxO4j",m="bug_reporter_modal--textArea--CzoUf",h="bug_reporter_modal--checkboxContainer--CWL2-",_="bug_reporter_modal--checkboxInfo--XiaW-",g="bug_reporter_modal--checkboxTooltip--tIWTn",f="bug_reporter_modal--buttonGroup--tQlZ-",E="bug_reporter_modal--buttonGroupLeftAlign--rsxni",y="bug_reporter_modal--successHeader--AM-rR",v="bug_reporter_modal--linkSection--gq4vQ",b="bug_reporter_modal--successLink--1HN6S",I="bug_reporter_modal--slackButtonInfo--sWMTm",T="bug_reporter_modal--openSlackButton---N1SM",w="bug_reporter_modal--modalDragging--YuLUg",S="bug_reporter_modal--fileUpload--R3LW- bug_reporter_modal--flexCenter--4wKHZ bug_reporter_modal--attachmentSize--HLvfi",C="bug_reporter_modal--attachmentSection--t-gf-",O="bug_reporter_modal--attachmentContainer--XtbdG bug_reporter_modal--attachmentSize--HLvfi",A="bug_reporter_modal--attachmentPreview--pXBtw",N="bug_reporter_modal--overlay--27tuj bug_reporter_modal--flexCenter--4wKHZ",L="bug_reporter_modal--removeIcon--a8Bv2",P="bug_reporter_modal--announcementModal--KdDe3",R="bug_reporter_modal--announcementHeader--SCdu3",k="bug_reporter_modal--announcementContent--E6PRP"},102677:(e,t,r)=>{r.d(t,{Ac:()=>_,Cc:()=>I,R8:()=>c,TN:()=>m,TU:()=>f,Tr:()=>u,UN:()=>l,WR:()=>o,Wq:()=>y,Y2:()=>h,Ys:()=>w,c3:()=>S,ef:()=>p,iY:()=>n,kN:()=>T,mF:()=>b,nC:()=>v,nc:()=>i,oC:()=>d,pb:()=>a,qQ:()=>E,vU:()=>g,xK:()=>s});let n="modal--confirmButton--SNUDv",i="modal--cancelLink--gmgMU modal--button--ZJmGG",a="modal--list--AYXsM",o="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--buttonRow--o2A0S",s="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",c="modal--buttonRowGroup--7L3uw",d="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",u="modal--modalContent--P643j",p="modal--important--qfd6R",m="modal--title--sEkWg",h="modal--textInput---r1fJ",_="modal--tfaQrCode--Xy6Qb",g="modal--error--Kk49K",f="modal--code--zhp08",E="modal--codes--U1NYW",y="modal--avatarWithHandle--AJpEE",v="modal--container--LVq8G",b="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",I="modal--blockQuoteHeader--IKpaG",T="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",w="modal--select--a5n-Q",S="modal--positionAbsoluteImportant--qA-SU"},578627:(e,t,r)=>{r.d(t,{AF:()=>v,AN:()=>m,Ah:()=>a,Bw:()=>p,F2:()=>A,FI:()=>o,G2:()=>L,HX:()=>h,Hd:()=>R,I:()=>C,Jg:()=>k,K8:()=>M,Se:()=>b,Ti:()=>P,V4:()=>i,VE:()=>E,WO:()=>U,Yr:()=>F,_J:()=>g,bk:()=>n,bx:()=>w,gk:()=>s,hG:()=>N,i5:()=>B,j$:()=>D,kg:()=>l,kj:()=>f,kt:()=>x,l5:()=>_,lv:()=>c,mJ:()=>y,pt:()=>T,sH:()=>d,t$:()=>O,tB:()=>I,tX:()=>V,wX:()=>u,we:()=>S});let n="8px",i="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",a="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",l="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",s="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",c="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",p="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",m="pointer_modal--ctaButtonDiv--kXQXv",h="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",_="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",g="pointer_modal--footerDiv--JtCDN",f="pointer_modal--ctaContainer--luZLz",E="pointer_modal--connectorModal--Adxkh",y="pointer_modal--normal--BIIPY",v="pointer_modal--shadow--wdDMe",b="pointer_modal--bold--cXTTH",I="pointer_modal--zDom--ODE-k",T="pointer_modal--zCanvas--UhXWk",w="pointer_modal--connector--6LWaP",S="pointer_modal--top--FKowX",C="pointer_modal--bottom--eio8M",O="pointer_modal--left--1j5Nt",A="pointer_modal--right--nwMNE",N="pointer_modal--verticalConnectorLine---AFah",L="pointer_modal--horizontalConnectorLine--y5InX",P="pointer_modal--connectorNode--diOtX",R="pointer_modal--noMotion--YIicU",k="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",D="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",M="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",F="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",x="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",U="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",B="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",V="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},726422:(e,t,r)=>{r.d(t,{$j:()=>a,Aj:()=>D,Dv:()=>v,F2:()=>c,G3:()=>o,JW:()=>N,L4:()=>P,M8:()=>M,Mv:()=>m,ND:()=>w,No:()=>f,P0:()=>E,UI:()=>R,UN:()=>g,ZY:()=>u,ak:()=>h,ax:()=>S,b$:()=>y,bt:()=>C,k3:()=>i,kQ:()=>n,kr:()=>d,mP:()=>k,o5:()=>l,oC:()=>I,pr:()=>b,rM:()=>_,t$:()=>s,us:()=>p,yC:()=>A,yj:()=>O,yn:()=>L,zO:()=>T});let n="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",i="rcs_components--content_v2--e-qFs text--fontPos11--2LvXf text--_fontBase--QdLsd",a="rcs_components--contentMobile--D3SLD text--fontPos13--xW8hS text--_fontBase--QdLsd",o="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",l="rcs_components--contentFeatureUpdate_v2--p2nnj text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",s="rcs_components--left--tk2a9",c="rcs_components--right--tauBL",d="rcs_components--separator--8xup2",u="rcs_components--buttons--GGyLs",p="rcs_components--imgContainer--JofI3",m="rcs_components--footer--l5bb0",h="rcs_components--footer_v3--3EWin",_="rcs_components--footerStepCounter--jKzRi",g="rcs_components--buttonRow--OfMRY",f="rcs_components--closeButtonDefault--q8cPK rcs_components--closeButtonBase--wooGI",E="rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",y="rcs_components--closeButtonMobileOnLight--jElEv rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",v="rcs_components--closeButtonOnDark--SRWWX rcs_components--closeButtonBase--wooGI",b="rcs_components--closeButtonHighContrast--Dlf2s rcs_components--closeButtonBase--wooGI",I="rcs_components--modal--sgfHP",T="rcs_components--mobileModal--yvxOb",w="rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",S="rcs_components--fullscreenBackground--tIex6",C="rcs_components--fullscreenWelcomeSequenceModal--cuKAh rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",O="rcs_components--paginationButton--TPbbv",A="rcs_components--primaryPaginationButton--gfezc rcs_components--paginationButton--TPbbv",N="rcs_components--hiddenPaginationButton--K5lX1",L="rcs_components--modalAnimateIn--zcZjW",P="rcs_components--bottomRightModalContainer--KnCz8",R="rcs_components--centerModalContainer--V6MlJ",k="rcs_components--centerModalContainerInner--j4P5U",D="rcs_components--ctaButton--5FSzm",M="rcs_components--loadingSpinner--rOHo1"},752487:(e,t,r)=>{r.d(t,{Ah:()=>a,Gj:()=>d,Hg:()=>l,Se:()=>n,VB:()=>u,XW:()=>o,ZB:()=>c,aN:()=>h,dm:()=>s,em:()=>p,gI:()=>g,hr:()=>i,jN:()=>m,nK:()=>_});let n="onboarding--bold--N-fnA",i="onboarding--centeredText--9h5aS",a="onboarding--closeButton--cqvr-",o="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",l="onboarding--communityDuplicateModal--uG9y7 rcs_components--overflowingModal--QrH-H",s="onboarding--communityDuplicateModalInner--HSIRJ",c="onboarding--dismiss--Vi5jc",d="onboarding--communityNew--kHK85 text--fontPos13--xW8hS text--_fontBase--QdLsd",u="onboarding--communityLandingEditorLeft--FBrzi",p="onboarding--editorOnboardingHeader--Kk5Cb",m="onboarding--landingImgContainer--cGDDW",h="onboarding--inner--iQKer",_="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",g="onboarding--shelfSubtitle--juWHB text--fontPos13--xW8hS text--_fontBase--QdLsd"},948042:(e,t,r)=>{r.d(t,{AN:()=>k,FB:()=>_,HP:()=>I,Ic:()=>S,Iu:()=>u,LP:()=>M,Lw:()=>l,O7:()=>T,Q4:()=>n,SH:()=>R,Sf:()=>m,TS:()=>w,Tc:()=>y,VJ:()=>L,Vw:()=>N,XS:()=>D,X_:()=>c,Zp:()=>C,Zu:()=>A,_A:()=>E,aw:()=>O,bB:()=>b,bv:()=>g,c_:()=>a,eR:()=>f,ge:()=>s,rG:()=>v,sL:()=>d,tD:()=>p,ub:()=>i,w8:()=>h,x7:()=>o,zi:()=>P});let n="multi_select_list--actionBar--T9qpZ",i="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",a="multi_select_list--actionIcon--3FtZB",o="multi_select_list--arrow--CW8ia",l="multi_select_list--scrollContainer--B-Dk-",s="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--dropdownColumn--n-MKQ table--column--974RA",m="multi_select_list--chevron--v5fMB",h="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",_="multi_select_list--menuBarLeft--aUL8Q",g="multi_select_list--menuBarRight--ZRnOb",f="multi_select_list--menuBarDropdown--Lf9-4",E="multi_select_list--stickyHeader--FkV5r",y="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",v="multi_select_list--headerRow--22Lao",b="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",I="multi_select_list--checkboxColumn--SgkHV",T="multi_select_list--row--nfio-",w="multi_select_list--unselectedCheckbox--KAaaj",S="multi_select_list--rowWithRoundedBorder--im1TP",C="multi_select_list--notFirstRowInSelectedGroup--3m6oH",O="multi_select_list--notLastRowInSelectedGroup--N4myp",A="multi_select_list--emptyState--QQcOE",N="multi_select_list--checkboxMenuButton--9l3KJ multi_select_list--_menuButtonBase--mqxd7",L="multi_select_list--batchActionCount--R41SC",P="multi_select_list--batchActionClear--7q1Vl",R="multi_select_list--actionButton--D2K4w",k="multi_select_list--dropdownColumnDisabled--Ww1Nl table--column--974RA",D="multi_select_list--longList--Oz-Pp",M="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV"},631543:(e,t,r)=>{r.d(t,{$H:()=>p,Fd:()=>m,JW:()=>f,Pn:()=>_,QO:()=>c,T5:()=>d,Yb:()=>u,Yd:()=>g,cQ:()=>h,d2:()=>I,dI:()=>E,hb:()=>b,n3:()=>y,ov:()=>o,p5:()=>v,pp:()=>s,s$:()=>i,vC:()=>a,vT:()=>n,yJ:()=>l});let n="voice_users--voiceParticipantAvatar--7mhMG",i="voice_users--overflowRow--dyDR2",a="voice_users--nameAndSuffixContainer--GGoKj",o="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",s="voice_users--flexRightContainer--Su6EL",c="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",d="voice_users--participantStatus--cnVtZ",u="voice_users--participantRow--D4Yar",p="voice_users--hoverable--tq5aE",m="voice_users--containsCursor--Wx6C4",h="voice_users--secondaryMenuIconButtonContainer--aAh8o",_="voice_users--secondaryActionsMenuButton--2emFq",g="voice_users--secondaryActionsMenuButtonActive--QoLJK",f="voice_users--multiplayerUserView--7nAcD",E="voice_users--voiceUsersWrapper--83FhS",y="voice_users--voiceUsersOverflowScrollingContainer--KXSUW",v="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",b="voice_users--voiceUserHeadphonesIcon--wLuPW",I="voice_users--mutedContainer--JL7uZ"},271119:(e,t,r)=>{r.d(t,{AF:()=>s,Ah:()=>n,Fl:()=>m,KZ:()=>a,Lw:()=>u,Os:()=>g,Rc:()=>o,SC:()=>_,d$:()=>i,eG:()=>p,ib:()=>h,lY:()=>l,qp:()=>c,tn:()=>d});let n="universal_upgrade_sequence--closeButton--qwcIV",i="universal_upgrade_sequence--modalTitle--ZDSwg text--fontPos18--rYXJb text--_fontBase--QdLsd",a="universal_upgrade_sequence--modalSubtitle--n7j6m text--fontPos14--OL9Hp text--_fontBase--QdLsd",o="universal_upgrade_sequence--createTeamInput--d4T9x basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--spinner--YVGDi",s="universal_upgrade_sequence--tileUpgradeButton--CdyjW",c="universal_upgrade_sequence--nextButtonSmall--ecJXs universal_upgrade_sequence--nextButton--DyyxF",d="universal_upgrade_sequence--createTeamSection--Rctc7",u="universal_upgrade_sequence--scrollContainer--TiHnj",p="universal_upgrade_sequence--scrollContainerTopBorder--ayGFD",m="universal_upgrade_sequence--scrollContainerBottomBorder--0Sieo",h="universal_upgrade_sequence--teamTileContainer--yc461 org_self_serve--teamLargeTileContainer--0-UBG",_="universal_upgrade_sequence--teamTile--O1mwm org_self_serve--teamTileLarge--0FsN1 text--fontPos14--OL9Hp text--_fontBase--QdLsd",g="universal_upgrade_sequence--lastTeamTile--AtKzt universal_upgrade_sequence--teamTile--O1mwm org_self_serve--teamTileLarge--0FsN1 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},723726:(e,t,r)=>{r.d(t,{w:()=>n});let n="/** @postcss-export-raw */\n\n/*\n * Stylesheet for all quill editor related content.\n * Branched off of https://cdn.quilljs.com/1.3.6/quill.snow.css\n */\n\n.text-editor {\n  border: 1px solid var(--color-border, #d4d4d4);\n  border-radius: 3px;\n}\n\n.text-editor:focus-within {\n    margin: -1px;\n    border: 2px solid var(--color-border-selected, #0d99ff);\n  }\n\n[data-fpl-version='ui3'] .text-editor {\n    border-radius: var(--radius-medium);\n  }\n\n[data-fpl-version='ui3'] .text-editor:focus-within {\n      margin: var(--spacer-0);\n      border-width: 1px;\n    }\n\n.ql-toolbar button {\n    border: 1px solid transparent;\n    outline: none;\n}\n\n.ql-toolbar button:focus-visible {\n    /* stylelint-disable @figma/color-no-deprecated-theme -- TODO: refactor with semantic token */\n    border: 1px solid var(--fg-focus);\n    /* stylelint-enable @figma/color-no-deprecated-theme */\n    /* stylelint-disable @figma/color-no-deprecated-theme -- TODO: refactor with semantic token */\n    outline: 1px solid var(--fg-focus);\n    /* stylelint-enable @figma/color-no-deprecated-theme */\n    outline-offset: -2px;\n  }\n\n.ql-toolbar button:focus {\n    /* stylelint-disable @figma/color-no-deprecated-theme -- TODO: refactor with semantic token */\n    border: 1px solid var(--fg-focus);\n    /* stylelint-enable @figma/color-no-deprecated-theme */\n    /* stylelint-disable @figma/color-no-deprecated-theme -- TODO: refactor with semantic token */\n    outline: 1px solid var(--fg-focus);\n    /* stylelint-enable @figma/color-no-deprecated-theme */\n    outline-offset: -2px;\n  }\n\n.ql-toolbar button:focus:not(:focus-visible) {\n    border: 1px solid transparent;\n    outline: none;\n  }\n\n.ql-container {\n  box-sizing: border-box;\n  font-size: 11px;\n  font-family: 'Inter', sans-serif;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n  background-color: var(--color-bg, transparent);\n}\n\n[data-fpl-version='ui3'] .ql-container {\n    border-radius: var(--radius-medium);\n  }\n\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n\n.ql-hidden {\n  display: none;\n}\n\n/**\n * Editor styling\n */\n\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.7;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 6px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 304px;\n}\n\n[data-fpl-version='ui3'] .ql-editor {\n    padding: calc(var(--spacer-1) - 1px) calc(var(--spacer-2) - 1px);\n  }\n\n/*\n * Styling for rendering the placeholder text. We differ from quill's styling\n * of the placeholder text so that we can support placeholders with multiple\n * lines without overflowing the editor.\n * See https://github.com/quilljs/quill/issues/2413 for more details.\n */\n\n.ql-editor.ql-blank::after {\n  color: var(--color-text-tertiary, #b3b3b3);\n  content: attr(data-placeholder);\n  pointer-events: none;\n  display: block;\n  /* Match editor line-height */\n  margin-top: -1.7em;\n}\n\n:not(.quill_editor--quill-readonly--Jvz-F) > .quill_editor--ql-editor--EzYln {\n  min-height: 80px;\n}\n\n.ql-editor > * {\n  cursor: text;\n}\n\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2 {\n  color: var(--color-text, #333333);\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n\n.ql-editor strong {\n  font-weight: bold;\n}\n\n.ql-editor h1 {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.ql-editor h2 {\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.ql-editor em {\n  font-style: italic;\n}\n\n.ql-editor s {\n  -webkit-text-decoration: line-through;\n  text-decoration: line-through;\n}\n\n.ql-editor a {\n  color: var(--color-text-brand, #0d99ff);\n  cursor: pointer;\n}\n\n.ql-editor a:hover {\n    -webkit-text-decoration: underline;\n    text-decoration: underline;\n  }\n\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 2em;\n  list-style-type: none;\n}\n\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n\n.ql-editor ol li {\n  counter-increment: list-0;\n}\n\n.ql-editor ol li::before {\n  content: counter(list-0, decimal) '. ';\n}\n\n.ql-editor code,\n.ql-editor pre.ql-syntax {\n  background-color: var(--color-bg-secondary, #f0f0f0);\n  border-radius: 3px;\n  font-family: 'Roboto Mono';\n}\n\n.ql-editor pre.ql-syntax {\n  padding: 2px 4px;\n  white-space: break-spaces;\n}\n\n.ql-editor code {\n  padding: 0px 4px;\n}\n\n/**\n * Readonly editor styling\n */\n\n.quill-readonly .ql-editor {\n  padding: 0px;\n  font-size: 14px;\n  min-height: none !important;\n  max-height: none;\n}\n\n.quill-readonly .ql-editor h1 {\n  font-size: 24px;\n}\n\n.quill-readonly .ql-editor h2 {\n  font-size: 18px;\n}\n\n/**\n * Toolbar styling\n */\n\n.ql-toolbar {\n  padding-left: 4px;\n  border-top: 1px solid var(--color-border, rgba(0, 0, 0, 0.1));\n  bottom: 0;\n  background: var(--color-bg, #fff);\n}\n\n[data-fpl-version='ui3'] .ql-toolbar {\n    border-radius: var(--spacer-0) var(--spacer-0) var(--radius-medium) var(--radius-medium);\n  }\n\n.ql-toolbar button {\n  background: none;\n  display: inline-block;\n  height: 26px;\n  width: 26px;\n  margin: 4px 1px;\n  box-sizing: border-box;\n  border-radius: 3px;\n}\n\n.ql-toolbar button:hover {\n    background: var(--color-bg-hover, #f0f0f0);\n  }\n\n.ql-toolbar button.ql-active {\n    background: var(--color-bg-selected, #f0f0f0);\n  }\n\n.ql-toolbar svg {\n  float: none;\n  margin: 0 auto;\n}\n\n.ql-toolbar button path {\n  fill: var(--color-icon, #000);\n}\n\n.ql-toolbar button.disabled {\n  background: none;\n}\n\n.ql-toolbar button.disabled:hover {\n    background: none;\n  }\n\n.ql-toolbar button.disabled path {\n  fill: var(--color-icon-disabled, rgba(0, 0, 0, 0.3));\n}\n\n/*\n * Tooltip styling\n */\n\n.ql-tooltip {\n  position: absolute;\n  transform: translateY(10px);\n  z-index: 1;\n  background-color: var(--color-bg-tooltip, #fff);\n  border: 1px solid var(--color-border-tooltip, #d4d4d4);\n  box-shadow: 0px 4px 14px var(--color-border-tooltip, rgba(0, 0, 0, 0.1));\n  color: var(--color-text-tooltip, #333333);\n  white-space: nowrap;\n  border-radius: 3px;\n}\n\n.ql-tooltip.ql-editing input[type='text'] {\n  background-color: var(--color-bg-tooltip, transparent);\n  display: inline-block;\n  font-size: 12px;\n  color: var(--color-text-tooltip, #333333);\n  height: 28px;\n  margin: 0px;\n  width: 170px;\n  padding: 0px 12px;\n  border-radius: 3px;\n}\n\n.ql-tooltip a.ql-preview {\n  display: inline-block;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  vertical-align: top;\n  padding-left: 12px;\n  width: 170px;\n  padding: 7px 12px;\n  color: var(--color-text-tooltip, #333333);\n}\n\n.ql-tooltip a.ql-action {\n  padding: 7px 0px;\n  width: 54px;\n  border-left: 1px solid var(--color-border-tooltip, #d4d4d4);\n  display: inline-block;\n  text-align: center;\n  -webkit-text-decoration: none;\n  text-decoration: none;\n}\n\n.ql-tooltip a.ql-action::after {\n  content: 'Edit';\n  font-size: 12px;\n}\n\n.ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: 'Save';\n  padding-right: 0px;\n}\n\n/* Input should only be shown when we are in edit mode (ie. has .ql-editing) */\n\n.ql-tooltip input[type=text],\n\n.ql-tooltip.ql-editing a.ql-preview,\n.ql-tooltip.ql-editing a.ql-preview,\n\n.ql-tooltip.ql-editing a.ql-remove {\n  display: none;\n}\n\n.quill-hide-toolbar {\n  display: none;\n}\n"},558506:(e,t,r)=>{r.d(t,{Jz:()=>n,P3:()=>a,bt:()=>i,wN:()=>o});let n="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",i="truncated_text--rootTruncateStart--aClXJ",a="truncated_text--directionFix--T1NOI",o="/** @postcss-export-raw */\n\n.truncated_text--root--kx5Ta.truncated_text--rootTruncateStart--aClXJ {\n    /* Note that this should be flipped when we support RTL languages */\n    direction: rtl;\n    text-align: left;\n  }\n\n.truncated_text--directionFix--T1NOI {\n  /* Note that this should be flipped when we support RTL languages */\n  direction: ltr;\n  unicode-bidi: bidi-override;\n}\n"},330458:(e,t,r)=>{r.d(t,{IB:()=>_,Jx:()=>g,KC:()=>s,NX:()=>f,Nw:()=>a,O:()=>p,P1:()=>c,Sx:()=>h,Xd:()=>u,ZB:()=>o,c_:()=>E,cq:()=>m,d1:()=>i,d9:()=>y,e1:()=>d,jA:()=>l,nC:()=>n});let n="base_cookie_banner--container--nUKFl",i="base_cookie_banner--body--lPBYi",a="base_cookie_banner--actions--1LAhr",o="base_cookie_banner--dismiss--gdSyk",l="base_cookie_banner--container__community--oc-bP",s="base_cookie_banner--container__fileViewer--522-P",c="base_cookie_banner--container__prototype--A1a4y",d="base_cookie_banner--dismissIcon--0O2Nl",u="base_cookie_banner--container__auth--okjXC",p="base_cookie_banner--container__authOrCommunity--cqdOl",m="base_cookie_banner--brandButton__small--a85Tk",h="base_cookie_banner--fileViewer__persistentMessage--2cPck",_="base_cookie_banner--fileViewer__persistentMessage_dark--p4-Bd",g="base_cookie_banner--fileViewer__persistentMessage_light---AVp5",f="base_cookie_banner--community__persistentMessage--TM90N",E="base_cookie_banner--community__persistentMessage__link--WTjS9",y="base_cookie_banner--community__persistentMessage__tooltip--g-KBY"},951261:(e,t,r)=>{r.d(t,{$H5:()=>ee,$UP:()=>x,A2d:()=>eN,AE7:()=>ev,AFA:()=>eo,BgL:()=>ew,Cny:()=>u,DjY:()=>C,EFq:()=>M,GJ7:()=>N,GiK:()=>P,HDG:()=>eO,HKS:()=>eu,HYe:()=>eC,Hdt:()=>eI,HmU:()=>g,Htq:()=>eP,I71:()=>eU,IDI:()=>er,Its:()=>es,Ivo:()=>L,IxL:()=>k,Iz_:()=>ey,JAg:()=>et,JF0:()=>m,K4i:()=>eR,Kh3:()=>eT,Lfe:()=>e8,NCY:()=>eV,NGr:()=>n,NIF:()=>G,P27:()=>y,P54:()=>eG,PNU:()=>q,Q8e:()=>X,QKW:()=>I,RtL:()=>a,S3A:()=>i,S5M:()=>Z,S9D:()=>en,T5M:()=>ef,TDC:()=>R,THM:()=>b,U0x:()=>eg,U8U:()=>W,UPb:()=>o,UVN:()=>eK,VCs:()=>eS,VsZ:()=>e1,W4D:()=>_,WEE:()=>eM,WYH:()=>ei,W_d:()=>f,WyP:()=>eF,XLA:()=>e2,XlT:()=>eQ,YKu:()=>eY,YL0:()=>l,Ycf:()=>v,ZxS:()=>ek,Zzn:()=>eB,_4i:()=>e4,_ce:()=>el,aSu:()=>e_,a_n:()=>O,bbd:()=>J,dKp:()=>ed,dvp:()=>ea,dzA:()=>Y,eC0:()=>eD,eI$:()=>eH,ebq:()=>s,euD:()=>U,f1Q:()=>eL,fgg:()=>V,hhd:()=>S,kC_:()=>eq,kHS:()=>E,l$B:()=>e6,lDj:()=>w,loC:()=>h,lvI:()=>eX,mZL:()=>z,n6G:()=>eh,nQ:()=>D,ozU:()=>ex,p7d:()=>ej,pK8:()=>eJ,pxC:()=>Q,qQq:()=>c,qrx:()=>$,rRT:()=>A,rxm:()=>B,s4T:()=>H,sY_:()=>e0,sdA:()=>eA,sgh:()=>eb,svU:()=>d,tNV:()=>eW,tS3:()=>ep,tWZ:()=>ec,u6w:()=>em,uGh:()=>K,uvc:()=>j,w0K:()=>p,wXT:()=>ez,wqq:()=>eZ,xKf:()=>T,ycJ:()=>F,zNr:()=>e3,z_2:()=>e$,zgG:()=>eE});let n="#e5e5e5",i="#0d99ff",a="#9747ff",o="#1bc47d",l="#f531b3",s="#00b5ce",c="#ffc700",d="#7b61ff",u="#0d99ff",p="#1bc47d",m="#f24e1e",h="#ffc700",_="#0fa958",g="#5551ff",f="#a259ff",E="#000",y="rgba(0, 0, 0, 0.06)",v="rgba(0, 0, 0, 0.8)",b="#fff",I="#333333",T="#fff",w="#000",S="rgba(0, 0, 0, 0.1)",C="#e6e6e6",O="rgba(0, 0, 0, 0.03)",A="#667799",N="#007be5",L="#9747ff",P="#ff24bd",R="#f24822",k="#ffcd29",D="#14ae5c",M="rgba(30, 30, 30, 1)",F="rgba(117, 117, 117, 1)",x="rgba(179, 179, 179, 1)",U="rgba(230, 230, 230, 1)",B="rgba(242, 72, 34, 1)",V="rgba(255, 199, 194, 1)",G="rgba(255, 166, 41, 1)",H="rgba(252, 209, 156, 1)",W="rgba(255, 205, 41, 1)",K="rgba(255, 232, 163, 1)",z="rgba(20, 174, 92, 1)",Z="rgba(175, 244, 198, 1)",Y="rgba(13, 153, 255, 1)",j="rgba(189, 227, 255, 1)",$="rgba(151, 71, 255, 1)",q="rgba(228, 204, 255, 1)",X="rgba(255, 255, 255, 1)",J="rgba(175, 188, 207, 1)",Q="rgba(255, 175, 163, 1)",ee="rgba(255, 196, 112, 1)",et="rgba(255, 217, 102, 1)",er="rgba(133, 224, 163, 1)",en="rgba(128, 202, 255, 1)",ei="rgba(217, 184, 255, 1)",ea="rgba(255, 189, 242, 1)",eo="rgba(230, 230, 230, 1)",el="rgba(151, 151, 151, 1)",es="rgba(255, 153, 248, 1)",ec="rgba(255, 174, 79, 1)",ed="rgba(255, 238, 0, 1)",eu="rgba(134, 250, 22, 1)",ep="rgba(111, 255, 246, 1)",em="rgba(179, 143, 255, 1)",eh="rgba(255, 255, 255, 1)",e_="rgba(175, 175, 175, 1)",eg="rgba(255, 160, 249, 1)",ef="rgba(255, 184, 104, 1)",eE="rgba(255, 242, 52, 1)",ey="rgba(174, 255, 97, 1)",ev="rgba(126, 255, 247, 1)",eb="rgba(188, 155, 255, 1)",eI="rgba(255, 255, 255, 1)",eT="rgba(17, 17, 17, 1)",ew="rgba(117, 117, 117, 1)",eS="rgba(217, 217, 217, 1)",eC="rgba(224, 62, 26, 1)",eO="rgba(251, 188, 182, 1)",eA="rgba(247, 151, 34, 1)",eN="rgba(255, 196, 112, 1)",eL="rgba(243, 193, 27, 1)",eP="rgba(249, 223, 144, 1)",eR="rgba(25, 143, 81, 1)",ek="rgba(161, 232, 185, 1)",eD="rgba(12, 140, 233, 1)",eM="rgba(168, 215, 250, 1)",eF="rgba(138, 56, 245, 1)",ex="rgba(214, 182, 251, 1)",eU="rgba(255, 255, 255, 1)",eB="rgba(102, 119, 153, 1)",eV="rgba(242, 72, 34, 1)",eG="rgba(255, 166, 41, 1)",eH="rgba(255, 205, 41, 1)",eW="rgba(20, 174, 92, 1)",eK="rgba(13, 153, 255, 1)",ez="rgba(151, 71, 255, 1)",eZ="rgba(255, 36, 189, 1)",eY="rgba(230, 230, 230, 1)",ej="rgba(175, 188, 207, 1)",e$="rgba(252, 163, 151, 1)",eq="rgba(255, 196, 112, 1)",eX="rgba(247, 209, 95, 1)",eJ="rgba(121, 210, 151, 1)",eQ="rgba(124, 196, 248, 1)",e0="rgba(209, 168, 255, 1)",e1="rgba(253, 156, 224, 1)",e2="rgba(230, 230, 230, 1)",e3="#2c2c2c",e4="#aaa",e6="#efefef",e8="#f8f8f8"},332224:(e,t,r)=>{r.d(t,{$O1:()=>eZ,A$G:()=>F,A1f:()=>ef,AF1:()=>tc,APC:()=>ep,CE5:()=>eo,Cgu:()=>ty,Edt:()=>$,EoJ:()=>W,F3D:()=>e$,FNU:()=>tu,FZz:()=>Y,Faq:()=>ts,Fci:()=>tt,G5Z:()=>N,GMZ:()=>y,H4o:()=>eJ,IQ7:()=>eh,ITd:()=>l,InK:()=>h,JZB:()=>c,Jbu:()=>p,Jcq:()=>z,K0J:()=>X,K7f:()=>L,KZ9:()=>J,KkJ:()=>f,L3s:()=>to,LIi:()=>e0,LPt:()=>U,MiP:()=>tn,MlP:()=>eL,N6T:()=>eX,NOs:()=>e3,NoB:()=>en,O4v:()=>R,O9S:()=>D,ORr:()=>g,PB5:()=>G,PWe:()=>e7,PsY:()=>ex,PtS:()=>ew,QEx:()=>M,QOE:()=>eb,QT3:()=>ta,QWJ:()=>E,Qvd:()=>eC,RHn:()=>s,T_A:()=>m,U6S:()=>tb,U8I:()=>ea,Uqt:()=>n,VLG:()=>eQ,VRt:()=>th,Vi7:()=>te,Viq:()=>eM,Wb1:()=>H,Wy5:()=>w,XYt:()=>ti,XoY:()=>ej,Xxu:()=>ec,YIr:()=>B,Ypx:()=>j,ZGC:()=>eq,_ve:()=>ev,aNO:()=>eO,aQt:()=>eA,afr:()=>T,alu:()=>k,ayB:()=>eG,bM1:()=>e_,cIy:()=>eK,cSd:()=>ee,csv:()=>eH,dEd:()=>es,e0f:()=>et,eCF:()=>ey,ePE:()=>u,elp:()=>tl,f0e:()=>ek,f5x:()=>el,fnE:()=>e4,ful:()=>tI,g$Z:()=>tv,gOH:()=>V,g_U:()=>ed,gw_:()=>e1,hIc:()=>eW,hkg:()=>A,hwz:()=>eI,jQw:()=>eD,jZh:()=>eg,jmh:()=>e6,kgN:()=>tf,kjy:()=>td,lMY:()=>eP,lxd:()=>b,mKx:()=>er,mlF:()=>tE,nS_:()=>eE,nTI:()=>_,nf4:()=>Z,nyE:()=>d,o6Q:()=>em,p6x:()=>ez,p87:()=>o,pEj:()=>tg,pHf:()=>eB,pgA:()=>P,qcO:()=>I,qct:()=>ei,qek:()=>eu,qwG:()=>tp,qxW:()=>eU,qzj:()=>tm,rAp:()=>eY,rQr:()=>S,rXc:()=>e2,s8b:()=>e5,t$E:()=>e8,ujm:()=>eN,vOb:()=>a,veD:()=>i,vt:()=>q,wNI:()=>tr,wWl:()=>K,wg1:()=>C,ws6:()=>eS,xTs:()=>t_,y0z:()=>e9,y4P:()=>eR,y7s:()=>eV,yWh:()=>eT,yXy:()=>v,yvB:()=>x,zH2:()=>O,ze_:()=>Q,znO:()=>eF});let n="8px",i="32px",a="16px",o="64px",l="42px",s="48px",c="48px",d="56px",u="48px",p="645px",m="264px",h="8px",_="380px",g="64px",f="24px",E="54px",y="48px",v="100px",b="560px",I="906px",T="48px",w="1440px",S="1230px",C="1024px",O="600px",A="180px",N="24px",L="32px",P="30px",R="12px",k="40px",D="48px",M="40px",F="32px",x="8px",U="32px",B=28,V="8px",G="140px",H="34px",W="320px",K="40px",z="32px",Z="80px",Y="40px",j="32px",$="32px",q="32px",X="240px",J="320px",Q="1px",ee="24px",et="224px",er="224px",en="378px",ei="620px",ea="40px",eo="264px",el="888px",es="16px",ec="12px",ed="8px",eu="56px",ep="112px",em="64px",eh="51px",e_="44px",eg="680px",ef="320px",eE="40px",ey="16px",ev="64px",eb="320px",eI="16px",eT="1250px",ew="1680px",eS="1320px",eC="1500px",eO="5px",eA="16px",eN="216px",eL="84px",eP="52px",eR="318px",ek="184px",eD="286px",eM="34px",eF="36px",ex="318px",eU="180px",eB="300px",eV="397px",eG="8px",eH="216px",eW="240px",eK="40px",ez="28px",eZ="240px",eY="240px",ej="304px",e$="6px",eq="8px",eX="6px",eJ="320px",eQ="36px",e0="42px",e1="256px",e2="240px",e3="2px",e4="460px",e6="596px",e8="864px",e9="48px",e5="1280px",e7="905px",te="1164px",tt="1285px",tr="1423px",tn="54px",ti="80px",ta="96px",to="52px",tl="24px",ts="16px",tc="240px",td="32px",tu="750px",tp="184px",tm="120px",th="32px",t_="12px",tg="344px",tf="4px",tE="100px",ty="18px",tv="768px",tb="768px",tI="32px"},96432:(e,t,r)=>{r.d(t,{HX:()=>i,ST:()=>n,y1:()=>l,yi:()=>o,yq:()=>a});let n=6,i=8,a=7,o=7,l=9},729408:(e,t,r)=>{r.d(t,{$s3:()=>E,C1x:()=>j,CbF:()=>Z,Cg2:()=>W,Cny:()=>n,F$p:()=>K,Gyk:()=>L,J4:()=>q,JF0:()=>o,KTN:()=>b,KZ9:()=>M,L5_:()=>m,LPt:()=>A,Mbt:()=>R,NDh:()=>P,NOs:()=>H,P99:()=>I,Pht:()=>Y,PrG:()=>B,QKW:()=>h,RHn:()=>S,S_p:()=>U,TEx:()=>z,THM:()=>p,V_M:()=>C,WXW:()=>s,X6O:()=>J,X9O:()=>x,YJ7:()=>D,Ycf:()=>u,Z$G:()=>X,aWY:()=>d,bqb:()=>c,dGl:()=>G,e99:()=>$,eel:()=>k,fVd:()=>y,gOH:()=>N,j$0:()=>F,kHS:()=>l,lDj:()=>v,p87:()=>w,pHf:()=>V,u_o:()=>T,vEg:()=>a,w0K:()=>i,xKf:()=>g,xYL:()=>f,yHe:()=>_,yvB:()=>O});let n="#0d99ff",i="#1bc47d",a="#f24822",o="#f24e1e",l="#000",s="rgba(0, 0, 0, 0.1)",c="rgba(0, 0, 0, 0.3)",d="rgba(0, 0, 0, 0.54)",u="rgba(0, 0, 0, 0.8)",p="#fff",m="rgba(255, 255, 255, 0.4)",h="#333333",_="#b3b3b3",g="#fff",f="#e5e5e5",E="#f0f0f0",y="rgba(0, 0, 0, 0.06)",v="#000",b="#222",I="#daebf7",T="#edf5fa",w="64px",S="48px",C="1440px",O="8px",A="32px",N="8px",L="108px",P="44px",R="44px",k="12px",D="14px",M="320px",F="24px",x="240px",U="272px",B="96px",V="300px",G="20px",H="2px",W="3000px",K=3,z=2,Z=8,Y=9,j=10,$=14,q="'Inter', sans-serif",X="Whyte, sans-serif",J="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJeSURBVHgBnVTNitpQFL6JiYkz419ARMcWC0LBxczCB3DdRcGNDzFC0UfwiaQixaWLQrty026kRbHFIiKC2voXY9LvXG+GzKCoc+Dk5t57znfPP2PHSSJ2HIdW2d2zEyR7N1B2gXy5XE7B6k8mk4F4PB7AP7GGc9V9QMgft6harcrZbNaP/+vxePxgmuZn27anUHR2u92M9qPR6IHu6bHnBnkt426l02m92WzeQflbq9VyCoWCE41GHUmS+Ep7Osf9r3q9fgcdnbw5CEbuNBqNe8uyflcqFQ5yjOme5Gq12n0mk9FI3+u+LOISOQfMC4oQfA+Hw1HoqsyTMF8sFrvpdrtlcuccMJdJvtfrfRAx9bmgaigUMhaLxVeK0SWAJL9cLr8A44mVFIM43J27CTiXSZ6yT/oiQRJLpVIB0C2VxiVgLjv7bKQSicQV5UMeDAbS0Xo6QZFIhMHCv2TZcDjk7vKKX61W7CWUz+cZYt+Bh481wy3Tdf1kjx6icrnMOp3OR1mWLTTFTrjPU/760hhSHa7X6z/QfQs2mJtlND4BvroEkMBQLkOs76B7K4x6zMMVYnAS0NvL8/n8R6lUeo9QvWH7GvQzUYOKALX5x7aPxgt1+m82m/1st9uf0Ag1HE2DweAcblNGLfB+9tGEmUwm1+hLY7PZBBVF0aAsYyUBGgL8LVVVd7AUYuYKHi1RGQucr8Fbmm644w8rALT6/T5dTMErAKkEIoAcuEXBZ9vtlsw3UXsbTdO2ADSxp8zaLhgnMb4oQ7oI7o1hGCFawUFiGh4UayGjFotFPggOTez/7HeXD+m6slMAAAAASUVORK5CYII=)\n    2 17,\n  auto"},304141:(e,t,r)=>{r.d(t,{HL:()=>i,Jr:()=>n,ZY:()=>s,b1:()=>l,mB:()=>o,ov:()=>d,t:()=>a,zW:()=>c});let n="40px",i="12px",a="16px",o="40px",l="36px",s="30px",c="20px",d="20px"},281595:(e,t,r)=>{r.d(t,{Cz:()=>d,G3:()=>o,GD:()=>u,JO:()=>p,Np:()=>c,Pf:()=>l,Sf:()=>a,f8:()=>m,gW:()=>s,nC:()=>n,qH:()=>i});let n="whiteboard_text_style_control--container--MNXDM",i="whiteboard_text_style_control--input--w-EA9 text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",a="whiteboard_text_style_control--chevron--Bj8sj",o="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",l="whiteboard_text_style_control--selectInputForMeasurement--slyc8",s="whiteboard_text_style_control--optionForMeasurement--Am6OD",c="whiteboard_text_style_control--numberOption--j4Dvk",d="whiteboard_text_style_control--numberInput--PWl99",u="whiteboard_text_style_control--numberInputForMeasurement--TkDrB whiteboard_text_style_control--numberInput--PWl99",p="whiteboard_text_style_control--dotOption--zHKZY",m="whiteboard_text_style_control--textStyleSelect--gN34Q"},458803:(e,t,r)=>{r.d(t,{$0K:()=>I,$42:()=>n,$7z:()=>tl,$Fu:()=>ey,A5:()=>t_,A6Q:()=>eo,AeD:()=>ea,B5A:()=>tg,BZC:()=>tb,Ble:()=>eX,CAZ:()=>b,CAk:()=>tT,D61:()=>B,E3E:()=>ty,GM6:()=>G,GWp:()=>a,GY3:()=>to,GYS:()=>tu,Gho:()=>tm,Gnx:()=>x,HQC:()=>u,IEc:()=>j,IJN:()=>y,Ig9:()=>eB,JJK:()=>H,JPj:()=>P,KKp:()=>eW,KT$:()=>eu,KX1:()=>ec,Klw:()=>tn,KrH:()=>eg,Kzj:()=>O,Le8:()=>eL,Lwi:()=>ta,M5E:()=>e$,M94:()=>e2,Mqw:()=>z,NFv:()=>s,NJp:()=>X,Ojb:()=>eH,PBP:()=>e3,PLP:()=>c,QrI:()=>W,R3G:()=>ei,RRf:()=>q,RcB:()=>A,Re$:()=>ti,Rnt:()=>R,SKz:()=>eP,ShO:()=>ed,Tap:()=>D,Tby:()=>Y,Tff:()=>eA,TzM:()=>eJ,U19:()=>eC,UAR:()=>eR,UUV:()=>M,UaK:()=>th,UiP:()=>td,V1D:()=>h,WHA:()=>eY,WTO:()=>e8,WVf:()=>eN,XFR:()=>V,XJs:()=>T,YRZ:()=>l,YYM:()=>tA,Yj4:()=>e1,Ys:()=>p,Ywk:()=>es,ZRh:()=>em,Zt:()=>J,_CX:()=>eM,_EO:()=>tf,_Uw:()=>eT,_mw:()=>ep,aXA:()=>tN,adq:()=>el,bBs:()=>m,bQ_:()=>eq,bbn:()=>$,bhC:()=>eD,bpu:()=>eE,bxZ:()=>S,cSP:()=>eU,cVQ:()=>k,dE1:()=>eK,dQG:()=>eF,eQZ:()=>er,f2V:()=>tI,fIr:()=>F,fLW:()=>w,f_N:()=>ef,gDp:()=>eV,gHs:()=>e5,gNo:()=>ex,gPw:()=>e9,hFD:()=>tr,hjp:()=>tw,iYz:()=>e4,i_t:()=>eZ,ifR:()=>tC,jjS:()=>i,jtH:()=>_,jz2:()=>K,kEu:()=>tO,kU4:()=>tS,kXH:()=>ts,kd9:()=>o,kwT:()=>tE,lWF:()=>eQ,lcZ:()=>en,mCt:()=>E,mZB:()=>ev,nFc:()=>Q,nP6:()=>tt,nXz:()=>e7,ncz:()=>U,o0E:()=>ew,oAQ:()=>Z,p8G:()=>e0,pBU:()=>v,pdv:()=>te,qEB:()=>e_,qJR:()=>ez,qi3:()=>C,rI1:()=>g,rnD:()=>eS,rpO:()=>eO,shQ:()=>et,sqJ:()=>eG,uTg:()=>eh,uvK:()=>ej,uyV:()=>e6,w2U:()=>tv,w3J:()=>eb,xG6:()=>N,xlA:()=>d,yNP:()=>eI,yXu:()=>f,zEZ:()=>ee,zRr:()=>ek,zVh:()=>L,zW8:()=>tc,zl5:()=>tp});let n="delightful_toolbar--delightfulToolbarContainer--SHMR-",i="delightful_toolbar--delightfulToolbarLowered--sZhzF",a="delightful_toolbar--delightfulToolbarDisabledClickDetector--JQUz3",o="delightful_toolbar--delightfulToolbarDisabled--jqtpA",l="delightful_toolbar--delightfulToolberInnerDisabled--9M-N9",s="delightful_toolbar--delightfulToolbarBannerContainer--FkA0g",c="delightful_toolbar--centeredPortalTarget--iF-gX",d="delightful_toolbar--delightfulToolbarContainerBannerOffset--D5pU0",u="delightful_toolbar--focusVisibleHover--Ag5DV",p="delightful_toolbar--select--Qs3At",m="delightful_toolbar--active--Xm9-4",h="delightful_toolbar--hand--UoaPp",_="delightful_toolbar--animate--gXF-Y",g="delightful_toolbar--pencil--86AiY",f="delightful_toolbar--pencilChevron--3aSY3",E="delightful_toolbar--shape--H3a3g",y="delightful_toolbar--shapeCollage---YIrd",v="delightful_toolbar--shapeChevron--TsVtJ",b="delightful_toolbar--sticky--6MjSN",I="delightful_toolbar--stickyChevron--kCicP",T="delightful_toolbar--universalInsertCollage--0-jTN",w="delightful_toolbar--text--3Hmso",S="delightful_toolbar--connector--S0Ydn",C="delightful_toolbar--section---GUh9",O="delightful_toolbar--table--toekL",A="delightful_toolbar--stamp--diHIZ",N="delightful_toolbar--universalInsert--FC5m4",L="delightful_toolbar--stickyIARedesign--Xo8do",P="delightful_toolbar--universalInsertCollageIARedesign--BIhEA",R="delightful_toolbar--sectionIARedesign--y1OC5",k="delightful_toolbar--tableIARedesign--B5imp",D="delightful_toolbar--stampIARedesign--NfcF-",M="delightful_toolbar--quickAccessSection--ErJ9j",F="delightful_toolbar--delightfulToolbar--0Koqy",x="delightful_toolbar--delightfulToolbarPostAnimation--J3t8f",U="delightful_toolbar--makeSomethingV2Active--gDYK4",B="delightful_toolbar--fakeButtonContainer--ivi7f",V="delightful_toolbar--toolbarFakeButtonTarget--SdMI0",G="delightful_toolbar--delightfulToolbarTabletExtras--H-fON",H="delightful_toolbar--tabletExtrasItem--ApfSS",W="delightful_toolbar--tabletExtrasItemShowHide---fNRw",K="delightful_toolbar--delightfulToolbarTabletExtrasItem--92q-x delightful_toolbar--delightfulToolbar--0Koqy",z="delightful_toolbar--verticalButtonDisabled--m308g",Z="delightful_toolbar--passthruLayout--gz5r2",Y="delightful_toolbar--stampButton--3kdlW",j="delightful_toolbar--peekingVotingWheel--w0rd4",$="delightful_toolbar--peekingVotingWheelHidden--97uHk",q="delightful_toolbar--peekingVotingWheelDoneVoting--tAyvc",X="delightful_toolbar--peekingVotingWheelShowHide--1jIMo",J="delightful_toolbar--remainingVotesIndicator--1pWLF text--fontPos12--YsUAh text--_fontBase--QdLsd",Q="delightful_toolbar--remainingVotesIndicatorInProgress--x9DdJ",ee="delightful_toolbar--remainingVotesIndicatorDone--OyZtG",et="delightful_toolbar--remainingVotesIndicatorTextSpan--ola4B ellipsis--ellipsis--Tjyfa",er="delightful_toolbar--checkIcon--JmhHu",en="delightful_toolbar--peekingVotingWheelContainer--EBQCY",ei="delightful_toolbar--peekingVotingWheelInactive--bdvqB",ea="delightful_toolbar--delightfulToolbarMask--WyKoY",eo="delightful_toolbar--delightfulToolbarMaskClip--YptNQ",el="delightful_toolbar--delightfulToolbarInner--gHZZG delightful_toolbar--passthruLayout--gz5r2",es="delightful_toolbar--undo--GoECN",ec="delightful_toolbar--redo--zNSIB",ed="delightful_toolbar--straightLine--WYaYi",eu="delightful_toolbar--horizontalButton--GEYZm",ep="delightful_toolbar--horizontalButtonDisabled--J--Nk",em="delightful_toolbar--pointerEventsDisabled--0umVY",eh="delightful_toolbar--connectorIcon--rpSiR",e_="delightful_toolbar--divider--apd-R",eg="delightful_toolbar--againstButtons--jjCEu",ef="delightful_toolbar--toolbarSection--UFHyw delightful_toolbar--passthruLayout--gz5r2",eE="delightful_toolbar--toolbarSectionIARefresh--GzB8- delightful_toolbar--passthruLayout--gz5r2",ey="delightful_toolbar--toolbarSectionNoOverflow--1FLQM delightful_toolbar--passthruLayout--gz5r2",ev="delightful_toolbar--toolbarSectionNoOverflowIARefresh--J8yAn delightful_toolbar--passthruLayout--gz5r2",eb="delightful_toolbar--tool--g8UFJ",eI="delightful_toolbar--pencilTool--z-K-X delightful_toolbar--tool--g8UFJ",eT="delightful_toolbar--toolIcon--hHlA3",ew="delightful_toolbar--collageMoreButtonBase--mq4Nf basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",eS="delightful_toolbar--toolIconIsDragging--NbbVm",eC="delightful_toolbar--fade--z0hkc",eO="delightful_toolbar--bodyCursorDrag--U0w4y",eA="delightful_toolbar--customAnimatedStickyContainer--NwoG4",eN="delightful_toolbar--customAnimatedSticky--Am-sV",eL="delightful_toolbar--enableDogEarAnimation--mKWg-",eP="delightful_toolbar--bottomSticky--EL0yA delightful_toolbar--stickyAnimationProperties--sQIyc",eR="delightful_toolbar--middleSticky--euFjB delightful_toolbar--stickyAnimationProperties--sQIyc",ek="delightful_toolbar--topSticky--rCKI- delightful_toolbar--stickyAnimationProperties--sQIyc",eD="delightful_toolbar--customAnimatedStickyDogEar--W4GVZ",eM="delightful_toolbar--overValidDropTarget--oTIIh",eF="delightful_toolbar--shapeAndStickyShadow--19Urt",ex="delightful_toolbar--hasDropShadow--Jr9fo",eU="delightful_toolbar--isFigjamIaRedesign--WLXJz",eB="delightful_toolbar--toolIconIsSelected--zMbAE",eV="delightful_toolbar--toolIconIsHovered--06bxV",eG="delightful_toolbar--hasBoxShadow--GZIGk",eH="delightful_toolbar--verticalButtonHolder--iacgh",eW="delightful_toolbar--verticalButton--NunDU",eK="delightful_toolbar--verticalButtonHovered--XWjJn",ez="delightful_toolbar--verticalButtonSelected--gJEVN",eZ="delightful_toolbar--markerShadow--2r0xq",eY="delightful_toolbar--markerShadowSmall--7PUZI",ej="delightful_toolbar--easeInDltItemFill--rGBLG",e$="delightful_toolbar--backgroundShape--c1ZYB",eq="delightful_toolbar--shapeSpawnAnimation--bHVVH",eX="delightful_toolbar--middleStickyContainer--86OO8 delightful_toolbar--backgroundSticky--14jwo",eJ="delightful_toolbar--bottomStickyContainer--OO2fl delightful_toolbar--backgroundSticky--14jwo",eQ="delightful_toolbar--spriteSheet--t-eNg",e0="delightful_toolbar--drawingToolPlaceholder--jjpMh",e1="delightful_toolbar--drawingToolPlaceholderVisible--Agv4F",e2="delightful_toolbar--washiTapePlaceholderSvg--848Ll",e3="delightful_toolbar--washiTapeBig--2gCvj",e4="delightful_toolbar--washiTapeShine--wVzk9",e6="delightful_toolbar--washiTapeBigTape--5ZRa5",e8="delightful_toolbar--washiTapeSmall--VIFNn",e9="delightful_toolbar--washiTapeSmallTape--tEVin",e5="delightful_toolbar--customAnimatedStickyContainerV2--v-iK4",e7="delightful_toolbar--customAnimatedStickyV2--OVYQS",te="delightful_toolbar--customAnimatedStickyV3--qLTBA",tt="delightful_toolbar--bottomStickyV2--p7HoD delightful_toolbar--stickyAnimationProperties--sQIyc",tr="delightful_toolbar--bottomStickyV3---oRIg delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",tn="delightful_toolbar--bottomStickyV3Ia--g9QqY delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",ti="delightful_toolbar--middleStickyV2--bfVaY delightful_toolbar--stickyAnimationProperties--sQIyc",ta="delightful_toolbar--middleStickyV3--BiM-v delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",to="delightful_toolbar--middleStickyV3Ia--JWYA3 delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",tl="delightful_toolbar--topStickyV2---0qKu",ts="delightful_toolbar--topStickyV3--5ndgM delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",tc="delightful_toolbar--topStickyV3Ia--chGMk delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",td="delightful_toolbar--dogEarSticky---UqUA",tu="delightful_toolbar--reverse---CQhv",tp="delightful_toolbar--stickyDogEarContainer--FJHcW",tm="delightful_toolbar--forwards--nPpnP",th="delightful_toolbar--noAnimation--XnCqV",t_="delightful_toolbar--middleStickyContainerV2--Dy8Na delightful_toolbar--backgroundStickyV2--GQPLn",tg="delightful_toolbar--bottomStickyContainerV2--XUsyj delightful_toolbar--backgroundStickyV2--GQPLn",tf="delightful_toolbar--fakeStickyContainer--OmfTq delightful_toolbar--backgroundStickyV2--GQPLn",tE="delightful_toolbar--fakeSticky--cTZnZ delightful_toolbar--stickyAnimationProperties--sQIyc",ty="delightful_toolbar--stickyOuterV3--ROW-i",tv="delightful_toolbar--stickyBaseV3--sQACX",tb="delightful_toolbar--stickyCurlV3--6kp8i",tI="delightful_toolbar--stickyMaskContainerV3--XBMQM",tT="delightful_toolbar--stickyMaskDynamicV3--hTZdB",tw="delightful_toolbar--stickyMaskStaticV3---Ycp2",tS="delightful_toolbar--showCurlV3--qx7tK",tC="delightful_toolbar--noTransition--aPSPH",tO="delightful_toolbar--fakeStickyV3--Jq79A delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",tA="delightful_toolbar--stickyBaseV3Ia--Okmfc",tN="delightful_toolbar--fakeStickyV3Ia--Njz2- delightful_toolbar--stickyAnimationPropertiesV3--tf0ke"},314139:(e,t,r)=>{r.d(t,{L8:()=>s,LD:()=>l,MB:()=>o,Uq:()=>i,WL:()=>d,Xl:()=>u,ae:()=>a,db:()=>p,fL:()=>c,ko:()=>h,wz:()=>n,xY:()=>m});let n="dlt_overflow_menu--overflowMenu--LCIsf",i="dlt_overflow_menu--roundedRightCorners--YSi2X",a="dlt_overflow_menu--scrollableDropdown--luBfM",o="dlt_overflow_menu--arrowBottom--Li4jR dlt_overflow_menu--arrow--sGvUp",l="dlt_overflow_menu--overflowMenuIconPadding--bEg9-",s="dlt_overflow_menu--optionContainer--Ja-wR",c="dlt_overflow_menu--text--KDJ94",d="dlt_overflow_menu--description--2-FdD",u="dlt_overflow_menu--shortcut--4NMJ0",p="dlt_overflow_menu--iconComponent---edEx",m="dlt_overflow_menu--hoveredIconComponent--slYQf",h="dlt_overflow_menu--horizontalDivider--BvDUM"},939429:(e,t,r)=>{r.d(t,{$y:()=>w,Bw:()=>f,CM:()=>F,EU:()=>_,F9:()=>P,GX:()=>m,Gs:()=>k,Hw:()=>C,K0:()=>N,MW:()=>y,Q1:()=>b,Q6:()=>u,Qj:()=>S,Rp:()=>d,Rw:()=>R,UB:()=>A,X6:()=>o,ZA:()=>v,Zn:()=>c,c:()=>M,cs:()=>g,dO:()=>T,ei:()=>p,er:()=>l,fF:()=>a,g4:()=>h,gb:()=>I,mG:()=>n,nC:()=>i,oE:()=>E,pG:()=>L,rc:()=>s,sn:()=>D,u2:()=>O});let n="80px",i="templates_sidebar--container--LBrgK templates_sidebar--base--yBbPj",a="templates_sidebar--previewLoading--yV7Xm",o="templates_sidebar--searchBar--9isjr templates_sidebar--base--yBbPj",l="templates_sidebar--contentContainer--jfPiX templates_sidebar--base--yBbPj",s="templates_sidebar--sidebar--pnj0Y templates_sidebar--base--yBbPj",c="templates_sidebar--sidebarButton--uHGrO",d="templates_sidebar--categoryRoleDropdown--0u7TM",u="templates_sidebar--viewScrollContainer--JP8rI templates_sidebar--base--yBbPj",p="templates_sidebar--view--ErQxd templates_sidebar--base--yBbPj",m="templates_sidebar--viewWithMargin--uuI-7 templates_sidebar--view--ErQxd templates_sidebar--base--yBbPj",h="templates_sidebar--viewCenter--0wAYd templates_sidebar--viewWithMargin--uuI-7 templates_sidebar--view--ErQxd templates_sidebar--base--yBbPj",_="templates_sidebar--viewTile--TjuYS templates_sidebar--base--yBbPj text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",g="templates_sidebar--viewSection--nnuvs templates_sidebar--base--yBbPj",f="templates_sidebar--viewTiles--rUv6-",E="templates_sidebar--viewCategoryHeaderSticky--btjbV templates_sidebar--base--yBbPj text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",y="templates_sidebar--viewCategoryHeaderStuck--DfbPp",v="templates_sidebar--viewCategorySeeAll--Wcs6w templates_sidebar--base--yBbPj",b="templates_sidebar--thumbnail--tme4q",I="templates_sidebar--thumbnailBackground--fupHY",T="templates_sidebar--addButtonRectangle--mxmJO",w="templates_sidebar--meta--IyS-D",S="templates_sidebar--nameContainer--bgBxs",C="templates_sidebar--publisherNameContainer--y7Mov",O="templates_sidebar--name--ZVRRp text--fontPos11--2LvXf text--_fontBase--QdLsd",A="templates_sidebar--publisherName--iGqP7 text--fontPos9--naThA text--_fontBase--QdLsd",N="templates_sidebar--addButton--u2TW6",L="templates_sidebar--addButtonLoading---t9qh",P="templates_sidebar--communityButtonContainer--O-0aw",R="templates_sidebar--backButton--hriGV",k="templates_sidebar--backButtonTextContainer--waCgf",D="templates_sidebar--customTemplatesFilter--gWkVd",M="templates_sidebar--customTemplatesHeader--xUl39",F="templates_sidebar--chevronSelected--dyVpT"},579592:(e,t,r)=>{r.d(t,{EU:()=>i,Qx:()=>a,l4:()=>n});let n="---",i=`${n} BEGIN NOTES`,a=`${n} BEGIN SUMMARY BODY`},748555:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(516614);let i=["bool","byte","int","uint","float","string","int64","uint64"],a=["ENUM","STRUCT","MESSAGE"];function o(e){let t=e instanceof n.c?e:new n.c(e),r=t.readVarUint(),o=[];for(let e=0;e<r;e++){let e=t.readString(),r=t.readByte(),n=t.readVarUint(),i=[];for(let e=0;e<n;e++){let e=t.readString(),n=t.readVarInt(),o=!!(1&t.readByte()),l=t.readVarUint();i.push({name:e,line:0,column:0,type:"ENUM"===a[r]?null:n,isArray:o,isDeprecated:!1,value:l})}o.push({name:e,line:0,column:0,kind:a[r],fields:i})}for(let e=0;e<r;e++){let t=o[e].fields;for(let e=0;e<t.length;e++){let r=t[e],n=r.type;if(null!==n&&n<0){if(~n>=i.length)throw Error("Invalid type "+n);r.type=i[~n]}else{if(null!==n&&n>=o.length)throw Error("Invalid type "+n);r.type=null===n?null:o[n].name}}}return{package:null,definitions:o}}},795446:(e,t,r)=>{r.d(t,{E:()=>c});var n=r(516614),i=r(798083),a=r(711012),o=r(520790),l=r(848731),s=r(748555);function c(e,t){let r={ByteBuffer:n.c,Hasher:i.P,HashTable:a.o,makeDedupCache:()=>new a.o(e=>e.hash,(e,t)=>e.defName===t.defName&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(e.data,t.data))},c=[],d=[];return t&&(c=t.filter(e=>!!e.match(/^[A-Za-z_][A-Za-z0-9_]*$/)),(d=t.filter(e=>!!e.match(/^[A-Za-z_][A-Za-z0-9_]*\[\]$/)).map(e=>e.slice(0,e.length-2))).length+c.length!==t.length&&console.warn("Some definitions to dedup are invalid identifiers, skipping...")),Function("exports",function(e,t,r){var i;e="string"==typeof(i=e)?(0,l.ZZ)(i):i instanceof Uint8Array||i instanceof n.c?(0,s.p)(i):i;let a={},c=e.package,d=[];null!==c?d.push(`var ${c} = exports || ${c} || {}, exports;`):(d.push("var exports = exports || {};"),c="exports"),d.push(`${c}.ByteBuffer = ${c}.ByteBuffer || require("kiwi-schema").ByteBuffer;`);for(let t=0;t<e.definitions.length;t++){let r=e.definitions[t];a[r.name]=r}for(let n=0;n<e.definitions.length;n++){let i=e.definitions[n];switch(i.kind){case"ENUM":{let e={};for(let t=0;t<i.fields.length;t++){let r=i.fields[t];e[r.name]=r.value,e[r.value]=r.name}d.push(`${c}[${(0,o.m)(i.name)}] = ${JSON.stringify(e,null,2)};`);break}case"STRUCT":case"MESSAGE":d.push(""),d.push(`${c}[${(0,o.m)("decode"+i.name)}] = ${function(e,t,r,n){let i=[],a="  ";i.push("function(bb, optDedupCache) {"),i.push("  var dedupKey = null;"),r.includes(e.name)&&(i.push("  if (!!optDedupCache) {"),i.push("    if (!(optDedupCache instanceof this.HashTable)) {"),i.push('      throw new Error("optDedupCache must be instance of HashTable");'),i.push("    }"),i.push("    // lookahead with hasher then reference result with dedup cache"),i.push("    var hasher = new this.Hasher(bb.getNewWindowFromRight());"),i.push(`    this[${(0,o.m)("hash"+e.name)}](hasher);`),i.push(`    dedupKey = { hash: hasher.value(), data: hasher.windowToUint8Array(), defName: ${(0,o.m)(e.name)} };`),i.push("    var cachedResult = optDedupCache.get(dedupKey, null);"),i.push("    if (cachedResult !== null) {"),i.push("      bb.extendWindowTo(hasher.bb());"),i.push("      return cachedResult;"),i.push("    }"),i.push("  }")),i.push("  var result = {};"),i.push("  if (!(bb instanceof this.ByteBuffer)) {"),i.push("    bb = new this.ByteBuffer(bb);"),i.push("  }"),i.push(""),"MESSAGE"===e.kind&&(i.push("  while (true) {"),i.push("  var x = bb.readVarUint();"),i.push("    switch (x) {"),i.push("    case 0:"),i.push("      return dedupKey !== null ? optDedupCache.set(dedupKey, result) : result;"),i.push(""),a="      ");for(let r=0;r<e.fields.length;r++){let l,s,c=e.fields[r];switch(c.type){case"bool":l="!!bb.readByte()",s="!!hasher.readByte()";break;case"byte":l="bb.readByte()",s="hasher.readByte()";break;case"int":l="bb.readVarInt()",s="hasher.readVarInt()";break;case"uint":l="bb.readVarUint()",s="hasher.readVarUint()";break;case"int64":l="bb.readVarInt64()",s="hasher.readVarInt64()";break;case"uint64":l="bb.readVarUint64()",s="hasher.readVarUint64()";break;case"float":l="bb.readVarFloat()",s="hasher.readVarFloat()";break;case"string":l="bb.readString()",s="hasher.readString()";break;default:{let e=t[c.type];e?"ENUM"===e.kind?(l=`this[${(0,o.m)(e.name)}][bb.readVarUint()]`,s=`this[${(0,o.m)(e.name)}][hasher.readVarUint()]`):(l=`this[${(0,o.m)("decode"+e.name)}](bb, optDedupCache || null)`,s=`this[${(0,o.m)("hash"+e.name)}](hasher)`):(0,o.v)(`Invalid type ${(0,o.m)(c.type)} for field ${(0,o.m)(c.name)}`,c.line,c.column)}}"MESSAGE"===e.kind&&i.push(`    case ${c.value}:`),c.isArray?c.isDeprecated?"byte"===c.type?i.push(a+"bb.readByteArray();"):(i.push(a+"var length = bb.readVarUint();"),i.push(a+`while (length-- > 0) ${l};`)):"byte"===c.type?i.push(a+`result[${(0,o.m)(c.name)}] = bb.readByteArray();`):(i.push(a+"var arrayDedupKey = null;"),i.push(a+"var values = null;"),n.includes(c.type)&&(i.push(a+"if (!!optDedupCache) {"),i.push(a+"  // lookahead with hasher then reference result with dedup cache"),i.push(a+"  var hasher = new this.Hasher(bb.getNewWindowFromRight());"),i.push(a+"  var length = hasher.readVarUint();"),i.push(a+`  for (var i = 0; i < length; i++) ${s};`),i.push(a+`  arrayDedupKey = { hash: hasher.value(), data: hasher.windowToUint8Array(), defName: ${(0,o.m)(c.type+"[]")} };`),i.push(a+"  var cachedResult = optDedupCache.get(arrayDedupKey, null);"),i.push(a+"  if (cachedResult !== null) {"),i.push(a+"    bb.extendWindowTo(hasher.bb());"),i.push(a+"    values = cachedResult;"),i.push(a+"  }"),i.push(a+"}")),i.push(a+"if (values === null) {"),i.push(a+"  var length = bb.readVarUint();"),i.push(a+"  var values = Array(length);"),i.push(a+`  for (var i = 0; i < length; i++) values[i] = ${l};`),i.push(a+"  if (arrayDedupKey !== null) { optDedupCache.set(arrayDedupKey, values); }"),i.push(a+"}"),i.push(a+`result[${(0,o.m)(c.name)}] = values;`)):c.isDeprecated?i.push(a+`${l};`):i.push(a+`result[${(0,o.m)(c.name)}] = ${l};`),"MESSAGE"===e.kind&&(i.push("      break;"),i.push(""))}return"MESSAGE"===e.kind?(i.push("    default:"),i.push('      throw new Error("Attempted to parse invalid message");'),i.push("    }"),i.push("  }")):i.push("  return dedupKey !== null ? optDedupCache.set(dedupKey, result) : result;"),i.push("}"),i.join("\n")}(i,a,t,r)};`),d.push(""),d.push(`${c}[${(0,o.m)("encode"+i.name)}] = ${function(e,t){let r=[];r.push("function(message, bb) {"),r.push("  var isTopLevel = !bb;"),r.push("  if (isTopLevel) bb = new this.ByteBuffer();");for(let n=0;n<e.fields.length;n++){let i,a=e.fields[n];if(!a.isDeprecated){switch(a.type){case"bool":case"byte":i="bb.writeByte(value);";break;case"int":i="bb.writeVarInt(value);";break;case"uint":i="bb.writeVarUint(value);";break;case"int64":i="bb.writeVarInt64(value);";break;case"uint64":i="bb.writeVarUint64(value);";break;case"float":i="bb.writeVarFloat(value);";break;case"string":i="bb.writeString(value);";break;default:{let e=t[a.type];if(e)i="ENUM"===e.kind?`var encoded = this[${(0,o.m)(e.name)}][value]; if (encoded === void 0) throw new Error("Invalid value " + JSON.stringify(value) + ${(0,o.m)(" for enum "+(0,o.m)(e.name))}); bb.writeVarUint(encoded);`:`this[${(0,o.m)("encode"+e.name)}](value, bb);`;else throw Error(`Invalid type ${(0,o.m)(a.type)} for field ${(0,o.m)(a.name)}`)}}r.push(""),r.push(`  var value = message[${(0,o.m)(a.name)}];`),r.push("  if (value != null) {"),"MESSAGE"===e.kind&&r.push(`    bb.writeVarUint(${a.value});`),a.isArray?"byte"===a.type?r.push("    bb.writeByteArray(value);"):(r.push("    var values = value, n = values.length;"),r.push("    bb.writeVarUint(n);"),r.push("    for (var i = 0; i < n; i++) {"),r.push("      value = values[i];"),r.push(`      ${i}`),r.push("    }")):r.push(`    ${i}`),"STRUCT"===e.kind&&(r.push("  } else {"),r.push(`    throw new Error(${(0,o.m)("Missing required field "+(0,o.m)(a.name))});`)),r.push("  }")}}return"MESSAGE"===e.kind&&r.push("  bb.writeVarUint(0);"),r.push(""),r.push("  if (isTopLevel) return bb.toUint8Array();"),r.push("}"),r.join("\n")}(i,a)};`),d.push(""),d.push(`${c}[${(0,o.m)("hash"+i.name)}] = ${function(e,t){let r=[],n="  ";r.push("function(hasher) {"),r.push("  var result = {};"),r.push("  if (!(hasher instanceof this.Hasher)) {"),r.push('    throw new Error("Expected Hasher");'),r.push("  }"),r.push(""),"MESSAGE"===e.kind&&(r.push("  while (true) {"),r.push("    switch (hasher.readVarUint()) {"),r.push("    case 0:"),r.push("      return;"),r.push(""),n="      ");for(let i=0;i<e.fields.length;i++){let a,l=e.fields[i];switch(l.type){case"bool":case"byte":a="hasher.readByte()";break;case"int":a="hasher.readVarInt()";break;case"uint":a="hasher.readVarUint()";break;case"int64":a="hasher.readVarInt64()";break;case"uint64":a="hasher.readVarUint64()";break;case"float":a="hasher.readVarFloat()";break;case"string":a="hasher.readString()";break;default:{let e=t[l.type];e?a="ENUM"===e.kind?"hasher.readVarUint()":`this[${(0,o.m)("hash"+e.name)}](hasher)`:(0,o.v)(`Invalid type ${(0,o.m)(l.type)} for field ${(0,o.m)(l.name)}`,l.line,l.column)}}"MESSAGE"===e.kind&&r.push(`    case ${l.value}:`),l.isArray?"byte"===l.type?r.push(n+"hasher.readByteArray();"):(r.push(n+"var length = hasher.readVarUint();"),r.push(n+`while (length-- > 0) ${a};`)):r.push(n+`${a};`),"MESSAGE"===e.kind&&(r.push("      break;"),r.push(""))}return"MESSAGE"===e.kind?(r.push("    default:"),r.push('      throw new Error("Attempted to parse invalid message");'),r.push("    }"),r.push("  }")):r.push("  return;"),r.push("}"),r.join("\n")}(i,a)};`);break;default:(0,o.v)("Invalid definition kind "+(0,o.m)(i.kind),i.line,i.column)}}return d.push(""),d.join("\n")}(e,c,d))(r),r}},370092:(e,t,r)=>{r.d(t,{ES:()=>n.E,pM:()=>i.p}),r(516614);var n=r(795446);r(366012);var i=r(748555)},38987:(e,t,r)=>{r.d(t,{UG:()=>f,wi:()=>g});var n,i,a,o,l,s,c,d,u,p=((n=p||{}).POPULAR="popular",n.CREATED_AT="created_at",n.PUBLISHED_AT="published_at",n.ALL_TIME="all_time",n.FEATURED="featured",n),m=((i=m||{}).ALL="all",i.THIRD_PARTY_FLAGGED="third_party_flagged",i.THIRD_PARTY_MIGRATING="third_party_migrating",i.UNCATEGORIZED="uncategorized",i),h=((a=h||{}).HUB_FILES="HUB_FILES",a.PLUGINS="PLUGINS",a.PLUGIN_REVIEW="PLUGIN_REVIEW",a.WIDGET_REVIEW="WIDGET_REVIEW",a.PLUGIN_SECURITY_FORM_REVIEW="PLUGIN_SECURITY_FORM_REVIEW",a.HUB_FILE_REVIEW="HUB_FILE_REVIEW",a.COMMUNITY_MODERATION="COMMUNITY_MODERATION",a.VISUAL_COMPLIANCE="VISUAL_COMPLIANCE",a.COMMUNITY_CATEGORIES="COMMUNITY_CATEGORIES",a.COMMUNITY_CATEGORIES_2="COMMUNITY_CATEGORIES_2",a.COMMUNITY_SHELVES="COMMUNITY_SHELVES",a.COMMENTS="COMMENTS",a.TAGS_DESCRIPTIONS="TAGS_DESCRIPTIONS",a.COMMUNITY_SHELVES_2="COMMUNITY_SHELVES_2",a.BADGES="BADGES",a),_=((o=_||{}).REPORTED="REPORTED_COMMENTS",o.ALL="ALL_COMMENTS",o.ALL_RATINGS="ALL_RATINGS",o.REPORTED_RATINGS="REPORTED_RATINGS",o),g=((l=g||{}).COMMUNITY_LANDING="community_landing",l.BROWSE_PLUGINS_MODAL="browse_plugins_modal",l.BROWSE_WIDGETS_MODAL="browse_widgets_modal",l.EXPERIMENTAL="experimental",l),f=((s=f||{}).BLOCKED="blocked",s.ORG_PRIVATE="org_private",s.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",s.PENDING_PUBLIC="pending_public",s.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",s.DELISTED="delisted",s.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",s.APPROVED_PUBLIC="approved_public",s),E=((c=E||{}).INACTIVE="inactive",c.SCHEDULED="scheduled",c.FEATURED="featured",c.ARCHIVED="archived",c),y=((d=y||{}).SPAM="SPAM",d.HAM="HAM",d),v=((u=v||{}).COMMENT="comment",u.HUB_FILE="hub_file",u.PROFILE="profile",u)},138101:(e,t,r)=>{r.d(t,{TI:()=>s,TR:()=>d,bD:()=>p});var n=r(524261),i=r(291904),a=r(910336);let o={loading:()=>null,error:n.NY.NONE},l=a.Z.createLazyComponent(()=>r.e(3683).then(r.bind(r,649060)).then(e=>e.AutosaveLogOutModal),o),s=(0,i.Y3)(l),c=a.Z.createLazyComponent(()=>r.e(3683).then(r.bind(r,649060)).then(e=>e.HasAutosaveChangesModal),o),d=(0,i.Y3)(c),u=a.Z.createLazyComponent(()=>r.e(3683).then(r.bind(r,182786)).then(e=>e.AutosaveLearnMoreModal),o),p=(0,i.Y3)(u)},517506:(e,t,r)=>{r.d(t,{_:()=>s,t:()=>c});var n=r(652983),i=r(435613),a=r(497797);let o=r(740063),l=r(240940);function s(){return n.createElement(i.n,{svg:o,className:a.q})}function c(){return n.createElement(i.n,{svg:l,className:a.q})}},67237:(e,t,r)=>{r.d(t,{I:()=>a});var n=r(337167),i=r(995971);let a=(0,n.cn)(i.OX.DescriptionView)},475179:(e,t,r)=>{r.d(t,{FE:()=>u,R3:()=>d,Vk:()=>c});var n=r(652983),i=r(970740),a=r(459014),o=r(467815),l=r(395566),s=r(763708);function c(e){return e.some(e=>e===o.n.FIGMA_PARTNER)}function d({badges:e},t){return c(e)?n.createElement(a.j,{showBorder:t}):null}function u(e){let t=n.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:s.sC,onClick:e=>{e.stopPropagation()}},n.createElement(i.Tx,{id:"community.detail_view.figma_partner_this_creator_is"}),n.createElement("span",{className:s.VN},n.createElement(i.Tx,{id:"community.learn_more"})));return n.createElement(l.u,{preview:t},e.children)}},97032:(e,t,r)=>{r.d(t,{Kl:()=>E,jS:()=>v,rc:()=>y,sE:()=>h});var n,i=r(652983),a=r(407908),o=r(970740),l=r(289629),s=r(54055),c=r(646472),d=r(769142),u=r(147298),p=r(947606);function m(e){let t=(0,l.rD)(e.resource.monetized_resource_metadata);return i.createElement(p.Ct,{background:"light",height:e.height},t)}function h({resource:e,showPrice:t=!1,height:r,isPaymentAnnualSubscription:n=!1,backgroundColor:a,border:s}){if(e&&(0,u.Nn)(e.monetized_resource_metadata)){let c=n?(0,l.rD)(e.monetized_resource_metadata,!0):(0,l.rD)(e.monetized_resource_metadata);return i.createElement(p.Ct,{height:r,background:a||"light",border:s},t?i.createElement(o.Tx,{id:"community.buyer.subscribed_with_price",priceString:c}):i.createElement(o.Tx,{id:"community.buyer.subscribed"}))}return i.createElement(p.Ct,{height:r,background:a||"light",border:s},i.createElement(o.Tx,{id:"community.buyer.purchased"}))}function _({...e}){return i.createElement(p.Ct,null,i.createElement(o.Tx,{id:"community.detail_view.third_party_badge.figma_partner"}))}function g(e){return i.createElement(p.Ct,{background:"light",height:e.height},i.createElement(o.Tx,{id:"community.detail_view.third_party_badge.off_platform"}))}function f(e){return i.createElement(p.Ct,{background:"light",height:e.height},i.createElement(o.Tx,{id:"community.buyer.in_app_purchases"}))}var E=((n=E||{}).PURCHASED="purchased",n.OFF_PLATFORM="off_platform",n.FREEMUM="freemium",n.PRICE="price",n);function y({resource:e,height:t,validBadges:r=Object.values(E)}){let n=(0,a.v9)(e=>e.authedActiveCommunityProfile);return v({resource:e,height:t,validBadges:r,authedActiveCommunityProfile:n})}function v({resource:e,height:t,validBadges:r=Object.values(E),authedActiveCommunityProfile:n}){if(!e)return null;let a=n&&(0,s.Kk)(n);return!a&&(0,d.k)(e)&&e.community_resource_payment&&(0,l.lq)(e.community_resource_payment)?r.includes("purchased")?i.createElement(h,{resource:e,height:t}):null:e.monetization_status&&e.monetization_status===u.Vt.FIGMA_PARTNER?i.createElement(_,null):(0,c.F4)(e)?r.includes("freemium")?i.createElement(f,{height:t}):null:(0,c.vu)(e)?r.includes("price")?i.createElement(m,{resource:e,height:t}):null:(0,c.v9)(e)&&r.includes("off_platform")?i.createElement(g,{height:t}):null}},777408:(e,t,r)=>{r.d(t,{wH:()=>P,C$:()=>D,uR:()=>R});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(337167),s=r(970740),c=r(67237),d=r(746600),u=r(573196),p=r(163381),m=r(289629),h=r(995971),_=r(54055),g=r(339531),f=r(646472),E=r(532444),y=r(162586),v=r(475179),b=r(97032),I=r(947606);function T({orgName:e}){return n.createElement(I.Ct,{background:"white",height:"16",border:"strong"},e?n.createElement(s.Tx,{id:"community.plugins.private_for_plugin_org_name",orgName:e}):n.createElement(s.Tx,{id:"community.plugins.private_for_your_organization"}))}var w=r(597058),S=r(351295),C=r(170949),O=r(79118),A=r(489534),N=r(528855),L=r(411215);function P({resource:e,overrideStyles:t,CTAButton:r}){let i=(0,u.$o)(e),a=e.community_publishers.accepted,l=e=>o()(N[e],null==t?void 0:t[e]);return n.createElement("div",{className:l("resourceWrapper")},n.createElement("div",{className:l("resourcePageHeaderMaxWidth")},n.createElement("div",{className:l("leftSide")},n.createElement("h1",{className:l("resourceNameHeader")},n.createElement("span",null,i.name),n.createElement(w.F,{badges:e.badges,height:"24"})),n.createElement("div",{className:l("attributionLine")},n.createElement(A.yX,{publishers:a}),n.createElement(A.xg,{publishers:a}),n.createElement(S.o,{resource:e}))),n.createElement("div",{className:l("rightSide")},r)))}function R({resource:e,CTAButton:t,hasScrolled:r}){let[i,a]=(0,l.KO)(c.I),d=(0,p.So)();n.useEffect(()=>{let e=()=>{let e=document.getElementById(h.OX.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,u.ah)(t,window.innerHeight,window.scrollY)?a(h.OX.CommentsView):a(h.OX.DescriptionView)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[a]);let m=(e,t)=>{if(e.preventDefault(),t===h.OX.DescriptionView){window.scrollTo({top:0,behavior:"smooth"});return}let r=document.getElementById(t);if(r){let e=h.yd,t=r.getBoundingClientRect().top+window.scrollY+e;window.scrollTo({top:t,behavior:"smooth"})}},g=(0,u.$o)(e),v=n.useMemo(()=>({...e,saved_at:e.saved_at??null}),[e]),b=(0,u.bg)(e)?E.V4.COMMUNITY_HUB_FILE:(0,f._4)(e)?E.V4.COMMUNITY_HUB_WIDGET:E.V4.COMMUNITY_HUB_PLUGIN,I=n.createElement(C.k$,{"data-onboarding-key":"save-button",resource:v,viewContext:b}),T=n.createElement(y.S,{resource:e,viewContext:b}),w=n.createElement(k,{resource:e});return r?n.createElement("div",{className:N.resourcePageHeaderSticky},n.createElement("div",{className:N.resourcePageHeaderStickyContainer},n.createElement("div",{className:N.headerStickyLeftSide},n.createElement("h1",{className:N.stickyTitle},g.name),n.createElement("div",{className:N.anchorLinkContainer},n.createElement("button",{onClick:e=>m(e,h.OX.DescriptionView)},n.createElement("div",{className:o()(N.anchorLink,{[N.activeAnchorLink]:i===h.OX.DescriptionView})},(0,s.t)("community.resource_page.about"))),(0,_.ku)(e)&&n.createElement("button",{onClick:e=>m(e,h.OX.CommentsView)},n.createElement("div",{className:o()(N.anchorLink,{[N.activeAnchorLink]:i===h.OX.CommentsView})},n.createElement(s.Tx,{id:d?"community.resource_page.comments_and_reviews":"community.resource_page.comments",numComments:n.createElement("span",{className:o()(L.LZ,{[L.Pb]:i===h.OX.CommentsView})},e.comment_count)}))))),n.createElement("div",{className:N.ctaContainer},t,T,I))):n.createElement(D,{resource:e,CTAButton:t,likeButton:T,saveButton:I,headerBadges:w})}function k({resource:e}){var t,r;let a=(0,i.v9)(e=>e.authedActiveCommunityProfile),o=(0,d.i)(e),l=(0,m.lq)(o),s=!(0,_.Kk)(a)&&l?n.createElement(b.sE,{resource:e,backgroundColor:"white",height:"16",border:"strong"}):null,c=((0,f.bH)(e)||(0,f._4)(e))&&(0,g.hs)(e)?n.createElement(T,{orgName:null==(r=null==(t=e.roles)?void 0:t.org)?void 0:r.name}):void 0;return n.createElement("div",null,s||c||n.createElement(w.F,{badges:e.badges,height:"16",border:"strong",disableIcon:!0}))}function D({resource:e,CTAButton:t,title:r,description:i,likeButton:a,saveButton:o,learnMore:l,headerBadges:s,openInNewTab:c=!1}){let d=(0,u.$o)(e),p=e.community_publishers.accepted,m=p.filter(e=>(0,v.Vk)(e.badges)),h=p.filter(e=>!(0,v.Vk)(e.badges)),_=[...m,...h];return n.createElement("div",{className:N.headerContainer},n.createElement("div",{className:N.authors},n.createElement(A.yX,{publishers:_,showFigmaPartnerBadge:!0}),n.createElement(A.xg,{publishers:_,openInNewTab:c,useSmallWidth:!0,removeByLabel:!0})),n.createElement("div",{className:N.title_badge_container},n.createElement("div",{className:N.title},n.createElement("h1",null,r??d.name)),s),n.createElement(O.Z,{resource:e}),!!i&&n.createElement("div",{className:N.description},i),n.createElement("div",{className:N.ctaContainer},t,l,a,o))}},435452:(e,t,r)=>{r.d(t,{v:()=>h});var n=r(652983),i=r(728148),a=r(518484),o=r(970740),l=r(225468),s=r(713518);function c({particleSystem:e,children:t}){let[r,i]=(0,n.useState)([]);return((0,s.p)((0,n.useCallback)(t=>{let r=e.getEntities().length;e.update(Math.min(Math.max(t/1e3,.001),.2)),(e.getEntities().length>0||r>0)&&i(e.getParticles())},[e,i])),r.length)?n.createElement("div",{className:"particle_system--particleContainer--XcgSY"},r.map((e,r)=>n.createElement("div",{className:"particle_system--particle--zD5gS",key:r,style:{transform:`translate3d(${e.position.x}px, ${e.position.y}px, 0px) rotate(${e.rotation}rad) translate(-50%, -50%) scale(${e.scale})`}},t))):null}let d=n.createElement("span",null,n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),n.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"var(--color-icon)"}))),u=n.createElement("span",null,n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12543 3.04791C5.67813 1.652 3.3316 1.652 1.8843 3.04791C0.437004 4.44381 0.437004 6.70702 1.8843 8.10293L2.75826 8.94585L2.75823 8.94588L7.99935 14.0009L14.114 8.10338C15.5613 6.70747 15.5613 4.44426 14.114 3.04836C12.6667 1.65245 10.3202 1.65245 8.87288 3.04836L7.99939 3.89083L7.12543 3.04791Z",fill:"#F24822"}),n.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"#F24822"})));class p extends i.hp{constructor(e,t,r){super(),this.position=e,this.kick=t,this.rotation=r,this.scale=1+Math.random(),this.gravity={x:0,y:-100},this.kickDecay=.87,this.lifetime=3}}class m extends i.Vo{constructor(e,t){super(),this.position=e,this.addParticle=t,this.emissionProfile=e=>3+Math.min(6,12*e),this.emitParticle=()=>{let e=new a.OW(Math.random()-.5,Math.random()-.5);e.y+=.2;let t=e.unit();t.y+=.3;let r=t.scale(500*Math.pow(Math.random(),.6)),n=.3*t.x;this.addParticle(new p({x:this.position.x,y:this.position.y},r,n))}}}function h(e){let t=n.useRef(new i.pc),r=t.current,s=n.useRef(null),p=()=>{var e;let t=null==(e=s.current)?void 0:e.getBoundingClientRect();if(t){let e=new a.OW(t.left+t.width/2,t.top+t.height/2);r.addEntity(new m(e,r.addParticle))}};return e.disabled?n.createElement("button",{className:"base_like_button--buttonContainerDisabled--sOWAD base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",disabled:e.disabled},n.createElement("div",{className:"base_like_button--likeIconDisabled--dfrWS base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd"},d)):n.createElement("button",{className:"base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.shouldTriggerFunHearts&&.3>=Math.random()&&s&&p()},"data-tooltip":(0,o.t)("community.like"),"data-tooltip-type":l.fR.TEXT},n.createElement("div",{className:"base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd",ref:s},e.isResourceLiked?u:d),n.createElement(c,{particleSystem:r},u))}},312677:(e,t,r)=>{r.d(t,{j:()=>l});var n=r(652983),i=r(869949),a=r(241051),o=r(435452);function l(){return n.createElement(o.v,{onClick:()=>(0,a.Hn)(i.zd.SIGN_UP,{preventDefaultRedirect:!0}),isResourceLiked:!1,shouldTriggerFunHearts:!1})}},170949:(e,t,r)=>{r.d(t,{k$:()=>T,Pm:()=>w});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(212984),s=r(970740),c=r(880369),d=r(298715),u=r(352180),p=r(322186),m=r(646472),h=r(225468);let _="save_button--buttonContainer--JQjtD save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",g="save_button--iconContainer--Brlqe",f="save_button--iconDisabled--15buP save_button--iconContainer--Brlqe";function E(e){return n.createElement(y,{...e})}function y({resource:e,viewContext:t,authedActiveCommunityProfile:r}){let i=(0,p.Ng)(),{onOrgInstallActionClick:a,isResourceInstalledForOrg:o}=(0,u.vV)(e,t),l=(0,m._4)(e)?null==i?void 0:i.widgets_whitelist_enforced:null==i?void 0:i.plugins_whitelist_enforced,E=(0,d.q3)(),y=(0,d.z4)(),v=(0,m._4)(e)?y[e.id]:E[e.id];return l&&!v?n.createElement("button",{className:_,disabled:!0},n.createElement("div",{className:f},n.createElement(c.N,null))):n.createElement("button",{className:_,onClick:a,"data-tooltip-type":h.fR.TEXT,"data-tooltip":o?(0,s.t)("community.saves.remove_this_resource_for_everyone_at",{orgName:r.name}):(0,s.t)("community.saves.save_this_resource_for_everyone_at",{orgName:r.name})},n.createElement("div",{className:g},o?n.createElement(c.Ew,null):n.createElement(c.N,null)))}var v=r(400275);function b(e){let{viewContext:t}=e,r=(0,i.v9)(e=>e.authedActiveCommunityProfile);return(null==r?void 0:r.team_id)||(null==r?void 0:r.org_id)&&(0,m.sg)(e.resource)?n.createElement("button",{className:_,disabled:!0},n.createElement("div",{className:f},n.createElement(c.N,null))):(null==r?void 0:r.org_id)?n.createElement(E,{resource:e.resource,viewContext:t,authedActiveCommunityProfile:r}):n.createElement(I,{resource:e.resource,viewContext:t,type:e.type,theme:e.theme})}function I({resource:e,viewContext:t,type:r,theme:i}){let{onSaveActionClick:a,isResourceSavedForUser:d}=(0,v.p)(e,t),u=o()("save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",{[l.cx.gap6.pl16.pr16.$]:"containText"===r,"save_button--buttonContainerBrandColors--xQhK7":"brand"===i,[l.cx.w40.h40.$]:"square"===r}),p=o()(g,{[l.cx.ml2.$]:"containText"===r}),m="brand"===i?"var(--color-icon-onbrand)":void 0;return n.createElement("button",{className:u,onClick:a,"data-onboarding-key":"save-button","data-tooltip-type":h.fR.TEXT,"data-tooltip":d?(0,s.t)("community.saves.remove_from_saves"):(0,s.t)("community.saves.save")},n.createElement("div",{className:p},d?n.createElement(c.Ew,{fill:m}):n.createElement(c.N,{fill:m})),"containText"===r&&n.createElement("div",null,n.createElement(s.Tx,{id:"community.saves.save_for_later"})))}function T(e){return n.createElement(b,{resource:e.resource,viewContext:e.viewContext,type:"square",theme:"default"})}function w(e){return n.createElement(b,{resource:e.resource,viewContext:e.viewContext,type:"containText",theme:"brand"})}},880369:(e,t,r)=>{r.d(t,{Ew:()=>a,N:()=>i,QW:()=>s,T4:()=>l,xr:()=>c,zi:()=>o});var n=r(652983);function i(e){return n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_8184_71416)"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5212L12 13.3883V2H4V13.3883L8 10.5212ZM3.5625 14.9322C3.33074 15.0983 3 14.9403 3 14.6634V1.67197C3 1.30085 3.3148 1 3.70312 1H12.2969C12.6852 1 13 1.30085 13 1.67197V14.6634C13 14.9403 12.6693 15.0983 12.4375 14.9322L8 11.7515L3.5625 14.9322Z",fill:e.fill||"var(--color-icon)"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_8184_71416"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}))))}function a(e){return n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_8174_71409)"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5625 14.9322C3.33074 15.0983 3 14.9403 3 14.6634V1.67197C3 1.30085 3.3148 1 3.70312 1H12.2969C12.6852 1 13 1.30085 13 1.67197V14.6634C13 14.9403 12.6693 15.0983 12.4375 14.9322L8 11.7515L3.5625 14.9322Z",fill:e.fill||"var(--color-icon)"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_8174_71409"},n.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}))))}function o(){return n.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function l(){return n.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return n.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function c(){return n.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},421864:(e,t,r)=>{r.d(t,{Mh:()=>y,eP:()=>E,eg:()=>g});var n=r(652983),i=r(407908),a=r(600486),o=r(31642),l=r(212984),s=r(970740),c=r(573196),d=r(680145),u=r(122474),p=r(485773),m=r(180447),h=r(882038),_=r(777217);function g({profileId:e,following:t,onFollowChange:r,trackingInfo:i}){return n.createElement("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),r(!t),(t?o.ZP.del:o.ZP.put)("/api/follows",{followed_profile_id:e}).then(()=>{t||(0,a.L9)("community_hub_profile_follow",{profileId:e,...i})}).catch(e=>{if("You're already following this user"===e.message){r(!t);return}r(t)})},className:t?_.yB:_.tG,"data-follow":(0,s.t)("community.follow.follow"),"data-unfollow":(0,s.t)("community.follow.unfollow"),"data-following":(0,s.t)("community.follow.following")})}let f={};function E({author:e}){let[t,r]=n.useState(!1);n.useEffect(()=>{(0,d.j)()&&u.n.getFollows({authorId:e.id}).then(({data:t})=>{let n=t.meta.current_user_is_following;f[e.id]=n,r(n)}).catch(e=>{throw Error("Could not get following status.")})},[e]);let o=(0,i.v9)(e=>e.authedActiveCommunityProfile),s=(0,c.v4)(e.id,o),E=()=>{(0,a.L9)("community_hub_profile_preview__profile_visit",{profileId:e.id})};return n.createElement("div",{className:_.x0},n.createElement("div",{className:_.h9},n.createElement(h.Ve,{to:`/@${e.profile_handle}`,onClickTracking:E,onClick:e=>e.stopPropagation()},n.createElement(p.q,{adtlClassName:_.ri,entity:e}),n.createElement("div",{className:_.K6},n.createElement(m.b,{profile:e,showBorder:!0}))),n.createElement(h.Ve,{to:`/@${e.profile_handle}`,onClickTracking:E,onClick:e=>e.stopPropagation()},n.createElement("div",{className:_.C$},n.createElement("span",{className:l.cx.ellipsis.noWrap.overflowHidden.$},e.name)),n.createElement("div",{className:_.Vm},"@",e.profile_handle))),!s&&n.createElement(g,{profileId:e.id,following:f[e.id],onFollowChange:t=>{r(t),f[e.id]=t,(0,a.L9)("community_hub_profile_preview__profile_follow",{profileId:e.id})}}))}function y({authors:e}){return n.createElement("div",null,e.map(e=>n.createElement(h.Ve,{className:_.kV,to:`/@${e.profile_handle}`,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(p.q,{entity:e}),n.createElement("div",{className:_.Sg},n.createElement("span",{className:l.cx.ellipsis.noWrap.overflowHidden.$},e.name),n.createElement(m.b,{profile:e})))))}},395566:(e,t,r)=>{r.d(t,{Lt:()=>h,ME:()=>_,Fj:()=>y,u:()=>v});var n=r(652983),i=r(87608),a=r.n(i);let o="dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="dropdown--dropdownContents--BqcL5",s="dropdown--dropdownValue--9lJPW",c="dropdown--dropdownPreview--3Ox9k",d="dropdown--label--cIJtO",u=(e,t)=>{let r=Array(e.length);return e.forEach((e,n)=>{if(null==t?void 0:t[n])r[n]=t[n];else if(Array.isArray(e)){let t=e.find(e=>e.checked);t?r[n]=t.key:r[n]=e[0].key}else r[n]={},Object.entries(e).find(([e,t])=>{t.checked&&(r[n][e]=!0)})}),r},p=(()=>{let e=[];return["scroll","resize"].forEach(t=>{window.addEventListener(t,()=>{e=e.filter(e=>{let t=m(e.el,!1,e.initialHPosition);return t})})}),{set:(t,r)=>{e.push({el:t,initialHPosition:r})}}})(),m=(e,t=!1,r)=>{var n;if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||(null==(n=e.parentNode)?void 0:n.firstChild)===document.activeElement||e===document.activeElement)&&!t)return!1;e.dataset.vPosition="below",e.dataset.hPosition="";let i=e.getBoundingClientRect();return i.bottom>window.innerHeight-20?e.dataset.vPosition="above":e.dataset.vPosition="below",i.right>window.innerWidth-100?e.dataset.hPosition="right":i.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==r&&(e.dataset.hPosition=r),!0};function h({children:e,preview:t,className:r,horizontalPosition:i,disableRepositioning:a}){let s=n.useRef(null);return n.createElement("div",{className:r||o,tabIndex:0,"data-disable-repositioning":a,onFocus:()=>{p.set(s.current,i),a||m(s.current,!0,i)}},e,n.createElement("button",{className:"dropdown--mobileBackground--WSE2Z",onClick:e=>{var t;return null==(t=document.activeElement)?void 0:t.blur()}}),n.createElement("div",{className:l,"data-v-position":"below","data-h-position":i||"",ref:s},t))}function _({children:e,preview:t,className:r,horizontalPosition:i,verticalPosition:a,disableRepositioning:s}){var c;let d=n.useRef(null),[u,h]=n.useState(!1),[_,g]=n.useState(0),f=e=>{window.innerWidth<500||(g(setTimeout(()=>{let t=d.current;t&&t.parentNode&&(t.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{h(e)},150):(p.set(t,i),h(e)))},150)),clearTimeout(_))};return n.useLayoutEffect(()=>{s||m(d.current,!0,i)},[null==(c=d.current)?void 0:c.dataset.hPosition,u]),n.createElement("div",{className:r||o,"show-dropdown":"false",onMouseEnter:e=>f(!0),onMouseLeave:e=>f(!1),tabIndex:0,"data-disable-repositioning":s,"data-hover-dropdown":!0},e,n.createElement("div",{className:l,"data-v-position":a||"below","data-h-position":i||"",ref:d,"data-dropdown-contents":!0},u&&t))}function g({show:e}){return n.createElement("svg",{className:e?"dropdown--showCheckmark--td6Ke":"",width:"16",height:"16",viewBox:"0 0 16 16",fill:"var(--color-icon-menu)",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2069 5.2073L7.70694 10.7073L6.99983 11.4144L6.29272 10.7073L3.29272 7.7073L4.70694 6.29309L6.99983 8.58598L11.7927 3.79309L13.2069 5.2073Z"}))}function f({optionGroup:e,value:t,onSelect:r}){let i;return i=Array.isArray(e)?e.map(({key:e,label:i})=>n.createElement("div",{key:e,role:"button",onKeyDown:e=>{13===e.keyCode&&e.target.click()},onClick:()=>{document.activeElement.blur(),r(e)},className:s,"data-key":e,tabIndex:0},n.createElement(g,{show:t===e}),n.createElement("div",{className:d},i))):Object.entries(e).map(([e,i])=>n.createElement("div",{key:e,role:"button",onKeyDown:e=>{13===e.keyCode&&e.target.click()},onClick:()=>{document.activeElement.blur(),r(e)},className:s,"data-key":e,tabIndex:0},n.createElement(g,{show:!0===t[e]}),n.createElement("div",{className:d},i.label))),n.createElement(n.Fragment,null,i)}function E({label:e,additionalClassName:t,onClick:r,dataOnboardingKey:i}){return n.createElement("div",{role:"button",tabIndex:0,className:a()(c,t),onMouseDown:e=>{var t;(null==(t=document.activeElement)?void 0:t.matches(`.${c.replace(/\s/g,".")}`))&&(document.activeElement.blur(),e.preventDefault())},onClick:r,"data-onboarding-key":i},n.createElement("div",{className:d},e),n.createElement("svg",{width:"10",height:"7",viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 1L5 5L9 1",stroke:"var(--text-primary)",strokeWidth:"1.5"})))}function y({name:e,options:t,onUpdate:r,onClick:i,initialValues:o,adtlClassName:l,dataOnboardingKey:s,showBorder:c}){if(!Array.isArray(t[0]))throw Error("First options input needs to be an array type, for preview reasons.");let d=u(t,o);return n.createElement(h,{className:a()(l||"dropdown--selectDropdown--Lqj6J dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",{"dropdown--selectDropdownWithBorder--tWUXN":c}),preview:n.createElement(n.Fragment,null,n.createElement("div",{className:"dropdown--mobileDropdownHeader--mEjUR"},n.createElement("b",null,e)),t.map((e,i)=>n.createElement("div",{key:i+"-group"},n.createElement(f,{optionGroup:e,value:d[i],onSelect:t=>{let n=[...d];if(Array.isArray(e))n[i]=t;else{let e=n[i];n[i]={...e,[t]:!e[t]}}r(n)}}),i<t.length-1&&n.createElement("hr",{className:"dropdown--optionGroupDivider--tmhsB"}))))},n.createElement(E,{onClick:i,dataOnboardingKey:s,label:t[0].find(e=>e.key===d[0]).label}))}function v({preview:e,children:t}){return n.createElement(_,{className:a()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},t)}},728140:(e,t,r)=>{r.d(t,{AS:()=>d,ck:()=>c,iw:()=>s});var n,i=r(652983),a=r(918321),o=r(195600),l=r(939429),s=((n=s||{}).DETAIL="detail",n.TEMPLATES_SIDEBAR="templates_sidebar",n.UNIVERSAL_INSERT="universal_insert",n);function c(e){let t={onLoad:e.onLoad,loading:"lazy"};return i.createElement(a.x,{sizes:function(e){switch(e){case"templates_sidebar":case"universal_insert":return;case"detail":t=o.y.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:t=o.y.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var t,r=Object.entries(t).map(([e,t],r)=>`(min-width: ${e}px) ${t}vw`);return r.push("100vw"),r.join(", ")}(e.thumbnailContext),srcSet:function(e,t,r,n){let i;if(!e||!t)return"";let a=Object.entries(r||{});if(!r){let r=function(e){if(!e)return;let t=e.lastIndexOf("/"),r=e.indexOf(".",t);return e.substring(t+1,r)}(t);a=Object.keys(o.e.COMMUNITY_HUB_FILE_THUMBNAIL).map(t=>[t,`/community/file/${e}/thumbnail/${t}?signature=${r}`])}switch(a.push(["1600",t]),n){case"templates_sidebar":case"universal_insert":i=a.map(([e,t])=>{let r=Math.round(parseInt(e)/parseInt(l.mG)*10)/10;return`${t} ${r}x`});break;default:i=a.map(([e,t])=>`${t} ${e}w`)}return i.join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:e.alt,className:e.className,imageProps:t})}function d(e){return e.hubFileId?i.createElement(c,{...e}):i.createElement(i.Fragment,null)}},793196:(e,t,r)=>{r.d(t,{XU:()=>Q,ke:()=>er,J9:()=>ee,Xl:()=>ea,m0:()=>ei,Ug:()=>q,dF:()=>X,MF:()=>$,$Q:()=>en});var n=r(652983),i=r(87608),a=r.n(i),o=r(261104),l=r.n(o),s=r(600486),c=r(716250),d=r(523495),u=r(925960),p=r(177944),m=r(435613),h=r(805992),_=r(212984),g=r(970740),f=r(772694),E=r(485773),y=r(97032),v=r(728140),b=r(746600),I=r(981002),T=r(573196),w=r(163381),S=r(289629),C=r(369874),O=r(761767),A=r(646472),N=r(348209),L=r(643826),P=r(110077),R=r(569522),k=r(932721),D=r(180447),M=r(602799),F=r(515788),x=r(882038),U=r(421864),B=r(395566),V=r(807149),G=r(661539),H=r(22645);function W({resource:e}){let t=e.editor_type===G.yA.FIGJAM||e.editor_type===G.yA.UNIVERSAL?H.DL:H.Xw;return n.createElement(x.Ve,{to:(0,T.Ly)({path:T.Mf.PLUGIN,id:e.id}),className:t},n.createElement(g.Tx,{id:"community.view"}))}var K=r(988906);let z=r(853693),Z=r(689886),Y=e=>{let t=document.createElement("div");return t.innerHTML=l().sanitize(e),t.innerText},j=(e,t,r,n)=>{(0,s.L9)("Community Resource Clicked",{resource_type:e,community_resource_id:t,subView:"feed",scope:L.$0.COMMUNITY,index:r,...n})};function $({resource:e}){let t=(0,y.rc)({resource:e,height:"24"});if(t)return n.createElement("div",{className:K.C8},t);let r=(0,k.y)({badges:e.badges});return r?n.createElement("div",{className:K.C8},n.createElement(k.B,null,r)):null}function q({resource:e,currentUserLiked:t}){return n.createElement("div",{className:t?K.Wk:K.uS},n.createElement(f.H,null),(0,d.K2)(e.like_count))}function X({resource:e}){return n.createElement("button",{className:K.nY},n.createElement(m.n,{svg:Z}),(0,d.K2)((0,C.BI)(e)))}function J(e){var t,r;let{resource:i,trackingInfo:a}=e,o=(0,T.$o)(i),l=(0,w.So)(),s=i.community_publishers.accepted,d=s[0],u=n.createElement("span",{className:K.v},(0,I.f3)(i)),p=(0,T.DX)(i),m=!!(null==(t=(0,T.Cd)(i.id,(0,T.yA)(i)).data)?void 0:t[0]);if(!d)return null;let h=l&&(null==(r=i.community_rating_stats)?void 0:r.total_ratings)?n.createElement(F.M,{resource:i,shortSummaryLabel:!0,hideSeeAll:!0,fromTileView:!0}):(0,c.BZ)().cmty_likes?n.createElement(q,{currentUserLiked:m,resource:i}):null;return n.createElement("div",{className:K.p3},n.createElement(x.Ve,{className:K.gC,to:`/@${d.profile_handle}`},n.createElement(B.ME,{preview:n.createElement(U.eP,{author:d})},n.createElement(E.q,{key:d.id,entity:d,adtlClassName:K.mV}))),n.createElement("div",{className:K.Id},n.createElement(x.Ve,{to:(0,T.O7)({resource:i,trackingInfo:a}),onClick:e=>{j(p,i.id,void 0,a)},className:K.TN},o.name),n.createElement(x.Ve,{className:K.gC,to:`/@${d.profile_handle}`},s.length>1?n.createElement(B.ME,{preview:n.createElement(U.Mh,{authors:s})},u):u)),n.createElement("div",{className:K.Nw},h,n.createElement(X,{resource:i})))}function Q({resource:e,isMetaHidden:t,animationIndex:r,onIntersectionChange:i,onClickOverride:a,index:o,trackingInfo:l}){var s;let c=(0,T.$o)(e),d=e.client_meta&&(null==(s=JSON.parse(e.client_meta))?void 0:s.background_color),u=e.thumbnail_is_set;e.viewer_mode===O.Zs.WHITEBOARD&&(d={r:1,g:1,b:1});let m=n.createElement(v.ck,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:c.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),_=(()=>{if(u)return K.$j;let t=e.viewer_mode===O.Zs.WHITEBOARD;return t?K.IW:K.R0})();return n.createElement("div",{className:K.IV,"data-animation-index":r},n.createElement(p.X,{onIntersectionChange:e=>null==i?void 0:i(e)}),n.createElement(x.Ve,{to:(0,T.O7)({resource:e,trackingInfo:l}),onClick:t=>{j("hub_file",e.id,o,l)},onClickOverride:a,className:K.Wq},n.createElement("div",{className:_,style:{backgroundColor:d&&`rgb(${255*d.r}, ${255*d.g}, ${255*d.b})`}},m,e.viewer_mode===O.Zs.PROTOTYPE&&n.createElement(h.f,{svg:z,className:K.xo,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:z}),n.createElement("div",{className:K.dR},n.createElement(R.Td,{editorType:e.viewer_mode===O.Zs.WHITEBOARD?N.lt.FIGJAM:N.lt.FIGMA})),!t&&n.createElement($,{resource:e}))),!t&&n.createElement(J,{resource:e,type:A._g.HUB_FILE,trackingInfo:l}))}function ee({resource:e,isMetaHidden:t,animationIndex:r,onIntersectionChange:i,onClickOverride:a,index:o,trackingInfo:l}){var s;let c=(0,T.$o)(e);return n.createElement("div",{"data-animation-index":r,className:K.BA},n.createElement(p.X,{onIntersectionChange:e=>null==i?void 0:i(e)}),n.createElement(x.Ve,{to:(0,T.O7)({resource:e,trackingInfo:l}),onClick:t=>{j("plugin",e.id,o,l)},onClickOverride:a,className:K.Wq},n.createElement("div",{className:K.R0},n.createElement("div",{className:K.Yo},n.createElement(P.d,{plugin:c,alt:`Figma plugin "${c.name}"`,onLoad:e=>e.target.style.opacity="1",loading:"lazy"})),!t&&n.createElement(n.Fragment,null,n.createElement("div",{className:K.BD},(0,C.Gx)(c,Y)),n.createElement("div",{className:K.dR},n.createElement(R.Td,{editorType:null==(s=c.manifest)?void 0:s.editorType})),n.createElement($,{resource:e})))),!t&&n.createElement(J,{resource:e,type:A._g.PLUGIN,trackingInfo:l}))}function et({uniqueRunCount:e,containerClassName:t}){return n.createElement(B.ME,{className:K.zl,disableRepositioning:!0,preview:n.createElement(g.Tx,{id:"community.try.used_by_n_people",num:e})},n.createElement("div",{className:t??K.rT},n.createElement("svg",{width:"10",height:"12",viewBox:"0 0 10 12",style:{fill:"var(--color-text-secondary, rgba(0, 0, 0, 0.8))"},xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 3C7 4.10457 6.10457 5 5 5C3.89543 5 3 4.10457 3 3C3 1.89543 3.89543 1 5 1C6.10457 1 7 1.89543 7 3ZM8 3C8 4.65685 6.65685 6 5 6C3.34315 6 2 4.65685 2 3C2 1.34315 3.34315 0 5 0C6.65685 0 8 1.34315 8 3ZM5 8C7.20914 8 9 9.79086 9 12H10C10 9.23858 7.76142 7 5 7C2.23858 7 0 9.23858 0 12H1C1 9.79086 2.79086 8 5 8Z"})),(0,d.K2)(e)))}function er({resource:e,animationIndex:t,onIntersectionChange:r,isOrgTeamBrowsing:i,index:o,trackingInfo:l}){let s=(0,T.$o)(e),c=(0,A.vu)(e),d=(0,A.F4)(e),m=(0,b.i)(e),h=(0,S.lq)(m),_=(0,w.So)(),f=n.useMemo(()=>i?n.createElement(W,{resource:e}):!c||h||d?n.createElement(V.l,{resource:e,context:A.Q8.PLUGIN_ROW}):n.createElement(M.i,{resource:e,context:A.Q8.PLUGIN_ROW}),[c,d,i,e,h]),E=(0,y.rc)({resource:e,height:"16",validBadges:[y.Kl.FREEMUM,y.Kl.OFF_PLATFORM,y.Kl.PURCHASED]}),v=(0,T.O7)({resource:e,trackingInfo:l}),O=()=>j("plugin",e.id,o,l);return n.createElement("div",null,n.createElement(p.X,{onIntersectionChange:e=>null==r?void 0:r(e)}),n.createElement("div",{className:K.zW},n.createElement(x.Ve,{to:v,onClick:O,animationIndex:t,className:K.iT},n.createElement(P.d,{className:K.Yr,alt:`Figma plugin "${s.name}"`,plugin:{...s,redirect_icon_url:s.redirect_icon_url||T.iP},onLoad:e=>e.target.style.opacity="1",onError:e=>e.target.src=T.iP,loading:"lazy"}),n.createElement(R.CE.BadgeContainer,null,n.createElement(R.Td,{editorType:s.manifest.editorType,is16x16:!0}))),n.createElement(x.Ve,{to:v,className:K.A9,onClick:O,animationIndex:t},n.createElement("div",{className:a()(K.V1,{[K.k5]:!!E})},n.createElement("span",{className:K.rQ},s.name),E),n.createElement("div",{className:a()(K.Sw,{[K.CX]:!!E})},(0,C.Gx)(s,Y))),n.createElement("div",{className:K.vR},(0,I.f3)(e)),n.createElement("div",{className:K.uz},n.createElement(g.Tx,{id:"community.view_bar.updated_date",date:n.createElement(u.Lt,{date:s.created_at})})),_?n.createElement("div",{className:K.Xz},n.createElement(et,{uniqueRunCount:e.unique_run_count,containerClassName:K.F1}),n.createElement(F.M,{resource:e,shortSummaryLabel:!0,isInPluginFeed:!0,hideSeeAll:!0})):n.createElement(et,{uniqueRunCount:e.unique_run_count}),n.createElement("div",{className:K.v4},f)))}function en({resource:e,isMetaHidden:t,animationIndex:r,onIntersectionChange:i,onClickOverride:a,index:o,trackingInfo:l}){let s=(0,T.$o)(e);return n.createElement("div",{"data-animation-index":r,className:K.Zg},n.createElement(p.X,{onIntersectionChange:e=>null==i?void 0:i(e)}),n.createElement(x.Ve,{to:(0,T.O7)({resource:e,trackingInfo:l}),onClick:t=>{j("widget",e.id,o,l)},onClickOverride:a,className:K.Wq},n.createElement("div",{className:K.R0},n.createElement("img",{alt:s.name,src:s.redirect_snapshot_url??void 0,onLoad:e=>e.target.style.opacity="1",loading:"lazy"}),!t&&n.createElement(n.Fragment,null,n.createElement("div",{className:K.dR},n.createElement(R.Td,{editorType:s.manifest.editorType})),n.createElement($,{resource:e})))),!t&&n.createElement(J,{resource:e,type:A._g.WIDGET,trackingInfo:l}))}function ei({resource:e}){return n.createElement(n.Fragment,null)}function ea({index:e,resource:t,animationIndex:r,authedActiveCommunityProfile:i,trackingInfo:a}){var o,l;let{model:s,resources:c}=t,[u,p]=n.useState(s.current_user_is_following),m=u&&!s.current_user_is_following?1:0,h=(0,T.v4)(s.id,i),f=(null==(o=s.img_urls)?void 0:o["500_500"])||(null==(l=s.img_urls)?void 0:l["120_120"]);return n.createElement(x.Ve,{to:`/@${s.profile_handle}`,onClick:()=>{j("profile",s.id,e,a)},className:K.KJ,animationIndex:r},n.createElement("div",{className:K.$5,style:{backgroundImage:`url(${f})`}}),n.createElement("div",{className:K.YW},n.createElement("div",{className:K.Kw},n.createElement("span",{className:_.cx.ellipsis.noWrap.overflowHidden.$},s.name),n.createElement(D.b,{profile:s,tooltip:!0})),n.createElement("div",{className:K.qA},"@",s.profile_handle),n.createElement("div",{className:K.hr},!h&&n.createElement(U.eg,{profileId:s.id,onFollowChange:()=>p(!u),following:u,trackingInfo:a}),n.createElement("div",{className:K.Jj},n.createElement("div",{className:K.c1},(0,g.t)("community.follow.followers")),n.createElement("div",{className:K.aU},(0,d.K2)(s.follower_count+m))))),n.createElement("div",{className:K.y3},c.length>0?c.slice(0,3).map(e=>(0,A._4)(e)?n.createElement("div",{className:K.ii,key:e.id},n.createElement("img",{alt:(0,T.$o)(e).name,src:(0,T.$o)(e).redirect_snapshot_url??void 0,loading:"lazy"})):((0,A.bH)(e),n.createElement("div",{className:K.ii,key:e.id},n.createElement("img",{alt:(0,T.$o)(e).name,src:e.thumbnail_url||void 0,loading:"lazy"})))):n.createElement("span",null,n.createElement(g.Tx,{id:"community.profiles.no_resources_published_yet"}))))}},241051:(e,t,r)=>{r.d(t,{ZP:()=>B,Hn:()=>F,C$:()=>x});var n,i=r(652983),a=r(407908),o=r(411047),l=r(600486),s=r(448501),c=r(337167),d=r(869949),u=r(237863);let p=(0,u.e)("AUTH_IFRAME_CLOSE"),m=(0,u.e)("AUTH_IFRAME_PRELOAD"),h=(0,u.e)("AUTH_IFRAME_OPEN"),_=(0,u.e)("SET_IFRAME_URL");var g=((n=g||{})[n.CLOSED=0]="CLOSED",n[n.PRELOAD=1]="PRELOAD",n[n.OPEN=2]="OPEN",n);let f={authIFrame:{authIFrameState:0,authIFrameURL:"/login_iframe?with_community_header=true&type=fixedmodal"}};var E=r(418786),y=r(951174),v=r(716250),b=r(286206),I=r(750274),T=r(263419),w=r(566203),S=r(610811),C=r(443276),O=r(947324),A=r(10612);let N={...f,...C.D,...w.qu,...T.oU,...A.x6,...O.d,...S.R},L=[...Object.values(I),p,m,h,_],P={authIFrame:(e=f.authIFrame,t)=>p.matches(t)?{...e,authIFrameState:0}:m.matches(t)?{...e,authIFrameState:1}:h.matches(t)?{...e,authIFrameState:2}:_.matches(t)?{...e,authIFrameURL:t.payload.url}:e,authedUsers:C.L,authedProfilesById:w.pn,authedActiveCommunityProfile:T.zj,orgUsersByOrgId:A.l8,orgById:O.F,authedTeamsById:S.Y},R=(0,E.MT)((0,E.UY)(P),N,(0,E.md)(y.Z,e=>e=>function(t){let r=e(t);if(!(0,v.BZ)().cmty_log_invalid_actions)return r;let n=L.some(e=>e.matches(t));return n||(0,b.x9)(`[Community] Detected invalid action to Community store: ${t.type}`),r}));var k=r(129706),D=r(619276);let M=(0,c.cn)(!1),F=(e=d.zd.SIGN_IN,t={})=>{var r;if(t.preventDefaultRedirect&&(t.authOptions??(t.authOptions={}),t.authOptions.redirect_url=s.default.location.pathname+s.default.location.search),c.n_.get(M))x({name:d.G8,options:{formState:e,redirectUrl:null==(r=t.authOptions)?void 0:r.redirect_url}});else{let r=new URLSearchParams(t.authOptions),n="/login_iframe";e===d.zd.SIGN_UP&&r.append("form_state","sign_up"),r.append("type","fixedmodal"),r.append("with_community_header","true");let i=r.toString(),a=i.length?[n,i].join("?"):n;R.dispatch(_({url:a}))}(0,a.dC)(()=>{(0,o.HV)(),R.dispatch(h())})},x=e=>{var t;let r=document.querySelector("iframe#figma-auth-iframe");null==(t=null==r?void 0:r.contentWindow)||t.postMessage(e,location.origin)},U=()=>{R.dispatch(p())};function B(){let e=i.useRef(null),[t,r]=(0,c.KO)(M),[n,a]=i.useState(void 0),[o,s]=i.useState(g.CLOSED);R.subscribe(()=>{let e=R.getState().authIFrame.authIFrameState,t=R.getState().authIFrame.authIFrameURL;void 0!==e&&e!==o&&(s(e),a(t))});let[d,u]=i.useState(!1);return!function(e){let t=i.useRef();i.useEffect(()=>{t.current=e},[e]),i.useEffect(()=>{let e=e=>{var r;null==(r=t.current)||r.call(t,e)};return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}},[])}(t=>{var n,i,a,o;e.current&&t.origin===location.origin&&((null==(n=t.data)?void 0:n.type)==="trackEvent"&&(null==(i=t.data)?void 0:i.event)==="Auth Actions"&&(null==(o=null==(a=t.data)?void 0:a.properties)?void 0:o.eventSubtype)==="show_auth_page"&&r(!0),"trackEvent"===t.data.type&&(0,l.L9)(t.data.event,t.data.properties,t.data.options),"esc"===t.data.keyPress&&U())}),i.useEffect(()=>{var t;if(e.current&&(o>g.CLOSED&&!d&&u(!0),o===g.OPEN&&e.current.contentDocument)){let r=null==(t=e.current.contentDocument)?void 0:t.getElementsByTagName("input")[0];null==r||r.focus()}},[o,d]),i.createElement(k.Z,{className:D.figmaAuthModal,style:{visibility:o===g.OPEN?"visible":"hidden"},showInnerModal:t,onClick:()=>U()},o>g.CLOSED||d?i.createElement("iframe",{id:"figma-auth-iframe","data-testid":"figma-auth-iframe",ref:e,title:"Figma Auth",src:n}):i.createElement(i.Fragment,null))}},411047:(e,t,r)=>{r.d(t,{ZP:()=>_,HV:()=>h});var n=r(652983),i=r(337167),a=r(869949),o=r(435613),l=r(131826),s=r(63568),c=r(241051),d=r(129706),u=r(619276);function p({headerText:e,icon:t,source:r}){return n.createElement(l.Ui,{name:"community auth modal",properties:{source:r}},n.createElement(d.Z,{className:u.loggedOutCommunityActionModal},n.createElement(s.Z,{props:{headerText:e,icon:t},styles:u,Event:{onLogInClick:()=>{(0,c.Hn)(a.zd.SIGN_IN,{preventDefaultRedirect:!0})},onSignUpClick:()=>{(0,c.Hn)(a.zd.SIGN_UP,{preventDefaultRedirect:!0})}},Component:{ModalCloseButton:()=>n.createElement("button",{className:u.modalCloseButton,onClick:()=>{h()}},"\xd7"),BrandButton:e=>n.createElement(l.XT,{...e},e.children),ButtonSecondaryTracked:e=>n.createElement(l.XT,{...e},e.children),Svg:o.n}})))}let m=(0,i.cn)(null);function h(){i.n_.set(m,null)}function _(){let e=(0,i.Dv)(m);if(null===e)return n.createElement(n.Fragment,null);let{type:t,data:r}=e;return"COMMUNITY_AUTH_MODAL"===t?n.createElement(p,{headerText:r.headerText,icon:r.icon,source:r.source}):n.createElement(n.Fragment,null)}},602799:(e,t,r)=>{r.d(t,{i:()=>o});var n=r(652983),i=r(524261);let a=(0,i.kH)("lazy_cmty_purchase_button",{isCodesplit:!0,ComponentFactory:async()=>{let e=await r.e(6709).then(r.bind(r,316709));return{default:e.default}}});function o({resource:e,context:t,payment:r}){return n.createElement(a,{fallback:null,errorFallback:null,resource:e,context:t,payment:r})}},515788:(e,t,r)=>{r.d(t,{J:()=>I,M:()=>w});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(926416),s=r(965591),c=r(970740),d=r(283537),u=r(54055),p=r(646472),m=r(505468),h=r(157607),_=r(587487),g=r(505335),f=r(767698),E=r(605187),y=r(229039),v=r(956698);function b({targetKey:e,onClose:t,children:r,isMobile:a,setContainerRef:o}){let l=(0,i.I0)(),s=n.useRef(null);return n.useEffect(()=>{o&&o(s.current)},[o,s]),n.createElement(n.Fragment,null,a?n.createElement(m.u_,{onHide:t,dispatch:l,className:v.sw},r):n.createElement(_.Qm,{containerRef:s,targetKey:e,topOffset:4,shouldCenterArrow:h.Ht.FALLBACK,backgroundColor:"var(--color-bg, $figmaFGWhite)",shouldNotWrapInParagraphTag:!0,width:320,className:v.DN},r))}function I({userRating:e,isInsertsModal:t,disabled:r,disabledTooltip:i,openRatingModal:a}){return n.createElement("div",{className:t?v.SW:v.s4},n.createElement("div",{className:t?v.NO:v.$E},e?n.createElement("div",{onClick:()=>a(null==e?void 0:e.ratingValue),className:v.QH,role:"button",tabIndex:0},n.createElement(c.Tx,{id:"community.detail_view.edit_rating"})):n.createElement(c.Tx,{id:"community.detail_view.leave_a_rating"})),n.createElement(E.n,{onSelect:a,existingRating:null==e?void 0:e.ratingValue,disabled:r,disabledTooltip:i}))}function T({avgRating:e,totalRatings:t,shortSummaryLabel:r}){return r?n.createElement("span",null,`${e.toFixed(1)} (${t})`):n.createElement("span",null,`${e.toFixed(1)} (${(0,c.t)("community.detail_view.ratings",{totalRatings:t})})`)}function w(e){let{userRating:t,communityRatingStats:r,canRate:i,openRatingModal:a,onSeeAll:m,statsLabelClassName:h,hideSeeAll:_,isInPluginFeed:E=!1,shortSummaryLabel:w=!1,fromTileView:S=!1,hideRatingSelector:C=!1,hideModal:O=!1}=e,A=(0,u.d8)(),[N,L]=n.useState(!1),P=(0,l.X)(645),{onScrollToRatings:R}=n.useContext(g.Y),[k,D]=(0,s.X)(),[M,F]=(0,s.X)(),x=r||(0,p.gH)(e.resource.community_rating_stats),U=`rating-stats-label-${e.resource.id}`,B=!(0,d.H9)({userRating:t,canRate:!!i}),V=B?(null==A?void 0:A.public_at)?(0,p.vu)(e.resource)?(0,c.t)("community.star_ratings.you_can_rate_this_resource_after_purchasing_and_trying"):(0,c.t)("community.star_ratings.you_can_rate_this_resource_after_you_try_it_out"):(0,c.t)("community.star_ratings.you_need_a_community_profile_to_leave_a_rating"):void 0;return n.useEffect(()=>{let e;return(D||F)&&L(!0),D||F||(e=setTimeout(()=>{D||F||L(!1)},150)),()=>{clearTimeout(e)}},[D,F]),n.createElement("div",{ref:k},n.createElement("div",{className:o()(h,{[v.FA]:E&&!h,[v.Su]:!E&&!h,[v.HD]:S}),"data-onboarding-key":U,onMouseEnter:()=>!P&&L(!0),onClick:()=>L(!N),role:"button",tabIndex:0,"aria-haspopup":"true","aria-expanded":N},n.createElement(f.r,null),(null==x?void 0:x.avgRating)?n.createElement(T,{avgRating:x.avgRating,totalRatings:x.totalRatings,shortSummaryLabel:w}):n.createElement(c.Tx,{id:"community.rating_review.not_rated"})),N&&!O&&n.createElement(b,{setContainerRef:M,onClose:()=>L(!1),targetKey:U,isMobile:P},n.createElement(y.W,{communityRatingStats:x,navToRatingsHandler:_?void 0:()=>{L(!1),m?m():R&&R()}}),!E&&a&&!C&&n.createElement(I,{userRating:t,openRatingModal:e=>{L(!1),a(e)},disabled:B,disabledTooltip:V})))}},740031:(e,t,r)=>{r.d(t,{Ef:()=>h,U2:()=>p,Py:()=>m});var n=r(652983),i=r(571529),a=r(435613),o=r(970740),l=r(289629),s=r(225468),c=r(395566);let d="resource_badge_subtext--container--hKr5Q",u=r(527925);function p({resource:e,showCaret:t=!0}){let r=(0,l.M)(e.monetized_resource_metadata);return n.createElement("div",{className:d},i.s2?n.createElement(o.Tx,{id:"community.buyer.in_app_purchases"}):n.createElement(c.u,{preview:r},n.createElement("div",{className:"resource_badge_subtext--text--ks9uS text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(o.Tx,{id:"community.buyer.in_app_purchases"})),t&&n.createElement(a.n,{className:"resource_badge_subtext--caret--weiCk",svg:u})))}function m(){return n.createElement("div",{className:d,"data-tooltip-type":s.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-show-immediately":!0},n.createElement(o.Tx,{id:"community.detail_view.third_party_badge.off_platform"}))}function h({metadata:e}){return n.createElement("div",{className:d},n.createElement(o.Tx,{id:"community.resource.free_trial_days",days:e.trial_length_in_days}))}},79118:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(652983),i=r(523495),a=r(435613),o=r(970740),l=r(573196),s=r(163381),c=r(369874),d=r(515788),u=r(528855);let p=r(689886),m=r(676169);function h({resource:e}){var t;let r=(0,s.So)(),h=e.community_rating_stats&&(null==(t=e.community_rating_stats)?void 0:t.total_ratings)>0,_=e.like_count>0,g=(0,c.BI)(e)>0,f=n.createElement("div",{className:u.bulletSeparator},n.createElement(o.Tx,{id:"community.detail_view.bullet_point"}));return n.createElement("div",{className:u.stats},n.createElement("div",null,(0,l.eq)(e)),_&&n.createElement(n.Fragment,null,f,n.createElement(a.n,{svg:m}),n.createElement("div",{className:u.numberOfUsers},(0,i.K2)(e.like_count))),g&&n.createElement(n.Fragment,null,f,n.createElement(a.n,{svg:p}),n.createElement("div",{className:u.numberOfUsers},n.createElement(o.Tx,{id:"community.detail_view.number_of_users",numberOfUsers:(0,i.K2)((0,c.BI)(e))}))),r&&h&&n.createElement(n.Fragment,null,f,n.createElement(d.M,{resource:e,shortSummaryLabel:!0,hideSeeAll:!0,fromTileView:!1,hideModal:!0})))}},489534:(e,t,r)=>{r.d(t,{yX:()=>R,xg:()=>k,Mo:()=>M,Zy:()=>F});var n=r(652983),i=r(926416),a=r(151163),o=r(716250),l=r(746600),s=r(400275),c=r(981002),d=r(573196),u=r(163381),p=r(680145),m=r(289629),h=r(445311),_=r(205007),g=r(692379),f=r(646472),E=r(485773),y=r(475179),v=r(597058),b=r(312677),I=r(170949);let T=r(285789).PluginTryButton;var w=r(602799),S=r(740031),C=r(79118),O=r(882038),A=r(692765);let N="resource_page_header--resourceHeaderAvatar--FI-3x",L="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",P="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function R({publishers:e,size:t=32,showFigmaPartnerBadge:r}){return e.length<5?n.createElement(n.Fragment,null,e.map((e,i)=>n.createElement("div",{key:e.id,className:L},n.createElement(O.Ve,{to:`/@${e.profile_handle}`,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(E.q,{entity:e,size:t,style:{zIndex:3-i},adtlClassName:N})),r&&n.createElement("div",{className:P,style:{zIndex:3-i}},(0,y.R3)(e,!0))))):n.createElement(n.Fragment,null,e.slice(0,3).map((e,t)=>n.createElement("div",{className:L,key:e.id},n.createElement(O.Ve,{to:`/@${e.profile_handle}`,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(E.q,{entity:e,style:{zIndex:3-t},adtlClassName:N})),r&&n.createElement("div",{className:P,style:{zIndex:3-t}},(0,y.R3)(e,!0)))),n.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},n.createElement(_.q,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function k({publishers:e,useSmallWidth:t=!1,removeByLabel:r=!1,openInNewTab:i=!1}){return n.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,c.vX)(e,t,r,i))}function D({button:e,subtext:t}){return n.createElement("div",{className:A.E},e,t&&n.createElement("div",{className:A.G1},t))}function M({resource:e}){let t=(0,f.F4)(e),r=(0,l.i)(e),i=!(0,p.j)()&&((0,f.bH)(e)||(0,f._4)(e))&&(0,u.$p)();if((0,m._c)(e,r))return n.createElement(w.i,{resource:e,context:f.Q8.DETAIL});if((0,d.bg)(e))return n.createElement(s.c,{hubFile:e});{let r=t?n.createElement(S.U2,{resource:e,showCaret:!i}):(0,f.v9)(e)?n.createElement(S.Py,null):void 0;return n.createElement(D,{button:n.createElement(T,{resource:e,context:f.Q8.DETAIL,inRedesignExp:!0}),subtext:r})}}function F({resource:e}){let t=(0,d.$o)(e),r=(0,i.X)(g.l1),l=(0,a.v)(),s=e.community_publishers.accepted,c=n.useMemo(()=>({...e,saved_at:null}),[e]);return n.createElement("div",{className:l?r?"resource_page_header--resourcePageHeaderMobile--RBDAk resource_page_header--resourcePageHeader--NQ5IX":"resource_page_header--resourcePageHeader--NQ5IX":"resource_page_header--resourcePageHeaderSticky--mAxn8 resource_page_header--resourcePageHeader--NQ5IX"},n.createElement("div",{className:"resource_page_header--resourcePageHeaderMaxWidth--uxz5W"},n.createElement("div",{className:"resource_page_header--leftSide--xtHpr"},n.createElement("h1",{className:"resource_page_header--resourceNameHeader---1-0y text--fontPos24--YppUD text--_fontBase--QdLsd"},n.createElement("span",{className:"resource_page_header--name--g8MqS"},t.name),n.createElement(v.F,{badges:e.badges,height:"24"})),n.createElement("div",{className:"resource_page_header--attributionLine--rsfxX text--fontPos13--xW8hS text--_fontBase--QdLsd"},n.createElement(C.Z,{resource:e}),n.createElement("div",{className:"resource_page_header--attributionCreator--hk-qB"},n.createElement(R,{publishers:s}),n.createElement(k,{publishers:s})),!1)),n.createElement(h.ZP,{showIf:e=>e>g.l1},n.createElement("div",{className:"resource_page_header--rightSide--oN7bA"},(0,o.BZ)().cmty_likes&&n.createElement(b.j,null),n.createElement(I.k$,{resource:c,viewContext:"logged_out"}),n.createElement(M,{resource:e})))))}},882038:(e,t,r)=>{let n;r.d(t,{CP:()=>m,T8:()=>f,Ve:()=>E,b4:()=>h});var i=r(652983),a=r(448501),o=r(573196),l=r(455322),s=r(729968),c=r(680145);let d=e=>({type:"SELECT_VIEW",payload:e}),u=/^\/community\/(file|widget|plugin)\/(\d+)/,p=/^\/@(.+)/;function m(e){n=e}function h(){return n}function _(e){let t=(0,l.W)(window.location.pathname),r=(0,l.W)(e);return t.reactRouterHandled&&r.reactRouterHandled}let g=(e,t)=>{let r=!1,{pathname:i}=window.location;if(/^\/community/.test(i)&&(0,c.j)()&&!(u.test(e)||p.test(e)))return r;if(u.test(e)){r=!0;let[t,i,a]=e.match(u),o=function(e){let t=e.split("?")[1],r=new URLSearchParams(t),n=r.get("searchSessionId");return n?{searchSessionId:n}:void 0}(e);n(d({...(0,s.n)(i,a),cmtyTrackingInfo:o}))}else if(p.test(e))r=!0,n(d({view:"communityHub",subView:"handle",handle:e.match(p)[1]}));else{r=!0;let[t,i]=e.split("?");i=i?`?${i}`:"",n(d({data:(0,l.bz)(t,i),subView:"searchAndBrowse",view:"communityHub"}))}return r&&t&&(t.preventDefault(),t.stopPropagation()),r};function f(e){if(_(e))o.OG.push(e);else{let t=!1;(0,c.j)()&&(t=g(e)),t||a.default.push(e)}}function E({to:e,onClickTracking:t,onClick:r,onClickOverride:n,className:a,children:l,style:s,onRef:d,animationIndex:u,target:p}){return i.createElement("a",{href:e,onClick:i=>{if(null==t||t(i),!i.ctrlKey&&!i.metaKey){if(r&&r(i),n){i.preventDefault(),n(i);return}if(_(e)){i.preventDefault(),o.OG.push(e);return}(0,c.j)()&&g(e,i);return}},style:s,className:a,ref:e=>{null==d||d(e)},target:p},l)}},746600:(e,t,r)=>{r.d(t,{i:()=>s,r:()=>c});var n=r(669277),i=r(289629),a=r(862610),o=r(646472),l=r(597694);let s=e=>{var t;let r=e&&(0,o.vu)(e)?e.monetized_resource_metadata.id:"-1",i=(0,n.mU)(a.CommunityPayment,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==i.status||(null==(t=i.errors)?void 0:t.length))return function(e){return null==e?void 0:e.community_resource_payment}(e);{let{communityResourcePayment:e}=i.data;if(!e)return;return{status:l.Zg[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}};function c(e){let t=s(e);return(0,i.lq)(t)}},400275:(e,t,r)=>{r.d(t,{c:()=>i,p:()=>n});let n=r(352180).pm,i=r(172120).t},573196:(e,t,r)=>{r.d(t,{$o:()=>x,Cd:()=>e_,Cw:()=>F,DX:()=>j,Dd:()=>el,Fj:()=>X,Gz:()=>k,JP:()=>ed,Kw:()=>et,Ly:()=>q,Mf:()=>K,O7:()=>$,OG:()=>ea,QN:()=>R,Ul:()=>ei,Up:()=>Y,V9:()=>em,Vv:()=>es,Wv:()=>U,Zc:()=>eo,ah:()=>ep,bg:()=>G,eq:()=>eu,iP:()=>Q,mM:()=>eh,n5:()=>ec,nD:()=>H,nb:()=>en,q9:()=>Z,rD:()=>B,v4:()=>ee,vQ:()=>J,v_:()=>er,yA:()=>V,yu:()=>D});var n,i=r(652983),a=r(407908),o=r(241901),l=r(785466),s=r.n(l),c=r(239299),d=r(448501),u=r(669277);r(925705);var p=r(834854),m=r(523495),h=r(361763),_=r(970740),g=r(838691),f=r(749375),E=r(995971),y=r(435437);r(692379);var v=r(496417),b=r(761767),I=r(862610),T=r(646472),w=r(348209),S=r(465883),C=r(326714),O=r(661539),A=r(887138),N=r(310975),L=r(455322),P=r(729408);let R=new RegExp(/^[\w.]{0,30}$/),k=new RegExp(/^\w{0,15}$/),D=!1,M=new Date("2023-11-30"),F=e=>{let t={};return e.map(e=>e.tags).map(e=>{if(e)for(let r=0;r<(null==e?void 0:e.length);r++)t[e[r]]||(t[e[r]]=0),t[e[r]]++}),Object.entries(t).sort((e,t)=>e[1]>t[1]?-1:1).map(e=>e[0])};function x(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:e.versions[e.current_plugin_version_id]}let U=()=>location.pathname.split("/").slice(2);function B(e){switch(e){case b.Zs.WHITEBOARD:return w.lt.FIGJAM;case b.Zs.CANVAS:case b.Zs.PROTOTYPE:default:return w.lt.FIGMA}}let V=e=>e.viewer_mode?T._g.HUB_FILE:e.is_widget?T._g.WIDGET:T._g.PLUGIN,G=e=>void 0!==e.viewer_mode,H=e=>e.viewer_mode===b.Zs.LIBRARY;var W=((n=W||{}).HUB_FILES="hub_files",n.PLUGINS="plugins",n.WIDGETS="widgets",n);let K={FILE:"file",WIDGET:"widget",PLUGIN:"plugin"},z={FILE:"files",WIDGET:"widgets",PLUGIN:"plugins"},Z=Object.values(K),Y=e=>{let t=V(e);return t===T._g.HUB_FILE?K.FILE:t},j=(e,{plural:t=!1}={})=>{let r=V(e);return t?r===T._g.HUB_FILE?z.FILE:r===T._g.WIDGET?z.WIDGET:z.PLUGIN:r===T._g.HUB_FILE?K.FILE:r===T._g.WIDGET?K.WIDGET:K.PLUGIN},$=({resource:e,trackingInfo:t})=>{var r;let n=Y(e),i=e.id,a=(null==(r=x(e))?void 0:r.name)??"";return q({path:n,id:i,name:a,trackingInfo:t})},q=({path:e,id:t,name:r,trackingInfo:n})=>{let i=n?new URLSearchParams(n).toString():"",a=(0,m.aK)(r||"");return`/community/${e}/${t}${""===a?"":"/"}${a}${i?`?${i}`:""}`},X=e=>`${location.origin}${$({resource:e})}`,J=e=>{var t=document.createElement("input");t.style.position="fixed",t.style.top="-1000px",t.value=e,t.classList.add(v.Hy),document.body.appendChild(t),t.select(),document.execCommand("copy"),t.parentNode.removeChild(t)},Q="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function ee(e,t){return(null==t?void 0:t.entity_type)!==S.Se.USER||(null==t?void 0:t.id)===e}function et(e){var t;if("/community"===d.default.location.pathname||!e)return"Add a little magic to your files";if("/community/plugins"===d.default.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===d.default.location.pathname)return"Customize your space with Widgets";let r=[];return e.sort_by===g.A.Browse.PUBLISHED_AT?r.push("Newest"):e.sort_by===g.A.Browse.ALL_TIME?r.push("Top"):e.sort_by===g.A.Browse.POPULAR&&r.push("Trending"),e.editor_type===O.IP.FIGJAM?r.push("FigJam"):e.editor_type===O.IP.FIGMA&&r.push("Figma"),e.resourceType===f.x.BrowseResourceTypes.FILES?r.push("Files"):e.resourceType===f.x.BrowseResourceTypes.WIDGETS?r.push("Widgets"):e.resourceType===f.x.BrowseResourceTypes.PLUGINS?r.push("Plugins"):r.push("Resources"),(null==(t=e.tags)?void 0:t.length)>0&&r.push(`tagged as ${e.tags.join(", ")}`),e.query&&r.push(`matching "${e.query}"`),r.join(" ")+" | Figma Community"}function er(e){return!!e&&(null==e?void 0:e.stripe_account_status)&&(0,N.ph)(e.stripe_account_status)>=(0,N.ph)(N.Sc.ACCEPTED)}function en(e){var t;return!!(null==(t=null==e?void 0:e.associated_users)?void 0:t.find(e=>e.can_sell_on_community))}function ei(e){return(null==e?void 0:e.stripe_account_status)&&e.stripe_account_status!==N.Sc.NONE&&e.stripe_account_status!==N.Sc.ACCEPTED}let ea=function(){try{return(0,o.lX)()}catch(e){if("URIError"===e.name){let e=window.location.href;return d.default.replace(e.substring(0,e.lastIndexOf("/"))),(0,o.lX)()}throw e}}();function eo(e){(0,h.KF)()||(0,h.Es)()||"communityHub"!==e.view||c.YO||"searchAndBrowse"!==e.subView||!e.data||ea.push((0,L.tW)(e.data))}function el(e){return(0,y.E0)(e)?T._g.WIDGET:(0,y.T4)(e)?T._g.PLUGIN:T._g.HUB_FILE}ea.listen(e=>{"PUSH"===ea.action&&p.Z.endPageVisitAndStartNewPageVisit(p.N.PUSH,e.pathname),"REPLACE"===ea.action&&p.Z.endPageVisitAndStartNewPageVisit(p.N.REPLACE,e.pathname)});let es=e=>{let t=x(e);return t&&t.name||""};function ec(e){return e?"100%":Math.min(window.innerWidth,parseInt(P.V_M))}let ed=e=>{if((0,T.sg)(e)&&e.viewer_mode===b.Zs.PROTOTYPE)return A.Pk.EMBED;if(function(e){var t;if(1!==Object.keys(e.carousel_media_urls??{}).length||((0,T.bH)(e)||(0,T._4)(e))&&Object.keys(e.carousel_videos??{}).length>0)return!1;let r=null==(t=e.carousel_media_urls)?void 0:t["0"];return!!r&&null!=r&&!!r.created_at&&!((null==r?void 0:r.created_at)>=M)}(e))return A.Pk.THUMBNAIL;let t=function(e){return Object.keys(e.carousel_media_urls??{}).length>0||((0,T.bH)(e)||(0,T._4)(e))&&Object.keys(e.carousel_videos??{}).length>0}(e);return t?A.Pk.CURATED_IMAGE:(0,T.sg)(e)&&!e.thumbnail_is_set?A.Pk.EMBED:A.Pk.THUMBNAIL};function eu(e){if((0,T.sg)(e))switch(e.viewer_mode){case b.Zs.WHITEBOARD:return i.createElement(_.Tx,{id:"community.detail_view.figjam_board"});case b.Zs.CANVAS:return i.createElement(_.Tx,{id:"community.detail_view.design_file"});case b.Zs.PROTOTYPE:return i.createElement(_.Tx,{id:"community.detail_view.prototype"})}return(0,T.bH)(e)?i.createElement(_.Tx,{id:"community.detail_view.plugin"}):(0,T._4)(e)?i.createElement(_.Tx,{id:"community.detail_view.widget"}):i.createElement(_.Tx,{id:"community.detail_view.design_file"})}function ep(e,t,r){return e+E.Y7<=t&&r>E.DF}function em(e){return s()(e,(0,C.oX)())}function eh(e){let t={};return e.carousel_media_urls&&Object.entries(e.carousel_media_urls).forEach(([e,r])=>{t[e]={...r,type:"image"}}),((0,T.bH)(e)||(0,T._4)(e))&&(null==e?void 0:e.carousel_videos)&&Object.entries(e.carousel_videos).forEach(([e,r])=>{t[e]={...r,type:"video"}}),Object.entries(t).sort(([e],[t])=>parseInt(e)-parseInt(t)).map(([e,t])=>t)}function e_(e,t){let r=(0,a.v9)(e=>e.authedActiveCommunityProfile),n={profileId:(null==r?void 0:r.id)||"",hubFileId:null,pluginId:null};return t===T._g.HUB_FILE?n.hubFileId=e||null:n.pluginId=e||null,(0,u.mU)(I.CommunityHubLikeForProfile,n,{enabled:!!n.profileId}).transform(e=>{var t;return[!!e.communityHubLike,(null==(t=e.communityHubLike)?void 0:t.id)||null]})}},163381:(e,t,r)=>{r.d(t,{$p:()=>s,NN:()=>p,So:()=>l,bW:()=>c,uE:()=>d,vz:()=>u,yZ:()=>o});var n=r(407908),i=r(716250),a=r(458324);function o(e){if(!(0,i.BZ)().cmty_rating_review)return!1;if((0,i.BZ)().cmty_rating_review_ga||(null==e?void 0:e.is_creator))return!0;let t=(0,a.rm)("rating_review_experiment");return t.getValue("enabled",!1)}function l(){let e=(0,n.v9)(e=>e.authedActiveCommunityProfile);return o(e)}function s(){if(!(0,i.BZ)().cmty_plugin_rdp_redesign)return!1;let e=(0,a.rm)("exp_resource_page_redesign_plugin");return e.getValue("show_plugin_redesign",!1)}function c(e){return!0}function d(e){if(!e)return!1;let t=(0,a.rm)("cmty_nav_categories");return t.getValue("show_categories",!1)}function u(e){if(!e)return!1;let t=(0,a.rm)("cmty_category_redesign");return t.getValue("enabled",!1)}function p(e){if(!e)return!1;let t=(0,a.rm)("exp_cmty_rdp_categories");return t.getValue("has_categories",!1)}r(573196),r(646472)},455322:(e,t,r)=>{r.d(t,{$l:()=>D,Gs:()=>y,Sl:()=>F,Vg:()=>k,W:()=>x,bz:()=>_,pK:()=>P,tW:()=>g,tl:()=>E,uw:()=>L,uy:()=>A,wO:()=>R,zK:()=>M});var n,i,a=r(652983),o=r(33729),l=r(647744),s=r(800786),c=r(267396),d=r(495006),u=r(774119),p=r(749375),m=r(404231),h=r(838691);function _(e,t){return E(e,t)||S(e)}function g(e){return"query"in e?y(e):O(e)}let f=/^\/community\/search$/;function E(e,t){if(e||(e=location.pathname),!e.match(f))return null;t||(t=location.search);let r=new URLSearchParams(t),n=r.get("query");if(!n)return null;let i=r.get("resource_type");if(!i)return null;let a=r.get("sort_by")||h.A.Search.RELEVANCY,o=(0,c.c)(r.get("editor_type"),i),l=r.get("price")||m.L.ALL,s=(()=>{let e=r.get("creators");return d.I.isSearchType(e)?e:d.I.ALL})();return{resourceType:i,sort_by:a,editor_type:o,query:n,price:l,creators:s}}let y=e=>{let t={resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,c.c)(e.editor_type,e.resourceType),price:e.price,creators:e.creators&&d.I.isSearchType(e.creators)?e.creators:d.I.ALL},r=new URLSearchParams(t).toString();return`/community/search?${r}`},v=/^\/community/,b=/^\/community\/collections?\/?/,I=/^\/community\/(file|plugin|widget)\//;var T=((n=T||{}).NEW="new",n.POPULAR="popular",n.TRENDING="trending",n.CATEGORY="category",n.TAG="tag",n.COMMUNITY="community",n);let w=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){return"category"===e[0]&&!!e[1]&&[{category:e[1]},e.slice(2)]},function(e){let t=e[0];return Object.values(p.x.BrowseResourceTypes).indexOf(t)>-1&&[{resourceType:t},e.slice(1)]},function(e,t){let r=e[0];return Object.values(u.R.Editors).indexOf(r)>-1&&[{editor_type:(0,c.c)(r,t.resourceType)},e.slice(1)]},function(e){let t=e[0];return m.L.FOR_URL_SLUG.indexOf(t)>-1&&[{price:t},e.slice(1)]},function(e){let t=e[0];return t===d.I.FIGMA_PARTNER&&[{creators:t},e.slice(1)]},function(e){let t=null;return"new"===e[0]&&(t=h.A.Browse.PUBLISHED_AT),"popular"===e[0]&&(t=h.A.Browse.ALL_TIME),"trending"===e[0]&&(t=h.A.Browse.POPULAR),!!t&&[{sort_by:t},e.slice(1)]}],S=(e,t)=>{let r=decodeURIComponent(e||location.pathname);if(!v.test(r)||b.test(r)||I.test(r))return;let n=("/"===r[0]?r.slice(1):r).split("/"),i={resourceType:p.x.BrowseResourceTypes.MIXED,tags:[],editor_type:u.R.Editors.ALL,sort_by:(0,s.f)()?h.A.Shared.ALL_TIME:h.A.Shared.POPULAR,price:m.L.ALL,category:null,following:!1,pagination:null,creators:d.I.ALL};for(let e=0;e<w.length&&0!==n.length;e++){let t=w[e](n,i);t&&t[0]&&(n=t[1],i={...i,...t[0]})}i.editor_type===u.R.Editors.DEV_MODE&&i.resourceType===p.x.BrowseResourceTypes.MIXED&&(i.resourceType=p.x.BrowseResourceTypes.PLUGINS);let a=new URLSearchParams(t||location.search),o=!!a.get("following"),l=(()=>{let e=a.get("creators");return e&&e===d.I.FOLLOWING?e:i.creators})();return{...i,following:o,creators:l}},C={"/community/mixed":"/community"},O=e=>{var t;let r="/community";e.category?r+=`/category/${e.category}`:(null==(t=e.tags)?void 0:t.length)&&(r+=`/tag/${e.tags.join(",")}`),e.editor_type===u.R.Editors.DEV_MODE&&e.resourceType===p.x.BrowseResourceTypes.MIXED&&(e.resourceType=p.x.BrowseResourceTypes.PLUGINS),e.resourceType!==p.x.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),"all"!==(0,c.c)(e.editor_type,e.resourceType)&&(r+=`/${e.editor_type}`),e.price&&m.L.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===d.I.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&(e.sort_by===h.A.Browse.PUBLISHED_AT?r+="/new":e.sort_by!==h.A.Browse.ALL_TIME||(0,s.f)()?e.sort_by===h.A.Browse.POPULAR&&(0,s.f)()&&(r+="/trending"):r+="/popular"),C[r]&&(r=C[r]);let n={};!0===e.following&&(n.following=e.following),e.creators===d.I.FOLLOWING&&(n.creators=e.creators);let i=Object.keys(n).length>0?new URLSearchParams(n).toString():void 0;return i&&(r+=`?${i}`),r};function A(){let[e,t]=a.useState(_()),r=a.useCallback(function(){let e=_();t(e)},[]);return!function(e){let t=(0,o.k6)();a.useEffect(()=>t.listen(e),[e,t])}(r),e}let N=/\/community(\/(?:[a-zA-Z]+))?/;var L=((i=L||{}).SEARCH="/community/search",i);function P(e){if(!e)return null;let t=e.match(N);return t?t[0]:null}function R(){let[e,t]=a.useState(_());return a.useEffect(()=>{let e=()=>{let e=_();t(e)};return window.addEventListener("pushState",e),window.addEventListener("replaceState",e),window.addEventListener("popState",e),()=>{window.removeEventListener("pushState",e),window.removeEventListener("replaceState",e),window.removeEventListener("popState",e)}},[]),e}function k(e){var t;return!!e&&!e.category&&!((null==(t=e.tags)?void 0:t.length)>0)&&(!("query"in e)||!e.query)}function D(e){let t=_(e);return!!t&&k(t)}let M={resourceType:p.x.BrowseResourceTypes.MIXED,sort_by:h.A.Browse.POPULAR,editor_type:u.R.Editors.ALL,price:m.L.ALL,tags:[],pagination:null,category:null,creators:d.I.ALL},F={resourceType:p.x.BrowseResourceTypes.MIXED,sort_by:h.A.Search.RELEVANCY,editor_type:u.R.Editors.ALL,price:m.L.ALL,creators:d.I.ALL};function x(e){return/\/remixes$/.test(e)?{reactRouterHandled:!1,subView:"remixes"}:/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!1,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(l.u.warn(`If this is firing, it means you're trying to use fastma-routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}},283537:(e,t,r)=>{r.d(t,{Dt:()=>h,FC:()=>g,H9:()=>T,Mq:()=>_,Vf:()=>f});var n=r(652983),i=r(407908);r(19516);var a=r(716250),o=r(669277),l=r(615537),s=r(573196),c=r(331945),d=r(862610),u=r(436649),p=r(646472),m=r(163381);let h=e=>{let t=(0,i.I0)(),r=(0,i.v9)(t=>t.communityHub.shelves[e]||[]),a=c.R.loadingKeyForPayload({shelfType:e}),o=(0,u.nR)(a),l=(0,u.Dm)(a);return n.useEffect(()=>{o||l||t(c.R({shelfType:e}))}),{shelves:r,isLoading:o,hasResolved:l}},_=e=>{let t=(0,o.mU)(d.CommunityProfileView,{profileId:e});if("loaded"===t.status){let e=t.data.communityProfile;if(e){let t=e.associatedUsers,r=[];t.forEach(t=>{r.push({user_id:t.id,email:t.email,is_primary_user:t.id===e.primaryUserId})});let n=[],i=e.badges;return i.forEach(e=>{n.push(e.badgeType)}),{id:e.id,name:e.name,profile_handle:e.profileHandle,description:e.description,location:e.location,website:e.website,twitter:e.twitter,instagram:e.instagram,public_at:e.publicAt,follower_count:e.followerCount,following_count:e.followingCount,cover_image_path:e.coverImagePath,primary_user_id:e.primaryUserId,team_id:e.teamId,org_id:e.orgId,pronouns:e.pronouns,entity_type:e.entityType,created_at:e.createdAt.toDateString(),updated_at:e.updatedAt.toDateString(),redirect_cover_image_url:e.coverImagePath?`/profile/${e.id}/cover_image`:"",associated_users:r,current_user_is_following:e.currentUserIsFollowing,current_user_is_followed:e.currentUserIsFollowed,badges:n,is_restricted_by_current_user:!1,img_urls:{},img_url:"",has_shared_orgs:!1,has_shared_teams:!1}}}},g=e=>{var t,r,n;let i=(0,m.So)()&&""!==e.id,a={hubFileId:null,pluginId:null,widgetId:null};(0,s.yA)(e)===p._g.HUB_FILE?a.hubFileId=e.id:(0,s.yA)(e)===p._g.PLUGIN?a.pluginId=e.id:a.widgetId=e.id;let l=(0,o.mU)(d.CommunityRatingStats,a,{enabled:i});if("loaded"===l.status){if(null==(t=l.data.communityRatingStatsForHubFile)?void 0:t.id)return v({...l.data.communityRatingStatsForHubFile,pluginId:null,widgetId:null});if(null==(r=l.data.communityRatingStatsForPlugin)?void 0:r.id)return v({...l.data.communityRatingStatsForPlugin,hubFileId:null,widgetId:null});if(null==(n=l.data.communityRatingStatsForWidget)?void 0:n.id)return v({...l.data.communityRatingStatsForWidget,pluginId:null,hubFileId:null})}},f=(e,t)=>{let r=(0,m.So)()&&!!e&&!!(null==e?void 0:e.community_profile_id)&&!!t&&""!==t.id,n=!!t&&(0,s.yA)(t)===p._g.HUB_FILE,i=E(e,r&&n,t),a=y(e,r&&!n,t);if(r)return n?i:a},E=(e,t,r)=>{let n=(0,o.mU)(d.CommunityRatingHubFileView,{profileId:(null==e?void 0:e.community_profile_id)??"",hubFileId:(null==r?void 0:r.id)??""},{enabled:t});if("loaded"===n.status)return b(n.data)},y=(e,t,r)=>{let n=(0,o.mU)(d.CommunityRatingPluginView,{profileId:(null==e?void 0:e.community_profile_id)??"",pluginId:(null==r?void 0:r.id)??"",orgId:null},{enabled:t});if("loaded"===n.status)return b(n.data)};function v(e){if(null!=e)return{...e,oneStars:parseInt(e.oneStars),twoStars:parseInt(e.twoStars),threeStars:parseInt(e.threeStars),fourStars:parseInt(e.fourStars),fiveStars:parseInt(e.fiveStars),totalRatings:parseInt(e.totalRatings)}}function b(e){var t,r;if(void 0===e)return;let n=e.communityRatingForProfileAndResource,i=(null==n?void 0:n.ratingValue)?{...n,messageMeta:I(n.communityMessageMeta??[]),ratingValue:parseInt(n.ratingValue)}:void 0;return{userRating:i,canRate:!!(null==(t=e.plugin)?void 0:t.canRate)||!!(null==(r=e.hubFile)?void 0:r.canRate)}}let I=(0,l.Hf)(e=>e.map(e=>{var t;let r={t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,profile_id:e.profileId?e.profileId:void 0,children:(null==(t=e.children)?void 0:t.length)?I(e.children):void 0};return r}));function T(e){var t;return(0,a.BZ)().cmty_rating_review&&!!(null==(t=null==e?void 0:e.userRating)?void 0:t.id)||!!(null==e?void 0:e.canRate)}},289629:(e,t,r)=>{r.d(t,{A4:()=>h,Gr:()=>S,M:()=>y,Ob:()=>f,V7:()=>b,_c:()=>A,fl:()=>_,io:()=>g,kb:()=>p,kc:()=>d,lb:()=>v,lq:()=>T,nT:()=>m,rD:()=>E,wB:()=>u,yg:()=>C,z2:()=>w,zi:()=>O});var n=r(88431),i=r(970740),a=r(727055),o=r(687496),l=r(646472),s=r(597694),c=r(147298);let d=2;function u(e){if(null==e?void 0:e.price){let{price:t}=e;return .01*t}}function p(e){return e?100*e:0}function m(e){return e%1!=0}function h(e,t){return t>e}function _(e,t){return t/e>1.5}function g(e){return e<d||e>=1e3}function f(e,t){if(!e||!t)return"";let r=1200*e*(1-t/100);return(0,i.t)("community.buyer.price_per_year",{priceString:v(r,r%100!=0)})}function E(e,t=!1){let{price:r,is_subscription:n}=e;if(!n)return v(r,!1);if(t){let t=e.annual_price||0;return(0,i.t)("community.buyer.price_per_year",{priceString:v(t,t%100!=0)})}return(0,i.t)("community.buyer.price_per_month",{priceString:v(r,r%100!=0)})}function y(e){let{price:t,is_subscription:r}=e,n=v(t,t%100!=0);return r?(0,i.t)("community.buyer.price_per_month_subscription",{priceString:n}):(0,i.t)("community.buyer.price_one_time_payment",{priceString:n})}function v(e,t=!1){let r=new o.Lr("usd");return r.formatMoney(e,{showCents:t})}function b(e){switch(e){case c.HZ.DOESNT_MEET_NEEDS:return(0,i.t)("community.buyer.refund_reason.doesnt_meet_needs");case c.HZ.TECHNICAL_ISSUES:return(0,i.t)("community.buyer.refund_reason.technical_issues");case c.HZ.TOO_EXPENSIVE:return(0,i.t)("community.buyer.refund_reason.too_expensive");case c.HZ.FOUND_ALTERNATIVE:return(0,i.t)("community.buyer.refund_reason.found_alternative");case c.HZ.OTHER:return(0,i.t)("community.buyer.refund_reason.other")}}function I(e){return!!(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at)))}function T(e){return!!e&&(I(e)?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!w(e,s.Cy.DISPUTED):w(e,s.Cy.SUCCEEDED))}function w(e,t){return!!e.status&&e.status===t}function S(e){return e.status===s.Cy.SUBSCRIPTION_PAYMENT_FAILED||e.status===s.Cy.INVOICE_FINALIZATION_FAILED}function C(e){let t=Date.now()-864e5;return T(e)&&!I(e)&&new Date(e.purchased_at).getTime()>=t}function O(e,t){var r,i;if((0,l.bH)(t)||(0,l._4)(t)){let a=((null==(r=t.plugin_publishers)?void 0:r.accepted)||[]).map(e=>e.id),o=((null==(i=t.plugin_publishers)?void 0:i.pending)||[]).map(e=>e.id),l=new Set(a.concat(o)),{pass:s,fail:c}=(0,n.u)(e,e=>l.has(e.id)||e.id===t.creator.id);return{usersCanPurchase:c,publishers:s}}{let r=new Set((0,a.aP)(t)),{pass:i,fail:o}=(0,n.u)(e,e=>r.has(e.id));return{usersCanPurchase:o,publishers:i}}}function A(e,t){let r=(0,l.vu)(e),n=r&&(0,l.F4)(e),i=T(t);return r&&!n&&!i}},15014:(e,t,r)=>{r.d(t,{K:()=>i,L:()=>a});var n=r(465883);let i=e=>!!(e&&(e.entity_type===n.Se.ORG||e.entity_type===n.Se.TEAM));function a(e,t){var r;return t?t.public_at?`@${t.profile_handle}`||null:t.primary_user_id?(null==(r=e.authedUsers.byId[t.primary_user_id])?void 0:r.email)||null:t.org_id?e.orgById[t.org_id].name||null:t.team_id&&e.teams[t.team_id].name||null:null}},369874:(e,t,r)=>{r.d(t,{BI:()=>a,Gx:()=>i,IT:()=>c,Un:()=>d,W1:()=>l,dE:()=>s,k4:()=>o,lt:()=>p,p9:()=>u});var n=r(761767);function i(e,t){return e.tagline||t(e.description)}function a(e){return"unique_run_count"in e?e.unique_run_count:e.duplicate_count}function o(e){return!!e.publishing_status&&[n.UG.PENDING_PUBLIC,n.UG.PENDING_USER_VISUAL_COMPLIANCE,n.UG.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function l(e){return e.publishing_status===n.UG.APPROVED_PUBLIC}function s(e){return!!e.publishing_status&&[n.UG.DELISTED,n.UG.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function c(e){return e.publishing_status===n.UG.BLOCKED}function d(e,t){var r;let n=(null==(r=t.community_publishers)?void 0:r.accepted)??[];return n.some(t=>t.id===e)}function u(e){return e.community_publishers.accepted.some(e=>"apple"===e.profile_handle.toLowerCase())}function p(e){return e.community_publishers.accepted.some(e=>"figma"===e.profile_handle.toLowerCase())}},445311:(e,t,r)=>{r.d(t,{ZP:()=>l,c9:()=>c,is:()=>s});var n=r(652983),i=r(172497),a=r(332224);let o=(0,i.z)(a.qcO);function l({mediaQuery:e,showIf:t,children:r}){let i=n.useMemo(()=>e?window.matchMedia(e):null,[e]),[a,o]=n.useState((null==i?void 0:i.matches)??(null==t?void 0:t(window.innerWidth))??!1);return(n.useEffect(()=>{if(i){let e=()=>o(i.matches);return i.addEventListener("change",e),()=>i.removeEventListener("change",e)}if(t){let e=()=>o(t(window.innerWidth));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}},[i,t]),a)?n.createElement(n.Fragment,null,r):null}function s({children:e}){return n.createElement(l,{mediaQuery:`(max-width: ${o-1}px)`},e)}function c({children:e}){return n.createElement(l,{mediaQuery:`(min-width: ${o}px)`},e)}},44571:(e,t,r)=>{r.d(t,{C2:()=>o,ko:()=>a,nj:()=>l,uc:()=>s});var n=r(303980);let i="8065774696727";function a(e,t){(0,n.w3)({name:e.name,email:e.email},{ticketForms:["community"],fields:t,suppressAnswerBot:!0})}function o(e){return a(e,[{id:i,value:"community_product_question"}])}function l(e){return a(e,[{id:i,value:"community_refund"}])}function s(e){return a(e,[{id:i,value:"community_report"}])}},995971:(e,t,r)=>{r.d(t,{DF:()=>i,OX:()=>u,Y7:()=>a,h1:()=>d,t:()=>c,yd:()=>n});let n=-200,i=10,a=125;var o,l,s,c=((o=c||{}).file="hub_files",o.plugin="plugins",o.widget="widgets",o),d=((l=d||{}).COMPONENTS="components",l.STYLES="styles",l),u=((s=u||{}).DescriptionView="descriptionViewSection",s.CommentsView="commentsViewSection",s)},367720:(e,t,r)=>{function n(e){return!!e&&void 0!==e.query}function i(e){return void 0!==e.category}r.d(t,{KF:()=>i,OT:()=>s,Rj:()=>l,TC:()=>n});var a,o,l=((a=l||{}).inspiration="inspiration",a.jamSessions="jam-sessions",a.designSystems="design-systems",a.visualAssets="visual-assets",a.development="development",a.accessibility="accessibility",a.brainstorming="brainstorming",a.classroomActivities="classroom-activities",a.designTemplates="design-templates",a.designTools="design-tools",a.desktopAppsWebsites="desktop-apps-websites",a.diagramming="diagramming",a.editingEffects="editing-effects",a.education="education",a.fileOrganization="file-organization",a.fontsTypography="fonts-typography",a.funGames="fun-games",a.icons="icons",a.illustrations="illustrations",a.importExport="import-export",a.libraries="libraries",a.mobileApps="mobile-apps",a.portfoliosResumes="portfolios-resumes",a.presentations="presentations",a.prototypingAnimation="prototyping-animation",a.shapesColors="shapes-colors",a.stockPhotography="stock-photography",a.strategicPlanning="strategic-planning",a.teamMeetings="team-meetings",a.tutorials="tutorials",a.uiKits="ui-kits",a.whiteboarding="whiteboarding",a.wireframes="wireframes",a),s=((o=s||{}).LANDING="landing",o.NAV="nav",o)},435437:(e,t,r)=>{function n(e){return e.is_widget}function i(e){return void 0!==e.current_plugin_version_id&&!e.is_widget}function a(e){return void 0!==e.duplicate_count}r.d(t,{E0:()=>n,T4:()=>i,r2:()=>a})},160296:(e,t,r)=>{r.d(t,{$h:()=>b,P9:()=>_,Q0:()=>g,U2:()=>S,UA:()=>v,WF:()=>E,YA:()=>h,ay:()=>y,ef:()=>p,ez:()=>I,hf:()=>w,n$:()=>f,o:()=>T,yO:()=>m});var n=r(652983),i=r(407908),a=r(716250),o=r(337167),l=r(970740),s=r(298715),c=r(339531),d=r(508966),u=r(260572);let p="FIGMA_PROPERTIES",m="WEB",h="IOS",_="ANDROID",g="CSSBUILDER",f="IOS_UIKIT",E="ANDROID_XML",y={[m]:{type:"first-party",id:m},[h]:{type:"first-party",id:h},[f]:{type:"first-party",id:f},[_]:{type:"first-party",id:_},[E]:{type:"first-party",id:E}};function v(e){let t="string"==typeof e?{type:"first-party",id:e}:e;return t&&t.id&&("first-party"!==t.type||y[t.id])?t:{type:"first-party",id:m}}function b(e){let t=(0,s.Xk)(),r=(0,s.xz)(),i=(0,n.useMemo)(()=>({format(n){if((null==n?void 0:n.type)==="first-party")switch(null==n?void 0:n.id){case g:return"CssBuilder";case m:return(0,l.t)("dev_handoff.code.lang_css");case h:return(0,l.t)("dev_handoff.code.lang_swiftui");case f:return(0,l.t)("dev_handoff.code.lang_uikit");case _:return(0,l.t)("dev_handoff.code.lang_compose");case E:return(0,l.t)("dev_handoff.code.lang_android_xml");case p:return(0,l.t)("dev_handoff.code.lang_figma")}if(e){let i=(null==n?void 0:n.type)==="local-plugin"?t[n.id]:(null==n?void 0:n.type)==="published-plugin"&&e.plugin_id===(null==n?void 0:n.id)?r[n.id]??e:null;if(i){let e=(0,d.c)(i);if(1===e.length)return i.name;let t=(0,d.D)(i,(null==n?void 0:n.pluginLanguage)??"");return t.label??i.name}}return""}}),[r,t,e]);return i}function I(){let e=S();return T(e)}function T(e){let t=(0,i.v9)(e=>e.selectedView),r="fullscreen"===t.view?t.editorType:null,n=(0,s.Y9)("first-party"!==e.type?e.id:"",{searchLocalPlugins:!0,searchPublishedPlugins:!0,searchSavedPlugins:!0,searchRecentPlugins:!0}),{plugin:a}=(0,s.OF)("published-plugin"===e.type?e.id:"0","published-plugin"===e.type);if("orgAdminSettings"!==t.view&&"dev_handoff"!==r)return null;let o=n||a;return o&&(0,c.vS)(o)?o:null}function w(e,t){if(!e||!e.codeSyntax)return null;switch(t){case m:case g:return e.codeSyntax[0]??null;case _:case E:return e.codeSyntax[1]??null;case h:case f:return e.codeSyntax[2]??null}return null}(0,a.BZ)().dt_lego_ext_plugins&&(y[g]={type:"first-party",id:g});let S=()=>{let e=(0,o.Dv)(u.J),t=(0,i.v9)(e=>e.mirror.appModel.devHandoffCodeLanguage),r=(0,i.v9)(e=>e.selectedView),a=t;return"orgAdminSettings"===r.view&&e&&(a=e),(0,n.useMemo)(()=>v(a),[a])}},126367:(e,t,r)=>{r.d(t,{vP:()=>f,vf:()=>E,y_:()=>y});var n=r(652983),i=r(407908),a=r(807012),o=r(218609),l=r(307425),s=r(298715),c=r(448694),d=r(640723),u=r(70918),p=r(339531),m=r(661539),h=r(938110),_=r(160296);function g(e){let t=(0,_.UA)(e);return d.KQ(t),t}let f=(0,o.u4)((e,t)=>{var r;let n=e.getState(),{plugin:i,codeLanguage:a}=t,o=(0,u.nm)(n),s=g(a);"published-plugin"===s.type&&i&&!(0,m.rV)(i)&&e.dispatch(l.zD({storeInRecentsKey:h.xQ.Handoff,id:i.plugin_id,version:i.version,currentUserId:o})),(0,c.hp)("Dev Mode Language Changed",null==(r=n.openFile)?void 0:r.key,n,{languageType:s.type,languageId:s.id})});function E(){let e=(0,a.Pe)(),t=(0,s.DG)(),r=(0,i.I0)(),o=(0,u.dO)()??void 0;return(0,n.useCallback)(n=>{let i=g(n);if("published-plugin"===i.type){let e=(0,p.pj)({idToSearch:i.id,publishedPlugins:t,localPluginsByFileId:void 0,savedPlugins:void 0,recentPlugins:void 0});e&&!(0,m.rV)(e)&&r(l.zD({storeInRecentsKey:h.xQ.Handoff,id:e.plugin_id,version:e.version,currentUserId:o}))}e("Dev Mode Language Changed",{languageType:i.type,languageId:i.id})},[o,r,t,e])}function y(){let e=(0,a.Pe)();return(0,n.useCallback)(t=>{let r=g(t);return e("Dev Mode Language Changed",{languageType:r.type,languageId:r.id,defaulting:!0}),r},[e])}},289355:(e,t,r)=>{r.d(t,{Vh:()=>s,Vq:()=>o,qw:()=>l});var n=r(598271),i=r(961215),a=r(321909);function o(e){return null!=e&&!!e.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}function l(e){var t;if(!e||!(0,n.JY)((0,n.mL)(e)))return a.h3.ASSET_COMPONENT;try{return(null==(t=i.xAX.getAssetInfo(e))?void 0:t.type)??a.h3.ASSET_COMPONENT}catch(e){console.warn(e)}return a.h3.ASSET_COMPONENT}function s(e){return!(null==e?void 0:e.isSection)}},765177:(e,t,r)=>{r.d(t,{T:()=>P,x:()=>O});var n=r(652983),i=r(407908),a=r(716250),o=r(337167),l=r(519781),s=r(618723),c=r(970740),d=r(864974),u=r(125274),p=r(702348),m=r(448694),h=r(536562),_=r(723259),g=r(464368),f=r(671755),E=r(201248),y=r(450787),v=r(157607),b=r(587487),I=r(271931),T=r(767831),w=r(675207),S=r(965753);let C="dev_handoff_seen_marketing_overlay",O="dev_handoff_marketing_overlay_anchor_key",A=(0,h.n_)(C),N=r(670955);function L(e,t){var r,n;return!!e&&!!(null==(n=null==(r=t.get(e))?void 0:r.childrenGuids)?void 0:n.length)}let P=n.memo(function(){let e=(0,g.Yu)(),t=(0,i.v9)(e=>e.mirror.sceneGraph),r=(0,i.v9)(e=>e.mirror.appModel.currentPage),u=(0,i.I0)(),h=(0,i.oR)(),v=n.useRef(!0),b=(0,o.Dv)(A),P=(0,p.I)({id:_.G.DevHandoffMarketingOverlay,priority:E.b4.DEFAULT_MODAL},[b]),k=(0,n.useCallback)(()=>{P.show({canShow:e=>!e,onShow:()=>{var e;u(d.v({[C]:!0})),(0,m.hp)("Dev Handoff Marketing Popup Shown",null==(e=h.getState().openFile)?void 0:e.key,h.getState())}})},[P,u,h]),D=(0,f.OU)((e,t)=>L(t,e),r);(0,n.useEffect)(()=>{if(!e){let e=L(r,t),n=(0,a.BZ)().scenegraph_hooks_dev_handoff?D:e;v.current&&n&&k(),v.current=!1}},[k,e,r,t,D]);let M=(0,y.V)("modal"),F=(0,n.useCallback)(()=>{P.complete(),M("handoff")},[P,M]),x=(0,n.useCallback)(()=>{var e;P.complete(),(0,m.hp)("Dev Handoff Marketing Popup Dismissed",null==(e=h.getState().openFile)?void 0:e.key,h.getState())},[P,h]);if(!P.isShowing)return null;let U=!(0,a.BZ)().dt_dm_m10n&&n.createElement("div",null,n.createElement("span",{className:S.wg},n.createElement(c.Tx,{id:"dev_handoff.beta_badge"})));return n.createElement(I.H,null,n.createElement(w.t,{target:O}),n.createElement(R,{target:O}),n.createElement("div",{className:S.oC},n.createElement("div",{className:S.Tr},n.createElement("div",{className:S.Fs},n.createElement("p",{className:S.Nz},n.createElement(c.Tx,{id:"dev_handoff.onboarding.pointer_modal.title"})),U,n.createElement(l.PZ,{onClick:x,svg:N})),n.createElement(T.k6,{src:"https://static.figma.com/uploads/f002267b1461462f42a75efcf6b5dd8d77e6ac32"}),n.createElement("div",{className:S.kj},n.createElement("p",{className:S.WL},n.createElement(c.Tx,{id:"dev_handoff.onboarding.pointer_modal.description"})),n.createElement("div",{className:S.S9},n.createElement(s.HG,{onClick:x,recordingKey:"dismissPersistentInspectModal"},n.createElement(c.Tx,{id:"dev_handoff.onboarding.pointer_modal.not_now_button"})),n.createElement(s.oi,{onClick:F,recordingKey:"switchToInspectModeFromPersistentModal"},n.createElement(c.Tx,{id:"dev_handoff.onboarding.pointer_modal.primary_button"})))))))});function R({target:e}){let t=(0,u.vk)(`[data-onboarding-key=${e}]`);if(!t)return null;let r=t.left+t.width/2,i=t.top+t.height;return n.createElement("div",{className:S.cx,style:{left:r-8,top:i+8}},n.createElement(b.gb,{arrowPosition:v.xI.TOP,arrowOffset:0,modalColor:"var(--color-bg)"}))}},944731:(e,t,r)=>{r.d(t,{PX:()=>s,cT:()=>l,qA:()=>a});var n=r(337167),i=r(451573);let a=(0,n.cn)(void 0),o=(0,i.cg)(e=>e.universalInsertModal.initialFdView),l=(0,n.qs)(e=>{let t=e(o),r=e(a);return t||r||"recents_and_saved"}),s=(0,n.cn)(!1)},88312:(e,t,r)=>{r.d(t,{Bk:()=>E,Jt:()=>y,Oe:()=>b,Pt:()=>v,SL:()=>f,ZP:()=>m,_q:()=>h,d3:()=>_});var n=r(652983),i=r(172497),a=r(337167),o=r(961215),l=r(784667),s=r(332224);let c=(0,i.F)(s.ze_),d=300+c,u=640+c,p=320+c,m=(0,a.cn)(!1);function h(e){return Math.max(d,Math.min(u,e||0))}function _(){let e=(0,l.p9)();return h(e)}let g=p;function f(){let e=_(),t=(0,a.Dv)(m);return n.useEffect(()=>{t||(g=e)},[t]),t?g:e}function E(){var e;return h(null==(e=o.O$1)?void 0:e.editorPreferences().devHandoffInspectSplitPosition.getCopy())}function y(){(0,l.tZ)().devHandoffInspectSplitPosition.set(p)}function v(e){(0,l.tZ)().devHandoffInspectSplitPosition.set(e)}function b(){let e=(0,l.p9)();(0,n.useEffect)(()=>{let t=h(e);t!==e&&v(t)},[e])}},648183:(e,t,r)=>{r.d(t,{X:()=>d,w:()=>s});var n,i=r(269658),a=r(337167),o=r(448694),l=r(360530),s=((n=s||{}).PRIMARY="primary",n.PLUGIN="plugin",n.PROPERTIES="properties",n.COMPONENT="component",n.DEV_RESOURCES="dev_resources",n.ASSETS="assets",n);let c=(0,a.cn)("primary"),d=(0,a.cn)(e=>e(c),(e,t,r)=>{let n=e(c),a=r;if(!(0,l.I)())switch(r){case"properties":case"component":case"dev_resources":case"assets":a="primary"}if(n!==a){var s;s=a,(0,o.iP)("dev_handoff_right_panel_tab_switch",i.V.getState(),{sourceTab:n,destinationTab:s}),t(c,a)}})},325558:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(172497),i=r(337167),a=r(332224);let o=(0,n.F)(a.wWl),l=(0,n.F)(a.EoJ),s=(0,i.cn)(o+l)},511169:(e,t,r)=>{r.d(t,{C:()=>s,q:()=>c});var n=r(652983),i=r(337167),a=r(361763),o=r(668849);let l=(0,i.cn)(!1);function s(e){let[t,r]=(0,i.KO)(l);(0,n.useEffect)(()=>{if((0,a.hQ)())return;let t=setTimeout(()=>{r(!0)},e);return()=>{clearTimeout(t),r(!1)}},[e,r])}function c(){let e=(0,o.XF)(),[t]=(0,i.KO)(l);return t&&e}},399503:(e,t,r)=>{r.d(t,{RH:()=>g,Ty:()=>f,rZ:()=>y,ug:()=>_,ui:()=>h});var n=r(652983),i=r(407908),a=r(716250),o=r(337167),l=r(669277),s=r(864974),c=r(536562),d=r(200273),u=r(862610),p=r(668849),m=r(493866);let h=(0,m.t)(e=>{let t=(0,d.dh)({openFile:e.openFile??null});return!(0,a.BZ)().dt_dm_m10n||((null==t?void 0:t.canAccessFullDevMode)??!0)});function _(){return(0,i.v9)(h)}function g(){var e,t;let r=(0,d.uC)()??"",n=(0,l.mU)(u.FileCanAccessDevModeEntryPoint,{key:r});return"loaded"!==n.status||null!=(t=null==(e=n.data)?void 0:e.file)&&!!t.hasPermission}function f(e=!1){var t,r,i,a;let o=(0,d.uC)()??"",s=(0,l.mU)(u.FileCanAccessDevModeEntryPoint,{key:o}),c=(0,n.useRef)(e);return((0,n.useEffect)(()=>{var e,t,r,n;"loaded"===s.status&&!!(null==(t=null==(e=s.data)?void 0:e.file)?void 0:t.hasPermission)!==c.current&&(c.current=!!(null==(n=null==(r=s.data)?void 0:r.file)?void 0:n.hasPermission))},[null==(r=null==(t=s.data)?void 0:t.file)?void 0:r.hasPermission,s.status]),"loaded"===s.status)?!!(null==(a=null==(i=s.data)?void 0:i.file)?void 0:a.hasPermission):c.current}let E=(0,c.OD)("dev_mode_notified_of_approved_org_request");function y(){var e;let t=(0,p.A2)(),r=_(),l=(0,d.CA)(),c=(0,a.BZ)().dt_dm_m10n,u=(0,i.v9)(e=>{var t,r;return null==(r=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:r.designAccountTypeRequest}),m=(0,i.v9)(e=>{var t,r;return null==(r=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:r.devModeAccountTypeRequest}),h=null==(e=(0,o.Dv)(E).data)?void 0:e.createdAt,g=(0,i.I0)(),f=!!(null==l?void 0:l.parentOrgId),y=!1;return(null==m?void 0:m.status)==="approved"?y=!0:(null==m?void 0:m.status)==="denied"&&(null==u?void 0:u.status)==="approved"&&(y=!0),(0,n.useEffect)(()=>{c&&f&&r&&t&&y&&!h&&g(s.v({dev_mode_notified_of_approved_org_request:!0}))},[c,r,g,t,f,y,h]),!!c&&!!r&&!!f&&!t&&y&&!h}},996544:(e,t,r)=>{r.d(t,{Bs:()=>E,GC:()=>_,PJ:()=>h,bT:()=>f,d4:()=>g});var n=r(652983),i=r(407908),a=r(337167),o=r(927681),l=r(970740),s=r(648183),c=r(864974),d=r(668849),u=r(641696),p=r(789853),m=r(247084);let h="dev_handoff_dismissed_vscode_extension_hint",_="dev_handoff_dismissed_inspect_panel_plugins_hint",g="dev_handoff_seen_config_wizard";function f(){let e=(0,d.XF)();return e?null:n.createElement(u.$,{className:m.EO,idForTests:"hintVSCodeForFigma",userFlag:h,title:(0,l.t)("dev_handoff.vscode.hint.title"),iconComponent:n.createElement("div",{className:m.Fu},n.createElement(p.U,null)),hintText:(0,l.t)("dev_handoff.vscode.hint"),hintLinkText:(0,l.t)("dev_handoff.vscode.hint.link"),hintLinkUrl:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension",hintLinkOnNewLine:!0})}function E(){let e=(0,d.XF)(),[t,r]=(0,a.KO)(s.X),p=(0,i.I0)(),h=n.useCallback(()=>{r(s.w.PLUGIN),p(c.v({[_]:!0}))},[r,p]);return e?n.createElement(u.$,{className:m.EO,idForTests:"hintInspectPlugins",userFlag:_,title:(0,l.t)("dev_handoff.inspect_panel.plugins_hint.title"),hintText:n.createElement(n.Fragment,null,n.createElement("div",{className:m.JX},n.createElement("img",{alt:"",className:m.qv,src:"https://static.figma.com/uploads/aae0db2814117595e45cc509d52e79e7cc31333c"}),n.createElement("div",{className:m.qv},n.createElement(o.b,null)),n.createElement("img",{alt:"",className:m.qv,src:"https://static.figma.com/uploads/ae3807b6d650b52da20879078b85a0df23ee056a"})),n.createElement(l.Tx,{id:"dev_handoff.inspect_panel.plugins_hint"})),hintLinkText:(0,l.t)("dev_handoff.inspect_panel.plugins_hint.link"),hintLinkOnClick:h,hintLinkOnNewLine:!0}):null}},754210:(e,t,r)=>{r.d(t,{Kp:()=>y,bB:()=>b,ci:()=>w,f_:()=>S,iI:()=>I,j6:()=>T,tO:()=>v,wA:()=>C});var n=r(652983),i=r(407908),a=r(970740),o=r(289355),l=r(938981),s=r(300174),c=r(961215),d=r(55500),u=r(110044),p=r(464368),m=r(200273),h=r(321909),_=r(353451),g=r(10546),f=r(855579);let E={};function y(){var e;for(let t of Object.getOwnPropertyNames(E)){let r=null==(e=E[t])?void 0:e.url;r&&URL.revokeObjectURL(r),delete E[t]}}function v({assetId:e,assetType:t,thumbnailVersion:r,width:i,height:a,scale:o}){var l;let s=(0,_.dl)(),u=function({assetId:e,width:t,height:r,scale:n}){return`${e}-${t}x${r}@${n}x`}({assetId:e,width:i,height:a,scale:o}),[p,m]=n.useState(null==(l=E[u])?void 0:l.url),h=(0,f.yg)(e,t,s);return(n.useEffect(()=>{let t=async()=>{var t;await (0,d.lH)().loadAllImagesUnder([e],c.bcd.NON_ANIMATED_ONLY,"handoff.assetPreview");let[n,l]=c.plG.generateThumbnailForNode(e,i,a,o,{});if(l.length>0){let e=null==(t=null==E?void 0:E[u])?void 0:t.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([l]));E[u]={url:n,version:r,error:null},m(n)}},n=!!(null==E?void 0:E[u]),l=n&&E[u].version!==r,s=n&&!!E[u].error;n&&(!l||s)||t().catch(e=>{E[u]={error:e},console.error(e)})},[e,a,o,i,u,r]),p)?{url:p,backgroundStyle:h}:{backgroundStyle:h}}function b({pxWidth:e,pxHeight:t,dataTestId:r}){let{unit:i}=(0,s.Gn)(),a=(0,l.TB)(),o=a&&i===c.QC6.SCALED,d=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),u=d(e),p=d(t),m=n.createElement("span",{"data-testid":`${r}Width`},u),h=n.createElement("span",{"data-testid":`${r}Height`},p);return n.createElement(n.Fragment,null,m,"\u2009x\u2009",h,n.createElement("span",{"data-testid":`${r}Unit`},o?" (px)":""))}function I({assetInfo:e,media:t,dataTestId:r,shouldShowTypeLabel:i,hideDot:a}){var o,l,s;let c=(0,f.kN)((null==(o=e.instancesGUIDs)?void 0:o[0])??e.assetId),d=(null==(l=null==c?void 0:c.size)?void 0:l.x)??0,u=(null==(s=null==c?void 0:c.size)?void 0:s.y)??0;if(t&&t.length>0){let e=t[0];d=e.width,u=e.height}return n.createElement(T,{assetType:e.type,pxWidth:d,pxHeight:u,dataTestId:r,hideDot:a,shouldShowTypeLabel:i})}function T({assetType:e,pxWidth:t,pxHeight:r,dataTestId:i,hideDot:o,shouldShowTypeLabel:l}){let s=e&h.h3.ASSET_VIDEO?(0,a.t)("dev_handoff.assets.video"):e&h.h3.ASSET_GIF?(0,a.t)("dev_handoff.assets.gif"):e&h.h3.ASSET_IMAGE?(0,a.t)("dev_handoff.assets.image"):e&h.h3.ASSET_ICON?(0,a.t)("dev_handoff.assets.icon"):e&h.h3.ASSET_COMPONENT?(0,a.t)("dev_handoff.assets.instance"):void 0;return n.createElement("span",null,l&&s,!o&&n.createElement(n.Fragment,null,"\xa0","\xb7 "),n.createElement(b,{pxWidth:t,pxHeight:r,dataTestId:i}))}function w(e){var t;let r=(0,i.v9)(m.Oj),a=(0,p.at)(),[o,l]=n.useState(null);if(o)return o;let s=!!(e.type&(h.h3.ASSET_GIF|h.h3.ASSET_VIDEO));if(!s)return null;let c=a.get(e.assetId);if(!c)return null;let d=null==(t=(0,u.kS)(null==c?void 0:c.fills))?void 0:t.filter(e=>e.opacity>0&&e.visible);if(!d)return null;for(let e of d)if(e.animatedImage||e.video){if(!r)return null;(0,g.n7)({paint:e,fileKey:r}).then(e=>{l(e)});break}return o}function S(){let e=(0,f.$)();return e?(0,o.qw)(e):h.h3.NOT_ASSET}function C(e){return e&(h.h3.ASSET_ICON|h.h3.ASSET_IMAGE|h.h3.ASSET_GIF|h.h3.ASSET_VIDEO)}},855579:(e,t,r)=>{r.d(t,{$:()=>h,Mk:()=>E,OC:()=>g,d_:()=>_,kN:()=>f,y:()=>m,yg:()=>v});var n=r(652983),i=r(407908),a=r(141757),o=r(246905),l=r(112088),s=r(966041),c=r(880381),d=r(166885),u=r(321909),p=r(353451);function m(e){let t=Object.keys(e);return 1!==t.length?null:t[0]||null}function h(){return(0,i.v9)(e=>m(e.mirror.sceneGraphSelection))}function _(){let e=h(),t=(0,p.dl)();return E(t,e)}function g(){return(0,i.v9)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection);return t.length>1?t:null})}function f(e){let t=(0,p.dl)();return E(t,e)}function E(e,t){return t?e.get(t):null}let y=e=>e.visible&&!(0,a.Qm)(e.color);function v(e,t,r){let m=function(e){let t=(0,p.dl)(),r=(0,i.v9)(s.Pg),n=(0,i.v9)(c.RP);return(0,l.Qf)(e,t,r,n)}(e),h=(0,o.Fg)();return n.useMemo(()=>{var n;let i="dark"===h?"#383838":"#f5f5f5",o="dark"===h?"#f5f5f5":"#383838",l=null==(n=null==m?void 0:m.containing_frame)?void 0:n.backgroundColor;if((null==m?void 0:m.type)===d.h3.STATE_GROUP&&m.fill_color&&(l=m.fill_color),l&&!(0,a.Qm)(l)){let e=(0,a.vq)(l),t=(0,a.vq)(i);return{background:e!==t?o:i}}let s=function e(t,r,n){let i=E(t,r);if(!i)return;let o=[];if(i.visible){if(n){o.push(...i.strokePaints.data);let e=i.fillPaints.data.filter(y);if(e.length)return(0,a.ZM)(e)}else{let e=[...i.fillPaints.data,...i.strokePaints.data].filter(y);if(e.length)return(0,a.ZM)(e)}}for(let r of i.childrenGuids){let i=e(t,r,n);if(i)return i}if(n)return(0,a.ZM)(o)}(r,e,!(t&u.h3.ASSET_ICON));return s?{background:(0,a.TV)(s,h)?o:i}:{background:i}},[t,e,m,r,h])}},80613:(e,t,r)=>{r.d(t,{At:()=>b,mN:()=>y,tr:()=>v});var n=r(652983),i=r(63730),a=r(407908),o=r(970740),l=r(160296),s=r(126367),c=r(103576),d=r(286071),u=r(111120),p=r(809377),m=r(322186),h=r(225468),_=r(110077),g=r(512169),f=r(482919),E=r(533587);function y({codeLanguage:e,onChange:t,shouldHideLanguagesWithNoAltUnitSupport:r,onlyShowFirstPartyLanguages:n,showAddInsteadOfBrowse:i,addCodegenPluginCallback:o,currentSavedCodeLanguage:s}){let d=(0,l.o)(e),u=(0,l.$h)(d),p=(0,m.Ng)(),h=(0,a.v9)(e=>e.whitelistedPlugins),_=d&&(null==p?void 0:p.plugins_whitelist_enforced)&&!h[null==d?void 0:d.plugin_id]?{type:"first-party",id:"WEB"}:e,g=(0,c.l)({codeLanguage:_,onChange:t,shouldHideLanguagesWithNoAltUnitSupport:r,onlyShowFirstPartyLanguages:n,formatter:u,showAddInsteadOfBrowse:i,addCodegenPluginCallback:o,currentSavedCodeLanguage:s});return{codeLanguage:_,onCodeLanguageChange:t,codeLanguageOptions:g,activeCodegenPlugin:d,formatter:u}}function v({onlyShowFirstPartyLanguages:e,shouldHideLanguagesWithNoAltUnitSupport:t,dropdownId:r,onDropdownHidden:i,disabled:a}){let o=(0,l.U2)(),c=(0,s.vf)(),d=y({onlyShowFirstPartyLanguages:e,codeLanguage:o,onChange:c,shouldHideLanguagesWithNoAltUnitSupport:t});return n.createElement(b,{dropdownId:r,onDropdownHidden:i,disabled:a,codeLanguageApi:d})}function b({dropdownId:e,disabled:t,codeLanguageApi:r,onDropdownHidden:l,parentElementId:s}){let{codeLanguage:c,activeCodegenPlugin:m,formatter:y,codeLanguageOptions:v}=r,b=m&&"first-party"!==c.type?n.createElement(_.O,{plugin:m}):null,I=(0,a.I0)();n.useEffect(()=>I(d.a$()),[I]);let T=(0,p.L)(),w=n.useRef(null),S=(null==T?void 0:T.type)===e;return n.createElement("div",{className:E.Dy,"data-tooltip":(0,o.t)("dev_handoff.code.language"),"data-tooltip-type":h.fR.TEXT,"data-tooltip-show-above":!0},n.createElement("div",{className:E.i5},n.createElement(f.ld,{formatter:y,property:c,icon:b,onClick:()=>{S?I(u.kp()):I(u.SP({type:e}))},inputClassName:E._N,ref:w,dataTestId:"code_language_dropdown",isDisabled:t})),S&&!t&&w.current&&(0,i.createPortal)(n.createElement("div",{className:E.Dy},n.createElement(g.z,{items:v,onSelectItem:e=>{e.callback&&e.callback("",null,I)},dispatch:I,parentRect:w.current.getBoundingClientRect(),showPoint:!1,lean:"right",leanPadding:8,alwaysShowCheckMarkOffset:!0,onDropdownHidden:l,activatePathOnMount:"local-plugin"!==c.type?[y.format(c)]:[v[0].displayText]})),document.getElementById(s||"dev-handoff-inspect-panel")))}},255215:(e,t,r)=>{r.d(t,{A8:()=>u,Ep:()=>p,LO:()=>c,Lt:()=>g,SP:()=>f,es:()=>_,lO:()=>h,uJ:()=>m,uZ:()=>E});var n=r(269658),i=r(160296),a=r(961215),o=r(640723),l=r(661539),s=r(508966);let c=[a.QC6.PIXEL,a.QC6.SCALED],d=[i.ef];function u(e){return(0,l.rV)(e)?`${e.localFileId}`:`${e.plugin_id}`}function p(e,t){let r=(0,l.rV)(e)?"local-plugin":"published-plugin",i=u(e);if(t)return{type:r,id:i,pluginLanguage:t.value};let a=n.V.getState().mirror.appModel.devHandoffCodeLanguage,o=(0,s.c)(e).map(({value:e})=>e);if(a.id===i&&"first-party"!==a.type&&o.includes(a.pluginLanguage))return a;let c=o[0]??"";return{type:r,id:i,pluginLanguage:c}}function m(e,t){var r;if(!e)return[];let n=(null==(r=e.manifest)?void 0:r.codegenPreferences)??[];return n.filter(e=>{var r;return!(null==t?void 0:t.value)||!("includedLanguages"in e)||(null==(r=e.includedLanguages)?void 0:r.includes(t.value))})}function h(e,t){return m(e,t).find(l.y_)??null}function _(e,t){if(!e)return!1;if("first-party"===e.type)return!d.includes(e.id);if(!t)return!1;let r=(0,s.D)(t,e.pluginLanguage);return!!h(t,r)}function g(e,t,r){var n;let i={...e,codeExtensionPreferences:{...e.codeExtensionPreferences,[t.id]:{...(null==(n=e.codeExtensionPreferences)?void 0:n[t.id])||{},...r}}};o.d6(i)}function f(e,t){var r;let i=u(e),o=n.V.getState().mirror.appModel.devHandoffPreferences,s=o.codeExtensionPreferences[i]??{},c={},d=h(e,t),p=!1,_=!1;"unit"in s&&"scaleFactor"in s||(c.unit=(null==d?void 0:d.default)?a.QC6.SCALED:a.QC6.PIXEL,c.scaleFactor=(null==d?void 0:d.defaultScaleFactor)?d.defaultScaleFactor:1,p=!0,_=!0),t||d||s.unit!==a.QC6.SCALED||(c.unit=a.QC6.PIXEL,c.scaleFactor=1,p=!0,_=!0),p||!t||s.unit!==a.QC6.SCALED||d||(c.unit=d?a.QC6.SCALED:a.QC6.PIXEL,p=!0);let g=!1,f=m(e,t).filter(l.xh),E=s.customSettings??{},y={};for(let e of f){let t=E[e.propertyName];if(t&&e.options.some(e=>e.value===t)){y[e.propertyName]=t;continue}y[e.propertyName]=(null==(r=e.options.find(e=>e.isDefault))?void 0:r.value)??e.options[0].value,g=!0}(g||Object.keys(E).length!==Object.keys(y).length)&&(c.customSettings=y);let v={...s,...c};return{shouldUpdateCustomSettings:!!c.customSettings,shouldUpdateScaleFactor:_,shouldUpdateAltUnit:p,preferences:{...v,scaleFactor:v.unit===a.QC6.PIXEL?1:v.scaleFactor}}}function E(e,t){let r=null,{shouldUpdateCustomSettings:i,shouldUpdateAltUnit:a,shouldUpdateScaleFactor:o,preferences:l}=f(e,null);t&&({shouldUpdateAltUnit:a,preferences:r}=f(e,t),a&&(l.unit=r.unit));let s={};return i&&(s.customSettings=l.customSettings),o&&(s.scaleFactor=l.scaleFactor),a&&(s.unit=l.unit),Object.keys(s).length>0&&g(n.V.getState().mirror.appModel.devHandoffPreferences,p(e),s),r??l}},938981:(e,t,r)=>{r.d(t,{Gx:()=>l,Sz:()=>o,TB:()=>c,r_:()=>s,uS:()=>d});var n=r(337167),i=r(970740),a=r(196532);let o=(0,n.v$)("dev-mode-code-or-properties","code"),l=new class{format(e){switch(e){case"code":return(0,i.t)("inspect_panel.code.code");case"properties":return(0,i.t)("fullscreen.properties_panel.properties")}}};function s(){return(0,n.KO)(o)}function c(){return"code"===(0,n.Dv)(o)}function d(){let e=(0,a.G0)();return e?["code","properties"]:["properties"]}},187251:(e,t,r)=>{r.d(t,{BZ:()=>T,NI:()=>S,qB:()=>w});var n=r(652983),i=r(407908),a=r(952152),o=r(617984),l=r(970740),s=r(177026),c=r(160296),d=r(80613),u=r(300174),p=r(721127),m=r(32483),h=r(809377),_=r(291904),g=r(160905),f=r(482919),E=r(236750),y=r(828053);let v=new m.eO({min:.1}),b=[3,2,1,.5,1/3],I=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,l.t)("dev_handoff.alternative_units.no_scale")}};function T({scaleFactor:e,onChange:t,onDropdownHidden:r,className:a,inputClassName:o}){let l=(0,i.I0)(),s=(0,h.L)();return n.createElement(f.Ph,{dispatch:l,property:e,id:"SCALE_FACTOR",onChange:t,formatter:I,dropdownShown:s,className:a,inputClassName:o,dropdownWidth:"auto",autoFocus:!0,onDropdownHidden:r},b.map(t=>n.createElement(f.Wx,{key:t,value:t,selected:t===e,fullWidth:!0})))}function w({codeLanguage:e}){let t=(0,u.uZ)(e);switch(e.id){case c.YA:case c.n$:return n.createElement(l.Tx,{id:"dev_handoff.alternative_units.description_scale_factor_ios"});case c.P9:case c.WF:return n.createElement(l.Tx,{id:"dev_handoff.alternative_units.description_scale_factor_android"});case c.yO:return n.createElement(l.Tx,{id:"dev_handoff.alternative_units.description_scale_factor_web"})}return n.createElement(l.Tx,{id:"dev_handoff.alternative_units.description_scale_factor_third_party",unitName:t})}let S=(0,_.Y3)(function(){var e;let t=(0,c.U2)(),[r,m]=n.useState(t),h=(0,u.hV)(r),_=(0,u.Gn)(r.id),f=(0,u.kP)(),b=n.useRef(null),I=(0,i.I0)(),S=n.useCallback(e=>{e&&f(r,h,{scaleFactor:e})},[r,f,h]),C="first-party"===r.type&&(r.id===c.P9||r.id===c.WF||r.id===c.YA||r.id===c.n$),O="first-party"===r.type&&(r.id===c.yO||r.id===c.Q0),A=(0,a.Z)(()=>{var e;if(!O)return;let t="true"===((null==(e=_.customSettings)?void 0:e.onlyText)||"false");f(r,h,{customSettings:{onlyText:t?"false":"true"}})},250),N=n.useCallback(()=>{var e;null==(e=b.current)||e.focus()},[]),L=(null==_?void 0:_.scaleFactor)??1,P=(0,d.mN)({onChange:m,codeLanguage:r,shouldHideLanguagesWithNoAltUnitSupport:!0});return n.createElement(E.ge,{title:(0,l.t)("dev_handoff.alternative_units.unit_settings_modal_title"),headerSize:"small",headerClassName:y.X3,onClose:()=>I((0,p.VG)()),closeOnEsc:!0,closeOnEnter:!0,customButton:n.createElement(d.At,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",onDropdownHidden:N,codeLanguageApi:P}),minWidth:340,maxWidth:340},n.createElement(o.L,null,n.createElement("div",{className:y.Tr,tabIndex:-1,ref:b,"data-testid":"scale-factor-modal-content"},C?n.createElement("div",{className:y.g_},n.createElement(T,{scaleFactor:L,onChange:S,onDropdownHidden:N,className:y.Ne}),n.createElement("div",{className:y.ZW})):n.createElement("div",{className:y.Kb},n.createElement(g.Y2,{className:y.NM,property:L,formatter:v,onChange:S,onBlur:N,autoFocus:!0})),n.createElement("div",{className:y.uS},n.createElement(w,{codeLanguage:r})),O&&n.createElement(s.X,{checked:(null==(e=_.customSettings)?void 0:e.onlyText)==="true",label:n.createElement(l.Tx,{id:"dev_handoff.alternative_units.only_apply_rem_on_text",rem:n.createElement("span",{className:y.hO},n.createElement(l.Tx,{id:"dev_handoff.alternative_units.rem_unit"}))}),onChange:A}))))},"SCALE_FACTOR_MODAL")},300174:(e,t,r)=>{r.d(t,{Gn:()=>y,Gu:()=>M,Iz:()=>v,Ls:()=>C,OH:()=>A,S5:()=>F,X5:()=>I,Xl:()=>S,b:()=>k,hV:()=>O,kP:()=>b,q0:()=>T,u5:()=>D,uZ:()=>L,vm:()=>R,yF:()=>P,zG:()=>x});var n=r(652983),i=r(407908),a=r(229787),o=r.n(a),l=r(269658),s=r(807012),c=r(970740),d=r(160296),u=r(255215),p=r(298715),m=r(961215),h=r(468211),_=r(994538),g=r(661539),f=r(508966);let E={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",pixel:"px"};function y(e){let t=(0,d.U2)().id,r=(0,i.v9)(e=>e.mirror.appModel.devHandoffPreferences),a=e??t;return(0,n.useMemo)(()=>{var e;return(null==(e=r.codeExtensionPreferences)?void 0:e[a])??{}},[r,a])}function v(){var e,t,r,n,i;let a=null==(t=null==(e=l.V.getState())?void 0:e.mirror)?void 0:t.appModel,o=(null==(r=null==a?void 0:a.devHandoffCodeLanguage)?void 0:r.id)??"";return(null==(i=null==(n=null==a?void 0:a.devHandoffPreferences)?void 0:n.codeExtensionPreferences)?void 0:i[o])??{}}function b(){let e=(0,i.v9)(e=>e.mirror.appModel.devHandoffPreferences),t=(0,s.Pe)();return(0,n.useCallback)((r,n,i)=>{let{customSettings:a,...l}=i;o()(l)||(void 0!==l.unit&&(l.unit=l.unit===m.QC6.PIXEL?E.pixel:N(r,n)),t("Dev Mode Preference Changed",{languageType:r.type,languageId:r.id,...l})),(0,u.Lt)(e,r,i)},[e,t])}function I(){var e;let t=(0,d.U2)(),r=(null==(e=y())?void 0:e.unit)??m.QC6.PIXEL;return"first-party"===t.type&&t.id===d.ef?m.QC6.PIXEL:r}function T(){let e=(0,d.U2)(),{unit:t=m.QC6.PIXEL,scaleFactor:r=1}=y();return"first-party"===e.type&&e.id===d.ef?1:t===m.QC6.SCALED?r:1}let w=({codeLanguage:e,preferences:t,options:r={}})=>{var n;return!!h.bd.shouldAvoidScaling()||"first-party"===e.type&&(e.id===d.yO||e.id===d.Q0)&&(null==(n=t.customSettings)?void 0:n.onlyText)==="true"&&!(null==r?void 0:r.isTextProperty)};function S(e,t=e=>e,r){let n=T(),i=(0,d.U2)(),a=y();return void 0===e?void 0:t(1===n||0===n||w({codeLanguage:i,preferences:a,options:r})?e:e/n)}function C(e,t,r){let n=S(e,t,r),i=D(),a=(0,d.U2)(),o=y();return void 0===n?void 0:w({codeLanguage:a,preferences:o,options:r})?`${n}${E.pixel}`:`${n}${i}`}function O(e){let{id:t,type:r}=e,n=(0,p.Y9)(t,{searchLocalPlugins:"local-plugin"===r,searchSavedPlugins:"published-plugin"===r,searchPublishedPlugins:"published-plugin"===r,searchRecentPlugins:"published-plugin"===r});return n}function A(){let e=(0,d.U2)(),t=O(e);return(0,u.es)(e,t)}function N(e,t){let{id:r,type:n,pluginLanguage:i}=e;if("first-party"!==n&&t){let e=(0,f.D)(t,i),r=(0,u.lO)(t,e);if(r)return r.scaledUnit}switch(r){case d.yO:return E.scaledWeb;case d.YA:case d.n$:return E.scaledIOS;case d.P9:case d.WF:return E.scaledAndroid;default:return E.scaledWeb}}function L(e){let t=O(e);return N(e,t)}function P(e){switch(e){case d.yO:return(0,c.t)("dev_handoff.alternative_units.rem_unit");case d.P9:case d.WF:return(0,c.t)("dev_handoff.alternative_units.dp_unit");case d.YA:case d.n$:return(0,c.t)("dev_handoff.alternative_units.pt_unit");default:return(0,c.t)("dev_handoff.alternative_units.rem_unit")}}function R(){let e=(0,d.U2)();return k(e)}function k(e){let t=L(e);return"first-party"===e.type?P(e.id):t}function D(){let e=(0,d.U2)(),t=I(),r=L(e);return t===m.QC6.PIXEL?E.pixel:r}function M({includeActions:e=!0,includeSelectSettings:t=!0}={}){let r=(0,d.U2)(),i=(0,d.ez)(),a=y(),o=b();return n.useMemo(()=>F({includeActions:e,includeSelectSettings:t,codeLanguage:r,plugin:i,codeExtensionPreferences:a,onChangePreferences:o}),[e,t,r,i,a,o])}function F({includeActions:e=!1,includeSelectSettings:t=!0,codeLanguage:r,plugin:n,codeExtensionPreferences:i,onChangePreferences:a}){let o=[];if(!n||"first-party"===r.type||(0,u.A8)(n)!==r.id)return o;for(let l of(0,u.uJ)(n,(0,f.D)(n,r.pluginLanguage)))e&&(0,g.s5)(l)&&o.push({name:l.propertyName,displayText:(null==l?void 0:l.label)||l.propertyName,callback:()=>_.hn.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),t&&(0,g.xh)(l)&&o.push({name:l.propertyName,recordingKey:l.propertyName,displayText:(null==l?void 0:l.label)??l.propertyName,children:l.options.map((e,t)=>{var o,s;return{name:e.value,displayText:e.label,isChecked:(null==(o=null==i?void 0:i.customSettings)?void 0:o[l.propertyName])?(null==(s=null==i?void 0:i.customSettings)?void 0:s[l.propertyName])===e.value:0===t,callback:()=>a(r,n,{customSettings:{...null==i?void 0:i.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}})});return o}function x(){let e=(0,d.U2)(),t=(0,d.ez)();n.useEffect(()=>{if(!t)return;let r=e.pluginLanguage;r&&(0,u.uZ)(t,(0,f.D)(t,r))},[e,t])}},724747:(e,t,r)=>{r.d(t,{E:()=>f});var n=r(160296),i=r(126367),a=r(80613),o=r(938981),l=r(300174),s=r(652983),c=r(407908),d=r(716250),u=r(970740),p=r(255215),m=r(187251),h=r(721127),_=r(961215),g=r(500278);let f=()=>{let[e,t]=(0,o.r_)(),r=(0,l.OH)(),f=function(){let e=(0,l.Gu)(),t=function(){let e=(0,n.U2)(),t=(0,n.ez)(),r=(0,l.vm)(),i=(0,l.OH)(),a=(0,l.Gn)(),o=(0,l.kP)(),d=(0,c.I0)();return s.useMemo(()=>{let n=[];if(!i)return n;let l=(null==a?void 0:a.unit)||_.QC6.PIXEL;return n.push({displayText:(0,u.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...p.LO.map(n=>{let i=n===_.QC6.PIXEL?(0,u.t)("dev_handoff.alternative_units.pixel_unit"):r;return{name:n.toString(),displayText:i,isChecked:l===n,callback:()=>o(e,t,{unit:n}),recordingKey:n===_.QC6.PIXEL?"pixel":"scaled"}}),{displayText:(0,u.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>d((0,h.K4)({type:m.NI})),recordingKey:"setScaleFactor"}),n},[i,null==a?void 0:a.unit,r,o,e,t,d])}(),{updateDefaultCodegenSettings:r,isSetToDefault:i}=(0,g.Y)();return s.useMemo(()=>{let n=[];return t.length>0&&n.push(...t),e.length>0&&n.length>0&&n.push({displayText:"",separator:!0}),n.push(...e),(0,d.BZ)().dev_mode_default_codegen&&(n.length>0&&n.push({separator:!0,displayText:""}),n.push({displayText:(0,u.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{r()},isChecked:i})),n},[e,i,t,r])}(),E=(0,l.Gn)(),y=(0,n.U2)(),v=(0,i.vf)(),b=(0,a.mN)({codeLanguage:y,onChange:v}),I=(0,o.uS)(),T=I.find(t=>t===e)||I[0];return{inspectionMode:T,setInspectionMode:t,supportsAlternativeUnits:r,preferenceOptions:f,preferences:E,codeLanguageApi:b,inspectionModes:I}}},642648:(e,t,r)=>{r.d(t,{BU:()=>P,Hy:()=>w,Mx:()=>A,QO:()=>b,RI:()=>R,VG:()=>T,WH:()=>N,Yh:()=>k,a4:()=>L,b2:()=>C,zO:()=>S,zr:()=>O});var n=r(735300),i=r(269658),a=r(598271),o=r(303498),l=r(286206),s=r(523495),c=r(117986),d=r(680356),u=r(31642),p=r(188558),m=r(448694),h=r(112088),_=r(862610),g=r(467373),f=r(236016),E=r(231995);let y=p.z.object({id:p.z.string(),node_id:p.z.string(),file_key:p.z.string(),link_name:p.z.string(),link_url:p.z.string(),is_user_override:p.z.boolean(),link_preview_json:p.z.any()}),v=p.z.object({meta:p.z.array(y)});async function b({fileKey:e,nodeId:t,includeInheritedLinks:r}){let n=await g.h.getRelatedLinks({nodeId:t,fileKey:e}),a=n.data,o=v.safeParse(a);if(!o.success)throw Error("Invalid response from server");let l=o.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!r)return l;let s=i.V.getState().mirror.sceneGraph,c=(0,E.LE)([t],s),d=(0,E.hY)([t],s),u=await I(e,c),p=await I(e,d);return[...l,...u.map(e=>({...e,nodeId:t,mainComponentId:c})),...p.map(e=>({...e,nodeId:t,mainComponentId:d}))]}async function I(e,t){let r=i.V.getState().mirror.sceneGraph;if(!t)return[];let n=r.get(t);if(!n)return[];let{publishID:o}=n,l=a.JY(a.mL(o));return await b({fileKey:(0,h.os)(n)??e,nodeId:l?o??"":t,includeInheritedLinks:!1})}async function T(e){var t;let r=new Set([e]),n=new Map,o=new Map,l=i.V.getState().mirror.sceneGraph,s=(t,i)=>{if(!i)return;let s=l.get(i);if(!s)return;let{publishID:c,guid:d}=s,u=(0,h.os)(s);if(!u||!c||!a.JY(a.mL(c))||u===e){n.set(d,t),o.set(d,i);return}n.set(c,t),o.set(c,i),r.add(u)},c=null==(t=l.get("0:0"))?void 0:t.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);c&&c.length>0&&c.forEach(e=>{let t=l.get(e);if(!t||"INSTANCE"!==t.type)return;let r=t.symbolId;s(e,r);let n=(0,E.hY)([e],l);s(e,n)});let d=await u.ZP.post("/api/files/related_links",{file_keys:Array.from(r.values())}),p=[];return d.data.meta.forEach(t=>{let r=e===t.file_key&&!!l.get(l.guidFromDeveloperFriendlyId(t.node_id)),i={id:t.id,linkName:t.link_name,linkUrl:t.link_url,fileKey:t.file_key,isUserOverride:!!t.is_user_override,linkPreviewJson:t.link_preview_json};r&&p.push({...i,nodeId:t.node_id,mainComponentId:void 0}),n.has(t.node_id)&&p.push({...i,nodeId:n.get(t.node_id),mainComponentId:o.get(t.node_id)})}),p}async function w({fileKey:e,nodeId:t,url:r,name:n,nodeType:i,pluginId:a,source:o}){let l=await b({fileKey:e??"",nodeId:t??""}),s=l.find(e=>e.linkUrl===r);if(s)throw Error(`Link already exists on node ${t} with url ${r}`);return O({fileKey:e,nodeId:t,url:r,name:n,nodeType:i,pluginId:a,source:o})}async function S(e){var t;let r;try{let n=await f.B.getLinkMetadata({text:e}),i=null==(t=null==n?void 0:n.data)?void 0:t.meta;(null==i?void 0:i.title)&&(r=decodeURIComponent(null==i?void 0:i.title))}catch(e){}finally{if(!r){let t=(0,n.V9)(e);r=t?(0,s.fm)(t):"N/A"}}return r}p.z.object({node_id:p.z.string(),link_name:p.z.string(),link_url:p.z.string()});let C=p.z.object({meta:y});async function O({url:e,nodeId:t,fileKey:r,name:a,onPost:l,nodeType:s,pluginId:c,source:p}){var h;let g="";if(a)g=a;else{let t=(0,n.ge)(e);if((null==t?void 0:t.toLowerCase())==="github.com")g="Github";else if((null==t?void 0:t.toLowerCase())==="jira.com"||(null==t?void 0:t.toLowerCase())==="atlassian.net"){g="Jira";let t=function(e){for(let t of M){let r=e.match(t);if(null==r?void 0:r[1])return r[1]}return null}(e);t&&(g=`Issue ${t}`)}else g=await S(e)}let f={node_id:t??"",link_name:g,link_url:e},E=u.ZP.post(`/api/files/${r}/related_links`,f);return l&&l(),null==(h=(0,o.i0)())||h.deprecatedOptimisticallyCreateByView(_.DeveloperRelatedLinks,{DeveloperRelatedLink:{[`optimistic-link-${(0,d.k)()}`]:{nodeId:t??"",fileKey:r??"",linkName:g,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},E),E.then(e=>((0,m.hp)("Dev Handoff Related Links Added New Link Success",r,i.V.getState(),{nodeId:t,nodeType:s,source:p,pluginId:c}),e))}async function A({fileKey:e,nodeId:t,currentUrl:r,newValue:n,nodeType:i,pluginId:a,source:o}){let l=await b({fileKey:e,nodeId:t}),s=l.find(e=>e.linkUrl===r);return s||D({nodeId:t,url:r}),N({fileKey:e,nodeId:t,linkId:s.id,name:n.name||s.linkName,url:n.url||s.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:i,pluginId:a,source:o})}function N({fileKey:e,nodeId:t,linkId:r,name:n,url:a,isUserOverride:l,clearLinkPreview:s,nodeType:c,pluginId:d,source:p}){var h;let g={node_id:t,link_id:r,new_link_name:n,new_link_url:a};void 0!==l&&(g.is_user_override=l),s&&(g.link_preview_json=null);let f=u.ZP.put(`/api/files/${e}/related_links`,g);return null==(h=(0,o.i0)())||h.deprecatedOptimisticallyUpdateByView(_.DeveloperRelatedLinks,{DeveloperRelatedLink:{[r]:{linkName:n,linkUrl:a,isUserOverride:l,linkPreviewJson:s?"":void 0}}},f),f.then(r=>((0,m.hp)("Dev Handoff Related Links Edit Link Success",e,i.V.getState(),{nodeId:t,nodeType:c,source:p,pluginId:d}),r))}async function L({fileKey:e,nodeId:t,url:r,nodeType:n,pluginId:i,source:a}){let o=await b({fileKey:e,nodeId:t}),l=o.find(e=>e.linkUrl===r);return l||D({nodeId:t,url:r}),P({fileKey:e,nodeId:t,linkId:l.id,nodeType:n,pluginId:i,source:a})}function P({fileKey:e,nodeId:t,linkId:r,nodeType:n,pluginId:a,source:l}){var s;let c=u.ZP.del(`/api/files/${e}/related_links`,{node_id:t,link_id:r});return null==(s=(0,o.i0)())||s.deprecatedOptimisticallyDeleteByView(_.DeveloperRelatedLinks,{DeveloperRelatedLink:{[r]:null}},c),c.then(r=>((0,m.hp)("Dev Handoff Related Links Delete Link Success",e,i.V.getState(),{nodeId:t,nodeType:n,source:l,pluginId:a}),r))}async function R({fileKey:e,nodeId:t,url:r,linkPreviewJson:n}){let i=await b({fileKey:e,nodeId:t}),a=i.find(e=>e.linkUrl===r);return a||D({nodeId:t,url:r}),k({link:a,linkPreviewJson:n})}async function k({link:e,linkPreviewJson:t}){var r;try{let n=u.ZP.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:t});null==(r=(0,o.i0)())||r.deprecatedOptimisticallyUpdateByView(_.DeveloperRelatedLinks,{DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(t)}}},n),await n}catch(r){(0,l.Jz)(c.k.DEVELOPER_TOOLS,r,{extra:{link:e,linkPreviewJson:t}})}}function D({nodeId:e,url:t}){throw Error(`url ${t} and nodeId ${e} not found`)}let M=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},789853:(e,t,r)=>{r.d(t,{U:()=>i});var n=r(652983);function i(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),n.createElement("g",{mask:"url(#b)"},n.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),n.createElement("g",{filter:"url(#c)"},n.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),n.createElement("g",{filter:"url(#d)"},n.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),n.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),n.createElement("defs",null,n.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",null),n.createElement("feGaussianBlur",{stdDeviation:4.167}),n.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),n.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",null),n.createElement("feGaussianBlur",{stdDeviation:4.167}),n.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),n.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#fff"}),n.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}},855987:(e,t,r)=>{r.d(t,{MT:()=>C,XL:()=>O,aY:()=>S,fP:()=>U,gY:()=>T});var n=r(652983),i=r(87608),a=r.n(i),o=r(365653),l=r(337167),s=r(388899),c=r(435613),d=r(754210),u=r(961215),p=r(784667),m=r(640723),h=r(464368),_=r(345948),g=r(572333),f=r(321909),E=r(859401),y=r(187506),v=r(237895);let b=r(790070),I=r(792668),T=(0,l.cn)(new Map);function w(e){let{isHovered:t,selection:r}=(0,o.c)(t=>({isHovered:t.mirror.appModel.hoveredNode===e.guid,selection:t.mirror.sceneGraphSelection})),i=n.useRef(null);n.useEffect(()=>{i.current&&e.isSelected&&i.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let l="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||C.includes(e.type),s=[v.O7,e._className];e.isSelected&&s.push(v.hv),t&&s.push(v.ch),l&&s.push(v.NA),e.isExpanded(e.guid)&&s.push(v.zh),e.isAncestorSelected&&s.push(v._K),0!==e.indentation&&s.push(v.R6);let c=Array.from({length:e.indentation},(e,t)=>t+1);return n.createElement("div",{onMouseDown:t=>{(0,_.o)("html_tree"),e.didSelectRow(e.guid);let n=Object.keys(r);if(t.metaKey){var i;r[i=e.guid]?m.Vx([i]):m.cY([i])}else t.shiftKey&&n.length>0?m.De(n[n.length-1],e.guid):u.xAX.selectAndPanToNode(e.guid)},onDoubleClick:t=>e.isExpandable&&e.toggleExpanded(t,e.guid),onContextMenu:t=>e.openContextMenu(t,e.guid),onMouseEnter:()=>m.uW(e.guid),onMouseLeave:()=>m.uW(m.AX),role:"button",tabIndex:0,className:a()(s),ref:i,"data-fullscreen-intercept":!0},c.map(e=>n.createElement("div",{key:e,className:v.NY})),e.children)}function S(e){return n.createElement(c.n,{onMouseDown:e.visible?t=>{var r;t.preventDefault(),t.stopPropagation(),null==(r=e.onMouseDown)||r.call(e,t)}:void 0,className:a()(v.t2,e.visible&&v.oP),svg:e.expanded?b:I,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let C=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function O(e,t){let r=(null==e?void 0:e.type)??f.h3.NOT_ASSET,n=r&(f.h3.ASSET_IMAGE|f.h3.ASSET_ICON);return t?n:r&f.h3.ASSET_IMAGE}function A(e){return"SYMBOL"===e||"INSTANCE"===e}function N({guid:e}){let t=(0,l.Dv)(T),r=t.get(e);if(!r)return null;let i=r.state;return"added"===i?n.createElement("div",{className:v.c_}):"changed"===i?n.createElement("div",{className:v.fq}):"removed"===i?n.createElement("div",{className:v.Jk}):null}function L(e){return n.createElement(w,{...e,_className:e.hasChildren?v.ID:void 0},n.createElement(S,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:t=>e.toggleExpanded(t,e.guid),name:e.name}),n.createElement(y.uB,{className:v.YI,guid:e.guid}),n.createElement("span",{className:v.V1},e.name," ",e.showGuids&&` (${e.guid})`),n.createElement(N,{guid:e.guid}))}function P(e){return n.createElement(w,{...e,_className:v.ID},n.createElement(S,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:t=>e.toggleExpanded(t,e.guid),name:e.name}),n.createElement(y.uB,{className:v.YI,guid:e.guid}),n.createElement("span",{className:v.V1},e.name," ",e.showGuids&&` (${e.guid})`),n.createElement(N,{guid:e.guid}))}function R(e){var t,r;let i;let a=(0,h.at)(),o=e.inheritedTextStyle;if(o){let e=u.iTB.getStyleNodeId(o.key,o.version);i=null==(t=a.get(e))?void 0:t.name}let l=e.isInstanceSublayer?e.name===(null==(r=e.textContent)?void 0:r.trim().replace(/\s+/gm," ")):e.autoRename;return n.createElement(w,{...e,_className:v.GF},n.createElement(S,{visible:!1,expanded:!1,name:e.name}),n.createElement(y.uB,{className:v.YI,guid:e.guid}),l?null:n.createElement("span",{className:v.V1},e.name," ",e.showGuids&&` (${e.guid})`),n.createElement("span",{className:v.dZ},e.textContent),n.createElement("span",{className:v.M3}," \xb7 ",i),n.createElement(N,{guid:e.guid}))}function k(e){return n.createElement(n.Fragment,null,n.createElement(y.uB,{className:a()(v.YI,v.Gx,{[v.pH]:!e.figJam}),guid:e.guid}),n.createElement("span",{className:a()(v.V1,v.Gx)},e.name,e.showGuids&&` (${e.guid})`))}function D(e){let t=e.guid;return n.createElement(w,{...e},n.createElement(S,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(t),onMouseDown:r=>e.toggleExpanded(r,t),name:e.name}),n.createElement(k,{guid:t,name:e.name,showGuids:e.showGuids}),n.createElement(N,{guid:e.guid}))}function M(e){let t=e.guid;return n.createElement(w,{...e},n.createElement(S,{visible:!1,expanded:!1,onMouseDown:s.ZT,name:e.name}),n.createElement(k,{guid:t,name:e.name,showGuids:e.showGuids,figJam:!0}),n.createElement(N,{guid:e.guid}))}function F(e){let{assetInfo:t}=e;return t?n.createElement(x,{...e,assetInfo:t}):n.createElement(L,{...e})}function x(e){let{assetInfo:t}=e,r=t.type&f.h3.ASSET_IMAGE||e.hasEnabledStaticImagePaint,i=(0,d.tO)({assetId:e.guid,assetType:t.type,thumbnailVersion:t.thumbnailVersion,width:64,height:64,scale:2});return n.createElement(w,{...e,_className:v.nN},n.createElement(S,{visible:!1,expanded:!1,name:e.name}),n.createElement(E.W,{className:a()(v.yY,r?v.QO:v.ik),style:i.backgroundStyle,src:i.url}),n.createElement(n.Fragment,null,A(e.type)?n.createElement(k,{guid:e.guid,name:e.name,showGuids:!1}):n.createElement(n.Fragment,null,n.createElement("span",{className:v.V1},e.name," ",e.showGuids&&` (${e.guid})`),n.createElement("span",{className:v.os},n.createElement(d.iI,{assetInfo:t,dataTestId:"layerPanelAsset"})))))}let U=n.memo(e=>{let t=(0,g.mA)((0,p.tZ)().showGuids),r=(0,g.mA)(u.O$1.devHandoffState().automaticIconDetection),i=n.useMemo(()=>u.xAX.getOrAddAssetInfo(e.guid),[e.guid]),a=(0,h.at)(),o=a.get(e.guid);if(!o)return null;let l=o.devToolsOrderedVisibleChildren,s=function(e,t,r){return C.includes(e.type)?M:r&&O(r,t)?F:A(e.type)?D:"FRAME"===e.type&&"NONE"!==e.stackMode?P:"TEXT"===e.type?R:L}(o,r,i);if(!s)return null;let c=l.length>0&&!(i&&O(i,r));return n.createElement(s,{toggleExpanded:e.toggleExpanded,isExpanded:e.isExpanded,openContextMenu:e.openContextMenu,indentation:e.indentation,hasChildren:c,isSelected:e.isSelected,isAncestorSelected:e.isAncestorSelected,didSelectRow:e.didSelectRow,guid:o.guid,type:o.type,name:o.name,textContent:o.textContent,absoluteBoundingBox:o.absoluteBoundingBox,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,inheritedTextStyle:o.inheritedTextStyle,autoRename:o.autoRename,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,isInstanceSublayer:o.isInstanceSublayer,isSymbolSublayer:o.isSymbolSublayer,isExpandable:!e.isRoot&&c,showGuids:t,assetInfo:i})})},405027:(e,t,r)=>{r.d(t,{CX:()=>l,DE:()=>o});var n=r(716250),i=r(399503),a=r(448694);let o="Enter Design Mode";function l(e,t,r){var l;let s=(0,i.ui)(e),c=(0,n.BZ)().dt_dm_m10n?{source:r,hasSeatForDevMode:s}:{source:r};(0,a.hp)("dev_handoff"===t?"Enter Inspect Mode":o,null==(l=e.openFile)?void 0:l.key,e,c)}},773002:(e,t,r)=>{r.d(t,{Xy:()=>i,aL:()=>o,jv:()=>a,k7:()=>l});var n,i=((n=i||{}).ADDED="ADDED",n.REMOVED="REMOVED",n);function a(e,t=0,r){let n={code:e};return r&&(n.hint=r),t&&(n.indent=t),n}function o(e,t=!1){return e.map(e=>t?l(e)+e.code:e.code).join("\n")}function l(e){return e.indent?"  ".repeat(e.indent):""}},473267:(e,t,r)=>{r.d(t,{Gb:()=>l,Mb:()=>o,km:()=>a});var n,i,a=((n=a||{})[n.NoStyleForColor=0]="NoStyleForColor",n[n.VariableNotResolved=1]="VariableNotResolved",n[n.VariableSuggested=2]="VariableSuggested",n[n.MultipleVariables=3]="MultipleVariables",n[n.AbsolutePosition=4]="AbsolutePosition",n[n.BordersDontTakeUpSpace=5]="BordersDontTakeUpSpace",n[n.SinglePaint=6]="SinglePaint",n[n.UnsupportedPaint=7]="UnsupportedPaint",n[n.UnsupportedGradientPaint=8]="UnsupportedGradientPaint",n[n.LeadingTrim=9]="LeadingTrim",n[n.PlusDarker=10]="PlusDarker",n[n.BackgroundBlendModePlusLighterDarker=11]="BackgroundBlendModePlusLighterDarker",n[n.SwiftUISeparateBorderWidth=12]="SwiftUISeparateBorderWidth",n[n.SwiftUIBlurNoSpread=13]="SwiftUIBlurNoSpread",n[n.SwiftUIOnlySingleFillForShapes=14]="SwiftUIOnlySingleFillForShapes",n[n.SwiftUISeparateCornerRadius=15]="SwiftUISeparateCornerRadius",n[n.SwiftUISpacersForSpaceBetween=16]="SwiftUISpacersForSpaceBetween",n[n.ComposeSeparateBorderWidth=17]="ComposeSeparateBorderWidth",n[n.ComposeShadowIncompatibility=18]="ComposeShadowIncompatibility",n[n.ComposeBlurTip=19]="ComposeBlurTip",n[n.DisplayP3Fallback=20]="DisplayP3Fallback",n),o=((i=o||{}).Tooltip="tooltip",i.Comment="comment",i);let l={NoStyleForColor:{id:0,type:"tooltip"},VariableNotResolved:{id:1,type:"tooltip"},VariableSuggested:e=>({id:2,value:e,type:"tooltip"}),MultipleVariables:e=>({id:3,value:e,type:"tooltip"}),AbsolutePosition:e=>({id:4,name:e,type:"tooltip"}),BordersDontTakeUpSpace:{id:5,type:"tooltip"},SinglePaint:{id:6,type:"tooltip"},UnsupportedPaint:{id:7,type:"tooltip"},UnsupportedGradientPaint:{id:8,type:"tooltip"},LeadingTrim:{id:9,type:"tooltip"},DisplayP3Fallback:{id:20,type:"tooltip"},PlusDarker:{id:10,type:"tooltip"},BackgroundBlendModePlusLighterDarker:e=>({id:11,value:e,type:"tooltip"}),SwiftUISeparateBorderWidth:{id:12,type:"tooltip"},SwiftUIBlurNoSpread:{id:13,type:"tooltip"},SwiftUIOnlySingleFillForShapes:{id:14,type:"tooltip"},SwiftUISeparateCornerRadius:{id:15,type:"tooltip"},SwiftUISpacersForSpaceBetween:{id:16,type:"tooltip"},ComposeSeparateBorderWidth:{id:17,type:"tooltip"},ComposeShadowIncompatibility:{id:18,type:"tooltip"},ComposeBlurTip:{id:19,type:"tooltip"}}},281090:(e,t,r)=>{r.d(t,{AO:()=>c,G7:()=>d,nF:()=>s,rT:()=>u,vJ:()=>p});var n,i=r(365653),a=r(716250),o=r(464368),l=r(671755);function s(e,t=!1){let r=(0,l.OU)((e,t,r)=>{if(!t)return null;let n=p(e,t,r);return n||null},e,t),n=(0,i.c)(r=>{if(!e)return null;let n=p(r.mirror.sceneGraph,e,t);return n||null});return(0,a.BZ)().scenegraph_hooks_dev_handoff?r:n}let c=()=>{let{lastViewedStamp:e,lastEditedStamp:t}=(0,i.c)(e=>{var t;return{fileKey:null==(t=e.openFile)?void 0:t.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}});return function(e,t){if(!e)return t?new Date(t):void 0;if(!t)return e?new Date(e):void 0;let r=new Date(e),n=new Date(t);return r>n?r:n}(e,t)};var d=((n=d||{}).NOT_RECENT="NOT_RECENT",n.RECENTLY_EDITED="RECENTLY_EDITED",n.RECENTLY_CREATED="RECENTLY_CREATED",n);function u(e,t,r){let n=(0,o.at)();if(!e)return"NOT_RECENT";let i=p(n,e,!0);if(!i)return"NOT_RECENT";let a=i.lastEditedAt;if(!a||!t)return"NOT_RECENT";if(i.createdAt){let n=new Date(i.createdAt);if(t<n&&(!r[e]||r[e]<n))return"RECENTLY_CREATED"}let l=new Date(a);return l.setSeconds(0,0),t<l&&(!r[e]||r[e]<l)?"RECENTLY_EDITED":"NOT_RECENT"}function p(e,t,r){var n,i;let o=null==(n=e.get(t))?void 0:n.editInfo;return!o||r&&o.userId===(null==(i=(0,a.ZP)().user_data)?void 0:i.id)||0===o.lastEditedAt?null:(o.lastEditedAt=1e3*o.lastEditedAt,o.createdAt=1e3*o.createdAt,o)}},447160:(e,t,r)=>{r.d(t,{U2:()=>h,lg:()=>p,sg:()=>_,t8:()=>g,ws:()=>m});var n=r(237863),i=r(269658),a=r(31642),o=r(313653),l=r(218609),s=r(408462),c=r(448694),d=r(458766);let u=e=>{let t=i.V.getState();if(!t.openFile)return;let r=t.openFile;r&&r.parentOrgId&&a.ZP.post(`/api/activity_logs/${r.key}`,{event_name:e})},p=()=>{u("fig_file_save_as")},m=(0,l.u4)((e,t)=>{u("fig_file_export")}),h=(0,l.wV)("GET_ACTIVITY_LOGS",(e,t)=>{let{newQuery:r,teamId:n,emails:i,eventName:a,date:l}=t,u=e.getState();d.S.getActivityLogs({pageSize:"30",orgId:u.currentUserOrgId,startTime:l.start,endTime:(0,s.kr)(l.end),...n?{teamId:n}:null,...a?{eventName:JSON.stringify(a)}:null,...i?{emails:i.join()}:null,...r?null:{after:u.activityLogs.cursor.after}}).then(({data:t})=>{let o=t.meta,d=o[0],p=o[1],m=r?d:e.getState().activityLogs.logs.concat(d);e.dispatch(g({logs:m,cursor:p})),(0,c.VQ)("Activity Logs Fetched",u.currentUserOrgId,u,{teamIdFilter:n,eventNamesFilter:a,startDateFilter:l.start,endDateFilter:(0,s.kr)(l.end),filtersOnActorEmail:!!i&&i.length>0,filtersOnActedOnEmail:!!i&&i.length>0,isNewQuery:r,numberOfResults:d.length})}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||"An error occurred while fetching activity logs.";e.dispatch(o.l.flash(n))})}),_=(0,n.e)("CLEAR_CURSOR_ACTIVITY_LOGS"),g=(0,n.e)("SET_ACTIVITY_LOGS")},410152:(e,t,r)=>{r.d(t,{Cq:()=>h,LG:()=>g,Nf:()=>m,VY:()=>_,_v:()=>E,mb:()=>f,r2:()=>y});var n=r(237863),i=r(600486),a=r(239299),o=r(337167),l=r(218609),s=r(111120),c=r(218550),d=r(609346),u=r(202426),p=r(795153);let m=(0,l.u4)(async(e,t)=>{var r,n;let a=null==(n=null==(r=e.getState())?void 0:r.user)?void 0:n.id;if(!a)return;let o=Object.keys(t);await (0,d.Lt)(a,o),u.pk.sendToAllTabs(u.LD,o),(0,i.L9)("Delete New Autosave Files",{deletedCount:o.length})}),h=(0,l.u4)(async e=>{var t;let r=e.getState(),n=null==(t=r.user)?void 0:t.id;if(!n)return;await (0,d.JZ)(n);let i=await (0,d.CM)(n);e.dispatch(E({filesWithChangesInIDB:i.unsyncedFiles,filesCreatedOffline:i.newFiles})),e.dispatch(g(i.nextGarbageCollectionTimestamp))}),_=(0,n.e)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),g=(0,n.e)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),f=(0,n.e)("SET_AUTOSAVE_SNOOZE"),E=(0,n.e)("SET_UNCLAIMED_FILES");function y(e){u.pk.register(u.Rr,()=>(function(e){var t;let r=(null==(t=e.getState().user)?void 0:t.id)??null;p.t1.fetch((0,d.Tk)({userId:r}),{policy:"networkOnly"})})(e)),u.pk.register(u.LD,t=>(function(e,t){let r=o.n_.get(c._);r&&t.includes(r)&&(a.YO?a.YO.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(s.fv({view:"recentFiles"}))),e.dispatch(h())})(e,t)),u.pk.register(u.$G,({localFileKey:e,realFileKey:t})=>(0,d.$Q)(e,t))}},820311:(e,t,r)=>{r.d(t,{Ad:()=>S,DQ:()=>b,IE:()=>w,YE:()=>y,pq:()=>v,y_:()=>I});var n=r(237863),i=r(902510),a=r(518484),o=r(31642),l=r(313653),s=r(970740),c=r(644383),d=r(218609),u=r(638780),p=r(62514),m=r(701408),h=r(961215),_=r(21616),g=r(892061),f=r(298358);let E=(e,t)=>{let r=t/Math.min(e.width,e.height),n=e.width*r,i=e.height*r;return{x:(t-n)/2,y:(t-i)/2,width:n,height:i}},y=(e,t,r,n)=>{let i=document.createElement("canvas"),a=i.getContext("2d");return i.width=i.height=t,a.fillStyle="image/png"===n?"transparent":"#FFF",a.fillRect(0,0,t,t),a.drawImage(i,0,0),a.drawImage(e,r.x,r.y,r.width,r.height),"image/png"===n?i.toDataURL():i.toDataURL("image/jpeg",.92)},v=e=>{let t=atob(e.slice(e.indexOf(",")+1)),r=[];for(let e=0;e<t.length;e++)r.push(t[e].charCodeAt(0));return new Uint8Array(r)};async function b(e,t,r){let n=function(){let t=e.originalImageWidth&&e.originalImageHeight?e.originalImageWidth/e.originalImageHeight:1,r=_.Km(e,new a.OW(Math.max(g.DZ.LARGE,g.DZ.LARGE*t),Math.max(g.DZ.LARGE,g.DZ.LARGE/t)),{r:0,g:0,b:0,a:0}),n=r&&r.pixels&&r.pixelSize;return n?_.Ze(r.pixels,r.pixelSize):""}();if(n)try{let e=await function(e){let t=new Image;return new Promise((r,n)=>{t.onerror=e=>{n(e)},t.onload=()=>{URL.revokeObjectURL(e),r(t)},t.src=e})}(n);if(!e){l.l.error((0,s.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"));return}r(w({entity:t,entityType:g.py.CURRENT_USER,small:v(y(e,g.DZ.SMALL,E(e,g.DZ.SMALL))),large:v(y(e,g.DZ.LARGE,E(e,g.DZ.LARGE))),contentType:"image/jpeg"}))}catch(e){r(l.l.error((0,s.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,s.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),e)}}let I=(0,n.e)("AVATAR_EDITOR_RESET"),T=(0,d.u4)((e,t)=>{if(t.entityType===g.py.CURRENT_USER)o.ZP.put("/api/user",{img_url:t.smallUrl,img_url_500_500:t.largeUrl}).then(function({data:t}){var r;let n=t.meta;(null==n?void 0:n.img_url)&&(null==(r=h.B9x)||r.setImgUrl(n.img_url)),e.dispatch(m.gz({user:n,userInitiated:!1})),e.dispatch(I())},t=>{e.dispatch(l.l.error((0,s.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,s.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),t),e.dispatch(I())});else if(t.entityType===g.py.TEAM){let r=t.entity.id;o.ZP.put(`/api/teams/${r}`,{img_url:t.smallUrl,img_url_500_500:t.largeUrl}).then(function({data:t}){let r=t.meta;e.dispatch(p.gz({team:r,userInitiated:!1})),e.dispatch(I()),e.dispatch(c.R.enqueue({message:(0,s.t)("avatar_actions.team_icon_updated")}))},t=>{e.dispatch(l.l.error((0,s.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,s.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(I())})}else if(t.entityType===g.py.ORG){let r=t.entity.id;o.ZP.put(`/api/orgs/${r}`,{img_url:t.smallUrl,img_url_500_500:t.largeUrl}).then(function({data:t}){let r=t.meta;e.dispatch(u.gz({org:r})),e.dispatch(I())},t=>{var r;e.dispatch(l.l.error((0,s.t)("avatar_actions.an_error_occurred")+(null==(r=t.data)?void 0:r.message))),console.error((0,s.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),t),e.dispatch(I())})}else if(t.entityType===g.py.WORKSPACE){let r=t.entity.id;f.r.updateImage({workspaceId:r,img_url:t.smallUrl,img_url_500_500:t.largeUrl,onfulfilled:()=>{e.dispatch(c.R.enqueue({message:(0,s.t)("avatar_actions.workspace_icon_updated")}))},onrejected:t=>{let r=(0,s.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.l.error(r)),console.error(r),e.dispatch(I())}})}}),w=(0,d.wV)("AVATAR_EDITOR_UPLOAD",(e,t)=>{let r=(0,i.I)("profile",t.small,t.contentType),n=(0,i.I)("profile",t.large,t.contentType);Promise.all([r,n]).then(function(r){let n=r[0].data.meta.url,i=r[1].data.meta.url;e.dispatch(T({entity:t.entity,entityType:t.entityType,smallUrl:n,largeUrl:i}))},()=>{e.dispatch(l.l.error((0,s.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(I())})}),S=(0,n.e)("AVATAR_EDITOR_INIT")},445041:(e,t,r)=>{r.d(t,{$i:()=>H,AH:()=>e_,Am:()=>eI,B4:()=>B,D_:()=>eO,H7:()=>ep,IV:()=>ek,Io:()=>Y,Iv:()=>el,Lr:()=>eh,MV:()=>eo,OR:()=>eP,Ou:()=>ef,P$:()=>eA,Q_:()=>ee,Td:()=>eu,Ti:()=>eE,Uc:()=>eg,VS:()=>eS,Vr:()=>j,WF:()=>z,WJ:()=>ev,Xi:()=>X,ZD:()=>$,_Q:()=>q,_b:()=>eC,aN:()=>eL,b8:()=>em,cC:()=>Z,cq:()=>K,d0:()=>W,eJ:()=>eN,eX:()=>eR,eY:()=>ey,eb:()=>G,ei:()=>x,ih:()=>es,jB:()=>F,kB:()=>ei,lC:()=>J,mc:()=>eM,o2:()=>eb,pp:()=>ew,q3:()=>er,rK:()=>ed,rR:()=>V,rb:()=>et,u2:()=>ec,xi:()=>Q,xl:()=>ea,z6:()=>en,zO:()=>eF,zc:()=>eT});var n=r(237863),i=r(600486),a=r(969709),o=r(642045),l=r(598271),s=r(716250),c=r(337167),d=r(303498),u=r(359799),p=r(286206),m=r(473515),h=r(31642),_=r(313653),g=r(970740),f=r(644383),E=r(218609),y=r(111120),v=r(540805),b=r(448694),I=r(80401),T=r(598362),w=r(158774),S=r(961215),C=r(413810),O=r(690590),A=r(220949),N=r(830027),L=r(7462),P=r(647655),R=r(721127),k=r(472131),D=r(222490),M=r(864974);async function F(e,t,r,n,i){await U(i.messageMeta,e,t,r,n).then(t=>{e(Z({comment:i.comment,messageMeta:i.messageMeta,attachmentUpdates:i.attachmentUpdates,forceWithInvite:t,forceMention:t,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function x(e,t,r,n,i,a,o,l){return await U(a.messageMeta,t,r,n,i).then(r=>{t(eS({threadId:a.threadId,reply:{messageMeta:a.messageMeta,attachments:a.attachments}})),t(X({commentsWriteApi:e,threadId:a.threadId,threadUuid:a.threadUuid,uuid:o,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{t(ey({threadId:a.threadId,resetStatusOnly:!0})),t(eS({threadId:a.threadId,reply:{messageMeta:a.messageMeta,attachments:a.attachments}}))})}function U(e,t,r,n,i){let a=new Promise(a=>{t((0,R.K4)({type:P.YX,data:{messageMeta:e,dispatch:t,usersWithoutAccess:r,externalUsersWithoutAccess:n,uninvitableUsers:i,onConfirm:()=>a(!0),onCancel:()=>a(!1)}}))});return a}let B=(0,E.u4)((e,t)=>{let{receiptsAPI:r,comment:n}=t;r.markAsUnread(n.id).catch(t=>{let r=(0,g.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{t=JSON.parse(t),e.dispatch(_.l.error((0,g.it)(t,r)))}catch(t){e.dispatch(_.l.error(r))}})}),V=(0,E.u4)((e,t)=>{let{receiptsAPI:r,thread:n}=t;r.markAsRead(n.comments.map(e=>e.id)).catch(t=>{let r=(0,g.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{t=JSON.parse(t),e.dispatch(_.l.error((0,g.it)(t,r)))}catch(t){e.dispatch(_.l.error(r))}})}),G=(0,E.u4)((e,t)=>{let{commentReceiptsAPI:r,canvasMentionReceiptsAPI:n}=t;r.markAllAsRead().catch(t=>{let r=(0,g.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{t=JSON.parse(t),e.dispatch(_.l.error((0,g.it)(t,r)))}catch(t){e.dispatch(_.l.error(r))}}),n.markAllAsRead().catch(t=>{let r=(0,g.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{t=JSON.parse(t),e.dispatch(_.l.error((0,g.it)(t,r)))}catch(t){e.dispatch(_.l.error(r))}})});(0,E.u4)((e,t)=>{let{reactionsApi:r,id:n,emoji:i}=t,a=r.removeReaction(n,i),o=(0,g.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,_.i)({promise:a,fallbackError:o}))}),(0,E.u4)((e,t)=>{let r=e.getState(),{reactionsApi:n,id:i,emoji:a}=t,o=n.addReaction(i,a,{prototype_mode:"prototype"===r.selectedView.view}),l=(0,g.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,_.i)({promise:o,fallbackError:l}))});let H=(0,E.u4)((e,t)=>{let{reactionsApi:r,id:n}=t,{emoji:i}=t,a=e.getState();(0,o.f2)(i)&&null!==(0,o.Vz)()&&(i=(0,o.qf)(i)[0]+(0,o.Vz)());let l=r.toggleReaction(n,i,{prototype_mode:"prototype"===a.selectedView.view}),s=(0,g.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,_.i)({promise:l,fallbackError:s}))}),W=(0,E.u4)((e,t)=>{let r;let{comment:n}=t,{key:a,id:o,uuid:l,parent_id:s}=n,c=h.ZP.del(`/api/file/${a}/comments/${o}`),p=(0,g.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,_.i)({promise:c,fallbackError:p})),v.n.remove(o),r=l?(0,d.i0)().optimisticallyDeleteWithUUID({Comment:{[l]:null}},c):(0,d.i0)().optimisticallyDelete({Comment:{[o]:null}},c),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!l}),(0,u.V)(r,e.dispatch,ek({comment:{id:o,parent_id:s}}))}),K=(0,E.u4)((e,{thread:{key:t,id:r,uuid:n},resolved:o})=>{var l;let c=e.getState();if(o&&(null==(l=c.comments.activeThread)?void 0:l.id)===r&&!c.comments.showResolved&&e.dispatch(Q()),(0,s.BZ)().comments_undo_resolve&&o){let i={text:(0,g.t)("comments.undo"),action:()=>{e.dispatch(K({thread:{key:t,id:r,uuid:n},resolved:!1}))}};e.dispatch(f.R.enqueue({message:(0,g.t)("comments.comment_resolved"),type:"comment-resolved",button:i,onDismiss:()=>{}}))}v.n.remove(r);let u=o?"true":"false",p=o?(0,g.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,g.t)("comments.an_error_occurred_while_unresolving_this_comment");if(n&&(0,a.Ty)(r)){let r=(0,d.i0)().getIdFromUuid("Comment",n).then(r=>{let n=h.ZP.put(`/api/file/${t}/comments/${r}`,{resolved_at:u});return e.dispatch((0,_.i)({promise:n,fallbackError:p})),n});(0,d.i0)().optimisticallyUpdateWithUUID({Comment:{[n]:{uuid:n,resolvedAt:o?new Date:null}}},r),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let a=h.ZP.put(`/api/file/${t}/comments/${r}`,{resolved_at:u});e.dispatch((0,_.i)({promise:a,fallbackError:p})),n?(0,d.i0)().optimisticallyUpdateWithUUID({Comment:{[n]:{uuid:n,resolvedAt:o?new Date:null}}},a):(0,d.i0)().optimisticallyUpdate({Comment:{[r]:{resolvedAt:o?new Date:null}}},a),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!n})}}),z=(0,E.u4)((e,{thread:{key:t,id:r,uuid:n},clientMeta:o})=>{let l;n&&(0,a.Ty)(r)?(l=(0,d.i0)().getIdFromUuid("Comment",n).then(e=>h.ZP.put(`/api/file/${t}/comments/${e}`,{client_meta:o})),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(l=h.ZP.put(`/api/file/${t}/comments/${r}`,{client_meta:o}),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!n}));let s=(0,g.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,_.i)({promise:l,fallbackError:s})),n?(0,d.i0)().optimisticallyUpdateWithUUID({Comment:{[n]:{uuid:n,clientMeta:{x:o.x,y:o.y,pageId:void 0===o.page_id?null:o.page_id,nodeId:void 0===o.node_id?null:o.node_id,nodeOffset:void 0===o.node_offset?null:o.node_offset,inFrame:void 0===o.in_frame?null:o.in_frame,selectionBoxAnchor:o.selection_box_anchor?o.selection_box_anchor:null,stablePath:o.stable_path?o.stable_path:null}}}},l):(0,d.i0)().optimisticallyUpdate({Comment:{[r]:{clientMeta:{x:o.x,y:o.y,pageId:void 0===o.page_id?null:o.page_id,nodeId:void 0===o.node_id?null:o.node_id,nodeOffset:void 0===o.node_offset?null:o.node_offset,inFrame:void 0===o.in_frame?null:o.in_frame,selectionBoxAnchor:o.selection_box_anchor?o.selection_box_anchor:null,stablePath:o.stable_path?o.stable_path:null}}}},l)}),Z=(0,E.wV)("COMMENTS_SET_COMMENT_CONTENT",(e,t)=>{let r=t.comment.key;if(!r||(0,a.Cm)(t.messageMeta))return;let n=(0,a.wY)(t.messageMeta),o=h.ZP.put(`/api/file/${r}/comments/${t.comment.id}`,{message_meta:t.messageMeta,attachment_updates:(0,O.W$)(t.attachmentUpdates),share_to_mentions:t.forceWithInvite||!1,force:t.forceMention||!1,pending_mentions:n}).then(({data:t})=>{var r;(null==(r=t.message)?void 0:r.warning_message)&&0!==t.message.warning_message.length&&e.dispatch(f.R.enqueue({type:"at-mention-error",message:t.message.warning_message}))}).catch(e=>{var r,n,i,a;let o=null==(n=null==(r=e.data)?void 0:r.reason)?void 0:n.failure_info;(null==(a=null==(i=e.data)?void 0:i.reason)?void 0:a.reason)!=="comment_validation_failure"||void 0===o||!t.onCommentValidationFailure||t.forceMention||t.forceWithInvite||t.onCommentValidationFailure(o.users_without_view,o.ext_users_without_view,o.uninvitable_users,{comment:t.comment,messageMeta:t.messageMeta})}),l=(0,g.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,_.i)({promise:o,fallbackError:l}));let s=t.comment.uuid,c=(0,a.At)(t.messageMeta);if(s?(0,d.i0)().optimisticallyUpdateWithUUID({Comment:{[s]:{uuid:s,messageMeta:c,messageMetaStylized:c}}},o):(0,d.i0)().optimisticallyUpdate({Comment:{[t.comment.id]:{messageMeta:c,messageMetaStylized:c}}},o),(0,i.L9)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!s}),t.attachmentUpdates){let e=(0,I.vh)(t.attachmentUpdates.deleted);(0,d.i0)().optimisticallyDelete({CommentAttachment:e},o);let r=(0,I.LH)(Object.values(t.attachmentUpdates.attachments),t.comment.key,t.comment.id);(0,d.i0)().optimisticallyCreate({CommentAttachment:r},o)}}),Y=(0,E.u4)(async(e,t)=>{var r,n,a;let o=e.dispatch(j(t));if(!o||t.thread.isPendingFromSinatra)return;let s=t.thread.comments[0];if(!s)return;let c=e.getState(),d=null==(r=s.client_meta)?void 0:r.node_id,u=(null==(n=s.client_meta)?void 0:n.stable_path)?s.client_meta.stable_path:l.cl;!u&&d&&(u=[d]);let p=t.thread.id,m=t.source;(null==(a=s.client_meta)?void 0:a.page_id)&&"communityHub"===c.selectedView.view&&(p!==c.selectedView.commentThreadId&&e.dispatch(y.fv({...c.selectedView,commentThreadId:p})),c.selectedView.commentThreadId&&(0,i.L9)("Comment Thread Read",{commentThreadId:p,threadType:"community_preview"})),await o,e.dispatch(el({threadId:p,source:m}));let h=t.thread.comments.some(e=>e.isUnread);h&&t.receiptsAPI&&!t.thread.isPendingFromSinatra&&!t.thread.isCanvasMention&&(e.dispatch(V({receiptsAPI:t.receiptsAPI,thread:t.thread})),(0,i.L9)("Comment Thread Read",{commentThreadId:p})),"fullscreen"===c.selectedView.view&&S.iTB.setActiveCommentAnchorData({stablePath:`[${u.join(",")}]`})}),j=(0,E.u4)((e,t)=>{var r,n,i,a;let o=e.getState();if(o.comments.activeThread&&o.comments.activeThread.id!==t.thread.id&&!t.skipDeactivatingExistingActiveComment&&!e.dispatch(Q()))return null;o=e.getState();let{thread:l,viewport:s,config:c,navigate:d,isOrphanedComment:u}=t,{setCurrentPageIdAsync:p,pageIdForNodeId:h}=s,_=s.getViewportInfo();if(!_)return null;let g=l.comments[0];if(!g)return null;let f=null==(r=g.client_meta)?void 0:r.node_id,E=l.page||f&&h(f)||(null==(n=g.client_meta)?void 0:n.page_id),y=[],v=null==(a=null==(i=o.mirror)?void 0:i.appModel)?void 0:a.currentPage,b=!1;E&&(b=v!==E,y.push(p(E).then(async()=>{b&&await (0,m.Ql)()})));let I=o.mirror.appModel.currentTool===S.UAh.COMMENTS;if(!u&&c.repositionViewportOnCommentSelection){let e=d((0,T._)(l,s,o.selectedView,b,I),{jump:b,jumpOnAbort:!0});e&&y.push(e)}return Promise.all(y).then()}),$=(0,E.u4)((e,t)=>{var r;let n=e.getState();(null==(r=n.comments.activeThread)?void 0:r.id)===t.thread.id?e.dispatch(Q()):(t.skipDeactivatingExistingActiveComment||e.dispatch(Q()),e.dispatch(Y(t)),c.n_.set(N.a,!1))}),q=(0,n.e)("COMMENTS_STOP_EDITING"),X=(0,E.wV)("COMMENTS_SUBMIT_REPLY",(e,t)=>{let r=e.getState(),{commentsWriteApi:n,commentsConfiguration:i}=t,a=r.comments.threads[t.threadId],[o,l]=n.reply({threadId:t.threadId,threadUuid:t.threadUuid,uuid:t.uuid,messageMeta:a.reply.messageMeta,attachments:Object.values(a.reply.attachments||{})},{forceMention:t.forceMention||!1,forceWithInvite:t.forceWithInvite||!1,prototypeMode:"prototype"===r.selectedView.view});(0,s.BZ)().comments_faster_saving_ux&&!(0,s.BZ)().comments_faster_saving_ux_v2&&e.dispatch(eN({commentUuid:t.uuid})),e.dispatch(eS({threadId:t.threadId,reply:{messageMeta:[],attachments:{}}})),o.then(t=>{var n;if(!t)return;let{data:a}=t;if((null==(n=a.message)?void 0:n.warning_message)&&0!==a.message.warning_message.length&&e.dispatch(f.R.enqueue({type:"at-mention-error",message:a.message.warning_message})),a.message&&a.message.is_new_file_follower){let t=i.showNotificationSettings?{text:(0,g.t)("comments.manage"),action:()=>{let t=e.getState();e.dispatch(Q()),t.mirror.appModel.showUi||w.Gr.triggerAction("toggle-ui"),t.mirror.appModel.currentTool!==S.UAh.COMMENTS&&w.Gr.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(y.SP({type:L.F}))})}}:void 0;e.dispatch(f.R.enqueue({message:(0,g.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:t,onDismiss:()=>{}}))}let o=a.meta;e.dispatch(eD({comment:o,userInitiated:!1})),b.hp("Comment Submitted",o.key,r,{commentId:o.id,parentCommentId:o.id,selectedView:r.selectedView.view}),(0,s.BZ)().comments_faster_saving_ux_v2&&o.id&&o.uuid&&e.dispatch(eP({commentId:o.id,commentUuid:o.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(M.v({has_created_comment:!0}))}).catch(r=>{var n,i,o,l;let s=null==(i=null==(n=r.data)?void 0:n.reason)?void 0:i.failure_info;if((null==(l=null==(o=r.data)?void 0:o.reason)?void 0:l.reason)!=="comment_validation_failure"||void 0===s||!t.onCommentValidationFailure||t.forceMention||t.forceWithInvite){let n=(0,g.it)(r,(0,g.t)("comments.an_error_occurred"));e.dispatch(_.l.error(n)),e.dispatch(ey({threadId:t.threadId,resetStatusOnly:!0})),e.dispatch(eS({threadId:t.threadId,reply:a.reply}));return}t.onCommentValidationFailure(s.users_without_view,s.ext_users_without_view,s.uninvitable_users,{threadId:t.threadId,messageMeta:a.reply.messageMeta,attachments:a.reply.attachments})}).finally(()=>{(0,s.BZ)().comments_faster_saving_ux&&!(0,s.BZ)().comments_faster_saving_ux_v2&&e.dispatch(eL({commentUuid:t.uuid}))})}),J=(0,E.wV)("COMMENTS_SUBMIT_NEW_COMMENT",(e,t)=>{(0,i.L9)("New comment starting dispatched action",{uuid:t.uuid});let r=e.getState(),n=(0,C.UE)(r.selectedView);if(!n)return Promise.resolve();let a=t.newCommentState||r.comments.newComment,{canvasPosition:o,nodeId:l,nodeOffset:c,inFrame:d,pageId:u,viewport:p,stablePath:m}=t.destination,h=a.selectionBoxAnchor?a.selectionBoxAnchor:void 0;r.responsiveContent&&h&&(0,A.m_)({id:"comments_onboarding_2_complete"}),e.dispatch(Q({force:!0})),e.dispatch(eE({resetStatusOnly:!1}));let{messageMeta:_,attachments:E}=a;(0,i.L9)("New comment creating promise",{uuid:t.uuid});let[v,I]=t.commentsWriteApi.create({fileKey:n,messageMeta:_,attachments:Object.values(E),pageId:u,uuid:t.uuid,clientMeta:{x:o.x,y:o.y,node_id:l,node_offset:c,page_id:u,viewport:p,in_frame:d,selection_box_anchor:h,stable_path:m}},{prototypeMode:"prototype"===r.selectedView.view,onValidationError:async(t,r,n)=>{let i=await U(a.messageMeta,e.dispatch,t,r,n);if(i)return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eE({resetStatusOnly:!0}));let t={text:(0,g.t)("comments.view"),action(t,r){var n;if((null==(n=e.getState().comments.activeThread)?void 0:n.id)===O.oZ&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eh()),e.dispatch(f.R.update({id:r,message:(0,g.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(ef(a)),e.dispatch(ee())}};e.dispatch(f.R.enqueue({type:`comment-creation-failure: ${I}`,error:!1,message:(0,g.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:t,timeoutOverride:1/0}));return}e.dispatch(ef(a)),e.dispatch(ee()),e.dispatch(eh())}});return(0,s.BZ)().comments_faster_saving_ux&&!(0,s.BZ)().comments_faster_saving_ux_v2&&e.dispatch(eN({commentUuid:t.uuid})),v.then(d=>{var p;if((0,i.L9)("New comment promise resolved",{uuid:t.uuid}),!d)return;let{data:h}=d;if((0,C.UE)(e.getState().selectedView)!==n)return;if((null==(p=h.message)?void 0:p.warning_message)&&0!==h.message.warning_message.length&&e.dispatch(f.R.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let r=t.commentsConfiguration.showNotificationSettings?{text:(0,g.t)("comments.manage"),action:()=>{let t=e.getState();e.dispatch(Q({force:!0})),t.mirror.appModel.showUi||w.Gr.triggerAction("toggle-ui"),t.mirror.appModel.currentTool!==S.UAh.COMMENTS&&w.Gr.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(y.SP({type:L.F}))})}}:void 0;e.dispatch(f.R.enqueue({message:(0,g.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let _=h.meta,E=e.getState().comments.newComment!==a;e.dispatch(eE({resetStatusOnly:E})),(0,s.BZ)().comments_faster_saving_ux_v2&&_.id&&_.uuid&&e.dispatch(eP({commentId:_.id,commentUuid:_.uuid})),b.hp("Comment Submitted",n,r,{commentId:_.id,locationX:o&&o.x,locationY:o&&o.y,nodeId:l,pageId:u,nodeOffsetX:c&&c.x,nodeOffsetY:c&&c.y,selectedView:r.selectedView.view,stablePath:m}),e.getState().userFlags.has_created_comment||e.dispatch(M.v({has_created_comment:!0})),e.dispatch((0,k.Gt)({lastCreatedCommentId:_.id}))}).catch(r=>{var n,o,l;e.dispatch(eE({resetStatusOnly:!0}));let s=(null==(n=null==r?void 0:r.data)?void 0:n.status)>=400&&(null==(o=null==r?void 0:r.data)?void 0:o.status)<500&&(null==(l=null==r?void 0:r.data)?void 0:l.message);if(!s)return e.dispatch(f.R.enqueue({type:`comment-creation-failure: ${I}`,message:(0,g.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,g.t)("comments.retry"),action(){(0,i.L9)("New comment dispatching retry submission",{uuid:t.uuid}),e.dispatch(J({...t,newCommentState:a}))}}}));{let t=(0,g.it)(r);if(t)return e.dispatch(f.R.enqueue({type:`comment-creation-failure: ${I}`,message:t,error:!0}))}}).finally(()=>{(0,s.BZ)().comments_faster_saving_ux&&!(0,s.BZ)().comments_faster_saving_ux_v2&&e.dispatch(eL({commentUuid:t.uuid}))})}),Q=(0,E.u4)((e,t)=>{var r;let n=e.getState(),i=t instanceof Object&&t.force,{newComment:o}=n.comments,s=null==(r=n.comments.activeThread)?void 0:r.id,c=(0,a.Jf)(o.messageMeta)&&0===Object.keys(o.attachments).length;if(!i&&s===O.oZ&&!c&&o.discardAttempt<1)return e.dispatch(eh()),!1;let d=s&&n.comments.threads[s],u=d&&(0,a.Jf)(d.reply.messageMeta)&&0===Object.keys(d.reply.attachments||{}).length;if(!i&&s&&d&&!u&&(!d.discardAttempts||d.discardAttempts<1))return e.dispatch(em(s)),!1;let p=n.comments.editingComment;return!i&&p?(e.dispatch(em(p.id)),!1):("fullscreen"===n.selectedView.view&&S.iTB.setActiveCommentAnchorData({stablePath:l.P9}),"communityHub"===n.selectedView.view&&e.dispatch(y.fv({...n.selectedView,commentThreadId:void 0})),e.dispatch(eM()),e.dispatch(eF()),e.dispatch(eE({resetStatusOnly:!1})),n.tooltip&&e.dispatch(D.Cp()),!0)}),ee=(0,E.wV)("COMMENTS_SET_NEW_COMMENT_ACTIVE",(e,t)=>{let r=e.getState();if("fullscreen"===r.selectedView.view){if(r.comments.newComment.anchorPosition){let{x:e,y:n}=r.comments.newComment.anchorPosition,i=null==t?void 0:t.stablePath;i?S.iTB.setActiveCommentAnchorData({stablePath:`[${i.join(",")}]`}):S.iTB.setActiveCommentAnchorData(S.iTB.getCommentAnchorDataAtPosition(e,n))}else S.iTB.setActiveCommentAnchorData({stablePath:l.P9})}}),et=(0,E.wV)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION",e=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(M.v({has_created_selection_comment:!0}))}),er=(0,E.wV)("COMMENTS_SET_NEW_ANCHOR_POSITION",(e,t)=>{let r=e.getState();if("fullscreen"===r.selectedView.view){let{x:e,y:r}=t.anchorPosition;S.iTB.setActiveCommentAnchorData(S.iTB.getCommentAnchorDataAtPosition(e,r))}}),en=(0,n.e)("COMMENTS_REMOVE_HOVERED_PIN"),ei=(0,n.e)("COMMENTS_ADD_HOVERED_PIN"),ea=(0,n.e)("COMMENTS_REMOVE_EMPHASIZED_PIN"),eo=(0,n.e)("COMMENTS_ADD_EMPHASIZED_PIN"),el=(0,n.e)("COMMENTS_SET_ACTIVE"),es=(0,E.u4)(e=>{var t,r;let n=e.getState(),a=n.selectedView;"subView"in a&&("hubFile"===a.subView||"plugin"===a.subView)&&(0,i.L9)("at_mention_search_started",{comment_type:(null==(t=n.comments.activeThread)?void 0:t.id)?"community_pinned":"community_general",profile_id:null==(r=n.user)?void 0:r.community_profile_id,resource_id:"hubFile"===a.subView?a.hubFileId:a.publishedPluginId,resource_type:"hubFile"===a.subView?"hub_file":"plugin"})}),ec=(0,n.e)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),ed=(0,n.e)("COMMENTS_SET_TYPEAHEAD"),eu=(0,n.e)("COMMENTS_SHOW_EMOJI_PICKER"),ep=(0,n.e)("COMMENTS_SET_ACTIVE_SORT"),em=(0,E.wV)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT",e=>{var t;let r=e.getState().comments,n=null==(t=r.activeThread)?void 0:t.id,i=n&&r.threads[n];if(i&&i.discardAttempts===a.OB){let e=(0,a.nV)(i.reply.messageMeta),t=(0,a.Jf)(i.reply.messageMeta);(0,p.YK)("Comment discard active thread attempt","comment info",{threadId:n,messageLength:e.length,isMessageDiscardable:t}),(0,p.wT)("isMessageDiscardable",String(t)),(0,p.wT)("messageType","reply"),(0,p.x9)("User attempted to close comments more than max attempt times")}}),eh=(0,E.wV)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT",e=>{let t=e.getState().comments.newComment;if(t.discardAttempt===a.OB){let e=(0,a.nV)(t.messageMeta),r=(0,a.Jf)(t.messageMeta);(0,p.YK)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:r}),(0,p.wT)("isMessageDiscardable",String(r)),(0,p.wT)("messageType","new"),(0,p.x9)("User attempted to close comments more than max attempt times")}}),e_=(0,n.e)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),eg=(0,n.e)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),ef=(0,n.e)("COMMENTS_REVERT_NEW_COMMENT"),eE=(0,n.e)("COMMENTS_RESET_NEW_COMMENT"),ey=(0,n.e)("COMMENTS_RESET_THREAD"),ev=(0,n.e)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eb=(0,n.e)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eI=(0,n.e)("COMMENTS_SET_NEW_COMMENT"),eT=(0,n.e)("COMMENTS_SET_REPLY_ATTACHMENT"),ew=(0,n.e)("COMMENTS_SET_REPLY_MESSAGE"),eS=(0,n.e)("COMMENTS_SET_REPLY"),eC=(0,n.e)("COMMENTS_SET_EDITING_ATTACHMENT"),eO=(0,n.e)("COMMENTS_SET_EDITING"),eA=(0,n.e)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),eN=(0,n.e)("COMMENTS_SET_SAVING"),eL=(0,n.e)("COMMENTS_CLEAR_SAVING"),eP=(0,n.e)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eR=(0,n.e)("COMMENTS_CLEAR_LG_PENDING_UUID"),ek=(0,n.e)("COMMENTS_DEL"),eD=(0,E.wV)("COMMENTS_POST",(e,t)=>{let r=e.dispatch,n=e.getState(),{comment:i}=t;if(n.user&&n.user.id===i.user_id&&!t.userInitiated){if(i.parent_id){let e=n.comments.threads[i.parent_id];if(e&&e.state===O.Ux.BUSY){let n=!function(e,t){if(!e)return!t;if(!t)return!e;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){let n=e[r],i=t[r],a=new Set(Object.keys(n)),o=Object.keys(i);if(a.size!==o.length)return!1;let l=o.every(e=>!!a.has(e)&&n[e]===i[e]);if(!l)return!1}return!0}(t.comment.message_meta,e.reply.messageMeta);r(ey({threadId:i.parent_id,resetStatusOnly:n}))}}else{let e=n.comments.newComment;e&&e.state===O.Ux.BUSY&&r(Q({force:!0})),r(eE({resetStatusOnly:!1}))}}}),eM=(0,n.e)("COMMENTS_RESET"),eF=(0,n.e)("COMMENTS_RESET_ACTIVE_ID")},607371:(e,t,r)=>{r.d(t,{AW:()=>c,qY:()=>d,w9:()=>s});var n=r(237863),i=r(795153),a=r(966922),o=r(271748),l=r(218609);let s=(0,n.e)("COMMUNITY_SET_CATEGORIES_FOR_CATEGORY_TYPE"),c=(0,l.wV)("COMMUNITY_FETCH_CATEGORIES_FOR_CATEGORY_TYPE",(e,{categoryType:t,limit:r},{loadingKey:n})=>{let i=o.j.getAll({categoryType:t,limitCategoryContent:r});(0,a.m)(i,e,n),i.then(({data:r})=>{let n=r.meta;e.dispatch(s({categoryType:t,categories:n}))})},({categoryType:e,limit:t})=>`COMMUNITY_FETCH_CATEGORIES_FOR_category_TYPE_${e}_${t}`),d=i.t1.Query({fetch:async e=>{let t=await o.j.getAllV2();return t.data.meta}})},84315:(e,t,r)=>{r.d(t,{Au:()=>$,Ay:()=>R,Bl:()=>G,H2:()=>W,J3:()=>k,L$:()=>V,QB:()=>er,Qn:()=>H,R3:()=>F,Se:()=>Q,Wu:()=>en,Wy:()=>J,ZN:()=>ei,_t:()=>X,aX:()=>et,bP:()=>M,fk:()=>U,fv:()=>ea,lF:()=>ee,o9:()=>Z,oM:()=>eo,qB:()=>el,s8:()=>es,tH:()=>j,uq:()=>B,vM:()=>D,vl:()=>K,x2:()=>z,yf:()=>q,zM:()=>x});var n=r(237863),i=r(600486),a=r(993394),o=r(31642),l=r(313653),s=r(970740),c=r(750274),d=r(644383),u=r(573196),p=r(163381),m=r(455322),h=r(218609),_=r(111120),g=r(798462),f=r(638780),E=r(54055),y=r(496478),v=r(733609),b=r(966922),I=r(413810),T=r(242030),w=r(690590),S=r(646472),C=r(606536),O=r(780931),A=r(160393),N=r(445041),L=r(512512),P=r(851665);let R=(0,n.e)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),k=(0,n.e)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),D=c.setAuthedActiveCommunityProfile,M=(0,h.u4)((e,t)=>{var r;let n;let{user:a,authedUsers:o,orgUsersByOrgId:l,authedTeamsById:c,teamAdminRolesForAuthedUsers:p,authedProfilesById:h,selectedView:g,currentUserOrgId:f}=e.getState(),y=t.profileId?h[t.profileId]:null,b=t.view&&(!y||(0,E.Tx)(y,t.view))?t.view:{view:"communityHub",subView:"searchAndBrowse",data:m.zK};if(!y){e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),(0,u.Zc)(b),e.dispatch(_.fv(b));return}let I=f;if(y.org_id){I=y.org_id;let e=l.orgUsers[y.org_id];n=Object.keys(o.byId).find(t=>{let r=e[t];if(r&&(0,v.getPermissionLevel)(r.permission)>=C.Wp.ADMIN)return r.user_id})}else y.team_id?(I=(null==(r=c[y.team_id])?void 0:r.org_id)||null,n=Object.keys(o.byId).find(e=>{var t;let r=p[e];return null==(t=null==r?void 0:r.find(e=>e.team_id===y.team_id))?void 0:t.user_id})):n=y.primary_user_id===(null==a?void 0:a.id)?null==a?void 0:a.id:o.orderedIds.find(e=>{var t,r;return null==(r=null==(t=y.associated_users)?void 0:t.find(t=>t.user_id===e))?void 0:r.user_id});if((0,T.i3)(y.id),(0,i.L9)("Community profile IA switched",{profileId:y.id,view:g.view}),e.dispatch(D(y)),e.dispatch(R()),n&&(n!==(null==a?void 0:a.id)||f!==I)){let t={userId:n,orgId:I};e.dispatch(_.NO({workspace:t,view:b}))}else(0,u.Zc)(b),e.dispatch(_.fv(b))}),F=(0,n.e)("COMMUNITY_HUB_ADD_FOLLOW"),x=(0,n.e)("COMMUNITY_HUB_DELETE_FOLLOW"),U=(0,n.e)("COMMUNITY_HUB_SAVE_PAGE_STATE"),B=(0,n.e)("COMMUNITY_HUB_RESET_COMMENT_STATE"),V=(0,n.e)("COMMUNITY_HUB_SET_COMMENTS"),G=(0,n.e)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),H=(0,n.e)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),W=(0,n.e)("COMMUNITY_HUB_ADD_NEW_COMMENTS_QUEUE"),K=(0,n.e)("COMMUNITY_HUB_REMOVE_FROM_NEW_COMMENTS_QUEUE"),z=(0,n.e)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),Z=(0,n.e)("COMMENTS_INSERT_COMMUNITY_MENTION"),Y=(e,t)=>{let r=/\?/.test(e)?"&":"?";return e+`${r}${t}`},j=(0,h.u4)((e,t)=>{var r;if(!(0,a.p$)(t))return;let n=`/api/${(0,E.$U)(t.resourceType)}/${t.resourceId}/comments`;!t.selectedCommentId||t.selectedCommentId===w.oZ||(null==(r=t.pagination)?void 0:r.selected_comment)||(n=Y(n,`selected_comment_id=${t.selectedCommentId}`)),(t.activeFeedType===S.QN.ME||(0,p.yZ)(e.getState().authedActiveCommunityProfile)&&(t.activeFeedType===S.QN.RATINGS_REVIEWS||t.activeFeedType===S.QN.COMMENTS))&&(n=Y(n,`feed_type=${t.activeFeedType}`),void 0===t.numCommentsForResource&&(n=Y(n,"include_total_count=true"))),t.pinnedOnly&&(n=Y(n,"pinned_only=true")),(0,a.V6)(n,t.pageSizeOverride??a.h0,t,a.wt).then(e=>{let r=!e.selected_comment||e.comments.find(t=>{var r;return t.id===(null==(r=e.selected_comment)?void 0:r.id)}),{commentsById:n,authorsById:i,feed:a}=(0,E.mi)(r?e.comments:[...e.comments,e.selected_comment]),o=e.pagination;e.selected_comment&&(o.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:n,authorsById:i,feed:a,activeFeedType:t.activeFeedType,type:t.resourceType,id:t.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),t.onSuccess&&t.onSuccess(l)}).catch(r=>{e.dispatch(l.l.error((0,s.t)("community.actions.unable_to_fetch_comments"))),t.onError&&t.onError()})}),$=(0,h.wV)("COMMUNITY_HUB_RESTRICT_PROFILE",(e,{profileId:t,blockedProfileId:r,onSuccess:n})=>{o.ZP.post(`/api/profile/${r}/block`,{block_type:"restrict",profile_id:t}).then(()=>{n&&n()}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.couldnt_restrict_profile_error",{error:r}),type:"RESTRICT_PROFILE_ERROR"}))})}),q=(0,h.wV)("COMMUNITY_HUB_UNRESTRICT_PROFILE",(e,{profileId:t,blockedProfileId:r,onSuccess:n})=>{o.ZP.del(`/api/profile/${r}/block`,{block_type:"restrict",profile_id:t}).then(()=>{n&&n()}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.couldnt_unrestrict_profile_error",{error:r}),type:"UNRESTRICT_PROFILE_ERROR"}))})}),X=(0,h.wV)("COMMUNITY_HUB_SET_COMMENT_STATE",(e,t)=>{let{id:r,type:n}=t;(r!==e.getState().communityHub.comments.id||n!==e.getState().communityHub.comments.type)&&e.dispatch(B()),e.dispatch(V(t))});(0,h.u4)((e,{profileId:t,on404Redirect:r},{loadingKey:n})=>{let i=O.P.getProfile({profileId:t});(0,b.m)(i,e,n),i.then(({data:t})=>{e.dispatch(P.e3(t.meta.profile)),e.dispatch(_.fv(e.getState().selectedView))}).catch(t=>(404===t.status&&r?r():e.dispatch(l.l.error((0,s.t)("community.actions.error_fetching_profile_information"))),null))});let J=(0,h.wV)("COMMUNITY_HUB_GET_PROFILE_BY_HANDLE",(e,{handle:t,on404Redirect:r},{loadingKey:n})=>{let i=e.getState().currentUserOrgId,a=O.P.getHandle({currentOrgId:i||void 0,handle:t});(0,b.m)(a,e,n),a.then(({data:t})=>{e.dispatch(P.e3(t.meta.profile))}).catch(({data:t})=>{(null==t?void 0:t.status)===404&&r&&r(),e.dispatch(l.l.error((0,s.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`),Q=(0,h.wV)("COMMUNITY_HUB_CREATE_PROFILE",(e,t,{loadingKey:r})=>{let{website:n,description:i,location:a,profileHandle:c,onSuccess:d,userId:u,teamId:p,orgId:m}=t,h=o.ZP.post("/api/profile",{website:n,description:i,location:a,profile_handle:c,primary_user_id:u,team_id:p,org_id:m});(0,b.m)(h,e,r),h.then(({data:t})=>{e.dispatch(P.Xw(t.meta)),e.dispatch(P.e3(t.meta));let{currentUserOrgId:r,orgById:n}=e.getState(),i=r&&n[r];r&&i&&r===m&&e.dispatch(f.r$({id:r,community_profile_handle:t.meta.profile_handle,community_profile_id:t.meta.id})),d&&d(e)}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(l.l.error(r))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),ee=(0,h.u4)((e,t)=>{o.ZP.post("/api/profile/generate_handle").then(({data:r})=>{e.dispatch(P.Xw(r.meta)),e.dispatch(P.e3(r.meta)),t.onSuccess&&t.onSuccess(e)}).catch(({data:t})=>{e.dispatch(l.l.error(t.message))})}),et=(0,h.wV)("COMMUNITY_HUB_UPDATE_PROFILE",(e,t,{loadingKey:r})=>{var n;let{website:i,twitter:a,instagram:c,pronouns:p,description:m,location:h,profileId:g,profileHandle:y,onSuccess:v}=t,I=e.getState().communityHub.currentProfile;if(g===(null==I?void 0:I.id)&&Object.entries(t).every(([e,t])=>void 0===t||e in I&&I[e]===t))return;let T=null==a?void 0:a.trim(),w=null==c?void 0:c.trim();if(T&&(null==I?void 0:I.twitter)!==T&&!u.Gz.test(T)){e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.your_twitter_handle_is_not_valid",{handle:T}),error:!0}));return}if(w&&(null==I?void 0:I.instagram)!==w&&!u.QN.test(w)){e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.your_instagram_handle_is_not_valid",{handle:w}),error:!0}));return}let S=o.ZP.put(`/api/profile/${g}`,{website:i,twitter:T,instagram:w,pronouns:p,description:m,location:h,profile_handle:y});(0,b.m)(S,e,r);let C=null==(n=e.getState().user)?void 0:n.community_profile_handle;S.then(({data:r})=>{var n;let{communityHub:i,currentUserOrgId:a,orgById:o}=e.getState();(null==(n=i.currentProfile)?void 0:n.id)===r.meta.id&&e.dispatch(P.e3(r.meta));let l=o[a];if(l&&"string"==typeof l.id&&l.id===r.meta.org_id&&e.dispatch(f.r$({id:r.meta.org_id,community_profile_handle:r.meta.profile_handle})),y){let t=e.getState().selectedView;(0,E.Tw)(t)&&(null==t?void 0:t.handle)===C&&e.dispatch(_.fv({view:"communityHub",subView:"handle",handle:y})),r.meta.primary_user_id?e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:y}),type:"profile-handle"})):r.meta.team_id?e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:y}),type:"team-handle"})):r.meta.org_id&&e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:y}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(n=>{if(n in r.meta&&n in t){let t={twitter:(0,s.t)("community.actions.your_twitter_handle_was_updated"),location:(0,s.t)("community.actions.your_location_was_updated"),instagram:(0,s.t)("community.actions.your_instagram_handle_was_updated"),website:(0,s.t)("community.actions.your_website_url_was_updated"),description:(0,s.t)("community.actions.your_description_was_updated")};e.dispatch(d.R.enqueue({message:t[n],type:"profile-updated"}))}}),v&&v(e)}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(l.l.error(r))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),er=(0,h.u4)((e,t,{loadingKey:r})=>{let{profileId:n,handle:i}=t;o.ZP.del(`/api/profile/${n}`).then(()=>{e.dispatch(P.d8(i));let{currentUserOrgId:t,orgById:r}=e.getState(),a=t&&r[t];t&&a&&a.community_profile_id===n&&e.dispatch(f.r$({id:t,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.l.error((0,s.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})}),en=(0,h.wV)("COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE",async(e,{file:t,profileId:r,onSuccessCallback:n},{loadingKey:i})=>{let a=(0,y.rn)(t).then(e=>(function(e,t,r,n){return t?o.ZP.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:t,fields:r})=>{let i=new FormData;return r&&Object.entries(r).forEach(([e,t])=>i.append(e,t)),i.set("content-type",n.type),i.append("file",n),await fetch(e,{method:"POST",body:i}),{cover_image_path:e,signature:t}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${r}/upload`,e,t.type,t));(0,b.m)(a,e,i),await a.then(({signature:e})=>o.ZP.put(`/api/profile/${r}`,{signature:e})).then(({data:t})=>{e.dispatch(P.e3(t.meta)),n()}).catch(t=>{e.dispatch(l.l.error(t?(0,s.t)("community.actions.an_error_occurred_with_error",{error:t}):(0,s.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`),ei=(0,h.wV)("COMMUNTY_HUB_FOLLOW_ENTITY",async(e,t,{loadingKey:r})=>{let n=o.ZP.put("/api/follows",{followed_profile_id:t});(0,b.m)(n,e,r),await n.then(({data:r})=>{var n,i;(null==(n=e.getState().user)?void 0:n.community_profile_id)&&(e.dispatch(F({followedProfileId:t,currentUserProfileId:null==(i=e.getState().user)?void 0:i.community_profile_id})),e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.followed_profile_name",{profileName:r.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:r}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))})},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),ea=(0,h.wV)("COMMUNTY_HUB_UNFOLLOW_ENTITY",(e,t,{loadingKey:r})=>{let n=o.ZP.del("/api/follows",{followed_profile_id:t});(0,b.m)(n,e,r),n.then(()=>{var r,n;(null==(r=e.getState().user)?void 0:r.community_profile_id)&&(e.dispatch(x({followedProfileId:t,currentUserProfileId:null==(n=e.getState().user)?void 0:n.community_profile_id})),e.dispatch(d.R.enqueue({message:(0,s.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(t=>{let r=(0,s.it)(t);r&&e.dispatch(d.R.enqueue({message:`Unable to unfollow this profile: ${r}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))})},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function eo(e){return{updateStatus:(0,n.e)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,n.e)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,n.e)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,n.e)(`${e}_CLEAR_PUBLISHING`)}}let el=(0,h.u4)(async(e,t)=>{var r;let n;let{thread:i,resolved:a}=t,l=e.getState();a&&(null==(r=l.comments.activeThread)?void 0:r.id)===i.id&&!l.comments.showResolved&&e.dispatch(N.xi()),n=a?o.ZP.put(`/api/community_comments/${i.id}/resolve`):o.ZP.put(`/api/community_comments/${i.id}/unresolve`),await n.then(({data:t})=>{e.dispatch(g.az({comment:{id:i.id,resolved_at:t.meta.resolved_at}}))}).catch(t=>{e.dispatch(d.R.enqueue({error:!0,message:a?(0,s.t)("community.actions.failed_to_resolve_comment"):(0,s.t)("community.actions.failed_to_unresolve_comment")}))})}),es=(0,h.u4)((e,{thread:t})=>{let r=e.getState(),n=(0,I.np)(r,r.selectedView);e.dispatch(L.vQ({stringToCopy:(0,A.up)(n,t.id)}))})},207160:(e,t,r)=>{r.d(t,{GJ:()=>h,en:()=>m,iN:()=>_,nB:()=>g,pX:()=>u});var n=r(237863),i=r(716250),a=r(286206),o=r(122342),l=r(289629),s=r(218609),c=r(966922),d=r(104529);let u=(0,s.u4)((e,t)=>{var r,n,i;let{payments:s,source:c}=t,d=null==(r=e.getState().user)?void 0:r.id;if(!d||!s)return;let u=s.filter(l.lq),m=`${p}_${d}`,h=null==(n=(0,o.Rz)())?void 0:n.getItem(m);if(h){let e=JSON.parse(h);if(Array.isArray(e)){let t=new Set(u.map(e=>e.monetized_resource_metadata_id)),r=e.map(e=>e.monetized_resource_metadata_id),n=r.filter(e=>!t.has(e));n.length&&(0,a.YD)("community","[ActivePayments] mismatch detected",{source:c,userId:d,revoked:n,previousPayments:e,currentPayments:s},{reportAsSentryError:!0})}}let _=JSON.stringify(u);null==(i=(0,o.Rz)())||i.setItem(m,_)}),p="debug_succeeded_payments",m=(0,s.u4)((e,t,{loadingKey:r})=>{let n=d.i.getBuyerActivePayments();(0,c.m)(n,e,r),n.then(({data:t})=>{(0,i.BZ)().cmty_log_fe_paid_access_revoked&&e.dispatch(u({payments:t.meta,source:"Sinatra"})),e.dispatch(g(t.meta))}).catch(()=>{})}),h=(0,n.e)("M10N_DEL_ACTIVE_USER_PAYMENT"),_=(0,n.e)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),g=(0,n.e)("M10N_SET_ACTIVE_USER_PAYMENTS")},331945:(e,t,r)=>{r.d(t,{KS:()=>p,R:()=>m,aJ:()=>h,z5:()=>_});var n=r(237863),i=r(286206),a=r(151881),o=r(812796),l=r(54055),s=r(966922),c=r(646472),d=r(782328),u=r(218609);let p=(0,n.e)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE"),m=(0,u.wV)("COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE",(e,{shelfType:t,limit:r},{loadingKey:n})=>{let a={shelfType:t,limitShelfContent:r},o=d.w.getCommunityShelves(a);(0,s.m)(o,e,n),o.then(({data:r})=>{let n=r.meta;n.forEach(t=>_(e.dispatch,t.shelf_content)),e.dispatch(p({shelfType:t,shelves:n}))}).catch(e=>{(0,i.YD)("collections","error fetching collections",{...a,error:e.toString()})})},({shelfType:e,limit:t})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${t}`),h=(0,u.wV)("COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL",(e,{shelfType:t,filterLabel:r,limit:n},{loadingKey:i})=>{let a=d.w.getCommunityShelves({shelfType:t,filterLabel:r,limitShelfContent:n});(0,s.m)(a,e,i),a.then(({data:r})=>{let n=r.meta;n.forEach(t=>_(e.dispatch,t.shelf_content)),e.dispatch(p({shelfType:t,shelves:n}))})},({shelfType:e,filterLabel:t,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${t}_${r}`);function _(e,t){let r=[],n=[],i=[];t.forEach(e=>{let t=(0,l.MA)(e);t===c.mX.HUB_FILE?r.push(e):t===c.mX.PLUGIN?n.push(e):t===c.mX.WIDGET&&i.push(e)}),e((0,a.H$)({hubFiles:r,src:"fetchShelvesForShelfType"})),e((0,o.jb)({publishedPlugins:[...n,...i],src:"fetchShelvesForShelfType"}))}},215698:(e,t,r)=>{r.d(t,{AJ:()=>J,Au:()=>eo,CI:()=>ea,CU:()=>eI,GJ:()=>et,H$:()=>b.H$,IN:()=>eT,OG:()=>ed,R4:()=>q,UK:()=>ef,X9:()=>ep,ZL:()=>X,Zf:()=>en,ac:()=>es,ax:()=>eu,cj:()=>ey,d0:()=>eg,fN:()=>ei,jb:()=>eb,pK:()=>Q,vH:()=>eE,wT:()=>el,yu:()=>b.yu,yv:()=>ev,zQ:()=>b.zQ});var n=r(237863),i=r(600486),a=r(764150),o=r(448501),l=r(357768),s=r(716250),c=r(337167),d=r(303498),u=r(571529),p=r(286206),m=r(1057),h=r(117986),_=r(31642),g=r(36940),f=r(313653),E=r(970740),y=r(644383),v=r(968034),b=r(151881),I=r(218609),T=r(84315),w=r(721154),S=r(111120),C=r(721127),O=r(307425),A=r(692379),N=r(448694),L=r(54055),P=r(496478),R=r(961215),k=r(625735),D=r(179640),M=r(761767),F=r(966922),x=r(722330),U=r(841017),B=r(249203),V=r(465883),G=r(938110),H=r(363402),W=r(818709),K=r(233159),z=r(795914),Z=r(799915),Y=r(466263),j=r(798354),$=r(851665);let q=(0,n.e)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),X=(0,n.e)("UPDATE_HUB_FILE_PAGE_TITILE"),J=(0,n.e)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),Q=(0,n.e)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),ee=(0,n.e)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),et=(0,n.e)("HUB_FILE_PUT_HUB_FILE_REMIX"),er=e=>{let t=(0,E.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(u.K1){window.location.href="/login";return}e.dispatch(g.Y.init({origin})),e.dispatch(C.K4({type:Z.m,data:{headerText:t}}))},en=(0,I.wV)("DUPLICATE_HUB_FILE",(e,t,{loadingKey:r})=>{let n=e.getState(),l=n.user;if(!l){er(e);return}let s=(0,v.N)(n),c={headers:{..._.ZP.defaults.headers,"X-Figma-User-ID":t.workspace.userId}},d=_.ZP.post(`/api/hub_files/v2/${t.hubFileId}/copy`,{org_id:t.workspace.orgId},c);(0,F.m)(d,e,r),d.then(({data:r})=>{let n=r.meta;(0,i.L9)(A.pR.HUB_FILE_DUPLICATED,{hubFileId:t.hubFileId,figFileKey:n.key,...s}),"whiteboard"===n.editor_type&&e.dispatch(O.of({storeInRecentsKey:G.xQ.FigJam,id:t.hubFileId,type:G._g.CommunityResource}));let l=(0,B.Sb)(n);l=(0,a.BT)(l,{[D.KE.KEY]:D.KE.VALUE,fuid:t.workspace.userId}),o.default.redirect(l,u.K1?void 0:"_blank"),e.dispatch(S.kp())}).catch(t=>{e.dispatch(y.R.enqueue({error:!0,message:(0,E.t)("community.actions.failed_to_duplicate_file_error",{error:(0,E.it)(t,(0,E.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),ei=(0,I.u4)((e,t)=>{var r;let{canRetry:n=!0}=t,i=e.getState(),a=i.currentUserOrgId;if(t.folderId){let n=null==(r=i.folders[t.folderId])?void 0:r.team_id,a=n?i.teams[n]:null,o=i.hubFiles[t.hubFileId].viewer_mode===M.Zs.WHITEBOARD?"whiteboard":"design",l="whiteboard"===o?{type:U.Xy.ADD_FIGJAM_FILE}:{type:U.Xy.ADD_DESIGN_FILE};if(a&&!(0,U.bw)(a,l)){e.dispatch(C.K4({type:Y.p,data:{teamId:a.id,createInDrafts:()=>{e.dispatch(ei({...t,folderId:void 0}))},teamName:a.name,editorType:o,dispatch:e.dispatch,action:W.XH.CREATE_FILE_FROM_TEMPLATE}}));return}}let l=_.ZP.post(`/api/hub_files/template/${t.hubFileId}/copy`,{folder_id:t.folderId,org_id:a});return l.then(({data:r})=>{let n=r.meta;(0,s.BZ)().templ_copy_file_create_logging&&(0,N.NB)("File Created",n,{selectedView:i.selectedView},{source:t.source}),t.callback&&t.callback(null==n?void 0:n.key),"whiteboard"===n.editor_type&&e.dispatch(O.of({storeInRecentsKey:G.xQ.FigJam,id:t.hubFileId,type:G._g.CommunityResource}));let a=(0,B.Sb)(n);o.default.redirect(a,t.openInNewTab&&!u.K1?"_blank":void 0)}).catch(r=>{let i={error:!0,message:(0,E.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:t.hubFileName})};n&&(i.button={text:(0,E.t)("community.actions.retry"),action:()=>e.dispatch(ei({...t,canRetry:!1}))}),e.dispatch(y.R.enqueue(i))})}),ea=(0,I.wV)("HUB_FILE_GET_VERSIONS",async(e,{hubFileId:t,callback:r},{loadingKey:n})=>{let i=null,a=Promise.resolve(null),o=z.D.getVersions({id:t});a=o;try{i=(await o).data.meta}catch(e){return}(0,F.m)(a,e,n);let{fig_file_metadata:l,remixed_from_metadata:s,...c}=i,d=c.related_content,u=c.remixed_to_metadata,p=d?d.content:u||[],m=[...p,c];s&&m.push(s),e.dispatch((0,b.H$)({hubFiles:m,src:"getHubFileVersions"})),l&&(e.dispatch(q({hubFileId:c.id,fileKey:l.key})),l.file&&e.dispatch(w.gz({file:l.file})),l.roles&&e.dispatch(j.qV({roles:l.roles}))),e.dispatch(X({hubFileId:c.id}));let h=new Set(null==u?void 0:u.map(e=>e.id));e.dispatch(et({hubFileId:c.id,from:s?s.id:null,to:h})),null==r||r(c)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),eo=(0,I.u4)((e,{fileKey:t})=>{(0,s.ZP)().user_data&&K.N.getHubFileMetadata({fileKey:t}).then(({data:r})=>{let n=r.meta.published_as;(null==n?void 0:n.id)?e.dispatch(q({hubFileId:n.id,fileKey:t})):e.dispatch(J({fileKey:t}));let i=r.meta.remixed_from_metadata,a=r.meta.is_preview;(null==i?void 0:i.id)?e.dispatch(Q({hubFileId:i.id,fileKey:t,isPreview:!!a})):e.dispatch(ee({fileKey:t}));let o=[n,i].filter(e=>!!e);o.length>0&&e.dispatch((0,b.H$)({hubFiles:o,src:"getHubFileMetadata"}))}).then(()=>{(0,s.BZ)().ce_new_missing_fonts_logging&&(0,k.Gv)()}).catch(e=>{console.error(e)}).finally(()=>{c.n_.set(l.v,!0)})}),el=(0,T.oM)("HUB_FILE"),{updateMetadata:es,updateStatus:ec,clearMetadataAndStatus:ed,clearMetadata:eu}=el,ep=(0,I.u4)((e,t)=>{let r=t.onSuccess;delete t.onSuccess,e.dispatch(ec({id:t.fileKey,status:{code:V.QW.UPLOADING}})),em(e,t).then(({hubFile:n,actingProfile:a,profileCreated:o})=>{e.dispatch((0,b.H$)({hubFiles:[n],src:"createHubFile"})),e.dispatch(q({hubFileId:n.id,fileKey:t.fileKey})),o&&(a.profile_created=o,e.dispatch($.Xw(a))),e.dispatch($.e3(a)),e.dispatch(ec({id:t.fileKey,status:{code:V.QW.SUCCESS}})),t.suggestedCategory&&(0,i.L9)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:t.suggestedCategory},{forwardToDatadog:!0}),null==r||r(n)}).catch(r=>{e.dispatch(y.R.enqueue({message:r.message,type:"hub-file-created-error",error:!0})),e.dispatch(ec({id:t.fileKey,status:{code:V.QW.FAILURE,error:r.message}}))})});async function em(e,t){var r;let n,i;let{fileKey:a,name:o,description:l,categoryId:c,publisherIds:d,tags:u,creatorPolicy:g,thumbnailBuffer:f,viewerMode:y,scalingMode:v,authorOrgId:b,authorTeamId:I,hasCustomUploadedThumbnail:T,validPrototype:w,commentsSetting:S,hideRemixes:C,resolveLastVersionComments:O,agreedToTos:A,isPaid:N,price:L,supportContact:P,carouselMedia:k,customCarouselThumbnail:D}=t,F=(0,s.BZ)().cmty_rdp_redesign_publishing;if(b&&I)throw Error((0,E.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(y===M.Zs.PROTOTYPE&&R.fs0.firstPagePrototypeStatus()!==R.Uqv.VALID)throw Error((0,E.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let U=await (0,x.K)(a,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{var t;let r=Error((null==(t=e.data)?void 0:t.message)||(0,E.t)("community.actions.could_not_connect_to_the_server"));throw(0,p.Jz)(h.k.COMMUNITY,r),r});try{F?i=await e_(U,f,k||[]):n=await eh(U,f)}catch(t){(0,p.Jz)(h.k.COMMUNITY,t);let e=Error((0,E.t)("community.actions.error_uploading_images_e",{error:(0,E.it)(t,null==(r=t.data)?void 0:r.message)}));throw e}let B=function(e,t){if(!t)return -1;let r=t.buffer;return r?e.findIndex(e=>e.sha1===(0,m.Ey)(r)):t.sha1?e.findIndex(e=>e.sha1===t.sha1):-1}((null==i?void 0:i.carousel_images)||[],D),V={file_version_id:U,name:o,description:l,tags:u,category_id:c,creator_policy:g,signature:F?null==i?void 0:i.cover_image.signature:null==n?void 0:n.signature,cover_image_uploaded:F?null==i?void 0:i.cover_image.cover_image_uploaded:null==n?void 0:n.cover_image_uploaded,publisher_ids:d,viewer_mode:y,scaling_mode:v,author_org_id:b,author_team_id:I,has_custom_uploaded_thumbnail:T,valid_prototype:w,comments_setting:S,hide_remixes:C,resolve_last_version_comments:O,agreed_to_tos:A,is_paid:N,price:L,support_contact:P,carousel_images:F?null==i?void 0:i.carousel_images:null,cover_image_carousel_image:F?null==i?void 0:i.carousel_images[B]:null};return _.ZP.post("/api/hub_files",V).then(({data:e})=>{let t=e.meta;return{hubFile:t.hub_file,actingProfile:t.acting_profile,profileCreated:t.profile_created}}).catch(e=>{let t=Error((0,E.it)(e,(0,E.t)("community.actions.could_not_publish_hub_file",{error:e.message})));throw(0,p.Jz)(h.k.COMMUNITY,t),t})}async function eh(e,t){let r=Promise.resolve({cover_image_uploaded:!1,signature:null});if(t&&t.length){let{cover_image_upload_url:n,signature:i,fields:a}=await _.ZP.post("/api/hub_files/upload",{file_version_id:e}).then(({data:e})=>e.meta).catch(e=>{let t=Error((0,E.it)(e,(0,E.t)("community.actions.could_not_connect_to_the_server")));throw(0,p.Jz)(h.k.COMMUNITY,t),t}),o=new FormData;Object.entries(a).forEach(([e,t])=>o.append(e,t)),o.set("content-type","image/png"),o.append("file",new Blob([t]));let l=fetch(n,{method:"POST",body:o});r=l.then(()=>({cover_image_uploaded:!0,signature:i})).catch(e=>{let t=Error((0,E.it)(e,(0,E.t)("community.actions.error_connecting_to_server_to_upload_file_thumbnail")));throw(0,p.Jz)(h.k.COMMUNITY,t),t})}return r}async function e_(e,t,r){let n,i,a,o;let{uploadImages:l,allMedia:s}=(0,P.qh)(r);try{let t=await _.ZP.post("/api/hub_files/upload",{file_version_id:e,images_sha1:l});({cover_image:{cover_image_upload_url:n,signature:i,fields:a},carousel_images:o}=t.data.meta)}catch(t){(0,p.Jz)(h.k.COMMUNITY,t);let e=Error((0,E.it)(t,(0,E.t)("community.actions.could_not_connect_to_the_server")));throw e}let c=o.map(({url:e,fields:t,carousel_position:n})=>{let i=r[n];if(!i||!i.buffer)return;let a=new FormData;return Object.entries(t).forEach(([e,t])=>a.append(e,t)),a.set("content-type","image/png"),a.append("file",new Blob([i.buffer])),fetch(e,{method:"POST",body:a})});if(null==t?void 0:t.length){let e=new FormData;Object.entries(a).forEach(([t,r])=>e.append(t,r)),e.set("content-type","image/png"),e.append("file",new Blob([t])),c.push(fetch(n,{method:"POST",body:e}))}try{return await Promise.all(c),{cover_image:{cover_image_uploaded:null!=t&&!!t.length,signature:i},carousel_images:s}}catch(t){(0,p.Jz)(h.k.COMMUNITY,t);let e=Error((0,E.it)(t,(0,E.t)("community.actions.error_connecting_to_server_to_upload_file_images")));throw e}}let eg=(0,I.u4)(async(e,{payload:t,onSuccess:r})=>{let{hubFileId:n,hideRemixes:a,name:o,description:l,categoryId:s,suggestedCategory:c,creatorPolicy:d,publisherIds:u,tags:m,viewerMode:g,scalingMode:y,commentsSetting:v,price:I,supportContact:T}=t;await _.ZP.put(`/api/hub_files/${n}`,{hide_remixes:a,name:o,description:l,category_id:s,creator_policy:d,publisherIds:u,tags:m,viewer_mode:g,scaling_mode:y,comments_setting:v,price:I,support_contact:T}).then(({data:t})=>{let n=t.meta;e.dispatch((0,b.H$)({hubFiles:[n],src:"updateHubFile"})),c&&(0,i.L9)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:c},{forwardToDatadog:!0}),null==r||r(n)}).catch(t=>{let r=(0,E.it)(t,(0,E.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));e.dispatch(f.l.error(r));let n=Error(`Error updating file ${t}`);throw(0,p.Jz)(h.k.COMMUNITY,n),n})}),ef=(0,I.u4)((e,{hubFileId:t,redirectLink:r})=>{_.ZP.del(`/api/hub_files/${t}`).then(({data:t})=>{let r=t.meta;e.dispatch((0,b.H$)({hubFiles:[r],src:"unpublishHubFile"}))}).then(()=>{r&&o.default.redirect(r)}).catch(e=>{let t=Error(`Error unpublishing file ${e}`);console.error(t),(0,p.Jz)(h.k.COMMUNITY,t)})}),eE=(0,I.wV)("GET_COMMUNITY_PROFILE_HUB_FILES",(e,t,{loadingKey:r})=>{let n=z.D.getProfile({profileId:t});(0,F.m)(n,e,r),n.then(({data:t})=>{let r=t.meta;e.dispatch((0,b.H$)({hubFiles:r,src:"getCommunityProfileHubFiles"}))})},e=>`GET_COMMUNITY_PROFILE_HUB_FILES_${e}`),ey=(0,I.Vh)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:t,viewContext:r},{optimistId:n})=>{_.ZP.post(`/api/hub_files/v2/${t}/copy`).then(({data:l})=>{e.dispatch(I.w2.commit(n));let s=l.meta,c=(0,B.Sb)(s);c=(0,a.BT)(c,{[D.KE.KEY]:D.KE.VALUE}),o.default.redirect(c,u.K1?void 0:"_blank");let d=(0,v.N)(e.getState());(0,i.L9)(A.pR.HUB_FILE_DUPLICATED,{hubFileId:t,figFileKey:s.key,viewContext:r,...d})}).catch(t=>{e.dispatch(I.w2.revert(n)),e.dispatch(y.R.enqueue({message:(0,E.t)("community.actions.unable_to_duplicate",{error:(0,E.it)(t,t.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),ev=(0,I.u4)((e,{hubFileId:t},{loadingKey:r})=>{let n=_.ZP.post(`/api/hub_files/${t}/like`);(0,F.m)(n,e,r),n.catch(t=>{var r;e.dispatch(y.R.enqueue({message:(0,E.t)("community.actions.unable_to_like_this_file_error",{error:(0,E.it)(t,null==(r=t.data)?void 0:r.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let i=e.getState().user,a=i&&(0,L.gU)(i,e.getState().authedProfilesById);(null==i?void 0:i.id)&&a&&(0,d.i0)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${t}-${a.id}`]:{pluginId:null,hubFileId:t,profileId:a.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},n)},e=>`LIKE_HUB_FILE_${e}`),eb=(0,I.wV)("UNLIKE_HUB_FILE",(e,{hubFileId:t,likeId:r},{loadingKey:n})=>{var i;let a=_.ZP.del(`/api/hub_files/${t}/like`);(0,F.m)(a,e,n),a.catch(t=>{e.dispatch(y.R.enqueue({message:(0,E.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,E.it)(t,t.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))});let o=null==(i=e.getState().user)?void 0:i.id;o&&r&&(0,d.i0)().optimisticallyDelete({CommunityHubLike:{[r]:null}},a)},e=>`UNLIKE_HUB_FILE_${e}`),eI=(0,I.u4)((e,{hubFileId:t})=>_.ZP.post(`/api/hub_files/${t}/view`,{hubFileId:t})),eT=(0,I.u4)((e,t)=>{(t===H.bD.FULLSCREEN||t===H.bD.FULLSCREEN_WITH_COMMENTS)&&((0,i.L9)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),t===H.bD.FULLSCREEN_WITH_COMMENTS&&(0,i.L9)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let r={...e.getState().selectedView,fullscreenState:t};t===H.bD.FULLSCREEN&&r.commentThreadId&&delete r.commentThreadId,e.dispatch(S.fv(r))})},95470:(e,t,r)=>{r.d(t,{$v:()=>I,Kv:()=>O,Lp:()=>C,Yh:()=>E,Yi:()=>v,d5:()=>f,dQ:()=>w,h_:()=>b,mN:()=>T,pq:()=>S,rr:()=>y,xy:()=>g});var n=r(237863),i=r(600486),a=r(286206),o=r(31642),l=r(970740),s=r(618215),c=r(644383),d=r(218609),u=r(28786),p=r(661539),m=r(587804),h=r(500946),_=r(244311);let g=s.x,f=s.d,E=(0,d.u4)((e,t)=>{var r;let n=t.orgId||e.getState().currentUserOrgId;if(!n)return;let i=e.getState(),o=(null==(r=i.openFile)?void 0:r.key)??null,l=(0,p.gu)(n,o);e.dispatch(u.DB({key:l})),m.K.getOrgWhitelist({orgId:n,profileId:t.profileId,fileKey:o}).then(({data:t})=>{let r=t.meta;e.dispatch(_.jb({publishedPlugins:r,src:"initializeAllowlistedPlugins"}));let n=r.reduce((e,t)=>(e[t.id]=!0,e),{});e.dispatch(g(n)),e.dispatch(u.dN({key:l}))}).catch(t=>{(0,a.Cp)("plugin allowlist","Unable to fetch the plugin allowlist",{message:t.message}),e.dispatch(u.eD({key:l}))})}),y=(0,d.u4)(async(e,t)=>{var r,n;let i=t.orgId||e.getState().currentUserOrgId;if(!i)return;let o=e.getState(),l=(null==(r=o.openFile)?void 0:r.key)??null,s=(0,p.mz)(i,l);e.dispatch(u.DB({key:s}));try{let r=await h.J.getOrgWhitelist({orgId:i,profileId:t.profileId,fileKey:l}),a=(null==(n=null==r?void 0:r.data)?void 0:n.meta)||[];e.dispatch(_.jb({publishedPlugins:a,src:"initializeAllowlistedWidgets"}));let o=a.reduce((e,t)=>(e[t.id]=!0,e),{});e.dispatch(f(o)),e.dispatch(u.dN({key:s}))}catch(t){(0,a.Cp)("widget allowlist","Unable to fetch the widget allowlist",{message:t.message}),e.dispatch(u.eD({key:s}))}}),v=(0,n.e)("PUT_ALLOWLISTED_PLUGIN"),b=(0,n.e)("DEL_ALLOWLISTED_PLUGIN"),I=(0,d.u4)((e,{orgId:t,pluginId:r,onSuccess:n})=>{t&&r&&o.ZP.post(`/api/plugins/org/${t}/whitelist/${r}`).then(({data:a})=>{e.dispatch(v({pluginId:r})),e.dispatch(_.jb({publishedPlugins:[a.meta],src:"allowlistPlugin"})),n&&n(),(0,i.L9)("Hub Plugin Add to Whitelist",{pluginId:r,orgId:t})}).catch(t=>{let r=(0,l.t)("community.actions.unable_to_add_this_plugin_please_try_again_later");400===t.status&&(r=(0,l.t)("community.actions.unable_to_add_private_plugin")),e.dispatch(c.R.enqueue({error:!0,message:r}))})}),T=(0,d.u4)((e,{orgId:t,pluginId:r,onSuccess:n})=>{t&&r&&o.ZP.del(`/api/plugins/org/${t}/whitelist/${r}`).then(({data:a})=>{e.dispatch(b({pluginId:r})),e.dispatch(_.jb({publishedPlugins:[a.meta],src:"unallowlistPlugin"})),n&&n(),(0,i.L9)("Hub Plugin Remove from Whitelist",{pluginId:r,orgId:t})}).catch(()=>{e.dispatch(c.R.enqueue({error:!0,message:(0,l.t)("community.actions.unable_to_remove_this_plugin_please_try_again_later")}))})}),w=(0,n.e)("PUT_ALLOWLISTED_WIDGET"),S=(0,n.e)("DEL_ALLOWLISTED_WIDGET"),C=(0,d.u4)((e,{orgId:t,pluginId:r,onSuccess:n})=>{t&&r&&o.ZP.post(`/api/widgets/org/${t}/whitelist/${r}`).then(({data:a})=>{e.dispatch(w({pluginId:r})),e.dispatch(_.jb({publishedPlugins:[a.meta],src:"allowlistWidget"})),n&&n(),(0,i.L9)("Hub Widget Add to Whitelist",{pluginId:r,orgId:t})}).catch(t=>{let r=(0,l.t)("community.actions.unable_to_add_this_widget_please_try_again_later");400===t.status&&(r=(0,l.t)("community.actions.unable_to_add_private_widget")),e.dispatch(c.R.enqueue({error:!0,message:r}))})}),O=(0,d.u4)((e,{orgId:t,pluginId:r,onSuccess:n})=>{t&&r&&o.ZP.del(`/api/widgets/org/${t}/whitelist/${r}`).then(({data:a})=>{e.dispatch(S({pluginId:r})),e.dispatch(_.jb({publishedPlugins:[a.meta],src:"unallowlistWidget"})),n&&n(),(0,i.L9)("Hub Widget Remove from Whitelist",{pluginId:r,orgId:t})}).catch(()=>{e.dispatch(c.R.enqueue({error:!0,message:(0,l.t)("community.actions.unable_to_remove_this_widget_please_try_again_later")}))})})},819190:(e,t,r)=>{r.d(t,{Am:()=>x,Pi:()=>F,RG:()=>M,V$:()=>L,kA:()=>U,pN:()=>R,w4:()=>P});var n=r(237863),i=r(600486),a=r(768358),o=r(313653),l=r(970740),s=r(644383),c=r(218609),d=r(307425),u=r(158774),p=r(360530),m=r(408512),h=r(155838),_=r(733609),g=r(339531),f=r(179791),E=r(470283),y=r(390253),v=r(646472),b=r(661539),I=r(938110),T=r(154938),w=r(410224),S=r(600405),C=r(255267),O=r(592035),A=r(238809),N=r(244311);let L=(0,n.e)("PLUGIN_INITIALIZE_LOCAL"),P=(0,n.e)("PLUGIN_UPDATE_LOCAL"),R=(0,n.e)("PLUGIN_DELETE_LOCAL"),k=!1,D=(0,h.D)(),M=(0,c.u4)(async e=>{if(D){if(D.isCompatibleWith({desktopVersion:59})){let t=await D.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},r=Object.keys(t).map(e=>parseInt(e)),n=await Promise.all(r.map(e=>(0,g.vI)(e,{resourceType:"unknown"}))),i={};n.forEach(e=>{e.cachedContainsWidget=!!t[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=t[e.localFileId].lastKnownPluginId||"",i[e.localFileId]=e}),e.dispatch(L(i))}else if(D.isCompatibleWith({desktopVersion:58})){let t=await D.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),r=Object.keys(t).map(e=>parseInt(e)),n=await Promise.all(r.map(e=>(0,g.vI)(e,{resourceType:"unknown"}))),i={};n.forEach(e=>{e.cachedContainsWidget=!!t[e.localFileId],i[e.localFileId]=e}),e.dispatch(L(i))}else{let t=await D.getAllLocalFileExtensionIds(),r=await Promise.all(t.map(e=>(0,g.vI)(e,{resourceType:"unknown"}))),n={};r.forEach(e=>{n[e.localFileId]=e}),e.dispatch(L(n))}if(!k){k=!0,D.registerManifestChangeObserver(t=>{var r;if("added"===t.type||"changed"===t.type){let n;let i=t.id,a=(0,g.kp)(i,t.localLoadResult,{resourceType:"unknown"}),l=null==(r=e.getState().localPlugins[i])?void 0:r.plugin_id;e.dispatch(P(a));let s=e.getState(),{publishingPlugins:c,localPlugins:d,publishedPlugins:u,publishedWidgets:p,currentUserOrgId:m,authedProfilesById:h,modalShown:f}=s,E=c[i];a.plugin_id!==l&&(null==f?void 0:f.type)!==S.p.type&&e.dispatch((0,N.Dk)({id:i}));try{n=(0,g._x)({...(0,_.getPermissionsState)(s),currentUserOrgId:m,localPlugins:d,publishedPlugins:u,publishedWidgets:p,authedProfilesById:h},i)}catch(t){e.dispatch(o.l.error(t.message));return}E&&E.metadata&&(0,g.iB)(E.metadata)&&!a.error&&e.dispatch((0,N.Xe)({id:i,metadata:n}))}else"removed"===t.type&&e.dispatch(R(t.id))});let t=(0,a.D)(t=>{var r,n,i,a;if("added"===t.type||"changed"===t.type){let o=null==(n=null==(r=e.getState().mirror)?void 0:r.selectionProperties)?void 0:n.selectedWidgetInfo;o&&o.pluginID&&m.a.mountWidget(o.pluginID,o.widgetID,"hot-reloading re-render");let l=null==(i=(0,f.BW)())?void 0:i.plugin,s=null==(a=(0,f.BW)())?void 0:a.triggeredFrom,c=e.getState();"manifestFileId"in t&&l&&(0,b.rV)(l)&&c.mirror.appModel.hotReloadPluginDev&&t.manifestFileId===l.localFileId&&(0,E.ho)()&&(async()=>{await (0,y.Cq)(),"codegen"!==s&&(0,E.M_)({newTriggeredFrom:null}),(0,T.f)()})()}});D.registerCodeChangeObserver(t),D.registerManifestChangeObserver(t),D.registerUiChangeObserver(t)}}}),F=(0,c.u4)(async(e,{localFileId:t,resourceType:r})=>{let n=await (0,g.vI)(t,{resourceType:r});e.dispatch(P(n))}),x=(0,c.u4)((e,t)=>{void 0!=t&&(D&&D.removeLocalFileExtension(t),e.dispatch(R(t)))}),U=(0,c.u4)(async(e,{resourceType:t,localFileIdToRemove:r})=>{let n=null;if(!D)return;let{added:a,existed:o}=await D.createMultipleNewLocalFileExtensions({title:"plugin"===t?(0,l.t)("community.actions.pick_plugin_manifest_file"):(0,l.t)("community.actions.pick_widget_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0);if(null!=(n=a&&a[0]||o&&o[0]))try{let a=await (0,g.WC)(n,{resourceType:t,isPublishing:!1});if((0,i.L9)("Added new plugin",{how:"loaded",pluginId:a.id,version:a.api,isWidget:"widget"===t,productType:"figma"===(0,g.Fl)()?"design":"whiteboard",isVsCode:(0,p.I)()}),e.dispatch(F({localFileId:n,resourceType:t})),e.dispatch(s.R.enqueue({message:a.name?(0,l.t)("community.actions.manifest_name_has_been_imported",{manifestName:a.name}):(0,l.t)("community.actions.plugin_has_been_imported")})),u.Gr.dispatch(A.KD({initialX:0,initialY:0,initialTab:"figjam"===(0,g.Fl)()?"widget"===t?C.E.WIDGETS:C.E.PLUGINS:void 0,initialFdResourceTab:"figma"===(0,g.Fl)()?"widget"===t?O.P.WIDGET:O.P.PLUGIN:void 0,initialFdView:"figma"===(0,g.Fl)()?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===(0,g.Fl)()})),r){let t=e.getState().localPlugins[r],n=(null==t?void 0:t.lastKnownPluginId)??t.plugin_id??t.manifest.id;n!==a.id&&n||e.dispatch(x(r))}let o=a.editorType;null==o||o.forEach(r=>{let n="figjam"===r?I.xQ.FigJam:I.xQ.Design;t===v.Xh.PLUGIN?e.dispatch(d.zD({storeInRecentsKey:n,id:a.id||"",version:"",isDevelopment:!0,currentUserId:(0,w.Pb)()})):t===v.Xh.WIDGET&&e.dispatch(d._o({storeInRecentsKey:n,id:a.id||"",version:"",isDevelopment:!0,currentUserId:(0,w.Pb)()}))})}catch(t){e.dispatch(s.R.enqueue({message:t.message,error:!0}))}})},244311:(e,t,r)=>{r.d(t,{A9:()=>ei,Ax:()=>x,D5:()=>j,Dk:()=>et,Fo:()=>en,Fs:()=>ea,IR:()=>$,Lk:()=>M,Un:()=>W,Vm:()=>h.Vm,XE:()=>h.XE,Xe:()=>Q,Y:()=>G,Z6:()=>H,bv:()=>J,cD:()=>es,eN:()=>el,ge:()=>Z,hK:()=>z,jb:()=>h.jb,lG:()=>ec,pF:()=>Y,pH:()=>ee,qQ:()=>V,qd:()=>eo,rG:()=>er,un:()=>U,wt:()=>D,yM:()=>B,yu:()=>h.yu,zE:()=>F,zQ:()=>h.zQ});var n=r(237863),i=r(600486),a=r(269658),o=r(716250),l=r(259574),s=r(286206),c=r(117986),d=r(31642),u=r(313653),p=r(970740),m=r(644383),h=r(812796),_=r(369874),g=r(218609),f=r(84315),E=r(851665),y=r(28786),v=r(54055),b=r(496478),I=r(795153),T=r(733609),w=r(939179),S=r(339531),C=r(966922),O=r(224190),A=r(646472),N=r(465883),L=r(587804),P=r(500946),R=r(45741),k=r(159774);let D=(0,n.e)("PLUGIN_REPLACE_FEATURED"),M=(0,g.u4)((e,t,{loadingKey:r})=>{if(!e.getState().user)return;let n=L.K.getPlugins(),i=P.J.getWidgets();n.then(({data:t})=>{let r=t.meta;e.dispatch((0,h.jb)({publishedPlugins:r,src:"initializeUserPublishedPlugins"}))}),i.then(({data:t})=>{let r=t.meta;e.dispatch((0,h.jb)({publishedPlugins:r,src:"initializeUserPublishedWidgets"}))}),(0,C.m)(i,e,r)}),F=I.t1.Query({fetch:async e=>{let t=await L.K.getUnpublishedPlugins();return t.data.meta},output:({data:e})=>{let t={};if(e)for(let r of e)t[r.id]=r;return t}}),x=I.t1.Query({fetch:async e=>{let t=await P.J.getUnpublishedWidgets();return t.data.meta},output:({data:e})=>{let t={};if(e)for(let r of e)t[r.id]=r;return t}}),U=(0,g.u4)((e,{widgetIDToVersions:t})=>{let{installedWidgetVersions:r,publishedCanvasWidgetVersions:n,currentUserOrgId:i}=e.getState();for(let[e,a]of Object.entries(t))a.forEach(a=>{var o,l;let s=null==(o=n[e])?void 0:o[a],c=(null==(l=r.widgets[e])?void 0:l.id)===a?r.widgets[e]:null,d=s||c;d&&new Set(t[e]).forEach(e=>{w.W.getAndCache({...d,id:e},i??void 0)})})}),B=(0,g.u4)(async(e,{resourceId:t,resourceType:r})=>{let n=r===A.Xh.WIDGET?P.J.getWidgets({id:t}):L.K.getPlugins({id:t}),{data:i}=await n,a=i.meta.find(e=>e.id===t);a&&e.dispatch((0,h.jb)({publishedPlugins:[a],src:"getPublishedResource"}))}),V=(0,n.e)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),G=(0,n.e)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function H(e,t,r){var n;let i=await W({[e]:[t]},r);return null==(n=i[e])?void 0:n[t]}async function W(e,t){var r,n;let i=a.V.getState(),o=null==(r=i.openFile)?void 0:r.key,l=await d.ZP.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:t,file_key:o}),s=(null==(n=null==l?void 0:l.data)?void 0:n.meta)||{};return a.V.dispatch(V(s)),a.V.dispatch(G(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,Object.fromEntries(t.map(e=>[e,!0]))])))),s}let K=(0,g.u4)(async(e,{widgetIds:t})=>{var r;let{currentUserOrgId:n,publishedWidgets:i}=e.getState(),o=t.filter(e=>!i[e]);if(o.length)try{let e=await d.ZP.post("/api/widgets/batch",{ids:o,org_id:n}),t=(null==(r=e.data)?void 0:r.meta)??[];a.V.dispatch((0,h.jb)({publishedPlugins:t,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),z=(0,g.u4)(async(e,{widgetIDAndVersions:t})=>{let{currentUserOrgId:r,installedWidgetVersions:n,publishedCanvasWidgetVersions:i}=e.getState(),a=[],o={};t.forEach(({widgetID:e,widgetVersionID:t})=>{n.widgets[e]&&n.widgets[e].version===t&&i[e]&&i[e][t]||(o[e]?o[e].includes(t)||o[e].push(t):(a.push(e),o[e]=[t]))}),0!==a.length&&(await W(o,r),e.dispatch(U({widgetIDToVersions:o})),e.dispatch(K({widgetIds:Object.keys(o)})))}),Z=(0,g.wV)("GET_COMMUNITY_PROFILE_PLUGINS",(e,t,{loadingKey:r})=>{let n=L.K.getProfile({profileId:t.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,k.Mn)(t.profileId);return(0,C.m)(n,e,r),n.then(async({data:t})=>{let r=[...await i,...t.meta];return e.dispatch((0,h.jb)({publishedPlugins:r,src:"getCommunityProfilePlugins"})),r})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),Y=(0,g.wV)("GET_COMMUNITY_PROFILE_WIDGETS",(e,t,{loadingKey:r})=>{let n=P.J.getProfile({profileId:t.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),i=(0,k.I6)(t.profileId);return(0,C.m)(n,e,r),n.then(async({data:t})=>{let r=[...await i,...t.meta];return e.dispatch((0,h.jb)({publishedPlugins:r,src:"getCommunityProfileWidgets"})),r})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`),j=(0,g.wV)("GET_ORG_PUBLISHED_PLUGINS",(e,t,{loadingKey:r})=>{let n=L.K.getOrg({orgId:t});return(0,C.m)(n,e,r),n.then(({data:t})=>{let r=t.meta;return e.dispatch((0,h.jb)({publishedPlugins:r,src:"getOrgPublishedPlugins"})),r})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),$=(0,g.wV)("GET_ORG_PUBLISHED_WIDGETS",async(e,t,{loadingKey:r})=>{var n;try{e.dispatch(y.DB({key:r}));let i=await P.J.getOrg({orgId:t}),a=(null==(n=null==i?void 0:i.data)?void 0:n.meta)||[];return e.dispatch((0,h.jb)({publishedPlugins:a,src:"getOrgPublishedWidgets"})),e.dispatch(y.dN({key:r})),a}catch(t){return u.l.flash(t.message||(0,p.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(y.eD({key:r})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function q(e,t,r){if(null===e.current_plugin_version_id||!e.id)throw Error((0,p.t)("community.actions.resource_is_invalid"));let n=0;t.iconBlob&&(n=(0,S._B)(t.iconBlob));let a=0;t.coverBlob&&(a=(0,S.KB)(t.coverBlob));let l=(0,o.BZ)().cmty_rdp_redesign_publishing,u=t.carouselMedia,{uploadImages:m,uploadVideos:h,allMedia:_}=(0,b.qh)(u),g=(await d.ZP.post(`/api/${(0,v.sf)(e,{pluralized:!0})}/${e.id}/images/upload`,l?{images_sha1:m}:{})).data.meta,f=Promise.resolve(!1),E=t.iconBlob;void 0!==E&&(f=(0,b.rn)(E).then(e=>d.ZP.crossOriginPut(g.icon_path,e,{raw:!0,headers:{...d.ZP.defaults.headers,"Content-Type":E.type}})).then(()=>!0).catch(t=>{let r=(0,p.it)(t,(0,p.t)("community.actions.could_not_connect_to_the_server")),n=Error((0,A._4)(e)?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:r}));throw(0,s.Jz)(c.k.COMMUNITY,n),n}));let y=Promise.resolve(!1),I=t.coverBlob;void 0!==I&&(y=(0,b.rn)(I).then(e=>d.ZP.crossOriginPut(g.cover_image_path,e,{raw:!0,headers:{...d.ZP.defaults.headers,"Content-Type":I.type}})).then(()=>!0).catch(t=>{var r,n;let i=Error((0,A._4)(e)?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,p.it)(t,(null==(r=t.data)?void 0:r.message)||"unknown error")}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,p.it)(t,(null==(n=t.data)?void 0:n.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,i),i}));let{snapshotBlob:T}=t,w=Promise.resolve(!1);void 0!==T&&(w=(0,b.rn)(T).then(e=>d.ZP.crossOriginPut(g.snapshot_path,e,{raw:!0,headers:{...d.ZP.defaults.headers,"Content-Type":T.type}})).then(()=>!0).catch(e=>{var t;let r=Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));let C=l?(0,b.ed)(g.carousel_images,u):[],[N,L,P]=await Promise.all([f,y,w,C]);if(l){let t=h.map(t=>(0,O.rN)((0,v.sf)(e,{pluralized:!0}),e.id,{sha1:t.sha1,bytes:t.bytes},t.video_thumbnail_buffer,t.video_thumbnail_sha1).then(e=>{_.push({carousel_position:t.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{var t;let r=Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));await Promise.all(t)}let{data:R}=await d.ZP.put(`/api/${(0,v.sf)(e,{pluralized:!0})}/${e.id}/versions/${t.id}`,{icon_uploaded:N,cover_image_uploaded:L,snapshot_uploaded:P,carousel_media:_,name:t.name,description:t.description,tagline:t.tagline,creator_policy:t.creatorPolicy,release_notes:t.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:g.image_upload_nonce,playground_fig_file_key:t.playground_fig_file_key,playground_file_publish_type:r}).catch(e=>{var t;let r=Error((0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}),k=R.meta;k.plugin.redirect_thumbnail_url=g.cover_image_path.split("?")[0];let D=k.plugin;if(D.id!==e.id)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,i.L9)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:n,coverFileSize:a}),{publishedPlugin:D,profile:k.profile}}async function X(e,t,r,n,a,l,u,m,h,_){var g;let f;if(!e)throw Error((0,p.t)("community.actions.plugin_id_is_invalid"));let[E,y]=await Promise.all([(0,S.WC)(t,{resourceType:(0,v.dE)(h),isPublishing:!0}),(0,S.eu)(t)]),I=(0,S.BR)(y),T=0;r.iconBlob&&(T=(0,S._B)(r.iconBlob));let w=0;r.coverBlob&&(w=(0,S.KB)(r.coverBlob));let C=l.tokens.map(e=>e.content),A=(0,o.BZ)().cmty_rdp_redesign_publishing,N=r.carouselMedia,{uploadImages:L,uploadVideos:P,allMedia:R}=(0,b.qh)(N),k={manifest:E,release_notes:r.releaseNotes,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,tags:C,category_id:a,images_sha1:A?L:void 0};f=h?d.ZP.post(`/api/widgets/${e}/upload`,k):d.ZP.post(`/api/plugins/${e}/upload`,k);let{codeUploadUrl:D,iconUploadUrl:M,coverImageUploadUrl:F,snapshotUploadUrl:x,signature:U,versionId:B,imageUploadNonce:V,carouselImageUrls:G}=await f.then(({data:e})=>({codeUploadUrl:e.meta.code_upload_url,iconUploadUrl:e.meta.icon_upload_url,coverImageUploadUrl:e.meta.cover_image_upload_url,snapshotUploadUrl:e.meta.snapshot_upload_url,signature:e.meta.signature,versionId:e.meta.version_id,imageUploadNonce:e.meta.image_upload_nonce,carouselImageUrls:e.meta.carousel_images})).catch(e=>{let t=Error((0,p.it)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")));throw(0,s.Jz)(c.k.COMMUNITY,t),t}),H=e=>{let t=e.data;if(!t||"string"!=typeof t)return;let r=new DOMParser,n=r.parseFromString(t,"text/xml"),i=n.getElementsByTagName("Code");if(!i||!i[0])return;let a=i[0].textContent;if("EntityTooLarge"===a)return(0,p.t)("community.actions.file_too_large")},W=Promise.resolve(!1);y&&(W=(e=>{if(e.fields&&e.code_path){let{fields:t,code_path:r}=e,n=new FormData;Object.entries(t).forEach(([e,t])=>n.append(e,t)),n.set("Content-Type","text/javascript"),n.append("file",y);let i=d.ZP.crossOriginPost(r,n,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}});return i}return"string"==typeof e?d.ZP.crossOriginPut(D,y,{headers:{...d.ZP.defaults.headers,"Content-Type":""}}):Promise.reject(Error("Invalid presigned_url"))})(D).then(()=>!0).catch(e=>{let t=H(e)??(0,p.it)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")),r=Error(h?(0,p.t)("community.actions.error_uploading_widget_code_error",{error:t}):(0,p.t)("community.actions.error_uploading_plugin_code_error",{error:t}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));let K=(e,t,r)=>{if(e.fields&&e.image_path){let{fields:r,image_path:n}=e,i=new FormData;Object.entries(r).forEach(([e,t])=>i.append(e,t)),i.set("Content-Type",t.type),i.append("file",t);let a=d.ZP.crossOriginPost(n,i,{raw:!0,headers:{"Content-Type":t.type}});return a}return"string"==typeof e?d.ZP.crossOriginPut(e,r,{raw:!0,headers:{...d.ZP.defaults.headers,"Content-Type":t.type}}):Promise.reject(Error("Invalid presigned_url"))},z=Promise.resolve(!1),Z=r.iconBlob;null!=Z&&(z=(0,b.rn)(Z).then(e=>K(M,Z,e)).then(()=>!0).catch(e=>{var t;let r=H(e)??(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error"),n=Error(h?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:r}));throw(0,s.Jz)(c.k.COMMUNITY,n),n}));let Y=Promise.resolve(!1),j=r.coverBlob;null!=j&&(Y=(0,b.rn)(j).then(e=>K(F,j,e)).then(()=>!0).catch(e=>{let t=H(e)??(0,p.it)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")),r=Error(h?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:t}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:t}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));let{snapshotBlob:$}=r,q=Promise.resolve(!1);null!=$&&(q=(0,b.rn)($).then(e=>K(x,$,e)).then(()=>!0).catch(e=>{var t;let r=Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:H(e)??(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));let X=A?(0,b.ed)(G,N):[],[J,Q,ee,et]=await Promise.all([W,z,Y,q,X]);if(A){let t=P.map(t=>(0,O.rN)(h?"widgets":"plugins",e,{sha1:t.sha1,bytes:t.bytes},t.video_thumbnail_buffer,t.video_thumbnail_sha1).then(e=>{R.push({carousel_position:t.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{var t;let r=Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,s.Jz)(c.k.COMMUNITY,r),r}));await Promise.all(t)}let{data:er}=await d.ZP.put(`/api/${(0,v.dE)(!!h,{pluralized:!0})}/${e}/versions/${B}`,{icon_uploaded:Q,cover_image_uploaded:ee,snapshot_uploaded:et,carousel_media:R,code_uploaded:J,comments_setting:n,category_id:a,signature:U,image_upload_nonce:V,agreed_to_tos:u,org_id:m,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:_}).catch(e=>{var t,r;let n=Error(h?(0,p.t)("community.actions.error_finalizing_widget_error",{error:(0,p.it)(e,(null==(t=e.data)?void 0:t.message)||"")}):(0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.it)(e,(null==(r=e.data)?void 0:r.message)||"")}));throw(0,s.Jz)(c.k.COMMUNITY,n),n}),en=er.meta,ei=en.plugin;if(ei.id!==e)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,i.L9)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!E.ui,apiVersion:E.api,codeLength:I,iconFileSize:T,coverFileSize:w,isWidget:h,editorType:null==(g=E.editorType)?void 0:g.sort().join(", ")}),{publishedPlugin:ei,profile:en.profile}}(0,g.wV)("GET_PUBLIC_PROFILE_PLUGINS",(e,{handle:t,orgId:r},{loadingKey:n})=>{let i=L.K.getProfile({profileId:t,currentOrgId:r||void 0});(0,C.m)(i,e,n),i.then(({data:t})=>{let r=t.meta;e.dispatch((0,h.jb)({publishedPlugins:r,src:"getPublicProfilePlugins"}))})},({handle:e})=>`GET_PUBLIC_PROFILE_PLUGINS_${e}`);let J=(0,f.oM)("PLUGIN"),{updateMetadata:Q,updateStatus:ee,clearMetadataAndStatus:et,clearMetadata:er}=J,en=(0,g.u4)(async(e,t)=>{let{pluginVersion:r,localFileId:n,pluginId:i,commentsSetting:a,categoryId:d,callback:u,agreedToTos:_,orgId:g,isWidget:f,playgroundFilePublishType:y,tags:v}=t;e.dispatch(ee({id:n,status:{code:N.QW.UPLOADING}}));try{let{publishedPlugin:t,profile:o}=await X(i,n,r,a,d,v,_,g,f,y);e.dispatch((0,h.jb)({publishedPlugins:[t],src:"publishPluginVersion"})),o&&(e.dispatch(E.Xw(o)),e.dispatch(E.e3(o))),e.dispatch(ee({id:n,status:{code:N.QW.SUCCESS}})),e.dispatch(er({id:n})),u()}catch(i){e.dispatch(ee({id:n,status:{code:N.QW.FAILURE,error:i.message}}));let t=(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.it)(i,i.message)});i instanceof l.TI&&(0,o.BZ)().ds_network_status_ui?(0,R.kK)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):i.message.includes("invalid word")||e.dispatch(m.R.enqueue({message:t,error:!0}));let r=Error(t);throw(0,s.Jz)(c.k.COMMUNITY,r),r}}),ei=(0,g.u4)(async(e,t)=>{let{resource:r,pluginVersion:n,callback:i,playgroundFilePublishType:a,localFileIdOrPluginId:d}=t;try{e.dispatch(ee({id:d,status:{code:N.QW.UPLOADING}}));let{profile:t,publishedPlugin:o}=await q(r,n,a);e.dispatch((0,h.jb)({publishedPlugins:[o],src:"updatePublishedPluginRole"})),t&&e.dispatch(E.e3(t)),e.dispatch(ee({id:d,status:{code:N.QW.SUCCESS}})),i()}catch(n){let t=(0,p.it)(n,n.message);n instanceof l.TI&&(0,o.BZ)().ds_network_status_ui?(0,R.kK)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(m.R.enqueue({message:t,error:!0})),e.dispatch(ee({id:d,status:{code:N.QW.FAILURE,error:t}}));let r=Error(`Failed plugin patchVersion: ${n.message}`);throw(0,s.Jz)(c.k.COMMUNITY,r),r}}),ea=(0,g.u4)(async(e,{pluginId:t,role:r,agreedToTos:n,isWidget:a})=>{let o;let l={org_id:r.org?r.org.id:void 0,is_public:r.is_public,agreed_to_tos:n};o=a?d.ZP.put(`/api/widgets/${t}/roles`,l):d.ZP.put(`/api/plugins/${t}/roles`,l),await o.then(({data:r})=>{let n=r.meta;(0,i.L9)("Hub Plugin Publish Role",{pluginId:t,toPublic:n.roles.is_public,toOrg:!!n.roles.org,needApproval:(0,_.k4)(n),isWidget:a}),e.dispatch((0,h.jb)({publishedPlugins:[n],src:"updatePublishedPluginRole"}))}).catch(t=>{var r;e.dispatch(m.R.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.it)(t,null==(r=t.data)?void 0:r.message)}),error:!0})),(0,s.Jz)(c.k.COMMUNITY,Error(`Failed updatePublishedPluginRole: ${t}`))})}),eo=(0,g.u4)(async(e,t)=>{let r;if(t.authorOrgId&&t.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:n,pluginId:i}=t,a={tags:t.tags,support_contact:t.supportContact,author_org_id:t.authorOrgId,author_team_id:t.authorTeamId,publisher_ids:t.publisherIds,hide_related_content_by_others:t.hideRelatedContentByOthers,agreed_to_tos:t.agreedToTos,is_paid:t.isPaid,is_subscription:t.isSubscription,price:t.price,has_freemium_code:t.hasFreemiumCode,category_id:t.categoryId,is_public:t.isPublic,annual_discount_percentage:t.annualDiscount,is_annual_discount_active:t.isAnnualDiscountActive};r=n?d.ZP.put(`/api/widgets/${i}`,a):d.ZP.put(`/api/plugins/${i}`,a),await r.then(({data:r})=>{var n;let i=r.meta;e.dispatch((0,h.jb)({publishedPlugins:[i],src:"updatePublishedPlugin"})),null==(n=t.onSuccess)||n.call(t)}).catch(t=>{var r;e.dispatch(m.R.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.it)(t,null==(r=t.data)?void 0:r.message)}),error:!0})),(0,s.Jz)(c.k.COMMUNITY,Error(`Failed updatePublishedPlugin: ${t}`))})}),el=(0,g.u4)((e,{resource:t})=>{d.ZP.del(`/api/${(0,v.sf)(t,{pluralized:!0})}/${t.id}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,h.jb)({publishedPlugins:[n],src:"unpublishPublishedPlugin"})),(0,i.L9)("Hub Unpublish Plugin",{pluginId:t.id,...(0,S.NT)(t)})}).catch(r=>{var n,i;e.dispatch(m.R.enqueue({message:(0,A._4)(t)?(0,p.t)("community.actions.could_not_publish_widget_error",{error:(0,p.it)(r,null==(n=r.data)?void 0:n.message)}):(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.it)(r,null==(i=r.data)?void 0:i.message)}),error:!0})),(0,s.Jz)(c.k.COMMUNITY,Error(`Failed unpublishPublishedPlugin: ${r}`))})}),es=(0,g.wV)("GET_PLUGIN_VERSIONS",(e,{id:t,resourceType:r},{loadingKey:n})=>{let i=t=>e.dispatch((0,h.jb)({publishedPlugins:[t],src:"getResourceVersions",overrideInstallStatus:!0})),a=r===A.Xh.WIDGET?P.J.getVersions({widgetId:t}):L.K.getVersions({pluginId:t});(0,C.m)(a,e,n),a.then(({data:e})=>{let t=e.meta.plugin;i(t)}).catch(e=>{var n;console.log(`Versions of ${r} with id ${t} cannot be fetched at this time:`,null==(n=e.data)?void 0:n.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`),ec=(0,g.u4)(async(e,t)=>{let{role:r,userId:n,resource:i}=t;try{let t;t=i.is_widget?await d.ZP.put(`/api/widgets/${i.id}/publishers/${n}`,{role:r}):await d.ZP.put(`/api/plugins/${i.id}/publishers/${n}`,{role:r});let a=t.data.meta.plugin,o=e.getState().user;r===N.W7.NONE&&n===(null==o?void 0:o.id)&&(a.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,h.jb)({publishedPlugins:[a],src:"setPluginPublisherRole"}));let l=e.getState(),{publishingPlugins:s,localPlugins:c,publishedPlugins:u,publishedWidgets:p,currentUserOrgId:m,authedProfilesById:_}=l,g=Object.values(c).find(e=>e.plugin_id===i.id),f=(null==g?void 0:g.localFileId)??i.id,E=(0,S._x)({...(0,T.getPermissionsState)(l),currentUserOrgId:m,localPlugins:c,publishedPlugins:u,publishedWidgets:p,authedProfilesById:_},null==g?void 0:g.localFileId),y=s[f],v={...y.metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(Q({id:f,metadata:v}))}catch(r){e.dispatch(m.R.enqueue({message:(0,p.it)(r,r.message),error:!0}));let t=Error(r.message);throw(0,s.Jz)(c.k.COMMUNITY,t),t}})},883906:(e,t,r)=>{r.d(t,{JE:()=>ei,O6:()=>ec,hk:()=>el,lD:()=>eo,wD:()=>es,zu:()=>ea});var n=r(600486),i=r(716250),a=r(337167),o=r(163164),l=r(571529),s=r(286206),c=r(117986),d=r(36940),u=r(970740),p=r(644383),m=r(299370),h=r(680809),_=r(968034),g=r(490516),f=r(126367),E=r(648183),y=r(255215),v=r(218609),b=r(244311),I=r(721127),T=r(54055),w=r(373637),S=r(557274),C=r(686096),O=r(267765),A=r(961215),N=r(34258),L=r(733609),P=r(339531),R=r(164179),k=r(758622),D=r(242030),M=r(3342),F=r(646472),x=r(257817),U=r(278287),B=r(661539),V=r(938110),G=r(410224),H=r(220949),W=r(65002),K=r(983251),z=r(505468),Z=r(878954),Y=r(255267),j=r(592035),$=r(398081),q=r(307425),X=r(238809),J=r(905528);let Q=r(221909),ee=r(268671),et=()=>async e=>{let t="org-admin-team-creation";e(p.R.enqueue({message:(0,u.t)("resources_tab.create_team_modal.team_creation_loading"),type:t,icon:m.B4.SPINNER}));try{let r=(await W.Q.createStarterTeam()).data.meta;return e(p.R.dequeue({matchType:t})),e(I.eI()),r}catch(r){return e(p.R.dequeue({matchType:t})),e(I.eI()),e(p.R.enqueue({message:(0,u.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},er=(e,t,r)=>n=>{n(I.K4({type:z.lN,data:{confirmationTitle:(0,u.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,u.t)("resources_tab.create_team_modal.content",{orgName:t}),confirmText:(0,u.t)("general.continue"),onConfirm:()=>{n(et()).then(r)},dispatch:n,hideCancel:!0}}))},en=(0,v.u4)(async(e,t)=>{let{workspaces:r,plans:n}=t,i=e.getState(),{authedUsers:a,orgById:o}=i,l=r.map(e=>({...e,workspaceName:(0,C.CV)(i,e),user:a.byId[e.userId]})),s=await Promise.all(l.map(async e=>{let r=e.orgId&&o[e.orgId],a=!0,l=!0;if(r&&(a=await (0,w.MK)(t.resource,r),l=(0,w.v5)(t.resource,r)),(0,P.hs)(t.resource)&&!(0,L.canMemberOrg)(e.orgId,i,e.userId))return;let s=(0,g.K)(e,t.editorType,i,n);return s.publicPluginsOrWidgetDisabled=!a,s.extensionRequestsAllowed=l,s})),c=[];if(s.forEach(e=>{void 0!==e&&c.push(e)}),c.length<=1){let e=c.length?c[0]:void 0;t.onSelectWorkspace(e);return}e.dispatch(I.K4({type:h.Q,data:{payload:{extension:t.resource,workspaces:c,onSelectWorkspace:t.onSelectWorkspace}}}))}),ei=(0,v.u4)((e,t)=>{if(l.K1){window.location.href="/login";return}let r=t.isWidget?(0,u.t)("community.logged_out.sign_up_modal_widget_header"):(0,u.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(d.Y.init({origin:"plugin_try_signed_out"})),e.dispatch(I.K4({type:Z.I,data:{headerText:r,icon:t.isWidget?ee:Q,dispatch:e.dispatch,redirectPath:t.redirectPath}}))}),ea=(0,v.u4)(async(e,t)=>{var r,i,o;let l=e.getState().currentUserOrgId,{tryPluginId:s,tryPluginName:c,tryPluginVersionId:d,isWidget:u,fullscreenEditorType:p,isPlaygroundFile:m,fileKey:h,tryPluginParams:_}=t;(0,n.L9)("extension_tried_in_fullscreen",{tryPluginId:s,tryPluginName:c,tryPluginVersionId:d,isWidget:u,fullscreenEditorType:p,isPlaygroundFile:m,fileKey:h,tryPluginParams:JSON.stringify(_)});let g=u&&!m,v={initialX:0,initialY:0};if(_&&(0,k.J)(s)){let t=await (0,q.vS)(e,{resourceType:F.Xh.PLUGIN,resourceIds:[s]}),r=t[s];R.Q.instance.enqueue({runPluginArgs:{plugin:r,command:"",queryMode:!1,triggeredFrom:"try-plugin-params",openFileKey:h??(0,G.sc)()??"",isWidget:!1,runMode:"default"},mode:"run-forever"})}else if(g)await b.Un({[s]:[d]},l),(0,N.A)({pluginID:s,widgetName:c,pluginVersionID:d});else if(m){if("whiteboard"===p){(0,H.m_)({id:K.ds});let t=u?Y.E.WIDGETS:Y.E.PLUGINS,r={id:s,type:u?M.P.WIDGETS:M.P.PLUGINS};e.dispatch(X.xN({initialTab:t,previewResource:r}))}else if("design"===p){(0,H.m_)({id:K.ds});let t=u?j.P.WIDGET:j.P.PLUGIN,r={id:s,type:u?j.P.WIDGET:j.P.PLUGIN};e.dispatch(X.xN({initialFdResourceTab:t,fdPreviewResource:r}))}else if("dev_handoff"===p){let t=await (0,q.vS)(e,{resourceType:F.Xh.PLUGIN,resourceIds:[s]}),n=t[s];if((null==(r=n.manifest.editorType)?void 0:r.includes(B.IP.FIGMA))&&(0,H.m_)({id:K.ds}),(0,P.MK)(n)){let t=(0,y.Ep)(n);e.dispatch((0,f.vP)({plugin:n,codeLanguage:t}))}else{a.n_.set(E.X,E.w.PLUGIN);let t={id:s,type:j.P.PLUGIN};e.dispatch(X.KD({...v,initialFdResourceTab:j.P.PLUGIN,fdPreviewResource:t}))}}}else if("whiteboard"===p)A.iTB.triggerAction("clear-tool",{source:$.FV}),setTimeout(()=>{e.dispatch(X.KD({...v,initialTab:u?Y.E.WIDGETS:Y.E.PLUGINS,previewResource:{id:s,type:u?M.P.WIDGETS:M.P.PLUGINS}}))},$.J9);else if("design"===p)null==(i=A.iTB)||i.triggerAction("clear-tool",{source:$.FV}),e.dispatch(X.KD({...v,initialFdResourceTab:u?j.P.WIDGET:j.P.PLUGIN,fdPreviewResource:{id:s,type:u?j.P.WIDGET:j.P.PLUGIN}}));else if("dev_handoff"===p){A.iTB.triggerAction("clear-tool",{source:$.FV});let t=await (0,q.vS)(e,{resourceType:F.Xh.PLUGIN,resourceIds:[s]}),r=t[s];if((null==(o=r.manifest.editorType)?void 0:o.includes(B.IP.FIGMA))&&(0,H.m_)({id:K.ds}),(0,P.MK)(r)){let t=(0,y.Ep)(r);e.dispatch((0,f.vP)({plugin:r,codeLanguage:t}))}else{a.n_.set(E.X,E.w.PLUGIN);let t={id:s,type:j.P.PLUGIN};e.dispatch(X.KD({...v,initialFdResourceTab:j.P.PLUGIN,fdPreviewResource:t}))}}}),eo=(0,v.u4)((e,t)=>{let r=e.getState(),n=r.user,a=!!t.extension.isWidget,o=t.extension.currentPluginVersion;if(!o||!n)return;let l=(0,i.BZ)().cmty_use_has_playground_file?o.hasPlaygroundFile:o.playgroundFigFileKey,s="dev_handoff"===t.fullscreenEditorType,c={fullscreenEditorType:t.fullscreenEditorType,tryPluginId:t.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(l||s),fuid:n.id,tryPluginParams:void 0};(0,D.fg)(n.id,!1,null),(0,J.k)(c,null,null,n.id),(()=>{let r="whiteboard"===t.fullscreenEditorType?V.xQ.FigJam:V.xQ.Design,i={storeInRecentsKey:r,id:t.extension.id,version:o.id,currentUserId:n.id};a?e.dispatch(q._o(i)):e.dispatch(q.zD(i))})()}),el=(0,v.u4)((e,t)=>{let r=e.getState(),n=r.user,a=!!t.extension.isWidget,l=t.extension.currentPluginVersion;if(!l||!n)return;let s=()=>{let r="whiteboard"===t.fullscreenEditorType?V.xQ.FigJam:V.xQ.Design,i={storeInRecentsKey:r,id:t.extension.id,version:l.id,currentUserId:n.id};a?e.dispatch(q._o(i)):e.dispatch(q.zD(i))},c=(0,i.BZ)().cmty_use_has_playground_file?l.hasPlaygroundFile:l.playgroundFigFileKey,d="dev_handoff"===t.fullscreenEditorType,u={fullscreenEditorType:t.fullscreenEditorType,tryPluginId:t.extension.id,tryPluginVersionId:l.id,tryPluginName:l.name??"",isWidget:a,isPlaygroundFile:!!(c||d),fuid:n.id,tryPluginParams:void 0},p=r.plans.filter(e=>e.plan_type===U.k.TEAM),m=p.map(e=>{let t=(0,o.Z)(e,n.id);return{...t,workspaceName:(0,C.CV)(r,t),user:n}});if(0===m.length){e.dispatch(er(l.name,r.orgById[r.currentUserOrgId].name,e=>{(0,D.fg)(n.id,!1,null,void 0,e.id),(0,J.k)(u,null,e.id,n.id),s()}));return}1===m.length?((0,D.fg)(n.id,!1,null,void 0,m[0].teamId??null),(0,J.k)(u,null,m[0].teamId??null,n.id),s()):e.dispatch(I.K4({type:h.Q,data:{payload:{workspaces:m,onSelectWorkspace:e=>{(0,D.fg)(n.id,!1,null,void 0,(null==e?void 0:e.teamId)??null),(0,J.k)(u,null,(null==e?void 0:e.teamId)??null,n.id),s()}}}}))}),es=(0,v.u4)((e,t)=>{let r=e.getState(),n=r.user,a=!!t.extension.isWidget,o=t.extension.currentPluginVersion;if(!o||!n)return;let l=(0,i.BZ)().cmty_use_has_playground_file?o.hasPlaygroundFile:o.playgroundFigFileKey,s="dev_handoff"===t.fullscreenEditorType,c={fullscreenEditorType:t.fullscreenEditorType,tryPluginId:t.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(l||s),fuid:n.id,tryPluginParams:void 0},d=r.plans.find(e=>e.plan_type===U.k.ORG&&e.plan_id===r.currentUserOrgId);(0,D.fg)(n.id,!1,d.plan_id,void 0,null),(0,J.k)(c,d.plan_id,null,n.id),(()=>{let r="whiteboard"===t.fullscreenEditorType?V.xQ.FigJam:V.xQ.Design,i={storeInRecentsKey:r,id:t.extension.id,version:o.id,currentUserId:n.id};a?e.dispatch(q._o(i)):e.dispatch(q.zD(i))})()}),ec=(0,v.u4)(async(e,t)=>{var r;let a=e.getState(),{user:o,authedActiveCommunityProfile:l}=a,d=(0,_.N)(a),m=(0,F._4)(t.resource),h=(0,P.hb)(t.resource);if(!o){e.dispatch(ei({isWidget:m}));return}let g=()=>{let r="whiteboard"===t.fullscreenEditorType?V.xQ.FigJam:V.xQ.Design,n={storeInRecentsKey:r,id:t.resource.id,version:h.id,currentUserId:o.id};m?e.dispatch(q._o(n)):e.dispatch(q.zD(n))},f=(0,T.nC)(a).length>1,E=(0,T.Kk)(l),y=!!((null==o?void 0:o.id)&&(0,C.z$)([o.id],a)),v=[],b=null;if((0,i.BZ)().ps_benchmark)try{b=await e.dispatch((0,S.Qd)(!0)),v=(0,O.V)(a,t.resource,b)}catch(n){let t=(null==(r=null==n?void 0:n.data)?void 0:r.message)||(0,u.t)("file_browser.error_try_again");e.dispatch(p.R.enqueue({message:t,type:"error"}))}else v=(0,O.V)(a,t.resource,{plansByUserId:{},teams:[],orgs:[]});let I=(f||y)&&!E&&!t.fileKey;(0,i.BZ)().ps_benchmark&&(I=v.length>1&&!t.fileKey);let A={fullscreenEditorType:t.fullscreenEditorType,tryPluginId:t.resource.id,tryPluginVersionId:h.id,tryPluginName:h.name,tryPluginEditorType:(0,P.Ow)(h.manifest.editorType),isWidget:m,isPlaygroundFile:!!t.isPlaygroundFile,tryPluginParams:void 0,fileKey:t.fileKey};if((0,n.L9)("CTA Clicked",{name:"Try it out",pluginId:t.resource.id,isWidget:m,editorType:t.fullscreenEditorType,isMonetized:(0,F.vu)(t.resource),fileKey:t.fileKey,...d}),I)(0,n.L9)("try_it_out_drafts_picker_menu_opened",{pluginId:t.resource.id,isWidget:m,...d}),e.dispatch(en({plans:b,workspaces:v,resource:t.resource,editorType:(0,x.On)(t.fullscreenEditorType),onSelectWorkspace:e=>{e?(A.fuid=e.userId,(0,D.fg)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,J.k)(A,e.orgId,e.teamId??null,e.userId)):(0,J.k)(A,null,null,o.id),g()}}));else{if((0,i.BZ)().ps_benchmark){if(t.fileKey)A.fuid=t.userId??o.id,(0,J.k)(A,null,null,A.fuid);else if(1===v.length){let r=v[0];if(r.orgId&&!(0,w.v5)(t.resource,a.orgById[r.orgId])){let n=await (0,w.MK)(t.resource,a.orgById[r.orgId]);if(!n){e.dispatch(er(h.name,(0,C.CV)(a,r),e=>{(0,D.fg)(o.id,!1,null,void 0,e.id),(0,J.k)(A,null,e.id,o.id),g()}));return}}(0,D.fg)(r.userId,!1,r.orgId,void 0,r.teamId??null),(0,J.k)(A,r.orgId,r.teamId??null,r.userId)}else(0,s.Jz)(c.k.COMMUNITY,Error("No workspaces found")),e.dispatch(p.R.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))}else t.userId?(A.fuid=t.userId,(0,D.fg)(t.userId,!1),(0,J.k)(A,null,null,t.userId)):(0,J.k)(A,null,null,o.id);g()}})},286071:(e,t,r)=>{r.d(t,{Dr:()=>y,FM:()=>f,Rg:()=>T,Rp:()=>E,UL:()=>v,UT:()=>b,a$:()=>w,hL:()=>C,kX:()=>S});var n,i=r(31642),a=r(313653),o=r(970740),l=r(151881),s=r(218609),c=r(215698),d=r(244311),u=r(448694),p=r(339531),m=r(215958),h=r(255267),_=r(592035),g=r(238809),f=((n=f||{}).INVITE_TILE="invite_tile",n.COMMUNITY_PAGE="community_page",n);let E=(0,s.u4)((e,t)=>{i.ZP.put("/api/community_publishers/accept",t).then(({data:t})=>{let r=t.meta,n=I(r);n&&e.dispatch(n)}).catch(t=>{let r=(0,o.it)(t);throw e.dispatch(a.l.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${r}`)})}),y=(0,s.u4)((e,t)=>{let{src:r,plugin_id:n,widget_id:l}=t;i.ZP.put("/api/plugin_publishers/accept",{plugin_id:n,widget_id:l}).then(({data:t})=>{var i;let a=t.meta,o=I(a);o&&e.dispatch(o),(0,u.b5)("plugin_publisher_invite_accepted",{src:r,userId:null==(i=e.getState().user)?void 0:i.id,pluginId:n??l,isWidget:!!l});let s=(0,p.yn)(e.getState().selectedView);n?e.dispatch(g.KD({initialX:0,initialY:0,initialTab:"figjam"===s?h.E.PLUGINS:void 0,initialFdResourceTab:"figma"===s?_.P.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===s,initialFdView:"figma"===s?"development":void 0})):l&&e.dispatch(g.KD({initialX:0,initialY:0,initialTab:"figjam"===s?h.E.WIDGETS:void 0,initialFdResourceTab:"figma"===s?_.P.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===s,initialFdView:"figma"===s?"development":void 0}))}).catch(t=>{let r=(0,o.it)(t);throw e.dispatch(a.l.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${r}`)})}),v=(0,s.u4)((e,t)=>{i.ZP.del("/api/community_publishers/remove",t).then(({data:t})=>{let r=t.meta,n=I(r);n&&e.dispatch(n)}).catch(t=>{let r=(0,o.it)(t);throw e.dispatch(a.l.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${r}`)})}),b=(0,s.u4)((e,t)=>{i.ZP.del("/api/plugin_publishers/remove",t).then(({data:r})=>{var n;let i=r.meta;if(r.meta.plugin){let{plugin_publishers:e}=r.meta.plugin;r.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(r.meta.widget){let{plugin_publishers:e}=r.meta.widget;r.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let a=I(i);a&&e.dispatch(a),(0,u.b5)("plugin_publisher_invite_removed",{src:t.src,userId:null==(n=e.getState().user)?void 0:n.id,pluginId:t.plugin_id||t.widget_id,isWidget:!!t.widget_id})}).catch(t=>{let r=(0,o.it)(t);throw e.dispatch(a.l.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${r}`)})});function I(e){return e.hub_file?(0,l.H$)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?d.jb({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?d.jb({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let T=(0,s.u4)((e,t)=>{e.dispatch(d.ge({profileId:t})),e.dispatch(d.pF({profileId:t})),e.dispatch(c.vH(t))}),w=(0,s.u4)(e=>{m.D.loadPluginsPublishedByUser(e),m.D.loadPluginsAuthoredByCurrentOrg(e)}),S=(0,s.u4)(e=>{m.D.loadPluginsAuthoredByCurrentOrg(e)}),C=(0,s.u4)(async e=>{await m.D.loadWidgetsAuthoredByCurrentOrg(e)})},512512:(e,t,r)=>{r.d(t,{Rd:()=>p,dK:()=>m,fB:()=>h,s4:()=>u,vQ:()=>d});var n=r(850724),i=r(970740),a=r(644383),o=r(721127),l=r(413810),s=r(322447),c=r(218609);let d=(0,c.u4)((e,t)=>{let r=t.stringToCopy,o=t.ignoreLineBreaks??!0;(0,n.zp)(r,{withLineBreaks:!o}).then(()=>{e.dispatch(a.R.enqueue({type:"copied_to_clipboard",message:(0,i.t)("fullscreen_actions.copied_to_clipboard")}))})}),u=(0,c.u4)((e,t)=>{let r=t.emailList,o=r.length,l=r.join("; ");(0,n.zp)(l).then(()=>{e.dispatch(a.R.enqueue({message:(0,i.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:o,emailText:l}),type:"emails-copied"}))})}),p=e=>{let t=(0,c.u4)((e,t)=>{let r=t.selector.selectedViewToPath(t.selectedView,t.data);if(!r)return;let n=new URL(r,document.baseURI).href;e.dispatch(h({url:n}))});return t(e)},m=(0,c.u4)((e,t)=>{let r=new URL((0,l.np)(e.getState(),t),document.baseURI).href;e.dispatch(h({url:r}))}),h=(0,c.u4)((e,t)=>{let r=t.url;(0,n.zp)(r).then(()=>{let t=r.includes("mode=dev")||r.includes("m=dev");t?e.dispatch(a.R.enqueue({type:"link_copied_to_clipboard",message:(0,i.t)("copy_to_clipboard.dev_link_copied_to_clipboard")})):e.dispatch(a.R.enqueue({type:"link_copied_to_clipboard",message:(0,i.t)("copy_to_clipboard.link_copied_to_clipboard")}))}).catch(()=>{e.dispatch(o.K4({type:s.U,data:{link:r}}))})})},255049:(e,t,r)=>{r.d(t,{A:()=>S,AK:()=>k,ES:()=>R,GV:()=>w,LB:()=>C,S4:()=>D,WN:()=>A,cn:()=>P,nt:()=>L,ql:()=>O,vr:()=>N});var n=r(237863),i=r(600486),a=r(768358),o=r(239299),l=r(448501),s=r(111120),c=r(489465),d=r(837728),u=r(609346),p=r(761767),m=r(485091),h=r(733609),_=r(413810),g=r(352297),f=r(656077),E=r(643826),y=r(654653),v=r(363402),b=r(218609),I=r(225592);let T=(0,b.u4)((e,{viewport:t})=>{var r,n;let{selectedView:i}=e.getState();if("fullscreen"===i.view){e.dispatch(s.fv({...i,viewport:t}));let a=(null==(r=(0,u.mp)())?void 0:r.fileKey)||i.fileKey;a&&(null==(n=o.YO)||n.updateViewport(a,t))}}),w=(0,b.u4)(e=>{let t=e.getState(),r=R(t);e.dispatch(I.dR({query:t.desktopNewTab.searchQuery,searchScope:r,searchModelType:E.c.FILES})),e.dispatch(I.u5({entryPoint:"desktop_new_tab"})),t=e.getState();let n=(0,_.hM)(t,{view:"search",entryPoint:"desktop_new_tab",previousView:t.selectedView&&((0,v.nr)(t.selectedView)||(0,v.tr)(t.selectedView))?t.selectedView:void 0});l.default.redirect(n)}),S=(0,n.e)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),C=(0,n.e)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,n.e)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY"),A=(0,b.u4)((e,t)=>{let r=e.getState(),n=t.result,i=n.model,a={position:t.index,resource_id:i.key,resource_type:n.search_model_type.toString(),is_deep_search:n.is_deep_search,result:n},o=new y.ol.Analytics(r.search,a);o.click(n.search_model_type,r.selectedView,{action:t.clickAction}),e.dispatch(I.TM()),e.dispatch(s.fv({view:"fullscreen",fileKey:i.key,editorType:i.editor_type??"design"}))}),N=(0,b.u4)(async(e,t,{liveStore:r})=>{let n=await r.fetchFile(t.fileKey);(0,i.L9)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:n.key}),e.dispatch(s.fv({view:"prototype",file:(0,m.T)(n),nodeId:t.pageId,pageId:t.pageId}))}),L=(0,b.u4)(async(e,t,{liveStore:r})=>{let n=await r.fetchFile(t.fileKey);(0,i.L9)("Desktop New Tab Open Recent",{itemType:"file",fileKey:n.key}),e.dispatch(s.fv({view:"fullscreen",fileKey:n.key,editorType:n.editor_type??"design"}))}),P=(0,b.u4)((e,t)=>{let r=e.getState();if(!r.desktopNewTab.isCreatingFile){let n=(0,d.$1)(e.getState(),f.JD.NEW_TAB,t.projectId?{folderId:t.projectId}:"drafts",{from:f.L7.DESKTOP_NEW_TAB_BUTTON,selectedView:r.selectedView},t.editorType,void 0);e.dispatch(c.U8(n))}});function R(e){let t=(0,h.getPermissionsStateMemoized)(e);return t.currentUserOrgId?(0,h.canMemberOrg)(t.currentUserOrgId,t)?E.$0.ORG:E.$0.ORG_GUEST:E.$0.PERSONAL}function k(e,t){return t===p.gg.WHITEBOARD?"#ffffff":`#${(0,g.uF)(e)}`}let D=(0,a.D)((e,t)=>{e.dispatch(T({viewport:t}))},1e3)},656514:(e,t,r)=>{r.d(t,{n:()=>a,s:()=>i});var n,i=((n=i||{}).DevMode="dev_mode",n.TopBanner="dev_mode_top_banner",n.BetaOver="dev_mode_beta_over",n.Inspection="dev_mode_inspection",n.Navigation="dev_mode_navigation",n.TrackChanges="dev_mode_track_changes",n.QuickHandoff="dev_mode_quick_handoff",n.Plugin="dev_mode_plugin",n.SuperModal="dev_mode_super_modal",n.DowngradeEmail="dev_mode_downgrade_email",n);let a=["dev_mode_inspection","dev_mode_track_changes","dev_mode_quick_handoff","dev_mode_plugin","dev_mode_super_modal"]},47389:(e,t,r)=>{r.d(t,{BS:()=>ei,Dh:()=>T,G6:()=>H,IH:()=>er,JG:()=>N,Je:()=>X,KN:()=>O,ON:()=>K,QV:()=>L,SK:()=>et,TG:()=>ea,VI:()=>G,WE:()=>M,_2:()=>V,_d:()=>P,aX:()=>z,bq:()=>k,eA:()=>es,fw:()=>ee,gs:()=>el,hY:()=>D,jR:()=>x,lT:()=>R,qI:()=>Q,qn:()=>Y,qp:()=>J,rA:()=>$,rY:()=>en,rv:()=>j,uz:()=>q,v8:()=>w,vw:()=>U,w2:()=>eo,wh:()=>S,y$:()=>B,yb:()=>W,z1:()=>A});var n=r(237863),i=r(647744),a=r(768358),o=r(716250),l=r(970740),s=r(644383),c=r(448694),d=r(837728),u=r(838903),p=r(278832),m=r(961215),h=r(994538),_=r(393677),g=r(301828),f=r(517654),E=r(33635),y=r(228488),v=r(242153),b=r(218609);function I(e){return e.multiplayer.allUsers.length}function T(e,t,r){if(!e)return;let n=new g.Q4().selectedViewNameHelper(e,t,void 0!==r?function(e){let t=Math.max(0,e),r=t%60,n=(0,y.Rm)((t-r)/60);return`${n}:${(0,y.Rm)(r)}`}(r):void 0);(0,p.EI)(n,e.editor_type)}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}let S="active-song-not-found";async function C(e,t){let r=e;return await (0,E.Ki)({songID:e,onSuccess:()=>{},onNotFound:()=>{t.dispatch(Y({selectedSongID:"",musicStartTimeMs:0})),r="",t.dispatch($()),t.dispatch(s.R.enqueue({message:(0,l.t)("whiteboard.timer.song_not_available_error"),error:!0,type:S}))}}),r}let O=(0,b.wV)("SET_SELECTED_SONG_ID_MUSIC",(e,t)=>{let{music:r}=e.getState().music,n=!t.dontTransmitWhenPaused;if(r&&!r.isStopped&&(!r.isPaused||n)){let n=e.getState().music.activeSongs.find(e=>e.song_id===t.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!r||r.isPaused,selectedSongID:t.selectedSongID,lastReceivedSongTimestampMs:(null==n?void 0:n.start_at_ms)||0,isStopped:!r||r.isStopped}))}}),A=(0,b.u4)(e=>{e.dispatch(N()),(0,E.uP)(),(0,E.s4)()}),N=(0,n.e)("RESET_LOCAL_MUSIC"),L=(0,b.u4)((e,t)=>{if(e.dispatch(P(t)),t.isPaused||t.isStopped||!t.selectedSongID)(t.isPaused||t.isStopped)&&(0,E.zx)()&&(0,E.uP)();else{let r=F(t.selectedSongID,e.getState().music.activeSongs);(0,E.Xq)(r,()=>{e.dispatch(D())})}}),P=(0,n.e)("SET_MUSIC_STATE"),R=(0,b.wV)("RESUME_MUSIC",async(e,t)=>{var r;let n=w(t),i=e.getState(),a=null==(r=i.music.music)?void 0:r.selectedSongID;a&&(a=await C(a,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1}))}),k=(0,b.u4)((e,t)=>{var r;let n=w(t),i=e.getState(),a=null==(r=i.music.music)?void 0:r.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1}))}),D=(0,b.u4)(e=>{var t;let r=e.getState(),n=null==(t=r.music.music)?void 0:t.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),M=(0,b.wV)("START_MUSIC",async(e,{musicStartTimeMs:t=0})=>{let{music:r}=e.getState().music,n="";r&&(n=r.selectedSongID),n&&(n=await C(n,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:n,lastReceivedSongTimestampMs:t,isStopped:!1}))}),F=(e,t)=>t.find(t=>t.song_id===e),x=(0,b.wV)("SEND_MUSIC_MESSAGE",(e,t)=>{var r;let n=e.getState(),i=n.music;m.B9x.sendMusic(t.isPaused,((null==(r=null==i?void 0:i.music)?void 0:r.musicMessageID)||0)+1,t.selectedSongID||"",t.lastReceivedSongTimestampMs||0,t.isStopped)});(0,b.u4)((e,t)=>{"open"===t.state&&(0,v.K)(()=>{var t;(null==(t=e.getState().music)?void 0:t.modalState)==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(t))});let U=(0,n.e)("SET_MUSIC_MODAL"),B=(0,n.e)("RESET_LOCAL_TIMER"),V=(0,b.wV)("SET_MUSIC_STANDALONE_VOLUME",(e,t)=>{Z(e.getState(),t)}),G=(0,b.wV)("SET_MUSIC_IS_MUTED",(e,{isMuted:t,userInitiated:r})=>{r&&(0,f.Vm)(e.getState(),t)}),H=(0,b.wV)("SET_TIMER_AND_MUSIC_ARE_MUTED",(e,{isMuted:t,userInitiated:r})=>{r&&(0,f.Vm)(e.getState(),t)}),W=(0,n.e)("SET_STANDALONE_MUSIC_PLAYER"),K=(0,n.e)("SET_MAIN_MUSIC_PLAYER"),z=(0,b.wV)("SET_MUSIC_VOLUME",(e,t)=>{Z(e.getState(),t)}),Z=(0,a.D)((e,t)=>(0,f.gE)(e,t),1e3,!1),Y=(0,b.wV)("SET_SELECTED_SONG_ID",(e,t)=>{let{time:r}=e.getState().timer;if(r&&r.totalTimeMs>0){let n=(0,y.jL)(r);e.dispatch(er({eventName:"update-timer-song-id",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:r.isPaused,songID:t.selectedSongID,lastReceivedSongTimestampMs:t.musicStartTimeMs})),h.hn.timerChange("timerupdatesongid")}}),j=(0,n.e)("GET_ACTIVE_SONGS_SUCCESS"),$=(0,b.u4)(async e=>{try{let t=await _.F.getSongs();if(!t||200!==t.status||!t.data||!t.data.meta)throw i.u.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(j(t.data.meta))}catch(e){throw i.u.warn("Failed to fetch active songs"),e}}),q=(0,n.e)("SET_SHOWING_FILE_FOOTER"),X=(0,n.e)("SET_SELECTED_TYPED_PROP_DEF_ID"),J=(0,n.e)("SET_START_CHIME_PLAYED"),Q=(0,n.e)("SET_TIMER_NOTIFICATION"),ee=(0,n.e)("SET_TIMER_AUDIO_ENABLED"),et=(0,b.wV)("SET_TIMER_MODAL",(e,t)=>{var r,n;if("open"===t.state&&(0,y.Lj)()&&(0,v.K)(()=>{var t;let r=(0,y.Lj)(),n=(null==(t=e.getState().timer)?void 0:t.modalState)==="open";n&&r&&e.dispatch(et({state:"closed",userInitiated:!1}))}),t.userInitiated){let i=e.getState(),a=(null==(r=i.timer.time)?void 0:r.timeRemainingMs)>0;(0,c.hp)(`timer-modal-${t.state}`,null==(n=i.openFile)?void 0:n.key,i,{"multiplayer-users":I(i),"timer-active":a,source:t.source})}}),er=(0,b.wV)("SEND_TIMER",(e,t)=>{var r,n,i;let a=e.getState(),l=a.timer,s=l.setBy;if("start-timer"===t.eventName){let e=a.multiplayer.allUsers.find(e=>e.sessionID===a.multiplayer.sessionID);s=e?e.name:(null==(r=(0,o.ZP)().user_data)?void 0:r.handle)||"anonymous user"}if(m.B9x.sendTimer(t.totalTimeMs||0,t.timeRemainingMs||0,!!t.isPaused,((null==(n=null==l?void 0:l.time)?void 0:n.timerID)||0)+1,s,t.songID||"",t.lastReceivedSongTimestampMs||0),t.eventName){let e={"multiplayer-users":I(a)};if("adjust-timer"===t.eventName){let r=Math.round((t.totalTimeMs-a.timer.time.totalTimeMs)/1e3);e["time-added-s"]=r}else"start-timer"===t.eventName&&(e["duration-s"]=Math.round(t.totalTimeMs/1e3));(0,c.hp)(t.eventName,null==(i=a.openFile)?void 0:i.key,a,e,{forwardToDatadog:!0})}}),en=(0,b.wV)("SET_TIMER",(e,t)=>{if(0===t.totalTimeMs){let t=e.getState(),r=(0,d.bC)(t);if(r){let e=(0,u.Xd)(r,t.repos);T(r,e)}}}),ei=(0,b.wV)("START_TIMER",async(e,{totalTimeMs:t,musicStartTimeMs:r=0})=>{let n=e.getState(),i=n.timer.selectedSongID;i&&(i=await C(i,e)),e.dispatch(er({eventName:"start-timer",totalTimeMs:t,timeRemainingMs:t,isPaused:!1,songID:i,lastReceivedSongTimestampMs:r})),h.hn.timerChange("timerstart")}),ea=(0,b.u4)((e,t)=>{let r=e.getState(),n=r.timer.selectedSongID;e.dispatch(er({eventName:"adjust-timer",totalTimeMs:t.timer.totalTimeMs+t.deltaMs,timeRemainingMs:(0,y.jL)(t.timer)+t.deltaMs,isPaused:t.timer.isPaused,songID:n,lastReceivedSongTimestampMs:t.timer.lastReceivedSongTimestampMs})),h.hn.timerChange("timeradjust")}),eo=(0,b.u4)((e,t)=>{let r=(0,y.jL)(t),n=w(t),i=e.getState(),a=i.timer.selectedSongID;e.dispatch(er({eventName:"pause-timer",totalTimeMs:t.totalTimeMs,timeRemainingMs:r,isPaused:!0,songID:a,lastReceivedSongTimestampMs:n})),h.hn.timerChange("timerpause")}),el=(0,b.u4)(e=>{let t=e.getState(),r=t.timer.selectedSongID;e.dispatch(er({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),h.hn.timerChange("timerstop")}),es=(0,b.wV)("RESUME_TIMER",async(e,t)=>{let r=e.getState(),n=r.timer.selectedSongID;n&&(n=await C(n,e)),e.dispatch(er({eventName:"resume-timer",totalTimeMs:t.totalTimeMs,timeRemainingMs:t.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:t.lastReceivedSongTimestampMs})),h.hn.timerChange("timerresume")})},275286:(e,t,r)=>{r.d(t,{$P:()=>H,$n:()=>w,Aw:()=>U,CC:()=>Z,Dz:()=>D,J6:()=>T,NP:()=>x,S9:()=>L,WV:()=>O,Y2:()=>B,aX:()=>C,fC:()=>R,h7:()=>S,j:()=>P,l6:()=>b,lk:()=>F,lt:()=>I,mD:()=>N,md:()=>v,pv:()=>A,q:()=>k,qO:()=>V,r_:()=>M,u9:()=>G});var n=r(237863),i=r(46347),a=r(697016),o=r(303498),l=r(127816),s=r(198348),c=r(31642),d=r(313653),u=r(970740),p=r(644383),m=r(218609),h=r(838903),_=r(219160),g=r(343878),f=r(761767),E=r(862610),y=r(88063);let v=(0,n.e)("SET_FAVORITES_COUNT"),b=(0,n.e)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),I=(0,n.e)("SET_MOVING_RESOURCE"),T=(0,n.e)("SET_NEW_SECTION_INDEX"),w=(0,m.u4)((e,t)=>{let{name:r,orderedFavoriteIds:n}=t,i=c.ZP.put(`/api/user_sidebar_sections/${t.sectionId}`,{ordered_favorited_resource_ids:n,name:r}).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.data.message}`}))});(0,o.i0)().optimisticallyUpdate({UserSidebarSection:{[t.sectionId]:{...r?{name:r}:{},...n?{orderedFavoritedResourceIds:n}:{}}}},i),t.name&&(0,a.iX)(t.sectionId,t.name)}),S=(0,m.u4)((e,t)=>{let r=c.ZP.del(`/api/user_sidebar_sections/${t.sidebarSectionId}`).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.msg}`}))});(0,a.uN)(t.sidebarSectionId),(0,o.i0)().optimisticallyDelete({UserSidebarSection:{[t.sidebarSectionId]:null}},r)}),C=(0,m.u4)((e,t)=>{let r={favorited_resource_ids:t.favoriteIds,team_id:t.teamId,org_id:t.orgId};c.ZP.put("/api/planless_favorited_resource_plan_id",r).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.data.message}`}))})}),O=(0,m.u4)((e,t)=>{let r={section_id:t.sectionId,ordered_favorite_ids:t.orderedFavoriteIds},n=c.ZP.put(`/api/favorited_resources/${t.favoriteId}`,r).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.data.message}`}))});t.sectionId&&(0,o.i0)().optimisticallyUpdate({UserSidebarSection:{[t.sectionId]:{orderedFavoritedResourceIds:t.orderedFavoriteIds}}},n);let i={[t.favoriteId]:{sidebarSectionId:t.sectionId}};switch(t.resourceType){case f.IK.TEAM:(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedTeam:i},n);break;case f.IK.FOLDER:(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedProject:i},n);break;case f.IK.FILE:(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedFile:i},n);break;case f.IK.PROTOTYPE:(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedPrototype:i},n);break;case f.IK.WORKSPACE:(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedWorkspace:i},n)}}),A=(0,m.Vh)("CREATE_SIDEBAR_SECTION_FAVORITE",(e,t,{optimistId:r})=>{var n,i,a,l,s,d,u;let m=e.getState().currentUserOrgId??null,h={name:t.name,org_id:m,insert_at_index:t.insertAtIndex,ordered_sections:t.currentOrderedSections},_=c.ZP.post("/api/user_sidebar_sections",h).then(n=>{if(!(null==n?void 0:n.data.meta)){e.dispatch(I({movingResource:void 0}));return}K(e.dispatch,t.newResourceForSection.resourceType,t.newResourceForSection.isFavorited,t.newResourceForSection.resourceId,r,n.data.meta),e.dispatch(I({movingResource:void 0}))}).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.msg}`}))});if((0,o.i0)().optimisticallyCreate({UserSidebarSection:{[Y]:{userId:(null==(n=e.getState().user)?void 0:n.id)??"",orgId:m,name:t.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},_),t.prefs&&t.currentOrderedSections){let r=t.currentOrderedSections.length,n=[...null==(i=t.currentOrderedSections)?void 0:i.slice(0,t.insertAtIndex),Y,...t.currentOrderedSections.slice(t.insertAtIndex,r)],o={id:null==(a=t.prefs)?void 0:a.id,orderedFavoritedResourceIds:null==(l=t.prefs)?void 0:l.orderedFavoritedResourceIds,orderedTeamIds:null==(s=t.prefs)?void 0:s.orderedTeamIds,orderedLicenseGroupIds:null==(d=t.prefs)?void 0:d.orderedLicenseGroupIds,orderedSidebarSections:n};(0,y.OS)(o,null==(u=e.getState().user)?void 0:u.id,m,null,_)}}),N=(0,m.u4)((e,t)=>{var r,n,i,l,s,d,u;let m=e.getState().currentUserOrgId??null,h={name:t.name,org_id:m,insert_at_index:t.insertAtIndex,ordered_sections:t.currentOrderedSections},_=c.ZP.post("/api/user_sidebar_sections",h).then(e=>{(0,a.lm)(null==e?void 0:e.data.meta,t.name)}).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.msg}`}))}),g="optimistic-id-custom-section-id";if((0,o.i0)().optimisticallyCreate({UserSidebarSection:{[g]:{userId:(null==(r=e.getState().user)?void 0:r.id)??"",orgId:m,name:t.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},_),t.prefs&&t.currentOrderedSections){let r=t.currentOrderedSections.length,a=[...null==(n=t.currentOrderedSections)?void 0:n.slice(0,t.insertAtIndex),g,...t.currentOrderedSections.slice(t.insertAtIndex,r)],o={id:null==(i=t.prefs)?void 0:i.id,orderedFavoritedResourceIds:null==(l=t.prefs)?void 0:l.orderedFavoritedResourceIds,orderedTeamIds:null==(s=t.prefs)?void 0:s.orderedTeamIds,orderedLicenseGroupIds:null==(d=t.prefs)?void 0:d.orderedLicenseGroupIds,orderedSidebarSections:a};(0,y.OS)(o,null==(u=e.getState().user)?void 0:u.id,m,null,_)}}),L=(0,m.Vh)("BULK_RESOURCE_SET_FAVORITE",(e,t,{optimistId:r,liveStore:n})=>{var i,s,u,h;let{files:_,repos:g,prototypes:v,orgId:b,teamId:I,selectedView:T,entrypoint:w}=t,S=_.filter(e=>!e.is_favorited),C=S.map(e=>e.key),O=g.filter(e=>!e.is_favorited).filter(Boolean),A=O.map(e=>e.default_file_key),N=v.filter(e=>!e.is_favorited),L=N.map(e=>e.file_key+","+e.page_id),P={files:A.concat(C),org_id:b,team_id:I,prototypes:L,insert_at_index:t.insertAtIndex,ordered_favorites:t.orderedFavorites,section_id:t.sectionId};_.forEach(e=>{(0,a.y)(e.key,T,w,f.IK.FILE,e.editor_type,!0)}),g.forEach(e=>{(0,a.y)(e.default_file_key??void 0,T,w,f.IK.FILE,"design",!0)}),v.forEach(e=>{(0,a.y)(e.file_key,T,w,f.IK.PROTOTYPE,"design",!0)});let R=c.ZP.put("/api/bulk_favorite_resources",P).then(()=>{e.dispatch(m.w2.commit(r))}).catch(t=>{e.dispatch(m.w2.revert(r));try{e.dispatch(p.R.enqueue({message:t.message}))}catch(t){e.dispatch(d.l.error("An error occurred while favoriting these items"))}}),k=null==(i=e.getState().user)?void 0:i.id;if(!k)return;let D={},M={},F=[];if(N.forEach(e=>{F.push(`optimistic-id-${e.fig_file.key}`),M[`optimistic-id-${e.fig_file.key}`]=(0,l.iE)(e,k,b,t.sectionId)}),O.forEach(e=>{let r=e.default_file_key;if(r){let e=n.readCachedFile(r);e&&(F.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.WK)(e,k,b,t.sectionId))}}),S.forEach(e=>{F.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.WK)(e,k,b,t.sectionId)}),(0,o.i0)().deprecatedOptimisticallyCreateByView(E.FileBrowserSidebarData,{FavoritedFile:D,FavoritedPrototype:M},R),null===t.insertAtIndex)return;let x=[...t.orderedFavorites.slice(0,t.insertAtIndex),...F,...t.orderedFavorites.slice(t.insertAtIndex)];if(t.sectionId)(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{UserSidebarSection:{[t.sectionId]:{orderedFavoritedResourceIds:x}}},R);else{let e={id:(null==(s=t.fileBrowserPrefs)?void 0:s.id)||"optimistic-id",orderedFavoritedResourceIds:x,orderedTeamIds:null==(u=t.fileBrowserPrefs)?void 0:u.orderedTeamIds,orderedLicenseGroupIds:null==(h=t.fileBrowserPrefs)?void 0:h.orderedLicenseGroupIds};(0,y.OS)(e,k,b,null,R)}}),P=(0,m.Vh)("REMOVE_TILE_FAVORITE",async(e,t,{liveStore:r})=>{let{tile:n,entrypoint:a,favoriteId:o,sectionId:l,fileBrowserEntryPoint:s}=t;switch(n.type){case g.YU.FILE:e.dispatch(G({entrypoint:a,favoriteId:o,file:n.file,fileBrowserEntryPoint:s}));return;case g.YU.PINNED_FILE:let c=await r.fetchFile(n.file.key);e.dispatch(G({entrypoint:a,favoriteId:o,file:c,fileBrowserEntryPoint:s}));return;case g.YU.PROTOTYPE:e.dispatch(B({entrypoint:a,favoriteId:o,prototype:n.prototype,fileBrowserEntryPoint:s}));return;case g.YU.REPO:e.dispatch(G({entrypoint:a,favoriteId:o,file:(0,h.T)(n.repo,n.branches,{}),repoId:n.repo.id,fileBrowserEntryPoint:s}));return;case g.YU.PROJECT:e.dispatch(R({entrypoint:a,favoriteId:o,sectionId:l,folder:n.folder}));return;case g.YU.OFFLINE_FILE:return;default:(0,i.vE)(n)}}),R=(0,m.Vh)("REMOVE_FOLDER_FAVORITE",(e,t,{optimistId:r})=>{let{folder:n,sectionId:i}=t;(0,a.Tg)(n.id,e.getState().selectedView.view,t.entrypoint,f.IK.FOLDER);let l=K(e.dispatch,f.IK.FOLDER,!1,n.id,r,i);t.favoriteId&&(0,o.i0)().deprecatedOptimisticallyDeleteByView(E.FileBrowserSidebarData,{FavoritedProject:{[t.favoriteId]:null}},l)}),k=(0,m.Vh)("ADD_TILE_FAVORITE",async(e,t,{liveStore:r})=>{let{tile:n,entrypoint:a,favoriteId:o,sectionId:l,fileBrowserEntryPoint:s}=t;switch(n.type){case g.YU.FILE:e.dispatch(H({entrypoint:a,favoriteId:o,sectionId:l,file:n.file,fileBrowserEntryPoint:s}));return;case g.YU.PINNED_FILE:let c=await r.fetchFile(n.file.key);e.dispatch(H({entrypoint:a,favoriteId:o,sectionId:l,file:c,fileBrowserEntryPoint:s}));return;case g.YU.PROTOTYPE:e.dispatch(V({entrypoint:a,favoriteId:o,sectionId:l,prototype:n.prototype,fileBrowserEntryPoint:s}));return;case g.YU.REPO:e.dispatch(H({entrypoint:a,favoriteId:o,sectionId:l,file:(0,h.T)(n.repo,n.branches,e.getState().selectedBranchKeyByRepoId),repoId:n.repo.id,fileBrowserEntryPoint:s}));return;case g.YU.PROJECT:e.dispatch(D({entrypoint:a,favoriteId:o,sectionId:l,folder:n.folder}));return;case g.YU.OFFLINE_FILE:return;default:(0,i.vE)(n)}}),D=(0,m.Vh)("ADD_FOLDER_FAVORITE",(e,t,{optimistId:r})=>{var n;let{folder:i,sectionId:s}=t;(0,a.y)(i.id,e.getState().selectedView.view,t.entrypoint,f.IK.FOLDER);let c=K(e.dispatch,f.IK.FOLDER,!0,i.id,r,s),d=null==(n=e.getState().user)?void 0:n.id,u=e.getState().currentUserOrgId;d&&(t.favoriteId&&t.sectionId&&(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedProject:{[t.favoriteId]:{sidebarSectionId:t.sectionId}}},c),"is_favorited"in i&&(t.favoriteId||(0,o.i0)().deprecatedOptimisticallyCreateByView(E.FileBrowserSidebarData,{FavoritedProject:{[`optimistic-id-${i.id}`]:(0,l.YO)(i,d,u,s)}},c)))}),M=(0,m.Vh)("REMOVE_WORKSPACE_FAVORITE",(e,t,{optimistId:r})=>{let{workspace:n}=t;(0,a.Tg)(n.id,e.getState().selectedView.view,t.entrypoint,f.IK.WORKSPACE);let i=K(e.dispatch,f.IK.WORKSPACE,!1,n.id,r);t.favoriteId&&(0,o.i0)().deprecatedOptimisticallyDeleteByView(E.FileBrowserSidebarData,{FavoritedWorkspace:{[t.favoriteId]:null}},i)}),F=(0,m.Vh)("ADD_WORKSPACE_FAVORITE",(e,t,{optimistId:r})=>{var n;let{workspace:i,sectionId:s}=t,c=e.getState().currentUserOrgId;(0,a.y)(i.id,e.getState().selectedView.view,t.entrypoint,f.IK.WORKSPACE);let d=K(e.dispatch,f.IK.WORKSPACE,!0,i.id,r,s),u=null==(n=e.getState().user)?void 0:n.id;u&&(t.favoriteId&&t.sectionId?(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedWorkspace:{[t.favoriteId]:{sidebarSectionId:t.sectionId}}},d):(0,o.i0)().deprecatedOptimisticallyCreateByView(E.FileBrowserSidebarData,{FavoritedWorkspace:{[`optimistic-id-${i.id}`]:(0,l.b1)({...i,mirroringLicenseGroup:null,canRead:!1},u,c,s)}},d))}),x=(0,m.Vh)("REMOVE_TEAM_FAVORITE",(e,t,{optimistId:r})=>{let{team:n}=t;(0,a.Tg)(n.id,e.getState().selectedView.view,t.entrypoint,f.IK.TEAM);let i=K(e.dispatch,f.IK.TEAM,!1,n.id,r);t.favoriteId&&(0,o.i0)().deprecatedOptimisticallyDeleteByView(E.FileBrowserSidebarData,{FavoritedTeam:{[t.favoriteId]:null}},i)}),U=(0,m.Vh)("ADD_TEAM_FAVORITE",(e,t,{optimistId:r})=>{var n;let{team:i,sectionId:s}=t,c=e.getState().currentUserOrgId;(0,a.y)(i.id,e.getState().selectedView.view,t.entrypoint,f.IK.TEAM);let d=K(e.dispatch,f.IK.TEAM,!0,i.id,r,s),u=null==(n=e.getState().user)?void 0:n.id;u&&(t.favoriteId&&t.sectionId?(0,o.i0)().optimisticallyUpdate({FavoritedTeam:{[t.favoriteId]:{sidebarSectionId:t.sectionId}}},d):(0,o.i0)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${i.id}`]:(0,l.fw)(i,u,c,s)}},d))}),B=(0,m.Vh)("REMOVE_PROTOTYPE_FAVORITE",(e,t,{optimistId:r})=>{var n;let{prototype:i,entrypoint:l,fileBrowserEntryPoint:s}=t;(0,a.Tg)(i.file_key,e.getState().selectedView.view,l,f.IK.PROTOTYPE,void 0,s);let c=K(e.dispatch,f.IK.PROTOTYPE,!1,i.file_key,r,void 0,i.page_id),d=null==(n=e.getState().user)?void 0:n.id;d&&t.favoriteId&&(0,o.i0)().deprecatedOptimisticallyDeleteByView(E.FileBrowserSidebarData,{FavoritedPrototype:{[t.favoriteId]:null}},c)}),V=(0,m.Vh)("ADD_PROTOTYPE_FAVORITE",(e,t,{optimistId:r})=>{var n;let{prototype:i,entrypoint:s,sectionId:c,fileBrowserEntryPoint:d}=t,u=e.getState().currentUserOrgId;(0,a.y)(i.file_key,e.getState().selectedView.view,s,f.IK.PROTOTYPE,"prototype",d);let p=K(e.dispatch,f.IK.PROTOTYPE,!0,i.fig_file.key,r,c,i.page_id),m=null==(n=e.getState().user)?void 0:n.id;m&&(t.favoriteId&&t.sectionId?(0,o.i0)().deprecatedOptimisticallyUpdateByView(E.FileBrowserSidebarData,{FavoritedPrototype:{[t.favoriteId]:{sidebarSectionId:t.sectionId}}},p):(0,o.i0)().deprecatedOptimisticallyCreateByView(E.FileBrowserSidebarData,{FavoritedPrototype:{[`optimistic-id-${i.fig_file.key}`]:(0,l.iE)(i,m,u,c)}},p))}),G=(0,m.Vh)("REMOVE_FILE_FAVORITE",(e,t,{optimistId:r})=>{var n;let i=e.getState().selectedView.view,{file:l,entrypoint:s,fileBrowserEntryPoint:c}=t;(0,a.Tg)(l.key,i,s,f.IK.FILE,l.editor_type??"design",c);let d="fullscreen"===i?W(e.dispatch,f.IK.FILE,!1,l.key,(0,_.Gd)(e.getState().currentUserOrgId)):K(e.dispatch,f.IK.FILE,!1,l.key,r),u=null==(n=e.getState().user)?void 0:n.id;u&&t.favoriteId&&(0,o.i0)().deprecatedOptimisticallyDeleteByView(E.FileBrowserSidebarData,{FavoritedFile:{[t.favoriteId]:null}},d)}),H=(0,m.Vh)("ADD_FILE_FAVORITE",(e,t,{optimistId:r})=>{var n;let{file:i,entrypoint:s,sectionId:c,fileBrowserEntryPoint:d}=t;(0,a.y)(i.key,e.getState().selectedView.view,s,f.IK.FILE,i.editor_type??"design",d);let u=K(e.dispatch,f.IK.FILE,!0,i.key,r,c,void 0,(0,_.Gd)(e.getState().currentUserOrgId)),p=null==(n=e.getState().user)?void 0:n.id;if(p){if(t.favoriteId&&t.sectionId)(0,o.i0)().optimisticallyUpdate({FavoritedFile:{[t.favoriteId]:{sidebarSectionId:t.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:f.IK.FILE,userId:p}}},u);else{let r=(0,l.nO)(i);(0,o.i0)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${i.key}`]:{userId:p,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:t.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:i.key,resourceType:f.IK.FILE,readableFile:r}}},u)}}}),W=(e,t,r,n,i)=>c.ZP.put("/api/favorited_resources",{resource_type:t,is_favorited:r,file_key:n}).then(()=>{let t=i?(0,u.t)("tile.favoriting.file_removed_from_sidebar"):(0,u.t)("tile.favoriting.file_removed_from_favorites"),n=i?(0,u.t)("tile.favoriting.file_added_to_sidebar"):(0,u.t)("tile.favoriting.file_added_to_favorites");e(p.R.enqueue({message:r?n:t}))}).catch(t=>{let r=(0,u.it)(t);if(r)try{e(p.R.enqueue({message:r}))}catch(t){e(d.l.error("An error occurred while favoriting this item"))}}),K=(e,t,r,n,i,a,o,l)=>c.ZP.put("/api/favorited_resources",{resource_type:t,is_favorited:r,resource_id_or_key:n,page_id:o,section_id:a}).then(()=>{if(e(m.w2.commit(i)),l||t!==f.IK.FILE){let t=r?(0,u.t)("sidebar.item_added_bell_message"):(0,u.t)("sidebar.item_removed_bell_message");e(p.R.enqueue({message:t}))}}).catch(t=>{let n=(0,u.it)(t);if(n){e(m.w2.revert(i));try{e(p.R.enqueue({message:n}))}catch(n){let t=r?"favoriting this item":"removing this favorite";e(d.l.error(`An error occurred while ${t}`))}}}),z=e=>c.ZP.del("/api/favorited_resources",s.yA.toAPIParameters(e)),Z=(0,m.u4)((e,t)=>{let r={favorited_resource_ids:t.favoriteIds};z(r).catch(t=>{e.dispatch(p.R.enqueue({message:`${t.data.message}`}))})}),Y="optimistic-id-custom-section-id"},902153:(e,t,r)=>{r.d(t,{Fo:()=>u,IS:()=>m,sV:()=>p,vm:()=>d});var n=r(237863),i=r(218609),a=r(215698),o=r(244311),l=r(28786),s=r(436649),c=r(779429);let d=(0,n.e)("UPDATE_FACE_STAMPS"),u=(0,n.e)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS"),p=(0,i.u4)(e=>{let t=e.getState().selectedView;t&&"fullscreen"===t.view&&"whiteboard"===t.editorType&&h(e)}),m="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let t=e.getState();if((0,s.d4)(t.loadingState,m)){e.dispatch(l.DB({key:m}));try{let r=await c.R.getDefaultInserts({orgId:t.currentUserOrgId||void 0}),n=[...r.data.meta.plugins,...function(e){let t=[];for(let r of e)for(let e of r.resources)e&&"is_widget"in e&&!e.is_widget&&t.push(e);return t}(r.data.meta.use_cases)],i=[...r.data.meta.widgets,...function(e){let t=[];for(let r of e)for(let e of r.resources)e&&"is_widget"in e&&e.is_widget&&t.push(e);return t}(r.data.meta.use_cases)],s=[...r.data.meta.templates,...function(e){let t=[];for(let r of e)for(let e of r.resources)e&&"viewer_mode"in e&&e.viewer_mode&&t.push(e);return t}(r.data.meta.use_cases)];e.dispatch((0,a.H$)({hubFiles:s,src:"figjam-inserts"})),e.dispatch(u(r.data.meta)),e.dispatch(o.zQ(n)),e.dispatch(o.XE(i));let d={},p={};i.forEach(e=>{var r;let n=e.current_plugin_version_id,i=t.installedWidgetVersions.widgets[e.id]||n&&(null==(r=t.publishedCanvasWidgetVersions[e.id])?void 0:r[n]);!i&&(d[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(p[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,o.qQ)(p)),e.dispatch((0,o.un)({widgetIDToVersions:d})),e.dispatch(l.dN({key:m}))}catch(t){e.dispatch(l.eD({key:m}))}}}},111120:(e,t,r)=>{r.d(t,{A1:()=>B,AQ:()=>H,B4:()=>Q,Cl:()=>en,D5:()=>eg,H:()=>er,HH:()=>el,Hg:()=>e_,Iy:()=>et,J9:()=>V,JP:()=>em,NO:()=>K,Nf:()=>ev,PH:()=>ea,P_:()=>ec,S1:()=>R,SP:()=>Z,T_:()=>ei,Vy:()=>W,YQ:()=>X,ZB:()=>k,cu:()=>D,eu:()=>eh,f$:()=>ef,fR:()=>z,fv:()=>J,g:()=>ee,i3:()=>es,jO:()=>q,jU:()=>j,jv:()=>eu,kp:()=>$,ku:()=>ep,lh:()=>F,mP:()=>ey,oW:()=>M,pv:()=>G,sS:()=>eo,v3:()=>ed,vU:()=>U,vh:()=>eE,wK:()=>Y,zu:()=>x});var n=r(237863),i=r(600486),a=r(764150),o=r(239299),l=r(448501),s=r(558011),c=r(458324),d=r(31642),u=r(970740),p=r(750274),m=r(644383),h=r(329660),_=r(448694),g=r(54055),f=r(189796),E=r(360530),y=r(966922),v=r(413810),b=r(242030),I=r(678910),T=r(326714),w=r(363402),S=r(902342),C=r(557581),O=r(82943),A=r(210831),N=r(51663),L=r(218609),P=r(721127);let R=(0,n.e)("INIT"),k=p.hydrate,D=(0,n.e)("USER_STATE_LOADED"),M=(0,n.e)("RELOAD_WHEN_CONVENIENT");(0,n.e)("HANDLE_URL_PARAMS_FOR_CURRENT_VIEW");let F=(0,n.e)("BROWSER_SET_TILE_SORT_VIEW"),x=(0,n.e)("BROWSER_SET_VIEW_BAR_VIEW_MODE_OPTIONS"),U=(0,n.e)("BROWSER_SET_VIEW_BAR_SORT_OPTIONS"),B=(0,n.e)("FILE_BROWSER_SET_LOADING"),V=(0,L.u4)((e,t)=>{var r,n;(null==(r=e.getState().modalShown)?void 0:r.type)!=null&&e.dispatch((0,P.hV)()),(null==(n=e.getState().dropdownShown)?void 0:n.type)!=null&&e.dispatch($()),e.dispatch(B({show:!0})),null==t||t.until.then(()=>{e.dispatch(B({show:!1}))}),A.Q.addDependency("FILE_BROWSER_SET_LOADING",(null==t?void 0:t.until)||"pending")}),G=(0,L.u4)((e,t)=>{C.J.getState().then(t=>{e.dispatch(W(t.data.meta)),e.dispatch(H(t.data.meta))}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||(0,u.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(m.R.enqueue({error:!0,message:n}))})}),H=(0,L.u4)((e,t)=>{let r=new s.W;r.sendToOtherTabs(S.f,t)}),W=p.setSessionState,K=(0,L.u4)((e,t)=>{let r=e.getState(),n=t.view||{view:"recentFiles"},i=(0,v.np)({...r,currentUserOrgId:t.workspace.orgId,currentTeamId:t.workspace.teamId||null},n),s=!(0,g.sg)(r.selectedView)&&(0,g.sg)(n);if(o.YO&&s){o.YO.openCommunity(i,t.workspace.userId);return}function c(){let e=(0,g.sg)(r.selectedView)&&!(0,g.sg)(n);o.YO&&e&&l.default.redirect((0,a.BT)((0,v.np)({...r,currentUserOrgId:t.workspace.orgId,currentTeamId:t.workspace.teamId||null},r.selectedView),{fuid:t.workspace.userId}))}if(e.dispatch(V()),t.path){(0,_.iP)("account_switched",r,{newUserId:t.workspace.userId,orgId:r.currentUserOrgId,newOrgId:t.workspace.orgId,teamId:r.currentTeamId,newTeamId:t.workspace.teamId,view:r.selectedView.view,newPath:t.path}),l.default.redirect((0,a.BT)(t.path,{fuid:t.workspace.userId})),c();return}(0,_.iP)("account_switched",r,{newUserId:t.workspace.userId,orgId:r.currentUserOrgId,newOrgId:t.workspace.orgId,view:r.selectedView.view,newView:n.view,newTeamId:t.workspace.teamId,teamId:r.currentTeamId}),(t.workspace.orgId&&!i.includes(t.workspace.orgId)||t.workspace.teamId&&!i.includes(t.workspace.teamId)||(0,g.sg)(n)&&!t.workspace.orgId&&r.currentUserOrgId)&&(0,b.fg)(t.workspace.userId,(0,g.sg)(n),t.workspace.orgId,void 0,t.workspace.teamId),(0,f.uB)()?N.h({action:"reloadPage",payload:{fuid:t.workspace.userId}}):(l.default.redirect((0,a.BT)(i,{fuid:t.workspace.userId})),c())}),z=(0,L.u4)((e,t)=>{d.ZP.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:t})=>{var r;let n=t.meta.id,i=`/app_auth/${n}/grant`,a=e.getState().authedUsers.orderedIds;a.length>0&&(i+=`?authed_ids=${a.join(",")}`),null==(r=o.YO)||r.startAppAuth(i),e.dispatch(m.R.enqueue({message:(0,u.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(t=>{console.error(t),e.dispatch(m.R.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))})}),Z=(0,n.e)("SHOW_DROPDOWN"),Y=(0,L.u4)((e,t)=>{let r=e.getState().dropdownShown;r||e.dispatch(Z(t))}),j=(0,n.e)("UPDATE_DROPDOWN_SELECTION"),$=(0,n.e)("HIDE_DROPDOWN"),q=(0,L.u4)((e,t)=>{let r=e.getState().dropdownShown;(null==r?void 0:r.type)===t.type?e.dispatch($()):e.dispatch(Z(t))}),X=(0,L.u4)((e,t)=>{(0,E.I)()?(0,I.q0)(t.url):l.default.redirect(t.url,"_blank")}),J=(0,n.e)("SELECT_VIEW");function Q(e,t={},r){return J({view:"folder",folderId:e,...t,...r?{folderViewTab:r}:{}})}function ee(e,t={},r){return J({view:"team",teamId:e,...t,teamViewTab:r})}let et=(0,n.e)("BEGIN_CREATE_NEW_FOLDER"),er=(0,n.e)("STOP_CREATE_NEW_FOLDER"),en=(0,n.e)("BEGIN_RENAME_NAV_FOLDER"),ei=(0,n.e)("STOP_RENAME_NAV_FOLDER"),ea=(0,n.e)("BEGIN_RENAME_NAV_TEAM"),eo=(0,n.e)("STOP_RENAME_NAV_TEAM"),el=(0,n.e)("SHOW_MOBILE_NAV"),es=(0,n.e)("HIDE_MOBILE_NAV"),ec=(0,n.e)("SET_LOCAL_FONTS"),ed=(0,n.e)("SEARCH_RESULT_CLICKED"),eu=(0,L.u4)((e,{index:t})=>{(0,i.L9)("Recent File Clicked",{index:t},{forwardToDatadog:!0})}),ep=(0,L.u4)((e,{fileKey:t,entrypoint:r,currentPlanFilter:n,currentSharedByFilter:i,viewMode:a})=>{(0,_.gc)(t,{state:e.getState(),entrypoint:r,planFilterId:null==n?void 0:n.planId,planFilterType:null==n?void 0:n.planType,sharedByFilter:i,viewMode:a})}),em=(0,L.u4)(e=>{(0,_.iP)("Font Installer Downloaded",e.getState())}),eh=(0,L.u4)(e=>{(0,_.iP)("Font Uninstaller Downloaded",e.getState())}),e_=(0,L.u4)((e,{clickedResourceType:t,resourceIdOrKey:r})=>{(0,_.iP)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:t,resourceIdOrKey:r})}),eg=(0,n.e)("TRACK_SIDEBAR_CLICK"),ef=(0,L.u4)((e,{orgId:t,teamId:r},{loadingKey:n})=>{let i=O.r.getTrashedFilesV2({orgId:t||"",teamId:r||""});(0,y.m)(i,e,n),i.then(t=>{let r=JSON.parse(t.response);e.dispatch(eE({deletedFiles:r.meta.files})),e.dispatch(ey({deletedRepos:r.meta.repos}))})}),eE=(0,n.e)("SET_DELETED_FILES"),ey=(0,n.e)("SET_DELETED_REPOS"),ev=(0,L.u4)(async(e,{previousView:t,openInNewTab:r,onSubmitReturnToPrevView:n,isEduTeam:i,ignoreCurrentPlan:a})=>{let o=e.getState();if(r){let t=(0,v.hM)(o,{view:"teamCreation",ignoreCurrentPlan:a});e.dispatch(X({url:t}));return}let l=(0,c.hv)("starter_team_loophole_experiment_m0"),s=(0,c.hv)("starter_team_loophole_experiment_m1"),[d,u]=await Promise.all([l,s]);o.user&&(0,h.hy)({userId:o.user.id,teams:Object.values(o.teams),rolesByTeamId:o.roles.byTeamId,getM0Config:()=>d,getM1Config:()=>u})?e.dispatch(J({view:"teamUpgrade",teamFlowType:w.wD.CREATE_AND_UPGRADE,teamId:null,paymentStep:T.KB.PLAN_COMPARISON,previousView:t,isEduTeam:i,ignoreCurrentPlan:a})):o.user&&(0,h.me)(o.user.id,Object.values(o.teams),o.roles.byTeamId)?e.dispatch(J({view:"teamUpgrade",teamFlowType:w.wD.CREATE,teamId:null,paymentStep:T.KB.CREATE_TEAM,previousView:t,isEduTeam:i,ignoreCurrentPlan:a})):e.dispatch(J({view:"teamCreation",previousView:t,onSubmitReturnToPrevView:n,isEduTeam:i,ignoreCurrentPlan:a}))})},88063:(e,t,r)=>{r.d(t,{D1:()=>i,OS:()=>d,xA:()=>n});var n,i,a=r(716250),o=r(303498),l=r(31642),s=r(313653),c=r(218609);let d=(e,t,r,n,i)=>{var a,l;e.id&&"optimistic-id"!==e.id?null==(a=(0,o.i0)())||a.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:r,teamId:n,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},i):null!=t&&(null==(l=(0,o.i0)())||l.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:t,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:r,teamId:n,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},i))};(e=>{e.put=(0,c.Vh)("FILE_BROWSER_PREFERENCES_PUT",(e,t)=>{var r;let n=null==(r=e.getState().user)?void 0:r.id,i=e.getState().currentUserOrgId,o=(0,a.BZ)().ps_benchmark?e.getState().currentTeamId:null,s=l.ZP.put("/api/file_browser_preferences",{ordered_team_ids:t.prefs.orderedTeamIds,ordered_favorites:t.prefs.orderedFavoritedResourceIds,org_id:i,team_id:o,ordered_license_group_ids:t.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:t.prefs.orderedSidebarSections});d(t.prefs,n,i,o,s)}),e.createFileBrowserPreferencesForTeamUser=(0,c.u4)((e,t)=>{var r,n,i,a;let o=null==(r=e.getState().user)?void 0:r.id,s=e.getState().currentTeamId,c=t.teamUser,u=t.prefs.orderedFavoritedResourceIds,p=[];if(u)for(var m of u)((null==(n=c.favoritedFiles)?void 0:n.some(e=>e.id===m))||(null==(i=c.favoritedPrototypes)?void 0:i.some(e=>e.id===m)))&&p.push(m);let h=(null==(a=c.favoritedProjects)?void 0:a.filter(e=>t.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id))??[];p.push(...h);let _=l.ZP.put("/api/file_browser_preferences",{ordered_favorites:p,team_id:s});d({id:"optimistic-id",orderedFavoritedResourceIds:p},o,null,s,_)})})(n||(n={})),(i||(i={})).put=(0,c.Vh)("FILE_BROWSER_SECTION_PREFERENCES_PUT",(e,t)=>{var r,n,i;let a=null==(r=e.getState().user)?void 0:r.id,c=e.getState().currentUserOrgId;if(t.userInitiated){let r=l.ZP.put(`/api/file_browser_preferences/section/${t.prefs.section_type}`,{...t.prefs,org_id:c}).catch(t=>{var r;e.dispatch(s.l.error((null==(r=t.data)?void 0:r.message)||"An error occurred.")),console.error(t)});t.prefs.id?null==(n=(0,o.i0)())||n.optimisticallyUpdate({FileBrowserSectionPreferences:{[t.prefs.id]:{orderedFolderIds:t.prefs.ordered_folder_ids,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,orgId:c}}},r):null!=a&&(null==(i=(0,o.i0)())||i.optimisticallyCreate({FileBrowserSectionPreferences:{"optimistic-id":{userId:a,orderedFolderIds:t.prefs.ordered_folder_ids||null,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,updatedAt:new Date,createdAt:new Date,orgId:c}}},r))}})},489465:(e,t,r)=>{r.d(t,{U8:()=>R,ae:()=>P,lO:()=>M,mp:()=>k});var n=r(237863),i=r(600486),a=r(764150),o=r(239299),l=r(448501),s=r(337167),c=r(637635),d=r(600470),u=r(286206),p=r(117986),m=r(342942),h=r(721127),_=r(837728),g=r(532912),f=r(706039),E=r(158774),y=r(61669),v=r(189796),b=r(738285),I=r(764850),T=r(761767),w=r(841017),S=r(956296),C=r(614860),O=r(656077),A=r(818709),N=r(787618),L=r(218609);let P=(0,L.u4)((e,{state:t,from:r,editorType:n,team:i,openNewFileIn:a,fileName:o,folderId:l,callback:s,presetName:c,inFileCreationDefaultsExp:d,figjamAiNewFileData:u})=>{var p;if(i&&("design"===n&&!(0,w.bw)(i,{type:w.Xy.ADD_DESIGN_FILE})||"whiteboard"===n&&!(0,w.bw)(i,{type:w.Xy.ADD_FIGJAM_FILE}))){(null==(p=i.restrictions_list)?void 0:p.includes(T.ZG.LOCKED))||l?e.dispatch(h.K4({type:N.yd,data:{team:i,resource:C.Q3.FILE,action:d?A.XH.CREATE_FILE_FROM_DROPDOWN:A.XH.CREATE_FILE,editorType:n,currentPlan:f.V.Plan.STARTER,upsellPlan:f.V.Plan.PRO}})):e.dispatch(h.K4({type:N.yd,data:{team:i,resource:C.Q3.FILE,action:A.XH.CREATE_FILE,editorType:n,currentPlan:f.V.Plan.STARTER,upsellPlan:f.V.Plan.PRO}})),s&&s(null);return}let m=l?{folderId:l}:r!==O.L7.FILE_BROWSER_SIDEBAR_DRAFTS&&r!==O.L7.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL&&r!==O.L7.FILE_BROWSER_TOOLBAR_RECENTS&&r!==O.L7.FILE_BROWSER_TOOLBAR_DRAFTS&&i?null:"drafts",g=(0,_.$1)(t,a,m,{from:r,selectedView:t.selectedView},n,o,s,u);c&&(g.framePresetName=c),e.dispatch(D(g))}),R=(0,L.u4)((e,t)=>{e.dispatch(D(t))}),k=(0,L.u4)((e,{file:t,openNewFileIn:r,source:n})=>{let a=e.getState().user;if(!a)return;let l=()=>{let a=(0,S.y)(t,r);e.dispatch(R(a)),(0,i.L9)("New Autosave File Open",{openNewFileIn:r,source:n})};o.YO?l():(0,g.mX)(a.id,t).then(r=>{if(r){e.dispatch(h.K4({type:m.d,data:{file:t}}));return}l()})}),D=(0,L.u4)((e,t)=>{if((0,v.uB)()||!t.allowOnDesktop&&600>(0,y.s)())return;let r=(0,b.HP)(t);if(E.Gr.resetLoadedFigFile(),o.YO){if(t.allowOnDesktop)(0,b.TV)(e,t,!1);else{(0,b.cU)(e,t);return}}else if(t.openNewFileIn===O.JD.NEW_TAB){let e=(0,d.cv)(r);l.default.redirect(`/file/new${e?"?"+e:""}`,"_blank")}else if((0,a.km)(e.getState().currentUserOrgId,t.org_id)){s.n_.get(c.b)&&(0,u.Jz)(p.k.SCENEGRAPH_AND_SYNC,Error("Trying to switching org ids while in offline file browser"));let e=(0,d.cv)(r);l.default.redirect(`/file/new${e?"?"+e:""}`)}else(0,b.TV)(e,t,!1);(0,y.Z)();let n=t.openNewFileIn===O.JD.SAME_TAB&&(!o.YO||t.allowOnDesktop)?I.oum.HIDE_UI:I.oum.OFF;e.dispatch(M({openNewFileIn:t.openNewFileIn,progressBarMode:n}))}),M=(0,n.e)("FULLSCREEN_NEW_FILE_OPEN")},266377:(e,t,r)=>{r.d(t,{CL:()=>D,Dt:()=>U,FH:()=>L,IV:()=>O,QS:()=>R,Ue:()=>N,YA:()=>S,YW:()=>I,ZH:()=>A,ZW:()=>B,Zd:()=>w,cb:()=>T,gz:()=>M,iU:()=>k,kg:()=>C,pQ:()=>V,tT:()=>F,v_:()=>x,zD:()=>P});var n=r(237863),i=r(716250),a=r(303498),o=r(980220),l=r(31642),s=r(313653),c=r(970740),d=r(644383),u=r(111120),p=r(721127),m=r(448694),h=r(999177),_=r(761767),g=r(958550),f=r(298331),E=r(220958),y=r(922116),v=r(218609),b=r(798354);let I=(0,v.Vh)("FOLDER_DESCRIPTION_UPDATE",(e,t,{optimistId:r})=>{l.ZP.put(`/api/folders/${t.folderId}/description`,{description:t.description}).then(({data:t})=>{e.dispatch(v.w2.commit(r)),e.dispatch(M({folder:t.meta}))}).catch(t=>{e.dispatch(v.w2.commit(r)),console.error(t),e.dispatch(s.l.error((0,c.t)("file_browser.file_browser_actions.update_subscription_error")))})}),T=(0,v.Vh)("FOLDER_UNPIN_FILE",(e,t,{optimistId:r})=>{l.ZP.del(`/api/folders/${t.fileKey}/pin`).then(t=>{e.dispatch(v.w2.commit(r))}).catch(t=>{e.dispatch(v.w2.revert(r)),e.dispatch(s.l.flash(t.message||(0,c.t)("file_browser.file_browser_actions.file_unpin_error")))})}),w=(0,v.Vh)("FOLDER_PIN_FILE",async(e,t,{optimistId:r})=>{(0,m.Qs)("file_browser_folder_pin_file",t.folderId,null,e.getState(),{fileKey:t.fileKey}),await l.ZP.post(`/api/folders/${t.fileKey}/pin`).then(t=>{e.dispatch(v.w2.commit(r)),e.dispatch(d.R.enqueue({error:!1,message:(0,c.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(t=>{e.dispatch(v.w2.revert(r)),e.dispatch(s.l.flash(t.message||(0,c.t)("file_browser.file_browser_actions.file_pin_error")))})}),S=(0,n.e)("FOLDER_SET_PINNED_FILE"),C=(0,n.e)("FOLDER_DELETE_LG_SHIM"),O=(0,n.e)("FOLDER_DELETE"),A=(0,n.e)("FOLDER_CLEAR"),N=(0,v.u4)((e,t)=>{let r=(0,h.bo)(t.name);if(r)return e.dispatch(s.l.error(r)),null;e.dispatch(p.eI()),e.dispatch(u.H());let n=(0,g.IQ)(t.teamId,t.orgId||null);if(n&&void 0===t.isInviteOnly&&void 0===t.isViewOnly&&void 0===t.teamAccess)return e.dispatch(s.l.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let i={id:(0,h.e1)(),name:t.name,description:null,path:t.name,team_id:t.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},appData:{temp:!0},deleted_at:null,sharing_audience_control:null,team_access:null},a=n?t.sharingAudienceControl:null,d=n?t.teamAccess:null,v=l.ZP.post("/api/folders",{team_id:t.teamId,path:t.name,is_invite_only:t.isInviteOnly,is_view_only:t.isViewOnly,sharing_audience_control:a,team_access:d}).then(({data:r})=>{var a;e.dispatch(O({folderIds:[i.id]}));let o=r.meta;for(let r of o)if(r.name===t.name){if(e.dispatch(x(r)),n){(0,m.Qs)("Folder Created",r.id,r.team_id,e.getState());let n=e.getState().user;(null==(a=t.inviteEmails)?void 0:a.length)&&t.teamAccess&&e.dispatch((0,f.Pv)({emails:t.inviteEmails,emailsToExclude:n?new Set([n.email]):void 0,resourceType:_._g.FOLDER,resourceIdOrKey:r.id,level:t.inviteLevel||E.V.VIEWER,source:"new_project_creation_modal"})),y.$.getRoles({resourceId:r.id,resourceType:_._g.FOLDER}).then(({data:t})=>{let r=t.meta;for(let t of r)e.dispatch(b.v_({role:t}))})}t.shouldRedirect&&e.dispatch(u.fv({view:"folder",folderId:r.id}));break}return o});return(0,o.T)({store:e,requestPromise:v,fallbackError:(0,c.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:x(i)})}),L=(0,v.u4)((e,{folderId:t,folderName:r,teamId:n,isSubscribed:s})=>{let d=s?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,m.Qs)(d,t,n,e.getState());let u=l.ZP.put(`/api/folders/${t}`,{is_subscribed:s});if(s)(0,a.i0)().optimisticallyCreate({ProjectSubscription:{[`optimistic-${t}`]:{folderId:t,userId:(0,i.ZP)().user_data.id,projectV2:{id:t,path:r,updatedAt:new Date,createdAt:new Date,deletedAt:null,viewOnlyAt:null,inviteOnlyAt:null,orgId:(0,i.ZP)().org_id||null,teamId:n,canRead:!0,canEdit:!1}}}},u);else{let e=(0,a.i0)();G[t]&&e.optimisticallyDelete({ProjectSubscription:{[G[t]]:null}},u)}(0,o.T)({store:e,requestPromise:u,fallbackError:(0,c.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:M({folder:{id:t,is_subscribed:s}})})}),P=(0,n.e)("FOLDER_LOAD"),R=(0,v.u4)(async(e,{folderId:t})=>{try{await l.ZP.post(`/api/folders/${t}/claim`),e.dispatch(P({folderId:t,forceFetch:!0}))}catch(t){e.dispatch(s.l.error(t.message||(0,c.t)("file_browser.file_browser_actions.claim_team_error")))}}),k=(0,n.e)("FOLDER_PUT_UPDATED_AT"),D=(0,n.e)("FOLDER_LOADED"),M=(0,n.e)("FOLDER_PUT"),F=(0,n.e)("FOLDER_BATCH_POST"),x=(0,n.e)("FOLDER_POST"),U=(0,n.e)("FOLDER_STOP_RENAME"),B=(0,n.e)("FOLDER_BEGIN_RENAME"),V=e=>{G=e},G={}},983824:(e,t,r)=>{r.d(t,{cZ:()=>l,co:()=>s,fz:()=>o});var n=r(237863),i=r(220949),a=r(218609);let o="Used Keyboard Shortcut Paste",l=(0,n.e)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),s=(0,a.wV)("USED_KEYBOARD_SHORTCUT",(e,t)=>{"paste"===t.key&&(0,i.m_)({id:o})})},954109:(e,t,r)=>{r.d(t,{$J:()=>tE,A5:()=>eN,FV:()=>eU,Fe:()=>ef,HU:()=>tm,It:()=>tb,JD:()=>tw,Ju:()=>e0,Kh:()=>tT,Kp:()=>th,Kz:()=>e6,L1:()=>ez,MX:()=>tL,OJ:()=>eC,P7:()=>eq,Pz:()=>eM,S4:()=>ej,SK:()=>tf,SY:()=>tk,TR:()=>tP,UP:()=>eF,V1:()=>ek,VP:()=>ev,W$:()=>eT,Xo:()=>tt,YI:()=>td,Z7:()=>eb,ZV:()=>tp,_2:()=>tl,_J:()=>t_,aK:()=>ts,bg:()=>eA,dA:()=>ta,gT:()=>tI,gx:()=>eS,iM:()=>ty,jM:()=>eE,jd:()=>e_,k$:()=>eR,kZ:()=>eP,kq:()=>eL,lo:()=>tc,nU:()=>eg,n_:()=>tu,oh:()=>tN,os:()=>e8,qL:()=>e4,rS:()=>e$,sH:()=>ew,t1:()=>eO,tZ:()=>eV,t_:()=>eQ,to:()=>tA,um:()=>eD,wz:()=>e7,xh:()=>tv,yK:()=>tr,ys:()=>e3});var n=r(407908),i=r(237863),a=r(600486),o=r(382778),l=r(269658),s=r(598271),c=r(716250),d=r(303498),u=r(870077),p=r(286206),m=r(117986),h=r(518484),_=r(31642),g=r(297296),f=r(313653),E=r(970740),y=r(644383),v=r(299370),b=r(218609),I=r(215698),T=r(721154),w=r(249683),S=r(721127),C=r(864974),O=r(688506),A=r(448694),N=r(837728),L=r(508887),P=r(334245),R=r(667981),k=r(158774),D=r(961215),M=r(269075),F=r(545577),x=r(403968),U=r(424479),B=r(271774),V=r(70918),G=r(112088),H=r(57013),W=r(481508),K=r(795153),z=r(436649),Z=r(558443),Y=r(653696),j=r(966922),$=r(413810),q=r(531640),X=r(242030),J=r(51756),Q=r(166885),ee=r(938110),et=r(3866),er=r(220949),en=r(151018),ei=r(864533),ea=r(76542),eo=r(845680),el=r(152691),es=r(802337),ec=r(772485),ed=r(762621),eu=r(272583),ep=r(28786),em=r(113454),eh=r(965020);let e_="Component Shared Symbol Inserted",eg=async(e,t=D.Glg.ACTIVE_SCENE)=>{let r;if(!e.canvas_url&&t===D.Glg.PLAYGROUND_SCENE){let t=D.Ekn.upsertLocalProductComponentToPlaygroundScene(e.node_id);return{newSymbolOrStateGroupGuid:t}}let n=await R.uK.getCanvas(e);if(e.type===Q.h3.COMPONENT){let i=M.y2.system("upsert-shared-symbol",()=>D.Ekn.upsertSharedSymbol(e.component_key??g.lG.INVALID,e.content_hash??g.Dl.INVALID,e.file_key,D.e9h.NO,n,t));if(i.fileUpdateRequired)return;if(!i.localGUID)throw Error("Swap to Shared Component Error, no local GUID");r=i.localGUID}else if(e.type===Q.h3.STATE_GROUP){let i=M.y2.system("upsert-shared-state-group",()=>D.Ekn.upsertSharedStateGroup(e.key,e.version,e.file_key,D.e9h.NO,n,t));if(i.fileUpdateRequired)return;if(!i.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(i.C2)throw Error(i.C2);r=i.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:r,buffer:n}},ef=(0,b.u4)((e,t)=>{let{item:r,callback:n,bufferCallback:i,errorCallback:a,alwaysFetch:o,targetUpsertScene:l=D.Glg.ACTIVE_SCENE}=t,s=(0,N.bC)(e.getState());if(!s)return;let c=r.file_key!==s.key;c||o?eg(r,l).then(e=>{e&&(null==n||n(e.newSymbolOrStateGroupGuid),e.buffer&&(null==i||i(e.buffer)))}).catch(t=>{e.dispatch(f.l.error("An error occurred while retrieving the component or state group.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t),null==a||a()}):null==n||n(r.node_id)}),eE=(0,b.wV)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP",(e,t)=>{let{item:r,instanceGUIDs:n,usedSwapInstanceKeyboardShortcut:i,storeInRecentsKey:a}=t,o=(0,eu.tJ)(r,n);e.dispatch(ep.DB({key:o}));let l=e.getState(),s=(0,V.nm)(l);e.dispatch(t_({storeInRecentsKey:a,item:r,userId:s}));let c=(0,N.bC)(l);if(!c){e.dispatch(ep.eD({key:o}));return}eg(r).then(t=>{if(t){let a=r.type===Q.h3.STATE_GROUP?D.iTB.getSimilarStates(n,t.newSymbolOrStateGroupGuid,r.default_state_key):{[t.newSymbolOrStateGroupGuid]:n};M.y2.user("replace-symbol-backing-instances",()=>{D.iTB.replaceSymbolBackingInstances(a,i)}),e.dispatch(ep.dN({key:o})),(0,eh.A)(c.key,r,!0)}}).catch(t=>{e.dispatch(ep.eD({key:o})),e.dispatch(f.l.error("An error occurred while adding an instance of this component.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t),(0,eh.A)(c.key,r,!1)}),(0,A.hp)("Instance Swapped To Shared Component",c.key,e.getState(),{componentFileKey:r.file_key,componentId:r.id,source:t.sourceForTracking})}),ey="<!--(figcomponent)",ev=(0,b.wV)("TRY_HANDLING_DROP_EVENTS_AS_COMPONENT_DROP",(e,t)=>{var r;let n=null==(r=t.dataTransfer)?void 0:r.getData("text/html");if(n){let r=n.indexOf(ey)+ey.length,i=n.indexOf("(/figcomponent)-->");if(r>=0&&i>=0&&r<i){let a=n.substring(r,i).trim();try{let r=JSON.parse(a);if("object"==typeof r){let n=r.fileKey,i=r.nodeId;if(n&&i){let r=k.Gr.getViewportInfo(),a=new h.OW(r.x,r.y),o=new h.OW(t.clientX,t.clientY).subtract(a),l=(0,B.NL)(r,o);e.dispatch(eb({fileKey:n,nodeId:i,canvasX:l.x,canvasY:l.y}))}}}catch(e){}}}}),eb=(0,b.u4)(async(e,t)=>{let{fileKey:r,nodeId:n,canvasX:i,canvasY:a}=t,o=e.getState(),l=(0,N.bC)(o),s=null;if(l&&l.key===r)s=o.library.local.components[n];else{o.fileByKey[r]||(await e7(e,r),o=e.getState());let t=o.fileByKey[r];if(t){let i=(0,G.ti)(o.library.published.components,t);(s=i[n])||(await e7(e,r),o=e.getState(),s=(0,G.ti)(o.library.published.components,t)[n])}}s?e.dispatch(eT({item:s,canvasPosition:new h.OW(i,a),percentageOffset:new h.OW(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(y.R.enqueue({type:"insert_component_error",message:(0,E.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))});function eI(e){return e(y.R.enqueue({type:"insert_instance",message:(0,E.t)("design_systems.subscriptions.inserting_instance"),icon:v.B4.SPINNER,delay:1e3})),function(){e(y.R.dequeue({matchType:"insert_instance"}))}}let eT=(0,b.wV)("INSERT_SHARED_COMPONENT",async(e,t)=>{let{item:r}=t,{canvasPosition:n,percentageOffset:i,insertAsChildOfCanvas:a,isFromDoubleClick:o,useSmartPositioning:l,storeInRecentsKey:d,fromPlayground:u,insertLogArgsOverride:h,insertedItemsCallback:_}=t,E=e.getState(),y=(0,P.mY)(r.file_key)&&!!(0,c.BZ)().presets_baseline,v=(0,P.Xs)(r.file_key,E.hubFiles),b=v&&!E.userFlags.apple_eula_accepted,I=async()=>{let t=(0,V.nm)(E);e.dispatch(t_({storeInRecentsKey:d,item:r,userId:t}));let v=(0,N.bC)(E);if(!v)return;let b=(t,r)=>{let o=M.y2.user("insert-component",()=>u?D.iTB.insertPlaygroundInstance({x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y}):D.iTB.insertInstance(t,{x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y},r,a,l??!1,y));if(_&&_([o]),((0,O.Y)()||(0,c.BZ)().presets_baseline)&&o!==s.A0){let r=(0,Z.EU)(U.TSSceneGraph.instance.get(t)),n=E.mirror.sceneGraph.get(o),i=n&&"INSTANCE"===n.type&&n.componentProperties(),a=Object.keys(i||{}).length>0;r&&a?(e.dispatch(em._({nodeId:o})),(0,er.m_)({id:et.NU})):r?(e.dispatch(em._({nodeId:o})),(0,er.m_)({id:et.lN})):a?(0,er.m_)({id:et.iJ}):(0,er.m_)({id:et.I2})}k.Gr.triggerAction("commit"),k.Gr.triggerAction("set-tool-default")},I=v.key===r.file_key;if(I){let t=E.library.local.components[r.node_id];if(!t||!E.mirror.sceneGraph.get(t.node_id)){e.dispatch(S.K4({type:ed.Z}));return}try{b(t.node_id,h),(0,A.hp)("Component Local Symbol Inserted",v.key,e.getState(),{componentFileKey:r.file_key,componentId:r.id,ComponentCanvasPositionX:n.x,ComponentCanvasPositionY:n.y}),(0,eh.A)(v.key,t,!0),e.dispatch(tR())}catch(r){e.dispatch(f.l.error("An error occurred while adding an instance of this component.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,r),(0,eh.A)(v.key,t,!1)}}else{let t=performance.now();if(eX&&eX===r.component_key&&eJ){let e=(await eJ).component;e&&e.updated_at>r.updated_at&&(r=e)}let i=eI(e.dispatch);R.uK.getCanvas(r).then(e=>{let t=M.y2.system("upsert-shared-symbol",()=>D.Ekn.upsertSharedSymbol(r.component_key??g.lG.INVALID,r.content_hash??g.Dl.INVALID,r.file_key,D.e9h.NO,e,D.Glg.ACTIVE_SCENE));if(t.fileUpdateRequired||!t.localGUID)throw Error("An error occurred while adding an instance of this component.");b(t.localGUID,h)},e=>{let t=D.iTB.getSymbolNodeId(r.component_key,r.content_hash);if(!t){if((null==e?void 0:e.status)===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}b(t,h)}).then(()=>{let i=performance.now()-t;(0,A.hp)(e_,v.key,e.getState(),{elapsedMs:i,componentFileKey:r.file_key,componentId:r.id,componentName:r.name,ComponentCanvasPositionX:n.x,ComponentCanvasPositionY:n.y,isFromDefaultLibrary:(0,G.XG)(E.library,r.file_key),isFromDoubleClick:!!o,useSmartPositioning:!!l}),(0,eh.A)(v.key,r,!0,{metricName:"design_systems.subscribed_component.insert_time",duration:i}),e.dispatch(tR())}).catch(n=>{e.dispatch(f.l.error(n.message)),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,n),(0,eh.A)(v.key,r,!1,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-t})}).finally(()=>{i()})}};b?e.dispatch(S.K4({type:ec._K,data:{onAgree:async()=>{await I(),e.dispatch(S.h0({type:ec._K.type}))}}})):await I()}),ew=(0,b.wV)("INSERT_SHARED_STATE_GROUP",async(e,t)=>{let{item:r}=t,{canvasPosition:n,percentageOffset:i,insertAsChildOfCanvas:a,isFromDoubleClick:o,useSmartPositioning:l,storeInRecentsKey:d,fromPlayground:u,insertLogArgsOverride:h,insertedItemsCallback:_}=t,E=e.getState(),y=(0,P.Xs)(r.file_key,E.hubFiles),v=y&&!E.userFlags.apple_eula_accepted,b=async()=>{let t=(0,V.nm)(E);e.dispatch(t_({storeInRecentsKey:d,item:r,userId:t}));let y=(0,N.bC)(E);if(!y)return;let v=(e,t,r)=>{let o=M.y2.user("insert-state-group",()=>u?D.iTB.insertPlaygroundInstance({x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y}):D.iTB.insertStateGroup(e,{x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y},r,a,l??!1,t));return _&&_([o]),k.Gr.triggerAction("commit"),k.Gr.triggerAction("set-tool-default"),o},b=y.key===r.file_key;if(b){let t=E.library.local.stateGroups[r.node_id];if(!t||!E.mirror.sceneGraph.get(t.node_id)){e.dispatch(S.K4({type:ed.Z}));return}v(t.node_id,"",h),(0,A.hp)("State Group Local Symbol Inserted",y.key,e.getState(),{stateGroupFileKey:r.file_key,stateGroupId:r.id,StateGroupCanvasPositionX:n.x,StateGroupCanvasPositionY:n.y}),e.dispatch(tR())}else{let t=performance.now();if(e1&&e1===r.key&&e2){let e=await e2;e&&e.updated_at>r.updated_at&&(r=e)}let i=eI(e.dispatch);R.uK.getCanvas(r).then(t=>{var n;let i=M.y2.system("upsert-shared-state-group",()=>D.Ekn.upsertSharedStateGroup(r.key??g.No.INVALID,r.version,r.file_key,D.e9h.NO,t,D.Glg.ACTIVE_SCENE));if(i.fileUpdateRequired||!i.localGUID)throw Error("An error occurred while adding an instance of this component.");let a=v(i.localGUID,r.default_state_key,h);if((0,O.Y)()||(0,c.BZ)().presets_baseline){let t=null==(n=E.mirror.sceneGraph.get(i.localGUID))?void 0:n.childrenNodes[0];if(t){let r=(0,Z.EU)(t);r&&a!==s.A0?(e.dispatch(em._({nodeId:a})),(0,er.m_)({id:et.NU})):(0,er.m_)({id:et.iJ})}}},e=>{let t=D.iTB.getStateGroupNodeId(r.key,r.version);if(!t)throw Error("An error occurred while adding an instance of this component.");v(t,"",h)}).then(()=>{(0,A.hp)("State Group Shared Symbol Inserted",y.key,e.getState(),{stateGroupFileKey:r.file_key,stateGroupId:r.id,stateGroupName:r.name,StateGroupCanvasPositionX:n.x,StateGroupCanvasPositionY:n.y,isFromDefaultLibrary:(0,G.XG)(E.library,r.file_key),isFromDoubleClick:!!o}),(0,eh.A)(y.key,r,!0,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-t}),e.dispatch(tR())}).catch(n=>{e.dispatch(f.l.error(n.message)),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,n),(0,eh.A)(y.key,r,!1,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-t})}).finally(()=>{i()})}};v?e.dispatch(S.K4({type:ec._K,data:{onAgree:async()=>{await b(),e.dispatch(S.h0({type:ec._K.type}))}}})):await b()}),eS=(0,b.u4)(async(e,t)=>{if(!(0,c.BZ)().dse_editor_templates_v1&&!(0,c.BZ)().piper_templates)return;let{item:r}=t,{canvasPosition:n,percentageOffset:i,insertAsChildOfCanvas:a,useSmartPositioning:o,insertLogArgsOverride:l,storeInRecentsKey:s,insertedItemsCallback:d,fromPlayground:u}=t,h=e.getState(),_=(0,V.nm)(h);e.dispatch(t_({storeInRecentsKey:s,item:r,userId:_}));let b=(0,N.bC)(h);if(!b)return;let I=(e,t)=>{let r=M.y2.user("insert-module",()=>u?D.iTB.insertPlaygroundModuleUsage({x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y}):D.iTB.insertModule(e,{x:n.x,y:n.y,percentOffsetX:i.x,percentOffsetY:i.y},t,a,o??!1));return d&&d(r),k.Gr.triggerAction("commit"),k.Gr.triggerAction("set-tool-default"),r},T=b.key===r.file_key;if(T)I(r.node_id,l),e.dispatch(tR());else{let t=function(e){return e(y.R.enqueue({type:"insert_template",message:(0,E.t)("design_systems.subscriptions.inserting_template"),icon:v.B4.SPINNER,delay:1e3})),function(){e(y.R.dequeue({matchType:"insert_template"}))}}(e.dispatch);try{let e=await R.uK.getCanvas(r),t=M.y2.system("upsert-shared-module",()=>D.Ekn.upsertSharedModule(r.key??g.y7.INVALID,r.version??g.qH.INVALID,r.file_key,D.e9h.NO,e,D.Glg.ACTIVE_SCENE));if(t.fileUpdateRequired||!t.localGUID)throw Error("An error occurred while inserting this template.");I(t.localGUID,l)}catch(t){e.dispatch(f.l.error(t.message)),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)}t()}}),eC=(0,b.u4)(async(e,t)=>{let{stateGroups:r,usedItemsByKey:n,instanceIdsToUpdate:i,updateStartTime:a}=t,l=e.getState(),s=l.openFile;if(s)try{let t=await Promise.all(r.map(e=>R.uK.getCanvas(e))),c=new Set;for(let e=0;e<r.length;e++){let d=r[e],u=t[e];if(M.y2.user("update-shared-state-group",()=>{D.Ekn.updateSharedStateGroup(d.key,d.file_key,d.newStateKeyToOutdatedItems,i.map(o.R.toString),u,a)}),Object.keys(d.newStateKeyToOutdatedItems).length)for(let e of Object.values(d.newStateKeyToOutdatedItems)){let{localIdsToUpdate:t,oldSubscribedKeysToUpdate:r}=e;if((0,G.p2)(l.library,s,t,r,n)){c.add(d.file_key);break}}}k.Gr.triggerAction("commit");let d=r.map(e=>e.id);(0,A.hp)("Components Updated",s.key,e.getState(),{stateGroups:d}),c.size&&tS(e,c)}catch(t){e.dispatch(f.l.error("An error occurred while updating the instances of this component.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)}}),eO=(0,b.u4)(async(e,t)=>{let{components:r,usedItemsByKey:n,instanceIdsToUpdate:i,updateStartTime:a}=t,l=e.getState(),s=l.openFile;if(s)try{let t=await Promise.all(r.map(e=>R.uK.getCanvas(e))),c=new Set;for(let e=0;e<r.length;e++){let d=r[e],u=t[e];M.y2.user("update-shared-symbol",()=>{D.Ekn.updateSharedSymbol(d.component_key??g.lG.INVALID,d.file_key,d.oldSubscribedKeysToUpdate,d.localIdsToUpdate,i.map(o.R.toString),u,a)}),(d.localIdsToUpdate.length||d.oldSubscribedKeysToUpdate.length)&&(0,G.p2)(l.library,s,d.localIdsToUpdate,d.oldSubscribedKeysToUpdate,n)&&c.add(d.file_key)}k.Gr.triggerAction("commit");let d=r.map(e=>e.id);(0,A.hp)("Components Updated",s.key,e.getState(),{components:d}),c.size&&tS(e,c)}catch(t){e.dispatch(f.l.error("An error occurred while updating the instances of this component.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)}}),eA=(0,b.u4)((e,t)=>{let{style:r,inheritStyleKeyField:n,fromSearch:i}=t,o=e.getState(),l=(0,N.bC)(o),s=l&&r.file_key!==l.key,c=(0,P.Xs)(r.file_key,o.hubFiles),d=c&&!o.userFlags.apple_eula_accepted,u=()=>{e.dispatch(eN({style:r,callback:t=>{M.y2.user("apply-style-to-selection",()=>D.iTB.applyStyleToSelection(n,t,!0)),(0,a.L9)("Style Applied",{styleType:r.style_type,isShared:!!s,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!i,nonInteraction:0,styleKey:r.key,consumedVariableIds:D.pZy.getConsumedVariableIDs(r.node_id)})}}))};d?e.dispatch(S.K4({type:ec._K,data:{onAgree:()=>{u(),e.dispatch(S.h0({type:ec._K.type}))}}})):u()}),eN=(0,b.u4)((e,t)=>{var r,n;let i=e.getState(),{style:a}=t,o=(0,N.bC)(i);if(!o)return;let l=a.file_key!==o.key,s="GRID"===a.style_type&&!D.O$1.editorPreferences().showFrameGrids.getCopy();l?R.uK.getCanvas(a).then(async r=>{var n,i;null==(n=t.bufferCallback)||n.call(t,r);let o=M.y2.system("ensure-style-is-loaded",()=>D.Ekn.getOrCreateSubscribedStyleNodeId(a.key,a.content_hash??g.IT.INVALID,a.file_key,r));if(null==o||!o.fileUpdateRequired){if(t.omitFullscreenCommit||k.Gr.triggerAction("commit"),s&&((0,x.U2)(),D.O$1.editorPreferences().showFrameGrids.set(!0)),"TEXT"===a.style_type&&o&&o.localGUID){let t=e.getState().mirror.sceneGraph.get(o.localGUID),r=t&&t.fontName;r&&await (0,F.m9)(r.family,r.style).catch(()=>console.error(`Text style font did not load: ${r.family} ${r.style}`))}null==(i=t.callback)||i.call(t,o.localGUID)}}).catch(t=>{e.dispatch(f.l.error("An error occurred while applying the style to the selection.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)}):(s&&((0,x.U2)(),D.O$1.editorPreferences().showFrameGrids.set(!0)),null==(r=t.callback)||r.call(t,a.node_id),null==(n=t.bufferCallback)||n.call(t,void 0))}),eL=(0,b.u4)(async(e,t)=>{var r;let{styles:n,updateStartTime:i}=t,a=e.getState(),o=a.openFile;if(o)try{let t=await Promise.all(n.map(e=>R.uK.getCanvas(e))),a=new Set,l=e.getState();for(let e=0;e<n.length;e++){let r=n[e],s=t[e];M.y2.user("update-shared-style",()=>{D.Ekn.updateSharedStyle(r.key,r.file_key,r.content_hash??g.IT.INVALID,r.oldSubscribedKeysToUpdate,r.localIdsToUpdate,s,i)}),(0,G.p2)(l.library,o,r.localIdsToUpdate,r.oldSubscribedKeysToUpdate,l.library.used__LIVEGRAPH.styles)&&a.add(r.file_key)}k.Gr.triggerAction("commit");let s=n.map(e=>e.id);(0,A.hp)("Styles Updated",null==(r=l.openFile)?void 0:r.key,e.getState(),{styles:s}),a.size&&tS(e,a)}catch(t){e.dispatch(f.l.error("An error occurred while updating this style.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)}}),eP=(0,b.u4)((e,t)=>{let r=D.Ekn.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:n,oldStyleGUID:i,consumerGUIDsToUpdate:a}=t,{updateAsset:o,inheritStyleKeyFields:l}=n;R.uK.getCanvas(o).then(t=>{var n;let s=e.getState(),{content_hash:c}=o;if(!i)throw Error("guid to update can not be empty");if(!c)throw Error("content_hash not specified on style");let d=M.y2.user("update-selected-shared-style-consumers",()=>D.Ekn.updateSelectedSharedStyleConsumers(o.key,o.file_key,c,o.oldSubscribedKeysToUpdate,o.localIdsToUpdate,l,a,i,t,r));if(k.Gr.triggerAction("commit"),!d)throw Error("unable to update");(0,A.hp)("Styles Updated",null==(n=s.openFile)?void 0:n.key,e.getState(),{styles:[o.id]})}).catch(t=>{e.dispatch(f.l.error("An error occurred while updating this style.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)})}),eR=(0,b.u4)(e=>{(0,G.Ar)(e)}),ek=(0,b.u4)((e,t)=>{let{variableSets:r,updateStartTime:n}=t,i=e.getState(),a=i.openFile;a&&Promise.all(r.map(e=>R.uK.getCanvas(e))).then(e=>{for(let t=0;t<r.length;t++){let i=r[t],a=e[t];M.y2.user("update-shared-variable-set",()=>{D.Ekn.updateSharedVariableSet(i.node_id,(0,Q.z4)(i)?[]:i.libraryVariableIdsForUpdate,a,n)})}k.Gr.triggerAction("commit")}).catch(t=>{e.dispatch(f.l.error("An error occurred while updating this variable collection")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t)})}),eD=async e=>{let t=await R.uK.getCanvas(e),r=M.y2.system("upsert-shared-variable",()=>D.Ekn.upsertSharedVariable(e.node_id,D.e9h.NO,t));if(!r.fileUpdateRequired)return{buffer:t}},eM=(0,b.u4)((e,t)=>{let{item:r,callback:n,bufferCallback:i,errorCallback:a}=t,o=(0,N.bC)(e.getState());if(!o){null==a||a(Error("editing file not found"));return}"LIBRARY"===r.subscriptionStatus?eD(r).then(e=>{e&&(null==n||n(r.node_id),null==i||i(e.buffer))}).catch(t=>{e.dispatch(f.l.error("An error occurred while retrieving the variable.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t),null==a||a(t)}):null==n||n(r.node_id)}),eF=(0,b.u4)((e,t)=>new Promise((r,n)=>{e.dispatch(eM({item:t,callback:r,errorCallback:n}))})),ex=async e=>{let t=await R.uK.getCanvas(e),r=M.y2.system("upsert-shared-variable-set",()=>D.Ekn.upsertSharedVariableSet(e.node_id,D.e9h.NO,t));if(!r.fileUpdateRequired)return{buffer:t}},eU=(0,b.u4)((e,t)=>{let{item:r,callback:n,bufferCallback:i,errorCallback:a}=t,o=(0,N.bC)(e.getState());o&&("LIBRARY"===r.subscriptionStatus?ex(r).then(e=>{e&&(null==n||n(r.node_id),null==i||i(e.buffer))}).catch(t=>{e.dispatch(f.l.error("An error occurred while retrieving the variable collection.")),(0,p.Jz)(m.k.DESIGN_SYSTEMS_EDITOR,t),null==a||a()}):null==n||n(r.node_id))}),eB=(e,t,r)=>{let n={[Q.p3]:{}};t.forEach(e=>{e=(0,W.MW)(e),n[Q.p3][e.file_key]=n[Q.p3][e.file_key]||{},n[Q.p3][e.file_key][e.node_id]=e}),e.dispatch(w.uV({publishedItemsByTeamId:n,type:r}))};async function eV(e,t){let r=(0,$.Ij)(e.getState().selectedView),n=!(0,c.ZP)().user_data;if(n&&!r)return;let i=(0,eu.O1)(t);if(!(0,z.d4)(e.getState().loadingState,i)){(0,G.b_)();return}e.dispatch(ep.DB({key:i}));try{let r="whiteboard"===e.getState().selectedView.editorType?"figjam":"design",a=el.u.getLibrarySubscribedComponentsEditorType({key:t,editorType:r}),o=(0,L.Bl)(e)?eo.z.getCommunityLibrarySubscribedComponents({key:t}).catch(t=>((0,p.Jz)(m.k.COMMUNITY,t),e.dispatch(f.l.error((0,E.t)("community.library.error_fetching_subscribed_components"))),null)):Promise.resolve(null),[l,s]=await Promise.all([a,o]);n||await X.dI.promise,e.dispatch(T.qV({files:l.data.meta.files,subscribeToRealtime:!0})),l.data.meta.files.forEach(e=>{(0,G.Ov)(e.key)});let c=e.getState().fileByKey,d=l.data.meta.state_groups.map(e=>{var t;return{...e,team_id:null==(t=c[e.file_key])?void 0:t.team_id}}),u=l.data.meta.components.map(e=>{var t;return{...e,team_id:null==(t=c[e.file_key])?void 0:t.team_id}});e.dispatch(w.qV({items:d,type:Q.h3.STATE_GROUP})),e.dispatch(w.qV({items:u,type:Q.h3.COMPONENT})),e.dispatch(w.uP({libraries:l.data.meta.libraries})),s&&(e.dispatch(I.zQ(s.data.meta.hub_files)),s.data.meta.hub_files.forEach(e=>{(0,G.Ov)(e.id)}),e.dispatch(w.qV({items:s.data.meta.state_groups,type:Q.h3.STATE_GROUP})),e.dispatch(w.qV({items:s.data.meta.components,type:Q.h3.COMPONENT})),e.dispatch(w.uP({libraries:s.data.meta.libraries}))),(0,G.b_)(),e.dispatch(ep.dN({key:i})),H.Nh.queryDidChange(e)}catch(t){(0,G.b_)(),e.dispatch(ep.eD({key:i}))}}let eG=(e,t)=>`GET_DEFAULT_LIBRARIES_FOR_${e}_FV${t}`;async function eH(e){let t=e.getState().openFile,r=e.getState().fileVersion;if(!t||!r)return;let n=eG(t.key,r),i=e.getState().loadingState;if(!((0,z.B4)(i,n)||(0,z.hg)(i,n))){e.dispatch(ep.DB({key:n}));try{let t;let r=e.getState(),i="fullscreen"===r.selectedView.view&&"whiteboard"===r.selectedView.editorType;t=(0,c.BZ)().figjam_ngima_stickers&&i?await eK():await eW(),eB(e,t.data.meta.components,Q.h3.COMPONENT),eB(e,t.data.meta.state_groups,Q.h3.STATE_GROUP),t.data.meta.files.forEach(t=>{t.team_id=Q.p3,e.dispatch(T.gz({file:t}))});let a=t.data.meta.files.map(e=>e.key);e.dispatch(w.TL({fileKeys:a})),e.dispatch(w.uP({libraries:t.data.meta.libraries})),(0,G.Fv)(),e.dispatch(ep.dN({key:n}))}catch(t){(0,G.Fv)(),e.dispatch(ep.eD({key:n})),H.Nh.queryDidChange(e)}}}async function eW(){let e=await el.u.getDefaultLibraries();return e}async function eK(){let e;async function t(){try{let t=await el.u.getLibraryPublishedComponents({fileKey:e});return t}catch{return null}}e=window.location.origin.includes("staging.figma.com")?"3oeQNbicdVK70ytqmfZJhR":"Lm2ooVlwRmnYh0BpyxwZSZ";let[r,n]=await Promise.all([eW(),t()]);return n&&(r.data.meta.components.push(...n.data.meta.components),r.data.meta.state_groups.push(...n.data.meta.state_groups),r.data.meta.files.push(n.data.meta.file),r.data.meta.libraries.push(n.data.meta.library),r.data.meta.thumbnails.push(n.data.meta.library.thumbnail_url)),r}let ez=(0,b.u4)((e,t)=>{let r=e.getState().fileVersion||J.a;e.dispatch(ep.IV({key:(0,eu.O1)(t.openFileKey)})),e.dispatch(ep.IV({key:eG(t.openFileKey,r)}))}),eZ=new Set,eY=new Set;function ej(){eZ=new Set,eY=new Set}let e$=(0,b.u4)(async e=>{let t=e.getState();if(!t.user)return;await Y.g2;let r=(0,q.xj)(t),n=(0,q.Aq)(t);eq(r,n,e)}),eq=async(e,t,r,n)=>{var i,a;if(0===e.length&&0===t.length)return;let o=r.getState().openFile,l=r.getState().fileVersion;if(!o||!l)return;n=n??(0,G.b7)(r);let s=n.loadingKey;(0,z.hg)(r.getState().loadingState,s)&&await n.promise,r.dispatch(ep.DB({key:s})),"whiteboard"===o.editorType&&await G.wI;let c=r.getState(),d=[];if(e.length>0){let t=new Set((0,G.uv)(c.library.published.components).map(e=>e.component_key).concat((0,G.uv)(c.library.defaultPublished.components).map(e=>e.component_key)));d=e.filter(e=>!t.has(e)&&!eZ.has(e))}let u=[];if(t.length>0){let e=new Set((0,G.uv)(c.library.published.stateGroups).map(e=>e.key).concat((0,G.uv)(c.library.defaultPublished.stateGroups).map(e=>e.key)));u=t.filter(t=>!e.has(t)&&!eY.has(t))}try{if(d.length>0||u.length>0){let e=await _.ZP.post("/api/design_systems/components_state_groups",{component_keys:d,state_group_keys:u,org_id:c.currentUserOrgId,fv:l});d.forEach(e=>{eZ.add(e)}),u.forEach(e=>{eY.add(e)});let t=e.data.meta.components,n=e.data.meta.state_groups,i=e.data.meta.files;r.dispatch(T.qV({files:i,subscribeToRealtime:!0})),r.dispatch(w.aD({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let a=r.getState().fileByKey;(0,G.Iy)(t,Q.h3.COMPONENT,a,r.dispatch),(0,G.Iy)(n,Q.h3.STATE_GROUP,a,r.dispatch)}null==(i=n.callbackForComponent)||i.call(n,!0)}catch(e){null==(a=n.callbackForComponent)||a.call(n,!1)}n.resetPromise(),r.dispatch(ep.IV({key:s})),n.callback()},eX=null,eJ=null,eQ=async(e,t,r)=>{var n,i;try{let a=e.getState().fileVersion||0,o=await el.u.getLibraryComponentV2({componentKey:t,source:r,fv:a}),l=o.data.meta.file;l&&e.dispatch(T.gz({file:l}));let s=o.data.meta.component||null,c=o.data.meta.component_set||null,d=e.getState().fileByKey;if(s&&(s.team_id=null==(n=d[s.file_key])?void 0:n.team_id),c&&(c.team_id=null==(i=d[c.file_key])?void 0:i.team_id),l){let t={};t[s.node_id]=s,o.data.meta.state_components.forEach(e=>{t[e.node_id]=e}),e.dispatch(w.gz({itemsById:t,fileKey:l.key,teamId:l.team_id,type:Q.h3.COMPONENT})),o.data.meta.component_set&&e.dispatch(w.gz({itemsById:{[o.data.meta.component_set.key]:o.data.meta.component_set},fileKey:l.key,teamId:l.team_id,type:Q.h3.STATE_GROUP})),s&&R.uK.getCanvas(s)}return{component:s,parentStateGroup:o.data.meta.component_set||null}}catch(e){if((null==e?void 0:e.status)===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");console.error(e)}return{component:null,parentStateGroup:null}}},e0=(0,b.u4)((e,t)=>{eX=t.componentKey,eJ=eQ(e,t.componentKey,t.callsite)}),e1=null,e2=null,e3=async(e,t)=>{try{let r=e.getState().fileVersion||0,n=await el.u.getLibraryStateGroupFv({stateGroupKey:t,fileVersion:r}),i=n.data.meta,a={[i.node_id]:i},o=e.getState().fileByKey[i.file_key];if(!o)return i;return i.team_id=o.team_id,e.dispatch(w.gz({itemsById:a,fileKey:o.key,teamId:o.team_id,type:Q.h3.STATE_GROUP})),R.uK.getCanvas(i),i}catch(e){if((null==e?void 0:e.status)===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");console.error(e)}return null}},e4=async(e,t)=>{try{let r=await el.u.getLibraryStyleByKey({styleKey:t}),{style:n,file:i}=r.data.meta;return e.dispatch(T.gz({file:i})),R.uK.getCanvas(n),n}catch(e){if((null==e?void 0:e.status)===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");console.error(e)}return null}},e6=(0,b.u4)((e,t)=>{e1=t.stateGroupKey,e2=e3(e,t.stateGroupKey)}),e8="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function e9(e,t){var r,n,i,a;let o;if((0,z.hg)(e.getState().loadingState,e8))return;e.dispatch(ep.DB({key:e8})),await G.cC;let l=e.getState();if("fullscreen"!==l.selectedView.view){e.dispatch(ep.dN({key:e8}));return}let s=new Set,c=new Set;for(let e of l.recentlyUsed.libraryItems[t])e.type!==Q.h3.COMPONENT||!e.key||(null==(n=null==(r=l.library.published.components[e.team_id])?void 0:r[e.file_key])?void 0:n[e.node_id])?e.type!==Q.h3.STATE_GROUP||!e.key||(null==(a=null==(i=l.library.published.stateGroups[e.team_id])?void 0:i[e.file_key])?void 0:a[e.node_id])||c.add(e.key):s.add(e.key);if(0===s.size&&0===c.size){e.dispatch(ep.dN({key:e8}));return}try{o=await _.ZP.post("/api/design_systems/components_state_groups",{component_keys:Array.from(s),state_group_keys:Array.from(c),org_id:l.currentUserOrgId,fv:l.fileVersion})}catch(t){e.dispatch(ep.eD({key:e8}));return}e.dispatch(ep.dN({key:e8})),e.dispatch(T.qV({files:o.data.meta.files,subscribeToRealtime:!1})),e.dispatch(w.aD({subscribedOldKeyToNewKey:o.data.meta.move_remappings,localOldGuidToNewKey:{}}));let d=e.getState().fileByKey;(0,G.Iy)(o.data.meta.components,Q.h3.COMPONENT,d,e.dispatch),(0,G.Iy)(o.data.meta.state_groups,Q.h3.STATE_GROUP,d,e.dispatch)}let e5=async e=>{let{loadingState:t}=e.getState(),r=e.getState().openFile,n=e.getState().fileVersion;if(null==r||null===n)return;let i=(0,G.Be)(r.key,n);if(!(0,z.d4)(t,i))return;let a=el.u.getLibraryPublishedAndMovedComponentsFv({openFileKey:r.key,fileVersion:n});(0,j.m)(a,{dispatch:e.dispatch},i),G.aM.add(i);try{let t=await a;e.dispatch(T.qV({files:t.data.meta.files,subscribeToRealtime:!0})),(0,G.Ov)(r.key);let n=e.getState().fileByKey;(0,G.Iy)(t.data.meta.state_groups,Q.h3.STATE_GROUP,n,e.dispatch),(0,G.Iy)(t.data.meta.components,Q.h3.COMPONENT,n,e.dispatch),e.dispatch(w.aD({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:t.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,G.M)()};function e7(e,t,r=!1){let{loadingState:n}=e.getState();return r?(0,G.zE)(t,n,e.getState().fileVersion,e.dispatch):(0,G.ej)(t,n,e.getState().fileVersion,e.dispatch)}let te=e=>`LIBRARY${e?"_"+e:""}'_STATS'`,tt=K.t1.Query({fetch:async e=>{let t=await es.t.getOrgMigrationStatus({orgId:e});return t.data.meta},enabled:e=>!!e}),tr=K.t1.Query({fetch:async e=>await tn(l.V.dispatch,e),key:"libraryStats"}),tn=async(e,t)=>{let r=es.t.getLibraries({orgId:t,fv:J.a}),n=te(t);(0,j.m)(r,{dispatch:e},n);try{let t=await r,n=t&&t.data&&t.data.meta||[],i=0,a=0,o=0,l=0,s=0,c=0,d=0,u=[],p=[],m=[],h=new Set;for(let e of n)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!h.has(e.team_id)&&(h.add(e.team_id),c++),u.push(e),p.push(e.file),e.thumbnail_url&&m.push({file_key:e.library_file_key,thumbnail_url:e.thumbnail_url}),i+=e.num_components,o+=e.num_styles,l+=e.num_variable_collections,e.num_state_groups=0,a+=e.num_state_groups,s+=e.num_module_assets,d++);return p.length>0&&e(T.qV({files:p,subscribeToRealtime:!1})),m.length>0&&e(w.uP({libraries:m})),{totalComponents:i,totalStateGroups:a,totalStyles:o,totalVariableCollections:l,totalModuleAssets:s,teamsWithLibraries:c,totalLibraries:d,files:u}}catch(e){return Q.tE}},ti=K.t1.Query({fetch:e=>to(e),key:"libraryInfo"});function ta(e,t={}){let r=(0,K.aM)(ti(e),t),i=(0,n.I0)(),[a]=r;return(0,u.ub)(a,e=>{let t=e.files.map(e=>e.file);t.length>0&&i(T.qV({files:t,subscribeToRealtime:!1})),e.libraries.length>0&&i(w.uP({libraries:e.libraries}))}),r}let to=async({currentOrgId:e,excludeDrafts:t,subscriptionFileKey:r,includeThumbnails:n})=>{let i=el.u.getLibraries({orgId:e,fv:J.a,subscriptionFileKey:r||void 0,includeThumbnails:n});try{let e=await i,r=e&&e.data&&e.data.meta||[],a=0,o=0,l=0,s=0,c=0,d=0,u=0,p=[],m=[],h=[],_=new Set;for(let e of r)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!t||e.team_id)&&(e.team_id&&!_.has(e.team_id)&&(_.add(e.team_id),d++),p.push(n?{...e,thumbnail_url:e.file.thumbnail_url}:e),m.push(e.file),e.thumbnail_url&&h.push({file_key:e.library_file_key,thumbnail_url:e.thumbnail_url}),a+=e.num_components,l+=e.num_styles,s+=e.num_variable_collections,o+=e.num_state_groups,c+=e.num_module_assets,u++);return{totalComponents:a,totalStateGroups:o,totalStyles:l,totalVariableCollections:s,totalModuleAssets:c,teamsWithLibraries:d,totalLibraries:u,files:p,libraries:h}}catch(e){return{...Q.tE,libraries:[]}}},tl=(0,b.u4)(async e=>{let t;await X.dI.promise;let r=e.getState();if(!r.user)return;let n=e.getState().currentUserOrgId,i=ei.V.getAllLibraryTeamSubscriptions({orgId:n||""}).then(({data:t})=>{e.dispatch(tu({fileSubscriptionsByTeamId:t.meta.subscriptions}))}),a=ea.m.getAllLibraryUserSubscriptions().then(({data:t})=>{e.dispatch(tm({subscriptions:t.meta.subscriptions}))});t=n?en.y.getAllLibraryOrgSubscriptions({currentOrgId:n}).then(({data:t})=>{e.dispatch(th({subscriptions:t.meta.subscriptions}))}):Promise.resolve(null);try{await Promise.all([i,t,a]),e.dispatch(td())}catch(e){}}),ts=async e=>{if(!e)return 0;try{let t=await es.t.getNumTeams({orgId:e});return t.data.meta.num_teams}catch(e){}return 0},tc=(0,b.u4)(e=>{var t;let r=e.getState(),n=!!r.user,i=(null==(t=r.openFile)?void 0:t.key)||null;if(!i)return;let a=e.getState().selectedView;a&&"fullscreen"===a.view&&("whiteboard"===a.editorType?eH(e):(0,G.Fv)(),n&&e9(e,"whiteboard"===a.editorType?ee.xQ.FigJam:ee.xQ.Design)),n&&(e.dispatch(e$()),e5(e))}),td=(0,i.e)("LIBRARY_MARK_FETCHED"),tu=(0,i.e)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_TEAM"),tp=(0,i.e)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_FILE"),tm=(0,i.e)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_USER"),th=(0,i.e)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_ORG"),t_=(0,i.e)("ADD_ASSET_TO_RECENTS"),tg=(e,t,r,n,i=!1)=>{if(!n||(0,G.XG)(e.getState().library,t))return;let a=(0,N.bC)(e.getState());if(a){let r=a.editor_type??"design";(!0===n||"design"===r&&n.design||"whiteboard"===r&&n.figjam)&&(e.getState().leftPanel.activeTab===D.caZ.ASSETS||e.getState().universalInsertModal.showing?e7(e,t,i):e.dispatch(ep.IV({key:(0,eu.O1)(a.key)})))}},tf=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_ORG",(e,t,{optimistId:r})=>{var n,i;let{libraryOrgSubscription:o,libraryTeamId:l,userInitiated:s}=t,{org_id:c,file_key:d,subscriptions:u}=o;if(tg(e,d,l,u),s){if(t.currentSubscription){let e=o.subscriptions.design;!((null==(n=t.currentSubscription)?void 0:n.design)||(null==(i=t.currentSubscription)?void 0:i.figjam))&&e?(0,a.L9)("Team Library File Enabled",{orgId:c,fileKey:d,fileTeamId:l}):(0,a.L9)("Org Library File Disabled",{orgId:c,fileKey:d,fileTeamId:l})}_.ZP.post(`/api/library_org_subscriptions/${d}`,{subscriptions:u}).then(()=>{e.dispatch(b.w2.commit(r)),e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.settings_updated_for",{libraryName:t.libraryName,orgOrWorkspaceName:t.orgName})}))}).catch(()=>{e.dispatch(b.w2.revert(r)),e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))})}}),tE=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_LICENSE_GROUP",async(e,t,{optimistId:r})=>{let{libraryLicenseGroupSubscription:n,libraryName:i,licenseGroupName:a}=t,{file_key:o,subscriptions:l,license_group_id:s}=n,c=_.ZP.post(`/api/library_license_group_subscriptions/${o}`,{subscriptions:l,license_group_id:s});n.id?(0,d.i0)().optimisticallyUpdate({LibraryLicenseGroupSubscription:{[n.id]:{fileKey:o,isSubscribed:l.design,figJamSubscribed:l.figjam}}},c):(0,d.i0)().optimisticallyCreate({LibraryLicenseGroupSubscription:{[`library-license-group-sub-${performance.now()}`]:{fileKey:o,licenseGroupId:s,isSubscribed:l.design,figJamSubscribed:l.figjam,canRead:!0}}},c);try{await c,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(t){e.dispatch(y.R.enqueue({message:(null==t?void 0:t.message)??(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),ty=(0,b.Vh)("LIBRARY_SUBSCRIPTION_DEL_LICENSE_GROUP",async(e,t,{optimistId:r})=>{let{libraryLicenseGroupSubscription:n,libraryName:i,licenseGroupName:a}=t,{file_key:o,license_group_id:l}=n,s=_.ZP.del(`/api/library_license_group_subscriptions/${o}`,{license_group_id:l});n.id&&(0,d.i0)().optimisticallyDelete({LibraryLicenseGroupSubscription:{[n.id]:null}},s);try{await s,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(t){e.dispatch(y.R.enqueue({message:(null==t?void 0:t.message)??(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),tv=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_WORKSPACE",async(e,t,{optimistId:r})=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=t,{file_key:o,subscriptions:l,workspace_id:s}=n,c=_.ZP.post(`/api/library_workspace_subscriptions/${o}`,{subscriptions:l,workspace_id:s});n.id?(0,d.i0)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{fileKey:o,isSubscribed:l.design,figJamSubscribed:l.figjam}}},c):(0,d.i0)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:o,workspaceId:s,isSubscribed:l.design,figJamSubscribed:l.figjam,canRead:!0}}},c);try{await c,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(t){e.dispatch(y.R.enqueue({message:(null==t?void 0:t.message)??(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),tb=(0,b.Vh)("LIBRARY_SUBSCRIPTION_DEL_WORKSPACE",async(e,t,{optimistId:r})=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=t,{file_key:o,workspace_id:l}=n,s=_.ZP.del(`/api/library_workspace_subscriptions/${o}`,{workspace_id:l});n.id&&(0,d.i0)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},s);try{await s,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(t){e.dispatch(y.R.enqueue({message:(null==t?void 0:t.message)??(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),tI=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_TEAM",(e,t,{optimistId:r})=>{let{libraryTeamSubscription:n,libraryTeamId:i,userInitiated:a,isCommunityLibrary:o}=t,{file_key:l,subscriptions:s,team_id:c}=n;if(tg(e,l,i,s,o),a){let t=o?eo.z.createCommunityLibraryTeamSubscription({libraryHubFileId:l,subscriptions:s,teamId:c}):_.ZP.post(`/api/library_team_subscriptions/${l}`,{subscriptions:s,team_id:c});t.then(()=>{e.dispatch(b.w2.commit(r))}).catch(()=>{e.dispatch(b.w2.revert(r)),e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))})}}),tT=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_USER",(e,t,{optimistId:r})=>{let{libraryUserSubscription:n,libraryTeamId:i,userInitiated:a}=t,{file_key:o,subscriptions:l}=n;tg(e,o,i,l),a&&_.ZP.post(`/api/library_user_subscriptions/${o}`,{subscriptions:l}).then(()=>{e.dispatch(b.w2.commit(r))}).catch(()=>{e.dispatch(b.w2.revert(r)),e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))})}),tw=(0,b.Vh)("LIBRARY_SUBSCRIPTION_POST_FILE",(e,t,{optimistId:r})=>{var n;let{libraryFileSubscription:i,libraryTeamId:a,userInitiated:o,isCommunityLibrary:l}=t,{file_key:s,library_file_key:c,is_subscribed:d}=i,u=(null==(n=e.getState().openFile)?void 0:n.key)||null;u===s&&tg(e,c,a,d,l);let p=e.getState().library.subscriptions.byFile[s];if((!p||!(c in p)||p[c]!==d)&&o){let t=l?eo.z.createCommunityLibraryFileSubscription({fileKey:s,libraryHubFileId:c,isSubscribed:d}):_.ZP.post(`/api/library_file_subscriptions/${s}/${c}`,{is_subscribed:d});t.then(()=>{e.dispatch(b.w2.commit(r))}).catch(()=>{e.dispatch(b.w2.revert(r)),e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))})}}),tS=(e,t)=>{var r;let n=e.getState(),i=(null==(r=n.openFile)?void 0:r.key)||null;i&&t.forEach(t=>{var r;t!==i&&e.dispatch(tw({libraryFileSubscription:{file_key:i,library_file_key:t,is_subscribed:!0},libraryTeamId:(null==(r=e.getState().fileByKey[t])?void 0:r.team_id)??null,userInitiated:!0}))})},tC="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",tO=null,tA=(0,b.u4)((e,t)=>{tO={done:0,total:t.total},e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:t.total}),type:tC,icon:v.B4.SPINNER,timeoutOverride:1/0}))}),tN=(0,b.u4)((e,t)=>{tO&&(tO.done+=t.done,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.remap_connecting_fraction",{current:tO.done,total:tO.total}),type:tC,icon:v.B4.SPINNER,timeoutOverride:1/0})))}),tL=(0,b.u4)(e=>{tO=null,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.remap_connected"),type:tC,icon:v.B4.CHECK}))}),tP=(0,b.u4)(e=>{tO=null,e.dispatch(y.R.enqueue({message:(0,E.t)("design_systems.subscriptions.remap_connection_failed"),type:tC,error:!0}))}),tR=(0,b.u4)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch(C.v({has_inserted_component:!0}))}),tk=(0,b.u4)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch(C.v({has_opened_libraries_modal:!0}))})},402524:(e,t,r)=>{r.d(t,{CN:()=>ei,Fz:()=>Y,HZ:()=>W,Ny:()=>H,U4:()=>er,UY:()=>V,h8:()=>G});var n,i=r(239907),a=r.n(i),o=r(237863),l=r(600486),s=r(46347),c=r(764150),d=r(448501),u=r(716250),p=r(198138),m=r(217810),h=r(259574),_=r(286206),g=r(117986),f=r(31642),E=r(297296),y=r(970740),v=r(644383),b=r(299370),I=r(218609),T=r(249683),w=r(954109),S=r(721127),C=r(864974),O=r(837728),A=r(961215),N=r(269075),L=r(112088),P=r(513727),R=r(722330),k=r(966041),D=r(166885),M=r(152691),F=r(408119),x=r(185077),U=r(45741),B=r(166303);let V=(0,o.e)("START_PUBLISH"),G=(0,o.e)("PUBLISH_PROGRESS"),H=(0,o.e)("PUBLISH_REQUEST_FINISHED"),W=(0,o.e)("SAVE_PUBLISH_DESCRIPTION"),K="library publish "+((0,u.BZ)().ds_server_side_publishing?"SSP":"CSP"),z=(0,u.BZ)().ds_server_side_publishing?"":".client_side_publish";var Z=((n=Z||{}).PublishStart="publish_start",n.CreateSavepoint="create_savepoint",n.GetPresignedPost="get_presigned_post",n.UploadThumbnails="upload_thumbnails",n.UploadParams="upload_params",n.AssetValidation="asset_validation",n.NonS3Error="non_s3_error",n.GenericError="generic_error",n);let Y=(0,I.u4)(e=>{let t=e.getState(),r=e=>{for(let t in e={...e})(0,L.s9)(e[t].status)?e[t].status=D.mk.DELETED:e[t].status===D.mk.NEW&&(e[t].status=D.mk.NOT_STAGED);return e},n=(0,u.BZ)().ds_remove_redux_library_status;if(!n){let n=r(t.library.local.components),i=r(t.library.local.stateGroups),a=r(t.library.local.styles);e.dispatch(T.K({local:n,type:D.h3.COMPONENT})),e.dispatch(T.K({local:i,type:D.h3.STATE_GROUP})),e.dispatch(T.K({local:a,type:D.h3.STYLE}))}e.dispatch(G({state:D.L_.NONE})),e.dispatch(ei({unpublishAll:n}))});async function j(){let e,t;try{let r=(await M.u.postUploadPublishParams()).data.meta;e=r.url,t=r.fields}catch(e){(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error("Error getting publish params presigned URL"));return}let r=!1,n=!1;try{let n=new TextEncoder;await (0,h.jz)(g.k.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",e,t,n.encode(JSON.stringify({testField:"testValue"})),"application/json"),r=!0}catch(e){r=!1,(0,_.YD)(K,"test presigned post encountered an error",{error:e}),(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error("Test presigned post failed")),n=e instanceof h.TI}(0,l.L9)("test_presigned_post_result",{success:r,nonS3error:n,orgId:(0,u.ZP)().org_id})}async function $(e,t,r,n){let i=performance.now();if(!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let a=e.length,o=0,s=()=>{el(n,(o+=1)/a,t?D.QO.UNPUBLISH:D.QO.PUBLISH)},c=Object.create(null),d=[],u=[];if(await Promise.all(e.map(async e=>{var t,n;try{let t=await scheduler.postTask(()=>(0,B.eV)(e,r),{priority:"user-blocking"});if(!t||0===t.length)throw Error("Unable to generate thumbnail");let[n,i]=e.node_id.split(":").map(e=>Number(e));if(isNaN(n))throw Error("Unable to parse sessionId");if(isNaN(i))throw Error("Unable to parse localId");u.push({sessionId:n,localId:i,thumbnail:t}),e.type===D.h3.STYLE&&(c[e.node_id]=JSON.stringify((0,B.R$)(e,r)))}catch(r){(0,_.YD)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),d.push(e.type===D.h3.COMPONENT&&(null==(n=null==(t=e.containing_frame)?void 0:t.containingStateGroup)?void 0:n.nodeId)||e.node_id)}finally{s()}})),0===u.length)return{s3Paths:[],failedThumbnailNodeIds:d,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let m=[];for(;u.length;)m.push(u.splice(0,D.UO));let f=F.$.getThumbnailsBufferPresignedPostUrl(m.length),E=m.map(e=>e.reduce(({buffer:e,offset:t,guids:r},{sessionId:n,localId:i,thumbnail:a})=>(e.set([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&a.byteLength)>>24,(16711680&a.byteLength)>>16,(65280&a.byteLength)>>8,255&a.byteLength],t),t+=12,e.set(a,t),t+=a.byteLength,r.push(`${n}:${i}`),{buffer:e,offset:t,guids:r}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:t})=>e+t.byteLength+12,0)),offset:0,guids:[]})),y=[],v=(await f).data.meta.presigned_posts,b=!1;await Promise.allSettled(v.map(async({url:e,fields:t})=>{let r=E.shift();if(!r){(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{y.push(await (0,h.jz)(g.k.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,t,r.buffer,"application/octet-stream")),(0,p.ml)("publish.thumbnails_buffer.bytes",r.buffer.byteLength)}catch(e){e instanceof h.TI&&(b=!0),d.push(...r.guids)}})),b&&(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let I=performance.now()-i;return(0,l.L9)("Library generate and upload thumbnails",{duration:I}),{s3Paths:y,styleMetaByNodeId:c,failedThumbnailNodeIds:d,uploadDurationMs:I,encounteredNonS3PresignedPostError:b}}async function q(e,t,r,n,i,a,o,c){var d;let p=performance.now(),{formDatas:h,numSkippedDueToError:_,trackingParams:g}=await function(e,t,r,n,i,a,o,l,c,d){let u=t.getState(),p=(0,P.t)((0,k.wq)(u),(0,k.AV)(u),(0,k.vs)(u),(0,k.T7)(u),(0,k.kk)(u),(0,k.pJ)(u),e,u.teams,{overridePublishPermissions:a,moveRemappings:n,itemsToPublish:l,forcePublish:c,unpublishAll:d}),h={[D.h3.STATE_GROUP]:[],[D.h3.COMPONENT]:[],[D.h3.STYLE]:[],[D.h3.VARIABLE]:[],[D.h3.VARIABLE_SET]:[],[D.h3.MODULE]:[]};for(let e of D.oz)h[e]=(0,L.fu)(p[e][D.QO.UNPUBLISH]).filter(m.lm);let{orderedUpdates:_}=eo(p,r),g=_.flatMap(e=>e.assets.map(t=>({publishType:e.publishType,asset:t}))),f=g.length,E=f<D.UO,y=new B.RM(e.key,u.fileVersion,o,u.library.local.thumbnails);return new Promise((e,r)=>{function a(){let o=Date.now(),l=1e3/60;for(;E||Date.now()-o<l;){let e=D.UO-y.size();if(e<=0)break;let t=g.shift();if(!t)break;let{asset:r,publishType:i}=t;if(i===D.QO.PUBLISH){if(y.publish(n,r),r.type===D.h3.VARIABLE_SET){let e=0;for(;g[0]&&g[0].asset.type===D.h3.VARIABLE&&g[0].asset.variableSetId===r.node_id&&g[0].publishType===D.QO.PUBLISH;){if(e===D.xc){g.unshift(t);break}let r=g.shift().asset;y.publish(n,r),e++}if(e===D.xc)break}}else if(i===D.QO.UNPUBLISH){let n=Math.min(g.findIndex(({asset:e,publishType:t})=>t!==i||e.type!==r.type),e);y.unpublish(r.type,[t,...g.splice(0,n)].map(({asset:e})=>(0,L.mL)(e)))}else(0,s.vE)(i)}let c=g.length;if(!E){let e=t.getState().library.publishProgress;if(e.state===D.L_.NONE){r();return}el(t,(f-c)/f,i)}0===c?(y.flush(),e(y.publishFormData)):(y.size()>=D.UO&&y.flush(),requestAnimationFrame(a))}E?a():(el(t,0,i),requestAnimationFrame(a))})}(e,t,r,(null==(d=n.moveInformation)?void 0:d.moveRemappings)||{},i?D.QO.UNPUBLISH:D.QO.PUBLISH,((0,u.BZ)().cmty_lib_admin_publish||(0,u.BZ)().cmty_lib_m2_creator)&&void 0!==n.hubFileId,o.checkpoint_id,a,n.forcePublish,n.unpublishAll),y=performance.now()-p;i||(0,l.L9)("Library publish serialize buffers",{duration:y,...g}),ee(t,i,null,o,0,y,c);let v=performance.now();for(let r of h){let i,a=0,o={...f.ZP.defaults.headers};for(delete o["Content-Type"];;){a++;try{let e=await f.ZP.post(`/api/upnode/library_checkpoints?tries=${a}`,r,{headers:o,raw:!0});i=e.data;break}catch(e){if(a>=3)throw e;await new Promise(e=>setTimeout(e,5e3))}}let l=JSON.parse(i),s=Object.create(null),c=Object.create(null),d=Object.create(null);l.meta&&(l.meta.components&&(s=l.meta.components),l.meta.components_v2&&(s=l.meta.components_v2),l.meta.state_groups&&(c=l.meta.state_groups),l.meta.styles&&(d=l.meta.styles));let u=(r,n)=>{let i=[],a=Object.create(null);for(let e in r){let t=r[e];t.unpublished_at?i.push(t.node_id):a[t.node_id]=t}t.dispatch(T.gz({itemsById:a,fileKey:e.key,teamId:e.team_id,type:n})),t.dispatch(T.IV({nodeIds:i,file:e,type:n}))};if(u(s,D.h3.COMPONENT),u(c,D.h3.STATE_GROUP),void 0!==n.hubFileId&&await X(n.hubFileId,s,c,d),A.iTB){let e=new Set;for(let t of[l.meta.moved_components_by_src_file||{},l.meta.moved_state_groups_by_src_file||{},l.meta.moved_styles_by_src_file||{}])for(let r of Object.values(t))for(let t of Object.values(r))t.type!==D.h3.VARIABLE&&t.type!==D.h3.VARIABLE_SET&&t.type!==D.h3.MODULE&&t.destination_key&&e.add(t.destination_key);N.y2.system("publish-cleanup",()=>{var t,r;for(let i of Object.values({...s,...c,...d})){let a=(0,L.bk)(i);if(i.unpublished_at)(0,L.ap)(i)&&A.iTB.removePublishedVersion(i.node_id);else{(0,L.ap)(i)&&A.iTB.markSharedComponentPublished(i.node_id,(0,L.uX)(i)??E.I_.INVALID);let o=e.has(a)||(null==(r=null==(t=n.moveInformation)?void 0:t.movableItemsToPublishAsNew)?void 0:r.has(i.node_id));o&&A.iTB.clearLibraryMoveInfo(i.node_id)}}})}}return i||(0,l.L9)("Library publish upload",{duration:performance.now()-v,fileKey:e.key,...g}),{trackingParams:g,numSkippedDueToError:_}}async function X(e,t,r,n){let i=Object.values(t).map(e=>e.id),a=Object.values(r).map(e=>e.id),o=Object.values(n).map(e=>e.id);await f.ZP.post(`/api/community_libraries/${e}/override_assets`,{component_ids:i,state_group_ids:a,style_ids:o})}function J(e){return e.state===D.L_.NONE?((0,_.YD)(K,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function Q(e,t,r,n){let i=J(e);if(i){let e=performance.now()-i;(0,l.L9)(t,{duration:e}),(0,p.ml)(r,e,{error:n})}else(0,_.YD)(K,"Publish start time was null")}function ee(e,t,r,n,i,a,o){let l=performance.now();e.dispatch(G({state:D.L_.UPLOADING,publishType:t?D.QO.UNPUBLISH:D.QO.PUBLISH,progress:0,libraryPublishId:r,savepoint:n,numSkippedPriorToPublish:i,publishStartMs:J(e.getState().library.publishProgress),commitUpdatesDurationMs:l,clientPreWorkDurationMs:a,createSavePointDurationMs:o})),e.dispatch(v.R.enqueue({type:"library-publish",message:t?(0,y.t)("design_systems.publish_actions.unpublishing_library"):(0,y.t)("design_systems.publish_actions.publishing_library"),icon:b.B4.SPINNER}))}function et(e,t,r,n,i,a){0===t?function(e,t,r){if(t.state===D.L_.UPLOADING){let e=J(t);if(e){let n=performance.now(),i=n-e,a=r?{totalDurationMs:i}:{totalDurationMs:i,uploadBuffersDurationMs:n-t.commitUpdatesDurationMs,clientPreWorkDurationMs:t.clientPreWorkDurationMs,createSavePointDurationMs:t.createSavePointDurationMs};for(let[e,r]of((0,l.L9)(`Client perceived ${t.publishType} duration ${z.slice(1)}`,a),Object.entries(a))){let n=`${t.publishType}.success.${e}${z}`;(0,p.ml)(n,r)}}else(0,_.YD)(K,"Publish start time was null")}e(v.R.enqueue({type:"library-publish",message:r?(0,y.t)("design_systems.publish_actions.unpublish_success"):(0,y.t)("design_systems.publish_actions.publish_success"),icon:b.B4.CHECK})),e(W(""))}(n,e,r):function(e,t,r,n,i,a){do{let i="",o=(0,y.t)("design_systems.publish_actions.retry"),l=()=>en(e);if(a){if((0,u.BZ)().ds_network_status_ui){(0,U.kK)(e,(0,y.t)("check_network_compatibility.error_bell.library_publish.message"));break}i=(0,y.t)("design_systems.publish_error.presigned_post_non_s3_response"),o=(0,y.t)("design_systems.publish_error.presigned_post_non_s3_response_learn_more"),l=()=>((0,c.Ne)("https://help.figma.com/hc/en-us/articles/19424714305943","_blank"),!1)}else"number"!=typeof r?i=(0,y.t)("design_systems.publish_error.generic"):(Q(t,"Partial publish failure "+z.slice(1),`${n?D.QO.UNPUBLISH:D.QO.PUBLISH}.error.duration${z}`,"asset_validation"),i=n?(0,y.t)("design_systems.publish_actions.unpublish_error",{numSkipped:r}):(0,y.t)("design_systems.publish_actions.publish_error",{numSkipped:r}));e(v.R.enqueue({type:"library-publish",icon:b.B4.EXCLAMATION,error:!0,message:i,button:{text:o,action:l}}))}while(0)i&&e(W(i))}(n,e,t,r,i,a)}function er(e,t,r,n,i,a){(0,l.L9)("Publish ended",{serverSidePublishing:(0,u.BZ)().ds_server_side_publishing,savepointId:i.id,hadException:a}),et(e,t,r,n,i.description),n(H())}function en(e){e(v.R.dequeue({matchType:"library-publish"})),e((0,x.CJ)())}let ei=(0,I.wV)("PUBLISH_CHANGES",async(e,t={})=>{var r,n;let i;let o=e.getState();if(o.library.publishProgress.state!==D.L_.NONE){e.dispatch(H());return}let s=(0,O.bC)(o);if(!s){console.error("library publishChanges: file is null"),e.dispatch(H());return}let c=t.itemsToPublish;if(void 0!==c&&0===c.size){console.error("No items selected to publish"),e.dispatch(H());return}let f=t.unpublishAll||ea(Object.values((0,k.AV)(o)),c)&&ea(Object.values((0,k.wq)(o)),c)&&ea(Object.values((0,k.vs)(o)),c)&&ea(Object.values((0,k.kk)(o)),c)&&(!(0,u.BZ)().dse_editor_templates_v1||ea(Object.values((0,k.pJ)(o)),c));if(!navigator.onLine){e.dispatch(v.R.enqueue({type:"library-publish",icon:b.B4.EXCLAMATION,error:!0,message:f?(0,y.t)("design_systems.publish_actions.cant_unpublish"):(0,y.t)("design_systems.publish_actions.cant_publish"),button:{text:(0,y.t)("design_systems.publish_actions.retry"),action:()=>en(e.dispatch)}})),e.dispatch(H());return}(0,p.Xd)(`${f?D.QO.UNPUBLISH:D.QO.PUBLISH}.start${z}`),e.dispatch(V({unpublishAll:!!f})),e.dispatch(C.v({has_published_library_items:!0}));let E=(r,n,i,a)=>{e.dispatch(w.k$());let o=(null==a?void 0:a.encounteredNonS3PresignedPostError)?"non_s3_error":n;Q(e.getState().library.publishProgress,r+" "+z.slice(1),`${f?D.QO.UNPUBLISH:D.QO.PUBLISH}.error.duration${z}`,o);let s=null==a?void 0:a.error;(0,_.YD)(K,r,{...t,name:null==s?void 0:s.name,message:null==s?void 0:s.message,stack:null==s?void 0:s.stack},{logToConsole:A.c6b.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==i&&(0,l.L9)("Publish ended",{serverSidePublishing:(0,u.BZ)().ds_server_side_publishing,savepointId:i,hadException:!0}),(null==a?void 0:a.stifleVisualBellForClientSidePublish)||et(e.getState().library.publishProgress,(null==a?void 0:a.numSkippedDueToError)??{__tag:"UNKNOWN"},f,e.dispatch,t.savepointDescription,null==a?void 0:a.encounteredNonS3PresignedPostError),e.dispatch(H()),e.dispatch(S.hV())},I=performance.now();try{i=await (0,R.K)(s.key,f?(0,y.t)("design_systems.publish_actions.savepoint_for_unpublish"):(0,y.t)("design_systems.publish_actions.savepoint_for_publish"),t.savepointDescription,e.dispatch,!0)}catch(e){E("Unable to create savepoint during library publish","create_savepoint",null,{error:e});return}if(!i){E("Created savepoint is null","create_savepoint",null);return}let T=performance.now()-I;(0,l.L9)("Publish start: savepoint successfully created",{savepointId:i.id,serverSidePublishing:(0,u.BZ)().ds_server_side_publishing});let N=a()(Object.values(o.library.local.components).filter(e=>e.isLocal),e=>(0,L.QH)(e)||D.$b);if((0,u.BZ)().ds_server_side_publishing){let a,l,d,p,y;let v=(0,P.t)((0,k.wq)(o),(0,k.AV)(o),(0,k.vs)(o),(0,k.T7)(o),(0,k.kk)(o),(0,k.pJ)(o),s,o.teams,{overridePublishPermissions:!!t.hubFileId,moveRemappings:(null==(r=t.moveInformation)?void 0:r.moveRemappings)??{},itemsToPublish:c,forcePublish:t.forcePublish,unpublishAll:t.unpublishAll}),{orderedUpdates:b}=eo(v,N),I=b.flatMap(e=>e.publishType===D.QO.PUBLISH?e.assets:[]).reduce((e,t)=>t.type===D.h3.VARIABLE||t.type===D.h3.VARIABLE_SET?e:t.type===D.h3.MODULE&&(0,u.BZ)().dse_editor_templates_v1?e.concat(t):e.concat(t).concat(N[t.node_id]||[]),[]);try{a=await $(I,f,o.library.local.thumbnails,e)}catch(e){E("Unable to upload thumbnails during library publish","upload_thumbnails",i.id,{error:e});return}let{failedThumbnailNodeIds:w,s3Paths:S,styleMetaByNodeId:C,uploadDurationMs:O,encounteredNonS3PresignedPostError:A}=a,L=b.flatMap(e=>e.assets).length;if(w.length===L){E("All thumbnails failed to upload"+(A?" (non-s3 error)":""),"upload_thumbnails",i.id,{numSkippedDueToError:L,encounteredNonS3PresignedPostError:A});return}let R=b.map(({publishType:e,assetType:t,assets:r})=>{let n=r.filter(e=>!w.includes(e.node_id));return n.length>0?{publishType:e,assetType:t,assets:n}:null}).filter(m.lm),F={updates:R.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let t=(0,B.R0)(e);return t||(console.warn("Asset with null nodeId:",e),(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),t}).filter(m.lm)})),moveRemappings:(null==(n=t.moveInformation)?void 0:n.moveRemappings)??{},s3ThumbnailBufferPaths:S,styleMetaByNodeId:C,clientProtocolVersion:window.mpGlobal.version,themeMetaData:t.themePublishData??{}};try{let e=(await M.u.postUploadPublishParams()).data.meta;l=e.url,d=e.fields}catch(e){E("Unable to get presigned post url for params","get_presigned_post",i.id,{error:e});return}try{let e=new TextEncoder;p=await (0,h.jz)(g.k.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",l,d,e.encode(JSON.stringify(F)),"application/json")}catch(t){let e=t instanceof h.TI;E("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",i.id,{error:t,encounteredNonS3PresignedPostError:e});return}try{y=(await M.u.postLibraryPublish({fileKey:s.key,checkpointKey:i.checkpoint_key,paramsPath:p,publishToCommunity:!!t.hubFileId})).data.meta.library_publish_id}catch(e){E("Unable to publish","generic_error",i.id,{error:e});return}try{ee(e,f,y,i,w.length,O,T)}catch(e){E("Unable to notify publish start","generic_error",i.id,{error:e})}return}let F=null;try{let{trackingParams:r,numSkippedDueToError:n}=await q(s,e,N,t,f,c,i,T);if(F=r,er(e.getState().library.publishProgress,n,f,e.dispatch,i,!1),(0,u.BZ)().ds_test_presigned_post)try{j()}catch(e){(0,_.YD)(K,"Hit an error testing presigned post after client-side publish",{error:e})}}catch(t){if(E((null==t?void 0:t.message)??"Publish ended with error","generic_error",i.id,{stifleVisualBellForClientSidePublish:!0}),(null==t?void 0:t.status)===0||(null==t?void 0:t.status)===504){let r=(null==t?void 0:t.status)===504?"Publish failed due to sinatra timeout for publish":"Publish failed due to no response from publish";(0,_.YD)(K,r,{items_to_publish:c,tracking_params:F,fileKey:s.key}),(0,_.Jz)(g.k.DESIGN_SYSTEMS_EDITOR,Error(r)),e.dispatch((0,x.CJ)(c,!0)),e.dispatch(v.R.dequeue({matchType:"library-publish"}))}else if((null==t?void 0:t.status)===424)e.dispatch(v.R.enqueue({message:(0,y.t)("design_systems.publish_actions.validations_failed"),type:"library-publish",error:!0,button:{text:(0,y.t)("design_systems.publish_actions.validations_contact"),action:()=>{d.default.unsafeRedirect("mailto:support@figma.com","_blank")}}}));else{let r="";(null==t?void 0:t.status)===413?r=(0,y.t)("design_systems.publish_actions.payload_too_large"):(null==t||t.status,r=(0,y.t)("design_systems.publish_actions.reload"));let n=f?(0,y.t)("design_systems.publish_actions.unpublish_failed",{reason:r}):(0,y.t)("design_systems.publish_actions.publish_failed",{reason:r});e.dispatch(v.R.enqueue({type:"library-publish",error:!0,message:n}))}}});function ea(e,t){return Object.values(e).filter(e=>(0,P.v)(e,t)).every(e=>!(0,L.LI)(e.status))}function eo(e,t){let r=!(0,u.BZ)().ds_server_side_publishing,n=[],i=e=>{e.assets.length&&n.push(e)},o=e[D.h3.VARIABLE_SET][D.QO.PUBLISH],l=a()(e[D.h3.VARIABLE][D.QO.PUBLISH],e=>e.variableSetId);if(r)for(let e of o)i({publishType:D.QO.PUBLISH,assetType:D.h3.VARIABLE_SET,assets:[e,...(null==l?void 0:l[e.node_id])??[]]});else i({publishType:D.QO.PUBLISH,assetType:D.h3.VARIABLE_SET,assets:o});i({publishType:D.QO.UNPUBLISH,assetType:D.h3.VARIABLE_SET,assets:e[D.h3.VARIABLE_SET][D.QO.UNPUBLISH]}),i({publishType:D.QO.UNPUBLISH,assetType:D.h3.VARIABLE,assets:e[D.h3.VARIABLE][D.QO.UNPUBLISH]});let s=e[D.h3.STATE_GROUP][D.QO.PUBLISH],c=e[D.h3.COMPONENT][D.QO.UNPUBLISH].filter(e=>null===(0,L.QH)(e));if(r)for(let e of s){let r=t[e.node_id];r?i({publishType:D.QO.PUBLISH,assetType:D.h3.STATE_GROUP,assets:[e,...r]}):((0,_.YK)("getOrderedLibraryUpdates","publishing metadata",{stateGroup:JSON.stringify(e),stateGroupsToPublish:JSON.stringify(s),componentsToPublishByStateGroupId:JSON.stringify(t)}),(0,_.YD)("publish","Expected states to be published with state group"))}else i({publishType:D.QO.PUBLISH,assetType:D.h3.STATE_GROUP,assets:s});return i({publishType:D.QO.UNPUBLISH,assetType:D.h3.STATE_GROUP,assets:e[D.h3.STATE_GROUP][D.QO.UNPUBLISH]}),i({publishType:D.QO.PUBLISH,assetType:D.h3.COMPONENT,assets:e[D.h3.COMPONENT][D.QO.PUBLISH].filter(e=>!(0,L.QH)(e))}),i({publishType:D.QO.UNPUBLISH,assetType:D.h3.COMPONENT,assets:r?e[D.h3.COMPONENT][D.QO.UNPUBLISH]:c}),i({publishType:D.QO.PUBLISH,assetType:D.h3.STYLE,assets:e[D.h3.STYLE][D.QO.PUBLISH]}),i({publishType:D.QO.UNPUBLISH,assetType:D.h3.STYLE,assets:e[D.h3.STYLE][D.QO.UNPUBLISH]}),(0,u.BZ)().dse_editor_templates_v1&&(i({publishType:D.QO.PUBLISH,assetType:D.h3.MODULE,assets:e[D.h3.MODULE][D.QO.PUBLISH]}),i({publishType:D.QO.UNPUBLISH,assetType:D.h3.MODULE,assets:e[D.h3.MODULE][D.QO.UNPUBLISH]})),{orderedUpdates:n}}function el(e,t,r){e.dispatch(G({state:D.L_.ASSEMBLING_COMPONENTS,progress:t,publishType:r,publishStartMs:J(e.getState().library.publishProgress)}))}},465530:(e,t,r)=>{r.d(t,{Si:()=>_,U2:()=>v,Vx:()=>g,g3:()=>y,lH:()=>E,t8:()=>f});var n=r(237863),i=r(31642),a=r(970740),o=r(644383),l=r(133419),s=r(971237),c=r(436649),d=r(801998),u=r(733609),p=r(163853),m=r(218609),h=r(28786);let _=(0,n.e)("LICENSE_GROUP_DELETE"),g=(0,n.e)("LICENSE_GROUP_UPDATE"),f=(0,n.e)("LICENSE_GROUP_SET"),E=(0,m.Vh)("LICENSE_GROUP_DEFAULT_TEAMS_SET",async(e,t,{optimistId:r})=>{var n;try{let n=t.licenseGroup.default_team_ids,l=n.filter(e=>!t.teamIds.includes(e)),s=t.teamIds.filter(e=>!n.includes(e));l.length&&await i.ZP.del(`/api/license_group/${t.licenseGroup.id}/default_teams`,{team_ids:l}),s.length&&await i.ZP.post(`/api/license_group/${t.licenseGroup.id}/default_teams`,{team_ids:s}),e.dispatch(m.w2.commit(r)),e.dispatch(o.R.enqueue({type:"license-groups-default-teams-set",message:(0,a.t)("license_group.succesfully_updated_default_teams")}))}catch(t){e.dispatch(m.w2.revert(r)),e.dispatch(o.R.enqueue({type:"license-groups-default-teams-set",message:(null==(n=t.data)?void 0:n.message)||(0,a.t)("license_group.failed_to_update_default_teams_please_try_again"),error:!0}))}}),y=(0,m.u4)(async(e,t)=>{let{currentUserOrgId:r,licenseGroups:n}=e.getState(),s=(0,d.uH)(r);await i.ZP.post(`/api/orgs/${r}/self_assign_license_group`,t).then(r=>{var i;let c;let d=t.license_group_id?null==(i=n[t.license_group_id])?void 0:i.name:void 0;c=d?s?(0,a.t)("license_group.you_joined_the_billing_group",{groupName:d}):(0,a.t)("license_group.you_joined_the_workspace",{groupName:d}):s?(0,a.t)("license_group.successfully_submitted_your_billing_group_selection"):(0,a.t)("license_group.successfully_submitted_your_workspace_selection"),e.dispatch(o.R.enqueue({type:"self-assign-license-group",message:c})),e.dispatch(l.gz({orgUser:r.data.meta,userInitiated:!1}))}).catch(t=>{var r;let n=s?(0,a.t)("license_group.an_error_occurred_while_submitting_your_billing_group_selection"):(0,a.t)("license_group.an_error_occurred_while_submitting_your_workspace_selection");e.dispatch(o.R.enqueue({type:"self-assign-license-group",message:(null==(r=t.data)?void 0:r.message)||n,error:!0}))})});(0,m.wV)("LICENSE_GROUP_GET_FOR_ORG",async(e,t)=>{let r=t.orgId;r&&await b(e,t,r)});let v=(0,m.wV)("LICENSE_GROUP_GET",async(e,t)=>{let r=e.getState(),{currentUserOrgId:n}=r;n&&await b(e,t,n)}),b=async(e,t,r)=>{var n;let i=e.getState(),{orgById:l,loadingState:d}=i;if(!r)return;let m=l[r],_=(0,s.lV)(m.id);if(m&&m.bigma_enabled&&(0,u.canMemberOrg)(r,i)&&(t.forceRefetch||(0,c.d4)(d,_))&&!(0,c.hg)(d,_)){e.dispatch(h.DB({key:(0,s.lV)(r)}));try{let t=await p.uU.getLicenseGroups({currentOrgId:r}),n=t.data.meta;e.dispatch(f(n)),e.dispatch(h.dN({key:(0,s.lV)(r)}))}catch(t){e.dispatch(o.R.enqueue({type:"get-license-groups",message:(null==(n=t.data)?void 0:n.message)||(0,a.t)("license_group.an_error_occurred_while_fetching_workspaces"),error:!0})),e.dispatch(h.eD({key:(0,s.lV)(r)}))}}}},963465:(e,t,r)=>{r.d(t,{$1:()=>C,Av:()=>x,FR:()=>U,H_:()=>V,Kn:()=>F,MR:()=>D,Ok:()=>L,Vx:()=>R,gK:()=>P,hY:()=>k,k:()=>S,oP:()=>N,pn:()=>A,wI:()=>B,xR:()=>O,zz:()=>M});var n=r(600486),i=r(303498),a=r(359799),o=r(31642),l=r(313653),s=r(970740),c=r(644383),d=r(218609),u=r(721127),p=r(638780),m=r(402540),h=r(728443),_=r(761767),g=r(862610),f=r(242030),E=r(81340),y=r(220958),v=r(712137),b=r(163853),I=r(60993),T=r(111120),w=r(798354);let S="team_join_request_submitted",C="permission_request_submitted",O=(0,d.u4)(async(e,t)=>{var r;let i={team_id:t.teamId,level:t.level,message:t.message},a=e.getState().user,c=e.getState().roles.byTeamId,d=a&&c&&c[t.teamId]?null==(r=c[t.teamId][a.id])?void 0:r.level:null,u={level:t.level,team_id:t.teamId,team_type:t.teamOrgAccess,source:t.source,folder_id:t.folderId};t.actionType===C?(0,n.L9)(C,u):(0,n.L9)(S,u),await o.ZP.post("/api/team_role_requests",i).then(({data:r})=>{let n=r.meta;n.status===v.n.APPROVED?e.dispatch((0,h.hE)({teamId:n.team_id,joinedUser:a||void 0})):t.level===y.V.EDITOR&&d===y.V.VIEWER?e.dispatch(l.l.flash((0,s.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(l.l.flash((0,s.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t.message)||(0,s.t)("org_actions.an_error_occurred")))})}),A=(0,d.u4)((e,t)=>{o.ZP.del(`/api/team_role_requests/${t.requestId}`).then(t=>{e.dispatch(l.l.flash((0,s.t)("org_actions.request_withdrawn")))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t.message)||(0,s.t)("org_actions.an_error_occurred")))})}),N=(0,d.u4)((e,t)=>{let r=o.ZP.post(`/api/team_role_requests/${t.requestId}/approve`,{level:`${t.level}`});r.then(({data:t})=>{e.dispatch(l.l.flash((0,s.t)("org_actions.request_approved"))),e.dispatch(w.v_({role:t.meta}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred")))});let n={id:`temp-role-${t.email}`,created_at:Date.now(),user_id:t.user.id,user:t.user,resource_type:_._g.TEAM,resource_id_or_key:t.teamId,level:t.level,pending:!1,updated_at:`${new Date}`};(0,i.i0)().deprecatedOptimisticallyDeleteByView(g.PendingTeamRoleRequestsByTeamId,{TeamRoleRequest:{[t.requestId]:null}},r),(0,a.V)(r,e.dispatch,w.v_({role:n}))}),L=(0,d.u4)((e,t)=>{o.ZP.post(`/team_role_requests/${t.requestId}/deny`).then(t=>{e.dispatch(l.l.flash((0,s.t)("org_actions.request_denied")))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t.message)||(0,s.t)("org_actions.an_error_occurred")))})}),P=(0,d.Vh)("ORGS_OPT_IN_TO_PUBLIC_PLUGINS",(e,{orgId:t},{optimistId:r})=>{o.ZP.put(`/api/orgs/${t}`,{public_plugins_allowed:!0}).then(({data:t})=>{e.dispatch(d.w2.commit(r)),e.dispatch(p.gz({org:t.meta}))}).catch(()=>{e.dispatch(d.w2.revert(r))})}),R=(0,d.Vh)("ORGS_UPDATE",(e,{payload:t,successMessage:r},{optimistId:n})=>{let i=e.getState().currentUserOrgId;o.ZP.put(`/api/orgs/${i}`,t).then(t=>{e.dispatch(d.w2.commit(n)),e.dispatch(p.gz({org:t.data.meta})),r&&e.dispatch(c.R.enqueue({message:r,type:"orgs.update",error:!1}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred"),5e3)),e.dispatch(d.w2.revert(n))})}),k=(0,d.u4)((e,{orgId:t,googleSsoOnly:r})=>{o.ZP.put(`/api/orgs/${t}`,{google_sso_only:r}).then(({data:t})=>{e.dispatch(l.l.flash((0,s.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.gz({org:t.meta}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred"),5e3))})}),D=(0,d.u4)((e,{orgId:t,samlSsoOnly:r})=>{o.ZP.put(`/api/orgs/${t}`,{saml_sso_only:r}).then(t=>{e.dispatch(l.l.flash((0,s.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.gz({org:t.data.meta}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred"),5e3))})}),M=(0,d.u4)((e,{orgId:t,attribute:r})=>{o.ZP.put(`/api/orgs/${t}`,{featured_scim_metadata:r}).then(t=>{e.dispatch(p.gz({org:t.data.meta}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred"),5e3))})}),F=e=>{let{org:t,dispatch:r}=e,n=async(e,n,i)=>{let a=!1;return await o.ZP.put(`/api/orgs/${t.id}`,{vat_gst_id:e,regional_vat_gst_id:i}).then(()=>{a=!0,r(p.r$({id:t.id,vat_gst_id:e}))}).catch(e=>{n(e.toString())}),a};r((0,u.K4)({type:I.s,data:{org:t,updateVatGstId:n}}))},x=(0,d.u4)((e,{onFailure:t,onSuccess:r,orgId:n,timeoutDurationInSecs:i})=>{o.ZP.put(`/api/orgs/${n}`,{idle_timeout_duration_in_secs:i}).then(t=>{e.dispatch(l.l.flash((0,s.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(p.gz({org:t.data.meta})),r()}).catch(r=>{t(),e.dispatch(l.l.error((0,s.it)(r)||(0,s.t)("org_actions.an_error_occurred")))})}),U=(0,d.u4)((e,{orgId:t})=>{o.ZP.post(`/api/org/${t}/deletion_request`).then(t=>{e.dispatch(l.l.flash((0,s.t)("orgs_middleware.deletion_request_submitted")))}).catch(t=>{var r;e.dispatch(l.l.error((null==(r=t.data)?void 0:r.message)||(0,s.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(t)})}),B=(0,d.u4)((e,t)=>{let r=t.successMessage,n=t.autogenPasswordControl,a=t.settingsId,o=b.uU.apiAutogenControls({orgId:t.orgId,autogen_password_controls:n});o.then(()=>{r&&e.dispatch(c.R.enqueue({message:r,type:"orgs.update",error:!1}))}).catch(t=>{e.dispatch(l.l.error((0,s.it)(t)||(0,s.t)("org_actions.an_error_occurred"),5e3))}),a?(0,i.i0)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[a]:{autogenPasswordControls:n}}},o):(0,i.i0)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${t.orgId}`]:{autogenPasswordControls:n,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:t.orgId}}},o)}),V=(0,d.u4)((e,t)=>{o.ZP.post(`/api/org/${t.orgId}/delete_org_users`,{org_user_ids:t.orgUserIds}).then(t=>{e.dispatch(l.l.flash((0,s.t)("orgs_middleware.user_data_deleted")))}).catch(t=>{var r;e.dispatch(l.l.error((null==(r=t.data)?void 0:r.message)||(0,s.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(t)})});(0,d.u4)((e,t)=>{(0,E._0)(e.getState(),t.selectedView)?((0,f.K4)(t.orgId),(0,n.L9)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,f.K3)("orgSelectViewAndLoadItsResources").then(r=>{e.dispatch(m.mc()),e.dispatch(T.ZB(r.data.meta)),e.dispatch(T.fv(t.selectedView))})):(t.actionsIfNotHydrating&&t.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(T.fv(t.selectedView)))})},12023:(e,t,r)=>{r.d(t,{IV:()=>m,Jl:()=>u,j0:()=>d,nu:()=>p,t8:()=>h});var n=r(237863),i=r(31642),a=r(313653),o=r(970740),l=r(644383),s=r(218609),c=r(721127);(0,s.u4)((e,t)=>{let{idpUser:r}=t,n=e.getState();i.ZP.put(`/api/org_invites/${r.id}`,{org_id:n.currentUserOrgId,account_type:r.account_type}).then(({data:t})=>{e.dispatch(h([t.meta])),e.dispatch(a.l.flash((0,o.t)("org_invite.org_invite_update_success",{email:r.email})))}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||(0,o.t)("org_invite.org_invite_update_error");e.dispatch(a.l.flash(n))})});let d=(0,s.u4)((e,t)=>{let r=e.getState(),{emails:n,accountType:a,isResentInvite:s,licenseGroupId:d,workspaceId:u}=t;e.dispatch(p({creating:!0})),i.ZP.post("/api/org_invites",{org_id:r.currentUserOrgId,emails:n,account_type:a,license_group_id:d,workspace_id:u}).then(({data:t})=>{let r=t.meta;e.dispatch(h(r)),e.dispatch(p({creating:!1})),e.dispatch(c.eI());let i=(0,o.t)("org_invite.invite_resent");if(!s){let e=(0,o.t)("org_invite.new_members_message",{numInvites:r.length}),t=n.length-r.length,a=(0,o.t)("org_invite.existing_members_message",{numExisting:t});r.length>0?(i=e,t>0&&(i=[i,a].join(" "))):i=a}e.dispatch(l.R.enqueue({message:i}))}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||(0,o.t)("org_invite.org_invite_creation_error");e.dispatch(p({creating:!1})),e.dispatch(l.R.enqueue({message:n,error:!0}))})}),u=(0,s.u4)((e,t)=>{let{idpUser:r}=t,n=e.getState();i.ZP.del(`/api/org_invites/${r.id}`,{org_id:n.currentUserOrgId}).then(t=>{e.dispatch(m({org_invite_id:r.id})),e.dispatch(a.l.flash((0,o.t)("org_invite.org_invite_deletion_success",{email:r.email})))}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||(0,o.t)("org_invite.org_invite_deletion_error");e.dispatch(a.l.flash(n))})}),p=(0,n.e)("IS_CREATING_ORG_INVITES"),m=(0,n.e)("DELETE_ORG_INVITE"),h=(0,n.e)("SET_ORG_INVITES")},293269:(e,t,r)=>{r.d(t,{FI:()=>D,Hd:()=>N,J8:()=>I,LP:()=>b,Mz:()=>T,Tf:()=>P,U2:()=>L,Ux:()=>R,b0:()=>S,lx:()=>C,oN:()=>M,t8:()=>k,xY:()=>w,xh:()=>O});var n=r(652983),i=r(407908),a=r(214633),o=r.n(a),l=r(952152),s=r(237863),c=r(31642),d=r(313653),u=r(970740),p=r(218609),m=r(62514),h=r(728443),_=r(334136),g=r(966922),f=r(166034),E=r(163853),y=r(298358),v=r(28786);(0,p.Vh)("CHANGE_TEAM_ORG_ACCESS",async(e,t,{optimistId:r})=>{let n=t.team.id;try{let i=await c.ZP.put(`/api/teams/${n}`,{org_access:t.orgAccess}),a=i.data.meta;e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:[a]}))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}});let b=(0,p.Vh)("UNASSIGN_WORKSPACE_TO_TEAM",async(e,t,{optimistId:r})=>{let n={};if(t.teams.forEach(e=>{let t=e.workspace_id;t&&(t in n||(n[t]=[]),n[t].push(e.id))}),Object.keys(n).length)try{let t=Object.keys(n).map(e=>{let t=n[e];return c.ZP.del(`/api/workspace/${e}/teams`,{team_ids:t})}),i=await Promise.all(t),a=[].concat(...i.map(e=>e.data.meta));e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:a})),e.dispatch(d.l.flash((0,u.t)("org_team_actions.teams_were_unassigned",{numTeams:a.length})))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),I=(0,p.Vh)("UNASSIGN_LICENSE_GROUP_TO_TEAM",async(e,t,{optimistId:r})=>{let n={};if(t.teams.forEach(e=>{let t=e.license_group_id;t&&(t in n||(n[t]=[]),n[t].push(e.id))}),Object.keys(n).length)try{let t=Object.keys(n).map(e=>{let t=n[e];return c.ZP.del(`/api/license_group/${e}/teams`,{team_ids:t})}),i=await Promise.all(t),a=i.flatMap(e=>e.data.meta);e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:a})),e.dispatch(d.l.flash((0,u.t)("org_team_actions.teams_were_unassigned",{numTeams:a.length})))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),T=(0,p.Vh)("ASSIGN_WORKSPACE_TO_TEAM",async(e,t,{optimistId:r})=>{let n=t.teams.map(e=>e.id),i=t.workspaceId;try{let a=await c.ZP.post(`/api/workspace/${i}/teams`,{team_ids:n}),o=a.data.meta;e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:o})),e.dispatch(d.l.flash((0,u.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:o.length,workspaceName:t.workspaceName})))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),w=(0,p.Vh)("ASSIGN_LICENSE_GROUP_TO_TEAM",async(e,t,{optimistId:r})=>{let n=t.teams.map(e=>e.id),i=t.licenseGroupId;try{let a=await c.ZP.post(`/api/license_group/${i}/teams`,{team_ids:n}),o=a.data.meta;e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:o})),e.dispatch(d.l.flash((0,u.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:o.length,workspaceName:t.licenseGroupName})))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),S=(0,p.Vh)("GET_TEAMS_IN_LICENSE_GROUP",async(e,t,{optimistId:r})=>{let n=t.licenseGroupId;e.dispatch(P("loading"));try{let t=await f.v.getTeams({includeSecretTeams:!0,licenseGroupId:n}),i=t.data.meta;e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:i})),e.dispatch(P("loaded"))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(P("errors"))}}),C=(0,p.Vh)("GET_TEAMS_IN_WORKSPACE",async(e,t,{optimistId:r})=>{let n=t.workspaceId;e.dispatch(P("loading"));try{let t=await y.r.getTeams({includeSecretTeams:!0,workspaceId:n}),i=t.data.meta;e.dispatch(p.w2.commit(r)),e.dispatch(k({teams:i})),e.dispatch(P("loaded"))}catch(t){e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(P("errors"))}}),O=(0,p.Vh)("ORG_BATCH_JOIN_TEAMS",(e,t,{optimistId:r})=>{let n=e.getState().currentUserOrgId,i=e.getState().user,a=t.teamIds,o={team_ids:a};t.level&&(o.level=t.level);let l=(0,_.Vn)(a);e.dispatch(v.DB({key:l})),c.ZP.post(`/api/orgs/${n}/teams/join`,o).then(()=>{e.dispatch(p.w2.commit(r)),e.dispatch((0,h.pc)({teamIds:a,joinedUser:i||void 0,level:t.level}))}).catch(t=>{e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(v.eD({key:l}))})}),A=(0,p.Vh)("ORG_JOIN_TEAMS",(e,t,{optimistId:r})=>{let n=e.getState().currentUserOrgId,i=e.getState().user,a=t.teamId,o={team_ids:[a]};t.level&&(o.level=t.level);let l=(0,_.js)(a);e.dispatch(v.DB({key:l})),c.ZP.post(`/api/orgs/${n}/teams/join`,o).then(()=>{e.dispatch(p.w2.commit(r)),e.dispatch((0,h.hE)({teamId:a,joinedUser:i||void 0,level:t.level}))}).catch(t=>{e.dispatch(p.w2.revert(r)),e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(v.eD({key:l}))})}),N=(0,p.wV)("ORG_FETCH_TEAM",(e,t,{loadingKey:r})=>{let n=e.getState().currentUserOrgId,{teamId:i,disableFlashError:a}=t,o=E.uU.getTeam({orgId:n,teamId:i});(0,g.m)(o,e,r),o.then(t=>{let r=t.data.meta;e.dispatch(m.gz({team:r,userInitiated:!1}))}).catch(t=>{a||e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`),L=(0,p.wV)("ORG_FETCH_DISCOVERABLE_TEAMS",(e,t)=>{let r=e.getState().currentUserOrgId,{includeProjectCount:n,includeMemberCount:i,includeTopMembers:a,includeSecretTeams:o}=t||{};E.uU.getTeams({orgId:r,includeMemberCount:i,includeProjectCount:n,includeTopMembers:a,includeSecretTeams:o}).then(t=>{let r=t.data.meta;e.dispatch(k({teams:r}))}).catch(t=>{e.dispatch(d.l.error((0,u.it)(t,(0,u.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))})}),P=(0,s.e)("SET_ORG_TEAMS_STATUS"),R=(0,s.e)("RESET_ORG_TEAMS"),k=(0,s.e)("ORGS_SET_DISCOVERABLE_TEAMS");function D(e,t,r){return o()(()=>e(A({teamId:t,level:r})),500,{leading:!0,trailing:!1})}function M(e,t){let r=(0,i.I0)(),a=(0,l.Z)(()=>r(A({teamId:e,level:t})),500,{leading:!0,trailing:!1});return(0,n.useCallback)(a,[a])}},133419:(e,t,r)=>{r.d(t,{NR:()=>f,R0:()=>T,WR:()=>b,__:()=>w,gz:()=>g,jf:()=>v,ki:()=>S,qV:()=>y,t8:()=>_,uK:()=>E,v5:()=>I});var n=r(237863),i=r(31642),a=r(313653),o=r(970740),l=r(750274),s=r(644383),c=r(218609),d=r(436649),u=r(801998),p=r(966922),m=r(65002),h=r(163853);let _=l.setOrgUsers,g=(0,c.Vh)("ORG_USER_PUT",async(e,t,{optimistId:r})=>{var n;if(t.userInitiated)try{let n=await m.Q.updateOrgUser({id:t.orgUser.id,changes:{description:t.orgUser.description}});e.dispatch(c.w2.commit(r)),e.dispatch(g({orgUser:n.data.meta,userInitiated:!1}))}catch(t){e.dispatch(c.w2.revert(r)),e.dispatch(a.l.error((null==(n=t.data)?void 0:n.message)||(0,o.t)("org_user_actions.an_error_occurred")))}});(0,c.Vh)("ORG_USER_UPDATE_ONBOARDING",async(e,t,{optimistId:r})=>{var n;try{let n={...!1===t.showUserOnboarding&&{show_figjam_user_onboarding:!1},...t.shownPreLaunchAdminOnboarding&&{has_shown_figjam_admin_onboarding:!0},...t.shownPostLaunchAdminOnboarding&&{has_shown_figjam_admin_launch_onboarding:!0}},i=await m.Q.updateOrgUser({id:t.orgUserId,changes:n});e.dispatch(c.w2.commit(r)),e.dispatch(g({orgUser:i.data.meta,userInitiated:!1}))}catch(t){e.dispatch(c.w2.revert(r)),e.dispatch(a.l.error((null==(n=t.data)?void 0:n.message)||(0,o.t)("org_user_actions.an_error_occurred_closing_onboarding")))}});let f=(0,c.Vh)("ORG_USER_REQUEST_ACCOUNT_TYPE",async(e,t,{optimistId:r})=>{var n;try{await i.ZP.put(`/api/org_account_type_request/${t.orgUserId}`,{entry_point:t.entryPoint,message:t.message,admin_ids:t.adminIds,editor_type:t.licenseType,file_key:t.fileKey}),e.dispatch(c.w2.commit(r)),e.dispatch(s.R.enqueue({message:(0,o.t)("org_user_actions.upgrade_request_sent"),type:"upgrade-request-sent"}))}catch(t){console.error(t),e.dispatch(c.w2.revert(r)),e.dispatch(a.l.error((null==(n=t.data)?void 0:n.message)||(0,o.t)("org_user_actions.an_error_occurred_requesting_account_type")))}}),E=(0,c.Vh)("ORG_USER_LEAVE_ORG",async(e,t,{optimistId:r})=>{var n;try{await i.ZP.del(`/api/org_user/${t.orgId}`),e.dispatch(c.w2.commit(r)),e.dispatch(s.R.enqueue({type:"org_guest_leave",message:(0,o.t)("org_user_actions.you_successfully_left_organization",{orgName:t.orgName})}))}catch(i){console.error(i),e.dispatch(c.w2.revert(r)),e.dispatch(a.l.error((null==(n=i.data)?void 0:n.message)||(0,o.t)("org_user_actions.an_error_occurred_leaving_organization",{orgName:t.orgName})))}}),y=(0,c.Vh)("ORG_USER_BATCH_UPDATE_ORG_USERS",async(e,t,{optimistId:r})=>{var n;let i,l;let s=e.getState();if(t.lastUpdateTimestampOverride)i=t.lastUpdateTimestampOverride,l=t.lastUpdateTimestampOverride;else{let e=s.orgUsersByOrgId.orgUsers[t.orgId],r=Object.values(e).filter(e=>t.params.org_user_ids.includes(e.id));if(0===r.length)return;if(l=new Date(Math.max(...r.map(e=>+new Date(e.updated_at)))).toISOString(),void 0!==t.params.license_group_id){let e=r.map(e=>{var t;return null==(t=e.license_group_member)?void 0:t.updated_at}).filter(Boolean);i=e.length>0?new Date(Math.max(...e.map(e=>+new Date(e)))).toISOString():null}}try{let n=await m.Q.updateOrgUsers({orgId:t.orgId,...t.params,latest_ou_update:l,latest_lg_member_update:i,showing_billing_groups:(0,u.uH)(t.orgId)}),a=n.data.meta;e.dispatch(c.w2.commit(r)),e.dispatch(_({orgUsers:a,orgId:t.orgId})),t.successCallback&&t.successCallback()}catch(t){console.error("Batch Update Failed",t),e.dispatch(c.w2.revert(r)),e.dispatch(a.l.error((null==(n=t.data)?void 0:n.message)||(0,o.t)("org_user_actions.an_error_occurred_updating_org_users")))}}),v=(0,c.wV)("ORG_USER_BATCH_DELETE_ORG_USERS",async(e,t)=>{var r;if(t.userInitiated)try{await i.ZP.del(`/api/orgs/${t.orgId}/org_users`,t.params);let r=t.params.org_user_ids.length,n=(0,o.t)("org_user_actions.user_has_been_removed_from_organization",{deletedOrgUserCount:r});e.dispatch(a.l.flash(n))}catch(t){e.dispatch(a.l.error((null==(r=t.data)?void 0:r.message)||(0,o.t)("org_user_actions.an_error_occurred")));return}}),b=({orgId:e})=>`ORG_USER_GET_ADMINS_${e}`,I=(0,c.wV)("ORG_USER_GET_ADMINS",async(e,{orgId:t},{loadingKey:r})=>{let n=e.getState();if(!d.d4(n.loadingState,r))return;let i=h.uU.getAdmins({includeLicenseAdmins:!0,orgId:t});(0,p.m)(i,e,r);try{let r=await i;e.dispatch(_({orgUsers:r.data.meta,orgId:t}))}catch(t){e.dispatch(a.l.error(t.message||(0,o.t)("org_user_actions.an_error_occurred_fetching_org_admins")))}},b),T=(0,n.e)("LOAD_ORG_DRAFTS_OWNERS"),w=(0,c.wV)("ORG_USER_GET_BY_USER_ID",async(e,t,{loadingKey:r})=>{let n=h.uU.getUser({orgId:t.orgId,userId:t.userId});(0,p.m)(n,e,r);try{let r=await n,i=[r.data.meta];return e.dispatch(_({orgUsers:i,orgId:t.orgId})),i.find(e=>e.user_id===t.userId)||null}catch(t){return console.error(t),e.dispatch(a.l.error(t.message||(0,o.t)("org_user_actions.an_error_occurred_fetching_org_users"))),null}},e=>`ORG_USER_GET_BY_USER_ID_${e.orgId}_${e.userId}`),S=(0,c.u4)((e,{orgId:t})=>{m.Q.useDevModeBeta(t).catch(e=>{})})},413110:(e,t,r)=>{r.d(t,{$R:()=>w,DY:()=>C,Es:()=>u,F2:()=>P,NS:()=>h,NW:()=>c,Po:()=>f,Rd:()=>O,S1:()=>N,Sd:()=>s,U3:()=>E,VD:()=>_,Xh:()=>T,_1:()=>A,_5:()=>m,gj:()=>p,ik:()=>g,jI:()=>b,mE:()=>S,o4:()=>d,s3:()=>L,sy:()=>I,x2:()=>y,y4:()=>l,yH:()=>v});var n=r(237863),i=r(111120),a=r(326714),o=r(218609);let l=(0,o.u4)((e,{teamId:t,showBreadcrumbs:r,onCloseOrComplete:n})=>{e.dispatch(i.fv({view:"eduReview",teamId:t,showBreadcrumbs:r,onCloseOrComplete:n})),e.dispatch(A({billingPeriod:a.tv.STUDENT}))}),s=(0,n.e)("PAYMENT_RESTORE_SAVED_CART"),c=(0,n.e)("PAYMENT_SET_CURRENCY"),d=(0,n.e)("PAYMENT_SET_TOKEN"),u=(0,n.e)("PAYMENT_SET_TAXES"),p=(0,n.e)("PAYMENT_SET_PROMO"),m=(0,n.e)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),h=(0,n.e)("PAYMENT_PUT_ANNUAL_QUANTITY"),_=(0,n.e)("PAYMENT_SET_VAT_GST_ID"),g=(0,n.e)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),f=(0,n.e)("PAYMENT_MAKE_STUDENT_TEAM"),E=(0,n.e)("PAYMENT_DOWNGRADE"),y=(0,n.e)("PAYMENT_SHOW_ERROR"),v=(0,n.e)("PAYMENT_SUBMIT_ADD_ANNUAL_CONFIRMATION"),b=(0,n.e)("PAYMENT_SUBMIT_PAYMENT_AND_ADDRESS"),I=(0,n.e)("PAYMENT_SET_COMPANY_DETAILS"),T=(0,n.e)("PAYMENT_SET_SUBMIT_PENDING"),w=(0,n.e)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),S=(0,n.e)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),C=(0,n.e)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),O=(0,n.e)("PAYMENT_SET_NUM_EDITORS"),A=(0,n.e)("PAYMENT_SET_BILLING_PERIOD"),N=(0,n.e)("PAYMENT_INIT"),L=(0,n.e)("PAYMENT_START_ORG_UPGRADE_FLOW"),P=(0,n.e)("PAYMENT_START_PRO_UPGRADE_FLOW")},326394:(e,t,r)=>{r.d(t,{$w:()=>h,AH:()=>E,L1:()=>p,Q8:()=>b,Rh:()=>m,S2:()=>_,Uc:()=>y,hF:()=>f,hP:()=>c,mc:()=>I,mg:()=>s,of:()=>l,qk:()=>u,sm:()=>g,u0:()=>v});var n=r(237863),i=r(980220),a=r(31642),o=r(218609);let l=(0,o.wV)("RECENT_PROTOTYPE_UNMARK_VIEWED",(e,t)=>{let r=a.ZP.del(`/api/files/${t.fileKey}/prototype/view`,{page_id:t.pageId});(0,i.T)({requestPromise:r,fallbackError:"An error occurred while removing this prototype from Recently Viewed.",store:e,next:e.dispatch,action:d({fileKey:t.fileKey,pageId:t.pageId})})}),s=(0,o.wV)("RECENT_PROTOTYPE_MARK_VIEWED",(e,t)=>{a.ZP.post(`/api/files/${t.fileKey}/prototype/view`,{page_id:t.pageId}).then(({data:t})=>{e.dispatch(u({prototype:t.meta}))}).catch(e=>{})}),c=(0,n.e)("PROTOTYPE_RESET_RECENTS"),d=(0,n.e)("RECENT_PROTOTYPE_DELETE"),u=(0,n.e)("RECENT_PROTOTYPE_POST"),p=(0,n.e)("PROTOTYPE_SET_IS_FOOTER_VISIBLE"),m=(0,n.e)("PROTOTYPE_SET_IS_RECONNECTING"),h=(0,n.e)("PROTOTYPE_SET_PROGRESS_BAR_MODE"),_=(0,n.e)("PROTOTYPE_SET_BACKGROUND_COLOR"),g=(0,n.e)("PROTOTYPE_SET_CURRENT_PAGE"),f=(0,n.e)("PROTOTYPE_SET_PAGES"),E=(0,n.e)("PROTOTYPE_SHOW_ONLY_MY_COMMENTS"),y=(0,n.e)("PROTOTYPE_SHOW_RESOLVED_COMMENTS"),v=(0,n.e)("PROTOTYPE_HIDE_COMMENTS"),b=(0,n.e)("PROTOTYPE_SHOW_COMMENTS");(0,n.e)("PROTOTYPE_SET_DISABLE_DEFAULT_KEYBOARD_NAV");let I=(0,n.e)("PROTOTYPE_RESET")},307425:(e,t,r)=>{r.d(t,{GE:()=>g,Gd:()=>P,J6:()=>v,Rc:()=>y,T2:()=>f,UN:()=>O,Vn:()=>C,Ws:()=>N,XX:()=>S,_o:()=>k,cD:()=>I,d5:()=>T,ho:()=>b,kl:()=>M,lk:()=>w,mR:()=>L,no:()=>E,of:()=>A,vS:()=>F,zD:()=>R});var n=r(647744),i=r(31642),a=r(970740),o=r(310983),l=r(218609),s=r(244311),c=r(577664),d=r(54055),u=r(138212),p=r(339531),m=r(537765),h=r(646472),_=r(938110);let g=(0,l.wV)("SET_RECENT_WHITEBOARD_TOOLS",(e,t)=>{}),f=(0,l.wV)("SYNC_RECENT_WHITEBOARD_TOOLS",(e,t)=>{let r=(0,m.LC)(t.storeInRecentsKey,_.ER.WHITEBOARD_TOOL);e.dispatch(g({storeInRecentsKey:t.storeInRecentsKey,recentWhiteboardTools:r}))}),E=(0,l.wV)("ADD_WHITEBOARD_TOOL_TO_RECENTS",(e,t)=>{}),y=(0,l.wV)("SET_RECENT_FACE_STAMPS",(e,t)=>{}),v=(0,l.wV)("SYNC_RECENT_FACE_STAMPS",(e,t)=>{let r=(0,m.LC)(t.storeInRecentsKey,_.ER.FACE_STAMP);e.dispatch(y({storeInRecentsKey:t.storeInRecentsKey,recentFaceStamps:r}))}),b=(0,l.wV)("ADD_FACE_STAMP_TO_RECENTS",(e,t)=>{}),I=(0,l.wV)("SYNC_RECENT_PLUGINS",(e,t)=>{let r=(0,m.LC)(t.storeInRecentsKey,h.Xh.PLUGIN);e.dispatch(w({storeInRecentsKey:t.storeInRecentsKey,recentResources:r}));let n=r.map(e=>e.id);e.dispatch(P({resourceType:h.Xh.PLUGIN,resourceIds:n}))}),T=(0,l.wV)("SYNC_RECENT_WIDGETS",(e,t)=>{let r=(0,m.LC)(t.storeInRecentsKey,h.Xh.WIDGET);e.dispatch(S({storeInRecentsKey:t.storeInRecentsKey,recentResources:r}));let n=r.map(e=>e.id);e.dispatch(P({resourceType:h.Xh.WIDGET,resourceIds:n}))}),w=(0,l.wV)("SET_RECENT_PLUGINS",async(e,t)=>{}),S=(0,l.wV)("SET_RECENT_WIDGETS",async(e,t)=>{}),C=o.Vn,O=o.UN,A=o.of,N=(0,l.wV)("ADD_FETCHED_PLUGIN_VERSION",async(e,t)=>{}),L=(0,l.wV)("ADD_FETCHED_WIDGET_VERSION",async(e,t)=>{}),P=(0,l.u4)((e,t)=>{F(e,t)}),R=(0,l.wV)("ADD_PLUGIN_TO_RECENTS",(e,t)=>{e.dispatch(P({resourceType:h.Xh.PLUGIN,resourceIds:[t.id]})),t.skipPluginRun||D(t.id,t.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[t.id],e.getState().recentlyUsed.plugins[t.storeInRecentsKey],!!t.isDevelopment,e.dispatch)}),k=(0,l.wV)("ADD_WIDGETS_TO_RECENTS",(e,t)=>{e.dispatch(P({resourceType:h.Xh.WIDGET,resourceIds:[t.id]})),D(t.id,t.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[t.id],e.getState().recentlyUsed.widgets[t.storeInRecentsKey],!!t.isDevelopment,e.dispatch)}),D=(e,t,r,o,l,s,d)=>{var p;if(o&&o.current_user_has_run||!t||(0,u.xg)(e)||s)return;let m=l.find(t=>t.id===e),h=!!(null==(p=null==m?void 0:m.run_by_user_ids)?void 0:p.includes(t));h||i.ZP.post(`/api/plugin_runs/${e}`,{org_id:r}).then(({data:t})=>{d(c.F({resourceId:e,userFirstRanAt:t.meta.created_at}))}).catch(e=>{n.u.error((0,a.it)(e))})},M=(e,t)=>r=>{var n;let i=(0,p.hb)(e),a=((null==(n=i.manifest)?void 0:n.editorType)??[]).map(e=>"figma"===e?_.xQ.Design:_.xQ.FigJam),o=(0,h._4)(e)?k:R;a.forEach(n=>r(o({storeInRecentsKey:n,id:e.id,version:i.id,currentUserId:t})))};function F(e,t){let r={},n=({id:n,version:i,status:a})=>{let o=t.resourceType===h.Xh.PLUGIN?N:L;return i&&(r[n]=i),e.dispatch(o({id:n,version:i,status:a}))},a=[];if(t.resourceIds.forEach(i=>{let o=t.resourceType===h.Xh.PLUGIN?e.getState().installedPluginVersions.plugins[i]:e.getState().installedWidgetVersions.widgets[i];if(o){n({id:i,version:o,status:_.iF.FETCHED});return}let l=t.resourceType===h.Xh.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[i]:e.getState().recentlyUsed.widgets.fetchedResources[i];l&&l.status!==_.iF.NOT_FETCHED&&l.version?l.version&&(r[i]=l.version):a.push(i)}),!a.length)return Promise.resolve(r);a.forEach(e=>{n({id:e,status:_.iF.FETCHING})});let o={ids:a,org_id:e.getState().currentUserOrgId,include_pending:!0};return i.ZP.post(`/api/${(0,d.$U)(t.resourceType)}/batch`,o).then(({data:t})=>(e.dispatch(s.jb({publishedPlugins:t.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),a.forEach(e=>{let r;let i=t.meta.find(t=>t.id===e);i&&(r=(0,m.Jv)(i)),n({id:e,version:r,status:_.iF.FETCHED})}),r)).catch(()=>(a.forEach(e=>{n({id:e,status:_.iF.NOT_FETCHED})}),{}))}},385431:(e,t,r)=>{r.d(t,{$M:()=>g,TZ:()=>E,Tf:()=>_,_n:()=>d,cB:()=>p,cX:()=>m,gf:()=>u,m4:()=>f,vI:()=>h});var n=r(237863),i=r(850724),a=r(122342),o=r(961215),l=r(413810),s=r(996068),c=r(218609);let d="seen_try_onboarding",u=(0,c.wV)("SET_WORKSHOP_USER_NAME",(e,t)=>{let r=t.name.trim().substring(0,170),n=e.getState(),i="fullscreen"===n.selectedView.view&&n.selectedView.workshopModeInfo;i&&(E(r),(0,s.fM)(i.id,r))}),p=(0,n.e)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),m=(0,n.e)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),h=(0,c.wV)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED",()=>{(0,a.gm)().set(d,!0)}),_=(0,n.e)("SET_WORKSHOP_MODE_UNTIL"),g=(0,n.e)("CLEAR_TRY_PLUGIN"),f=(0,c.u4)((e,t)=>{let r=e.getState();return(0,i.zp)((0,l.hM)(r,t))}),E=e=>{o.B9x.setName(e)}},630201:(e,t,r)=>{r.d(t,{Lm:()=>d,Ty:()=>s,o$:()=>p,pg:()=>l,x5:()=>c,zZ:()=>u});var n=r(237863),i=r(467373),a=r(218609),o=r(721154);let l=(0,a.wV)("FULLSCREEN_HIDE_STYLE_PREVIEW",e=>{}),s=(0,a.u4)(e=>{let t=e.getState().stylePreviewShown;t.isShown&&!t.isCreating&&e.dispatch(l())}),c=(0,a.u4)((e,t)=>{let{rowTop:r,rowLeft:n,styleType:i,inheritStyleKeyField:a,styleNameInputPrefix:o,nodeId:l}=t;e.dispatch(d({rowTop:r,rowLeft:n,styleType:i,inheritStyleKeyField:a,styleNameInputPrefix:o,nodeId:l}))}),d=(0,n.e)("SHOW_CREATE_STYLE_PREVIEW"),u=(0,a.wV)("FULLSCREEN_SHOW_STYLE_PREVIEW",(e,t)=>{let r=t.style.file_key,n=null!=e.getState().fileByKey[r];n||i.h.getFiles({fileKey:r}).then(t=>e.dispatch(o.gz({file:t.data.meta})))}),p=(0,n.e)("STYLE_FILE_PUT_STYLE_SET");(0,n.e)("STYLE_FILE_GET_STYLE_SET")},62514:(e,t,r)=>{r.d(t,{Dh:()=>m,Dt:()=>v,IV:()=>N,K4:()=>I,KN:()=>y,NK:()=>g,PQ:()=>C,Q2:()=>w,R2:()=>f,Rh:()=>p,U2:()=>P,Vy:()=>E,XJ:()=>T,YW:()=>_,ZW:()=>b,gz:()=>A,kt:()=>h,q1:()=>S,qV:()=>O,v_:()=>L});var n=r(237863),i=r(448501),a=r(31642),o=r(313653),l=r(970740),s=r(750274),c=r(218609),d=r(966922),u=r(239342);let p=(0,c.Vh)("TEAM_REMOVE_FROM_TEAM",(e,{teamId:t,userId:r,userInitiated:n},{optimistId:i})=>{n&&a.ZP.del(`/api/teams/${t}/users/${r}`).then(()=>{e.dispatch(c.w2.commit(i))}).catch(t=>{e.dispatch(c.w2.revert(i));let r=(0,l.t)("file_browser.file_browser_actions.error_on_team_member_removal");e.dispatch(o.l.error(r)),console.error(t)})}),m=(0,c.Vh)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:t,userIds:r},{optimistId:n})=>{a.ZP.del(`/api/teams/${t}/users`,{user_ids:r}).then(()=>{e.dispatch(c.w2.commit(n))}).catch(t=>{e.dispatch(c.w2.revert(n))})}),h=(0,c.u4)(async(e,t)=>{let{teamId:r}=t;await a.ZP.put(`/api/teams/${r}/restore`).then(()=>{let t=`/files/team/${r}`;i.default.redirect(t),e.dispatch(o.l.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(t=>{e.dispatch(o.l.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:t.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),_=(0,c.u4)(async(e,t)=>{await a.ZP.put(`/api/teams/${t.teamId}`,{description:t.description}).then(()=>{e.dispatch(A({team:{id:t.teamId,description:t.description},userInitiated:!0}))}).catch(()=>{e.dispatch(o.l.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})});(0,c.wV)("TEAM_GET_CMTY_PUBLISH_AS_USER_ENABLED",(e,{teamId:t},{loadingKey:r})=>{let n=u.j.getTeam({teamId:t});(0,d.m)(n,e,r),n.then(({data:t})=>{e.dispatch(A({team:t.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(o.l.error((0,l.t)("file_browser.error_try_again")))})});let g=(0,c.wV)("TEAM_FETCH_MEMBERS_LIST",(e,{teamId:t,userInitiated:r=!0},{loadingKey:n})=>{let i=u.j.getMembers({teamId:t});r&&(0,d.m)(i,e,n),i.then(({data:r})=>{let n={};r.meta.forEach(e=>{n[e.email]=e}),e.dispatch(f({members:n,teamId:t}))},t=>{console.error(t),e.dispatch(o.l.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`),f=(0,n.e)("TEAM_SET_MEMBERS"),E=(0,n.e)("TEAM_BATCH_JOIN"),y=(0,n.e)("TEAM_JOIN"),v=(0,n.e)("TEAM_STOP_RENAME"),b=(0,n.e)("TEAM_BEGIN_RENAME"),I=(0,n.e)("TEAM_CREATION_SET_LOADING"),T=(0,n.e)("TEAM_CHANGE_DEFAULT_PERMISSION"),w=(0,n.e)("TEAM_CHANGE_SHARING_SETTINGS"),S=(0,n.e)("TEAM_CHANGE_ORG_ACCESS");(0,n.e)("TEAM_LOADED");let C=(0,n.e)("TEAM_RENAME"),O=(0,n.e)("TEAM_BATCH_PUT"),A=s.putTeam,N=s.delTeam,L=(0,n.e)("TEAM_POST"),P=(0,n.e)("TEAM_GET")},7633:(e,t,r)=>{r.d(t,{Bh:()=>I,C7:()=>T,KF:()=>g,NV:()=>f,Sc:()=>h,_L:()=>_,gZ:()=>b,iF:()=>d,is:()=>c,kW:()=>p,nw:()=>u,sz:()=>m,v5:()=>E,vW:()=>y,yw:()=>v});var n=r(237863),i=r(970740),a=r(644383),o=r(721127),l=r(68174),s=r(218609);let c=(0,s.u4)((e,{memberEmails:t,team:r})=>{let{id:n}=r,s=new Set(t),c=e.getState().teamMembersByTeamId[n],d=[];Object.keys(c).forEach(e=>{let t=c[e],r=s.has(t.email);r&&t.id&&d.push(t)});let p=d.map(e=>({nameOrEmail:e.name??e.email,id:e.id}));e.dispatch((0,o.K4)({type:l.U,data:{editors:d,team:r,onConfirm:()=>{d.forEach(t=>{let r=t.last_active?new Date(1e3*t.last_active).toDateString():"never",i={id:t.id,img_url:t.img_url,name:t.name??"",email:t.email,last_active:r,team_id:n};e.dispatch(u({editor:i}))}),e.dispatch(a.R.enqueue({type:"team-editors-downgraded",message:(0,i.t)("downgrade_member_visual_bell.text",{numMembers:d.length,userName:p[0].nameOrEmail})}))}}}))}),d=(0,n.e)("TEAM_ADMIN_SET_MEMBER_EDU_GRACE_PERIOD"),u=(0,n.e)("TEAM_ADMIN_DEMOTE_EDITOR_ROLES"),p=(0,n.e)("TEAM_ADMIN_SET_USER_ROLES"),m=(0,n.e)("TEAM_ADMIN_INIT_USER_DETAILS"),h=(0,n.e)("TEAM_ADMIN_SET_SEARCH_RESULTS"),_=(0,n.e)("TEAM_ADMIN_SET_QUERY"),g=(0,n.e)("TEAM_ADMIN_SORT_EDITORS_BY"),f=(0,n.e)("TEAM_ADMIN_SET_ADMINS_BY_ID"),E=(0,n.e)("TEAM_ADMIN_GET_ADMINS"),y=(0,n.e)("TEAM_ADMIN_SET_EDITORS"),v=(0,n.e)("TEAM_ADMIN_SET_SUMMARY_DEPRECATED"),b=(0,n.e)("TEAM_ADMIN_FETCH_SUMMARY"),I=(0,n.e)("TEAM_ADMIN_FETCH_EDITORS"),T=(0,n.e)("TEAM_ADMIN_INIT_BILLING_DETAILS")},264119:(e,t,r)=>{r.d(t,{H2:()=>b,K3:()=>A,Kn:()=>O,W1:()=>T,eO:()=>I,fn:()=>w,h_:()=>y,nM:()=>C,sA:()=>v,up:()=>S});var n=r(237863),i=r(31642),a=r(313653),o=r(970740),l=r(644383),s=r(218609),c=r(721127),d=r(368041),u=r(436649),p=r(687496),m=r(966922),h=r(326714),_=r(186896),g=r(997025),f=r(60993),E=r(281220);let y=e=>{let{teamId:t,dispatch:r,email:n}=e;return i.ZP.put(`/api/subscriptions/team/${t}/billing_contact`,{email:n}).then(e=>{r(S({summary:{billing_contact:e.data.meta}})),r(l.R.enqueue({message:(0,o.t)("visual_bell.team_billing_contact_updated"),type:"team-billing-contact-changed"}))})},v=(0,s.wV)("TEAM_ADMIN_FETCH_INVOICES",(e,{teamId:t},{loadingKey:r})=>{let n=_.n.getTeamInvoices({teamId:t});(0,m.m)(n,e,r),n.then(({data:t})=>{t.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(T({invoices:t.meta}))}).catch(()=>{e.dispatch(a.l.error((0,o.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),b=(0,s.wV)("TEAM_ADMIN_FETCH_BILLING_SUMMARY",(e,{teamId:t},{loadingKey:r})=>{let n=_.n.getTeamSummary({teamId:t});(0,m.m)(n,e,r),n.then(({data:t})=>{e.dispatch(w({summary:t.meta}))}).catch(()=>{e.dispatch(a.l.error((0,o.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`),I=(0,s.u4)((e,{teamId:t,shouldForceFetch:r})=>{let n=b.loadingKeyForPayload({teamId:t}),i=e.getState(),a=!(0,u.hg)(i.loadingState,n)&&(r||!(0,u.B4)(i.loadingState,n));a&&e.dispatch(b({teamId:t}));let o=v.loadingKeyForPayload({teamId:t}),l=!(0,u.hg)(i.loadingState,o)&&(r||!(0,u.B4)(i.loadingState,o));l&&e.dispatch(v({teamId:t}))}),T=(0,n.e)("TEAM_ADMIN_POST_INVOICE"),w=(0,n.e)("TEAM_ADMIN_SET_SUMMARY"),S=(0,n.e)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER"),C=e=>{let{team:t,dispatch:r,cancelling:n,monthlySub:a,annualSub:s,currency:d}=e,u=async(e,a,s)=>{var c,d;let u={source_token:null==(c=e.token)?void 0:c.id,payment_method:null==(d=e.setup_intent)?void 0:d.payment_method,address:a},p=!1;return await i.ZP.put(`/api/subscriptions-2018-11-08/team/${t.id}/token`,u).then(({data:e})=>{r(b({teamId:t.id}));let i=e.meta&&e.meta.team;i&&(p=!0),n?r(l.R.enqueue({message:(0,o.t)("visual_bell.team_subscription_reactivated")})):r(l.R.enqueue({message:(0,o.t)("visual_bell.team_payment_source_updated")}))}).catch(e=>{var t;s((null==(t=null==e?void 0:e.data)?void 0:t.message)||e.toString())}),p},m=(0,E.hW)((null==a?void 0:a.design_quantity)??0,h.tv.MONTHLY,d||"usd")+(0,E.nj)((null==a?void 0:a.whiteboard_quantity)??0,h.tv.MONTHLY,d||"usd"),_=(0,E.hW)((null==s?void 0:s.design_quantity)??0,h.tv.ANNUAL,d||"usd")+(0,E.nj)((null==s?void 0:s.whiteboard_quantity)??0,h.tv.ANNUAL,d||"usd");r((0,c.K4)({type:g.aF,data:{dispatch:r,currency:d,defaultCountry:(0,p.yJ)(),estimatedChargeCents:Math.max(m,_),onSubmit:u,customerInfo:{teamId:t.id},isReactivating:n}}))},O=e=>{let{team:t,dispatch:r}=e,n=async(e,r,n)=>{let a=!1;return await i.ZP.put(`/api/subscriptions/team/${t.id}/vat_gst`,{vat_gst_id:e,regional_vat_gst_id:n}).then(()=>{a=!0}).catch(e=>{r(e.toString())}),a};r((0,c.K4)({type:f.s,data:{team:t,updateVatGstId:n}}))},A=e=>{let{team:t,updatedDisplayName:r,updatedLegalName:n,dispatch:i}=e;i((0,c.K4)({type:d.z,data:{modalTitle:(0,o.t)("settings_table.edit_names"),displayName:r,legalName:n,updateNameImmediately:!0,team:t}}))}},306361:(e,t,r)=>{r.d(t,{CQ:()=>v,FK:()=>N,KB:()=>f,Uv:()=>b,Wr:()=>_,ax:()=>S,cV:()=>g,nM:()=>P,nV:()=>I,oZ:()=>O,rC:()=>y,sO:()=>E,t8:()=>T,to:()=>h});var n=r(237863),i=r(600486),a=r(969709),o=r(716250),l=r(303498),s=r(680356),c=r(31642),d=r(218609),u=r(966922),p=r(690590),m=r(745755);let h=(0,d.Vh)("UNFOLLOW_FEED_TAG",(e,t,{optimistId:r})=>{let n=e.getState().user,i=(0,l.i0)();if(!i||!n)return;let a=c.ZP.post("/api/feed_tags/unfollow",{hashtag:t.hashtag,org_id:t.orgId}).then(t=>{e.dispatch(d.w2.commit(r))}).catch(t=>{e.dispatch(d.w2.revert(r))});i.optimisticallyDelete({FeedTagFollower:{[t.feedTagFollowerId]:null}},a)}),_=(0,d.Vh)("FOLLOW_FEED_TAG",(e,t,{optimistId:r})=>{let n=e.getState().user,i=(0,l.i0)();if(!i||!n)return;let a=c.ZP.post("/api/feed_tags/follow",{hashtag:t.hashtag,org_id:t.orgId}).then(t=>{e.dispatch(d.w2.commit(r))}).catch(t=>{e.dispatch(d.w2.revert(r))});i.optimisticallyCreate({FeedTagFollower:{[`optimistic-${r.toString()}`]:{userId:n.id,feedTagId:t.tagId}}},a)}),g=(0,n.e)("REFRESH_FEED"),f=(0,d.u4)((e,t,{loadingKey:r})=>{if(!(0,o.BZ)().xr_debounce_threshold)return;let n=m.K.getFeedBellStates();(0,u.m)(n,e,r),n.then(t=>{e.dispatch(y({bellStates:t.data.meta}))})}),E=(0,n.e)("TEAM_FEED_SET_BELL_STATE"),y=(0,n.e)("TEAM_FEED_SET_INITIAL_BELL_STATES"),v=(0,d.Vh)("DELETE_FEED_POST_COMMENT",(e,t,{optimistId:r})=>{let n=e.getState().user,i=(0,l.i0)(),a=t.uuid;if(!n||!i||!a||t.commentId.startsWith(P))return;let o=i.getIdFromUuid("FeedComment",a).then(e=>c.ZP.del(`/api/feed_posts/comments/${e}`)).then(()=>{e.dispatch(d.w2.commit(r))}).catch(()=>{e.dispatch(d.w2.revert(r))});i.optimisticallyDeleteWithUUID({FeedComment:{[a]:null}},o)}),b=(0,d.Vh)("EDIT_FEED_POST_COMMENT",(e,t,{optimistId:r})=>{t.messageMeta=(0,a.lR)(t.messageMeta);let n=e.getState().user,o=(0,l.i0)(),s=t.uuid;if(!n||!o||!s)return;let u=o.getIdFromUuid("FeedComment",s).then(e=>c.ZP.put(`/api/feed_posts/comments/${e}`,{message_meta:t.messageMeta,attachment_updates:(0,p.W$)(t.attachmentUpdates)})).then(()=>{e.dispatch(d.w2.commit(r))}).catch(()=>{e.dispatch(d.w2.revert(r))});(0,i.L9)("Team Feed Comment Edited",{text:(0,a.nV)(t.messageMeta)});let m=(0,a.At)(t.messageMeta);o.optimisticallyUpdateWithUUID({FeedComment:{[s]:{messageMeta:m}}},u)}),I=(0,d.Vh)("NEW_FEED_POST_COMMENT",(e,t,{optimistId:r})=>{t.messageMeta=(0,a.lR)(t.messageMeta);let n=e.getState().user,o=(0,l.i0)();if(!n||!o)return;let u=(0,s.k)(),p=c.ZP.post(`/api/feed_posts/${t.postUuid}/comments`,{message_meta:t.messageMeta,uuid:u,attachment_ids:t.attachmentIds}).then(()=>{e.dispatch(d.w2.commit(r))}).catch(()=>{e.dispatch(d.w2.revert(r))}),m=!!t.messageMeta.find(e=>(0,a.hR)(e)===a.Di.EMOJI),h=!!t.messageMeta.find(e=>(0,a.hR)(e)===a.Di.EDITOR_MENTION);(0,i.L9)("Team Feed Comment Added",{emojiUsed:m,mentionUsed:h,text:(0,a.nV)(t.messageMeta),postUuid:t.postUuid});let _=(0,a.At)(t.messageMeta);o.optimisticallyCreateWithUUID({FeedComment:{[u]:{feedPostPublicUuid:t.postUuid,uuid:u,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:_,createdAt:new Date,reactions:[]}}},p)}),T=(0,d.Vh)("REMOVE_FEED_REACTION_COMMENT",(e,t,{optimistId:r})=>{let{commentUuid:n,emoji:i,reactionId:a}=t,o=w(e.dispatch,n,i,r),s=e.getState().user;s&&(0,l.i0)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),w=(e,t,r,n)=>(0,l.i0)().getIdFromUuid("FeedComment",t).then(e=>c.ZP.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})).then(()=>{e(d.w2.commit(n))}).catch(()=>{e(d.w2.revert(n))}),S=(0,d.Vh)("ADD_FEED_REACTION_COMMENT",(e,t,{optimistId:r})=>{let{commentUuid:n,commentId:a,emoji:o}=t,s=e.getState().user;if(!s||a.startsWith(P))return;let c=C(e.dispatch,n,o,r);(0,i.L9)("Team Feed Reaction Added",{commentId:a,type:o});let d=`optimistic-id-comment-${a}-${o}-${s.id}`;(0,l.i0)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedComment",userId:s.id}}},c)}),C=(e,t,r,n)=>(0,l.i0)().getIdFromUuid("FeedComment",t).then(e=>c.ZP.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})).then(t=>{e(d.w2.commit(n))}).catch(t=>{e(d.w2.revert(n))}),O=(0,d.Vh)("REMOVE_FEED_REACTION_DETAIL",(e,t,{optimistId:r})=>{let{feedPostUuid:n,emoji:i,reactionId:a}=t,o=A(e.dispatch,n,i,r),s=e.getState().user;s&&(0,l.i0)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),A=(e,t,r,n)=>c.ZP.del(`/api/feed_posts/${t}/reactions`,{emoji:r}).then(()=>{e(d.w2.commit(n))}).catch(()=>{e(d.w2.revert(n))}),N=(0,d.Vh)("ADD_FEED_REACTION_POST",(e,t,{optimistId:r})=>{let{feedPostUuid:n,feedPostId:a,emoji:o}=t,s=e.getState().user;if(!s)return;let c=L(e.dispatch,n,o,r);(0,i.L9)("Team Feed Reaction Added",{postUuid:n,type:o});let d=`optimistic-id-${n}-${o}-${s.id}`;(0,l.i0)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:a,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),L=(e,t,r,n)=>c.ZP.post(`/api/feed_posts/${t}/reactions`,{emoji:r}).then(()=>{e(d.w2.commit(n))}).catch(()=>{e(d.w2.revert(n))}),P="pending-feed-comment"},857522:(e,t,r)=>{r.d(t,{LN:()=>_,MU:()=>v,Z$:()=>g,gI:()=>E,gz:()=>y,ki:()=>b,vb:()=>f});var n=r(237863),i=r(31642),a=r(313653),o=r(970740),l=r(644383),s=r(218609),c=r(721127),d=r(436649),u=r(966922),p=r(595819),m=r(239342),h=r(749856);let _=(0,s.u4)((e,{adminIds:t,editorType:r,fileKey:n,message:s,teamId:c,entryPoint:d})=>{i.ZP.post(`/api/teams/${c}/team_users/request_upgrade`,{admin_ids:t,editor_type:r,file_key:n,message:s,team_id:c,entry_point:d}).then(function(t){e.dispatch(l.R.enqueue({message:(0,o.t)("team_user.actions.team_members_request_to_upgrade_succeeded"),type:"pro-upgrade-request-sent"}))}).catch(function(t){e.dispatch(a.l.error((0,o.t)("team_user.actions.team_members_request_to_upgrade_failed")))})}),g=(0,s.u4)((e,{members:t,team:r,teamUsers:n,usersWithNoTeamUserIds:i=[],paidStatusType:a,paidStatus:s})=>{e.dispatch((0,c.K4)({type:h.n,data:{onConfirm:()=>{let c;e.dispatch(f({teamId:r.id,teamUsers:n,usersWithNoTeamUserIds:i,paidStatus:s,paidStatusType:a,userInitiated:!0}));let d=t.length,u=a===p._N.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),m={productName:u,nameOrEmail:t[0].name||t[0].email,numTeamMembers:d};switch(s){case p.Eg.FULL:c=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",m);break;case p.Eg.STARTER:c=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",m);break;case p.Eg.RESTRICTED:c=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",m)}e.dispatch(l.R.enqueue({type:"team-paid-status-updated",message:c}))},members:t,team:r,paidStatusType:a,paidStatus:s}}))}),f=(0,s.Vh)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:t,teamUsers:r,usersWithNoTeamUserIds:n,paidStatus:l,paidStatusType:c,userInitiated:d},{optimistId:u})=>{if(d){let d=r.map(e=>e.user_id).concat(n||[]);await i.ZP.put(`/api/teams/${t}/team_user_batch`,{team_user_deltas:d.map(e=>{let t={user_id:e};return c===p._N.WHITEBOARD?t.whiteboard_paid_status=l:t.design_paid_status=l,t})}).then(function({data:r}){e.dispatch(s.w2.commit(u)),e.dispatch(y({teamUsers:r.meta,teamId:t}))}).catch(function(t){e.dispatch(s.w2.revert(u));let r=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(a.l.error(r)),console.error(t)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`),E=(0,s.wV)("TEAM_USER_INITIALIZED_FOR_TEAM",(e,{teamId:t},{loadingKey:r})=>{if(!t)return;let n=e.getState(),i="team"===n.selectedView.view&&("members"===n.selectedView.teamViewTab||"billing"===n.selectedView.teamViewTab)||"teamUpgrade"===n.selectedView.view||"eduReview"===n.selectedView.view;if(!(0,d.d4)(n.loadingState,r)&&!i)return;let l=m.j.getTeamUsers({teamId:t});(0,u.m)(l,e,r),l.then(r=>{e.dispatch(v({teamUsers:r.data.meta,teamId:t}))},t=>{console.error(t),t&&403!==t.status&&e.dispatch(a.l.error((0,o.t)("team_user.actions.an_error_occurred_while_retrieving_fetching_the_list_of_users_on_this_team")))})},({teamId:e})=>`TEAM_USER_INITIALIZED_FOR_TEAM_${e}`),y=(0,n.e)("TEAM_USER_PUT"),v=(0,n.e)("TEAM_USER_INITIAL_SET"),b=(0,s.u4)((e,{teamId:t})=>{i.ZP.post(`/api/teams/${t}/team_users/use_dev_mode_beta`).catch(e=>{})})},866359:(e,t,r)=>{r.d(t,{AI:()=>p,C1:()=>h,N_:()=>_,Sh:()=>m});var n=r(237863),i=r(716250),a=r(31642),o=r(313653),l=r(218609),s=r(215698),c=r(721154),d=r(966922),u=r(795914);let p=(0,n.e)("ONBOARDING_TEMPLATES_PUT_ALL"),m=(0,l.u4)(e=>{let t=u.D.getTemplates({type:"onboarding"});t.then(({data:t})=>{let r=t.meta;Object.keys(r).forEach(t=>{e.dispatch((0,s.H$)({hubFiles:r[t],src:"getOnboardingTemplates"}))}),e.dispatch(p(r))})}),h=(0,l.u4)((e,t)=>a.ZP.post("/api/files/first_template_type",{template_type:t.type})),_=(0,l.u4)((e,t,{loadingKey:r})=>{let n;let l=e.getState(),s=(0,i.BZ)().ps_benchmark;n=s?{current_org_id:l.currentUserOrgId,current_team_id:l.currentTeamId}:{current_org_id:l.currentUserOrgId};let u=a.ZP.post("/api/figjam_template",n);(0,d.m)(u,e,r),u.then(({data:t})=>{let r=t.meta.file;r&&e.dispatch(c.gz({file:r}))}).catch(t=>{var r;e.dispatch(o.l.error((null==(r=t.data)?void 0:r.message)||"An error occurred while fetching the template file"))})})},701408:(e,t,r)=>{r.d(t,{HX:()=>T,WZ:()=>L,X0:()=>S,Xr:()=>N,gz:()=>P,mH:()=>A,mg:()=>I});var n=r(237863),i=r(600486),a=r(239299),o=r(448501),l=r(558011),s=r(286206),c=r(117986),d=r(31642),u=r(970740),p=r(750274),m=r(644383),h=r(138101),_=r(111120),g=r(721127),f=r(448694),E=r(609346),y=r(54055),v=r(902342),b=r(218609);let I=(0,b.u4)(async()=>{try{await d.ZP.post("/api/user/migrate_personal_drafts")}catch(e){(0,s.Jz)(c.k.SHARING_AND_ACCESS,Error(`Failed to migrate starter drafts for user: ${e.data.message}`))}}),T=(0,b.u4)(async e=>{try{let t=e.getState(),r=t.authedUsers.orderedIds;for(let n of r){let r=await (0,E.jY)(n);if(r){C(),e.dispatch(g.K4({type:h.TI,data:{users:Object.values(t.authedUsers.byId),onLogOut:()=>{e.dispatch(w())}}}));return}}}catch(e){(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(w())}),w=(0,b.u4)(e=>{if(a.YO){o.default.redirect("/logout");return}let t=(0,y.sg)(e.getState().selectedView),r=d.ZP.post("/api/session/logout").then(()=>{(0,f.Pg)();let e=new l.W;e.sendToAllTabs(v.f,v.z),o.default.redirect(`${t?"/community":""}/?fuid=`)}).catch(t=>{var r;let n=(null==(r=t.data)?void 0:r.message)||(0,u.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(m.R.enqueue({error:!0,message:n}))});e.dispatch(_.J9({until:r}))}),S=(0,b.u4)(async(e,t)=>{try{let r=await (0,E.jY)(t.user.id);r?(C(),e.dispatch(g.K4({type:h.TI,data:{users:[t.user],onLogOut:()=>{e.dispatch(O(t))}}}))):e.dispatch(O(t))}catch(r){(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(O(t))}}),C=()=>{try{(0,i.L9)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},O=(0,b.u4)((e,t)=>{let r=d.ZP.post(`/api/session/logout/${t.user.id}`).then(r=>{var n,i,a,l,s;e.dispatch(_.Vy(r.data.meta)),e.dispatch(_.AQ(r.data.meta)),(null==(a=null==(i=null==(n=r.data)?void 0:n.meta)?void 0:i.users)?void 0:a.length)===0&&(0,f.Pg)();let c=null==(s=null==(l=r.data)?void 0:l.meta)?void 0:s.redirect_url;c?o.default.redirect(c):e.dispatch(m.R.enqueue({message:(0,u.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:t.user.email})}))}).catch(r=>{var n;let i=(null==(n=r.data)?void 0:n.message)||(0,u.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:t.user.email});e.dispatch(m.R.enqueue({error:!0,message:i}))});e.dispatch(_.J9({until:r}))}),A=(0,n.e)("DELETE_USER_LOADING"),N=(0,n.e)("USER_ERASE_SECRETS"),L=(0,n.e)("USER_TOGGLE_TWO_FACTOR"),P=p.putUser},404330:(e,t,r)=>{r.d(t,{BP:()=>x,BR:()=>T,E:()=>k,HM:()=>R,II:()=>C,Jo:()=>W,KU:()=>v,KY:()=>H,Nq:()=>S,O$:()=>L,QR:()=>D,RM:()=>V,TG:()=>N,Td:()=>G,Ue:()=>O,Vp:()=>K,_g:()=>I,oD:()=>w,v:()=>U,vR:()=>A,wx:()=>P,xB:()=>b});var n=r(237863),i=r(600486),a=r(46347),o=r(337167),l=r(303498),s=r(359799),c=r(31642),d=r(313653),u=r(970740),p=r(644383),m=r(218609),h=r(961215),_=r(640723),g=r(537148),f=r(88938),E=r(242153),y=r(28786);let v=(0,n.e)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,n.e)("SET_HOVERED_IN_MODAL_VOTE_PIN"),I=(0,n.e)("DESELECT_VOTE_PIN"),T=(0,n.e)("SELECT_VOTE_PIN"),w=(0,n.e)("INITIATED_VOTING_SESSION"),S=(0,m.u4)(async(e,{uiSurface:t})=>{let r=e.getState(),{fileKey:n}=r.selectedView,i=r.mirror.appModel.votingSessionInfo.sessionId;if(!n||!i)return;let a=C(n),l="end-voting-session-failed",s=()=>{e.dispatch(y.eD({key:a})),e.dispatch(p.R.enqueue({type:l,message:(0,u.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(y.DB({key:a})),e.dispatch(p.R.dequeue({matchType:l})),await c.ZP.put(`/api/file/${n}/voting_sessions/${i}`,{in_progress:!1}).then(({status:r})=>{200===r?(e.dispatch(y.dN({key:a})),"MeetingsPanel"===t&&o.n_.set(f.hr,{type:"SET_VIEW",payload:f.Kt.PAST_VOTES})):s()}).catch(e=>{throw s(),e})}),C=e=>`end_voting_session_${e}`,O=(0,m.u4)((e,{source:t,usedCustomTitle:r,requestBody:n,uiSurface:a})=>{let l=e.getState(),{fileKey:s}=l.selectedView;if(!s)return;let d=A(s),m=()=>{e.dispatch(y.eD({key:d})),e.dispatch(p.R.enqueue({type:"start-voting-session-failed",message:(0,u.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(y.DB({key:d})),e.dispatch(p.R.dequeue({matchType:"start-voting-session-failed"})),c.ZP.post(`/api/file/${s}/voting_sessions`,n).then(n=>{200===n.status?(e.dispatch(w({votingSessionId:n.data.meta.id})),"MeetingsPanel"===a&&o.n_.get(f.hr).activeToolModal===f.jV.VOTING&&o.n_.set(f.hr,{type:"SET_TOOL",payload:null}),e.dispatch(y.dN({key:d})),(0,i.L9)("start_voting_session",{source:t,usedCustomTitle:r,votingSessionId:n.data.meta.id,fileKey:s})):m()}).catch(e=>{throw m(),e})}),A=e=>`create_voting_session_${e}`,N=(0,m.u4)((e,{votingSessionId:t})=>{let r=e.getState(),n=r.selectedView;if(!n.fileKey)return null;let i=c.ZP.del(`/api/file/${n.fileKey}/voting_sessions/${t}`);e.dispatch((0,d.i)({promise:i,fallbackError:(0,u.t)("voting.modal.delete_voting_session_error")})),e.dispatch(p.R.enqueue({message:(0,u.t)("voting.modal.delete_voting_session_visual_bell")})),(0,s.V)(i,e.dispatch,B({votingSessionId:t})),(0,l.i0)().optimisticallyDelete({VotingSession:{[t]:null}},i)}),L=(e,t)=>{var r,n;let i=null==(n=null==(r=null==e?void 0:e.openFile)?void 0:r.votingSessions)?void 0:n.find(e=>e.id===t);if(!i)return;let a=function(e){let t=e.createdAt,r=t.toISOString().split("T")[0];return e.title?(0,u.t)("voting.csv_export.filename_with_session_title",{date:r,votingSessionTitle:e.title}):(0,u.t)("voting.csv_export.filename_no_session_title",{date:r})}(i);h.iVe.exportVotingSessionAsCsv(t,a)},P=(0,m.u4)((e,t)=>{var r,n;let i;let o=t.votingStage,l=e.getState();if(o===h.Kb2.NO_SESSION){h.iVe.setVotingSessionInfo("",h.Kb2.NO_SESSION,0);return}let s=null==(r=null==l?void 0:l.openFile)?void 0:r.votingSessions;if(o===h.Kb2.ENDED){let e=t.sessionId;i=null==s?void 0:s.find(t=>t.id===e&&!t.inProgress)}else i=null==s?void 0:s.find(e=>e.inProgress);if(i&&(h.iVe.setVotingSessionInfo(i.id,o,i.userVoteLimit),function(e){var t;let r=e.mirror.appModel.votingSessionInfo.votingStage,n=!!(null==(t=e.openFile)?void 0:t.votingSessions),i=(()=>{switch(r){case h.Kb2.JOINED:if(e.voting.modalState===g.xN.MINIMIZED)return g.Nf.NONE;return g.Nf.DURING;case h.Kb2.ENDED:return g.Nf.AFTER;case h.Kb2.NO_SESSION:if(e.voting.modalState===g.xN.CLOSED)return g.Nf.NONE;return e.voting.selectedTab===g.fk.NEW_VOTE?g.Nf.NEW_VOTE:g.Nf.PREVIOUS;case h.Kb2.NOT_JOINED:return g.Nf.NONE;default:return(0,a.vE)(r)}})();return i===g.Nf.NONE||n?i:g.Nf.LOADING}(l)!==g.Nf.NONE||o!==h.Kb2.JOINED&&o!==h.Kb2.ENDED||e.dispatch(F()),o===h.Kb2.JOINED)){e.dispatch(R());let t=!!(null==(n=l.mirror.selectionProperties.whiteboardNumSelectedByType)?void 0:n.STAMP);t&&(0,_.MO)()}});(0,n.e)("SET_VOTING_MODAL");let R=(0,n.e)("DISMISS_JOIN_CONFIRMATION"),k=(0,n.e)("MINIMIZE_VOTING_MODAL"),D=(0,m.wV)("CLOSE_VOTING_MODAL",(e,{source:t})=>{let r=e.getState().mirror.appModel.votingSessionInfo,n=r.votingStage,a=e.getState(),{fileKey:o}=a.selectedView;t&&(0,i.L9)("close_voting_modal",{source:t,votingSessionId:r.sessionId,votingStage:h.Kb2[n],fileKey:o}),n===h.Kb2.ENDED&&e.dispatch(P({votingStage:h.Kb2.NO_SESSION}))}),M=(0,m.u4)((e,{source:t})=>{let r=e.getState(),n=r.mirror.appModel.votingSessionInfo,i=n.votingStage;i===h.Kb2.JOINED?e.dispatch(k({})):e.dispatch(D({source:t}))}),F=(0,m.u4)(e=>{(0,E.K)(()=>e.dispatch(M({source:null}))),e.dispatch(x())}),x=(0,n.e)("OPEN_VOTING_MODAL"),U=(0,n.e)("HIDE_JOIN_VOTING_SESSION_MODAL"),B=(0,n.e)("DELETE_VOTING_SESSION"),V=(0,n.e)("SET_VOTES_PER_USER_LIMIT"),G=(0,n.e)("SET_TITLE"),H=(0,n.e)("SET_TAB"),W=(0,n.e)("CLEAR_STATE"),K=(0,n.e)("ANIMATE_FIGJAM_LEFT_TOOLBAR")},523562:(e,t,r)=>{r.d(t,{Nz:()=>h,U2:()=>f,lH:()=>_,t8:()=>g});var n=r(237863),i=r(970740),a=r(644383),o=r(436649),l=r(733609),s=r(124120),c=r(163853),d=r(298358),u=r(218609),p=r(28786),m=r(133419);let h=(0,u.u4)(async(e,t)=>{let{currentUserOrgId:r}=e.getState();if(!r)throw Error("currentOrgId not set while attempting to self-assign workspace");await c.uU.selfAssignWorkspace({orgId:r,workspaceId:t.workspace.id}).then(r=>{let n;let o=t.workspace.name;o&&(n=(0,i.t)("license_group.you_joined_the_workspace",{groupName:o}),e.dispatch(a.R.enqueue({type:"self-assign-workspace",message:n}))),e.dispatch(m.gz({orgUser:r.data.meta,userInitiated:!1}))}).catch(t=>{var r;e.dispatch(a.R.enqueue({type:"self-assign-workspace",message:(null==(r=t.data)?void 0:r.message)||(0,i.t)("license_group.an_error_occurred_while_submitting_your_workspace_selection"),error:!0}))})}),_=(0,u.Vh)("WORKSPACE_DEFAULT_TEAMS_SET",async(e,t,{optimistId:r})=>{var n,o;try{let o=(null==(n=t.workspace.defaultTeams)?void 0:n.map(e=>e.teamId))||[],l=o.filter(e=>!t.teamIds.includes(e)),s=t.teamIds.filter(e=>!o.includes(e));l.length&&await d.r.deleteDefaultTeams({workspaceId:t.workspace.id,removedTeamIds:l}),s.length&&await d.r.addDefaultTeams({workspaceId:t.workspace.id,addedTeamIds:s}),e.dispatch(u.w2.commit(r)),e.dispatch(a.R.enqueue({type:"workspace-default-teams-set",message:(0,i.t)("workspace.succesfully_updated_default_teams")}))}catch(t){e.dispatch(u.w2.revert(r)),e.dispatch(a.R.enqueue({type:"workspace-default-teams-set",message:(null==(o=t.data)?void 0:o.message)||(0,i.t)("workspace.failed_to_update_default_teams_please_try_again"),error:!0}))}}),g=(0,n.e)("WORKSPACE_SET"),f=(0,u.u4)(e=>{let t=e.getState(),{currentUserOrgId:r,loadingState:n}=t;if(!r)return;let d=(0,s.pv)(r);(0,l.canMemberOrg)(r,t)&&(0,o.d4)(n,d)&&((0,o.hg)(n,d)||(e.dispatch(p.DB({key:(0,s.pv)(r)})),c.uU.getWorkspaces({currentOrgId:r}).then(t=>{let n=t.data.meta;e.dispatch(p.dN({key:(0,s.pv)(r)})),e.dispatch(g(n))}).catch(t=>{var n;e.dispatch(a.R.enqueue({type:"get-workspaces",message:(null==(n=t.data)?void 0:n.message)||(0,i.t)("license_group.an_error_occurred_while_fetching_workspaces"),error:!0})),e.dispatch(p.eD({key:(0,s.pv)(r)}))})))})},211960:(e,t,r)=>{r.d(t,{$z:()=>g,E8:()=>u,LE:()=>h,Lq:()=>m,MD:()=>c,Ty:()=>_,Wj:()=>f,YY:()=>l,Yj:()=>o.FileWithCommentsAndReactions,fV:()=>E,uW:()=>p,x9:()=>s});var n=r(652983),i=r(642045),a=r(669277),o=r(862610);let l="You are trying to use comments functionality but didn't wire a provider for comments",s=(0,n.createContext)(void 0);function c(){let e=(0,n.useContext)(s);return e}let d={};function u(){let e=(0,n.useContext)(s);return function(e,t){let r=(0,n.useMemo)(()=>(null==e?void 0:e.status)!=="loaded"?d:t(e.data),[e,t]),i=(null==e?void 0:e.status)||"loading",o=(null==e?void 0:e.errors)||[];return(0,n.useMemo)(()=>r===d||"loading"===i?(0,a.AC)():"errors"===i?{status:i,data:null,errors:o}:{status:"loaded",errors:o,data:r},[i,o,r])}(e,e=>{var t;return(null==(t=e.file)?void 0:t.currentUserFileFollower)||null})}function p(){let e=c();return!!e&&e.isResolvedLoaded}function m(){let e=c();return!!e&&e.isUnresolvedLoaded}function h(){let e=c();return e?e.threads:(0,a.AC)()}function _(e){let t=(0,n.useContext)(s);return(0,n.useMemo)(()=>{var r;if(!t)throw Error(l);if("loaded"!==t.status||!t.data||!t.api.reactionsApi)return 0;let n=null==(r=t.api.reactionsApi)?void 0:r.getReactions(e);return(null==n?void 0:n.length)||0},[e,t])}function g(e,t){let r=(0,n.useContext)(s);return(0,n.useMemo)(()=>{var n;if(!r)throw Error(l);if("loaded"!==r.status||!r.data)return(0,a.AC)();let o=null==(n=r.api.reactionsApi)?void 0:n.getReactions(e);return{status:"loaded",data:function(e,t){if(!t)return{typed:[],users:[],yours:0,total:0};let r={};return t.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()).reduce((t,n)=>{let[a,o]=(0,i.qf)(n.emoji);t.total++;let l=r[a];if(!l){let e={count:0,selected:!1,users:[],emoji:a,skinTonesToUsers:{}};t.typed.push(e),l=e,r[a]=e}let s={id:n.user.id,handle:n.user.handle,img_url:n.user.imgUrl};return null!==o&&(void 0===l.skinTonesToUsers[o]&&(l.skinTonesToUsers[o]=[]),l.skinTonesToUsers[o].push(s)),l.count++,l.users.push(s),l.selected=l.selected||n.userId===e,t},{typed:[],yours:0,total:0,users:[]})}(t,o),errors:r.errors}},[e,t,r])}function f(){let e=(0,n.useContext)(s);if(!e)throw Error(l);return e.api}function E(){let e=h();return function(e){if("loaded"!==e.status)return 0;let t=0;for(let r of e.data)if((r.anchored||r.isCanvasMention)&&!r.comments[0].resolved_at)for(let e of r.comments)e.isUnread&&t++;return t}(e)}},530657:(e,t,r)=>{r.d(t,{aV:()=>U,oK:()=>x});var n=r(652983),i=r(407908),a=r(600486),o=r(969709),l=r(391320),s=r(9247),c=r(716250),d=r(303498),u=r(669277),p=r(615537),m=r(286206),h=r(668683),_=r(680356),g=r(31642),f=r(445041),E=r(338062),y=r(80401),v=r(255301),b=r(864920),I=r(996028),T=r(70918),w=r(862610),S=r(425285),C=r(211960),O=r(279272),A=r(346473),N=r(54946),L=r(540805);class P{constructor(e){this.client=e}toggleReaction(e,t,r){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");let n=this.getReactions(e),i=n.find(r=>r.emoji===t&&r.fileCommentId===e&&r.userId===this.client.user.id);return i?this.removeReaction(e,t):this.addReaction(e,t,r)}async addReaction(e,t,r){let n=g.ZP.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:t,prototype_mode:(null==r?void 0:r.prototype_mode)||!1});return this.client.optimistically(async(r,i,a)=>{let o=new Date,l=`${e}_${t}_${a.id}`;await i.optimisticallyCreate({CommentReaction:{[l]:{id:l,fileCommentId:e,emoji:t,fileKey:r.file.id,userId:a.id,user:{id:a.id,handle:a.handle,imgUrl:a.img_url},createdAt:o,sortTimestamp:o}}},n)}),await n}async removeReaction(e,t){let r=g.ZP.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:t});return this.client.optimistically(async(n,i,a)=>{let o=a.id,l=this.getReactions(e),s=l.filter(e=>e.emoji===t&&e.userId===o).map(e=>e.id),c=null==s?void 0:s.reduce((e,t)=>({...e,[t]:null}),Object.create(null));await i.optimisticallyDelete({CommentReaction:c},r)}),await r}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let t=this.client.subscription.data.file;if(!t)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in t)return t.reactions.filter(t=>t.fileCommentId===e);{let r=t.mobileCommentThread.find(t=>t.id===e);return r?r.reactions:[]}}}function R(e){return e.map(e=>({...e,id:e.id.toString()}))}class k{constructor(e){this.client=e}trackMissingCommentData(e,t,r,n,i,a){let o=!1;L.n.records[r.id]={parentId:r.parent_id,report:(t,l)=>{var s;if(!o&&(o=!0,(0,m.wT)("comments_optimistic_updates","true"),(0,m.wT)("isLoadedComments",i.isLoadedComments?"true":"false"),(0,m.wT)("commentType",e),(0,m.YD)(t,l,{id:r.id,fileKey:this.client.fileKey,parentId:r.parent_id,pageId:null==(s=r.client_meta)?void 0:s.page_id,userId:this.client.user.id,clientMeta:r.client_meta,...a}),this.client.livegraphClient)){let e=n(),r=null,i=null,a=null;for(let n of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===n.type||"STORE.ADD_INSTANCE"===n.type||"STORE.REMOVE_INSTANCE"===n.type||"SESSION.APPLY_MUTATIONS"===n.type||"SESSION.APPLY_SHADOW_MUTATIONS"===n.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===n.type||"REQUEST_MESSAGE"===n.type&&"sync"===n.message.messageType||"RESPONSE_MESSAGE"===n.type&&"synced"===n.message.messageType||"RESPONSE_MESSAGE"===n.type&&"pendingMutations"===n.message.messageType)(0,m.YK)(t,JSON.stringify(n));else if("VIEW_QUERY_NODE.ADD_RESULT"===n.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===n.type){if(n.type===r&&n.queryId===i&&n.instance===a)continue;(0,m.YK)(t,JSON.stringify(n)),r=n.type,i=n.queryId,a=n.instance}else"SESSION.NOTIFY_OBSERVERS"===n.type&&n.view._name.includes("Comments")&&(0,m.YK)(t,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:n.view._name}));(0,m.YD)(t,l)}}},setTimeout(()=>{let i=L.n.records[r.id];if(i||n(),delete L.n.records[r.id],"loaded"!==this.client.subscription.status)return;let a=this.client.loadedComments.some(e=>e.id===r.id||e.id===t);i&&!a?i.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):n()},1e4)}create(e,t){var r,n;let i=(0,d.Nh)(),{fileKey:l,messageMeta:s,attachments:u,clientMeta:p,pageId:m,uuid:h}=e;(0,a.L9)("New comment API create",{uuid:h});let _=(0,c.BZ)().show_at_mention_invited_users?[...new Set((0,o.wY)(s))]:[],f=async e=>{var r;let n=null==(r=e.data)?void 0:r.reason;if(!n||"comment_validation_failure"!==n.reason||!(null==t?void 0:t.onValidationError))throw e;let i=n.failure_info,o=await t.onValidationError(R(i.users_without_view),R(i.ext_users_without_view),R(i.uninvitable_users));return o?((0,a.L9)("New comment API handling validation",{uuid:h}),g.ZP.post(`/api/file/${l}/comments`,{file_key:l,message_meta:s,attachments:u.map(e=>e.id),client_meta:p,page_id:m,prototype_mode:null==t?void 0:t.prototypeMode,share_to_mentions:o.forceWithInvite,force:o.forceMentions,uuid:h,pending_mentions:_}).catch(f)):null},E=(0,A.N)(this.client.subscription),b=null==(n=null==(r=this.client.subscription.data)?void 0:r.file)?void 0:n.currentUserCommentReadStatus,I=g.ZP.post(`/api/file/${l}/comments`,{file_key:l,message_meta:s,attachments:u.map(e=>e.id),client_meta:p,page_id:m,prototype_mode:null==t?void 0:t.prototypeMode,share_to_mentions:null===t.onValidationError,force:null===t.onValidationError,pending_mentions:_,uuid:h,...!b&&{all_read_at:v.fh.allReadAt}});this.client.optimistically((e,t)=>{let r=this.client.loadedComments.map(e=>e.orderId||0),n=r.length>0?Math.max(...r):0,i=(0,o.At)(s);t.optimisticallyCreateWithUUID({Comment:{[h]:{uuid:h,key:l,userId:this.client.user.id,parentId:null,orderId:n+1,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:{x:p.x,y:p.y,nodeId:p.node_id||null,pageId:p.page_id||null,nodeOffset:p.node_offset||null,inFrame:p.in_frame||null,selectionBoxAnchor:p.selection_box_anchor||null,stablePath:p.stable_path||null},messageMeta:i,messageMetaStylized:i,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},I);let a=(0,y.LH)(u,l,h);if(a&&t.optimisticallyCreate({CommentAttachment:a},I),!e.file.currentUserCommentReadStatus){let e=new Date;t.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:v.fh.allReadAt,readComments:{},unreadComments:{}}}},I)}});let T=I.catch(f).then(e=>{if(!e)return null;try{let r=e.data.meta;this.trackMissingCommentData("New Comment",h,r,i,{isLoadedComments:E},t)}catch{}return e});return[T,h]}reply(e,t){let r=(0,d.Nh)(),{threadId:n,threadUuid:i,messageMeta:l,attachments:s,uuid:c}=e,{fileKey:u}=this.client,p=(0,o.wY)(l),m=g.ZP.post(`/api/file/${u}/comments/${e.threadId}`,{file_key:u,uuid:c,message_meta:l,attachments:s.map(e=>e.id),prototype_mode:null==t?void 0:t.prototypeMode,share_to_mentions:t.forceWithInvite||!1,force:t.forceMention||!1,pending_mentions:p}),h=(0,o.At)(l),_=(0,A.N)(this.client.subscription),{user:f}=this.client;this.client.optimistically((e,t)=>{i?t.optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:null}}},m):t.optimisticallyUpdate({Comment:{[n]:{resolvedAt:null}}},m),(0,a.L9)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!i}),t.optimisticallyCreateWithUUID({Comment:{[c]:{uuid:c,key:u,userId:f.id,parentId:n,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:null,messageMeta:h,messageMetaStylized:h,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},m);let r=(0,y.LH)(s,u,c);r&&t.optimisticallyCreate({CommentAttachment:r},m)});let E=m.then(e=>{if(!e)return null;let n=e.data.meta;return this.trackMissingCommentData("Reply Comment",c,n,r,{isLoadedComments:_},t),e});return[E,c]}}class D{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){var t,r;let n=null==(r=null==(t=this.client.subscription.data)?void 0:t.file)?void 0:r.currentUserCommentReadStatus,i=g.ZP.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!n&&{all_read_at:v.fh.allReadAt}});return this.client.optimistically(async(t,r,n)=>{let a=t.file.currentUserCommentReadStatus,o=new Date;if(a){let{[e]:t,...n}=a.readComments;await r.optimisticallyUpdate({CommentReadStatus:{[a.id]:{...a,allReadAt:v.fh.allReadAt,readComments:n,unreadComments:{...a.unreadComments,[e]:"true"}}}},i)}else await r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:n.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:v.fh.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},i)}),await i}async markAllAsRead(){var e,t;let r=null==(t=null==(e=this.client.subscription.data)?void 0:e.file)?void 0:t.currentUserCommentReadStatus,n=g.ZP.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!r&&{all_read_at:v.fh.allReadAt}});return this.client.optimistically(async(e,t,r)=>{let i=e.file.currentUserCommentReadStatus,a=new Date;i?await t.optimisticallyUpdate({CommentReadStatus:{[i.id]:{...i,allReadAt:a,readComments:{},unreadComments:{}}}},n):await t.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${a.getTime()}`]:{userId:r.id,fileKey:this.client.fileKey,createdAt:a,allReadAt:a,readComments:{},unreadComments:{}}}},n)}),await n}async markAsRead(e){var t,r;let n=null==(r=null==(t=this.client.subscription.data)?void 0:t.file)?void 0:r.currentUserCommentReadStatus,i=g.ZP.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!n&&{all_read_at:v.fh.allReadAt}});return this.client.optimistically(async(t,r,n)=>{let a=t.file.currentUserCommentReadStatus,o=new Date,l=e.reduce((e,t)=>({...e,[t]:o.toUTCString()}),{});a?await r.optimisticallyUpdate({CommentReadStatus:{[a.id]:{...a,readComments:{...a.readComments,...l},unreadComments:Object.keys(a.unreadComments).filter(t=>!e.includes(t)).reduce((e,t)=>(e[t]="true",e),{})}}},i):await r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:n.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:v.fh.allReadAt,readComments:l,unreadComments:{}}}},i)}),await i}}let M=(0,p.ws)(e=>{let t=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:r=>t(e.filter(r)),map:r=>t(e.map(r)),join:r=>{let n=[...e,...r||[]];return t(n)}}}}),e);return t(e)});function F(e,t,r){let i=n.useMemo(()=>{if("loaded"!==r.status)return new Set([]);let e=r.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[r]),a=(0,s.D)(i),{removed:o}=n.useMemo(()=>(0,h.qP)(i,a),[i,a]),l=n.useCallback(e,t);n.useEffect(()=>{o.forEach(e=>{l(e)})},[l,o])}function x(e){let t=(0,d.qn)(),r=(0,T.xJ)(),{args:i,subscription:a,setLoadResolved:o}=e,[s,c]=n.useState(()=>{if(r)return new A.v(i,a,r)});return n.useEffect(()=>{if(!r){c(void 0);return}if(!s||!(0,l.qt)(s.args,i)){c(new A.v(i,a,r));return}},[s,i,a,r,t]),s&&(r&&(s.user=r),s.subscription=a,s.livegraphClient=t),n.useMemo(()=>s?{commentReceipts:new D(s),reactionsApi:new P(s),writeAPI:new k(s),pinApi:new N.Vw(s),fetchAPI:{loadResolved:()=>o(!0)}}:{},[s,o])}function U(e){let{userId:t,file:r,activeId:a,anchorPositions:o,boundingBoxPositions:l,DEPRECATED_updateWatchedNodeIds:s,updateWatchedStablePaths:d,getPageIdsForNodes:p,children:m}=e,[h,g]=n.useState(!(0,c.BZ)().comments_paginated),y=n.useRef({}),v=(0,S.yD)(),T="whiteboard"===v,A=!!(0,c.BZ)().xr_debounce_threshold,N=null==r?void 0:r.key,P=!!N,R=n.useMemo(()=>({fileKey:N??""}),[N]),k=n.useMemo(()=>(0,_.k)(),[R]),D=(0,u.mU)(C.Yj,R,{enabled:P,traceId:k}),U=(0,u.mU)(w.ResolvedComments,R,{enabled:h&&P}),B=(0,u.mU)(w.FeedPostsByFileKey,R,{enabled:A&&P}),V=(0,u.mU)(w.FileCanvasMentionsByFileKey,R,{enabled:T&&P}),G=(0,i.v9)(e=>e.comments.lgPendingUuidToServerIdMap),H=(0,i.I0)(),W=n.useMemo(()=>{var e;if("loaded"!==D.status||!D.data.file)return D;let t=D.data.file.comments,r=M(t).transform.filter(e=>null===e.resolvedAt);if("loaded"===U.status){let t=null==(e=U.data.file)?void 0:e.resolvedComments;r=r.transform.join(t)}let n={...D.data.file,comments:r},i={...D,data:{...D.data,file:n}};return i},[D,U]);n.useMemo(()=>{var e,t,r;"loaded"===W.status&&(null==(r=null==(t=null==(e=W.data)?void 0:e.file)?void 0:t.comments)||r.forEach(e=>{e.id in G?(y.current[e.id]=e,e.id=G[e.id]):e.uuid&&e.uuid in G&&y.current[e.uuid]&&y.current[e.uuid]!==e&&(H((0,f.eX)({commentUuid:e.uuid})),delete y.current[e.uuid])}))},[H,W,G]);let K=(0,i.v9)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:z,commentThreadNodeIds:Z,commentThreadStablePaths:Y}=n.useMemo(()=>{if("loaded"!==W.status||!W.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],t=new Set,r=new Set;return W.data.file.comments.forEach(n=>{var i,a;if(null===n.parentId){let o=null==(i=n.clientMeta)?void 0:i.nodeId,l=null==(a=n.clientMeta)?void 0:a.stablePath;l&&d?(e.push(n),r.add(`[${l.join(",")}]`)):o&&s&&(e.push(n),t.add(o))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:t,commentThreadStablePaths:r}},[W,s,d]),j=n.useMemo(()=>{var e;if("loaded"!==W.status||!W.data.file||A&&!(null==(e=B.data)?void 0:e.file))return[];let t=new Set(Z);return A&&(0,I.$)(B.data.file.feedPosts).forEach(e=>{t.add(e)}),Array.from(t)},[W,B,A,Z]),$=n.useMemo(()=>{if("loaded"!==W.status||!W.data.file)return[];let e=new Set(Y);return Array.from(e)},[W,Y]);n.useEffect(()=>{s&&s(j),d&&d($)},[s,j,d,$]);let q=(0,b.o7)(t,W,a,o,p,K),X=(0,b.h6)(t,V,e.activeId),J=(0,b.vF)(B,e.activeId,p,l),Q=n.useMemo(()=>{if("loaded"!==W.status||A&&"loaded"!==B.status||T&&"loaded"!==V.status)return(0,u.wl)([]);let e=[];return q.data&&(e=e.concat(q.data)),X.data&&(e=e.concat(X.data)),J.data&&(e=e.concat(J.data)),(0,u.wl)(e)},[W.status,A,B.status,T,V.status,q.data,X.data,J.data]),ee=x({args:R,subscription:W,setLoadResolved:g}),et=(0,O.h)({args:R,subscription:B});ee.canvasMentionReceipts=(0,E.RY)({canvasMentionArgs:R,canvasMentionSubscription:V}),(0,b.H3)(z,{enabled:!!(0,c.BZ)().comments_absolute_positioning}),F(e=>{var t,r;null==(r=null==(t=L.n.records[e])?void 0:t.report)||r.call(t,"New Comment Missing","Comment disappeared within ten seconds of creation")},[],D),F(e=>{var t,r;null==(r=null==(t=L.n.records[e])?void 0:t.report)||r.call(t,"New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],U);let er=n.useMemo(()=>P?{...W,api:ee,feedApi:et,threads:Q,isUnresolvedLoaded:"loaded"===D.status,isResolvedLoaded:"loaded"===U.status}:{status:"loading",data:null,errors:null,threads:(0,u.AC)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[P,W,ee,et,Q,D.status,U.status]);return n.createElement(C.x9.Provider,{value:er},m)}},540094:(e,t,r)=>{r.d(t,{S:()=>i,ht:()=>n});let n="BrowsePluginsModal",i="BrowseWidgetsModal"},692379:(e,t,r)=>{r.d(t,{As:()=>V,BA:()=>P,C7:()=>K,CY:()=>I,JG:()=>R,N0:()=>b,Oh:()=>L,Ru:()=>y,WZ:()=>S,a4:()=>x,bb:()=>H,c$:()=>W,el:()=>w,fg:()=>G,fj:()=>z,l1:()=>B,pR:()=>v,qX:()=>F,rq:()=>O,yj:()=>U,zL:()=>M});var n,i,a,o,l,s,c,d,u,p,m,h,_,g=r(188558),f=r(565336),E=r(761767),y=((n=y||{}).USERS="users",n.TEAMS="teams",n.ORGS="orgs",n.PLUGINS="plugins",n.WIDGETS="widgets",n.HUB_FILES="hub_files",n.PROFILES="profiles",n.CATEGORIES="community_categories",n),v=((i=v||{}).HUB_FILE_DUPLICATED="Hub File Duplicated",i.PLUGIN_INSTALLED="Hub Plugin Installed",i.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",i.WIDGET_INSTALLED="Hub Widget Installed",i.WIDGET_UNINSTALLED="Hub Widget Uninstalled",i),b=((a=b||{}).PLUGIN_INSTALL="community_hub_plugin_install",a.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",a.PROFILE_FOLLOW="community_hub_follow",a.PROFILE_UNFOLLOW="community_hub_unfollow",a.HUB_FILE_LIKE="community_hub_file_like",a.HUB_FILE_UNLIKE="community_hub_file_unlike",a.PLUGIN_LIKE="community_plugin_like",a.PLUGIN_UNLIKE="community_plugin_unlike",a.WIDGET_LIKE="community_widget_like",a.WIDGET_UNLIKE="community_widget_unlike",a.SHARE_TWITTER="community_hub_share_twitter",a.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",a.SHARE_FACEBOOK="community_hub_share_facebook",a.SHARE_LINK="community_hub_share_link",a.CREATE_PROFILE="community_hub_create_profile",a.COMMUNITY_OPT_IN="community_hub_opt_in",a.UPDATE_PROFILE_HANDLE="community_hub_update_handle",a.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",a.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",a.SEE_MORE_IN_COMMUNITY="see_more_in_community",a.FIND_MORE_PLUGINS="find_more_plugins",a),I=((o=I||{}).PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",o),T=((l=T||{}).FIGJAM="figjam",l),w=((s=w||{}).PLUGINS="plugins",s.FILES="files",s.CREATORS="creators",s.FIGJAM_PLUGINS="figjam_plugins",s.FIGMA_DESIGN_PLUGINS="figma_design_plugins",s.WIDGETS="widgets",s.FIGJAM_WIDGETS="figjam_widgets",s.FIGMA_DESIGN_WIDGETS="figma_design_widgets",s);function S(e){switch(e){case"figjam_plugins":case"figjam_widgets":return E.gg.WHITEBOARD;case"figma_design_plugins":case"figma_design_widgets":return E.gg.DESIGN;default:return(0,f.H)()}}var C=((c=C||{}).HAS_RESTORED="has_restored",c.RESTORE_SMOOTH="restore_smooth",c.RESTORE="restore",c),O=((d=O||{}).POPULAR="popular",d.CREATED_AT="created_at",d.FOLLOWING_FEED="feed",d.INSTALLS_DESC="installs",d.RUNS_DESC="runs",d.LAST_UPDATED_DESC="updated_at",d.INSTALLS_ASC="installs_asc",d.RUNS_ASC="runs_asc",d.LAST_UPDATED_ASC="updated_at_asc",d),A=((u=A||{}).CREATED_AT="created_at",u.FOLLOWING_FEED="feed",u),N=((p=N||{}).DESC="desc",p.ASC="asc",p),L=((m=L||{}).by_creator="by_creator",m.by_tags="by_tags",m.ml_model_v0="ml_model_v0",m);function P(e){return g.z.object({types:g.z.array(g.z.nativeEnum(L)),content:g.z.array(e)})}let R=e=>{switch(e){case"installs_asc":return{sort:"installs",order:"asc"};case"installs":return{sort:"installs",order:"desc"};case"runs_asc":return{sort:"runs",order:"asc"};case"runs":return{sort:"runs",order:"desc"};case"updated_at_asc":return{sort:"last_updated",order:"asc"};case"updated_at":return{sort:"last_updated",order:"desc"};default:return{sort:e,order:"desc"}}},k={resourceIds:{},unmergedResourceIds:[],loading:!1},D={popular:{...k},created_at:{...k}};({...D});var M=((h=M||{}).NAME="name",h.PUBLISHER="publisher",h.INSTALLS="installs",h.RUNS="runs",h.CREATED_AT="created_at",h.LAST_UPDATED="last_updated",h),F=((_=F||{}).FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",_.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",_.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",_.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",_);let x=906,U=769,B=645,V="checkout",G="freemium_preview",H="1",W=640,K=300,z=["a","span","sub","sup","p","b","i","pre","code","em","strike","strong","h1","h2","h3","ul","ol","li","hr","br"]},998518:(e,t,r)=>{r.d(t,{Al:()=>T,Cy:()=>m,Ip:()=>h,QY:()=>f,RI:()=>y,Yi:()=>v,b1:()=>O,bk:()=>d,im:()=>I,nu:()=>g,pY:()=>_,rG:()=>b,uY:()=>p,wK:()=>w});var n,i=r(46347),a=r(918141),o=r(190707),l=r(136346),s=r(207725);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.Zn,l.N,s._,a.e])for(let t of e)d[t.presetIdentifier]=t;function u(e,t){let r=new Set,n=[];for(let i of e)r.has(i.deviceName)||(r.add(i.deviceName),i.archived?t.push(i.deviceName):n.push(i.deviceName));return n}let p=[],m=u(o.Zn,p),h=u(l.N,p),_=u(s._,p),g=u(a.e,p),f=Object.create(null);for(let e in d){let t=d[e],r=t.deviceName;r in f||(f[r]=[]),f[r].push(t)}let E=(e,t)=>{for(let r of[o.Zn,l.N,s._,a.e])for(let n of r)if(n.framePresetSize.x===e&&n.framePresetSize.y===t)return n;return null};function y(e,t){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=t){let e=d[t];if(null!=e){let t=-1!==_.indexOf(e.deviceName),r=-1!==g.indexOf(e.deviceName);return!t&&!r}}return!1}var v=((n=v||{})[n.UNKNOWN=0]="UNKNOWN",n[n.PHONE=1]="PHONE",n[n.TABLET=2]="TABLET",n[n.WATCH=3]="WATCH",n[n.DESKTOP=4]="DESKTOP",n);function b(e){let t=d[e];if(null==t)return 0;let r=t.deviceName;return -1!==m.indexOf(r)?1:-1!==h.indexOf(r)?2:-1!==_.indexOf(r)?3:-1!==g.indexOf(r)?4:0}function I(e,t){for(let r of c)if(r.framePresetSize.x===e&&r.framePresetSize.y===t)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let r=E(e,t);return null!=r?{type:"PRESET",presetIdentifier:r.presetIdentifier,portraitDeviceSize:r.framePresetSize,rotation:"NONE"}:null!=(r=E(t,e))&&y("PRESET",r.presetIdentifier)?{type:"PRESET",presetIdentifier:r.presetIdentifier,portraitDeviceSize:r.framePresetSize,rotation:"CCW_90"}:null}function T(e){let t=b(e||"");return 4!==t&&0!==t}let w=e=>!!S(e),S=e=>{let t=d[e];return(null==t?void 0:t.inlinePreviewInfo)||null},C=e=>{let t=new Image;t.src=e},O=e=>{if(!e)return;let t=d[e];(0,i.Eb)(null==t?void 0:t.inlinePreviewInfo,"inline preview device info should not be null if we're preloading the device image. (presetDeviceSupportsInlinePreview == true)"),C(t.url),C(t.inlinePreviewInfo.hitTargetSvgUrl)}},190707:(e,t,r)=>{r.d(t,{OK:()=>u,UW:()=>A,Zn:()=>N});var n=r(970740);let i={scaleFactor:3,imageSize:{x:1179,y:2490},offset:{x:15,y:15},deviceName:"Android Large",getI18nDeviceName:()=>(0,n.t)("presets.android_large"),framePresetSize:{x:360,y:800},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/fc33e480089c74d5aaababaa837ded625eddca24"}},a={scaleFactor:3,imageSize:{x:1179,y:2010},offset:{x:15,y:15},deviceName:"Android Small",getI18nDeviceName:()=>(0,n.t)("presets.android_small"),framePresetSize:{x:360,y:640},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/614abfb362138136caef92c8d31bbad2c18cbe22"}},o={scaleFactor:3,imageSize:{x:1312,y:2672},offset:{x:68/3,y:58/3},deviceName:"iPhone 15",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_15"),framePresetSize:{x:393,y:852},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/cce36126055b170570d727f5fc02969cb186c7bf"}},l={scaleFactor:3,imageSize:{x:1294,y:2656},offset:{x:19,y:50/3},deviceName:"iPhone 15 Pro",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_15_pro"),framePresetSize:{x:393,y:852},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/ad509e5839137cd5e722cac693333c6320cfe999"}},s={scaleFactor:3,imageSize:{x:1423,y:2912},offset:{x:68/3,y:58/3},deviceName:"iPhone 15 Plus",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_15_plus"),framePresetSize:{x:430,y:932},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/0f6f4cdd2e7162c42ccc8b628452ac6e74f03b0b"}},c={scaleFactor:3,imageSize:{x:1404,y:2896},offset:{x:58/3,y:50/3},deviceName:"iPhone 15 Pro Max",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_15_pro_max"),framePresetSize:{x:430,y:932},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/dccb8d464d657d1a19a7ad0f58f420b78f2628c9"}},d={scaleFactor:3,imageSize:{x:1314,y:2656},offset:{x:74/3,y:62/3},deviceName:"iPhone 14",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_14"),framePresetSize:{x:390,y:844},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/e146d5cb4e2eae59460cf7d3675b0ff78f90f486"}},u={scaleFactor:3,imageSize:{x:1312,y:2672},offset:{x:68/3,y:58/3},deviceName:"iPhone 14 Pro",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_14_pro"),framePresetSize:{x:393,y:852},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/1dab82e9896e90a4d46d44e78f36287a40fc59ca"}},p={scaleFactor:3,imageSize:{x:1427,y:2904},offset:{x:24,y:21},deviceName:"iPhone 14 Plus",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_14_plus"),framePresetSize:{x:428,y:926},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/6abc9feac69ed9aa67328fb9c82b152f152b0b39"}},m={scaleFactor:3,imageSize:{x:1421,y:2910},offset:{x:68/3,y:58/3},deviceName:"iPhone 14 Pro Max",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_14_pro_max"),framePresetSize:{x:430,y:932},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/5af720c619b0cb94bb9e71988abf38f9597020f3"}},h={scaleFactor:3,imageSize:{x:1438,y:2918},offset:{x:26,y:70/3},deviceName:"iPhone 13 Pro Max",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_13_pro_max"),framePresetSize:{x:428,y:926},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/d7b1995f2dcc3f184b37329f9bbe42f3febf1389"}},_={scaleFactor:3,imageSize:{x:1319,y:2665},offset:{x:74/3,y:67/3},deviceName:"iPhone 13 Pro",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_13_pro"),framePresetSize:{x:390,y:844},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/78d23842eb254dd3b33a81fc0fbe79b545690b88"}},g={scaleFactor:3,imageSize:{x:1319,y:2665},offset:{x:74/3,y:67/3},deviceName:"iPhone 13",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_13"),framePresetSize:{x:390,y:844},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/09fce4d60c912fa843601639cc33ce9746194f24"}},f={scaleFactor:2.881,imageSize:{x:1224,y:2474},offset:{x:73/2.881,y:67/2.881},deviceName:"iPhone 13 mini",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_13_mini"),framePresetSize:{x:375,y:812},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/6ef4be23aaf03b2562fcd12f807d79884bd2958b"}},E={scaleFactor:3,imageSize:{x:1295,y:2590},offset:{x:88/3,y:77/3},deviceName:"iPhone X",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_x"),framePresetSize:{x:375,y:812},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/3f754492f920b6f201325f903be8c54780cea301"}},y={scaleFactor:3,imageSize:{x:1413,y:2844},offset:{x:86/3,y:26},deviceName:"iPhone 11 Pro Max",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_11_pro_max"),framePresetSize:{x:414,y:896},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/cc2bc89a695daf30044142ff7c87aacda3a7d3cf"}},v={scaleFactor:3,imageSize:{x:1295,y:2590},offset:{x:85/3,y:77/3},deviceName:"iPhone 11 Pro",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_11_pro"),framePresetSize:{x:375,y:812},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/742640be4fbe66777fe30bb0faa010f3b8333de1"}},b={scaleFactor:2,imageSize:{x:979,y:1933},offset:{x:37.5,y:35.5},deviceName:"iPhone 11",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_11"),framePresetSize:{x:414,y:896},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/fa7cd1670f182ae61f337c6b0fe94b206ce7a682"}},I={scaleFactor:2,imageSize:{x:765,y:1594},offset:{x:32,y:118.5},deviceName:"iPhone SE",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_se"),framePresetSize:{x:320,y:568},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/d423c4b3844f19008bc7da50813abf912dadda5e"}},T={scaleFactor:3,imageSize:{x:1436,y:2876},offset:{x:98/3,y:335/3},deviceName:"iPhone 8 Plus",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_8_plus"),framePresetSize:{x:414,y:736},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/3190f2fdcdbc73cff984b830ea9f26d17d1ceb4a"}},w={scaleFactor:2,imageSize:{x:871,y:1776},offset:{x:30.5,y:109.5},deviceName:"iPhone 8",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_8"),framePresetSize:{x:375,y:667},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/e89c7bfdae5797ff525ddc65a107a44e8e3290cb"}},S={scaleFactor:2.6278,imageSize:{x:1210,y:2513},offset:{x:59/2.6278,y:296/2.6278},deviceName:"Google Pixel 2",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2"),framePresetSize:{x:411,y:731},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/59aaf282cfc9a887bf6489f274684e249d36d976"}},C={scaleFactor:3.5,imageSize:{x:1630,y:3339},offset:{x:26,y:242/3.5},deviceName:"Google Pixel 2 XL",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2_xl"),framePresetSize:{x:411,y:823},inlinePreviewInfo:{hitTargetSvgUrl:"https://static.figma.com/uploads/1f0816185c8a55c7f281221f9e5ccf5334c112df"}},O={scaleFactor:3,imageSize:{x:1224,y:2474},offset:{x:73/3,y:67/3},deviceName:"iPhone 13 mini (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.i_phone_13_mini"),framePresetSize:{x:360,y:780}},A="APPLE_IPHONE_14_PRO_SPACEBLACK",N=[{presetIdentifier:"APPLE_IPHONE_15_PRO_NATURALTITANIUM",url:"https://static.figma.com/uploads/bfaa5f1530928a791092b560d0183a2ee6db6a88",thumbnailUrl:"https://static.figma.com/uploads/ef13c1fd391e42afa9c991754a40a11d786d53e5",styleName:"Natural Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_natural_titanium"),...l},{presetIdentifier:"APPLE_IPHONE_15_PRO_BLUETITANIUM",url:"https://static.figma.com/uploads/5044f6160a1252a2a489965b5b87ca08a19c8905",thumbnailUrl:"https://static.figma.com/uploads/07746bdda584535375e006e6f90dfc4101781569",styleName:"Blue Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue_titanium"),...l},{presetIdentifier:"APPLE_IPHONE_15_PRO_WHITETITANIUM",url:"https://static.figma.com/uploads/1018a3c2d619084ec8b032887c848a3137a71e33",thumbnailUrl:"https://static.figma.com/uploads/35c1e1bfdb797d33d533aaa030bdda133f0e67c0",styleName:"White Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_white_titanium"),...l},{presetIdentifier:"APPLE_IPHONE_15_PRO_BLACKTITANIUM",url:"https://static.figma.com/uploads/885afc0a4610caecfb31250980ab653665695e57",thumbnailUrl:"https://static.figma.com/uploads/c5919abad44894b95f400c8413c5dfa3e4ff7be0",styleName:"Black Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_black_titanium"),...l},{presetIdentifier:"APPLE_IPHONE_15_BLACK",url:"https://static.figma.com/uploads/8e3b4e6033af64afdfac9de21b8d8d3ef3dc2c62",thumbnailUrl:"https://static.figma.com/uploads/4ecc396221ea7cd6b6f72f31fc0bc98ace618a93",styleName:"Black",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_black"),...o},{presetIdentifier:"APPLE_IPHONE_15_BLUE",url:"https://static.figma.com/uploads/beb0b340d4373ce512164adb323c147dd2ef3025",thumbnailUrl:"https://static.figma.com/uploads/dff5fc0b17660e81fa514b0b85f43a2523086c08",styleName:"Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...o},{presetIdentifier:"APPLE_IPHONE_15_GREEN",url:"https://static.figma.com/uploads/a1db6e79c321fe279f6924f125b2d118bf2fdca7",thumbnailUrl:"https://static.figma.com/uploads/7607f6060bce571a7993b4e8d9d46bc3f9a540d1",styleName:"Green",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_green"),...o},{presetIdentifier:"APPLE_IPHONE_15_PINK",url:"https://static.figma.com/uploads/a6afd3baf27be360820a9897525941be4b7c853a",thumbnailUrl:"https://static.figma.com/uploads/765f902bf8e22fee3ac6b39a197f4cca88354eeb",styleName:"Pink",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_pink"),...o},{presetIdentifier:"APPLE_IPHONE_15_YELLOW",url:"https://static.figma.com/uploads/0b81a7cd9287676bd29d051964ca33914e726a7e",thumbnailUrl:"https://static.figma.com/uploads/7a5e397a6b242eb5fb7c128eff545f987f837958",styleName:"Yellow",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_yellow"),...o},{presetIdentifier:"APPLE_IPHONE_15_PRO_MAX_NATURALTITANIUM",url:"https://static.figma.com/uploads/e1a1ca477551ef2700ebebe11c1d7b13f2ed5327",thumbnailUrl:"https://static.figma.com/uploads/a3c6b3d548bdc0f392951cd062d292807bf26552",styleName:"Natural Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_natural_titanium"),...c},{presetIdentifier:"APPLE_IPHONE_15_PRO_MAX_BLUETITANIUM",url:"https://static.figma.com/uploads/38376ea9acda66eb8da824e39cb1d4da8f85bec8",thumbnailUrl:"https://static.figma.com/uploads/d302c7233f7c304d7e7367c63860613145438d3c",styleName:"Blue Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue_titanium"),...c},{presetIdentifier:"APPLE_IPHONE_15_PRO_MAX_WHITETITANIUM",url:"https://static.figma.com/uploads/5a0f45d81c466d7316c793cf6ee4a80651102f39",thumbnailUrl:"https://static.figma.com/uploads/fcc2e383634720aaa1f823f22c17c0605b540cc7",styleName:"White Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_white_titanium"),...c},{presetIdentifier:"APPLE_IPHONE_15_PRO_MAX_BLACKTITANIUM",url:"https://static.figma.com/uploads/f6d0ff08ad7747cebd4cf5b9f449e2ef699af9fb",thumbnailUrl:"https://static.figma.com/uploads/e37617c115fa7a83dee378c549c7c8225d4cbbc3",styleName:"Black Titanium",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_black_titanium"),...c},{presetIdentifier:"APPLE_IPHONE_15_PLUS_BLACK",url:"https://static.figma.com/uploads/b2bafa09293a73b53946256bd45b0e614a9903c9",thumbnailUrl:"https://static.figma.com/uploads/34bbb3375a932f8d1bc5faf9615ece2840dd4122",styleName:"Black",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_black"),...s},{presetIdentifier:"APPLE_IPHONE_15_PLUS_BLUE",url:"https://static.figma.com/uploads/659226b4397ef8e67ba4f1b3610a53b192943a77",thumbnailUrl:"https://static.figma.com/uploads/d5f13cf6360b1970e5a787dfa02836642951e583",styleName:"Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...s},{presetIdentifier:"APPLE_IPHONE_15_PLUS_GREEN",url:"https://static.figma.com/uploads/311f0c687f063efdbabcf52dd11e0bb93975275c",thumbnailUrl:"https://static.figma.com/uploads/72c08c92cc6bfaa0634b9cbd795ae048912eba89",styleName:"Green",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_green"),...s},{presetIdentifier:"APPLE_IPHONE_15_PLUS_PINK",url:"https://static.figma.com/uploads/d7a9c6166c1c70403006959becf15d45d04837fa",thumbnailUrl:"https://static.figma.com/uploads/144a10063b2c4b2fb35af033aeffb4dc96318a18",styleName:"Pink",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_pink"),...s},{presetIdentifier:"APPLE_IPHONE_15_PLUS_YELLOW",url:"https://static.figma.com/uploads/49834976d7473a60a1d3ae278ad5ca3bf9e0d838",thumbnailUrl:"https://static.figma.com/uploads/20ee88a746dad1a3a428a33738be0c8213cbbdd1",styleName:"Yellow",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_yellow"),...s},{presetIdentifier:"APPLE_IPHONE_14_PLUS_MIDNIGHT",url:"https://static.figma.com/uploads/2da5aae5b846fea21e12815a7dd0eb3a6378a4e0",thumbnailUrl:"https://static.figma.com/uploads/2e0266c2ad96663b5a62e75fe5626c961a51bcdb",styleName:"Midnight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight"),...p},{presetIdentifier:"APPLE_IPHONE_14_PLUS_RED",url:"https://static.figma.com/uploads/54320726a245f43b0a6031cfce9b1cae6f937eb0",thumbnailUrl:"https://static.figma.com/uploads/06bfe4f22bd9a55062849597e5f7f2a97c1b6884",styleName:"red",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_red"),...p},{presetIdentifier:"APPLE_IPHONE_14_PLUS_BLUE",url:"https://static.figma.com/uploads/1c07f3829218eb0b200eff2d10febe638a72f057",thumbnailUrl:"https://static.figma.com/uploads/55a4d4e3627f66afea35a13718185e7bd971dcad",styleName:"blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...p},{presetIdentifier:"APPLE_IPHONE_14_PLUS_STARLIGHT",url:"https://static.figma.com/uploads/5d60686720726f2273aca7fcf15762cb752b6958",thumbnailUrl:"https://static.figma.com/uploads/ea99670f29f6b123fa6a62bf9aa3d6c14c742c51",styleName:"Starlight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_starlight"),...p},{presetIdentifier:"APPLE_IPHONE_14_PLUS_PURPLE",url:"https://static.figma.com/uploads/e7ca21f9c9a3bc0f4bfe3aeeaa47669ddc75f5a2",thumbnailUrl:"https://static.figma.com/uploads/a4544f0ced9fb333f132d47b6cf28d03dbc1f8b6",styleName:"purple",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_purple"),...p},{presetIdentifier:"APPLE_IPHONE_14_PRO_MAX_SPACEBLACK",url:"https://static.figma.com/uploads/51823c1f50f60b5b1f9939e5918146cfcdb17308",thumbnailUrl:"https://static.figma.com/uploads/7c6f4b197406db23b83d72a8bd8f1dca9ef4a106",styleName:"Space Black",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_black"),...m},{presetIdentifier:"APPLE_IPHONE_14_PRO_MAX_DEEPPURPLE",url:"https://static.figma.com/uploads/143f111aab75a72fd43fc8775c95dd8e0c09cbfc",thumbnailUrl:"https://static.figma.com/uploads/cef0aad5e6017a68b56af04cca6546890b7c6ff0",styleName:"Deep Purple",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_deep_purple"),...m},{presetIdentifier:"APPLE_IPHONE_14_PRO_MAX_SILVER",url:"https://static.figma.com/uploads/9f82e0f6182bf1d755d4f35804124b4cb7529508",thumbnailUrl:"https://static.figma.com/uploads/3e5d7f0b77f790c31cda23f2ab6f79b9bf0b59e5",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...m},{presetIdentifier:"APPLE_IPHONE_14_PRO_MAX_GOLD",url:"https://static.figma.com/uploads/963cab9771e9fd7da0e2f8f256c65d11ba8064e6",thumbnailUrl:"https://static.figma.com/uploads/de992f8a9c828fc14bde5c8ed207e297b6c46a59",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...m},{presetIdentifier:A,url:"https://static.figma.com/uploads/0c7a366d2a9776d40bd461fd243d6312c5c12016",thumbnailUrl:"https://static.figma.com/uploads/72cf973fe10bb04df3a872f5c28663744514ac26",styleName:"Space Black",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_black"),...u},{presetIdentifier:"APPLE_IPHONE_14_PRO_DEEPPURPLE",url:"https://static.figma.com/uploads/936a1fcc1da6f49227129913bb7badbc9a69c590",thumbnailUrl:"https://static.figma.com/uploads/044e95518cebae60cd22c1a515d65339ba0f216b",styleName:"Deep Purple",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_deep_purple"),...u},{presetIdentifier:"APPLE_IPHONE_14_PRO_SILVER",url:"https://static.figma.com/uploads/070ac97463f7f7140029d06a9e6560493387a0ee",thumbnailUrl:"https://static.figma.com/uploads/aabf9ce83f32e2adf80dd70aa4f32250e8d2f3e6",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...u},{presetIdentifier:"APPLE_IPHONE_14_PRO_GOLD",url:"https://static.figma.com/uploads/f88912dd563251c9d8f0c7638cbe9d05214fac1f",thumbnailUrl:"https://static.figma.com/uploads/6c394145087a6e8f0632fa7aab8d95ccffbdb716",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...u},{presetIdentifier:"APPLE_IPHONE_14_MIDNIGHT",url:"https://static.figma.com/uploads/087b2a5005fcc4f91f595062bc340c019aec1931",thumbnailUrl:"https://static.figma.com/uploads/43e134e101aabd8852dc953e85192363e635d960",styleName:"Midnight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight"),...d},{presetIdentifier:"APPLE_IPHONE_14_RED",url:"https://static.figma.com/uploads/097bfbfde619d6d39906a5bdc1e3a8c63473509c",thumbnailUrl:"https://static.figma.com/uploads/7ede8c9e183824ed835099cc44ad66058568addf",styleName:"red",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_red"),...d},{presetIdentifier:"APPLE_IPHONE_14_BLUE",url:"https://static.figma.com/uploads/c78f246bca66bfb25cff846d9b1281f8f4186096",thumbnailUrl:"https://static.figma.com/uploads/36d2e02cbc99cdb983104a0a06412b409f1a9db7",styleName:"blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...d},{presetIdentifier:"APPLE_IPHONE_14_STARLIGHT",url:"https://static.figma.com/uploads/17c2afefb0a48f31fa55bab18fd22a46389610a5",thumbnailUrl:"https://static.figma.com/uploads/892af0296a00003f2a0c4e27ad1717186b77761a",styleName:"Starlight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_starlight"),...d},{presetIdentifier:"APPLE_IPHONE_14_PURPLE",url:"https://static.figma.com/uploads/f589b10db262227b4bb08c83fdea416f315a3738",thumbnailUrl:"https://static.figma.com/uploads/93fb03a392fc6b3191a1db5e5a442d5bce7bcc97",styleName:"purple",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_purple"),...d},{presetIdentifier:"APPLE_IPHONE_13_PRO_MAX_GRAPHITE",url:"https://static.figma.com/uploads/26872b789d922de0e14a9880b18e49a418ef9b8e",thumbnailUrl:"https://static.figma.com/uploads/a0c077cd9e4d55ba8aa92d767d687d064e2adf56",styleName:"Graphite",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_graphite"),...h,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_MAX_SIERRABLUE",url:"https://static.figma.com/uploads/4e988f9507bbbcd8f00d62f3d97b5d492f5c928f",thumbnailUrl:"https://static.figma.com/uploads/de47a8ddad641312b29bba000eb5cc93fc76713b",styleName:"Sierra Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_sierra_blue"),...h,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_MAX_SILVER",url:"https://static.figma.com/uploads/52932550c5e3dd54238a0c5f690f619ac7266416",thumbnailUrl:"https://static.figma.com/uploads/05f6cc61abb93c7d0177ae7224d5efab0791d0a9",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...h,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_MAX_GOLD",url:"https://static.figma.com/uploads/13e0ad46c6635b4707f097ad6327f49e65b5de38",thumbnailUrl:"https://static.figma.com/uploads/026b34c4ca2042654eef164097fbf3355aa75046",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...h,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_GRAPHITE",url:"https://static.figma.com/uploads/bf52e95949d5667e32cfbdbe93bae573130b5d45",thumbnailUrl:"https://static.figma.com/uploads/6dbf74c53b83c7215cdb54ed03e1764d8879116f",styleName:"Graphite",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_graphite"),..._,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_SIERRABLUE",url:"https://static.figma.com/uploads/0a4335568089d593ff5c8030ff83e7db4e46329c",thumbnailUrl:"https://static.figma.com/uploads/49993d2feb67bd1d4af2a16d36c4845fabe1ed1a",styleName:"Sierra Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_sierra_blue"),..._,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_SILVER",url:"https://static.figma.com/uploads/5a1f777bdef72ab88990e7f0940ae08970ef4ecb",thumbnailUrl:"https://static.figma.com/uploads/f43ff7e0e249475a22bdb87daaf3a21416b0977d",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),..._,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PRO_GOLD",url:"https://static.figma.com/uploads/74197d15007862df60f8068d9a3cf15941e2b63f",thumbnailUrl:"https://static.figma.com/uploads/761cd18f7d65950fa2fadb0be8673205993da829",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),..._,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_MIDNIGHT",url:"https://static.figma.com/uploads/1a1bd934edc2f8760e10bc524659aa4d5ed15623",thumbnailUrl:"https://static.figma.com/uploads/b688ab6bdf6bef50aef02ce72bf6952a5146be8e",styleName:"Midnight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight"),...g,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_PINK",url:"https://static.figma.com/uploads/5ed036689b478cb269055bbf4085c44e16d1c1ec",thumbnailUrl:"https://static.figma.com/uploads/624932aeb457039c17a3ea44233c2fcebb5a4712",styleName:"pink",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_pink"),...g,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_BLUE",url:"https://static.figma.com/uploads/08e54f2250f141f253909dcf78f29a94edfeb04f",thumbnailUrl:"https://static.figma.com/uploads/f202bd15ff834d5b85ef9184a03c2722cac2abae",styleName:"blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...g,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_STARLIGHT",url:"https://static.figma.com/uploads/837024569c0ea543fbdf6a7fd0a12dc4a17fab08",thumbnailUrl:"https://static.figma.com/uploads/a47c92bd590793f5afbc5cdc9bd34aff73a2d36d",styleName:"Starlight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_starlight"),...g,archived:!0},{presetIdentifier:"APPLE_IPHONE_13_RED",url:"https://static.figma.com/uploads/126fa2145acf6dddb5e879e6507c62c943137bfc",thumbnailUrl:"https://static.figma.com/uploads/b7e3269f73ffe5a9e646e07307d10ff7793c6b4b",styleName:"Red",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_red"),...g,archived:!0},{presetIdentifier:"APPLE_IPHONE_X_SILVER",url:"https://static.figma.com/uploads/c3fa41c0ef744878d816aa4eea1a203aa0e9147f",thumbnailUrl:"https://static.figma.com/uploads/ff8bfebfd53eedec1ad69bf9511ea97af479d1e5",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),archived:!0,...E},{presetIdentifier:"APPLE_IPHONE_X_SPACE_GREY",url:"https://static.figma.com/uploads/f1f76a5a065846ebe2fa3201ff0372283a34664d",thumbnailUrl:"https://static.figma.com/uploads/9026efd5f31ecadf0b9c21a603182a9ac2bd73f2",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),archived:!0,...E},{presetIdentifier:"APPLE_IPHONE_13_MINI_MIDNIGHT_ADJUSTED_9_23",url:"https://static.figma.com/uploads/328a19fe4440bb0b5fcf66c739ccd127f03bb553",thumbnailUrl:"https://static.figma.com/uploads/b688ab6bdf6bef50aef02ce72bf6952a5146be8e",styleName:"Midnight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight"),...f},{presetIdentifier:"APPLE_IPHONE_13_MINI_PINK_ADJUSTED_9_23",url:"https://static.figma.com/uploads/a451c77dead565be202afa2e7ca1174b7513858b",thumbnailUrl:"https://static.figma.com/uploads/624932aeb457039c17a3ea44233c2fcebb5a4712",styleName:"pink",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_pink"),...f},{presetIdentifier:"APPLE_IPHONE_13_MINI_BLUE_ADJUSTED_9_23",url:"https://static.figma.com/uploads/d2bc7ea3c49d650254a7c3d81930b1dcc50c6c58",thumbnailUrl:"https://static.figma.com/uploads/f202bd15ff834d5b85ef9184a03c2722cac2abae",styleName:"blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...f},{presetIdentifier:"APPLE_IPHONE_13_MINI_STARLIGHT_ADJUSTED_9_23",url:"https://static.figma.com/uploads/0294d6bf8f56fbf2baa5fef74b7996bd90692934",thumbnailUrl:"https://static.figma.com/uploads/a47c92bd590793f5afbc5cdc9bd34aff73a2d36d",styleName:"Starlight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_starlight"),...f},{presetIdentifier:"APPLE_IPHONE_13_MINI_RED_ADJUSTED_9_23",url:"https://static.figma.com/uploads/c7487cd141b0a2567a518a71eed55f5b1c039d58",thumbnailUrl:"https://static.figma.com/uploads/b7e3269f73ffe5a9e646e07307d10ff7793c6b4b",styleName:"Red",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_red"),...f},{presetIdentifier:"APPLE_IPHONE_13_MINI_MIDNIGHT",url:"https://static.figma.com/uploads/328a19fe4440bb0b5fcf66c739ccd127f03bb553",thumbnailUrl:"https://static.figma.com/uploads/b688ab6bdf6bef50aef02ce72bf6952a5146be8e",styleName:"Midnight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight"),...O,hideUnlessActive:!0},{presetIdentifier:"APPLE_IPHONE_13_MINI_PINK",url:"https://static.figma.com/uploads/a451c77dead565be202afa2e7ca1174b7513858b",thumbnailUrl:"https://static.figma.com/uploads/624932aeb457039c17a3ea44233c2fcebb5a4712",styleName:"pink",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_pink"),...O,hideUnlessActive:!0},{presetIdentifier:"APPLE_IPHONE_13_MINI_BLUE",url:"https://static.figma.com/uploads/d2bc7ea3c49d650254a7c3d81930b1dcc50c6c58",thumbnailUrl:"https://static.figma.com/uploads/f202bd15ff834d5b85ef9184a03c2722cac2abae",styleName:"blue",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_blue"),...O,hideUnlessActive:!0},{presetIdentifier:"APPLE_IPHONE_13_MINI_STARLIGHT",url:"https://static.figma.com/uploads/0294d6bf8f56fbf2baa5fef74b7996bd90692934",thumbnailUrl:"https://static.figma.com/uploads/a47c92bd590793f5afbc5cdc9bd34aff73a2d36d",styleName:"Starlight",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_starlight"),...O,hideUnlessActive:!0},{presetIdentifier:"APPLE_IPHONE_13_MINI_RED",url:"https://static.figma.com/uploads/c7487cd141b0a2567a518a71eed55f5b1c039d58",thumbnailUrl:"https://static.figma.com/uploads/b7e3269f73ffe5a9e646e07307d10ff7793c6b4b",styleName:"Red",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_red"),...O,hideUnlessActive:!0},{presetIdentifier:"APPLE_IPHONE_11PROMAX_GOLD",url:"https://static.figma.com/uploads/24309fe757b8e9a95552773031bef2ee76b7a2d6",thumbnailUrl:"https://static.figma.com/uploads/7fabafe31c73b4845a810f4ba87087a50ff4ae06",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),archived:!0,...y},{presetIdentifier:"APPLE_IPHONE_11PROMAX_MIDNIGHTGREEN",url:"https://static.figma.com/uploads/ed233896f50d899c9da3ef242a7bd59b2055960e",thumbnailUrl:"https://static.figma.com/uploads/2b126564c30d5c97441f83c05631e83dca37c9e5",styleName:"Midnight Green",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight_green"),archived:!0,...y},{presetIdentifier:"APPLE_IPHONE_11PROMAX_SILVER",url:"https://static.figma.com/uploads/e741fc6878521527afe1b43b6acfb4f32ca8ab74",thumbnailUrl:"https://static.figma.com/uploads/65133f57179145290e6cb2bf1701cc8d605ce607",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),archived:!0,...y},{presetIdentifier:"APPLE_IPHONE_11PROMAX_SPACEGREY",url:"https://static.figma.com/uploads/4a6ca449106d3860fda8d455d52c9a3f07187629",thumbnailUrl:"https://static.figma.com/uploads/fbd82023dc945b4472488697c718db106a6f1bb7",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),archived:!0,...y},{presetIdentifier:"APPLE_IPHONE_11PRO_GOLD",url:"https://static.figma.com/uploads/473492d3b4beb5572a50968cd7655554ece2bf41",thumbnailUrl:"https://static.figma.com/uploads/a3496627c4bd434e661e830fc36c216fddbeaaeb",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),archived:!0,...v},{presetIdentifier:"APPLE_IPHONE_11PRO_MIDNIGHTGREEN",url:"https://static.figma.com/uploads/360066b6ae030bf33bcb5e000254e0adc2b5a64f",thumbnailUrl:"https://static.figma.com/uploads/cf7834090b2e1e778c1323bc304bff894d3531f8",styleName:"Midnight Green",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_midnight_green"),archived:!0,...v},{presetIdentifier:"APPLE_IPHONE_11PRO_SILVER",url:"https://static.figma.com/uploads/52d57ab30b4407a494d2c817e2e41de15973e590",thumbnailUrl:"https://static.figma.com/uploads/dcdfbbcb73a82239ccd12b9fe698d59e42ca8e5e",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),archived:!0,...v},{presetIdentifier:"APPLE_IPHONE_11PRO_SPACEGREY",url:"https://static.figma.com/uploads/d4df2b9afbc2ff4a44217ac737ff046c1852599c",thumbnailUrl:"https://static.figma.com/uploads/2d9f4f71032e0ab92ba664992dcfa78232df5514",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),archived:!0,...v},{presetIdentifier:"APPLE_IPHONE_11_BLACK",url:"https://static.figma.com/uploads/9e306176a1792c1f907d3510984b3395ad5e4bb4",thumbnailUrl:"https://static.figma.com/uploads/f7968a18c062bcdeb7a885f955925a16ebef520e",styleName:"Black",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_black"),archived:!0,...b},{presetIdentifier:"APPLE_IPHONE_11_WHITE",url:"https://static.figma.com/uploads/f904c3e35e25ff1822eb15fdf3f3bff551da20d5",thumbnailUrl:"https://static.figma.com/uploads/8877045c779f6e0d0b81c3501b67661c6b6793c7",styleName:"White",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_white"),archived:!0,...b},{presetIdentifier:"APPLE_IPHONE_SE_GOLD",url:"https://static.figma.com/uploads/f090c716b2ed30ba68d1478f160f2f9847e766f3",thumbnailUrl:"https://static.figma.com/uploads/72d9e55b8b2d46d605b480f4e51e2942b502ca92",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...I},{presetIdentifier:"APPLE_IPHONE_SE_ROSE_GOLD",url:" https://static.figma.com/uploads/2658d90c9afd4162d33777c45c3f9e8dc7ece855",thumbnailUrl:"https://static.figma.com/uploads/b4c5b6e6ed63d2eae9016e033055b3ea1e8069e2",styleName:"Rose Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_rose_gold"),...I},{presetIdentifier:"APPLE_IPHONE_SE_SILVER",url:"https://static.figma.com/uploads/27e1069aae130d1e34b6f4e1835729864f05f7de",thumbnailUrl:"https://static.figma.com/uploads/46c5f84c1da73f0c7ce9409114d3c430af808cd3",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...I},{presetIdentifier:"APPLE_IPHONE_SE_SPACE_GREY",url:"https://static.figma.com/uploads/8a8146fcd850bd09919336def177fe6496ce41df",thumbnailUrl:"https://static.figma.com/uploads/8ddfc04b706e3759ec49d2501c01b96e977bd792",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),...I},{presetIdentifier:"APPLE_IPHONE_8_PLUS_GOLD",url:"https://static.figma.com/uploads/be4f91d500f8c0fc5fb59987e09b080238de2e07",thumbnailUrl:"https://static.figma.com/uploads/b2d642b47eca1383c439f844a76484a07a5a3162",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...T},{presetIdentifier:"APPLE_IPHONE_8_PLUS_SILVER",url:"https://static.figma.com/uploads/8b04ac590c9c01ee09c63ee421e07286033fccbe",thumbnailUrl:"https://static.figma.com/uploads/6efeaba691f994da1874e39b4766aafaa198256b",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...T},{presetIdentifier:"APPLE_IPHONE_8_PLUS_SPACE_GREY",url:"https://static.figma.com/uploads/c88332b425e7d47906f04e3dad5e421a54fad7b7",thumbnailUrl:"https://static.figma.com/uploads/31b9500e4e1cbbcb25c989c4347ad643b292fa22",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),...T},{presetIdentifier:"APPLE_IPHONE_8_GOLD",url:"https://static.figma.com/uploads/03937fa8ef475102d0f110e15534126f285662fc",thumbnailUrl:"https://static.figma.com/uploads/4bff10d3aaecf8f9b3a06cb8589bc8fb03c215a0",styleName:"Gold",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_gold"),...w},{presetIdentifier:"APPLE_IPHONE_8_SILVER",url:"https://static.figma.com/uploads/8f8fc00745d0e6fa186b477771aa66417e7e4718",thumbnailUrl:"https://static.figma.com/uploads/763a9210a544ea9888602c3ea78136abdfee3e38",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_silver"),...w},{presetIdentifier:"APPLE_IPHONE_8_SPACE_GREY",url:"https://static.figma.com/uploads/a63fadb7450e82ac1797fd14e6cd918d3d25c0c2",thumbnailUrl:"https://static.figma.com/uploads/f3a950db328dd1302690b6538d8e486a5218c6d8",styleName:"Space Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.iphone_space_grey"),...w},{presetIdentifier:"GOOGLE_ANDROID_S_SILVER",url:"https://static.figma.com/uploads/a4ef3d0959c407ac730f2680e645995f95ffd117",thumbnailUrl:"https://static.figma.com/uploads/f5a1f34933432e3ef5d91668205fe5985d3c77d4",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.android_silver"),...a},{presetIdentifier:"GOOGLE_ANDROID_S_GREY",url:"https://static.figma.com/uploads/88e4290443158a1dfae63bcbcfce5ebdc2335c29",thumbnailUrl:"https://static.figma.com/uploads/952aab1a0b22ceac3f09cfa7b3169024e64938bf",styleName:"Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.android_grey"),...a},{presetIdentifier:"GOOGLE_ANDROID_L_SILVER",url:"https://static.figma.com/uploads/0d00a1af86d66a6a34277c8b6645a0060f0a1890",thumbnailUrl:"https://static.figma.com/uploads/ae952dd28b55d6d9a5c3640205d2ac144505fef3",styleName:"Silver",getI18nStyleName:()=>(0,n.t)("presets.styles.android_silver"),...i},{presetIdentifier:"GOOGLE_ANDROID_L_GREY",url:"https://static.figma.com/uploads/41c563e3ff6804ac83e50a391860c1f22f37c775",thumbnailUrl:"https://static.figma.com/uploads/1801e14760c927c9407f7bbd1925341a829d0b4c",styleName:"Grey",getI18nStyleName:()=>(0,n.t)("presets.styles.android_grey"),...i},{presetIdentifier:"GOOGLE_PIXEL_2_CLEARLY_WHITE",url:"https://static.figma.com/uploads/4a447a9da38c948d4ce92899416d04835306dfaa",thumbnailUrl:"https://static.figma.com/uploads/df4ab59dca6301ddbe8aeec44924303568552a2b",styleName:"Clearly White",getI18nStyleName:()=>(0,n.t)("presets.styles.android_clearly_white"),archived:!0,...S},{presetIdentifier:"GOOGLE_PIXEL_2_JUST_BLACK",url:"https://static.figma.com/uploads/6230970b6b721631ae1ba2d45c31cfa433dc778e",thumbnailUrl:"https://static.figma.com/uploads/d46b16df0b11238020160d60d816f1d837ea0f89",styleName:"Just Black",getI18nStyleName:()=>(0,n.t)("presets.styles.android_just_black"),archived:!0,...S},{presetIdentifier:"GOOGLE_PIXEL_2_KINDA_BLUE",url:"https://static.figma.com/uploads/b7e5c6d28ea62e1faa673eb2e35cb30366cf1ab4",thumbnailUrl:"https://static.figma.com/uploads/63484194a51244d57c82e5a9994e9946b70f8b7f",styleName:"Kinda Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.android_kinda_blue"),archived:!0,...S},{presetIdentifier:"GOOGLE_PIXEL_2_XL_BLACK_AND_WHITE_FIXED",url:"https://static.figma.com/uploads/340e7e7cb70a2ea9d453d43b320ad2adf9a24cf9",thumbnailUrl:"https://static.figma.com/uploads/f192fba1d1cb36b1231abff8c61f8a724f1882cd",styleName:"Black and White",getI18nStyleName:()=>(0,n.t)("presets.styles.android_black_and_white"),archived:!0,...C},{presetIdentifier:"GOOGLE_PIXEL_2_XL_JUST_BLACK_FIXED",url:"https://static.figma.com/uploads/528929488377331f1a6ed8fbd5f703bc55d9f948",thumbnailUrl:"https://static.figma.com/uploads/edf40d24dc41f55284008aafb32897c52b0b706f",styleName:"Just Black",getI18nStyleName:()=>(0,n.t)("presets.styles.android_just_black"),archived:!0,...C},{presetIdentifier:"GOOGLE_NEXUS_5X",url:"https://static.figma.com/uploads/c116dd83223811e5464f9b2cfb3a06cffe6d7811",thumbnailUrl:"https://static.figma.com/uploads/f0a3557ea40091cc6dacf47295a2376a57f6340c",scaleFactor:3,imageSize:{x:1195,y:2406},offset:{x:53/3,y:77},deviceName:"Google Nexus 5X",getI18nDeviceName:()=>(0,n.t)("presets.google_nexus_5x"),styleName:"",getI18nStyleName:()=>"",framePresetSize:{x:360,y:640},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_XL_BLACK_AND_WHITE",url:"https://static.figma.com/uploads/340e7e7cb70a2ea9d453d43b320ad2adf9a24cf9",thumbnailUrl:"https://static.figma.com/uploads/f192fba1d1cb36b1231abff8c61f8a724f1882cd",scaleFactor:3.503,imageSize:{x:1630,y:3339},offset:{x:91/3.503,y:242/3.503},deviceName:"Google Pixel 2 XL (legacy)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2_xl"),styleName:"Black and White",getI18nStyleName:()=>(0,n.t)("presets.styles.android_black_and_white"),framePresetSize:{x:411,y:822},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_XL_JUST_BLACK",url:"https://static.figma.com/uploads/528929488377331f1a6ed8fbd5f703bc55d9f948",thumbnailUrl:"https://static.figma.com/uploads/edf40d24dc41f55284008aafb32897c52b0b706f",scaleFactor:3.503,imageSize:{x:1630,y:3339},offset:{x:91/3.503,y:242/3.503},deviceName:"Google Pixel 2 XL (legacy)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2_xl"),styleName:"Just Black",getI18nStyleName:()=>(0,n.t)("presets.styles.android_just_black"),framePresetSize:{x:411,y:822},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_CLEARLY_WHITE_CORRECTED",url:"https://static.figma.com/uploads/4a447a9da38c948d4ce92899416d04835306dfaa",thumbnailUrl:"https://static.figma.com/uploads/df4ab59dca6301ddbe8aeec44924303568552a2b",scaleFactor:3,imageSize:{x:1210,y:2513},offset:{x:59/3,y:296/3},deviceName:"Google Pixel 2 (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2"),styleName:"Clearly White",getI18nStyleName:()=>(0,n.t)("presets.styles.android_clearly_white"),framePresetSize:{x:360,y:640},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_JUST_BLACK_CORRECTED",url:"https://static.figma.com/uploads/6230970b6b721631ae1ba2d45c31cfa433dc778e",thumbnailUrl:"https://static.figma.com/uploads/d46b16df0b11238020160d60d816f1d837ea0f89",scaleFactor:3,imageSize:{x:1210,y:2513},offset:{x:59/3,y:296/3},deviceName:"Google Pixel 2 (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2"),styleName:"Just Black",getI18nStyleName:()=>(0,n.t)("presets.styles.android_just_black"),framePresetSize:{x:360,y:640},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_KINDA_BLUE_CORRECTED",url:"https://static.figma.com/uploads/b7e5c6d28ea62e1faa673eb2e35cb30366cf1ab4",thumbnailUrl:"https://static.figma.com/uploads/63484194a51244d57c82e5a9994e9946b70f8b7f",scaleFactor:3,imageSize:{x:1210,y:2513},offset:{x:59/3,y:296/3},deviceName:"Google Pixel 2 (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2"),styleName:"Kinda Blue",getI18nStyleName:()=>(0,n.t)("presets.styles.android_kinda_blue"),framePresetSize:{x:360,y:640},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_XL_BLACK_AND_WHITE_CORRECTED",url:"https://static.figma.com/uploads/340e7e7cb70a2ea9d453d43b320ad2adf9a24cf9",thumbnailUrl:"https://static.figma.com/uploads/f192fba1d1cb36b1231abff8c61f8a724f1882cd",scaleFactor:4,imageSize:{x:1630,y:3339},offset:{x:91/4,y:60.5},deviceName:"Google Pixel 2 XL (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2_xl"),styleName:"Black and White",getI18nStyleName:()=>(0,n.t)("presets.styles.android_black_and_white"),framePresetSize:{x:360,y:720},hideUnlessActive:!0},{presetIdentifier:"GOOGLE_PIXEL_2_XL_JUST_BLACK_CORRECTED",url:"https://static.figma.com/uploads/528929488377331f1a6ed8fbd5f703bc55d9f948",thumbnailUrl:"https://static.figma.com/uploads/edf40d24dc41f55284008aafb32897c52b0b706f",scaleFactor:4,imageSize:{x:1630,y:3339},offset:{x:91/4,y:60.5},deviceName:"Google Pixel 2 XL (wrong)",getI18nDeviceName:()=>(0,n.t)("presets.google_pixel_2_xl"),styleName:"Just Black",getI18nStyleName:()=>(0,n.t)("presets.styles.android_just_black"),framePresetSize:{x:360,y:720},hideUnlessActive:!0}]},437575:(e,t,r)=>{r.d(t,{Ft:()=>u,XG:()=>d,qL:()=>c,y2:()=>p});var n=r(716250),i=r(970740);let a=[{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,i.t)("presets.i_phone_se")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,i.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,i.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,i.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,i.t)("presets.android_large")}],o=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,i.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,i.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,i.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,i.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,i.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,i.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,i.t)("presets.slide_4_3")}],s=[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,i.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,i.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:(0,n.BZ)().cmty_rdp_redesign_publishing?1080:960,i18nName:()=>(0,i.t)("presets.plugin_file_cover")}],c={phonePresets:a,tabletPresets:[{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,i.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,i.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,i.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,i.t)("presets.i_pad_pro_12_9")}],desktopPresets:o,presentationPresets:l,watchPresets:[{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,i.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,i.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,i.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,i.t)("presets.apple_watch_40_mm")}],paperPresets:[{name:"A4",width:595,height:842,i18nName:()=>(0,i.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,i.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,i.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,i.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,i.t)("presets.tabloid")}],socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,i.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,i.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,i.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,i.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,i.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,i.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,i.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,i.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,i.t)("presets.linked_in_cover")}],figmaPresets:s,archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_x")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,i.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,i.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,i.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,i.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,i.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,i.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,i.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,i.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,i.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,i.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,i.t)("presets.mac_128k")}]},d=m(Object.values(c)),u=m([a,o,l]);function p(e){let t=null;for(let r of Object.values(d)){if(e.width===r.width&&e.height===r.height)return r;e.width===r.height&&e.height===r.width&&(t=r)}return t}function m(e){return e.reduce((e,t)=>{for(let r of t)e[r.name]=r;return e},{})}},496417:(e,t,r)=>{r.d(t,{$I:()=>R,AH:()=>v,Fh:()=>h,Hy:()=>n,IN:()=>M,Ic:()=>T,KU:()=>_,Qf:()=>O,Qt:()=>c,SC:()=>f,T7:()=>D,X4:()=>m,Zv:()=>p,_T:()=>w,cv:()=>g,d8:()=>E,fB:()=>U,iP:()=>o,j:()=>I,jq:()=>A,k$:()=>d,p:()=>N,p2:()=>u,pA:()=>P,pv:()=>F,qT:()=>C,sN:()=>x,tJ:()=>i,uS:()=>s,uZ:()=>a,wi:()=>y,wy:()=>S,xs:()=>L,yt:()=>b,z0:()=>k,z7:()=>l});let n="js-fullscreen-prevent-event-capture",i="js-fullscreen-wheel-event-passthrough",a="js-fullscreen-wheel-event-capture",o="js-fullscreen-no-mod-wheel-event-capture",l=2147483647,s="background-panel-color-picker",c="prototype-background-panel-color-picker",d="type-settings",u="style-preview-type-settings",p="font-picker",m="export-picker",h="scroll-behavior-modal",_="selection-paint-item",g="selection-style-item",f="stacking-advanced-sizing",E="prototype-interaction-settings",y="accessible-reading-order",v="DROPDOWN_TYPE_SELECT_LAYER_CONTEXT_MENU",b="DROPDOWN_TYPE_OBJECTS_PANEL_CONTEXT_MENU",I="DROPDOWN_TYPE_SELECTION_CONTEXT_MENU",T="DROPDOWN_TYPE_CANVAS_CONTEXT_MENU",w="DROPDOWN_TYPE_PAGE_CONTEXT_MENU",S="DROPDOWN_TYPE_SAVEPOINT_CONTEXT_MENU",C="DROPDOWN_TYPE_DEV_HANDOFF_CODE_CONTEXT_MENU",O="DROPDOWN_TYPE_DEV_HANDOFF_LAYER_CONTEXT_MENU",A="DROPDOWN_TYPE_PLUGIN_RUN_CONTEXT_MENU",N="DROPDOWN_TYPE_TEXT_EDIT_MODE_CONTEXT_MENU",L="DROPDOWN_TYPE_RULER_GUIDE_CONTEXT_MENU",P="DROPDOWN_TYPE_COMMENT_CONTEXT_MENU",R="DROPDOWN_TYPE_READY_STATUS_CONTEXT_MENU",k="DROPDOWN_TYPE_ANNOTATIONS_BUTTON_CONTEXT_MENU",D="DROPDOWN_TYPE_THREAD_COMMENT_OVERFLOW_MENU",M="DROPDOWN_TYPE_SECTION_PRESET_PICKER_CONTEXT_MENU",F="DROPDOWN_TYPE_COMMENT_ATTACHMENT_CONTEXT_MENU",x="DROPDOWN_TYPE_SLIDE_CAROUSEL_CONTEXT_MENU",U="DROPDOWN_TYPE_WAND_MENU"},522494:(e,t,r)=>{r.d(t,{$T:()=>ei,$l:()=>es,A4:()=>et,CK:()=>el,CL:()=>en,J1:()=>ef,JA:()=>er,P0:()=>eu,Tf:()=>eE,U_:()=>em,_C:()=>eh,dQ:()=>e_,e8:()=>eo,gK:()=>ea,iv:()=>ec,kt:()=>eg,p:()=>ed,tR:()=>ep});var n=r(600486),i=r(239299),a=r(269658),o=r(716250),l=r(337167),s=r(873349),c=r(571529),d=r(970740),u=r(800829),p=r(447160),m=r(111120),h=r(280251),_=r(721127),g=r(158896),f=r(701408),E=r(371353),y=r(278832),v=r(121108),b=r(999177),I=r(158774),T=r(441678),w=r(961215),S=r(784667),C=r(151990),O=r(269836),A=r(817627),N=r(258518),L=r(866055),P=r(501741),R=r(257817),k=r(731436),D=r(532444),M=r(975711),F=r(777107),x=r(173068),U=r(930650),B=r(525300),V=r(216885),G=r(45741),H=r(37594),W=r(502751),K=r(198456),z=r(953195),Z=r(840253),Y=r(130939),j=r(88938),$=r(614543),q=r(242153),X=r(984702),J=r(113206),Q=r(478498),ee=r(771545);function et(e){return"children"in e||"childDropdown"in e}function er(e){return"action"in e||"callback"in e}function en(e){return"separator"in e}function ei(e){return"header"in e}function ea(e){return"render"in e}function eo(e){let t="propertyValue"in e&&void 0!==e.propertyValue;return"checked"in e||t}function el(e,t){var r;return!!t.checked||null!=t.property&&("string"==typeof(r=t.property)?e[r]:r.getCopy())===t.propertyValue}function es(e,t){return"string"==typeof t?e[t]:t.getCopy()}function ec(e){return e.action||e.name}let ed="edit-menu",eu="view-menu",ep="object-menu",em="vector-menu",eh="text-menu",e_="arrange-menu",eg="preferences-menu",ef="figma-account-menu";function eE(e){let{fileMenuArgs:t,pluginAndWidgetMenuArgs:r,additionalDebugItems:et,theme:er,backToFileArgs:en,zoomArgs:ei}=e;return[...en.shouldShowBackToFiles?[{callback:(e,t,r,i)=>{var o;if(null==i||i.preventDefault(),(0,n.L9)("Back to files button clicked",{source:"fullscreen_menu"}),i.metaKey||1===i.button){let e=a.V.getState().openFile,t=(null==(o=null==e?void 0:e.project)?void 0:o.id)||null;(0,b.Mz)(a.V.getState().folders,t)?(0,y.RH)((0,k.DS)(t,(null==e?void 0:e.parentOrgId)??null),r):(0,y.RH)("/",r)}else r(h.CJ()),r(m.kp())},name:"back-to-files",recordingKey:"back-to-files","data-onboarding-key":"back-to-files",disabled:en.isDisabled},{separator:!0}]:[],{action:"toggle-menu",hideForQuickCommand:!0,iconType:"search"},{separator:!0},...t?function(e,t,r,n,i){let a=[{action:"place",flags:["edit","design",R.QK]},{action:"import",flags:["edit","whiteboard",R.QK]},{separator:!0},...(0,o.Gm)().integration_host?[]:[{name:"save-as",callback:(e,r,n)=>{(0,L.WN)(L._P.SaveLocalFile,t,n,e,["0:0"],"save-as"),p.lg()},flags:["view_restricted","!recovery"]}],{action:"create-savepoint",flags:["edit","!integration","!recovery"]},{action:"toggle-version-history",flags:["edit","!integration","!recovery"],property:"topLevelMode"},{separator:!0},{action:"export-selected-exportables",callback:(e,t,r)=>{I.Gr.triggerAction(e,{source:"menu"})},flags:["view_restricted","design","dev_handoff","!recovery","!limited_dev_mode"]},{action:"export-selection-or-current-page",callback:(e,t,r)=>{I.Gr.triggerAction(e,{source:"menu"})},flags:["view_restricted","whiteboard","!limited_dev_mode"]},{name:"export-all-frames-to-pdf",callback:(e,r,n)=>{(0,L.WN)(L._P.Export,t,n,e,[w.io9.getCurrentPage(w.syY.REDUX)||""],"export-all-frames-to-pdf")},flags:["view_restricted","design","dev_handoff","!recovery","!limited_dev_mode"]},{separator:!0},...(0,E.i)(e,D.V4.EDITOR_MENU,r,i),...(0,E.P)(e,D.V4.EDITOR_MENU,r),...(0,g.k)({isOrgMember:n}),{separator:!0},{action:"quit",flags:["!ship"]}];return[{name:"file-menu",flags:["design","dev_handoff","!integration"],children:[{action:"new-design",iconType:"external_link"},{action:"new-whiteboard",iconType:"external_link"},{action:"new-from-sketch"},{separator:!0},...a]},{name:"file-menu",flags:["whiteboard","!integration"],children:[{action:"new-whiteboard",iconType:"external_link"},{action:"new-design",iconType:"external_link"},{separator:!0},...a]},{name:"file-menu",flags:[R.QK,"!integration"],children:a},{name:"file-menu",flags:["integration",R.QK],children:a}]}(t.branchingActionsStatus,t.saveAsState,t.topLevelMode,t.isOrgMember,t.unreadCommentCount):[],{name:ed,flags:["!edit","!dev_handoff"],children:[{action:"undo",flags:["recovery"]},{action:"redo",flags:["recovery"]},{separator:!0},{action:"focus-mode",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"focus-mode-exit",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"canvas-search"},{action:"canvas-search-next"},{action:"canvas-search-prev"},{separator:!0},{action:"toggle-dropper"},{action:"copy-properties",flags:["view_restricted"]},{separator:!0},{action:"select-all"},{action:"deselect-all"},{action:"select-inverse"},{separator:!0},{action:"select-matching"},{name:"select-all-with-menu-options",flags:["design"],children:[{action:"select-same-style",flags:["design"]},{action:"select-same-fill",flags:["design"]},{action:"select-same-stroke",flags:["design"]},{action:"select-same-effect",flags:["design"]},{action:"select-same-text",flags:["design"]},{action:"select-same-font",flags:["design"]},{action:"select-same-instance",flags:["design"]},{action:"select-same-variant",flags:["design"]}]}]},{name:ed,flags:["!edit","dev_handoff"],children:[{name:"copy",flags:["desktop_os_menu"]},{name:"paste",flags:["desktop_os_menu"]},{name:"cut",flags:["desktop_os_menu"]},{action:"copy-as-menu",flags:["view_restricted"],children:[{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"}]},{separator:!0},{action:"focus-mode",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"focus-mode-exit",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"canvas-search"},{action:"canvas-search-next"},{action:"canvas-search-prev"},{separator:!0},{action:"select-all"},{action:"deselect-all"}]},{name:ed,flags:["edit","!dev_handoff"],children:[{action:"undo"},{action:"redo"},{separator:!0},{name:"cut",flags:["desktop_os_menu"]},{name:"copy",flags:["desktop_os_menu"]},{action:"copy-as-menu",flags:["view_restricted"],children:[{action:"copy-text",flags:["design",R.QK]},{action:"copy-as-css",flags:["design"]},{action:"copy-as-svg",flags:["design"]},{action:"copy-as-png"}]},{name:"paste",flags:["desktop_os_menu"]},{action:"paste-over-selection"},{action:"paste-to-replace"},{action:"duplicate-in-place"},{action:"delete-selection"},{separator:!0},{action:"focus-mode",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"focus-mode-exit",flags:["design"],searchOnly:!0,featureFlags:["ce_multi_edit_focus_mode"]},{action:"canvas-search"},{action:"canvas-search-next"},{action:"canvas-search-prev"},{action:"canvas-search-replace"},{separator:!0},{action:"set-default-style",flags:["design"]},{action:"copy-properties",flags:["design"]},{action:"paste-properties",flags:["design"]},{separator:!0},{action:"toggle-dropper",flags:["design"]},{separator:!0},...(0,o.BZ)().ce_multi_edit?[{action:"select-all"},{action:"select-matching",flags:["design"]},{action:"deselect-all"},{action:"select-inverse"}]:[{action:"select-all"},{action:"deselect-all"},{action:"select-inverse"},{action:"select-matching",flags:["design"]}],{name:"select-all-with-menu-options",flags:["design"],children:[{action:"select-same-style",flags:["design"]},{action:"select-same-fill",flags:["design"]},{action:"select-same-stroke",flags:["design"]},{action:"select-same-effect",flags:["design"]},{action:"select-same-text",flags:["design"]},{action:"select-same-font",flags:["design"]},{action:"select-same-instance",flags:["design"]},{action:"select-same-variant",flags:["design"]}]}]},{name:eu,children:[{action:"toggle-grid",flags:["design","dev_handoff"],property:(0,S.tZ)().renderGrid,propertyValue:!0,displayForQuickCommand:"show-pixel-grid"},{action:"toggle-show-dot-grid",flags:["whiteboard"],property:(0,S.tZ)().showDotGrid,propertyValue:!0,displayForQuickCommand:"toggle-show-dot-grid"},{action:"toggle-shown-layout-grids",flags:["edit","design","dev_handoff"],property:(0,S.tZ)().showFrameGrids,propertyValue:!0,displayForQuickCommand:"show-layout-grids"},{action:"toggle-shown-layout-grids",flags:["!edit","design","dev_handoff"],property:(0,T.Y)().showFrameGridsViewOnly,propertyValue:!0,displayForQuickCommand:"show-layout-grids"},{action:"toggle-rulers",flags:["design","dev_handoff"],property:(0,S.tZ)().renderRulers,propertyValue:!0,displayForQuickCommand:"show-rulers"},{action:"toggle-stack-positioning",flags:["design"],displayForQuickCommand:"toggle-stack-positioning",property:(0,S.tZ)().isDefaultStackPositionAbsolute,propertyValue:!0,featureFlags:["ce_al_use_absolute_position"]},{action:"toggle-show-slices",flags:["design"],property:(0,S.tZ)().showSlices,propertyValue:!0,displayForQuickCommand:"show-slices"},{action:"toggle-show-comments",flags:["design","dev_handoff",R.QK],property:"showComments",propertyValue:!0,displayForQuickCommand:"show-comments",hideForQuickCommand:c.ZP.isIpadNative},{action:"toggle-show-annotations",flags:["dev_handoff"],property:w.O$1.uiState().showAnnotations,propertyValue:!0,displayForQuickCommand:"show-annotations",hideForQuickCommand:c.ZP.isIpadNative,featureFlags:["dt_lego_annotations"]},{name:"outline-mode",flags:["design","dev_handoff"],children:[{action:"toggle-outlines",property:(0,T.Y)().showOutlines,propertyValue:!0},{separator:!0},{action:"toggle-outline-mode-hidden-layers",property:(0,T.Y)().showOutlineHiddenLayers,propertyValue:!0,displayForQuickCommand:"toggle-outline-mode-hidden-layers-qc"},{action:"toggle-outline-mode-object-bounds",property:(0,T.Y)().showOutlineObjectBounds,propertyValue:!0,displayForQuickCommand:"toggle-outline-mode-object-bounds-qc"}]},{action:"toggle-pixel-preview",flags:["design","dev_handoff"],property:(0,S.tZ)().activeCanvasPixelPreview,propertyValue:!0,displayForQuickCommand:"show-pixel-preview"},{action:"toggle-show-masks",flags:["design"],property:(0,S.tZ)().showMasks,propertyValue:!0,displayForQuickCommand:"show-mask-outlines"},{action:"toggle-show-artboard-outlines",flags:["design"],property:(0,S.tZ)().showArtboardOutlines,propertyValue:!0,displayForQuickCommand:"show-frame-outlines"},{action:"toggle-memory-usage-indicator",property:w.O$1.uiState().showMemoryUsage,flags:["design"],propertyValue:!0},{action:"toggle-resource-use",property:w.O$1.uiState().renderResourceUse,flags:["whiteboard"],propertyValue:!0},{action:"toggle-icon-detection",property:w.O$1.devHandoffState().automaticIconDetection,propertyValue:!0,flags:["dev_handoff","!limited_dev_mode"]},{separator:!0},{action:"toggle-ui",property:"showUi",propertyValue:!0},{action:"toggle-multiplayer-cursors",property:"hideMultiplayerCursors",propertyValue:!1},{action:"toggle-sidebar",property:(0,S.tZ)().showSidebar,propertyValue:!0,flags:["dev_handoff"]},{action:"enter-design-mode",flags:["dev_handoff"]},{action:"enter-inspect-mode",flags:["!dev_handoff","!recovery"]},{action:"panels-menu",flags:["design","view_restricted","!dev_handoff"],children:[{action:"toggle-layers"},{action:"toggle-publish"},{action:"show-design-panel"},{action:"show-prototype-panel",notFeatureFlags:["prototype_modality"]},{action:"toggle-prototyping-info",searchOnly:!0,flags:["edit"]},{action:"toggle-prototyping-info",searchOnly:!0,flags:["!edit"],displayForQuickCommand:"toggle-prototyping-information"},{action:"show-inspect-panel",flags:["!edit"]},{action:"toggle-variables"},{separator:!0},{action:"toggle-sidebar",property:(0,S.tZ)().showSidebar,propertyValue:!0}]},{separator:!0},{action:"zoom-in",disabled:!(null==ei?void 0:ei.canZoomIn)},{action:"zoom-out",disabled:!(null==ei?void 0:ei.canZoomOut)},{action:"zoom-reset"},{action:"zoom-to-fit"},{action:"zoom-to-selection"},{separator:!0},{action:"page-previous",flags:["design","dev_handoff"]},{action:"page-next",flags:["design","dev_handoff"]},{action:"previous-artboard",flags:["design","dev_handoff"]},{action:"previous-artboard",flags:["whiteboard"],featureFlags:["figjam_move_to_frame"]},{action:"next-artboard",flags:["design","dev_handoff"]},{action:"next-artboard",flags:["whiteboard"],featureFlags:["figjam_move_to_frame"]},{action:"previous-artboard-same-zoom",flags:["design","dev_handoff"]},{action:"previous-artboard-same-zoom",flags:["whiteboard"],featureFlags:["figjam_move_to_frame"]},{action:"next-artboard-same-zoom",flags:["design","dev_handoff"]},{action:"next-artboard-same-zoom",flags:["whiteboard"],featureFlags:["figjam_move_to_frame"]},{separator:!0},{name:"interface-scale-menu",flags:["desktop_os_menu"]},{separator:!0},{name:"toggle-full-screen",flags:["desktop_os_menu"]},{name:"always-show-tabs-when-presenting",flags:["desktop_os_menu"]}]},{name:ep,flags:["!dev_handoff"],children:[...(0,o.BZ)().section_improvements?[{action:"frame-selection",flags:["design","edit"]},{action:"group-selection",flags:["edit"]},{action:"ungroup-selection",flags:["edit"]},{separator:!0},{action:"create-section-from-selection",flags:["edit"]},{action:"replace-selected-frame-with-section",flags:["edit"]},{action:"replace-selected-section-with-frame",flags:["edit"]},{separator:!0},{action:"create-section",flags:["edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}}]:[{action:"group-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit"]},{action:"replace-selected-frame-with-section",flags:["edit"]},{action:"replace-selected-section-with-frame",flags:["edit"]},{action:"frame-selection",flags:["design","edit"]},{action:"ungroup-selection",flags:["edit"]},{action:"create-section",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}}],{action:"mask-selection",flags:["design","edit"],get displayText(){let e=w.O$1.editorState().selectionIsMask.getCopy();switch(e){case w.XMT.OFF:case w.XMT.MIXED:return(0,d.t)("fullscreen_actions.mask-selection");case w.XMT.ON:return(0,d.t)("fullscreen.menu.remove_mask")}}},{action:"create-comment",flags:["whiteboard","edit"],searchOnly:!0},{action:"create-sticky",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-text-node",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-ellipse",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-diamond",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-triangle",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-rounded-rectangle",flags:["whiteboard","edit"],searchOnly:!0,callback:()=>{(0,v.KC)()}},{action:"create-responsive-set",flags:["design"],featureFlags:["sites"],searchOnly:!0},{action:"convert-table-to-sticky-grid",flags:["whiteboard","edit"],searchOnly:!0},{get name(){return I.Gr.getFileThumbnailMenuItemName()},callback:()=>I.Gr.handleFileThumbnailMenuItem(),get disabled(){return I.Gr.disableFileThumbnailMenu()},flags:["edit"]},{separator:!0},{action:"stack-selection",flags:["design","edit"]},{action:"create-symbol",flags:["design","edit"]},{action:"create-template",flags:["design","edit"],featureFlags:["dse_templates_proto"]},{action:"create-module",flags:["design","edit"],featureFlags:["dse_editor_templates_v1"]},{action:"reset-symbol",flags:["design","edit"]},{action:"detach-instance",flags:["design","edit"]},{action:"main-component",flags:["design"],children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]}]},{separator:!0},{action:"bring-to-front",flags:["edit"]},{action:"bring-forward",flags:["edit"]},{action:"send-backward",flags:["edit"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},{action:"rotate-180",flags:["edit"]},{action:"rotate-90-counterclockwise",flags:["edit"]},{action:"rotate-90-clockwise",flags:["edit"]},{separator:!0},{action:"flatten-selection",flags:["design","edit"]},{action:"outline-stroke",flags:["design","edit"]},{name:"boolean-menu",flags:["design","edit"],children:[{action:"live-boolean-union"},{action:"live-boolean-subtract"},{action:"live-boolean-intersect"},{action:"live-boolean-xor"}]},{action:"convert-to-raster",flags:["design","edit"]},{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["design","edit"]},{action:"toggle-locked-for-selected-nodes",flags:["edit"]},{action:"unlock-all",flags:["whiteboard","edit"]},{action:"hide-sibling-layers",flags:["design","edit"]},{action:"collapse-layers",flags:["design","edit"]},{separator:!0},{action:"remove-fill",flags:["design","edit"]},{action:"remove-stroke",flags:["design","edit"]},{action:"swap-fill-and-stroke",flags:["design","edit"]}]},{name:eh,flags:["edit","!dev_handoff"],children:[{action:"toggle-bold"},{action:"text-toggle-italic"},{action:"text-toggle-underline"},{action:"text-toggle-strikethrough"},{action:"text-edit-hyperlink"},{action:"text-upgrade-to-bidi",searchOnly:!0},{separator:!0},{action:"text-toggle-unordered-list"},{action:"text-toggle-ordered-list"},{separator:!0},{action:"text-align-menu",children:[{action:"text-align-left"},{action:"text-align-center"},{action:"text-align-right"},{action:"text-align-justified",flags:["design",R.QK]},{separator:!0,flags:["design",R.QK]},{action:"text-align-top",flags:["design",R.QK]},{action:"text-align-middle",flags:["design",R.QK]},{action:"text-align-bottom",flags:["design",R.QK]}]},{action:"text-adjust-menu",children:[{action:"text-indent-list"},{action:"text-dedent-list"},{action:"text-font-size-increase",flags:["design",R.QK]},{action:"text-font-size-decrease",flags:["design",R.QK]},{action:"text-bold-increase",flags:["design",R.QK]},{action:"text-bold-decrease",flags:["design",R.QK]},{action:"text-line-height-increase",flags:["design",R.QK]},{action:"text-line-height-decrease",flags:["design",R.QK]},{action:"text-letter-spacing-increase",flags:["design",R.QK]},{action:"text-letter-spacing-decrease",flags:["design",R.QK]}]},{action:"text-case-menu",flags:["design"],children:[{action:"text-original-case",callback:()=>{U.y.setTextCase("ORIGINAL","menu")},flags:["design"]},{action:"text-upper-case",callback:()=>{U.y.setTextCase("UPPER","menu")},flags:["design"]},{action:"text-lower-case",callback:()=>{U.y.setTextCase("LOWER","menu")},flags:["design"]},{action:"text-title-case",callback:()=>{U.y.setTextCase("TITLE","menu")},flags:["design"],searchOnly:!0},{action:"text-small-caps",callback:()=>{U.y.setTextCase("SMALL_CAPS","menu")},flags:["design"],searchOnly:!0},{action:"text-forced-small-caps",callback:()=>{U.y.setTextCase("SMALL_CAPS_FORCED","menu")},flags:["design"],searchOnly:!0}]},{action:"text-directionality-menu",children:[{action:"text-set-directionality-ltr",hideForQuickCommand:!0},{action:"text-set-directionality-rtl",hideForQuickCommand:!0},{action:"text-set-directionality-ltr-qa",searchOnly:!0},{action:"text-set-directionality-rtl-qa",searchOnly:!0}]},{separator:!0},{name:"spell-check-menu",flags:["design","whiteboard",R.QK],children:[(0,O.w)(),{separator:!0},...(0,O.n)()]},...(0,Q.eS)(r,"filemenu")]},{name:e_,flags:["edit","!dev_handoff"],children:[{action:"round-to-pixels",flags:["design"]},{separator:!0},{action:"align-left"},{action:"align-horizontal-center"},{action:"align-right"},{action:"align-top"},{action:"align-vertical-center"},{action:"align-bottom"},{separator:!0},{action:"tidy-up"},{separator:!0},{action:"pack-horizontal",flags:["design"]},{action:"pack-vertical",flags:["design"]},{separator:!0},{action:"distribute-horizontal-spacing"},{action:"distribute-vertical-spacing"},{separator:!0},{action:"distribute-left",flags:["design"]},{action:"distribute-horizontal-center",flags:["design"]},{action:"distribute-right",flags:["design"]},{action:"distribute-top",flags:["design"]},{action:"distribute-vertical-center",flags:["design"]},{action:"distribute-bottom",flags:["design"]}]},{name:em,flags:["edit","design","!dev_handoff"],children:[{action:"join-selection"},{action:"smooth-join-selection"},{action:"delete-and-heal-selection"}]},{separator:!0},...r?function(e){if(!e||!e.userCanRunPlugins)return[];let t=(0,Q.uY)(e,"filemenu");return t?[t]:[]}(r):[],...r&&r&&!r.isReadOnly?[(0,ee.aO)(r,"filemenu")]:[],{action:"browse-all-resources-modal",flags:["whiteboard","edit"],searchOnly:!0},{action:"set-tool-code-block",flags:["whiteboard","edit"],searchOnly:!0},{action:"set-tool-mindmap-tree-nucleus",flags:["whiteboard","edit"],featureFlags:["figjam_mindmaps_entry_enable"],searchOnly:!0},{name:eg,children:[{name:"dev-handoff-code-settings-language",flags:["dev_handoff","!limited_dev_mode"],children:(0,u.t)(a.V.getState().mirror.appModel)},{name:"dev-handoff-code-settings-unit",flags:["dev_handoff","!limited_dev_mode"],children:(0,u.X)(a.V.getState().mirror.appModel)},{separator:!0,flags:["dev_handoff","!limited_dev_mode"]},{action:"toggle-snapping-to-geometry",property:(0,S.tZ)().snapToGeometry,propertyValue:!0,flags:["edit","design"]},{action:"toggle-snapping-to-objects",property:(0,S.tZ)().snapToObjects,propertyValue:!0,flags:["edit","design"]},{action:"toggle-snapping-to-pixels",property:(0,S.tZ)().snapToPixelGrid,propertyValue:!0,flags:["edit","design"]},{action:"toggle-snapping-to-dots",property:(0,S.tZ)().snapToDotGrid,propertyValue:!0,flags:["edit","whiteboard"]},{separator:!0,flags:["edit"]},{action:"toggle-sticky-tools",property:(0,S.tZ)().stickyTools,propertyValue:!0,flags:["design","dev_handoff"],hideForQuickCommand:!0},{action:"disable-pinch-zoom-fix",property:(0,S.tZ)().disablePinchZoomFix,propertyValue:!0,platforms:["windows"],hideForQuickCommand:!0},{action:"toggle-layer-hover",property:(0,S.tZ)().layerHover,propertyValue:!0,flags:["design","dev_handoff"],hideForQuickCommand:!0},{action:"toggle-copy-renaming",property:(0,S.tZ)().copyRenaming,propertyValue:!0,flags:["edit","design"],hideForQuickCommand:!0},{action:"toggle-annotations",property:(0,S.tZ)().renderAnnotations,propertyValue:!0,flags:["design"],hideForQuickCommand:!0},{action:"toggle-viewport-overlay-hiding",property:(0,S.tZ)().temporarilyHideViewportOverlay,propertyValue:!0,flags:["design"],hideForQuickCommand:!0},{action:"toggle-smart-quotes",property:(0,S.tZ)().smartQuotes,propertyValue:!0,flags:["edit","design"],hideForQuickCommand:!0},{action:"toggle-flip-during-resize",property:(0,S.tZ)().flipDuringResize,propertyValue:!0,flags:["edit","design"],hideForQuickCommand:!0},{separator:!0,flags:["edit","whiteboard"]},{action:"toggle-keyboard-zoom-to-selection",property:(0,S.tZ)().keyboardZoomToSelection,propertyValue:!0,hideForQuickCommand:!0},{action:"toggle-invert-zoom",property:(0,S.tZ)().invertZoom,propertyValue:!0,hideForQuickCommand:!0},{action:"toggle-ctrl-click-context-menu",property:(0,S.tZ)().ctrlClickContextMenu,propertyValue:!0,hideForQuickCommand:!0},{separator:!0,flags:["edit","whiteboard"]},{action:"toggle-cursor-high-five-wiggle",property:(0,S.tZ)().cursorHighFiveWiggle,propertyValue:!0,flags:["whiteboard"],hideForQuickCommand:!0},{action:"toggle-use-numbers-for-opacity",property:w.O$1.editorState().useNumbersForOpacity,propertyValue:!0,flags:["edit","design"],hideForQuickCommand:!0},{action:"toggle-use-old-outline-shortcuts",property:(0,S.tZ)().useOldOutlineShortcuts,propertyValue:!0,featureFlags:["ce_outline_mode_shortcut_pref"],flags:["design","dev_handoff"],hideForQuickCommand:!0},{name:"open-links-in-desktop-app",get checked(){return x.A.isAutoOpenEnabled()},callback:()=>{x.A.toggleAutoOpen()},flags:["!desktop"],get platforms(){return x.A.shouldShowOnce()?[]:["mac","windows"]}},{name:"show-templates-for-new-figjam-files",get checked(){return!(0,X.U)()},callback:(e,t,r)=>{r((0,X.$)({hide:!(0,X.U)(),triggeredFrom:"fullscreen_menu"}))},flags:["whiteboard"]},{separator:!0,featureFlags:["figjam_navigation_mode","navigation_mode_scroll_to_pref"],platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",featureFlags:["figjam_navigation_mode","navigation_mode_scroll_to_pref"],platforms:["!ipad"],hideForQuickCommand:c.ZP.isIpad,"data-onboarding-key":K.z4.ZOOM,property:(0,S.tZ)().scrollWheelZoom,propertyValue:!0},{action:"toggle-right-click-pan",featureFlags:["figjam_navigation_mode","navigation_mode_scroll_to_pref"],platforms:["!ipad"],hideForQuickCommand:c.ZP.isIpad,"data-onboarding-key":K.z4.PAN,property:(0,S.tZ)().rightClickPan,propertyValue:!0},{separator:!0,featureFlags:["figjam_navigation_mode","navigation_mode_scroll_to_pref"],platforms:["!ipad"],flags:["!edit"]},{separator:!0,flags:["edit"]},{separator:!0,flags:["dev_handoff"]},{name:"theme-menu-option",flags:["design","dev_handoff",R.QK],children:(0,P.GJ)(er)},...(0,N.g)(),(0,H.GB)(),...(0,s.bc)(),{name:"accessibility-settings",flags:["whiteboard"],callback:(e,t,r)=>{r((0,_.K4)({type:M.F}))}},{action:"show-nudge-amount-picker",flags:["edit","design"]}]},{action:"open-preferences-modal",flags:["design"]},{separator:!0},{get name(){return I.Gr.getDesktopAppMenuItemName()},callback:e=>I.Gr.handleDesktopAppMenuItem(e),flags:["!desktop"],platforms:["mac","windows"]},{name:ef,children:[{action:"open-help",iconType:"external_link"},{action:"open-shortcuts"},{action:"open-support-forum",iconType:"external_link"},{action:"open-tutorials",iconType:"external_link"},{action:"open-release-notes",iconType:"external_link"},{action:"open-font-settings",flags:["!desktop","!integration","design"],iconType:"external_link"},{separator:!0},{name:"troubleshooting-menu",flags:["desktop_os_menu"]},{separator:!0},{action:"open-legal-summary",iconType:"external_link"},{action:"open-account-settings",flags:["!integration"],iconType:"external_link"},{name:"sign-out",flags:["!integration"],callback:(e,t,r)=>{r(f.HX())},hideForQuickCommand:!0}]},{action:"set-tool-arrow",flags:["design"],searchOnly:!0},{action:"set-tool-default",flags:["design"],searchOnly:!0},{action:"set-tool-default-figjam",flags:["whiteboard"],searchOnly:!0},{action:"set-tool-hand",searchOnly:!0},{action:"set-tool-comments",searchOnly:!0,disabled:c.ZP.isIpadNative},{action:"spotlight-me",searchOnly:!0},{action:"follow-presenter",searchOnly:!0},...J.C,{action:"restore-autolayout-position",flags:["design"],searchOnly:!0,isLowPriorityMatch:!0},{action:"republish-selected-components",flags:["design"],searchOnly:!0},{action:"component-insert",flags:["design"],searchOnly:!0},{action:"republish-auto-layout-components",flags:["design"],searchOnly:!0,isLowPriorityMatch:!0},{action:"select-broken-fixed-scrolling-nodes",flags:["design"],searchOnly:!0,isLowPriorityMatch:!0},{action:"text-relayout",searchOnly:!0,isLowPriorityMatch:!0},{action:"disable-all-unframed-masks",flags:["whiteboard"],searchOnly:!0},{action:"resize-to-fit",flags:["design"],searchOnly:!0},{action:"toggle-frame-clipping",flags:["design"],searchOnly:!0},{action:"set-tool-bend",flags:["edit","design"],searchOnly:!0},{action:"set-tool-ellipse",flags:["edit","design"],searchOnly:!0},{action:"set-tool-frame",flags:["edit","design"],searchOnly:!0},{action:"set-tool-line",flags:["edit","design"],searchOnly:!0},{action:"set-tool-paint-bucket",flags:["edit"],searchOnly:!0},{action:"set-tool-pen",flags:["edit","design"],searchOnly:!0},{action:"set-tool-pencil",flags:["edit","design"],searchOnly:!0},{name:"set-tool-marker",shortcutText:"M",callback:()=>{I.Gr.triggerAction("set-tool-pencil")},flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-rectangle",flags:["edit","design"],searchOnly:!0},{action:"set-tool-regular-polygon",flags:["edit","design"],searchOnly:!0},{action:"set-tool-scale",flags:["edit","design"],searchOnly:!0},{action:"set-tool-slice",flags:["edit","design"],searchOnly:!0},{action:"set-tool-star",flags:["edit","design"],searchOnly:!0},{action:"set-tool-sticky",flags:["edit","whiteboard"],searchOnly:!0},{name:"set-tool-stamp",flags:["edit","whiteboard"],searchOnly:!0,callback:(e,t,r)=>{(0,Y.pk)({source:"quick-actions"})}},{action:"set-tool-connector-elbowed",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-connector-straight",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-square",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-ellipse",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-diamond",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-triangle-up",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-triangle-down",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-shape-whiteboard-rounded-rectangle",flags:["edit","whiteboard"],searchOnly:!0},{action:"set-tool-type",flags:["edit"],searchOnly:!0},{action:"set-tool-eraser",flags:["whiteboard"],searchOnly:!0},{action:"set-tool-highlighter",flags:["whiteboard"],searchOnly:!0},{action:"toggle-custom-cursor",flags:["whiteboard"],featureFlags:["multiplayer_figjam_fun_cursors"],searchOnly:!0},{action:"set-tool-washi-tape",flags:["edit","whiteboard"],searchOnly:!0},{action:"sort-by-text-content",flags:["edit","whiteboard"],searchOnly:!0,featureFlags:["figjam_sort_by"]},{action:"sort-by-stamps",flags:["edit","whiteboard"],searchOnly:!0,featureFlags:["figjam_sort_by"]},{action:"sort-by-color",flags:["edit","whiteboard"],searchOnly:!0,featureFlags:["figjam_sort_by"]},{action:"sort-by-author",flags:["edit","whiteboard"],searchOnly:!0,featureFlags:["figjam_sort_by"]},{action:"set-tool-table",flags:["edit","whiteboard"],searchOnly:!0},{action:"open-timer",flags:["whiteboard"],searchOnly:!0,callback:()=>{l.n_.set(j.hr,{type:"OPEN"}),(0,n.L9)($.h1.OPEN,{source:$._i.QUICK_ACTIONS}),(0,q.K)(()=>{l.n_.set(j.hr,{type:"CLOSE"})})}},{action:"toggle-help-widget",searchOnly:!0,property:(0,S.tZ)().hideHelpWidget,propertyValue:!0},{action:"toggle-multiplayer-cursors",searchOnly:!0,property:"hideMultiplayerCursors",propertyValue:!1},{action:"unlock-all",flags:["edit"],searchOnly:!0},{action:"unhide-all",flags:["edit","design"],searchOnly:!0},{action:"toggle-library",flags:["edit"],searchOnly:!0},{action:"crop-image",flags:["edit"],searchOnly:!0},{action:"reset-transform",flags:["edit","design","whiteboard",R.QK],searchOnly:!0,isLowPriorityMatch:!0},{action:"copy-link",flags:["edit","design","whiteboard",R.QK],searchOnly:!0},{name:"report-issue",featureFlags:["bug_reporter"],callback:(e,t,r)=>{r((0,_.K4)({type:V.vn,data:{},showModalsBeneath:!0}))},searchOnly:!0},{name:"set-commit-sha",featureFlags:["set_frontend_commit_sha"],callback:(e,t,r)=>{r((0,_.K4)({type:z.oY,data:{},showModalsBeneath:!0}))},searchOnly:!0},{name:"debug-menu",flags:(0,o.BZ)().internal_only_debug_tools?[]:["!ship"],children:[{name:"restart-desktop-app-color-space-managed",featureFlags:["ee_color_management_debug"],flags:["desktop"],callback:()=>{var e;return null==(e=i.YO)?void 0:e.setDesktopColorSpaceAndRestart("managed")}},{name:"restart-desktop-app-color-space-unmanaged",featureFlags:["ee_color_management_debug"],flags:["desktop"],callback:()=>{var e;return null==(e=i.YO)?void 0:e.setDesktopColorSpaceAndRestart("unmanaged")}},{action:"add-default-cell-styles-to-tables",searchOnly:!0},{action:"toggle-memory-usage-indicator",property:w.O$1.uiState().showMemoryUsage,flags:["design"],propertyValue:!0},{name:"download-memory-profile",featureFlags:["memory_profiling_local"],callback:async()=>{window.MemoryDebug&&await window.MemoryDebug.downloadPprof(),alert("Profile downloaded!")}},{action:"toggle-resource-use",property:w.O$1.uiState().renderResourceUse,propertyValue:!0},{action:"debug-toggle-show-canvas-axis",property:w.O$1.uiState().showCanvasXYAxis,propertyValue:!0,featureFlags:["internal_only_debug_tools"]},{action:"debug-toggle-show-mouse-position",property:w.O$1.uiState().showMousePosition,propertyValue:!0,featureFlags:["internal_only_debug_tools"]},{action:"debug-selection"},{action:"change-document-color-profile-to-display-p3",displayForQuickCommand:"change-document-color-profile-to-display-p3-quick-action"},{action:"change-document-color-profile-to-srgb",displayForQuickCommand:"change-document-color-profile-to-srgb-quick-action"},{action:"assign-document-color-profile-legacy",displayForQuickCommand:"assign-document-color-profile-legacy-quick-action",featureFlags:["ee_color_management_debug"]},{action:"toggle-recording-interactions"},{action:"toggle-perf-hud"},{action:"toggle-fake-mp-activity"},{action:"toggle-tsmer-config"},{action:"toggle-debug-doc-sync-logs",isLowPriorityMatch:!0},{action:"toggle-debug-user-sync-logs",isLowPriorityMatch:!0},{action:"debug-incremental-loading-all-pages",isLowPriorityMatch:!0},{action:"debug-incremental-loading-current-only",isLowPriorityMatch:!0},{action:"toggle-debug-layout-logs",isLowPriorityMatch:!0},{action:"toggle-show-guids",property:(0,S.tZ)().showGuids,propertyValue:!0,isLowPriorityMatch:!0},{action:"debug-toggle-figma-scope",property:(0,S.tZ)().showFigmaScope,propertyValue:!0,isLowPriorityMatch:!0,featureFlags:["internal_only_debug_tools"]},{action:"debug-print-as-test-code",isLowPriorityMatch:!0},{action:"debug-print-vector-network-as-test-code",isLowPriorityMatch:!0},{action:"force-publish-state-group",isLowPriorityMatch:!0,featureFlags:["ds_force_publish_cmd"]},{action:"toggle-canvas-search-debug",property:(0,S.tZ)().canvasSearchDebug,propertyValue:!0,isLowPriorityMatch:!0},{action:"toggle-accessibility-dom-debug",property:(0,S.tZ)().accessibilityDomDebug,flags:["whiteboard"],propertyValue:!0,isLowPriorityMatch:!0},{action:"toggle-show-quick-command-rank-debug",property:(0,S.tZ)().showQuickCommandRankDebug,propertyValue:!0},{action:"toggle-show-immutable-frame-sublayers",flags:["design"],property:(0,S.tZ)().showImmutableFrameSublayers,propertyValue:!0},{action:"toggle-force-publish-flattened",property:"forcePublishFlattened",propertyValue:!0},{action:"toggle-pen-tool-avoid-single-handles",property:(0,S.tZ)().penToolAvoidSingleHandles,propertyValue:!0},{action:"purge-all-memory",isLowPriorityMatch:!0},{action:"export-for-framer",flags:["design"]},{action:"simulate-back-to-files",flags:["!integration"]},{action:"test-multiplayer-upgrade"},{action:"test-multiplayer-reject-too-old"},{action:"test-multiplayer-reject-invalid-permissions"},{action:"test-multiplayer-reject-not-logged-in"},{action:"test-multiplayer-reject-too-many-connections"},{action:"download-webgl-trace",featureFlags:["webgl_recorder"]},{action:"print-render-tree"},{action:"print-image-diagnostics"},{action:"test-action"},{name:"set-missing-font",callback:()=>I.Gr.dispatch(_.bF({type:W.P,data:{}}))},{name:"detach-multiplayer",callback:(e,t,r)=>{(0,C.nH)()}},{name:"reattach-multiplayer",callback:(e,t,r)=>{(0,C.jn)()}},{name:"abandon-reattach",callback:(e,t,r)=>{(0,C.Cj)()}},{action:"reflow-immutable-frames",searchOnly:!0},{action:"swap-nodes",searchOnly:!0,featureFlags:["ce_swap_nodes"]},{action:"toggle-overlay-ui-rendering",property:(0,T.Y)().overlayUiRendering,propertyValue:!0,isLowPriorityMatch:!0},{action:"toggle-allow-time-sliced-edit-rendering-optimization",property:(0,T.Y)().allowTimeSlicedEditRenderingOptimization,flags:["whiteboard"],propertyValue:!0,isLowPriorityMatch:!0},{action:"toggle-sync-cursor-rendering",property:(0,T.Y)().syncCursorRenderingToSceneGraph,flags:["whiteboard"],propertyValue:!0,isLowPriorityMatch:!0},{name:"apply-palette-to-selection",callback:Z.B0,flags:["whiteboard"],isLowPriorityMatch:!0},{action:"similar-includes-matching",flags:["design"],featureFlags:["ce_multi_edit"],property:(0,S.tZ)().similarIncludesMatching,propertyValue:!0},{action:"toggle-similar-highlights",flags:["design"],featureFlags:["ce_multi_edit"],property:(0,S.tZ)().toggleSimilarHighlights},{action:"toggle-selection-mode",featureFlags:["ce_multi_edit"],property:(0,S.tZ)().useMultiEditSelectionBehavior,propertyValue:!0},{name:"toggle-figment-debugger",searchOnly:!0,featureFlags:["figment_debugger"],callback:F.jW},{action:"debug-toggle-diagram-layout-paused",featureFlags:["figjam_mindmaps_behavior_enable"],searchOnly:!0},{action:"publish-slides-theme",flags:["slides"],featureFlags:["piper"]},{action:"publish-slides-template",flags:["slides"],featureFlags:["piper","dse_editor_templates_v1"]},{action:"test-independent-layer-animation",featureFlags:["fullscreen_flanimations"]},{action:"test-independent-layer-animation-eased",featureFlags:["fullscreen_flanimations"]},{action:"test-independent-layer-animation-opacity",featureFlags:["fullscreen_flanimations"]},{name:"test-typescript-independent-layer-animation",featureFlags:["fullscreen_flanimations"],callback:A.U},{action:"test-non-independent-layer-animation",featureFlags:["fullscreen_flanimations"]},{action:"toggle-noodles-without-dragging",property:(0,S.tZ)().toggleNoodlesWithoutDragging,featureFlags:["prototype_on_canvas_improvements"],searchOnly:!0,propertyValue:!0},...et||[]]},{action:"select-all-text",flags:["design"],searchOnly:!0},{action:"select-parent",searchOnly:!0},{action:"select-child",searchOnly:!0},{action:"select-next-sibling",flags:["design"],searchOnly:!0},{action:"select-previous-sibling",flags:["design"],searchOnly:!0},{action:"rename-selection",flags:["design"],searchOnly:!0},{action:"set-opacity-1",flags:["design"],searchOnly:!0},{action:"set-opacity-5",flags:["design"],searchOnly:!0},{action:"set-opacity-0",flags:["design"],searchOnly:!0},{action:"unstack-selection",flags:["design"],searchOnly:!0},{action:"create-multiple-symbols",flags:["design"],searchOnly:!0},{action:"create-multiple-symbols-and-state-group",flags:["design"],searchOnly:!0},{action:"publish-selection",flags:["design"],searchOnly:!0},{action:"publish-changes-to-library",flags:["design"],searchOnly:!0},{action:"reset-variable-modes",flags:["design"],searchOnly:!0},{action:"detach-deleted-variables",flags:["design"],searchOnly:!0},{action:"back-to-files",callback:(e,t,r)=>{r(h.CJ())},searchOnly:!0,flags:["!desktop","!integration"]},{action:"present-as-prototype",searchOnly:!0,flags:["design","dev_handoff"]},{action:"toggle-inline-preview",searchOnly:!0,flags:["design","dev_handoff"]},{action:"present-slides-audience-view",searchOnly:!0,flags:[R.QK]},{action:"present-slides-presenter-view",searchOnly:!0,flags:[R.QK]},{action:"simplify-selected-instance-panels",callback:(e,t,r)=>{w.iTB.setSimplifyInstancePanels(!0)},searchOnly:!0,flags:["edit","design"]},{name:"component-search",callback:()=>{},featureFlags:["dse_quick_action_comp_search"],searchOnly:!0,quickActionsViewOnSelect:B.t},{name:"check-network-compatibility",callback:(e,t,r)=>(0,G.Ae)(r),featureFlags:["ds_network_status_ui"]}]}},478498:(e,t,r)=>{r.d(t,{Df:()=>ei,F2:()=>ea,Gy:()=>es,Mq:()=>Q,_A:()=>J,eS:()=>eo,of:()=>ec,rJ:()=>er,uY:()=>ed});var n=r(570738),i=r(600486),a=r(46347),o=r(269658),l=r(448501),s=r(716250),c=r(372871),d=r(337167),u=r(286206),p=r(117986);r(361763);var m=r(970740),h=r(644383),_=r(289629),g=r(944731),f=r(648183),E=r(819190),y=r(533537),v=r(513289),b=r(721127),I=r(238809),T=r(241239),w=r(936561),S=r(574620),C=r(158774),O=r(640723),A=r(662507),N=r(601186),L=r(34258),P=r(365788),R=r(155838),k=r(733609),D=r(339531),M=r(179791),F=r(164179),x=r(390253),U=r(646472),B=r(465883),V=r(661539),G=r(608715),H=r(641455),W=r(128322),K=r(667740),z=r(312603),Z=r(255267),Y=r(835409),j=r(592035),$=r(692379);let q=console.error,X=(0,R.D)();function J(e,t){if(!e||!t)return;let r=e.map(e=>({type:"plugin-parameter",name:e.name,key:e.key,valueType:"string",description:e.description,optional:e.optional,allowFreeform:e.allowFreeform}));return{type:"parameter-entry",parameters:r,commandName:t}}function Q(e,t){return e.map(e=>{if((0,V.i)(e))return{type:"submenu",name:e.name,submenu:Q(e.menu,t)};if((0,V.Eq)(e))return{type:"separator"};if((0,V.nT)(e)){let r=J(e.parameters,e.name),n="pluginId"in t?{type:"run-installed-plugin",pluginId:t.pluginId,command:e.command,parameterOnly:e.parameters&&!1!==e.parameterOnly,parameterEntry:r}:{type:"run-local-plugin",localFileId:t.localFileId,command:e.command,parameterOnly:e.parameters&&!1!==e.parameterOnly,parameterEntry:r};return{type:"run-menu-action",name:{type:"plugin-name",plugin:e.name},menuAction:n}}(0,a.vE)(e)})}function ee(e){let t=function(e){var t;let r=Object.values(e.installedPluginVersions).filter(e=>"user"===e.installed_by);(null==(t=e.org)?void 0:t.plugins_whitelist_enforced)&&(r=r.filter(t=>{var r;return null==(r=e.pluginAllowlist)?void 0:r[t.plugin_id]}));let n=en(r,e);return er(n)}(e);return 0===t.length?[]:[{type:"submenu",name:(0,m.t)("fullscreen_actions.plugins-menu-saved-plugins"),submenu:t}]}let et={showUnpurchased:!0};function er(e){return[...e].sort((e,t)=>new Intl.Collator().compare(n.Ao.nameOfMenuItem(e),n.Ao.nameOfMenuItem(t)))}function en(e,t,r){let{publishedPlugins:n,orgEntity:i,isReadOnly:a}=t;r??(r=et);let l=o.V.getState(),s=(0,k.canRunPlugins)(l),c=[];if(!s)return c;for(let o of e)if(!((0,V.rV)(o)||(0,D.vS)(o)&&(0,D.MK)(o)))try{let e=n[o.plugin_id];if((0,U.vu)(e)&&(0,w.Qc)(e)){if(!r.showUnpurchased)continue;c.push({type:"run-menu-action",name:{type:"plugin-name",plugin:o.name},menuAction:{type:"unpurchased-plugin"},rightText:(0,_.rD)(e.monetized_resource_metadata),requiresPurchase:!0,isWidget:e.is_widget,pluginId:e.id});continue}let l=(0,D.PB)({plugin:o,publishedPlugins:n,orgEntity:i,editorType:t.editorType});if(!l)continue;let s=a&&!(0,D.vS)(o);if(!o.manifest.menu||0===o.manifest.menu.length||s){let e=J(o.manifest.parameters,o.name),r=t.currentPlugin&&(0,D.Xl)(o,t.currentPlugin);c.push({type:"run-menu-action",name:{type:"plugin-name",plugin:o.name},menuAction:{type:"run-installed-plugin",pluginId:o.plugin_id,command:void 0,parameterEntry:e,parameterOnly:o.manifest.parameters&&!1!==o.manifest.parameterOnly},disabled:s,checked:r})}else{let e=Q(o.manifest.menu,{pluginId:o.plugin_id});c.push({type:"submenu",name:o.name,submenu:e})}}catch(e){(0,u.Jz)(p.k.EXTENSIBILITY,e)}return c}function ei({nameStringKey:e,menuAction:t,disabled:r,property:n,propertyValue:i,iconType:a}){return{type:"run-menu-action",name:{type:"string-key",key:e,string:(0,T.K)(e)},menuAction:t,disabled:r,property:n,propertyValue:i,iconType:a}}function ea(e){var t;let r=[],n=!!e.isReadOnly,i=o.V.getState(),a=(0,k.canRunPlugins)(i),l="dev_handoff"===e.editorType,c=(0,M.BW)();if((0,K.UO)(i.mirror.appModel.activeCanvasEditModeType))return[];let d=[];if(n&&a&&!l)d=ee(e),r.push(...d);else if(!n||l){d=ee(e);let t=function(e){let t=e.recentlyUsedPlugins;if(!t||0===t.length)return[];let r=en(t,e,{showUnpurchased:!1}).slice(0,Y.Ty);return r.length>0&&!e.hideRecentsHeader&&r.unshift({type:"header",name:(0,m.t)("fullscreen_actions.recents")}),r}(e);r.push(...t),t.length>0&&r.push({type:"separator"}),r.push(ei({nameStringKey:"plugins-run-last",menuAction:{type:"run-last"},disabled:!(0,D.Le)(c)})),d.length>0&&r.push({type:"separator"}),r.push(...d)}else r.push(ei({nameStringKey:"plugins-menu-view-only",menuAction:{type:"manage-plugins"},disabled:!0}));let u=[];return e.org&&(u=function(e){let t=Object.values(e.orgSavedPlugins||{}).filter(e=>!(0,V.$M)(e)),r=e.orgPrivatePlugins?e.orgPrivatePlugins:[],n=[];for(let e of r)n.push((0,D.hb)(e));let i=[];if(n.length>0){let t=er(en(n,e));i.push(...t)}if(i.length>0&&i.push({type:"separator"}),t.length>0){let r=er(en(t,e));i.push(...r)}return i}(e)).length>0&&(0===d.length&&r.push({type:"separator"}),r.push({type:"submenu",name:(0,m.t)("whiteboard.inserts.plugin_from_org",{orgName:(null==(t=e.org)?void 0:t.name)||"your org"}),submenu:u})),X&&a&&(0===u.length&&d.length>0&&r.push({type:"separator"}),r.push({type:"submenu",name:(0,m.t)("widgets.development"),submenu:function(e){let t=function(e){let{localExtensions:t,publishedPlugins:r,orgEntity:n,isReadOnly:i,editorType:a}=e,l=o.V.getState(),s=(0,k.canRunPlugins)(l),c=[],d="dev_handoff"===a;if(!s)return c;for(let a in t){let o=+a,l=t[a],s=(0,D.PB)({plugin:l,publishedPlugins:r,orgEntity:n});if(!s)continue;let u=l.error;(null==u?void 0:u.text)===(0,D.or)()&&(u=void 0);let p=(0,D.yy)(l);if(!(!(0,D.vS)(l)&&(i||d)||(0,D.vS)(l)&&(0,D.MK)(l))){if(u){let e="LOAD"===u.type;c.push({type:"submenu",name:p,submenu:[ei({nameStringKey:e?"plugins-menu-plugin-missing":"plugins-menu-manifest-issue",menuAction:{type:"toggle-console"},disabled:!0}),ei({nameStringKey:"plugins-menu-show-error",menuAction:{type:"toggle-console",showError:(0,V.KA)(u)},disabled:e}),ei({nameStringKey:(0,D.Ls)(),menuAction:{type:"open-dir",localFileId:o},disabled:e})]});continue}if(l.manifest.menu&&0!==l.manifest.menu.length)c.push({type:"submenu",name:p,submenu:Q(l.manifest.menu,{localFileId:o})});else{let t=J(l.manifest.parameters,l.name),r=e.currentPlugin&&(0,D.Xl)(l,e.currentPlugin);c.push({type:"run-menu-action",name:{type:"plugin-name",plugin:p},menuAction:{type:"run-local-plugin",localFileId:o,command:void 0,parameterEntry:t,parameterOnly:l.manifest.parameters&&!1!==l.manifest.parameterOnly},checked:r})}}}return er(c)}(e),r=Object.values(e.localExtensions).some(e=>!(0,V.gX)(e));return r&&t.push(eu()),t.length>0&&t.push({type:"separator"}),t.push(ei({nameStringKey:"plugins-menu-dev-create-new",menuAction:{type:"create-new-plugin"}})),t.push(ei({nameStringKey:"plugins-menu-dev-import-from-manifest",menuAction:{type:"import-plugin-from-manifest"}})),t.push({type:"separator"}),t.push(ei({nameStringKey:"plugins-menu-view-documentation",menuAction:{type:"view-api-docs"},iconType:"external_link"})),t.push(ei({nameStringKey:"plugins-menu-toggle-console",menuAction:{type:"toggle-console"}})),t.push(ei({nameStringKey:"plugins-menu-dev-toggle-realms",menuAction:{actualTypeForBackwardsCompatibility:"toggle-realms",type:"toggle-console"},property:"useRealmsForPluginDev",propertyValue:!0})),t.push(ei({nameStringKey:"plugins-menu-dev-toggle-hot-reload",menuAction:{type:"toggle-hot-reload-plugin-dev"},property:"hotReloadPluginDev",propertyValue:!0})),(0,s.BZ)().plugins_related_links_local&&X&&t.push(ei({nameStringKey:"plugins-menu-use-local-related-link-plugin",menuAction:{type:"toggle-use-local-related-link-plugin"},property:"useLocalRelatedLinkPlugin",propertyValue:!0})),t}(e)})),(!n||l)&&(r.push({type:"separator"}),r.push(ei({nameStringKey:"browse-plugins",menuAction:{type:"browse-plugins"}}))),r}function eo(e,t){if(!e)return[];let r=function(e){var t,r;let n=new Map,{activeTextReviewPlugin:i}=e;for(let r of[...Object.values(e.installedPluginVersions),...Object.values(e.recentlyUsedPlugins??{})])(null==(t=r.manifest.capabilities)?void 0:t.some(e=>"textreview"===e))&&!n.has(r.plugin_id)&&!(0,V.rV)(r)&&n.set(r.plugin_id,r);for(let t of Object.values(e.localExtensions))(null==(r=t.manifest.capabilities)?void 0:r.some(e=>"textreview"===e))&&!n.has(t.localFileId)&&n.set(t.localFileId,t);if(!n.size)return null;let a=Array.from(n.values(),e=>({type:"run-menu-action",name:{type:"plugin-name",plugin:(0,V.rV)(e)?`(dev) ${e.name}`:e.name},menuAction:{type:"set-text-review-plugin",textReviewPluginInfo:(0,V.rV)(e)?{type:"local",localFileId:e.localFileId}:{type:"published",pluginId:e.plugin_id}},checked:(0,H.E)(i,e)}));return a.push({type:"run-menu-action",name:{type:"plugin-name",plugin:"None"},menuAction:{type:"set-text-review-plugin",textReviewPluginInfo:null},checked:!i}),{type:"submenu",name:"Text review plugins",submenu:a}}(e);return r?[ec(r,r=>()=>es(e,t,r))]:[]}function el(){C.Gr.dispatch(h.R.enqueue({message:"File must be fully loaded to run plugin.",type:"missing-file-key-to-run-plugin",error:!0}))}function es(e,t,r){var n,s;let{openFile:u,installedPluginVersions:p,localExtensions:m,orgEntity:h,publishedWidgets:_}=e,T=(0,D.Fl)();switch(r.type){case"insert-local-widget":{if(!u){el();return}let e=m[r.localFileId];e&&(0,L.A)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:""});return}case"insert-installed-widget":{let e=_[r.pluginId];if(e){let t=(0,D.hb)(e);(0,L.A)({pluginID:e.id,widgetName:t.name,pluginVersionID:t.id})}return}case"run-installed-plugin":case"run-local-plugin":{let n;if(r.parameterOnly&&r.parameterEntry){(0,z.To)(r,t,C.Gr.dispatch);return}if(!(n="run-installed-plugin"===r.type?function(e,t){let{installedPluginVersions:r,orgSavedPlugins:n,recentlyUsedPlugins:i,publishedPlugins:a}=t;if(r[e])return r[e];if(n&&n[e])return n[e];if(i&&(null==i?void 0:i.find(t=>t.plugin_id===e)))return i.find(t=>t.plugin_id===e);let o=a[e];return o?(0,D.hb)(o):void 0}(r.pluginId,{installedPluginVersions:e.installedPluginVersions,orgSavedPlugins:e.orgSavedPlugins,recentlyUsedPlugins:e.recentlyUsedPlugins,publishedPlugins:e.publishedPlugins}):m[r.localFileId])){console.error("Plugin not found");return}(0,D.PB)({plugin:n,publishedPlugins:{},orgEntity:h,installedPluginVersions:p,logErrorToConsole:!0})&&F.Q.instance.enqueue({mode:"run-forever",runPluginArgs:{plugin:n,command:r.command||"",queryMode:!1,runMode:"default",triggeredFrom:t,openFileKey:(null==u?void 0:u.key)||"",isWidget:!1}});return}case"set-text-review-plugin":(0,O.ox)(r.textReviewPluginInfo),N.dy.reset();return;case"run-last":C.Gr.triggerAction("plugins-run-last",{source:"menu"});return;case"manage-widgets":C.Gr.dispatch(v.SO({toolType:"widget"})),C.Gr.triggerAction("clear-tool",{source:"menu"}),C.Gr.dispatch(I.KD({initialX:0,initialY:0,initialTab:"figjam"===T?Z.E.WIDGETS:void 0,initialFdResourceTab:"figma"===T?j.P.WIDGET:void 0,initialFdView:"figma"===T?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===T}));return;case"manage-plugins":if("dev"===T||"inspect"===T){d.n_.set(f.X,f.w.PLUGIN),d.n_.set(g.cT,"development"),(null==(n=G.im.getInstance())?void 0:n.isInspectPanel)&&(0,x.Cq)();return}C.Gr.dispatch(v.SO({toolType:"plugin"})),C.Gr.triggerAction("clear-tool",{source:"menu"}),C.Gr.dispatch(I.KD({initialX:0,initialY:0,initialTab:"figjam"===T?Z.E.PLUGINS:void 0,initialFdResourceTab:"figma"===T?j.P.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===T,initialFdView:"figma"===T?"development":void 0}));return;case"browse":l.default.redirect("/community/plugins","_blank");return;case"browse-plugins":if((0,S.Vi)(),C.Gr.dispatch(v.SO({toolType:"plugin"})),C.Gr.triggerAction("clear-tool",{source:"menu"}),(0,i.L9)($.N0.FIND_MORE_PLUGINS,{isWidget:!1,triggeredFrom:t}),"dev"===T||"inspect"===T){d.n_.set(f.X,f.w.PLUGIN),d.n_.set(g.cT,"recents_and_saved"),(null==(s=G.im.getInstance())?void 0:s.isInspectPanel)&&(0,x.Cq)();return}C.Gr.dispatch(I.KD({initialX:0,initialY:0,initialTab:"figjam"===T?Z.E.PLUGINS:void 0,initialFdResourceTab:"figma"===T?j.P.PLUGIN:void 0,initialFdView:"figma"===T?"recents_and_saved":void 0}));return;case"select-all-widgets":C.Gr.triggerAction("select-all-widgets");return;case"browse-widgets":(0,S.Vi)(),C.Gr.dispatch(v.SO({toolType:"widget"})),C.Gr.triggerAction("clear-tool",{source:"menu"}),(0,i.L9)($.N0.FIND_MORE_PLUGINS,{isWidget:!0,triggeredFrom:t}),C.Gr.dispatch(I.KD({initialX:0,initialY:0,initialTab:"figjam"===T?Z.E.WIDGETS:void 0,initialFdResourceTab:"figma"===T?j.P.WIDGET:void 0}));return;case"set-widget-thumbnail":{if(!u){el();return}let e=A.b.instance.get(r.widgetId);if(!e)return;let t=(0,P.n)(e),n=URL.createObjectURL(t);o.V.dispatch((0,y.M)({localFileId:r.localFileId,publishedPluginId:r.widgetId,entryPoint:B.jS.EDITOR,localSnapshotUrl:n,localSnapshotBlob:t}));return}case"publish-widget":if(!u){el();return}o.V.dispatch((0,y.M)({localFileId:r.localFileId,publishedPluginId:r.widgetId,entryPoint:B.jS.EDITOR}));return;case"view-api-docs":{let e="https://www.figma.com/plugin-docs/api/api-reference/";(0,c.E)(e)||open(e,"_blank");return}case"create-new-plugin":C.Gr.dispatch((0,b.K4)({type:W.q,data:{resourceType:"plugin"}}));return;case"create-new-widget":C.Gr.dispatch((0,b.K4)({type:W.q,data:{resourceType:"widget"}}));return;case"import-widget-from-manifest":C.Gr.dispatch(E.kA({resourceType:"widget"}));return;case"import-plugin-from-manifest":C.Gr.dispatch(E.kA({resourceType:"plugin"}));return;case"open-console":case"toggle-console":if(!X)return;if("toggle-realms"===r.actualTypeForBackwardsCompatibility){C.Gr.triggerAction("toggle-use-realms-for-plugin-dev");return}X.toggleDevTools("bottom"),r.showError?q(r.showError):(0,i.L9)("Plugin Open Dev Tools");return;case"toggle-use-local-related-link-plugin":{if(!X)return;let e=o.V.getState().mirror.appModel.useLocalRelatedLinkPlugin;(0,O.FL)({useLocalRelatedLinkPlugin:!e});return}case"open-dir":if(!X)return;X.openExtensionDirectory(r.localFileId);return;case"unpurchased-plugin":return;case"toggle-hot-reload-plugin-dev":{let e=o.V.getState().mirror.appModel.hotReloadPluginDev;(0,O.FL)({hotReloadPluginDev:!e});return}default:(0,a.vE)(r)}}function ec(e,t){switch(e.type){case"run-menu-action":{let r="set-text-review-plugin"===e.menuAction.type;switch(e.name.type){case"string-key":return{name:e.name.key,callback:t(e.menuAction),disabled:e.disabled,property:e.property,propertyValue:e.propertyValue,hideForQuickCommand:r};case"plugin-name-string":return{name:e.name.key,args:{plugin_name:e.name.plugin},callback:t(e.menuAction),hideForQuickCommand:r};case"plugin-name":return{name:"plugins-menu-item",args:{plugin_name:e.name.plugin},callback:t(e.menuAction),disabled:e.disabled,checked:e.checked,visuallyDisabledWithSelection:e.requiresPurchase&&e.pluginId?()=>{var t,r;return t=!!e.isWidget,r=e.pluginId,void o.V.dispatch(h.R.enqueue({message:t?(0,m.t)("community.buyer.paid_widgets_cannot_be_added_to_the_canvas_before_purchase"):(0,m.t)("community.buyer.paid_plugins_cannot_be_run_before_purchase"),error:!0,button:{text:(0,m.t)("community.buyer.buy"),action:()=>{r&&o.V.dispatch(I.vq({id:r,isWidget:t}))}},type:t?"widget_requires_payment":"plugin_requires_payment"}))}:void 0,rightText:e.rightText,hideForQuickCommand:r};default:return(0,a.vE)(e.name)}}case"separator":return{separator:!0};case"header":return{header:!0,name:e.name};case"submenu":{let r=[];return e.submenu.forEach(e=>{r.push(ec(e,t))}),{name:"labeled-menu-item",args:{label:e.name},children:r}}default:(0,a.vE)(e)}}function ed(e,t){let r=r=>()=>es(e,t,r),n=ea(e),i=[];return n.forEach(e=>{i.push(ec(e,r))}),0===i.length?null:{name:"plugins-menu",children:i}}let eu=()=>ei({nameStringKey:"plugins-menu-manage-development",menuAction:{type:"manage-plugins"}})},329660:(e,t,r)=>{r.d(t,{$7:()=>p,$D:()=>W,$N:()=>E,CD:()=>u,E4:()=>y,H_:()=>P,Hw:()=>f,Jr:()=>H,Jz:()=>R,KU:()=>D,LL:()=>U,QT:()=>w,Su:()=>C,Tq:()=>A,Uh:()=>F,WK:()=>_,Y:()=>G,Y8:()=>T,ZV:()=>S,fn:()=>M,gI:()=>h,hU:()=>V,hy:()=>v,iV:()=>m,kt:()=>L,m8:()=>k,mA:()=>x,me:()=>I,of:()=>g,ok:()=>B,wF:()=>N,wr:()=>O});var n=r(269658),i=r(716250),a=r(571529),o=r(458324),l=r(322186),s=r(761767),c=r(220958),d=r(329660);function u({showExpAtMentionInvite:e,isDraftFile:t,isFigmaDesign:r,inOrg:n,isMobile:i}){return!t&&!i&&!!e&&!!r&&!n&&"variant"===(0,o.rm)("exp_at_mention_invited_users").getValue("treatment","")}let p=e=>{if((0,i.BZ)().exp_resource_refresh_embed_place)return!!e().getValue("show_second_embed",!1)};function m(e={}){let{signupSource:t,isEduVerified:r,isJamboardSignup:n}=e;return!r&&t!==s.gg.WHITEBOARD&&!n&&!!(0,i.BZ)().nux_dynamic_preview&&"variant"===(0,o.rm)("exp_nux_dynamic_preview").getValue("treatment","")}function h(){return!!(0,i.BZ)().alternate_payments}function _(){return!!(0,i.BZ)().alternate_payments}function g(){if(!(0,i.BZ)().exp_pro_user_move_draft_nudge)return!1;let e=(0,o.rm)("exp_pro_user_move_draft_nudge");return!!e.getValue("has_pro_user_move_draft_nudge",!1)}function f(e){return!!e&&d.of()}function E(e){if(e===s.gg.WHITEBOARD||!(0,i.BZ)().exp_required_signal_collection)return!1;let t=(0,o.rm)("exp_nux_required_signal_collection");return!!t.getValue("show_treatment",!1)}function y(){if(!(0,i.BZ)().exp_standardize_pro_entrypoints)return!1;let e=(0,o.rm)("exp_standardize_pro_entrypoints");return!!e.getValue("has_standardized_pro_entrypoints",!1)}function v({userId:e,teams:t,rolesByTeamId:r,getM0Config:n,getM1Config:a}){if(!(0,i.BZ)().close_starter_team_loophole||!_())return!1;let o=b(e,t,r);return 0!==o&&(1===o?n().get("should_block_second_starter_team",!1):a().get("should_block_more_than_one_starter_team",!1))}function b(e,t,r){let n=0,i={};for(let a of(t.forEach(e=>i[e.id]=e),Object.keys(r))){let t=i[a],o=r[a][e];t&&o&&o.level===c.V.OWNER&&t.starter_team&&!t.org_team&&!t.student_team&&null===t.subscription&&null===t.deleted_at&&n++}return n}function I(e,t,r){if(!(0,i.BZ)().close_starter_team_loophole)return!1;let n=b(e,t,r);return 0===n&&(0,i.BZ)().close_starter_loophole_team_one}function T(e,t){return!!e&&(!(0,i.BZ)().ps_benchmark||!t)}function w(e){if(e)return!1;let t=(0,o.rm)("exp_desktop_download_prompts");return!!t.getValue("should_show_desktop_modal_prompt",!1)}function S(){return!!((0,i.BZ)().exp_mobile_web_nux&&(0,a.dB)())&&"variant"===(0,o.rm)("exp_mobile_web_nux_v2").getValue("treatment","")}function C(){return!!((0,i.BZ)().exp_mobile_web_nux&&a.tS)}function O(){return!!((0,i.BZ)().exp_mobile_web_signal_nux&&(0,a.dB)())&&"variant"===(0,o.rm)("exp_mobile_web_signal_nux").getValue("treatment","")}function A(){return!!(0,i.BZ)().exp_collective_upsells&&!!(0,o.rm)("exp_collective_upsells").getValue("isVariant",!1)}function N(){let e=(0,o.rm)("exp_adv_prototyping_upsell");return!!e.getValue("showUpsell",!1)}function L(){let e=(0,o.rm)("exp_pro_tier_onboarding");return!!e.getValue("show_pro_onboarding",!1)}function P(){let e=(0,o.rm)("edit_request_modal_no_checkbox");return!!e.getValue("hide_checkbox",!1)}function R(){let e=(0,o.rm)("exp_pro_viewer_to_editor_v1");return!!e.getValue("show_viewer_editor_nudge",!1)}function k(){let e=(0,o.rm)("exp_org_viewer_to_editor_v1");return!!e.getValue("show_viewer_editor_nudge",!1)}let D=()=>(0,o.rm)("exp_churn_friction_value_v1").get("isVariant",!1),M=()=>{let{getConfig:e}=(0,o.it)("exp_plugins_in_onboarding"),t=(0,l.Ng)();return!t&&!!(0,i.BZ)().exp_plugins_in_onboarding&&"variant"===e().getValue("treatment","control")},F=()=>{let{getConfig:e}=(0,o.it)("exp_single_editor_copy_changes_v1");return!!e().getValue("show_variant_ui",!1)},x=()=>(0,o.rm)("exp_single_editor_copy_changes_v1").get("show_variant_ui",!1),U=e=>{let{getConfig:t}=(0,o.it)("exp_admin_requests_dashboard_orgs");return!!(0,i.BZ)().admin_requests_dashboard&&!!(0,i.BZ)().admin_requests_dashboard_orgs&&!!e&&!!t().getValue("isVariant",!1)},B=e=>{let{getConfig:t}=(0,o.it)("exp_admin_requests_dashboard_teams");return!!(0,i.BZ)().admin_requests_dashboard&&!!(0,i.BZ)().admin_requests_dashboard_teams&&!!e&&(!!(0,i.BZ)().ps_benchmark||!!t().getValue("isVariant",!1))},V=e=>!!(0,i.BZ)().admin_requests_dashboard&&!!(0,i.BZ)().admin_requests_dashboard_teams&&!!e&&(!!(0,i.BZ)().ps_benchmark||(0,o.rm)("exp_admin_requests_dashboard_teams").get("isVariant",!1)),G=(e,t)=>!!t.subscription&&!t.org_team&&e().get("hide_toolbar_request_cta",!1),H=e=>e().get("hide_toolbar_request_cta",!1),W=()=>{var e;if(!n.V)return!1;let t=n.V.getState(),r=null==(e=t.user)?void 0:e.created_at,i=!r||new Date(r)>=new Date("2024-02-06");return i}},11802:(e,t,r)=>{r.d(t,{AC:()=>F,Ab:()=>V,Bm:()=>Y,FJ:()=>I,Il:()=>T,JY:()=>v,Jh:()=>W,LO:()=>R,NL:()=>K,OI:()=>C,Qt:()=>L,Rj:()=>_,SK:()=>U,TU:()=>E,Tu:()=>Z,V3:()=>x,Vf:()=>S,Wn:()=>y,eg:()=>f,f0:()=>g,kt:()=>B,lR:()=>H,ri:()=>P,s8:()=>k,sp:()=>h,t$:()=>D,tf:()=>O,uM:()=>z,uj:()=>A,xe:()=>b,xz:()=>M,y$:()=>G});var n,i,a=r(220518),o=r(269658),l=r(716250),s=r(458324),c=r(955687),d=r(312616),u=r(761767),p=r(556928),m=r(493866);let h=e=>(0,c.E)("exp_simple_sharing_v2",e.id).defaultValue(!1).treatment("variant",!0).get(),_=e=>e&&w(e),g=e=>{let{id:t}=e;return null!=e.subscription&&e.subscription!==u.Qe.INCOMPLETE&&(0,c.E)("exp_pro_edit_links",t).defaultValue(!1).treatment("variant_edit_links_and_friction",!0).get()},f=e=>(0,c.E)("exp_share_modal_hierarchy_v2",e.id).defaultValue(!1).treatment("variant",!0).get(),E=e=>!(0,c.E)("exp_edit_button_teams_retest",e).defaultValue(!1).treatment("variant",!0).get(),y=e=>!e.bigma_enabled&&!(0,c.E)("exp_edit_button_orgs_retest",e.id).defaultValue(!1).treatment("variant",!0).get(),v=(e,t)=>(0,c.E)("exp_invite_teammates_copy_v2",e).defaultValue(!1).treatment("variant_title",!t).treatment("variant_title_and_button",!0).get(),b=e=>!!e&&(0,c.E)("exp_google_one_tap_v2",e).defaultValue(!1).treatment("variant",!0).get(),I=({userId:e,currentOrgId:t,tracked:r=!0})=>{if(!t&&e){let t=(0,c.E)("exp_google_contacts_import_v1",e).defaultValue(!1).treatment("variant",!0);return r||(t=t.disableTracking()),t.get()}return!1},T=(e,t)=>t&&e&&(0,c.E)("exp_move_drafts_v1",t).defaultValue(!1).treatment("variant",!0).get(),w=e=>(0,c.E)("exp_growth_h123_holdout_user",e).defaultValue(!1).treatment("not_in_holdout",!0).treatment("ignore",!0).get(),S=()=>(0,l.BZ)().figjam_mini_home_v0,C=e=>(0,l.BZ)().figjam_mini_home_v0;var O=((n=O||{}).CONTROL="CONTROL",n.MODAL_VIDEO="MODAL_VIDEO",n.POPUP_VIDEO="POPUP_VIDEO",n.NUX_VIDEO="NUX_VIDEO",n);let A=(0,m.t)(e=>(0,c.E)("exp_figjam_simulated_use_cases_5",e).defaultValue("CONTROL").treatment("modal_video","MODAL_VIDEO").treatment("popup_video","POPUP_VIDEO").treatment("nux_video","NUX_VIDEO").get());var N=((i=N||{}).CONTROL="CONTROL",i.THUMBNAIL="THUMBNAIL",i.CONTENTS_AND_THUMBNAIL="CONTENTS_AND_THUMBNAIL",i.MORE_STARTER_FILES="MORE_STARTER_FILES",i);let L=e=>{let{getConfig:t}=(0,s.it)("exp_figjam_starter_files");return e?t().getValue("variant","CONTROL"):"CONTROL"};function P(e){return!!e&&(0,c.E)("exp_figjam_specific_onboarding",e).defaultValue(!1).treatment("control",!1).treatment("variant_1",!0).treatment("variant_2",!0).get()}function R(e){return!!e&&(0,c.E)("exp_figjam_specific_onboarding",e).defaultValue(!1).treatment("control",!1).treatment("variant_1",!1).treatment("variant_2",!0).get()}(0,m.t)(e=>(0,c.E)("exp_figjam_fb_templates_by_role",e).defaultValue(!1).treatment("variant",!0).get());let k=e=>!!e&&w(e);function D(){let e=(0,d.p)("has_tooltips_plus_onboarding_file_no_nav"),t=(0,d.p)("has_tooltips_plus_onboarding_file_with_nav"),r=(0,d.p)("has_cursor_bot_onboarding"),n=(0,d.p)("has_cursor_bot_onboarding_v2"),i=(0,d.p)("has_tooltips_plus_no_basics_file");return M({has_tooltips_plus_onboarding_file_no_nav:e,has_tooltips_plus_onboarding_file_with_nav:t,has_cursor_bot_onboarding:r,has_cursor_bot_onboarding_v2:n,has_tooltips_plus_no_basics_file:i})}function M(e){return!!e.has_tooltips_plus_onboarding_file_no_nav||!!e.has_tooltips_plus_onboarding_file_with_nav||!!e.has_cursor_bot_onboarding||!!e.has_tooltips_plus_no_basics_file||!!e.has_cursor_bot_onboarding_v2}let F=e=>e&&w(e)&&(0,c.E)("exp_pro_trials_v3",e).defaultValue(!1).treatment("variant",!0).get(),x=e=>{var t;if(!e||!(0,l.BZ)().exp_figjam_onboarding_make_tmpl)return!1;if(o.V){let r=o.V.getState(),n=null==(t=r.userFlags.figjam_editor_onboarded)?void 0:t.createdAt,i=!n||new Date(n)>new Date("2023-01-30T15:00:00.000Z");return!!i&&(0,c.E)("exp_figjam_onboarding_make_tmpl",e).defaultValue(!1).treatment("variant",!0).get()}return!1},U=()=>(0,c.E)("exp_resource_refresh_embed_cta").defaultValue(!1).treatment("variant",!0).get(),B=()=>(0,c.E)("exp_move_drafts_v2").defaultValue(!1).treatment("variant",!0).get(),V=()=>(0,l.BZ)().staging_proto_onboarding_opt_in||(0,l.BZ)().exp_prototyping_in_onboarding_v1&&(0,s.rm)("exp_prototyping_in_onboarding_v1").get("show_treatment",!1),G=e=>(0,c.E)("exp_fj_participant_onboarding",e).defaultValue(!1).treatment("variant",!0).get(),H=e=>null!=e&&!!e.bigma_enabled&&(0,c.E)("exp_ws_public_link_controls",{type:p.i_.ORG,id:e.id}).defaultValue(!1).treatment("variant",!0).get(),W=(0,m.t)(e=>(0,c.E)("exp_figjam_ia_refresh",e).defaultValue(!1).treatment("treatment",!0).get()),K=()=>(0,s.rm)("exp_search_faceted_search").get("variantType","control"),z=()=>!!(0,l.BZ)().phased_rollout_pinned_comments,Z=({user:e,file:t,numPinnedCommentThreads:r}={})=>!!z()&&!!e&&!!t&&t.editorType===u.gg.DESIGN&&(!!r&&r>0||!!((0,l.rz)()&&(0,a.JE)(e.email))||!!t.team&&!t.parentOrgId),Y=()=>{let{getConfig:e}=(0,s.it)("phased_rollout_pinned_comments");return e().getValue("can_pin_comments",!1)}},504552:(e,t,r)=>{let n;r.d(t,{VL:()=>N,XA:()=>b,hi:()=>T,nW:()=>w,v:()=>S});var i=r(652983),a=r(600486),o=r(46347),l=r(220518),s=r(269658),c=r(716250),d=r(571529),u=r(122342),p=r(32949),m=r(882051),h=r(556199),_=r(556928),g=r(44441),f=r(744132);let E=(e,t)=>e.type===t.type&&(e.type===_.i_.USER||t.type===_.i_.USER||e.id===t.id),y=(e,t)=>"object"==typeof e&&"object"==typeof t?E(e,t):"object"!=typeof e&&"object"!=typeof t&&e===t,v=(e,t,r,n,i)=>{let a=s.V;(0,c.rz)()&&(a?Promise.resolve().then(()=>{a.dispatch(m.R({event:{experimentId:e,treatmentId:t,seed:r,isWinner:n,fromOverride:!1}}))}):console.error(`The experiment ${e} is being called before the store is initialized. This is likely the result of calling the experiment() function in a constant definition, and will result in overexposure.`))},b=new class{constructor(e){this.trackedSeedsByExperiment={},this.trackExperimentSeedForSession=(e,t,r)=>{let n=this.trackedSeedsByExperiment[e]||[];n.findIndex(e=>y(e,r))>-1||(this.reportingHandler(e,t,r),n.push(r),this.trackedSeedsByExperiment[e]=n)},this.resetTrackedSeedsForSession=()=>{this.trackedSeedsByExperiment={}},this.reportingHandler=e}}((e,t,r)=>{let n=(0,g.rG)(),i=n&&n[e],o=c.Rm(e),l=!!(null==o?void 0:o.winner),s="set_experiment_treatment",d=!i&&!l;if(d){if("object"==typeof r){let n=c.Gm().user_data;(0,a.L9)(s,{experimentId:e,treatmentId:t,seedResourceType:r.type,seedResourceId:r.type===_.i_.USER?null==n?void 0:n.id:r.id})}else(0,a.L9)(s,{experimentId:e,treatmentId:t,seed:r.toString()});v(e,t,r,l,!1)}else(0,g.fO)(e,t),v(e,t,r,!1,!0)});class I{constructor(e,t,r,n){this.treatmentToValue=new Map,this.trackingEnabled=!0,this.mobileEnabled=!1,this.requireSeedProp=!1,this.reportOnce=(e,t)=>{t&&null!=e&&this.trackingEnabled&&this.report(this.experimentId,t,e)},this.experimentId=e,this.defaultValue=t,this.report=r,this.seed=n}}class T{constructor(e,t,r,n){this.state=new I(e,t,r,n)}enableMobile(){return this.state.mobileEnabled=!0,this}treatment(e,t){return this.state.treatmentToValue.set(e,t),this}disableTracking(){return this.state.trackingEnabled=!1,this}requireSeedProp(){return this.state.requireSeedProp=!0,this}build(){let e=this.state.reportOnce,t=this.state.experimentId,r=this.state.defaultValue,n=this.state.seed,a=this.state.treatmentToValue,o=this.state.mobileEnabled,l=this.state.requireSeedProp;return class extends i.Component{experimentSeed(){if(l&&!this.props.experimentSeed)throw Error(`Experiment seed is a required prop for experiment builder with experimentId: ${t}`);return this.props.experimentSeed||n}treatment(){return C(t,this.experimentSeed(),o)}componentDidMount(){e(this.experimentSeed(),this.treatment())}render(){let e=r,t=this.treatment();if(t){let r=a.get(t);r&&(e=r)}return i.createElement(e,{...this.props})}}}}class w{constructor(e,t,r,n){this.state=new I(e,t,r,n)}enableMobile(){return this.state.mobileEnabled=!0,this}treatment(e,t){return this.state.treatmentToValue.set(e,t),this}disableTracking(){return this.state.trackingEnabled=!1,this}get(){let e=C(this.state.experimentId,this.state.seed,this.state.mobileEnabled);return e&&(this.state.reportOnce(this.state.seed,e),this.state.treatmentToValue.has(e))?this.state.treatmentToValue.get(e):this.state.defaultValue}}function S({undefinedIfKnownDomain:e=!1}={}){let t=c.Gm().user_data,r=null==t?void 0:t.email;if(r){let n=(0,l.Gd)(r);if((0,l._E)(r))return e?void 0:null==t?void 0:t.experiment_seed;if(n)return function(e){let t=e.toUpperCase().match(/[A-Z0-9]+/g),r=null==t?void 0:t.join("").match(/.{1,5}/g);if(r)return r.map(e=>parseInt(e,36)).reduce((e,t)=>e^t)}(n)}}function C(e,t=N(),r=!1){let n=(0,g.rG)();if(n&&n[e])return n[e];if(!c.BZ()[e]||!r&&(0,d.dB)())return;if(null==t)return N();let i=c.Rm(e);if(i){if(i.winner)return i.winner;if("object"==typeof t)return function(e,t){var r,n,i,a;let l;let c=s.V;if(!c)return;let d=c.getState();switch(e.type){case _.i_.USER:l=null==(r=d.user)?void 0:r.experiment_assignments;break;case _.i_.TEAM:l=null==(n=d.teams[e.id])?void 0:n.experiment_assignments;break;case _.i_.ORG:l=null==(i=d.orgById[e.id])?void 0:i.experiment_assignments;break;default:(0,o.vE)(e)}return null==(a=null==l?void 0:l.find(e=>e.experiment_id===t))?void 0:a.treatment_id}(t,e);switch(i.randomization_method){case h.L.MD5:return O(i,(0,f.b)(e,t));case h.L.MD5_BAD:if(void 0===(t=A(t)))return;return O(i,(0,f.b)(e,t));case h.L.LCG:let r=A(t);if(void 0===r)return;return r>1e8&&(r=Math.floor(r/1e5)),O(i,(0,f.c)(e,r));default:return}}}let O=(e,t)=>{if(e.assignment_weights){let r=Object.values(e.assignment_weights).reduce((e,t)=>e+t,0),n=0,i=t%r;for(let t of e.treatment_names){let r=n+e.assignment_weights[t];if(i<r)return t;n=r}}return e.treatment_names[t%e.treatment_names.length]},A=e=>{let t="string"==typeof e?parseInt(e,10):e;if(!isNaN(t))return t},N=()=>{var e;let t=function(){let e=c.Gm().user_data;if(e)return e.experiment_seed}();if(t)return t;let r=(0,u.WC)(),i=encodeURIComponent("experiment_seed"),a=(0,c.k2)()?(0,p.e)("functional"):!!r;if(a&&!n)try{let t=null==(e=r.get(i))?void 0:e.toString();if(t)return t}catch(e){console.error("Failed to read local experiment seed.",e);return}if(n||(n=Math.floor(1e6*Math.random()).toString()),a)try{r.set(i,n)}catch(e){console.error("Failed to write local experiment seed",e)}return n};window.localSeed=N},386483:(e,t,r)=>{r.d(t,{Rv:()=>p,TR:()=>d,tR:()=>u});var n=r(652983),i=r(407908),a=r(388899),o=r(458324),l=r(200273),s=r(801998);function c(){let e=(0,i.v9)(e=>(0,s._H)(e)),t=(0,l.CA)(),r=(null==t?void 0:t.team)??null;return{currentOrg:e,currentTeam:r,currentFile:t}}function d(){let{currentOrg:e,currentTeam:t,currentFile:r}=c(),i=(0,o.it)("exp_aa_test_teamid_fullscreen_menu");(0,n.useEffect)(()=>{!e&&t&&r&&"design"===r.editorType&&i.getConfig()},[e,t,r,i])}function u({file:e}){let{currentOrg:t,currentTeam:r}=c();(0,n.useEffect)(()=>{if(t||!r||(null==e?void 0:e.editor_type)!=="design")return},[t,r,e])}function p(){(0,o.hv)("exp_aa_test_teamid_branching_upsell").catch(a.ZT)}},131826:(e,t,r)=>{r.d(t,{E9:()=>m,KT:()=>b,UE:()=>I,Ui:()=>h,XT:()=>y,bC:()=>g,gx:()=>w,po:()=>T,v8:()=>v,x1:()=>_,z7:()=>E});var n=r(652983),i=r(407908),a=r(600486),o=r(286206),l=r(970740),s=r(366533),c=r(448694),d=r(220949);let u=null,p=()=>{u=null},m=n.createContext({properties:{},trackEvent:()=>null});function h({name:e,properties:t={},trackingTargets:r=s.p.ALL,enabled:l=!0,ignoreParent:p=!1,children:h}){let{name:_,properties:g}=(0,n.useContext)(m),f=(0,n.useRef)({}),E=(0,n.useRef)(null);f.current&&(0,i.wU)(f.current,t)||(f.current=t),t=f.current;let y=(0,n.useMemo)(()=>{let r=_&&!p?`${_} > ${e}`:e,n={...g,...t};return{name:r,properties:n,trackEvent:(e,t)=>(0,a.L9)(e,{trackingContext:r,...n,...t})}},[e,t,_,g,p]);return(0,n.useEffect)(()=>{if(!l||r===s.p.NONE)return;let e=y.name,t=y.properties;if(E.current&&E.current.name===e&&(0,i.wU)(E.current.properties,t))return;if(r===s.p.RCS){let r={};for(let e of Object.keys(t))null!==t[e]&&void 0!==t[e]&&(r[e]=t[e]);(0,d.m_)({id:e,properties:r});return}let n={name:e,...null!=u&&{ctaClickedReferrer:u},...t};(0,o.sd)("Context Viewed",e,n),(0,c.EB)(n),E.current=y},[r,y,l]),n.createElement(m.Provider,{value:y},h)}function _(e,t){var r;return(r=class extends n.PureComponent{render(){return n.createElement(h,{name:t||e.displayName},n.createElement(e,{...this.props}))}}).displayName=e.displayName,r}let g=(e,t,r={},i=!0)=>n.createElement(h,{name:t,properties:r,enabled:i},e),f=(e,t)=>{if(t)return t;if(e&&"string"==typeof e)return e;{let t=n.Children.map(e,e=>{if((null==e?void 0:e.type)!==l.Tx)return e;{let{id:t,...r}=e.props;return(0,l.t)(t,r)}});if(null==t?void 0:t.every(e=>"string"==typeof e))return t.join("")}};function E(e,t){let r=n.forwardRef((r,i)=>n.createElement(m.Consumer,null,a=>{let o=e=>{var n;let i={...a.properties,...r.trackingProperties};a.name&&(i.trackingContext=a.name);let o=f(r.children,r.innerText);o&&(i.text=o),(0,c.T6)(i,r.trackingEventName,t),u=`${i.trackingContext} : ${i.text}`,null==(n=r.onClick)||n.call(r,e),setTimeout(p,150)},{trackingProperties:l,innerText:s,useMouseDown:d,trackingEventName:m,...h}=r;return r.children||r.innerText,n.createElement(e,{ref:i,...h,...r.useMouseDown?{onMouseDown:o}:{onClick:o}})}));return r.displayName=`Tracked(${e.displayName||e.name})`,r}let y=E(({dataTestId:e,...t})=>n.createElement("button",{...t,"data-testid":e}));function v(e){return class extends n.Component{render(){return n.createElement(m.Consumer,null,t=>{let{trackingProperties:r,trackingPopulationLevel:i,trackingFieldName:a,...o}=this.props;return n.createElement(e,{...o,onBlur:e=>{let r={...t.properties,...this.props.trackingProperties,fieldName:this.props.trackingFieldName,populationLevel:this.props.trackingPopulationLevel};t.name&&(r.trackingContext=t.name),(0,c.no)(r),this.props.onBlur&&this.props.onBlur(e)}})})}}}let b=E(e=>n.createElement("button",{...e})),I=E(e=>n.createElement("div",{...e})),T=E(e=>n.createElement("a",{...e},e.children),!0);function w(){return(0,n.useContext)(m)}E(e=>n.createElement("input",{...e}))},606936:(e,t,r)=>{r(840050);let n=performance.now();r(294521);var i,a,o,l,s,c,d,u,p,m,h,_,g,f,E=r(652983),y=r(278520),v=r(660632),b=r(277373),I=r(461490),T=r(448501),w=r(716250),S=r(600470),C=r(286206),O=r(117986),A=r(361763),N=r(879916),L=r(600486),P=r(16450),R=r(680356),k=r(761767),D=r(467373),M=r(500238),F=r(769955),x=r(179110),U=r(947303),B=r(179438),V=r(435804),G=r(352297),H=r(656077),W=r(407908),K=r(337167),z=r(132630),Z=r(258531),Y=r(87608),j=r.n(Y),$=r(141757),q=r(814754),X=r(618723),J=r(597837),Q=r(824801),ee=r(125274),et=r(70918),er=r(88323),en=r(926212),ei=r(288432),ea=r(675620),eo=r(330458);let el=r(752741),es=document.documentElement.style,ec=E.memo(function(e){let t,r;let n=(0,W.v9)(e=>{let t=e.mirror.selectionProperties.backgroundColor;return!!t&&(0,$.vq)(t)}),i=(0,W.v9)(e=>{if("fullscreen"===e.selectedView.view&&"whiteboard"===e.selectedView.editorType)return;let t=e.mirror.selectionProperties.backgroundColor;return Q.Z.format(t)}),a=(0,ee.Ni)(),o=(0,er.Kb)(),l=E.useRef(null),{width:s}=(0,q.y)(l)||{EMPTY_SIZE:q.Q},c=o<(s||0)+32?a:0;return E.useEffect(()=>{es.setProperty("--cookie-banner-persistent-message-bottom-margin",`${c}px`)},[c]),E.useEffect(()=>()=>{es.setProperty("--cookie-banner-persistent-message-bottom-margin","0px")},[]),"implicit"===e.consentRegion?(t=ei.pK,r=ei.Z5):"explicit"===e.consentRegion&&(t=(0,en.zg)(),r=(0,en.kd)()),E.createElement("div",{role:"region","aria-label":t,style:{backgroundColor:i},className:j()(eo.Sx,n?eo.IB:eo.Jx),ref:l},E.createElement(X.yi,{rel:"noopener",target:"_blank",href:r},t))}),ed=E.memo(function(){let e=(0,W.v9)(e=>e.mirror.appModel.isInitialized),t=(0,et.dO)();return e&&!t&&(0,w.BZ)().cookie_banners_file_viewer?"implicit"===(0,w.ZP)().consent_region?E.createElement(ei.MF,{variant:ea.I.FILE_VIEWER,dismissIcon:el,verticalPadding:32,SecondaryButton:e=>E.createElement(J.z,{variant:"secondary",...e}),persistentMessage:E.createElement(ec,{consentRegion:"implicit"})}):"explicit"===(0,w.ZP)().consent_region?E.createElement(en.u,{variant:ea.I.FILE_VIEWER,dismissIcon:el,verticalPadding:32,PrimaryButton:e=>E.createElement(J.z,{variant:"primary",...e}),SecondaryButton:e=>E.createElement(J.z,{variant:"secondary",...e}),persistentMessage:E.createElement(ec,{consentRegion:"explicit"})}):null:null});var eu=r(846364),ep=r(46347),em=r(970740),eh=r(746947),e_=r(935174),eg=r(721127),ef=r(961215),eE=r(166885),ey=r(248908),ev=r(566834),eb=r(204829),eI=r(564380),eT=r(435613),ew=r(539168),eS=((i=eS||{})[i.BOTTOM_RIGHT=0]="BOTTOM_RIGHT",i[i.TOP_CENTER=1]="TOP_CENTER",i);class eC extends eb.Vx{constructor(){super(...arguments),this.notificationStyle=()=>{switch(this.position()){case 0:return this.props.hideHelpWidget?ew.RH:ew.bt;case 1:return ew.vZ}},this.icon=()=>{throw Error("icon must be implemented in subclass.")},this.isError=()=>{throw Error("isError must be implemented in subclass.")},this.actionText=()=>{throw Error("actionText must be implemented in subclass.")},this.actionCallback=()=>{throw Error("actionCallback must be implemented in subclass.")},this.dequeueNotification=()=>{throw Error("dequeueNotification must be implemented in subclass.")},this.position=()=>{throw Error("position must be implemented in subclass.")},this.onDisplay=null,this.onAccept=eb.hO(this,"click",e=>{e.stopPropagation();let t=this.getCurrentNotif();t&&(this.actionCallback(),this.dequeueNotification())}),this.onDismiss=e=>{e.stopPropagation();let t=this.getCurrentNotif();t&&(t.dismissCallback&&t.dismissCallback(),this.dequeueNotification())},this.getCurrentNotif=()=>this.props.notifications[0]||null}componentDidUpdate(e,t){super.componentDidUpdate(e,t);let r=this.getCurrentNotif();if(!r)return;let n=r.displayCallback;n&&n!==this.onDisplay&&n(),this.onDisplay=n||null}render(){let e=this.getCurrentNotif();if(!e)return null;let t=this.icon(),r=this.isError(),n=this.actionText(),i=1===this.position(),a=i?ew.G:"";return E.createElement(eI.yh,{className:a},E.createElement(eI.yh,{className:this.notificationStyle(),recordingKey:eb.ar(this.props,"accept"),onClick:this.onAccept},t&&E.createElement(eT.n,{className:r?ew.j2:ew.qv,svg:t}),E.createElement("div",{className:ew.yw},e.message),E.createElement(eO,{actionText:n,accept:this.onAccept,dismiss:this.onDismiss})))}}eC.displayName="NotificationView";class eO extends E.PureComponent{render(){return E.createElement("div",{className:ew.Nw},this.props.actionText&&E.createElement("div",{className:ew.aD,onClick:this.props.accept},this.props.actionText),E.createElement("div",{className:ew.aD,onClick:this.props.dismiss},E.createElement(em.Tx,{id:"base_notifications.dismiss"})))}}eO.displayName="NotificationActions";let eA=r(306729),eN=r(681283),eL=r(609712),eP=r(123072),eR=r(284182),ek=r(69491),eD=r(285624);class eM extends eC{constructor(){super(...arguments),this.icon=()=>{let e=this.getCurrentNotif();if(!e)return null;switch(e.type){case e_.k.COMPONENT_PUBLISH_ERROR:return eN;case e_.k.COMPONENT_UPDATES_AVAILABLE:return eA;case e_.k.DOWNTIME:return eN;case e_.k.AUTOSAVE_CHANGES_RESTORED:return eL;case e_.k.BRANCHING_SOURCE_FILE_UPDATED:return eP;case e_.k.MOVE_COMPONENTS_PROMPT:return eR;case e_.k.BRANCHING_OTHER_USER_MERGING:case e_.k.SEE_WHATS_CHANGED:return eP;case e_.k.CLIPBOARD_DATA_AVAILABLE:return ek;case e_.k.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS:return eD}},this.actionText=()=>{let e=this.getCurrentNotif();if(!e)return null;let t=e.type;switch(t){case e_.k.COMPONENT_PUBLISH_ERROR:return"Retry...";case e_.k.COMPONENT_UPDATES_AVAILABLE:return(0,em.t)("design_systems.updates.review");case e_.k.DOWNTIME:return"Learn more";case e_.k.AUTOSAVE_CHANGES_RESTORED:return null;case e_.k.BRANCHING_SOURCE_FILE_UPDATED:return(0,em.t)("collaboration.branching.update");case e_.k.MOVE_COMPONENTS_PROMPT:return(0,em.t)("design_systems.updates.publish");case e_.k.BRANCHING_OTHER_USER_MERGING:return null;case e_.k.SEE_WHATS_CHANGED:return(0,em.t)("collaboration.feedback.compare");case e_.k.CLIPBOARD_DATA_AVAILABLE:return(0,em.t)("fullscreen_actions.paste");case e_.k.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS:return(0,em.t)("comments.turn_on");default:(0,ep.vE)(t)}},this.actionCallback=()=>{let e=this.getCurrentNotif();if(!e)return;let t=e.type;switch(t){case e_.k.COMPONENT_UPDATES_AVAILABLE:this.props.dispatch(eg.K4({type:ey.yT,data:{initialTab:eE.ZB.UPDATES}}));return;case e_.k.COMPONENT_PUBLISH_ERROR:this.props.dispatch(eg.K4({type:ev.A}));return;case e_.k.DOWNTIME:case e_.k.BRANCHING_SOURCE_FILE_UPDATED:case e_.k.MOVE_COMPONENTS_PROMPT:e&&e.acceptCallback&&e.acceptCallback();return;case e_.k.AUTOSAVE_CHANGES_RESTORED:case e_.k.BRANCHING_OTHER_USER_MERGING:return;case e_.k.SEE_WHATS_CHANGED:case e_.k.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS:e&&e.acceptCallback&&e.acceptCallback();return;case e_.k.CLIPBOARD_DATA_AVAILABLE:e&&(ef.iTB.pasteFromSerializedClipboardData(e.downloadUrl,e.deviceType,e.timestamp),e.acceptCallback&&e.acceptCallback());return;default:(0,ep.vE)(t)}},this.position=()=>{let e=this.getCurrentNotif();if(!e)return eS.BOTTOM_RIGHT;if(this.props.hasMobileNativeToolbar)return eS.TOP_CENTER;let t=e.type;switch(t){case e_.k.COMPONENT_UPDATES_AVAILABLE:case e_.k.COMPONENT_PUBLISH_ERROR:case e_.k.DOWNTIME:case e_.k.BRANCHING_SOURCE_FILE_UPDATED:case e_.k.MOVE_COMPONENTS_PROMPT:case e_.k.AUTOSAVE_CHANGES_RESTORED:case e_.k.BRANCHING_OTHER_USER_MERGING:case e_.k.SEE_WHATS_CHANGED:case e_.k.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS:return eS.BOTTOM_RIGHT;case e_.k.CLIPBOARD_DATA_AVAILABLE:return e.isFigJam?eS.TOP_CENTER:eS.BOTTOM_RIGHT;default:(0,ep.vE)(t)}},this.isError=()=>{let e=this.getCurrentNotif();if(!e)return!1;let t=e.type;switch(t){case e_.k.COMPONENT_PUBLISH_ERROR:return!0;case e_.k.COMPONENT_UPDATES_AVAILABLE:case e_.k.DOWNTIME:case e_.k.AUTOSAVE_CHANGES_RESTORED:case e_.k.BRANCHING_SOURCE_FILE_UPDATED:case e_.k.MOVE_COMPONENTS_PROMPT:case e_.k.BRANCHING_OTHER_USER_MERGING:case e_.k.SEE_WHATS_CHANGED:case e_.k.CLIPBOARD_DATA_AVAILABLE:case e_.k.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS:return!1;default:(0,ep.vE)(t)}},this.dequeueNotification=()=>{let e=this.getCurrentNotif();e&&this.props.dispatch(eh.N.dequeue({type:e.type}))}}}eM.displayName="NotificationsView";var eF=r(594384),ex=r(199184),eU=r(54055),eB=r(446686),eV=r(916241),eG=r(784667),eH=r(413810),eW=r(625964),eK=r(902736),ez=r(820925),eZ=r(301151),eY=r(931635);r(456648);let ej=r(826998);class e$ extends E.Component{render(){let e="whiteboard"===this.props.pageType,t="";switch(this.props.pageType){case"whiteboard":t="interstitial_page--whiteboardBackground--vCkUI";break;case"prototype":t="interstitial_page--prototypeBackground--WAYsr";break;case"design":t="interstitial_page--designBackground--2YNuc";break;case"external":t="interstitial_page--externalBackground--0J4ed"}return this.props.renderSimplifiedView&&(t="interstitial_page--simplifiedBackground--HPGkI"),E.createElement("div",{className:`interstitial_page--page--jxBjZ ${t}`},E.createElement("div",{className:`interstitial_page--navbar--4DoBt ${e&&"interstitial_page--navbarWhiteboardBackground--af-hd"}`},E.createElement("div",{className:`interstitial_page--logo--s9Fkg ${!this.props.staticLogo&&"interstitial_page--logoLink--IwtO9"} ${!e&&"interstitial_page--logoWhiteFill--nemQY"}`},this.props.staticLogo&&E.createElement(eT.n,{svg:ej,autosize:!0}),!this.props.staticLogo&&E.createElement("a",{href:"/"},E.createElement(eT.n,{svg:ej,autosize:!0})))),this.props.children,this.props.footer&&E.createElement("div",{className:"interstitial_page--footer--IGCrV"},this.props.footer))}}e$.defaultProps={title:"Figma"};var eq=r(363402);let eX=r(243523);function eJ(){let e,t,r,n;let i=(0,V.A6)();if(!(0,eU._u)(i))return null;let{redirectUrl:a,interstitialType:o}=i;return o===eq.BZ.ONBOARDING&&(e=E.createElement(em.Tx,{id:"community.seller.setup_complete"}),t=E.createElement(em.Tx,{id:"community.seller.head_back_to_figma_to_start_selling"}),r=eX,n="community_monetization_desktop_interstitial--stripeToFigmaLogo--819Zk"),E.createElement(e$,{pageType:"external"},E.createElement(eY.G,{useOriginalSrcFills:!0,imageSrc:r,imageClassName:n,headerText:e,secondaryText:t},E.createElement(X.OK,{onClick:()=>{(0,eZ.tI)(a)},className:"community_monetization_desktop_interstitial--button--Eq1kl"},E.createElement(em.Tx,{id:"community.buyer.return_to_desktop_app"}))))}var eQ=r(31642),e0=r(477135),e1=r(313653),e2=r(111120),e3=r(417704),e4=r(442152);function e6(){let e=(0,e4.tm)(),t=(0,W.I0)(),r=(0,e3.BA)("locale"),n=(0,e3.BA)("hub_file_id");return(0,E.useEffect)(()=>{eQ.ZP.post("/api/try/figjam",{hub_file_id:n,locale:r}).then(r=>{e()&&(t(e2.fv({view:"fullscreen",fileKey:r.data.meta.file_key,editorType:"whiteboard"})),r.data.meta.missing_hub_file&&t(e1.l.error((0,em.t)("figjam_try.template_creation_failed"))))}).catch(e=>{console.error(e),t(e1.l.error((0,em.t)("figjam_try.failed_to_create_file"))),setTimeout(()=>window.history.go(-1),2e3)})},[t,e,n,r]),E.createElement(e0.h,{loaded:!1,loadingElementId:"loading-content-pane"})}var e8=r(288223),e9=r(626650),e5=r(134193),e7=r(792808),te=r(388899),tt=r(275835),tr=r(299482),tn=r(866551),ti=r(246905),ta=r(696740),to=r(158774),tl=r(368337),ts=r(685774),tc=r(615824),td=r(370092),tu=r(393347),tp=r(865009);r(765745);var tm=r(722871),th=r(825004),t_=r(217810),tg=r(646012),tf=r(22759),tE=r(556798);class ty{constructor(e){this.chunk=e}guid(){var e;return null==(e=this.chunk.displayNode)?void 0:e.guid}}var tv=r(609688),tb=r(947960),tI=r(802783),tT=r(378066),tw=r(650088);let tS=new Set(["backgroundPaints"]);(0,ep.p_)(tS);var tC=r(775585);function tO(e,t){return(0,tI.QU)({label:e,list:t.stack??[],buildChild:(e,t)=>({label:e,value:{type:tC.aX.EditScope,value:t},children:[],expandByDefault:!1}),expandByDefault:!0})}class tA extends tT.P{constructor({nodeChanges:e,blobs:t,diffChunks:r,...n}){super(n),this.searchDB=new tf.c,this.diffChunksByDisplayGuid={},this.nodes=e.map(e=>new tN(e,this)),this.blobs=t,this.searchDB.indexNodes(this.nodes),this.rootNodes="multiplayer_journal"===this.type?this.nodes:this.nodes.filter(e=>{let t=e.parentGuid();return null==t||null==this.getNode(t)}),r&&r.forEach(e=>{var t;if(null==(t=e.displayNode)?void 0:t.guid){let t=(0,tv.YG)(e.displayNode.guid);this.diffChunksByDisplayGuid[t]=new ty(e)}}),"multiplayer_journal"===this.type&&(this._shouldShowNodePhases=!0,this._shouldShowNodeTypes=this.nodes.some(e=>null!=e.nodeChange.type))}getRootNodes(){return this.rootNodes}getNode(e){return this.searchNodes({guid:(0,tv.YG)(e)})[0]}getChildren(e){return this.searchNodes({parentGuid:(0,tv.YG)(e)})}getStyle(e){return this.searchNodes({type:"style",styleId:e})[0]}getVariable(e){return this.searchNodes({type:"variable",variableId:e})[0]}getVariableCollection(e){return this.searchNodes({type:"variable_collection",variableCollectionId:e})[0]}getPrimaryInstances(e){return this.searchNodes({type:"instance",backingSymbolId:(0,tv.YG)(e)})}getStyleConsumers(e){return this.searchNodes({consumedStyleIds:e})}getVariablesInCollection(e){return this.searchNodes({type:"variable",variableCollectionId:e})}getVariableConsumers(e){return this.searchNodes({consumedVariableIds:e})}getChunkByDisplayGuid(e){return this.diffChunksByDisplayGuid[(0,tv.YG)(e)]}getBlobByIndex(e){return this.blobs[e]??null}search(e,t){return Promise.resolve(this.searchDB.search(e,t))}searchNodes(e){let t=Object.entries(e).map(([e,t])=>`${e}=${t}`).join(" ");return this.searchDB.searchTokens((0,tE.k)(t,"")).map(e=>e.node)}indexedProperties(){return this.searchDB.indexedProperties}}class tN extends tb.R{primaryInstances(){return this._scene.getPrimaryInstances(this.guid())}consumedStyleIds(){var e,t,r,n;let i=[];function a(e){for(let t of tw.pH){let r=e[t];r&&i.push(tg.th.fromLocalNodeIdObj(r))}for(let t of tw.A6){let r=e[t];if(r){let e=tg.th.fromKiwi(r);e&&i.push(e)}}}for(let t of(a(this.nodeChange),(null==(e=this.nodeChange.symbolData)?void 0:e.symbolOverrides)??[]))a(t);for(let e of(null==(t=this.nodeChange.textData)?void 0:t.styleOverrideTable)??[])a(e);for(let e of(null==(r=this.nodeChange.vectorData)?void 0:r.styleOverrideTable)??[])a(e);for(let e of(null==(n=this.nodeChange.nodeGenerationData)?void 0:n.overrides)??[])a(e);return i}consumedStyles(){return this.consumedStyleIds().map(e=>this._scene.getStyle(e)).filter(t_.lm)}consumedVariableIds(){var e,t,r,n,i;let a=new Set;function o(e){if(!e)return;let t=tg.pp.fromKiwi(e);t&&a.add(t)}for(let e of tS)!function(e){var t,r;for(let n of e??[])o(null==(r=null==(t=n.colorVar)?void 0:t.value)?void 0:r.alias)}(this.nodeChange[e]);for(let a of(null==(e=this.nodeChange.variableConsumptionMap)?void 0:e.entries)??[])o(null==(r=null==(t=a.variableData)?void 0:t.value)?void 0:r.alias),(null==(i=null==(n=a.variableData)?void 0:n.value)?void 0:i.expressionValue)&&function e(t){var r,n;for(let i of t.expressionArguments??[])o(null==(r=i.value)?void 0:r.alias),(null==(n=i.value)?void 0:n.expressionValue)&&e(i.value.expressionValue)}(a.variableData.value.expressionValue);return[...a.values()]}consumedVariables(){return this.consumedVariableIds().map(e=>this._scene.getVariable(e)).filter(t_.lm)}isPrimaryInstance(){return this.isInstance()}isNestedInstance(){return!1}generateComputedProperties(){let e=[(0,tI.YP)(this.type())],t=(0,tI.$M)(this);if(t&&e.push(t),this.isPrimaryInstance()){let t=(0,tI.ym)(this);t&&e.push(t)}if(this.isInstance()&&e.push({label:"Instance Info",children:[(0,tI.B7)(this),(0,tI.DW)(this)].filter(t_.lm),expandByDefault:!0}),this.isSymbol()&&e.push((0,tI.QU)({label:"Primary Instances",list:this.primaryInstances(),buildChild:tI.LM,expandByDefault:!1})),this.isStyle()&&e.push((0,tI.Af)(this.styleConsumers())),this.isVariable()){let t=this._scene.getVariableCollection(this.variableCollectionId());e.push((0,tI.w0)(t)),e.push((0,tI.mS)(this.variableConsumers()))}let r=this.consumedStyles();r.length>0&&e.push((0,tI.WL)(r));let n=this.consumedVariables();n.length>0&&e.push((0,tI.Jf)(n)),this.isVariableCollection()&&e.push((0,tI.dC)(this.variablesInCollection()));let i=this.variablesDirectlyDependedOnByThisVariable();Object.values(i).some(e=>e.length>0)&&e.push((0,tI.ND)(i));let a=this.otherAssetVersions();a.length>0&&e.push((0,tI.Uw)(a));let o=this._scene.getChunkByDisplayGuid(this.guid());if(o&&e.push((0,tI.y4)(o)),this.nodeChange.editScopeInfo){let{snapshots:t,editScopeStacks:r}=this.nodeChange.editScopeInfo;t&&e.push((0,tI.QU)({label:"Edit Scope Snapshots",list:t,buildChild:(e,t,r)=>(0,tI.QU)({label:e,value:{type:tC.aX.Metadata,value:`Frame ${r+1}`},list:t.frames??[],buildChild:tO,expandByDefault:!0}),expandByDefault:!1})),r&&e.push((0,tI.QU)({label:"Edit Scope Snapshots (Legacy)",list:r,buildChild:tO,expandByDefault:!1}))}return e}}let tL=[th.AG,th.t4,th.d];function tP(e){let t=String.fromCharCode(...e.subarray(0,8));if(!tL.includes(t))throw Error("Unsupported file type");return t}function tR(e){for(let t of e)t.overriddenSymbolID&&delete t.overriddenSymbolID}function tk(e){let t=window;void 0===t.blobCounts&&(t.blobCounts=[]),e&&t.blobCounts.push(e.length)}async function tD(e){try{let t=tu.inflateRaw(e);return console.log("Checkpoint is Zlib compressed"),t}catch{let t=new tp.L;return await t.init(),console.log("Checkpoint is Zstd compressed"),t.decode(e)}}async function tM(e){let t=await (0,tm.f)();if((0,th.Kj)(e)){let r=new t.ZipReader(new t.Uint8ArrayReader(e)),n=await r.getEntries();for(let e of n)if("canvas.fig"===e.filename&&e.getData)return e.getData(new t.Uint8ArrayWriter)}return e}async function tF(e){let t=new DataView(e.buffer),r=12,n=t.getUint32(r,!0);if((r+=4)+n>e.length)throw Error("Invalid schema length "+n);let i=e.subarray(r,r+n);r+=n;let a=t.getUint32(r,!0);if((r+=4)+a>e.length)throw Error("Invalid message length "+a);let o=e.subarray(r,r+a),l=await tD(i),s=td.pM(l),c=td.ES(s),d=await tD(o);return{schema:c,encodedMessage:d}}async function tx(e,t,r){t=await tM(t);let{schema:n,encodedMessage:i}=await tF(t),a=n.decodeMessage(i),{nodeChanges:o,blobs:l=[]}=a;if(!o)throw Error("File did not have node changes");return tR(o),tk(l),new tA({resource:e,sensitiveTextPolicy:r,nodeChanges:o,blobs:l})}async function tU(e,t,r){t=await tM(t);let{schema:n,encodedMessage:i}=await tF(t),a=n.decodeDiffPayload(i),{nodeChanges:o,diffBasis:l,diffChunks:s,blobs:c=[]}=a;if(!o)throw Error(".figd file buffer did not have node changes");if(!l)throw Error(".fig file buffer did not have diff basis");if(!s)throw Error(".fig file buffer did not have diff chunks");tR(o),tR(l),tk(c);let d=o.map((e,t)=>({...l[t],...e})),u=new tA({resource:e,sensitiveTextPolicy:r,nodeChanges:l,blobs:c,diffChunks:s}),p=new tA({resource:e,sensitiveTextPolicy:r,nodeChanges:d,blobs:c,diffChunks:s});return[p,u]}async function tB(e,t,r){if(null==e.encodedKiwiSchemaUrl)throw Error("Missing encoded kiwi schema query param");let n=null;{let r=atob(e.encodedKiwiSchemaUrl),i=await fetch(r,{headers:{"Cache-Control":"no-cache"}}),a=await i.blob(),o=await a.arrayBuffer(),l=td.pM(new Uint8Array(o)),s=td.ES(l);n=s.decodeMessage(t)}let{nodeChanges:i,blobs:a=[]}=n;if(!i)throw Error("File did not have node changes");return tR(i),tk(a),new tA({resource:e,sensitiveTextPolicy:r,nodeChanges:i,blobs:a})}async function tV(e,t,r){return(0,ts.HO)(e)?[await tx(e,t,r)]:(0,ts.Bk)(e)?tU(e,t,r):"multiplayer_journal"===e.type?[await tB(e,t,r)]:void(0,ep.vE)(e)}var tG=r(904882),tH=r(934247);async function tW(e){var t,r,n;let i=await (0,eQ._e)(e),a=decodeURIComponent((null==(n=null==(r=null==(t=null==i?void 0:i.data)?void 0:t.meta)?void 0:r.metadata)?void 0:n.figmascope_hash)||""),o=atob(a),l=await fetch(o,{headers:{"Cache-Control":"no-cache"}}),s=await l.blob(),c=new FileReader;return new Promise((e,t)=>{c.addEventListener("loadend",r=>{c.result instanceof ArrayBuffer?e(new Uint8Array(c.result)):t(Error("bad file result type"))}),c.readAsArrayBuffer(s)})}async function tK(e){if(!e.endSequenceNumber)throw Error("Expected end_sequence_number to be present in URL params");let{entry:t}=(await (0,eQ._e)(`/api/admin/multiplayer_journal/${e.fileKey}/${e.endSequenceNumber}`)).data.meta;return new Uint8Array(function(e){let t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return n.buffer}(t))}function tz(e){switch(e.type){case"server_file":return tW(`/api/admin/files/${e.key}`);case"server_checkpoint":return tW(`/api/admin/checkpoints/${e.key}`);case"server_checkpoint_diff":return tW(`/api/admin/checkpoint_diffs/${e.key}`);case"multiplayer_journal":return tK(e);default:(0,ep.vE)(e)}}var tZ=r(126477),tY=r(280668),tj=r(546106),t$=r(19394);function tq(){let e=(0,V.A6)(),t=(0,W.I0)(),r=E.useCallback(e=>{t(e2.fv({view:"figmascope",resource:{type:"server_file",key:e,backend:"kiwi"}}))},[t]),n=E.useCallback(()=>{t(e2.fv({view:"figmascope",resource:null}))},[t]),i=(0,ti.Cs)(),[a,o]=E.useState(null);(0,tn.D)("legacy"===i?"light":i,a,e);let l=(0,t$.i)(e),s=(0,e9.SH)(l?e.resource:null);if(!l)return null;let c=null;return c=s?(0,ts.W)(s)?E.createElement(tJ,{resource:s,onClose:n}):E.createElement(tX,{resource:s,onClose:n}):E.createElement(tQ,{navigateToFile:r}),E.createElement("div",{ref:o,style:tr.sx.overflowHidden.m0.colorBg.colorText.add({height:"100vh"}).$},c)}function tX({resource:e,onClose:t}){let r=(0,e5.q)(async()=>{let t=await tz(e);return tV(e,t,"hide")},[e]);return t0(r),E.createElement(tj.A,{onClose:t})}function tJ({resource:e,onClose:t}){let r=(0,e5.q)(async()=>{let t=await tz(e);await to.Gr.loadAndStartFullscreenIfNecessary(),ef.iTB.loadFigFileFromBuffer(t,ef.Nw4.PREVIEW)},[e]),n=function(){let[e,t]=E.useState(to.Gr.isReady());return E.useEffect(()=>{to.Gr.isReady()||to.Gr.onReady().then(()=>{t(!0)})},[]),e}(),i=(0,K.b9)(tH.nO);return E.useEffect(()=>{r.status===e7.Q.FAILURE?i((0,e8.SA)(r.error)):n&&r.status===e7.Q.SUCCESS?i((0,e8.r7)(new tc.H({resource:e,sensitiveTextPolicy:"hide",inPrototypeViewer:!1}))):i((0,e8.RN)())},[e,n,r,i]),E.createElement(tj.A,{onClose:t})}function tQ({navigateToFile:e}){let[t,r]=E.useState({status:e7.Q.INIT}),n=E.useCallback(()=>r({status:e7.Q.INIT}),[]);t0(t);let i=t.status===e7.Q.INIT||t.status===e7.Q.FAILURE,a=E.useCallback(e=>{if(!i)return!1;let t=new ta.nb(e);return t.isFile()},[i]),o=E.useCallback(async e=>{if(i){r({status:e7.Q.LOADING});try{let t=Array.from(e.files),n=await Promise.all(t.map(async e=>{let t=await new Promise((t,r)=>{let n=new FileReader;n.addEventListener("loadend",e=>{n.result instanceof ArrayBuffer?t(new Uint8Array(n.result)):r(Error("bad file result type"))}),n.readAsArrayBuffer(e)}),r=tP(t),n=r===th.d?{type:"local_diff_file",name:e.name}:{type:"local_file",name:e.name};return tV(n,t,"show")}));r({status:e7.Q.SUCCESS,value:n.flat()})}catch(e){r({status:e7.Q.FAILURE,error:e})}}},[i]);E.useEffect(()=>{if(!i)return;let t=async t=>{var n,i,a;r({status:e7.Q.LOADING});try{if(null==(n=t.clipboardData)?void 0:n.files.length)await o(t.clipboardData);else if(null==(i=t.clipboardData)?void 0:i.getData("text/html")){let e=(0,tl.xp)(t.clipboardData);if(!e)throw Error("Unable to parse clipboard data");let n=tP(e);if(n===th.d)throw Error("Unexpected figd data in clipboard");let i=await tV({type:"pasted_data"},e,"show");r({status:e7.Q.SUCCESS,value:i})}else if(null==(a=t.clipboardData)?void 0:a.getData("text/plain")){let r=t.clipboardData.getData("text/plain"),n=/\/file\/([a-zA-Z0-9]*)/.exec(r);if(!n)throw Error("Unable to parse RL");e(n[1])}}catch(e){r({status:e7.Q.FAILURE,error:e})}};return document.addEventListener("paste",t),()=>document.removeEventListener("paste",t)},[i,o,e]);let l=E.useMemo(()=>E.createElement(tY.$Q,null,E.createElement("h1",{style:tr.sx.font24.fontBold.mb16.$},"Welcome to FigmaScope!"),E.createElement("p",null,"This tool lets you inspect the internals of Fig files. Check out the Readme"," ",E.createElement("a",{href:tZ.T,target:"_blank"},"here"),"."),E.createElement("h2",{style:tr.sx.font20.fontBold.mt32.mb16.$},"Getting started"),E.createElement("p",null,"Drag a .fig or .figd file here to view its contents. Or drag two files to diff them."),E.createElement("p",null,"Copy a selection from a Figma file and paste it here to view it."),E.createElement("p",null,"Copy a file key or URL and paste it here to view it."),E.createElement("h2",{style:tr.sx.font20.fontBold.mt32.mb16.$},"Other ways to access FigmaScope"),E.createElement("p",null,'Use the "Show in FigmaScope" menu option in the editor to open an embedded version of FigmaScope.'),E.createElement("p",null,'Click the "Open in FigmaScope" links from the admin pages for a file, diff, or checkpoint.')),[]);return E.createElement(tt.h,{isDragTarget:a,onTargetDrop:o,onTargetDragEnter:te.ZT,onTargetDragLeave:te.ZT,style:tr.sx.hFull.$},E.createElement(tj.A,{onClose:n,emptyStateContent:l}))}function t0(e){let t=(0,K.b9)(tH.nO),r=(0,K.b9)(tG.QJ);E.useEffect(()=>{if(e.status!==e7.Q.SUCCESS){t(e),r(null);return}let n=e.value;if(0===n.length){t((0,e8.SA)("No scenes were fetched. This is probably a bug - please report in #figmascope.")),r(null);return}if(n.length>2){t((0,e8.SA)("FigmaScope can only support one or two scenes at a time.")),r(null);return}let[i,a]=n;t((0,e8.r7)(i)),r(a)},[e,t,r])}var t1=r(726231),t2=r(949185),t3=r(92035),t4=r(504163),t6=r(442296),t8=r(524261),t9=r(650264),t5=r(210831);let t7=t9.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,345759)).then(e=>t5.Q.LoadablePage(e.FileBrowserView)),{loading:t5.Q.DependencyTracker,error:t8.NY.NONE});r(871432),r(761618);var re=r(936123),rt=r(242107);let rr=new rt.Z({name:"fullscreen",enforce:!1,dependencies:[],exports:["views"],friendFiles:[],routeHints:["fullscreen","whiteboard","design"]}),rn=rr.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(7353),r.e(9717),r.e(1528),r.e(8449),r.e(5017),r.e(7588),r.e(7046)]).then(r.bind(r,193177)).then(e=>e.FullscreenPageView),{loading:re.BU,error:t8.NY.NONE});var ri=r(524244),ra=r(40711),ro=r(801998),rl=r(456211),rs=r(365653),rc=r(987786),rd=r(487712),ru=r(837728),rp=r(468211),rm=r(617406),rh=r(841017),r_=r(525699),rg=r(638082),rf=r(225468),rE=r(158314),ry=r(881477);let rv="figjam_zoom_menu--enabled--gKjae",rb=r(446845),rI=r(833781),rT=r(845441),rw=r(148476),rS=E.memo(function({recordingKey:e}){let t=(0,rg.xF)("zoom-out"),r=(0,rg.xF)("zoom-in"),n=(0,W.v9)(e=>!1===e.mirror.appModel.showUi);return!to.Gr.isReady()||n?null:E.createElement("div",{role:"none",className:"figjam_zoom_menu--zoomControls--s3ykF",onClick:e=>e.stopPropagation()},E.createElement(rE.hU,{recordingKey:eb.ar(e,"zoomInButton"),className:j()("figjam_zoom_menu--zoomPlus--DXjkV",{[rv]:r}),disabled:!r,onClick:()=>{to.Gr.triggerAction("zoom-in")},"data-tooltip-type":rf.fR.LOOKUP,"data-tooltip":"zoom-in","aria-label":(0,em.t)("fullscreen_actions.zoom-in")},E.createElement("div",{className:"figjam_zoom_menu--zoomPlusIcon--w5RTc"},E.createElement(r_.r,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:rb,fallbackSvg:rT}))),E.createElement("div",{className:"figjam_zoom_menu--zoomSliderContainer--I6c2e"},E.createElement(ry.z,null)),E.createElement(rE.hU,{recordingKey:eb.ar(e,"zoomOutButton"),className:j()("figjam_zoom_menu--zoomMinus--JBcE8",{[rv]:t}),disabled:!t,onClick:()=>{to.Gr.triggerAction("zoom-out")},"data-tooltip-type":rf.fR.LOOKUP,"data-tooltip":"zoom-out","aria-label":(0,em.t)("fullscreen_actions.zoom-out")},E.createElement("div",{className:"figjam_zoom_menu--zoomMinusIcon--bGJ1s"},E.createElement(r_.r,{svg:rI,fix_me_removeThisPropAndProvideUI3Icon:!0,fallbackSvg:rw}))))});var rC=r(668849);function rO(){let e=(0,W.I0)(),t=(0,E.useRef)(null),r=(0,ry.f)(),n=window.FigmaMobile,{keyboardShortcuts:i,isEditingFile:a,selectedView:o,modalShown:l,orgUser:s,user:c,unsortedTeams:d}=(0,rs.c)(e=>({keyboardShortcuts:e.mirror.appModel.keyboardShortcuts,isEditingFile:!!(0,ru.bC)(e),selectedView:e.selectedView,modalShown:e.modalShown,orgUser:(0,rm.bg)(e),user:e.user,unsortedTeams:(0,rh.YV)(e.user,e.roles,e.teams)})),u=(0,eG.Ui)(),p=(0,W.v9)(e=>e.mirror.appModel.showUi),m=!!(null==n?void 0:n.shouldOptimizeForIpadApp)||rp.bd.getIsExtension()&&(0,rC.NE)(o),h=function(e){var t;let r=(0,ee.Ni)(),n=(0,er.pA)(),i=null==(t=e.current)?void 0:t.getBoundingClientRect();return n&&i&&!(n.right+rd.mj<i.left)?r:0}(t);return"fullscreen"===o.view&&o.postingToFeed?null:E.createElement("div",{ref:t,className:"bottom_right_tools_container--container--GhraJ",style:{marginBottom:h}},r&&E.createElement(rS,null),!m&&E.createElement(rc.vb,{dispatch:e,hide:!p||u,keyboardShortcuts:i,isEditingFile:a,selectedView:o,modalShown:l,orgUser:s,user:c,unsortedTeams:d,showFigjamZoomControlRedesign:r}))}var rA=r(215698),rN=r(179640),rL=r(436649),rP=r(57375);class rR extends E.PureComponent{constructor(){super(...arguments),this.isLoadingVersions=()=>rL.hg(this.props.loadingState,rA.CI.loadingKeyForPayload({hubFileId:this.props.hubFileId})),this.shouldRetryLoadingVersions=()=>rL.d4(this.props.loadingState,rA.CI.loadingKeyForPayload({hubFileId:this.props.hubFileId}))}componentDidMount(){this.props.dispatch(rA.CI({hubFileId:this.props.hubFileId}))}render(){let e=!(this.isLoadingVersions()||this.shouldRetryLoadingVersions()),t=!!(0,rN.D3)(this.props.hubFile).id;return E.createElement(E.Fragment,null,e&&t?E.createElement(rP.q,{containerClassName:"hub_file_embed_view--container---KHBD",hubFile:this.props.hubFile,profileIdToAdminResourceAs:null,disableClickToExpand:!0,fullscreenState:eq.bD.DEFAULT,dispatch:this.props.dispatch}):null)}}rR.displayName="HubFileDetailView";let rk=(0,W.$j)((e,t)=>{let r=(0,rN.VZ)(t.hubFileId,e.hubFiles);return{hubFile:{...r,comments_setting:null},loadingState:e.loadingState}})(rR);var rD=r(131826),rM=r(702348),rF=r(964886),rx=r(536562),rU=r(723259),rB=r(270128),rV=r(201248),rG=r(892826),rH=((a=rH||{})[a.FIRST_QUESTION=0]="FIRST_QUESTION",a[a.SECOND_QUESTION=1]="SECOND_QUESTION",a[a.HOW_CAN_WE_IMPROVE=2]="HOW_CAN_WE_IMPROVE",a[a.COMPLETE=3]="COMPLETE",a),rW=((o=rW||{})[o.FREE_FORM_INPUT=0]="FREE_FORM_INPUT",o[o.COMPLETE=1]="COMPLETE",o),rK=((l=rK||{})[l.WHY_ABANDON_QUESTION=0]="WHY_ABANDON_QUESTION",l[l.FREE_FORM_INPUT=1]="FREE_FORM_INPUT",l[l.COMPLETE=2]="COMPLETE",l),rz=((s=rz||{})[s.OPINION_QUESTION=0]="OPINION_QUESTION",s[s.IMPROVEMENT_QUESTION=1]="IMPROVEMENT_QUESTION",s[s.COMPLETE=2]="COMPLETE",s),rZ=((c=rZ||{}).OVERALL_HELPFUL="OVERALL_HELPFUL",c.MISSING_COMPONENTS="MISSING_COMPONENTS",c.ANYTHING_ELSE="ANYTHING_ELSE",c.COMPLETE="COMPLETE",c),rY=((d=rY||{}).INTRO="INTRO",d.FIGMA_USE="FIGMA_USE",d.USE_CASES="USE_CASES",d.NONE_APPLY="NONE_APPLY",d.INTENT_TO_UPGRADE="INTENT_TO_UPGRADE",d.LIKELIHOOD_OF_UPGRADING="LIKELIHOOD_OF_UPGRADING",d.REASON_FOR_FREE_PLAN="REASON_FOR_FREE_PLAN",d.NO_INTENT_TO_UPGRADE="NO_INTENT_TO_UPGRADE",d.COMPLETE="COMPLETE",d),rj=r(827611);let r$={[rz.OPINION_QUESTION]:622,[rz.IMPROVEMENT_QUESTION]:340,[rz.COMPLETE]:340},rq=()=>[{displayValue:(0,em.t)("org_admin_survey.n_a"),trackingValue:0},{displayValue:(0,em.t)("org_admin_survey.strongly_disagree"),trackingValue:1},{displayValue:(0,em.t)("org_admin_survey.disagree"),trackingValue:2},{displayValue:(0,em.t)("org_admin_survey.neither_agree_nor_disagree"),trackingValue:3},{displayValue:(0,em.t)("org_admin_survey.agree"),trackingValue:4},{displayValue:(0,em.t)("org_admin_survey.strongly_agree"),trackingValue:5}],rX=[{displayValue:E.createElement(em.Tx,{id:"org_admin_survey.figma_s_billing_model_is_fair"}),trackingValue:"billingModal"},{displayValue:E.createElement(em.Tx,{id:"org_admin_survey.figma_makes_it_efficient_to_give_users_the_access_they_need"}),trackingValue:"userAccess"},{displayValue:E.createElement(em.Tx,{id:"org_admin_survey.figma_makes_it_easy_to_manage_costs"}),trackingValue:"costManagement"}];function rJ({dismissModal:e}){let t=(0,W.v9)(e=>e.currentUserOrgId),r=E.useRef(null),{state:n,upcomingState:i,setNextState:a,fadingOut:o,height:l}=rj.k.useAutosizedSurveyState({initialState:rz.OPINION_QUESTION,completeStates:[rz.COMPLETE],offscreenBoundsRef:r,dismissModal:e}),s={orgId:t};return E.createElement(rj.m.AutosizedModalView,{state:n,upcomingState:i,getDefaultWidth:e=>r$[e],width:r$[n],height:l,shouldHideCloseButton:e=>e===rz.COMPLETE,getDefaultHeight:e=>e===rz.COMPLETE?236:void 0,dismissModal:e,fadingOut:o,ref:r,view:e=>{switch(e){case rz.OPINION_QUESTION:return E.createElement(rj.m.MultipleChoiceQuestionsView,{choices:rq(),defaultChoice:{displayValue:(0,em.t)("org_admin_survey.not_answered"),trackingValue:0},questions:rX,header:(0,em.t)("org_admin_survey.can_you_tell_us_about_your_experience_using_figma"),subHeader:(0,em.t)("org_admin_survey.rate_your_level_of_agreement_with_the_following_statements"),progress:{currentStep:1,totalSteps:2},trackingProperties:s,onSubmit:()=>a(rz.IMPROVEMENT_QUESTION)});case rz.IMPROVEMENT_QUESTION:return E.createElement(rj.m.EnterFreeFormView,{question:(0,em.t)("org_admin_survey.what_would_improve_your_experience"),progress:{currentStep:2,totalSteps:2},trackingProperties:s,onSubmit:()=>a(rz.COMPLETE)});case rz.COMPLETE:return E.createElement(rj.m.CompleteView,null)}}})}var rQ=r(494104),r0=r(711326),r1=r(532444),r2=((u=r2||{}).AWAIT_ADMIN_PANEL="await_admin_panel",u.AWAIT_LEAVE_SETTINGS="await_leave_settings",u.COMPLETED="completed",u);let r3=(0,rQ.C8)({initial:"await_admin_panel",states:[{id:"await_admin_panel",transitions:[(0,rQ.rH)("Context Viewed","await_leave_settings",{condition:({event:e})=>e.properties.name===r1.V4.ORG_ADMIN_SETTINGS_PAGE})]},{id:"await_leave_settings",transitions:[(0,rQ.rH)("Context Viewed","completed",{condition:({event:e})=>e.properties.name!==r1.V4.ORG_ADMIN_SETTINGS_PAGE})]},{id:"completed",terminal:!0}]}),r4=(0,r0.Q9)("left_admin_settings",r3),r6="seen_org_admin_survey",r8=(0,rx.OD)(r6);function r9(e){return(Date.now()-e.getTime())/864e5}function r5(e,t,r){let n=!!r&&r.canAdmin,i=e&&90>r9(new Date(e.updatedAt)),a=t&&7>=r9(t);return n&&!i&&!a}function r7(){let e=(0,rB.eO)(r4),t=(0,K.Dv)(r8),r=(0,K.Dv)(rx.e8),n=(0,K.Dv)(rF.lX),i=(0,rM.I)({id:rU.G.OrgAdminSurvey,priority:rV.b4.SURVEY,persistBetweenContexts:()=>!0},[t,r,n]);return E.useEffect(()=>{e.completed&&(e.reset(),i.show({canShow:r5}))},[i,e]),E.createElement(rG.R,{isShowing:i.isShowing,userFlagOnShow:r6},E.createElement(rD.Ui,{name:"Org Admin Survey Modal",properties:{surveyVersion:2}},E.createElement(rJ,{dismissModal:i.complete,onClickPrimaryCta:i.complete,forceRender:te.ZT})))}var ne=r(685056),nt=r(362568),nr=r(498266);function nn({dismissModal:e}){let t=E.useRef(null),{state:r,upcomingState:n,clickAnswer:i,setNextState:a,fadingOut:o,height:l,width:s}=rj.k.useAutosizedSurveyState({initialState:rK.WHY_ABANDON_QUESTION,offscreenBoundsRef:t,completeStates:[rK.COMPLETE],dismissModal:e});return E.createElement(rj.m.AutosizedModalView,{state:r,upcomingState:n,height:l,width:s,shouldHideCloseButton:e=>e===rK.COMPLETE,getDefaultHeight:e=>e===rK.COMPLETE?240:void 0,dismissModal:e,fadingOut:o,ref:t,view:e=>{switch(e){case rK.WHY_ABANDON_QUESTION:return E.createElement(rj.m.QuestionView,{question:(0,em.t)("rcs.surveys.abandoned_org_upgrade_question"),surveyAnswers:[{answer:(0,em.t)("rcs.surveys.abandoned_org_upgrade_reason_cost"),nextState:rK.COMPLETE},{answer:(0,em.t)("rcs.surveys.abandoned_org_upgrade_reason_billing_complexity"),nextState:rK.COMPLETE},{answer:(0,em.t)("rcs.surveys.abandoned_org_upgrade_reason_annual_billing"),nextState:rK.COMPLETE},{answer:(0,em.t)("rcs.surveys.abandoned_org_upgrade_reason_just_looking"),nextState:rK.COMPLETE},{answer:(0,em.t)("rcs.surveys.abandoned_org_upgrade_reason_other"),nextState:rK.FREE_FORM_INPUT}],onClickAnswer:i});case rK.FREE_FORM_INPUT:return E.createElement(rj.m.EnterFreeFormView,{question:(0,em.t)("rcs.surveys.abandoned_org_upgrade_question"),onSubmit:()=>a(rK.COMPLETE)});case rK.COMPLETE:return E.createElement(rj.m.CompleteView,null)}}})}var ni=r(435386);let na=(0,rQ.C8)({initial:"await_cart",states:[{id:"await_cart",transitions:[(0,rQ.rH)("Context Viewed","await_abandon_cart",{condition:({event:e})=>e.properties.name===r1.V4.ORG_CART})]},{id:"await_abandon_cart",transitions:[(0,rQ.rH)("Context Viewed","complete",{condition:({event:{properties:{name:e}}})=>e===r1.V4.FILE_BROWSER||e===r1.V4.TEAM_PAGE})]},{id:"complete",terminal:!0}]}),no=(0,ni.Q9)("org_cart_abandon_survey",na),nl="seen_org_cart_abandon_survey",ns=(0,rx.n_)("completed_org_cart_flow"),nc=(0,rx.n_)(nl),nd={surveyVersion:1};function nu(){let e=(0,K.Dv)(ns),t=(0,K.Dv)(rx.e8),r=(0,K.Dv)(ne.fI),n=(0,K.Dv)(ne.Yq),i=(0,K.Dv)(nc),a=(0,rB.eO)(no),o=(0,rM.I)({id:rU.G.OrgCartAbandonSurvey,priority:rV.b4.SURVEY,persistBetweenContexts:()=>!0},[e,t,r,n,i]),l=(0,E.useCallback)(()=>{o.show({canShow(e,t,r,n,i){let a=new Date(Date.now()-7776e6);return!e&&!r&&!n&&(null==t||t<a)&&!i}})},[o]);return(0,rB.CO)(a,({to:e})=>{"complete"===e&&(l(),a.reset())}),E.createElement(nt.a,{element:nn,isShowing:o.isShowing,modalType:nr.w8.SELF_CONTAINED,onClickPrimaryCta:o.complete,onClose:o.complete,onManualDismiss:o.complete,trackingContextName:"Org Cart Abandon Survey",trackingProperties:nd,userFlagOnShow:nl,testId:"org-cart-abandon-survey"})}var np=r(207941),nm=r(256768),nh=((p=nh||{}).PENDING="Pending",p.ACTIVE="Active",p.EXPIRED="Expired",p.DEACTIVATED="Deactivated",p);(e=>{e.getBillingTrial=t=>({...t,status:(0,e.getBillingTrialStatus)(t)}),e.getBillingTrialStatus=t=>(0,e.isDeactivated)(t)?nh.DEACTIVATED:(0,e.isExpired)(t)?nh.EXPIRED:(0,e.isValidated)(t)?nh.ACTIVE:nh.PENDING,e.isDeactivated=e=>!!e.deactivatedAt,e.isExpired=e=>(0,nm.Z)().utc().isAfter((0,nm.Z)(e.trialPeriodEnd).utc()),e.isValidated=e=>{let t=e.metadata;return!!(null==t?void 0:t.validatedAt)}})(_||(_={}));var n_=r(451573),ng=r(862610),nf=r(733609);let nE=[k.JG.ORGANIZATION,k.JG.ENTERPRISE];var ny=r(163853),nv=r(795153);(e=>{e.getOrgTrial=(t,r)=>{if(!(0,e.isOrgTrial)(t))return null;let n=(0,e.canValidateOrgTrial)(t,r);return{canValidate:n,...t}},e.getEstimatedEditorCount=e=>{var t;let r=null==(t=e.metadata)?void 0:t.editorCount;return r?parseInt(r,10):0},e.validateOrgTrialMutation=nv.t1.Mutation(async e=>{await ny.uU.validateTrial(e)}),e.canValidateOrgTrial=(e,t)=>{let r=e.resourceId,n=t.user;return!!n&&(0,nf.canAdminOrg)(r,t)},e.isOrgTrial=e=>nE.includes(e.planType)&&e.resourceType===k.yS.ORG})(g||(g={}));var nb=r(935086);let nI=(0,n_.cg)(e=>(0,nf.getPermissionsStateMemoized)(e)),nT=(0,K.xu)(e=>(0,nb.xM)((0,ng.BillingTrialForResource)({resourceId:e,resourceType:k.yS.ORG}),(e,t)=>{let r=t(nI),n=e.billingTrialForResource;return n?g.getOrgTrial(_.getBillingTrial(n),r):null}));var nw=r(367674),nS=r(65249),nC=r(505468),nO=r(857722);let nA="org_trial_modal--modal--B-euv";function nN({orgTrial:e}){let t=(0,W.I0)();if(!e||e.status!==nh.EXPIRED)return null;let r=e.planType===k.JG.ENTERPRISE?E.createElement(em.Tx,{id:"payments_modal.org_trial.enterprise"}):E.createElement(em.Tx,{id:"payments_modal.org_trial.organization"});return E.createElement(nC.u_,{className:nA,dispatch:t,size:360,title:E.createElement(nS.x,{fontSize:11,fontWeight:"bold",i18nId:"payments_modal.org_trial_expired.title",i18nParams:{planText:r}}),disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,"data-testid":"org_trial_expired_modal"},E.createElement(nw.j,null,E.createElement(nS.x,{i18nId:"payments_modal.org_trial_expired.description"})),E.createElement(nw.j,{padding:{top:24}},E.createElement(nO.Y,{text:E.createElement(em.Tx,{id:"payments_modal.org_trial.switch_my_workspace"}),dataTestId:"workspace-switcher-link"})))}function nL(){let e=(0,W.v9)(e=>e.currentUserOrgId);return e?E.createElement(nP,{currentOrgId:e}):null}function nP({currentOrgId:e}){let t=(0,np.Dv)(nT(e)),r=(0,rM.I)({id:rU.G.OrgTrialExpiredOverlay,priority:rV.b4.URGENT_ALERT,queueOnBlock:!0},[t]);return(0,E.useEffect)(()=>{var e;r.isShowing&&(null==(e=t.data)?void 0:e.status)!==nh.EXPIRED?r.complete():r.show({canShow:e=>!!e&&e.status===nh.EXPIRED})},[r,t]),E.createElement(nt.a,{isShowing:r.isShowing,element:()=>E.createElement(nN,{orgTrial:t.data}),modalType:nr.w8.SELF_CONTAINED,trackingContextName:"org_trial_expired_modal",onClose:r.complete,onClickPrimaryCta:r.complete,onManualDismiss:r.complete,testId:"org_trial_expired_overlay"})}var nR=r(870077),nk=r(212984),nD=r(584593),nM=r(124040);function nF(e){let{orgTrial:t}=e,[r,n]=E.useState(!1),i=(0,W.I0)(),a=(0,nR.Db)(g.validateOrgTrialMutation);if(t.status!==nh.PENDING)return null;let o=t.planType===k.JG.ENTERPRISE?E.createElement(em.Tx,{id:"payments_modal.org_trial.enterprise"}):E.createElement(em.Tx,{id:"payments_modal.org_trial.organization"}),l=t.canValidate,s=l?E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.welcome_to_your_figma_trial",i18nParams:{planText:o}}):E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.your_trial_is_almost_ready"}),c=(0,nm.Z)(t.trialPeriodEnd).utc().format("ll"),d=g.getEstimatedEditorCount(t),u=E.createElement(X.UU,{href:"/ssa/",target:"_blank",trusted:!0,"data-testid":"ssa-link"},E.createElement(em.Tx,{id:"payments_modal.org_trial_pending.ssa_link"})),p=E.createElement(em.Tx,{id:"payments_modal.org_trial_pending.i_agree"});return E.createElement(nC.u_,{className:nA,dispatch:i,size:l?380:360,title:E.createElement(nS.x,{fontSize:11,fontWeight:"bold"},s),disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,"data-testid":"org_trial_pending_modal"},l?E.createElement(nw.j,{direction:"vertical",spacing:16,padding:{right:8}},E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.make_sure_things_look_right",i18nParams:{planText:o}}),E.createElement(nx,{text:E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.expiration_date",i18nParams:{planText:o,endDate:c}})}),E.createElement(nx,{text:E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.editor_count.seat_rename",i18nParams:{planText:o,editorCount:d}})}),E.createElement(nx,{text:E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.no_obligation_to_purchase",i18nParams:{planText:o}})}),E.createElement(nx,{text:E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.terms_and_conditions",i18nParams:{ssaLink:u}})}),E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.by_clicking_agree",i18nParams:{agreeText:p,ssaLink:u}})):E.createElement("div",{className:nk.cx.pr8.$},E.createElement(nS.x,{i18nId:"payments_modal.org_trial_pending.trial_still_needs_admin_approval",i18nParams:{planText:o}})),E.createElement(nw.j,{direction:"horizontal",horizontalAlignItems:"space-between",verticalAlignItems:"center",padding:{top:24}},E.createElement(nO.Y,{text:E.createElement(em.Tx,{id:"payments_modal.org_trial.switch_my_workspace"}),dataTestId:"workspace-switcher-link"}),l&&E.createElement(nD.XT,{disabled:r,variant:"primary",onClick:()=>{r||(n(!0),a({orgId:t.resourceId}).then(()=>{i(e1.l.flash((0,em.t)("payments_modal.org_trial_pending.success")))}).catch(e=>{console.error(e),i(e1.l.error((0,em.t)("payments_modal.org_trial_pending.error"))),n(!1)}))},dataTestId:"submit-validation-button",trackingProperties:{trackingDescriptor:nM.y.AGREE,orgId:e.orgTrial.resourceId}},p)))}function nx(e){return E.createElement(nw.j,{direction:"horizontal",spacing:8,verticalAlignItems:"start"},E.createElement("div",{className:nk.cx.h16.flex.flexColumn.justifyCenter.$},E.createElement("div",{className:nk.cx.colorBgInverse.h4.w4.$})),e.text)}function nU(){let e=(0,W.v9)(e=>e.currentUserOrgId);return e?E.createElement(nB,{currentOrgId:e}):null}function nB({currentOrgId:e}){let t=(0,K.Dv)(nT(e)),r=(0,rM.I)({id:rU.G.OrgTrialPendingOverlay,priority:rV.b4.URGENT_ALERT,queueOnBlock:!0},[t]);return(0,E.useEffect)(()=>{var e;r.isShowing&&(null==(e=t.data)?void 0:e.status)!==nh.PENDING?r.complete():r.show({canShow:e=>!!e&&e.status===nh.PENDING})},[r,t]),E.createElement(nt.a,{isShowing:r.isShowing,element:()=>t.data?E.createElement(nF,{orgTrial:t.data}):null,modalType:nr.w8.SELF_CONTAINED,trackingContextName:"org_trial_pending_modal",onClose:r.complete,onClickPrimaryCta:r.complete,onManualDismiss:r.complete,testId:"org_trial_pending_overlay"})}var nV=r(693693);let nG=(0,n_.cg)(e=>e.notifications.length);function nH({dismissModal:e}){let t=E.useRef(null),{state:r,upcomingState:n,setNextState:i,fadingOut:a,height:o,width:l}=rj.k.useAutosizedSurveyState({initialState:rW.FREE_FORM_INPUT,offscreenBoundsRef:t,completeStates:[rW.COMPLETE],dismissModal:e});return E.createElement(rj.m.AutosizedModalView,{state:r,upcomingState:n,height:o,width:l,shouldHideCloseButton:e=>e===rW.COMPLETE,getDefaultHeight:e=>e===rW.COMPLETE?240:void 0,dismissModal:e,fadingOut:a,ref:t,view:e=>{switch(e){case rW.FREE_FORM_INPUT:return E.createElement(rj.m.EnterFreeFormView,{question:(0,em.t)("rcs.surveys.abandoned_pro_upgrade_question"),onSubmit:()=>i(rW.COMPLETE)});case rW.COMPLETE:return E.createElement(rj.m.CompleteView,null)}}})}let nW=e=>"Upgrade Team"===e.properties.name&&("create"!==e.properties.teamFlowType||"choose_plan"===e.properties.step||"payment_and_address"===e.properties.step||"confirm_pay"===e.properties.step),nK=(0,r0.C8)({initial:"await_enter_pro_cart",states:[{id:"await_enter_pro_cart",transitions:[(0,r0.rH)("Context Viewed","complete",{condition:({event:e})=>nW(e)})]},{id:"complete",terminal:!0}]}),nz=(0,r0.Q9)("enter_pro_cart",nK),nZ="seen_pro_cart_abandon_survey",nY=(0,rx.n_)("completed_pro_cart_flow"),nj=(0,rx.n_)(nZ),n$=ne.fI;function nq(){let e=(0,K.Dv)(nG),t=(0,K.Dv)(nY),r=(0,K.Dv)(nj),n=(0,K.Dv)(rx.e8),i=(0,K.Dv)(n$),a=(0,rM.I)({id:rU.G.ProCartAbandonSurvey,priority:rV.b4.SURVEY,persistBetweenContexts:()=>!0},[t,r,n,i]),o=(0,rB.eO)(nz);return(0,nV.J)(a.uniqueId,"Context Viewed",t=>{var r;let n=null==(r=t.properties)?void 0:r.name;(n===r1.V4.FILE_BROWSER||n===r1.V4.TEAM_PAGE)&&o.completed&&a.show({canShow:(t,r,n,i)=>{let a=!!n&&n.getTime()+7776e6>Date.now();return a&&o.reset(),!t&&!i&&!r&&!a&&!e}})}),E.createElement(nt.a,{isShowing:a.isShowing,modalType:nr.w8.SELF_CONTAINED,trackingContextName:"Pro Cart Abandon Survey",element:nH,onClickPrimaryCta:te.ZT,onClose:te.ZT,onManualDismiss:a.complete,userFlagOnShow:nZ})}var nX=r(149935);let nJ=E.memo(function(){return E.createElement(E.Fragment,null,E.createElement(nX.V,{featureFlag:"org_trials_v1_ux"},E.createElement(nU,null),E.createElement(nL,null)),E.createElement(nX.V,null,E.createElement(nu,null)),E.createElement(nX.V,null,E.createElement(nq,null)),E.createElement(nX.V,null,E.createElement(r7,null)))});function nQ(){return null}var n0=r(172497),n1=r(439252),n2=r(9247),n3=r(669277),n4=r(547699),n6=r(20245),n8=r(255049),n9=r(329660),n5=r(609346),n7=r(838903),ie=r(343878),it=r(295202),ir=r(196532),ii=r(257817),ia=r(65373),io=r(35794),il=r(810373),is=r(721154),ic=r(654653),id=r(675162),iu=r(5453),ip=r(637635),im=r(925960),ih=r(275286),i_=r(723214),ig=r(421765),iE=r(249203),iy=r(751696),iv=r(656145),ib=r(422949),iI=r(312938),iT=r(222679),iw=r(365737),iS=r(706039),iC=r(614860),iO=r(818709),iA=r(787618);let iN=r(470986);function iL({editorType:e,isDisabled:t,isSelected:r,folder:n}){let i=(0,W.I0)(),a=iP(),o="slides"===e,{title:l,subtitle:s}="design"===e?{title:(0,em.t)("desktop_new_tab.design_card.title"),subtitle:(0,em.t)("desktop_new_tab.design_card.subtitle")}:"whiteboard"===e?{title:(0,em.t)("desktop_new_tab.figjam_card.title"),subtitle:(0,em.t)("desktop_new_tab.figjam_card.subtitle")}:{title:(0,em.t)("desktop_new_tab.slide_card.title"),subtitle:(0,em.t)("desktop_new_tab.slide_card.subtitle")},c=n?n.project.id:void 0,d=!!n&&("design"===e?!(0,rh.bw)((0,io.NV)(n.team),{type:rh.Xy.ADD_DESIGN_FILE}):!(0,rh.bw)((0,io.NV)(n.team),{type:rh.Xy.ADD_FIGJAM_FILE}));return E.createElement("div",{className:j()({"new_file_card--fileCard--O7OCx":!0,"new_file_card--fileCardSizeWithSlides--dqkOH":a,"new_file_card--disabledCard--HLDVs":t,"new_file_card--selectedCard--ia4R4":r}),onClick:function(){if(!t){if(d&&n&&(0,ii.of)(e)){i(eg.K4({type:iA.yd,data:{team:n.team,resource:iC.Q3.FILE,action:iO.XH.CREATE_FILE_FROM_DROPDOWN,editorType:e,currentPlan:iS.V.Plan.STARTER,upsellPlan:iS.V.Plan.PRO}}));return}i(n8.cn({editorType:e,projectId:c}))}},role:"button",tabIndex:0,"data-editor-theme":o?"piper":e,"data-preferred-theme":"dark"},E.createElement("div",{className:j()({"new_file_card--plus--W6UAz":!0,"new_file_card--plusWithSlides--y61SS":a,"new_file_card--plusOnSlidesCard--5u7bc":o})},E.createElement(eT.n,{svg:iN,className:"new_file_card--plusIcon--myaLa"})),E.createElement("div",{className:"new_file_card--title---ZPHj"},l),E.createElement("div",{className:j()({"new_file_card--subtitle--2pjnm":!0,"new_file_card--subtitleOnSlidesCard--q3cgU":o,"new_file_card--subtitleWithSlides--mvmUM":a})},s))}function iP(){return(0,id.W)()&&(0,w.BZ)().desktop_new_tab_piper}let iR="recent_files--separator--Ww027",ik="recent_files--thumbnail--ApY9s",iD="recent_files--placeholdersContainer--mAriX",iM="recent_files--fadeOut--A045K";var iF=((m=iF||{})[m.LOADING=0]="LOADING",m[m.TRANSITIONING=1]="TRANSITIONING",m[m.LOADED=2]="LOADED",m);function ix(e){return e.type===ie.YU.FILE?e.file:e.mainFile}function iU(e){let[t,r]=(0,E.useState)(e?2:0),n=(0,E.useRef)(null);return(0,E.useEffect)(()=>{e?(r(1),n.current=setTimeout(()=>{r(2),n.current=null},2e3)):(r(0),n.current&&clearTimeout(n.current))},[e,n]),t}function iB({recentItems:e,selectedItem:t}){let r=(0,W.I0)(),n=(0,et.xJ)(),i=(0,W.v9)(e=>e.currentUserOrgId),a=(0,W.v9)(e=>(0,eH.np)(e,{view:"recentFiles"})),o=(0,W.v9)(e=>e.activeFileUsers),l="loaded"===(0,n1.AA)(i).status,s=new Set;for(let t of e)s.add(ie.PI.getFavoriteResourceOrgId(t)??null);let c=Array(...s).sort(),d=(0,e9.vE)(()=>c.map(e=>({currentOrgId:e,currentTeamId:null})),[c]),u=(0,n3.YW)(ng.FileBrowserSidebarData,d),p=(0,E.useMemo)(()=>{let e=new Set;for(let t of u){let r=t.result;if("loaded"!==r.status)continue;let n=r.data.currentUser.favoritedFiles??[],i=r.data.currentUser.favoritedPrototypes??[];for(let t of n)t.file&&e.add(t.file.key);for(let t of i)t.prototype&&e.add(t.prototype.id)}return e},[u]),m=(0,e9.cj)(()=>(0,iu.We)(e.map(e=>e.type===ie.YU.FILE||e.type===ie.YU.REPO?ix(e).key:null)),[e],(e,t)=>{let r=new Set(e);for(let e of t){if(!r.has(e))return!1;r.delete(e)}return 0===r.size}),h=E.useMemo(()=>m.map(e=>({fileKey:e})),[m]),_=(0,n3.YW)(ng.ActiveFileUsersForFileView,h,{enabled:!0});(0,E.useEffect)(()=>{for(let e of _)if("loaded"===e.result.status&&e.result.data){let t=e.args.fileKey,n=(0,i_.o)(e.result.data);r(is.Wb({fileKey:t,users:n}))}},[r,m,_]);let g=(0,K.Dv)(ip.b),f=0!==e.length,y=iU(l&&!g),v=iU(l&&f&&!g);return E.createElement("div",{className:j()({"recent_files--fileList--2lPcn":!0,"recent_files--fileListWidthWithSlides--R7NAa":iP()})},E.createElement("div",{className:"recent_files--recentFilesHeaderContainer--bwBGr"},2!==y&&E.createElement(iz,{state:y}),0!==y&&E.createElement(E.Fragment,null,E.createElement("p",{className:"recent_files--recentFilesHeader--cQ-VC recent_files--primaryText--Csq5Q"},f?E.createElement(em.Tx,{id:"desktop_new_tab.recent_files_header"}):E.createElement(em.Tx,{id:"desktop_new_tab.no_recent_files_header"})),f&&E.createElement("p",{className:"recent_files--recentFilesLastViewedHeader--vcJDc recent_files--primaryText--Csq5Q"},E.createElement(em.Tx,{id:"desktop_new_tab.last_viewed_header"})))),E.createElement("div",{className:"recent_files--recentFilesContainer--fCLN8"},2!==v&&E.createElement(iZ,{state:v}),0!==v&&E.createElement("div",{className:"recent_files--loadedRecentFiles--lT-EL"},e.map(e=>{let r=ie.PI.getId(e);return E.createElement(E.Fragment,{key:r},E.createElement(iV,{item:e,activeFileUsers:o,favoritedItems:p,isSelected:t===r,user:n}))}))),0!==v&&E.createElement("a",{className:"recent_files--browseMoreLink--Ohk3y",href:a,onClick:function(e){(0,L.L9)("Desktop New Tab Browse More Recents"),e.preventDefault(),r(e2.fv({view:"recentFiles"}))}},E.createElement(em.Tx,{id:"desktop_new_tab.browser_more_recent_files_link"})))}function iV({item:e,activeFileUsers:t,favoritedItems:r,isSelected:n,user:i}){let a;let o=(0,W.I0)(),l=ie.PI.getName(e),s=(0,E.useRef)(null),[c,d]=(0,E.useState)(null);(0,E.useEffect)(()=>{s.current&&(s.current.offsetWidth<s.current.scrollWidth&&l?d(l):d(null))},[s,l]);let u=(0,E.useRef)(null);(0,E.useEffect)(()=>{if(n&&u.current){let e=window.getComputedStyle(u.current),t=parseInt(e.getPropertyValue("scroll-margin-top"))||0,r=parseInt(e.getPropertyValue("scroll-margin-bottom"))||0,n=u.current.getBoundingClientRect(),i=n.top<t,a=n.bottom>window.innerHeight-r;i?u.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):a&&u.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}},[n]);let p=(0,W.v9)(e=>e.dropdownShown),m=null,h=!1,_=[],g=null;if(e.type===ie.YU.FILE||e.type===ie.YU.REPO){let n=ix(e);a=(0,iE.qF)(n),h=r.has(n.key),m=E.createElement(iG,{file:n,item:e}),_=(0,i_.m)(t,i.id,n.key),g=n.key}else e.type===ie.YU.PROTOTYPE&&(a=e.prototype.url,h=!!e.prototype.id&&r.has(e.prototype.id),m=E.createElement(iH,{prototype:e.prototype,item:e}),g=e.prototype.id);let f=(null==p?void 0:p.type)===iw.C8&&(null==p?void 0:p.data.resourceId)===g,y=ie.PI.getAccessedAt(e);return E.createElement("div",{className:j()("recent_files--fileListItemAndStarContainer--v-8Uz",h&&"recent_files--isFavorited--GsBmn")},E.createElement("div",{className:f?"recent_files--favoriteStarContainerVisible--SzmQa recent_files--favoriteStarContainer--yT5h4":"recent_files--favoriteStarContainer--yT5h4",onClickCapture:e=>e.preventDefault()},m),E.createElement("a",{className:j()("recent_files--fileListItem--Czr-8",n&&"recent_files--selectedItem--q3sit"),href:a,onClick:function(t){if(t.preventDefault(),e.type===ie.YU.FILE||e.type===ie.YU.REPO){let t=ix(e);o(n8.nt({fileKey:t.key}))}else e.type===ie.YU.PROTOTYPE&&o(n8.vr({fileKey:e.prototype.file_key,pageId:e.prototype.page_id}))},ref:u},E.createElement(iW,{item:e}),E.createElement("p",{className:"recent_files--titleMetadata--G2Ju6 recent_files--primaryText--Csq5Q recent_files--metadata--MhlWS",ref:s,"data-tooltip-type":rf.fR.TEXT,"data-tooltip":c,dir:"auto"},l),E.createElement("p",{className:"recent_files--timestampMetadata--GvxiV recent_files--secondaryText---mq5y recent_files--metadata--MhlWS"},y?E.createElement(im.Lt,{date:y,capitalize:!0}):null),E.createElement(iy.U,{className:"recent_files--facePile--M1rjO",entityList:_,maxNumHeads:3,currentUser:i})))}function iG({file:e,item:t}){let r=(0,W.I0)(),n=E.useCallback((n,i,a)=>{let o={entrypoint:"desktop_new_tab_recents",favoriteId:i,sectionId:a,file:e,repoId:t.type===ie.YU.REPO?t.repo.id:void 0,fileBrowserFavorite:!0};n?r(ih.$P(o)):r(ih.u9(o))},[e,t,r]);return E.createElement(ib.M,{setFavorite:n,favoriteType:k.IK.FILE,resourceId:e.key,isDesktopNewTab:!0,orgId:ie.PI.getFavoriteResourceOrgId(t)??null,teamId:ie.PI.getFavoriteResourceTeamId(t)??null})}function iH({prototype:e,item:t}){let r=(0,W.I0)(),n=E.useCallback((t,n,i)=>{let a={entrypoint:"desktop_new_tab_recents",favoriteId:n,sectionId:i,prototype:e,fileBrowserEntryPoint:!0};t?r(ih.qO(a)):r(ih.Y2(a))},[e,r]);return e.id?E.createElement(ib.M,{setFavorite:n,favoriteType:k.IK.PROTOTYPE,resourceId:e.id,isDesktopNewTab:!0,orgId:ie.PI.getFavoriteResourceOrgId(t)??null,teamId:ie.PI.getFavoriteResourceTeamId(t)??null}):null}function iW({item:e}){let t=null,r=null,n=(0,ig.F)();if(e.type===ie.YU.FILE||e.type===ie.YU.REPO){let i=ix(e),{url:a,fullWidth:o,isLocked:l}=(0,iI.hz)(i),s=n(i),c="whiteboard"===i.editor_type?"recent_files--figjamBadge--quekD recent_files--fileIconTypeBadge--DBApO":i.last_published_at?"recent_files--libraryBadge--Lg-ZG recent_files--fileIconTypeBadge--DBApO":"recent_files--designBadge--DX59C recent_files--fileIconTypeBadge--DBApO";t=E.createElement(iv.aA,{type:s,size:iv.Sj.SMALL,className:c}),r=E.createElement(iI.mB,{additionalClassName:ik,editor_type:i.editor_type,client_meta:i.client_meta,thumbnail_url:a,isLocked:l,fullWidth:o,listView:!0})}else e.type===ie.YU.PROTOTYPE&&(t=E.createElement(iK,null),r=E.createElement(iT.e,{additionalClassName:ik,isLocked:!!e.prototype.fig_file.has_proto_link_password,thumbnail_url:e.prototype.thumbnail_url}));return E.createElement("div",{className:"recent_files--thumbnailContainer--WJlvr"},r,t)}function iK(){return E.createElement("div",{className:"recent_files--prototypeBadge--DKPgx recent_files--fileTypeBadge--XTpDJ"},E.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},E.createElement("path",{d:"M0 2C0 0.89543 0.895431 0 2 0H12C13.1046 0 14 0.895431 14 2V12C14 13.1046 13.1046 14 12 14H2C0.89543 14 0 13.1046 0 12V2Z"}),E.createElement("path",{d:"M4.5 10.5V3.5L10.5 7L4.5 10.5Z",fill:"var(--color-icon-desktopForeground, #ffffff)"})))}function iz({state:e}){let t=j()(iD,"recent_files--headerPlaceholderContainer--II265",1===e&&iM);return E.createElement("div",{className:t},E.createElement("div",{className:"recent_files--headerPlaceholder--4W0ry recent_files--placeholder--C3q68"}))}function iZ({state:e}){let t=[];for(let e=0;e<10;e++)t.push(E.createElement(E.Fragment,{key:e},E.createElement("div",{className:iR}),E.createElement("div",{className:"recent_files--placeholderRow--EKNLE"},E.createElement("div",{className:"recent_files--thumbnailPlaceholder--p3ZL6 recent_files--placeholder--C3q68"}),E.createElement("div",{className:"recent_files--titlePlaceholder--jISa4 recent_files--placeholder--C3q68"}),E.createElement("div",{className:"recent_files--timestampPlaceholder--SwyAW recent_files--placeholder--C3q68"}))));let r=j()(iD,1===e&&iM);return E.createElement("div",{className:r},t,E.createElement("div",{className:iR}))}let iY={type:"newDesignFile"},ij={type:"newFigjamFile"},i$={type:"newSlidesFile"},iq={type:"search",index:0},iX={type:"search",index:"see-all"};function iJ(e){return{type:"selectItem",item:e}}function iQ(e){return{type:"dispatchAction",callback:e}}function i0(){return{type:"stopEvent"}}function i1(){return{type:"ignore"}}function i2(e){return e===iY||e===ij||e===i$}var i3=r(472879),i4=r(834657);function i6(){var e,t;let r;let n=(0,W.I0)();(0,i3.vM)();let i=(0,W.v9)(e=>e.currentUserOrgId),a=(0,ir._Z)(i),o=(0,n1.AA)(i,[],!0).data,l=(0,n1.Y8)(i).data,s=(0,W.v9)(e=>e.recentRepos),c=(0,W.v9)(e=>e.selectedBranchKeyByRepoId),d=(0,W.v9)(e=>e.desktopNewTab.isCreatingFile),u=(0,W.v9)(e=>e.desktopNewTab.loadingBackgroundColor),[p,m]=(0,E.useState)(iq),h=E.useRef(null),[_,g]=(0,E.useState)(0),f=E.useRef(null),{searchResults:y}=(0,it.q)(),v=(0,it.j)(),b=(0,K.Dv)(ne.$e),I=b.data?b.data:r1.FQ.ORG,T=I===r1.FQ.ORG,w=(0,n9.Y8)(!!(0,K.Dv)(ne.O1).data,T),[S,C]=(0,E.useState)(void 0),O=[],A=null,N=(0,n3.mU)(ng.MoveDraftsTeamData,{orgId:null});if("loaded"===N.status){O=N.data.currentUser.teamEditRoles.map(e=>e.team).filter(e=>!!(e&&e.projects&&!e.deletedAt&&e.projects.length>0));let t=O[0],n=null==(e=O[0])?void 0:e.projects;r=O.length>0&&w,O.length>0&&n&&(null==n?void 0:n.length)>0&&(A=void 0===S?{team:t,project:n[0]}:S)}let L=(0,E.useRef)([]),P=(0,E.useMemo)(()=>{if(d)return L.current;let e=[];for(let t of o??[])e.push({type:ie.YU.FILE,file:t});for(let t of l??[])e.push({type:ie.YU.PROTOTYPE,prototype:t});for(let t of s){let r=t.files.find(e=>(0,n7.tj)(e,t.repo));r&&e.push({type:ie.YU.REPO,repo:t.repo,branches:t.files,accessed_at:t.timestamp,mainFile:r,selectedBranchKey:c[t.repo.id]||""})}return e.sort((e,t)=>{let r=ie.PI.getAccessedAt(e),n=ie.PI.getAccessedAt(t);return r&&n?-r.localeCompare(n):n?1:r?-1:0}),e.slice(0,10)},[o,l,s,c,d,L]);L.current=P,(0,E.useEffect)(()=>{let e=e=>{let t=function(e,t){if(!(null!==t.selectedItem))return e===il.sr.UP_ARROW||e===il.sr.DOWN_ARROW||e===il.sr.LEFT_ARROW||e===il.sr.RIGHT_ARROW?iJ(iY):i1();switch(e){case il.sr.UP_ARROW:return function({selectedItem:e,recentItems:t,searchResults:r,showSearchResults:n}){if("recent"===e.type){let r=ie.PI.getId(e.item),n=t.findIndex(e=>ie.PI.getId(e)===r);return -1===n?iJ(null):0===n?iJ(iq):iJ({type:"recent",item:t[n-1]})}return i2(e)?i0():"search"===e.type?n?0===r.length?i1():0===e.index?i0():"see-all"===e.index?iJ({type:"search",index:Math.max(r.length-1,0)}):e.index-1<r.length?iJ({type:"search",index:e.index-1}):iJ(iX):iJ(iY):i1()}(t);case il.sr.DOWN_ARROW:return function({selectedItem:e,recentItems:t,searchResults:r,showSearchResults:n}){if("recent"===e.type){let r=ie.PI.getId(e.item),n=t.findIndex(e=>ie.PI.getId(e)===r);return -1===n?iJ(null):n<t.length-1?iJ({type:"recent",item:t[n+1]}):i0()}return i2(e)?iJ(iq):"search"===e.type?n?0===r.length?i1():"see-all"===e.index?i0():e.index<r.length-1?iJ({type:"search",index:e.index+1}):iJ(iX):0!==t.length?iJ({type:"recent",item:t[0]}):i1():i1()}(t);case il.sr.LEFT_ARROW:return function({selectedItem:e,isFigJamDisabled:t}){return e===ij?iJ(iY):e===i$?t?iJ(iY):iJ(ij):i1()}(t);case il.sr.RIGHT_ARROW:return function({selectedItem:e,isFigJamDisabled:t}){return e!==iY||t?e===ij&&(0,id.W)()?iJ(i$):i1():iJ(ij)}(t);case il.sr.ENTER:return function({selectedItem:e,searchResults:t}){if(e===iY)return iQ(e=>e(n8.cn({editorType:k.gg.DESIGN})));if(e===ij)return iQ(e=>e(n8.cn({editorType:k.gg.WHITEBOARD})));if(e===i$)return iQ(e=>e(n8.cn({editorType:"slides"})));if("recent"===e.type)switch(e.item.type){case ie.YU.FILE:case ie.YU.REPO:{let t=e.item;return iQ(e=>e(n8.nt({fileKey:ix(t).key})))}case ie.YU.PROTOTYPE:{let t=e.item.prototype;return iQ(e=>e(n8.vr({fileKey:t.file_key,pageId:t.page_id})))}}if("search"===e.type){let r=e.index;if("see-all"===r)return iQ(e=>e(n8.GV()));if(r>=t.length)return i1();let n=t[r];return iQ(e=>{e(is.gz({file:n.model})),e(n8.WN({result:n,index:r,clickAction:ic.ol.Query.ClickAction.ENTER}))})}return i1()}(t);case il.sr.ESCAPE:return iJ(null)}return i1()}(e.keyCode,{selectedItem:p,recentItems:P,searchResults:y,isFigJamDisabled:a,showSearchResults:v});switch(t.type){case"selectItem":m(t.item),e.stopPropagation(),e.preventDefault();break;case"dispatchAction":t.callback(n),e.stopPropagation(),e.preventDefault();break;case"stopEvent":e.stopPropagation(),e.preventDefault()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,a,v,P,y,p]);let R=(0,n2.D)(p);(0,E.useEffect)(()=>{var e,t;let r=(null==p?void 0:p.type)==="search",i=(null==R?void 0:R.type)==="search";i&&!r?(null==(e=f.current)||e.blur(),n(n8.LB(!1))):!i&&r&&(null==(t=f.current)||t.focus(),n(n8.LB(!0)))},[n,p,R,f]),(0,E.useEffect)(()=>{let e=()=>m(null);return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),(0,E.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&h.current&&h.current.scrollTo({top:0})};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[h]);let D=(0,E.useCallback)(()=>{h.current&&g(h.current.scrollTop)},[h]),M=(0,E.useCallback)(()=>m(iq),[]),F=(0,n0.F)(i4.QQ),x=(0,et.dO)();(0,nR.aM)((0,n5.Tk)({userId:x??""}),{enabled:null!=x});let U=r?A:null;return u?E.createElement(i8,{backgroundColor:u}):E.createElement("div",{ref:h,className:j()("desktopNewTabViewHideable",i4.lX),onScroll:D},E.createElement("div",{className:j()({[i4.BY]:!0,[i4.Vp]:_>-F,[i4.U0]:r})},E.createElement("div",{className:iP()?i4.mg:i4.QX},r?"loaded"===N.status?E.createElement("div",{className:i4.b6},E.createElement("div",{className:i4.ei},(0,em.t)("desktop_new_tab.create_file_in")),E.createElement(io.L9,{buttonText:(t=A,E.createElement(E.Fragment,null,t&&E.createElement("div",{className:nk.cx.h16.w16.flex.itemsCenter.justifyCenter.$},E.createElement(n4.Ir,{size:{imgSize:n4.DZ.SMALL,fallbackSize:n4.DZ.XSMALL},fallbackDisplay:n6.D.HIDDEN,team:{id:t.team.id}})),E.createElement("div",{className:i4.cL},t?t.team.name+" / "+t.project.path:(0,em.t)("desktop_new_tab.drafts")))),teamsWithEditableProjects:O,dropdownType:io.AD.DESKTOP_NEW_TAB,onSelectOverride:C})):E.createElement("div",{className:i4.b6},E.createElement("div",{className:i4.ei},E.createElement("div",{className:i4.lq}))):"",E.createElement("div",{className:i4.HC},E.createElement(iL,{editorType:k.gg.DESIGN,isSelected:p===iY,folder:U}),E.createElement(iL,{editorType:k.gg.WHITEBOARD,isDisabled:a,isSelected:p===ij,folder:U}),iP()&&E.createElement(iL,{editorType:ii.QK,isSelected:p===i$,folder:U})),E.createElement(ia.Nu,{searchBarRef:f,selectedSearchResultIndex:(null==p?void 0:p.type)==="search"?p.index:0,onFocusSearchBar:M}))),E.createElement("div",{className:i4.Aw},E.createElement(iB,{recentItems:P,selectedItem:(null==p?void 0:p.type)==="recent"?ie.PI.getId(p.item):null})))}function i8({backgroundColor:e}){return E.createElement("div",{className:j()(i4.lX),style:{backgroundColor:e}})}var i9=r(556928);let i5=r(328630);function i7(e){let[t,r]=(0,E.useState)(!1);(0,E.useEffect)(()=>{let e=e=>{e.keyCode===il.sr.E&&e.ctrlKey&&e.shiftKey&&e.altKey&&(e.preventDefault(),e.stopPropagation(),r(!t))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t]);let n=(0,W.v9)(e=>e.experimentEvents);return t?E.createElement("div",{className:"experiment_debugger--modal--WDQ0L"},E.createElement("div",{className:"experiment_debugger--header--fCnJm"},E.createElement("div",{className:"experiment_debugger--modalTitle--SkCLK"},"Experiment debugger"),E.createElement("button",{onClick:()=>r(!1)},E.createElement(eT.n,{svg:i5}))),n.map(e=>E.createElement("div",{key:e.experimentId},E.createElement("div",{className:"experiment_debugger--experimentName--YrEp2"},e.experimentId),E.createElement("div",null,"treatment: ",e.treatmentId),"object"==typeof e.seed&&E.createElement(E.Fragment,null,E.createElement("div",null,"seedType: ",e.seed.type),E.createElement("div",null,"seedId:"," ",e.seed.type===i9.i_.USER?"currentUserId":e.seed.id)),"object"!=typeof e.seed&&E.createElement("div",null,"seed: ",e.seed),E.createElement("div",null,"isWinner: ",e.isWinner.toString()),E.createElement("div",null,"from override: ",e.fromOverride.toString())))):null}var ae=r(200273),at=r(297296),ar=r(249683),an=r(691236),ai=r(198138),aa=r(644383),ao=r(299370),al=r(402524),as=r(98454);r(153109),r(605271),r(97214);var ac=r(807012);let ad=E.createContext({shouldDiff:()=>!1,handleDiffReport:()=>({didDiff:!1})});function au({children:e,onDiff:t}){let r=E.useRef({}),n=function(e){let t=(0,ac.Pe)();return E.useMemo(()=>e??((e,r,n)=>{t("LiveGraph Diff",{diffId:e,expectedIds:r.expectedIds,actualIds:r.actualIds,removedIds:r.removedIds,addedIds:r.addedIds,commonIds:r.commonIds,changedIds:r.changedIds,unchangedIds:r.unchangedIds,removedPaths:r.removedPaths,addedPaths:r.addedPaths,changedPaths:r.changedPaths,...n})}),[e,t])}(t),i=E.useMemo(()=>({shouldDiff:e=>!r.current[e],handleDiffReport:(e,t,i)=>(r.current[e]=!0,t.hasDiffs)?(n(e,t,i),{didDiff:!0,report:t,args:i}):{didDiff:!1}}),[n]);return E.createElement(ad.Provider,{value:i},e)}var ap=r(161939),am=r(925705),ah=r(933858),a_=r(615537),ag=r(485091);let af=(0,a_.Hf)(e=>{var t,r;if("loaded"!==e.status)return{result:e};let n=e.data.styleWithDestinationAssetV2;if(!n)return{result:(0,n3.Pt)([])};let{file:i,hubFile:a,...o}=n.destinationAsset||n;return i?{result:(0,n3.wl)({...(0,ag.j2)(o,a?{key:a.id}:i),fileName:i.name}),movedAssetData:n.destinationAsset?{sourceFileName:null==(t=n.file)?void 0:t.name,sourceKey:(0,at.hx)(n.key),destinationKey:(0,at.hx)(n.destinationAsset.key),destinationFileName:null==(r=n.destinationAsset.file)?void 0:r.name}:void 0,legacySourceStyle:n.movedByFigma?{key:(0,at.hx)(n.key),version:(0,at.IT)(n.contentHash)}:void 0}:{result:(0,n3.Pt)([])}});var aE=r(464368),ay=r(900710),av=r(531640);let ab=e=>{let t={};return e.forEach(({args:e,result:r})=>{t[e.key]=af(am.IE.from(r))}),t};function aI(){return function(){let e=(0,W.I0)(),t=(0,ae.uC)(),r=(0,aE.at)(),n=(0,an.ec)(t),i=(0,W.v9)(av.Mn),a=E.useMemo(()=>i.map(e=>({key:e,openFileKey:t})),[i,t]),o=(0,n3.YW)(ng.StyleByKey,a),l=E.useMemo(()=>ab(o),[o]),s=(0,W.v9)(ay.tg),c=(0,W.v9)(ay.aQ),d=(0,W.v9)(ay.tg),u=E.useMemo(()=>{if(!r||"loaded"!==n.status)return{};let e=new Set((0,an.PD)(n).map(e=>e.node_id)),t=[...new Set([...c,...d])];return aT({allStyles:t,publishedStyleNodeIds:e,sceneGraph:r})},[c,n,r,d]),p=E.useMemo(()=>Object.keys(u).map(e=>({key:e,openFileKey:t})),[u,t]),m=(0,n3.YW)(ng.StyleByKey,p),h=E.useMemo(()=>ab(m),[m]);E.useEffect(()=>{let t=Object.entries(h).filter(([e,{movedAssetData:t}])=>{let r=t&&u[t.sourceKey];return r&&s.includes(r)}),r=[...Object.entries(l),...t],n=r.reduce((e,[t,{result:r}])=>{if("loaded"===r.status){if(r.data.unpublished_at)return e;e[r.data.key]=r}else e[t]=r;return e},Object.create(null));e(ar.G_(n))},[e,s,h,l,u]),E.useEffect(()=>{let{sourceAssetKeyToDestinationKey:t,sourceAssetKeyToFileName:r,destinationStyleKeyToLegacySourceStyle:n}=function(e){let t=Object.create(null),r=Object.create(null),n=Object.create(null);for(let[i,{result:a,movedAssetData:o,legacySourceStyle:l}]of Object.entries(e))o&&(t[(0,at.HE)(i)]=o.destinationKey,o.sourceFileName&&(r[(0,at.HE)(i)]=o.sourceFileName)),l&&"loaded"===a.status&&(n[(0,at.HE)(a.data.key)]=l);return{sourceAssetKeyToDestinationKey:t,sourceAssetKeyToFileName:r,destinationStyleKeyToLegacySourceStyle:n}}(l);e(ar.ol(t)),e(ar.nl(r)),e(ar.P_(n))},[e,l]),E.useEffect(()=>{let t=Object.create(null),r=Object.create(null);for(let{movedAssetData:e}of Object.values(h)){if(!e)continue;let n=u[e.sourceKey];n&&(t[n]=e.destinationKey,e.destinationFileName&&(r[n]=e.destinationFileName))}e(ar.Xg(t)),e(ar.EW(r))},[e,s,h,u])}(),null}let aT=(0,ah.Py)(({allStyles:e,publishedStyleNodeIds:t,sceneGraph:r})=>e.reduce((e,n)=>{var i;if(t.has(n))return e;let a=(null==(i=r.get(n))?void 0:i.styleKey)??null;return a&&(e[a]=n),e},Object.create(null)));function aw({children:e,maxSubscriptionsBeforeCleanup:t}){return!function(){let e=(0,W.I0)(),t=(0,ae.uC)(),r=(0,n3.mU)(ng.LegacySourceStyleData,{fileKey:t??""});E.useLayoutEffect(()=>{var t;if("loaded"!==r.status)return;let n=null==(t=r.data.file)?void 0:t.stylesWithLegacySourceAssets;if(!n)return;let i=Object.create(null);for(let e of n)e.legacySourceAsset&&(i[(0,at.hx)(e.legacySourceAsset.key)]=(0,at.hx)(e.key));e(ar.Dt(i))},[e,r])}(),E.createElement(aS,{maxSubscriptionsBeforeCleanup:t},(0,w.BZ)().ds_server_side_publishing&&E.createElement(aO,null),E.createElement(aI,null),e)}function aS({children:e,maxSubscriptionsBeforeCleanup:t}){var r;let n=null==(r=(0,ae.CA)())?void 0:r.canEdit;return E.createElement(ap.AS,null,n&&E.createElement(aC,null),E.createElement(an.uZ,{maxSubscriptionsBeforeCleanup:t},E.createElement(au,null,e)))}function aC(){return(0,ap.xZ)(),null}function aO(){return!function(){let e=(0,W.I0)(),t=(0,W.v9)(e=>e.library.publishProgress),[r,n]=E.useState(0),[i,a]=E.useState(void 0),[o,l]=E.useState(null),s=E.useRef(200),c=E.useMemo(()=>t.state===eE.L_.UPLOADING?t.libraryPublishId:null,[t]);o!==c&&(l(c),n(0),a(void 0));let d=(0,n3.mU)(ng.LibraryPublish,{id:c||""},{enabled:!!c}),u=E.useMemo(()=>{if("loaded"!==d.status)return d;let{libraryPublishV2:e}=d.data;return e?(0,n3.wl)({libraryPublishV2:{...e,assetSuccessCount:parseInt(e.assetSuccessCount??"0",10),assetFailureCount:parseInt(e.assetFailureCount??"0",10),assetPendingCount:parseInt(e.assetPendingCount??"0",10)}}):(0,n3.wl)({libraryPublishV2:null})},[d]),p=(0,ae.uC)();E.useEffect(()=>{e((0,al.Ny)())},[e,p]);let m=E.useMemo(()=>"publishStartMs"in t?t.publishStartMs:null,[t]),h=E.useRef(null);E.useEffect(()=>{if(!m)return;let e=new TaskController({priority:"user-blocking"}),t=()=>{let e=performance.now()-m,t=Math.floor(e/36e5);t!==h.current&&(h.current=t,(0,ai.ml)("publish.periodic_progress.hours",t))},r=Symbol("__PUBLISH_COMPLETE__"),n=()=>{scheduler.postTask(()=>{t(),n()},{delay:36e5,signal:e.signal}).catch(e=>{if(e!==r)throw e})};return n(),()=>{t(),h.current=null,e.abort(r)}},[m]),E.useEffect(()=>{if(!(0,w.BZ)().ds_server_side_publishing||t.state!==eE.L_.UPLOADING||"loading"===u.status||"disabled"===u.status||!c||"errors"===u.status)return;let e=u.data.libraryPublishV2;if(!e||e.error)return;let r=setInterval(()=>{n(t=>{if(e.count<0)return 0;let r=e.assetSuccessCount+e.assetFailureCount,n=t+1;s.current=200*Math.min((n+1)/(r+1),1);let i=Math.min(r+200,e.count)-1;return Math.max(0,Math.min(n,i))})},s.current);return()=>{clearInterval(r)}},[c,t.state,u]),E.useEffect(()=>{if(!(0,w.BZ)().ds_server_side_publishing||t.state!==eE.L_.UPLOADING||"loading"===u.status||"disabled"===u.status)return;if(!c){console.error("Expected libraryPublishId to be set during server-side publish");return}let n=r=>{(0,al.U4)(t,r??{__tag:"UNKNOWN"},t.publishType===eE.QO.UNPUBLISH,e,t.savepoint,!0)},o=()=>{let r=(0,em.t)("design_systems.publish_actions.reload");e(aa.R.enqueue({type:"library-publish",error:!0,message:t.publishType===eE.QO.UNPUBLISH?(0,em.t)("design_systems.publish_actions.unpublish_failed",{reason:r}):(0,em.t)("design_systems.publish_actions.publish_failed",{reason:r})}))};if("errors"===u.status){n(),o();return}let l=u.data.libraryPublishV2;if(!l){console.error("Error fetching library publish data from LG",u.errors),n(),o();return}if(l.error){let r=(l.error,(0,em.t)("design_systems.publish_actions.reload"));n(l.assetFailureCount),e(aa.R.enqueue({type:"library-publish",error:!0,message:t.publishType===eE.QO.UNPUBLISH?(0,em.t)("design_systems.publish_actions.unpublish_failed",{reason:r}):(0,em.t)("design_systems.publish_actions.publish_failed",{reason:r})}));return}let s=l.count<0;if(s||(a(r=>(r||e(aa.R.enqueue({type:"library-publish",message:t.publishType===eE.QO.UNPUBLISH?(0,em.t)("design_systems.publish_actions.unpublishing_library"):(0,em.t)("design_systems.publish_actions.publishing_library"),icon:ao.B4.PROGRESS,progressKey:"library-publish"})),l.count)),e(as.t({key:"library-publish",progress:r,total:i||0}))),s||l.count!==l.assetFailureCount+l.assetSuccessCount)return;if(l.firstAssetError){n(l.assetFailureCount);let r=(()=>{switch(l.firstAssetError){case"design_systems.publish_actions.reload":default:return(0,em.t)("design_systems.publish_actions.reload");case"design_systems.publish_actions.payload_too_large":return(0,em.t)("design_systems.publish_actions.payload_too_large");case"design_systems.publish_actions.validations_failed":return(0,em.t)("design_systems.publish_actions.validations_failed")}})();e(aa.R.enqueue({type:"library-publish",error:!0,message:t.publishType===eE.QO.UNPUBLISH?(0,em.t)("design_systems.publish_actions.unpublish_failed",{reason:r}):(0,em.t)("design_systems.publish_actions.publish_failed",{reason:r})}));return}let d=t.numSkippedPriorToPublish+l.assetFailureCount;(0,al.U4)(t,d,t.publishType===eE.QO.UNPUBLISH,e,t.savepoint,!1)},[e,c,t,u,r,i])}(),null}var aA=r(853915),aN=r(342689),aL=r(596085),aP=r(947168),aR=r(19516);r(241051);var ak=((h=ak||{})[h.FILE_BROWSER_LOADED=0]="FILE_BROWSER_LOADED",h[h.CLOSE_MODAL=1]="CLOSE_MODAL",h);class aD{constructor(e){this.type=e}}function aM(e){preloadAuthIFrame(),window.removeEventListener("mousemove",aM),window.removeEventListener("scroll",aM),window.removeEventListener("keydown",aM),window.removeEventListener("click",aM),window.removeEventListener("touchstart",aM)}var aF=r(646472),ax=r(450473),aU=r(801455);function aB(e){let[t,r]=E.useState(!1),n=(0,W.v9)(e=>e.modalShown);(0,aR.O)(()=>{var t;e.showModal(),document.body.style.backgroundColor="transparent",null==(t=window.parent)||t.postMessage(new aD(ak.FILE_BROWSER_LOADED),"*")});let i=()=>{var e;null==(e=window.parent)||e.postMessage(new aD(ak.CLOSE_MODAL),"*")};return E.useEffect(()=>{!n&&t&&i(),n&&n.type===e.modalType&&r(!0)},[t,n,e.modalType]),E.createElement("div",{onClick:i})}(e=>{function t(e){let t=(0,W.I0)();return E.createElement(aB,{showModal:()=>t((0,eg.K4)({type:aU.p,data:{tab:e.tab}})),modalType:aU.p.type})}e.AccountSettingsModalInIframe=function(){return E.createElement(t,{tab:aU.m.ACCOUNT})}})(f||(f={}));let aV={[eq.Bx.ACCOUNT_SETTINGS]:f.AccountSettingsModalInIframe,[eq.Bx.UNIVERSAL_PUBLISHING]:function(){let e=(0,W.I0)();return E.createElement(aB,{showModal:()=>e((0,eg.K4)({type:ax.W,data:{source:aF.M4.IFRAME}})),modalType:ax.W.type})}};var aG=r(36940),aH=r(44926),aW=r(782051),aK=r(828867);let az="locked_account_view--addAccountButton--M2CKK",aZ=r(932255);function aY(){let e=(0,W.I0)(),t=(0,W.v9)(e=>e.user),r=(0,W.v9)(e=>e.authedUsers),n=(0,W.v9)(e=>e.orgById),i=(0,W.v9)(e=>e.currentUserOrgId),a=i?n[i]:null,o=r.orderedIds.filter(e=>(null==t?void 0:t.id)!==e).map(e=>r.byId[e]);E.useEffect(()=>{!function(){let e=document.getElementById("filebrowser-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},1e3))}()}),(0,L.L9)("browser_locked_account_screen_viewed",{user:null==t?void 0:t.id,org:i});let l=e=>E.createElement("div",{className:"locked_account_view--header--5ANme"},a?E.createElement("div",{className:"locked_account_view--loadingAvatarContainer--RcSO0"},E.createElement(aK.Kn,{entity:a,size:54}),E.createElement("div",{className:"locked_account_view--spinnerContainer--qmoqQ"},E.createElement(aW.TK,null))):E.createElement("div",{className:"locked_account_view--worldIllo--ZgRY9"},E.createElement(eT.n,{svg:aZ,useOriginalSrcFills_DEPRECATED:!0})),E.createElement("div",{className:"locked_account_view--title--zZnPc"},E.createElement(em.Tx,{id:"locked_org.title"})),E.createElement("div",{className:"locked_account_view--description--FgKxX"},e())),s=()=>{T.default.redirect("/login?cont=","_blank")};return E.createElement(e$,{pageType:"external"},E.createElement("div",{className:"locked_account_view--pageContainer--fq6gF","data-testid":"LockedAccountView"},E.createElement("div",{className:"locked_account_view--contentContainer--pfiqF"},o.length>0?E.createElement(aH.h,{dispatch:e,header:l(()=>a?E.createElement(em.Tx,{id:"locked_org.description_no_other_accounts",orgName:a.name}):E.createElement(em.Tx,{id:"locked_org.description_no_other_accounts_no_org"})),users:o,onUserSelect:t=>{e(aG.Y.complete({userId:t}))},onChangeAccount:s,footer:E.createElement(em.Tx,{id:"locked_org.footer",addAnotherLink:E.createElement(X.Xd,{defaultClass:az,onClick:s,"data-testid":"add-account-button"},E.createElement(em.Tx,{id:"locked_org.footer_button"}))})}):E.createElement("div",{className:"locked_account_view--loginAccount--VEvAN"},l(()=>a?E.createElement(em.Tx,{id:"locked_org.description",orgName:a.name}):E.createElement(em.Tx,{id:"locked_org.description_no_org"})),E.createElement("div",{className:"locked_account_view--addAccountText--zFHaY"},E.createElement(em.Tx,{id:"locked_org.footer_no_other_accounts",addAnotherLink:E.createElement(X.Xd,{defaultClass:az,onClick:s,"data-testid":"add-account-button"},E.createElement(em.Tx,{id:"locked_org.footer_no_other_accounts_button"}))}))))))}function aj(e){let t=(0,W.v9)(e=>e.notifications),r=(0,eG.Ui)(),n=(0,ri._l)(),i=(0,W.I0)();return E.createElement(eM,{recordingKey:e.recordingKey,notifications:t,hideHelpWidget:r,hasMobileNativeToolbar:n,dispatch:i})}let a$=E.memo(function(){let e=(0,V.A6)(),t=(0,W.v9)(ro.kL),r=(0,eH._Z)(e);if(r&&t)return E.createElement(aY,null);if("fullscreen"===e.view)return e.postingToFeed?E.createElement(aP.P,null):E.createElement(rn,null);if("figmascope"===e.view)return E.createElement(tq,null);if("figjamTry"===e.view)return E.createElement(e6,null);if("desktopNewTab"===e.view)return E.createElement(i6,null);if("prototype"===e.view)throw Error("Unexpected prototype view");if(e===eK.r_)return E.createElement(E.Fragment,null);else if("modalInIFrame"===e.view){let t=aV[e.modalInIFrameType];return E.createElement(t,null)}return E.createElement(t7,null)});function aq(e){let t=(0,V.A6)(),r=(0,K.Dv)(eB.M);if("fullscreen"===t.view&&"ok"!==r){let{type:e,sentryId:t}=r;return"oom"===e?E.createElement(ez.l,null):E.createElement(z.NL,{sentryId:t})}return E.createElement(E.Fragment,null,e.children)}let aX=E.memo(function(){let e=(0,W.I0)(),t=(0,W.v9)(e=>e.flashes),r=(0,V.A6)(),n=(0,W.v9)(e=>e.interactionTestDialogShown),i=(0,W.v9)(e=>e.progress),a=(0,W.v9)(e=>e.visualBell),o=(0,W.v9)(e=>e.blockedUILoadingIndicator),l=(0,W.v9)(e=>e.mirror.appModel.showUi),s=(0,ee.Ni)(),c=(0,ee.Oe)();E.useLayoutEffect(()=>{let e=()=>{setTimeout(()=>aL.Qu.focusIfUnfocused())};return document.body.addEventListener("blur",e,!0),()=>{document.body.removeEventListener("blur",e,!0)}},[]);let d="communityHub"===r.view&&"hubFileEmbed"===r.subView&&r.hubFileId||null;return(0,t2.R)()?E.createElement(t2.M,{dispatch:e}):d?E.createElement(rk,{hubFileId:d}):(0,eU._u)(r)?E.createElement(eJ,null):E.createElement(t1.s,{recordingKey:"inAppPage"},E.createElement(aq,null,E.createElement(rl.$,null,E.createElement(aw,null,E.createElement(eV.W9,null,E.createElement(z.SV,{boundaryKey:"InAppPage",fallback:z.NY.DEFAULT_FULL_PAGE,hasCustomWASMBuild:B.hU},E.createElement(a$,null)),E.createElement(eu.M,{flashes:t}),E.createElement(ez.l,null),l&&E.createElement(aj,{recordingKey:"notificationsView"}),E.createElement(eF.c,{dispatch:e,progress:i,visualBell:a,visualPulseEnabled:"fullscreen"===r.view,bottomOffset:s,getMobileNativeBottomOffset:c}),E.createElement(aN.h0,{getLinkMetadata:ex.n1}),E.createElement(Z.J,{blockedUILoadingIndicator:o,dispatch:e}),E.createElement(t6.oq,null),E.createElement(t4.Z,null),E.createElement(nJ,null),E.createElement(rO,null),(0,w.rz)()&&E.createElement(i7,null),n&&null,"fullscreen"===r.view&&E.createElement(t3.I,null),E.createElement(nQ,null),E.createElement(eW.E,null,E.createElement(ra.er,null)),E.createElement(ed,null),E.createElement(aA.hq,null))))))});var aJ=r(239299),aQ=r(571529),a0=r(805992),a1=r(921141),a2=r(330509),a3=r(521910),a4=r(6144),a6=r(579006);let a8="user_notifications_desktop_dropdown_container--icon--GXtYp";var a9=r(125865);function a5(e){let{notificationFeedMap:t,isFetchingNotifications:r,markAllAsReadFn:n,updateNotification:i}=(0,a2.WL)(!1,e.selectedPlan),a=(0,W.I0)(),o=[...t.values()],l=E.useMemo(()=>({shouldShowChevron:a6.JP,onClick:e=>!!(0,a6.JP)(e)&&(a(e2.fv({view:"feed",quickReplyInfo:(0,a6.K3)(e)||void 0})),!0),onHover:te.ZT}),[a]);return E.createElement(a3.w.Provider,{value:l},E.createElement("div",{className:"user_notifications_desktop_dropdown_container--scrollContainer--D-nb8",onMouseDown:e=>{e.stopPropagation()}},(0,a2.dw)(r,o)&&E.createElement(a2.c1.Header,{currentPlanFilter:e.selectedPlan===a2.U8?a4.U7:e.selectedPlan,isFetchingNotifications:r,showMarkAllAsRead:!0,markAllAsReadFn:n},E.createElement("div",{className:a9.Q6},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?"":(0,em.t)("navbar.workspaces.notifications_unread",{unreadCount:t})}(o))),E.createElement(a2.c1.Feed,{notifications:o,currentPlanFilter:e.selectedPlan===a2.U8?a4.U7:e.selectedPlan,isFetchingNotifications:r,inCommunity:!1,fillParent:!0,updateNotificationCallback:i,inDesktopTray:!0})))}let a7=r(910752),oe=r(315116),ot=r(400244);function or(){let e=(0,W.I0)(),{userNotifications:t,currentOrgId:r,selectedView:n,userStateLoaded:i,user:a}=(0,rs.c)(e=>({userNotifications:e.userNotifications,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userStateLoaded:e.userStateLoaded,user:e.user}));(0,ep.hu)("feed"===n.view,"UserNotificationDesktopDropdownContainer: wrong view, quick replies may not work");let o=n.quickReplyInfo,[l,s]=E.useState("top"),c=(0,w.BZ)().ps_benchmark;(0,E.useEffect)(()=>{var i,o,l,s;let d=a&&t&&!!(null==(s=null==(l=t.userBellStates)?void 0:l[a.id])?void 0:s[a2.U8]);null==(i=aJ.Gu)||i.setBell(!!d),null==(o=aJ.Gu)||o.setListener({name:"changeOrg",listener:t=>{r!==t&&!c&&a&&e(e2.NO({workspace:{orgId:t,userId:a.id},view:n}))}})},[r,e,a,t,t.userBellStates,n,c]);let[d,u]=E.useState(0);(0,E.useEffect)(()=>{var e;null==(e=aJ.Gu)||e.setListener({name:"openTray",listener:()=>{var e;u(d+1),s((null==(e=aJ.Gu)?void 0:e.getAlignment())||"top")}})},[e,s,u,d]);let[p,m]=E.useState(a2.U8);return((0,E.useEffect)(()=>{let t=()=>{(0,aJ.p5)(1)&&o&&e(e2.fv({view:"feed"}))};return window.addEventListener("blur",t),()=>{window.removeEventListener("blur",t)}}),i)?E.createElement("div",{className:"user_notifications_desktop_dropdown_container--page--Fae6Z"},E.createElement("div",{className:`user_notifications_desktop_dropdown_container--container--BaYko ${"top"===l?"user_notifications_desktop_dropdown_container--containerFromTop--sEplE":""} ${aQ.ZP.windows?"user_notifications_desktop_dropdown_container--windows--29Gaf":""} ${"bottom"===l?"user_notifications_desktop_dropdown_container--containerFromBottom--yHzl-":""}`},E.createElement("div",{className:"user_notifications_desktop_dropdown_container--navbarContainer--IDPJD text--fontPos11--2LvXf text--_fontBase--QdLsd"},E.createElement("div",{className:"user_notifications_desktop_dropdown_container--title---9ewd ellipsis--ellipsis--Tjyfa"},E.createElement(a4.p4,{currentPlanFilter:p===a2.U8?a4.U7:p,onPlanFilterUpdate:e=>{e===a4.U7&&(e=a2.U8),m(e)}})),E.createElement("a",{href:"/files/recent",className:`${a8} user_notifications_desktop_dropdown_container--iconNoFill--f6O2W`},E.createElement(a0.f,{svg:a7,fallbackSvg:oe})),(0,aJ.p5)(1)&&a&&E.createElement("a",{href:`/files/user/${a.id}/settings?tab=notifications`,className:`${a8}`},E.createElement(a0.f,{svg:ot,fallbackSvg:ot})),a&&E.createElement("div",{style:tr.sx.w24.h24.p8.pr0.$},E.createElement(n4.Yt,{user:a}))),E.createElement("div",{className:"user_notifications_desktop_dropdown_container--notificationContainer--j2B9l text--fontPos11--2LvXf text--_fontBase--QdLsd"},o&&o.threadId&&o.fileKey?E.createElement(a1.P,{quickReplyInfo:o,onClose:()=>{e(e2.fv({view:"feed"}))},closeIcon:"chevron-left-32"}):(!aJ.Gu||d>0)&&E.createElement(a5,{selectedPlan:p,key:d})))):null}var on=r(399914);let oi=(0,I.P)();!function(e){if(!(0,w.BZ)().web_vitals_report)return;let t=T.default.location.pathname+T.default.location.search,r=!!document.querySelector('meta[name="is_preload_streaming"]'),n=!!document.querySelector('meta[name="is_serving_resized_image"]');function i(i){let a={name:i.name,google_rating:i.rating,navigation:i.navigationType,id:i.id,value:i.value,initialPath:t,normalized_current_path:(0,P.y2)(T.default.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:r,resized_images:n,statsig_client_bootstrap:(0,w.YV)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,w.Gm)().statsig_bootstrap_values,has_fetch_recent_preload:!!(0,w.BZ)().preload_recent_files,is_webpack:!!(0,w.BZ)().serve_webpack};(0,L.L9)("Web Vital Metrics",a,{forwardToDatadog:!0,sendAsBeacon:!0})}function a(i,a){let o={name:a,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:i.timeStamp,initialPath:t,normalized_current_path:(0,P.y2)(T.default.location.pathname),id:(0,R.k)(),bundle:e,used_codesplitting:!0,bundle_streaming:r,resized_images:n};(0,L.L9)("Web Vital Metrics",o,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,N.Fu)(i),(0,N.NO)(i),(0,N.a4)(i),(0,N.mw)(i),(0,N.mr)(i),(0,N.Yn)(i),document.addEventListener("DOMContentLoaded",e=>a(e,"DCL")),window.addEventListener("load",e=>a(e,"LOAD"))}("figma_app"),(0,w.BZ)().potential_chunk_cache_metric&&window.addEventListener("load",()=>{let e=performance.getEntriesByType("resource"),t=e.filter(e=>"script"===e.initiatorType),r=t.reduce((e,t)=>(e.compressed+=t.encodedBodySize,e.uncompressed+=t.decodedBodySize,e),{compressed:0,uncompressed:0}),n=t.filter(e=>0===e.transferSize),i=n.reduce((e,t)=>(e.compressed+=t.encodedBodySize,e.uncompressed+=t.decodedBodySize,e),{compressed:0,uncompressed:0});console.log(`Loaded ${t.length} scripts (${r.compressed}b), ${n.length} from cache (${i.compressed}b)`),(0,L.L9)("scripts_loaded",{entry:"figma_app",totalScripts:t.length,totalSizeCompressed:r.compressed,totalSizeUncompressed:r.uncompressed,cachedScripts:n.length,cachedSizeCompressed:i.compressed,cachedSizeUncompressed:i.uncompressed},{forwardToDatadog:!0})}),(0,B.O_)();let oa=!1;function oo(){let e=(0,V.fh)(),t=(0,F.m)();return(0,x.$o)(),"prototype"!==e||(0,A.hQ)()||oa||((0,C.Jz)(O.k.PROTOTYPING,Error("Loading PrototypeAppView as part of AppView")),oa=!0),E.createElement(G.fd.Provider,{value:t},"prototype"===e?E.createElement(on.K,null):"feed"===e?E.createElement(or,null):E.createElement(aX,null))}function ol(){let e=(0,V.fh)(),t=(0,F.m)();return E.createElement(G.fd.Provider,{value:t},"prototype"===e?E.createElement(on.K,null):"feed"===e?E.createElement(or,null):E.createElement(aX,null))}function os(){let e=(0,S.f1)(T.default.location.search),t=k.gg.DESIGN;if(("whiteboard"===e.editor_type||"whiteboard"===e.type||"/jam"===T.default.location.pathname)&&(t=k.gg.WHITEBOARD),"whiteboard"!==t){let e=(0,y.s)(document.getElementById("react-page"));e.render(E.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"48px",backgroundColor:"#2c2c2c"}}))}let r=e.localFileKey&&(0,v.T)(e.localFileKey)?e.localFileKey:void 0,n=e.figjamAiNewFile_prompt?{prompt:e.figjamAiNewFile_prompt,useCaseCategory:e.figjamAiNewFile_useCaseCategory,subtitle:e.figjamAiNewFile_subtitle}:void 0;(0,M.B)(oo,{newFileInfo:{editorType:t,folder_id:e.folder_id,org_id:e.org_id,trackingInfo:null,openNewFileIn:H.JD.SAME_TAB,framePresetName:e.frame_preset_name,fileName:e.name,localFileKey:r,viewport:e.viewport,nodeId:e["node-id"],figjamAiNewFileData:n}})}let oc=performance.now();(0,b.a)(async()=>{if("/preload-editor"===T.default.location.pathname)(0,B.Er)("prototype-lib").then(()=>{U.nc.start("editorPreloaded"),window.startPreloadedTab=function(e){if(window.preloadedTabStart=performance.now(),!(0,w.ZP)().user_data){T.default.replace(e.path,null),T.default.reload("preloaded tab not logged in");return}let t=!1;e.params&&(e.path+=e.params,t="1"===(0,S.Qc)(e.params).new),D.h.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}).then(({data:{meta:r}})=>{let n=r.parent_org_id;(0,w.JD)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,w.ZP)().org_id=n,window.startUserStateXHR(),T.default.replace(e.path,null),(0,M.B)(ol,{loadBlank:t})},t=>{console.error("Reloading because of",t),T.default.replace(e.path,null),T.default.reload("preloaded tab error")})}});else if("/file/new"===T.default.location.pathname||"/jam"===T.default.location.pathname){if("prerender"===document.visibilityState)document.addEventListener("visibilitychange",function e(){"prerender"!==document.visibilityState&&(os(),document.removeEventListener("visibilitychange",e))});else{let e=(0,S.Qc)(T.default.location.search);e["try-plugin-id"]&&e["try-plugin-version-id"]&&e["try-plugin-name"]?await (0,M.B)(oo):os()}}else U.nc.updateAppEntryTimeEvents(n,oc),await (0,M.B)(oo),window.FigmaMobile&&document.body.classList.add("FigmaMobile");oi.resolve()})},32483:(e,t,r)=>{r.d(t,{$:()=>p,AM:()=>A,DX:()=>v,E_:()=>I,Fz:()=>w,HA:()=>g,JP:()=>b,Mw:()=>y,PI:()=>f,QV:()=>C,_6:()=>N,aV:()=>S,eO:()=>m,l9:()=>_,n6:()=>E,nb:()=>O,uf:()=>h,vO:()=>T});var n,i=r(5453),a=r(767310),o=r(593249),l=r(76085),s=r(286206),c=r(970740),d=r(840568),u=r(909765);class p extends Error{constructor(e,t){super(`${e}: ${JSON.stringify(t)}`),this.errorInfo=t}}class m{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,t){e=this.preProcessForExpressionEvaluation(e);let r=(0,o.j3)(e,t);if(null!==r.value&&isFinite(r.value))return r.value;throw(0,s.YK)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:t}),new p("Could not parse input",r.error)}onParseThrow(e,t){var r,n;if(e instanceof p&&e.errorInfo)return null==(n=(r=this.options).onEvaluateExpressionError)?void 0:n.call(r,e.errorInfo,t)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,t){return e+t}clamp(e){return(0,a.oq)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??u.lN}bigNudgeAmount(){return this.options.bigNudgeAmount??u.uy}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class h extends m{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let t=String(parseFloat(e.toFixed(2))),r=t.includes(".");if(this.floatingPointFormat&&r){let r=t.length-1;if(r>this.floatingPointFormat.maxNumDigits)return String(parseFloat(e.toFixed(1)))}return t}}class _ extends m{format(e){if(null==e)return"";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"});return String(t.format(e).replace("USD","").trim())}parse(e,t){let r=super.parse(e,t);return parseFloat(r.toFixed(0))}}class g{constructor(e){this.pixelFormatter=new h(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,t){e=e.trim().toLocaleLowerCase();let r=(0,c.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&r.startsWith(e)?d.B7:this.pixelFormatter.parse(e,t)}format(e){return(0,d.Hv)(e)?(0,c.t)("fullscreen.properties_panel.stack_panel.auto"):(this.allowUnformatted,this.pixelFormatter.format(e))}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,t){return(0,d.Hv)(e)?d.B7:this.pixelFormatter.incrementBy(e,t)}clamp(e){return(0,d.Hv)(e)?d.B7:this.pixelFormatter.clamp(e)}}class f{constructor(e){this.pixelFormatter=new h(e)}parse(e,t){return e.split(/[ ,]+/g).filter(e=>e.length).map((e,r)=>{let n=this.pixelFormatter.parse(e,t&&t[r]);if(!isFinite(n))throw Error("could not parse padding input");return n}).map(e=>Math.max(e,0))}format(e){return null==e?"":(0,i.bk)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,t,r){return e.map((e,n)=>!r||r[n]?this.pixelFormatter.incrementBy(e,t):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,t){return e.map(e=>(0,a.$G)(e,t))}isEqual(e,t){return(0,i.Vg)(e,t)}getIncrementTargets(e,{start:t,end:r}){let n={};if(0===t&&r>=e.length)return null;let i=t===r;if(i&&t>=e.length){let t=e.split(",").length-1;return{[t]:!0}}let a=0;for(let o=0,l=e.length;o<l;++o){let l=","===e[o];if(i){if(o===t)return{[a]:!0};l&&++a}else if(l&&++a,t<=o&&o<r&&(n[a]=!0),o>=r)break}return n}getSelection(e,t){let r;let n=Object.keys(t).map(Number),i=e.length,a=0;for(let t=0,o=e.length;t<o;++t){if(","===e[t]){++a;continue}if(n.includes(a)){if(null==r){if(/[\s,]/.test(e[t]))continue;r=t}for(;t<o&&/[^,]/.test(e[t]);)++t;i=t,--t}}return{start:r??0,end:i}}}var E=((n=E||{})[n.SECONDS=0]="SECONDS",n[n.MILLISECONDS=1]="MILLISECONDS",n);class y extends m{constructor(e,t,r){super({min:r??.001,max:t,smallNudgeAmount:.01,bigNudgeAmount:.1}),this.outputUnit=e,this.allowedUnits="ms|s"}parse(e,t){e=e.trim();let r=e.endsWith("ms")?1:e.endsWith("s")?0:this.outputUnit;return super.parse(e,t)*(0===r?1:.001)}format(e){if(null==e)return"";switch(this.outputUnit){case 0:return(0,c.t)("number_formatters.time_duration_seconds_abbreviated",{numberOfSeconds:parseFloat(e.toFixed(2))});case 1:return(0,c.t)("number_formatters.time_duration_milliseconds_abbreviated",{numberOfMilliseconds:Math.round(1e3*e)})}}}class v extends m{constructor(e,t=!1){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.displayFractions=t}parse(e,t){if(e.includes(":")){let r=e.split(":");if(r.length>3)throw Error("Format must match HH:MM:SS");let[n,i,a]=r.reverse().map(e=>e.trim()),o=n?super.parse(n,t):0,l=i?super.parse(i,t):0,s=a?super.parse(a,t):0,c=![l,s].every(Number.isInteger),d=!this.displayFractions&&!Number.isInteger(o);if(c||d)throw Error("Cannot have fractional parts in timestamp");return 3600*s+60*l+o}let[r,n]=e.split(".",2),i=`${r.slice(-6,-4)}:${r.slice(-4,-2)}:${r.slice(-2)}`,a=n?`${i}.${n}`:i;return this.parse(a)}format(e){if(null==e)return"";let t=Math.floor(e/3600);e%=3600;let r=Math.floor(e/60),n=`${r}`.padStart(2,"0");e%=60;let i=this.displayFractions?e:Math.floor(e),a=Number.isInteger(i)?i:i.toFixed(2),o=Number.isInteger(i)?`${i}`.padStart(2,"0"):`${a}`.padStart(5,"0");return t?`${t}:${n}:${o}`:`${n}:${o}`}}class b extends m{constructor({decimals:e,hidePercentSign:t,...r}={}){super(r),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=t&&(this.hidePercentSign=t)}format(e){if(null==e)return"";let t=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(t+="%"),t}parse(e,t){let r=super.parse(e,null!=t?100*t:void 0);return r/100}getNudgeAmount(e){return e?.1:.01}}class I extends m{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class T extends m{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class w extends m{constructor(e={}){super((0,l.m)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class S extends m{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,t){let r=super.parse(e,t);return Math.round(r)}}class C extends m{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,t){let r=super.parse(e,t);return r/this.normalizeFactor}format(e){let t=e*this.normalizeFactor;return`${Math.round(t)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class O{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||u.uy,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||u.lN,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let t=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let r=(0,o.j3)(e,NaN);if(null!==r.value&&isFinite(r.value))return[r.value,t]}parse(e,t){let r=O.parse(e);if(void 0===r)throw Error("Could not parse input");let[n,i]=r;return void 0===i&&(i=null==t?"PERCENT":t.units),{value:n,units:i}}format(e){if(null==e||e.value!=e.value)return"";let t=parseFloat(e.value.toFixed(2));return"PERCENT"===e.units?`${t}%`:`${t}px`}getNudgeAmount(e,t){return e?"PIXELS"===t.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===t.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,t){let r=e.value+t;return{value:r,units:e.units}}clamp(e){let t=(0,a.oq)(e.value,this.min,this.max);return{value:t,units:e.units}}snap(e,t){let r=(0,a.$G)(e.value,t);return{value:r,units:e.units}}isEqual(e,t){return e.units===t.units&&e.value===t.value}}let A=new O({bigPixelNudgeAmount:u.uy,smallPixelNudgeAmount:u.lN});class N{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){e=e.toLowerCase();let t=e.includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let r=(0,o.j3)(e);if(null!==r.value&&isFinite(r.value))return{value:r.value,type:t};throw new p("Could not parse input",r.error)}format(e){if(null==e)return"";let t=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${t}x`;case"CONTENT_WIDTH":return`${t}w`;case"CONTENT_HEIGHT":return`${t}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,t){let r=(0,a.$G)(e.value+t,t);return{value:r,type:e.type}}clamp(e){let t=e.value,r="CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE;return(t=Math.min(t,r))<=0&&(t=1),{value:t,type:e.type}}snap(e,t){let r=(0,a.$G)(e.value,t);return{value:r,type:e.type}}isEqual(e,t){return e.type===t.type&&e.value===t.value}}},954035:(e,t,r)=>{r.d(t,{$y:()=>y,As:()=>k,Bp:()=>D,C_:()=>I,Dr:()=>L,N1:()=>_,NT:()=>f,QB:()=>d,RG:()=>m,T5:()=>C,Vr:()=>N,XM:()=>h,bs:()=>R,c0:()=>p,ey:()=>g,fS:()=>v,jY:()=>S,rm:()=>O,tC:()=>A,vb:()=>u,x8:()=>P,ye:()=>E,yv:()=>b,zq:()=>M});var n=r(46347),i=r(647744),a=r(598271),o=r(716250),l=r(970740),s=r(840568),c=r(32483);class d{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class u{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,l.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class p{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,l.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,l.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,l.t)("fullscreen.properties_panel.gif"):(0,l.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,l.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,l.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,l.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,l.t)("fullscreen.properties_panel.diamond");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,l.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,l.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,l.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,l.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class h{constructor(){this.format=e=>{switch(e){case"MIN":return(0,l.t)("fullscreen.properties_panel.constraints.left");case"MAX":return(0,l.t)("fullscreen.properties_panel.constraints.right");case"STRETCH":return(0,l.t)("fullscreen.properties_panel.constraints.left_and_right");case"CENTER":return(0,l.t)("fullscreen.properties_panel.constraints.center");case"SCALE":return(0,l.t)("fullscreen.properties_panel.constraints.scale");default:return""}}}}class _{constructor(){this.format=e=>{switch(e){case"MIN":return(0,l.t)("fullscreen.properties_panel.constraints.top");case"MAX":return(0,l.t)("fullscreen.properties_panel.constraints.bottom");case"STRETCH":return(0,l.t)("fullscreen.properties_panel.constraints.top_and_bottom");case"CENTER":return(0,l.t)("fullscreen.properties_panel.constraints.center");case"SCALE":return(0,l.t)("fullscreen.properties_panel.constraints.scale");default:return""}}}}class g{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,l.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,l.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,l.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,l.t)("fullscreen.properties_panel.effects.background_blur");default:return""}}}}class f{constructor(e){this.scene=e}hasNameForNode(e){return e===a.A0||null==e||!!this.scene.get(e)}format(e){if((0,s.nK)(e))return(0,l.t)("fullscreen.mixed");if(e===a.A0||null==e)return(0,l.t)("proto.node_name_formatter.none");let t=this.scene.get(e);return t?t.stateAbbreviatedName||t.name:(0,l.t)("proto.node_name_formatter.missing")}}function E(e){let t=!(0,s.Wn)(e.connectionType);if(t)return s.t1;let r=(0,s.NA)(e.connectionType,"NONE"),n=(0,s.NA)(e.mediaAction,"PLAY");switch(r){case"NONE":return"NONE";case"INTERNAL_NODE":{let t=!(0,s.Wn)(e.navigationType);if(t)return s.t1;let r=(0,s.NA)(e.navigationType,"NAVIGATE");switch(r){case"NAVIGATE":return"NAVIGATE_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SCROLL_TO":return"SCROLL_TO";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}}case"BACK":return"GO_BACK";case"CLOSE":return"CLOSE_OVERLAY";case"URL":return"OPEN_URL";case"SET_VARIABLE":return"SET_VARIABLE";case"SET_VARIABLE_MODE":return"SET_VARIABLE_MODE";case"UPDATE_MEDIA_RUNTIME":switch(n){case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}case"CONDITIONAL":return"CONDITIONAL"}}function y(e){if("UPDATE_MEDIA_RUNTIME"===e.connectionType){if((0,s.nK)(e.mediaAction))return s.t1;let t=(0,s.NA)(e.mediaAction,"PLAY");switch(t){case"PLAY":case"PAUSE":case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS";case"MUTE":case"UNMUTE":case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS";case"SKIP_FORWARD":case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BY_OPTIONS";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}}return E(e)}class v{format(e){switch(e){case"NONE":return(0,l.t)("proto.action_none");case"NAVIGATE_TO":return(0,l.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,l.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,l.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,l.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,l.t)("proto.action_change_to");case"GO_BACK":return(0,l.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,l.t)("proto.action_close_overlay");case"OPEN_URL":return(0,l.t)("proto.action_open_link");case"SET_VARIABLE":return(0,l.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,l.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,l.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,l.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,l.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,l.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,l.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,l.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,l.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,l.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,l.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,l.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,l.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return(0,l.t)("proto.action_conditional");default:return""}}}class b{format(e){switch(e){case"NONE":return(0,l.t)("proto.action_none");case"NAVIGATE_TO":return(0,l.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,l.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,l.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,l.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,l.t)("proto.action_change_to");case"GO_BACK":return(0,l.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,l.t)("proto.action_close_overlay");case"OPEN_URL":return(0,l.t)("proto.action_open_link");case"SET_VARIABLE":return(0,l.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,l.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,l.t)("proto.action_update_media_play");case"UPDATE_MEDIA_PAUSE":return(0,l.t)("proto.action_update_media_pause");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,l.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,l.t)("proto.action_update_media_mute");case"UPDATE_MEDIA_UNMUTE":return(0,l.t)("proto.action_update_media_unmute");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,l.t)("proto.action_update_media_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,l.t)("proto.action_update_media_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,l.t)("proto.action_update_media_set_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,l.t)("proto.action_update_media_play_pause");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,l.t)("proto.action_update_media_mute_unmute");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,l.t)("proto.action_update_media_jump_time");case"CONDITIONAL":return(0,l.t)("proto.action_conditional");default:return""}}}class I{constructor(){this.oneHourInSeconds=3600,this.secondsFormatter=new c.Mw(c.n6.SECONDS,this.oneHourInSeconds),this.timestampFormatter=new c.DX(this.oneHourInSeconds,!0)}format(e){if(!e||!(0,s.Wn)(e))return(0,l.t)("proto.action_none");let t=(0,s.Wn)(e.mediaSkipToTime)?e.mediaSkipToTime??0:0,r=(0,s.Wn)(e.mediaSkipByAmount)?e.mediaSkipByAmount??5:5,n=this.secondsFormatter.format(r),a=this.timestampFormatter.format(t);if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case"TOGGLE_PLAY_PAUSE":return(0,l.t)("proto.action_update_media_play_pause");case"PLAY":return(0,l.t)("proto.action_update_media_play");case"PAUSE":return(0,l.t)("proto.action_update_media_pause");case"TOGGLE_MUTE_UNMUTE":return(0,l.t)("proto.action_update_media_mute_unmute");case"MUTE":return(0,l.t)("proto.action_update_media_mute");case"UNMUTE":return(0,l.t)("proto.action_update_media_unmute");case"SKIP_FORWARD":return`${(0,l.t)("proto.action_update_media_jump")} (+${n})`;case"SKIP_BACKWARD":return`${(0,l.t)("proto.action_update_media_jump")} (-${n})`;case"SKIP_TO":return`${(0,l.t)("proto.action_update_media_set")} (${a})`}return i.u.error("You should not be using PrototypeVideoActionSidebarFormatter to format non-video actions!"),""}}let T=()=>(0,o.BZ)().prototype_new_mouse_events?(0,l.t)("proto.interaction.type.mouse_enter_deprecated"):(0,l.t)("proto.interaction.type.mouse_enter"),w=()=>(0,o.BZ)().prototype_new_mouse_events?(0,l.t)("proto.interaction.type.mouse_leave_deprecated"):(0,l.t)("proto.interaction.type.mouse_leave");class S{constructor(){this.format=e=>{if(null==e)return(0,l.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,l.t)("proto.interaction.type.none");case"ON_CLICK":return(0,l.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,l.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,l.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,l.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return T();case"MOUSE_OUT":return w();case"MOUSE_ENTER":return(0,l.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,l.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,l.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,l.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,l.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,l.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,l.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,l.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,l.t)("proto.interaction.type.when_video_ends");default:(0,n.vE)(e)}}}}class C{constructor(){this.format=e=>{if(null==e)return(0,l.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,l.t)("proto.interaction.type.none");case"ON_CLICK":return(0,l.t)("proto.interaction.type.on_tap");case"ON_HOVER":return(0,l.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,l.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,l.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return T();case"MOUSE_OUT":return w();case"MOUSE_ENTER":return(0,l.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,l.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,l.t)("proto.interaction.type.touch_down");case"MOUSE_UP":return(0,l.t)("proto.interaction.type.touch_up");case"AFTER_TIMEOUT":return(0,l.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,l.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,l.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,l.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,l.t)("proto.interaction.type.when_video_ends");default:(0,n.vE)(e)}}}}class O{constructor(){this.format=e=>{if(null==e)return(0,l.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,l.t)("proto.interaction.type.none");case"ON_CLICK":return(0,l.t)("proto.interaction.type.click");case"ON_HOVER":return(0,l.t)("proto.interaction.type.hover");case"ON_PRESS":return(0,l.t)("proto.interaction.type.press");case"DRAG":return(0,l.t)("proto.interaction.type.drag");case"MOUSE_IN":return T();case"MOUSE_OUT":return w();case"MOUSE_ENTER":return(0,l.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,l.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,l.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,l.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,l.t)("proto.interaction.type.delay");case"ON_KEY_DOWN":return(0,l.t)("proto.interaction.type.key");case"ON_VOICE":return(0,l.t)("proto.interaction.type.voice");case"ON_MEDIA_HIT":return(0,l.t)("proto.interaction.type.video_hits");case"ON_MEDIA_END":return(0,l.t)("proto.interaction.type.video_ends");default:return(0,n.vE)(e)}}}}class A{constructor(){this.format=e=>{if(null==e)return(0,l.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,l.t)("proto.interaction.type.none");case"ON_CLICK":return(0,l.t)("proto.interaction.type.tap");case"ON_HOVER":return(0,l.t)("proto.interaction.type.hover");case"ON_PRESS":return(0,l.t)("proto.interaction.type.press");case"DRAG":return(0,l.t)("proto.interaction.type.drag");case"MOUSE_IN":return T();case"MOUSE_OUT":return w();case"MOUSE_ENTER":return(0,l.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,l.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,l.t)("proto.interaction.type.touch_down");case"MOUSE_UP":return(0,l.t)("proto.interaction.type.touch_up");case"AFTER_TIMEOUT":return(0,l.t)("proto.interaction.type.delay");case"ON_KEY_DOWN":return(0,l.t)("proto.interaction.type.key");case"ON_VOICE":return(0,l.t)("proto.interaction.type.voice");case"ON_MEDIA_HIT":return(0,l.t)("proto.interaction.type.video_hits");case"ON_MEDIA_END":return(0,l.t)("proto.interaction.type.video_ends");default:return(0,n.vE)(e)}}}}class N{constructor(){this.format=e=>{switch(e){case"CENTER":return(0,l.t)("proto.overlay_position_centered");case"TOP_LEFT":return(0,l.t)("proto.overlay_position_top_left");case"TOP_CENTER":return(0,l.t)("proto.overlay_position_top_center");case"TOP_RIGHT":return(0,l.t)("proto.overlay_position_top_right");case"BOTTOM_LEFT":return(0,l.t)("proto.overlay_position_bottom_left");case"BOTTOM_CENTER":return(0,l.t)("proto.overlay_position_bottom_center");case"BOTTOM_RIGHT":return(0,l.t)("proto.overlay_position_bottom_right");case"MANUAL":return(0,l.t)("proto.overlay_position_manual");default:return""}}}}class L{constructor(){this.format=e=>{switch(e){case"SQUARE":return(0,l.t)("whiteboard.shapes.square");case"ROUNDED_RECTANGLE":return(0,l.t)("whiteboard.shapes.rounded_rectangle");case"DIAMOND":return(0,l.t)("whiteboard.shapes.diamond");case"ELLIPSE":return(0,l.t)("whiteboard.shapes.ellipse");case"TRIANGLE_UP":return(0,l.t)("whiteboard.shapes.triangle");case"TRIANGLE_DOWN":return(0,l.t)("whiteboard.shapes.downward_pointing_triangle");case"PARALLELOGRAM_LEFT":return(0,l.t)("whiteboard.shapes.left_leaning_parallelogram");case"PARALLELOGRAM_RIGHT":return(0,l.t)("whiteboard.shapes.right_leaning_parallelogram");case"ENG_DATABASE":return(0,l.t)("whiteboard.shapes.cylinder");case"ENG_QUEUE":return(0,l.t)("whiteboard.shapes.horizontal_cylinder");case"ENG_FILE":return(0,l.t)("whiteboard.shapes.file");case"ENG_FOLDER":return(0,l.t)("whiteboard.shapes.folder");case"TRAPEZOID":return(0,l.t)("whiteboard.shapes.trapezoid");case"STAR":return(0,l.t)("whiteboard.shapes.star");case"SHIELD":return(0,l.t)("whiteboard.shapes.shield");case"HEXAGON":return(0,l.t)("whiteboard.shapes.hexagon");case"PENTAGON":return(0,l.t)("whiteboard.shapes.pentagon");case"OCTAGON":return(0,l.t)("whiteboard.shapes.octagon");case"PLUS":return(0,l.t)("whiteboard.shapes.plus");case"PREDEFINED_PROCESS":return(0,l.t)("whiteboard.shapes.predefined_process");case"MANUAL_INPUT":return(0,l.t)("whiteboard.shapes.manual_input");case"CHEVRON":return(0,l.t)("whiteboard.shapes.chevron");case"DOCUMENT_SINGLE":return(0,l.t)("whiteboard.shapes.document_single");case"DOCUMENT_MULTIPLE":return(0,l.t)("whiteboard.shapes.document_multiple");case"ARROW_LEFT":return(0,l.t)("whiteboard.shapes.arrow_left");case"ARROW_RIGHT":return(0,l.t)("whiteboard.shapes.arrow_right");case"SUMMING_JUNCTION":return(0,l.t)("whiteboard.shapes.summing_junction");case"OR":return(0,l.t)("whiteboard.shapes.or");case"SPEECH_BUBBLE":return(0,l.t)("whiteboard.shapes.speech_bubble");case"INTERNAL_STORAGE":return(0,l.t)("whiteboard.shapes.internal_storage");case"MINDMAP_TREE_NUCLEUS":return(0,l.t)("whiteboard.shapes.mindmap");default:return""}}}}class P{constructor(){this.format=e=>{switch(e){case"BASIC":return(0,l.t)("whiteboard.shape_collection_type.basic");case"DIAGRAMMING":return(0,l.t)("whiteboard.shape_collection_type.flowchart");case"MISC":return(0,l.t)("whiteboard.shape_collection_type.misc");default:return""}}}}class R{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,l.t)("fullscreen.properties_panel.blend_mode.pass_through");case"NORMAL":return(0,l.t)("fullscreen.properties_panel.blend_mode.normal");case"DARKEN":return(0,l.t)("fullscreen.properties_panel.blend_mode.darken");case"MULTIPLY":return(0,l.t)("fullscreen.properties_panel.blend_mode.multiply");case"LINEAR_BURN":return(0,l.t)("fullscreen.properties_panel.blend_mode.linear_burn");case"COLOR_BURN":return(0,l.t)("fullscreen.properties_panel.blend_mode.color_burn");case"LIGHTEN":return(0,l.t)("fullscreen.properties_panel.blend_mode.lighten");case"SCREEN":return(0,l.t)("fullscreen.properties_panel.blend_mode.screen");case"LINEAR_DODGE":return(0,l.t)("fullscreen.properties_panel.blend_mode.linear_dodge");case"COLOR_DODGE":return(0,l.t)("fullscreen.properties_panel.blend_mode.color_dodge");case"OVERLAY":return(0,l.t)("fullscreen.properties_panel.blend_mode.overlay");case"SOFT_LIGHT":return(0,l.t)("fullscreen.properties_panel.blend_mode.soft_light");case"HARD_LIGHT":return(0,l.t)("fullscreen.properties_panel.blend_mode.hard_light");case"DIFFERENCE":return(0,l.t)("fullscreen.properties_panel.blend_mode.difference");case"EXCLUSION":return(0,l.t)("fullscreen.properties_panel.blend_mode.exclusion");case"HUE":return(0,l.t)("fullscreen.properties_panel.blend_mode.hue");case"SATURATION":return(0,l.t)("fullscreen.properties_panel.blend_mode.saturation");case"COLOR":return(0,l.t)("fullscreen.properties_panel.blend_mode.color");case"LUMINOSITY":return(0,l.t)("fullscreen.properties_panel.blend_mode.luminosity")}}}}let k={format(e){switch(e){case"SCROLLS":return(0,l.t)("proto.scroll_panel.position_dropdown.scroll_with_parent");case"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME":return(0,l.t)("proto.scroll_panel.position_dropdown.fixed_stay_in_place");case"STICKY_SCROLLS":return(0,l.t)("proto.scroll_panel.position_dropdown.sticky_stop_at_top_edge")}}},D={format(e){switch(e){case"SCROLLS":return(0,l.t)("proto.scroll_panel.position_dropdown.scroll_with_parent");case"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME":return(0,l.t)("proto.scroll_panel.position_dropdown.fixed");case"STICKY_SCROLLS":return(0,l.t)("proto.scroll_panel.position_dropdown.sticky")}}},M={format(e){switch(e){case"NONE":return(0,l.t)("proto.overflow_panel.no_scrolling");case"HORIZONTAL":return(0,o.BZ)().prototype_sticky_scrolling?(0,l.t)("proto.scroll_panel.overflow_dropdown.horizontal"):(0,l.t)("proto.overflow_panel.horizontal_scrolling");case"VERTICAL":return(0,o.BZ)().prototype_sticky_scrolling?(0,l.t)("proto.scroll_panel.overflow_dropdown.vertical"):(0,l.t)("proto.overflow_panel.vertical_scrolling");case"BOTH":return(0,o.BZ)().prototype_sticky_scrolling?(0,l.t)("proto.scroll_panel.overflow_dropdown.both_directions"):(0,l.t)("proto.overflow_panel.horizontal_and_vertical_scrolling")}}}},118962:(e,t,r)=>{r.d(t,{Kk:()=>a,dg:()=>i,wb:()=>o});var n=r(391320);function i(e,t){return null!=e[t]&&e[t]>0}function a(e,t){for(let r in e)if(!t.includes(r))return!1;return!0}function o(e,t){return Object.keys(e).some(r=>r in e&&!(0,n.qt)(t[r],e[r],!1))}r(840568)},536982:(e,t,r)=>{r.d(t,{E:()=>c,P:()=>d});var n=r(652983),i=r(754738),a=r(641052),o=r(424479);class l{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,l.instance=this}static removeInstance(){l.instance=void 0}trackNodesAsTemplate(e,t,r,n){let i=o.TSSceneGraph.instance,a=Array.from(t);if(a.forEach(e=>{s(i.get(e))||t.delete(e)}),0===t.size)return;let l=Math.floor(.1*t.size),c={templateId:e,fileKey:r,nodeGUIDs:t,trackedNodeCount:t.size,deletionThreshold:l,creationMethod:n};this.allTemplateInfo.add(c),t.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let t=this.nodeGUIDsToTemplate.get(e);if(!t)return;this.nodeGUIDsToTemplate.delete(e);let r=t.nodeGUIDs;r.delete(e),r.size<=t.deletionThreshold&&(this.stopTrackingTemplate(t),(0,i.v)("template_deleted",{templateId:t.templateId,fileKey:t.fileKey,productType:"figjam",trackedNodeCount:t.trackedNodeCount,creationMethod:t.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let s=e=>!!e&&("CANVAS"===e.type?e.visible:s(e.parentNode)),c=async(e,t,r,n,{enableTracking:i=!0}={})=>{let o=l.instance;if(!i||!o)return await n();let s=(0,a.EJ)(),c=await n(),d=new Set((0,a.EJ)());return s.forEach(e=>d.delete(e)),t||(t="null"),o.trackNodesAsTemplate(e(),d,t,r),c},d=()=>{(0,n.useEffect)(()=>{let e=new l,t=o.TSSceneGraph.instance.onDelete(t=>e.checkForTemplateNodesDeletion(t));return()=>{t(),l.removeInstance()}},[])}},858666:(e,t,r)=>{r.d(t,{$:()=>u,I:()=>d});var n=r(652983),i=r(407908),a=r(848080),o=r(141757),l=r(824801),s=r(425285),c=r(246905);function d(){let e=(0,s.bR)(),t=(0,i.v9)(e=>e.mirror.appModel.currentPage),r=(0,i.v9)(e=>{var r,n;return null==(n=null==(r=e.mirror.sceneGraph)?void 0:r.get(t))?void 0:n.backgroundColor}),a=(0,c.Fg)(),d=(0,n.useMemo)(()=>l.Z.format(r),[r]);return e?"#ffffff":r?d:(0,o.fj)(a)}function u(){let e="ui3"===(0,a.Fg)().version,t=d();(0,n.useLayoutEffect)(()=>{if(e){let e=document.documentElement.style;e.setProperty("--canvas-color",t)}},[t,e])}},794228:(e,t,r)=>{r.d(t,{GV:()=>_,TI:()=>u,aZ:()=>p});var n=r(407908),i=r(848080),a=r(172497),o=r(337167),l=r(746443),s=r(784667),c=r(572333),d=r(729408);let u=()=>{let e=(0,o.Dv)(l.hk),t=(0,c.mA)((0,s.tZ)().renderRulers);return t||e},p=()=>(0,o.Dv)(l.hk),m=(0,a.F)(d.yvB),h=(0,a.F)(d.gOH),_=()=>{let e="ui3"===(0,i.Fg)().version,t=(0,n.v9)(({mirror:{appModel:e}})=>e.showUi),r=(0,s.Yt)()+m,o=(0,s.DS)()+h,l=e&&t?r:0,c=(0,s.zu)()&&t;return c&&(l+=e?(0,a.F)(d.j$0):(0,a.F)(d.dGl)),{left:l,right:e&&t?o:0}}},928247:(e,t,r)=>{r.d(t,{Qs:()=>d,Z_:()=>c,pq:()=>u,vY:()=>p});var n=r(652983),i=r(337167),a=r(944731),o=r(339531),l=r(668849),s=r(425285);let c=(e,t)=>{let r=(0,s.MA)();return(0,n.useMemo)(()=>(0,o.Sf)(r,e,t),[r,t,e])},d=e=>{let t=(0,s.MA)();return(0,n.useMemo)(()=>(0,o.rJ)(t,e),[t,e])},u=e=>{let t=(0,l.A2)(),r=(0,i.Dv)(a.PX)&&t;return(0,n.useMemo)(()=>r?e.filter(e=>(0,o.Uo)(e)):e,[r,e])},p=e=>{let t=(0,l.A2)(),r=(0,i.Dv)(a.PX)&&t;return(0,n.useMemo)(()=>r?e.filter(e=>(0,o.Uo)((0,o.hb)(e))):e,[r,e])}},135458:(e,t,r)=>{r.d(t,{DO:()=>v,IE:()=>E,tm:()=>y});var n=r(652983),i=r(407908),a=r(764150),o=r(448501),l=r(36940),s=r(970740),c=r(721127),d=r(672055),u=r(385431),p=r(493359),m=r(837728),h=r(639399),_=r(799915),g=r(321336),f=r(198456);function E(e){let t=(0,p.nO)(),r=(0,i.v9)(e=>(0,m.bC)(e)),a=(0,i.v9)(e=>{var r;return t.enabled&&"fullscreen"===e.selectedView.view&&(null==(r=e.selectedView.workshopUserNames)?void 0:r[t.id])}),o=(0,i.v9)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.starterKitHasBeenHidden),l=(0,i.v9)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.figjamEditorOnboardingStarted),s=(0,i.v9)(e=>{let t=!!r&&new Date(r.created_at)>new Date(Date.now()-6e4);return t&&(0,h.f9)(e.mirror)}),[c,_]=n.useState(!1),f=(0,i.I0)(),E=!e&&t.enabled&&!!(null==r?void 0:r.is_try_file)&&a&&!c;n.useEffect(()=>{if(!E)return;let e=[];!l&&o&&e.push(g.ms,g.ss,g.x4),e.length>0&&(f(d.HH({sequence:{steps:e,onComplete:()=>f(u.cX()),additionalOnClose:()=>f(u.cX())},modalActionUuid:"figjam_try_onboarding"})),f(u.vI()),_(!0))},[E,s,l,o,f])}let y=e=>{let t=(0,i.I0)();return r=>{t(l.Y.init({origin:e,formState:r,redirectUrl:(0,a.BT)(o.default.location.pathname,{[f.x0.key]:f.x0.value}),signedUpFromOpenSession:!0})),t(c.K4({type:_.m,data:{headerText:(0,s.t)("fullscreen.toolbar.to_save_this_board_create_an_account")}}))}},v=()=>(0,i.v9)(e=>{var t;return!!(null==(t=e.openFile)?void 0:t.isTryFile)})},493359:(e,t,r)=>{r.d(t,{BM:()=>p,GU:()=>u,_p:()=>s,bI:()=>c,nO:()=>d});var n=r(652983),i=r(407908),a=r(337167),o=r(669277),l=r(862610);let s=(0,a.cn)(null),c=(e,t=!1)=>{let r=(0,o.mU)(l.FileWorkshopMode,{fileKey:e},{enabled:!!e});return(0,n.useMemo)(()=>"loaded"!==r.status?t?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:r.data.figFileWorkshopMode&&new Date<r.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:r.data.figFileWorkshopMode.expiresAt,id:r.data.figFileWorkshopMode.id}:{enabled:!1},[r,t])},d=(e=!1)=>{let t=(0,i.v9)(e=>e.openFile);return c((null==t?void 0:t.key)||"",e)},u=(e=!1)=>d(e).enabled,p=e=>{let t=a.n_.get(s);return!!e&&!!t&&new Date<t&&!e.isTryFile}},596805:(e,t,r)=>{r.d(t,{PI:()=>y,R9:()=>f,aH:()=>E,eF:()=>v});var n=r(365653),i=r(716250),a=r(211960),o=r(522494),l=r(869343),s=r(54055),c=r(344668),d=r(200273),u=r(322186),p=r(733609),m=r(841017),h=r(257817),_=r(605508),g=r(298715);function f(){let e=(0,g.xX)(),t=(0,g.M4)(),r=(0,g.$0)(),a=(0,g.q3)(),o=(0,i.BZ)().wqa_include_org_plugins?{orgSavedPlugins:e.orgPlugins,orgSavedWidgets:e.orgWidgets,orgPrivatePlugins:t,orgPrivateWidgets:r}:{},l=(0,n.c)(e=>E(e));return{...l,...o,installedPluginVersions:e.plugins,pluginAllowlist:a}}function E(e){var t;let r=(0,h.On)(e.selectedView.editorType);return{openFile:e.openFile,publishedPlugins:e.publishedPlugins,installedPluginVersions:(0,g.Q0)(e).plugins,recentlyUsedPlugins:(0,s.uW)(r,e.recentlyUsed,e.localPlugins),localExtensions:e.localPlugins,orgEntity:(0,s.bX)(e),org:(0,u.Lb)(e.currentUserOrgId,e.orgById)??null,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,p.canRunPlugins)(e),editorType:r,widgetSelectionInfo:null==(t=e.mirror.selectionProperties)?void 0:t.selectedWidgetInfo,activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedWidgets:e.publishedWidgets}}function y(){let{warningLevel:e}=(0,c.gE)(),t=(0,a.fV)(),r=f(),i=(0,l.BG)();return(0,n.c)(n=>v(n,{fullscreenMemoryWarningLevel:e,unreadCommentCount:t,pluginAndWidgetMenuArgs:r,isRecovery:i}))}function v(e,{fullscreenMemoryWarningLevel:t,unreadCommentCount:r,pluginAndWidgetMenuArgs:n,isRecovery:i}){let a=(0,m.$c)(e)||null;return(0,o.Tf)({fileMenuArgs:{branchingActionsStatus:(0,l.wF)((0,d.dh)(e),(0,p.getPermissionsState)(e),e.selectedView.editorType,t,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,i,a),saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:r,isOrgMember:(0,p.canMemberOrg)(e.currentUserOrgId,e)},pluginAndWidgetMenuArgs:n,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,_.jA)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,_.jA)(e.mirror.appModel,"zoom-out")}})}},470035:(e,t,r)=>{r.d(t,{p:()=>u,x:()=>d});var n=r(652983),i=r(785466),a=r.n(i),o=r(669277),l=r(838903),s=r(862610),c=r(534383);let d=e=>{let t=(0,o.mU)(s.FileExpirationView,{figFileKey:null!=e?(0,l.vp)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return n.useMemo(()=>{var e,r,n;if("loaded"!==t.status)return;let i=null==(e=t.data)?void 0:e.figFileLinkExpirationConfig,a=null==(r=t.data)?void 0:r.file;if(!i)return;let o=(0,c.im)(i);return{file:a,accessReverted:!!i.accessReverted,expiresAt:null==(n=i.expiresAt)?void 0:n.toISOString(),activeExpiration:null==o?void 0:o.toISOString()}},[t])},u=(e,t)=>{let r=(0,o.mU)(s.FilePermissionsV2,{fileKey:e.key,teamId:e.teamId,projectId:e.folderId,repoId:e.fileRepoId,currentOrgId:t}),i=(0,l.vp)(e);return n.useMemo(()=>{var e,n;if(!t||"loaded"!==r.status)return;let o=null==(e=r.data)?void 0:e.file;if(!o)return;let l=p(o),s=!1;i&&(s=a()(l,p(o,!1)));let c=o.fileLinkExpirationConfig?o.fileLinkExpirationConfig.expiresAt:null==(n=o.sourceFileLinkExpirationConfig)?void 0:n.expiresAt;return{filePermissionsData:l,isBranch:i,branchMatchesRepo:s,linkExpiresAt:c}},[r,t,i])};function p(e,t=!0){let r=t&&e.repo?e.repo:e;return{link_access:r.linkAccess,proto_link_access:r.protoLinkAccess,org_audience:!!r.orgAudience,org_browsable:!!r.orgBrowsable,has_file_link_password:!!r.hasFileLinkPassword,has_proto_link_password:!!e.hasProtoLinkPassword,parent_org_id:e.parentOrgId}}},789845:(e,t,r)=>{r.d(t,{aK:()=>p,af:()=>o,nJ:()=>c,o1:()=>l,xb:()=>s});var n=r(716250),i=r(761767),a=r(163853);function o(e,t,r){let n=new Set(t.map(e=>e[r])),i=new Set(e.map(e=>e[r]));return{missingIds:[...i].filter(e=>!n.has(e)),extraIds:[...n].filter(e=>!i.has(e))}}function l(e,t,r=new Set,n,i=new Set){let a=[],o=[],l={},s=t.reduce((e,t)=>(e.set(t[n],t),e),new Map);for(let o of e.slice(0,t.length)){let e=o[n],t=s.get(e);if(t){let a=u(o,t,r,i,[],"",e);a.length&&(l[o[n]]=a)}else a.push(e);s.delete(o[n])}for(let e of s.values())o.push(e[n]);return{lgMissingIds:a,lgExtraIds:o,differences:l}}function s(e){return Array.isArray(e)?0===e.length:0===e.lgExtraIds.length&&0===e.lgMissingIds.length&&0===Object.keys(e.differences).length}function c(e,t,r,n=new Set,i=new Set){return u(t,r,n,i,[],"",e)}function d(e){return"object"==typeof e&&null!==e}function u(e,t,r,n,i,a,o){let l=new Set([...Object.keys(e),...Object.keys(t)]);for(let s of l){if(r.has(s))continue;let l=e[s],c=t[s];if(d(l)&&d(c)){u(l,c,r,n,i,`${a}${s}.`,o);continue}n.has(s)&&"string"==typeof l&&"string"==typeof c&&(null==l?void 0:l.substring(0,13))===(null==c?void 0:c.substring(0,13))||l===c||i.push({id:o,key:`${a}${s}`,sinatraValue:l,lgValue:c})}return i}function p(e){var t,r,o,l;let s=[],c=e.orgAdminUsersInfo.canRoleSetWithScim;for(let d of e.orgAdminUsers)switch(d.type){case"org_user":let e=d.orgUser;if(!e)continue;let u="loaded"===e.user.idpUsersInOrg.status?e.user.idpUsersInOrg.data[0]:null,p=e.mostRecentDesignUserUpgrade,g=e.mostRecentWhiteboardUserUpgrade,f="loaded"===e.mostRecentDevModeUserUpgrade.status?e.mostRecentDevModeUserUpgrade.data:null,E={type:a.II.ORG_USER,user:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl,email:e.user.email},account_type:e.accountType,is_email_validated:null!==e.user.emailValidatedAt,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.user.id,permission:e.permission,created_at:e.createdAt.toISOString(),updated_at:e.updatedAt.toISOString(),show_figjam_user_onboarding:e.showFigjamUserOnboarding,has_shown_figjam_admin_onboarding:e.hasShownFigjamAdminOnboarding,has_shown_figjam_admin_launch_onboarding:e.hasShownFigjamAdminLaunchOnboarding,account_type_changed_at:e.accountTypeChangedAt?e.accountTypeChangedAt.toISOString():void 0,description:e.description,user_state_changed_at:e.userStateChangedAt?e.userStateChangedAt.toISOString():void 0,agreed_to_community_tos_at:e.agreedToCommunityTosAt?e.agreedToCommunityTosAt.toISOString():null,license_admin:!!(null==(t=e.licenseGroupAdmins)?void 0:t.length),license_group_member:e.licenseGroupMember?{id:e.licenseGroupMember.id,license_group_id:null==(r=e.licenseGroupMember)?void 0:r.licenseGroupId,org_user_id:e.licenseGroupMember.orgUserId,created_at:e.licenseGroupMember.createdAt.toISOString(),updated_at:e.licenseGroupMember.updatedAt.toISOString(),assigned_at:e.licenseGroupMember.assignedAt?e.licenseGroupMember.assignedAt.toISOString():"",update_reason:e.licenseGroupMember.updateReason,actor_user_id:e.licenseGroupMember.actorUserId}:void 0,ecc_upgrading_locked:e.permission===i.Gu.GUEST&&null!==e.user.externalRestrictedOrgId,scim_metadata:(l=null==(o=null==u?void 0:u.scim)?void 0:o.enterpriseFields)?{[i.Wn.COST_CENTER]:l.costCenter,[i.Wn.DEPARTMENT]:l.department,[i.Wn.DIVISION]:l.division,[i.Wn.ORGANIZATION]:l.organization}:null,last_seen:d.lastSeen||void 0,last_design_seen:d.lastDesignSeen||void 0,last_whiteboard_seen:d.lastWhiteboardSeen||void 0,last_edit:d.lastEdit||void 0,last_design_edit:d.lastDesignEdit||void 0,last_whiteboard_edit:d.lastWhiteboardEdit||void 0,whiteboard_paid_status:e.whiteboardPaidStatus||i.oz.STARTER,drafts_folder_id:e.draftsFolderId,disabled_at:e.disabledAt?e.disabledAt.toISOString():void 0,scim_account_type:u?h(u.scim,i.oj.DESIGN,c):null,scim_whiteboard_paid_status:u?h(u.scim,i.oj.WHITEBOARD,c):null,scim_dev_mode_paid_status:u?h(u.scim,i.oj.DEV_MODE,c):null,dev_mode_paid_status:e.devModePaidStatus||i.oz.RESTRICTED,design_upgrade_reason:_(p),whiteboard_upgrade_reason:_(g),dev_mode_upgrade_reason:_(f),workspace_users:e.workspaceUsers.map(m),is_dev_mode_beta_user:!!("loaded"===e.devModeBetaUsedEvent.status&&e.devModeBetaUsedEvent.data)};s.push(E);break;case"idp_user":let y=d.idpUser;if(!y)continue;let v=(0,n.BZ)().dev_mode_license_type_base&&h(y.scim,i.oj.DEV_MODE,c);s.push({id:y.id,type:a.II.IDP_USER,email:y.userName.toLowerCase(),isOrgInvite:!1,name:function(e){var t,r,n;let i=e.scim,a=(null==(t=null==i?void 0:i.displayName)?void 0:t.status)==="loaded"?i.displayName.data:"",o=(null==(r=null==i?void 0:i.name)?void 0:r.status)==="loaded"?i.name.data:null,l=(null==(n=null==i?void 0:i.userName)?void 0:n.status)==="loaded"?i.userName.data:"";if(a)return a;if(o){let e=`${o.givenName} ${o.familyName}`.trim();if(e)return e}return l||""}(y),account_type:h(y.scim,i.oj.DESIGN,c),scim_metadata:y.scim.enterpriseFields,whiteboard_paid_status:h(y.scim,i.oj.WHITEBOARD,c)||void 0,...v&&{dev_mode_paid_status:v}});break;case"org_invite":let b=d.orgInvite;if(!b)continue;s.push({type:a.II.ORG_INVITE,id:b.id,org_id:b.orgId,email:b.email,account_type:b.accountType,created_at:b.createdAt.toISOString(),updated_at:b.updatedAt.toISOString(),license_group_id:b.licenseGroupId,workspace_id:"loaded"===b.workspaceId.status?b.workspaceId.data:null})}return s}function m(e){return{actor_user_id:e.actorUserId,assigned_at:e.assignedAt,created_at:e.createdAt,id:e.id,is_main_workspace:e.isMainWorkspace,org_user_id:e.orgUserId,permission:e.permission,update_reason:e.updateReason,updated_at:e.updatedAt,uuid:e.uuid,workspace_id:e.workspaceId}}function h(e,t,r){var n,a,o,l,s,c;let d=null;switch(t){case i.oj.DESIGN:d=(null==(n=e.figmaEnterpriseFields)?void 0:n.figmaPermission)||e.figmaPermission;break;case i.oj.WHITEBOARD:d=(null==(a=e.figmaEnterpriseFields)?void 0:a.figjamPermission)||e.figjamPermission;break;case i.oj.DEV_MODE:(null==(l=null==(o=e.figmaEnterpriseFields)?void 0:o.devModePermission)?void 0:l.status)==="loaded"&&(d=null==(c=null==(s=e.figmaEnterpriseFields)?void 0:s.devModePermission)?void 0:c.data)}return d&&!r?null:"editor"===d?i.oz.FULL:"viewerRestricted"===d||"lockLimited"===d?i.oz.RESTRICTED:null}function _(e){var t,r,n,a,o,l,s;if(!e)return;let c=null;e.resourceType===i.dV.FILE?c=null==(t=e.resourceFile)?void 0:t.file:e.resourceType===i.dV.FOLDER?c=null==(r=e.resourceProject)?void 0:r.project:e.resourceType===i.dV.TEAM?c=null==(n=e.resourceTeam)?void 0:n.team:e.resourceType===i.dV.FILE_REPO?c=null==(a=e.resourceRepo)?void 0:a.repo:e.resourceType===i.dV.ORG&&(c=(null==(o=e.resourceOrg)?void 0:o.status)==="loaded"?null==(l=e.resourceOrg.data)?void 0:l.org:null);let d=null;return d=c&&null!==c.name?c.name:`resource ${e.resourceId}`,{org_user_id:e.orgUserId,reason:e.reason,created_at:e.createdAt.toISOString(),actor_id:e.actorId,actor_name:(null==(s=e.actor)?void 0:s.handle)||null,resource_type:e.resourceType,resource_id_or_key:e.resourceId,resource_name:d,editor_type:e.editorType}}},175965:(e,t,r)=>{r.d(t,{Fj:()=>f,X6:()=>y,dQ:()=>v,dl:()=>I,mN:()=>E,yS:()=>b});var n=r(652983),i=r(407908),a=r(736521),o=r(448501),l=r(626650),s=r(716250),c=r(286206),d=r(117986),u=r(955687),p=r(54055),m=r(322186),h=r(761767),_=r(556928),g=r(30645);let f=()=>{let e=(0,i.v9)(e=>e);return(0,p.bX)(e)},E=()=>{let e=(0,m.Ng)();return(0,i.v9)(t=>{var r;return e&&(null==(r=t.orgUsersByOrgId.orgUsers[e.id][t.user.id])?void 0:r.permission)===h.Gu.GUEST})},y=()=>{let e=(0,m.Ng)(),t=(0,i.v9)(t=>{var r;return e&&(null==(r=t.orgUsersByOrgId.orgUsers[e.id][t.user.id])?void 0:r.permission)});return t&&t!==h.Gu.GUEST};function v(){return(0,i.v9)(e=>{var t;return(null==(t=e.openFile)?void 0:t.parentOrgId)&&e.orgById[e.openFile.parentOrgId]||void 0})}let b=()=>{var e;let t=(0,m.$0)(),r=(0,a.A9)(t);return"loaded"!==r.status?[]:(null==(e=r.data)?void 0:e.invoices)||[]};function I(e=[]){let t=(0,m.Ng)();!function({experimentId:e,dependencies:t,defaultCohort:r,treatmentCohorts:i,isEnabled:a=!0}){let p=(0,m.$0)(),h=a&&!!(0,s.BZ)().enforce_updated_org_experiment,f=(0,l.SH)(i),E=(0,n.useMemo)(()=>{if(!p)return null;let t=(0,u.E)(e,{type:_.i_.ORG,id:p}).defaultValue(r);return f.forEach(e=>{t.treatment(e,e)}),t.enableMobile().get()},[p,e,r,f]),y=(0,n.useCallback)(async()=>{var t,n;if(!p||!h)return;let i=await g.G.getExperimentCohort({orgId:p,experimentId:e}),a=null==(n=null==(t=null==i?void 0:i.data)?void 0:t.meta)?void 0:n[e];if(!a)return;let l=[...f,r];if(!l.includes(a)){(0,c.Jz)(d.k.SCALE,Error("Got unexpected treament cohort in useEnforceUpdatedOrgExperiment"),{extra:{experimentId:e,validCohorts:l,receivedCohort:a}});return}a!==E&&o.default.reload(`Experiment assignment out of date: ${e} has value ${E}, should have value ${a}`)},[p,h,e,r,f,E]);(0,n.useEffect)(()=>{y()},t.concat([y]))}({experimentId:"exp_billing_groups",defaultCohort:"control",treatmentCohorts:["beta","ga"],dependencies:e,isEnabled:(null==t?void 0:t.bigma_enabled)??!1})}},133660:(e,t,r)=>{r.d(t,{Go:()=>Y,Hy:()=>et,Mx:()=>H,S8:()=>G,V_:()=>B,Vp:()=>ee,_J:()=>Q,_c:()=>V,oj:()=>X,pw:()=>z,tS:()=>q});var n=r(652983),i=r(407908),a=r(605271),o=r.n(a),l=r(785466),s=r.n(l),c=r(600486),d=r(46347),u=r(288223),p=r(647744),m=r(9247),h=r(134193),_=r(716250),g=r(303498),f=r(669277),E=r(792808),y=r(600470),v=r(313653),b=r(970740),I=r(644383),T=r(368112),w=r(12023),S=r(133419),C=r(45e4),O=r(987004),A=r(322186),N=r(761767),L=r(862610),P=r(37015),R=r(869223),k=r(617406),D=r(45974),M=r(606536),F=r(163853),x=r(789845);let U=1e4,B=()=>(0,i.v9)(e=>(0,k.YM)(e)),V=e=>{let[t,r]=n.useState(!1),[a,o]=n.useState(!1),[l,s]=n.useState(!1),[c,d]=n.useState(null),u=(0,i.I0)();return n.useEffect(()=>{let n=async()=>{if(!t&&!a&&!l){r(!0);try{let t=await F.uU.getOrgUsersCount({orgId:e});d(t.data.meta.org_user_count),o(!0),r(!1)}catch(e){u(v.l.error((0,b.t)("org_user_actions.an_error_occurred_while_fetching_member_counts"))),r(!1),o(!1),s(!0)}}};n()},[e,a,t,l,u]),[a,c]},G=(e,t,r)=>{let[i,a]=n.useState((0,f.AC)()),o=n.useRef(null),l=()=>{o.current&&(clearTimeout(o.current),o.current=null)},s=n.useCallback(async()=>await F.uU.getOrgUsersFilterCounts({searchQuery:t,product:r.productFilter?r.productFilter:void 0,licenseGroupId:r.licenseGroupFilter||void 0,workspaceId:r.workspaceFilter||void 0,permission:r.permissionFilter||void 0,role:r.roleFilter||void 0,orgId:e}),[r.licenseGroupFilter,r.workspaceFilter,r.permissionFilter,r.productFilter,r.roleFilter,e,t]),c=(0,h.q)(()=>(l(),s()),[s]);n.useEffect(()=>{(0,u.zY)(c)?a((0,f.wl)(c.value.data.meta)):(0,u.hC)(c)?a((0,f.Pt)([])):a((0,f.AC)())},[c]);let d=n.useCallback(()=>{l(),o.current=setTimeout(async()=>{a((0,f.AC)());try{let e=await s();a((0,f.wl)(e.data.meta))}catch(e){a((0,f.Pt)([]))}},U)},[s]);return{filterCountsViewResult:i,queueFilterCountsRefetch:d}},H=({orgId:e,includeLicenseAdmins:t=!0})=>{let[r,a]=n.useState(!1),[o,l]=n.useState(!1),[s,c]=n.useState(!1),[d,u]=n.useState([]),p=(0,i.I0)();return n.useEffect(()=>{let n=async()=>{if(!r&&!o&&!s){a(!0);try{let r=await F.uU.getAdmins({includeLicenseAdmins:!!t,orgId:e});u(r.data.meta),l(!0),a(!1)}catch(e){p(v.l.error((0,b.t)("org_user_actions.an_error_occurred_fetching_org_admins"))),a(!1),l(!1),c(!0)}}};n()},[e,t,o,r,s,p]),{isFetched:o,orgAdmins:d}};class W extends Error{}let K=async(e,t,r)=>{let{cursor:n,searchQuery:i,sort:a,filter:o,firstPageSize:l,signal:s,minimalFields:d}=r,u=null===n?(l||25).toString():null;try{let e=Date.now();(0,c.L9)("Org Admin Members V2 Fetch Initiated",{orgId:t,...r.extraLoggingData,isInitialLoad:null===n,minimalFields:d});let l=F.uU.getOrgUsersPaginatedV2({orgId:t,pageSize:u,after:n,searchQuery:i,sort:a?(0,R.J)(a):void 0,filter:o?(0,P._n)(o):void 0,minimalFields:d}),p=await l;(0,c.L9)("Org Admin Members V2 Fetch Succeeded",{orgId:t,durationMs:Date.now()-e,...r.extraLoggingData,isInitialLoad:null===n,minimalFields:d});let m=[...p.data.meta.users||[]],h=p.data.meta.cursor,_=C.as.withOverrides({[O.z9.DEV_MODE]:"devMode",[O.z9.FIGJAM]:"whiteboard"}).withSuffix("EditorCutoff").dict(e=>p.data.meta[e]),g=p.data.meta.totalUserCount;if(null==s?void 0:s.aborted)throw new W;return{users:m,newCursor:h,editorCutoffs:_,totalUserCount:g}}catch(t){return t instanceof W||e(v.l.error(t.message||(0,b.t)("org_user_actions.an_error_occurred_fetching_org_users"))),t}},z=async(e,t,r)=>{let{users:n,newCursor:i,editorCutoffs:a,totalUserCount:o}=await K(e,t,r);return Z(t,e,n),{users:n,newCursor:i,editorCutoffs:a,totalUserCount:o}},Z=(e,t,r)=>{let n=[],i=[],a=[];r.forEach(e=>{switch(e.type){case F.II.ORG_USER:if(!("org_id"in e))break;n.push(e);break;case F.II.IDP_USER:i.push(e);break;case F.II.ORG_INVITE:a.push(e)}}),t(S.t8({orgUsers:n,orgId:e})),i&&t(T.t({idpUsers:i})),a&&t(w.t8(a))},Y=({searchQuery:e,sort:t,filter:r,firstPageSize:a,setDesignEditorDiff:o,setWhiteboardEditorDiff:l,setDevModeEditorDiff:u})=>{let h=(0,i.I0)(),g=(0,i.v9)(({currentUserOrgId:e})=>e),[f,y]=n.useState(void 0),[v,b]=n.useState(void 0),[I,T]=n.useState(void 0),w=(0,m.D)(e),S=(0,m.D)(t),C=(0,m.D)(r),A=w!==e||!s()(S,t)||!s()(C,r),[L,P]=n.useState("hidden"===document.visibilityState),[R,k]=n.useState(!navigator.onLine);n.useEffect(()=>{let e=()=>k(!0);return window.addEventListener("offline",e),()=>window.removeEventListener("offline",e)},[]),n.useEffect(()=>{let e=()=>{"hidden"===document.visibilityState&&P(!0)};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);let D=!!(0,_.BZ)().org_admin_lg_dark_read2,U=!!(0,_.BZ)().org_admin_livegraph,B=$(g,A,h,!U,{searchQuery:e,sort:t,filter:r,firstPageSize:a,extraLoggingData:{hasBeenOffline:R,hasBeenBackgrounded:L}}),V=j(g,A,h,U,{searchQuery:e,sort:t,filter:r,firstPageSize:a,extraLoggingData:{hasBeenOffline:R,hasBeenBackgrounded:L}}),[G,H]=n.useState(!1);n.useEffect(()=>{if(B.status!==E.Q.SUCCESS||V.status!==E.Q.SUCCESS||G)return;let{missingIds:e,extraIds:t}=(0,x.af)(B.sortedUsers,V.sortedUsers,"id");(e.length>0||t.length>0)&&((0,c.L9)("Org Admin Members Table Sinatra vs LG Comparison",{orgId:g,lgMissingIds:JSON.stringify(e),lgExtraIds:JSON.stringify(t)}),console.log(e,t)),H(!0)},[G,V.sortedUsers,V.status,g,B.sortedUsers,B.status]);let[W,K]=n.useState(0);n.useEffect(()=>{A&&(H(!1),K(0))},[A]),n.useEffect(()=>{if(B.status===E.Q.SUCCESS&&V.status===E.Q.SUCCESS)try{let e=new Set(["redeemed_by","license_group_admins"]),t=B.sortedUsers.slice(W);if(0===t.length)return;let{differences:r}=(0,x.o1)(t,V.sortedUsers,e,"id");K(B.sortedUsers.length),(0,c.L9)("Org Admin Members Table Sinatra vs LG Comparison",{orgId:g,differences:JSON.stringify(r)}),console.log("Org Admin discrepancies:",r)}catch(e){(0,c.L9)("Org Admin Members Table Sinatra vs LG Comparison",{orgId:g,error:JSON.stringify(e)}),console.log(e)}},[G,W,V.sortedUsers,V.status,g,B.sortedUsers,B.status]);let z=U?V.status:B.status,Z=U?V.editorCutoffs:B.editorCutoffs,Y=U?V.sortedUsers:B.sortedUsers,q=U?V.queueRefetch:B.queueRefetch,X=n.useCallback(()=>{var e,t;null==(e=B.fetchMore)||e.call(B),(D||U)&&(null==(t=V.fetchMore)||t.call(V))},[D,U,V,B]),J=B.fetchMore?X:void 0,Q=(0,i.v9)(e=>{let t=e.currentUserOrgId;return e.orgUsersByOrgId.orgUsers[t]}),et=(0,i.v9)(e=>e.idpUserById),er=n.useMemo(()=>(function(e,t,r){let n=[],i=new Set,a=[];return e.forEach(e=>{if(e.type===F.II.ORG_USER){let r=t[e.user_id];r?i.has(e.user_id)?a.push(e.user_id):(n.push(r),i.add(e.user_id)):p.u.warn(`sortedUsers returned a user (${e.type}-${e.id}) that is not in redux`)}else{let t=r.idpUsers[e.id];t&&(e.type===F.II.ORG_INVITE&&t.isOrgInvite||e.type===F.II.IDP_USER&&!t.isOrgInvite)?i.has(e.id)?a.push(e.id):(n.push(t),i.add(e.id)):p.u.warn(`sortedUsers returned a user (${e.type}-${e.id}) that is not in redux`)}}),a.length&&p.u.error(`ERROR: Duplicate user result in sortedUsers: ${a}.`),n})(Y,Q,et),[et,Q,Y]),en=n.useCallback(e=>{switch(e){case O.z9.DESIGN:return y;case O.z9.FIGJAM:return b;case O.z9.DEV_MODE:return T;default:(0,d.vE)(e)}},[y,b,T]),ei=n.useCallback(e=>{switch(e){case O.z9.DESIGN:return o;case O.z9.FIGJAM:return l;case O.z9.DEV_MODE:return u;default:(0,d.vE)(e)}},[o,l,u]),ea=n.useCallback((e,t,r)=>{let n=[];if(r===O.z9.DESIGN&&t===N.oz.FULL){let i=e.map(e=>(0,M.NT)(e,r));n.push({licenseType:O.z9.DESIGN,fromAccountTypes:i,toAccountType:t});let a=e.map(e=>(0,M.NT)(e,O.z9.DEV_MODE));n.push({licenseType:O.z9.DEV_MODE,fromAccountTypes:a,toAccountType:N.oz.RESTRICTED})}else n.push({licenseType:r,fromAccountTypes:e.map(e=>(0,M.NT)(e,r)),toAccountType:t});return n},[]),eo=n.useCallback((e,t,r,n)=>{let i=ea(e,t,r);i.forEach(e=>{let t=e.licenseType,r=en(t),i=ei(t);r(t=>(function(e,t,r,n,i){let a=0,o=r!==N.oz.FULL;if(t.forEach(e=>{e===N.oz.FULL&&(a-=1)}),r===N.oz.FULL&&(a+=t.length),0!==a&&(null==i||i(a)),e&&!ee(e)){let t=e.buffer-a,r=e.orgUserIds||[],i=o?r.filter(e=>!n.includes(e)):[...new Set(r.concat(n))];return{buffer:t,orgUserIds:i.slice(t)}}if(!e||!o)return e;{let t=e.editor_count+a;return t<=0?{buffer:-1*t,orgUserIds:t?n.slice(-1*t):[]}:{...e,editor_count:t}}})(t,e.fromAccountTypes,e.toAccountType,n,i))})},[ea,en,ei]);return n.useEffect(()=>{z===E.Q.SUCCESS&&(y(null==Z?void 0:Z.design),b(null==Z?void 0:Z.figjam),T(null==Z?void 0:Z.dev_mode))},[Z,z]),{status:z,sortedUsers:er,fetchMore:J,queueRefetch:q,newDesignEditorCutoff:f,newWhiteboardEditorCutoff:v,newDevModeEditorCutoff:I,updateNewEditorBuffer:eo}},j=(e,t,r,a,o)=>{let l=!!(0,_.BZ)().org_admin_lg_dark_read2,s=!!(0,_.BZ)().org_admin_livegraph,d=function({searchQuery:e,sort:t,filter:r,firstPageSize:a},o){let l=(0,i.v9)(({currentUserOrgId:e})=>e),s=n.useMemo(()=>({stuckMs:1e4,onEvent:(e,t,r,n)=>(function(e,t,r,n,i){let a={lgEvent:t,traceId:n.traceId,hasBeenOffline:n.wasOffline,hasBeenBackgrounded:n.wasBackgrounded,timeElapsedMs:n.timeElapsedMs,orgId:e,errors:JSON.stringify(r.errors)};if("initiated"===t)a.viewArgs=JSON.stringify(n.viewArgs);else if("stuck"===t){let e=(0,g.i0)().session.getViewSubscriptionsForDebugging(),t=[];for(let r in e)r.includes("OrgAdminUserView")&&t.push(e[r]);a.lgInfraLayerSubs=JSON.stringify(t)}else"canceled"===t&&(a.nextTraceId=null==i?void 0:i.nextTraceId);(0,c.L9)("Org Admin Members Table LG",a)})(l,e,t,r,n)}),[l]),d=(0,g.uL)(L.OrgAdminUserView,{orgId:l,firstPageSize:a||25,queryParams:`${(0,y.cv)({...e&&{search_query:e},...t&&(0,R.J)(t),...r&&(0,P._n)(r)})}`},{enabled:o,subscriptionLogger:s});return d}(o,l||s),u=n.useMemo(()=>{if(!d.data)return[];try{let t=(0,x.aK)(d.data);return a&&Z(e,r,t),t}catch(t){return(0,c.L9)("Org Admin Members Table Sinatra vs LG Comparison",{orgId:e,error:JSON.stringify(t)}),[]}},[r,d.data,e,a]),p=E.Q.LOADING;return"loaded"===d.status?p=E.Q.SUCCESS:"errors"===d.status&&(p=E.Q.FAILURE),{sortedUsers:u,editorCutoffs:{},queueRefetch:()=>{throw Error("Not implemented")},status:p,fetchMore:p===E.Q.SUCCESS&&d.data.orgAdminUsers.hasNextPage()?()=>d.data.orgAdminUsers.loadNext(25):void 0}},$=(e,t,r,i,a)=>{let{searchQuery:o,sort:l,filter:s,firstPageSize:c,extraLoggingData:d}=a,[p,m]=n.useState([]),[_,g]=n.useState(void 0),[f,E]=n.useState(null),y=n.useRef(),v=n.useRef(null),b=()=>{v.current&&(clearTimeout(v.current),v.current=null)};n.useEffect(()=>{t&&m([])},[t]);let I=(0,h.q)(({reset:n})=>{var a,u;return n(),b(),null==(a=y.current)||a.abort(),y.current=new AbortController,K(r,e,{cursor:t?null:f,searchQuery:o,sort:l,filter:s,firstPageSize:c,signal:null==(u=y.current)?void 0:u.signal,minimalFields:!1,extraLoggingData:d}).then(n=>{let{users:a}=n;return i&&Z(e,r,a),m([...t?[]:p,...a]),g(n.editorCutoffs),n})},[r,e,f,o,JSON.stringify(l),JSON.stringify(s),c]),T=n.useCallback((t=U)=>{b(),v.current=setTimeout(()=>{var t;return z(r,e,{cursor:null,searchQuery:o,sort:l,filter:s,firstPageSize:c,minimalFields:!1,signal:null==(t=y.current)?void 0:t.signal}).then(e=>{let{users:t,editorCutoffs:r}=e;return m([...t]),g(r),e})},t)},[r,e,f,o,JSON.stringify(l),JSON.stringify(s),c]),w=(0,u.zY)(I)&&I.value.newCursor?()=>E(I.value.newCursor):void 0;return{sortedUsers:p,editorCutoffs:_,queueRefetch:T,status:I.status,fetchMore:w}},q=({searchQuery:e,filter:t,selectedAll:r})=>{let a=(0,i.I0)(),o=(0,i.v9)(({currentUserOrgId:e})=>e),[l,c]=n.useState(null),[d,p]=n.useState({}),[_,g]=n.useState(null),f=(0,m.D)(e),y=(0,m.D)(t),v=(0,m.D)(r),b=f!==e||!s()(y,t)||!v&&r,I={...D.bu,...t},T=!r||"provisional"===I.permissionFilter;n.useEffect(()=>{b&&(p({}),g(null))},[b]);let w=(0,h.q)(({reset:t})=>(t(),T)?Promise.resolve({users:[],newCursor:null,totalUserCount:0}):(null===I.permissionFilter&&(I.permissionFilter="not_provisional"),z(a,o,{cursor:b?null:l,searchQuery:e,filter:I,minimalFields:!0})),[a,o,l,e,r,JSON.stringify(t)]);n.useEffect(()=>{if((0,u.zY)(w)){let{users:e,newCursor:t,totalUserCount:r}=w.value;p(t=>{let r={...b?{}:t};return e.forEach(e=>r[e.id]=e),r}),g(r),t&&c(t)}},[b,w]);let S=(0,u.zY)(w)&&null===w.value.newCursor,C=Object.values(d);return{status:S?E.Q.SUCCESS:(0,u.zY)(w)?E.Q.LOADING:w.status,users:C,totalSelectable:S&&!T?C.length:_}};function X(){let e=B(),t=(0,A.Ng)();return J(t,e)}function J(e,t){return!!(e&&e.are_custom_templates_allowed&&t)}function Q(e){let t=(0,k.YM)(e),r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null;return J(r,t)}let ee=e=>!!e&&"org_user_id"in e&&void 0!==e.org_user_id,et=({filter:e,orgId:t,orgUserIdsToIndex:r,dispatch:i,selectedViewName:a,queueOrgUsersRefetch:l,setPendingOrgUserIds:s})=>{let d=r.length>0&&r.length<100&&!!(0,_.BZ)().members_es_indexing_watcher,u=(0,f.mU)(L.EsOrgUsersView,{orgId:t,queryParams:`${(0,y.cv)({...e&&(0,P._n)(e),org_user_ids:JSON.stringify(r)})}`},{enabled:d}),p=[];"loaded"===u.status&&u.transform(e=>{let t=e.esOrgUsersInfo||[],r="loaded"===t.status?t.data:[];p=(r||[]).map(e=>e.id)});let m=o()(r,p);n.useEffect(()=>{d&&(0===m.length?(i(I.R.enqueue({message:(0,b.t)("add_unassigned_members_modal.unassigned_success_message"),type:"workspace-changed"})),l(0),s([]),(0,c.L9)("ES Indexing Watcher Completed",{orgId:t,indexedOrgUserIds:JSON.stringify(r)})):((0,c.L9)("ES Indexing Watcher In Progress",{orgId:t,remainingUnindexedOrgUserIds:JSON.stringify(m)}),i(I.R.enqueue({message:(0,b.t)("add_unassigned_members_modal.assignment_in_progress_message",{numUsers:m.length,space:"workspace"===a?"workspace":"billing group"}),type:"workspace-changed"}))))},[t,i,l,a,d,s,m.length,JSON.stringify(m),JSON.stringify(r)])}},651850:(e,t,r)=>{r.d(t,{Cd:()=>P,Tn:()=>R,kd:()=>N,v8:()=>L,zR:()=>A});var n=r(652983),i=r(407908),a=r(365653),o=r(337167),l=r(286206),s=r(117986),c=r(126367),d=r(648183),u=r(255215),p=r(405027),m=r(111120),h=r(721127),_=r(864974),g=r(478498),f=r(54055),E=r(345948),y=r(733609),v=r(339531),b=r(646472),I=r(613551),T=r(402191),w=r(475042),S=r(425285),C=r(298715);function O(){let e=(0,S.yD)(),{orgEntity:t,org:r,openFile:i,isReadOnly:o,userCanRunPlugins:l,activeTextReviewPlugin:s,publishedPlugins:c,publishedWidgets:d}=(0,a.c)(e=>({orgEntity:(0,f.bX)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.canRunPlugins)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),u=(0,C.Xk)(),p=n.useMemo(()=>({openFile:i,localExtensions:u,orgEntity:t,org:r,isReadOnly:o,userCanRunPlugins:l,editorType:e,installedPluginVersions:{},activeTextReviewPlugin:s,publishedPlugins:c,publishedWidgets:d}),[i,u,t,r,o,l,e,s,c,d]);return p}function A(e){let t=(0,C.xX)(),r=t.plugins[e]||t.orgPlugins[e],n=(0,C.DG)()[e];return r||(n&&(0,v.T3)(n)?(0,v.hb)(n):void 0)}function N(e,t){let r=A(e);return function(e,t){let r=O(),a=(0,w.M)(),p=(0,c.vf)(),m=(0,i.oR)(),[h,_]=(0,o.KO)(d.X);return n.useCallback(n=>{if(!e){console.error("Plugin version not found"),(0,l.Jz)(s.k.COMMUNITY,Error("Plugin version not found"));return}let i={type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,g._A)(e.manifest.parameters,e.name)};if((0,v.Ze)(e)&&k(m),(0,v.Ve)(e)){p((0,u.Ep)(e)),k(m),_(d.w.PRIMARY);return}(0,g.Gy)({...r,installedPluginVersions:{[e.plugin_id]:e}},t,n||i),a()},[e,r,t,a,m,p,_])}(r,t)}function L(e,t){let r=O(),a=Object.values((0,C.Xk)()).find(t=>t.plugin_id===e),l=(0,w.M)(),s=(0,c.vf)(),p=(0,i.oR)(),[m,h]=(0,o.KO)(d.X);return n.useCallback(e=>{if(!a){console.error("Plugin not found");return}let n={type:"run-local-plugin",localFileId:null==a?void 0:a.localFileId,command:void 0,parameterOnly:a.manifest.parameters&&!1!==a.manifest.parameterOnly,parameterEntry:(0,g._A)(a.manifest.parameters,a.name)};if((0,v.Ze)(a)&&k(p),(0,v.Ve)(a)){s((0,u.Ep)(a)),k(p),h(d.w.PRIMARY);return}(0,g.Gy)(r,t,e||n),l()},[a,r,t,l,p,s,h])}function P(e,t,r){let{appModel:n,selectedView:o}=(0,a.c)(e=>({appModel:e.mirror.appModel,selectedView:e.selectedView})),l=(0,i.I0)(),s=(0,C.DG)()[e],c=(0,v.hb)(s),d=(0,C.xX)(),u=d.plugins[e]||d.orgPlugins[e],p=u||c,m=Object.values((0,C.Xk)()).find(t=>t.plugin_id===e),f=(null==m?void 0:m.manifest.menu)&&m.manifest.menu.length>0&&!(0,v.XM)(m)?(0,g.Mq)(m.manifest.menu,{localFileId:m.localFileId}):[],E=p.manifest.menu&&p.manifest.menu.length>0&&!(0,v.XM)(p)?(0,g.Mq)(p.manifest.menu,{pluginId:p.plugin_id}):[],y=(0,T.w7)(E.map(e=>(0,g.of)(e,e=>()=>t(e))),{appModel:n,selectedView:o}),w=(0,T.w7)(f.map(e=>(0,g.of)(e,e=>()=>r(e))),{appModel:n,selectedView:o});if(!m)return y;if(!s||s&&!s.current_plugin_version_id)return w;let S=[];return m.error?S.push({displayText:"\u26A0 In-development version",callback:()=>{l((0,h.K4)({type:I.x,data:{error:m.error,dispatch:l,resourceType:b.Xh.PLUGIN},showModalsBeneath:!0}))}}):S.push({displayText:"In-development version",...w.length>0?{children:w}:{callback:()=>{"figma"===(0,v.Fl)()&&(l(_.v({seen_published_plugin_onboarding_modal:!0})),l(_.v({seen_development_plugin_onboarding_modal:!0}))),r()}}}),S.push({displayText:"Published version",...y.length>0?{children:y}:{callback:()=>{"figma"===(0,v.Fl)()&&(l(_.v({seen_published_plugin_onboarding_modal:!0})),l(_.v({seen_development_plugin_onboarding_modal:!0}))),t()}}}),S}function R(e,t){let r=(0,i.v9)(e=>e.mirror.appModel),n=(0,i.v9)(e=>e.selectedView),a=(0,C.DG)()[e],o=(0,v.hb)(a),l=o.manifest.menu&&o.manifest.menu.length>0?(0,g.Mq)(o.manifest.menu,{pluginId:o.plugin_id}):[],s=(0,T.w7)(l.map(e=>(0,g.of)(e,e=>()=>t(e))),{appModel:r,selectedView:n});return s}function k(e){let{selectedView:t}=e.getState();"fullscreen"===t.view&&"design"===t.editorType&&(e.dispatch(m.fv({...t,view:"fullscreen",editorType:"dev_handoff"})),(0,p.CX)(e.getState(),"dev_handoff","plugin_run"),(0,E.o)("change_mode"))}},298715:(e,t,r)=>{r.d(t,{$0:()=>ey,A$:()=>eM,Ag:()=>eD,BF:()=>eQ,C8:()=>e5,Co:()=>eV,Cv:()=>es,DB:()=>ex,DG:()=>en,Di:()=>ev,EP:()=>Q,Go:()=>e7,I4:()=>e_,Ld:()=>ez,Lx:()=>et,M4:()=>eE,Mz:()=>eH,N0:()=>eL,OF:()=>ek,P$:()=>er,Pz:()=>ed,Q0:()=>eU,QC:()=>el,Rw:()=>eh,SW:()=>J,UW:()=>eP,Ux:()=>ep,VA:()=>ee,We:()=>ec,X7:()=>e9,Xk:()=>X,Y9:()=>e4,YB:()=>e6,bg:()=>e3,dZ:()=>ei,fU:()=>eK,gf:()=>e0,lB:()=>e2,mE:()=>tr,oS:()=>eR,pJ:()=>tt,pL:()=>te,q3:()=>ej,qs:()=>eb,rG:()=>eg,uY:()=>ef,vb:()=>eu,wJ:()=>eB,xX:()=>ew,xz:()=>e8,yO:()=>ea,yv:()=>eI,z4:()=>e$});var n,i=r(652983),a=r(407908),o=r(600486),l=r(5453),s=r(391320),c=r(365653),d=r(716250),u=r(337167),p=r(669277),m=r(615537),h=r(958189),_=r(286206),g=r(117986),f=r(970740),E=r(618215),y=r(644383),v=r(369874),b=r(749375),I=r(95470),T=r(244311),w=r(286071),S=r(902153),C=r(54055),O=r(776605),A=r(307677),N=r(187436),L=r(200273),P=r(322186),R=r(70918),k=r(761767),D=r(862610),M=r(436649),F=r(259162),x=r(514958),U=r(733609),B=r(339531),V=r(257817),G=r(661539),H=r(41937),W=r(744953),K=r(740280),z=r(668849),Z=r(96965),Y=r(425285),j=r(928247),$=r(175965),q=r(363400);let X=e=>{let t=(0,a.v9)(e=>e.localPlugins);return(0,j.Z_)(t,e)},J=e=>{let t=X(e);return(0,i.useMemo)(()=>{let e={};for(let r in t){let n=t[r];(0,G.gX)(n)||(e[r]=n)}return e},[t])},Q=()=>{let e=X(),t=(0,i.useMemo)(()=>{let t={};for(let r in e){let n=e[r];(0,G.gX)(n)&&(t[r]=n)}return t},[e]);return t},ee=e=>{let t=X();return Object.values(t).find(t=>t.plugin_id===e)},et=()=>{let e=X();return(0,i.useMemo)(()=>{let t={};for(let r in e){let n=e[r];t[n.plugin_id]=n}return t},[e])},er=()=>(0,a.v9)(e=>e.publishingPlugins),en=()=>{let e=(0,a.v9)(e=>e.publishedPlugins),t=(0,Y.MA)();return(0,i.useMemo)(()=>(0,B.nf)(t,e),[e,t])},ei=()=>(0,a.v9)(e=>e.publishedWidgets),ea=({includePendingPublishers:e=!0}={})=>{let t=(0,R.dO)(),r=en();return(0,i.useMemo)(()=>{if(!t)return[];let n=(0,B.pJ)(Object.values(r));return(0,B.$x)((0,B.GE)(n,t,e))},[r,t,e])},eo=()=>{let e=ea(),t=J();return(0,i.useMemo)(()=>Object.values(t).filter(t=>e.every(e=>e.id!==t.plugin_id)),[e,t])},el=()=>{let e=(0,R.dO)(),t=ea(),r=eo();return(0,i.useMemo)(()=>t.reduce((t,r)=>{var n;let i=(null==(n=r.plugin_publishers)?void 0:n.pending)??[];if(i.find(t=>t.id===e)){let e=[...t.invitedPlugins,r];return{...t,invitedPlugins:e}}if((0,v.k4)(r)){let e=[...t.pendingReviewPlugins,r];return{...t,pendingReviewPlugins:e}}let a=[...t.approvedPlugins,r];return{...t,approvedPlugins:a}},{invitedPlugins:[],approvedPlugins:[],pendingReviewPlugins:[],developmentPlugins:r}),[e,r,t])},es=()=>{let e=ea(),t=eo();return e.length+t.length},ec=()=>{let e=(0,R.dO)(),t=ea();return null!=e?t.filter(t=>(0,O.Sr)(t,e)):[]},ed=e=>{let t=(0,R.dO)(),r=en(),n=r[e],i=ei();if(n)return(0,O.Sr)(n,t??"");let a=i[e];return(0,O.Sr)(a,t??"")},eu=({includePendingPublishers:e=!0}={})=>{let t=(0,R.dO)(),r=ei();if(!t)return[];let n=(0,B.pJ)(Object.values(r));return(0,B.$x)((0,B.GE)(n,t,e))},ep=()=>{let e=(0,R.dO)(),t=eu(),r=em();return(0,i.useMemo)(()=>t.reduce((t,r)=>{var n;let i=(null==(n=r.plugin_publishers)?void 0:n.pending)??[];if(i.find(t=>t.id===e)){let e=[...t.invitedWidgets,r];return{...t,invitedWidgets:e}}if((0,v.k4)(r)){let e=[...t.pendingReviewWidgets,r];return{...t,pendingReviewWidgets:e}}let a=[...t.approvedWidgets,r];return{...t,approvedWidgets:a}},{invitedWidgets:[],approvedWidgets:[],pendingReviewWidgets:[],developmentWidgets:r}),[e,r,t])},em=()=>{let e=eu(),t=Q();return(0,i.useMemo)(()=>Object.values(t).filter(t=>e.every(e=>e.id!==t.plugin_id)),[e,t])},eh=()=>{let e=eu(),t=em();return e.length+t.length},e_=()=>{let e=(0,R.dO)(),t=eu();return null!=e?t.filter(t=>(0,O.Sr)(t,e)):[]},eg=e=>{let t=ea({includePendingPublishers:!1});return Object.values(t).find(t=>t.id===e)},ef=e=>{let t=eu({includePendingPublishers:!1});return Object.values(t).find(t=>t.id===e)},eE=()=>{let e=(0,P.Ng)(),t=en(),r=(0,a.I0)(),n=(0,$.mN)(),o=(0,B.iz)();if(i.useEffect(()=>{e&&!n&&r(w.kX())},[r,e,n]),!e||n)return[];let l=(0,B.hi)((0,B.pJ)(Object.values(t)),e.id);o&&(l=(0,B.Vt)(l,o));let s=Object.keys(l).map(e=>l[e]);return s},ey=()=>{let e=(0,P.Ng)(),t=ei(),r=(0,a.I0)(),n=(0,$.mN)(),o=(0,B.iz)();if(i.useEffect(()=>{e&&!n&&r(w.hL())},[r,e,n]),!e||n)return[];let l=(0,B.hi)((0,B.pJ)(Object.values(t)),e.id);return o&&(l=(0,B.Vt)(l,o)),Object.keys(l).map(e=>l[e])};function ev(e){try{let t="string"==typeof e?JSON.parse(e):e,r=G.Gx.safeParse(t);if(!r.success)return(0,_.Jz)(g.k.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(t,null,2),rawManifest:JSON.stringify(e,null,2),errors:r.error.format()}}),t;return r.data}catch(t){(0,_.Jz)(g.k.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}function eb(e,t){var r,n;if(null===e.current_plugin_version_id)return null;let i=e.versions[e.current_plugin_version_id],a={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:i.redirect_icon_url,coverImageUrl:i.redirect_cover_image_url,name:i.name,version:i.version,releaseNotes:i.release_notes,description:i.description,tagline:i.tagline,creatorPolicy:i.creator_policy,manifest:JSON.stringify(i.manifest),createdAt:new Date(i.created_at),iconPath:i.redirect_icon_url,coverImagePath:i.redirect_cover_image_url,codePath:i.redirect_code_url,plugin:{currentPluginVersionId:i.id},playgroundFigFileKey:i.playground_fig_file_key??null,hasPlaygroundFile:!!i.playground_fig_file_key},o={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),approvalStatus:null,installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===k.UG.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,installStatus:null,monetizedResourceMetadataId:(null==(r=e.monetized_resource_metadata)?void 0:r.id)??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,canRate:!1,communityPublishers:(null==(n=e.community_publishers)?void 0:n.accepted.map(t=>({id:t.id,isPending:!1,role:k.fH.CREATOR,userId:t.primary_user_id,profileId:t.id,pluginId:e.id,hubFileId:null,profile:{id:t.id,profileHandle:t.profile_handle,team:"team"===t.entity_type?{id:t.id,name:t.name}:null,org:"org"===t.entity_type?{id:t.id,name:t.name}:null,user:"user"===t.entity_type?{id:t.primary_user_id,name:t.name}:null,teamId:"team"===t.entity_type?t.id:null,orgId:"org"===t.entity_type?t.id:null,primaryUserId:"user"===t.entity_type?t.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:t.current_user_is_following,communityUserIsFollowed:t.current_user_is_followed,entityType:t.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:t.name}})))||[],currentPluginVersion:a,viewableInEditor:!0},l={pluginId:e.id,createdAt:new Date(Date.now()),userId:t.userId,orgId:t.orgId,pluginVersionId:e.current_plugin_version_id,plugin:o,pinnedStatus:k.Vh.UNPINNED};return l}function eI(e,t,r,n,i){var a;if(!e)return;let o=!!e.publishingStatus&&[k.UG.ORG_PRIVATE,k.UG.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus);if(o&&(!e.orgId||e.orgId!==t)&&!(0,d.BZ)().community_hub_admin)return;let l=e.currentPluginVersion;if(!l)return;if(!l.manifest){(0,_.Jz)(g.k.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let s=e.isWidget?"widget":"plugin",c=ev(l.manifest);if(!c)return;let u=`?resource_type=${s}&resource_id=${e.id}`;r&&(u+=`&fuid=${r}`);let p={id:l.id,plugin_id:e.id,name:l.name||"",current_plugin_version_id:(null==(a=l.plugin)?void 0:a.currentPluginVersionId)||void 0,version:l.version||"",release_notes:l.releaseNotes||"",is_private:!!e.orgId,description:l.description||"",creator_policy:l.creatorPolicy??"",manifest:c,installed_by:n,tagline:l.tagline||"",created_at:l.createdAt.toString(),redirect_icon_url:`/community/icon${u}`,redirect_cover_image_url:`/community/thumbnail${u}`,redirect_code_url:`/community/${s}/${e.id}/code`};return i&&(p.saved_at_by_current_user=i.toString()),e.communityPublishers&&(p.community_publishers=e.communityPublishers),e.isWidget&&(p.redirect_snapshot_url=`/community/snapshot${u}`),e.orgId&&(p.org_id=e.orgId),p}let eT=(e,t,r)=>{var n,i;let a={},o={},l={},s={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{}};let c=e.data,d=[{source:"org",plugins:null==(n=c.org)?void 0:n.installedPlugins},{source:"user",plugins:null==(i=c.currentUser)?void 0:i.installedPlugins}];for(let e of d){let{source:n,plugins:i}=e;if(i)for(let e of i){if(!e.plugin||!e.plugin.viewableInEditor)continue;let i=eI(e.plugin,t,r,n,e.createdAt);i&&(e.plugin.isWidget?(o[e.pluginId]=i,"org"===n&&(s[e.pluginId]=o[e.pluginId]||i)):(a[e.pluginId]=i,"org"===n&&(l[e.pluginId]=a[e.pluginId]||i)))}}return{plugins:a,widgets:o,orgPlugins:l,orgWidgets:s}},ew=()=>{let e=(0,a.v9)(e=>e.currentUserOrgId),t=(0,p.mU)(D.InstalledPlugins,{orgId:e}),r=(0,R.dO)();return i.useMemo(()=>{if("loaded"!==t.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{}};let{plugins:n,widgets:i,orgWidgets:a,orgPlugins:o}=eT(t,e,r);return{loaded:!0,plugins:n,widgets:i,orgWidgets:a,orgPlugins:o}},[t,e,r])},eS=null==(n=(0,d.ZP)())?void 0:n.onboarding_plugins,eC=[];if(eS){let{icons:e,images:t,quickstart:r}=eS;eC=(0,l.TV)([(0,l.kd)(e),(0,l.kd)(t),(0,l.kd)(r)])}let eO=(0,u.cn)(eC),eA=(0,u.cn)(!1),eN=(0,u.cn)([]),eL=(e=!0)=>{let t=(0,a.I0)(),[r]=(0,u.KO)(eO),[n,o]=(0,u.KO)(eA),[l,s]=(0,u.KO)(eN);return r.length||n||o(!0),i.useEffect(()=>{0!==r.length&&e&&!n&&W.m.requestPluginsBatch(r).then(e=>{t(T.jb({publishedPlugins:e.data.meta,src:"pluginOnboarding"})),s(e.data.meta),o(!0)}).catch(e=>{console.error(e),o(!0)})},[t,r,e,o,n,s]),(0,i.useMemo)(()=>({loaded:n,result:l}),[n,l])};function eP(e){let t=en(),r=(0,C.rI)(),n=(0,Y.yD)();return i.useMemo(()=>eR(e,{publishedPlugins:t,editorType:n,orgEntity:r}),[e,t,n,r])}function eR(e,{publishedPlugins:t,editorType:r,orgEntity:n}){let{plugins:i,widgets:a,orgPlugins:o,orgWidgets:l}=e,s=[i,a,o,l].map(e=>Object.fromEntries(Object.entries(e).filter(([e,i])=>(0,B.PB)({plugin:i,publishedPlugins:t,editorType:r,orgEntity:n}))));return{loaded:!0,plugins:s[0],widgets:s[1],orgPlugins:s[2],orgWidgets:s[3]}}function ek(e,t){var r,n;let a=(null==(r=(0,P.Ng)())?void 0:r.id)??null,o=(0,R.dO)(),l=(0,p.mU)(D.Plugin,{orgId:a,pluginId:e},{enabled:t}),s=null==(n=l.data)?void 0:n.plugin,c=l.status;return i.useMemo(()=>{if("loaded"!==c||!s)return{loaded:!1,plugin:null};let e=eI(s,a,o,null);return{loaded:!0,plugin:e||null}},[c,s,a,o])}function eD(e,{enabled:t}){var r;let n=(null==(r=(0,P.Ng)())?void 0:r.id)??null,a=(0,R.dO)(),o=i.useMemo(()=>e.map(e=>({orgId:n,pluginId:e})),[e,n]),l=(0,p.YW)(D.Plugin,o,{enabled:t}),s=[];return l.forEach(e=>{var t;let r=e.result;if("loaded"!==r.status)return;let i=null==(t=r.data)?void 0:t.plugin;if(!i)return;let o=eI(i,n,a,null);o&&s.push(o)}),s}function eM(e,t){return e.name.localeCompare(t.name)}let eF={loaded:!0,plugins:{}},ex=()=>{let e=(0,a.v9)(e=>e.selectedView),t=(0,a.v9)(e=>e.installedPluginVersions);return eU({selectedView:e,installedPluginVersions:t})},eU=(0,m.ws)(({selectedView:e,installedPluginVersions:t})=>{if("fullscreen"!==e.view)return eF;let r=(0,B.gd)((0,V.On)(e.editorType));if(!t.loaded)return t;let n={};for(let i of Object.values(t.plugins))(0,B.pe)(r,i.manifest.editorType)?n[i.plugin_id]=i:((0,z.NE)(e)&&(0,B.vS)(i)||"figma"===r&&(0,B.vS)(i))&&(n[i.plugin_id]=i);let i="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,B.Sf)(i,n)}}),eB=()=>{let{widgets:e,orgWidgets:t}=ew(),r={...e,...t},n=(0,a.v9)(e=>e.selectedView),o=(0,a.v9)(e=>e.installedWidgetVersions),l=(0,d.BZ)().use_editor_saved_widgets_lg?r:o.widgets,s=(0,j.Z_)(l);return i.useMemo(()=>"fullscreen"!==n.view?{}:s,[n,s])};function eV(){let e=(0,a.v9)(e=>e.recentlyUsed.widgets),t=Q(),r=(0,q.W)();return(0,i.useMemo)(()=>{let n=[];return r?(e[r].forEach(r=>{let i=e.fetchedResources[r.id];if(i&&i.version){n.push(i.version);return}if(t[r.id]){n.push(t[r.id]);return}}),eW(n)):n},[r,t,e])}function eG(){let e=(0,a.v9)(e=>e.recentlyUsed.plugins),t=J(),r=(0,q.W)(),n=(0,i.useMemo)(()=>{let n=[];return r&&e[r].forEach(r=>{let i=e.fetchedResources[r.id];if(i&&i.version){n.push(i.version);return}if(t[r.id]){n.push(t[r.id]);return}}),n},[r,e,t]);return(0,j.Qs)(n)}function eH(){let e=eG();return eW(e)}function eW(e){let t={};return e.filter(e=>!t[e.plugin_id]&&(t[e.plugin_id]=!0,!0))}function eK(){let e=eH();return i.useMemo(()=>{let t={};return e.forEach(e=>t[e.plugin_id]=e),t},[e])}function ez(){let e=eV();return i.useMemo(()=>{let t={};return e.forEach(e=>t[e.plugin_id]=e),t},[e])}function eZ(e,t,r){let n=Object.keys(e).reduce((e,r)=>{if(t[r]){let n=t[r],i=(0,B.hb)(n);if(!i)return e;e[r]=i}return e},{}),i=(0,B.Sf)(r,n);return Object.keys(i).reduce((e,t)=>(e[t]=!0,e),{})}function eY(e,t){let r=(0,a.I0)(),n=(0,a.v9)(e=>"plugin"===t?e.whitelistedPlugins:e.whitelistedWidgets),i=!!e&&(0,d.BZ)().plugins_lg_allowlist,o=(0,A.zg)(e??"",t,i),l=o.loaded?o.data:[];if(!i)return n;if(!o.loaded)return{};let c={};if(l.forEach(e=>{e&&(c[e]=!0)}),!(0,s.qt)(c,n)){let e="plugin"===t?E.x:E.d;r(e(c))}return c}function ej(e){let t=(0,Y.MA)(),r=(0,P.Ng)(),n=en(),o=!!(r&&r.plugins_whitelist_enforced),l=eY((null==r?void 0:r.id)??"","plugin"),s=(0,a.I0)(),c=(0,L.uC)(),d=(0,G.gu)((null==r?void 0:r.id)??"",c),u=(0,a.v9)(e=>!!r&&(0,M.l3)(e.loadingState,d));i.useEffect(()=>{o&&!u&&s(I.Yh({}))},[o,s,u]);let p=i.useMemo(()=>{let r=l;return e&&(r=function(e,t,r){let n={};return Object.keys(e).forEach(e=>{t[e]&&(0,B.tO)((0,B.hb)(t[e]),r)&&(n[e]=!0)}),n}(r,n,e)),eZ(r,n,t)},[t,l,n,e]);return p}function e$(){let e=(0,Y.MA)(),t=(0,P.Ng)(),r=ei(),n=!!(t&&t.widgets_whitelist_enforced),o=eY((null==t?void 0:t.id)??"","widget"),l=(0,a.I0)(),s=(0,L.uC)(),c=(0,G.mz)((null==t?void 0:t.id)??"",s),d=(0,a.v9)(e=>!!t&&(0,M.l3)(e.loadingState,c));i.useEffect(()=>{n&&!d&&l(I.rr({}))},[n,l,d]);let u=i.useMemo(()=>eZ(o,r,e),[o,r,e]);return u}let eq="plugin_search_duration",eX="widget_search_duration";function eJ(e,t){t.elapsedMs&&(0,o.L9)(e,t,{forwardToDatadog:!0})}function eQ(e){let[t,r]=i.useState(!1),[n,o]=i.useState(!1),[l,s]=i.useState(null),c=(0,a.v9)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),u=c&&c.id,p=(0,a.v9)(e=>{var t;return!!(u&&e.user&&(null==(t=e.orgUsersByOrgId.orgUsers[u][e.user.id])?void 0:t.permission)!==k.Gu.GUEST)}),m=(0,a.I0)(),g=ex().plugins,E=(0,N.zM)(),v=(null==E?void 0:E.shouldOptimizeForIpadApp)||(0,d.BZ)().cmty_m10n_test_apple_os,I=v?"free":"all",w=(0,z.A2)(),S=i.useCallback((t,n,i,a)=>{let l=new h.yN(eq,{});l.start();let[c,d]=K.D_.getCommunityPlugins(t,u,I,e,w,p);r(!0),o(!1),Promise.all([c,d]).then(([c,d])=>{o(!0);let u=[],p=c.data.meta.results.map(e=>(u.push(e.model),e.model.id)),h=d?d.map(e=>(u.push(e.model),e.model.id)):[];m(T.jb({publishedPlugins:u,src:"universalInsert"}));let _=p.filter(e=>g[e]),f=p.filter(e=>!g[e]),E=h.filter(e=>g[e]),y=h.filter(e=>!g[e]);n(f),i(y),a([...E,..._]),s(t),r(!1);let v=l.stop();eJ(eq,{elapsedMs:v,editorType:e,query:t,numPublicResults:p.length,numOrgResults:h.length})}).catch(r=>{let n={query:t,current_org_id:u||"",resource_type:b.x.BrowseResourceTypes.PLUGINS,editor_type:e,did_org_search:p,error:null==r?void 0:r.message,status:null==r?void 0:r.status};(0,_.YD)("search","Search error for Community resources in inserts modal",n,{reportAsSentryError:!0});let i=(0,f.t)("community.actions.an_error_occurred_while_searching_for_plugins");m(y.R.enqueue({error:!0,message:i}))})},[m,e,g,w,u,I,p]);return{pluginServerSideSearch:S,pluginSearchIsLoading:t,pluginSearchHasResolved:n,setLastPluginSearchQuery:s,lastPluginSearchQuery:l}}function e0(e){let[t,r]=i.useState(!1),[n,o]=i.useState(!1),[l,s]=i.useState(null),c=(0,a.v9)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),u=c&&c.id,p=(0,a.v9)(e=>{var t;return!!(u&&e.user&&(null==(t=e.orgUsersByOrgId.orgUsers[u][e.user.id])?void 0:t.permission)!==k.Gu.GUEST)}),m=eB(),g=(0,a.I0)(),E=(0,N.zM)(),v=(null==E?void 0:E.shouldOptimizeForIpadApp)||(0,d.BZ)().cmty_m10n_test_apple_os,I=v?"free":"all",w=i.useCallback((t,n,i,a)=>{let l=new h.yN(eX,{});l.start();let[c,d]=K.D_.getCommunityWidgets(t,u,I,e,p);r(!0),o(!1),Promise.all([c,d]).then(([c,d])=>{o(!0);let u=[],p=c.data.meta.results.map(e=>(u.push(e.model),e.model.id)),h=d.map(e=>(u.push(e.model),e.model.id));g(T.jb({publishedPlugins:u,src:"universalInsert"}));let _=p.filter(e=>m[e]),f=p.filter(e=>!m[e]),E=h.filter(e=>m[e]),y=h.filter(e=>!m[e]);n(f),i(y),a([...E,..._]),r(!1),s(t);let v=l.stop();eJ(eX,{elapsedMs:v,editorType:e,query:t,numPublicResults:p.length,numOrgResults:h.length})}).catch(r=>{let n={query:t,current_org_id:u||"",resource_type:b.x.BrowseResourceTypes.WIDGETS,editor_type:e,did_org_search:p,error:null==r?void 0:r.message,status:null==r?void 0:r.status};(0,_.YD)("search","Search error for Community resources in inserts modal",n,{reportAsSentryError:!0});let i=(0,f.t)("community.actions.an_error_occurred_while_searching_for_widgets");g(y.R.enqueue({error:!0,message:i}))})},[g,e,u,I,m,p]);return{widgetServerSideSearch:w,widgetSearchIsLoading:t,widgetSearchHasResolved:n,setLastWidgetSearchQuery:s,lastWidgetSearchQuery:l}}let e1={list:H.R.getRecentFaceStamps,search:H.R.searchFaceStamps};function e2({maxResults:e}){let t=(0,a.I0)(),r=(0,x.Tr)({maxResultsCount:e,api:e1,includeHiResAvatars:!0}),[n,o]=i.useState(!1),[l,s]=i.useState(!1),[c,d]=i.useState(null),u=(0,Z.bE)(),p=i.useCallback(e=>{if(!u){s(!0),o(!1),d(e);return}o(!0),s(!1),(0,F.Fj)(e,r,!1).then(r=>{s(!0);let n=(null==r?void 0:r.mentions)||[];d(e),t(S.vm(n)),o(!1)})},[r,t,u]);return i.useMemo(()=>({faceStampServerSideSearch:p,faceStampSearchIsLoading:n,faceStampSearchHasResolved:l,lastFaceStampSearchQuery:c,setLastFaceStampSearchQuery:d}),[l,n,p,c])}function e3(e){let t=ea({includePendingPublishers:!1}),r=eu({includePendingPublishers:!1}),n=et(),i=(e?r:t).filter(e=>!n[e.id]);return i}function e4(e,{searchLocalPlugins:t,searchSavedPlugins:r,searchPublishedPlugins:n,searchRecentPlugins:a}){let o=X(),l=ex(),s=en(),c=eK();return i.useMemo(()=>(0,B.pj)({idToSearch:e,savedPlugins:r?l:void 0,localPluginsByFileId:t?o:void 0,publishedPlugins:n?s:void 0,recentPlugins:a?c:void 0}),[e,l,o,s,c,r,t,n,a])}function e6({searchLocalPlugins:e,searchSavedPlugins:t,searchPublishedPlugins:r,searchRecentPlugins:n}){let a=X(),o=ex(),l=en(),s=eK();return i.useCallback(i=>(0,B.pj)({idToSearch:i,savedPlugins:t?o:void 0,localPluginsByFileId:e?a:void 0,publishedPlugins:r?l:void 0,recentPlugins:n?s:void 0}),[o,a,l,s,t,e,r,n])}function e8(){let e=ex(),t=ea(),r=eG(),n={};return Object.values(e.plugins).forEach(e=>{n[e.plugin_id]||(n[e.plugin_id]=e)}),Object.values(t).map(B.hb).forEach(e=>{n[e.plugin_id]||(0,G.rV)(e)||(n[e.plugin_id]=e)}),r.forEach(e=>{n[e.plugin_id]||(0,G.rV)(e)||(n[e.plugin_id]=e)}),n}function e9(){let e=en(),t=(0,C.rI)(),r=ew(),n=(0,Y.yD)(),a=ej(),o=(0,c.c)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,mirror:e.mirror,selectedView:e.selectedView,openFile:e.openFile}));return i.useCallback(i=>(0,B.PB)({plugin:i,publishedPlugins:e,orgEntity:t,installedPluginVersions:(0,G.gX)(i)?r.widgets:r.plugins,editorType:n,canRunPluginState:{...o,whitelistedPlugins:a}}),[e,t,r.widgets,r.plugins,n,o,a])}function e5(){return(0,a.v9)(U.canRunPlugins)}function e7(e){let t=(0,P.Ng)(),r=!!(t&&t.widgets_whitelist_enforced),n=(0,a.v9)(e=>e.whitelistedWidgets),o=n[e],l=Q(),s=i.useMemo(()=>Object.values(l).find(t=>t.plugin_id===e),[l,e]),c=(0,a.v9)(t=>t.publishedWidgets[e]),d=!r||s||(null==c?void 0:c.org_id);return{isWidgetBlockedByAllowlist:!o&&!d}}function te(e){let t=(0,a.I0)(),r=(0,P.Ng)(),n=!!(r&&r.plugins_whitelist_enforced),o=(0,a.v9)(e=>e.whitelistedPlugins),l=o[e],s=X(),c=i.useMemo(()=>Object.values(s).find(t=>t.plugin_id===e),[s,e]),d=(0,a.v9)(t=>t.publishedPlugins[e]),u=!n||c||(null==d?void 0:d.org_id),p=!l&&!u,m=i.useCallback(()=>!p||(t(y.R.enqueue({message:(0,f.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[p,t]);return{validatePublishedPluginInOrgAllowlist:m,isPluginBlockedByAllowlist:p}}function tt(e,t){let r=(0,P.Ng)(),n=!!(r&&r.plugins_whitelist_enforced),a=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,l=ej(t),s=e$(),c=e?s:l,d=e?a:n,u=(null==r?void 0:r.id)??"",p=(0,L.uC)(),m=(0,M.nR)(e?(0,G.mz)(u,p):(0,G.gu)(u,p)),h=i.useCallback(e=>d?e.filter(e=>!(0,G.$9)(e)||!!c[e.plugin_id]):e,[c,d]),_=i.useCallback(e=>o?e.filter(e=>!(0,G.$9)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:m,hasPluginAllowList:n,hasWidgetAllowList:a,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}function tr(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:t}=tt(!1),r=eH(),n=e(t(r));return n}},125274:(e,t,r)=>{r.d(t,{Ni:()=>I,Oe:()=>v,Q:()=>b,W5:()=>y,vk:()=>T});var n=r(652983),i=r(407908),a=r(848080),o=r(172497),l=r(337167),s=r(50235),c=r(511169),d=r(961215),u=r(187436),p=r(572333),m=r(933114),h=r(88323),_=r(425285),g=r(332224);let f=(0,o.F)(g.JZB),E=(0,l.cn)(0);function y(){let e=(0,i.v9)(({mirror:{appModel:e}})=>e.showUi);return e?f:0}let v=()=>{let e=(0,u.xF)();return(0,n.useCallback)(async()=>{if(null==e?void 0:e.toastBottomInset){let t=await e.toastBottomInset();return t}return Promise.reject()},[e])};function b(){var e,t;let r=(0,_.bR)(),n=(0,l.Dv)(s.G9),a=(0,l.Dv)(E),c=(0,p.YO)(null==(t=null==(e=d.O$1)?void 0:e.editorPreferences())?void 0:t.showFigmaScope,!1),u=(0,i.v9)(e=>e.mirror.appModel.showKeyboardShortcuts),h=(0,i.v9)(e=>e.isMakeSomethingV2Active),f=(0,l.Dv)(m.Z),y=0;return u&&(y=(0,o.F)(g.AF1)),y+=(c?f:0)+a,r&&(y+=n,h&&(y-=(0,o.F)(g.L3s))),y}function I(){let e=(0,h.UY)(),t=(0,h.Hc)(),r=(0,h.x0)(),n=(0,h.SZ)(),l=(0,c.q)(),s=(0,i.v9)(e=>{var t;return!!(null==(t=e.prototype)?void 0:t.isFooterVisible)}),d="ui3"===(0,a.Fg)().version,u=(0,_.bR)(),p=(0,i.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi});return u?e&&(t||r||n)?(0,o.F)(g.QT3)+(0,o.F)(g.MiP):e?(0,o.F)(g.QT3):0:l?(0,o.F)(g.QWJ):s?(0,o.F)(g.GMZ):d&&p?56:0}function T(e){let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{function t(){let t=document.querySelector(e);r((null==t?void 0:t.getBoundingClientRect())??null)}t();let n=setInterval(()=>t(),500);return()=>clearInterval(n)},[e]),t}},626291:(e,t,r)=>{r.d(t,{Fm:()=>p,V_:()=>u,ak:()=>m,cV:()=>d});var n,i=r(652983),a=r(407908),o=r(269658),l=r(472131),s=r(448694),c=r(413810);function d(){return(0,a.v9)(e=>!!e.screenreader.enabled)}function u(){let e=(0,a.I0)(),t=(0,a.v9)(e=>e.screenreader.enabled),r=(0,a.v9)(e=>e.user||void 0),n=(0,i.useCallback)((t,n)=>{e((0,l.dr)({enabled:t,scope:n,user:r}))},[e,r]);return[t,n]}var p=((n=p||{}).TOGGLE_DOM_ON_MENU="toggle_dom_on_menu",n.TOGGLE_DOM_OFF_MENU="toggle_dom_off_menu",n.PROTOTYPE_BUTTON_CLICKED="prototype_button_clicked",n.SKIP_TO_CONTENT="skip_to_content",n.ENABLE_AND_SKIP_TO_CONTENT="enable_and_skip_to_content",n.FOCUS_CYCLE_NEXT_AREA="focus_cycle_next_area",n.FOCUS_CYCLE_PREVIOUS_AREA="focus_cycle_previous_area",n.FIGJAM_UPDATE_TREE="figjam_update_tree",n.FIGJAM_UPDATE_NODE="figjam_update_node",n.FIGJAM_INITIAL_TREE_LOAD="figjam_initial_tree_load",n.FIGJAM_INCREMENTAL_UPDATE_DISCREPANCY="figjam_incremental_update_discrepancy",n.TOGGLE_DEFAULT_APPLICATION_ON_MENU="toggle_default_application_on_menu",n.TOGGLE_DEFAULT_APPLICATION_OFF_MENU="toggle_default_application_off_menu",n);function m(){return(0,i.useCallback)((e,t)=>{let r=o.V.getState(),n=(0,c.UE)(r.selectedView);(0,s.hp)("accessibility_actions",n,r,{actionName:e,...t},{forwardToDatadog:!0})},[])}},24742:(e,t,r)=>{r.d(t,{Qq:()=>A,Rx:()=>k,Sg:()=>O,Vb:()=>I,W0:()=>N,W7:()=>R,WT:()=>C,_z:()=>w,lT:()=>S,qA:()=>D,uh:()=>T});var n,i=r(652983),a=r(407908),o=r(559341),l=r(46347),s=r(663073),c=r(716250),d=r(337167),u=r(669277),p=r(31642),m=r(200273),h=r(322186),_=r(761767),g=r(862610),f=r(801998),E=r(733609),y=r(456326),v=r(97049),b=r(360229),I=((n=I||{}).NOT_ENABLED="NOT_ENABLED",n.CAN_PUBLISH="CAN_PUBLISH",n.FILE_IN_DRAFTS="FILE_IN_DRAFTS",n.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",n.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",n.CANNOT_PUBLISH="CANNOT_PUBLISH",n);function T(){var e;let t=(0,h.Ng)(),r=(0,a.v9)(e=>e.openFile),n=!!(null==r?void 0:r.canPublishTemplate),i=!!(null==r?void 0:r.canEdit),o=!!(null==t?void 0:t.are_custom_templates_allowed),l=!(null==r?void 0:r.teamId);return t&&(null==r?void 0:r.editorType)===_.gg.WHITEBOARD?n?"CAN_PUBLISH":i?o?l?(null==(e=null==r?void 0:r.currentPartialOrgUser)?void 0:e.draftsFolderId)===(null==r?void 0:r.folderId)?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function w(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,l.vE)(e)}}function S({fileKey:e,editor_type:t,team_id:r,state:n,isNotInDrafts:i}){let a=(0,E.canEditFile)(e,n),o=n.currentUserOrgId&&n.orgById[n.currentUserOrgId];return!!(o&&a&&t===_.gg.WHITEBOARD&&o.are_custom_templates_allowed&&(r||i))}function C(){let e=(0,h.Ng)(),t=(0,m.CA)(),r=null==t?void 0:t.template;return r&&O(r,e)?r:null}function O(e,t){return!!e&&!e.unpublishedAt&&!!t&&!!t.are_custom_templates_allowed}function A(e){return e.id===v.u}let N=e=>{let[t,r]=(0,i.useState)(null),[n,a]=(0,i.useState)(!1),[l,d]=(0,i.useState)([]),[u,m]=(0,i.useState)([]),[h,_]=(0,i.useState)(0),[g,E]=(0,i.useState)(!0),y=(0,s.M)(),v=(0,f.vS)(e),I=(0,i.useCallback)(({ids:t,myTeamsOnly:r,offset:n=0})=>{if(e){if((0,c.BZ)().migrate_to_search_teamplates_v3)b.U.getFilteredTeamTemplates({orgId:e.id,from:n,size:5,...v?{my_teams_only:r,workspace_ids:t}:{team_ids:t}}).then(({data:e})=>{m("filterable_workspaces"in e.meta?e.meta.filterable_workspaces:e.meta.filterable_teams),d(t=>0===n?e.meta.templates_by_team:[...t,...e.meta.templates_by_team]),_(e.meta.templates_by_team.length),E(!1)});else{let i=p.ZP.post(`/api/templates/${e.id}/browse`,{from:n,size:5,...v?{my_teams_only:r,license_group_ids:t}:{team_ids:t}});y(i,({data:e})=>{m("filterable_license_groups"in e.meta?e.meta.filterable_license_groups:e.meta.filterable_teams),d(t=>0===n?e.meta.templates_by_team:[...t,...e.meta.templates_by_team]),_(e.meta.templates_by_team.length),E(!1)})}}},[e,y,v]);(0,i.useEffect)(()=>{I({ids:null,myTeamsOnly:!1})},[I]);let T=(0,o.Z)(I,300),w=(0,i.useCallback)(t=>{e&&(S.current={},E(!0),r(t.ids),a(t.myTeamsOnly),T(t))},[e,T]),S=(0,i.useRef)({}),C=(0,i.useCallback)(()=>{5===h&&I({ids:t,myTeamsOnly:n,offset:l.length})},[t,n,l,h,I]),O=(0,i.useCallback)(t=>{let r=l.find(e=>e.team_id===t);if((null==e?void 0:e.id)&&r&&r.templates.length<r.total){let n=r.templates.length,i=S.current[t]||0;if(i>=n)return;S.current[t]=n,b.U.getTeamBrowsePaginated({orgId:e.id,teamId:t,from:n,size:10}).then(({data:e})=>{d(r=>r.map(r=>r.team_id===t?{...r,templates:[...r.templates,...e.meta.templates]}:r))})}},[null==e?void 0:e.id,l]),A=L(e),N=P(e);return{selectedTeamOrWorkspaceOrLicenseGroupIds:t,isMyTeamsOnly:n,onFilterChange:w,userTeamOrWorkspaceOrLicenseGroupIds:(0,c.BZ)().migrate_to_search_teamplates_v3?N:A,templatesByTeam:l,filterOptions:u,requestLoadMore:C,requestLoadMoreForTeam:O,isLoadingTeamTemplates:g}},L=e=>{var t,r;let n=(0,f.vS)(e),i=(0,u.mU)(g.BrowseTemplatesView,{currentOrgId:(null==e?void 0:e.id)||""},{enabled:!!e});if("loaded"!==i.status||!e)return null;let a=null==(r=null==(t=i.data.currentUser.privilegedOrgUser)?void 0:t.licenseGroupMember)?void 0:r.licenseGroup.id;return n?a?[a]:null:i.data.currentUser.orgAwareTeamRoles.reduce((e,t)=>t.team?[...e,t.team.id]:e,[])},P=e=>{var t;let r=(0,f.vS)(e),n=(0,u.mU)(g.BrowseTemplatesView,{currentOrgId:(null==e?void 0:e.id)||""},{enabled:!!e});if("loaded"!==n.status||!e)return null;if(r){let e=null==(t=n.data.currentUser.privilegedOrgUser)?void 0:t.workspaceUsers.find(e=>e.isMainWorkspace);return e?[e.workspaceId]:null}return n.data.currentUser.orgAwareTeamRoles.reduce((e,t)=>t.team?[...e,t.team.id]:e,[])};function R(e,t=2){let[r,n]=(0,i.useState)(null),a=(0,s.M)();return(0,i.useEffect)(()=>{let r=b.U.getSearchPaginated({orgId:e.id,size:t,from:0});a(r,e=>{n(e.data.meta.templates)})},[e.id,a,t]),r}let k=(0,d.cn)(null),D=()=>{let e=C(),t=(0,a.oR)(),[r,n]=(0,d.KO)(k);return(0,i.useEffect)(()=>{(null==e?void 0:e.fileVersionId)&&null===r&&(0,y.sT)(e.fileVersionId,t).then(({numPagesWithChanges:e})=>{n(e>0)}).catch(()=>n(!1))},[null==e?void 0:e.fileVersionId,t,r,n]),r}},75388:(e,t,r)=>{r.d(t,{Ar:()=>q,FH:()=>z,Fe:()=>U,GP:()=>j,Kq:()=>Z,cb:()=>x,n3:()=>H,sA:()=>Y,u8:()=>G});var n=r(652983),i=r(407908),a=r(600486),o=r(46347),l=r(448501),s=r(663073),c=r(134193),d=r(792808),u=r(958189),p=r(31642),m=r(970740),h=r(644383);r(283537);var _=r(218609),g=r(28786),f=r(334392),E=r(307425),y=r(864974),v=r(536982),b=r(754738),I=r(852601),T=r(961215),w=r(269075),S=r(322186),C=r(70918),O=r(179640),A=r(436649),N=r(948150);r(646472);var L=r(249203),P=r(938110),R=r(360229);let k=(e,t)=>{switch(e.type){case N.W.HubFile:return`/api/hub_files/${M(e)}/${t}/prepare_insert`;case N.W.TeamTemplate:return`/api/templates/${M(e)}/${t}/prepare_insert`}},D=e=>{switch(e.type){case N.W.HubFile:return`/api/hub_files/${M(e)}/template_canvas`;case N.W.TeamTemplate:return`/api/templates/${M(e)}/template_canvas`}},M=({type:e,template:t})=>{switch(e){case N.W.HubFile:return t.id;case N.W.TeamTemplate:return t.file_key;default:(0,o.vE)(e)}},F=({template:e,type:t})=>{switch(t){case N.W.HubFile:return{type:P._g.CommunityResource,id:e.id};case N.W.TeamTemplate:return{type:P._g.TeamTemplate,file_key:e.file_key};default:(0,o.vE)(t)}};async function x({insert:e,dispatch:t,fileKey:r,template:n,onSuccess:i,onFailure:o,userTriggered:l=!0,isPreview:s=!1,triggeredFrom:c}){let d=new u.yN(`template_insert.${c}`,{key:r??""});d.start();let p=e=>{let t=d.stop();(0,a.L9)(e,{elapsedMs:t,triggeredFrom:c,isPreview:s},{forwardToDatadog:!0,batchRequest:!0})},_=M(n);try{await (0,v.E)(()=>_,r,b.n.STANDARD,async()=>{let a=await e();a&&(i&&i(),p("template_insert_success"),(0,b.v)(s?"resource_previewed":"resource_inserted",{fileKey:r,resourceType:"template",resourceName:(0,I.gA)(n),resourceId:_,triggeredFrom:c,templateType:n.type,templateCategory:n.type===N.W.HubFile?n.category:void 0}),l)&&(t(y.v({inserted_figjam_template:!0})),n.type===N.W.TeamTemplate&&t(f.z([n.template])),"section-preset"!==c&&t(E.of({storeInRecentsKey:P.xQ.FigJam,...F(n)})))},{enableTracking:!s})}catch(e){t(h.R.enqueue({message:(0,m.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),p("template_insert_failure")}}async function U({template:e,fileKey:t,fileVersion:r}){if(!t)throw Error("Missing file key");if(!r)throw Error("Missing file version");let n=k(e,t),i=D(e),a=e.type===N.W.HubFile?{fv:`${r}`}:void 0,o=p.ZP.post(i,{fv:`${r}`},{responseType:"arraybuffer"});return await Promise.all([o,p.ZP.post(n,a)]).then(([{data:e}])=>e)}async function B(e){let{userTriggered:t=!0,templateInsertionDirection:r=T.s8o.RIGHT,templateCustomPosition:n,selectTemplateAfterInsertion:i}=e;await x({insert:async()=>await U(e).then(e=>(w.y2.user("insert-figjam-template",()=>T.iTB.insertTemplateInCanvas(e,r,i??t,!n,n?n.x:null,n?n.y:null)),!0)),...e})}function V(e,t){return`INSERT_FIGJAM_TEMPLATE_${e}_${t}`}let G=()=>{let e=(0,i.I0)(),t=(0,i.v9)(e=>e.openFile?e.openFile.key:null),r=(0,i.v9)(e=>e.fileVersion),n=(0,i.v9)(e=>e.loadingState);return{insertTemplate:async({onSuccess:i,onFailure:a,...o})=>{let l=M(o.template),s=V(t,l);(0,A.hg)(n,s)||(e(g.DB({key:s})),await B({dispatch:e,fileKey:t,fileVersion:r,...o,onSuccess:()=>{e(g.IV({key:s})),i&&i()},onFailure:()=>{e(g.IV({key:s})),a&&a()}}))},isInsertingTemplate:e=>{let r=V(t,e);return(0,A.hg)(n,r)}}};function H(e){let t=(0,i.v9)(e=>e.recentlyUsed.templates),r=(0,i.v9)(e=>e.hubFiles),a=(0,i.v9)(e=>e.recentCustomTemplates);return(0,n.useMemo)(()=>t[e].map(e=>{let{type:t}=e;switch(t){case P._g.CommunityResource:let n={type:N.W.HubFile,template:r[e.id]};return n;case P._g.TeamTemplate:let i={type:N.W.TeamTemplate,template:a[e.key]};return i;default:(0,o.vE)(t)}}).filter(({template:e})=>!!e),[t,r,a,e])}async function W({dispatch:e,templateIdentifier:t,onSuccess:r,onFailure:n,templateName:i,openInNewTab:a,folderId:o}){await p.ZP.post(`/api/templates/${t.file_key}/duplicate`,{folder_id:o}).then(({data:n})=>{let{fig_file:i,template:o}=n.meta;r(),e(f.z([o])),e(E.of({storeInRecentsKey:P.xQ.FigJam,...t})),l.default.redirect((0,L.Sb)(i),a?"_blank":void 0)}).catch(()=>{let t={error:!0,message:(0,m.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:i})};e(h.R.enqueue(t)),n()})}function K(e){return`DUPLICATE_FIGJAM_TEMPLATE_${e}`}let z=(0,_.u4)((e,t)=>{let r=K(t.templateIdentifier.file_key),{dispatch:n}=e,{loadingState:i}=e.getState();(0,A.hg)(i,r)||(n(g.DB({key:r})),W({...t,dispatch:n,onSuccess:()=>{n(g.IV({key:r})),t.onSuccess&&t.onSuccess()},onFailure:()=>{n(g.IV({key:r})),t.onFailure&&t.onFailure()}}))});function Z(){let e=(0,i.I0)();return(0,n.useCallback)(t=>e(z(t)),[e])}function Y(){let e=(0,i.v9)(e=>e.loadingState);return t=>{let r=K(t);return(0,A.hg)(e,r)}}function j(e,t){let[r,i]=(0,n.useState)(null),[a,o]=(0,n.useState)(0),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)([]),p=(0,s.M)(),m=(0,S.Ng)();(0,n.useEffect)(()=>{i({offset:0,searchTerm:e})},[e]),(0,n.useEffect)(()=>{if(!(null==r?void 0:r.searchTerm)||!m||!t){u([]),o(0);return}let e=R.U.getSearchPaginated({orgId:m.id,query:r.searchTerm,from:r.offset,size:10});c(!0),p(e,e=>{r.offset>0?u(t=>[...t,...e.data.meta.templates]):u(e.data.meta.templates),o(e.data.meta.total),c(!1)})},[m,t,r,p]);let h=(0,n.useCallback)(()=>d.length<a&&(i(e=>e?{...e,offset:e.offset+10}:null),!0),[d.length,a]);return{templates:d,requestLoadMore:h,total:a,isLoading:l}}let $={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII=",buffer:null};function q(e){let t=(0,C.xJ)(),r=(0,c.q)(()=>t?(0,O.DO)(e,t):Promise.reject(Error("User not logged in")),[e,t]),[i,a]=(0,n.useState)($);return(0,n.useEffect)(()=>{r.status===d.Q.SUCCESS&&a(r.value),r.status===d.Q.FAILURE&&a($)},[r]),i}},179110:(e,t,r)=>{r.d(t,{$o:()=>m,wY:()=>h,zQ:()=>p});var n=r(652983),i=r(848080),a=r(961215),o=r(468211),l=r(875343),s=r(217421),c=r(402828),d=r(84016),u=r(425285);function p(){return"ui3"===(0,i.Fg)().version}function m(){let e=function(){let e=(0,u.MA)(),t="dev_handoff"===e,r=(0,d.IU)(),n=(0,c.hd)(),i=t&&o.bd.getIsExtension(),a=(0,s.Oq)(s.Sw.ui3),l=(0,s.Oq)(s.Sw.ui3ExpNonDesign);return!!r||!!n||!i&&("design"===e||t?a:a&&l)}(),{updateMode:t}=(0,i.Fg)();(0,n.useEffect)(()=>{t({version:e?"ui3":"ui2"})},[e,t])}function h(){let e=p(),t=(0,l.K)();(0,n.useEffect)(()=>{var t;null==(t=a.O$1)||t.uiState().isUI3.set(e)},[e,t])}},408462:(e,t,r)=>{r.d(t,{Ye:()=>l,fY:()=>a,kr:()=>o});var n=r(256768),i=r(220518);function a(){let e=new Date,t=(0,n.Z)(e).format("YYYY-MM-DD"),r=(0,n.Z)(e).subtract(366,"days").format("YYYY-MM-DD");return{today:t,minDate:r}}function o(e){return e?(0,n.Z)(e).add(1,"day").subtract(1,"second").format():null}function l(e,t){if(t)for(let e of t){let t=function(e){let t=(e||"").trim();return t&&!(0,i.Jh)(t)?{message:"An email is invalid",field:"email"}:null}(e);if(t)return t}return function(e){let t=(0,n.Z)(e.start),r=(0,n.Z)(e.end);if(!t.isValid())return{message:"The start date is invalid",field:"startDate"};if(!r.isValid())return{message:"The end date is invalid",field:"endDate"};if(t.diff(r,"days")>0)return{message:"The start date cannot be greater than the end date",field:"startDate"};let{today:i,minDate:o}=a();return t.diff(i,"days")>0||0>t.diff(o,"days")?{message:"The start date is out of range",field:"startDate"}:r.diff(i,"days")>0?{message:"The end date is out of range",field:"endDate"}:null}(e)}},448694:(e,t,r)=>{r.d(t,{$A:()=>A,A2:()=>W,As:()=>F,BX:()=>U,EB:()=>H,Eg:()=>u,H:()=>L,Ks:()=>w,LU:()=>O,LY:()=>z,M_:()=>C,NB:()=>E,O5:()=>I,Pg:()=>g,Qs:()=>N,T6:()=>B,Tp:()=>D,U6:()=>T,V7:()=>S,VQ:()=>P,b5:()=>M,eZ:()=>K,gY:()=>y,gc:()=>b,hM:()=>v,hp:()=>f,iP:()=>R,no:()=>G,r4:()=>V,tx:()=>p,zz:()=>m});var n,i,a=r(600486),o=r(286206),l=r(761767),s=r(112602),c=r(493866),d=r(305086);function u(e){switch(e){case"design":return"design";case"whiteboard":return"figjam";case"dev_handoff":return"dev_handoff";case"slides":return"slides";default:return"unknown"}}function p(e){switch(e&&e.editorType){case"design":return"design";case"whiteboard":return"figjam";default:return"unknown"}}function m(e,t){return"fullscreen"===e.view?u(e.editorType):t?p({editorType:t}):"unknown"}let h=(e,t)=>{var r;switch(t.selectedView.view){case"prototype":case"mobileViewer":if((null==(r=t.selectedView.file)?void 0:r.key)===e)return t.selectedView.file||null;return null;default:return e&&t.fileByKey[e]||null}},_=(e,t,r,n={})=>{var i;let a={...n};return a.productType=m(r.selectedView,t&&t.editor_type),a.fileKey=e||"new",a.fileParentOrgId=t&&t.parent_org_id,a.fileTeamId=t&&t.team_id,t&&t.file_repo_id&&(a.fileRepoId=t.file_repo_id),a.fileTeamId=t&&t.team_id,a.containingFolderId=t&&t.folder_id,a.entrypoint=n.entrypoint,a.figmaBasicsExperiment=null==(i=null==t?void 0:t.track_tags)?void 0:i.figma_basics_experiment,a},g=()=>{(0,a.Pg)()},f=(0,c.t)((e,t,r,n={},i)=>{let o=h(t,r),l=_(t,o,r,n);(0,a.L9)(e,l,i)}),E=(0,c.t)((e,t,r,n={},i)=>{let o=_(t.key,t,r,n);(0,a.L9)(e,o,i)}),y=(0,c.t)((e,t,r,n)=>{let i=h(t,r),o=_(t,i,r,n);a.RQ.trackDefinedEvent(e,o)}),v=(e,t,r={},n)=>{r.productType=t&&p(t),r.fileKey=(null==t?void 0:t.key)||"new",r.fileParentOrgId=null==t?void 0:t.parentOrgId,r.fileTeamId=null==t?void 0:t.teamId,r.containingFolderId=null==t?void 0:t.folderId,t&&t.fileRepoId&&(r.fileRepoId=t.fileRepoId),(0,a.L9)(e,r,n)};function b(e,t,r){let n="File Browser File Clicked";if(t.state){var i,o;f(n,e,t.state,{selectedView:"recentsAndSharing"===(i=t.state).selectedView.view?i.selectedView.tab||s.D.RECENTLY_VIEWED:"folder"===i.selectedView.view&&i.selectedView.folderId===(null==(o=i.user)?void 0:o.drafts_folder_id)?"drafts":i.selectedView.view,entrypoint:t.entrypoint,planFilterId:t.planFilterId,planFilterType:t.planFilterType,sharedByFilter:t.sharedByFilter,viewMode:t.viewMode},r)}else t.selectedViewName?(0,a.L9)(n,{fileKey:e,selectedView:t.selectedViewName,entrypoint:t.entrypoint},r):(0,a.L9)(n,{fileKey:e,entrypoint:t.entrypoint},r)}function I(e){(0,a.L9)("file_browser_loaded",{selectedView:e.view})}function T(e,t,r){(0,a.L9)("file_browser_plan_filter_selected",{planId:e,entryPoint:t,planType:r})}function w(e,t){(0,a.L9)("file_browser_sharer_filter_selected",{sharerId:e,entryPoint:t})}function S(e,t,r={},n){r.fileKeys=t.map(e=>e.key),r.fileParentOrgIds=[],r.fileTeamIds=[],r.containingFolderIds=[],t.forEach(e=>{r.fileParentOrgIds.push(e.parent_org_id),r.fileTeamIds.push(e.team_id),r.containingFolderIds.push(e.folder_id)}),(0,a.L9)(e,r,n)}function C(e,t,r,n={},i){let o=t.map(e=>r.fileByKey[e]);n.fileKeys=t,n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],o.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,a.L9)(e,n,i)}let O=(e,t,r={},n)=>{r.fileKeys=[],r.fileParentOrgIds=[],r.fileTeamIds=[],r.containingFolderIds=[],t.forEach(e=>{r.fileKeys.push(e.key),r.fileParentOrgIds.push(e.parentOrgId),r.fileTeamIds.push(e.teamId),r.containingFolderIds.push(e.folderId)}),(0,a.L9)(e,r,n)};function A(e,t,r,n){let i=e.map(e=>e.key),a=[],o=[],l=[];i.forEach((e,r)=>{let n=t[r];a.push(n.key),o.push(n.folder_id),l.push(n.team_id)}),C("File Copied",i,r,{copiedFileKeys:a,copiedContainingFolderIds:o,copiedFileTeamIds:l},n)}function N(e,t,r,n,i={},o){let l=n.folders[t];i.folderId=(null==l?void 0:l.id)||t,i.folderTeamId=(null==l?void 0:l.team_id)||r,(0,a.L9)(e,i,o)}function L(e,t,r,n={},i){let o=(0,d.m)(t,r);n.teamId=null==o?void 0:o.id,n.teamName=null==o?void 0:o.name,(0,a.L9)(e,n,i)}function P(e,t,r,n={},i){let o=r.orgById[t];n.orgId=o.id,n.orgName=o.name,(0,a.L9)(e,n,i)}function R(e,t,r={},n){let i=t.user;r.userId=i&&i.id,(0,a.L9)(e,r,n)}let k={[l._g.FILE]:"fileKey",[l._g.FILE_REPO]:"fileRepoId",[l._g.FOLDER]:"folderId",[l._g.TEAM]:"teamId"};function D(e,t,r={},n){let i=k[t.resource_type];r.roleId=t.id,r[i]=t.resource_id_or_key,t.user_id&&(r.roleUserId=t.user_id),(0,a.L9)(e,r,n)}function M(e,t){(0,a.L9)(e,t)}function F(e){return{canEdit:e.canEdit,fileKey:e.key,productType:p(e)}}var x=((n=x||{}).DESIGN="DESIGN",n.WHITEBOARD="WHITEBOARD",n);let U="CTA Clicked",B=(e,t,r)=>{let n=t||U;(0,o.YK)(n,e.text||"",e,{logToConsole:o.c6.NEVER});let i={...e,nonInteraction:0};(0,a.L9)(n,i,{forwardToDatadog:!0,sendAsBeacon:r})};var V=((i=V||{}).NOT_POPULATED="not_populated",i.POPULATED_INCOMPLETE="populated_incomplete",i.POPULATED_COMPLETE="populated_complete",i);let G=(e,t)=>{let r={...e,nonInteraction:0};(0,a.L9)("Input Blurred",r,t)},H=(e,t={})=>{(0,a.L9)("Context Viewed",e,{forwardToDatadog:!0,...t})},W="Disabled Team Creation Button Hovered",K="User Submits Reupgrade Request",z=5e3},852601:(e,t,r)=>{r.d(t,{Bs:()=>u,gA:()=>d,hT:()=>c});var n=r(652983),i=r(46347),a=r(761767),o=r(948150),l=r(322186),s=r(179640);function c(e){switch(e.type){case o.W.HubFile:return e.template.id;case o.W.TeamTemplate:return e.template.file_key;default:return(0,i.vE)(e)}}function d(e){switch(e.type){case o.W.HubFile:let t=(0,s.D3)(e.template);return t.name;case o.W.TeamTemplate:return e.template.name;default:return(0,i.vE)(e)}}function u(){let e=(0,l.Ng)();return(0,n.useCallback)(t=>{var r;let n=c(t),l=d(t),u=function(e){switch(e.type){case o.W.HubFile:let t=(0,s.D3)(e.template);return t.description;case o.W.TeamTemplate:return e.template.description;default:return(0,i.vE)(e)}}(t),{type:p,template:m}=t;switch(p){case o.W.HubFile:return{imageUrl:m.thumbnail_url||void 0,clientMeta:m.client_meta,thumbnailIsSet:!!m.thumbnail_is_set,isWhiteboard:m.viewer_mode===a.Zs.WHITEBOARD,name:l,description:u,hubFileId:m.id,publishers:(null==(r=m.community_publishers)?void 0:r.accepted)||[],primaryKey:n,duplicateLink:`${window.location.origin}/community/file/${m.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:m.resized_thumbnail_urls};case o.W.TeamTemplate:let h=m.published_by_user?[{name:m.published_by_user.handle,img_url:m.published_by_user.img_url}]:e?[{name:e.name,img_url:e.img_url}]:[];return{imageUrl:m.signed_thumbnail_url,clientMeta:m.client_meta,thumbnailIsSet:!!m.has_custom_thumbnail,isWhiteboard:!0,name:l,description:u,publishers:h,primaryKey:n,duplicateLink:`${window.location.origin}/new/template/${m.file_key}`,viewSourceFileUrl:`/file/${m.file_key}`};default:(0,i.vE)(p)}},[e])}},837728:(e,t,r)=>{r.d(t,{$1:()=>p,NP:()=>s,aU:()=>m,bC:()=>c,gL:()=>u,p7:()=>d});var n=r(716250),i=r(761767),a=r(898080),o=r(733609),l=r(413810);function s(e){if("fullscreen"===e.selectedView.view){let t=e.selectedView.fileKey;if(t)return e.fileByKey[t]??null}return null}function c(e){let t=(0,l.UE)(e.selectedView);return t?e.fileByKey[t]??null:null}function d(e){return"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null}function u(e){return{...(0,o.getPermissionsState)(e),selectedView:e.selectedView,currentOrgId:e.currentUserOrgId}}function p(e,t,r=null,o,l=i.gg.DESIGN,s,c,u){let p=null;if(null===r){let t=d(e);t&&!(0,a.yH)(t,e)&&(p=t.id)}else"drafts"!==r&&(p=r.folderId);let m=null,h=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null;h&&(m=h.id);let _=null,g=(0,n.BZ)().ps_benchmark;if(g){let t=e.currentTeamId?e.teams[e.currentTeamId]:null;t&&(_=t.id)}return{folder_id:p,org_id:m,openNewFileIn:t,trackingInfo:o||null,editorType:l,fileName:s,figjamAiNewFileData:u,callback:c,team_id:_}}let m=e=>({...e,optimist:void 0})},646012:(e,t,r)=>{r.d(t,{Zk:()=>c,gu:()=>i,hH:()=>n,lP:()=>s,pp:()=>o,th:()=>a});var n,i,a,o,l,s,c,d=r(598271),u=r(297296);function p(e,t){function r(t,r){return t.startsWith(e)?r(t.slice(e.length)):null}function n(e){return t.fromString(e)}function i(e){return r(e,e=>n(e)?null:d.mL(e))}function a(e){return r(e,e=>n(e))}function o(t){return e+d.BB(t)}function l(r){return e+t.toString(r)}return{toString:function(e){return e},toKiwi:function(e){let t=r(e,e=>{let t=n(e);if(t)return{assetRef:t};let r=d.mL(e);if(r)return{guid:r}});return t??{guid:d.AX}},toGuidObjIfLocal:i,toGuidStrIfLocal:function(e){return r(e,e=>n(e)?null:e)},toRefIfSubscribed:a,fromString:function(e){return r(e,t=>d.mL(t)||n(t)?e:null)},fromLocalNodeIdObj:o,fromLocalNodeIdStr:function(t){return d.mL(t)?e+t:null},fromRef:l,fromKiwi:function(e){if(!e)return null;let{guid:r,assetRef:n}=e;if(r&&!n)return o(r);if(!r&&n){let e=t.fromKiwi(n);if(e)return l(e)}return null},isValid:function(e){let r=i(e);if(r)return d.JY(r);let n=a(e);return!!n&&t.isValid(n)}}}(e=>{let t=p("SymbolId:",u.QI);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid})(n||(n={})),(e=>{let t=p("StateGroupId:",u.oq);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid})(i||(i={})),(e=>{let t=p("StyleId:",u.p9);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid,e.fromBindingsObj=function(t){return t.guid?(0,e.fromLocalNodeIdStr)(t.guid):(0,e.fromRef)(t.ref)}})(a||(a={})),(e=>{let t=p("VariableID:",u.D_);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid})(o||(o={})),(e=>{let t=p("VariableOverrideId:",u.pe);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid})(l||(l={})),(e=>{let t="VariableSetID:",r=p("VariableCollectionId:",u.Ps),n=p(t,u.Ps);function i({current:e,deprecated:r}){return n=>n.startsWith(t)?r(n):e(n)}e.INVALID=r.fromLocalNodeIdStr(d.A0),e.toString=r.toString,e.toKiwi=i({current:r.toKiwi,deprecated:n.toKiwi}),e.toGuidObjIfLocal=i({current:r.toGuidObjIfLocal,deprecated:n.toGuidObjIfLocal}),e.toGuidStrIfLocal=i({current:r.toGuidStrIfLocal,deprecated:n.toGuidStrIfLocal}),e.toRefIfSubscribed=i({current:r.toRefIfSubscribed,deprecated:n.toRefIfSubscribed}),e.fromString=i({current:r.fromString,deprecated:n.fromString}),e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=i({current:r.isValid,deprecated:n.isValid})})(s||(s={})),(e=>{let t=p("ModuleId:",u.vQ);e.INVALID=t.fromLocalNodeIdStr(d.A0),e.toString=t.toString,e.toKiwi=t.toKiwi,e.toGuidObjIfLocal=t.toGuidObjIfLocal,e.toGuidStrIfLocal=t.toGuidStrIfLocal,e.toRefIfSubscribed=t.toRefIfSubscribed,e.fromString=t.fromString,e.fromLocalNodeIdObj=t.fromLocalNodeIdObj,e.fromLocalNodeIdStr=t.fromLocalNodeIdStr,e.fromRef=t.fromRef,e.fromKiwi=t.fromKiwi,e.isValid=t.isValid})(c||(c={}))},609346:(e,t,r)=>{r.d(t,{$K:()=>en,$Q:()=>ek,CM:()=>$,JZ:()=>Y,Lt:()=>ea,Ot:()=>j,R5:()=>eo,SZ:()=>eM,Tk:()=>eT,Vp:()=>ev,Vq:()=>ey,XB:()=>V,YK:()=>ew,Yi:()=>eb,b_:()=>eO,dr:()=>eS,fS:()=>eI,fv:()=>ee,i:()=>ei,jY:()=>X,mp:()=>eE,oH:()=>eP,q$:()=>es,q7:()=>eA,r5:()=>er,vr:()=>et,wV:()=>eN});var n,i,a=r(660632),o=r(781087),l=r(600486),s=r(5453),c=r(269658),d=r(716250),u=r(337167),p=r(217810),m=r(958189),h=r(571529),_=r(286206),g=r(117986),f=r(413667),E=r(970740),y=r(935174),v=r(36350),b=r(721154),I=r(622003),T=r(961215),w=r(755560),S=r(947303),C=r(795153),O=r(733609),A=r(722330),N=r(956296),L=r(220949),P=r(415438),R=r(685312),k=r(249694),D=r(218550),M=r(843500),F=r(810611),x=r(202426),U=r(532912);function B(e,t){let r="unknown";e?"string"==typeof e?r=e:"message"in e&&(r=e.message):r="no error message",(0,_.YD)("Autosave",r,{message:t})}function V(){return 1296e6}async function G(e,t,r,n){let i=n.objectStore(M.dJ),a=await i.index(M.i).get([e,t,r]);return a&&a.id?{id:a.id,...a}:void 0}async function H(e,t,r,n){let i=await G(e,t,r,n);return null==i?void 0:i.id}async function W(e,t,r){let n=e.objectStore(M.dJ),i=e.objectStore(M.HM),a=e.objectStore(M.sx),o=e.objectStore(M.rk),l=[];for(let e of r){let t=await n.index(M.i).get([e.userID,e.fileKey,e.sessionID]);t&&t.id&&l.push(t)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,t)=>t.fileVersion-e.fileVersion);let s=l[0],c=new Map,d=new Map,u=await i.getAll((0,M.ls)(s.id));for(let e of u)c.set(e.nodeID,e.changes);let p=await o.getAll((0,M.ls)(s.id));for(let e of p)d.set(e.nodeID,e.buffer);let m=s.lastUpdatedAt;for(let e of l.slice(1)){let t=e.fileVersion===s.fileVersion;if(t){let t=await i.getAll((0,M.ls)(e.id));for(let e of t){let t=c.get(e.nodeID),r=t?T.ZYh.mergeMultiplayerMessages(t,e.changes,s.fileVersion):e.changes;c.set(e.nodeID,r),i.put({editorSessionID:s.id,nodeID:e.nodeID,changes:r}).catch(e=>B(e,"mergeAndClaimChanges: updating session IDs"))}let r=await o.getAll((0,M.ls)(e.id));for(let e of r)d.set(e.nodeID,e.buffer),o.put({editorSessionID:s.id,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>B(e,"mergeAndClaimChanges: merge referenced nodes"));m=Math.max(m,e.lastUpdatedAt)}i.delete((0,M.ls)(e.id)).catch(e=>B(e,"mergeAndClaimChanges: node changes for session")),o.delete((0,M.ls)(e.id)).catch(e=>B(e,"mergeAndClaimChanges: referenced nodes for session"));let r=await a.openCursor((0,M.ls)(e.id));for(;r;)t&&a.put({...r.value,editorSessionID:s.id}).catch(e=>B(e,"mergeAndClaimChanges: merge images")),r.delete().catch(e=>B(e,"mergeAndClaimChanges: remove old image")),r=await r.continue();n.delete(e.id).catch(e=>B(e,"mergeAndClaimChanges: delete old session id"))}return await n.put({...s,sessionID:t,lastUpdatedAt:m}),(0,M.Jb)(e),await e.done,(0,_.YK)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:T.c6b.ALWAYS}),{changesByNode:c,referencedNodeMap:d,fileVersion:s.fileVersion}}async function K(e,t){let r=(0,M.Ek)(e,t),n=[];return await S.nc.timeAsync("checkForAutosave",async()=>{let e=await (0,M.lf)();if(!e)return;let t=e.transaction(M.dJ),i=t.objectStore(M.dJ),a=await i.index(M.i).openCursor(r);for(;a;)n.push(a.value),a=await a.continue();await t.done}),n.length>0&&(0,_.sd)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:T.c6b.ALWAYS}),n}async function z(e){return await S.nc.timeAsync("filterAutosaveSessions",async()=>{let t=await Promise.all(e.map(e=>(0,U.pk)(e))),r=Date.now()-V(),n=e.filter((e,n)=>!t[n]&&e.lastUpdatedAt>r);return 0===n.length&&(0,_.YK)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:T.c6b.ALWAYS}),n})}let Z=null;async function Y(e){async function t(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,o.Lj)(e).catch(()=>{});try{let t=await eo((0,M.FO)(e),e=>Date.now()-e.lastUpdatedAt<V());if(t.length>0){let e=t.map(e=>e.lastUpdatedAt);(0,l.L9)("autosave garbage collect",{numSessions:t.length,localSessionCount:t.reduce((e,t)=>e+(t.isLocalFile?1:0),0),nodeCount:t.reduce((e,t)=>e+t.nodeCount,0),imageCount:t.reduce((e,t)=>e+t.imageCount,0),referencedNodeCount:t.reduce((e,t)=>e+t.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,F.vb)("Failed to garbage collect autosave changes",e)}(0,R.Nx)()}Z||(Z=t()),await Z}async function j(e){let t={};for(let r of e){let e=await $(r);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(t[r]=e)}return t}async function $(e){let t=await (0,M.lf)();if(!t)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:r,newFilesByKey:n,newFilesWithChanges:i}=await q(t,e),o=new Set,l=new Map,s=-1,c=[];for(let t of r)o.has(t.fileKey)||c.push((0,U.pk)({userID:e,fileKey:t.fileKey,sessionID:t.sessionID}).then(e=>{if(!e){o.add(t.fileKey);let e=Math.max(l.get(t.fileKey)||0,t.lastUpdatedAt);l.set(t.fileKey,e),s=-1===s?t.lastUpdatedAt:Math.min(s,t.lastUpdatedAt)}}));await Promise.all(c);let d=Array.from(o).filter(e=>!(0,a.T)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),u=Array.from(o).filter(e=>(0,a.T)(e)&&n.has(e)).map(e=>{let t=n.get(e);return Q(t,l,i.has(t.fileKey))}).filter(({hasChanges:e})=>e);return{unsyncedFiles:d,newFiles:u,nextGarbageCollectionTimestamp:s}}async function q(e,t){let r=e.transaction([M.dJ,M.HM,M.z3]),n=Error("original async stack");r.done.catch(e=>{e.cause=n,(0,_.Jz)(g.k.UNOWNED,e)});let i=r.objectStore(M.dJ),a=await i.index(M.i).getAll((0,M.FO)(t)),o=[],l=r.objectStore(M.HM);for(let e of a)if(await l.count((0,M.ls)(e.id))>0)for(let t of(await l.getAll((0,M.ls)(e.id)))){let r=(0,d.BZ)().suppress_unsaved_changes_ui&&(0,d.BZ)().incremental_loading_validation;if(!r||T.ZYh&&!T.ZYh.changesAreOnlyNewFileSystemChanges(t.changes,e.fileVersion)){o.push(e);break}}let s=new Map,c=r.objectStore(M.z3),u=new Set;for(let e of(await c.getAll((0,M.FO)(t)))){s.set(e.fileKey,e);let t=a.find(t=>t.fileKey===e.fileKey);if(t){let r=await l.getAll((0,M.ls)(t.id));(eu(e.fileKey,r)||e.hasChangedMetadata)&&u.add(e.fileKey)}}return{editorSessionRowsWithChanges:o,newFilesByKey:s,newFilesWithChanges:u}}async function X(e){let t=await $(e);return t.unsyncedFiles.length>0||t.newFiles.length>0}async function J(e){var t,r;let n=await (0,M.lf)();if(!n)return[];let{editorSessionRowsWithChanges:i,newFilesByKey:a,newFilesWithChanges:o}=await q(n,e),l=new Set,s=new Map;for(let e of i)l.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(l).map(e=>{let t=a.get(e);return t?Q(t,s,o.has(t.fileKey)):null}).filter(p.lm);return null==(r=null==(t=ef)?void 0:t.fileCreationManager)||r.updateNewFileInfoFromFiles(c),c}function Q(e,t,r){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:t.get(e.fileKey),orgId:e.orgID??null,hasChanges:r,hasChangedMetadata:e.hasChangedMetadata??!1}}function ee(e,t){return(0,s.We)(e.map(e=>{let r=t[e.fileKey];return r&&!r.trashed_at?e:null}))}function et(e,t){return e.filter(e=>(0,O.canEditFileMemoized)(e.fileKey,t))}function er(e,t){return(0,s.We)(e.map(e=>{let r=t[e.fileKey];if(r)return{type:"autosave-file",fileKey:e.fileKey,lastUpdatedAt:e.lastUpdatedAt,file:r}}))}async function en(e,t,r){await eo((0,M.Ek)(e,t),e=>e.sessionID!==r)}async function ei(e,t){if((0,F.F)())return;let r=async(e,r)=>{let n=r.objectStore(M.HM),i=await n.getAll((0,M.ls)(e.id));return eu(t,i)};await eo((0,M.Ek)(e,t),r)}async function ea(e,t){await eo((0,M.FO)(e),e=>!t.includes(e.fileKey))}async function eo(e,t){let r=await (0,M.lf)();if(!r)return[];let n=r.transaction([M.dJ,M.HM,M.sx,M.rk,M.z3],"readwrite"),i=Error("original async stack");n.done.catch(e=>{e.cause=i,(0,_.Jz)(g.k.UNOWNED,e)});let o=n.objectStore(M.dJ),l=n.objectStore(M.HM),s=n.objectStore(M.sx),c=n.objectStore(M.rk),d=n.objectStore(M.z3),u=!1,p=await o.index(M.i).getAll(e),m=[],h=[];for(let e of p){let r=!!t&&await t(e,n);if(!r){let[t,r,n]=await Promise.all([l.count((0,M.ls)(e.id)),s.count((0,M.ls)(e.id)),c.count((0,M.ls)(e.id))]);h.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,a.T)(e.fileKey),nodeCount:t,imageCount:r,referencedNodeCount:n,lastUpdatedAt:e.lastUpdatedAt}),o.delete(e.id).catch(e=>B(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,M.ls)(e.id)).catch(e=>B(e,"deleteAutosaveDataForSessions: delete node changes")),s.delete((0,M.ls)(e.id)).catch(e=>B(e,"deleteAutosaveDataForSessions: delete images")),c.delete((0,M.ls)(e.id)).catch(e=>B(e,"deleteAutosaveDataForSessions: delete referenced nodes")),u=!0,(0,a.T)(e.fileKey)&&m.push({localFileKey:e.fileKey,userID:e.userID})}}for(let{localFileKey:e,userID:t}of m){let r=await o.index(M.i).count((0,M.Ek)(t,e));0===r?await d.delete((0,M.Ek)(t,e)):(0,F.DX)("Local file has remaining sessions")}return await o.count()===0&&(await l.count()>0&&((0,F.DX)("Found leftover node changes in IDB"),l.delete((0,M.zB)()).catch(e=>B(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await s.count()>0&&((0,F.DX)("Found leftover images in IDB"),s.delete((0,M.J3)()).catch(e=>B(e,"deleteAutosaveDataForSessions: delete leftover images"))),await c.count()>0&&((0,F.DX)("Found leftover referenced node buffers in IDB"),c.delete((0,M.qz)()).catch(e=>B(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,M.Jb)(n),await n.done,u&&(0,x.lK)(),h}async function el(e,t){await t.objectStore(M.HM).count((0,M.ls)(e))===0&&await t.objectStore(M.sx).count((0,M.ls)(e))===0&&await t.objectStore(M.rk).count((0,M.ls)(e))===0&&t.objectStore(M.dJ).delete(e).catch(e=>B(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function es(e,t){let r=await (0,M.lf)();if(!r)throw Error("Could not open autosave data");let n=r.transaction([M.dJ,M.HM,M.sx,M.rk]),i=n.objectStore(M.dJ),a=n.objectStore(M.HM),o={},l=await i.getAll();for(let e of l)o[e.id]=e,o[e.id].changes={};for(let r of(o.unknown={changes:{}},(await a.getAll()).slice(0,e)))r.editorSessionID in o?o[r.editorSessionID].changes[r.nodeID]=JSON.parse(T.ZYh.encodeChangesAsJson(r.changes,o[r.editorSessionID].fileVersion,!!t)):o.unknown.changes[r.nodeID]=JSON.parse(T.ZYh.encodeChangesAsJson(r.changes,1,!!t));return await n.done,o}async function ec(e){let{transaction:t,commitPolicy:r,userID:n,fileKey:i,fileVersion:o,sessionID:l,oldSessionID:s,pendingChanges:c,pendingImages:u,pendingReferencedNodes:p,reason:m,isFirstCommitOfAutosaveSession:h}=e,_=t.objectStore(M.dJ),g=t.objectStore(M.HM),E=t.objectStore(M.sx),y=t.objectStore(M.rk),v=await G(n,i,s,t),b=0;if(v){let e=v.offlineEditingTime||0,t=h?0:Date.now()-v.lastUpdatedAt;b=e+t}let I=null==v?void 0:v.id,w={userID:n,fileKey:i,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,d.ZP)().release_git_tag||"",fileVersion:o,lastCommitReason:m,offlineEditingTime:b,originalTrackingSessionId:(0,f.L)()};for(let e of(null==I?I=await _.add(w):(r===T.DW.REPLACE_CHANGES&&(g.delete((0,M.ls)(I)).catch(e=>B(e,"commitChanges: replace node changes")),y.delete((0,M.ls)(I)).catch(e=>B(e,"commitChanges: replace referenced nodes"))),_.put({id:I,...w}).catch(e=>B(e,"commitChanges: update session"))),c))e.changes?g.put({editorSessionID:I,nodeID:e.nodeID,changes:e.changes}).catch(e=>B(e,"commitChanges: put node changes")):g.delete([I,e.nodeID]).catch(e=>B(e,"commitChanges: clear node changes"));for(let e of u)if(await E.count([I,e])===0){let t=T.Uv3.getCompressedImage(e);t&&E.add({editorSessionID:I,hash:e,blob:t}).catch(e=>B(e,"commitChanges: add images"))}for(let e of p)y.add({editorSessionID:I,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>B(e,"commitChanges: add referenced nodes"));let S=await g.count((0,M.ls)(I));return 0===S&&(await E.delete((0,M.ls)(I)),await y.delete((0,M.ls)(I))),await el(I,t),(0,M.Jb)(t),await t.done,(0,a.T)(i)&&(0,x.lK)(),S}async function ed(e,t,r){(0,_.YK)("Autosave","assigning file key for new file",{localFileKey:t,newFileKey:r}),await (0,M.Pm)([M.dJ,M.z3],async n=>{let i=n.objectStore(M.dJ),a=await i.index(M.i).getAll((0,M.Ek)(e,t));a.map(e=>{e.fileKey=r,i.put(e)});let o=n.objectStore(M.z3);o.delete((0,M.Ek)(e,t))},"readwrite"),(0,x.lK)()}function eu(e,t){if(!(0,a.T)(e))return t.length>0;if(t.length>2)return!0;for(let{nodeID:e}of t)if(!["0:0","0:1"].includes(e))return!0;return!1}class ep{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class em{constructor(e,t){this.userID=e,this._state={type:"connecting"},this._fileKey="",this.fileCreationManager=null,this.fileKey=t,(0,F.F)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,a.T)(t)?this._sessionsToRestore=K(e,t):this._sessionsToRestore=K(e,t).then(e=>z(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let t=(0,a.T)(e)?e:null;u.n_.set(D._,t)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,F.DX)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},u.n_.set(D._,null),await (null==e?void 0:e.destroy().catch(()=>(0,F.DX)("Failed to destroy autosave session")))}terminateDueToError(e,t){(0,_.Cp)("Autosave","autosave disabled",{message:e}),t&&(0,F.DX)(e);let r="connected"===this._state.type;(0,l.L9)("autosave_disabled",{message:e,hasSessionInProgress:r},{forwardToDatadog:!0}),this.terminateAndWaitForCleanup().catch(t=>(0,F.DX)("Failed to terminate autosave",{message:e,error:t.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,M.jF)()}catch(e){(0,_.YK)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:T.c6b.ALWAYS}),(0,l.L9)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1),(0,d.BZ)().autosave_debug_migration&&/Timeout when opening IDB/.test(e.message)&&(0,F.DX)("Timeout when opening IDB");return}let t=new m.B7;t.start();let r=await this._sessionsToRestore;(0,a.T)(this.fileKey)&&(r.length>1?((0,F.DX)("Local file has multiple sessions",{sessionCount:r.length,sessionIds:r.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===r.length&&0!==r[0].sessionID&&((0,F.DX)("Local file with changes from non-zero session",{existingSessionId:r[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let n=await (0,U.fu)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!n){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new eg(e,this,t,r,n)}}async onConnectNewFile(e){let t=this.fileKey;if((0,a.T)(t))try{await (0,M.Pm)([M.z3],async r=>{let n=r.objectStore(M.z3),i=await n.get((0,M.Ek)(this.userID,t));if(i)return;let a={fileKey:t,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,E.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await n.put(a)},"readwrite"),this.fileCreationManager&&(0,F.DX)("File creation manager already exists",{fileKey:t}),this.fileCreationManager=new e_(t,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function eh(e,t,r){if((0,a.T)(t)&&e)try{await (0,M.Pm)([M.z3],async n=>{let i=n.objectStore(M.z3),a=await i.get((0,M.Ek)(e,t));a&&await i.put({...a,name:r,hasChangedMetadata:!0})},"readwrite"),(0,x.lK)()}catch(e){(0,_.Jz)(g.k.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class e_{constructor(e,t){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=t}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let t=e.find(e=>e.fileKey===this.fileKey);if(t){let e=(0,N.y)(t,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,x.pk.sendToAllTabs(x.$G,{localFileKey:this.fileKey,realFileKey:e})}}class eg{constructor(e,t,r,n,a){this.sessionID=e,this.manager=t,this.restoreTimer=r,this.changesToRestore=n,this.webLock=a,this.transactionQueue=new k.z,this.commitEventListener=new ep,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=(0,d.BZ)().autosave_activity_log&&(null==(i=navigator.storage)?void 0:i.estimate)?new R.z0:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>B(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,t,r,n){let i=(0,M.Pm)(t,r,n);return i.catch(t=>{(0,l.L9)("autosave_transaction_failure",{transactionName:e,message:t.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),i}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,F.DX)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(T.ZYh.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){var t;let{changes:r,commitPolicy:n,fileVersion:i,fileKey:a,newSessionID:o,numberOfUncleanRegisters:l,reason:s}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(a&&a!==this.manager.fileKey){(0,F.DX)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":a}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}null==(t=this.activityLogger)||t.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,d=null;if(o!==this.sessionID){d=this.webLock,this.sessionID=o;let e=await (0,U.fu)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,U.Ee)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let u=r.changedNodes.length,p=r.changedNodes;for(let e of r.clearedNodes)p.push({nodeID:e,changes:null});let m=[];for(let e of r.referencedNodes)m.push({nodeID:e.nodeID,buffer:e.changes});let h=new Set;for(let e of r.imageHashes)h.add(e);let g=await this.sessionTransaction("commit",[M.dJ,M.HM,M.sx,M.rk],async e=>await ec({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:i,oldSessionID:c,sessionID:this.sessionID,pendingChanges:p,pendingImages:h,pendingReferencedNodes:m,reason:s,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");if(this.hasCommitted=!0,(0,_.YK)("Autosave","commit completed",{"stored node changes":g,"unclean registers":l,"changed nodes":u,"cleared nodes":r.clearedNodes.length,"referenced nodes":m.length,"pending images":h.size,"commit policy":T.DW[n],"session ID":this.sessionID,"new session ID":o,"commit reason":void 0!==s?T.cLY[s]:void 0,"file key":a,"manager file key":this.manager.fileKey}),!this.reportedStorageError&&void 0!==l&&l!==g){if(g>0&&0===l){let e=e=>{if(!(e.length>5))return e;{let t=e.slice(0,5);return t.push("..."),t}},t=await es(5,!0);(0,_.YD)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:t,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:T.B9x.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else g>l?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):g<l&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=d&&d.release().catch(e=>B(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===T.DW.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,L.m_)({id:x.bi})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(T.ZYh.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,a.T)(this.manager.fileKey),this.restoring=!0;let e=function(){var e;if(!h.ZP.chrome||!(null==(e=navigator.storage)?void 0:e.persist))return Promise.resolve(!1);let t=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),t])}(),t=(0,F.i9)(),r=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=r.length,r.length>0){let e=r[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?T.cLY[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(r)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:n,quotaBytes:i}=await t;this.restoreAnalytics.storageUsageBytes=n,this.restoreAnalytics.storageQuotaBytes=i,this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,l.L9)("autosave_restore_on_load",this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,U.Ee)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:t,referencedNodeMap:r,fileVersion:n}=await this.sessionTransaction("restore",[M.dJ,M.HM,M.sx,M.rk],async t=>await W(t,this.sessionID,e),"readwrite"),i=t.size>0;for(let e of(i?((0,a.T)(this.manager.fileKey)||await (0,A.K)(this.manager.fileKey,"Offline sync","Before syncing changes",c.V.dispatch).catch(e=>{var t;return(0,F.DX)("Failed to create before savepoint",{status:e.status,message:null==(t=e.data)?void 0:t.message})}),(0,_.YK)("Autosave","Restoring auto-saved data",void 0,{logToConsole:T.c6b.ALWAYS}),await this.restoreChanges(t,r,n)):(0,_.YK)("Autosave","Changes are empty!",void 0,{logToConsole:T.c6b.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{x.pk.sendToOtherTabs(x.CP)}).catch(e=>B(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=i,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=t.size,this.restoreAnalytics.numberOfReferencedNodes=r.size,t.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,t,r){let n=Array.from(e.entries()).sort(([e,t],[r,n])=>e<r?-1:1),i=(0,d.BZ)().suppress_unsaved_changes_ui&&(0,d.BZ)().incremental_loading_validation,o=i&&n.every(([e,t])=>T.ZYh.changesAreOnlyNewFileSystemChanges(t,r));for(let[e,t]of n)T.ZYh.loadAutosavedNodeChanges(e,t,r);if(this.restoreAnalytics.changesAreAllDerivedData=T.ZYh.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=T.ZYh.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=T.ZYh.currentFileVersion()>r,(0,d.BZ)().incremental_loading_autosave&&(0,P.yp)()){(0,l.L9)("autosave_load_containing_pages_start",{node_count:e.size,fileKey:this.manager.fileKey});let t=performance.now(),r=new Set(e.keys());for(let e of T.ZYh.getParentIndexChanges())r.add(e);await (0,P.MQ)(r),(0,l.L9)("autosave_load_containing_pages_end",{node_count:e.size,timeElapsed:performance.now()-t,fileKey:this.manager.fileKey})}let s=T.ZYh.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(s);let u=this.restoreAvailableReferencedNodes(t);T.ZYh.migrateAndSetAutosaveChanges(u,r),T.ZYh.applyAutosavedChanges(),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,_.YK)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:T.c6b.ALWAYS});let p=()=>{c.V.dispatch(v.X.enqueueFront({notification:{type:y.k.AUTOSAVE_CHANGES_RESTORED,message:"Your offline changes were synced"}})),(0,_.YK)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:T.c6b.ALWAYS})};(0,a.T)(this.manager.fileKey)?(0,w.G)().then(()=>{var e;this.manager.fileKey!==(null==(e=c.V.getState().openFile)?void 0:e.key)||o||p()}):(await (0,w.G)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,A.K)(this.manager.fileKey,"Offline sync","After syncing changes",c.V.dispatch).catch(e=>{var t,r;(0,l.L9)("autosave_skip_after_checkpoint",{error:null==(t=e.data)?void 0:t.message}),(0,F.DX)("Failed to create after savepoint",{status:e.status,message:null==(r=e.data)?void 0:r.message})}),o||p())}async restoreImagesIfAvailable(e){let t=0;return await this.sessionTransaction("restore images",[M.dJ,M.sx],async r=>{let n=await this.currentEditorSessionID(r);if(!n)return;let i=r.objectStore(M.sx);for(let r of e){let e=await i.get([n,r]);e&&(T.ZYh.restoreImageBytes(r,e.blob),t++)}await r.done}),t}restoreAvailableReferencedNodes(e){let t=[];for(let[r,n]of e)T.ZYh.restoreReferencedNodeFile(r,n),t.push(r);return t}currentEditorSessionID(e){return H(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,M.lf)();if(!e)throw Error("Unable to get DB");let t=e.transaction([M.dJ,M.HM],"readonly"),r=t.objectStore(M.HM),n=await this.currentEditorSessionID(t);return n?await r.getAll((0,M.ls)(n)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return eu(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,t){let r=this.manager.fileKey;if(!(0,a.T)(r)){(0,F.DX)("Only local file keys can be reassigned");return}if((0,a.T)(e)){(0,F.DX)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let n=this.webLock,i=await (0,U.fu)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!i){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=i,await ed(this.manager.userID,r,e),t(),await (null==n?void 0:n.release())})}}let ef=null;function eE(){return ef}function ey(e,t){if(ef){if(ef.fileKey===e)return(0,_.YK)("Autosave","Autosave manager already exists"),ef;(0,F.DX)("Manager already exists. Updating file key",{"current fileKey":ef.fileKey,"new fileKey":e}),ef.terminateAndWaitForCleanup(),ef=null}return(0,_.sd)("Autosave","Create autosave manager",{fileKey:e}),ef=new em(t,e)}function ev(){eb().catch(e=>B(e,"failed to destroy autosave manager"))}async function eb(){if((0,_.sd)("Autosave","Destroy autosave manager"),!ef){(0,_.YK)("Autosave","No manager to destroy");return}let e=ef;ef=null,await e.terminateAndWaitForCleanup()}function eI(e,{offlineFiles:t}){let r={};for(let n in e){let e=t[n];e&&(r[n]=e)}return r}let eT=C.t1.Query({async fetch({userId:e}){if(!e)return{};let t=await J(e),r={};for(let e of t)r[e.fileKey]=e;return r}});var ew=((n=ew||{}).OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",n.EDITOR="EDITOR",n);let eS=C.t1.Mutation(({fileKey:e,name:t,source:r},{atomStore:n,query:i,reduxStore:a})=>{var o,s;if(n.set(eL,null),!t)return;let d=(null==(o=a.getState().user)?void 0:o.id)??null;i.mutate(eT({userId:d}),r=>{let n=r[e];n&&(n.name=t)});let u=null==(s=ef)?void 0:s.fileCreationManager;return u&&(u.fileKey===e?(u.updateNewFileInfo({fileName:t}),u.pendingRealFileKey&&c.V.dispatch(b.gz({file:{key:u.pendingRealFileKey,name:t},userInitiated:!0}))):(0,F.DX)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:u.fileKey})),(0,l.L9)("Rename New Autosave File",{source:r,isOffline:!navigator.onLine}),eh(d,e,t)}),eC=(0,u.cn)(e=>{let t=e(I.DW),r={};if(t){let n=e(eT({userId:t})),i=(null==n?void 0:n.data)??{};for(let[e,t]of Object.entries(i))t.hasChanges&&(r[e]=t)}return r}),eO=(0,u.cn)(e=>{let t=e(D._),r=e(I.DW);if(t&&r){let n=e(eT({userId:r})),i=(null==n?void 0:n.data)??{};if(t in i)return i[t]}return null});function eA(){return u.n_.get(eO)}function eN(){return null!=eA()}let eL=(0,u.cn)(null);function eP(e){u.n_.set(eL,e.fileKey)}let eR=(0,u.cn)({});function ek(e,t){let r=u.n_.get(eR);u.n_.set(eR,{...r,[e]:t})}let eD=(0,u.cn)(e=>{let t={...e(eC)},r=e(eL),n=e(eR),i={};for(let e in t)e in n||(i[e]=t[e]);if(r&&r in i){let e=i[r];i[r]={...e,isRenaming:!0}}return i});function eM(){return(0,u.Dv)(eD)}},368041:(e,t,r)=>{r.d(t,{z:()=>f});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(618723),s=r(212984),c=r(970740),d=r(721127),u=r(413110),p=r(239342),m=r(291904),h=r(236750),_=r(230451);let g=n.memo(function(e){let t=(0,i.I0)(),{displayName:r,legalName:a}=e,[m,g]=n.useState(r||""),[f,E]=n.useState(a||""),y=()=>{t(d.hV())},v=async r=>{r.preventDefault(),e.updateNameImmediately&&e.team?await p.j.updateTeamName({teamId:e.team.id,updatedDisplayName:m,updatedLegalName:f}):t(u.sy({legalName:f,displayName:m})),y()};return n.createElement(h.ge,{onClose:y,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0},n.createElement("form",{onSubmit:v,className:s.cx.p16.$},n.createElement("div",{className:s.cx.mt4.$},n.createElement("label",{htmlFor:"teamName",className:s.cx.colorTextSecondary.$},n.createElement("strong",{className:s.cx.block.colorText.$},n.createElement(c.Tx,{id:"pro_cart.review.edit_details.team_name_label"})),n.createElement(c.Tx,{id:"pro_cart.review.edit_details.team_name_description"})),n.createElement(l.Sc,{value:m,id:"teamName",onChange:e=>{g(e.target.value)},dataTestId:"company-team-name",className:s.cx.block.mt8.wFull.$})),n.createElement("div",{className:s.cx.mt20.$},n.createElement("label",{htmlFor:"legalName",className:s.cx.colorTextSecondary.$},n.createElement("strong",{className:s.cx.block.colorText.$},n.createElement(c.Tx,{id:"pro_cart.review.edit_details.company_name_label"})),n.createElement(c.Tx,{id:"pro_cart.review.edit_details.company_name_description"})),n.createElement(l.Sc,{value:f,id:"legalName",onChange:e=>{E(e.target.value)},dataTestId:"company-name",className:s.cx.block.mt8.wFull.$})),n.createElement("div",{className:o()(_.UN,_.kD)},n.createElement(l.pJ,{onClick:y},n.createElement(c.Tx,{id:"pro_cart.review.edit_details.cancel"})),n.createElement(l.RS,{className:_.iY,type:"submit"},n.createElement(c.Tx,{id:"pro_cart.review.edit_details.save"})))))}),f=(0,m.Y3)(g,"UpdateCompanyDetailsModal")},45e4:(e,t,r)=>{r.d(t,{as:()=>a,l6:()=>o,uE:()=>l});var n=r(206003),i=r(987004);new n.E([i.z9.DESIGN,i.z9.FIGJAM]),new n.E([i.z9.DESIGN,i.Db]);let a=new n.E([i.z9.DESIGN,i.z9.FIGJAM,i.z9.DEV_MODE]),o=new n.E([i.z9.DESIGN,i.Db,i.z9.DEV_MODE]);function l(e,t){let r={[i.dc]:0,[i.vX]:1,[i.Db]:2,[i.Jk]:2};return r[e]-r[t]}},987004:(e,t,r)=>{r.d(t,{Db:()=>c,Jk:()=>s,Q7:()=>g,dc:()=>l,oj:()=>u,rL:()=>f,vX:()=>d,wq:()=>_,xi:()=>h,xm:()=>y,z9:()=>m});var n,i=r(46347),a=r(761767),o=((n=o||{}).DESIGN="design",n.FIGJAM="figjam",n.WHITEBOARD="whiteboard",n.DEV_MODE="dev_mode",n.SLIDES="slides",n);let l="design",s="figjam",c="whiteboard",d="dev_mode",u={DESIGN:"design",FIGJAM:"figjam"},p={DESIGN:"design",WHITEBOARD:"whiteboard"},m={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"},h={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"},_=e=>{switch(e){case a.gg.DESIGN:return p.DESIGN;case a.gg.WHITEBOARD:return p.WHITEBOARD;default:(0,i.vE)(e)}},g=e=>e===u.FIGJAM?p.WHITEBOARD:e,f=e=>e===h.WHITEBOARD?m.FIGJAM:e,E=e=>{switch(e){case"design":return m.DESIGN;case"figjam":case"whiteboard":return m.FIGJAM;case"dev_mode":return m.DEV_MODE}return null},y=e=>{let t=E(e);return t===m.FIGJAM?h.WHITEBOARD:t}},838903:(e,t,r)=>{r.d(t,{$s:()=>u,C_:()=>I,Cq:()=>m,Kp:()=>_,Lm:()=>f,Lp:()=>T,MY:()=>E,RZ:()=>O,T:()=>A,XB:()=>b,Xd:()=>v,f1:()=>C,fi:()=>N,kO:()=>l,r_:()=>g,tA:()=>c,tj:()=>p,uR:()=>L,uu:()=>d,vp:()=>s,x5:()=>S});var n=r(523495),i=r(970740),a=r(761767),o=r(220958);let l=e=>!!(e.file_repo_id&&e.source_file_key),s=e=>!!(e.fileRepoId&&e.sourceFileKey),c=(e,t)=>d(e,t.key),d=(e,t)=>l(e)&&e.source_file_key===t,u=e=>l(e)?(0,i.t)("file_info_row.branch"):(0,i.t)("file_info_row.file"),p=(e,t)=>e.key===t.default_file_key,m=(e,t)=>e.key===t.defaultFileKey,h=e=>l(e)&&!!e.trashed_at,_=e=>s(e)&&!!e.trashedAt,g=e=>!!(null==e?void 0:e.has_file_link_password)||!!(null==e?void 0:e.has_proto_link_password),f=(e,t)=>p(e,t)?t.name||"Untitled":e.name||"Untitled",E=(e,t)=>((null==e?void 0:e.name)??(null==t?void 0:t.name))||"Untitled",y=(e,t)=>((null==e?void 0:e.name)??(null==t?void 0:t.name))||"Untitled",v=(e,t)=>{if(!e)return null;let r=e.file_repo_id;return r&&t[r]||null},b=(e,t)=>{if(!e)return null;let r=e.fileRepoId;return r&&t[r]||null},I=(e,t,r)=>{let n=t[e.id]||[];return n.map(e=>r[e])},T=(e,t,r)=>{let i=`/${r}`;i+=l(e)&&(null==t?void 0:t.default_file_key)?`/${t.default_file_key}/branch/${e.key}`:`/${e.key}`;let a=(0,n.W0)(E(t,e));return a&&(i+=`/${a}`),i},w=(e,t,r)=>{let i=`/${r}`;i+=s(e)&&(null==t?void 0:t.defaultFileKey)?`/${t.defaultFileKey}/branch/${e.key}`:`/${e.key}`;let a=(0,n.W0)(y(t,e));return a&&(i+=`/${a}`),i},S=(e,t,r)=>{let n=new URL(T(e,t,r),document.baseURI);return"file"===r&&n.searchParams.append("type",e.editor_type||a.gg.DESIGN),n.href},C=(e,t,r)=>{let n=new URL(w(e,t,r),document.baseURI);return"file"===r&&n.searchParams.append("type",e.editorType),n},O=(e,t,r,n)=>t.filter(e=>!h(e)).map(t=>{let i=p(t,e),a=r[t.key]&&r[t.key][n],l=!i&&(null==a?void 0:a.level)===o.V.OWNER;return{key:t.key,name:i?"Main":t.name,isMain:i,ownedByUser:l}}),A=(e,t,r)=>{let n=r[e.id]||"";return N(e,t,n)},N=(e,t,r)=>{if(r){let e=t.find(e=>e.key===r);if(e)return e}let n=t.find(t=>p(t,e));return n||t.reduce((e,t)=>e.touched_at>t.touched_at?e:t,t[0])},L=e=>{let t={};for(let[r,n]of Object.entries(e))t[r]=n.repo;return t}},869343:(e,t,r)=>{r.d(t,{A9:()=>T,BG:()=>y,_k:()=>v,wF:()=>E});var n=r(652983),i=r(407908),a=r(669277),o=r(925705),l=r(838903),s=r(764850),c=r(344668),d=r(200273),u=r(761767),p=r(733609),m=r(606536),h=r(862610),_=r(893508),g=r(572333),f=r(841017);function E(e,t,r,n,i,a,o,d){return{createBranch:b(e,t,o,d,r,n),openBranchSource:e&&(0,l.vp)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?o?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:function(e,t,r,n,i){if(!e)return{status:"hidden"};if(!(0,l.vp)(e))return{status:"hidden",reason:"Not a branch"};let a=(0,p.canViewFile)(e.key,t,!1),o=e.sourceFileKey,d=o&&(0,p.canViewFile)(o,t,!1);return a?d?i?{status:"hidden",reason:"Recovery mode"}:n!==s.bN1.BRANCHING&&r!==c.H5.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}}(e,t,n,i,o),mergeBranch:function(e,t,r,n,i,a){if(!e)return{status:"hidden"};if(!(0,l.vp)(e))return{status:"hidden",reason:"Not a branch"};let o=(0,p.canManageFile)(e.key,t,!1),d=e.sourceFileKey,u=d&&(0,p.canManageFile)(d,t,!1);if(!o)return{status:"hidden",reason:"Can't edit branch"};if(!u)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(a)return{status:"hidden",reason:"Recovery mode"};if(n!==s.bN1.BRANCHING){if(r!==c.H5.SAFE)return{status:"disabled",reason:"Low memory"};if(i!==s.hKT.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,t,n,i,a,o),viewSourceDiff:function(e,t,r,n,i,a){if(!e)return{status:"hidden"};if(!(0,l.vp)(e))return{status:"hidden",reason:"Not a branch"};if(!(0,p.canViewFile)(e.key,t,!1))return{status:"disabled",reason:"Can't view branch"};let o=e.sourceFileKey,d=o&&(0,p.canViewFile)(o,t,!1);if(!d)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(a)return{status:"hidden",reason:"Recovery mode"};let u=e.sourceFileKey&&t.fileByKey[e.sourceFileKey],m=t.fileByKey[e.key];if(!u||!I(m,u))return{status:"disabled",reason:"No changes"};if(n!==s.bN1.BRANCHING){if(r!==c.H5.SAFE)return{status:"disabled",reason:"Low memory"};if(i!==s.hKT.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,t,n,i,a,o),updateBranch:function(e,t,r,n,i,a){if(!e||!(0,l.vp)(e))return{status:"hidden"};if(!(0,p.canManageFile)(e.key,t,!0))return{status:"hidden",reason:"Can't edit branch"};let o=e.sourceFileKey,d=o&&(0,p.canViewFile)(o,t,!1);if(!d)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(a)return{status:"hidden",reason:"Recovery mode"};let u=e.sourceFileKey&&t.fileByKey[e.sourceFileKey],m=t.fileByKey[e.key];if(!u||!I(m,u))return{status:"disabled",reason:"No changes"};if(n!==s.bN1.BRANCHING){if(r!==c.H5.SAFE)return{status:"disabled",reason:"Low memory"};if(i!==s.hKT.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,t,n,i,a,o)}}function y(){var e;return(0,g.YO)(null==(e=s.O$1)?void 0:e.uiState().isRecovery,!1)}function v(){let e=(0,p.useMemoizedPermissionsState)(),t=(0,d.CA)(),r=(0,i.v9)(e=>e.selectedView.editorType),a=y(),{warningLevel:o}=(0,c.gE)(),l=(0,i.v9)(e=>e.mirror.appModel.topLevelMode),s=(0,i.v9)(e=>e.mirror.appModel.multiplayerSessionState),u=(null==t?void 0:t.teamId)??null;return(0,n.useMemo)(()=>E(t,e,r,o,l,s,a,u),[t,e,r,o,l,s,a,u])}function b(e,t,r,n,i,a){if(!e)return{status:"hidden",reason:"No file"};if(r)return{status:"hidden",reason:"Recovery"};if("design"!==i)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==a&&a!==c.H5.SAFE)return{status:"disabled",reason:"Low memory"};if((0,p.isCopyExportRestricted)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,_.sd)({currentTeamId:n,hasCurrentOrg:!!t.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!t.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let o=(0,l.XB)(e,t.repos);if(o&&!(0,l.tj)(e,o))return{status:"hidden",reason:"Not the main file"};if((0,p.isOrgUserExternallyRestrictedFromState)(t))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};let s=t.user&&t.currentUserOrgId&&t.orgUsersByOrgId.orgUsers[t.currentUserOrgId]&&t.orgUsersByOrgId.orgUsers[t.currentUserOrgId][t.user.id]?t.orgUsersByOrgId.orgUsers[t.currentUserOrgId][t.user.id]:null,d=s&&s.design_paid_status;if(null===d)return{status:"hidden",reason:"Unknown account type"};switch(d){case u.oz.RESTRICTED:if(s&&(0,p.getPermissionLevel)(s.permission)===m.Wp.GUEST)return{status:"hidden",reason:"Guests cannot see upsell"};return{status:"upsell-org-seat"};case u.oz.STARTER:return{status:"hidden",reason:"Invalid account type"};case u.oz.FULL:return{status:"enabled"}}}let I=(e,t)=>t.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==t.checkpoint_id;function T(e){let t=(0,f.V7)(),r=null==e?void 0:e.key,i=(0,a.mU)(h.FileTilePermissions,{fileKey:r},{enabled:!!r}),l=(0,p.usePermissionsState)(),s=y();return(0,n.useMemo)(()=>e?o.IE.from(i).transform(r=>{let n=r.file&&e?{key:e.key,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,canEdit:r.file.canEdit,viewerExportRestricted:r.file.viewerExportRestricted}:null;return b(n,l,!!s,t,null==e?void 0:e.editor_type)}):o.IE.loaded({status:"hidden",reason:"No file"}),[t,s,l,e,i])}},180179:(e,t,r)=>{r.d(t,{D3:()=>m,QQ:()=>h,bC:()=>g,i7:()=>_,z8:()=>y});var n=r(652983),i=r(407908),a=r(391320),o=r(9247),l=r(122342),s=r(761767),c=r(622799),d=r(70918),u=r(898080);let p=e=>`SAVED_CART::${e}`,m=({teamId:e,userId:t})=>{if(!t)return null;let r=E(t);return(null==r?void 0:r.teamId)===e?r:null};function h({loadingPaidEditors:e,teamId:t,teamName:r,setTeamName:l,collaborators:p,setCollaborators:m}){let h=(0,d.xJ)(),g=(0,i.v9)(e=>(t?e.teamUserByTeamId[t]:{})||{}),f=(0,i.v9)(e=>e.payment.numDesignEditors),y=(0,i.v9)(e=>e.payment.numWhiteboardEditors),v=(0,i.v9)(e=>e.payment.editorStatusChanges),b=(0,o.D)(e),I=(0,u.S2)(g,h),T=(0,u.Al)(f,(0,u.Z$)(I,v,s.gg.DESIGN)),w=(0,u.Al)(y,(0,u.Z$)(I,v,s.gg.WHITEBOARD)),S=(0,n.useCallback)(()=>{let e=E(null==h?void 0:h.id);if(!e)return null;let{createdAt:t,updatedAt:r,...n}=e;return n},[null==h?void 0:h.id]);(0,n.useEffect)(()=>{let n=S(),i=null!==t||r?r:null==n?void 0:n.newTeamName,o=null===t&&!p||(0,a.qt)(p,c.W)?(null==n?void 0:n.newCollaborators)??c.W:p,s=null==n?void 0:n.is3DS,d={teamId:t,editorStatusChanges:v,numEmptyDesignSeats:T,numEmptyWhiteboardSeats:w,newTeamName:i,newCollaborators:o,is3DS:s};!e&&h&&((0,a.Me)(n,d)||_(h.id,d),b&&(l&&i!==r&&l(i||""),m&&!(0,a.qt)(p,o)&&m(o||c.W)))},[e,b,h,t,v,T,w,S,r,l,p,m])}let _=(e,t)=>{var r;try{let n=new Date().toISOString(),i={...t,createdAt:n,updatedAt:n};null==(r=(0,l.Rz)())||r.setItem(p(e),f(i))}catch(e){console.error("Failed to save cart state to Local Storage")}},g=e=>{var t;if(e)try{null==(t=(0,l.Rz)())||t.removeItem(p(e))}catch(e){}},f=e=>JSON.stringify(e),E=e=>{var t;if(!e)return null;try{let r=null==(t=(0,l.Rz)())?void 0:t.getItem(p(e));if(r)return JSON.parse(r);return null}catch(e){return null}},y=(e,t)=>{let r=t.map(e=>e.id),n=e=>e.filter(e=>r.includes(e));return{upgrade:{design:n(e.upgrade.design),whiteboard:n(e.upgrade.whiteboard)},downgrade:{design:n(e.downgrade.design),whiteboard:n(e.downgrade.whiteboard)}}}},255301:(e,t,r)=>{r.d(t,{Aj:()=>R,CJ:()=>M,EN:()=>w,IW:()=>U,NO:()=>N,On:()=>y,Qi:()=>S,WA:()=>k,bG:()=>E,fh:()=>P,i3:()=>x,l_:()=>F,nD:()=>B,qH:()=>v,rO:()=>b,xr:()=>T,yv:()=>I});var n=r(969709),i=r(172497),a=r(716250),o=r(669277),l=r(615537),s=r(518484),c=r(338062),d=r(271774),u=r(346451),p=r(690590),m=r(433517),h=r(407108),_=r(390176),g=r(996028),f=r(332224);let E=1,y={x:16,y:-4},v={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:p.Ux.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function I(e,t){return!t||(0,s.r3)(t,e)}function T(e,t,r){let{messageMeta:n,attachments:i,anchorPosition:a,selectionBoxAnchor:o}=t;return{id:p.oZ,key:p.oZ,uuid:p.oZ,anchored:!0,canvasPosition:a,selectionAnchorCanvasPosition:o,page:r,isActive:e===p.oZ,comments:[],messageMeta:n,attachments:Object.values(i),pageName:null,isCanvasMention:!1,sidebarItemType:"comment-thread"}}function w(e){return e===p.oZ}let S=(0,l.Hf)(e=>e.map(e=>{var t;return e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:(null==(t=e.children)?void 0:t.length)?S(e.children):void 0,is_hashtag:"isHashtag"in e&&e.isHashtag?e.isHashtag:void 0}})),C=(0,l.Hf)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),O=(0,l.Hf)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),A=(e,t,r)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(t.unreadComments[e.id])return!0;if(t.readComments[e.id])return!1;let n=t.allReadAt||t.createdAt;return!(e.createdAt.getTime()<=n.getTime())&&e.user.id!==r};function N(e,t,r,i,o,l,s){var c;let d=A(r,i,e),u=(0,n.Ty)(r.id),p=r.messageMeta;(null==(c=r.messageMetaStylized)?void 0:c.length)&&(p=r.messageMetaStylized);let m=(0,a.BZ)().comments_faster_saving_ux?!!r.uuid&&o.has(r.uuid):void 0,h=(0,a.BZ)().comments_faster_saving_ux_v2?u||!!t.uuid&&t.uuid in l:void 0;return{id:r.id,uuid:r.uuid,key:t.key,parent_id:r.parentId,user_id:r.user.id,created_at:r.createdAt.toISOString(),resolved_at:t.resolvedAt?t.resolvedAt.toISOString():null,deleted_at:null,message_meta:S(p),attachments:s,client_meta:r.clientMeta?C(r.clientMeta):null,order_id:null!==r.orderId?r.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:m,isPendingFromLg:h,user:O(r.user)}}let L=new Date,P={id:"",userId:"",fileKey:"",createdAt:L,allReadAt:L,readComments:{},unreadComments:{}};function R(e,t,r,i,l,s,c,d){if("loaded"!==t.status)return t;let u=t.data.file;if(!u)return(0,o.wl)([]);let p=null==u?void 0:u.comments.filter(e=>!e.parentId),m=u.comments.filter(e=>e.parentId),h=m.reduce((e,t)=>{let r=e[t.parentId]||[];return r.push(t),e[t.parentId]=r,e},{}),_=u.commentAttachments.reduce((e,t)=>{if(!t.fileCommentId)return e;let r=e[t.fileCommentId]||[];return r.push(t),e[t.fileCommentId]=r,e},{}),g=p.filter(e=>{var t;return null==(t=e.clientMeta)?void 0:t.nodeId}).map(e=>e.clientMeta.nodeId),f=l(g),E=p.map(t=>{var o,l,p;let m=t.clientMeta&&t.clientMeta.nodeId,g=i[t.id]||t.uuid&&i[t.uuid],E=null;if(g&&(null==(o=t.clientMeta)?void 0:o.selectionBoxAnchor)){let e=t.clientMeta.x-t.clientMeta.selectionBoxAnchor.x,r=t.clientMeta.y-t.clientMeta.selectionBoxAnchor.y;E={x:g.x-e,y:g.y-r}}let y=m?f[m]||(null==(l=t.clientMeta)?void 0:l.pageId)||null:(null==(p=t.clientMeta)?void 0:p.pageId)||"0:1",v=h[t.id]||[],b=[t,...v.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime())],I=u.currentUserCommentReadStatus||P,T=b.map(r=>{let n=_[r.id]??(r.uuid&&_[r.uuid]);return N(e,t,r,I,c,d,n)}),w=(0,n.Ty)(t.id),S=(0,a.BZ)().comments_faster_saving_ux?!!t.uuid&&c.has(t.uuid):void 0,C=(0,a.BZ)().comments_faster_saving_ux_v2?w||!!t.uuid&&t.uuid in d:void 0,O={id:t.id,uuid:t.uuid||void 0,key:t.key,anchored:!!g,canvasPosition:g,selectionAnchorCanvasPosition:E,page:y,pageName:y&&s[y]||null,isActive:r===t.id,isPendingFromSinatra:w,isSaving:S,isPendingFromLg:C,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:"comment-thread",commentPin:t.commentPin};return O});return(0,o.wl)(E)}function k(e,t,r){let{canvasPosition:n}=t,a=n&&e?(0,d.CP)(e,n):null,o=new Set(t.comments.map(e=>e.user_id)).size,l=function(e,t,r,n,a){if(!e||!t)return null;let o="comment-thread"===n?_.Wb:_.zi,l=o.getPinSize(r).width,s=l+y.x+(0,i.z)(f.H4o)+25,c=e.width-t.x-(a??0);return c<s?{x:-(0,i.z)(f.H4o)-y.x,y:-55}:{x:l+y.x,y:-55}}(e,a,o,t.sidebarItemType,r),c=a&&l?s.OW.add(a,l):null;return{...t,anchorPosition:a,threadPosition:c,threadOffset:l}}let D=(e,t,r)=>{let n=e.id;if(t.unreadCanvasMentions[n])return!0;if(t.readCanvasMentions[n])return!1;let i=t.allReadAt||t.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&r!==e.id};function M(e,t,r,n,i){var a;if("loaded"!==e.status)return e;let l=e.data.file;if(!l)return(0,o.wl)([]);let s={},c=(null==(a=e.data.file)?void 0:a.feedPosts)||[],d=c.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),p=d.filter(e=>!!e.org&&(0,u.S3)(i,e.org.id)),_=p.map(e=>{var i,a;let o=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:S(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:O(e.user),feed_id:e.id,attachments:e.attachments})),l=(0,g.$)([e]),[c,...d]=l;s[c]=s[c]+1||0;let p=r[c]??null,_=null==(i=n[e.publicUuid])?void 0:i[c],f={};for(let t of d)r[t]===p&&(f[t]=null==(a=n[e.publicUuid])?void 0:a[t]);let E=null,y=null;_&&(y={x:_.x+_.width,y:_.y},E={x:_.x,y:_.y+_.height});let v=O(e.creator),b=(0,u.$D)(e.publicUuid),I=e.content.map(e=>JSON.parse(e)),{thumbnail:T,padImage:w,thumbnailBackground:C}=(0,m.Qm)(I,e.backgroundColor??void 0),A={id:b,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:p,pageName:null,isActive:t===b,isPendingFromSinatra:!1,canvasPosition:y,boundingBoxAnchorCanvasPosition:E,comments:[{id:b,uuid:"",key:e.fileKey||"",parent_id:null,user_id:v.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:S(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:v,feed_id:e.id},...o],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:"feed-post",feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:T,feedPostThumbnailBackground:C,feedPostNumContent:e.content.length,feedPostContainerInfo:(0,h.a$)(e),padFeedPostThumbnail:w,otherBoundingBoxes:f,pinVerticalStagger:s[c]};return A});return(0,o.wl)(_)}function F(e,t,r){if("loaded"!==t.status)return t;let n=t.data.file;if(!n)return(0,o.wl)([]);let i=n.fileCanvasMentions,a=n.currentUserFileCanvasMentionReadStatus||c.dd,l=i.map(t=>(function(e,t,r,n){let i=`canvas_mention_${t.id.replace(/-/g,"_")}`,a=t.id,o=D(t,r,e);return{id:i,uuid:a,key:t.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:null,pageName:null,isActive:n===i,isPendingFromSinatra:void 0,comments:[{id:i,uuid:a,key:a,parent_id:null,user_id:t.fileKey,created_at:t.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:S(t.messageMeta),client_meta:null,order_id:null,isUnread:o,isPendingFromSinatra:!1,user:O(t.mentionedByUser)}],messageMeta:S(t.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:"comment-thread",nodeId:t.nodeIdPath[0]}})(e,t,a,r));return(0,o.wl)(l)}function x(){return{reply:{messageMeta:[],attachments:{}},state:p.Ux.READY}}function U(e){let t=[];for(let r=0;r<e.message_meta.length;r++){let n=e.message_meta[r];n.hasOwnProperty("user_id")&&t.push(n.user_id)}return t}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},864920:(e,t,r)=>{r.d(t,{Gs:()=>k,H3:()=>P,gB:()=>x,h6:()=>F,o7:()=>D,q1:()=>R,vF:()=>M});var n=r(652983),i=r(407908),a=r(239907),o=r.n(a),l=r(785466),s=r.n(l),c=r(600486),d=r(716250),u=r(669277),p=r(615537),m=r(518484),h=r(445041),_=r(133660),g=r(996028),f=r(158774),E=r(961215),y=r(464368),v=r(266344),b=r(835844),I=r(255301),T=r(270418),w=r(875343),S=r(292977),C=r(117266),O=r(346451);let A=(0,d.BZ)().comments_new_observer,N=(e,t)=>{let r=n.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let t=e.data.file,r=Object.create(null),n=new Set,i=t.comments.filter(e=>null===e.parentId);for(let e of i)if(e.clientMeta){let{x:t,y:i,nodeId:a,nodeOffset:o,stablePath:l}=e.clientMeta;r[e.id]={canvasPosition:{x:t,y:i},nodeId:a,nodeOffset:o,stablePath:l?`[${l.join(",")}]`:void 0},null!=a&&n.add(a)}return{commentNodeInfoById:r,commentNodeIds:n,commentThreads:i}},[e]),i=t(r.commentNodeInfoById);return{anchorPositionById:i}},L="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function P(e,t){let r=n.useMemo(()=>o()(e,e=>{var t;return null==(t=e.clientMeta)?void 0:t.nodeId}),[e]),a=n.useMemo(()=>Object.keys(r),[r]),l=n.useRef({}),s=(0,i.I0)(),c=(0,w.K)(),d=n.useCallback(e=>{var t;let{nodeId:n,position:i,eventOrigins:a}=e,o=l.current[n],c=a.includes("LOCAL"),d=navigator.onLine;if(c&&d){if(null===i){let e=r[n]||[];o&&e.forEach(e=>{var t;let r=e.clientMeta;if(r){let n=(null==(t=e.clientMeta)?void 0:t.nodeOffset)||{x:0,y:0},i=m.OW.add(o.position,n);(r.x!==i.x||r.y!==i.y)&&s(h.WF({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else if(i&&i.page!==(null==(t=null==o?void 0:o.position)?void 0:t.page)){let e=r[n]||[];e.forEach(e=>{var t;let r=e.clientMeta;if(r){let n=(null==(t=e.clientMeta)?void 0:t.nodeOffset)||{x:0,y:0},a=m.OW.add(i,n);s(h.WF({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:i.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}}l.current[n]=e},[r,l,s]);n.useEffect(()=>{if(t.enabled&&E.iTB&&c){let{currentNodePosition:e}=(0,S.u8)(L,a,d);l.current=e}return()=>{E.iTB&&c&&(0,S.Ao)(L)}},[a,d,t.enabled,c])}function R(){let[e,t]=n.useState(new Date);n.useEffect(()=>{if(f.Gr)return A?()=>{(0,S.Ao)("comments")}:(f.Gr.onWatchedNodeBoundsChange(()=>{t(new Date)}),()=>{f.Gr.onWatchedNodeBoundsChange(()=>{})})},[t]);let r=n.useCallback(e=>{var r;(null==(r=f.Gr)?void 0:r.isReady())&&(A?(0,S.u8)("comments",e,e=>{t(new Date)}):f.Gr.DEPRECATED_sendMessage("watchBoundsForNodes",{nodeIDs:e}))},[]),i=n.useCallback(e=>{var t;(null==(t=f.Gr)?void 0:t.isReady())&&f.Gr.DEPRECATED_sendMessage("watchBoundsForStablePaths",{stablePaths:e})},[]),a=n.useCallback((0,p.ws)(t=>{var r;return(null==(r=f.Gr)?void 0:r.isReady())&&e?E.iTB.getCanvasSpaceCommentLocations(t):{}}),[e]),o=n.useCallback((0,p.ws)((t,r,n)=>{if(!(0,O.lY)()||!r||!e)return{};let i={},a=(0,g.r)(t,r);return n.forEach(e=>{if(e.content){let t=(0,g.$)([e]),r=t.reduce((e,t)=>a[t]?{...e,[t]:a[t]}:e,{});i[e.publicUuid]=r}}),i}),[e]);return{anchorPositions:a,boundingBoxPositions:o,DEPRECATED_updateWatchedNodeIds:r,updateWatchedStablePaths:i}}function k(e){return n.useCallback(t=>t.reduce((t,r)=>(t[r]=(null==e?void 0:e.pageIdForNodeId(r))||null,t),{}),[e])}function D(e,t,r,a,o,l){let s=N(t,a),d=(0,i.v9)(e=>e.comments.savingCommentUuids),u=(0,i.v9)(e=>e.comments.lgPendingUuidToServerIdMap);n.useEffect(()=>{if("errors"===t.status){let e=JSON.stringify(t.errors.map(e=>{var t;return{code:e.code,path:e.path,message:(null==(t=e.error)?void 0:t.message)||""}}));console.error(`Failed to load comments: ${e}`),(0,c.L9)("Livegraph Comments Errors",{errors:e})}},[t]),(0,C.X)(e=>{var r,n,i;if("loading"!==t.status){if("errors"===t.status){e("comments_fetched",{status:t.status});return}e("comments_fetched",{count:null==(i=null==(n=null==(r=t.data)?void 0:r.file)?void 0:n.comments)?void 0:i.length,status:t.status})}},[t]);let p=n.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,t)=>{let r="nodeId"in t?t.nodeId:t.id;return e[r]=t.name,e},{}),[l]),m=n.useMemo(()=>(0,I.Aj)(e,t,r,s.anchorPositionById,o,p,d,u),[e,t,r,s.anchorPositionById,o,p,d,u]);return(0,T.m)("loaded"===m.status&&m.data||[]),m}function M(e,t,r,i){let[a,o]=n.useState({}),[l,d]=n.useState({}),p=(0,y.at)(),m=(0,_.V_)();n.useEffect(()=>{if(e.errors&&e.errors.length){let t=JSON.stringify(e.errors.map(e=>{var t;return{code:e.code,path:e.path,message:(null==(t=e.error)?void 0:t.message)||""}}));console.error(`Failed to load feed posts: ${t}`),(0,c.L9)("Livegraph Feed Post Comments Errors",{errors:t})}},[e.errors]),n.useMemo(()=>{if((0,O.lY)()&&"loaded"===e.status&&e.data.file&&(null==p?void 0:p.get)){let t=e.data.file.feedPosts,n=t.filter(e=>!!e.org&&!!m&&(0,O.S3)(m,e.org.id)),c=(0,g.$)(n),u=r(c),h=Object.entries(u).every(([e,t])=>null===a[e]&&null===t||!!a[e]&&!!t&&a[e]===t);h||o(u);let _=i(c,null==p?void 0:p.get.bind(p),t),f=Object.entries(_).every(([e,t])=>{let r=l[e];return!!r&&s()(r,t)});f||d(_)}},[e,r,p,a,l,i,m]);let h=n.useMemo(()=>m?(0,I.CJ)(e,t,a,l,m):(0,u.wl)([]),[e,t,a,l,m]);return h}function F(e,t,r){n.useEffect(()=>{if(t.errors&&t.errors.length){let e=JSON.stringify(t.errors.map(e=>{var t;return{code:e.code,path:e.path,message:(null==(t=e.error)?void 0:t.message)||""}}));console.error(`Failed to load canvas mentions: ${e}`),(0,c.L9)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[t.errors]);let i=n.useMemo(()=>(0,I.l_)(e,t,r),[r,t,e]);return i}function x(e){var t,r;let n;let i=(0,b.Z)(),a=(0,y.at)(),o=(0,v.b)();switch(i.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(n=null==(t=e.comments[0].client_meta)?void 0:t.node_id))return!1;return!a.get(n);case"non_slide_anchors":if(0===e.comments.length||!(n=null==(r=e.comments[0].client_meta)?void 0:r.node_id))return!0;return!o.has(n);default:return!1}}},54055:(e,t,r)=>{r.d(t,{$U:()=>eU,$h:()=>ex,$o:()=>Z,CR:()=>eR,CZ:()=>eg,Eo:()=>j,FA:()=>e_,FM:()=>C,FO:()=>w,Fj:()=>X,HS:()=>eb,I3:()=>eF,ID:()=>L,Ib:()=>R,Kk:()=>ey,LW:()=>T,MA:()=>eo,MD:()=>x,NV:()=>Q,OA:()=>eN,OG:()=>eT,PN:()=>V,Ps:()=>A,QU:()=>en,Qe:()=>eL,Ri:()=>eW,Tw:()=>ek,Tx:()=>P,U:()=>er,UG:()=>eY,WM:()=>F,Wb:()=>J,XF:()=>ez,YO:()=>q,ZP:()=>ea,_r:()=>eH,_u:()=>eP,aQ:()=>z,b2:()=>ei,bX:()=>k,cq:()=>eu,d8:()=>ev,dE:()=>eV,dS:()=>eK,e_:()=>ef,f2:()=>et,g:()=>N,g3:()=>eZ,gK:()=>S,gU:()=>eC,h$:()=>ed,hC:()=>eO,h_:()=>eI,hu:()=>ew,jE:()=>eS,jq:()=>U,kH:()=>el,ku:()=>eh,mi:()=>em,nC:()=>eD,ny:()=>W,ok:()=>eE,rI:()=>D,sf:()=>eB,sg:()=>eA,uW:()=>M,v$:()=>eM,vO:()=>K,v_:()=>O,wg:()=>$,xO:()=>Y,zt:()=>ee});var n=r(652983),i=r(407908),a=r(600486),o=r(716250),l=r(615537),s=r(970740),c=r(573196),d=r(15014),u=r(692379),p=r(483752),m=r(843348),h=r(727803),_=r(761767),g=r(733609),f=r(315100),E=r(646472),y=r(465883),v=r(606536),b=r(938110),I=r(590708);function T(e,t){return{...e&&e.versions||{},...t&&t.versions||{}}}function w(e,t,r){return e&&t&&t[e]||r}function S(e){return e&&e.trim()||""}function C(e){return e&&e.status||{code:y.QW.EDIT}}let O=(e,t)=>{let r=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:r}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:r}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:r})};function A(e,t){var r;return(null==(r=t.authedActiveCommunityProfile)?void 0:r.id)===e.id}function N(e,t){var r;let n=t.authedProfilesById[e];return(null==n?void 0:n.primary_user_id)?!!t.user&&!!(null==(r=n.associated_users)?void 0:r.find(e=>e.user_id===t.user.id)):(null==n?void 0:n.team_id)?!!(t.user&&t.teamAdminRolesForAuthedUsers[t.user.id].some(e=>e.team_id===n.team_id))||(0,g.hasAdminRoleAccessOnTeam)(n.team_id,t):null!=n&&!!n.org_id&&(0,g.canAdminOrg)(n.org_id,t)}function L(e,t){var r;let n=(null==e?void 0:e.id)===(null==(r=t.authedActiveCommunityProfile)?void 0:r.id);return n&&N(e.id,t)}function P(e,t){return!!e.primary_user_id||"communityHub"!==t.view||"landing"!==t.subView||t.category!==p.L1&&t.sortState!==u.rq.FOLLOWING_FEED}let R=(0,l.ws)((e,t,r,n)=>{let i=null;if(e&&t[e]){let a=(0,g.canAdminOrg)(e,{currentUserOrgId:e,user:r,orgById:t,orgUsersByOrgId:n,fileByKey:{}}),o=t[e];i={isAdmin:a,id:o.id,name:o.name,publicLinksBanned:(0,I.Zy)(o.shared_org_license_group_settings)}}return i});function k(e){return R(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function D(){let e=(0,i.v9)(e=>e.currentUserOrgId),t=(0,i.v9)(e=>e.orgById),r=(0,i.v9)(e=>e.user),n=(0,i.v9)(e=>e.orgUsersByOrgId);return R(e,t,r,n)}let M=(0,l.ws)((e,t,r)=>{let n;let i=t.plugins.fetchedResources;switch(e){case"design":n=b.xQ.Design;break;case"dev_handoff":n=b.xQ.Handoff;break;default:n=b.xQ.FigJam}let a=[];for(let e of t.plugins[n]){let t=i[e.id];if(t&&t.version){a.push(t.version);continue}let n=r[e.id];n&&a.push(n)}return a});function F(e){return M(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function x(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}function U(e){if(!e)throw Error((0,s.t)("community.publishing.cover_image_not_found"));if(0>["image/jpeg","image/png"].indexOf(e.type))throw Error((0,s.t)("community.publishing.cover_image_requirements"));if(e.size>Y)throw Error((0,s.t)("community.publishing.cover_image_exceeds_max_size",{maxResourceSize:Math.floor(Y/1e6)}));return e.size}let B=e=>e.trim().toLocaleLowerCase().replace(/^#/,"");function V(e,t){return{content:e=B(e),state:G(e)||function(e,t){for(let r=0;r<t.length;r++)if(t[r]===e)return H(e);return null}(e,t.map(e=>e.content))?f.k.ERROR:f.k.OK}}function G(e){return e.match((0,o.BZ)().i18n_web_locales?/^[\P{Script_Extensions=Common} _\-0-9]*$/gu:/^[a-z0-9 _-]*$/)?e.match((0,o.BZ)().i18n_web_locales?/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu:/^[a-z0-9](.*[a-z0-9])?$/)?(0,o.BZ)().i18n_web_locales&&e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}let H=e=>(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${e}'`});function W(e){if(e.length>12)return(0,s.t)("community.publishing.cannot_have_more_than_12_tags");let t=function(e){let t={};for(let r=0;r<e.length;r++){if(t[e[r]])return H(e[r]);t[e[r]]=!0}return null}(e);if(t)return t;for(let t=0;t<e.length;t++){let r=B(e[t]),n=G(r);if(n)return n}return null}function K(e){return e.length>ei?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let z={name:"",description:"",tags:{inputValue:"",errorMessage:"",tokens:[]},categoryId:null,creatorPolicy:"",viewerMode:_.Zs.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:h.Br.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},Z=["Tab","Enter",","],Y=5242880,j=15728640,$=104857600,q=100,X=240,J=240,Q=4096,ee=1024,et=12,er=10,en=60,ei=100;function ea(e){return"is_widget"in e&&e.is_widget?E._g.WIDGET:"current_plugin_version_id"in e?E._g.PLUGIN:E._g.HUB_FILE}function eo(e){return"profile_handle"in e?E.mX.PROFILE:ea(e)===E._g.HUB_FILE?E.mX.HUB_FILE:ea(e)===E._g.WIDGET?E.mX.WIDGET:E.mX.PLUGIN}u.rq.POPULAR;let el=e=>e>=er-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:er}):null,es=(e,t)=>({id:e.id,uuid:null,key:e.id,parent_id:null,user_id:e.author.primary_user_id,created_at:e.created_at,resolved_at:e.resolved_at,deleted_at:null,message_meta:e.message_meta,client_meta:e.client_meta?{...e.client_meta,page_id:e.page_id||void 0}:null,user:{handle:e.author.name,id:e.author.id,img_url:e.author.img_url},order_id:t||null,profile_handle:e.author.profile_handle,edited_at:e.edited_at||void 0}),ec=(e,t,r,n,i)=>{var a;return{id:e.id,key:e.id,anchored:!!e.client_meta,canvasPosition:e.client_meta||null,selectionAnchorCanvasPosition:(null==(a=e.client_meta)?void 0:a.selection_box_anchor)||null,page:e.page_id,isActive:e.id===r,comments:[{...es(e,i),isUnread:!1},...t.map(e=>({...es(e),isUnread:!1}))],messageMeta:e.message_meta,replyCount:e.reply_count,lastRepliedAt:e.last_replied_at||void 0,pageName:n,isCanvasMention:!1,sidebarItemType:"comment-thread"}},ed=(e,t)=>{let r=(0,i.v9)(e=>e.communityHub.comments.commentsById),a=(0,i.v9)(e=>e.communityHub.comments.replyInfoByParentId),o=(0,i.v9)(e=>{var t;return(null==(t=e.comments.activeThread)?void 0:t.id)||null}),l=(0,i.v9)(e=>e.communityHub.comments.activeFeedType),s=n.useMemo(()=>ep(l),[l]),c=n.useMemo(()=>new Map(t.map(e=>[e.id,e.name])),[t]);return n.useMemo(()=>{let t=e.length;return e.reduce((e,n)=>{let i=r[n];if(!(null==i?void 0:i.page_id)||s&&!s(i))return e;let l=a[n],d=((null==l?void 0:l.replyIds)||[]).map(e=>r[e]),u=i.page_id&&c.get(i.page_id)||null;return e.push(ec(i,d,o,u,t.toString())),t-=1,e},[])},[o,s,e,r,a,c])};function eu(e){return n.useMemo(()=>"loaded"!==e.status?[]:e.data,[e])}let ep=e=>e===E.QN.ALL||e===E.QN.ME?e=>!e.hidden_at:()=>!0,em=e=>{let t={},r={},n=e.map(e=>(t[e.id]=e,r[e.author.id]=e.author,e.id));return{commentsById:t,authorsById:r,feed:n}},eh=e=>e.publishing_status===_.UG.APPROVED_PUBLIC&&e.comments_setting!==h.Br.ALL_DISABLED,e_=(e,t)=>!!(t.comments_setting!==h.Br.ALL_DISABLED&&!t.commenting_is_restricted&&!(null==e?void 0:e.community_commenting_blocked_at)),eg=(e,t,r)=>ef(t)&&e_(e,t)&&!ey(r),ef=e=>!!(e.viewer_mode!==_.Zs.PROTOTYPE&&e.comments_setting===h.Br.ENABLED&&!eY()),eE=e=>!!(e&&e.primary_user_id&&e.public_at),ey=d.K,ev=()=>{let e=(0,i.v9)(e=>e.authedActiveCommunityProfile);return e},eb=()=>{let e=(0,i.v9)(e=>e.authedActiveCommunityProfile),t=(0,i.v9)(e=>e.authedProfilesById),r=(0,i.v9)(e=>e.authedUsers.byId),n=(0,i.v9)(e=>e.orgById);if(!e)return null;if(!e.public_at){if(e.primary_user_id)return r[e.primary_user_id];if(e.org_id)return n[e.org_id]}return t[e.id]};function eI(e){let t=e.orgById,r={};return Object.keys(t).forEach(n=>{(0,g.canAdminOrg)(n,e)&&(r[n]=t[n])}),r}function eT(e){let t=e.teamAdminRolesForAuthedUsers[e.user.id];if(!t)return{};let r={};return t.forEach(t=>{e.authedTeamsById[t.team_id]&&(r[t.team_id]=e.authedTeamsById[t.team_id])}),r}function ew(e,t){let r=e.authedProfilesById,n=e.teamAdminRolesForAuthedUsers,i={};return Object.keys(r).forEach(e=>{let a=r[e];if(a.team_id){if(t){let r=n[t];(null==r?void 0:r.some(e=>e.user_id===t&&e.team_id===a.team_id))&&(i[e]=a)}else i[e]=a}}),i}function eS({authedProfilesById:e,profileId:t,userId:r,orgId:n,teamId:i}){return t?e[t]:n?Object.values(e).find(e=>e.org_id===n)||null:i?Object.values(e).find(e=>e.team_id===i)||null:r&&Object.values(e).find(e=>{var t;return null==(t=e.associated_users)?void 0:t.find(e=>e.user_id===r)})||null}function eC(e,t){return Object.values(t).find(t=>{var r;return null==(r=t.associated_users)?void 0:r.find(r=>r.user_id===e.id&&t.public_at)})||null}let eO=()=>(0,i.v9)(e=>eA(e.selectedView));function eA(e){return"communityHub"===e.view||eN(e)||c.yu}function eN(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function eL(e){return"communityHub"===e.view&&("hubFile"===e.subView||"plugin"===e.subView)}function eP(e){return"communityHub"===e.view&&"monetizationRedirectView"===e.subView}function eR(e){return"communityHub"===e.view&&"landing"===e.subView}function ek(e){return"communityHub"===e.view&&"handle"===e.subView}function eD(e){return(0,m.n)(e)}function eM(e){var t;return(null==(t=e.community_publishers)?void 0:t.accepted.find(e=>ey(e)))||null}function eF(e,t){var r;let n=eM(t);if(n)return e.authedProfilesById[n.id]||null;let i=e.user&&eC(e.user,e.authedProfilesById);return i&&(null==(r=t.community_publishers)?void 0:r.accepted.find(e=>e.id===i.id))?i:null}function ex(e,t){var r;if(!t.user)return null;let n=eD(t),i=t.user,a=t.authedProfilesById[e.id];if(n.length<0)return null;if(null==a?void 0:a.org_id){let e=[...n,i].find(e=>{let r=a.org_id;if(!r)return!1;let n=t.orgById[r],i=t.orgUsersByOrgId.orgUsers[r][e.id];return(0,g.hasOrgAccess)(i,n,v.Wp.ADMIN)})||null;return e?{userId:e.id,orgId:a.org_id}:null}if(null==a?void 0:a.team_id){let e=n.find(e=>(0,g.hasAdminRoleAccessOnTeam__DEPRECATED)(a.team_id,t,e.id))||null,i=(null==(r=t.teams[a.team_id])?void 0:r.org_id)||null;return e?{userId:e.id,orgId:i}:null}let o=n.find(t=>t.id===e.primary_user_id);return o?{userId:o.id,orgId:null}:null}function eU(e){switch(e){case E.Xh.PLUGIN:return"plugins";case E.Xh.WIDGET:return"widgets";case E.Xh.COMMENT:return"comments";case E.Xh.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function eB(e,{pluralized:t,capitalized:r}={}){return function(e,{pluralized:t,capitalized:r}={}){let n=(()=>{switch(e){case E._g.PLUGIN:return"plugin";case E._g.WIDGET:return"widget";case"comment":return"comment";case E._g.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})();return eG(n,{pluralized:t,capitalized:r})}((0,c.yA)(e),{pluralized:t,capitalized:r})}function eV(e,{pluralized:t,capitalized:r}={}){return e?eG(E.Xh.WIDGET,{pluralized:t,capitalized:r}):eG(E.Xh.PLUGIN,{pluralized:t,capitalized:r})}function eG(e,{pluralized:t,capitalized:r}={}){return e+=t?"s":"",r&&(e=e[0].toUpperCase()+e.substr(1)),e}let eH={threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300},eW=[{name:"name",weight:1},{name:"description",weight:1}],eK=()=>(0,o.BZ)().community_pronouns,ez=(e,t)=>{(0,a.L9)(u.CY.PROFILE_ADMIN_MENU_OPEN,{source:e,view:t})},eZ=()=>(0,o.BZ)().community_show_view_counts;function eY(){return!!(0,o.BZ)().cmty_disable_pinned_comments}},727055:(e,t,r)=>{r.d(t,{R2:()=>o,aP:()=>s,ap:()=>l});var n=r(523495),i=r(970740),a=r(54055);function o(e,t,r){if(0===e.length)return"";if(1===e.length)return r(e[0]);let a=e.slice(0,t-1),o=e.slice(t-1);0===o.length&&(o=[a[a.length-1]],a=a.slice(0,a.length-1));let l=1===o.length?r(o[0]):(0,i.t)("community.resource.by_x_others",{numPublishers:o.length}),s=a.map(r);return l&&s.push(l),(0,n.WH)(s)}function l(e){let t=(0,a.v$)(e);if(t)return t.name;let r=e.community_publishers.accepted;return o(r,r.length,e=>e.name)}function s(e){let t=e.community_publishers.accepted;return e.community_publishers.pending&&(t=t.concat(e.community_publishers.pending)),t.reduce((e,t)=>{var r;let n=(null==(r=t.associated_users)?void 0:r.map(e=>e.user_id))||[];return t.primary_user_id&&e.push(t.primary_user_id),e.concat(n)},[])}},776605:(e,t,r)=>{r.d(t,{$L:()=>o,Sr:()=>a,k2:()=>l,tK:()=>s});var n=r(31642),i=r(54055);function a(e,t){var r,n;return!!e&&!!(null==(n=null==(r=e.plugin_publishers)?void 0:r.pending)?void 0:n.some(e=>e.id===t))}function o(e,t){var r,n;return!!e&&!!(null==(n=null==(r=e.plugin_publishers)?void 0:r.accepted)?void 0:n.some(e=>e.id===t))}function l(e,t){return a(e,t)||o(e,t)}async function s(e,t){let{data:r}=await n.ZP.post(`/api/${(0,i.sf)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:t});return{resource:r.meta.plugin,errors:r.meta.errors}}},352180:(e,t,r)=>{r.d(t,{pm:()=>A,vV:()=>O});var n=r(652983),i=r(407908),a=r(303498),o=r(669277),l=r(286206),s=r(117986),c=r(680356),d=r(31642),u=r(970740),p=r(644383),m=r(968034),h=r(573196),_=r(83779),g=r(721127),f=r(298715),E=r(862610),y=r(646472),v=r(220949),b=r(921396),I=r(448694);let T="save-button-clicked";function w(e,t,r){return function(n,i){var o,m;let f=i();if((0,I.T6)(C({state:f,resource:e,viewContext:t,action:"save",loggedIn:!!f.user,forOrg:r}),T),!f.user){(0,l.Jz)(s.k.COMMUNITY,Error("[Community Saves] Attempted unsave without currentUser"));return}if((0,y.sg)(e)){let t=()=>{let t=d.ZP.post(`/api/hub_file/${e.id}/save`),r=`optimistic-resource-save-${(0,c.k)()}`;(0,a.i0)().optimisticallyCreate({ResourceSave:{[r]:{userId:f.user.id,hubFileId:e.id,createdAt:new Date(Date.now())}}},t),t.then(()=>{n(p.R.enqueue({message:(0,u.t)("community.saves.file_saved_for_your_profile"),type:"resource-save"}))}).catch(e=>{(0,l.Jz)(s.k.COMMUNITY,e)})};if(!(null==(o=f.authedActiveCommunityProfile)?void 0:o.public_at)){n(g.K4({type:b.WV,data:{userId:f.user.id,variations:[b.u_.OPT_IN],onFinish:t}}));return}t()}else n((0,_.VG)({id:e.id,resourceType:(0,h.yA)(e),communityProfile:i().authedActiveCommunityProfile||void 0,orgId:r&&(null==(m=f.authedActiveCommunityProfile)?void 0:m.org_id)||void 0,source:_.Fj.COMMUNITY_HUB,optimisticData:{resource:e}}))}}function S(e,t,r){return function(n,i){var a;let o=i();if(!o.user){(0,l.Jz)(s.k.COMMUNITY,Error("[Community Saves] Attempted save without currentUser"));return}((0,I.T6)(C({state:o,resource:e,viewContext:t,action:"unsave",loggedIn:!!o.user,forOrg:r}),T),(0,y.sg)(e))?d.ZP.del(`/api/hub_file/${e.id}/save`).then(()=>{n(p.R.enqueue({message:(0,u.t)("community.saves.file_removed_from_your_profile"),type:"resource-save"}))}).catch(e=>{(0,l.Jz)(s.k.COMMUNITY,e)}):n((0,_.Ci)({id:e.id,resourceType:(0,h.yA)(e),communityProfile:i().authedActiveCommunityProfile||void 0,orgId:r&&(null==(a=o.authedActiveCommunityProfile)?void 0:a.org_id)||void 0,source:_.Fj.COMMUNITY_HUB}))}}function C({state:e,resource:t,viewContext:r,action:n,loggedIn:i,forOrg:a=!1}){var o;return{action:n,resourceId:t.id,resourceType:(0,h.yA)(t),viewContext:r,loggedIn:i,forOrgId:a?null==(o=e.authedActiveCommunityProfile)?void 0:o.org_id:void 0,...(0,m.N)(e)}}function O(e,t){let r=(0,i.I0)(),{orgPlugins:a,orgWidgets:o}=(0,f.xX)(),l=(0,y._4)(e)?o[e.id]:a[e.id],s=n.useCallback(n=>{n.stopPropagation(),l?r(S(e,t,!0)):r(w(e,t,!0))},[r,l,e,t]);return{onOrgInstallActionClick:s,isResourceInstalledForOrg:l}}function A(e,t){let r=(0,i.I0)(),a=function(e,t){var r,n,i,a;let l=(0,o.mU)(E.ResourceSave,{hubFileId:t},{enabled:e===y._g.HUB_FILE}),s=(0,o.mU)(E.PluginInstall,{pluginId:t},{enabled:e===y._g.PLUGIN||e===y._g.WIDGET});return((null==(n=null==(r=l.data)?void 0:r.resourceSave)?void 0:n.createdAt)||(null==(a=null==(i=s.data)?void 0:i.pluginInstall)?void 0:a.createdAt))??null}((0,h.Dd)(e),e.id),l=!!a,s=n.useCallback(n=>{(0,v.m_)({id:"cmty-detail-view-saved-button-clicked"}),n.stopPropagation(),l?r(S(e,t)):r(w(e,t))},[l,r,e,t]);return{onSaveActionClick:s,isResourceSavedForUser:l}}},496478:(e,t,r)=>{r.d(t,{$x:()=>W,DO:()=>D,Dk:()=>ee,ED:()=>ec,I_:()=>R,Iw:()=>j,KL:()=>Z,LM:()=>U,Lv:()=>J,Mx:()=>I,OL:()=>er,Sd:()=>et,UJ:()=>S,Y7:()=>z,YH:()=>Y,ZP:()=>O,Zq:()=>A,_e:()=>el,c7:()=>ed,dQ:()=>w,ed:()=>eo,is:()=>F,k6:()=>en,o1:()=>X,oH:()=>k,qh:()=>ea,rn:()=>$,rw:()=>q,to:()=>N,xr:()=>T,xv:()=>M,y8:()=>L,zY:()=>K});var n,i=r(407908),a=r(716250),o=r(286206),l=r(1057),s=r(117986),c=r(970740),d=r(573196),u=r(369874),p=r(54055),m=r(686096),h=r(733609),_=r(646472),g=r(465883),f=r(765096),E=r(661539),y=r(991273),v=r(617406),b=r(590708);let I=10;var T=((n=T||{})[n.NONE=0]="NONE",n[n.PENDING=1]="PENDING",n[n.DISPLAY_ONLY=2]="DISPLAY_ONLY",n[n.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",n[n.ADMIN=4]="ADMIN",n[n.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",n[n.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",n[n.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",n[n.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",n);let w=[1,6],S=[2,7],C=[5,6,7];function O(e,t,r){var n,i;if((0,p.Kk)(e.authedActiveCommunityProfile)){let i=(0,p.v$)(t);return(null==i?void 0:i.id)===(null==(n=e.authedActiveCommunityProfile)?void 0:n.id)&&C.includes(r)}return null!=(i=e.authedActiveCommunityProfile)&&!!i.primary_user_id&&8===r}function A(e,t){var r;let n=(0,p.nC)(e),i=!!(t.creator.id&&n.some(e=>e.id===t.creator.id));if(i&&(0,p.Kk)(e.authedActiveCommunityProfile)){let n=(0,p.v$)(t);return(null==n?void 0:n.id)===(null==(r=e.authedActiveCommunityProfile)?void 0:r.id)}return i}function N(e,t){var r,n,i,a,o;let l=(0,p.I3)(e,t),s=!!((null==l?void 0:l.org_id)||(null==l?void 0:l.team_id)),c=l&&(0,p.$h)(l,e),u=c&&e.user&&(0,m.DO)(e,c),h=(0,d.yA)(t);if((h===_._g.PLUGIN||h===_._g.WIDGET)&&(!c||c.userId===(null==(r=e.user)?void 0:r.id))&&t.creator.id===(null==(n=e.user)?void 0:n.id))return 8;let g=null==(i=t.community_publishers)?void 0:i.accepted.some(t=>{var r;return t.id===(null==(r=e.user)?void 0:r.community_profile_id)});if(g)return s||(0,d.yA)(t)!==_._g.HUB_FILE?c?u?s?7:2:3:2:8;let f=null==(o=null==(a=t.community_publishers)?void 0:a.pending)?void 0:o.some(t=>{var r;return t.id===(null==(r=e.user)?void 0:r.community_profile_id)});return f?c&&u?6:1:c?u?5:3:0}function L(e,t){var r;if(t.primary_user_id===(null==(r=e.user)?void 0:r.id))return 4;if((0,p.Kk)(t)){let r=(0,p.$h)(t,e),n=r&&e.user&&(0,m.DO)(e,r);if(r&&n)return 4;if(r&&!n)return 3}return 0}let P=e=>!0===e.is_public||null!=e.org,R=(e,t,r,n)=>(0,_.vu)(e)||n?E.jZ.PUBLIC:P(e.roles)?e.roles.is_public||(0,u.k4)(e)?E.jZ.PUBLIC:E.jZ.ORG:null!=t&&r?E.jZ.ORG:E.jZ.PUBLIC,k=(e,t,r,n)=>{var i;let a=W(t.team_id,r,e,t.parent_org_id||null);if(0===a.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return x(e,a,r.authedProfilesById,null==(i=r.user)?void 0:i.id,n)},D=(e,t)=>{if(!e)return!1;let r=e.author.id;return(0,u.Un)(r,t)};function M(e,t){return e.creator.id===t}let F=(e,t)=>{var r;if(e){let r=z(t,e);if(r)return r}let n=Z(t,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return x(e,n,t.authedProfilesById,null==(r=t.user)?void 0:r.id)},x=(e,t,r,n,a)=>{if(0===t.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let o=(null==e?void 0:e.id)&&Object.keys(e.versions).length>0?B(e,r,n):null;if(o&&t.some(e=>U(e,o)))return o;if(a&&t.find(e=>(0,i.wU)(e,a)))return a;let l=t.find(H);if(l)return l;let s=t.find(V);if(s)return s;let c=t.find(G);return c||t[0]},U=(e,t)=>"team_id"in e?"team_id"in t&&e.team_id===t.team_id:"org_id"in e?"org_id"in t&&e.org_id===t.org_id:"user_id"in e&&"user_id"in t&&e.user_id===t.user_id,B=(e,t,r)=>{var n;if(((null==(n=e.community_publishers)?void 0:n.accepted)||[]).length>0){let n=(0,p.v$)(e),i=n&&t[n.id];return(null==i?void 0:i.team_id)?{team_id:i.team_id}:(null==i?void 0:i.org_id)?{org_id:i.org_id}:{user_id:r||e.creator.id}}let i=t[e.publisher.id];return i.org_id?{org_id:i.org_id}:i.team_id?{team_id:i.team_id}:{user_id:i.primary_user_id}},V=e=>"org_id"in e,G=e=>"team_id"in e,H=e=>"user_id"in e,W=(e,t,r,n)=>{var i;let o=[];if(((null==(i=null==r?void 0:r.community_publishers)?void 0:i.accepted)||[]).length>0){if(!e&&!n)return[{user_id:t.user.id}];let i=r&&(0,p.v$)(r),a=i?t.authedProfilesById[i.id]:null;if(null==a?void 0:a.team_id)return(0,h.hasAdminRoleAccessOnTeam)(null==a?void 0:a.team_id,t)?[{team_id:a.team_id}]:[];if(null==a?void 0:a.org_id)return(0,h.canAdminOrg)(null==a?void 0:a.org_id,t)?[{org_id:a.org_id}]:[]}if(t.currentUserOrgId){let r=t.orgById[t.currentUserOrgId];if(!r)return[];if((0,h.canAdminOrg)(t.currentUserOrgId,t)&&(o.push({org_id:t.currentUserOrgId}),(0,a.BZ)().cmty_resources_in_paid_spaces&&r.cmty_publish_as_user_enabled&&o.push({user_id:t.user.id})),e&&t.teams[e]){let n=t.teams[e];if("secret"===n.org_access)return[];let i=(0,b.Zy)(r.shared_org_license_group_settings)?(0,h.canAdminOrg)(t.currentUserOrgId,t):(0,h.hasAdminRoleAccessOnTeam)(e,t);i&&o.push({team_id:e})}return o}return e?((0,h.hasAdminRoleAccessOnTeam)(e,t)&&o.push({team_id:e}),o.push({user_id:t.user.id}),o):[{user_id:t.user.id}]},K=(e,t,r)=>{let n;let i=e.has_file_link_password||e.hasFileLinkPassword;n="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null;let a=W("team_id"in e?e.team_id:e.teamId,t,r,n||null),o=!!t.figFileDuplicatedFromHubFile[e.key],l=!r;return(0,h.canEditFile)(e.key,t)&&!function(e){var t,r;return"is_template"in e&&!!e.is_template||null!=(t=e.trackTags)&&!!t.isTemplate||"is_new_user_playground_library"in e&&!!e.is_new_user_playground_library||(null==(r=e.track_tags)?void 0:r.source)==="default"}(e)&&!i&&a.length>0&&!(o&&l)},z=(e,t)=>{if(t.publisher.id&&e.user)switch(t.publisher.entity_type){case g.Se.ORG:{let r=Object.values(e.orgById).find(e=>e.community_profile_id===t.publisher.id);return{org_id:(null==r?void 0:r.id)??e.currentUserOrgId??""}}case g.Se.TEAM:{let r=Object.values(e.teams).find(e=>e.community_profile_id===t.publisher.id);return{team_id:(null==r?void 0:r.id)||""}}default:return{user_id:t.creator.id}}return null},Z=(e,t,r=!0)=>{let n=[],i=r&&t?z(e,t):null;return e.currentUserOrgId&&(0,h.canAdminOrg)(e.currentUserOrgId,e)&&n.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(t=>{let r=e.teams[t];r&&"secret"!==r.org_access&&(0,h.hasAdminRoleAccessOnTeam)(t,e)&&n.push({team_id:t})}),n.push({user_id:e.user.id}),i&&!n.some(e=>U(e,i))&&n.unshift(i),n},Y=(e,t)=>{if(!e)return!1;let{team_id:r,org_id:n}=e;if("user_id"in t){let r=e.associated_users;return!!t.user_id&&t.user_id===e.primary_user_id||(null==r?void 0:r.some(e=>e.user_id===t.user_id))}return"team_id"in t&&r===t.team_id||"org_id"in t&&n===t.org_id},j=(e,t)=>{var r,n,i;if("org_id"in e)return(null==(r=t.orgById[e.org_id])?void 0:r.name)??null;if("team_id"in e)return(null==(n=t.teams[e.team_id])?void 0:n.name)??null;{let e=t.user&&(0,p.gU)(t.user,t.authedProfilesById);return(null==e?void 0:e.public_at)&&(null==e?void 0:e.name)?e.name:(null==e?void 0:e.public_at)&&(null==e?void 0:e.profile_handle)?`@${e.profile_handle}`:(null==(i=t.user)?void 0:i.handle)||null}},$=e=>new Promise((t,r)=>{if(!e){r(Error("Failed to load image bytes without file object"));return}let n=new FileReader;function i(e){if("load"!==e.type||"string"==typeof n.result||!n.result){r(Error(`Failed to load image bytes: event=${e.type}`));return}t(n.result)}n.addEventListener("load",i),n.addEventListener("abort",i),n.addEventListener("error",i),n.readAsArrayBuffer(e)});function q(e,t){var[r,n]=e.split(",");let i=atob(n),a=[];for(var o=0;o<i.length;o++)a.push(i.charCodeAt(o));let l=r.split(/;|:/)[1];return new Blob([new Uint8Array(a)],{type:l})}function X(e,t="Image",r=["image/jpeg","image/png"]){if(!e)throw Error((0,c.t)("community.publishing.error_thumbnail_image_not_found",{filename:t}));if(0>r.indexOf(e.type))throw Error((0,c.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:t}));if(e.size>p.xO)throw Error((0,c.t)("community.publishing.error_thumbnail_image_too_large",{filename:t,max_size:Math.floor(p.xO/1e6)}));return e.size}function J(e){return new Promise((t,r)=>{let n=new Image;n.onload=()=>t(n),n.onerror=r,n.src=e})}let Q=new Set;async function ee(e,t){if(null===e.files||0===e.files.length)throw Error((0,c.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));t&&el(t);let r=e.files[0];X(r,(0,c.t)("community.publishing.thumbnail_image"));let[n,i]=await Promise.all([J(URL.createObjectURL(r)),$(r)]);return Q.add(n.src),{url:n.src,buffer:new Uint8Array(i)}}async function et(e,t){let r=[];for(let n=0;n<Math.min(I,e.length);n++){let i=e[n];if(t&&i.type.startsWith("video/")){!function(e,t,r="Video"){if(!e)throw Error((0,c.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!f.ZK.includes(e.type))throw Error((0,c.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>p.wg)throw Error((0,c.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(p.wg/1e6)}))}(i,i.name);let e=URL.createObjectURL(i);await Promise.all([es(i),(0,y.BG)(e),ei(e,i.name)]).then(([t,n])=>{let i=URL.createObjectURL(new Blob([n]));Q.add(e),Q.add(i),r.push({url:e,buffer:t.bytes,sha1:t.sha1,type:"video",thumbnail_url:i,thumbnail_buffer:n,thumbnail_sha1:(0,l.Ey)(n)})}).catch(e=>{throw Error(e)})}else X(i,(0,c.t)("community.publishing.carousel_media_image")),await Promise.all([J(URL.createObjectURL(i)),$(i)]).then(([e,t])=>{Q.add(e.src);let n=new Uint8Array(t);r.push({url:e.src,buffer:n,sha1:(0,l.Ey)(n),type:"image"})}).catch(e=>{throw Error(e)})}return r}async function er(e,t){return null===e.files||0===e.files.length?Promise.resolve([]):await et(e.files,t)}function en(e){if(!e||!e.length)return(0,c.t)("community.publishing.upload_at_least_one_image")}let ei=(e,t)=>new Promise((r,n)=>{let i=document.createElement("video");i.preload="metadata",i.addEventListener("error",e=>{n(e.message)}),i.addEventListener("loadedmetadata",()=>{i.duration>30&&n((0,c.t)("community.publishing.error_video_too_long",{filename:t,max_length:30})),r(i)}),i.src=e,i.currentTime=0,i.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)});function ea(e){let t=[],r=[],n=[];if(!e)return{uploadImages:t,uploadVideos:r,allMedia:n};for(let i=0;i<e.length;i++){let a=e[i];if(a.buffer&&a.buffer.length){if("video"===a.type){if(!a.thumbnail_buffer)throw Error((0,c.t)("community.publishing.error_video_thumbnail_not_found"));let e={carousel_position:i,sha1:(0,l.Ey)(a.buffer),bytes:a.buffer,video_thumbnail_buffer:a.thumbnail_buffer,video_thumbnail_sha1:(0,l.Ey)(a.thumbnail_buffer)};r.push(e)}else{let e={carousel_position:i,sha1:(0,l.Ey)(a.buffer)};t.push(e),n.push(e)}}else if(a.sha1){let e="video"===a.type?{carousel_position:i,sha1:a.sha1,video_file_uuid:a.video_file_uuid,video_thumbnail_sha1:a.thumbnail_sha1}:{carousel_position:i,sha1:a.sha1};n.push(e)}}return{uploadImages:t,uploadVideos:r,allMedia:n}}function eo(e,t){return t&&(null==t?void 0:t.length)&&(null==e?void 0:e.length)?e.map(({url:e,fields:r,carousel_position:n})=>{let i=t[n];if(!i||!i.buffer)return Promise.resolve(!1);let a=new FormData;return Object.entries(r).forEach(([e,t])=>a.append(e,t)),a.set("content-type","image/png"),a.append("file",new Blob([i.buffer])),fetch(e,{method:"POST",body:a}).then(()=>!0).catch(e=>{var t;let r=Error((0,c.t)("community.actions.error_uploading_carousel_image_error",{error:(0,c.it)(e,(null==(t=e.data)?void 0:t.message)||"unknown error")}));throw(0,o.Jz)(s.k.COMMUNITY,r),r})}):[]}function el(e){e&&Q.has(e.url)&&(URL.revokeObjectURL(e.url),Q.delete(e.url),"type"in e&&"video"===e.type&&Q.has(e.thumbnail_url)&&(URL.revokeObjectURL(e.thumbnail_url),Q.delete(e.thumbnail_url)))}async function es(e){let t=await $(e),r=new Uint8Array(t),n=(0,l.Ey)(r);return{sha1:n,bytes:r}}function ec(e,t,r=E.jZ.PUBLIC){if(!e.currentUserOrgId||"user_id"in t&&r===E.jZ.PUBLIC&&!(0,a.BZ)().cmty_resources_in_paid_spaces)return!1;let n=(0,v.YM)(e);return!(n&&n.agreed_to_community_tos_at)}function ed(e,t){return Object.entries(t).reduce((t,[r,n])=>t+Number(e.includes(r)&&!!n),0)}},508887:(e,t,r)=>{r.d(t,{Bl:()=>p,C9:()=>h,Hr:()=>g,K1:()=>u,RI:()=>m,RM:()=>_});var n=r(652983),i=r(256768),a=r(716250),o=r(337167),l=r(458324),s=r(622003),c=r(70918),d=r(841017);function u(e,t,r){return!(!(0,a.BZ)().presets_baseline||!e||(0,i.Z)(e.created_at)<(0,i.Z)("2023-12-01T00:00:00.000Z"))&&!!t&&!!t.starter_team&&("assets"===r?"treatment_assets_default"===(0,l.rm)("exp_presets_baseline_new").getValue("treatment",""):"layers"===r?"treatment_layers_default"===(0,l.rm)("exp_presets_baseline_new").getValue("treatment",""):String((0,l.rm)("exp_presets_baseline_new").getValue("treatment","")).startsWith("treatment"))}function p(e){let t=e.getState();return u(t.user,(0,d.kA)(t))}function m(e){let t=(0,c.xJ)(),r=(0,d.Rs)();return n.useCallback(()=>u(t,r,e),[t,r,e])}let h=(0,o.cn)(e=>{let t=e(s.LF),r=e(d.AO);return()=>u(t,r)});function _(){return!!(0,a.BZ)().cmty_lib_m2_consumer}function g(){return n.useCallback(()=>_(),[])}},936561:(e,t,r)=>{r.d(t,{Gv:()=>G,Jh:()=>K,Mz:()=>q,Q9:()=>B,QH:()=>en,Qc:()=>Z,R8:()=>V,To:()=>J,U0:()=>ee,Z9:()=>$,av:()=>U,cF:()=>X,fU:()=>H,hd:()=>Q,iK:()=>j,iY:()=>z,lx:()=>ei,rf:()=>et,wJ:()=>er,xz:()=>x});var n,i=r(652983),a=r(407908),o=r(600486),l=r(647744),s=r(269658),c=r(448501),d=r(716250),u=r(122342),p=r(36940),m=r(313653),h=r(970740),_=r(644383),g=r(746600),f=r(573196),E=r(289629),y=r(369874),v=r(494029),b=r(721127),I=r(307425),T=r(238809),w=r(298715),S=r(843348),C=r(646472),O=r(597694),A=r(661539),N=r(799915),L=r(808549),P=r(19984),R=r(973974),k=r(493866),D=r(70918),M=r(339531);function F(e,t,r,n){return i=>{i(b.bF({type:L.n.type,data:{userId:e.id,resource:t,onSuccess:()=>{i(r=>{((0,C.bH)(t)||(0,C._4)(t))&&r(I.kl(t,e.id))}),r&&r()},onCancel:n}}))}}let x=(0,k.t)((e,t,r,n,i,a)=>{let o=(0,d.BZ)().community_hub_admin&&r&&(0,y.k4)(r);return new Promise(s=>{let d=()=>{if(t){if(n||o){var i;e((i=()=>{q({type:"PAID"}),s()},e=>{e(b.bF({type:L.n.type,data:{userId:t.id,resource:r,localResource:n,onSuccess:i,onCancel:s,noInteractionMode:!0}}))}));return}(0,C.vu)(r)?e(F(t,r,()=>s(),()=>s())):l.u.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(p.Y.init({origin:"freemium_checkout_modal_in_open_session",redirectUrl:c.default.location.pathname,signedUpFromOpenSession:!0})),e((0,b.K4)({type:N.m,data:{headerText:(0,h.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};a===P.d.SKIP?d():e(b.bF({type:P.T.type,data:{type:t?a||P.d.PAID_FEATURE:P.d.LOGGED_OUT,onContinue:d,onClose:s,plugin:r&&(0,M.hb)(r)||n||i,monetizedResourceMetadata:null==r?void 0:r.monetized_resource_metadata}}))})});function U(e){let t=(0,a.I0)(),r=(0,a.v9)(e=>e.authedActiveCommunityProfile),n=(0,a.v9)(e=>e.authedUsers),l=(0,g.i)(e);return i.useCallback(()=>{if(!e)return;let i=(0,E.lq)(l),a=(0,C.vu)(e);if((0,o.L9)("cmty_resource_usage_action",{resourceType:(0,f.Up)(e),resourceId:e.id,profileId:null==r?void 0:r.id,hasActiveCommunityResourcePayment:i,isMonetizedResource:a}),!a||i||!1===B(r,n,e))return;let s=(0,S.n)({authedActiveCommunityProfile:r,authedUsers:n}),{usersCanPurchase:c,publishers:d}=(0,E.zi)(s,e);if((0,o.L9)("Checkout Flow Entered",{resourceType:(0,f.Up)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:c.length,numLoggedInAssociatedPublishers:d.length}),1===c.length&&0===d.length){t(F(c[0],e));return}t((0,b.K4)({type:R.q,data:{onUserSelect:r=>{(0,o.L9)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,f.Up)(e),resourceId:e.id,userIdForPurchase:r.id}),t(F(r,e))},resource:e}}))},[e,l,r,n,t])}function B(e,t,r){if(!(0,C.vu)(r))return!1;let n=(0,S.n)({authedActiveCommunityProfile:e,authedUsers:t}),{usersCanPurchase:i,publishers:a}=(0,E.zi)(n,r);return(0!==i.length||0!==a.length)&&(0!==i.length||0===a.length)}function V(e){let t=(0,a.I0)(),r=(0,g.i)(e);return i.useCallback(()=>{e&&(0,E.lq)(r)&&(t(m.l.flash((0,h.t)("community.buyer.redirecting_to_stripe"))),t(v.p({})))},[e,r,t])}function G(e,t){let r=null==t?void 0:t[e.monetized_resource_metadata.id],n=r||e.community_resource_payment;return(0,E.lq)(n)}function H(e,t){let{publishers:r}=(0,E.zi)([t],e);return r.length>0}function W(e,t,r){return!(!e||!(0,C.vu)(e)||(0,C.F4)(e)||!(0,C.sg)(e)&&((0,A.ec)(e)||(0,C.v9)(e))||r&&H(e,r))&&!G(e,t)}function K(e){let t=(0,a.v9)(e=>e.communityPayments),r=(0,D.xJ)()||void 0;return W(e,t,r)}function z(e){let t=(0,a.v9)(e=>e.communityPayments);return(0,C.vu)(e)&&G(e,t)}function Z(e){let t=s.V&&s.V.getState().communityPayments,r=s.V&&s.V.getState().user||void 0;return W(e,t,r)}let Y="local-resource-payment";var j=((n=j||{}).PAID="PAID",n.UNPAID="UNPAID",n.NOT_SUPPORTED="NOT_SUPPORTED",n);function $(){return(0,u.gm)().get(Y)}function q(e){(0,u.gm)().set(Y,e)}function X(e){let t=(0,a.v9)(e=>e.communityPayments);if(e&&e.monetized_resource_metadata)return(null==t?void 0:t[e.monetized_resource_metadata.id])||e.community_resource_payment}function J(e){let t=(0,a.v9)(t=>(0,M.rw)(e,t.publishedPlugins)),r=X(t);return i.useMemo(()=>t?{...t,community_resource_payment:r}:t,[r,t])}function Q(e){let t=(0,w.DG)()[e],r=X(t);return i.useMemo(()=>t?{...t,community_resource_payment:r}:t,[r,t])}function ee(e){let t=(0,a.v9)(t=>t.publishedWidgets[e]),r=X(t);return i.useMemo(()=>t?{...t,community_resource_payment:r}:t,[r,t])}function et(e){let t=(0,w.dZ)()[e],r=X(t);return i.useMemo(()=>t?{...t,community_resource_payment:r}:t,[r,t])}function er({isWidget:e,id:t}){let r=(0,a.I0)(),n=i.useCallback(()=>{r(T.vq({id:t,isWidget:e}))},[r,t,e]);return i.useCallback(()=>{r(_.R.enqueue({message:e?(0,h.t)("community.buyer.paid_widgets_cannot_be_added_to_the_canvas_before_purchase"):(0,h.t)("community.buyer.paid_plugins_cannot_be_run_before_purchase"),error:!0,button:{text:(0,h.t)("community.buyer.buy"),action:n},type:e?"widget_requires_payment":"plugin_requires_payment"}))},[r,e,n])}function en(e){let t=X(e);return!!t&&(0,E.Gr)(t)}function ei(e){let t=X(e);return!!t&&(0,E.z2)(t,O.Cy.PENDING)}},667981:(e,t,r)=>{r.d(t,{Cy:()=>F,D9:()=>V,F3:()=>ec,H6:()=>N,KW:()=>W,OB:()=>B,Pp:()=>G,UH:()=>ed,Ud:()=>Z,Z1:()=>P,Zr:()=>K,_K:()=>el,aM:()=>k,cQ:()=>w,fU:()=>ei,g3:()=>A,jL:()=>H,ju:()=>U,k_:()=>I,l8:()=>T,m6:()=>ea,ml:()=>M,n2:()=>C,nu:()=>S,pG:()=>x,rp:()=>L,sJ:()=>O,u7:()=>R,uK:()=>es,uh:()=>z});var n,i=r(600486),a=r(5453),o=r(141757),l=r(269658),s=r(638237),c=r(615537),d=r(765745),u=r(31642),p=r(961215),m=r(699072),h=r(481508),_=r(166885),g=r(640634),f=r(166689),E=r(493866),y=r(269075);let v=e=>{let t=p.iTB.getDefaultStateForLocalStateGroup(e)||e,[r,n]=p.plG.generateThumbnailForNode(t,768,768,2,{});return n},b=Object.create(null),I=e=>{let t=v(e);return P(t)},T="FAILED_THUMBNAIL",w="LOADING_THUMBNAIL",S=e=>!(!e||e===T||e===w||e.startsWith("blob:")&&!b[e]),C=(e,t)=>{let[r,n]=p.plG.generateThumbnailFromStyleMaster(e,t,18,18,2);if(r&&r.status===w)return w;let i=P(n);return i||(console.error(`failed to generate thumbnail for node ${e}`),T)},O=(e,t)=>{let[r,n]=p.plG.generateThumbnailFromStyleConsumer(e,t,18,18),i=P(n);return i||(console.error(`failed to generate thumbnail for node ${e}`),T)},A=(e,t,r)=>{if(!(0,h.bV)(e))return{type:"INVALID"};let n=p.plG.generateSerializableThumbnailForStyle(t||"",e,r||""),i=n.length>0?d.f.decodeMessage(n):null,a=i&&i.nodeChanges&&i.nodeChanges[0]||null;return a?(0,h.MQ)(a,e):(console.error(`failed to generate serializable thumbnail for node ${t}`),{type:"INVALID"})};function N(e){return!!L(e)}function L(e){if("FILL"!==e.type)return null;let t=e.fillPaints;if(!t||1!==t.length)return null;let r=t[0];return"SOLID"!==r.type||null==r.color||null==r.opacity?null:{...r.color,a:r.opacity}}let P=e=>{if(e.length>0){let t=URL.createObjectURL(new Blob([e]));return b[t]=e,t}return null},R=e=>{let t=b[e];if(!t)throw Error(`No buffer in cache for thumbnail url ${e}`);return t},k=e=>{b[e]&&(URL.revokeObjectURL(e),delete b[e])},D=null;(()=>{if(!document)return;let e=document.createElement("canvas");e.width=1,e.height=1,e.toBlob&&e.toBlob(e=>{let t=new FileReader;t.onload=()=>{let e=t.result;D=P(new Uint8Array(e))},t.readAsArrayBuffer(e)},"image/png")})();let M=()=>D,F=e=>{let t=e=>{let t=e.toFixed(1);return"0"===t.slice(-1)?e.toFixed(0):t};if(!(e.metrics&&e.metrics.fontSize&&e.metrics.lineHeight))return"";let r=t(e.metrics.fontSize),n=" \xb7 "+r+"/",i=e.metrics.lineHeight;return"PERCENT"===i.units&&100===i.value?n+"Auto":"RAW"===i.units?n+t(100*i.value):n+t(i.value)},x=e=>{let[t,r]=p.Ekn.generatePublishableBufferForStyleOrSymbol(e);return{buffer:r,version:null==t?void 0:t.version}},U=e=>{let[t,r]=p.Ekn.generatePublishableBufferForVariableSet(e);return{buffer:r,version:null==t?void 0:t.version}};function B(e){let t=Object.keys(e).map(t=>e[t]).filter(e=>!e.unpublished_at);return(0,a.aV)(t,"name"),t}let V=(0,E.t)(e=>e===_.mk.CURRENT||e===_.mk.CHANGED||e===_.mk.DELETED),G=(0,c.ws)(e=>{let t={};return Object.keys(e).forEach(r=>{t[r]={},Object.keys(e[r]).forEach(n=>{t[r][n]=H(e[r][n])})}),t}),H=e=>{var t;let r={};for(let n in e){let i=e[n];(null==(t=i.containing_frame)?void 0:t.containingStateGroup)==null&&(r[n]={...i})}return r},W=(0,c.ws)(e=>{let t=H(e.local.components);for(let r in e.local.stateGroups)t[r]=e.local.stateGroups[r];return t}),K=e=>(0,m.$N)(e).join("/"),z=(e,t)=>{var r,n;let i=t.some(t=>{var r,n,i,a;return(null==(r=t.containing_frame)?void 0:r.pageId)===(null==(n=e.containing_frame)?void 0:n.pageId)&&(null==(i=t.containing_frame)?void 0:i.nodeId)!==(null==(a=e.containing_frame)?void 0:a.nodeId)}),a=[];i&&(null==(n=null==(r=e.containing_frame)?void 0:r.name)?void 0:n.trim().length)&&a.push(e.containing_frame.name);let o=(0,m.$N)(e.name).map(e=>e.trim()).filter(e=>""!==e);return o.pop(),a.push(...o),a},Z=(e,t)=>{var r,n,i,a;let o=z(e,t),l=t.some(t=>{var r,n,i,a;return(null==(n=null==(r=t.containing_frame)?void 0:r.pageName)?void 0:n.trim())!==(null==(a=null==(i=e.containing_frame)?void 0:i.pageName)?void 0:a.trim())});return l&&(null==(n=null==(r=e.containing_frame)?void 0:r.pageName)?void 0:n.trim().length)&&o.unshift(null==(a=null==(i=e.containing_frame)?void 0:i.pageName)?void 0:a.trim()),o};async function Y(e,t){return await X(e,t,_.h3.COMPONENT)}async function j(e,t){return await X(e,t,_.h3.STATE_GROUP)}async function $(e,t){return await X(e,t,_.h3.VARIABLE)}async function q(e,t){return await X(e,t,_.h3.VARIABLE_SET)}async function X(e,t,r){let n="",i="";switch(r){case _.h3.VARIABLE:n="/api/variable_log_data",i="variables";break;case _.h3.VARIABLE_SET:n="/api/variable_set_log_data",i="variable_sets";break;case _.h3.STATE_GROUP:n="/api/state_group_log_data",i="state_groups";break;case _.h3.COMPONENT:n="/api/component_log_data",i="components"}let a=[],o=await u.ZP.post(n,{[i]:e,fv:t.toString()}),l=o.data.meta[i];if(l.length<e.length)for(let t of e)(r===_.h3.COMPONENT?l.find(e=>e.component_key===t.key&&e.content_hash===t.version):l.find(e=>e.key===t.key&&e.version===t.version))||console.error(`Asset data for ${r} key ${t.key} version ${t.version} is missing. Does the user have proper access to the asset?`);for(let e of l)r!==_.h3.VARIABLE_OVERRIDE&&(e.type=r,e.canvas_url&&0!==e.canvas_url.length?a.push(e):e.type===_.h3.COMPONENT?console.error(`Canvas URL missing from ${r} ${e.component_key} version ${e.content_hash}.`):console.error(`Canvas URL missing from ${r} ${e.key} version ${e.version}.`));return a}function J(e){let t=e&&e.status;return Number.isInteger(t)&&t>=0?t:-1}function Q(e){let t=J(e);return t>=400&&t<500}let ee=e=>{let t=function(e,t){let r=e&&e.data&&e.data.message;return"string"==typeof r&&r.length>0?r:t}(e,"please try again later"),r=J(e);return r>0?t+=` (status ${e.data.status})`:0===r&&(t+=" (must be online)"),t};function et(e){switch(e.type){case _.h3.COMPONENT:return`component/${e.component_key}/${e.content_hash}`;case _.h3.STATE_GROUP:return`state_groups/${e.key}/${e.version}`;case _.h3.VARIABLE:case _.h3.VARIABLE_SET:return`variable_set/${e.key}/${e.version}`;case _.h3.MODULE:return`module/${e.key}/${e.version}`}}var er=((n=er||{}).PERMANENT_ERROR="permanent-error",n.TRANSIENT_ERROR="transient-error",n.UPSERT_SHARED_SYMBOL_ERROR="shared-symbol-error",n.UPSERT_SHARED_STATE_GROUP_ERROR="shared-state-group-error",n.UPSERT_SHARED_VARIABLE_SET_ERROR="shared-variable-set-error",n.UPSERT_SHARED_VARIABLE_ERROR="shared-variable-error",n.UPSERT_SHARED_MODULE_ERROR="shared-module-error",n.UNCAUGHT_ERROR="uncaught-error",n.SUCCESS="success",n);async function en(e,t,r){try{let n;try{n=await es.getCanvas({canvas_url:function(e,t){switch(e.type){case _.h3.COMPONENT:return e.canvas_url+"&fv="+t.toString();case _.h3.STATE_GROUP:return`/state_group/${e.key}/version/${e.version}/canvas?fv=${t}`;case _.h3.VARIABLE:case _.h3.VARIABLE_SET:case _.h3.MODULE:return e.canvas_url}}(e,t)})}catch(t){if(Q(t))return console.warn("Permanent error",t,"status",J(t),"for entry",et(e)),{resultType:"permanent-error"};return console.warn("Transient error",t,"status",J(t),"for entry",et(e)),{resultType:"transient-error",transientError:t}}let i=y.y2.system("upsert-asset-from-log",()=>(function(e,t,r){let n,i;switch(e.type){case _.h3.COMPONENT:n=p.Ekn.upsertSharedSymbol(e.component_key,e.content_hash,e.file_key,t,r,p.Glg.ACTIVE_SCENE),i="shared-symbol-error";break;case _.h3.STATE_GROUP:n=p.Ekn.upsertSharedStateGroup(e.key,e.version,e.file_key,t,r,p.Glg.ACTIVE_SCENE),i="shared-state-group-error";break;case _.h3.VARIABLE:n=p.Ekn.upsertSharedVariable(g.c_(e.key,e.version),t,r),i="shared-variable-error";break;case _.h3.VARIABLE_SET:n=p.Ekn.upsertSharedVariableSet(f.c_(e.key,e.version),t,r),i="shared-variable-set-error";break;case _.h3.MODULE:n=void 0,i="shared-module-error"}if(!n||n.fileUpdateRequired)return i;if(!n.localGUID){if(e.type===_.h3.COMPONENT)return console.error(`Couldn't upsert shared component in scene for key ${e.component_key} version ${e.content_hash}.`),i;if(e.type===_.h3.STATE_GROUP)return console.error(`Couldn't upsert shared state group in scene for key ${e.key} version ${e.version}.`),i}return"success"})(e,r,n));return{resultType:i,bytesAdded:n.byteLength}}catch(t){return console.error("Uncaught error",t,"during buffer processing of",et(e)),{resultType:"uncaught-error"}}}let ei=async(e,t,r,n,a)=>{try{let e;let o=Date.now(),l=0,s={"permanent-error":0,"transient-error":0,"shared-symbol-error":0,"shared-state-group-error":0,"uncaught-error":0,success:0,"shared-variable-error":0,"shared-variable-set-error":0,"shared-module-error":0},c=-1,d=[];if(t.length>0)try{d=await Y(t,a)}catch(t){Q(t)?s["permanent-error"]++:(s["transient-error"]++,e=t),c=J(t),d=[]}for(let t of d){let{resultType:r,bytesAdded:i,transientError:o}=await en(t,a,n);s[r]++,l+=i??0,o&&(e=o)}let u=[];if(r.length>0)try{u=await j(r,a)}catch(t){Q(t)?s["permanent-error"]++:(s["transient-error"]++,e=t),c=J(t),u=[]}for(let t of u){let{resultType:r,bytesAdded:i,transientError:o}=await en(t,a,n);s[r]++,l+=i??0,o&&(e=o)}if((0,i.L9)("publishing_buffer_fetch",{latency:Date.now()-o,num_versions_fetched:d.length+u.length,num_success:s.success,total_bytes:l,failed_to_upsert_in_scene:s["shared-symbol-error"]+s["shared-state-group-error"],permanent_errors:s["permanent-error"],transient_errors:s["transient-error"],uncaught_errors:s["uncaught-error"],log_data_error_status:c}),s["transient-error"]>0)return Promise.reject(Error(ee(e)));return Promise.resolve(!0)}catch(e){return Promise.reject(Error(ee(e)))}},ea=async(e,t,r,n)=>{try{let a;let o=Date.now(),l=0,s={"permanent-error":0,"transient-error":0,"shared-variable-error":0,"shared-variable-set-error":0,"uncaught-error":0,success:0,"shared-symbol-error":0,"shared-state-group-error":0,"shared-module-error":0},c=-1,d=[];if(e.length>0)try{d=await q(e,n)}catch(e){Q(e)?s["permanent-error"]++:(s["transient-error"]++,a=e),c=J(e),d=[]}for(let e of d){let{resultType:t,bytesAdded:i,transientError:o}=await en(e,n,r);s[t]++,l+=i??0,o&&(a=o)}let u=[];if(t.length>0)try{u=await $(t,n)}catch(e){Q(e)?s["permanent-error"]++:(s["transient-error"]++,a=e),c=J(e),u=[]}for(let e of u){let{resultType:t,bytesAdded:i,transientError:o}=await en(e,n,r);s[t]++,l+=i??0,o&&(a=o)}if((0,i.L9)("variable_publishing_buffer_fetch",{latency:Date.now()-o,num_versions_fetched:d.length+u.length,num_success:s.success,total_bytes:l,failed_to_upsert_in_scene:s["shared-variable-set-error"]+s["shared-variable-error"],permanent_errors:s["permanent-error"],transient_errors:s["transient-error"],uncaught_errors:s["uncaught-error"],log_data_error_status:c}),s["transient-error"]>0)return Promise.reject(Error(ee(a)));return Promise.resolve(!0)}catch(e){return Promise.reject(Error(ee(e)))}},eo=class{constructor(){this.canvasCache=Object.create(null),this.canvasRequestsInFlight=Object.create(null),this.thumbnailCache=new s.z(eo.MAX_VARIABLE_SET_THUMBNAILS),this.thumbnailRequestsInFlight=Object.create(null),this.getCanvas=({canvas_url:e})=>{if(!e)return Promise.reject(Error("No canvas URL"));let t=eo.augmentUrlWithFileVersion(e);if(t in this.canvasCache)return Promise.resolve(this.canvasCache[t]);if(t in this.canvasRequestsInFlight)return this.canvasRequestsInFlight[t];{let e=(0,u._e)(t,null,{responseType:"arraybuffer"}).then(({data:e})=>(this.canvasCache[t]=e,e)).catch(e=>{throw console.warn("Team library cache error on get() with status",J(e),"with error",e),e}).finally(()=>{delete this.canvasRequestsInFlight[t]});return this.canvasRequestsInFlight[t]=e,e}},this.getVariableSetThumbnails=e=>{if(!e)return Promise.reject(Error("No canvas URL"));if(this.thumbnailCache.has(e))return Promise.resolve(this.thumbnailCache.get(e));if(e in this.thumbnailRequestsInFlight)return this.thumbnailRequestsInFlight[e];{let t=(0,u._e)(e,null,{responseType:"arraybuffer"}).then(({data:t})=>{let r=new TextDecoder("utf-8"),n=function(e){let t={};for(let r of Object.keys(e)){let n=f.mL(r);n?t[f.BB(n)]=e[r]:console.error(`Received invalid collection ID in thumbnails response: ${r}`)}return t}(JSON.parse(r.decode(t)));return this.thumbnailCache.set(e,n),n}).catch(e=>{throw console.warn("Team library cache error on get() with status",J(e),"with error",e),e}).finally(()=>{delete this.thumbnailRequestsInFlight[e]});return this.thumbnailRequestsInFlight[e]=t,t}},this.putCanvas=(e,t)=>{this.canvasCache[e]=t},this.hasKeyInCache=e=>e in this.canvasCache||this.thumbnailCache.has(e),this.clearCache=()=>{this.canvasCache=Object.create(null),this.thumbnailCache.reset(),this.canvasRequestsInFlight=Object.create(null),this.thumbnailRequestsInFlight=Object.create(null)},this.getCacheValueOrNull=e=>this.thumbnailCache.get(e)??null,this.clearCache()}},el=eo;el.MAX_VARIABLE_SET_THUMBNAILS=20,el.augmentUrlWithFileVersion=e=>{var t;let r=new URL(e,location.origin),n=(null==(t=l.V)?void 0:t.getState().fileVersion)||0;return r.searchParams.set("fv",n.toString()),r.toString()};let es=new el,ec=(e,t=null)=>{var r;let n;if(e.type===_.h3.COMPONENT&&(null==(r=e.containing_frame)?void 0:r.backgroundColor))n=e.containing_frame.backgroundColor;else if(e.type===_.h3.STATE_GROUP&&e.fill_color)n=e.fill_color;else{if(!t)return null;n=t}let i=(0,o.lu)(n);return i&&0!==i.a?(0,o.uK)(i,1):null},ed=e=>{let t=null;return e.every(e=>{if(null===t)t=e.file_key;else if(t!==e.file_key)return t=null,!1;return!0}),t}},161895:(e,t,r)=>{r.d(t,{Pn:()=>u,ZP:()=>d,oy:()=>c,yB:()=>a.U});var n,i=r(761989),a=r(757848),o=r(579592),l=((n=l||{})[n.STARTING=0]="STARTING",n[n.FRONTMATTER=1]="FRONTMATTER",n[n.BODY=2]="BODY",n[n.FOOTER=3]="FOOTER",n);class s{constructor(e){this.onParse=e,this.state=0,this.buffer="",this.cursor=0}parseLine(e){if(e.startsWith("# ")){let t=e.slice(2),r=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return{type:"h1",content:r}}return e.startsWith("## ")?{type:"h2",content:e.slice(3)}:e.startsWith("### ")?{type:"h2",content:e.slice(4)}:e.startsWith("- ")?{type:"li",content:e.slice(2)}:{type:"p",content:e}}feed(e){this.buffer+=e;let t=e=>{this.buffer=this.buffer.slice(e),this.cursor+=e};for(;this.buffer.length>0;){let e=this.buffer.indexOf("\n");if(0===this.state){if(-1===e)return;let r=this.buffer.slice(0,e);r===o.EU&&(this.state=1),t(e+1)}else if(1===this.state){if(-1===e)return;let r=this.buffer.slice(0,e);r.startsWith(o.Qx)&&(this.state=2),t(e+1)}else if(2===this.state){if(this.buffer.startsWith(o.l4)){this.state=3;return}if(-1===e){if(this.buffer.length>=4){let e=this.parseLine(this.buffer);this.onParse(e,this.cursor)}return}{let r=this.buffer.slice(0,e);r.length>0&&this.onParse(this.parseLine(r),this.cursor),t(e+1)}}else if(3===this.state)return}}}function c(){let e,t;let r=[];return new TransformStream({start(n){e=new s((e,i)=>{(null==t?void 0:t.start)===i?r[r.length-1]=e:(r.push(e),t={start:i,primitive:e}),n.enqueue([...r])})},transform(t,r){e.feed(t.delta)}})}let d=i.ZP;class u{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let t=e.read(),{done:r,value:n}=await t;if(r)break;yield n}}finally{e.releaseLock()}}}},484893:(e,t,r)=>{r.d(t,{CV:()=>o,qL:()=>l,qs:()=>c});var n=r(337167),i=r(571529),a=r(451573);let o=(0,n.cn)(null),l=(0,n.w0)([],(e,t)=>{switch(t.type){case"mount":return[...e,null==t?void 0:t.uniqueOverlayId];case"unmount":return e.filter(e=>e!==(null==t?void 0:t.uniqueOverlayId))}}),s=(0,a.cg)(e=>{var t,r,n;return!i.ZP.mobile||(null==(t=e.responsiveContent.sequence)?void 0:t.showOnMobile)?null==(n=null==(r=e.responsiveContent.sequence)?void 0:r.steps[0])?void 0:n.trackingContextName:void 0}),c=(0,n.cn)(e=>{let t=e(o),r=e(s);return t??r})},815088:(e,t,r)=>{r.d(t,{B6:()=>g,NO:()=>c,OB:()=>d,_p:()=>h,zh:()=>p});var n=r(337167),i=r(622003),a=r(200273),o=r(451573),l=r(935086),s=r(536562);let c=(0,o.cg)(e=>e.multiplayer.allUsers),d=(0,n.cn)(e=>{let t=e(i.LF),r=e(c);if(t&&0!==r.length)return r.filter(e=>e.userID!==t.id)}),u=(0,o.cg)(e=>e.multiplayer.deviceNameFilter),p=(0,n.cn)(e=>{let t=e(c),r=e(u),n=e(a.Up);return null!=n&&null!=r&&new Set(t.filter(e=>e.deviceName===r).map(e=>e.userID)).size>1}),m=(0,s.n_)("seen_spotlight_hint"),h=(0,l.xM)(m,(e,t)=>{let r=t(c),n=t(u),i=t(_);if(i)return!1;let a=r.filter(e=>e.deviceName===n),o=Math.max(...Object.values(a).map(e=>e.joinedAtS)),l=o-300,s=new Set;for(let e of a)e.joinedAtS>=l&&s.add(e.userID);return!(s.size<5)&&!e}),_=(0,o.cg)(e=>{let t="fullscreen"===e.selectedView.view&&!e.mirror.appModel.showUi,r="prototype"===e.selectedView.view&&e.selectedView.hideUI;return t||r}),g=(0,o.cg)(e=>{let t="fullscreen"===e.selectedView.view&&e.mirror.appModel.showUi,r="prototype"===e.selectedView.view&&!e.selectedView.hideUI;return t||r})},590245:(e,t,r)=>{r.d(t,{IZ:()=>g,LP:()=>T,PI:()=>E,QL:()=>A,TB:()=>C,Tv:()=>f,di:()=>I,kq:()=>S,ls:()=>O,sb:()=>v,vd:()=>N});var n=r(337167),i=r(448694),a=r(882562),o=r(200273),l=r(451573),s=r(898080),c=r(881835),d=r(996068),u=r(676973),p=r(935086),m=r(964886),h=r(685056),_=r(536562);let g=(0,p.xM)(h.GW,(e,t)=>{let r=t(o.Up);if(null==r||null==e)return!1;let n=e.map(e=>e.team).find(e=>null!=e&&e.id===r.teamId);return null!=n&&c.pl.getProTrialStatus({grace_period_end:n.gracePeriodEnd?n.gracePeriodEnd.toISOString():null,grace_period_type:n.gracePeriodType})===u.Y.IN_TRIAL}),f=(0,p.Lb)([h.OU],([e],t)=>{let r=t(o.Up),n=t(m.dd),i=n?null:e;if(!r||!i)return!1;let a=!r.teamId&&!r.parentOrgId&&r.folderId===i;return a}),E=(0,l.cg)(({openFile:e})=>{let t=(null==e?void 0:e.parentOrgId)!=null,r=(null==e?void 0:e.team)==null;return t&&r}),y=(0,l.cg)(({progressBarState:e})=>(0,a.M)(null==e?void 0:e.mode)),v=(0,n.cn)(e=>new Promise(t=>{let r=e(y);r||t(!1)})),b=(0,_.n_)("editor_onboarded"),I=(0,_.n_)("figjam_editor_onboarded"),T=(0,p.Lb)([b,I],([e,t],r)=>{let n=r(o.Up),i=null==n?void 0:n.editorType;return"design"===i?e:"whiteboard"===i&&t}),w=(0,p.xM)(h.f3,(e,t)=>{let r=t(o.Up);return(null==r?void 0:r.teamId)?null==e?void 0:e.find(e=>e.id===(null==r?void 0:r.teamId)):null}),S=(0,p.Lb)([m.Z2,w],([e,t],r)=>{var n;let i=r(o.Up),a=(null==i?void 0:i.parentOrgId)?e[i.parentOrgId]:null,l=t?{id:t.id,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:(null==(n=t.gracePeriodEnd)?void 0:n.toDateString())||null}:null;return(0,d.ow)({editorType:(null==i?void 0:i.editorType)??null,org:a,team:l})}),C=(0,l.cg)(({openFile:e})=>(null==e?void 0:e.showEditButton)??!1),O=(0,n.cn)(e=>{var t;let r=e(o.Up);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,s.e3)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:(null==(t=n.gracePeriodEnd)?void 0:t.toISOString())??null})}),A=(0,n.cn)(e=>{let t=e(o.Up);return(null==t?void 0:t.canEdit)??!1});(0,n.cn)(e=>{let t=e(o.Up);return(null==t?void 0:t.editorType)!=null?(0,i.tx)({editorType:t.editorType}):null});let N=(0,p.xM)(m.Z2,(e,t)=>{var r;let n=t(o.Up);return!!n&&"whiteboard"===n.editorType&&!!n.parentOrgId&&!!(null==(r=e[n.parentOrgId])?void 0:r.figjamDisabledAt)})},964886:(e,t,r)=>{r.d(t,{F$:()=>E,Z2:()=>p,dd:()=>m,j9:()=>f,lX:()=>h,oh:()=>g,vG:()=>u});var n=r(337167),i=r(451573),a=r(971237),o=r(761767),l=r(862610),s=r(801998),c=r(520531),d=r(935086);let u=(0,d.xM)((0,l.UserForRcs)({}),e=>e.currentUser.orgUsers),p=(0,d.xM)(u,e=>{let t=null==e?void 0:e.map(e=>e.org);if(void 0===t)return{};let r={};for(let e of t)null!=e&&(r[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return r}),m=(0,i.cg)(e=>e.currentUserOrgId),h=(0,d.Lb)([p],([e],t)=>{let r=t(m);return null!=r?e[r]:null}),_=(0,i.cg)(e=>e.orgById),g=(0,n.xu)(e=>(0,d.xM)((0,l.OrgHasWorkspacesView)({orgId:e}),e=>{var t,r,n;return!!(null==(r=null==(t=e.org)?void 0:t.workspaces)?void 0:r.length)&&!!(null==(n=e.org)?void 0:n.bigmaEnabledAt)})),f=(0,d.Lb)([h,u,c.l],([e,t,r],n)=>{if(!e)return!1;let i=n(_),l=i[e.id];if(!(0,a.zj)(l)||(0,s.Eq)(l.id)||!l.license_group_nux_active_at)return!1;let c=null==t?void 0:t.find(t=>t.orgId===e.id&&t.userId===r);return(!c||c.permission!==o.Gu.GUEST)&&(!c||!c.licenseGroupMember)}),E=(0,d.Lb)([h,u,c.l],([e,t,r],n)=>{if(!e)return!1;let i=n(_),a=i[e.id];if(!a.bigma_enabled||!(0,s.Eq)(a.id)||!a.workspaces_nux_active_at)return!1;let l=null==t?void 0:t.find(t=>t.orgId===e.id&&t.userId===r);return!!l&&l.permission!==o.Gu.GUEST})},1085:(e,t,r)=>{r.d(t,{h:()=>l,q:()=>s});var n=r(761767),i=r(898080),a=r(935086),o=r(685056);let l=(0,a.xM)(o.f3,e=>(e??[]).some(e=>null!=e&&!(0,i.e3)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit)),s=(0,a.xM)(o.f3,e=>(e??[]).filter(e=>null!=e&&e.subscription===n.Qe.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},685056:(e,t,r)=>{r.d(t,{$e:()=>_,Ep:()=>M,GW:()=>b,JT:()=>g,Lv:()=>v,O1:()=>S,OU:()=>E,Ss:()=>D,T3:()=>A,Yq:()=>O,ZM:()=>f,f3:()=>I,fI:()=>y,ke:()=>R,uv:()=>N,vL:()=>P,zW:()=>C});var n=r(220518),i=r(716250),a=r(337167),o=r(11802),l=r(451573),s=r(862610),c=r(898080),d=r(157330),u=r(532444),p=r(652309),m=r(935086),h=r(964886);let _=(0,m.Lb)([(0,s.UserForRcs)({}),h.lX],([e,t])=>null!=e.currentUser.id&&(null==t?void 0:t.canRead)?u.FQ.ORG:u.FQ.PERSONAL),g=(0,m.xM)((0,s.UserForRcs)({}),e=>e.currentUser.createdAt),f=(0,m.xM)(g,e=>e.getTime()<=Date.now()-12096e5),E=(0,m.Lb)([h.vG,(0,s.UserForRcs)({})],([e,t],r)=>{let n=r(h.dd);if(!n)return t.currentUser.draftsFolderId;{let t=null==e?void 0:e.find(e=>e.orgId===n);return(null==t?void 0:t.draftsFolderId)||null}});(0,m.xM)((0,s.UserForRcs)({}),e=>{let t=e.currentUser.email;return(0,n.JE)(t)||!!(null==t?void 0:t.endsWith("@dev.figma.com"))});let y=(0,m.xM)((0,s.UserForRcs)({}),e=>null!=e.currentUser.studentValidatedAt),v=(0,m.xM)((0,s.EduOffboardingData)({}),e=>e.currentUser.eduPeriodEnd),b=(0,m.xM)((0,s.UserForRcs)({}),e=>e.currentUser.teamRoles),I=(0,m.xM)(b,e=>null==e?void 0:e.map(e=>e.team).filter(e=>null!=e)),T=(0,l.cg)(e=>e.isFreeUser),w=(0,m.Lb)([h.vG,I],([e,t])=>{let r=null!=e&&!!e.length&&e.length>0;if(r)return!1;if(null==t)return!0;let n=t.some(e=>e.canEdit&&(0,c.e3)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null}));return!n}),S=(0,m.xM)(w,(e,t)=>(0,i.BZ)().ps_benchmark?t(T):e),C=(0,m.xM)(h.vG,e=>null!=e&&!!e.length&&e.length>0),O=(0,m.xM)((0,s.UserForRcs)({}),e=>{let t=e.currentUser.email;return null!=t?(0,n._E)(t):void 0}),A=(0,m.xM)((0,s.UserForRcs)({}),e=>{var t;return null==(t=e.currentUser.profile)?void 0:t.jobTitle}),N=(0,m.xM)((0,s.UserForRcs)({}),e=>{var t;return null==(t=e.currentUser.profile)?void 0:t.usagePurpose}),L=(0,l.cg)(e=>e.authedProfilesById),P=(0,a.cn)(e=>{let t=e(L);return Object.values(t).some(e=>!!e.org_id||!!e.team_id)});(0,m.xM)((0,s.UserForRcs)({}),e=>e.currentUser.email);let R=(0,m.xM)((0,s.UserForRcs)({}),e=>e.currentUser.emailValidatedAt),k=(0,l.cg)(e=>e.userAnalyticsData),D=(0,a.xu)(e=>(0,a.kv)(k,t=>{if(null==t)return;let r=t[e];return d.Wk.includes(e)&&r?new Date(r):r}));(0,m.xM)((0,s.UserForRcs)({}),e=>{let t=(0,p.GQ)(e);return(0,o.V3)(e.currentUser.id)&&!(0,p.aS)(t,"in_simulated_use_cases_exp")});let M=(0,m.Lb)([(0,s.UserForRcs)({}),h.lX],([e,t])=>{let r="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&r&&(null==t?void 0:t.id)!==r)})},536562:(e,t,r)=>{r.d(t,{OD:()=>s,PW:()=>l,e8:()=>d,k9:()=>p,n_:()=>u});var n=r(337167),i=r(862610),a=r(229273),o=r(935086);let l=(0,o.xM)((0,i.UserForRcs)({}),e=>{let t=e.currentUser.userFlags,r=t.reduce((e,t)=>({...e,[t.name]:t}),{});return r}),s=(0,n.xu)(e=>(0,o.xM)(l,t=>t[e])),c=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0,d=(0,o.xM)(l,e=>{let t=Array.from(a.pP).map(t=>{var r;return null==(r=e[t])?void 0:r.updatedAt}).filter(e=>null!=e);return c(t)}),u=(0,n.xu)(e=>(0,o.xM)(l,t=>null!=t[e])),p=u("file_browser_onboarded")},652309:(e,t,r)=>{r.d(t,{GQ:()=>a,K5:()=>o,Ur:()=>l,XM:()=>d,aS:()=>s,dm:()=>c});var n=r(716250),i=r(761767);function a(e){let t=e.currentUser.userFlags,r=t.reduce((e,t)=>(e[t.name]=t,e),{});return r||{}}function o(e,t){var r;let n=null==(r=e[t])?void 0:r.updatedAt;if(!n)return!1;let i=Date.now()-864e5;return n.getTime()>i}function l(e){return e.signed_up_from_figjam_jamboard||e.signed_up_from_figjam_page?i.gg.WHITEBOARD:e.signed_up_from_figma_page?i.gg.DESIGN:e.signed_up_from_community?"community":void 0}function s(e,t){return!!e[t]}function c(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}function d(e){let t=l(e),r=!!e.signed_up_from_figjam_jamboard&&!!(0,n.BZ)().figjam_3p_file_importer;return!r&&("whiteboard"===t||"community"===t)}r(676973),r(229273),r(532444),r(898080),r(881835),r(996068)},494104:(e,t,r)=>{r.d(t,{C8:()=>i,Ri:()=>a,Vl:()=>o,rH:()=>l});var n=r(570441);function i(e){let t=new Map,r=new Map;for(let{id:n,...i}of e.states){if(t.has(n))throw Error(`Duplicate state ID ${n.toString()} found when building state machine`);if(t.set(n,i),null==i.transitions)continue;let e=new Map;for(let{event:t,...a}of(r.set(n,e),i.transitions)){let r=e.get(t);null==r&&(r=[],e.set(t,r)),null==r||r.push(a)}}return{config:e,isComplete(e){let r=t.get(e);return(null==r?void 0:r.terminal)??!1},isInitial:t=>t===e.initial,start:()=>e.initial,transition(e,t){var n;let i=null==(n=r.get(e))?void 0:n.get(t.id);if(null==i)return null;for(let r of i)if(null==r.condition||r.condition({from:e,to:r.target,event:t}))return r.target;return null}}}function a(e){var t;let r=new Set;for(let i of e.config.states)if(null!=i.transitions)for(let e of i.transitions){if(e.event!==n.e||(null==(t=e.meta)?void 0:t.userEvents)==null)continue;let i=e.meta.userEvents;i.forEach(e=>r.add(e))}return r}function o(e,t,r){return{event:e,target:t,condition:null==r?void 0:r.condition,meta:null==r?void 0:r.meta}}function l(e,t,r){let i=new Set("string"==typeof e?[e]:e),a={userEvents:[...i]};return o(n.e,t,{condition:e=>{var t;return i.has(e.event.type)&&((null==(t=null==r?void 0:r.condition)?void 0:t.call(r,e))??!0)},meta:a})}},270128:(e,t,r)=>{r.d(t,{CO:()=>u,eO:()=>c,pn:()=>d});var n=r(652983),i=r(337167),a=r(864681),o=r(494104),l=r(570441),s=r(222785);function c({_atom:e,machine:t}){let[{currentState:r,lastEvent:a,previousState:o},l]=(0,i.KO)(e),s=t.isComplete(r);return(0,n.useMemo)(()=>({completed:s,currentState:r,lastEvent:a,previousState:o,reset:l}),[s,r,a,o,l])}function d(e){let[{currentState:t,lastEvent:r,previousState:c},d]=(0,n.useState)({currentState:e.start(),lastEvent:null,previousState:null}),u=(0,i.Dv)(a.h),p=e.isComplete(t),m=(0,n.useCallback)(()=>{d({currentState:e.start(),lastEvent:null,previousState:null})},[e,d]),h=(0,n.useCallback)(t=>{d(r=>{let n=e.transition(r.currentState,t);return null!=n?{currentState:n,lastEvent:t,previousState:r.currentState}:r})},[e,d]);return(0,n.useEffect)(()=>{let t=(0,o.Ri)(e);if(0===t.size)return;let r=({id:e,properties:r})=>{if(!(0,s.Ec)(e,t))return;let n={id:l.e,type:e,properties:r??{}};h(n)};return(0,s.vF)(u,t,r),()=>(0,s.JK)(u,t,r)},[e,d,h,u]),(0,n.useMemo)(()=>({completed:p,currentState:t,lastEvent:r,previousState:c,reset:m,transition:h}),[p,t,r,c,m,h])}function u(e,t){let r=(0,n.useRef)(null),{currentState:i,lastEvent:a,previousState:o}=e;(0,n.useEffect)(()=>{r.current!==a&&(r.current=a,null!=a&&null!=o&&t({event:a,from:o,to:i}))},[i,a,o,t])}},983635:(e,t,r)=>{r.d(t,{D7:()=>a,Ew:()=>s,RK:()=>d,eb:()=>o,tw:()=>l});var n=r(337167),i=r(437059);function a(){(0,n.Dv)(i.zV),(0,n.Dv)(i.e0)}function o(e,t){let r=c(t);return!!e&&r.has(e)}function l(e){let t=(0,n.Dv)(i.e0);return!!e&&t.has(e)}function s(e,t){let r=o(e,t),n=l(e);return r||n}function c(e){return(0,n.Dv)(e?i.nr:i.zx)}function d(e){let t=c(e),r=(0,n.Dv)(i.e0);return{workspaceApprovedLibraryKeys:t,orgApprovedLibraryKeys:r}}},571713:(e,t,r)=>{r.d(t,{Sc:()=>_,XG:()=>f,g8:()=>E,sK:()=>y,x4:()=>g});var n=r(652983),i=r(87608),a=r.n(i),o=r(337167),l=r(435613),s=r(212984),c=r(322186),d=r(983635),u=r(615675),p=r(437059),m=r(306801);let h=r(317828),_=16;function g({isInFullscreenMenu:e,isInLibrarySubtree:t,orgNameForTooltip:r,workspaceNameForTooltip:i,tooltipDelay:o=250,tooltipLocation:s="above",variant:c}){let d=r||i?(0,u.B9)({orgName:r,workspaceName:i,tooltipLocation:s,tooltipDelay:o}):{};return n.createElement(l.n,{className:a()("secondary"===c?m.BX:m.qv,e?m.A_:void 0,t?m.mJ:void 0),svg:h,...d})}function f(e){let t=(0,o.Dv)(p.zV),r=(0,c.Ng)(),i=(0,d.tw)(e.fileKey);return n.createElement(g,{...e,orgNameForTooltip:i?null==r?void 0:r.name:void 0,workspaceNameForTooltip:null==t?void 0:t.name})}function E(e){let t=(0,o.Dv)(p.iN),r=(0,c.Ng)(),i=(0,d.tw)(e.fileKey);return n.createElement(g,{...e,orgNameForTooltip:i?null==r?void 0:r.name:void 0,workspaceNameForTooltip:null==t?void 0:t.name})}function y(){return n.createElement("div",{className:s.cx.pr8.$},n.createElement(g,{isInFullscreenMenu:!0}))}},615675:(e,t,r)=>{r.d(t,{B9:()=>g,NV:()=>m,Vw:()=>p,Y5:()=>f,dD:()=>v,hM:()=>E,v8:()=>y});var n=r(690741),i=r(172497),a=r(337167),o=r(458721),l=r(225468),s=r(112088),c=r(437059),d=r(332224);let u=(0,i.F)(d.hkg);function p({libraries:e,approvedLibraryKeysByResourceType:t,currentTeamId:r=null,shouldSortByTeam:n=!1}){e.sort((e,i)=>m({libraryA:e,libraryB:i,approvedLibraryKeysByResourceType:t,currentTeamId:r,shouldSortByTeam:n}))}function m({libraryA:e,libraryB:t,approvedLibraryKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:i=!1}){let{workspaceApprovedLibraryKeys:a,orgApprovedLibraryKeys:l}=r;if(i&&"file"in e&&"file"in t&&e.team_id!==t.team_id)return(0,s.Hr)(e,t,n);let c=h(e),d=h(t),u=l.has(c)?1:0,p=l.has(d)?1:0;if(u!==p)return p-u;let m=a.has(c)?1:0,g=a.has(d)?1:0;return m!==g?g-m:o.s.LEXICOGRAPHICALLY(_(e),_(t))}function h(e){return"key"in e?e.key:e.library_file_key}function _(e){return"name"in e?e.name:e.library_file_name}function g({orgName:e,workspaceName:t,tooltipLocation:r,tooltipDelay:n}){let i=e??t;if(!i)return{};let a=function(e){try{if(e){let t=function(e){let t=document.createElement("span");t.textContent=e,t.style.visibility="hidden",t.style.fontWeight="bold",t.style.display="inline-block",document.body.appendChild(t);let r=t.offsetWidth;return document.body.removeChild(t),r}(e);if(t){if(t>u)return u;if(t>u/2)return Math.max(116,t);return 116}}}catch(e){console.error(e)}return u}(i);return{"data-tooltip-type":l.fR.SPECIAL,"data-tooltip":l._7.APPROVED_LIBRARY,..."below"===r?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...n?{"data-tooltip-timeout-delay":n}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":a,"data-tooltip-workspace-name":t,"data-tooltip-org-name":e}}function f(e,t){return e.find(e=>e.resourceType===n.y.Workspace&&e.resourceId===t)}function E(e,t){if(t)return e.find(e=>e.resourceType===n.y.Org&&e.resourceId===t)}function y(e){if(!e)return!1;let t=a.n_.get(c.zx),r=t.has(e),n=a.n_.get(c.e0),i=n.has(e);return r||i}function v({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:t}){return e.size>0||t.size>0}},535245:(e,t,r)=>{r.d(t,{J:()=>o,Y:()=>a});var n=r(166885),i=r(112088);function a(e){return e.isLocal?`${e.file_key}:${e.node_id}`:(0,i.bk)(e)??`${e.file_key}:${e.node_id}`}function o(e){switch(e){case n.h3.COMPONENT:case n.h3.STATE_GROUP:case n.h3.MODULE:return e;default:return}}},437059:(e,t,r)=>{r.d(t,{e0:()=>m,iN:()=>h,nr:()=>_,zV:()=>u,zx:()=>p});var n=r(520578),i=r(337167),a=r(769865),o=r(352540),l=r(200273),s=r(617406),c=r(801998),d=r(841017);let u=(0,i.cn)(e=>{var t;let r=(()=>{var t;let r=e(o.l),n=e(l.Up);if(n){if(!n.canEdit||!(0,c.dU)(r))return;let i=null==(t=n.team)?void 0:t.workspaceId,a=!!n.parentOrgId&&!i;if(a){let t=e(s.QK);return t}return i}let i=e(d.AO);if((0,c.dU)(r))return null==i?void 0:i.workspace_id})();if(!r)return;let n=e(a.cp.ApprovedLibrariesView({workspaceId:r}));return(null==(t=n.data)?void 0:t.workspace)??void 0}),p=(0,i.cn)(e=>{let t=e(u);return g((null==t?void 0:t.approvedLibraries)??[])}),m=(0,i.cn)(e=>{var t,r;let i=e(o.l);if(!i||!(0,c.TO)(i))return new Set([]);let l=e(a.cp.ApprovedLibrariesForOrgView({orgId:i.id}));return(null==(t=l.data)?void 0:t.org.status)!==n.OptionalStatus.Loaded?new Set([]):g((null==(r=l.data.org.data)?void 0:r.approvedLibraries)??[])}),h=(0,i.cn)(e=>{var t;{let r=e(o.l),n=e(s.QK);if(!n||!(0,c.dU)(r))return;let i=e(a.cp.ApprovedLibrariesView({workspaceId:n}));return(null==(t=i.data)?void 0:t.workspace)??void 0}}),_=(0,i.cn)(e=>{let t=e(h);return g((null==t?void 0:t.approvedLibraries)??[])});function g(e){return new Set(e.map(e=>e.fileKey))}},356220:(e,t,r)=>{r.d(t,{T:()=>c,_:()=>d});var n=r(716250),i=r(334245),a=r(200273),o=r(898080),l=r(733609),s=r(919726);function c({openFile:e,permissionsState:t,sourceLibraryFile:r,user:a,sourceLibraryFileKey:s}){return!!(!(0,n.BZ)().ds_limit_go_to_source||s&&(0,i.mY)(s))||!!r&&(!!(0,l.canEditFile)(r.key,t)||((null==e?void 0:e.parentOrgId)?e.parentOrgId===(null==r?void 0:r.parent_org_id):(0,o.gP)(null==e?void 0:e.team)?!!((null==r?void 0:r.team_id)&&(null==r?void 0:r.team_id)===(null==e?void 0:e.teamId)):(null==a?void 0:a.drafts_folder_id)!=null&&a.drafts_folder_id===(null==e?void 0:e.folderId)&&function(e,t,r){if(!(null==t?void 0:t.team_id)||!e)return!1;let n=r.teams[t.team_id];return!!(n&&(0,o.e3)(n)&&(0,l.canViewTeam)(n.id,r))}(a,r,t)))}function d(e,t){let r=e.user,n=(0,a.dh)(e),i=(0,s.tW)(e),o=(0,l.getPermissionsState)(e);return!!c({openFile:n,permissionsState:o,user:r,sourceLibraryFile:t?null==i?void 0:i[t]:null,sourceLibraryFileKey:t})}},147744:(e,t,r)=>{r.d(t,{Ld:()=>m,tK:()=>d,vi:()=>p,xD:()=>u});var n=r(652983),i=r(407908),a=r(46347),o=r(166885),l=r(384312),s=r(200273),c=r(161939);function d({assetKey:e,assetFileKey:t,assetType:r,isList:s,sectionNameforTracking:c,sectionPosition:d,sourceForTracking:p}){let h=(0,i.v9)(e=>e.library),_=(0,i.v9)(e=>e.search.sessionId),g=n.useContext(l.q),f=null==g?void 0:g.assetTypeDropdownSelection,E=m(t),y=u(t,E);return n.useMemo(()=>({assetKey:e,assetFileKey:t,assetTypeDropdownSelection:f,libraryType:E,viewMode:s?"LIST":"GRID",searchQuery:h.assetsPanelSearch.query,searchSessionId:_??void 0,source:p,sourceSection:c,type:function(e){switch(e){case o.h3.COMPONENT:return"component";case o.h3.STATE_GROUP:return"state_group";case o.h3.MODULE:return"module";case o.h3.STYLE:case o.h3.VARIABLE:case o.h3.VARIABLE_OVERRIDE:case o.h3.VARIABLE_SET:return;default:(0,a.vE)(e,"Can't get asset type for logging")}}(r),sectionPosition:d,subscriptionLevel:y}),[e,t,r,f,s,h.assetsPanelSearch.query,E,_,c,d,p,y])}function u(e,t){let r=(0,c.A1)();return n.useMemo(()=>r.file&&r.file.has(e)?"file":r.user&&r.user.has(e)?"user":r.team&&r.team.has(e)?"team":r.org&&r.org.has(e)?"org":"SUBSCRIBED"===t?"other":"",[e,r,t])}function p(e){switch(e.type){case o.h3.COMPONENT:return e.component_key;case o.h3.STATE_GROUP:case o.h3.MODULE:return e.key}}function m(e){let t=(0,s.uC)(),r=(0,c.EO)();return t===e?"LOCAL":r.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}},597630:(e,t,r)=>{r.d(t,{EH:()=>s,KY:()=>u,Yx:()=>c,_F:()=>l,yJ:()=>d});var n,i,a,o=r(807012),l=((n=l||{}).PASTE="PASTE",n.MODAL="MODAL",n.PLUGIN="PLUGIN",n),s=((i=s||{}).ATTEMPT="figjam_link_metadata_attempt",i.ERROR="figjam_link_metadata_error",i.SUCCESS="figjam_link_metadata_success",i.EMBED_CLICK="figjam_link_embed_click",i.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",i.OPEN_PREVIEW="figjam_link_preview_open",i.EMBED_EXPAND="figjam_link_embed_expand",i.COPY_LINK="figjam_link_metadata_copy_url",i.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",i.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",i.EMBED_DEACTIVATE="figjam_embed_deactivate",i),c=((a=c||{}).EMBED="embed",a.LINK_PREVIEW="preview",a);function d(e){try{let t=new URL(e).hostname;return t}catch(e){return"Could not parse"}}function u(e){let t=(0,o.zS)();return r=>{let n=null!=e&&"url"in e?e.url:"";t(r,{domain:null!=n?d(n):"",linkRenderType:"embed"})}}},307677:(e,t,r)=>{r.d(t,{Hn:()=>l,K2:()=>u,YE:()=>d,dj:()=>c,r8:()=>s,zg:()=>o});var n=r(669277),i=r(200273),a=r(862610);function o(e,t,r=!0){var i,o;let l=u(),s=(0,n.mU)(a.AllowlistPluginsSectionView,{orgId:e},{enabled:r}),c=null==(i=s.data)?void 0:i.org;return"loading"!==s.status&&l.loaded?"errors"!==s.status&&c?{loaded:!0,data:function(e,t,r){var n;let i=[],a=[];for(let t of e){let e=t.plugin;if(!e)continue;let o=null==(n=t.allowlistedWorkspace)?void 0:n.id;r&&o&&o!==r||(e.isWidget?a.push(e.id):i.push(e.id))}return"plugin"===t?i:a}(c.allowlistedPlugins,t,null==(o=l.data)?void 0:o.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function l({workspace:e,hasPendingRequest:t,extension:r}){return!!(e.publicPluginsOrWidgetDisabled&&!t&&e.extensionRequestsAllowed&&!(null==r?void 0:r.roles.org))}function s({org:e,isWidget:t}){if(!e)return!1;let r=t?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,n=t?e.widget_requests_allowed:e.plugin_requests_allowed;return r&&n}function c({org:e,extension:t,allowlistedExtensions:r}){if(!e||!t)return!1;let n=s({org:e,isWidget:t.is_widget});return!!(n&&!t.roles.org&&!r[t.id])}function d({org:e,extensionVersion:t,isWidget:r,allowlistedExtensions:n}){if(!e||!t)return!1;let i=s({org:e,isWidget:r});return!!(i&&!t.is_private&&!n[t.plugin_id])}function u(){var e,t,r;let o=(0,i.CA)(),l=!!o,s=(0,n.mU)(a.CurrentWorkspaceView,{fileKey:(null==o?void 0:o.key)??""},{enabled:l});if(!l)return{loaded:!0,data:void 0};if("loaded"!==s.status)return{loaded:!1};let c=null==(r=null==(t=null==(e=s.data)?void 0:e.file)?void 0:t.team)?void 0:r.workspace;return{loaded:!0,data:{workspaceId:null==c?void 0:c.id,workspaceName:null==c?void 0:c.name,fileKey:o.key,fileName:o.name}}}},219160:(e,t,r)=>{r.d(t,{D6:()=>g,Gd:()=>c,Mi:()=>E,PU:()=>_,QR:()=>m,W7:()=>p,gC:()=>u,hn:()=>b,jJ:()=>I,sX:()=>y,wn:()=>h,zF:()=>v,zs:()=>d});var n=r(46347),i=r(716250),a=r(127816),o=r(111120),l=r(343878),s=r(761767);function c(e){return null!=e||(0,i.BZ)().ps_benchmark}function d(e){return""===e.name}let u=e=>e?1e3:(0,i.BZ)().ps_benchmark?50:20,p=(e,t)=>{let r=e.currentUser.favoritedFiles,n=e.currentUser.favoritedPrototypes,i=e.currentUser.favoritedProjects,a=g(r,n,i,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces);return a.find(e=>e.resource.resourceId===t)},m=(e,t)=>{var r,n,i,a,o,l,c,d,u,p,m,h,_,g,f;switch(t){case s.IK.FILE:return(null==(r=e.favoritedResource)?void 0:r.favoritedFile)!=null?{id:null==(n=e.favoritedResource)?void 0:n.id,resourceType:s.IK.FILE,resource:null==(i=e.favoritedResource)?void 0:i.favoritedFile}:void 0;case s.IK.PROTOTYPE:return(null==(a=e.favoritedResource)?void 0:a.favoritedPrototype)!=null?{id:null==(o=e.favoritedResource)?void 0:o.id,resourceType:s.IK.PROTOTYPE,resource:null==(l=e.favoritedResource)?void 0:l.favoritedPrototype}:void 0;case s.IK.FOLDER:return(null==(c=e.favoritedResource)?void 0:c.favoritedProject)?{id:null==(d=e.favoritedResource)?void 0:d.id,resourceType:s.IK.FOLDER,resource:null==(u=e.favoritedResource)?void 0:u.favoritedProject}:void 0;case s.IK.TEAM:return(null==(p=e.favoritedResource)?void 0:p.favoritedTeam)?{id:null==(m=e.favoritedResource)?void 0:m.id,resourceType:s.IK.TEAM,resource:null==(h=e.favoritedResource)?void 0:h.favoritedTeam}:void 0;case s.IK.WORKSPACE:return(null==(_=e.favoritedResource)?void 0:_.favoritedWorkspace)?{id:null==(g=e.favoritedResource)?void 0:g.id,resourceType:s.IK.WORKSPACE,resource:null==(f=e.favoritedResource)?void 0:f.favoritedWorkspace}:void 0;default:return}},h=(e,t)=>{var r,n;return(null==(n=null==(r=e.currentUser)?void 0:r.projectSubscriptions)?void 0:n.find(e=>{var r;return(null==(r=e.projectV2)?void 0:r.id)===t}))!==void 0},_=(e,t)=>{let r=(0,a.qQ)(t.prototype);r&&e(o.fv({view:"prototype",file:r,nodeId:t.prototype.pageId}))},g=(e,t,r,n,i)=>{let a=(null==e?void 0:e.filter(e=>{var t;return null==(t=e.file)?void 0:t.canView}))??[],o=(null==r?void 0:r.filter(e=>e.project&&!e.project.deletedAt))??[],l=(null==n?void 0:n.filter(e=>e.team&&!e.team.deletedAt))??[];return f(a,t??[],o,l,i??[])},f=(e,t,r,n,i)=>{let a=e.map(e=>({id:e.id,resourceType:s.IK.FILE,resource:e})),o=t.map(e=>({id:e.id,resourceType:s.IK.PROTOTYPE,resource:e})),l=r.map(e=>({id:e.id,resourceType:s.IK.FOLDER,resource:e})),c=n.map(e=>({id:e.id,resourceType:s.IK.TEAM,resource:e})),d=i.map(e=>({id:e.id,resourceType:s.IK.WORKSPACE,resource:e}));return[...a,...o,...l,...c,...d]},E=(e,t)=>{let r=u(t),n=g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,(0,i.BZ)().ps_benchmark||t?e.currentUser.favoritedProjects:[],e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces);return n.length>=r},y=e=>!!e&&e>=1e3,v=(e,t)=>{var r;let n={};e.forEach(e=>{n[e.id]=e});let i=null==(r=e.find(e=>""===e.name))?void 0:r.id,a=(null==t?void 0:t.map(e=>n[e]).filter(e=>e))??[],o=e.filter(e=>!(t&&t.includes(e.id))),l=o.findIndex(e=>""===e.name);return -1!==l&&o.splice(l,1),o.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),-1!==l&&i?[n[i],...a,...o]:[...a,...o]},b=(e,t)=>{let r={};e.forEach(e=>{r[e.resource.id]=e});let n=(null==t?void 0:t.map(e=>r[e]).filter(e=>e))??[],i=e.filter(e=>!(t&&t.includes(e.resource.id)));return i.sort((e,t)=>new Date(e.resource.createdAt).getTime()-new Date(t.resource.createdAt).getTime()),[...n,...i]},I=e=>{switch(e){case l.YU.FILE:case l.YU.PINNED_FILE:case l.YU.REPO:return s.IK.FILE;case l.YU.PROTOTYPE:return s.IK.PROTOTYPE;case l.YU.PROJECT:return s.IK.FOLDER;case l.YU.OFFLINE_FILE:return s.IK.FILE;default:(0,n.vE)(e)}}},996028:(e,t,r)=>{r.d(t,{$:()=>i,r:()=>a});var n=r(961215);function i(e){let t=[];return e.forEach(e=>{e.content.forEach(e=>{let r=JSON.parse(e);r.nodeId&&t.push(r.nodeId)})}),t}function a(e,t){let r=new Set(e);return[...r].reduce((e,r)=>{var i;let a=t(r),o=((null==(i=n.dCf)?void 0:i.nodeIsPage(r))?null==a?void 0:a.absoluteRenderBounds:null==a?void 0:a.absoluteBoundingBox)??null;return e[r]=o?{x:o.x,y:o.y,width:o.w,height:o.h}:o,e},{})}},278832:(e,t,r)=>{r.d(t,{$3:()=>V,Ch:()=>M,EI:()=>D,GG:()=>W,HX:()=>G,Ir:()=>P,RH:()=>H,ZB:()=>U,dn:()=>B,x6:()=>k,xs:()=>x});var n=r(407908),i=r(600486),a=r(239299),o=r(642045),l=r(448501),s=r(716250),c=r(571529),d=r(970740),u=r(968034),p=r(455322),m=r(367720),h=r(218609),_=r(111120),g=r(280251),f=r(721127),E=r(858368),y=r(225592),v=r(158774),b=r(278287),I=r(542936),T=r(510730),w=r(425285),S=r(837728),C=r(609346),O=r(838903),A=r(26332),N=r(70918),L=r(413810);function P(){return(0,s.ZP)().release_manifest_git_commit}function R(e,t){if(e!==document.title){let r=c.ZP.browserType;if((0,s.BZ)().fig_icons&&"safari"!==r){let t=(0,A.UG)(e);t&&(function(e){let t=document.getElementById("custom-emoji-favicon");t||((t=document.createElement("link")).id="custom-emoji-favicon",t.rel="icon",t.type="image/png",document.head.appendChild(t));let r=[...e].map(e=>{var t;return null==(t=e.codePointAt(0))?void 0:t.toString(16)}).join("-");r&&(t.href=o.DI+r+".png")}(t),e=(0,A.ku)(e,t))}document.title=e,a.YO&&t&&a.YO.setTitle(t)}}function k(e){let t=`${e} \u2013 Figma`;R(t,e)}function D(e,t){let r=`${e}${"whiteboard"===t?" \u2013 FigJam":" \u2013 Figma"}`;R(r,e)}function M(e,t){let r=(0,L.Yj)(e,t);if(!r){R("Figma",null);return}if("fullscreen"===t.view&&t.tryPluginName){e.openFile?R(e.openFile.name,r):R((0,d.t)("community.try.plugin_name_with_community",{pluginName:t.tryPluginName}),r);return}if("prototype"===t.view){let t="",n=null,i=function(e){let t=e.prototype;for(let e of t.pages)if(e.nodeId===t.currentPageId)return e.name;return""}(e);i?(t=`\u25B6 ${i} - ${r}`,n=`${i} - ${r}`):t=`\u25B6 ${r}`,R(t,n);return}if("fullscreen"===t.view&&!e.openFile){let e=(0,C.q7)();(null==e?void 0:e.name)?r=e.name:(null==t?void 0:t.localFileName)&&(r=t.localFileName)}let n=(0,S.NP)(e);if(n&&(0,O.kO)(n)){R(`\u2325 ${r}`,`${r}`);return}if("fullscreen"===t.view&&"whiteboard"===(0,w.j3)(e.selectedView)){let e=`${r} \u2013 FigJam`;R(e,r);return}k(r)}let F=e=>!!("state"in e&&"key"in e&&2===Object.keys(e).length||0===Object.keys(e).length&&/^\/community/.test(l.default.location.pathname)),x=(0,h.u4)(e=>{window.addEventListener("popstate",t=>{if(t.state){let r=e.getState(),n=r.selectedView;if((0,T.Y)(r.selectedView))return;let i=t.state.jsCommitHash,a={...t.state};delete a.jsCommitHash;let o=F(a)?{view:"communityHub",subView:"searchAndBrowse",data:(0,p.bz)(l.default.location.pathname,l.default.location.search)}:a;if(i!==P()&&!F(a)){l.default.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===n.view&&!v.Gr.isReady()){l.default.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===o.view&&!o.fileKey){window.history.back();return}if("fullscreen"===n.view&&("fullscreen"!==o.view||n.fileKey!==o.fileKey))e.dispatch(g.Jp({oldSelectedView:n,newSelectedView:o}));else{if(e.dispatch(f.hV()),"communityHub"===o.view&&"searchAndBrowse"===o.subView&&(0,m.TC)(o.data)){let t=(0,u.N)(r);(null==t?void 0:t.searchSessionId)&&e.dispatch(y.gN({sessionId:t.searchSessionId}))}e.dispatch(_.fv({...o,fromPopstate:!0})),M(r,o)}}})}),U=(e,t,r,n)=>{e(_.ku({fileKey:t.key}));let i=r||n,a=r?b.k.ORG:b.k.TEAM;e((0,s.BZ)().ps_benchmark&&i?E.cy({planId:i,planType:a}):E.qB({planId:r||I.y})),e(_.fv({view:"fullscreen",fileKey:t.key,editorType:t.editor_type||"design"}))},B=(e,t)=>{t(_.B4(e))},V=(e,t,r,n)=>{(0,i.L9)("Open File in New Tab Click",{fileKey:t,uiSelectedView:JSON.stringify(r)}),n(_.ku({fileKey:t})),l.default.redirect(e,"_blank")},G=(e,t,r,n)=>{(0,i.L9)("Open Prototype in New Tab Click",{fileKey:t,pageId:r,uiSelectedView:JSON.stringify(n)}),l.default.redirect(e,"_blank")},H=(e,t)=>{t(_.YQ({url:e}))},W=(e,t)=>{let r=(0,N.dO)(),i=e||t,a=(0,n.v9)(e=>{var t;return r?null==(t=e.authedUsers.byId[r])?void 0:t.plans:null});return!!(null==a?void 0:a.find(e=>e.plan_id===i))}},870295:(e,t,r)=>{r.d(t,{Bz:()=>G,G3:()=>x,II:()=>K,Pz:()=>H,RM:()=>U,Tb:()=>F,X:()=>W,nw:()=>Z,oY:()=>M,p0:()=>V,wj:()=>B});var n=r(407908),i=r(303498),a=r(870077),o=r(31642),l=r(313653),s=r(970740),c=r(644383),d=r(218609),u=r(721154),p=r(111120),m=r(266377),h=r(721127),_=r(614261),g=r(798354),f=r(614860),E=r(731436),y=r(656077),v=r(363402),b=r(818709),I=r(820767),T=r(239342),w=r(261906),S=r(485067),C=r(60758),O=r(787618),A=r(34489),N=r(448694),L=r(706039),P=r(999177),R=r(795153),k=r(958550),D=r(841017);let M=(0,d.u4)((e,{folderId:t})=>{(0,n.dC)(()=>{e.dispatch(m.ZH({folderId:t})),e.dispatch(m.CL({folderId:t,state:null}))})}),F=(0,d.u4)((e,{folderId:t,folderData:r})=>{(0,n.dC)(()=>{e.dispatch(m.v_(r.folder)),e.dispatch(u.qV({files:r.files,subscribeToRealtime:!1})),e.dispatch(_.Cu({repos:r.repos})),e.dispatch(g.qV({roles:r.roles})),e.dispatch(m.CL({folderId:t,state:"loaded"}))})}),x=(0,d.u4)(async(e,{folderId:t,loadedFolders:r})=>{if(!r[t]){e.dispatch(m.CL({folderId:t,state:"loading"}));try{let r=await I.v.getFiles({folderId:t}),n=r.data.meta;e.dispatch(F({folderId:t,folderData:n}))}catch(r){404===r.status||403===r.status?e.dispatch(p.fv({view:"resourceUnavailable",resourceType:v.Hy.PROJECT})):r.status>=400&&r.status<500?e.dispatch(m.CL({folderId:t,state:"loaded"})):e.dispatch(m.CL({folderId:t,state:null}))}}}),U=R.t1.Query({fetch:async e=>{let t=await T.j.getFolders({teamId:e.teamId});return t.data.meta.folder_rows},schema:e=>e.array(E.f),enabled:e=>!!e.teamId}),B=R.t1.Mutation(e=>I.v.delete({folderId:e.folderId})),V=(0,d.Vh)("RENAME_FOLDER",(e,t,{optimistId:r})=>{let{folderId:n,folderName:a}=t,c=(0,P.bo)(a);if(c){e.dispatch(l.l.error(c));return}(0,N.Qs)("Folder Renamed",n,null,e.getState(),{folderName:a});let u=o.ZP.put("/api/folders/rename",{folder_id:t.folderId,name:t.folderName}).then(()=>{e.dispatch(d.w2.commit(r))}).catch(()=>{e.dispatch(d.w2.revert(r))});(0,l.i)({promise:u,fallbackError:(0,s.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")}),(0,i.i0)().optimisticallyUpdate({Project:{[t.folderId]:{path:t.folderName}}},u)}),G=(0,d.Vh)("FOLDER_UPDATE_FOLDER_ACCESS",(e,t,{optimistId:r})=>{let n=o.ZP.put(`/api/folders/${t.folderId}`,{is_invite_only:t.isInviteOnly,is_view_only:t.isViewOnly}).then(()=>{e.dispatch(d.w2.commit(r))}).catch(()=>{e.dispatch(d.w2.revert(r))});(0,l.i)({promise:n,fallbackError:(0,s.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),H=(0,d.Vh)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,t,{optimistId:r})=>{let n=I.v.updateFolderSharingAudienceControls({folderId:t.folder.id,sharingAudienceControl:t.sharingAudienceControl}).then(()=>{e.dispatch(d.w2.commit(r)),(0,N.Qs)("Folder Share Settings Updated",t.folder.id,t.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:t.folder.sharing_audience_control,newSharingAudienceControl:t.sharingAudienceControl})}).catch(()=>{e.dispatch(d.w2.revert(r))});(0,l.i)({promise:n,fallbackError:(0,s.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),W=(0,d.Vh)("FOLDER_UPDATE_TEAM_ACCESS",(e,t,{optimistId:r})=>{let n=I.v.updatedFolderTeamAccess({folderId:t.folder.id,teamAccess:t.teamAccess}).then(()=>{e.dispatch(d.w2.commit(r)),(0,N.Qs)("Folder Share Settings Updated",t.folder.id,t.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:t.folder.team_access,newTeamAccess:t.teamAccess})}).catch(()=>{e.dispatch(d.w2.revert(r))});(0,l.i)({promise:n,fallbackError:(0,s.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),K=(0,d.u4)(async(e,t)=>{var r,n,i,o,s;let c=t.folder,d=t.team,u=(0,y.SR)(d);if(c.inviteOnlyAt||c.viewOnlyAt){e.dispatch(h.K4({type:C.I,data:{folder:c}}));return}try{await I.v.getCanMove({teamId:d.id,folderId:c.id})}catch(t){(null==(n=null==(r=t.data)?void 0:r.failure_info)?void 0:n.code)==="ERR_FILE_LIMIT"||(null==(o=null==(i=t.data)?void 0:i.failure_info)?void 0:o.code)==="ERR_PROJECT_LIMIT"?e.dispatch(h.K4({type:O.yd,data:{team:u,resource:f.Q3.FOLDER,action:b.XH.MOVE_FOLDER,currentPlan:L.V.Plan.STARTER,upsellPlan:L.V.Plan.PRO}})):e.dispatch(l.l.error(null==(s=t.data)?void 0:s.message));return}c.teamId&&u?e.dispatch(h.K4({type:A.r,data:{folder:c,destinationTeam:u,onConfirm:()=>{(0,a.Ki)(z)({folder:c,team:u})}}})):(0,a.Ki)(z)({folder:c,team:u})}),z=R.t1.Mutation((e,{query:t,objects:r,reduxStore:n})=>{var a;let{folder:d,team:u}=e;(0,N.Qs)("Folder Moved",d.id,null,n.getState(),{destTeamId:u.id});let p=o.ZP.put("/api/folders/move",{folder_id:d.id,team_id:u.id}).then(()=>{n.dispatch(c.R.enqueue({message:(0,s.t)("file_browser.folder_move.project_moved_toast",{folderName:d.path,teamName:u.name})}))});return n.dispatch((0,l.i)({promise:p,fallbackError:(0,s.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),null==(a=(0,i.i0)())||a.optimisticallyUpdate({Project:{[d.id]:{teamId:u.id}}},p),d.teamId&&(t.mutate(U({teamId:d.teamId}),e=>{let t=e.findIndex(e=>e.id===d.id);-1!==t&&e.splice(t,1)}),r.Folder.update(d.id,e=>{e.team_id=u.id})),p}),Z=(0,d.u4)((e,t)=>{let r=e.getState(),n=t.where,i=t.team.id,a=r.creatingNewFolder&&r.creatingNewFolder.where===n&&r.creatingNewFolder.team.id==i,o=t.team;if(!a){if(o.canEditTeamContents)(0,D.bw)(o,{type:D.Xy.ADD_PROJECT})?(e.dispatch(p.Iy({where:n,team:o})),(0,k.IQ)((null==o?void 0:o.id)||null,(null==o?void 0:o.org_id)||null)?e.dispatch(h.K4({type:w.iY,data:{teamId:o.id,modalShown:r.modalShown}})):e.dispatch(h.K4({type:S.L0}))):e.dispatch(h.K4({type:O.yd,data:{team:o,resource:f.Q3.FOLDER,action:b.XH.CREATE_FOLDER,currentPlan:L.V.Plan.STARTER,upsellPlan:L.V.Plan.PRO}}));else{let t=o?(0,s.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:o.name}):(0,s.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(l.l.flash(t))}}})},557274:(e,t,r)=>{r.d(t,{Qd:()=>h,Zi:()=>m});var n=r(716250),i=r(337167),a=r(792808),o=r(218609),l=r(638780),s=r(858368),c=r(62514),d=r(885755),u=r(828837),p=r(438237);let m=(0,o.u4)(async(e,{loadedPlans:t})=>{if(!t||!(t.length>0))try{let t=await u.W.getPlans();e.dispatch(s.qV({plans:t.data.meta.plans})),e.dispatch(c.qV({teams:t.data.meta.teams})),e.dispatch(l.qV({orgs:t.data.meta.orgs}));let r=t.data.meta.teams,i=(0,n.BZ)().ps_benchmark,a=(0,n.BZ)().close_starter_team_loophole;i&&a&&await Promise.all(r.map(t=>(0,d._C)(t.id,e)))}catch(e){}}),h=(e=!1)=>async t=>{try{let r=await _(e);return t(c.qV({teams:r.teams})),t(l.qV({orgs:r.orgs})),r}catch(e){return Promise.reject(e)}};async function _(e=!1){if(!(0,n.BZ)().ps_benchmark)return Promise.reject();let t=i.n_.get(p.E);if(!e&&t!==a.Q.INIT&&t!==a.Q.LOADING)return t;try{t===a.Q.INIT&&i.n_.set(p.E,a.Q.LOADING);let e=await u.W.getPlansForAuthedUsers();return i.n_.set(p.E,e),e}catch(e){return t===a.Q.LOADING&&i.n_.set(p.E,a.Q.INIT),Promise.reject(e)}}},728443:(e,t,r)=>{r.d(t,{$Y:()=>O,RY:()=>L,Tb:()=>R,Xc:()=>P,fO:()=>M,g$:()=>A,gZ:()=>N,hE:()=>k,pc:()=>D});var n=r(600486),i=r(716250),a=r(303498),o=r(980220),l=r(31642),s=r(313653),c=r(970740),d=r(644383),u=r(218609),p=r(111120),m=r(28786),h=r(798354),_=r(62514),g=r(465353),f=r(761767),E=r(220958),y=r(363402),v=r(922116),b=r(909185),I=r(448694),T=r(334136),w=r(958550),S=r(298331),C=r(242030);let O=(0,u.u4)((e,t)=>{let{teamName:r,orgAccess:n,licenseGroupId:i,workspaceId:a,description:o,defaultPermission:d,sharingAudienceControl:u,orgBrowsable:p,hidden:m,ignoreCurrentPlan:h}=t,g=e.getState().currentUserOrgId,f={team_name:r},E=(0,w.IQ)(null,g);!g||h||(f.org_id=g,u&&E||(f.org_access=n)),i&&(f.license_group_id=i),a&&(f.workspace_id=a),o&&(f.description=o),!d||u&&E||(f.default_permission=d),u&&E&&(f.sharing_audience_control=u),p&&(f.org_browsable=p),m&&(f.hidden=m),e.dispatch(_.K4({loading:!0})),l.ZP.post("/api/teams/create",f).then(({data:r})=>{let n="team"in r.meta?r.meta.team:r.meta;A(n,e,t)}).catch(t=>{var r;let n=(0,c.it)(t,(null==(r=null==t?void 0:t.response)?void 0:r.message)||(0,c.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(s.l.error(n)),e.dispatch(_.K4({loading:!1}))})});function A(e,t,r){var n,a;let o=t.getState().user,l=t.getState().currentUserOrgId;t.dispatch(_.v_({team:e})),(0,I.H)("Team Created",e.id,t.getState());let{ignoreCurrentPlan:s}=r;return l&&!s&&(null==(n=r.inviteEmails)?void 0:n.length)&&r.inviteLevel?t.dispatch((0,S.Pv)({emails:r.inviteEmails,emailsToExclude:o?new Set([o.email]):void 0,resourceType:f._g.TEAM,resourceIdOrKey:e.id,level:r.inviteLevel,source:"new_team_creation_modal"})):r.teamFlowType===y.wD.CREATE&&(null==(a=r.inviteEmails)?void 0:a.length)&&t.dispatch((0,S.Pv)({emails:r.inviteEmails,emailsToExclude:o?new Set([o.email]):void 0,resourceType:f._g.TEAM,resourceIdOrKey:e.id,level:E.V.EDITOR,source:"team_creation_flow"})),v.$.getTeam({teamId:e.id}).then(({data:n})=>{let a=n.meta;for(let e of a)t.dispatch(h.v_({role:e}));let l=(0,i.BZ)().ps_benchmark;l||t.dispatch(_.K4({loading:!1}));let u=t.getState().currentUserOrgId&&!s;if(r.dontRedirect)l&&t.dispatch(_.K4({loading:!1}));else if(r.onSuccess&&(l&&t.dispatch(_.K4({loading:!1})),r.onSuccess()),u||r.teamFlowType===y.wD.CREATE)l&&t.dispatch(_.K4({loading:!1})),t.dispatch(p.fv({view:"team",teamId:e.id})),t.dispatch(d.R.enqueue({type:"new_team_created",message:(0,c.t)("team_creation.you_have_created_a_new_team")}));else if(l&&(null==o?void 0:o.id)){let r={view:"addCollaborators",teamId:e.id},n={userId:o.id,teamId:e.id,orgId:null};t.dispatch(p.NO({workspace:n,view:r}))}else l&&t.dispatch(_.K4({loading:!1})),t.dispatch(p.fv({view:"addCollaborators",teamId:e.id}))})}let N=(0,u.u4)((e,t)=>{var r;let n=t.team,i=n.id,s=n.name,u=t.name;(0,I.H)("Team Renamed",i,e.getState());let p=l.ZP.put(`/api/teams/${i}`,{name:t.name}).then(({data:r})=>{t.skipVisualBell||e.dispatch(d.R.enqueue({message:(0,c.t)("change_team_name_visual_bell.text",{oldTeamName:s,newTeamName:u}),button:{text:(0,c.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(_.PQ({team:r.meta,name:s}))}}}))});return null==(r=(0,a.i0)())||r.optimisticallyUpdate({Team:{[i]:{name:u}}},p),(0,o.T)({requestPromise:p,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:_.PQ(t)})}),L=(0,u.u4)((e,t)=>{let r=t.team.id;return(0,I.H)("Team Share Settings Updated",r,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:t.team.sharing_audience_control,newSharingAudienceControl:t.sharingAudienceControl,oldOrgBrowsable:t.team.org_browsable,newOrgBrowsable:t.orgBrowsable,oldHidden:t.team.hidden,newHidden:t.hidden}),(0,o.T)({requestPromise:l.ZP.put(`/api/teams/${r}`,{sharing_audience_control:t.sharingAudienceControl,org_browsable:t.orgBrowsable,hidden:t.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:_.Q2(t)})}),P=(0,u.u4)((e,t)=>{let r=t.team.id;return(0,I.H)("Team Org Access Changed",r,e.getState(),{oldOrgAccess:t.team.org_access,newOrgAcccess:t.orgAccess}),(0,o.T)({requestPromise:l.ZP.put(`/api/teams/${r}`,{org_access:t.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:_.q1(t)})}),R=(0,u.u4)((e,t)=>{let r=t.team.id;return(0,I.H)("Org Team Default Member Permission Changed",r,e.getState(),{oldDefaultPermission:t.team.default_permission,newDefaultPermission:t.defaultPermission}),(0,o.T)({requestPromise:l.ZP.put(`/api/teams/${r}`,{default_permission:t.defaultPermission}),fallbackError:(0,c.t)("file_browser.team_settings.an_error_occurred_while_changing_default_permission"),store:e,next:e.dispatch,action:_.XJ(t)})}),k=(0,u.u4)((e,t)=>{(0,n.L9)("file-browser-hydrate",{location:"team.onJoin"});let r=(0,T.js)(t.teamId);(0,C.K3)("onJoinTeam").then(n=>{let i=t.teamId;e.dispatch(p.ZB(n.data.meta));let a=e.getState().teams[i].name;switch(t.level){case E.V.OWNER:e.dispatch(s.l.flash((0,c.t)("join_team_flash.as_owner.text",{teamName:a})));break;case E.V.ADMIN:e.dispatch(s.l.flash((0,c.t)("join_team_flash.as_admin.text",{teamName:a})));break;default:e.dispatch(s.l.flash((0,c.t)("join_team_flash.text",{teamName:a})))}e.dispatch(m.dN({key:r}))}).catch(()=>{e.dispatch(m.eD({key:r}))}),e.dispatch(_.KN(t))}),D=(0,u.u4)((e,t)=>{(0,n.L9)("file-browser-hydrate",{location:"team.onBatchJoin"});let r=(0,T.Vn)(t.teamIds);(0,C.K3)("onBatchJoinTeams").then(n=>{e.dispatch(p.ZB(n.data.meta));let i=t.teamIds.length;switch(t.level){case E.V.OWNER:e.dispatch(s.l.flash((0,c.t)("join_team_batch_flash.as_owner.text",{teamCount:i})));break;case E.V.ADMIN:e.dispatch(s.l.flash((0,c.t)("join_team_batch_flash.as_admin.text",{teamCount:i})));break;default:e.dispatch(s.l.flash((0,c.t)("join_team_batch_flash.text",{teamCount:i})))}e.dispatch(m.dN({key:r}))}).catch(()=>{e.dispatch(m.eD({key:r}))}),e.dispatch(_.Vy(t))}),M=(0,u.u4)(e=>{let t=e.getState().currentUserOrgId;b.w.getTeamRoleRequestsOrgId({orgId:t}).then(t=>{e.dispatch(g.R({teamRoleRequests:t.data.meta}))})})},686096:(e,t,r)=>{r.d(t,{$s:()=>m,CV:()=>_,DO:()=>p,Km:()=>h,Sj:()=>g,YU:()=>u,rW:()=>d,z$:()=>f});var n=r(716250),i=r(615537),a=r(286206),o=r(970740),l=r(839865),s=r(733609),c=r(54055);function d(e,t,r){if(!e)return null;let i={userId:e.id,orgId:t};return(0,n.BZ)().ps_benchmark&&(i.teamId=r||null),i}let u=(0,i.ws)(d);function p(e,t){let r=d(e.user,e.currentUserOrgId,e.currentTeamId);return(0,n.BZ)().ps_benchmark?!!r&&r.userId===t.userId&&(!!r.orgId&&r.orgId===t.orgId||!!r.teamId&&r.teamId===t.teamId):!!r&&r.userId===t.userId&&r.orgId===t.orgId}let m=l.$;function h(e,t){let r={};return t.forEach(t=>{r[t]=m(e,t)}),r}function _(e,t,r,i){var l;let c=(0,o.t)("navbar.workspaces.default_workspace_name");if(!t)return c;if(t.orgId){let n=(null==r?void 0:r[t.orgId])||e.orgById[t.orgId],i=(null==n?void 0:n.name)||(0,o.t)("navbar.workspaces.default_org_workspace_name");return i}let d=(0,n.BZ)().ps_benchmark;if(d&&t.teamId){let r=(null==i?void 0:i[t.teamId])||e.teams[t.teamId],n=(null==r?void 0:r.name)||(0,o.t)("navbar.workspaces.default_team_workspace_name");return n}return d&&(null==(l=e.user)?void 0:l.id)!=="-1"&&(0,a.YK)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,s.userIsAMemberOfAnOrg)(e,t.userId)?(0,o.t)("navbar.profile_switcher.external_teams"):(0,o.t)("navbar.profile_switcher.your_teams")}function g(e){let t=d(e.user,e.currentUserOrgId,e.currentTeamId);if(!t)return(0,o.t)("navbar.workspaces.notifications_label");if((0,c.sg)(e.selectedView))return(0,o.t)("navbar.workspaces.community_notifications_label");if(t.orgId){let r=e.orgById[t.orgId],n=null==r?void 0:r.name;return n?(0,o.t)("user_notifications.org_notifications",{orgName:n}):(0,o.t)("navbar.workspaces.notifications_label")}return(0,s.userIsAMemberOfAnOrg)(e,t.userId)?(0,o.t)("navbar.workspaces.external_teams_notifications_label"):(0,o.t)("navbar.workspaces.notifications_label")}function f(e,t){return 0!==e.length&&(e.length>1||m(t,e[0]).length>1)}},237253:(e,t,r)=>{r.d(t,{BB:()=>k,LT:()=>b,Po:()=>N,Wq:()=>L,eB:()=>C,eQ:()=>P,hi:()=>O,ot:()=>E,re:()=>S,wG:()=>R,wJ:()=>w});var n,i=r(46347),a=r(256768),o=r(721154),l=r(614261),s=r(761767),c=r(485091),d=r(605508),u=r(57448),p=r(523383),m=r(970740),h=r(838903),_=r(659994),g=r(999177),f=r(179640),E=((n=E||{}).fileBrowserContextMenu="file_browser_context_menu",n.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",n.fileBrowserTileActionMenu="file_browser_tile_action_menu",n.prototypeHeader="prototype_header",n.fullscreenToolbar="fullscreen_toolbar",n.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",n.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",n.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",n.customTemplatePublishNudge="custom_template_publish_nudge",n.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",n.editRequestTooltip="edit_request_tooltip",n.editRequestExternal="edit_request_external",n.teamFeedNux="team_feed_nux",n);function y(e,t,r,n){var i;let a;let o=t.user;if(t.mirror&&t.mirror.appModel.pagesList&&t.mirror.appModel.pagesList.length>1){let e=t.mirror.sceneGraph.get((0,d.rA)(t.mirror.appModel));e&&(a=e.name)}let l=e&&t.figFilePublishedAsHubFile[e.key],s=l?(0,f.VZ)(l,t.hubFiles):null,c=(0,h.Xd)(e,t.repos),u=c?c.team_id:e.team_id,p=u?null==(i=t.teamUserByTeamId)?void 0:i[u]:null;return{user:o,pageName:a,editingHubFile:s,prototype:t.prototype,mirror:t.mirror,selectedView:t.selectedView,contacts:t.contacts,currentUserOrgId:t.currentUserOrgId,autocomplete:t.autocomplete,orgDomains:t.orgDomains,dropdownShown:t.dropdownShown,modalShown:t.modalShown,teamUserByUserId:p,isFreeUserOnly:n,editorType:e.editor_type||"design",attributionContextKey:t.sharingAttributionContextKey,dispatch:r}}function v(e,t,r,n){let i={...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1};return{file:i,repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,...y(e,t,r,n)}}let b=(e,t,r,n,i)=>{if("loaded"!==e.status)return v(t,r,n,i);let a=e.data.file;if(!a)return v(t,r,n,i);let o=a.fileLinkExpirationConfig||a.sourceFileLinkExpirationConfig,l=(null==(A=a.repo)?void 0:A.defaultFileKey)===a.key,d=(null==(N=a.pwdConfig)?void 0:N.updatedAt)||null,u=(null==(L=a.pwdConfig)?void 0:L.setByUser)?(0,c.$9)(a.pwdConfig.setByUser):null,p={canEdit:a.canEdit,canEditCanvas:a.canEditCanvas,hasEditRole:a.hasEditRole,hasViewRole:a.hasViewRole,canView:a.canView,canViewPrototype:a.canViewPrototype,canViewPrototypeLinks:a.hasViewPrototypeRole,passwordSetAt:d,passwordSetByUser:u,isOwner:l?!!(null==(R=null==(P=a.repo)?void 0:P.roleOnObjectForUser)?void 0:R.isOwnerOfResource):!!(null==(k=a.roleOnObjectForUser)?void 0:k.isOwnerOfResource),isPublishedHubFile:!!a.publishedHubFile&&!a.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,c.cz)(o),...(0,c.we)(a)},m={};a.repo&&a.repo.roles.forEach(e=>{e.userId&&(m[e.userId]=e)});let h={};a.project&&a.project.roles.forEach(e=>{e.userId&&(h[e.userId]=e)});let f={};a.team&&a.team.roles.forEach(e=>{e.userId&&(f[e.userId]=e)});let E={},b=l?a.repo.roles:a.roles;b.forEach(e=>{var t,r,n;let i=e.user?(0,c.$9)(e.user):null;if(i){let a=(null==(t=e.user)?void 0:t.orgUser)||(null==(r=e.user)?void 0:r.guestOrgUser),o=m[i.id],l=f[i.id],s=h[i.id],d=(null==(n=e.user)?void 0:n.teamUser)?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,u=(0,c.j9)(e,i,a||null,d||null);E[i.id]=u.pending?u:{...u,folderLevel:(null==s?void 0:s.level)||null,teamLevel:(null==l?void 0:l.level)||null,repoLevel:(null==o?void 0:o.level)||null}}else e.pending&&(E[`pending-${e.id}`]=(0,c.j9)(e,null,null,null))});let I={};(0,_.tu)(t)&&a.fileSeenStates.forEach(e=>{let t=e.user?(0,c.$9)(e.user):null;if(t){let r=m[t.id],n=f[t.id],i=h[t.id],a=(0,c.bO)(e,t);I[a.user_id]={...a,folderLevel:(null==i?void 0:i.level)||null,teamLevel:(null==n?void 0:n.level)||null,repoLevel:(null==r?void 0:r.level)||null}}});let w={};(null==(D=e.data.currentUser)?void 0:D.allBaseOrgUsers)&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(w[e.org.id]={})});let S=a.repo?{...(0,c.mq)(a.repo),canEdit:a.repo.canEdit,mainFileLinkExpirationConfig:(0,c.cz)(o)}:null;if(T(o)){let e={link_access:o.prevPrivateLinkAccess,proto_link_access:o.prevPrivateProtoLinkAccess,org_browsable:o.prevOrgBrowsable};p={...p,...e},S&&(S={...S,...e})}let C=(null==(M=a.project)?void 0:M.orgDraftsFolderOwnerBaseOrgUser)?{id:a.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:a.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:a.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||s.oz.STARTER,user_id:a.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,c.$9)(a.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null,O=a.project;var A,N,L,P,R,k,D,M,F,x,U,B,V,G,H,W,K=void 0;return a.org&&"loaded"===a.org.imgUrl.status&&null!==a.org.imgUrl.data&&(K=a.org.imgUrl.data),{file:p,repo:S,rolesByUserId:E,fileSeenStatesByUserId:I,fileRoleRequests:a.fileRoleRequests,folder:O&&{name:O.path,is_view_only:!!O.viewOnlyAt,is_invite_only:!!O.inviteOnlyAt,team_id:O.teamId,team_access:"loaded"===O.teamAccess.status?O.teamAccess.data:null},folderRoles:O&&O.roles||[],isInDraftsFolder:(0,g.O2)(O),orgDraftsOwner:C,org:a.org?{id:a.org.id,name:a.org.name,img_url:K,domain_capture:!!a.org.domainCapture,workshop_enabled:!a.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:null==(F=a.org.inviteWhitelist)?void 0:F.guestInviteSetting,figjam_disabled_at:a.org.figjamDisabledAt,org_domains:(0,c.Hm)(a.org.orgDomains),bigma_enabled:!!a.org.bigmaEnabledAt}:null,orgUser:(null==(x=a.org)?void 0:x.currentBaseOrgUser)?{id:a.org.currentBaseOrgUser.id,org_id:a.org.id,user_id:null==(U=e.data.currentUser)?void 0:U.id,permission:a.org.currentBaseOrgUser.permission,license_group_member:a.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:a.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:a.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:a.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:(null==(B=e.data.org.inviteWhitelist)?void 0:B.guestInviteSetting)||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:a.team?{id:a.team.id,name:a.team.name,img_url:"loaded"===a.team.imgUrl.status&&a.team.imgUrl.data||void 0,subscription:a.team.subscription,student_team:!!a.team.studentTeamAt,grace_period_end:a.team.gracePeriodEnd?a.team.gracePeriodEnd.toISOString():null,canRead:a.team.canRead,org_access:a.team.orgAccess}:null,orgs:w,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,c.vR)(a.org?{id:a.org.id,bigma_enabled:!!(null==(V=a.org)?void 0:V.bigmaEnabledAt)}:null,(null==(G=a.org)?void 0:G.sharedOrgLicenseGroupSetting)??(null==(H=e.data.org)?void 0:H.sharedOrgLicenseGroupSetting),null==(W=a.team)?void 0:W.workspaceSharedSetting),...y(p,r,n,i)}};function I(e){var t;return{dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentUserOrgId:e.currentUserOrgId,orgDomains:e.orgDomains,user:e.user,orgUser:e.orgUser,org:e.org,orgs:e.orgs,hideLinkAccessInfo:R(e.file),team:e.team,inWorkshop:"fullscreen"===e.selectedView.view&&((null==(t=e.selectedView.workshopModeInfo)?void 0:t.until)||new Date)>new Date}}let T=e=>{if(!e)return!1;let{accessReverted:t,expiresAt:r}=e;return!t&&!!r&&(0,a.Z)().isAfter(r)},w=e=>{var t;let r="whiteboard"!==e.editorType&&e.org&&e.org.bigma_enabled?(null==(t=e.file.mainFileLinkExpirationConfig)?void 0:t.id)??"optimistic":null;return{fileKey:e.file.key,isBranch:(0,h.kO)(e.file),containingRepo:e.repo,hasEditRole:(0,_.Q)(e.file.hasEditRole,e.file,e.isFreeUserOnly,e.isInDraftsFolder),noun:(0,h.$s)(e.file),onUpdate:(t,n,i)=>{e.dispatch(o.aF({file:{...t,key:e.file.key},onError:n,onSuccess:i,linkExpirationConfigId:r,currentUser:e.currentUser}))},permissions:e.file,mainFileLinkExpirationConfig:e.file.mainFileLinkExpirationConfig,passwordSetAt:e.file.passwordSetAt,passwordSetByUser:e.file.passwordSetByUser,isFreeUserOnly:e.isFreeUserOnly,isInDraftsFolder:e.isInDraftsFolder,isOwner:e.file.isOwner,isPublishedHubFile:e.file.isPublishedHubFile,editorType:e.editorType,sharedOrgLicenseGroupSetting:e.sharedOrgLicenseGroupSetting,isUI3:e.isUI3,...I(e)}},S=e=>{var t;let r=e.repo;if(!r)throw Error("repoAccessRowProps called on a non-repo");let n=e.org&&e.org.bigma_enabled?(null==(t=e.file.mainFileLinkExpirationConfig)?void 0:t.id)??"optimistic":null;return{isBranch:(0,h.kO)(e.file),containingRepo:r,hasEditRole:r.canEdit,noun:"file",onUpdate:(t,i,a)=>{e.dispatch(l.aF({repo:{...t,id:r.id,default_file_key:r.default_file_key},onError:i,onSuccess:a,linkExpirationConfigId:n,currentUser:e.currentUser}))},permissions:{...r,has_file_link_password:e.file.has_file_link_password,has_proto_link_password:e.file.has_proto_link_password},passwordSetAt:e.file.passwordSetAt,passwordSetByUser:e.file.passwordSetByUser,isFreeUserOnly:e.isFreeUserOnly,isInDraftsFolder:e.isInDraftsFolder,isOwner:e.file.isOwner,editorType:e.editorType,mainFileLinkExpirationConfig:e.file.mainFileLinkExpirationConfig,sharedOrgLicenseGroupSetting:e.sharedOrgLicenseGroupSetting,...I(e)}},C=(e,t)=>{let r={discoverable:e.file.org_browsable||!1,linkAccess:e.file.link_access||s.I1.INVITE_ONLY,passwordEnabled:e.file.has_file_link_password||!1};return{org:e.org||void 0,goBack:t,onUpdate:(t,r,n)=>{e.dispatch(o.aF({file:{...t,key:e.file.key},onError:r,onSuccess:n,linkExpirationConfigId:null,currentUser:e.currentUser}))},permissions:r}},O=(e,t)=>({folderRoles:e.folderRoles,team:e.team,folder:e.folder,goBack:t}),A=e=>{var t;let r=e=>({link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,team_id:e.teamId});return{filePermissions:{file_repo_id:e.fileRepoId,source_file_key:e.sourceFileKey,...r(e)},repoPermissions:e.repo&&{default_file_key:e.repo.defaultFileKey,...r(e.repo)},orgPermissions:e.org?{id:e.org.id,name:e.org.name,domain_capture:!!e.org.domainCapture,workshop_enabled:!e.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:null==(t=e.org.inviteWhitelist)?void 0:t.guestInviteSetting,figjam_disabled_at:e.org.figjamDisabledAt,shared_org_license_group_settings:(0,c.vR)({id:e.org.id,bigma_enabled:!!e.org.bigmaEnabledAt},e.org.sharedOrgLicenseGroupSetting),bigma_enabled:!!e.org.bigmaEnabledAt}:null,teamPermissions:e.team&&{name:e.team.name,canRead:e.team.canRead,org_access:e.team.orgAccess},projectPermissions:e.project&&{name:e.project.path,is_invite_only:!!e.project.inviteOnlyAt}}},N=({startingPointNodeId:e,startingPointsData:t})=>{if(t&&t.length>1&&e){let r=t.find(t=>t.id===e);if(r)return(0,m.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:r.name})}return(0,m.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")},L=({nodeType:e,selectedView:t,startingPointsData:r,numPages:n})=>{let i="prototype"===t.view,a="fullscreen"===t.view,o=(0,m.t)("permissions.copy_link_button.visual_bell.copy_file_link");if(i){let{startingPointNodeId:e}=t;o=N({startingPointNodeId:e,startingPointsData:r})}else a&&("FRAME"===e&&"design"===t.editorType?o=(0,m.t)("permissions.copy_link_button.visual_bell.copy_frame_link"):"CANVAS"===e&&n>1?o=(0,m.t)("permissions.copy_link_button.visual_bell.copy_page_link"):e&&"CANVAS"!==e&&(o=(0,m.t)("permissions.copy_link_button.visual_bell.copy_selection_link")));return o},P=(e,t)=>{if(!e)return null;let r=e.repo&&(0,h.Cq)(e,e.repo),n=(0,g.O2)(e.project),{filePermissions:i,repoPermissions:a,orgPermissions:o,projectPermissions:l,teamPermissions:s}=A(e),{level:c,audience:d,publicProto:_}=(0,u.RO)(r?a:i),f={file_repo_id:i.file_repo_id,source_file_key:null,team_id:i.team_id};if(t&&"on"===_)return{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.public_view"),access:p.Gi.PUBLIC_VIEW};if("inherit"===d&&!n||!t&&"proto-view-only"===c){let{copyLinkDisclaimer:e,access:r}=(0,p.VR)({file:(0,h.kO)(i)?f:i,team:s,org:o,folder:l,repo:a,isInDraftsFolder:n,isProtoView:t});return{tooltipText:e,access:r}}let E="view"===c;switch(d){case"public":if(t||E)return{tooltipText:t?(0,m.t)("permissions.copy_link_button.tooltip.public_view_prototype"):(0,m.t)("permissions.copy_link_button.tooltip.public_view"),access:p.Gi.PUBLIC_VIEW};return{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.public_edit"),access:p.Gi.PUBLIC_EDIT};case"public-password":if(t||E)return{tooltipText:t?(0,m.t)("permissions.copy_link_button.tooltip.public_password_view_prototype"):(0,m.t)("permissions.copy_link_button.tooltip.public_password_view"),access:p.Gi.PUBLIC_PASSWORD_VIEW};return{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.public_password_edit"),access:p.Gi.PUBLIC_PASSWORD_EDIT};case"org":case"org-browsable":if(null==o?void 0:o.name){if(t||E)return{tooltipText:t?(0,m.t)("permissions.copy_link_button.tooltip.org_view_prototype",{org:o.name}):(0,m.t)("permissions.copy_link_button.tooltip.org_view",{org:o.name}),access:p.Gi.ORG_VIEW};return{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.org_edit",{org:o.name}),access:p.Gi.ORG_EDIT}}if(t||E)return{tooltipText:t?(0,m.t)("permissions.copy_link_button.tooltip.org_view_no_name_prototype"):(0,m.t)("permissions.copy_link_button.tooltip.org_view_no_name"),access:p.Gi.ORG_VIEW};return{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.org_edit_no_name"),access:p.Gi.ORG_EDIT};case"inherit":return t?{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.people_invited_can_view_prototype"),access:p.Gi.INVITE_VIEW}:{tooltipText:(0,m.t)("permissions.copy_link_button.tooltip.people_invited_can_access"),access:p.Gi.INVITE_ACCESS}}};function R(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===s.I1.INHERIT)}function k(e,t){let r=function(e,t){let{audience:r}=(0,u.RO)(e);switch(r){case"inherit":return(0,m.t)("file_access_row.only_people_invited_to_this_noun",{noun:(0,m.t)("file_info_row.file")});case"public":return(0,m.t)("file_access_row.anyone_with_the_link");case"public-password":return(0,m.t)("file_access_row.anyone_with_the_link_and_password");case"org":return(0,m.t)("file_access_row.anyone_at_org_name_with_the_link",{orgName:t.name});case"org-browsable":return(0,m.t)("file_access_row.anyone_at_org_name",{orgName:t.name});default:(0,i.vE)(r)}}(e,t),n=function(e){let{audience:t,level:r}=(0,u.RO)(e);if("inherit"===t)return(0,m.t)("file_access_row.can_access");switch(r){case"view":return(0,m.t)("file_access_row.can_view");case"edit":return(0,m.t)("file_access_row.can_edit");case"proto-view-only":return(0,m.t)("file_access_row.can_view_prototypes");default:(0,i.vE)(r)}}(e);return`${r} ${n}`}},659994:(e,t,r)=>{r.d(t,{Fy:()=>w,L4:()=>O,O0:()=>T,Q:()=>I,QN:()=>N,SB:()=>C,YI:()=>g.Y,cj:()=>v,dI:()=>E,l5:()=>y,pV:()=>A,tu:()=>S,yw:()=>b});var n=r(407908),i=r(716250),a=r(761767),o=r(733609),l=r(413810),s=r(211879),c=r(668849);r(220958);var d=r(838903);r(999177);var u=r(451267),p=r(489859),m=r(485091),h=r(30593);r(885755);var _=r(841017),g=r(918629);function f(e,t,r=!1,n,i){let a={...e};if(!r)return a;for(let r in e)if(r in t.fileByKey){let e=i&&i.hasOwnProperty(r);(!e||i[r])&&(e||(0,o.canManageFile)(r,t,n))||delete a[r]}return a}function E(e,t){var r;return!!(null==(r=t.fileByKey[e])?void 0:r.trashed_at)}function y(e,t,r=!1,n){let i=f(e,t,r,!0,n),a={};for(let e in i)E(e,t)||(a[e]=t.fileByKey[e]);return a}function v(e,t,r=!1){let n=f(e,t,r,!0),i={};for(let e in n)E(e,t)&&(i[e]=!0);for(let r in e){let e=t.fileByKey[r];e&&null===e.folder_id&&(0,o.canEditFile)(r,t,!0)&&(i[r]=!0)}return i}function b(e,t,r=!1){let n=f(e,t,r,!0),i={};for(let e in n)e in t.fileByKey&&E(e,t)&&t.fileByKey[e].folder_id&&(i[e]=t.fileByKey[e]);return i}function I(e,t,r,n){if((0,i.BZ)().ps_benchmark){if(n&&!t.parent_org_id&&t.parent_team&&!t.parent_team.subscription||n&&!t.parent_org_id&&!t.parent_team)return!1}else if(!t.team_id&&r)return!1;return e}function T(e,t,r){if(!e)return!t;if((0,i.BZ)().ps_benchmark){if((0,_.cU)(e))return!0;if(r)return!1}return!0}function w(e,t,r,n){return t?!e&&t.invite_whitelist_guest_invite_setting!==s.lz.BANNED:T(e,r,n)}function S(e){return!!e&&!e.parent_org_id&&(e.link_access===a.I1.VIEW||e.link_access===a.I1.EDIT)}function C(e){var t;return!!e.has_file_link_password&&((t=e.link_access)===a.I1.VIEW||t===a.I1.EDIT)}function O(e){return!!e.has_proto_link_password&&e.proto_link_access===a.ur.VIEW}Date.parse("2021-04-21T15:00:00+0000");let A=e=>{let{selectedView:t,file:r,repo:n,attributionContext:i,isReadOnly:a,isFigJam:o}=e,s="prototype"===t.view,_=(0,l.Z$)(t),g=(0,d.vp)(r);if(s){let e=(0,h.i4)({nodeId:t.startingPointNodeId,showHotspots:t.showHotspots,showProtoSidebar:t.showProtoSidebar});return g?`${(0,d.f1)(r,n,"proto").href}${e}`:`${(0,m.cL)(r.key,r.name)}${e}`}if(g){let e=(0,d.f1)(r,n,"file");return _&&e.searchParams.append("node-id",(0,p._)(_)),i&&e.searchParams.append("t",i),e.href}return(0,u.z4)({file:r,nodeId:_,isDevHandoff:(0,c.NE)(t),isReadOnly:a,isFigJam:o,attributionContext:i})};function N(){return(0,n.v9)(e=>e.fileByKey)}},121108:(e,t,r)=>{r.d(t,{D:()=>_,F3:()=>g,Ii:()=>A,KC:()=>y,N6:()=>v,UA:()=>E,fy:()=>T,j$:()=>b,wc:()=>O});var n=r(652983),i=r(407908),a=r(269658),o=r(716250),l=r(810373),s=r(571529),c=r(111120),d=r(983824),u=r(626291),p=r(220183),m=r(435804);let h=["canvas","inline_menu","comment_thread","help_widget","delightful_toolbar","main_toolbar"],_="focus-next-area",g="focus-previous-area",f={canvas:null,inline_menu:null,comment_thread:null,main_toolbar:null,delightful_toolbar:null,help_widget:null};function E(e,t){f[e]=t}function y(){let e=f.canvas;return null==e||e.focus(),e}function v(e){var t;let r=null==(t=f.canvas)?void 0:t.querySelector(`[id^="accessibility-comment-pin-${e}"]`);null==r||r.focus()}function b(){var e;let t=null==(e=f.main_toolbar)?void 0:e.querySelector('[data-tooltip^="set-tool-comments"]');null==t||t.focus()}function I(e){let t,r=function(){for(let e of h)if(function(e){var t;return null!=(t=f[e])&&!!t.contains(document.activeElement)}(e))return e;return"canvas"}();for(;null==t;){let n="forward"===e?function(e){let t=h.indexOf(e),r=(t+1)%h.length;return h[r]}(r):function(e){let t;let r=h.indexOf(e);return t=0===r?h.length-1:(r-1)%h.length,h[t]}(r);if(t=function(e){var t;let r=null;switch(e){case"canvas":r=null==(t=f[e])?void 0:t.querySelector('[tabindex]:not([tabindex="-1"])');break;case"comment_thread":return null;default:r=function(e){let t=null==e?void 0:e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');return t||null}(f[e])}return r||null}(n)||f[n],r=n,"canvas"===n&&null==t){t=(0,p.Rg)();break}}return(0,o.BZ)().ee_accessibility_focus_trap&&function(e){var t,r;for(let n of(null==(t=f[e])||t.setAttribute("aria-hidden","false"),h))n!==e&&(null==(r=f[n])||r.setAttribute("aria-hidden","true"))}(r),null==t||t.focus(),t}function T(e){return w(e)||S(e)}function w(e){let t=s.ZP.mac&&(0,l.VG)(e,l.tx.CONTROL|l.tx.META),r="F6"===e.key&&(0,l.VG)(e,l.tx.CONTROL)||s.ZP.mac&&"F6"===e.key&&0===(0,l.iV)(e);return r||t&&"ArrowRight"===e.key}function S(e){let t=s.ZP.mac&&(0,l.VG)(e,l.tx.CONTROL|l.tx.META),r="F6"===e.key&&(0,l.VG)(e,l.tx.SHIFT|l.tx.CONTROL)||s.ZP.mac&&"F6"===e.key&&(0,l.VG)(e,l.tx.SHIFT);return r||t&&"ArrowLeft"===e.key}let C=(e,t,r)=>{let n=e=>{var r;e&&(null==(r=a.V)?void 0:r.getState().dropdownShown)&&t(c.kp())};if(S(e)){e.preventDefault(),e.stopPropagation();let i=I("backward");n(i),r(u.Fm.FOCUS_CYCLE_PREVIOUS_AREA,{key:e.key}),t(d.co({key:g}))}else if(w(e)){e.preventDefault(),e.stopPropagation();let i=I("forward");n(i),r(u.Fm.FOCUS_CYCLE_NEXT_AREA,{key:e.key}),t(d.co({key:_}))}};function O(){let e=(0,m.A6)(),t=(0,i.I0)(),r=(0,u.ak)();(0,n.useEffect)(()=>{if(!("fullscreen"===e.view&&"whiteboard"===e.editorType))return;let n=e=>C(e,t,r);return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t,e,r])}let A=e=>{let{e:t,onClickHandler:r,onEscapeHandler:n}=e;r&&t.keyCode===l.sr.ENTER&&r(t),n&&t.keyCode===l.sr.ESCAPE&&n(t)}},999177:(e,t,r)=>{r.d(t,{Gd:()=>y,Mz:()=>R,NP:()=>F,O2:()=>I,R_:()=>O,Rs:()=>T,TC:()=>D,Tf:()=>G,V6:()=>C,Wc:()=>H,bo:()=>M,dL:()=>v,e1:()=>b,eV:()=>E,fJ:()=>A,iF:()=>S,k4:()=>k,lU:()=>L,ll:()=>f,n3:()=>B,q5:()=>P,q7:()=>V,tR:()=>w,zT:()=>U});var n=r(716250),i=r(669277),a=r(925705),o=r(286206),l=r(117986),s=r(761767),c=r(862610),d=r(898080),u=r(733609),p=r(731436);r(656077);var m=r(166885),h=r(220958),_=r(916903);let g="temp-",f=(e,t)=>{let r=e[t];return y(r)};function E(e){let t=!!e&&""===e.path;return(0,n.BZ)().ps_benchmark?t:t&&!e.teamId}function y(e){let t=!!e&&""===e.path;return(0,n.BZ)().ps_benchmark?t:t&&!e.team_id}function v(e){return e.startsWith(g)}function b(){return`${g}${+new Date}`}function I(e){return(0,n.BZ)().ps_benchmark?(null==e?void 0:e.path)==="":(null==e?void 0:e.path)===""&&!(null==e?void 0:e.teamId)}function T(e){return(null==e?void 0:e.path)===""&&!!(null==e?void 0:e.teamId)}function w(e,t,r,n){if(!e)return null;if(n)return t[n.drafts_folder_id]||null;for(let n in t){let i=t[n],a=r[n]?r[n][e]:null;if(!i.teamId&&""===i.path&&null==i.orgId&&a&&a.level===h.V.OWNER)return i}return null}function S(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function C(e){return e&&!e.teamId&&""!==e.path&&!!e.orgId}function O(e){return(null==e?void 0:e.path)===""?(0,m.Q5)():null==e?void 0:e.path}function A(e){return void 0===e?null:""===e?(0,m.Q5)():e}function N(e,t,r){let n=r.byFolderId[e.id],i=n?Object.keys(n).map(e=>n[e]):[],a=i.find(e=>e.level===h.V.OWNER);return{folderId:e.id,folderName:O(e),teamName:e.teamId&&t[e.teamId]?t[e.teamId].name:"",ownerHandle:a&&!1===a.pending?a.user.handle:""}}function L(e,t,r,n){t=t.filter(t=>t.id!==e.id);let i=N(e,r,n),a=t.map(e=>N(e,r,n)),o=a.filter(e=>e.folderName===i.folderName);if(0===o.length)return;let l=o.filter(e=>e.teamName===i.teamName);if(i.teamName&&0===l.length)return i.teamName;let s=l.filter(e=>e.ownerHandle===i.ownerHandle);if(i.ownerHandle&&0===s.length)return i.ownerHandle}function P(e,t,r){let n=new Date(e.touched_at||e.updated_at);return t[e.id]?t[e.id].filter(e=>e in r).map(e=>{let t=r[e];if(!t)return(0,o.Jz)(l.k.EXPLORE,Error("fileByKey[fileKey] is undefined in getLastUpdatedTime")),null;let n=t.touched_at||t.updated_at;return n?new Date(n):((0,o.Jz)(l.k.EXPLORE,Error("file.touched_at and file.updated_at are both nullish in getLastUpdatedTime")),null)}).reduce((e,t)=>t?e>t?e:t:e,n):n}function R(e,t){return null!=t&&t in e}function k(e,t){return t.fileKeysByFolderId[e]&&0===t.fileKeysByFolderId[e].length&&t.repoIdsByFolderId[e]&&0===t.repoIdsByFolderId[e].length}function D(e,t){let r=t.folders[e];if(r&&r.org_id)return r.org_id;if(r&&r.team_id){let e=t.teams[r.team_id];if(e&&e.org_id)return e.org_id}}function M(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function F(e,t,r,n,i,a,o,l){let c=t[e]||{id:e},p=n[e]||[],m=o[e]||[],h={};return m.forEach(e=>{h[e]=(i[e]||[]).map(e=>r[e]).filter(Boolean).sort((e,t)=>new Date(t.touched_at).getTime()-new Date(e.touched_at).getTime())}),{...c,files:p.map(e=>r[e]).filter(Boolean).sort((e,t)=>new Date(t.touched_at).getTime()-new Date(e.touched_at).getTime()),repos:m.map(e=>a[e]).filter(Boolean),filesByRepoId:h,canEdit:(0,u.canEditFolder)(c.id,l),canCreateWhiteboardFile:(0,u.canCreateFile)(c.id,l,s.gg.WHITEBOARD),canCreateDesignFile:(0,u.canCreateFile)(c.id,l,s.gg.DESIGN),canView:(0,u.canViewFolder_DEPRECATED)(c.id,l),isEditingLocked:(0,d.yH)(c,l),team:c.team_id&&l.teams[c.team_id]||null}}let x={filters:{creator:_.FN.ANY,fileType:_.$Q.ANY},sort:{key:_.BO.TOUCHED_AT,dir:_.qP.DESC}};function U(e,t){return{tileSortFilterConfig:t.folders.byId[e]||x,sortKeys:[_.BO.NAME,_.BO.CREATED_AT,_.BO.TOUCHED_AT]}}function B(e,t,r,i){var a;if(!(0,n.BZ)().ps_benchmark)return(0,p.DS)(e,t);let o=r&&(0,u.canViewTeam)(r,i);return t?`${location.origin}/files/${t}/project/${e}`:o?`${location.origin}/files/team/${r}/project/${e}`:(null==(a=i.user)?void 0:a.personal_drafts_folder_id)===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function V(e){return!!e&&!!e.team_id&&!e.path}function G(e){return!!e&&!!e.teamId&&!e.path}function H(e,t){let r=(0,i.mU)(c.ProjectOwnerRole,{projectId:e.id});return"loaded"===r.status&&"loaded"!==r.data.project.status?a.IE.loading():r.transform(r=>{var n;if("loaded"!==r.project.status)return!1;let i=!!(null==(n=r.project.data)?void 0:n.ownerRole);return!i&&!!e.team_id&&(0,u.hasAdminRoleAccessOnTeam)(e.team_id,t)})}},975975:(e,t,r)=>{let n;r.d(t,{KX:()=>b,UV:()=>g,Ze:()=>_,g7:()=>n});var i,a,o,l=r(141757),s=r(768358),c=r(970740),d=r(644383),u=r(961215),p=r(605508),m=r(18707),h=r(527700);let _="accessibility-screen-reader-announcement",g="selection";var f=((i=f||{})[i.NONE=0]="NONE",i[i.UP=1]="UP",i[i.DOWN=2]="DOWN",i[i.RIGHT=4]="RIGHT",i[i.LEFT=8]="LEFT",i[i.UP_RIGHT=5]="UP_RIGHT",i[i.UP_LEFT=9]="UP_LEFT",i[i.DOWN_RIGHT=6]="DOWN_RIGHT",i[i.DOWN_LEFT=10]="DOWN_LEFT",i),E=((a=E||{})[a.NONE=0]="NONE",a[a.HORIZONTAL=1]="HORIZONTAL",a[a.VERTICAL=2]="VERTICAL",a[a.BOTH=3]="BOTH",a),y=((o=y||{})[o.NONE=0]="NONE",o[o.DECREASED=1]="DECREASED",o[o.INCREASED=2]="INCREASED",o);class v{constructor(e){this.store=e,this.debounceNodeResizeUpdate=(0,s.D)(e=>{this.announceDomChange(u.MpF.NODE_RESIZED,e);let t=u.GZy.getActiveDocument();u.lI7.resetStoredSelectedNodeBounds(t)},200),this.debounceNodeMovementUpdate=(0,s.D)(e=>{this.announceDomChange(u.MpF.NODE_MOVED,e);let t=u.GZy.getActiveDocument();u.lI7.resetStoredSelectedNodeBounds(t)},200)}announceDomChange(e,t){let r=this.store.getState();if(!r.screenreader.enabled)return;let n=function(e,t,r){let n=t.targetNodeType?I(t.targetNodeType):"";switch(e){case u.MpF.NODE_CREATED:if(t.targetNodeType!==u.Jqs.STAMP||!t.stickableHostType)return(0,c.t)("fullscreen.accessibility.node_created_announcement",{node_type:n});{let e=(0,c.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:I(t.stickableHostType)});return e}case u.MpF.NODE_DELETED:return t.multiSelection?(0,c.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,c.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:n});case u.MpF.TEXT_SELECTION:return(0,c.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:n});case u.MpF.TOOL:if(t.targetNodeType===u.Jqs.STAMP)return;return t.targetNodeType!==u.Jqs.NONE?(0,c.t)("fullscreen.accessibility.tool_selected",{nodeType:n,shortcut:(0,p.bQ)(r,"toggle-menu")}):(0,c.t)("fullscreen.accessibility.tool_unselected");case u.MpF.TABLE_CELL_TEXT_SELECTION:if(null!=t.tableCellCol&&null!=t.tableCellRow)return(0,c.t)("fullscreen.accessibility.next_table_cell_announcement",{r:t.tableCellRow,c:t.tableCellCol});return(0,c.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:n});case u.MpF.NODE_RESIZED:let i,a,o;let l=t.nodeSizeDelta;if(!l)return;let s=0,d=0,m=0;switch(0!==l.x&&(s|=1,d=l.x>0?2:1),0!==l.y&&(s|=2,m=l.y>0?2:1),s){case 0:return;case 1:i=(0,c.t)("fullscreen.accessibility.node_resize_horizontal"),a=T(d),o=Math.abs(l.x);break;case 2:i=(0,c.t)("fullscreen.accessibility.node_resize_vertical"),a=T(m),o=Math.abs(l.y);break;default:let h=Math.abs(l.x),_=T(d),g=Math.abs(l.y),f=T(m);return(0,c.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:n,resizedComparisonX:_,nodeResizeXDelta:(0,c.t)("fullscreen.accessibility.node_unit",{numUnits:h}),resizedComparisonY:f,nodeResizeYDelta:(0,c.t)("fullscreen.accessibility.node_unit",{numUnits:g})})}return(0,c.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:n,nodeSizeDelta:o,resizeComparison:a,nodeDirection:i});case u.MpF.NODE_MOVED:let E,y,v=0,b=t.nodeMovementDelta;if(!b)return;switch(b.x>0?v|=4:b.x<0&&(v|=8),b.y<0?v|=1:b.y>0&&(v|=2),v){case 0:return;case 1:E=(0,c.t)("fullscreen.accessibility.node_movement_up"),y=Math.abs(b.y);break;case 2:E=(0,c.t)("fullscreen.accessibility.node_movement_down"),y=Math.abs(b.y);break;case 4:E=(0,c.t)("fullscreen.accessibility.node_movement_right"),y=Math.abs(b.x);break;case 8:E=(0,c.t)("fullscreen.accessibility.node_movement_left"),y=Math.abs(b.x);break;default:let w=(4&v)==4?(0,c.t)("fullscreen.accessibility.node_movement_right"):(0,c.t)("fullscreen.accessibility.node_movement_left"),S=Math.abs(b.x),C=(1&v)==1?(0,c.t)("fullscreen.accessibility.node_movement_up"):(0,c.t)("fullscreen.accessibility.node_movement_down"),O=Math.abs(b.y);return(0,c.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:n,nodePositionXDelta:(0,c.t)("fullscreen.accessibility.node_unit",{numUnits:S}),nodeDirectionX:w,nodePositionYDelta:(0,c.t)("fullscreen.accessibility.node_unit",{numUnits:O}),nodeDirectionY:C})}return(0,c.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:n,nodePositionDelta:y,nodeDirection:E});default:return}}(e,t,r.mirror.appModel.keyboardShortcuts),i=function(e){switch(e){case u.MpF.NODE_CREATED:case u.MpF.NODE_DELETED:return"creation-deletion";case u.MpF.NODE_RESIZED:return"resize";case u.MpF.NODE_MOVED:return"movement";case u.MpF.TEXT_SELECTION:case u.MpF.TABLE_CELL_TEXT_SELECTION:return g;case u.MpF.TOOL:return"tool";default:return}}(e);n&&i&&this.store.dispatch(d.R.enqueue({type:`${_}-${i}`,message:n,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getAPCAContrast(e,t){return(0,l._g)((0,h.QV)(e),(0,h.QV)(t))}}function b(e){n=new v(e)}function I(e){let t=u.Jqs[e];return(0,m.E)(t)}function T(e){switch(e){case 1:return(0,c.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,c.t)("fullscreen.accessibility.node_resize_increase");default:return(0,c.t)("fullscreen.accessibility.node_resize_none")}}},244770:(e,t,r)=>{r.d(t,{Kx:()=>l,TC:()=>a,UJ:()=>o});var n,i=r(337167),a=((n=a||{}).NotStarted="Onboarding Not Started",n.AnimationPlaying="Animation Playing",n.AnimationComplete="Animation Complete",n.PrototypePlayed="Prototype Played",n);let o=(0,i.cn)("Onboarding Not Started"),l=(0,i.cn)(void 0)},622003:(e,t,r)=>{r.d(t,{DW:()=>o,JT:()=>l,LF:()=>a,je:()=>s});var n=r(337167),i=r(451573);let a=(0,i.cg)(e=>e.user),o=(0,n.cn)(e=>{var t;return null==(t=e(a))?void 0:t.id}),l=(0,n.cn)(e=>{var t;return null==(t=e(a))?void 0:t.created_at});(0,i.cg)(e=>e.userStateLoaded);let s=(0,i.cg)(e=>e.isStarterUser)},368337:(e,t,r)=>{r.d(t,{Bq:()=>c,Es:()=>f,II:()=>l,NS:()=>d,PD:()=>p,RM:()=>y,T8:()=>E,Tv:()=>s,_R:()=>_,pO:()=>u,sY:()=>h,xp:()=>g,yT:()=>m});var n=r(196401),i=r(523495),a=r(765745),o=r(961215);let l="<!--(figma)",s="(/figma)-->",c='<span data-buffer="'+l,d=s+'"></span>',u="<!--(figmeta)",p="(/figmeta)-->",m='<span data-metadata="'+u,h=p+'"></span>';function _(e,t,r){let a='<meta charset="utf-8">'+c+(0,n.cv)(t)+d+(0,i.s2)(r);try{e.setData("text/html",a)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function g(e){let t;try{t=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let t=e.indexOf(l),r=e.indexOf(s);return t>=0&&r>=0&&t<r?(0,n.Jx)(e.slice(t+l.length,r)):null}(t)}function f(e){var t;return!!(null==(t=e.clipboardData)?void 0:t.getData("text/html").includes(l))}function E(e,t){let r=a.f.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...t}]});return o.iTB.encodeClipboardData(r)}function y(e){return a.f.decodeMessage(o.iTB.decodeClipboardData(e))}},527700:(e,t,r)=>{function n(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let t=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,r=2*e.l-t,n=[0,0,0];for(let i=0;i<3;i++){let a=e.h+-(1/3*(i-1));a<0&&a++,a>1&&a--,6*a<1?n[i]=r+(t-r)*6*a:2*a<1?n[i]=t:3*a<2?n[i]=r+(t-r)*(2/3-a)*6:n[i]=r}return{r:n[0],g:n[1],b:n[2],a:e.a}}function i(e){let t=e.r,r=e.g,n=e.b,i=Math.min(Math.min(t,r),n),a=Math.max(Math.max(t,r),n),o=a-i,l=0;a===i?l=0:t===a?l=(r-n)/o:r===a?l=2+(n-t)/o:n===a&&(l=4+(t-r)/o),(l=Math.min(60*l,360))<0&&(l+=360),l/=360;let s=(i+a)/2;return{h:l,s:a===i?0:s<=.5?o/(a+i):o/(2-a-i),l:s,a:e.a}}function a(e){let t=(e.h-Math.floor(e.h))*6,r=e.v*e.s,n=r*(1-Math.abs(t%2-1)),i=e.s<=0?0:t<1?r:t<2?n:t<3?0:t<4?0:t<5?n:r,a=e.s<=0?0:t<1?n:t<2?r:t<3?r:t<4?n:0,o=e.s<=0?0:t<1?0:t<2?0:t<3?n:t<4?r:t<5?r:n,l=e.v-r;return{r:i+l,g:a+l,b:o+l,a:e.a}}function o(e){let t=Math.max(Math.max(e.r,e.g),e.b),r=Math.min(Math.min(e.r,e.g),e.b),n=t-r,i=(0===n?0:t===e.r?((e.g-e.b)/n+6)%6:t===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6;return{h:i,s:0===t?0:n/t,v:t,a:e.a}}function l(e){return"l"in e?n(e):a(e)}function s(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function c(e){return 255&(e>0?255*e+.5:0)}function d(e,t,r,n){return c(e)|c(t)<<8|c(r)<<16|c(n)<<24}function u(e,t,r){return c(e)|c(t)<<8|c(r)<<16|-16777216}function p(e){return c(e.red)|c(e.green)<<8|c(e.blue)<<16|c(e.alpha)<<24}function m(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function h(e,t){let r=e.alpha,n=t.alpha,i=r*(1-n),a=i+n,o=i/a,l=n/a;return{red:e.red*o+t.red*l,green:e.green*o+t.green*l,blue:e.blue*o+t.blue*l,alpha:a}}function _(e,t){return!!e&&!!t&&d(e.r,e.g,e.b,e.a)===d(t.r,t.g,t.b,t.a)}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,t){let r=[];for(let n=0;n<3;n++)r.push(e[n][0]*t[0]+e[n][1]*t[1]+e[n][2]*t[2]);return r}function y(e){let t={l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a};return v(t)}function v(e){let t=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),r=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],t.map(e=>e**3)),n=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],r),i=n.map(function(e){let t=Math.abs(e);return t>.0031308?(e<0?-1:1)*(1.055*Math.pow(t,1/2.4)-.055):12.92*e});return{r:i[0],g:i[1],b:i[2],a:e.a}}r.d(t,{$F:()=>v,E0:()=>g,NH:()=>h,Ol:()=>m,QV:()=>f,RT:()=>l,XJ:()=>p,YN:()=>a,aw:()=>n,e_:()=>u,he:()=>o,lA:()=>_,pV:()=>i,p_:()=>s,z9:()=>y})},257026:(e,t,r)=>{r.d(t,{cF:()=>u,o_:()=>h,qk:()=>m});var n,i,a=r(716250),o=r(286206),l=r(92410),s=((n=s||{})[n.Unknown=0]="Unknown",n[n.No=1]="No",n[n.Yes=2]="Yes",n);let c=0,d=(e,t)=>{if(e.canvas.width!==t.canvas.width||e.canvas.height!==t.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in t&&"display-p3"!==t.getContextAttributes().colorSpace&&!((0,a.BZ)().ee_color_management_force_canvas&&"srgb"===t.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[r,n]=[t.canvas.width,t.canvas.height],i=e.getImageData(0,0,r,n),o=new ImageData(i.data,i.width,i.height,{colorSpace:"getContextAttributes"in e?t.getContextAttributes().colorSpace:"srgb"});t.clearRect(0,0,r,n),t.putImageData(o,0,0)},u=(e,t)=>{if("srgb"===t)return e.getContext("2d");{let r=(0,l.KK)();return e.getContext("2d",{colorSpace:r?"srgb":t})}},p=null==(i=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0}))?void 0:i.canvas,m=({canvas:e,canvasWidth:t,canvasHeight:r,renderCanvas:n,value:i,colorSpace:u,initializeCanvasColorSpace:m=!1})=>{m&&e.getContext("2d",{colorSpace:u});let h=(0,a.BZ)().ee_color_management_force_canvas||(0,l.KK)();if(h&&1!==c){if(p){p.width=t,p.height=r,n(p,i);let u=p.getContext("2d"),m=e.getContext("2d");if(u&&m)try{d(u,m),0===c&&(c=2)}catch{(0,o.YK)("color management","polyfill failed",{ee_color_management_force_canvas:(0,a.BZ)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,l.KK)(),is2dCanvasPolyfillSupportedByBrowser:s[c]}),n(e,i),c=1}}}else n(e,i)};function h(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},640083:(e,t,r)=>{r.d(t,{B:()=>o,G:()=>l});var n=r(961215),i=r(980924);function a(e,t){switch(e){case"DOCUMENT":return t;case"SRGB":return n.qVx.SRGB;case"DISPLAY_P3_V4":return n.qVx.DISPLAY_P3}}function o(e,t){var r;if(1===e.length)return a(e[0].colorProfile??"DOCUMENT",t);{let n=(null==(r=e[0])?void 0:r.colorProfile)??"DOCUMENT";for(let t of e)if((t.colorProfile??"DOCUMENT")!==n){n="DOCUMENT";break}return a(n,t)}}function l(e,t){switch(e){case n.G7D.LEGACY:return t===i.J.DISPLAY_P3?n.qVx.DISPLAY_P3:n.qVx.SRGB;case n.G7D.SRGB:return n.qVx.SRGB;case n.G7D.DISPLAY_P3:return n.qVx.DISPLAY_P3}}},429880:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(286206),i=r(961215),a=r(218280);let o=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,t)=>{let r=e.drawingBufferColorSpace;switch(t){case i.qVx.SRGB:if("srgb"===r)return;e.drawingBufferColorSpace="srgb",a.r.setCanvasColorProfile(i.qVx.SRGB);break;case i.qVx.DISPLAY_P3:if("display-p3"===r)return;e.drawingBufferColorSpace="display-p3",a.r.setCanvasColorProfile(i.qVx.DISPLAY_P3);break;default:(0,n.YD)("color management","unsupported color space",{targetColorSpace:t})}}}onFrame(){this.onFrameCb&&this.onFrameCb(),this.onFrameCb=null}queueSwitchWebglColorSpace(e,t,r){"mirror"===r?this.switchWebglColorSpace(e,t):this.onFrameCb=()=>{this.switchWebglColorSpace(e,t)}}}},916241:(e,t,r)=>{r.d(t,{Xn:()=>b,W9:()=>T,m7:()=>C,sB:()=>O,jo:()=>y,uq:()=>v});var n=r(652983),i=r(716250),a=r(337167),o=r(132630),l=r(158774),s=r(961215),c=r(179438),d=r(572333),u=r(257026),p=r(918779),m=r(640083),h=r(429880);let _=(0,a.cn)(!1);function g(e){let[t,r]=(0,a.KO)(_);return n.useEffect(()=>{t&&r(!1)},[t,r]),t?null:n.createElement(n.Fragment,null,e.children)}var f=r(467342);let E=n.createContext({canvasColorProfile:s.qVx.SRGB,documentColorProfile:s.G7D.LEGACY,documentExportColorProfile:s.qVx.SRGB});function y(){return n.useContext(E).canvasColorProfile}function v(){return n.useContext(E).documentColorProfile}let b=E.Consumer;function I(e){let{children:t,colorManagementStateJs:r}=e,i=(0,d.YO)(null==r?void 0:r.documentColorProfile(),s.G7D.LEGACY),a=(0,p.V)(i),{colorProfilePreference:o}=(0,f.oQ)(),l=n.useMemo(()=>({documentColorProfile:i,documentExportColorProfile:(0,m.G)(i,o),canvasColorProfile:a}),[o,i,a]);return n.createElement(E.Provider,{value:l},t)}function T(e){return(0,f.oQ)(),n.createElement(I,{colorManagementStateJs:s.KjV},e.children)}function w({target:e,viewer:t}){let[r,a]=n.useState(null),o=n.useCallback(()=>{if(r)return!0;let t=(0,u.o_)(e);if(t){let e=(0,i.BZ)().use_webgl2?t.getContext("webgl2"):t.getContext("webgl");return a(e),!0}return!1},[e,r]);n.useEffect(()=>{if(!o())switch(e){case"fullscreen":case"mobile-viewer":l.Gr.onReady().then(()=>{o()});break;case"prototype":case"mirror":t&&t.on("documentIsLoaded",()=>{o()})}},[o,e,t]);let s=y();return n.useEffect(()=>{r&&h.p.queueSwitchWebglColorSpace(r,s,e)},[s,e,r]),null}function S({viewer:e,target:t}){return n.createElement(o.SV,{boundaryKey:"color-management",fallback:o.NY.DEFAULT_FULL_PAGE,hasCustomWASMBuild:c.hU},n.createElement(a.Od,null,n.createElement(g,null,n.createElement(T,null,n.createElement(w,{target:t,viewer:e})))))}function C(){return n.createElement(S,{target:"fullscreen"})}function O({viewer:e}){return n.createElement(S,{target:"prototype",viewer:e})}},92410:(e,t,r)=>{r.d(t,{EV:()=>d,KK:()=>p,Ln:()=>E,TI:()=>h,gr:()=>l});var n=r(652983),i=r(239299),a=r(961215),o=r(493866);let l=e=>{switch(e){case a.qVx.SRGB:return"srgb";case a.qVx.DISPLAY_P3:return"display-p3";default:throw Error(`unrecognized color profile: ${e}`)}},s=(0,o.t)(e=>{try{if(e===a.qVx.SRGB)return!0;let t=document.createElement("canvas"),r=t.getContext("webgl");if(!r)throw Error("failed to create webgl canvas context to determine support");if(!("drawingBufferColorSpace"in r))throw Error("webgl context does not contain drawingBufferColorSpace attribute");let n=l(e);if(r.drawingBufferColorSpace=n,r.drawingBufferColorSpace!==n)throw Error(`webgl context does not support color space: ${n}`);return!0}catch(e){return!1}}),c=(0,o.t)(e=>{try{if(e===a.qVx.SRGB)return!0;let t=document.createElement("canvas"),r=l(e),n=t.getContext("2d",{colorSpace:r});if(n){if("getContextAttributes"in n){if(n.getContextAttributes().colorSpace!==r)throw Error("2d canvas context does not match the desired color space")}else throw Error("2d canvas context does not support getContextAttributes")}else throw Error("failed to create 2d canvas context to determine support");let i=p();if(i){let e=new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1,{colorSpace:r});if(!("colorSpace"in e)||e.colorSpace!==r)throw Error(`image does not support color space: ${r}`)}return!0}catch(e){return!1}}),d=()=>"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("color","color(display-p3 1 1 1)"),u=()=>window.matchMedia("(color-gamut: p3)").matches,p=()=>!d(),m=async()=>{if(!i.YO)return;let e=await i.YO.getActiveNSScreens();if(e){for(let t of e)if(!t.isCurrentWindow&&t.canRepresentDisplayGamutP3)return t.localizedName}};function h(e){switch(e.status){case"SupportedNatively":case"SupportedWithPolyfill":return!0;case"MonitorNotSupported":case"ClientNotSupported":return!1}}let _=()=>{let[e,t]=n.useState();return n.useEffect(()=>{m().then(t)},[]),e},g=()=>{let[e,t]=n.useState(u());return n.useEffect(()=>{let e=setInterval(()=>{t(u())},5e3);return()=>{clearInterval(e)}},[]),e},f=()=>i.YO&&"unmanaged"===i.YO.getColorSpace(),E=()=>{let e=n.useMemo(()=>s(a.qVx.DISPLAY_P3),[]),t=n.useMemo(()=>c(a.qVx.DISPLAY_P3),[]),r=n.useMemo(()=>d(),[]),o=f(),l=_(),u=g();return e&&t?o?{status:"ClientNotSupported",diagnostics:{client:"desktop-app",shouldRestartDesktopAppInManagedColorSpace:!0}}:u?r?{status:"SupportedNatively",diagnostics:null}:{status:"SupportedWithPolyfill",diagnostics:null}:{status:"MonitorNotSupported",diagnostics:{alternativeMonitorName:l}}:{status:"ClientNotSupported",diagnostics:{client:i.YO?"desktop-app":"browser"}}}},467342:(e,t,r)=>{r.d(t,{NR:()=>E,NT:()=>v,P_:()=>b,WN:()=>f,Xv:()=>_,oQ:()=>y});var n=r(652983),i=r(237863),a=r(269658),o=r(337167),l=r(769865),s=r(303498),c=r(31642),d=r(448694),u=r(761767),p=r(961215),m=r(980924);let h={colorProfilePreference:u.mV.DEFAULT,id:""},_=(0,i.e)("USER_UPDATE_COLOR_PROFILE"),g=(0,o.cn)(e=>{var t,r,n,i,o,s,c,d,p,g,f,E,y;let v=e(l.cp.UserColorProfilePreferenceView({})),b=h.colorProfilePreference;"loading"===v.status&&void 0!==a.V&&(null==(n=null==(r=null==(t=a.V)?void 0:t.getState())?void 0:r.user)?void 0:n.color_profile)?b=null==(i=a.V.getState().user)?void 0:i.color_profile:(null==(s=null==(o=v.data)?void 0:o.userColorProfilePreference)?void 0:s.colorProfilePreference)&&(b=null==(d=null==(c=v.data)?void 0:c.userColorProfilePreference)?void 0:d.colorProfilePreference);let I={colorProfilePreference:function(e){switch(e){case u.mV.DEFAULT:return m.J.DEFAULT;case u.mV.SRGB:return m.J.SRGB;case"display-p3":case u.mV.DISPLAY_P3:return m.J.DISPLAY_P3}}(b),id:(null==(g=null==(p=v.data)?void 0:p.userColorProfilePreference)?void 0:g.id)??h.id};return void 0!==a.V&&(null==(y=null==(E=null==(f=a.V)?void 0:f.getState())?void 0:E.user)?void 0:y.color_profile)!==I.colorProfilePreference&&a.V.dispatch(_({color_profile:I.colorProfilePreference})),I});function f(e){switch(e){case m.J.DEFAULT:case m.J.SRGB:return p.qVx.SRGB;case m.J.DISPLAY_P3:return p.qVx.DISPLAY_P3}}function E(){return o.n_.get(g)}function y(){return(0,o.Dv)(g)}function v({colorProfilePreference:e,id:t,eventName:r="user_manual_change",additionalDataToLog:n}){var i,o,l;if(e===h.colorProfilePreference)return;!function(e){let t=a.V.getState();(0,d.iP)("color_profile_preference",t,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:t},eventName:r,additionalDataToLog:n});let u=void 0!==t,p=c.ZP.put("/api/user",{color_profile:e});if(u)null==(i=(0,s.i0)())||i.optimisticallyUpdate({UserColorProfilePreference:{[t]:{colorProfilePreference:e}}},p);else{let t=null==(o=a.V.getState().user)?void 0:o.id;if(!t)return;null==(l=(0,s.i0)())||l.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:t,createdAt:new Date,updatedAt:new Date}}},p)}}function b(){let e=y(),t=n.useCallback((t,r)=>{e.colorProfilePreference===m.J.DEFAULT&&v({colorProfilePreference:t,id:e.id,eventName:`default_to_${t===m.J.SRGB?"srgb":"p3"}`,additionalDataToLog:{desktopSetting:r.desktopSetting,p3Plugins:r.p3Plugins?Object.values(r.p3Plugins):null,canSeeP3:r.canSeeP3}})},[e.colorProfilePreference,e.id]);return t}},961215:(e,t,r)=>{let n,i,a,o,l,s,c,d,u,p,m,h,_,g,f,E,y,v,b,I,T,w,S,C,O,A,N,L,P,R,k,D,M,F,x,U,B,V,G,H,W,K,z,Z,Y,j,$,q,X,J,Q,ee,et,er,en,ei,ea,eo,el,es,ec,ed,eu,ep,em,eh,e_,eg,ef,eE,ey,ev,eb,eI,eT,ew,eS,eC,eO,eA,eN,eL,eP,eR,ek,eD,eM,eF,ex,eU,eB,eV,eG,eH,eW,eK,ez,eZ,eY,ej,e$,eq,eX,eJ,eQ,e0,e1,e2,e3,e4,e6,e8,e9,e5,e7,te,tt,tr,tn,ti,ta,to,tl,ts,tc,td,tu,tp,tm,th,t_,tg,tf,tE,ty,tv,tb,tI,tT,tw,tS,tC,tO,tA,tN,tL,tP,tR,tk,tD,tM,tF,tx,tU,tB,tV,tG,tH,tW,tK,tz,tZ,tY,tj,t$,tq,tX,tJ,tQ,t0,t1,t2;r.d(t,{$YG:()=>sa,$zR:()=>h,A$U:()=>te,AGs:()=>cd,AWX:()=>d$,AZo:()=>cQ,AgT:()=>cE,AqF:()=>p,B5h:()=>dZ,B9x:()=>J,BbG:()=>eB,Bch:()=>sD,Bk$:()=>si,BkA:()=>dv,Cdu:()=>eb,Cj$:()=>Q,Cxf:()=>dj,DW:()=>dc,Dey:()=>cW,Dhn:()=>du,DlH:()=>cm,DnI:()=>dD,E$G:()=>c$,E6o:()=>cJ,EcW:()=>dB,Ekn:()=>Y,F3D:()=>eV,F_s:()=>e9,G09:()=>cT,G3C:()=>d_,G7D:()=>dA,GZy:()=>e5,Glg:()=>sP,HEw:()=>eL,HH3:()=>tr,Hkp:()=>eM,Hn$:()=>ce,Hoy:()=>ck,I7V:()=>sR,IKj:()=>A,Iyz:()=>s,J9h:()=>ui,JDv:()=>sF,JTH:()=>dS,JZ:()=>B,JiX:()=>de,Jqs:()=>c6,KBY:()=>cf,Kb2:()=>cD,KjV:()=>ex,LPV:()=>sg,LcN:()=>df,M6J:()=>ul,MI2:()=>sx,Mk1:()=>cs,MpF:()=>d1,Mpp:()=>sS,N4G:()=>eJ,NQw:()=>sj,Nho:()=>cG,Nw4:()=>sX,O$1:()=>o,OB1:()=>e8,OEV:()=>tn,OQM:()=>ur,Od1:()=>dP,OoJ:()=>M,PHY:()=>un,Q6D:()=>eO,QC$:()=>uo,QC6:()=>cH,QIK:()=>eR,QJA:()=>cy,RC$:()=>cF,RDh:()=>cz,Rel:()=>u_,RgQ:()=>dq,Rmy:()=>s2,Rt0:()=>cX,RtJ:()=>eU,SF1:()=>s6,SS5:()=>eE,SYY:()=>dy,SgM:()=>eK,T7X:()=>c2,T9q:()=>c9,TG8:()=>cw,TGF:()=>i,T_d:()=>co,Tcs:()=>ec,TeU:()=>sv,U4p:()=>dd,UAh:()=>s4,UMq:()=>cC,UnT:()=>dI,Uqv:()=>dn,UuS:()=>sE,Uv3:()=>eG,V5$:()=>cq,VCl:()=>s$,VmB:()=>cg,Vr8:()=>k,W6W:()=>ew,W9r:()=>ct,WSu:()=>dl,X3D:()=>s9,X9P:()=>cU,XB7:()=>dE,XMT:()=>s0,XVA:()=>us,XZt:()=>eT,Xd8:()=>O,Xft:()=>cr,Xxb:()=>X,Yii:()=>dr,Yrh:()=>T,Z$h:()=>cu,ZYE:()=>sc,ZYh:()=>l,Z_q:()=>sy,_T3:()=>sb,_Ze:()=>dg,__5:()=>ez,_pb:()=>cI,a5C:()=>D,aB6:()=>cl,aVW:()=>cP,aVt:()=>s_,ayJ:()=>ug,bL6:()=>eD,bN1:()=>sJ,bcd:()=>dk,bgM:()=>dp,bhu:()=>cj,bvS:()=>dQ,c2e:()=>eY,c6b:()=>dw,cGt:()=>s7,cGx:()=>eu,cI0:()=>a,cLY:()=>sn,cVA:()=>cK,cXD:()=>cL,caZ:()=>sk,dCf:()=>eo,dEA:()=>sw,dWo:()=>dV,dxT:()=>sI,e49:()=>dx,e9h:()=>sL,evN:()=>g,evj:()=>eW,f3X:()=>d6,f5F:()=>sQ,fij:()=>sm,fjq:()=>sU,fs0:()=>er,gJw:()=>ep,gYv:()=>dR,ggh:()=>cO,gng:()=>e7,hGO:()=>db,hKT:()=>cp,hcX:()=>f,i0b:()=>es,i4T:()=>sM,iCX:()=>dG,iS6:()=>dt,iTB:()=>x,iVe:()=>eC,io9:()=>el,j8G:()=>ey,jCr:()=>v,jp6:()=>d2,k8B:()=>z,k9g:()=>so,kBf:()=>c0,kZC:()=>s1,klA:()=>d0,kzF:()=>b,lI7:()=>eQ,lhE:()=>ca,mJO:()=>eI,n$W:()=>cS,ni0:()=>c7,nxi:()=>sr,o1t:()=>sO,oF7:()=>uf,ohq:()=>sd,oum:()=>cN,ovO:()=>s5,p7T:()=>sC,pAX:()=>c5,pKO:()=>c4,pRH:()=>ut,pZy:()=>ef,plG:()=>eh,py8:()=>dU,qEh:()=>su,qVx:()=>dO,qjA:()=>d4,qjD:()=>eS,qrj:()=>ch,qwB:()=>s8,qyG:()=>F,qzo:()=>sp,rRq:()=>c8,s2B:()=>di,s8o:()=>cA,syY:()=>dM,tKz:()=>sl,tO8:()=>$,tQx:()=>dK,taE:()=>cb,tkz:()=>dh,twY:()=>uh,twc:()=>cV,tyy:()=>dC,uHp:()=>ed,uZu:()=>s3,udz:()=>ej,vKn:()=>R,vT4:()=>sA,vX5:()=>L,vdY:()=>c3,vor:()=>ev,vp:()=>ua,wGE:()=>ss,wPU:()=>dm,x1N:()=>ds,xAX:()=>U,xOj:()=>dW,xTW:()=>dY,xYI:()=>q,xs8:()=>dJ,y8o:()=>cv,yMe:()=>dL,yte:()=>sB,zPy:()=>dF,zl6:()=>dX,zor:()=>cn,zrQ:()=>da,ztI:()=>sV});class t3{constructor(e){this.handle=e}}class t4 extends t3{constructor(e){super(e),this.handle=e}}class t6{constructor(e){this.handle=e}get someBool(){return c.__getProperty_someBool(this.handle)}}class t8 extends t6{constructor(e){super(e),this.handle=e}set someBool(e){c.__setProperty_someBool(this.handle,e)}get someBool(){return super.someBool}}class t9{constructor(e){this.handle=e}get someNumber(){return d.__getProperty_someNumber(this.handle)}get nested(){return d.__getProperty_nested(this.handle)}}class t5 extends t9{constructor(e){super(e),this.handle=e}set someNumber(e){d.__setProperty_someNumber(this.handle,e)}get someNumber(){return super.someNumber}}class t7{constructor(e){this.handle=e}}class re extends t7{constructor(e){super(e),this.handle=e}}class rt{constructor(e){this.handle=e}get showOutlines(){return _.__getProperty_showOutlines(this.handle)}get showOutlineObjectBounds(){return _.__getProperty_showOutlineObjectBounds(this.handle)}get showOutlineHiddenLayers(){return _.__getProperty_showOutlineHiddenLayers(this.handle)}get activeCanvasCurrentZoom(){return _.__getProperty_activeCanvasCurrentZoom(this.handle)}get activeCanvasRetinaMode(){return _.__getProperty_activeCanvasRetinaMode(this.handle)}get showFrameGridsViewOnly(){return _.__getProperty_showFrameGridsViewOnly(this.handle)}get overlayUiRendering(){return _.__getProperty_overlayUiRendering(this.handle)}get lockMouseMoves(){return _.__getProperty_lockMouseMoves(this.handle)}get allowTimeSlicedEditRenderingOptimization(){return _.__getProperty_allowTimeSlicedEditRenderingOptimization(this.handle)}get syncCursorRenderingToSceneGraph(){return _.__getProperty_syncCursorRenderingToSceneGraph(this.handle)}get showTimeSlicingEditRenderingDot(){return _.__getProperty_showTimeSlicingEditRenderingDot(this.handle)}get editFrameExtraSeconds(){return _.__getProperty_editFrameExtraSeconds(this.handle)}get editFrameExtraFramebufferSwitches(){return _.__getProperty_editFrameExtraFramebufferSwitches(this.handle)}get maxEditTimeSeconds(){return _.__getProperty_maxEditTimeSeconds(this.handle)}get selectionBoundingRect(){return _.__getProperty_selectionBoundingRect(this.handle)}get devHandoffEntryPointBoundingRect(){return _.__getProperty_devHandoffEntryPointBoundingRect(this.handle)}get inlineMenuTarget(){return _.__getProperty_inlineMenuTarget(this.handle)}get focusedStackRegion(){return _.__getProperty_focusedStackRegion(this.handle)}get scaleToolLastCanvasAnchorPoint(){return _.__getProperty_scaleToolLastCanvasAnchorPoint(this.handle)}get temporarilyHoveredNodes(){return _.__getProperty_temporarilyHoveredNodes(this.handle)}get thumbnailNodeId(){return _.__getProperty_thumbnailNodeId(this.handle)}get wandHoverHighlight(){return _.__getProperty_wandHoverHighlight(this.handle)}}class rr extends rt{constructor(e){super(e),this.handle=e}}class rn{constructor(e){this.handle=e}get requestedPageChange(){return E.__getProperty_requestedPageChange(this.handle)}}class ri extends rn{constructor(e){super(e),this.handle=e}}class ra{constructor(e){this.handle=e}get pageToContainsReadySection(){return y.__getProperty_pageToContainsReadySection(this.handle)}}class ro extends ra{constructor(e){super(e),this.handle=e}}class rl{constructor(e){this.handle=e}get focusAnimationIsRunning(){return I.__getProperty_focusAnimationIsRunning(this.handle)}get currentNodeId(){return I.__getProperty_currentNodeId(this.handle)}get nodeIds(){return I.__getProperty_nodeIds(this.handle)}get readySectionItems(){return I.__getProperty_readySectionItems(this.handle)}get automaticIconDetection(){return I.__getProperty_automaticIconDetection(this.handle)}get focusNodeId(){return I.__getProperty_focusNodeId(this.handle)}get focusMode(){return I.__getProperty_focusMode(this.handle)}get selectedMeasurementId(){return I.__getProperty_selectedMeasurementId(this.handle)}}class rs extends rl{constructor(e){super(e),this.handle=e}}class rc{constructor(e){this.handle=e}get selectionEmpty(){return w.__getProperty_selectionEmpty(this.handle)}get selectionIsHyperlink(){return w.__getProperty_selectionIsHyperlink(this.handle)}get selectionIsMask(){return w.__getProperty_selectionIsMask(this.handle)}get shouldBlockUserEvents(){return w.__getProperty_shouldBlockUserEvents(this.handle)}get figmaScopeHighlightedNode(){return w.__getProperty_figmaScopeHighlightedNode(this.handle)}get keyboardLayoutPreference(){return w.__getProperty_keyboardLayoutPreference(this.handle)}get inPlaygroundMode(){return w.__getProperty_inPlaygroundMode(this.handle)}get shiftStraightLine(){return w.__getProperty_shiftStraightLine(this.handle)}get pencilStraightLine(){return w.__getProperty_pencilStraightLine(this.handle)}get handToolTemporarilyEnabled(){return w.__getProperty_handToolTemporarilyEnabled(this.handle)}get useNumbersForOpacity(){return w.__getProperty_useNumbersForOpacity(this.handle)}get activeCommentAnchorData(){return w.__getProperty_activeCommentAnchorData(this.handle)}}class rd extends rc{constructor(e){super(e),this.handle=e}}class ru{constructor(e){this.handle=e}get activeEmbedData(){return S.__getProperty_activeEmbedData(this.handle)}}class rp extends ru{constructor(e){super(e),this.handle=e}}class rm{constructor(e){this.handle=e}get activeCanvasPixelPreview(){return C.__getProperty_activeCanvasPixelPreview(this.handle)}get renderRulers(){return C.__getProperty_renderRulers(this.handle)}get isDefaultStackPositionAbsolute(){return C.__getProperty_isDefaultStackPositionAbsolute(this.handle)}get renderGrid(){return C.__getProperty_renderGrid(this.handle)}get showDotGrid(){return C.__getProperty_showDotGrid(this.handle)}get snapToPixelGrid(){return C.__getProperty_snapToPixelGrid(this.handle)}get snapToDotGrid(){return C.__getProperty_snapToDotGrid(this.handle)}get showPropertyLabels(){return C.__getProperty_showPropertyLabels(this.handle)}get showFrameGrids(){return C.__getProperty_showFrameGrids(this.handle)}get showMasks(){return C.__getProperty_showMasks(this.handle)}get showArtboardOutlines(){return C.__getProperty_showArtboardOutlines(this.handle)}get showSlices(){return C.__getProperty_showSlices(this.handle)}get hideHelpWidget(){return C.__getProperty_hideHelpWidget(this.handle)}get flipDuringResize(){return C.__getProperty_flipDuringResize(this.handle)}get renderAnnotations(){return C.__getProperty_renderAnnotations(this.handle)}get renderRedlines(){return C.__getProperty_renderRedlines(this.handle)}get layerHover(){return C.__getProperty_layerHover(this.handle)}get showSidebar(){return C.__getProperty_showSidebar(this.handle)}get keyboardZoomToSelection(){return C.__getProperty_keyboardZoomToSelection(this.handle)}get penToolAvoidSingleHandles(){return C.__getProperty_penToolAvoidSingleHandles(this.handle)}get snapToGeometry(){return C.__getProperty_snapToGeometry(this.handle)}get snapToObjects(){return C.__getProperty_snapToObjects(this.handle)}get stickyTools(){return C.__getProperty_stickyTools(this.handle)}get disablePinchZoomFix(){return C.__getProperty_disablePinchZoomFix(this.handle)}get copyRenaming(){return C.__getProperty_copyRenaming(this.handle)}get smartQuotes(){return C.__getProperty_smartQuotes(this.handle)}get temporarilyHideViewportOverlay(){return C.__getProperty_temporarilyHideViewportOverlay(this.handle)}get rightClickPan(){return C.__getProperty_rightClickPan(this.handle)}get scrollWheelZoom(){return C.__getProperty_scrollWheelZoom(this.handle)}get expandedFramePresetType(){return C.__getProperty_expandedFramePresetType(this.handle)}get sidebarSplitPosition(){return C.__getProperty_sidebarSplitPosition(this.handle)}get devHandoffInspectSplitPosition(){return C.__getProperty_devHandoffInspectSplitPosition(this.handle)}get propertiesPanelSplitPosition(){return C.__getProperty_propertiesPanelSplitPosition(this.handle)}get pagesPanelHeight(){return C.__getProperty_pagesPanelHeight(this.handle)}get pagesPanelIsOpen(){return C.__getProperty_pagesPanelIsOpen(this.handle)}get colorFormat(){return C.__getProperty_colorFormat(this.handle)}get invertZoom(){return C.__getProperty_invertZoom(this.handle)}get cursorHighFiveWiggle(){return C.__getProperty_cursorHighFiveWiggle(this.handle)}get lowPower(){return C.__getProperty_lowPower(this.handle)}get showGuids(){return C.__getProperty_showGuids(this.handle)}get showFigmaScope(){return C.__getProperty_showFigmaScope(this.handle)}get canvasSearchDebug(){return C.__getProperty_canvasSearchDebug(this.handle)}get accessibilityDomDebug(){return C.__getProperty_accessibilityDomDebug(this.handle)}get showQuickCommandRankDebug(){return C.__getProperty_showQuickCommandRankDebug(this.handle)}get showImmutableFrameSublayers(){return C.__getProperty_showImmutableFrameSublayers(this.handle)}get smallNudgeAmount(){return C.__getProperty_smallNudgeAmount(this.handle)}get bigNudgeAmount(){return C.__getProperty_bigNudgeAmount(this.handle)}get spellCheckPreference(){return C.__getProperty_spellCheckPreference(this.handle)}get enablePrototypingTabMerge(){return C.__getProperty_enablePrototypingTabMerge(this.handle)}get defaultEmojiSkinTone(){return C.__getProperty_defaultEmojiSkinTone(this.handle)}get handoffOutputFormat(){return C.__getProperty_handoffOutputFormat(this.handle)}get handoffPlatformTarget(){return C.__getProperty_handoffPlatformTarget(this.handle)}get ctrlClickContextMenu(){return C.__getProperty_ctrlClickContextMenu(this.handle)}get customCursor(){return C.__getProperty_customCursor(this.handle)}get similarIncludesMatching(){return C.__getProperty_similarIncludesMatching(this.handle)}get toggleSimilarHighlights(){return C.__getProperty_toggleSimilarHighlights(this.handle)}get exportSelectionSettings(){return C.__getProperty_exportSelectionSettings(this.handle)}get useMultiEditSelectionBehavior(){return C.__getProperty_useMultiEditSelectionBehavior(this.handle)}get toggleNoodlesWithoutDragging(){return C.__getProperty_toggleNoodlesWithoutDragging(this.handle)}get useOldOutlineShortcuts(){return C.__getProperty_useOldOutlineShortcuts(this.handle)}}class rh extends rm{constructor(e){super(e),this.handle=e}}class r_{constructor(e){this.handle=e}}class rg extends r_{constructor(e){super(e),this.handle=e}}class rf{constructor(e){this.handle=e}}class rE extends rf{constructor(e){super(e),this.handle=e}}class ry{constructor(e){this.handle=e}showBigSectionNamePills(){return G.showBigSectionNamePills(this.handle)}sectionNestedZoomLevel(){return G.sectionNestedZoomLevel(this.handle)}showTidyUpButtonsOnCanvas(){return G.showTidyUpButtonsOnCanvas(this.handle)}}class rv extends ry{constructor(e){super(e),this.handle=e}}class rb{constructor(e){this.handle=e}viewportSpaceSelectionBounds(){return H.viewportSpaceSelectionBounds(this.handle)}currentDragBehaviorIsNullOr(e){return H.currentDragBehaviorIsNullOr(this.handle,e)}currentDragBehaviorIs(e){return H.currentDragBehaviorIs(this.handle,e)}canvasSpaceViewportRect(){return H.canvasSpaceViewportRect(this.handle)}canvasScale(){return H.canvasScale(this.handle)}isMouseOverCanvas(){return H.isMouseOverCanvas(this.handle)}canvasSpaceToViewportSpace(e){return H.canvasSpaceToViewportSpace(this.handle,e)}viewportSpaceToCanvasSpace(e){return H.viewportSpaceToCanvasSpace(this.handle,e)}}class rI extends rb{constructor(e){super(e),this.handle=e}}class rT{constructor(e){this.handle=e}canvasSpaceMouse(){return W.canvasSpaceMouse(this.handle)}viewportSpaceMouse(){return W.viewportSpaceMouse(this.handle)}invalidateViewport(){W.invalidateViewport(this.handle)}viewport(){return W.viewport(this.handle)}canvasGUID(){return W.canvasGUID(this.handle)}selectionNodeGUIDs(){return W.selectionNodeGUIDs(this.handle)}isMetaPressed(){return W.isMetaPressed(this.handle)}isOverSelection(){return W.isOverSelection(this.handle)}isStandardShortcutKeyPressed(){return W.isStandardShortcutKeyPressed(this.handle)}canvasSpaceMouseThreshold(){return W.canvasSpaceMouseThreshold(this.handle)}canvasSpaceSnappingThreshold(){return W.canvasSpaceSnappingThreshold(this.handle)}isShiftPressed(){return W.isShiftPressed(this.handle)}wasCanceled(){return W.wasCanceled(this.handle)}clickCount(){return W.clickCount(this.handle)}}class rw extends rT{constructor(e){super(e),this.handle=e}accept(){W.accept(this.handle)}findHoveredNodeId(){return W.findHoveredNodeId(this.handle)}canvasScene(){return W.canvasScene(this.handle)}setOwnedBySelection(e){W.setOwnedBySelection(this.handle,e)}}class rS{constructor(e){this.handle=e}}class rC extends rS{constructor(e){super(e),this.handle=e}fillRoundedRect(e,t,r){K.fillRoundedRect(this.handle,e,t,r)}fillRect(e,t){K.fillRect(this.handle,e,t)}fillCircle(e,t,r){K.fillCircle(this.handle,e,t,r)}strokeCircle(e,t,r,n){K.strokeCircle(this.handle,e,t,r,n)}fillAndStrokeCircle(e,t,r,n,i,a){K.fillAndStrokeCircle(this.handle,e,t,r,n,i,a)}fillText(e,t,r,n,i,a){K.fillText(this.handle,e,t,r,n,i,a)}renderFillAndStrokeRoundedRect(e,t,r,n,i,a,o){K.renderFillAndStrokeRoundedRect(this.handle,e,t,r,n,i,a,o)}renderContentFillIcon(e){K.renderContentFillIcon(this.handle,e)}renderSimilaritySearchIcon(e){K.renderSimilaritySearchIcon(this.handle,e)}}class rO{constructor(e){this.handle=e}}class rA extends rO{constructor(e){super(e),this.handle=e}clearCache(){Z.clearCache(this.handle)}clearSnappingVisualizations(){Z.clearSnappingVisualizations(this.handle)}addPostSnappingVisualizations(){Z.addPostSnappingVisualizations(this.handle)}}class rN{constructor(e){this.handle=e}get publishableSymbols(){return j.__getProperty_publishableSymbols(this.handle)}get subscribedSymbols(){return j.__getProperty_subscribedSymbols(this.handle)}get localSymbolsThatHaveUsages(){return j.__getProperty_localSymbolsThatHaveUsages(this.handle)}get publishableStateGroups(){return j.__getProperty_publishableStateGroups(this.handle)}get subscribedStateGroups(){return j.__getProperty_subscribedStateGroups(this.handle)}get publishableStyles(){return j.__getProperty_publishableStyles(this.handle)}get directlySubscribedStyles(){return j.__getProperty_directlySubscribedStyles(this.handle)}get indirectlySubscribedStyles(){return j.__getProperty_indirectlySubscribedStyles(this.handle)}get localStylesThatHaveUsages(){return j.__getProperty_localStylesThatHaveUsages(this.handle)}get publishableModules(){return j.__getProperty_publishableModules(this.handle)}get subscribedSymbolsOnCurrentPage(){return j.__getProperty_subscribedSymbolsOnCurrentPage(this.handle)}get subscribedStateGroupsOnCurrentPage(){return j.__getProperty_subscribedStateGroupsOnCurrentPage(this.handle)}get directlySubscribedStylesOnCurrentPage(){return j.__getProperty_directlySubscribedStylesOnCurrentPage(this.handle)}get localSymbolsThatHaveUsagesOnCurrentPage(){return j.__getProperty_localSymbolsThatHaveUsagesOnCurrentPage(this.handle)}get localStylesThatHaveUsagesOnCurrentPage(){return j.__getProperty_localStylesThatHaveUsagesOnCurrentPage(this.handle)}}class rL extends rN{constructor(e){super(e),this.handle=e}}class rP{constructor(e){this.handle=e}get propertiesPanelTab(){return ee.__getProperty_propertiesPanelTab(this.handle)}get typeDetailsPanelOpen(){return ee.__getProperty_typeDetailsPanelOpen(this.handle)}get shownPropertiesPanels(){return ee.__getProperty_shownPropertiesPanels(this.handle)}get isVertexSelectionAndHasEndpoints(){return ee.__getProperty_isVertexSelectionAndHasEndpoints(this.handle)}get shownTransformControls(){return ee.__getProperty_shownTransformControls(this.handle)}get enabledTransformControls(){return ee.__getProperty_enabledTransformControls(this.handle)}get enabledTypePanelControls(){return ee.__getProperty_enabledTypePanelControls(this.handle)}get strokePanelMode(){return ee.__getProperty_strokePanelMode(this.handle)}get strokePanelTerminalPointCount(){return ee.__getProperty_strokePanelTerminalPointCount(this.handle)}}class rR extends rP{constructor(e){super(e),this.handle=e}}class rk{constructor(e){this.handle=e}get activePrototypeDevice(){return et.__getProperty_activePrototypeDevice(this.handle)}get prototypeViewMode(){return et.__getProperty_prototypeViewMode(this.handle)}get nodeWithPlusBubble(){return et.__getProperty_nodeWithPlusBubble(this.handle)}get colorPickerEyedropperVarData(){return et.__getProperty_colorPickerEyedropperVarData(this.handle)}}class rD extends rk{constructor(e){super(e),this.handle=e}}class rM{constructor(e){this.handle=e}get pageSyncState(){return en.__getProperty_pageSyncState(this.handle)}}class rF extends rM{constructor(e){super(e),this.handle=e}}class rx{constructor(e){this.handle=e}}class rU extends rx{constructor(e){super(e),this.handle=e}invalidateConnectorForReparenting(e){ei.invalidateConnectorForReparenting(this.handle,e)}updateImmutableFrameInternal(){ei.updateImmutableFrameInternal(this.handle)}}class rB{constructor(e){this.handle=e}immutableFrameObserverReference(){return ea.immutableFrameObserverReference(this.handle)}getIncidentConnectorIDsArray(e){return ea.getIncidentConnectorIDsArray(this.handle,e)}sitesPreviewObserverReference(){return ea.sitesPreviewObserverReference(this.handle)}}class rV extends rB{constructor(e){super(e),this.handle=e}}class rG{constructor(e){this.handle=e}get showMissingFontsButton(){return e_.__getProperty_showMissingFontsButton(this.handle)}get showMemoryUsage(){return e_.__getProperty_showMemoryUsage(this.handle)}get showPropertiesPanel(){return e_.__getProperty_showPropertiesPanel(this.handle)}get renderResourceUse(){return e_.__getProperty_renderResourceUse(this.handle)}get showCanvasXYAxis(){return e_.__getProperty_showCanvasXYAxis(this.handle)}get showMousePosition(){return e_.__getProperty_showMousePosition(this.handle)}get showInFileMemoryPercentage(){return e_.__getProperty_showInFileMemoryPercentage(this.handle)}get showCanvasSearch(){return e_.__getProperty_showCanvasSearch(this.handle)}get showOutOfDateWall(){return e_.__getProperty_showOutOfDateWall(this.handle)}get backgroundPickerOpen(){return e_.__getProperty_backgroundPickerOpen(this.handle)}get minMaxModalShown(){return e_.__getProperty_minMaxModalShown(this.handle)}get isNodeMemoryStale(){return e_.__getProperty_isNodeMemoryStale(this.handle)}get isRecovery(){return e_.__getProperty_isRecovery(this.handle)}get hoveredComponentPropDef(){return e_.__getProperty_hoveredComponentPropDef(this.handle)}get cachedTotalMallocLevelBytes(){return e_.__getProperty_cachedTotalMallocLevelBytes(this.handle)}get hideUiForMobileEditing(){return e_.__getProperty_hideUiForMobileEditing(this.handle)}get isOffline(){return e_.__getProperty_isOffline(this.handle)}get isUI3(){return e_.__getProperty_isUI3(this.handle)}get showAnnotations(){return e_.__getProperty_showAnnotations(this.handle)}get focusModeState(){return e_.__getProperty_focusModeState(this.handle)}}class rH extends rG{constructor(e){super(e),this.handle=e}}class rW{constructor(e){this.handle=e}get nodeIds(){return eA.__getProperty_nodeIds(this.handle)}}class rK extends rW{constructor(e){super(e),this.handle=e}}class rz{constructor(e){this.handle=e}get isInSingleSlideView(){return eN.__getProperty_isInSingleSlideView(this.handle)}get focusedSlideId(){return eN.__getProperty_focusedSlideId(this.handle)}get isThemePanelOpen(){return eN.__getProperty_isThemePanelOpen(this.handle)}get speakerNotesInputHeightInViewport(){return eN.__getProperty_speakerNotesInputHeightInViewport(this.handle)}get dragHandleInHeightViewport(){return eN.__getProperty_dragHandleInHeightViewport(this.handle)}isSingleSlideViewEnabled(){return eN.isSingleSlideViewEnabled(this.handle)}isSingleSlideViewFocused(){return eN.isSingleSlideViewFocused(this.handle)}defaultPaddingInViewport(){return eN.defaultPaddingInViewport(this.handle)}carouselWidthInViewport(){return eN.carouselWidthInViewport(this.handle)}themePanelWidthInViewport(){return eN.themePanelWidthInViewport(this.handle)}bottomToolbeltHeightInViewport(){return eN.bottomToolbeltHeightInViewport(this.handle)}singleSlideThumbnailHeight(){return eN.singleSlideThumbnailHeight(this.handle)}singleSlideThumbnailWidth(){return eN.singleSlideThumbnailWidth(this.handle)}singleSlideThumbnailNumberWidth(){return eN.singleSlideThumbnailNumberWidth(this.handle)}singleSlideThumbnailNumberMargin(){return eN.singleSlideThumbnailNumberMargin(this.handle)}singleSlideThumbnailPadding(){return eN.singleSlideThumbnailPadding(this.handle)}}class rZ extends rz{constructor(e){super(e),this.handle=e}enterSingleSlideView(e){eN.enterSingleSlideView(this.handle,e)}exitSingleSlideView(){eN.exitSingleSlideView(this.handle)}}class rY{constructor(e){this.handle=e}getOrCreateJsCopy(){return eB.getOrCreateJsCopy(this.handle)}getOrCreateSkewCopy(){return eB.getOrCreateSkewCopy(this.handle)}}class rj extends rY{constructor(e){super(e),this.handle=e}}class r${constructor(e){this.handle=e}}class rq extends r${constructor(e){super(e),this.handle=e}}class rX{constructor(e){this.handle=e}getOrCreateJsCopy(){return eK.getOrCreateJsCopy(this.handle)}getOrCreateSkewCopy(){return eK.getOrCreateSkewCopy(this.handle)}}class rJ extends rX{constructor(e){super(e),this.handle=e}}class rQ{constructor(e){this.handle=e}getOrCreateJsCopy(){return ez.getOrCreateJsCopy(this.handle)}getOrCreateSkewCopy(){return ez.getOrCreateSkewCopy(this.handle)}}class r0 extends rQ{constructor(e){super(e),this.handle=e}}class r1{constructor(e){this.handle=e}getOrCreateSkewCopy(){return ej.getOrCreateSkewCopy(this.handle)}getOrCreateJsCopy(){return ej.getOrCreateJsCopy(this.handle)}}class r2 extends r1{constructor(e){super(e),this.handle=e}}class r3{constructor(e){this.handle=e}getOrCreateSkewCopy(){return e$.getOrCreateSkewCopy(this.handle)}}class r4 extends r3{constructor(e){super(e),this.handle=e}}class r6{constructor(e){this.handle=e}bounds(){return eq.bounds(this.handle)}getHash(){return eq.getHash(this.handle)}isRect(){return eq.isRect(this.handle)}loopBlinnCompile(){return eq.loopBlinnCompile(this.handle)}}class r8 extends r6{constructor(e){super(e),this.handle=e}}class r9{constructor(e){this.handle=e}getOrCreateSkewCopy(){return eJ.getOrCreateSkewCopy(this.handle)}getOrCreateJsCopy(){return eJ.getOrCreateJsCopy(this.handle)}}class r5 extends r9{constructor(e){super(e),this.handle=e}}class r7{constructor(e){this.handle=e}}class ne extends r7{constructor(e){super(e),this.handle=e}}class nt{constructor(e){this.handle=e}get gridMap(){return e1.__getProperty_gridMap(this.handle)}get minRow(){return e1.__getProperty_minRow(this.handle)}get minCol(){return e1.__getProperty_minCol(this.handle)}get numRows(){return e1.__getProperty_numRows(this.handle)}get numCols(){return e1.__getProperty_numCols(this.handle)}get layoutPrototypeConfig(){return e1.__getProperty_layoutPrototypeConfig(this.handle)}originX(){return e1.originX(this.handle)}originY(){return e1.originY(this.handle)}slideWidth(){return e1.slideWidth(this.handle)}slideHeight(){return e1.slideHeight(this.handle)}slideMargin(){return e1.slideMargin(this.handle)}getNextCoordForDrag(e,t,r,n){return e1.getNextCoordForDrag(this.handle,e,t,r,n)}getLastSlideCoord(){return e1.getLastSlideCoord(this.handle)}getGridKey(e){return e1.getGridKey(this.handle,e)}parseGridKey(e){return e1.parseGridKey(this.handle,e)}}class nr extends nt{constructor(e){super(e),this.handle=e}duplicateAsBlankSlide(e,t,r){return e1.duplicateAsBlankSlide(this.handle,e,t,r)}addDefaultSlideAtCoord(e,t,r){return e1.addDefaultSlideAtCoord(this.handle,e,t,r)}insertSlideAtCoord(e,t,r){e1.insertSlideAtCoord(this.handle,e,t,r)}moveRow(e,t){e1.moveRow(this.handle,e,t)}moveSlidesAtCoordsAndReflowDeck(e,t,r){e1.moveSlidesAtCoordsAndReflowDeck(this.handle,e,t,r)}setNewSlideOrder(e,t){e1.setNewSlideOrder(this.handle,e,t)}addRow(e){e1.addRow(this.handle,e)}addEmptyCell(e,t){e1.addEmptyCell(this.handle,e,t)}}class nn{constructor(e){this.handle=e}get activeThemeID(){return e2.__getProperty_activeThemeID(this.handle)}getThemeAssetData(e){return e2.getThemeAssetData(this.handle,e)}getThemeIDInSceneRoot(){return e2.getThemeIDInSceneRoot(this.handle)}isAutoColorEnabled(e){return e2.isAutoColorEnabled(this.handle,e)}}class ni extends nn{constructor(e){super(e),this.handle=e}upsertLocalThemeAndApplyEdit(e,t){return e2.upsertLocalThemeAndApplyEdit(this.handle,e,t)}insertDefaultLocalTheme(e){e2.insertDefaultLocalTheme(this.handle,e)}insertSubscribedTheme(e,t,r){e2.insertSubscribedTheme(this.handle,e,t,r)}setAutoColor(e,t){e2.setAutoColor(this.handle,e,t)}swapAllSlidesToNewTheme(e){e2.swapAllSlidesToNewTheme(this.handle,e)}remapSlideToLocalTheme(e){return e2.remapSlideToLocalTheme(this.handle,e)}upsertLocalThemeFromModule(e){return e2.upsertLocalThemeFromModule(this.handle,e)}setDocumentTemplateFileKey(e){e2.setDocumentTemplateFileKey(this.handle,e)}}class na{constructor(e){this.handle=e}getSlideTransition(e){return e3.getSlideTransition(this.handle,e)}}class no extends na{constructor(e){super(e),this.handle=e}setSlideTransition(e,t){e3.setSlideTransition(this.handle,e,t)}}class nl{constructor(e){this.handle=e}}class ns extends nl{constructor(e){super(e),this.handle=e}setPreviewedNodeID(e){e4.setPreviewedNodeID(this.handle,e)}}class nc{constructor(e){this.handle=e}get annotationInfoByTlf(){return e6.__getProperty_annotationInfoByTlf(this.handle)}}class nd extends nc{constructor(e){super(e),this.handle=e}}class nu{constructor(e){this.handle=e}}class np extends nu{constructor(e){super(e),this.handle=e}getCopy(){return ti.getCopy(this.handle)}subscribeFromJs(e){return ti.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){ti.unsubscribeFromJs(this.handle,e)}}class nm{constructor(e){this.handle=e}}class nh extends nm{constructor(e){super(e),this.handle=e}getCopy(){return ta.getCopy(this.handle)}subscribeFromJs(e){return ta.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){ta.unsubscribeFromJs(this.handle,e)}}class n_{constructor(e){this.handle=e}}class ng extends n_{constructor(e){super(e),this.handle=e}getCopy(){return to.getCopy(this.handle)}subscribeFromJs(e){return to.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){to.unsubscribeFromJs(this.handle,e)}}class nf{constructor(e){this.handle=e}}class nE extends nf{constructor(e){super(e),this.handle=e}getCopy(){return tl.getCopy(this.handle)}subscribeFromJs(e){return tl.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tl.unsubscribeFromJs(this.handle,e)}}class ny{constructor(e){this.handle=e}}class nv extends ny{constructor(e){super(e),this.handle=e}getCopy(){return ts.getCopy(this.handle)}subscribeFromJs(e){return ts.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){ts.unsubscribeFromJs(this.handle,e)}}class nb{constructor(e){this.handle=e}}class nI extends nb{constructor(e){super(e),this.handle=e}getCopy(){return tc.getCopy(this.handle)}subscribeFromJs(e){return tc.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tc.unsubscribeFromJs(this.handle,e)}}class nT{constructor(e){this.handle=e}}class nw extends nT{constructor(e){super(e),this.handle=e}getCopy(){return td.getCopy(this.handle)}subscribeFromJs(e){return td.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){td.unsubscribeFromJs(this.handle,e)}}class nS{constructor(e){this.handle=e}}class nC extends nS{constructor(e){super(e),this.handle=e}getCopy(){return tu.getCopy(this.handle)}set(e){tu.set(this.handle,e)}subscribeFromJs(e){return tu.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tu.unsubscribeFromJs(this.handle,e)}}class nO{constructor(e){this.handle=e}}class nA extends nO{constructor(e){super(e),this.handle=e}getCopy(){return tp.getCopy(this.handle)}set(e){tp.set(this.handle,e)}subscribeFromJs(e){return tp.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tp.unsubscribeFromJs(this.handle,e)}}class nN{constructor(e){this.handle=e}}class nL extends nN{constructor(e){super(e),this.handle=e}getCopy(){return tm.getCopy(this.handle)}set(e){tm.set(this.handle,e)}subscribeFromJs(e){return tm.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tm.unsubscribeFromJs(this.handle,e)}}class nP{constructor(e){this.handle=e}}class nR extends nP{constructor(e){super(e),this.handle=e}getCopy(){return th.getCopy(this.handle)}subscribeFromJs(e){return th.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){th.unsubscribeFromJs(this.handle,e)}}class nk{constructor(e){this.handle=e}}class nD extends nk{constructor(e){super(e),this.handle=e}getCopy(){return t_.getCopy(this.handle)}set(e){t_.set(this.handle,e)}subscribeFromJs(e){return t_.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){t_.unsubscribeFromJs(this.handle,e)}}class nM{constructor(e){this.handle=e}}class nF extends nM{constructor(e){super(e),this.handle=e}getCopy(){return tg.getCopy(this.handle)}subscribeFromJs(e){return tg.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tg.unsubscribeFromJs(this.handle,e)}}class nx{constructor(e){this.handle=e}}class nU extends nx{constructor(e){super(e),this.handle=e}getCopy(){return tf.getCopy(this.handle)}set(e){tf.set(this.handle,e)}subscribeFromJs(e){return tf.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tf.unsubscribeFromJs(this.handle,e)}}class nB{constructor(e){this.handle=e}}class nV extends nB{constructor(e){super(e),this.handle=e}getCopy(){return tE.getCopy(this.handle)}set(e){tE.set(this.handle,e)}subscribeFromJs(e){return tE.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tE.unsubscribeFromJs(this.handle,e)}}class nG{constructor(e){this.handle=e}}class nH extends nG{constructor(e){super(e),this.handle=e}getCopy(){return ty.getCopy(this.handle)}set(e){ty.set(this.handle,e)}subscribeFromJs(e){return ty.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){ty.unsubscribeFromJs(this.handle,e)}}class nW{constructor(e){this.handle=e}}class nK extends nW{constructor(e){super(e),this.handle=e}getCopy(){return tv.getCopy(this.handle)}set(e){tv.set(this.handle,e)}subscribeFromJs(e){return tv.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tv.unsubscribeFromJs(this.handle,e)}}class nz{constructor(e){this.handle=e}}class nZ extends nz{constructor(e){super(e),this.handle=e}getCopy(){return tb.getCopy(this.handle)}subscribeFromJs(e){return tb.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tb.unsubscribeFromJs(this.handle,e)}}class nY{constructor(e){this.handle=e}}class nj extends nY{constructor(e){super(e),this.handle=e}getCopy(){return tI.getCopy(this.handle)}subscribeFromJs(e){return tI.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tI.unsubscribeFromJs(this.handle,e)}}class n${constructor(e){this.handle=e}}class nq extends n${constructor(e){super(e),this.handle=e}getCopy(){return tT.getCopy(this.handle)}subscribeFromJs(e){return tT.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tT.unsubscribeFromJs(this.handle,e)}}class nX{constructor(e){this.handle=e}}class nJ extends nX{constructor(e){super(e),this.handle=e}getCopy(){return tw.getCopy(this.handle)}subscribeFromJs(e){return tw.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tw.unsubscribeFromJs(this.handle,e)}}class nQ{constructor(e){this.handle=e}}class n0 extends nQ{constructor(e){super(e),this.handle=e}getCopy(){return tS.getCopy(this.handle)}subscribeFromJs(e){return tS.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tS.unsubscribeFromJs(this.handle,e)}}class n1{constructor(e){this.handle=e}}class n2 extends n1{constructor(e){super(e),this.handle=e}getCopy(){return tC.getCopy(this.handle)}subscribeFromJs(e){return tC.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tC.unsubscribeFromJs(this.handle,e)}}class n3{constructor(e){this.handle=e}}class n4 extends n3{constructor(e){super(e),this.handle=e}getCopy(){return tO.getCopy(this.handle)}set(e){tO.set(this.handle,e)}subscribeFromJs(e){return tO.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tO.unsubscribeFromJs(this.handle,e)}}class n6{constructor(e){this.handle=e}}class n8 extends n6{constructor(e){super(e),this.handle=e}getCopy(){return tA.getCopy(this.handle)}set(e){tA.set(this.handle,e)}subscribeFromJs(e){return tA.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tA.unsubscribeFromJs(this.handle,e)}}class n9{constructor(e){this.handle=e}}class n5 extends n9{constructor(e){super(e),this.handle=e}getCopy(){return tN.getCopy(this.handle)}subscribeFromJs(e){return tN.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tN.unsubscribeFromJs(this.handle,e)}}class n7{constructor(e){this.handle=e}}class ie extends n7{constructor(e){super(e),this.handle=e}getCopy(){return tL.getCopy(this.handle)}set(e){tL.set(this.handle,e)}subscribeFromJs(e){return tL.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tL.unsubscribeFromJs(this.handle,e)}}class it{constructor(e){this.handle=e}}class ir extends it{constructor(e){super(e),this.handle=e}getCopy(){return tP.getCopy(this.handle)}set(e){tP.set(this.handle,e)}subscribeFromJs(e){return tP.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tP.unsubscribeFromJs(this.handle,e)}}class ii{constructor(e){this.handle=e}}class ia extends ii{constructor(e){super(e),this.handle=e}getCopy(){return tR.getCopy(this.handle)}set(e){tR.set(this.handle,e)}subscribeFromJs(e){return tR.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tR.unsubscribeFromJs(this.handle,e)}}class io{constructor(e){this.handle=e}}class il extends io{constructor(e){super(e),this.handle=e}getCopy(){return tk.getCopy(this.handle)}set(e){tk.set(this.handle,e)}subscribeFromJs(e){return tk.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tk.unsubscribeFromJs(this.handle,e)}}class is{constructor(e){this.handle=e}}class ic extends is{constructor(e){super(e),this.handle=e}getCopy(){return tD.getCopy(this.handle)}set(e){tD.set(this.handle,e)}subscribeFromJs(e){return tD.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tD.unsubscribeFromJs(this.handle,e)}}class id{constructor(e){this.handle=e}}class iu extends id{constructor(e){super(e),this.handle=e}getCopy(){return tM.getCopy(this.handle)}set(e){tM.set(this.handle,e)}subscribeFromJs(e){return tM.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tM.unsubscribeFromJs(this.handle,e)}}class ip{constructor(e){this.handle=e}}class im extends ip{constructor(e){super(e),this.handle=e}getCopy(){return tF.getCopy(this.handle)}set(e){tF.set(this.handle,e)}subscribeFromJs(e){return tF.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tF.unsubscribeFromJs(this.handle,e)}}class ih{constructor(e){this.handle=e}}class i_ extends ih{constructor(e){super(e),this.handle=e}getCopy(){return tx.getCopy(this.handle)}subscribeFromJs(e){return tx.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tx.unsubscribeFromJs(this.handle,e)}}class ig{constructor(e){this.handle=e}}class iE extends ig{constructor(e){super(e),this.handle=e}getCopy(){return tU.getCopy(this.handle)}subscribeFromJs(e){return tU.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tU.unsubscribeFromJs(this.handle,e)}}class iy{constructor(e){this.handle=e}}class iv extends iy{constructor(e){super(e),this.handle=e}getCopy(){return tB.getCopy(this.handle)}subscribeFromJs(e){return tB.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tB.unsubscribeFromJs(this.handle,e)}}class ib{constructor(e){this.handle=e}}class iI extends ib{constructor(e){super(e),this.handle=e}getCopy(){return tV.getCopy(this.handle)}subscribeFromJs(e){return tV.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tV.unsubscribeFromJs(this.handle,e)}}class iT{constructor(e){this.handle=e}}class iw extends iT{constructor(e){super(e),this.handle=e}getCopy(){return tG.getCopy(this.handle)}subscribeFromJs(e){return tG.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tG.unsubscribeFromJs(this.handle,e)}}class iS{constructor(e){this.handle=e}}class iC extends iS{constructor(e){super(e),this.handle=e}getCopy(){return tH.getCopy(this.handle)}subscribeFromJs(e){return tH.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tH.unsubscribeFromJs(this.handle,e)}}class iO{constructor(e){this.handle=e}}class iA extends iO{constructor(e){super(e),this.handle=e}getCopy(){return tW.getCopy(this.handle)}subscribeFromJs(e){return tW.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tW.unsubscribeFromJs(this.handle,e)}}class iN{constructor(e){this.handle=e}}class iL extends iN{constructor(e){super(e),this.handle=e}getCopy(){return tK.getCopy(this.handle)}set(e){tK.set(this.handle,e)}subscribeFromJs(e){return tK.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tK.unsubscribeFromJs(this.handle,e)}}class iP{constructor(e){this.handle=e}}class iR extends iP{constructor(e){super(e),this.handle=e}getCopy(){return tz.getCopy(this.handle)}subscribeFromJs(e){return tz.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tz.unsubscribeFromJs(this.handle,e)}}class ik{constructor(e){this.handle=e}}class iD extends ik{constructor(e){super(e),this.handle=e}getCopy(){return tZ.getCopy(this.handle)}subscribeFromJs(e){return tZ.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tZ.unsubscribeFromJs(this.handle,e)}}class iM{constructor(e){this.handle=e}}class iF extends iM{constructor(e){super(e),this.handle=e}getCopy(){return tY.getCopy(this.handle)}subscribeFromJs(e){return tY.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tY.unsubscribeFromJs(this.handle,e)}}class ix{constructor(e){this.handle=e}}class iU extends ix{constructor(e){super(e),this.handle=e}getCopy(){return tj.getCopy(this.handle)}set(e){tj.set(this.handle,e)}subscribeFromJs(e){return tj.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tj.unsubscribeFromJs(this.handle,e)}}class iB{constructor(e){this.handle=e}}class iV extends iB{constructor(e){super(e),this.handle=e}getCopy(){return t$.getCopy(this.handle)}subscribeFromJs(e){return t$.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){t$.unsubscribeFromJs(this.handle,e)}}class iG{constructor(e){this.handle=e}}class iH extends iG{constructor(e){super(e),this.handle=e}getCopy(){return tq.getCopy(this.handle)}set(e){tq.set(this.handle,e)}subscribeFromJs(e){return tq.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tq.unsubscribeFromJs(this.handle,e)}}class iW{constructor(e){this.handle=e}}class iK extends iW{constructor(e){super(e),this.handle=e}getCopy(){return tX.getCopy(this.handle)}set(e){tX.set(this.handle,e)}subscribeFromJs(e){return tX.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tX.unsubscribeFromJs(this.handle,e)}}class iz{constructor(e){this.handle=e}}class iZ extends iz{constructor(e){super(e),this.handle=e}getCopy(){return tJ.getCopy(this.handle)}subscribeFromJs(e){return tJ.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tJ.unsubscribeFromJs(this.handle,e)}}class iY{constructor(e){this.handle=e}}class ij extends iY{constructor(e){super(e),this.handle=e}getCopy(){return tQ.getCopy(this.handle)}subscribeFromJs(e){return tQ.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){tQ.unsubscribeFromJs(this.handle,e)}}class i${constructor(e){this.handle=e}}class iq extends i${constructor(e){super(e),this.handle=e}getCopy(){return t0.getCopy(this.handle)}subscribeFromJs(e){return t0.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){t0.unsubscribeFromJs(this.handle,e)}}class iX{constructor(e){this.handle=e}}class iJ extends iX{constructor(e){super(e),this.handle=e}getCopy(){return t1.getCopy(this.handle)}set(e){t1.set(this.handle,e)}subscribeFromJs(e){return t1.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){t1.unsubscribeFromJs(this.handle,e)}}class iQ{constructor(e){this.handle=e}}class i0 extends iQ{constructor(e){super(e),this.handle=e}getCopy(){return t2.getCopy(this.handle)}set(e){t2.set(this.handle,e)}subscribeFromJs(e){return t2.subscribeFromJs(this.handle,e)}unsubscribeFromJs(e){t2.unsubscribeFromJs(this.handle,e)}}var i1,i2,i3,i4,i6,i8,i9,i5,i7,ae,at,ar,an,ai,aa,ao,al,as,ac,ad,au,ap,am,ah,a_,ag,af,aE,ay,av,ab,aI,aT,aw,aS,aC,aO,aA,aN,aL,aP,aR,ak,aD,aM,aF,ax,aU,aB,aV,aG,aH,aW,aK,az,aZ,aY,aj,a$,aq,aX,aJ,aQ,a0,a1,a2,a3,a4,a6,a8,a9,a5,a7,oe,ot,or,on,oi,oa,oo,ol,os,oc,od,ou,op,om,oh,o_,og,of,oE,oy,ov,ob,oI,oT,ow,oS,oC,oO,oA,oN,oL,oP,oR,ok,oD,oM,oF,ox,oU,oB,oV,oG,oH,oW,oK,oz,oZ,oY,oj,o$,oq,oX,oJ,oQ,o0,o1,o2,o3,o4,o6,o8,o9,o5,o7,le,lt,lr,ln,li,la,lo,ll,ls,lc,ld,lu,lp,lm,lh,l_,lg,lf,lE,ly,lv,lb,lI,lT,lw,lS,lC,lO,lA,lN,lL,lP,lR,lk,lD,lM,lF,lx,lU,lB,lV,lG,lH,lW,lK,lz,lZ,lY,lj,l$,lq,lX,lJ,lQ,l0,l1,l2,l3,l4,l6,l8,l9,l5,l7,se,st,sr=((i1=sr||{})[i1.IN_CUBIC=0]="IN_CUBIC",i1[i1.OUT_CUBIC=1]="OUT_CUBIC",i1[i1.INOUT_CUBIC=2]="INOUT_CUBIC",i1[i1.LINEAR=3]="LINEAR",i1),sn=((i2=sn||{})[i2.SYNCED=0]="SYNCED",i2[i2.OFFLINE=1]="OFFLINE",i2[i2.SESSION_START=2]="SESSION_START",i2[i2.FORCED=3]="FORCED",i2[i2.LIMBOED_CHANGES=4]="LIMBOED_CHANGES",i2),si=((i3=si||{})[i3.TEXT_MATCH=0]="TEXT_MATCH",i3[i3.LAYER_MATCH=1]="LAYER_MATCH",i3[i3.PAGE_MATCH=2]="PAGE_MATCH",i3),sa=((i4=sa||{})[i4.TEXT=0]="TEXT",i4[i4.FRAME_OR_GROUP=1]="FRAME_OR_GROUP",i4[i4.COMPONENT=2]="COMPONENT",i4[i4.INSTANCE=3]="INSTANCE",i4[i4.IMAGE=4]="IMAGE",i4[i4.SHAPE=5]="SHAPE",i4[i4.OTHER=6]="OTHER",i4),so=((i6=so||{})[i6.FIND=0]="FIND",i6[i6.REPLACE=1]="REPLACE",i6),sl=((i8=sl||{})[i8.ACTIVE_PAGE=0]="ACTIVE_PAGE",i8[i8.ALL_PAGES=1]="ALL_PAGES",i8),ss=((i9=ss||{})[i9.ONLY_ACTIVE=0]="ONLY_ACTIVE",i9[i9.ALL=1]="ALL",i9),sc=((i5=sc||{})[i5.NONE=0]="NONE",i5[i5.UPPER_FIRST=1]="UPPER_FIRST",i5[i5.UPPER_ALL=2]="UPPER_ALL",i5),sd=((i7=sd||{})[i7.NONE=0]="NONE",i7[i7.SELECT_ACTIVE=1]="SELECT_ACTIVE",i7),su=((ae=su||{})[ae.ABOVE=0]="ABOVE",ae[ae.BELOW=1]="BELOW",ae[ae.LEFT=2]="LEFT",ae[ae.RIGHT=3]="RIGHT",ae),sp=((at=sp||{})[at.HEX=0]="HEX",at[at.RGB=1]="RGB",at[at.CSS=2]="CSS",at[at.HSB=3]="HSB",at[at.HSL=4]="HSL",at[at.UIColor=5]="UIColor",at),sm=((ar=sm||{})[ar.SUCCESS=0]="SUCCESS",ar[ar.MERGE_IN_PROGRESS=1]="MERGE_IN_PROGRESS",ar[ar.PARSE_ERROR=2]="PARSE_ERROR",ar[ar.VERSION_MISMATCH=3]="VERSION_MISMATCH",ar[ar.INTERNAL_ERROR=4]="INTERNAL_ERROR",ar),sh=((an=sh||{})[an.SUCCESS=0]="SUCCESS",an[an.PARSE_ERROR=1]="PARSE_ERROR",an[an.VERSION_MISMATCH=2]="VERSION_MISMATCH",an[an.INTERNAL_ERROR=3]="INTERNAL_ERROR",an),s_=((ai=s_||{})[ai.SUCCESS=0]="SUCCESS",ai[ai.NO_MERGE_IN_PROGRESS=1]="NO_MERGE_IN_PROGRESS",ai[ai.INTERNAL_ERROR=2]="INTERNAL_ERROR",ai[ai.MISSING_BACKING_SYMBOL=3]="MISSING_BACKING_SYMBOL",ai),sg=((aa=sg||{})[aa.SUCCESS=0]="SUCCESS",aa[aa.NO_MERGE_IN_PROGRESS=1]="NO_MERGE_IN_PROGRESS",aa[aa.INVALID_INDEX=2]="INVALID_INDEX",aa[aa.INTERNAL_ERROR=3]="INTERNAL_ERROR",aa[aa.INVALID_STATE_TRANSITION=4]="INVALID_STATE_TRANSITION",aa),sf=((ao=sf||{})[ao.SUCCESS=0]="SUCCESS",ao[ao.FAILURE=1]="FAILURE",ao),sE=((al=sE||{})[al.SOURCE=0]="SOURCE",al[al.BRANCH=1]="BRANCH",al[al.COMPARE=2]="COMPARE",al),sy=((as=sy||{})[as.UPDATED_LIBRARY=0]="UPDATED_LIBRARY",as[as.CREATED=1]="CREATED",as[as.REMOVED=2]="REMOVED",as[as.UPDATED=3]="UPDATED",as[as.UNMODIFIED=4]="UNMODIFIED",as),sv=((ac=sv||{})[ac.SUCCESS=0]="SUCCESS",ac[ac.NO_MERGE_IN_PROGRESS=1]="NO_MERGE_IN_PROGRESS",ac[ac.UNABLE_TO_UNDO_CHANGES=2]="UNABLE_TO_UNDO_CHANGES",ac[ac.INTERNAL_ERROR=3]="INTERNAL_ERROR",ac),sb=((ad=sb||{})[ad.BASIS_PARENT=0]="BASIS_PARENT",ad[ad.PARENT=1]="PARENT",ad),sI=((au=sI||{})[au.PREVIEW=0]="PREVIEW",au[au.STAGE=1]="STAGE",au),sT=((ap=sT||{})[ap.FRAME_WITH_BACKGROUND_IMAGE=0]="FRAME_WITH_BACKGROUND_IMAGE",ap[ap.IMAGE=1]="IMAGE",ap[ap.STICKER=2]="STICKER",ap),sw=((am=sw||{})[am.APPLE=0]="APPLE",am[am.NOTO=1]="NOTO",am),sS=((ah=sS||{})[ah.PNG=0]="PNG",ah[ah.SVG=1]="SVG",ah[ah.RASTERIZE=2]="RASTERIZE",ah),sC=((a_=sC||{})[a_.CURRENT_TAB=0]="CURRENT_TAB",a_[a_.NEW_TAB=1]="NEW_TAB",a_),sO=((ag=sO||{})[ag.SEARCH=0]="SEARCH",ag[ag.PREFERENCES=1]="PREFERENCES",ag[ag.HIDE_UI=2]="HIDE_UI",ag),sA=((af=sA||{})[af.COPY_PASTE=0]="COPY_PASTE",af[af.COMPONENT_IMPORT=1]="COMPONENT_IMPORT",af[af.STATE_GROUP_IMPORT=2]="STATE_GROUP_IMPORT",af[af.STYLE_IMPORT=3]="STYLE_IMPORT",af[af.BRANCH_MERGE=4]="BRANCH_MERGE",af[af.TEMPLATE_INSERTION=5]="TEMPLATE_INSERTION",af[af.VARIABLE_IMPORT=6]="VARIABLE_IMPORT",af[af.VARIABLE_SET_IMPORT=7]="VARIABLE_SET_IMPORT",af[af.PLAYGROUND_INSERT=8]="PLAYGROUND_INSERT",af[af.MODULE_IMPORT=9]="MODULE_IMPORT",af),sN=((aE=sN||{})[aE.SOLID=0]="SOLID",aE[aE.DASHED=1]="DASHED",aE[aE.NONE=2]="NONE",aE),sL=((ay=sL||{})[ay.NO=0]="NO",ay[ay.YES=1]="YES",ay),sP=((av=sP||{})[av.ACTIVE_SCENE=0]="ACTIVE_SCENE",av[av.PLAYGROUND_SCENE=1]="PLAYGROUND_SCENE",av),sR=((ab=sR||{})[ab.NONE=0]="NONE",ab[ab.BLACK=1]="BLACK",ab[ab.GRAY_DARK=2]="GRAY_DARK",ab[ab.GRAY=3]="GRAY",ab[ab.GRAY_LIGHT=4]="GRAY_LIGHT",ab[ab.RED=5]="RED",ab[ab.RED_LIGHT=6]="RED_LIGHT",ab[ab.ORANGE=7]="ORANGE",ab[ab.ORANGE_LIGHT=8]="ORANGE_LIGHT",ab[ab.YELLOW=9]="YELLOW",ab[ab.YELLOW_LIGHT=10]="YELLOW_LIGHT",ab[ab.GREEN=11]="GREEN",ab[ab.GREEN_LIGHT=12]="GREEN_LIGHT",ab[ab.BLUE=13]="BLUE",ab[ab.BLUE_LIGHT=14]="BLUE_LIGHT",ab[ab.VIOLET=15]="VIOLET",ab[ab.VIOLET_LIGHT=16]="VIOLET_LIGHT",ab[ab.WHITE=17]="WHITE",ab[ab.STICKY_GRAY=18]="STICKY_GRAY",ab[ab.STICKY_RED=19]="STICKY_RED",ab[ab.STICKY_ORANGE=20]="STICKY_ORANGE",ab[ab.STICKY_YELLOW=21]="STICKY_YELLOW",ab[ab.STICKY_GREEN=22]="STICKY_GREEN",ab[ab.STICKY_BLUE=23]="STICKY_BLUE",ab[ab.STICKY_VIOLET=24]="STICKY_VIOLET",ab[ab.STICKY_PINK=25]="STICKY_PINK",ab[ab.STICKY_GRAY_LIGHT=26]="STICKY_GRAY_LIGHT",ab[ab.HIGHLIGHT_GRAY=27]="HIGHLIGHT_GRAY",ab[ab.HIGHLIGHT_RED=28]="HIGHLIGHT_RED",ab[ab.HIGHLIGHT_YELLOW=29]="HIGHLIGHT_YELLOW",ab[ab.HIGHLIGHT_GREEN=30]="HIGHLIGHT_GREEN",ab[ab.HIGHLIGHT_BLUE=31]="HIGHLIGHT_BLUE",ab[ab.HIGHLIGHT_VIOLET=32]="HIGHLIGHT_VIOLET",ab[ab.HIGHLIGHT_ORANGE=33]="HIGHLIGHT_ORANGE",ab[ab.HIGHLIGHT_WHITE=34]="HIGHLIGHT_WHITE",ab[ab.CUSTOM=35]="CUSTOM",ab),sk=((aI=sk||{})[aI.LAYERS=0]="LAYERS",aI[aI.ASSETS=1]="ASSETS",aI),sD=((aT=sD||{})[aT.NEXT=0]="NEXT",aT[aT.PREVIOUS=1]="PREVIOUS",aT[aT.COMMIT=2]="COMMIT",aT[aT.CANCEL=3]="CANCEL",aT[aT.CLEAR=4]="CLEAR",aT),sM=((aw=sM||{})[aw.VISIBLE=0]="VISIBLE",aw[aw.TRANSPARENT=1]="TRANSPARENT",aw[aw.TRANSPARENT_CUSTOM=2]="TRANSPARENT_CUSTOM",aw[aw.HIDDEN=3]="HIDDEN",aw),sF=((aS=sF||{})[aS.COPY_TO_CLIPBOARD=0]="COPY_TO_CLIPBOARD",aS[aS.COMPOSE_EMAIL=1]="COMPOSE_EMAIL",aS),sx=((aC=sx||{})[aC.RULER=0]="RULER",aC[aC.GUIDE=1]="GUIDE",aC[aC.BOTH=2]="BOTH",aC),sU=((aO=sU||{})[aO.GENERIC=0]="GENERIC",aO[aO.SNAP=1]="SNAP",aO[aO.LEVEL=2]="LEVEL",aO),sB=((aA=sB||{})[aA.YES=0]="YES",aA[aA.NO=1]="NO",aA),sV=((aN=sV||{})[aN.EMPTY=0]="EMPTY",aN[aN.RESIZING_WIDTH_AND_HEIGHT=1]="RESIZING_WIDTH_AND_HEIGHT",aN[aN.RESIZING_HEIGHT=2]="RESIZING_HEIGHT",aN[aN.RESIZING_NONE=3]="RESIZING_NONE",aN[aN.TRUNCATION_DISABLED=4]="TRUNCATION_DISABLED",aN[aN.TRUNCATION_ENABLED=5]="TRUNCATION_ENABLED",aN[aN.ALIGNMENT_LEFT=6]="ALIGNMENT_LEFT",aN[aN.ALIGNMENT_CENTER=7]="ALIGNMENT_CENTER",aN[aN.ALIGNMENT_RIGHT=8]="ALIGNMENT_RIGHT",aN[aN.ALIGNMENT_JUSTIFIED=9]="ALIGNMENT_JUSTIFIED",aN[aN.DECORATION_NONE=10]="DECORATION_NONE",aN[aN.DECORATION_UNDERLINE=11]="DECORATION_UNDERLINE",aN[aN.DECORATION_STRIKETHROUGH=12]="DECORATION_STRIKETHROUGH",aN[aN.LIST_STYLE_PLAIN=13]="LIST_STYLE_PLAIN",aN[aN.LIST_STYLE_UNORDERED=14]="LIST_STYLE_UNORDERED",aN[aN.LIST_STYLE_ORDERED=15]="LIST_STYLE_ORDERED",aN[aN.TEXT_CASE_ORIGINAL=16]="TEXT_CASE_ORIGINAL",aN[aN.TEXT_CASE_UPPER=17]="TEXT_CASE_UPPER",aN[aN.TEXT_CASE_LOWER=18]="TEXT_CASE_LOWER",aN[aN.TEXT_CASE_TITLE=19]="TEXT_CASE_TITLE",aN[aN.TEXT_CASE_SMALL_CAPS=20]="TEXT_CASE_SMALL_CAPS",aN[aN.TEXT_CASE_SMALL_CAPS_FORCED=21]="TEXT_CASE_SMALL_CAPS_FORCED",aN[aN.FRACTIONS_ON=22]="FRACTIONS_ON",aN[aN.FRACTIONS_OFF=23]="FRACTIONS_OFF",aN[aN.DISCRETIONARY_LIGATURES_ON=24]="DISCRETIONARY_LIGATURES_ON",aN[aN.DISCRETIONARY_LIGATURES_OFF=25]="DISCRETIONARY_LIGATURES_OFF",aN[aN.HISTORICAL_LIGATURES_ON=26]="HISTORICAL_LIGATURES_ON",aN[aN.HISTORICAL_LIGATURES_OFF=27]="HISTORICAL_LIGATURES_OFF",aN[aN.NUMERIC_STYLE_ORIGINAL=28]="NUMERIC_STYLE_ORIGINAL",aN[aN.NUMERIC_STYLE_UPPER_PROPORTIONAL=29]="NUMERIC_STYLE_UPPER_PROPORTIONAL",aN[aN.NUMERIC_STYLE_UPPER_MONOSPACE=30]="NUMERIC_STYLE_UPPER_MONOSPACE",aN[aN.NUMERIC_STYLE_LOWER_PROPORTIONAL=31]="NUMERIC_STYLE_LOWER_PROPORTIONAL",aN[aN.NUMERIC_STYLE_LOWER_MONOSPACE=32]="NUMERIC_STYLE_LOWER_MONOSPACE",aN[aN.NUMERIC_POSITION_SUB=33]="NUMERIC_POSITION_SUB",aN[aN.NUMERIC_POSITION_SUPER=34]="NUMERIC_POSITION_SUPER",aN[aN.NUMERIC_POSITION_NORMAL=35]="NUMERIC_POSITION_NORMAL",aN[aN.OPENTYPE_FEATURE_ON=36]="OPENTYPE_FEATURE_ON",aN[aN.OPENTYPE_FEATURE_OFF=37]="OPENTYPE_FEATURE_OFF",aN[aN.FONT_VARIATIONS=38]="FONT_VARIATIONS",aN[aN.LEADING_TRIM_CAP_HEIGHT=39]="LEADING_TRIM_CAP_HEIGHT",aN[aN.LEADING_TRIM_NONE=40]="LEADING_TRIM_NONE",aN[aN.HANGING_PUNCTUATION_ON=41]="HANGING_PUNCTUATION_ON",aN[aN.HANGING_PUNCTUATION_OFF=42]="HANGING_PUNCTUATION_OFF",aN[aN.HANGING_LISTS_ON=43]="HANGING_LISTS_ON",aN[aN.HANGING_LISTS_OFF=44]="HANGING_LISTS_OFF",aN),sG=((aL=sG||{})[aL.AUTOMATIC=0]="AUTOMATIC",aL[aL.WHEN_REQUESTED=1]="WHEN_REQUESTED",aL),sH=((aP=sH||{})[aP.NONE=0]="NONE",aP[aP.HORIZONTAL=1]="HORIZONTAL",aP[aP.VERTICAL=2]="VERTICAL",aP),sW=((aR=sW||{})[aR.MIN=0]="MIN",aR[aR.CENTER=1]="CENTER",aR[aR.MAX=2]="MAX",aR[aR.SPACE_EVENLY=3]="SPACE_EVENLY",aR[aR.SPACE_BETWEEN=4]="SPACE_BETWEEN",aR),sK=((ak=sK||{})[ak.MIN=0]="MIN",ak[ak.CENTER=1]="CENTER",ak[ak.MAX=2]="MAX",ak[ak.BASELINE=3]="BASELINE",ak),sz=((aD=sz||{})[aD.MIN=0]="MIN",aD[aD.CENTER=1]="CENTER",aD[aD.MAX=2]="MAX",aD[aD.STRETCH=3]="STRETCH",aD[aD.AUTO=4]="AUTO",aD[aD.BASELINE=5]="BASELINE",aD),sZ=((aM=sZ||{})[aM.AUTO=0]="AUTO",aM[aM.ABSOLUTE=1]="ABSOLUTE",aM),sY=((aF=sY||{})[aF.FIXED=0]="FIXED",aF[aF.RESIZE_TO_FIT=1]="RESIZE_TO_FIT",aF[aF.RESIZE_TO_FIT_WITH_IMPLICIT_SIZE=2]="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE",aF),sj=((ax=sj||{})[ax.PACKED=0]="PACKED",ax[ax.SPACE_BETWEEN=1]="SPACE_BETWEEN",ax),s$=((aU=s$||{})[aU.PADDING_TOP=0]="PADDING_TOP",aU[aU.PADDING_RIGHT=1]="PADDING_RIGHT",aU[aU.PADDING_BOTTOM=2]="PADDING_BOTTOM",aU[aU.PADDING_LEFT=3]="PADDING_LEFT",aU[aU.PADDING_HORIZONTAL=4]="PADDING_HORIZONTAL",aU[aU.PADDING_VERTICAL=5]="PADDING_VERTICAL",aU[aU.PADDING_ALL=6]="PADDING_ALL",aU[aU.SPACING=7]="SPACING",aU[aU.COUNTER_SPACING=8]="COUNTER_SPACING",aU),sq=((aB=sq||{})[aB.TOP=0]="TOP",aB[aB.RIGHT=1]="RIGHT",aB[aB.BOTTOM=2]="BOTTOM",aB[aB.LEFT=3]="LEFT",aB),sX=((aV=sX||{})[aV.LAYOUT=0]="LAYOUT",aV[aV.WHITEBOARD_LAYOUT=1]="WHITEBOARD_LAYOUT",aV[aV.VECTOR=2]="VECTOR",aV[aV.TEXT=3]="TEXT",aV[aV.RASTER=4]="RASTER",aV[aV.GRADIENT=5]="GRADIENT",aV[aV.PLACE_IMAGE=6]="PLACE_IMAGE",aV[aV.HISTORY=7]="HISTORY",aV[aV.PREVIEW=8]="PREVIEW",aV[aV.COMMENTS=9]="COMMENTS",aV[aV.BRANCHING=10]="BRANCHING",aV[aV.DEV_HANDOFF=11]="DEV_HANDOFF",aV[aV.COMPARE_CHANGES=12]="COMPARE_CHANGES",aV[aV.LIBRARY=13]="LIBRARY",aV[aV.DEV_HANDOFF_HISTORY=14]="DEV_HANDOFF_HISTORY",aV[aV.SLIDE_DECK=15]="SLIDE_DECK",aV),sJ=((aG=sJ||{})[aG.LAYOUT=0]="LAYOUT",aG[aG.HISTORY=1]="HISTORY",aG[aG.PREVIEW=2]="PREVIEW",aG[aG.BRANCHING=3]="BRANCHING",aG[aG.DEV_HANDOFF=4]="DEV_HANDOFF",aG[aG.LIBRARY=5]="LIBRARY",aG),sQ=((aH=sQ||{})[aH.DEFAULT=0]="DEFAULT",aH[aH.DRAGGING=1]="DRAGGING",aH[aH.RESIZING=2]="RESIZING",aH[aH.ROTATING=3]="ROTATING",aH[aH.SELECTING_TEXT=4]="SELECTING_TEXT",aH[aH.CLICKING_TO_CHANGE_SELECTION=5]="CLICKING_TO_CHANGE_SELECTION",aH),s0=((aW=s0||{})[aW.OFF=0]="OFF",aW[aW.ON=1]="ON",aW[aW.MIXED=2]="MIXED",aW),s1=((aK=s1||{})[aK.NONE=0]="NONE",aK[aK.COLOR=1]="COLOR",aK),s2=((az=s2||{})[az.NONE=0]="NONE",az[az.FILL=1]="FILL",az[az.STROKE=2]="STROKE",az[az.STROKE_PRESET=3]="STROKE_PRESET",az[az.EFFECT=4]="EFFECT",az[az.EXPORT=5]="EXPORT",az[az.LAYOUT_GRID=6]="LAYOUT_GRID",az[az.PLUGIN=7]="PLUGIN",az[az.PROTOTYPE_INTERACTION=8]="PROTOTYPE_INTERACTION",az[az.PROTOTYPE_INHERITED_INTERNAL_INTERACTION=9]="PROTOTYPE_INHERITED_INTERNAL_INTERACTION",az[az.PROTOTOTYPE_STARTING_POINT=10]="PROTOTOTYPE_STARTING_POINT",az),s3=((aZ=s3||{})[aZ.NONE=0]="NONE",aZ[aZ.PHONE=1]="PHONE",aZ[aZ.TABLET=2]="TABLET",aZ[aZ.DESKTOP=3]="DESKTOP",aZ[aZ.WATCH=4]="WATCH",aZ[aZ.PAPER=5]="PAPER",aZ[aZ.SOCIALMEDIA=6]="SOCIALMEDIA",aZ[aZ.FIGMA=7]="FIGMA",aZ[aZ.PRESENTATION=8]="PRESENTATION",aZ[aZ.ARCHIVE=9]="ARCHIVE",aZ),s4=((aY=s4||{})[aY.NONE=0]="NONE",aY[aY.SELECT=1]="SELECT",aY[aY.HAND=2]="HAND",aY[aY.COMMENTS=3]="COMMENTS",aY[aY.DROPPER_COLOR=4]="DROPPER_COLOR",aY[aY.FRAME=5]="FRAME",aY[aY.SLICE=6]="SLICE",aY[aY.STACK=7]="STACK",aY[aY.SHAPE_STAR=8]="SHAPE_STAR",aY[aY.SHAPE_LINE=9]="SHAPE_LINE",aY[aY.SHAPE_ARROW=10]="SHAPE_ARROW",aY[aY.SHAPE_ELLIPSE=11]="SHAPE_ELLIPSE",aY[aY.SHAPE_RECTANGLE=12]="SHAPE_RECTANGLE",aY[aY.SHAPE_REGULAR_POLYGON=13]="SHAPE_REGULAR_POLYGON",aY[aY.VECTOR_PEN=14]="VECTOR_PEN",aY[aY.VECTOR_PENCIL=15]="VECTOR_PENCIL",aY[aY.VECTOR_BEND=16]="VECTOR_BEND",aY[aY.VECTOR_PAINT_BUCKET=17]="VECTOR_PAINT_BUCKET",aY[aY.TYPE=18]="TYPE",aY[aY.SCALE=19]="SCALE",aY[aY.STICKY=20]="STICKY",aY[aY.STAMP=21]="STAMP",aY[aY.SHAPE_WHITEBOARD_SQUARE=22]="SHAPE_WHITEBOARD_SQUARE",aY[aY.SHAPE_WHITEBOARD_ELLIPSE=23]="SHAPE_WHITEBOARD_ELLIPSE",aY[aY.SHAPE_WHITEBOARD_DIAMOND=24]="SHAPE_WHITEBOARD_DIAMOND",aY[aY.SHAPE_WHITEBOARD_TRIANGLE_UP=25]="SHAPE_WHITEBOARD_TRIANGLE_UP",aY[aY.SHAPE_WHITEBOARD_TRIANGLE_DOWN=26]="SHAPE_WHITEBOARD_TRIANGLE_DOWN",aY[aY.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE=27]="SHAPE_WHITEBOARD_ROUNDED_RECTANGLE",aY[aY.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT=28]="SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT",aY[aY.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT=29]="SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT",aY[aY.CONNECTOR_ELBOWED=30]="CONNECTOR_ELBOWED",aY[aY.CONNECTOR_STRAIGHT=31]="CONNECTOR_STRAIGHT",aY[aY.CODE_BLOCK=32]="CODE_BLOCK",aY[aY.SHAPE_WHITEBOARD_ENG_DATABASE=33]="SHAPE_WHITEBOARD_ENG_DATABASE",aY[aY.SHAPE_WHITEBOARD_ENG_QUEUE=34]="SHAPE_WHITEBOARD_ENG_QUEUE",aY[aY.SHAPE_WHITEBOARD_ENG_FILE=35]="SHAPE_WHITEBOARD_ENG_FILE",aY[aY.SHAPE_WHITEBOARD_ENG_FOLDER=36]="SHAPE_WHITEBOARD_ENG_FOLDER",aY[aY.ERASER=37]="ERASER",aY[aY.HIGHLIGHTER=38]="HIGHLIGHTER",aY[aY.SECTION=39]="SECTION",aY[aY.WASHI_TAPE=40]="WASHI_TAPE",aY[aY.TABLE=41]="TABLE",aY[aY.SHAPE_WHITEBOARD_TRAPEZOID=42]="SHAPE_WHITEBOARD_TRAPEZOID",aY[aY.SHAPE_WHITEBOARD_STAR=43]="SHAPE_WHITEBOARD_STAR",aY[aY.SHAPE_WHITEBOARD_SHIELD=44]="SHAPE_WHITEBOARD_SHIELD",aY[aY.SHAPE_WHITEBOARD_HEXAGON=45]="SHAPE_WHITEBOARD_HEXAGON",aY[aY.SHAPE_WHITEBOARD_PENTAGON=46]="SHAPE_WHITEBOARD_PENTAGON",aY[aY.SHAPE_WHITEBOARD_OCTAGON=47]="SHAPE_WHITEBOARD_OCTAGON",aY[aY.SHAPE_WHITEBOARD_PLUS=48]="SHAPE_WHITEBOARD_PLUS",aY[aY.SHAPE_WHITEBOARD_PREDEFINED_PROCESS=49]="SHAPE_WHITEBOARD_PREDEFINED_PROCESS",aY[aY.SHAPE_WHITEBOARD_MANUAL_INPUT=50]="SHAPE_WHITEBOARD_MANUAL_INPUT",aY[aY.SHAPE_WHITEBOARD_CHEVRON=51]="SHAPE_WHITEBOARD_CHEVRON",aY[aY.SHAPE_WHITEBOARD_DOCUMENT_SINGLE=52]="SHAPE_WHITEBOARD_DOCUMENT_SINGLE",aY[aY.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE=53]="SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE",aY[aY.SHAPE_WHITEBOARD_ARROW_LEFT=54]="SHAPE_WHITEBOARD_ARROW_LEFT",aY[aY.SHAPE_WHITEBOARD_ARROW_RIGHT=55]="SHAPE_WHITEBOARD_ARROW_RIGHT",aY[aY.SHAPE_WHITEBOARD_SUMMING_JUNCTION=56]="SHAPE_WHITEBOARD_SUMMING_JUNCTION",aY[aY.SHAPE_WHITEBOARD_OR=57]="SHAPE_WHITEBOARD_OR",aY[aY.SHAPE_WHITEBOARD_SPEECH_BUBBLE=58]="SHAPE_WHITEBOARD_SPEECH_BUBBLE",aY[aY.SHAPE_WHITEBOARD_INTERNAL_STORAGE=59]="SHAPE_WHITEBOARD_INTERNAL_STORAGE",aY[aY.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS=60]="SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS",aY[aY.ANNOTATE=61]="ANNOTATE",aY[aY.IMAGE_OR_VIDEO=62]="IMAGE_OR_VIDEO",aY[aY.MEASURE=63]="MEASURE",aY[aY.SLIDES_POLL=64]="SLIDES_POLL",aY[aY.SLIDES_EMBED=65]="SLIDES_EMBED",aY[aY.HAND_SELECT=66]="HAND_SELECT",aY[aY.MULTISELECT=67]="MULTISELECT",aY[aY.WAND=68]="WAND",aY),s6=((aj=s6||{})[aj.MISSING=0]="MISSING",aj[aj.PRESENT=1]="PRESENT",aj[aj.MIXED=2]="MIXED",aj[aj.MIXED_VALUES_FIRST=3]="MIXED_VALUES_FIRST",aj[aj.MIXED_VALUES_NEXT=4]="MIXED_VALUES_NEXT",aj),s8=((a$=s8||{})[a$.FRAME_PRESETS=0]="FRAME_PRESETS",a$[a$.PENCIL_TOOL=1]="PENCIL_TOOL",a$[a$.CANVAS_ITEM=2]="CANVAS_ITEM",a$[a$.TRANSFORM_ITEM=3]="TRANSFORM_ITEM",a$[a$.TEMPLATE_ITEM=4]="TEMPLATE_ITEM",a$[a$.COMPONENT_ITEM=5]="COMPONENT_ITEM",a$[a$.INSTANCE_ITEM=6]="INSTANCE_ITEM",a$[a$.STATE_GROUP_ITEM=7]="STATE_GROUP_ITEM",a$[a$.CONSTRAINTS_ITEM=8]="CONSTRAINTS_ITEM",a$[a$.VECTOR_ITEM=9]="VECTOR_ITEM",a$[a$.GRIDS_ITEM=10]="GRIDS_ITEM",a$[a$.MASK_ITEM=11]="MASK_ITEM",a$[a$.LAYER_ITEM=12]="LAYER_ITEM",a$[a$.TYPE_ITEM=13]="TYPE_ITEM",a$[a$.FILL_ITEM=14]="FILL_ITEM",a$[a$.STROKE_ITEM=15]="STROKE_ITEM",a$[a$.EFFECTS_ITEM=16]="EFFECTS_ITEM",a$[a$.EXPORT_ITEM=17]="EXPORT_ITEM",a$[a$.STACK_ITEM=18]="STACK_ITEM",a$[a$.SCALE_ITEM=19]="SCALE_ITEM",a$[a$.REMOVE_GROUP_BACKGROUND_ITEM=20]="REMOVE_GROUP_BACKGROUND_ITEM",a$[a$.OVERFLOW_ITEM=21]="OVERFLOW_ITEM",a$[a$.SELECTION_COLORS=22]="SELECTION_COLORS",a$[a$.VARIABLE_MODE_ITEM=23]="VARIABLE_MODE_ITEM",a$[a$.VARIABLE_PAGE_LEVEL_MODE_ITEM=24]="VARIABLE_PAGE_LEVEL_MODE_ITEM",a$[a$.SLIDES_SIZE_ITEM=25]="SLIDES_SIZE_ITEM",a$[a$.SLIDES_POSITION_ITEM=26]="SLIDES_POSITION_ITEM",a$[a$.SLIDES_ANIMATION=27]="SLIDES_ANIMATION",a$[a$.NUM_VALUES=28]="NUM_VALUES",a$),s9=((aq=s9||{})[aq.FRAME_PRESETS_ITEM=0]="FRAME_PRESETS_ITEM",aq[aq.CORNER_RADIUS=1]="CORNER_RADIUS",aq[aq.FRAME_OPTIONS=2]="FRAME_OPTIONS",aq[aq.COUNT=3]="COUNT",aq[aq.STAR_INNER_SCALE=4]="STAR_INNER_SCALE",aq[aq.RECTANGLE_CORNER_RADII=5]="RECTANGLE_CORNER_RADII",aq[aq.FIXED_FRAME_OPTIONS=6]="FIXED_FRAME_OPTIONS",aq[aq.ARC_DATA=7]="ARC_DATA",aq[aq.TRANSFORM=8]="TRANSFORM",aq[aq.SIZE=9]="SIZE",aq[aq.ANGLE=10]="ANGLE",aq[aq.SECTION_ITEM=11]="SECTION_ITEM",aq[aq.NUM_VALUES=12]="NUM_VALUES",aq),s5=((aX=s5||{})[aX.TEXT_ALIGN_HORIZONTAL=0]="TEXT_ALIGN_HORIZONTAL",aX[aX.TEXT_ALIGN_VERTICAL=1]="TEXT_ALIGN_VERTICAL",aX[aX.TEXT_AUTO_RESIZE=2]="TEXT_AUTO_RESIZE",aX[aX.TEXT_STYLE=3]="TEXT_STYLE",aX[aX.NUM_VALUES=4]="NUM_VALUES",aX),s7=((aJ=s7||{})[aJ.NONE=0]="NONE",aJ[aJ.BOOL=1]="BOOL",aJ[aJ.TEXT=2]="TEXT",aJ[aJ.INSTANCE_SWAP=3]="INSTANCE_SWAP",aJ[aJ.VARIANT=4]="VARIANT",aJ),ce=((aQ=ce||{})[aQ.NONE=0]="NONE",aQ[aQ.UNUSED_DEF_ERROR=1]="UNUSED_DEF_ERROR",aQ[aQ.CONFLICTING_NAMES_ERROR=2]="CONFLICTING_NAMES_ERROR",aQ[aQ.CONFLICTING_NAMES_WITH_VARIANT_ERROR=3]="CONFLICTING_NAMES_WITH_VARIANT_ERROR",aQ),ct=((a0=ct||{})[a0.NOT_APPLICABLE=0]="NOT_APPLICABLE",a0[a0.YES=1]="YES",a0[a0.NO=2]="NO",a0),cr=((a1=cr||{})[a1.STATE_GROUP=0]="STATE_GROUP",a1[a1.STATE=1]="STATE",a1[a1.STATE_INSTANCE=2]="STATE_INSTANCE",a1[a1.STATE_OR_STATE_INSTANCE_SUBLAYER=3]="STATE_OR_STATE_INSTANCE_SUBLAYER",a1[a1.NON_STATE_COMPONENTS=4]="NON_STATE_COMPONENTS",a1[a1.NONE=5]="NONE",a1),cn=((a2=cn||{})[a2.NONE=0]="NONE",a2[a2.TOO_MANY_STATES_ERROR=1]="TOO_MANY_STATES_ERROR",a2[a2.MISSING_PROPERTIES_ERROR=2]="MISSING_PROPERTIES_ERROR",a2[a2.DUPLICATE_STATE_ERROR=3]="DUPLICATE_STATE_ERROR",a2[a2.PARSE_ERROR=4]="PARSE_ERROR",a2),ci=((a3=ci||{})[a3.NONE=0]="NONE",a3[a3.SINGLE_NODE=1]="SINGLE_NODE",a3[a3.MULTI_NODE=2]="MULTI_NODE",a3),ca=((a4=ca||{})[a4.FIXED=0]="FIXED",a4[a4.HUG_CONTENT=1]="HUG_CONTENT",a4[a4.FILL_CONTAINER=2]="FILL_CONTAINER",a4),co=((a6=co||{})[a6.CANVAS=0]="CANVAS",a6[a6.PROPERTIES_PANEL=1]="PROPERTIES_PANEL",a6[a6.DRAG_TO_CREATE=2]="DRAG_TO_CREATE",a6),cl=((a8=cl||{})[a8.NONE=0]="NONE",a8[a8.CONNECTOR=1]="CONNECTOR",a8[a8.LINE=2]="LINE",a8[a8.VECTOR=3]="VECTOR",a8[a8.VERTEX=4]="VERTEX",a8[a8.ENDPOINT=5]="ENDPOINT",a8[a8.PENCIL=6]="PENCIL",a8[a8.WASHI_TAPE=7]="WASHI_TAPE",a8[a8.SECTION=8]="SECTION",a8),cs=((a9=cs||{})[a9.NONE=0]="NONE",a9[a9.FRAME_NAME=1]="FRAME_NAME",a9[a9.FLOW_STARTING_POINT_NAME=2]="FLOW_STARTING_POINT_NAME",a9[a9.SECTION_NAME=3]="SECTION_NAME",a9),cc=((a5=cc||{})[a5.NONE=0]="NONE",a5[a5.INT=1]="INT",a5[a5.BOOL=2]="BOOL",a5[a5.FLOAT=3]="FLOAT",a5[a5.STRING=4]="STRING",a5[a5.JSON=5]="JSON",a5[a5.GRADIENT_STOP_SELECTION=7]="GRADIENT_STOP_SELECTION",a5[a5.SELECTED_PROPERTY=8]="SELECTED_PROPERTY",a5[a5.BOOL_ARRAY=9]="BOOL_ARRAY",a5[a5.GUID=10]="GUID",a5[a5.ON_CANVAS_NAME_EDITOR_INFO=11]="ON_CANVAS_NAME_EDITOR_INFO",a5[a5.EXPORT_SELECTION_SETTINGS=12]="EXPORT_SELECTION_SETTINGS",a5[a5.ACTIVE_EMBED_DATA=13]="ACTIVE_EMBED_DATA",a5[a5.VOTING_SESSION_INFO=14]="VOTING_SESSION_INFO",a5[a5.HOVERED_COMPONENT_PROP_DEF=15]="HOVERED_COMPONENT_PROP_DEF",a5[a5.TEXT_REVIEW_PLUGIN_INFO=16]="TEXT_REVIEW_PLUGIN_INFO",a5[a5.DEV_HANDOFF_CODE_LANGUAGE=17]="DEV_HANDOFF_CODE_LANGUAGE",a5[a5.DEV_HANDOFF_PREFERENCES=18]="DEV_HANDOFF_PREFERENCES",a5),cd=((a7=cd||{})[a7.OVERRIDES_FOR_LAYER_AND_SUBLAYERS=0]="OVERRIDES_FOR_LAYER_AND_SUBLAYERS",a7[a7.EXPORTS=1]="EXPORTS",a7[a7.EFFECTS=2]="EFFECTS",a7[a7.LAYER=3]="LAYER",a7[a7.VISIBLE=4]="VISIBLE",a7[a7.NAME=5]="NAME",a7[a7.FILL=6]="FILL",a7[a7.STROKE=7]="STROKE",a7[a7.TEXT=8]="TEXT",a7[a7.TEXT_STYLE=9]="TEXT_STYLE",a7[a7.SIZE=10]="SIZE",a7[a7.OVERRIDDEN_SYMBOL=11]="OVERRIDDEN_SYMBOL",a7[a7.PROTOTYPE_INTERACTIONS=12]="PROTOTYPE_INTERACTIONS",a7[a7.OVERLAY=13]="OVERLAY",a7[a7.NUM_VALUES=14]="NUM_VALUES",a7),cu=((oe=cu||{})[oe.ALWAYS=0]="ALWAYS",oe[oe.ONLY_WHEN_NOT_EMPTY=1]="ONLY_WHEN_NOT_EMPTY",oe[oe.ONLY_WHEN_NOT_DISABLED=2]="ONLY_WHEN_NOT_DISABLED",oe),cp=((ot=cp||{})[ot.UNJOINED=0]="UNJOINED",ot[ot.UNJOINED_FROM_ERROR=1]="UNJOINED_FROM_ERROR",ot[ot.UNJOINED_FROM_VALIDATION_FAILURE=2]="UNJOINED_FROM_VALIDATION_FAILURE",ot[ot.GOT_SCHEMA=3]="GOT_SCHEMA",ot[ot.JOINING_INITIAL_LOAD=4]="JOINING_INITIAL_LOAD",ot[ot.JOINING_RECONNECT=5]="JOINING_RECONNECT",ot[ot.JOINING_RECONNECT_AWAITING_QUERY_REPLY=6]="JOINING_RECONNECT_AWAITING_QUERY_REPLY",ot[ot.JOINED=7]="JOINED",ot[ot.SHOULD_UPGRADE=8]="SHOULD_UPGRADE",ot[ot.UPGRADING=9]="UPGRADING",ot[ot.WAITING_FOR_RELOAD=10]="WAITING_FOR_RELOAD",ot[ot.DETACHED=11]="DETACHED",ot),cm=((or=cm||{})[or.COMMENT=0]="COMMENT",or[or.EMPTY_LINE=1]="EMPTY_LINE",or[or.DECLARATION=2]="DECLARATION",or[or.BLOCK_COMMENT=3]="BLOCK_COMMENT",or),ch=((on=ch||{})[on.DESIGN=0]="DESIGN",on[on.PROTOTYPE=1]="PROTOTYPE",on[on.INSPECT=2]="INSPECT",on[on.COMMENT=3]="COMMENT",on[on.EXPORT=4]="EXPORT",on[on.SLIDE=5]="SLIDE",on[on.SLIDE_ANIMATION=6]="SLIDE_ANIMATION",on),c_=((oi=c_||{})[oi.PAN=0]="PAN",oi[oi.ZOOM=1]="ZOOM",oi),cg=((oa=cg||{})[oa.CSS=0]="CSS",oa[oa.IOS=1]="IOS",oa[oa.ANDROID=2]="ANDROID",oa),cf=((oo=cf||{})[oo.TABULAR=0]="TABULAR",oo[oo.CODE=1]="CODE",oo),cE=((ol=cE||{})[ol.NOT_LOADED=0]="NOT_LOADED",ol[ol.REQUESTED=1]="REQUESTED",ol[ol.LOADED=2]="LOADED",ol),cy=((os=cy||{})[os.NONE=0]="NONE",os[os.DIVIDER=1]="DIVIDER",os[os.WHITEBOARD_COLOR=2]="WHITEBOARD_COLOR",os[os.STICKY_COLOR=3]="STICKY_COLOR",os[os.HIGHLIGHT_COLOR=4]="HIGHLIGHT_COLOR",os[os.WHITEBOARD_STROKE=5]="WHITEBOARD_STROKE",os[os.WHITEBOARD_SHAPE=6]="WHITEBOARD_SHAPE",os[os.TEXT_DECORATION=7]="TEXT_DECORATION",os[os.HYPERLINK=8]="HYPERLINK",os[os.BULLETED_LIST=9]="BULLETED_LIST",os[os.WHITEBOARD_TEXT_STYLE=10]="WHITEBOARD_TEXT_STYLE",os[os.TEXT_ALIGN=11]="TEXT_ALIGN",os[os.FONT_FAMILY=12]="FONT_FAMILY",os[os.CONNECTOR_LINE_STYLE=13]="CONNECTOR_LINE_STYLE",os[os.CONNECTOR_START_CAP=14]="CONNECTOR_START_CAP",os[os.CONNECTOR_END_CAP=15]="CONNECTOR_END_CAP",os[os.AUTHOR_VISIBILITY=16]="AUTHOR_VISIBILITY",os[os.ADD_TEXT=17]="ADD_TEXT",os[os.CODE_BLOCK_LANGUAGE=18]="CODE_BLOCK_LANGUAGE",os[os.IMAGE=19]="IMAGE",os[os.BORDER=20]="BORDER",os[os.DESCRIPTION=21]="DESCRIPTION",os[os.EMBED_OPEN_EXTERNAL=22]="EMBED_OPEN_EXTERNAL",os[os.EMBED_MAXIMIZE=23]="EMBED_MAXIMIZE",os[os.EMBED_CONVERT_TO_TEXT=24]="EMBED_CONVERT_TO_TEXT",os[os.SECTION_SHOW_HIDE=25]="SECTION_SHOW_HIDE",os[os.SECTION_RENAME=26]="SECTION_RENAME",os[os.RESIZE_TO_FIT=27]="RESIZE_TO_FIT",os[os.WASHI_TAPE_PATTERN=28]="WASHI_TAPE_PATTERN",os[os.FACE_STAMP=29]="FACE_STAMP",os[os.START_MIND_MAP=30]="START_MIND_MAP",os[os.WIDGET=31]="WIDGET",os),cv=((oc=cv||{})[oc.PNG=0]="PNG",oc[oc.JPEG=1]="JPEG",oc[oc.PDF=2]="PDF",oc[oc.CSV=3]="CSV",oc),cb=((od=cb||{})[od.STICKY=0]="STICKY",od[od.TABLE=1]="TABLE",od),cI=((ou=cI||{})[ou.TRANSPARENT=0]="TRANSPARENT",ou[ou.WHITE=1]="WHITE",ou[ou.CHECKERBOARD=2]="CHECKERBOARD",ou[ou.HALF_CHECKERBOARD=3]="HALF_CHECKERBOARD",ou[ou.HALF_WHITE=4]="HALF_WHITE",ou[ou.CUSTOM_COLOR=5]="CUSTOM_COLOR",ou),cT=((op=cT||{})[op.SOLID=0]="SOLID",op[op.TRANSPARENT=1]="TRANSPARENT",op[op.GRID=2]="GRID",op),cw=((om=cw||{})[om.ATTACHED_FILE_TIP=0]="ATTACHED_FILE_TIP",om[om.DETACHED_FILE_TIP=1]="DETACHED_FILE_TIP",om[om.DETACHED_BRANCH_TIP=2]="DETACHED_BRANCH_TIP",om[om.BRANCH_POINT=3]="BRANCH_POINT",om[om.PREVIEW_BRANCH_TIP=4]="PREVIEW_BRANCH_TIP",om[om.STAGED_BRANCH_TIP=5]="STAGED_BRANCH_TIP",om[om.STAGED_FILE_TIP=6]="STAGED_FILE_TIP",om),cS=((oh=cS||{})[oh.NONE=0]="NONE",oh[oh.BEGIN_PREVIEW=1]="BEGIN_PREVIEW",oh[oh.RECREATE_BRANCH_POINT=2]="RECREATE_BRANCH_POINT",oh[oh.PREVIEW_CHANGES=3]="PREVIEW_CHANGES",oh[oh.STAGE_CHANGES=4]="STAGE_CHANGES",oh[oh.RESET_TO_BRANCH_POINT=5]="RESET_TO_BRANCH_POINT",oh[oh.COMMIT=6]="COMMIT",oh[oh.ABANDON=7]="ABANDON",oh[oh.STAGE_CHANGES_WHILE_ATTACHED=8]="STAGE_CHANGES_WHILE_ATTACHED",oh[oh.BEGIN_MERGE=9]="BEGIN_MERGE",oh),cC=((o_=cC||{})[o_.UNKNOWN=0]="UNKNOWN",o_[o_.US_QWERTY=1]="US_QWERTY",o_[o_.DVORAK=2]="DVORAK",o_[o_.GERMAN=3]="GERMAN",o_[o_.FRENCH_AZERTY=4]="FRENCH_AZERTY",o_[o_.HIRAGANA_KANA=5]="HIRAGANA_KANA",o_[o_.UK_MAC=6]="UK_MAC",o_[o_.UK_PC=7]="UK_PC",o_[o_.SWEDISH=8]="SWEDISH",o_[o_.FINNISH=9]="FINNISH",o_[o_.DANISH=10]="DANISH",o_[o_.NORWEGIAN=11]="NORWEGIAN",o_[o_.ITALIAN=12]="ITALIAN",o_[o_.SPANISH=13]="SPANISH",o_[o_.SPANISH_LATAM=14]="SPANISH_LATAM",o_[o_.CHINESE=15]="CHINESE",o_[o_.PORTUGUESE=16]="PORTUGUESE",o_[o_.KOREAN=17]="KOREAN",o_),cO=((og=cO||{})[og.DESIGN=0]="DESIGN",og[og.WHITEBOARD=1]="WHITEBOARD",og[og.DEV_HANDOFF=2]="DEV_HANDOFF",og[og.LIBRARY_VIEWER=3]="LIBRARY_VIEWER",og[og.SLIDES=4]="SLIDES",og[og.SITES=5]="SITES",og),cA=((of=cA||{})[of.RIGHT=0]="RIGHT",of[of.ABOVE=1]="ABOVE",of[of.CUSTOM_POSITION=2]="CUSTOM_POSITION",of[of.BELOW=3]="BELOW",of),cN=((oE=cN||{})[oE.OFF=0]="OFF",oE[oE.ON_AND_LOCKED=1]="ON_AND_LOCKED",oE[oE.KEEP_UI=2]="KEEP_UI",oE[oE.HIDE_UI=3]="HIDE_UI",oE),cL=((oy=cL||{})[oy.NONE=0]="NONE",oy[oy.FRAME=1]="FRAME",oy[oy.GROUP=2]="GROUP",oy[oy.STACK=3]="STACK",oy[oy.SECTION=4]="SECTION",oy[oy.RESPONSIVE_SET=5]="RESPONSIVE_SET",oy),cP=((ov=cP||{})[ov.SELECTION=0]="SELECTION",ov[ov.SNAPPING=1]="SNAPPING",ov),cR=((ob=cR||{})[ob.MISSING=0]="MISSING",ob[ob.CORNER_RADIUS=1]="CORNER_RADIUS",ob[ob.PARAGRAPH_SPACING=2]="PARAGRAPH_SPACING",ob[ob.PARAGRAPH_INDENT=3]="PARAGRAPH_INDENT",ob[ob.STROKE_WEIGHT=4]="STROKE_WEIGHT",ob[ob.STACK_SPACING=5]="STACK_SPACING",ob[ob.STACK_PADDING_LEFT=6]="STACK_PADDING_LEFT",ob[ob.STACK_PADDING_TOP=7]="STACK_PADDING_TOP",ob[ob.STACK_PADDING_RIGHT=8]="STACK_PADDING_RIGHT",ob[ob.STACK_PADDING_BOTTOM=9]="STACK_PADDING_BOTTOM",ob[ob.VISIBLE=10]="VISIBLE",ob[ob.TEXT_DATA=11]="TEXT_DATA",ob[ob.WIDTH=12]="WIDTH",ob[ob.HEIGHT=13]="HEIGHT",ob[ob.RECTANGLE_TOP_LEFT_CORNER_RADIUS=14]="RECTANGLE_TOP_LEFT_CORNER_RADIUS",ob[ob.RECTANGLE_TOP_RIGHT_CORNER_RADIUS=15]="RECTANGLE_TOP_RIGHT_CORNER_RADIUS",ob[ob.RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS=16]="RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS",ob[ob.RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS=17]="RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS",ob[ob.BORDER_TOP_WEIGHT=18]="BORDER_TOP_WEIGHT",ob[ob.BORDER_BOTTOM_WEIGHT=19]="BORDER_BOTTOM_WEIGHT",ob[ob.BORDER_LEFT_WEIGHT=20]="BORDER_LEFT_WEIGHT",ob[ob.BORDER_RIGHT_WEIGHT=21]="BORDER_RIGHT_WEIGHT",ob[ob.VARIANT_PROPERTIES=22]="VARIANT_PROPERTIES",ob[ob.STACK_COUNTER_SPACING=23]="STACK_COUNTER_SPACING",ob[ob.MIN_WIDTH=24]="MIN_WIDTH",ob[ob.MAX_WIDTH=25]="MAX_WIDTH",ob[ob.MIN_HEIGHT=26]="MIN_HEIGHT",ob[ob.MAX_HEIGHT=27]="MAX_HEIGHT",ob),ck=((oI=ck||{})[oI.DONT_MERGE=0]="DONT_MERGE",oI[oI.TEXT_EDIT=1]="TEXT_EDIT",oI[oI.TEXT_LINE_HEIGHT=2]="TEXT_LINE_HEIGHT",oI[oI.TEXT_FONT_SIZE=3]="TEXT_FONT_SIZE",oI[oI.TEXT_LETTER_SPACING=4]="TEXT_LETTER_SPACING",oI[oI.LAYER_OPACITY=5]="LAYER_OPACITY",oI[oI.NUDGE=6]="NUDGE",oI[oI.SELECTION_PROPERTY=7]="SELECTION_PROPERTY",oI[oI.STYLE_SELECTION_PROPERTY=8]="STYLE_SELECTION_PROPERTY",oI),cD=((oT=cD||{})[oT.NO_SESSION=0]="NO_SESSION",oT[oT.JOINED=1]="JOINED",oT[oT.NOT_JOINED=2]="NOT_JOINED",oT[oT.ENDED=3]="ENDED",oT),cM=((ow=cM||{})[ow.NONE=0]="NONE",ow[ow.FILL=1]="FILL",ow[ow.TEXT=2]="TEXT",ow[ow.EFFECT=3]="EFFECT",ow[ow.GRID=4]="GRID",ow),cF=((oS=cF||{})[oS.TOP_LEFT=0]="TOP_LEFT",oS[oS.TOP_CENTER=1]="TOP_CENTER",oS[oS.TOP_RIGHT=2]="TOP_RIGHT",oS[oS.MIDDLE_LEFT=3]="MIDDLE_LEFT",oS[oS.MIDDLE_CENTER=4]="MIDDLE_CENTER",oS[oS.MIDDLE_RIGHT=5]="MIDDLE_RIGHT",oS[oS.BOTTOM_LEFT=6]="BOTTOM_LEFT",oS[oS.BOTTOM_CENTER=7]="BOTTOM_CENTER",oS[oS.BOTTOM_RIGHT=8]="BOTTOM_RIGHT",oS),cU=((oC=cU||{})[oC.PRESENT=0]="PRESENT",oC[oC.PREVIEW=1]="PREVIEW",oC[oC.HTML_PREVIEW=2]="HTML_PREVIEW",oC),cB=((oO=cB||{})[oO.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",oO),cV=((oA=cV||{})[oA.DEFINITELY_COVERED_ONLY=0]="DEFINITELY_COVERED_ONLY",oA[oA.DEFINITELY_COVERED_AND_OUTDATED=1]="DEFINITELY_COVERED_AND_OUTDATED",oA),cG=((oN=cG||{})[oN.SUCCESS=0]="SUCCESS",oN[oN.ERROR_TEXT_SIZE=1]="ERROR_TEXT_SIZE",oN[oN.ERROR_OTHER=2]="ERROR_OTHER",oN),cH=((oL=cH||{})[oL.PIXEL=0]="PIXEL",oL[oL.SCALED=1]="SCALED",oL),cW=((oP=cW||{})[oP.DEFAULT=0]="DEFAULT",oP[oP.UNDO_REDO=1]="UNDO_REDO",oP[oP.ANNOTATIONS=2]="ANNOTATIONS",oP[oP.NODE_STATUS=3]="NODE_STATUS",oP),cK=((oR=cK||{})[oR.FIT_TO_SCREEN=0]="FIT_TO_SCREEN",oR[oR.FIT_TO_WIDTH=1]="FIT_TO_WIDTH",oR[oR.FILL_SCREEN=2]="FILL_SCREEN",oR),cz=((ok=cz||{})[ok.X=0]="X",ok[ok.Y=1]="Y",ok),cZ=((oD=cZ||{})[oD.LEFT=0]="LEFT",oD[oD.CENTER=1]="CENTER",oD[oD.RIGHT=2]="RIGHT",oD[oD.JUSTIFIED=3]="JUSTIFIED",oD),cY=((oM=cY||{})[oM.TOP=0]="TOP",oM[oM.CENTER=1]="CENTER",oM[oM.BOTTOM=2]="BOTTOM",oM),cj=((oF=cj||{})[oF.CLICK=0]="CLICK",oF[oF.DRAG=1]="DRAG",oF),c$=((ox=c$||{})[ox.TOP=0]="TOP",ox[ox.RIGHT=1]="RIGHT",ox[ox.BOTTOM=2]="BOTTOM",ox[ox.LEFT=3]="LEFT",ox),cq=((oU=cq||{})[oU.YES=0]="YES",oU[oU.NO=1]="NO",oU),cX=((oB=cX||{})[oB.ROW=0]="ROW",oB[oB.COLUMN=1]="COLUMN",oB),cJ=((oV=cJ||{})[oV.FORWARD=0]="FORWARD",oV[oV.BACKWARD=1]="BACKWARD",oV),cQ=((oG=cQ||{})[oG.HIDE=0]="HIDE",oG[oG.REORDER_AND_APPEND_ONLY=1]="REORDER_AND_APPEND_ONLY",oG[oG.FULL=2]="FULL",oG),c0=((oH=c0||{})[oH.AXIS=0]="AXIS",oH[oH.POINT=1]="POINT",oH),c1=((oW=c1||{})[oW.NONE=0]="NONE",oW[oW.PIXEL_GRID=1]="PIXEL_GRID",oW[oW.DOT_GRID=16]="DOT_GRID",oW),c2=((oK=c2||{})[oK.EDITOR_TEMPLATE=0]="EDITOR_TEMPLATE",oK[oK.SLIDES_TEMPLATE=1]="SLIDES_TEMPLATE",oK),c3=((oz=c3||{})[oz.SUCCESS=0]="SUCCESS",oz[oz.TRIGGERED_DETACH=1]="TRIGGERED_DETACH",oz[oz.INTERNAL_ERROR=2]="INTERNAL_ERROR",oz),c4=((oZ=c4||{})[oZ.SUCCESS=0]="SUCCESS",oZ[oZ.NOT_DETACHED_ERROR=1]="NOT_DETACHED_ERROR",oZ[oZ.INTERNAL_ERROR=2]="INTERNAL_ERROR",oZ),c6=((oY=c6||{})[oY.NONE=0]="NONE",oY[oY.DOCUMENT=1]="DOCUMENT",oY[oY.CANVAS=2]="CANVAS",oY[oY.GROUP_DEPRECATED=3]="GROUP_DEPRECATED",oY[oY.FRAME=4]="FRAME",oY[oY.SYMBOL=5]="SYMBOL",oY[oY.INSTANCE=6]="INSTANCE",oY[oY.STICKY=7]="STICKY",oY[oY.SHAPE_WITH_TEXT=8]="SHAPE_WITH_TEXT",oY[oY.CONNECTOR=9]="CONNECTOR",oY[oY.CODE_BLOCK=10]="CODE_BLOCK",oY[oY.WIDGET=11]="WIDGET",oY[oY.STAMP=12]="STAMP",oY[oY.MEDIA=13]="MEDIA",oY[oY.SECTION=14]="SECTION",oY[oY.SECTION_OVERLAY=15]="SECTION_OVERLAY",oY[oY.TABLE=16]="TABLE",oY[oY.TABLE_CELL=17]="TABLE_CELL",oY[oY.SLIDE=18]="SLIDE",oY[oY.SLIDE_GRID=19]="SLIDE_GRID",oY[oY.SLIDE_ROW=20]="SLIDE_ROW",oY[oY.MODULE=21]="MODULE",oY[oY.VECTOR_OPERATION=22]="VECTOR_OPERATION",oY[oY.VECTOR=23]="VECTOR",oY[oY.HIGHLIGHT=24]="HIGHLIGHT",oY[oY.STAR=25]="STAR",oY[oY.LINE=26]="LINE",oY[oY.ELLIPSE=27]="ELLIPSE",oY[oY.RECTANGLE=28]="RECTANGLE",oY[oY.REGULAR_POLYGON=29]="REGULAR_POLYGON",oY[oY.ROUNDED_RECTANGLE=30]="ROUNDED_RECTANGLE",oY[oY.TEXT=31]="TEXT",oY[oY.SLICE=32]="SLICE",oY[oY.WASHI_TAPE=33]="WASHI_TAPE",oY[oY.VARIABLE=34]="VARIABLE",oY[oY.VARIABLE_SET=35]="VARIABLE_SET",oY[oY.ASSISTED_LAYOUT_DEPRECATED=36]="ASSISTED_LAYOUT_DEPRECATED",oY[oY.INTERACTIVE_SLIDE_ELEMENT=37]="INTERACTIVE_SLIDE_ELEMENT",oY[oY.VARIABLE_OVERRIDE=38]="VARIABLE_OVERRIDE",oY),c8=((oj=c8||{})[oj.EMBED=0]="EMBED",oj[oj.LINK_PREVIEW=1]="LINK_PREVIEW",oj[oj.WIDGET=2]="WIDGET",oj),c9=((o$=c9||{})[o$.LOCAL=0]="LOCAL",o$[o$.REMOTE=1]="REMOTE",o$),c5=((oq=c5||{})[oq.CREATE=0]="CREATE",oq[oq.DELETE=1]="DELETE",oq[oq.PROPERTY_CHANGE=2]="PROPERTY_CHANGE",oq[oq.STYLE_PROPERTY_CHANGE=3]="STYLE_PROPERTY_CHANGE",oq[oq.STYLE_CREATE=4]="STYLE_CREATE",oq[oq.STYLE_DELETE=5]="STYLE_DELETE",oq),c7=((oX=c7||{})[oX.LOADED=0]="LOADED",oX[oX.LOADING=1]="LOADING",oX[oX.FAILED=2]="FAILED",oX),de=((oJ=de||{})[oJ.GROUP=0]="GROUP",oJ[oJ.UNION=1]="UNION",oJ[oJ.SUBTRACT=2]="SUBTRACT",oJ[oJ.INTERSECT=3]="INTERSECT",oJ[oJ.XOR=4]="XOR",oJ[oJ.STATE_GROUP=5]="STATE_GROUP",oJ),dt=((oQ=dt||{})[oQ.UNLOADED=0]="UNLOADED",oQ[oQ.NOT_ANIMATED=1]="NOT_ANIMATED",oQ[oQ.ANIMATED=2]="ANIMATED",oQ),dr=((o0=dr||{})[o0.NONE=0]="NONE",o0[o0.PRESET=1]="PRESET",o0[o0.CUSTOM=2]="CUSTOM",o0[o0.PRESENTATION=3]="PRESENTATION",o0),dn=((o1=dn||{})[o1.VALID=0]="VALID",o1[o1.NO_FRAMES=1]="NO_FRAMES",o1[o1.INVALID_START_NODE=2]="INVALID_START_NODE",o1),di=((o2=di||{})[o2.SCROLLS=0]="SCROLLS",o2[o2.FIXED=1]="FIXED",o2[o2.STICKY_SCROLLS=2]="STICKY_SCROLLS",o2),da=((o3=da||{})[o3.INACTIVE=0]="INACTIVE",o3[o3.ALL_FRAMES=1]="ALL_FRAMES",o3[o3.COMPONENT_SET=2]="COMPONENT_SET",o3[o3.RESPONSIVE_SET=3]="RESPONSIVE_SET",o3),dl=((o4=dl||{})[o4.VARIABLES_MODAL=0]="VARIABLES_MODAL",o4[o4.VARIABLE_PICKER=1]="VARIABLE_PICKER",o4),ds=((o6=ds||{})[o6.AUTOMATIC_FIRST_COLLECTION=0]="AUTOMATIC_FIRST_COLLECTION",o6[o6.VARIABLES_MODAL=1]="VARIABLES_MODAL",o6),dc=((o8=dc||{})[o8.ADD_CHANGES=0]="ADD_CHANGES",o8[o8.REPLACE_CHANGES=1]="REPLACE_CHANGES",o8),dd=((o9=dd||{})[o9.NONE=0]="NONE",o9[o9.DISCONNECTED_AUTOSAVE_DISABLED=1]="DISCONNECTED_AUTOSAVE_DISABLED",o9[o9.DISCONNECTED_SERVER_ISSUES=2]="DISCONNECTED_SERVER_ISSUES",o9[o9.DISCONNECTED_OTHER=3]="DISCONNECTED_OTHER",o9[o9.SYNCING_AUTOSAVE_DISABLED=4]="SYNCING_AUTOSAVE_DISABLED",o9[o9.SYNCING_SERVER_ISSUES=5]="SYNCING_SERVER_ISSUES",o9[o9.SYNCING_OTHER=6]="SYNCING_OTHER",o9[o9.SUPPRESS_UNSAVED_CHANGES_UI=7]="SUPPRESS_UNSAVED_CHANGES_UI",o9),du=((o5=du||{})[o5.NONE=0]="NONE",o5[o5.SCENEGRAPH_VALIDATION_ERROR=1]="SCENEGRAPH_VALIDATION_ERROR",o5[o5.NON_ATOMIC_SYNC_ERROR=2]="NON_ATOMIC_SYNC_ERROR",o5),dp=((o7=dp||{})[o7.NEW_FILE=0]="NEW_FILE",o7[o7.INITIAL_LOAD=1]="INITIAL_LOAD",o7[o7.RECONNECT=2]="RECONNECT",o7),dm=((le=dm||{})[le.DEFAULT=0]="DEFAULT",le[le.CROSSHAIR=1]="CROSSHAIR",le[le.EYEDROPPER=2]="EYEDROPPER",le[le.HAND=3]="HAND",le[le.PAINT_BUCKET=4]="PAINT_BUCKET",le[le.PEN=5]="PEN",le[le.PENCIL=6]="PENCIL",le[le.MARKER=7]="MARKER",le[le.ERASER=8]="ERASER",le[le.HIGHLIGHTER=9]="HIGHLIGHTER",le[le.HIGH_FIVE=10]="HIGH_FIVE",le),dh=((lt=dh||{})[lt.NONE=0]="NONE",lt[lt.STICKY=1]="STICKY",lt[lt.SHAPE_WITH_TEXT=2]="SHAPE_WITH_TEXT",lt[lt.SECTION=3]="SECTION",lt[lt.BUG_BASH=4]="BUG_BASH",lt[lt.STANDUP=5]="STANDUP",lt[lt.DESIGN_CRIT=6]="DESIGN_CRIT",lt[lt.USER_JOURNEY=7]="USER_JOURNEY",lt[lt.MAKE_SOMETHING_BRAINSTORM=8]="MAKE_SOMETHING_BRAINSTORM",lt[lt.MAKE_SOMETHING_TEAM_CHART=9]="MAKE_SOMETHING_TEAM_CHART",lt[lt.MAKE_SOMETHING_TEAM_UPDATES=10]="MAKE_SOMETHING_TEAM_UPDATES",lt[lt.MAKE_SOMETHING_PLANNING=11]="MAKE_SOMETHING_PLANNING",lt[lt.RETRO=12]="RETRO",lt),d_=((lr=d_||{})[lr.BASIC=0]="BASIC",lr[lr.EXPANDED=1]="EXPANDED",lr),dg=((ln=dg||{})[ln.DEFAULT=0]="DEFAULT",ln[ln.BLUE=1]="BLUE",ln[ln.GREEN=2]="GREEN",ln[ln.PURPLE=3]="PURPLE",ln[ln.RED=4]="RED",ln[ln.YELLOW=5]="YELLOW",ln),df=((li=df||{})[li.DIAGRAM=0]="DIAGRAM",li[li.ORG_CHART=1]="ORG_CHART",li),dE=((la=dE||{})[la.HORIZONTAL=0]="HORIZONTAL",la[la.VERTICAL=1]="VERTICAL",la),dy=((lo=dy||{})[lo.DEFAULT=0]="DEFAULT",lo[lo.PURPLE=1]="PURPLE",lo[lo.BLUE=2]="BLUE",lo[lo.GREEN=3]="GREEN",lo),dv=((ll=dv||{})[ll.DEFAULT=0]="DEFAULT",ll[ll.BLUE=1]="BLUE",ll[ll.GREEN=2]="GREEN",ll[ll.PURPLE=3]="PURPLE",ll[ll.RED=4]="RED",ll[ll.YELLOW=5]="YELLOW",ll),db=((ls=db||{})[ls.SELECTION=0]="SELECTION",ls[ls.PENCIL_TOOL=1]="PENCIL_TOOL",ls[ls.SHAPE_TOOL=2]="SHAPE_TOOL",ls[ls.EDIT_PALETTE_MODAL=3]="EDIT_PALETTE_MODAL",ls),dI=((lc=dI||{})[lc.ALL=0]="ALL",lc[lc.SECTION_STATUS_LABEL=1]="SECTION_STATUS_LABEL",lc[lc.SECTION_PRESET_PICKER=2]="SECTION_PRESET_PICKER",lc),dT=((ld=dT||{})[ld.GL_VERTEX_BUFFER=0]="GL_VERTEX_BUFFER",ld),dw=((lu=dw||{})[lu.DEFAULT=0]="DEFAULT",lu[lu.ALWAYS=1]="ALWAYS",lu[lu.NEVER=2]="NEVER",lu),dS=((lp=dS||{})[lp.FULLSCREEN=0]="FULLSCREEN",lp[lp.NON_FULLSCREEN=1]="NON_FULLSCREEN",lp),dC=((lm=dC||{})[lm.NONE=0]="NONE",lm[lm.FAST=1]="FAST",lm[lm.DEFAULT=6]="DEFAULT",lm[lm.BEST=9]="BEST",lm),dO=((lh=dO||{})[lh.SRGB=0]="SRGB",lh[lh.DISPLAY_P3=1]="DISPLAY_P3",lh),dA=((l_=dA||{})[l_.LEGACY=0]="LEGACY",l_[l_.SRGB=1]="SRGB",l_[l_.DISPLAY_P3=2]="DISPLAY_P3",l_),dN=((lg=dN||{})[lg.DOCUMENT=0]="DOCUMENT",lg[lg.SRGB=1]="SRGB",lg[lg.DISPLAY_P3_V4=2]="DISPLAY_P3_V4",lg),dL=((lf=dL||{})[lf.NO_CONVERSION=0]="NO_CONVERSION",lf[lf.SRGB_TO_DISPLAY_P3=1]="SRGB_TO_DISPLAY_P3",lf[lf.DISPLAY_P3_TO_SRGB=2]="DISPLAY_P3_TO_SRGB",lf),dP=((lE=dP||{})[lE.INVALID=0]="INVALID",lE[lE.TEST_SETUP=1]="TEST_SETUP",lE[lE.USER=2]="USER",lE[lE.PLUGIN=3]="PLUGIN",lE[lE.SYSTEM=4]="SYSTEM",lE[lE.REST_API=5]="REST_API",lE[lE.ONBOARDING=6]="ONBOARDING",lE),dR=((ly=dR||{})[ly.LOCAL=0]="LOCAL",ly[ly.GOOGLE=1]="GOOGLE",ly[ly.SHARED=2]="SHARED",ly),dk=((lv=dk||{})[lv.NON_ANIMATED_ONLY=0]="NON_ANIMATED_ONLY",lv[lv.ALL=1]="ALL",lv),dD=((lb=dD||{})[lb.SUCCESS=0]="SUCCESS",lb[lb.UNSUPPORTED_MEDIA=1]="UNSUPPORTED_MEDIA",lb[lb.OTHER_FAILURE=2]="OTHER_FAILURE",lb),dM=((lI=dM||{})[lI.REDUX=0]="REDUX",lI[lI.PLUGIN=1]="PLUGIN",lI[lI.PROTOTYPE_LIB=2]="PROTOTYPE_LIB",lI),dF=((lT=dF||{})[lT.IGNORE=0]="IGNORE",lT[lT.TRACK=1]="TRACK",lT),dx=((lw=dx||{})[lw.NONE=0]="NONE",lw[lw.BUILD=1]="BUILD",lw),dU=((lS=dU||{})[lS.NONE=0]="NONE",lS[lS.AUTO=1]="AUTO",lS[lS.TOP=2]="TOP",lS[lS.LEFT=3]="LEFT",lS[lS.BOTTOM=4]="BOTTOM",lS[lS.RIGHT=5]="RIGHT",lS[lS.CENTER=6]="CENTER",lS),dB=((lC=dB||{})[lC.FILL=0]="FILL",lC[lC.STROKE=1]="STROKE",lC[lC.WIDTH=2]="WIDTH",lC[lC.HEIGHT=3]="HEIGHT",lC[lC.MIN_WIDTH=4]="MIN_WIDTH",lC[lC.MIN_HEIGHT=5]="MIN_HEIGHT",lC[lC.MAX_WIDTH=6]="MAX_WIDTH",lC[lC.MAX_HEIGHT=7]="MAX_HEIGHT",lC[lC.STROKE_WIDTH=8]="STROKE_WIDTH",lC[lC.CORNER_RADIUS=9]="CORNER_RADIUS",lC[lC.EFFECT=10]="EFFECT",lC[lC.TEXT_STYLE=11]="TEXT_STYLE",lC[lC.TEXT_ALIGN_HORIZONTAL=12]="TEXT_ALIGN_HORIZONTAL",lC[lC.FONT_FAMILY=13]="FONT_FAMILY",lC[lC.FONT_SIZE=14]="FONT_SIZE",lC[lC.FONT_WEIGHT=15]="FONT_WEIGHT",lC[lC.LINE_HEIGHT=16]="LINE_HEIGHT",lC[lC.LETTER_SPACING=17]="LETTER_SPACING",lC[lC.STACK_SPACING=18]="STACK_SPACING",lC[lC.STACK_PADDING=19]="STACK_PADDING",lC[lC.STACK_MODE=20]="STACK_MODE",lC[lC.STACK_ALIGNMENT=21]="STACK_ALIGNMENT",lC[lC.OPACITY=22]="OPACITY",lC[lC.COMPONENT=23]="COMPONENT",lC),dV=((lO=dV||{})[lO.TOP=0]="TOP",lO[lO.BOTTOM=1]="BOTTOM",lO[lO.LEFT=2]="LEFT",lO[lO.RIGHT=3]="RIGHT",lO),dG=((lA=dG||{})[lA.COMPONENT=0]="COMPONENT",lA[lA.STATE_GROUP=1]="STATE_GROUP",lA),dH=((lN=dH||{})[lN.NONE=0]="NONE",lN[lN.CAP_HEIGHT=1]="CAP_HEIGHT",lN),dW=((lL=dW||{})[lL.FILL=0]="FILL",lL[lL.STROKE=1]="STROKE",lL[lL.BACKGROUND__NO_LONGER_USED=2]="BACKGROUND__NO_LONGER_USED",lL[lL.TEXT=3]="TEXT",lL[lL.EFFECT=4]="EFFECT",lL[lL.GRID=5]="GRID",lL[lL.DEPRECATED_STROKE=6]="DEPRECATED_STROKE",lL[lL.NOT_SUPPORTED=7]="NOT_SUPPORTED",lL),dK=((lP=dK||{})[lP.TOGGLE_BOLD=0]="TOGGLE_BOLD",lP[lP.INCREASE_BOLD=1]="INCREASE_BOLD",lP[lP.DECREASE_BOLD=2]="DECREASE_BOLD",lP[lP.TOGGLE_ITALIC=3]="TOGGLE_ITALIC",lP[lP.TOGGLE_UNDERLINE=4]="TOGGLE_UNDERLINE",lP[lP.TOGGLE_STRIKETHROUGH=5]="TOGGLE_STRIKETHROUGH",lP[lP.REMOVE_DECORATION=6]="REMOVE_DECORATION",lP[lP.SET_ORIGINAL_CASE=7]="SET_ORIGINAL_CASE",lP[lP.SET_UPPER_CASE=8]="SET_UPPER_CASE",lP[lP.SET_LOWER_CASE=9]="SET_LOWER_CASE",lP[lP.SET_TITLE_CASE=10]="SET_TITLE_CASE",lP[lP.INCREASE_LETTER_SPACING=11]="INCREASE_LETTER_SPACING",lP[lP.DECREASE_LETTER_SPACING=12]="DECREASE_LETTER_SPACING",lP[lP.INCREASE_LINE_HEIGHT=13]="INCREASE_LINE_HEIGHT",lP[lP.DECREASE_LINE_HEIGHT=14]="DECREASE_LINE_HEIGHT",lP),dz=((lR=dz||{})[lR.SET_BOLD=0]="SET_BOLD",lR[lR.SET_UNBOLD=1]="SET_UNBOLD",lR[lR.INCREASE_BOLD=2]="INCREASE_BOLD",lR[lR.DECREASE_BOLD=3]="DECREASE_BOLD",lR[lR.SET_ITALIC=4]="SET_ITALIC",lR[lR.SET_UNITALIC=5]="SET_UNITALIC",lR[lR.SET_UNDERLINE=6]="SET_UNDERLINE",lR[lR.SET_STRIKETHROUGH=7]="SET_STRIKETHROUGH",lR[lR.REMOVE_DECORATION=8]="REMOVE_DECORATION",lR[lR.SET_ORIGINAL_CASE=9]="SET_ORIGINAL_CASE",lR[lR.SET_UPPER_CASE=10]="SET_UPPER_CASE",lR[lR.SET_LOWER_CASE=11]="SET_LOWER_CASE",lR[lR.SET_TITLE_CASE=12]="SET_TITLE_CASE",lR[lR.INCREASE_LETTER_SPACING=13]="INCREASE_LETTER_SPACING",lR[lR.DECREASE_LETTER_SPACING=14]="DECREASE_LETTER_SPACING",lR[lR.INCREASE_LINE_HEIGHT=15]="INCREASE_LINE_HEIGHT",lR[lR.DECREASE_LINE_HEIGHT=16]="DECREASE_LINE_HEIGHT",lR),dZ=((lk=dZ||{})[lk.NONE=0]="NONE",lk[lk.CREATED=1]="CREATED",lk[lk.EDITED=2]="EDITED",lk[lk.REMOVED=3]="REMOVED",lk[lk.INDIRECTLY_EDITED=4]="INDIRECTLY_EDITED",lk[lk.AFFECTED=5]="AFFECTED",lk[lk.LIBRARY_UPDATES=6]="LIBRARY_UPDATES",lk),dY=((lD=dY||{})[lD.ALL_SCOPES=0]="ALL_SCOPES",lD[lD.TEXT_CONTENT=1]="TEXT_CONTENT",lD[lD.CORNER_RADIUS=2]="CORNER_RADIUS",lD[lD.WIDTH_HEIGHT=3]="WIDTH_HEIGHT",lD[lD.GAP=4]="GAP",lD[lD.ALL_FILLS=5]="ALL_FILLS",lD[lD.FRAME_FILL=6]="FRAME_FILL",lD[lD.SHAPE_FILL=7]="SHAPE_FILL",lD[lD.TEXT_FILL=8]="TEXT_FILL",lD[lD.STROKE=9]="STROKE",lD[lD.STROKE_FLOAT=10]="STROKE_FLOAT",lD[lD.EFFECT_FLOAT=11]="EFFECT_FLOAT",lD[lD.EFFECT_COLOR=12]="EFFECT_COLOR",lD[lD.OPACITY=13]="OPACITY",lD),dj=((lM=dj||{})[lM.WEB=0]="WEB",lM[lM.ANDROID=1]="ANDROID",lM[lM.iOS=2]="iOS",lM),d$=((lF=d$||{})[lF.NONE=0]="NONE",lF[lF.PRESET=1]="PRESET",lF[lF.CUSTOM=2]="CUSTOM",lF[lF.PRESENTATION=3]="PRESENTATION",lF),dq=((lx=dq||{})[lx.ALL=0]="ALL",lx[lx.BASE_SCREENS=1]="BASE_SCREENS",lx[lx.SCROLL_TO=2]="SCROLL_TO",lx[lx.STATES=3]="STATES",lx),dX=((lU=dX||{})[lU.NONE=0]="NONE",lU[lU.CCW_90=1]="CCW_90",lU),dJ=((lB=dJ||{})[lB.PLAIN=0]="PLAIN",lB[lB.ORDERED_LIST=1]="ORDERED_LIST",lB[lB.UNORDERED_LIST=2]="UNORDERED_LIST",lB[lB.BLOCKQUOTE=3]="BLOCKQUOTE",lB[lB.HEADER=4]="HEADER",lB),dQ=((lV=dQ||{})[lV.LTR=0]="LTR",lV[lV.RTL=1]="RTL",lV),d0=((lG=d0||{})[lG.CENTER=0]="CENTER",lG[lG.INSIDE=1]="INSIDE",lG[lG.OUTSIDE=2]="OUTSIDE",lG),d1=((lH=d1||{})[lH.NODE_CREATED=0]="NODE_CREATED",lH[lH.NODE_DELETED=1]="NODE_DELETED",lH[lH.NODE_MOVED=2]="NODE_MOVED",lH[lH.NODE_RESIZED=3]="NODE_RESIZED",lH[lH.TEXT_SELECTION=4]="TEXT_SELECTION",lH[lH.TOOL=5]="TOOL",lH[lH.TABLE_CELL_TEXT_SELECTION=6]="TABLE_CELL_TEXT_SELECTION",lH),d2=((lW=d2||{})[lW.NONE=0]="NONE",lW[lW.FIGJAM=1]="FIGJAM",lW[lW.VIEWER=2]="VIEWER",lW),d3=((lK=d3||{})[lK.READ=0]="READ",lK[lK.ELIDE=1]="ELIDE",lK[lK.SKIP=2]="SKIP",lK),d4=((lz=d4||{})[lz.ELBOWED=0]="ELBOWED",lz[lz.STRAIGHT=1]="STRAIGHT",lz),d6=((lZ=d6||{})[lZ.SWT_CREATED=0]="SWT_CREATED",lZ[lZ.SWT_DELETED=1]="SWT_DELETED",lZ[lZ.SWT_EDITED=2]="SWT_EDITED",lZ[lZ.SWT_RESIZED=3]="SWT_RESIZED",lZ[lZ.STICKY_DELETED=4]="STICKY_DELETED",lZ[lZ.STICKY_EDITED=5]="STICKY_EDITED",lZ[lZ.STICKY_RESIZED=6]="STICKY_RESIZED",lZ),d8=((lY=d8||{})[lY.FONT_SIZE=0]="FONT_SIZE",lY[lY.FONT_WEIGHT=1]="FONT_WEIGHT",lY[lY.FONT_FAMILY=2]="FONT_FAMILY",lY),d9=((lj=d9||{})[lj.UP=0]="UP",lj[lj.DOWN=1]="DOWN",lj[lj.LEFT=2]="LEFT",lj[lj.RIGHT=3]="RIGHT",lj),d5=((l$=d5||{})[l$.EMPTY=0]="EMPTY",l$[l$.HEADER=1]="HEADER",l$[l$.HEADER_AND_BODY=2]="HEADER_AND_BODY",l$[l$.SIDE_BY_SIDE=3]="SIDE_BY_SIDE",l$[l$.COLUMNS=4]="COLUMNS",l$),d7=((lq=d7||{})[lq.TEXT=0]="TEXT",lq[lq.BORDER=1]="BORDER",lq),ue=((lX=ue||{})[lX.LIGHT=0]="LIGHT",lX[lX.DARK=1]="DARK",lX),ut=((lJ=ut||{})[lJ.FullscreenApp=0]="FullscreenApp",lJ[lJ.PrototypeLib=1]="PrototypeLib",lJ[lJ.InteractionTest=2]="InteractionTest",lJ),ur=((lQ=ur||{})[lQ.FROM=0]="FROM",lQ[lQ.TO=1]="TO",lQ),un=((l0=un||{})[l0.INVALID=0]="INVALID",l0[l0.PRIMARY_INSTANCE_BACKED_BY_SYMBOL=1]="PRIMARY_INSTANCE_BACKED_BY_SYMBOL",l0[l0.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL=2]="PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL",l0[l0.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL=3]="PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL",l0[l0.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL=4]="PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL",l0[l0.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL=5]="PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL",l0[l0.STATE_WITH_PROP_DEF_TO_SYMBOL=6]="STATE_WITH_PROP_DEF_TO_SYMBOL",l0[l0.SYMBOL_CONTAINING_PRIMARY_INSTANCE=7]="SYMBOL_CONTAINING_PRIMARY_INSTANCE",l0),ui=((l1=ui||{})[l1.NONE=0]="NONE",l1[l1.TOO_MANY_VARIABLES_ERROR=1]="TOO_MANY_VARIABLES_ERROR",l1[l1.TOO_MANY_MODES_ERROR=2]="TOO_MANY_MODES_ERROR",l1),ua=((l2=ua||{})[l2.NONE=0]="NONE",l2[l2.LESS_THAN_MIN_WIDTH=1]="LESS_THAN_MIN_WIDTH",l2[l2.LESS_THAN_MIN_HEIGHT=2]="LESS_THAN_MIN_HEIGHT",l2[l2.GREATER_THAN_MAX_WIDTH=3]="GREATER_THAN_MAX_WIDTH",l2[l2.GREATER_THAN_MAX_HEIGHT=4]="GREATER_THAN_MAX_HEIGHT",l2),uo=((l3=uo||{})[l3.BOOLEAN=0]="BOOLEAN",l3[l3.FLOAT=1]="FLOAT",l3[l3.STRING=2]="STRING",l3[l3.COLOR=3]="COLOR",l3[l3.MAP=4]="MAP",l3[l3.SYMBOL_ID=5]="SYMBOL_ID",l3[l3.FONT_STYLE=6]="FONT_STYLE",l3[l3.TEXT_DATA=7]="TEXT_DATA",l3),ul=((l4=ul||{})[l4.BOOLEAN=0]="BOOLEAN",l4[l4.FLOAT=1]="FLOAT",l4[l4.STRING=2]="STRING",l4[l4.ALIAS=3]="ALIAS",l4[l4.COLOR=4]="COLOR",l4[l4.EXPRESSION=5]="EXPRESSION",l4[l4.MAP=6]="MAP",l4[l4.SYMBOL_ID=7]="SYMBOL_ID",l4[l4.FONT_STYLE=8]="FONT_STYLE",l4[l4.TEXT_DATA=9]="TEXT_DATA",l4),us=((l6=us||{})[l6.ADDITION=0]="ADDITION",l6[l6.SUBTRACTION=1]="SUBTRACTION",l6[l6.RESOLVE_VARIANT=2]="RESOLVE_VARIANT",l6[l6.MULTIPLY=3]="MULTIPLY",l6[l6.DIVIDE=4]="DIVIDE",l6[l6.EQUALS=5]="EQUALS",l6[l6.NOT_EQUAL=6]="NOT_EQUAL",l6[l6.LESS_THAN=7]="LESS_THAN",l6[l6.LESS_THAN_OR_EQUAL=8]="LESS_THAN_OR_EQUAL",l6[l6.GREATER_THAN=9]="GREATER_THAN",l6[l6.GREATER_THAN_OR_EQUAL=10]="GREATER_THAN_OR_EQUAL",l6[l6.AND=11]="AND",l6[l6.OR=12]="OR",l6[l6.NOT=13]="NOT",l6[l6.STRINGIFY=14]="STRINGIFY",l6[l6.TERNARY=15]="TERNARY",l6[l6.VAR_MODE_LOOKUP=16]="VAR_MODE_LOOKUP",l6[l6.NEGATE=17]="NEGATE",l6[l6.IS_TRUTHY=18]="IS_TRUTHY",l6),uc=((l8=uc||{})[l8.INTERACTION_TEST=0]="INTERACTION_TEST",l8[l8.VIEWER_TEST=1]="VIEWER_TEST",l8),ud=((l9=ud||{})[l9.ALLOWED=0]="ALLOWED",l9[l9.DISALLOWED_CYCLE=1]="DISALLOWED_CYCLE",l9[l9.DISALLOWED_OTHER=2]="DISALLOWED_OTHER",l9),uu=((l5=uu||{})[l5.MATERIALIZE_SWAPPED_OUT_TREE=0]="MATERIALIZE_SWAPPED_OUT_TREE",l5[l5.SKIP_MATERIALIZATION=1]="SKIP_MATERIALIZATION",l5),up=((l7=up||{})[l7.PENDING_INITIAL_LOAD=0]="PENDING_INITIAL_LOAD",l7[l7.PENDING_LOAD_AFTER_RECONNECT=1]="PENDING_LOAD_AFTER_RECONNECT",l7[l7.LOADED=2]="LOADED",l7),um=((se=um||{})[se.MISSING_FONTS_ONLY=0]="MISSING_FONTS_ONLY",se[se.MISSING_OR_LOCAL_FONTS=1]="MISSING_OR_LOCAL_FONTS",se),uh=((st=uh||{})[st.TEXT=0]="TEXT",st[st.KEY_PRESS=1]="KEY_PRESS",st[st.KEY_RELEASE=2]="KEY_RELEASE",st[st.MOUSE_MOVE=3]="MOUSE_MOVE",st[st.MOUSE_ENTER=4]="MOUSE_ENTER",st[st.MOUSE_LEAVE=5]="MOUSE_LEAVE",st[st.MOUSE_PRESS=6]="MOUSE_PRESS",st[st.MOUSE_DRAG=7]="MOUSE_DRAG",st[st.MOUSE_RELEASE=8]="MOUSE_RELEASE",st[st.MOUSE_WHEEL=9]="MOUSE_WHEEL",st[st.MOUSE_DROP=10]="MOUSE_DROP",st[st.MOUSE_ROTATE=11]="MOUSE_ROTATE",st[st.MOUSE_SCALE=12]="MOUSE_SCALE",st[st.MOUSE_SCALE_END=13]="MOUSE_SCALE_END",st[st.FOCUS_GAINED=14]="FOCUS_GAINED",st[st.FOCUS_LOST=15]="FOCUS_LOST",st[st.CLIPBOARD=16]="CLIPBOARD",st[st.MOUSE_MOVE_COALESCED=17]="MOUSE_MOVE_COALESCED",st[st.MOUSE_DRAG_COALESCED=18]="MOUSE_DRAG_COALESCED",st[st.CONTEXT_MENU_OPEN=19]="CONTEXT_MENU_OPEN",st[st.MOUSE_CANCEL=20]="MOUSE_CANCEL",st);function u_(e,t){switch(e){case"AnimationConfig_Internal":n=t,window.AnimationConfig=t3,window.MutableAnimationConfig=t4;break;case"AnimationConfigBindings":i=t;break;case"AnimationBindings":a=t;break;case"AppStateTsApi":o=t;break;case"AutosaveHelpers":l=t;break;case"BindingsPerfBench":s=t;break;case"NestedCppObject_Internal":c=t,window.NestedCppObject=t6,window.MutableNestedCppObject=t8;break;case"TestCppObject_Internal":d=t,window.TestCppObject=t9,window.MutableTestCppObject=t5;break;case"CppBindingsTestHelpers":u=t;break;case"BranchingHelpers":p=t;break;case"BranchingState_Internal":m=t,window.BranchingState=t7,window.MutableBranchingState=re;break;case"CanvasSearchHelpers":h=t;break;case"CanvasViewState_Internal":_=t,window.CanvasViewState=rt,window.MutableCanvasViewState=rr;break;case"ComponentPropsAiCPPBindings":g=t;break;case"CSSExportHelpers":f=t;break;case"CurrentPageState_Internal":E=t,window.CurrentPageState=rn,window.MutableCurrentPageState=ri;break;case"CurrentSceneState_Internal":y=t,window.CurrentSceneState=ra,window.MutableCurrentSceneState=ro;break;case"CustomFocusHelpers":v=t;break;case"DebuggingHelpers":b=t;break;case"DevHandoffState_Internal":I=t,window.DevHandoffState=rl,window.MutableDevHandoffState=rs;break;case"DiffImpl":T=t;break;case"EditorState_Internal":w=t,window.EditorState=rc,window.MutableEditorState=rd;break;case"EmbedUiState_Internal":S=t,window.EmbedUiState=ru,window.MutableEmbedUiState=rp;break;case"EditorPreferences_Internal":C=t,window.EditorPreferences=rm,window.MutableEditorPreferences=rh;break;case"JamboardImporterCppBindings":O=t;break;case"EmojiCppBindings":A=t;break;case"FigjamState_Internal":N=t,window.FigjamState=r_,window.MutableFigjamState=rg;break;case"FontHelpers":L=t;break;case"FullscreenInteractionTestHelpers":P=t;break;case"FullscreenOptimizationExposureLoggingBinding":R=t;break;case"FullscreenPerfInfo":k=t,window.FullscreenPerfInfo=k;break;case"FullscreenPerfMetrics":D=t;break;case"FullscreenWebSocketTsApi":M=t;break;case"StackBindingsCpp":F=t;break;case"Fullscreen":x=t;break;case"HandoffBindingsCpp":U=t;break;case"HistoryChangesBindings":B=t;break;case"HoverState_Internal":V=t,window.HoverState=rf,window.MutableHoverState=rE;break;case"EditorTypeConfig_Internal":G=t,window.EditorTypeConfig=ry,window.MutableEditorTypeConfig=rv;break;case"Viewport_Internal":H=t,window.Viewport=rb,window.MutableViewport=rI;break;case"MouseBehaviorEvent_Internal":W=t,window.MouseBehaviorEvent=rT,window.MutableMouseBehaviorEvent=rw;break;case"CanvasContext_Internal":K=t,window.CanvasContext=rS,window.MutableCanvasContext=rC;break;case"InteractionCpp":z=t;break;case"CanvasSnapper_Internal":Z=t,window.CanvasSnapper=rO,window.MutableCanvasSnapper=rA;break;case"LibraryPubSub":Y=t;break;case"LibraryAssets_Internal":j=t,window.LibraryAssets=rN,window.MutableLibraryAssets=rL;break;case"MentionsCppBindings":$=t;break;case"MigrationBindings":q=t;break;case"MindmapCppBindings":X=t;break;case"Multiplayer":J=t;break;case"PluginHelpers":Q=t;break;case"PropertiesPanelState_Internal":ee=t,window.PropertiesPanelState=rP,window.MutablePropertiesPanelState=rR;break;case"PrototypingEditorState_Internal":et=t,window.PrototypingEditorState=rk,window.MutablePrototypingEditorState=rD;break;case"PrototypingTsApi":er=t;break;case"SceneGraphQuerySyncState_Internal":en=t,window.SceneGraphQuerySyncState=rM,window.MutableSceneGraphQuerySyncState=rF;break;case"ImmutableFrameObserver_Internal":ei=t,window.ImmutableFrameObserver=rx,window.MutableImmutableFrameObserver=rU;break;case"SceneGraph_Internal":ea=t,window.SceneGraph=rB,window.MutableSceneGraph=rV;break;case"SceneGraphHelpers":eo=t;break;case"SceneNodeCpp":el=t;break;case"SelectionPaintHelpers":es=t;break;case"SelectionStylesHelpers":ec=t;break;case"StateManagementCPPBindings":ed=t;break;case"SharedStyle":eu=t;break;case"StickyClusteringCppBindings":ep=t;break;case"TestFullscreenMultiplayerDocument":em=t;break;case"Thumbnail":eh=t;break;case"UiState_Internal":e_=t,window.UiState=rG,window.MutableUiState=rH;break;case"UserPreferencesTestHelpers":eg=t;break;case"VariablesBindings":ef=t;break;case"VideoCppBindings":eE=t;break;case"WhiteboardAgendaCppBindings":ey=t;break;case"WhiteboardStarterKitCppBindings":ev=t;break;case"WhiteboardAiTemplatePreviewCppBindings":eb=t;break;case"WhiteboardAiVisualCppBindings":eI=t;break;case"WhiteboardTemplatePreviewCppBindings":eT=t;break;case"WhiteboardThumbnailGeneratorCppBindings":ew=t;break;case"WhiteboardTsApi":eS=t;break;case"WhiteboardVotingCppBindings":eC=t;break;case"HitTestBindings":eO=t;break;case"InteractiveSlideData_Internal":eA=t,window.InteractiveSlideData=rW,window.MutableInteractiveSlideData=rK;break;case"SingleSlideLayout_Internal":eN=t,window.SingleSlideLayout=rz,window.MutableSingleSlideLayout=rZ;break;case"WhiteboardSectionPresetPickerCppBindings":eL=t;break;case"StylesBindings":eP=t;break;case"CorePerfInfo":eR=t,window.CorePerfInfo=eR;break;case"FeatureFlagsCppApi":ek=t;break;case"WeakHandleHelpers":eD=t;break;case"WebAsyncCallback":eM=t;break;case"PerformanceEventCounters":eF=t;break;case"ColorManagementStateJs":ex=t;break;case"EditScopeBindings":eU=t;break;case"EffectData_Internal":eB=t,window.EffectData=rY,window.MutableEffectData=rj;break;case"Fonts":eV=t;break;case"ImageCppBindings":eG=t;break;case"BindingsNode_Internal":eH=t,window.BindingsNode=r$,window.MutableBindingsNode=rq;break;case"NodeTsApi":eW=t;break;case"PaintData_Internal":eK=t,window.PaintData=rX,window.MutablePaintData=rJ;break;case"PrototypeInteractions_Internal":ez=t,window.PrototypeInteractions=rQ,window.MutablePrototypeInteractions=r0;break;case"SceneGraphBindings":eZ=t;break;case"SceneGraphTsApi":eY=t;break;case"TextData_Internal":ej=t,window.TextData=r1,window.MutableTextData=r2;break;case"DerivedTextData_Internal":e$=t,window.DerivedTextData=r3,window.MutableDerivedTextData=r4;break;case"UniquePath_Internal":eq=t,window.UniquePath=r6,window.MutableUniquePath=r8;break;case"UniquePathHelpers":eX=t;break;case"CompiledVectorData_Internal":eJ=t,window.CompiledVectorData=r9,window.MutableCompiledVectorData=r5;break;case"AccessibilityHelpers":eQ=t;break;case"CanvasSelection_Internal":e0=t,window.CanvasSelection=r7,window.MutableCanvasSelection=ne;break;case"SlideDeckLayout_Internal":e1=t,window.SlideDeckLayout=nt,window.MutableSlideDeckLayout=nr;break;case"SlideThemeLibBindings_Internal":e2=t,window.SlideThemeLibBindings=nn,window.MutableSlideThemeLibBindings=ni;break;case"SlideAnimationBindings_Internal":e3=t,window.SlideAnimationBindings=na,window.MutableSlideAnimationBindings=no;break;case"SitesPreviewObserver_Internal":e4=t,window.SitesPreviewObserver=nl,window.MutableSitesPreviewObserver=ns;break;case"AnnotationObserver_Internal":e6=t,window.AnnotationObserver=nc,window.MutableAnnotationObserver=nd;break;case"NodeTsApiGenerated":e8=t;break;case"Bindings":e9=t;break;case"DocumentStateTsApi":e5=t;break;case"FigmaScopeBindings":e7=t;break;case"VariablesMirrorManager":te=t;break;case"SharedDebuggingHelpers":tt=t;break;case"InteractionTestHelpers":tr=t;break;case"Prototype":tn=t,window.Prototype=tn;break;case"ObservableValue_Map_GUID_Int_Internal":ti=t,window.ObservableValue_Map_GUID_Int=nu,window.MutableObservableValue_Map_GUID_Int=np;break;case"ObservableValue_Map_GUID_GUID_Internal":ta=t,window.ObservableValue_Map_GUID_GUID=nm,window.MutableObservableValue_Map_GUID_GUID=nh;break;case"ObservableValue_TestCounter__Internal":to=t,window.ObservableValue_TestCounter_=n_,window.MutableObservableValue_TestCounter_=ng;break;case"ObservableValue_Array_TestCounter__Internal":tl=t,window.ObservableValue_Array_TestCounter_=nf,window.MutableObservableValue_Array_TestCounter_=nE;break;case"ObservableValue_Array_Bool_Internal":ts=t,window.ObservableValue_Array_Bool=ny,window.MutableObservableValue_Array_Bool=nv;break;case"ObservableValue_Bool_Internal":tc=t,window.ObservableValue_Bool=nb,window.MutableObservableValue_Bool=nI;break;case"ObservableValue_Float_Internal":td=t,window.ObservableValue_Float=nT,window.MutableObservableValue_Float=nw;break;case"WritableObservableValue_Bool_Internal":tu=t,window.WritableObservableValue_Bool=nS,window.MutableWritableObservableValue_Bool=nC;break;case"WritableObservableValue_Double_Internal":tp=t,window.WritableObservableValue_Double=nO,window.MutableWritableObservableValue_Double=nA;break;case"WritableObservableValue_Int_Internal":tm=t,window.WritableObservableValue_Int=nN,window.MutableWritableObservableValue_Int=nL;break;case"ObservableValue_BoundingRect__Internal":th=t,window.ObservableValue_BoundingRect_=nP,window.MutableObservableValue_BoundingRect_=nR;break;case"WritableObservableValue_Optional_InlineMenuTarget__Internal":t_=t,window.WritableObservableValue_Optional_InlineMenuTarget_=nk,window.MutableWritableObservableValue_Optional_InlineMenuTarget_=nD;break;case"ObservableValue_Optional_FocusedStackRegion__Internal":tg=t,window.ObservableValue_Optional_FocusedStackRegion_=nM,window.MutableObservableValue_Optional_FocusedStackRegion_=nF;break;case"WritableObservableValue_AnchorPoint__Internal":tf=t,window.WritableObservableValue_AnchorPoint_=nx,window.MutableWritableObservableValue_AnchorPoint_=nU;break;case"WritableObservableValue_Array_GUID_Internal":tE=t,window.WritableObservableValue_Array_GUID=nB,window.MutableWritableObservableValue_Array_GUID=nV;break;case"WritableObservableValue_Optional_GUID_Internal":ty=t,window.WritableObservableValue_Optional_GUID=nG,window.MutableWritableObservableValue_Optional_GUID=nH;break;case"WritableObservableValue_Optional_BoundingRect__Internal":tv=t,window.WritableObservableValue_Optional_BoundingRect_=nW,window.MutableWritableObservableValue_Optional_BoundingRect_=nK;break;case"ObservableValue_String_Internal":tb=t,window.ObservableValue_String=nz,window.MutableObservableValue_String=nZ;break;case"ObservableValue_Map_GUID_Bool_Internal":tI=t,window.ObservableValue_Map_GUID_Bool=nY,window.MutableObservableValue_Map_GUID_Bool=nj;break;case"ObservableValue_GUID_Internal":tT=t,window.ObservableValue_GUID=n$,window.MutableObservableValue_GUID=nq;break;case"ObservableValue_Array_GUID_Internal":tw=t,window.ObservableValue_Array_GUID=nX,window.MutableObservableValue_Array_GUID=nJ;break;case"ObservableValue_Json_Internal":tS=t,window.ObservableValue_Json=nQ,window.MutableObservableValue_Json=n0;break;case"ObservableValue_PropertyState__Internal":tC=t,window.ObservableValue_PropertyState_=n1,window.MutableObservableValue_PropertyState_=n2;break;case"WritableObservableValue_GUID_Internal":tO=t,window.WritableObservableValue_GUID=n3,window.MutableWritableObservableValue_GUID=n4;break;case"WritableObservableValue_KeyboardLayout__Internal":tA=t,window.WritableObservableValue_KeyboardLayout_=n6,window.MutableWritableObservableValue_KeyboardLayout_=n8;break;case"ObservableValue_CommentAnchorData__Internal":tN=t,window.ObservableValue_CommentAnchorData_=n9,window.MutableObservableValue_CommentAnchorData_=n5;break;case"WritableObservableValue_ActiveEmbedData__Internal":tL=t,window.WritableObservableValue_ActiveEmbedData_=n7,window.MutableWritableObservableValue_ActiveEmbedData_=ie;break;case"WritableObservableValue_PresetType__Internal":tP=t,window.WritableObservableValue_PresetType_=it,window.MutableWritableObservableValue_PresetType_=ir;break;case"WritableObservableValue_ColorFormat__Internal":tR=t,window.WritableObservableValue_ColorFormat_=ii,window.MutableWritableObservableValue_ColorFormat_=ia;break;case"WritableObservableValue_Float_Internal":tk=t,window.WritableObservableValue_Float=io,window.MutableWritableObservableValue_Float=il;break;case"WritableObservableValue_HandoffOutputFormat__Internal":tD=t,window.WritableObservableValue_HandoffOutputFormat_=is,window.MutableWritableObservableValue_HandoffOutputFormat_=ic;break;case"WritableObservableValue_HandoffPlatformTarget__Internal":tM=t,window.WritableObservableValue_HandoffPlatformTarget_=id,window.MutableWritableObservableValue_HandoffPlatformTarget_=iu;break;case"WritableObservableValue_ExportSelectionSettings__Internal":tF=t,window.WritableObservableValue_ExportSelectionSettings_=ip,window.MutableWritableObservableValue_ExportSelectionSettings_=im;break;case"ObservableValue_Array_PublishableSymbolForWeb__Internal":tx=t,window.ObservableValue_Array_PublishableSymbolForWeb_=ih,window.MutableObservableValue_Array_PublishableSymbolForWeb_=i_;break;case"ObservableValue_Array_SubscribedSymbolForWeb__Internal":tU=t,window.ObservableValue_Array_SubscribedSymbolForWeb_=ig,window.MutableObservableValue_Array_SubscribedSymbolForWeb_=iE;break;case"ObservableValue_Array_PublishableStateGroupForWeb__Internal":tB=t,window.ObservableValue_Array_PublishableStateGroupForWeb_=iy,window.MutableObservableValue_Array_PublishableStateGroupForWeb_=iv;break;case"ObservableValue_Array_SubscribedStateGroupForWeb__Internal":tV=t,window.ObservableValue_Array_SubscribedStateGroupForWeb_=ib,window.MutableObservableValue_Array_SubscribedStateGroupForWeb_=iI;break;case"ObservableValue_Array_PublishableStyleForWeb__Internal":tG=t,window.ObservableValue_Array_PublishableStyleForWeb_=iT,window.MutableObservableValue_Array_PublishableStyleForWeb_=iw;break;case"ObservableValue_Array_SubscribedStyleForWeb__Internal":tH=t,window.ObservableValue_Array_SubscribedStyleForWeb_=iS,window.MutableObservableValue_Array_SubscribedStyleForWeb_=iC;break;case"ObservableValue_Array_PublishableModuleForWeb__Internal":tW=t,window.ObservableValue_Array_PublishableModuleForWeb_=iO,window.MutableObservableValue_Array_PublishableModuleForWeb_=iA;break;case"WritableObservableValue_PropertiesPanelTab__Internal":tK=t,window.WritableObservableValue_PropertiesPanelTab_=iN,window.MutableWritableObservableValue_PropertiesPanelTab_=iL;break;case"ObservableValue_Int_Internal":tz=t,window.ObservableValue_Int=iP,window.MutableObservableValue_Int=iR;break;case"ObservableValue_StrokePanelMode__Internal":tZ=t,window.ObservableValue_StrokePanelMode_=ik,window.MutableObservableValue_StrokePanelMode_=iD;break;case"ObservableValue_PrototypeDevice__Internal":tY=t,window.ObservableValue_PrototypeDevice_=iM,window.MutableObservableValue_PrototypeDevice_=iF;break;case"WritableObservableValue_PrototypeViewMode__Internal":tj=t,window.WritableObservableValue_PrototypeViewMode_=ix,window.MutableWritableObservableValue_PrototypeViewMode_=iU;break;case"ObservableValue_Map_String_PageSyncingStatus__Internal":t$=t,window.ObservableValue_Map_String_PageSyncingStatus_=iB,window.MutableObservableValue_Map_String_PageSyncingStatus_=iV;break;case"WritableObservableValue_HoveredComponentPropDef__Internal":tq=t,window.WritableObservableValue_HoveredComponentPropDef_=iG,window.MutableWritableObservableValue_HoveredComponentPropDef_=iH;break;case"WritableObservableValue_Uint_Internal":tX=t,window.WritableObservableValue_Uint=iW,window.MutableWritableObservableValue_Uint=iK;break;case"ObservableValue_FocusModeState__Internal":tJ=t,window.ObservableValue_FocusModeState_=iz,window.MutableObservableValue_FocusModeState_=iZ;break;case"ObservableValue_DocumentColorProfile__Internal":tQ=t,window.ObservableValue_DocumentColorProfile_=iY,window.MutableObservableValue_DocumentColorProfile_=ij;break;case"ObservableValue_Map_String_GUID_Internal":t0=t,window.ObservableValue_Map_String_GUID=i$,window.MutableObservableValue_Map_String_GUID=iq;break;case"WritableObservableValue_Map_String_Bool_Internal":t1=t,window.WritableObservableValue_Map_String_Bool=iX,window.MutableWritableObservableValue_Map_String_Bool=iJ;break;case"WritableObservableValue_String_Internal":t2=t,window.WritableObservableValue_String=iQ,window.MutableWritableObservableValue_String=i0}}function ug(e){n=e.AnimationConfig_Internal,window.AnimationConfig=t3,window.MutableAnimationConfig=t4,i=e.AnimationConfigBindings,a=e.AnimationBindings,o=e.AppStateTsApi,l=e.AutosaveHelpers,s=e.BindingsPerfBench,c=e.NestedCppObject_Internal,window.NestedCppObject=t6,window.MutableNestedCppObject=t8,d=e.TestCppObject_Internal,window.TestCppObject=t9,window.MutableTestCppObject=t5,u=e.CppBindingsTestHelpers,p=e.BranchingHelpers,m=e.BranchingState_Internal,window.BranchingState=t7,window.MutableBranchingState=re,h=e.CanvasSearchHelpers,_=e.CanvasViewState_Internal,window.CanvasViewState=rt,window.MutableCanvasViewState=rr,g=e.ComponentPropsAiCPPBindings,f=e.CSSExportHelpers,E=e.CurrentPageState_Internal,window.CurrentPageState=rn,window.MutableCurrentPageState=ri,y=e.CurrentSceneState_Internal,window.CurrentSceneState=ra,window.MutableCurrentSceneState=ro,v=e.CustomFocusHelpers,b=e.DebuggingHelpers,I=e.DevHandoffState_Internal,window.DevHandoffState=rl,window.MutableDevHandoffState=rs,T=e.DiffImpl,w=e.EditorState_Internal,window.EditorState=rc,window.MutableEditorState=rd,S=e.EmbedUiState_Internal,window.EmbedUiState=ru,window.MutableEmbedUiState=rp,C=e.EditorPreferences_Internal,window.EditorPreferences=rm,window.MutableEditorPreferences=rh,O=e.JamboardImporterCppBindings,A=e.EmojiCppBindings,N=e.FigjamState_Internal,window.FigjamState=r_,window.MutableFigjamState=rg,L=e.FontHelpers,P=e.FullscreenInteractionTestHelpers,R=e.FullscreenOptimizationExposureLoggingBinding,k=e.FullscreenPerfInfo,window.FullscreenPerfInfo=k,D=e.FullscreenPerfMetrics,M=e.FullscreenWebSocketTsApi,F=e.StackBindingsCpp,x=e.Fullscreen,U=e.HandoffBindingsCpp,B=e.HistoryChangesBindings,V=e.HoverState_Internal,window.HoverState=rf,window.MutableHoverState=rE,G=e.EditorTypeConfig_Internal,window.EditorTypeConfig=ry,window.MutableEditorTypeConfig=rv,H=e.Viewport_Internal,window.Viewport=rb,window.MutableViewport=rI,W=e.MouseBehaviorEvent_Internal,window.MouseBehaviorEvent=rT,window.MutableMouseBehaviorEvent=rw,K=e.CanvasContext_Internal,window.CanvasContext=rS,window.MutableCanvasContext=rC,z=e.InteractionCpp,Z=e.CanvasSnapper_Internal,window.CanvasSnapper=rO,window.MutableCanvasSnapper=rA,Y=e.LibraryPubSub,j=e.LibraryAssets_Internal,window.LibraryAssets=rN,window.MutableLibraryAssets=rL,$=e.MentionsCppBindings,q=e.MigrationBindings,X=e.MindmapCppBindings,J=e.Multiplayer,Q=e.PluginHelpers,ee=e.PropertiesPanelState_Internal,window.PropertiesPanelState=rP,window.MutablePropertiesPanelState=rR,et=e.PrototypingEditorState_Internal,window.PrototypingEditorState=rk,window.MutablePrototypingEditorState=rD,er=e.PrototypingTsApi,en=e.SceneGraphQuerySyncState_Internal,window.SceneGraphQuerySyncState=rM,window.MutableSceneGraphQuerySyncState=rF,ei=e.ImmutableFrameObserver_Internal,window.ImmutableFrameObserver=rx,window.MutableImmutableFrameObserver=rU,ea=e.SceneGraph_Internal,window.SceneGraph=rB,window.MutableSceneGraph=rV,eo=e.SceneGraphHelpers,el=e.SceneNodeCpp,es=e.SelectionPaintHelpers,ec=e.SelectionStylesHelpers,ed=e.StateManagementCPPBindings,eu=e.SharedStyle,ep=e.StickyClusteringCppBindings,em=e.TestFullscreenMultiplayerDocument,eh=e.Thumbnail,e_=e.UiState_Internal,window.UiState=rG,window.MutableUiState=rH,eg=e.UserPreferencesTestHelpers,ef=e.VariablesBindings,eE=e.VideoCppBindings,ey=e.WhiteboardAgendaCppBindings,ev=e.WhiteboardStarterKitCppBindings,eb=e.WhiteboardAiTemplatePreviewCppBindings,eI=e.WhiteboardAiVisualCppBindings,eT=e.WhiteboardTemplatePreviewCppBindings,ew=e.WhiteboardThumbnailGeneratorCppBindings,eS=e.WhiteboardTsApi,eC=e.WhiteboardVotingCppBindings,eO=e.HitTestBindings,eA=e.InteractiveSlideData_Internal,window.InteractiveSlideData=rW,window.MutableInteractiveSlideData=rK,eN=e.SingleSlideLayout_Internal,window.SingleSlideLayout=rz,window.MutableSingleSlideLayout=rZ,eL=e.WhiteboardSectionPresetPickerCppBindings,eP=e.StylesBindings,eR=e.CorePerfInfo,window.CorePerfInfo=eR,ek=e.FeatureFlagsCppApi,eD=e.WeakHandleHelpers,eM=e.WebAsyncCallback,eF=e.PerformanceEventCounters,ex=e.ColorManagementStateJs,eU=e.EditScopeBindings,eB=e.EffectData_Internal,window.EffectData=rY,window.MutableEffectData=rj,eV=e.Fonts,eG=e.ImageCppBindings,eH=e.BindingsNode_Internal,window.BindingsNode=r$,window.MutableBindingsNode=rq,eW=e.NodeTsApi,eK=e.PaintData_Internal,window.PaintData=rX,window.MutablePaintData=rJ,ez=e.PrototypeInteractions_Internal,window.PrototypeInteractions=rQ,window.MutablePrototypeInteractions=r0,eZ=e.SceneGraphBindings,eY=e.SceneGraphTsApi,ej=e.TextData_Internal,window.TextData=r1,window.MutableTextData=r2,e$=e.DerivedTextData_Internal,window.DerivedTextData=r3,window.MutableDerivedTextData=r4,eq=e.UniquePath_Internal,window.UniquePath=r6,window.MutableUniquePath=r8,eX=e.UniquePathHelpers,eJ=e.CompiledVectorData_Internal,window.CompiledVectorData=r9,window.MutableCompiledVectorData=r5,eQ=e.AccessibilityHelpers,e0=e.CanvasSelection_Internal,window.CanvasSelection=r7,window.MutableCanvasSelection=ne,e1=e.SlideDeckLayout_Internal,window.SlideDeckLayout=nt,window.MutableSlideDeckLayout=nr,e2=e.SlideThemeLibBindings_Internal,window.SlideThemeLibBindings=nn,window.MutableSlideThemeLibBindings=ni,e3=e.SlideAnimationBindings_Internal,window.SlideAnimationBindings=na,window.MutableSlideAnimationBindings=no,e4=e.SitesPreviewObserver_Internal,window.SitesPreviewObserver=nl,window.MutableSitesPreviewObserver=ns,e6=e.AnnotationObserver_Internal,window.AnnotationObserver=nc,window.MutableAnnotationObserver=nd,e8=e.NodeTsApiGenerated,e9=e.Bindings,e5=e.DocumentStateTsApi,e7=e.FigmaScopeBindings,te=e.VariablesMirrorManager,tt=e.SharedDebuggingHelpers,tr=e.InteractionTestHelpers,tn=e.Prototype,window.Prototype=tn,ti=e.ObservableValue_Map_GUID_Int_Internal,window.ObservableValue_Map_GUID_Int=nu,window.MutableObservableValue_Map_GUID_Int=np,ta=e.ObservableValue_Map_GUID_GUID_Internal,window.ObservableValue_Map_GUID_GUID=nm,window.MutableObservableValue_Map_GUID_GUID=nh,to=e.ObservableValue_TestCounter__Internal,window.ObservableValue_TestCounter_=n_,window.MutableObservableValue_TestCounter_=ng,tl=e.ObservableValue_Array_TestCounter__Internal,window.ObservableValue_Array_TestCounter_=nf,window.MutableObservableValue_Array_TestCounter_=nE,ts=e.ObservableValue_Array_Bool_Internal,window.ObservableValue_Array_Bool=ny,window.MutableObservableValue_Array_Bool=nv,tc=e.ObservableValue_Bool_Internal,window.ObservableValue_Bool=nb,window.MutableObservableValue_Bool=nI,td=e.ObservableValue_Float_Internal,window.ObservableValue_Float=nT,window.MutableObservableValue_Float=nw,tu=e.WritableObservableValue_Bool_Internal,window.WritableObservableValue_Bool=nS,window.MutableWritableObservableValue_Bool=nC,tp=e.WritableObservableValue_Double_Internal,window.WritableObservableValue_Double=nO,window.MutableWritableObservableValue_Double=nA,tm=e.WritableObservableValue_Int_Internal,window.WritableObservableValue_Int=nN,window.MutableWritableObservableValue_Int=nL,th=e.ObservableValue_BoundingRect__Internal,window.ObservableValue_BoundingRect_=nP,window.MutableObservableValue_BoundingRect_=nR,t_=e.WritableObservableValue_Optional_InlineMenuTarget__Internal,window.WritableObservableValue_Optional_InlineMenuTarget_=nk,window.MutableWritableObservableValue_Optional_InlineMenuTarget_=nD,tg=e.ObservableValue_Optional_FocusedStackRegion__Internal,window.ObservableValue_Optional_FocusedStackRegion_=nM,window.MutableObservableValue_Optional_FocusedStackRegion_=nF,tf=e.WritableObservableValue_AnchorPoint__Internal,window.WritableObservableValue_AnchorPoint_=nx,window.MutableWritableObservableValue_AnchorPoint_=nU,tE=e.WritableObservableValue_Array_GUID_Internal,window.WritableObservableValue_Array_GUID=nB,window.MutableWritableObservableValue_Array_GUID=nV,ty=e.WritableObservableValue_Optional_GUID_Internal,window.WritableObservableValue_Optional_GUID=nG,window.MutableWritableObservableValue_Optional_GUID=nH,tv=e.WritableObservableValue_Optional_BoundingRect__Internal,window.WritableObservableValue_Optional_BoundingRect_=nW,window.MutableWritableObservableValue_Optional_BoundingRect_=nK,tb=e.ObservableValue_String_Internal,window.ObservableValue_String=nz,window.MutableObservableValue_String=nZ,tI=e.ObservableValue_Map_GUID_Bool_Internal,window.ObservableValue_Map_GUID_Bool=nY,window.MutableObservableValue_Map_GUID_Bool=nj,tT=e.ObservableValue_GUID_Internal,window.ObservableValue_GUID=n$,window.MutableObservableValue_GUID=nq,tw=e.ObservableValue_Array_GUID_Internal,window.ObservableValue_Array_GUID=nX,window.MutableObservableValue_Array_GUID=nJ,tS=e.ObservableValue_Json_Internal,window.ObservableValue_Json=nQ,window.MutableObservableValue_Json=n0,tC=e.ObservableValue_PropertyState__Internal,window.ObservableValue_PropertyState_=n1,window.MutableObservableValue_PropertyState_=n2,tO=e.WritableObservableValue_GUID_Internal,window.WritableObservableValue_GUID=n3,window.MutableWritableObservableValue_GUID=n4,tA=e.WritableObservableValue_KeyboardLayout__Internal,window.WritableObservableValue_KeyboardLayout_=n6,window.MutableWritableObservableValue_KeyboardLayout_=n8,tN=e.ObservableValue_CommentAnchorData__Internal,window.ObservableValue_CommentAnchorData_=n9,window.MutableObservableValue_CommentAnchorData_=n5,tL=e.WritableObservableValue_ActiveEmbedData__Internal,window.WritableObservableValue_ActiveEmbedData_=n7,window.MutableWritableObservableValue_ActiveEmbedData_=ie,tP=e.WritableObservableValue_PresetType__Internal,window.WritableObservableValue_PresetType_=it,window.MutableWritableObservableValue_PresetType_=ir,tR=e.WritableObservableValue_ColorFormat__Internal,window.WritableObservableValue_ColorFormat_=ii,window.MutableWritableObservableValue_ColorFormat_=ia,tk=e.WritableObservableValue_Float_Internal,window.WritableObservableValue_Float=io,window.MutableWritableObservableValue_Float=il,tD=e.WritableObservableValue_HandoffOutputFormat__Internal,window.WritableObservableValue_HandoffOutputFormat_=is,window.MutableWritableObservableValue_HandoffOutputFormat_=ic,tM=e.WritableObservableValue_HandoffPlatformTarget__Internal,window.WritableObservableValue_HandoffPlatformTarget_=id,window.MutableWritableObservableValue_HandoffPlatformTarget_=iu,tF=e.WritableObservableValue_ExportSelectionSettings__Internal,window.WritableObservableValue_ExportSelectionSettings_=ip,window.MutableWritableObservableValue_ExportSelectionSettings_=im,tx=e.ObservableValue_Array_PublishableSymbolForWeb__Internal,window.ObservableValue_Array_PublishableSymbolForWeb_=ih,window.MutableObservableValue_Array_PublishableSymbolForWeb_=i_,tU=e.ObservableValue_Array_SubscribedSymbolForWeb__Internal,window.ObservableValue_Array_SubscribedSymbolForWeb_=ig,window.MutableObservableValue_Array_SubscribedSymbolForWeb_=iE,tB=e.ObservableValue_Array_PublishableStateGroupForWeb__Internal,window.ObservableValue_Array_PublishableStateGroupForWeb_=iy,window.MutableObservableValue_Array_PublishableStateGroupForWeb_=iv,tV=e.ObservableValue_Array_SubscribedStateGroupForWeb__Internal,window.ObservableValue_Array_SubscribedStateGroupForWeb_=ib,window.MutableObservableValue_Array_SubscribedStateGroupForWeb_=iI,tG=e.ObservableValue_Array_PublishableStyleForWeb__Internal,window.ObservableValue_Array_PublishableStyleForWeb_=iT,window.MutableObservableValue_Array_PublishableStyleForWeb_=iw,tH=e.ObservableValue_Array_SubscribedStyleForWeb__Internal,window.ObservableValue_Array_SubscribedStyleForWeb_=iS,window.MutableObservableValue_Array_SubscribedStyleForWeb_=iC,tW=e.ObservableValue_Array_PublishableModuleForWeb__Internal,window.ObservableValue_Array_PublishableModuleForWeb_=iO,window.MutableObservableValue_Array_PublishableModuleForWeb_=iA,tK=e.WritableObservableValue_PropertiesPanelTab__Internal,window.WritableObservableValue_PropertiesPanelTab_=iN,window.MutableWritableObservableValue_PropertiesPanelTab_=iL,tz=e.ObservableValue_Int_Internal,window.ObservableValue_Int=iP,window.MutableObservableValue_Int=iR,tZ=e.ObservableValue_StrokePanelMode__Internal,window.ObservableValue_StrokePanelMode_=ik,window.MutableObservableValue_StrokePanelMode_=iD,tY=e.ObservableValue_PrototypeDevice__Internal,window.ObservableValue_PrototypeDevice_=iM,window.MutableObservableValue_PrototypeDevice_=iF,tj=e.WritableObservableValue_PrototypeViewMode__Internal,window.WritableObservableValue_PrototypeViewMode_=ix,window.MutableWritableObservableValue_PrototypeViewMode_=iU,t$=e.ObservableValue_Map_String_PageSyncingStatus__Internal,window.ObservableValue_Map_String_PageSyncingStatus_=iB,window.MutableObservableValue_Map_String_PageSyncingStatus_=iV,tq=e.WritableObservableValue_HoveredComponentPropDef__Internal,window.WritableObservableValue_HoveredComponentPropDef_=iG,window.MutableWritableObservableValue_HoveredComponentPropDef_=iH,tX=e.WritableObservableValue_Uint_Internal,window.WritableObservableValue_Uint=iW,window.MutableWritableObservableValue_Uint=iK,tJ=e.ObservableValue_FocusModeState__Internal,window.ObservableValue_FocusModeState_=iz,window.MutableObservableValue_FocusModeState_=iZ,tQ=e.ObservableValue_DocumentColorProfile__Internal,window.ObservableValue_DocumentColorProfile_=iY,window.MutableObservableValue_DocumentColorProfile_=ij,t0=e.ObservableValue_Map_String_GUID_Internal,window.ObservableValue_Map_String_GUID=i$,window.MutableObservableValue_Map_String_GUID=iq,t1=e.WritableObservableValue_Map_String_Bool_Internal,window.WritableObservableValue_Map_String_Bool=iX,window.MutableWritableObservableValue_Map_String_Bool=iJ,t2=e.WritableObservableValue_String_Internal,window.WritableObservableValue_String=iQ,window.MutableWritableObservableValue_String=i0}function uf(){return{animationConfigBindings:i,animationBindings:a,appStateTsApi:o,autosaveHelpers:l,bindingsPerfBench:s,cppBindingsTestHelpers:u,branchingHelpers:p,canvasSearchHelpers:h,componentPropsAiCPPBindings:g,cSSExportHelpers:f,customFocusHelpers:v,debuggingHelpers:b,diffImpl:T,jamboardImporterCppBindings:O,emojiCppBindings:A,fontHelpers:L,fullscreenInteractionTestHelpers:P,fullscreenOptimizationExposureLoggingBinding:R,fullscreenPerfInfo:k,fullscreenPerfMetrics:D,fullscreenWebSocketTsApi:M,stackBindingsCpp:F,fullscreen:x,handoffBindingsCpp:U,historyChangesBindings:B,interactionCpp:z,libraryPubSub:Y,mentionsCppBindings:$,migrationBindings:q,mindmapCppBindings:X,multiplayer:J,pluginHelpers:Q,prototypingTsApi:er,sceneGraphHelpers:eo,sceneNodeCpp:el,selectionPaintHelpers:es,selectionStylesHelpers:ec,stateManagementCPPBindings:ed,sharedStyle:eu,stickyClusteringCppBindings:ep,testFullscreenMultiplayerDocument:em,thumbnail:eh,userPreferencesTestHelpers:eg,variablesBindings:ef,videoCppBindings:eE,whiteboardAgendaCppBindings:ey,whiteboardStarterKitCppBindings:ev,whiteboardAiTemplatePreviewCppBindings:eb,whiteboardAiVisualCppBindings:eI,whiteboardTemplatePreviewCppBindings:eT,whiteboardThumbnailGeneratorCppBindings:ew,whiteboardTsApi:eS,whiteboardVotingCppBindings:eC,hitTestBindings:eO,whiteboardSectionPresetPickerCppBindings:eL,stylesBindings:eP,corePerfInfo:eR,featureFlagsCppApi:ek,weakHandleHelpers:eD,webAsyncCallback:eM,performanceEventCounters:eF,colorManagementStateJs:ex,editScopeBindings:eU,fonts:eV,imageCppBindings:eG,nodeTsApi:eW,sceneGraphBindings:eZ,sceneGraphTsApi:eY,uniquePathHelpers:eX,accessibilityHelpers:eQ,nodeTsApiGenerated:e8,bindings:e9,documentStateTsApi:e5,figmaScopeBindings:e7,variablesMirrorManager:te,sharedDebuggingHelpers:tt,interactionTestHelpers:tr,prototype:tn,animationConfig_Internal:n,nestedCppObject_Internal:c,testCppObject_Internal:d,branchingState_Internal:m,canvasViewState_Internal:_,currentPageState_Internal:E,currentSceneState_Internal:y,devHandoffState_Internal:I,editorState_Internal:w,embedUiState_Internal:S,editorPreferences_Internal:C,figjamState_Internal:N,hoverState_Internal:V,editorTypeConfig_Internal:G,viewport_Internal:H,mouseBehaviorEvent_Internal:W,canvasContext_Internal:K,canvasSnapper_Internal:Z,libraryAssets_Internal:j,propertiesPanelState_Internal:ee,prototypingEditorState_Internal:et,sceneGraphQuerySyncState_Internal:en,immutableFrameObserver_Internal:ei,sceneGraph_Internal:ea,uiState_Internal:e_,interactiveSlideData_Internal:eA,singleSlideLayout_Internal:eN,effectData_Internal:eB,bindingsNode_Internal:eH,paintData_Internal:eK,prototypeInteractions_Internal:ez,textData_Internal:ej,derivedTextData_Internal:e$,uniquePath_Internal:eq,compiledVectorData_Internal:eJ,canvasSelection_Internal:e0,slideDeckLayout_Internal:e1,slideThemeLibBindings_Internal:e2,slideAnimationBindings_Internal:e3,sitesPreviewObserver_Internal:e4,annotationObserver_Internal:e6,observableValue_Map_GUID_Int_Internal:ti,observableValue_Map_GUID_GUID_Internal:ta,observableValue_TestCounter__Internal:to,observableValue_Array_TestCounter__Internal:tl,observableValue_Array_Bool_Internal:ts,observableValue_Bool_Internal:tc,observableValue_Float_Internal:td,writableObservableValue_Bool_Internal:tu,writableObservableValue_Double_Internal:tp,writableObservableValue_Int_Internal:tm,observableValue_BoundingRect__Internal:th,writableObservableValue_Optional_InlineMenuTarget__Internal:t_,observableValue_Optional_FocusedStackRegion__Internal:tg,writableObservableValue_AnchorPoint__Internal:tf,writableObservableValue_Array_GUID_Internal:tE,writableObservableValue_Optional_GUID_Internal:ty,writableObservableValue_Optional_BoundingRect__Internal:tv,observableValue_String_Internal:tb,observableValue_Map_GUID_Bool_Internal:tI,observableValue_GUID_Internal:tT,observableValue_Array_GUID_Internal:tw,observableValue_Json_Internal:tS,observableValue_PropertyState__Internal:tC,writableObservableValue_GUID_Internal:tO,writableObservableValue_KeyboardLayout__Internal:tA,observableValue_CommentAnchorData__Internal:tN,writableObservableValue_ActiveEmbedData__Internal:tL,writableObservableValue_PresetType__Internal:tP,writableObservableValue_ColorFormat__Internal:tR,writableObservableValue_Float_Internal:tk,writableObservableValue_HandoffOutputFormat__Internal:tD,writableObservableValue_HandoffPlatformTarget__Internal:tM,writableObservableValue_ExportSelectionSettings__Internal:tF,observableValue_Array_PublishableSymbolForWeb__Internal:tx,observableValue_Array_SubscribedSymbolForWeb__Internal:tU,observableValue_Array_PublishableStateGroupForWeb__Internal:tB,observableValue_Array_SubscribedStateGroupForWeb__Internal:tV,observableValue_Array_PublishableStyleForWeb__Internal:tG,observableValue_Array_SubscribedStyleForWeb__Internal:tH,observableValue_Array_PublishableModuleForWeb__Internal:tW,writableObservableValue_PropertiesPanelTab__Internal:tK,observableValue_Int_Internal:tz,observableValue_StrokePanelMode__Internal:tZ,observableValue_PrototypeDevice__Internal:tY,writableObservableValue_PrototypeViewMode__Internal:tj,observableValue_Map_String_PageSyncingStatus__Internal:t$,writableObservableValue_HoveredComponentPropDef__Internal:tq,writableObservableValue_Uint_Internal:tX,observableValue_FocusModeState__Internal:tJ,observableValue_DocumentColorProfile__Internal:tQ,observableValue_Map_String_GUID_Internal:t0,writableObservableValue_Map_String_Bool_Internal:t1,writableObservableValue_String_Internal:t2}}},269075:(e,t,r)=>{let n;r.d(t,{Nm:()=>n,Od:()=>i.Od1,QL:()=>s,UJ:()=>o,y2:()=>a}),r(361763),r(644383);var i=r(961215);let a=Object.assign(function(e,t,r){var n,a;let o=null==(n=i.RtJ)?void 0:n.openEditScope(e,t);try{return r()}finally{null!=o&&(null==(a=i.RtJ)||a.closeEditScope(o))}},{system:function(e,t){return a(i.Od1.SYSTEM,e,t)},user:function(e,t){return a(i.Od1.USER,e,t)},plugin:function(e,t){return a(i.Od1.PLUGIN,e,t)},onboarding:function(e,t){return a(i.Od1.ONBOARDING,e,t)},testSetup:function(e,t){return t()}}),o=Object.assign(function(e,t,r){return(...n)=>a(e,t,()=>r(...n))},{user:function(e,t){return(...r)=>a.user(e,()=>t(...r))},system:function(e,t){return(...r)=>a.system(e,()=>t(...r))},plugin:function(e,t){return(...r)=>a.plugin(e,()=>t(...r))},onboarding:function(e,t){return(...r)=>a.onboarding(e,()=>t(...r))},testSetup:function(e,t){return(...r)=>a.testSetup(e,()=>t(...r))}});class l{constructor(e){this.store=e}onMissingEditScope(){}}function s(e){n=new l(e)}},784667:(e,t,r)=>{r.d(t,{DS:()=>f,Hd:()=>w,Ui:()=>m,W$:()=>y,Xw:()=>E,Yt:()=>_,fu:()=>I,iD:()=>h,p9:()=>g,pb:()=>v,tZ:()=>p,zu:()=>b});var n=r(970740),i=r(909765),a=r(442299),o=r(668849),l=r(572333),s=r(441678),c=r(961215),d=r(403968),u=r(728287);function p(){return c.O$1.editorPreferences()}function m(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().hideHelpWidget,!1)}function h(){let e=(0,o.A2)(),t=(0,l.mA)(p().colorFormat);return t===c.qzo.CSS&&e||t===c.qzo.UIColor&&!e?c.qzo.RGB:t}function _(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().sidebarSplitPosition,a.U.sidebarSplitPosition)}function g(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().devHandoffInspectSplitPosition,320)}function f(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().propertiesPanelSplitPosition,a.U.propertiesPanelSplitPosition)}function E(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().bigNudgeAmount,i.uy)}function y(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().smallNudgeAmount,i.lN)}function v(){let e=y(),t=E();return{smallNudgeAmount:e,bigNudgeAmount:t}}function b(){var e;return(0,l.YO)(null==(e=c.O$1)?void 0:e.editorPreferences().renderRulers,!1)}function I(){return(0,l.mA)(p().useOldOutlineShortcuts)}let T=[{getObservable:()=>p().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,n.t)("visual_bell.pixel_preview_enabled",{scaling:(0,s.Y)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,n.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>p().renderGrid,getMessage:e=>({message:e?(0,n.t)("visual_bell.render_grid_visible"):(0,n.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>p().snapToPixelGrid,getMessage:e=>({message:e?(0,n.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,n.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>p().showMasks,getMessage:e=>({message:e?(0,n.t)("visual_bell.show_masks_visible"):(0,n.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>p().snapToDotGrid,getMessage:e=>({message:e?(0,n.t)("visual_bell.snap_to_dot_grid_enabled"):(0,n.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>p().snapToGeometry,getMessage:e=>({message:e?(0,n.t)("visual_bell.snap_to_geometry_enabled"):(0,n.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>p().snapToObjects,getMessage:e=>({message:e?(0,n.t)("visual_bell.snap_to_objects_enabled"):(0,n.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>p().showFrameGrids,getMessage:e=>(0,d._t)()?((0,d.Km)(),{message:(0,n.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,n.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),c.O$1.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,n.t)("visual_bell.show_frame_grids_visible"):(0,n.t)("visual_bell.show_frame_grids_hidden")}}];function w(){(0,u.s)(T)}},716064:(e,t,r)=>{let n;r.d(t,{IB:()=>d,Uh:()=>p,_H:()=>n});var i=r(283929),a=r(126083),o=r(716250),l=r(337167),s=r(493882),c=r(259162);function d(e){let t=a.yh.getDefaultSkin()||1,r="";r=e.skins[t-1]?e.skins[t-1].unified:e.skins[0].unified;let n=r.split("-").map(e=>parseInt(e,16));return String.fromCodePoint(...n)}class u{convertEmojiNameToString(e){let t=e.toLocaleLowerCase(),r=(0,o.BZ)().emoji_15_upgrade?a.WV:i.WV,n=r.searchSynchronized(t).filter(e=>e.id===t);return 0===n.length?"":d(n[0])}setEmojiTypeaheadQuery(e){let t=e&&e.length>1?(0,c.fu)(e):null;l.n_.set(s.pK,t)}clearEmojiTypeaheadQuery(){l.n_.set(s.pK,null)}isShowingEmojiTypeaheadResults(){var e;let t=l.n_.get(s.pK);return!!(null==(e=null==t?void 0:t.emojis)?void 0:e.length)}setEmojiTypeaheadImageSet(e){l.n_.set(s.yP,e)}setEmojiTypeaheadTargetRect(e,t,r){l.n_.set(s.Wo,{x:e,y:t,height:r,width:0})}}let p=()=>{n=new u}},393357:(e,t,r)=>{r.d(t,{BP:()=>h,JP:()=>m,cY:()=>g,jQ:()=>p,pI:()=>_});var n,i,a=r(810373),o=r(873349),l=r(571529),s=r(618723),c=r(865497);r(222490);var d=r(158774),u=r(961215),p=((n=p||{})[n.YES=0]="YES",n[n.NO=1]="NO",n),m=((i=m||{})[i.YES=0]="YES",i[i.NO=1]="NO",i);function h(e,t=0,r=1){if(!d.Gr||!d.Gr.isRootElementVisible())return!1;let n=e.keyCode,i=(0,a.As)(e);if(n===a.sr.TAB&&(0,a.MA)(e,a.tx.SHIFT));else if(l.ZP.mac&&e.ctrlKey&&(n===a.sr.A||n===a.sr.B||n===a.sr.D||n===a.sr.E||n===a.sr.F||n===a.sr.H||n===a.sr.K||n===a.sr.L||n===a.sr.N||n===a.sr.O||n===a.sr.P||n===a.sr.T||n===a.sr.V));else if(n===a.sr.DELETE||n===a.sr.BACKSPACE||n===a.sr.NUMPAD_DELETE||n===a.sr.SPACE||n===a.sr.ENTER||n===a.sr.HOME||n===a.sr.END||n===a.sr.PAGE_UP||n===a.sr.PAGE_DOWN||n===a.sr.A&&1===r);else if(i&&n===a.sr.Z&&1===t);else if(i||e.ctrlKey)return!0;return!1}function _(e,t=0,r=1){return!!h(e,t,r)&&g(e,!0)}function g(e,t=!1){var r;let n;if("keydown"===e.type)n=u.twY.KEY_PRESS;else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=u.twY.KEY_RELEASE}let i=(0,o.tp)(),l=d.Gr.DEPRECATED_sendMessage(t?"handleKeyboardShortcut":"handleKeyboardEvent",{type:n,which:e.which,modifierKeys:(0,a.iV)(e),isRepeat:e.repeat,code:e.code??(null==(r=e.nativeEvent)?void 0:r.code),shouldUseLayoutAndCode:i!==u.UMq.UNKNOWN,layout:i}),s=null==l?void 0:l.args.accepted;return s&&e.preventDefault(),s}(0,s.Bd)(_),(0,c.B)(_)},366721:(e,t,r)=>{r.d(t,{LR:()=>a,Vy:()=>l,k3:()=>i,uS:()=>o});var n=r(816754);let i=new n.v("action");function a(e){i.trigger("action",e)}let o=new n.v("action");function l(e,t){o.trigger("action",[e,t])}},42896:(e,t,r)=>{r.d(t,{Tj:()=>V,mm:()=>M,oY:()=>G});var n=r(600486),i=r(439252),a=r(220518),o=r(716250),l=r(870077),s=r(259574),c=r(286206),d=r(1057),u=r(117986),p=r(473515),m=r(31642),h=r(970740),_=r(644383),g=r(111120),f=r(614261),E=r(534187),y=r(448694),v=r(158774),b=r(545577),I=r(764850),T=r(343878),w=r(792045),S=r(733609),C=r(224190),O=r(868894),A=r(45741),N=r(422752),L=r(468211),P=r(738285),R=r(318604),k=r(941076);let D={bytes:new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,8,6,0,0,0,31,21,196,137,0,0,0,10,73,68,65,84,120,156,99,0,1,0,0,5,0,1,13,10,45,180,0,0,0,0,73,69,78,68,174,66,96,130]),clientMeta:{background_color:{r:0,g:0,b:0,a:0},thumbnail_size:{width:1,height:1}}};function M(e,t,r){return t?(0,h.t)("fullscreen.file_import.fig_jam_has_been_disabled_by_your_organization"):r?(0,h.t)("fullscreen.file_import.user_externally_restricted"):e?(0,h.t)("fullscreen.file_import.you_don_t_have_permissions_to_import_in_folder_name",{folderName:e}):(0,h.t)("fullscreen.file_import.you_don_t_have_permissions_to_import")}async function F(e,t,r){v.Gr.resetLoadedFigFile(),await (0,P.Mu)(e,"whiteboard");let n=await R.SQ.convertPDFToScene(r);if(n===I.Nho.ERROR_TEXT_SIZE)throw new k._O((0,h.t)("fullscreen.file_import.file_contains_text_either_too_big_or_too_small"));if(n===I.Nho.ERROR_OTHER)throw new k._O((0,h.t)("fullscreen.file_import.import_miro_pdf_failed"));let i=I.iTB.getScene(),a={bytes:new Uint8Array,clientMeta:{}};return{file:{name:t,type:"jam",bytes:i,thumbnail:a,version:15},images:[],videos:[],warnings:[]}}async function x(e,t,r,n,a,o,s,d){var p,y=null;try{let v;let b=await function(e,t,r,n,i,a,o){if(t.hasCanceled())return Promise.reject(Error("canceled"));let l=Error((0,h.t)("fullscreen.file_import.oops_this_service_is_temporarily_unavailable")),s=function(e,t,r,n,i,a){var o;let l=e.getState(),s="folder"===l.selectedView.view?l.selectedView.folderId:null==(o=l.user)?void 0:o.drafts_folder_id,c=new FormData;return c.append("manifest",JSON.stringify({canvas_count:1,parts:[{name:"canvas",mime:"application/x-figma",length:r.length},{name:"thumbnail",mime:"image/png",length:n.bytes.length}],folder_id:s,file_type:t,client_meta:n.clientMeta,max_session_id:i,import_file_format:a})),c.append("canvas",new Blob([r],{type:"application/x-figma"})),c.append("thumbnail",new Blob([n.bytes],{type:"image/png"})),c}(e,r,n,i,a,o);return m.ZP.post("/api/upnode/checkpoint?st=import",s,{raw:!0,retryCount:3}).catch(e=>{throw(0,c.Jz)(u.k.SCENEGRAPH_AND_SYNC,e),l}).then(e=>{if(e.error)throw Error(e.error);try{return JSON.parse(e.data)}catch(e){throw(0,c.Jz)(u.k.SCENEGRAPH_AND_SYNC,Error("Unparseable canvas upload response")),l}})}(e,t,n,a,o||D,s,d);if(y=b.meta.file.key,t.hasCanceled())throw Error("Import canceled.");if(!y)throw Error("Null fileKey.");let I=e.getState();if(!(0,S.canCreateFile)(b.meta.file.folder_id,I,b.meta.file.editor_type)){let t=null==(p=I.user)?void 0:p.drafts_folder_id,r=I.folders[b.meta.file.folder_id],n=r&&(0,S.isFigJamDisabledForFolder)(r,I),i=(0,S.isOrgUserExternallyRestrictedFromState)(I),a=M(null==r?void 0:r.name,n,i);throw e.dispatch(_.R.enqueue({message:a,type:"restricted-import-type",error:!0,...!t||n||i?{}:{button:{text:(0,h.t)("fullscreen.file_import.go_to_drafts"),action:()=>{e.dispatch(g.B4(t))}}}})),Error(a)}if(b.meta.file.file_repo_id){let t=await m.ZP.put(`/api/repo/${b.meta.file.file_repo_id}`,{name:r});e.dispatch(f.v_({repo:t.data.meta})),v={file:{...b.meta.file,accessed_at:new Date().toISOString()}}}else await m.ZP.put(`/api/files/${y}`,{name:r}),v={file:{...b.meta.file,accessed_at:new Date().toISOString(),name:r}};return await (0,l.Ki)(i.zn)({orgId:I.currentUserOrgId,newFile:v.file}),e.dispatch(E.pz({type:O.m.FILES,tiles:[{type:T.YU.FILE,file:v.file}]})),{fileKey:y}}catch(e){throw y&&m.ZP.del("/api/files_batch",{files:[{key:y}]}),e}}async function U(e,t,r){let n=t.length,i=0;try{for(let a=0;a<t.length;a+=5){let l=[];for(let s=a;s<a+5&&s<t.length;s++){let a=t[s];if(e.hasCanceled())throw Error("Import canceled.");let c="application/octet-stream";if(e.isProbablyPNGFile(a.bytes))c="image/png";else if(e.isProbablyJPEGFile(a.bytes))c="image/jpeg";else if(e.isProbablyGIFFile(a.bytes))c="image/gif";else{console.warn("warning: ignoring image with unknown type ("+Array.prototype.slice.call(a.bytes,0,10).map(e=>(256|e).toString(16).slice(-2))+"...)");continue}e.callUpdateProgressCallback(20+(0===n?0:80*s/n)),l.push(new Promise((e,t)=>{let n=l=>{var s;let u=new XMLHttpRequest,p=!1;u.onloadend=()=>{let r=k.NA.indexOf(u);if(r>-1&&k.NA.slice(r,1),4===u.readyState&&200===u.status)e();else if(p)t(Error("Import canceled."));else if(413===u.status)i++,e();else if(400!==u.status&&401!==u.status){let e=3-l;if(--l>0){let t=1e3*Math.pow(2,e),r=t+t*Math.random();(429===u.status||503===u.status)&&(r*=2),console.warn("Image upload failed, retrying..."),setTimeout(()=>{n(l)},r);return}}let a=new k.EU((0,h.t)("fullscreen.file_import.image_import_failed"));a.imageUploadError=!0,t(a)},u.onabort=()=>{p=!0},u.open("POST",`/api/upnode/image?purpose=canvas&sha1=${d.NC(a.sha1Bytes)}&fileKey=${r.fileKey}`);let m=null==(s=(0,o.Gm)().user_data)?void 0:s.id;m&&u.setRequestHeader("X-Figma-User-ID",m),u.setRequestHeader("Content-Type",c),k.NA.push(u),u.send(a.bytes||null)};n(3)})),await (0,p.X_)(0)}await Promise.all(l)}}catch(e){throw m.ZP.del("/api/files_batch",{files:[{key:r.fileKey}]}),e}let a=[];return i>0&&a.push((0,h.t)("fullscreen.file_import.oversized_files_image_s_were_too_large_64_mb_and_did_not_successfully_import",{oversizedFiles:i})),a}function B(e){let t=(0,b.IY)([I.gYv.LOCAL,I.gYv.GOOGLE,I.gYv.SHARED]);return{getFont:async function(r){var n;let i=await t;for(let t of[i.localFontsList,i.indexFontsList,i.sharedFontsList])if(void 0!==t)for(let i of t){let t=function(e,t){if(e===t)return!0;let r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return"lower";let i=r.split("-"),a=n.split("-");return 0!==i.length&&0!==a.length&&a[0]===i[0]&&(1===i.length&&2===a.length&&"regular"===a[1]||2===i.length&&1===a.length&&"regular"===i[1])&&"assume-regular"}(i.postscript,r);if(t){!0!==t&&console.warn(`Fuzzy font name match: ${i.postscript} = ${r} (${t})`);let a=e.getState(),o=null;if("folder"===a.selectedView.view){let e=a.folders[a.selectedView.folderId];o=e&&e.team_id}let l=await (0,b.EG)({source:i.source,id:i.id,postscriptName:i.postscript,fileKey:(null==(n=a.openFile)?void 0:n.key)||null,teamId:o,orgId:a.currentUserOrgId});if(l)return{name:i.postscript,font:l}}}return new Promise((e,t)=>t(null))}}}async function V(e,t,r,i,l,d,p){var m,_,g;let f;if(".svg"===r)throw new k._O((0,h.t)("fullscreen.file_import.to_import_an_svg_drag_it_directly_into_an_open_figma_file"));let E=d.blob,v=(0,a.JE)(null==(_=null==(m=(0,o.Gm)())?void 0:m.user_data)?void 0:_.email),b={entrypoint:"file_browser",fileLength:E.size};if(".pdf"===r){if((0,n.L9)("pdf_import_started",b,{forwardToDatadog:!0}),E.size>52428800)throw new k._O((0,h.t)("fullscreen.file_import.your_pdf_is_larger_than_50mb"));let r=new Uint8Array(await E.arrayBuffer());f=await F(e,t,r)}else if(".jamboard"===r){if((0,n.L9)("file_import_started",{...b,extension:r},{forwardToDatadog:!0}),null==(g=d.metadata)?void 0:g.fileId){let r=new Uint8Array(await E.arrayBuffer());f=await (0,w.VB)(e,t,r,d.metadata.fileId)}else throw new k._O((0,h.t)("fullscreen.file_import.jamboard_supported_only_via_menu"))}else f=await l.convertFile({blob:E,featureFlags:i,fontLoader:B(e),isUserFigmaEmployee:v,fileExtension:r});let I=f.file;if(!I)throw new k.EU((0,h.t)("fullscreen.file_import.could_not_convert_file"));if(l.hasCanceled())return{warnings:["Canceled"],file:null};let{fileKey:T}=await x(e,l,t,I.type,I.bytes,I.thumbnail,I.maxSessionID||0,p);T&&".pdf"===r&&(0,y.hp)("pdf_import_successful",T,e.getState(),b,{forwardToDatadog:!0}),T&&".jamboard"===r&&(0,y.hp)("file_created",T,e.getState(),{ui_triggered_from:N.yo,extension:r,...b},{forwardToDatadog:!0});let S={fileKey:T,sketchMeta:I.sketchMeta},O=(0,C.iE)(f.videos,S.fileKey,l),P=await U(l,f.images,S);try{await O}catch(t){throw t instanceof s.TI&&(0,o.BZ)().ds_network_status_ui&&(0,A.kK)(e.dispatch,(0,h.t)("check_network_compatibility.error_bell.video_upload.message")),t}try{if(I.developerRelatedLinks){let e=new L.dy,t=I.developerRelatedLinks.map(e=>({fileKey:T,nodeId:e.nodeId,linkName:e.linkName,linkUrl:e.linkUrl}));await e.addLinks(t)}}catch(e){(0,c.Jz)(u.k.DEVELOPER_TOOLS,e)}return{warnings:f.warnings.concat(P),file:S}}async function G(e,t,r,n){var i,l;let s=(0,a.JE)(null==(l=null==(i=(0,o.Gm)())?void 0:i.user_data)?void 0:l.email),c=await r.convertFile({blob:n,featureFlags:t,fontLoader:B(e),isUserFigmaEmployee:s,fileExtension:".fig"});if(!c.file)throw Error("Could not convert file");return c.file}},632500:(e,t,r)=>{r.d(t,{$2:()=>L,$W:()=>_,Bs:()=>S,CD:()=>m,Cf:()=>c,Fv:()=>N,It:()=>P,LI:()=>s,MY:()=>T,Np:()=>g,SF:()=>A,W9:()=>l,_m:()=>y,cS:()=>u,hh:()=>w,io:()=>h,j:()=>R,k3:()=>f,kJ:()=>d,oz:()=>p,qW:()=>C,sR:()=>E,zJ:()=>I,zR:()=>b,zS:()=>v});var n=r(716250),i=r(970740),a=r(424479),o=r(408512);let l=[],s=(0,n.BZ)().figjam_summarization_ui2?8:16,c=436,d=36,u=2*d+2*s+c,p=4,m=24,h=24,_=6,g=h/2+_,f=h/2,E={r:.9,g:.9,b:.9,a:1},y=4,v=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],b={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:c},I=8*b.fontSize/14,T={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};function w(e,t,r=!0){e.isAlive()&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(t)),r&&o.a.renderFirstPartyWidget(e.widgetId,e.guid))}function S(e,t,r=!0){e.isAlive()&&(e.setWidgetSyncedState("syncedState:summarized-at",`${t.getTime()}`),r&&o.a.renderFirstPartyWidget(e.widgetId,e.guid))}class C{static copySummaryDataToClipboard(e,t){let r=A(e,t);navigator.clipboard.writeText(r)}}let O=()=>(0,i.t)("whiteboard.ai.summary.summary_footer_disclaimer");function A(e,t){let r="";return r+=`${L(t)}

`,e.forEach(e=>{switch("h2"===e.type&&(r+="\n"),e.type){case"p":case"h1":case"h2":default:r+=e.content+"\n";break;case"li":r+=`\u2022 ${e.content}
`}}),r+=`
${O()}`}let N=e=>e.endsWith("...")?P():e+".";function L(e){let t=new Date,r=parseInt(e,10);return r?(t.setTime(r),(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:t})):(0,i.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}let P=()=>(0,i.t)("whiteboard.ai_summary.loading_text");function R(e,t,r){let n=t.length>0,i=r&&r.length>0;if(!n||i)return!1;let o=new a.TSSceneGraph,l=o.get(e);return!!l&&(w(l,function(e){let t=JSON.parse(e),r=[{type:"p",context:"tldr",content:t.summary}];return t.supporting_points.forEach(({header:e,two_to_five_supporting_points:t})=>{r.push({type:"h2",content:e,context:"main_theme"}),t.forEach(e=>{r.push({type:"li",content:e,context:"supporting_point"})})}),r}(t)),!0)}},568734:(e,t,r)=>{r.d(t,{cM:()=>_,p$:()=>w,pB:()=>g});var n,i=r(556979),a=r(269658),o=r(970740),l=r(133354),s=r(448694),c=r(837728),d=r(597630),u=r(961215),p=r(879528),m=r(541153),h=r(951261);function _(e,t){var r,n;let i=(null==(r=(0,c.bC)(a.V.getState()))?void 0:r.key)??"";(0,s.hp)(e,i,a.V.getState(),{domain:null!=t?(0,d.yJ)(t):"",linkRenderType:d.Yx.LINK_PREVIEW,userId:null==(n=a.V.getState().user)?void 0:n.id})}var g=((n=g||{}).OPEN="open",n.VERTICAL="vertical",n.HORIZONTAL="horizontal",n.CONVERT_TO_TEXT="convert_to_text",n);let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,v=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,I=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,T=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function w({figma:e}){let{widget:t}=e,{Frame:r,AutoLayout:n,Text,SVG:s}=t;t.register(function(){let c=t.useWidgetId(),[g]=t.useSyncedState("url",null),w=g?decodeURIComponent(g):"null",S=(0,p.d)(e,t,"thumbnailImageHash"),[C]=t.useSyncedState("thumbnailImageWidth",null),[O]=t.useSyncedState("thumbnailImageHeight",null),A=C&&O?C/O:void 0,N=(0,p.d)(e,t,"faviconImageHash"),L=!!S,P=480-(L?112:8)-32-16,[R]=t.useSyncedState("title",null),[k]=t.useSyncedState("description",null),[D]=t.useSyncedState("provider",""),M=!!R,F=!!k,x=M||F,U=!(M||F||L),B=M!==F,[V,G]=t.useSyncedState("orientation",U?"horizontal":"vertical"),H=(0,m.K)(t,"title",{name:"Inter Medium",size:16,lineHeight:22},"vertical"===V?240:P,("vertical"===V?2:1)+(B?1:0)+("Twitter"===D?4:0),!1),W=(0,m.K)(t,"description",{name:"Inter",size:H?13:14,lineHeight:20},"vertical"===V?240:P,("vertical"===V?2:1)+(B?1:0),!1),K=(0,m.K)(t,"url",{name:"Inter",size:16,lineHeight:22},("vertical"===V?240:P)-24,1+(x?0:1),!0),z=x?(0,i.Xr)(w):K,Z=()=>{_(d.EH.OPEN_PREVIEW,w),a.V.dispatch((0,l.IO)({rawInput:w}))};t.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===V?y:v},{itemType:"action",propertyName:"horizontal",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===V?b:I},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,o.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":Z();break;case"convert_to_text":_(d.EH.CONVERT_TO_TEXT,w),u.iTB.replaceNodeWithText(c,w);break;case"vertical":_(d.EH.SWITCH_ORIENTATION_VERTICAL,w),G("vertical");break;case"horizontal":_(d.EH.SWITCH_ORIENTATION_HORIZONTAL,w),G("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let Y={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},j=t=>{let i=t?e.widget.h(r,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:t,scaleMode:"fill"},cornerRadius:3}):e.widget.h(s,{src:T});return e.widget.h(n,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:x?0:3,bottom:0}},i)},$=(t,n,i)=>e.widget.h(r,{name:"container-frame",width:t,height:n,fill:i?{type:"image",imageHash:i,scaleMode:"fill"}:h.DjY,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===V?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:Z}),q=t=>{if(t)return e.widget.h(Text,{fontSize:16,fontWeight:500,lineHeight:22,...Y},t)},X=(t,r)=>{if(r)return e.widget.h(Text,{fontSize:t?13:14,lineHeight:20,fontWeight:400,...Y,fill:{...Y.fill,color:{r:0,g:0,b:0,a:t?.5:.8}}},r)},J=(t,r)=>e.widget.h(Text,{fontSize:t?13:16,lineHeight:t?20:22,fontWeight:400,textDecoration:"underline",...Y,fill:{...Y.fill,color:{r:0,g:0,b:0,a:.5}},onClick:Z},r);return"vertical"===V?function(...t){return e.widget.h(n,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.THM,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...t)}(!L&&e.widget.h(r,{width:304,height:.01}),L&&$(304,A?Math.max(Math.min(304/A,608),160):160,S),x&&((t,...r)=>e.widget.h(n,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.THM,spacing:4,padding:{left:24,right:24,bottom:0,top:t?16:24}},...r))(L,q(H),X(M,W)),((t,...r)=>e.widget.h(n,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:t?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:t?{left:24,right:24,top:8,bottom:24}:20},...r))(x,j(N),J(x,z))):"horizontal"===V?function(t,...r){return e.widget.h(n,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.THM,cornerRadius:12,spacing:t?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...r)}(L,!L&&e.widget.h(r,{width:.01,height:.01}),L&&$(112,112,S),((t,...r)=>e.widget.h(n,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.THM,spacing:t?4:8,padding:t?{left:0,right:0,bottom:16,top:16}:20},...r))(L,x&&((...t)=>e.widget.h(n,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.THM,spacing:4,padding:0},...t))(q(H),X(M,W)),((...t)=>e.widget.h(n,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:x?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...t))(j(N),J(x,z)))):void 0})}},316346:(e,t,r)=>{r.d(t,{S:()=>a,r:()=>l});var n=r(935212),i=r(220949);let a="Selection Changed",o=new Set;function l(e,t,r){let l=function(e){let t=Object.keys(e);return 0===t.length?new Set:new Set(t)}(t),s=!(0,n.vP)(l,o);(0,i.Ps)().handle({id:a,userId:null==e?void 0:e.id,properties:{...r,numSelectedTextNodes:r.numSelectedByType&&r.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:s}}),o=l}},839475:(e,t,r)=>{r.d(t,{M:()=>_,p:()=>g});var n=r(652983),i=r(407908),a=r(600486),o=r(256768),l=r(635723),s=r(970740),c=r(644383),d=r(299370),u=r(721127),p=r(456326),m=r(858775),h=r(961215);let _=()=>{let e=(0,i.I0)(),t=(0,i.v9)(e=>e.versionHistory.compareId),r=(0,i.v9)(e=>(0,p.bo)(t,e.versionHistory));return n.useCallback(t=>{g(t,e,r)},[e,r])},g=(e,t,r)=>{let n=(0,l.A)(null==r?void 0:r.user.handle);if(n&&(null==r?void 0:r.touched_at)&&h.iTB.getChunkChangeMap().has(e)){if(!h.iTB.getChangesToCompareFromHistoryChangesState().has(e)){t(c.R.dequeue({matchType:"view_changes"}));return}t(c.R.dequeue({})),t(c.R.enqueue({message:(0,s.t)("collaboration.feedback.compare_changes_modal.action_text",{lastEditedBy:n,lastEditedAt:(0,o.Z)(r.touched_at).fromNow()}),type:"view_changes",button:{text:(0,s.t)("collaboration.feedback.compare_changes_modal.action_button"),action:()=>{(0,a.L9)("version_diffing_performance_metrics",{name:"diffing_modal_cta_clicked",entrypoint:"figma_design_version_history"}),t(u.K4({type:m.I,data:{nodeId:e}}))}},icon:""!==r.user.img_url?d.B4.FROM_URL:d.B4.NONE,iconShape:d.cF.CIRCLE,iconURL:r.user.img_url}))}}},875343:(e,t,r)=>{r.d(t,{K:()=>s,S:()=>l});var n=r(652983),i=r(337167),a=r(158774);let o=(0,i.qs)(()=>a.Gr.isReady()||a.Gr.onReady());function l(){(0,i.Dv)(o)}function s(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(a.Gr.isReady()){t(!0);return}let e=!1;return a.Gr.onReady().then(()=>{e||t(!0)}),()=>{e=!0}},[t]),e}},347712:(e,t,r)=>{r.d(t,{f:()=>i});var n=r(535963);async function i(e,t){if(e in t){let r=t[e];switch(r.type){case"bytes":return Promise.resolve(r.bytes);case"promise":return r.promise}}let r=(0,n.kB)(e);t[e]={type:"promise",promise:r};let i=await r;return t[e]={type:"bytes",bytes:i},i}},55500:(e,t,r)=>{r.d(t,{Q$:()=>T,UM:()=>I,lH:()=>w,oM:()=>_});var n,i=r(768358),a=r(461490),o=r(716250),l=r(888967),s=r(286206),c=r(117986),d=r(31642),u=r(295206),p=r(158774),m=r(961215),h=r(415438);async function _(e,t,r){let n="figFile"===t.type?`/file/${t.fileKey}/image/batch`:`/community/file/${t.hubFileId}/image/batch`;try{let t=await d.ZP.post(n,{sha1s:e,max_size:r},{retryCount:1/0});if(200!==t.status||t.data.error)throw Error("api error while resolving images");return t.data.meta.s3_urls}catch(t){throw console.warn(`Couldn't download image(s) with hashes ${e}`),t}}class g extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,g.prototype)}}class f extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,f.prototype)}}class E extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,E.prototype)}}var y=((n=y||{})[n.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",n[n.LOOKUP=1]="LOOKUP",n[n.UPLOADING=2]="UPLOADING",n[n.READY=3]="READY",n[n.MISSING=4]="MISSING",n[n.FAILED=5]="FAILED",n[n.PRESENT=6]="PRESENT",n);let v=class{constructor(e,t){this.hash=e,this._priority=t,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(e){this._priority!==v.MAX_PRIORITY&&(this._priority=e)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}let t=Date.now()/1e3;return e<t}downloadFromS3(){if(null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");return d.ZP.crossOriginGetAny(this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new E;throw 0!==e.status&&e.status<500&&((0,s.YD)("image","Image is missing from S3!",{hash:this.hash,status:e.status}),(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))),e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};v.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class b{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,t)=>t.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let t=this.queue.findIndex(t=>t.priority<e);return t<0?this.queue.length:t}push(...e){for(let t of(this.queue.push(...e),e))this.byHash.set(t.hash,t);this.needsSort=!0}updatePriority(e,t){let r=this.byHash.get(e);return null!=r&&(r.priority=t,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let t=Date.now(),r=1/0;for(let e=0;e<this.queue.length;e++){let n=this.queue[e].retryTime;if(null==n||t>=n){let[t]=this.queue.splice(e,1);return this.byHash.delete(t.hash),{found:!0,image:t}}r=n<r?n:r}return{found:!1,retryDelay:r-t}}find(e){return this.byHash.get(e)??null}erase(e){let t=this.byHash.get(e);if(t){this.byHash.delete(e);let r=this.queue.findIndex(e=>e===t);r>=0&&this.queue.splice(r,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}class I{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.imagesNeedingDirectUpload=new Set,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,o.BZ)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new b,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.flushPendingRecordImages=(0,i.D)(async()=>{let e=this.pendingImagesToRecord,t=this.pendingRecordImagesTasks,r=Object.keys(e);this.pendingImagesToRecord={},this.pendingRecordImagesTasks={};let n=await this.getEditingFileKey();r.forEach(async r=>{if(n===r){t[r].resolve();return}if(!r){t[r].reject("Invalid originFileKey");return}let i=1,a=e[r];for(;;){try{let e=await d.ZP.put(`/api/files/${n}`,{image_sha1s:a,image_origin_file_key:r}),{success:i,failed:o}=I.parseFileUpdateResponseForImages(a,e);for(let e of(m.Uv3.imagePermissionsCopied(i),o))this.markImageMissing(e);for(let e of a)delete this.pendingPasteRequests[e];t[r].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,l.Mb)(),a))this.markImageMissing(e),delete this.pendingPasteRequests[e];t[r].reject(`4xx error when pasting images ${e}`);return}}let e=1e3*i*Math.random();await new Promise(t=>setTimeout(t,e)),i=Math.min(2*i,64)}})},100)}getEditingFileKey(){return p.Gr.openFileKeyPromise()}recordImages(e,t){if(0===t.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...t),!this.pendingRecordImagesTasks[e]){let t,r;let n=new Promise((e,n)=>{t=e,r=n});this.pendingRecordImagesTasks[e]={promise:n,resolve:t,reject:r}}for(let r of t)this.pendingPasteRequests[r]=this.pendingRecordImagesTasks[e].promise;let r=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),r}static parseFileUpdateResponseForImages(e,t){var r,n;try{if(null==(n=null==(r=null==t?void 0:t.data)?void 0:r.meta)?void 0:n.missing_shas){let r=new Set(t.data.meta.missing_shas),n=e.filter(e=>!r.has(e));return{success:n,failed:Array.from(r)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(e){let t=await p.Gr.openFilePromise(),r=await _(e,t,this.imageMaxSize),n=e.filter(e=>!(e in r));if(n.length>0){let e=await p.Gr.sourceFileKeyPromise();if(e){let t=await _(n,{type:"figFile",fileKey:e});return{...r,...t}}}return r}queueImageForLookup(e){let t=e.hash;this.verbose&&(0,s.YK)("image","incoming",{hash:t}),e.state=0,this.incomingImages.set(t,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,t){let r=new v(e,v.MAX_PRIORITY);r.s3Path=t,this.allImages.set(e,r),this.downloadQueue.push(r),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}setImageDownloadPriority(e,t){if(!e){(0,s.Cp)("setImageDownloadPriority","invalid hash");return}let r=this.allImages.get(e);if(null==r){r=new v(e,t),this.allImages.set(e,r),this.queueImageForLookup(r);return}2===r.state&&(0,s.YD)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),r.priority=t,this.downloadQueue.updatePriority(e,t)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(var e;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let e=this.downloadQueue.pop(this.minPriority);if(null==e)break;if(!e.found){let t=e.retryDelay;!Number.isFinite(t)||t<=0?(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),t);break}let t=e.image;t.hash&&(this.verbose&&(0,s.YK)("image","download start",{hash:t.hash,ok:!this.pendingDownloads.has(t.hash)}),this.pendingDownloads.add(t.hash)),t.download(this.imageMaxSize).then(e=>{!this.cancelDownloads.delete(t.hash)&&(this.verbose&&(0,s.YK)("image","download done",{hash:t.hash,ok:!this.alreadyDownloaded.has(t.hash)}),this.alreadyDownloaded.add(t.hash),this.imagesNeedingDirectUpload.has(t.hash)?(m.Uv3.imageDownloadedForPaste(t.hash,e),this.imagesNeedingDirectUpload.delete(t.hash)):m.Uv3.imageDownloaded(t.hash,e),this.pendingDecodes.has(t.hash)||((0,s.Cp)("ImageManager","missing pending decode after download",{hash:t.hash}),(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),t.imageIsReady()))},e=>{if(this.pendingDecodes.delete(t.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),!this.cancelDownloads.delete(t.hash)){if(e instanceof g)this.markImageMissing(t.hash);else if(e instanceof f)(0,s.Jz)(c.k.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(t.hash);else if(e instanceof E)this.queueImageForLookup(t);else{if(e instanceof d.F7&&403===e.status){this.markImageFailed(t.hash);return}let r=5e3*(1<<Math.min(t.retries,4));r+=r*Math.random(),t.retries+=1,(429===e.status||503===e.status)&&(r*=4),t.retryTime=Date.now()+r,this.downloadQueue.push(t)}}}).finally(()=>{this.pendingDownloads.delete(t.hash),this.maybeDownloadMoreImages()})}null==(e=this.pendingImagesCallback)||e.call(this,this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,v.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,s.YK)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.pendingDecodes.add(e)}getSignedUrls(e){let t=new Map;for(let r of e){let e=this.allImages.get(r);e&&e.s3Path&&t.set(r,e.s3Path)}return t}clearImageDecodePending(e,t){this.verbose&&(0,s.YK)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)}),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),t?this.markImageReady(e):this.markImageFailed(e)}markImagePresent(e){let t=this.allImages.get(e);t&&(t.state=6,m.Uv3.imageIsPresent(e))}markImageMissing(e){let t=this.allImages.get(e);t&&(t.state=4,m.Uv3.imageIsMissing(e),t.imageIsReady())}markImageFailed(e){let t=this.allImages.get(e);t&&(t.state=5,t.imageIsReady())}markImageReady(e){let t=this.allImages.get(e);t&&(t.state=3,t.imageIsReady())}async lookupImages(){let e=[];for(let t of this.incomingImages.values())0===t.state&&(e.push(t),t.state=1,this.verbose&&(0,s.YK)("image","lookup",{hash:t.hash}));try{for(;e.length>0;){let t=e.splice(0,this.SINATRA_BATCH_SIZE);for(let e of t){let t=this.pendingPasteRequests[e.hash];if(t)try{await t}catch(t){(0,s.YD)("lookupImages","pastePromise failed",{hash:e.hash})}}let r=await this.resolveImageUrls(t.map(e=>e.hash));for(let e of t){let t=r[e.hash];t?(e.s3Path=t,this.markImagePresent(e.hash),this.downloadQueue.push(e),this.verbose&&(0,s.YK)("image","enqueued-batch",{hash:e.hash})):(this.markImageMissing(e.hash),this.verbose&&(0,s.YK)("image","missing",{hash:e.hash})),this.incomingImages.delete(e.hash)}}}finally{for(let t of e)this.incomingImages.delete(t.hash)&&(0,s.Cp)("image","incoming fallback delete",{hash:t.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}this.maybeDownloadMoreImages()}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,s.YK)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let t=this.allImages.get(e);t&&(this.allImages.delete(e),3!==t.state&&t.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,s.YK)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,a.P)(),this.verbose&&(0,s.YK)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let t=performance.now()-e;this.verbose?(0,s.YK)("image","queue empty defer cleared",{start:e,elapsed:t}):t>1e4&&(0,s.Cp)("image","queue empty finished after a long time",{start:e,elapsed:t})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,a.P)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,t,r){setTimeout(()=>{if(e===this.imageQueueEmpty){let n=Math.round(.001*(performance.now()-t));(0,s.Cp)("image","queue empty is taking a long time",{elapsedSec:n,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,s.YK)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes}),this.emptyQueueCheck(e,t,Math.min(2*r,9e5))}},r)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let t of this.progressCallbacks)t(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,s.YK)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){var e;0===this.incomingImages.size&&(null==(e=this.incomingImagesLookedUp)||e.resolve())}async loadAllImagesUnder(e,t,r,n=null,i){let a=performance.now();this.verbose&&(0,s.YK)("image","loadAllImagesUnder",{reason:r,guids:e,start:a});let o=e.includes("0:0");o&&(this.verbose&&(0,s.YK)("image","waitForAllPages start"),await (0,h.bM)(),this.verbose&&(0,s.YK)("image","waitForAllPages done"));let l=0,c=new Promise(r=>{let a=i??m.GZy.getMutableActiveDocument(),o=m.Uv3.findImagesUnder(a,e,t),s=o.map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&3!==e.state&&2!==e.state);if(0===(l=s.length))r();else{var c;let e=l;for(let t of(c=e,n&&n(c,l),s))this.setImageDownloadPriority(t.hash,v.MAX_PRIORITY),t.readyPromise().finally(()=>{var t;t=--e,n&&n(t,l),0===e&&r()})}});await c}async loadImageByHash(e){this.verbose&&(0,s.YK)("image","loadImageByHash",{hash:e}),this.setImageDownloadPriority(e,v.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,s.Cp)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,t,r,n){if(this.pendingUploads.has(n))return;this.pendingUploads.add(n);let i=new v(n,0);i.state=2,this.allImages.set(n,i);let a=`/api/upnode/image?purpose=canvas&sha1=${n}&fileKey=${e}`,o=0;d.ZP.post(a,t,{retryCount:1/0,headers:{...d.ZP.defaults.headers,"Content-Type":r},rawBody:!0,uploadEvents:{loadstart:()=>{i.retries=o,o+=1}}}).then(e=>{if(200!==e.status){(0,s.YD)("image","unexpected status code from image upload",{hash:n,status:e.status},{reportAsSentryError:!0});return}(0,s.YK)("image","uploaded new image",{hash:n}),this.pendingUploads.delete(n),m.Uv3.imageUploadFinished(n,m.DnI.SUCCESS),i.state=3,this.uploadedImagesNeedingUrl.add(n),this.maybeResolveImagesUploaded()},e=>{let t;415===e.status?((0,s.YD)("image","image upload failed, removing invalid image",{hash:n}),t=m.DnI.UNSUPPORTED_MEDIA):t=m.DnI.OTHER_FAILURE,this.pendingUploads.delete(n),m.Uv3.imageUploadFinished(n,t),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let t of this.pendingUploads){let r=this.allImages.get(t);r&&r.retries>0&&e.add(t)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){var e;if(0===this.pendingUploads.size){null==(e=this.allImagesUploaded)||e.resolve();let t=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let e=0;e<t.length;e+=this.SINATRA_BATCH_SIZE){let r=t.slice(e,e+this.SINATRA_BATCH_SIZE),n=await this.resolveImageUrls(r);for(let e of r){let t=n[e];if(t){let r=this.allImages.get(e);if(r)r.s3Path=t;else{let r=new v(e,0);r.s3Path=t,r.state=3,this.allImages.set(e,r)}}}}}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,a.P)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let t of e){let e=this.allImages.get(t),r=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let t of e)r.add(t);(0,s.YK)("ImageManager","Blocking image info",{hash:t,state:e?e.state:"NO IMAGE",inIncoming:t in this.incomingImages,inQueue:null!=this.downloadQueue.find(t),inPending:t in this.pendingDownloads,inFinished:t in this.alreadyDownloaded,inPendingRecord:t in r})}let[t,r]=this.pendingUploadStats(),n=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),i=Array.from(this.pendingDownloads).join(","),a=Array.from(this.alreadyDownloaded).join(","),o=this.downloadQueue.debugString(),l=Array.from(t).join(","),c=Array.from(r).join(",");(0,s.YK)("ImageManager","ImageManager debug info",{incomingImages:n,downloadQueue:o,pendingDownloads:i,alreadyDownloaded:a,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=m.Uv3.getImageResourceDebugInfo(),t=new Map;return e.forEach(e=>{var r;t.set(e.hash,{...e,tsState:null==(r=this.allImages.get(e.hash))?void 0:r.state})}),this.allImages.forEach((e,r)=>{t.has(r)||t.set(r,{hash:r,tsState:e.state})}),t}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}}let T=new class{constructor(){this.imageManager=new I}copyImagePermissions(e,t){return this.imageManager.recordImages(e,t)}setImageDownloadPriority(e,t){this.imageManager.setImageDownloadPriority(e,t)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,t){this.imageManager.clearImageDecodePending(e,t)}async downloadEmoji(e){let t=await d.ZP.crossOriginGetAny(e,null,{responseType:"arraybuffer"});return t.data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,t,r,n){this.imageManager.startUploadingImage(e,t,r,n)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,t){this.imageManager.setExternalSource(e,t)}};function w(){return T.imageManager}async function S(e,t){let r=!!I.includeOutsideContents(t);await w().loadAllImagesUnder([r?e.containingCanvas||"-1:-1":e.guid],m.bcd.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,u.Gx)(S)},81578:(e,t,r)=>{r.d(t,{$8:()=>h,FK:()=>d,H7:()=>p,eW:()=>u,rn:()=>m});var n=r(764850),i=r(93213),a=r(835409);let o={place:r(538408),"crop-image":r(466228),"expand-image":r(974441),"upscale-image":r(307879),"remove-background":r(889),"create-section-from-selection":r(405556),"add-selection-ready-status":r(219371),"remove-selection-ready-status":r(219371),"export-selected-exportables":r(321783),"live-boolean-intersect":r(553435),"live-boolean-subtract":r(453026),"live-boolean-union":r(799599),"live-boolean-xor":r(835262),"mask-selection":r(931221),"request-edit-mode-via-toolbar":r(253965),"toggle-menu":r(926388),"toggle-pixel-preview":r(184661),"toggle-show-resolved-comments":r(458085),"zoom-in":r(818885),"zoom-out":r(395382),"align-bottom":r(785277),"align-horizontal-center":r(286189),"align-left":r(858456),"align-right":r(655326),"align-top":r(160676),"align-vertical-center":r(666784),"distribute-horizontal-spacing":r(582976),"distribute-vertical-spacing":r(675554),"flatten-selection":r(508492),"create-symbol":r(284182),"reset-symbol":r(25248),"add-variant":r(224178),"focus-mode-component-set-toggle":r(52293),"text-edit-hyperlink":r(265087),"component-insert":r(52488),"present-as-prototype":r(699465),"present-slides-audience-view":r(170421),"present-slides-presenter-view":r(327554),"toggle-inline-preview":r(669575),"toggle-inline-html-preview":r(613736)},l={"component-insert":r(816777)},s=r(699867),c=e=>e===i.Fd.action&&(0,a.nI)();function d(e){return c(e)?s:o[e]}function u(e){return c(e)?null:l[e]}function p(e){switch(e){case n.UAh.NONE:break;case n.UAh.SELECT:return r(964121);case n.UAh.HAND:return r(809443);case n.UAh.COMMENTS:return r(379725);case n.UAh.DROPPER_COLOR:break;case n.UAh.FRAME:return r(876471);case n.UAh.STACK:return r(933756);case n.UAh.SLICE:return r(289277);case n.UAh.SECTION:return r(582221);case n.UAh.SHAPE_STAR:return r(584906);case n.UAh.SHAPE_LINE:return r(8821);case n.UAh.SHAPE_ARROW:return r(125230);case n.UAh.SHAPE_ELLIPSE:return r(858731);case n.UAh.SHAPE_RECTANGLE:return r(834956);case n.UAh.SHAPE_REGULAR_POLYGON:return r(740478);case n.UAh.SHAPE_WHITEBOARD_SQUARE:return r(834956);case n.UAh.SHAPE_WHITEBOARD_ELLIPSE:return r(858731);case n.UAh.SHAPE_WHITEBOARD_DIAMOND:return r(621590);case n.UAh.SHAPE_WHITEBOARD_TRIANGLE_UP:return r(740478);case n.UAh.SHAPE_WHITEBOARD_TRIANGLE_DOWN:return r(552200);case n.UAh.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE:return r(980122);case n.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT:return r(884219);case n.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT:return r(860123);case n.UAh.SHAPE_WHITEBOARD_ENG_DATABASE:return r(394116);case n.UAh.SHAPE_WHITEBOARD_ENG_QUEUE:return r(903988);case n.UAh.SHAPE_WHITEBOARD_ENG_FILE:return r(367500);case n.UAh.SHAPE_WHITEBOARD_ENG_FOLDER:return r(980849);case n.UAh.SHAPE_WHITEBOARD_TRAPEZOID:return r(557811);case n.UAh.SHAPE_WHITEBOARD_SHIELD:return r(694384);case n.UAh.SHAPE_WHITEBOARD_HEXAGON:return r(51737);case n.UAh.SHAPE_WHITEBOARD_PENTAGON:return r(303637);case n.UAh.SHAPE_WHITEBOARD_OCTAGON:return r(774453);case n.UAh.SHAPE_WHITEBOARD_PLUS:return r(863833);case n.UAh.SHAPE_WHITEBOARD_PREDEFINED_PROCESS:return r(850857);case n.UAh.SHAPE_WHITEBOARD_MANUAL_INPUT:return r(888538);case n.UAh.SHAPE_WHITEBOARD_CHEVRON:return r(101912);case n.UAh.SHAPE_WHITEBOARD_DOCUMENT_SINGLE:return r(630152);case n.UAh.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE:return r(324628);case n.UAh.SHAPE_WHITEBOARD_ARROW_LEFT:return r(406180);case n.UAh.SHAPE_WHITEBOARD_ARROW_RIGHT:return r(92315);case n.UAh.SHAPE_WHITEBOARD_SUMMING_JUNCTION:return r(73709);case n.UAh.SHAPE_WHITEBOARD_OR:return r(756821);case n.UAh.SHAPE_WHITEBOARD_SPEECH_BUBBLE:return r(144494);case n.UAh.SHAPE_WHITEBOARD_INTERNAL_STORAGE:return r(959199);case n.UAh.VECTOR_PEN:return r(856684);case n.UAh.VECTOR_PENCIL:return r(801223);case n.UAh.ERASER:return r(772900);case n.UAh.VECTOR_BEND:return r(172616);case n.UAh.VECTOR_PAINT_BUCKET:return r(209919);case n.UAh.TYPE:return r(395500);case n.UAh.SCALE:return r(545247);case n.UAh.STICKY:return r(919250);case n.UAh.STAMP:return r(522652);case n.UAh.CONNECTOR_ELBOWED:return r(822145);case n.UAh.CONNECTOR_STRAIGHT:return r(672651);case n.UAh.CODE_BLOCK:return r(876471);case n.UAh.WASHI_TAPE:return r(616654);case n.UAh.TABLE:return r(947258);case n.UAh.ANNOTATE:return r(429690);case n.UAh.MEASURE:return r(483553)}return null}let m=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),h=40},171531:(e,t,r)=>{let n;r.d(t,{XK:()=>h,rm:()=>g,vX:()=>n});var i=r(50029),a=r(627559),o=r(522494),l=r(596805),s=r(217421),c=r(376595),d=r(344668),u=r(465268);let p="None",m={ALT:256,META:512,SHIFT:1024,CONTROL:2048,RIGHTALT:4096},h=e=>{let t=[];return 2048&e.modifierMask&&t.push("Control"),256&e.modifierMask&&t.push("Alt"),1024&e.modifierMask&&t.push("Shift"),512&e.modifierMask&&t.push("Meta"),4096&e.modifierMask&&t.push("RightAlt"),e.key!==p&&t.push(e.key),t.join("+")};class _{constructor(e){this.getFullscreenMenuItem=e=>{var t;let r=null==(t=this.store)?void 0:t.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let n=(0,l.aH)(r),i=(0,l.eF)(r,{isRecovery:!1,fullscreenMemoryWarningLevel:d.H5.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:n}),o=(0,a.Q)({appModel:r.mirror.appModel,extensionMenuProps:n,includeDisabled:!1}),s=new c.Y(r.mirror.appModel,r.selectedView,[...i,...o]);return s.getItem(r.mirror.appModel,e)},this.getCallback=e=>{var t;let r=this.getFullscreenMenuItem(e);return r&&r.callback&&(null==(t=this.store)?void 0:t.dispatch)?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,o.iv)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store)return[];let{userFlags:e}=this.store.getState(),t=s.Sw.customKeyboardShortcuts.getEffectiveValue(e);if(!t)return[];let r=(0,i.f8)(),n=[];return Object.entries(r).forEach(([e,{type:t,action:r}])=>{let a;try{a=this.getKeyboardShortcutFromText(e,null)}catch(e){a=null}let o=i.Jc.get(t);if(null===a||void 0===o){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:o,text:e});return}n.push({keyboardShortcut:a,type:o,action:r})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:r,shortcuts:n}),n}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let t=this.getCallback(e);return!!t&&(t(),!0)}getDisplayStringFromKey(e){let t=u.x.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return t?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return t?"\u2325":"Alt";case"SHIFT":return t?"\u21E7":"Shift";case"META":return t?"\u2318":u.x.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,t){let r=p,n=0,i=e.split("+");for(let e of(i.length>0&&""===i[i.length-1]&&(i.pop(),i.length>0&&(i[i.length-1]=i[i.length-1]+"+")),i)){if(""===e)continue;let t=m[e.toUpperCase()];if(e===p||t&&(n&t)>0)return null;if(t&&(7936&t)!=0)n|=t;else{if(r!==p)return null;r=e}}return r===p&&0===n?null:{key:r,modifierMask:n,originalText:e,displayName:t}}getTextFromKeyboardShortcut(e){let t=u.x.isApple(),r=e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null,n=r??e,i=[];return 2048&n.modifierMask&&i.push(this.getDisplayStringFromKey("Control")),256&n.modifierMask&&i.push(this.getDisplayStringFromKey("Alt")),1024&n.modifierMask&&i.push(this.getDisplayStringFromKey("Shift")),512&n.modifierMask&&i.push(this.getDisplayStringFromKey("Meta")),4096&n.modifierMask&&i.push(this.getDisplayStringFromKey("RightAlt")),n.key!==p&&i.push(this.getDisplayStringFromKey(n.key)),t?i.join(""):i.join("+")}}function g(e){n=new _({store:e})}},759615:(e,t,r)=>{r.d(t,{Dd:()=>f,PS:()=>B,Rj:()=>P,U8:()=>N,Uy:()=>x,X0:()=>b,b5:()=>O,dt:()=>m,eB:()=>S,gt:()=>_,n3:()=>T,oN:()=>k,oS:()=>y,qZ:()=>H,wC:()=>G,wV:()=>M});var n=r(652983),i=r(407908),a=r(768358),o=r(716250),l=r(954109),s=r(451573),c=r(112088),d=r(572333),u=r(961215);let{action:p,reducer:m}=(0,s.UF)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:h,reducer:_}=(0,s.UF)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:g,reducer:f}=(0,s.UF)("SYNC_PUBLISHABLE_STYLES",[]),{action:E,reducer:y}=(0,s.UF)("SYNC_PUBLISHABLE_MODULES",[]),{action:v,reducer:b}=(0,s.UF)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:I,reducer:T}=(0,s.UF)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:w,reducer:S}=(0,s.UF)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:C,reducer:O}=(0,s.UF)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:A,reducer:N}=(0,s.UF)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:L,reducer:P}=(0,s.UF)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:R,reducer:k}=(0,s.UF)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:D,reducer:M}=(0,s.UF)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:F,reducer:x}=(0,s.UF)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:U,reducer:B}=(0,s.UF)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:V,reducer:G}=(0,s.UF)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]);function H(){let e=(0,o.BZ)().dse_editor_templates_v1,t=(0,i.oR)();n.useEffect(()=>(function(e){let t=()=>(0,c.Ar)(e),r=(0,a.P)(t),n="normal",i=e.subscribe(()=>{let{activeUserAction:r,multiplayerSessionState:i}=e.getState().mirror.appModel,a=function(e){switch(e){case u.f5F.DEFAULT:case u.f5F.SELECTING_TEXT:case u.f5F.CLICKING_TO_CHANGE_SELECTION:return!1;case u.f5F.DRAGGING:case u.f5F.RESIZING:case u.f5F.ROTATING:return!0}}(r)||i===u.hKT.DETACHED;"normal"===n&&a?n="paused":"paused"!==n||a?"enqueued"!==n||a||(t(),n="normal"):n="normal"}),{publishableSymbols:l,publishableStateGroups:s,publishableStyles:d,publishableModules:m}=u.O$1.libraryAssets(),_=W(e,[{observable:l,action:p},{observable:s,action:h},{observable:d,action:g},...(0,o.BZ)().dse_editor_templates_v1?[{observable:m,action:E}]:[]],()=>{"normal"===n?r():n="enqueued"});return()=>{_(),i(),r.cancel()}})(t),[t,e]),n.useEffect(()=>(function(e){let{subscribedSymbols:t,subscribedStateGroups:r}=u.O$1.libraryAssets();return W(e,[{observable:t,action:v},{observable:r,action:w}],()=>e.dispatch((0,l.rS)()))})(t),[t]),n.useEffect(()=>(function(e){let{localSymbolsThatHaveUsages:t,directlySubscribedStyles:r,indirectlySubscribedStyles:n,localStylesThatHaveUsages:i}=u.O$1.libraryAssets();return W(e,[{observable:r,action:A},{observable:n,action:R},{observable:t,action:D},{observable:i,action:U}])})(t),[t]),n.useEffect(()=>(function(e){let{subscribedSymbolsOnCurrentPage:t,subscribedStateGroupsOnCurrentPage:r,directlySubscribedStylesOnCurrentPage:n,localSymbolsThatHaveUsagesOnCurrentPage:i,localStylesThatHaveUsagesOnCurrentPage:a}=u.O$1.libraryAssets();return W(e,[{observable:t,action:I},{observable:r,action:C},{observable:n,action:L},{observable:i,action:F},{observable:a,action:V}])})(t),[t])}function W(e,t,r){let n=[];for(let{observable:i,action:a}of t)e.dispatch(a(i.getCopy())),null==r||r(),n.push((0,d.hn)(i,{onChangeDeferred:()=>{e.dispatch(a(i.getCopy())),null==r||r()}}));return()=>{for(let e of n)e()}}},640723:(e,t,r)=>{r.d(t,{$J:()=>Q,AX:()=>E,Cf:()=>k,Cn:()=>U,De:()=>T,FL:()=>M,Fu:()=>D,Gt:()=>z,KQ:()=>B,MO:()=>I,PL:()=>R,Px:()=>G,Q7:()=>O,UO:()=>Y,V:()=>x,Vx:()=>v,ZL:()=>w,b5:()=>K,cJ:()=>L,cY:()=>y,d6:()=>V,j2:()=>J,kZ:()=>N,ox:()=>W,qC:()=>C,t4:()=>b,tv:()=>H,tx:()=>S,uW:()=>F,w:()=>P,ym:()=>A});var n,i=r(600486),a=r(938414),o=r(46347),l=r(768358),s=r(239299),c=r(98461),d=r(269658),u=r(598271),p=r(765745),m=r(158774),h=r(961215),_=r(840568),g=r(321909),f=r(239461);let E=u.BB(u.AX);function y(e){h.dCf.addToSelection(e)}function v(e){h.dCf.removeFromSelection(e)}function b(e,t=!0){h.dCf.replaceSelection(e,t)}function I(){h.dCf.clearSelection()}function T(e,t){h.dCf.selectNodesInRange(e,t)}function w(e,t,r=h.s2B.SCROLLS){h.dCf.transferSelection(e,t,r),f.WT.reportEditAction("reorder-layers")}function S(e,t,r=h.s2B.SCROLLS){h.dCf.duplicateSelection(e,t,r),f.WT.reportEditAction("duplicate-layers")}function C(e,t){var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.name=t)}function O(e,t){var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.isExpanded=t)}let A=(e,t)=>{var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.isTemporarilyExpanded=t)},N=(e,t)=>{var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=t)},L=(e,t)=>{var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=t)};function P(e,t){var r;let n=null==(r=d.V)?void 0:r.getState().mirror.sceneGraph.get(e);n&&(n.styleDescription=t)}function R(e){h.dCf.expandUpToRoot(e)}function k(e,t){h.dCf.setExpandedRecursive(e,t)}function D(e,t){h.dCf.setSelectionExpanded(e,t)}let M=e=>{var t;null==(t=h.iTB)||t.updateAppModel(e)};function F(e){M({hoveredNode:e})}function x(e){h.O$1.uiState().hoveredComponentPropDef.set(e)}function U(e){M({temporarilyExpandedInstanceLayers:e})}function B(e){M({devHandoffCodeLanguage:e})}function V(e){M({devHandoffPreferences:e})}let G=()=>{var e;return null==(e=h.O$1)?void 0:e.propertiesPanelState().propertiesPanelTab},H=e=>{var t;return null==(t=G())?void 0:t.set(e)};function W(e){M({activeTextReviewPlugin:e})}function K(e,t,r){h.dCf.setNodeLocked(e,t,r)}function z(e,t,r){h.dCf.setNodeVisible(e,t,r)}let Z=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","whiteboardCodeBlockLanguage","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","themeId"];function Y(e,t,r,n,i){a.kU.start("update-selection-properties");try{!function(e,t,r,n,i){var a,l;let s={...e},c=function(e){let t=Object.create(null);for(let r of Z)if(r in e){let n=e[r];n!==_.t1&&(t[r]=n),delete e[r]}return t}(s),d=function(e){let t={guid:{sessionID:0,localID:0}};for(let r in e){let n=e[r];n!==_.t1&&(t[r]=n)}return t}(s);if(n=function(e){switch(e){case g.P7.YES:case g.P7.YES_FORCE_TRACKING_AS_EDIT:case g.P7.YES_WITHOUT_TRACKING_AS_EDIT:return g.P7.YES;default:return g.P7.NO}}(n),null==t?void 0:t.guid){if(c){let e=c.fontFamily&&c.fontStyle;if((0,o.q8)(!e,"UI should never simultaneously update font family and style"),c.fontFamily&&t.fontStyle&&(d.fontName={family:c.fontFamily,style:t.fontStyle,postscript:""}),t.fontFamily&&c.fontStyle&&(d.fontName={family:t.fontFamily,style:c.fontStyle,postscript:""}),c.fontVariations&&(d.fontVariations=c.fontVariations),null==(a=c.variableConsumptionInfo)?void 0:a.variableConsumptionMap){let e=c.variableConsumptionInfo.variableConsumptionMap;d.variableConsumptionMap=(0,g.s)(e)}}let e=p.f.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[d]});null==(l=h.iTB)||l.updateSelectedStyleProperties(e,r,n===g.P7.YES),(0,o.q8)(null!=t.styleType,"unknown style type"),j(t.styleType)}else{let e=p.f.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[d]});h.dCf.updateSelectionProperties(c,r,i,n===g.P7.YES,e)}}(e,t,r,n,i)}catch(e){throw e}finally{a.kU.stop("update-selection-properties")}}let j=(0,l.D)(e=>{(0,i.L9)("Style Edited",{styleType:e})},500),$=Object.create(null);var q=((n=q||{})[n.SceneGraph=0]="SceneGraph",n[n.AppModel=1]="AppModel",n[n.Selection=2]="Selection",n[n.SelectionProperties=3]="SelectionProperties",n);let X=new Set([0,1,2,3]);function J(e=X){e.has(0)&&m.Gr.fromFullscreen.on("sceneGraphMirrorUpdate",ee),e.has(2)&&(m.Gr.fromFullscreen.on("selection:addSelectors",er),m.Gr.fromFullscreen.on("selection:removeSelectors",en),m.Gr.fromFullscreen.on("selection:replaceSelectors",ei)),e.has(1)&&m.Gr.fromFullscreen.on("updateAppModel",ea),e.has(3)&&m.Gr.fromFullscreen.on("selectionPropertiesUpdate",eo)}function Q(){let e=$;return $=Object.create(null),e}function ee(e){(0,o.q8)(!$.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),$.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function et(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function er(e){var t,r,n;(0,o.q8)(!(null==(t=$.selection)?void 0:t.replace),"addSelectors and replaceSelectors called on the same frame"),$.selection||($.selection=Object.create(null)),(r=$.selection).add||(r.add=Object.create(null)),(n=$.selection).userTriggered||(n.userTriggered=e.userTriggered);let i=e.buffer;if(i)for(let e=0;e<i.length;e+=8){let t=et(i,e),r=et(i,e+4),n=u.BB({sessionID:t,localID:r});$.selection.add[n]=!0}}function en(e){var t,r,n;(0,o.q8)(!(null==(t=$.selection)?void 0:t.replace),"removeSelectors and replaceSelectors called on the same frame"),$.selection||($.selection=Object.create(null)),(r=$.selection).remove||(r.remove=Object.create(null)),(n=$.selection).userTriggered||(n.userTriggered=e.userTriggered);let i=e.buffer;if(i)for(let e=0;e<i.length;e+=8){let t=et(i,e),r=et(i,e+4),n=u.BB({sessionID:t,localID:r});$.selection.remove[n]=!0}}function ei(e){var t,r,n,i;(0,o.q8)(!(null==(t=$.selection)?void 0:t.add),"addSelectors and replaceSelectors called on the same frame"),(0,o.q8)(!(null==(r=$.selection)?void 0:r.remove),"removeSelectors and replaceSelectors called on the same frame"),$.selection||($.selection=Object.create(null)),(n=$.selection).replace||(n.replace=Object.create(null)),(i=$.selection).userTriggered||(i.userTriggered=e.userTriggered);let a=e.buffer;if(a)for(let e=0;e<a.length;e+=8){let t=et(a,e),r=et(a,e+4),n=u.BB({sessionID:t,localID:r});$.selection.replace[n]=!0}}function ea({changes:e,shouldIgnoreUserPrefs:t}){if(s.YO){let t={},r={},n="actionEnabled__";for(let i of Object.keys(e))if(i.startsWith(n)){let r=i.substr(n.length);t[r]=e[i].value}else{let t=(0,c.d)(i);if(void 0!==t){let n=e[i].value;for(let{name:e,propertyValue:i}of t.actions)r[e]=n===i}}let i=Object.keys(t).length>0,a=Object.keys(r).length>0;(i||a)&&s.YO.updateFullscreenMenuState({actionEnabledState:i?t:void 0,actionCheckedState:a?r:void 0})}let r=Object.create(null),n=Object.create(null);for(let i in e)r[i]=e[i].value,n[i]=null==t?void 0:t[i];$.appModelChanges={...$.appModelChanges,...r},$.appModelChangesShouldIgnoreUserPrefs={...$.appModelChangesShouldIgnoreUserPrefs,...n}}function eo(e){let t=e.buffer&&e.buffer.length>0?p.f.decodeMessage(e.buffer):null;delete e.buffer,(0,o.q8)(!$.selectionProperties,"Updating selectionProperties multiple times on a frame"),$.selectionProperties={message:t,derivedProperties:e}}},639399:(e,t,r)=>{r.d(t,{Ee:()=>n,TD:()=>o,aP:()=>i,f9:()=>a}),r(641052);let n=e=>{let t=e.selectionProperties.numSelectedByType;return!!(t&&(t.FRAME>0||t.INSTANCE>0||t.SYMBOL>0))},i=e=>Object.keys(e.sceneGraphSelection),a=e=>{var t;let r=e.appModel.currentPage,n=void 0===e.sceneGraph.get(r),i=(null==(t=e.sceneGraph.get(r))?void 0:t.childrenGuids.length)===0;return i&&!n},o=e=>{let t=e.appModel.currentPage,r=e.sceneGraph.get(t);if(!r)return!1;let n=0===r.childrenGuids.length,i=r.childrenAreAllGhosts;return void 0!==r&&!n&&i}},612565:(e,t,r)=>{r.d(t,{A:()=>n,W:()=>i});let n=(e,t)=>{let r=e.get(t);if(!r)return!1;let n=0===r.childrenGuids.length,i=r.childrenAreAllGhosts;return void 0!==r&&!n&&i},i=(e,t)=>{let r=e.get(t),n=(null==r?void 0:r.childrenGuids.length)===0;return n&&void 0!==r}},110044:(e,t,r)=>{r.d(t,{G$:()=>E,H3:()=>y,JX:()=>u,R$:()=>p,Sd:()=>O,Uc:()=>T,Ud:()=>b,_t:()=>v,j2:()=>C,kS:()=>I,wC:()=>f,wc:()=>w});var n=r(716250),i=r(217810),a=r(765745),o=r(158774),l=r(527700),s=r(482979),c=r(840568);let d=196/255,u={r:d,g:d,b:d,a:1},p={r:0,g:0,b:0,a:1},m=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],h=e=>{let t=s.o.identity();return t.translate(.5,.5),e&&(_(e.leftEndCap)||_(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?t.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(t.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?t.rotate(Math.PI/2):e.angle<-135||e.angle>135?t.rotate(Math.PI):e.angle>45&&e.angle<=135&&t.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&t.rotate(Math.PI),e&&e.hasReflection&&t.rotate(Math.PI),t.translate(-.5,-.5),t.toFigMatrix()},_=e=>{if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}},g=null;function f(e){return y(e.type)?e:null}function E(e){return v(e.type)?e:null}function y(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function v(e){return null!=e&&"SOLID"===e}function b(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}let I=e=>!e||(0,c.nK)(e)?null:e.map(b).filter(i.lm),T=e=>Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join(""),w=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,t,r)=>`${r}-${t}-${e}`,this.initPaint=(e,t,r,n,i)=>this.initPaintWithDefaultImagePaint(e,t,r,n,g,i),this.initPaintWithDefaultImagePaint=(e,t,r,i,a,o)=>{let s={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?s.color=t:y(e)?(s.stops=m,s.transform=h(o)):function(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}(e)&&a&&("VIDEO"===e?this.transferVideoAttributes(a,s):this.transferImageAttributes(a,s)),!r)return s;let c=this.cachePaint(r,i);if(this.transferGeneralAttributes(c,s),"SOLID"===e)c.color?this.transferColorAttributes(c,s):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],s);else if(y(e)){if(c.stops)this.transferGradientAttributes(c,s);else if(c.color){let e;if((0,n.BZ)().gradient_tool_improvements){let t=(0,l.he)(c.color),r=t.v>=.5?t.v-.4:t.v+.4;e=(0,l.YN)({...t,v:r})}else e={...c.color,a:0};s.stops=[{position:0,color:{...c.color,a:1}},{position:1,color:e}],(0,n.BZ)().gradient_tool_improvements&&o&&_(o.rightEndCap)&&(s.stops=[{position:0,color:e},{position:1,color:{...c.color,a:1}}])}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,s),s.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,s);return s},this.cachePaint=(e,t)=>(this.cache[t]=this.cache[t]||e,y(e.type)?this.transferGradientAttributes(e,this.cache[t]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[t]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[t]),this.cache[t].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[t]),this.cache[t]),this.transferGeneralAttributes=(e,t)=>{t.opacity=e.opacity,t.blendMode=e.blendMode,t.visible=e.visible},this.transferColorAttributes=(e,t)=>{t.color=e.color},this.transferGradientAttributes=(e,t)=>{t.stops=e.stops,t.transform=e.transform},this.transferImageAttributes=(e,t)=>{t.image=e.image,t.imageThumbnail=e.imageThumbnail,t.animatedImage=e.animatedImage,t.animationFrame=e.animationFrame,t.imageScaleMode=e.imageScaleMode,t.rotation=e.rotation,t.scale=e.scale,t.paintFilter=e.paintFilter,t.imageShouldColorManage=e.imageShouldColorManage,t.video=void 0},this.transferVideoAttributes=(e,t)=>{t.imageThumbnail=e.imageThumbnail,t.animationFrame=e.animationFrame,t.imageScaleMode=e.imageScaleMode,t.rotation=e.rotation,t.scale=e.scale,t.paintFilter=e.paintFilter,t.video=e.video,t.image=void 0},this.clearCache()}},S=!1;function C(){S||(S=!0,o.Gr.fromFullscreen.on("handleDefaultImageStyle",e=>{let t=a.f.decodeMessage(e.buffer);t.nodeChanges&&t.nodeChanges.length>0&&t.nodeChanges[0].fillPaints&&(g=t.nodeChanges[0].fillPaints[0])}),o.Gr.onReady().then(()=>{o.Gr.DEPRECATED_sendMessage("requestDefaultImageStyle")}))}function O(e,t){let r=b(e);if(!r)return e;if("STRETCH"===r.imageScaleMode){let e=s.o.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*t)),e.translate(-.5,-.5),e.multiply(s.o.fromFigMatrix(r.transform)),{...r,transform:e.toFigMatrix()}}return{...r,rotation:r.rotation+t}}},392665:(e,t,r)=>{r.d(t,{BA:()=>z,HZ:()=>O,LH:()=>V,QT:()=>K,S1:()=>ei,XC:()=>X,_2:()=>G,aB:()=>k,ah:()=>W,eH:()=>q,hP:()=>$,hT:()=>F,jk:()=>x,kC:()=>A,lx:()=>M,mp:()=>B,nQ:()=>L,oZ:()=>j,oy:()=>er,qe:()=>U,qf:()=>D,t1:()=>Y,xm:()=>H,xt:()=>Z});var n=r(600486),i=r(938414),a=r(15523),o=r(592416),l=r(716250),s=r(217810),c=r(76085),d=r(613898),u=r(97351),p=r(448694),m=r(158774),h=r(343328),_=r(961215),g=r(55500);let f={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},E=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],y=1,v=!1,b=null,I=0,T=null,w=0,S=-1/0,C=0,O=null,A=null,N=null,L=null,P={},R=!1;function k(e,t){y=e,v=(0,s.lm)(t),O&&O.setMultiplayerPerfInfo({multiplayerUserCount:y,ongoingSpotlight:v})}function D(){b=null,T=null,null==O||O.stopRecordingAndLog("closing-file"),null==O||O.setFileInfo(null,"unknown")}function M(e,t){O&&(O.setFileInfo(e,(0,p.Eg)(t)),O.startRecording(!0),(0,g.lH)().setPendingImagesCallback(O.pendingImagesChanged)),b=e,T=performance.now(),I++;let r=(0,l.Gm)().editing_file;1===I&&r&&(0,n.L9)("Cold Boot Document Load",{fileKey:b,fileVersion:_.ZYh.currentFileVersion(),loadedTime:T,fileNodeCount:_.a5C.getFileNodeCount(),fileTeamId:r.team_id,fileParentOrgId:(0,l.Gm)().org_id})}function F(e){null==O||O.setFileInfo(b,(0,p.Eg)(e))}function x(){null==O||O.stopRecordingAndLog("about-to-rebuild-scene")}function U(){null==O||O.startRecording(!1)}function B(){null==O||O.recordSingleFrameNamedEvent("tileRenderingActive")}function V(){null==O||O.recordSingleFrameNamedEvent("createTableActive")}function G(){null==O||O.recordSingleFrameNamedEvent("editTableTextActive")}function H(){null==O||O.recordSingleFrameNamedEvent("reorderTableSpanActive")}function W(){null==O||O.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function K(){null==O||O.recordSingleFrameNamedEvent("accessibilityDomActive")}function z(){null==O||O.onNodeDragStart()}function Z(){null==O||O.onNodeDragEnd()}function Y(e){null==O||O.onTileRendererChanged(e)}function j(){null==O||O.onContextRestored()}function $(){null==O||O.recordSingleFrameNamedEvent("createStickyActive")}function q(){null==O||O.recordSingleFrameNamedEvent("differentSectionClicked")}function X(e){null==O||O.recordSingleFrameNamedEvent((0,a.pH)(e))}let J=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function Q(e){let{fileKey:t,fileNodeCount:r,multiplayerUserCount:n,ongoingSpotlight:i,recentInteractions:a,secondsSinceLoaded:o,version:l,randomID:s}=e,u={fileKey:t,fileNodeCount:r,multiplayerUserCount:n,ongoingSpotlight:i,secondsSinceLoaded:o,version:l,randomID:s,reportCount:w};for(let e=0;e<a.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(a[e]);return(0,d.l)(e.deviceInfo,u),(0,c.LR)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function ee(e){(0,n.L9)("Slow Editor Interaction",e),S=performance.now(),C=e.duration}function et(...e){}function er(){var e;if(!(null==(e=m.Gr)?void 0:e.isReady()))return;let t={},r=i.kU.report(),n=0;for(let e of r)!function e(r,n=""){let i=n.length>0?`${n}.${r.name}`:r.name,a=P[i]||r.hitCount,o=r.hitCount-a;o>r.elapsedTimes.length&&(R||(console.warn(`Too many elapsed hits of ${i} since last report`),R=!0),o=r.elapsedTimes.length);let l=0,s=r.elapsedTimes.length;for(let e=s-o;e<s;e++)l+=r.elapsedTimes[e];for(let n of(t[i]=l,P[i]=r.hitCount,r.children))e(n,i)}(e),n+=t[e.name];!function(){var e;if(n/1e3<.2)return;let[r,i]=null===b||null===T?[null,[]]:[{deviceInfo:(0,d.d)(),fileKey:b,fileNodeCount:_.a5C.getFileNodeCount(),multiplayerUserCount:y,ongoingSpotlight:v,nodeTypeHistogram:_.a5C.getNodeTypeHistogram(),recentInteractions:_.a5C.getRecentInteractions(),secondsSinceLoaded:(performance.now()-T)/1e3,version:1,randomID:(0,h.N_)(),reportCount:w},_.a5C.getSlowInteractions()];if(null==r)return;let a={};for(let e in t)-1!==E.indexOf(e)&&(a[e]=t[e]/1e3);let o=i.map(e=>{let t=e.interaction,n={kind:"interaction",type:t.type,subtype:t.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...Q(r)};if(J.forEach(e=>n["modifier."+e]=null),"MOUSE"===t.type)for(let e of(n.collapsed=t.collapsed,J))n["modifier."+e]=-1!==t.modifiers.indexOf(e);return(0,c.LR)(a,n,"timer"),n});for(let e in t){let n=t[e]/1e3,i=f[e];if("number"==typeof i&&n>=i){let t={kind:"timer",type:e,subtype:null,frame:null,collapsed:!1,duration:n,...Q(r)};(0,c.LR)(a,t,"timer"),J.forEach(e=>t["modifier."+e]=null),o.push(t)}}if(0===o.length)return;let l=[],s=o,u=60-(performance.now()-S)/1e3;if(0===(s=s.filter(e=>u<=0||e.duration>=2*C)).length&&l.push(`we're in the report cooldown period (${u}s to go) and no reports were long enough to override it (the last report duration was ${C}s)`),u>0&&s.length,null===T)return;let p=60-(performance.now()-T)/1e3;p>0&&l.push(`we're in the document loading cooldown period (${p}s to go)`),l.length>0?1===(e=l).length?e[0]:2===e.length?(e[0],e[1]):(e.slice(0,e.length-1).join(", "),e[2]):((s=s.sort((e,t)=>e.duration-t.duration)).forEach(ee),w++)}(),_.a5C.clearNodeTypeHistogram(),_.a5C.clearSlowInteractions()}function en(e){let t=0,r=0,n=[];for(let i of e)1===i.path.length&&"frame"===i.path[0]?(r=i.elapsedTime,n.push(i)):i.path.length>1&&"frame"===i.path[0]?(t+=i.elapsedTime,n.push(i)):1===i.path.length&&n.push(i);if(t>0){let e=r-t;n.push({path:["frame","unaccounted-time"],elapsedTime:e})}return n}function ei(){if(!O&&(0,l.BZ)().frame_distribution_tracker_edit){let e=e=>{if((0,l.BZ)().optimization_exposure_logging_fs){let t=_.vKn.getAndClearOptimizationExposureLoggingValues(),r=new Map;t.forEach((e,t)=>{r.set(t,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(r))}};(O=new a.BK("editor_frame_distributions",en,2,!0,new u.R,t=>{e(t)})).addEventTracker("zoomActive",new o.rl),O.addEventTracker("panActive",new o.rH),O.addEventTracker("viewportHasGaps",new o.pv(_.twc.DEFINITELY_COVERED_ONLY)),O.addEventTracker("viewportIncludingOutdatedHasGaps",new o.pv(_.twc.DEFINITELY_COVERED_AND_OUTDATED)),O.addEventTracker("multipleMultiplayerUsersInFile",new o.Jq(2,()=>y)),O.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new o.A4(2,()=>y)),O.addEventTracker("viewportHasBlurryRegions",new o.t_(1)),O.addEventTracker("viewportHasVeryBlurryRegions",new o.t_(.5)),O.addEventTracker("viewportIsBlurry",new o.dK(1)),O.addEventTracker("viewportIsVeryBlurry",new o.dK(.5)),O.addEventTracker("timeSlicedEditRenderingActive",new o.VF),O.addEventTracker("stalenessIsHigh",new o.r1(1e3)),O.addEventTracker("stalenessIsVeryHigh",new o.r1(2e3)),O.addEventTracker("moveCursorActive",new o.sp),A=new o.yF,O.addEventTracker("cursorChatActive",A),N=new o.C,O.addEventTracker("cursorReactionActive",N),O.trackOtherUserCursorMoved(),(0,l.BZ)().dt_perf_log_anim&&O.addEventTracker("devModeAnimationActive",new o.Y8),(0,l.BZ)().dt_lego_annotations&&(L=new o.dp,O.addEventTracker("devModeAnnotationsVisible",L))}}},320056:(e,t,r)=>{r.d(t,{D:()=>o,z:()=>a});var n=r(961215);let i=[];function a(e){return i.push(e),()=>{i=i.filter(t=>t!==e)}}function o(e){for(let t of i)t(e===n.yte.YES)}},167492:(e,t,r)=>{r.d(t,{mR:()=>E,qe:()=>y}),r(358375),r(153661),r(387029);let n=r(245121),i=r(819056),a=r(121889),o=r(506853),l=r(949724),s=r(811977),c=r(972053),d=r(108435),u=r(509513),p=r(122285),m=r(632865),h=r(312058),_=r(342081),g=r(81501),f=r(579680);function E(e){switch(e){case"CLOSE_OVERLAY":return n;case"GO_BACK":return p;case"NAVIGATE_TO":default:return m;case"OPEN_OVERLAY":return i;case"OPEN_URL":return d;case"SCROLL_TO":return u;case"SWAP_WITH":return a;case"SWAP_STATE_TO":return h;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return c;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return s;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return o;case"UPDATE_MEDIA_SKIP_TO":return l;case"SET_VARIABLE":case"SET_VARIABLE_MODE":return _;case"CONDITIONAL":return g;case"NONE":return f}}function y(e){return 1===e.numSelected&&!!e.numVideosSelected}},232888:(e,t,r)=>{r.d(t,{Ju:()=>o});var n=r(527700),i=r(641052);let a={r:0,g:86/255,b:65/255,a:1};function o(e){try{return{origin:(0,i.DY)(l,e),destination:(0,i.DY)(s,e)}}catch(e){return console.error(e),{origin:void 0,destination:void 0}}}function l(e){var t,r;return!!e&&"FRAME"===e.type&&"Button"===e.name&&(0,n.lA)(null==(r=null==(t=null==e?void 0:e.fillPaints)?void 0:t.data[0])?void 0:r.color,a)}function s(e){return!!e&&"FRAME"===e.type&&"Frame B"===e.name}},641052:(e,t,r)=>{r.d(t,{DY:()=>I,Dm:()=>function e(t,r,i=[]){let a=t.get(r);for(let r of a.childrenNodes)a&&("CANVAS"===a.type||"SECTION"===a.type)&&a.visible&&(0,n.gy)(r.type)&&r.visible&&("SECTION"===r.type?e(t,r.guid,i):i.push(r));return i},EJ:()=>w,FD:()=>b,Fr:()=>h,G_:()=>o,HR:()=>E,IA:()=>f,OX:()=>u,UL:()=>y,Vy:()=>T,XN:()=>_,dk:()=>c,fB:()=>m,fw:()=>a,im:()=>s,pr:()=>l,qn:()=>p,xl:()=>d,zA:()=>v});var n=r(295206),i=r(424479);function a(e,t,r){if("stop"===r(t))return"stop";for(let n of t.childrenGuids)if("stop"===a(e,e.get(n),r))return"stop"}function o(e,t){var r;return(null==(r=e.get(t))?void 0:r.parentNode)||null}function l(e,t,r){let n=o(e,t);for(;n;){if("CANVAS"===n.type||"DOCUMENT"===n.type)return;if("stop"===r(n))break;n=n.parentNode}}function s(e,t,r){let n=e.get(t);n&&"stop"!==r(n)&&l(e,t,r)}function c(e,t){let r=[];return l(e,t,e=>{r.push(e)}),r}function d(e,t){let r=0,n=e.get(t)||null;for(;n&&"CANVAS"!==n.type&&"DOCUMENT"!==n.type;)r++,n=o(e,n.guid);return r}function u(e,t){let r=new Set(t);return[...r].reduce((t,r)=>(t[r]=function(e,t){if(!t)return null;let r=e.get(t);if(!r)return null;for(;"CANVAS"!==r.type;){let e=r.parentNode;if(!e)break;r=e}return r.guid}(e,r),t),{})}function p(e){return("DOCUMENT"===e||"CANVAS"===e||"GROUP"===e||"FRAME"===e||"SYMBOL"===e||"INSTANCE"===e||"BOOLEAN_OPERATION"===e||"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"TABLE"===e||"TABLE_CELL"===e||"VARIABLE_SET"===e||"MODULE"===e||"SLIDE"===e||"SLIDE_ROW"===e||"SLIDE_GRID"===e)&&!h(e)}function m(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function h(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function _(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name.includes("FigJam Stamp Icon")}function g(e,t){return t&&"CANVAS"===t.type&&t.visible&&(0,n.gy)(e.type)&&e.visible}function f(e,t){let r=[],n=e.get(t);for(let t of n.uiOrderedChildren){let i=e.get(t);g(i,n)&&r.push(i)}return r}function E(e,t){let r=null,n=null;for(let i=0;i<t.length;i++){let a=e.get(t[i]),l=o(e,t[i]);if(a&&l&&g(a,l)){r=t[i],n=i;break}}return{tlfId:r,index:n}}function y(e,t){e.sort((e,r)=>{let n=t(e),i=t(r);return n<i?-1:n>i?1:0})}function v(e,t){let r=null;return l(e,t,e=>{if(!r){if("NONE"!==e.scrollDirection)return r=e,"stop";{let t=e.parentNode;if(t&&g(e,t))return r=e,"stop"}}}),r}function b(e,t){let r=null;return s(e,t,e=>{let t=e.parentNode;t&&t&&("CANVAS"===t.type||"SECTION"===t.type)&&t.visible&&(0,n.gy)(e.type)&&e.visible&&"SECTION"!==e.type&&(r=e)}),r}function I(e,t,r){let n;if(!r){let e=t.getCurrentPage();if(!e)return;r=e}return a(t,r,r=>{if(e(r,t))return n=r,"stop"}),n}function T(e,t){let r=e.createNode("CANVAS");return t&&(r.name=t),e.getRoot().appendChild(r),r}let w=()=>{let e=i.TSSceneGraph.instance,t=[];return a(e,e.getRoot(),e=>{t.push(e.guid)}),t}},279098:(e,t,r)=>{r.d(t,{_:()=>i,z:()=>a});let n=[];function i(e){return n.push(e),()=>{n=n.filter(t=>t!==e)}}function a(e){for(let t of n)t(e)}},601186:(e,t,r)=>{r.d(t,{Nr:()=>f,di:()=>y,dy:()=>v,lg:()=>E});var n=r(600486),i=r(239299),a=r(269658),o=r(638237),l=r(448694),s=r(158774),c=r(147133),d=r(956804),u=r(697654),p=r(808569),m=r(348634),h=r(860851),_=r(293687);let g=new class{constructor(){this._suggestionsCache=new o.z(100),this._textReviewPluginRunner=new h.K,this._currentPromise=null}async setCurrentImplementation(e,t){var r,i;let o=await (0,u.b7)(),s=await (0,u.bq)(),c=(0,u.WP)();await e.initialize(t,[...o,...s,...c]),this._current=e;let d=await (0,u.vD)();console.log(`[spell-check] using implementation: ${null==(r=this._current)?void 0:r.name}. Current language: ${t}. Supported languages: ${d}`);let p=a.V.getState().selectedView,m=(0,l.Eg)(p.editorType);(0,n.L9)("Spell Check Ready",{productType:m,language:t,implementationName:null==(i=this._current)?void 0:i.name,userIgnoreWordsCount:(o||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,u.hU)(),t=(0,m.bM)(e),r=(0,u.YI)(t);switch(e){case _.B1.DESKTOP:await this.setCurrentImplementation(new d.A,r);break;case _.B1.AGENT:await this.setCurrentImplementation(new c.jB,r);break;case _.B1.HUNSPELL:await this.setCurrentImplementation(new p.uz,r)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(t=>(this._suggestionsCache.set(e,t),t))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return h.K.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){var e;return(null==(e=this._current)?void 0:e.name)||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,t){if(e)return!0;try{let e=t.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]),r=e.includes("en")||e.includes("ru");if(!r)return!1}catch(e){}return!0}(!!i.YO,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function f(){return await g.ensureImplementationLoaded(),g._current}async function E(e){return await g.ensureImplementationLoaded(),g._suggestionsCache.reset(),g._current.setLanguage(e)}async function y(e){await E((0,u.YI)(e)),s.Gr&&s.Gr.triggerAction("redo-spell-checking")}let v=g},992750:(e,t,r)=>{r.d(t,{CO:()=>s,EX:()=>l,Pe:()=>m,So:()=>o,fF:()=>u,gY:()=>p,kI:()=>d,lS:()=>a,pz:()=>c,tl:()=>h});var n,i=r(297296),a=((n=a||{}).NONE="NONE",n.FILL="FILL",n.STROKE="STROKE",n.TEXT="TEXT",n.EFFECT="EFFECT",n.GRID="GRID",n);let o=e=>{switch(e){case"inheritTextStyleKey":return"TEXT";case"inheritFillStyleKey":case"inheritFillStyleKeyForStroke":return"FILL";case"inheritEffectStyleKey":return"EFFECT";case"inheritGridStyleKey":return"GRID";case"inheritExportStyleKey":return"EXPORT"}};function l(e){switch(e){case"NONE":default:return[];case"FILL":return["inheritFillStyleKey","inheritFillStyleKeyForStroke"];case"TEXT":return["inheritTextStyleKey"];case"EFFECT":return["inheritEffectStyleKey"];case"GRID":return["inheritGridStyleKey"]}}function s(e){switch(e){case"NONE":default:return null;case"FILL":return"inheritFillStyleKey";case"TEXT":return"inheritTextStyleKey";case"EFFECT":return"inheritEffectStyleKey";case"GRID":return"inheritGridStyleKey"}}let c={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},d={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function u(e){return!!(null==e?void 0:e.key)}function p(e){return e.startsWith("S:")}function m(e){return e&&u(e)?`S:${e.key},${e.version||""}`:""}function h(e){if(!e||!p(e))return null;let t=e.substring(2).split(",");if(!t||2!==t.length)return null;let r=(0,i.hx)(t[0]),n=(0,i.IT)(t[1]);return r===i.hx.INVALID?null:{key:r,version:n}}},21616:(e,t,r)=>{r.d(t,{Bz:()=>g,HW:()=>h,Km:()=>c,N0:()=>s,VI:()=>m,X3:()=>d,Ze:()=>f,dk:()=>_,rr:()=>p});var n=r(523495),i=r(765745),a=r(961215),o=r(158774),l=r(92410);function s(e,t){let r={guid:{sessionID:0,localID:0}};switch(t){case a.Rmy.STROKE:case a.Rmy.STROKE_PRESET:r.strokePaints=[e];break;case a.Rmy.FILL:default:r.fillPaints=[e]}return i.f.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[r]})}function c(e,t,r){let n=s(e),i={x:t.x,y:t.y},a={size:i};r&&(a.backgroundColor=r);let l=o.Gr.DEPRECATED_sendMessage("requestPaintIcon",a,n);if(!(null==l?void 0:l.args))return null;let{pixelSize:c,displaySize:d}=l.args;return l.buffer&&c&&d?{pixels:l.buffer,pixelSize:c,displaySize:d}:null}function d(e,t,r){let n=s(e,r),i=new Uint8Array(t.buffer);return a.io9.updateStillImageAndSelectionPropertiesForGIF(n,i)}function u(e){if(!e||!e.args)return null;let{pixelSize:t,displaySize:r}=e.args;return e.buffer&&t&&r?{pixels:e.buffer,pixelSize:t,displaySize:r}:null}function p(e,t,r,n){let i={size:{x:e.x,y:e.y},nodeId:t,contentsOnly:r,background:n},a=o.Gr.DEPRECATED_sendMessage("requestExportThumbnail",i,null);return u(a)}function m(e,t){let r={x:e.x,y:e.y},n=o.Gr.DEPRECATED_sendMessage("requestExportPreview",{size:r,settings:{useAbsoluteBounds:t}},null);return u(n)}let h=e=>{let t=o.Gr.DEPRECATED_sendMessage("requestObjectsPanelIcon",{nodeId:e});return t&&t.buffer?n.CZ(t.buffer):""};function _(e,t,r){let n=document.createElement("canvas"),i=r?n.getContext("2d",{colorSpace:(0,l.gr)(r)}):n.getContext("2d");n.width=t.x,n.height=t.y;let a=i.createImageData(t.x,t.y);return a.data.set(e),i.putImageData(a,0,0),n}function g(e){let t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;let r=t.getContext("2d");return r.drawImage(e,0,0),t}function f(e,t,r){let n=_(e,t,r);return n.toDataURL()}},424479:(e,t,r)=>{let n;r.d(t,{Hx:()=>g,Ix:()=>_,JY:()=>f,Sj:()=>d,TSSceneGraph:()=>p,cJ:()=>c,dj:()=>n,r3:()=>s,z_:()=>h});var i,a=r(765745),o=r(961215),l=r(295206);let s=1;var c=((i=c||{}).CURRENT="CURRENT",i.HISTORY="HISTORY",i.DETACHED="DETACHED",i.PLAYGROUND="PLAYGROUND",i);let d=()=>{n=void 0},u=class{constructor(e){this.get=e=>m(e,this.scene,!0),this.getFromStablePath=e=>{let t=o.evj.setGlobalUnstableNodeByStablePath(this.scene,e,o.syY.REDUX);return o.io9.exists(o.syY.REDUX)&&t?m(t,this.scene,!1):null},this.getRoot=()=>m("0:0",this.scene,!1),this.getInternalCanvas=()=>{if(this.sceneType&&"CURRENT"!==this.sceneType)throw Error("TSSceneGraph.getInternalCanvas - Not implemented except for current document");let e=o.io9.getInternalCanvas(o.syY.REDUX);return e?m(e,this.scene,!1):null},this.changeListeners=new Set,this.addListeners=new Set,this.deleteListeners=new Set,this.revisionNumber=0,this.sceneType=e}get scene(){switch(this.sceneType){case"DETACHED":return o.iTB.getDetachedComponentsScene();case"HISTORY":return o.GZy.getDocumentByIndex(s);case"PLAYGROUND":return o.iTB.getPlaygroundScene();default:return o.GZy.getActiveDocument()}}getCurrentPage(){if(this.sceneType&&"CURRENT"!==this.sceneType)throw Error("TSSceneGraph.getCurrentPage - Not implemented except for current document");let e=o.io9.getCurrentPage(o.syY.REDUX);return e?m(e,this.scene,!1):null}async setCurrentPageAsync(e){if(this.sceneType&&"CURRENT"!==this.sceneType)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let t=new Promise(e=>{n=e});o.io9.setCurrentPageAsync(e,o.syY.REDUX);let r=await t;if(r)throw Error(r)}async setCurrentPageFromNodeAsync(e){if(this.sceneType&&"CURRENT"!==this.sceneType)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let t=new Promise(e=>{n=e});o.io9.setCurrentPageFromNodeAsync(e,o.syY.REDUX),await t}createNode(e,t=o.zPy.TRACK){if(this.sceneType&&"CURRENT"!==this.sceneType)throw Error("Can only create nodes in the current document");let r=o.io9.createNode(a.f.NodeType[e],{tracking:t},o.syY.REDUX);if(!r)throw Error(`Cannot create node with type ${e}`);return m(r,o.GZy.getActiveDocument(),!1)}guidFromDeveloperFriendlyId(e){return o.Cj$.guidFromDeveloperFriendlyId(e,this.scene)}developerFriendlyIdFromGuid(e){return o.Cj$.developerFriendlyIdFromGuid(e,this.scene)}onChange(e){if(this.changeListeners)return this.changeListeners.add(e),()=>{var t;return null==(t=this.changeListeners)?void 0:t.delete(e)};throw Error("TSSceneGraph changeListeners not found")}onAdd(e){if(this.addListeners)return this.addListeners.add(e),()=>{var t;return null==(t=this.addListeners)?void 0:t.delete(e)};throw Error("TSSceneGraph addListeners not found")}onDelete(e){if(this.deleteListeners)return this.deleteListeners.add(e),()=>{var t;return null==(t=this.deleteListeners)?void 0:t.delete(e)};throw Error("TSSceneGraph deleteListeners not found")}triggerChange(){if(void 0!==this.revisionNumber&&(this.revisionNumber+=1),this.changeListeners)for(let e of this.changeListeners)e();else throw Error("TSSceneGraph listeners not found")}triggerAddCallbacks(e){if(this.addListeners)for(let t of this.addListeners)t(e);else throw Error("TSSceneGraph addListeners not found")}triggerDeleteCallbacks(e){if(this.deleteListeners)for(let t of this.deleteListeners)t(e);else throw Error("TSSceneGraph deleteListeners not found")}},p=u;function m(e,t,r){let n=(0,l.GT)(e,0),i=(0,l.GT)(e,e.indexOf(":")+1);return r&&(o.evj.setGlobalUnstableNodeByID(t,n,i,o.syY.REDUX),!o.io9.exists(o.syY.REDUX))?null:new l.dc(t,e,n,i,o.syY.REDUX)}function h(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}function _(e){return("FRAME"===e.type||"SYMBOL"===e.type||"SECTION"===e.type)&&!e.resizeToFit}p.instance=new u;let g="-1:-1";function f(e){return e!==g}},764850:(e,t,r)=>{r.d(t,{$YG:()=>n.$YG,AGs:()=>n.AGs,AgT:()=>n.AgT,B9x:()=>n.B9x,E$G:()=>n.E$G,I7V:()=>n.I7V,Kb2:()=>n.Kb2,M6J:()=>n.M6J,Mk1:()=>n.Mk1,N4G:()=>n.N4G,NQw:()=>n.NQw,Nho:()=>n.Nho,Nw4:()=>n.Nw4,O$1:()=>n.O$1,QC$:()=>n.QC$,QIK:()=>n.QIK,QJA:()=>n.QJA,RDh:()=>n.RDh,Rmy:()=>n.Rmy,SS5:()=>n.SS5,TG8:()=>n.TG8,UAh:()=>n.UAh,UMq:()=>n.UMq,X9P:()=>n.X9P,XMT:()=>n.XMT,Xft:()=>n.Xft,__5:()=>n.__5,bN1:()=>n.bN1,bhu:()=>n.bhu,cGt:()=>n.cGt,caZ:()=>n.caZ,dCf:()=>n.dCf,dxT:()=>n.dxT,f5F:()=>n.f5F,fjq:()=>n.fjq,gYv:()=>n.gYv,hKT:()=>n.hKT,iTB:()=>n.iTB,k8B:()=>n.k8B,kZC:()=>n.kZC,lhE:()=>n.lhE,n$W:()=>n.n$W,o1t:()=>n.o1t,oum:()=>n.oum,pRH:()=>n.pRH,qVx:()=>n.qVx,qzo:()=>n.qzo,vT4:()=>n.vT4,wPU:()=>n.wPU,xAX:()=>n.xAX,xTW:()=>n.xTW,zor:()=>n.zor,zrQ:()=>n.zrQ});var n=r(961215)},356757:(e,t,r)=>{r.d(t,{rV:()=>o,xP:()=>l});var n=r(961215),i=r(220949);let a=null,o="Upsell Libraries Valid Paste For Nudge";function l(e,t){a&&a.pasteID===e&&a.fileKey===t?a.offset=a.offset+1:a={pasteID:e,fileKey:t,offset:1},2===a.offset&&n.iTB.shouldNudgeComponentCreationForSelection()&&(0,i.m_)({id:o})}},638082:(e,t,r)=>{r.d(t,{XD:()=>l,bM:()=>o,xF:()=>a});var n=r(407908);r(365653);var i=r(605508);function a(e){let t=(0,n.v9)(t=>(0,i.jA)(t.mirror.appModel,e));return t}function o(e){return(0,n.v9)(t=>e.every(e=>(0,i.jA)(t.mirror.appModel,e)))}function l(e){return(0,n.v9)(t=>e.some(e=>(0,i.jA)(t.mirror.appModel,e)))}},598910:(e,t,r)=>{r.d(t,{A0:()=>l,C1:()=>c,Ip:()=>s});var n=r(652983),i=r(365653),a=r(158774),o=r(321909);function l(e){return(0,i.c)(t=>t.mirror.selectionProperties[e])}function s(e){return n.useCallback((t,r=o.P7.YES)=>{a.Gr.updateSelectionProperties({[e]:t},{shouldCommit:r})},[e])}function c(e){return[l(e),s(e)]}},492459:(e,t,r)=>{r.d(t,{$D:()=>$,AM:()=>v,AS:()=>L,Dd:()=>O,EA:()=>P,EH:()=>w,GE:()=>J,GF:()=>T,H2:()=>q,MQ:()=>G,Mt:()=>Y,OW:()=>X,Qh:()=>R,SW:()=>F,VH:()=>K,XM:()=>M,Zx:()=>k,dG:()=>z,dg:()=>D,j3:()=>B,nG:()=>A,o:()=>C,rN:()=>I,rd:()=>N,tz:()=>Z,ut:()=>x,wu:()=>S,x3:()=>b,xg:()=>W,xw:()=>V});var n=r(652983),i=r(262923),a=r.n(i),o=r(598271),l=r(626650),s=r(337167),c=r(925705),d=r(217810),u=r(297296),p=r(166885),m=r(435189),h=r(957086),_=r(33468),g=r(200273),f=r(485091),E=r(161939),y=r(961215);function v(e){let t=(0,s.Dv)(_.Ru);return j(t[e]??[])}function b(e){return(0,s.Dv)((0,_.V3)(e))}function I(){let e=(0,s.Dv)(_.EG);return e}function T(){S(),w(),C(),O(),A(),(0,s.Dv)(_.WD)}function w(){let e=(0,s.Dv)(_.x8),t=j(e);return t}function S(){let e=(0,s.Dv)(_.Pk),t=j(e);return t}function C(){let e=(0,s.Dv)(_.Nt);return e}function O(){let e=(0,s.Dv)(_.gL);return e}function A(){let e=(0,s.Dv)(_._7);return e}function N(e){return(0,s.Dv)((0,_.ym)(e))}function L(e){let t=(0,n.useMemo)(()=>e?(0,_.Im)(e):(0,s.cn)(null),[e]),r=(0,s.Dv)(t);if(r)return r;if(!e)return;let i=y.pZy.getSubscribedVariableSetInfo(e);if(i)return(0,p.yN)(i)}function P(e){let t=(0,n.useMemo)(()=>(0,_.jU)(e),[e]);return(0,s.Dv)(t)??null}function R(e,t){var r;let n=function(e){let t=e?(0,_.wD)(e):(0,s.cn)(null);return(0,s.Dv)(t)}(e);return(null==(r=null==n?void 0:n.modeValues)?void 0:r[t])??void 0}function k(e,t){var r,n;return(null==(n=null==(r=F(e))?void 0:r.modeValues)?void 0:n[t])??void 0}function D(e){let t=(0,l.O4)(()=>e,[e]),r=(0,n.useMemo)(()=>(0,s.cn)(e=>t.map(t=>(0,d.lm)(t)?e(_.N0)[t]??null:null)),[t]);return(0,s.Dv)(r)}function M(e){var t;let r=null==(t=F(e))?void 0:t.name;return r||(e?y.pZy.getVariableNameInStyleSelection(e)??void 0:void 0)}function F(e){let t=(0,n.useMemo)(()=>e?(0,_.Md)(e):(0,s.cn)(null),[e]),r=(0,s.Dv)(t);if(r)return r;if(!e)return null;let i=y.pZy.getSubscribedVariableInfo(e);return i?(0,p.sq)(i):null}function x(e,t){let r=(0,n.useMemo)(()=>e?(0,_.ZT)(e,t??o.A0):(0,s.cn)(null),[e,t]);return(0,s.Dv)(r)}function U(e,t){var r;let n=[];if((null==e?void 0:e.status)==="loaded"){let i=e.data.file;i&&(null==(r=i.variableCollections)||r.forEach(e=>{var r;null==(r=e.variables)||r.forEach(e=>{n.push((0,f.il)(e,i,t))})}))}return n}function B(){let e=(0,g.uC)(),t=(0,n.useMemo)(()=>e?(0,_.Pg)(e):(0,s.cn)(null),[e]),r=(0,s.Dv)(t);return(0,n.useMemo)(()=>{let e=r&&c.IE.from(r);return U(e,!0)},[r])}function V(e){let t=(0,n.useMemo)(()=>(0,_.fw)(e),[e]),r=(0,s.Dv)(t);return(0,l.vE)(()=>{var e;let t={};for(let n of Object.values(r))if("loaded"===n.status)for(let r of(null==(e=n.data.variableCollection)?void 0:e.variables)??[])t[(0,u.c5)(r.key)]=r;return t},[r])}function G(e){var t;let r=(0,n.useMemo)(()=>e?(0,_.Pg)(e):(0,s.cn)(null),[e]),i=(0,s.Dv)(r),a=(0,E.xZ)(),o=!!(null==(t=a.data)?void 0:t.find(t=>t.fileKey===e));return(0,l.O4)(()=>{if(!o||!i)return c.IE.loaded([]);if((null==i?void 0:i.status)==="loading"||(null==i?void 0:i.status)==="disabled")return c.IE.loading();let e=i&&c.IE.from(i);return c.IE.loaded(U(e,!1))},[o,i])}function H(e,t){if((null==e?void 0:e.status)==="loaded"){let r=e.data.file;if(r&&r.variableCollections)return r.variableCollections.map(e=>(0,f.aF)(e,r,t))}return[]}function W(){let e=(0,g.uC)(),t=(0,n.useMemo)(()=>e?(0,_.Pg)(e):(0,s.cn)(null),[e]),r=(0,s.Dv)(t);return(0,n.useMemo)(()=>{let e=r&&c.IE.from(r);return H(e,!0)},[r])}function K(e){var t;let r=(0,n.useMemo)(()=>e?(0,_.Pg)(e):(0,s.cn)(null),[e]),i=(0,s.Dv)(r),a=(0,E.xZ)(),o=null==(t=a.data)?void 0:t.find(t=>t.fileKey===e);return(0,l.O4)(()=>{if(!o||!i)return c.IE.loaded([]);if((null==i?void 0:i.status)==="loading")return c.IE.loading();let e=i&&c.IE.from(i);return c.IE.loaded(H(e,!1))},[o,i])}function z(){let e=(0,E.xZ)(),t=(0,l.O4)(()=>{var t;return(null==(t=e.data)?void 0:t.map(e=>e.fileKey))??[]},[e.data]),r=(0,n.useMemo)(()=>(0,_.kG)(t),[t]),i=(0,s.Dv)(r);return(0,l.O4)(()=>{let e=c.IE.all(Object.values(i));return"loaded"!==e.status?e:c.IE.loaded({items:a()(Object.values(i).map(e=>H(e,!1)))})},[i])}function Z(e){let t=(0,E.xZ)(),r=(0,l.O4)(()=>{var e;return(null==(e=t.data)?void 0:e.map(e=>e.fileKey))??[]},[t.data]),i=(null==e?void 0:e.enabled)===!1,o=(0,n.useMemo)(()=>{if(i){let e={};return r.forEach(t=>{e[t]=c.IE.disabled()}),(0,s.cn)(e)}return(0,_.TO)(r)},[i,r]),d=(0,s.Dv)(o);return(0,l.O4)(()=>{let e=c.IE.all(Object.values(d));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):c.IE.loaded({libraryVariableSets:a()(Object.values(d).map(e=>H(e,!1))),libraryVariables:a()(Object.values(d).map(e=>U(e,!1)))})},[d])}function Y(e,t,r){if(!e)return;let n=y.xAX.getIdsOfVariablesWithValue(e,t,{type:r.type,value:r.value});if(1===n.length)return n[0]}function j(e){return n.useMemo(()=>e.filter(e=>!(0,m.Eh)(e)),[e])}function $(e,t){let r=(0,h.Hr)(e),i=function(e){let t=S(),r=Z(e);return(0,n.useMemo)(()=>{var e;return(null==r?void 0:r.status)!=="loaded"?r.transform(()=>[]):c.IE.loaded([...(null==(e=r.data)?void 0:e.libraryVariables)??[],...t??[]])},[t,r])}(t);return(0,n.useMemo)(()=>{var t;if("loaded"!==i.status)return i.transform(()=>[]);let n=(null==(t=i.data)?void 0:t.filter(e=>(0,h.RZ)(e,r)))??[],a=[];for(let t of e){let e=m.xy[t];e&&i&&(a=a.concat(n.filter(t=>e.includes(t.resolvedType))))}return c.IE.loaded([...a])},[e,i,r])}function q(e){let t={},r=(0,E.xZ)();if(r.data){for(let n of e)for(let e of r.data)if(e.fileKey===n){t[n]=e.name;break}}return t}function X(e){let t=(null==e?void 0:e.subscriptionStatus)==="SUBSCRIBED"?e.file_key:void 0,r=q(t?[t]:[]);return t?r[t]:void 0}function J(e){let t=e&&(0,p.z4)(e),r=L(t?e.rootVariableSetId:void 0);return(t?r:e)??null}},714419:(e,t,r)=>{let n;r.d(t,{Cq:()=>p,D:()=>g,Eo:()=>E,Kc:()=>v,Uk:()=>n,dv:()=>d,eG:()=>s,oN:()=>h,wz:()=>I});var i=r(63730),a=r(816754),o=r(961215);let l=null,s=e=>(l=e,()=>{l=null}),c=null,d=e=>(c=e,()=>{c=null}),u=null,p=e=>(u=e,()=>{u=null}),m=null,h=e=>(m=e,()=>{m=null}),_=null,g=e=>(_=e,()=>{_=null}),f=new a.v("VariableMirrorVariableResolvedValueEmitter"),E=(e,t,r)=>(o.A$U.subscribeToLocalVariableResolvedValue(e,t),f.on(e,r),()=>{o.A$U.unsubscribeFromLocalVariableResolvedValue(e,t),f.removeListener(e,r)}),y=new a.v("VariableMirrorExplicitModeEmitter"),v=(e,t)=>(o.A$U.subscribeToExplicitModeChanges(e),y.on(e,t),()=>{o.A$U.unsubscribeFromExplicitModeChanges(e),y.removeListener(e,t)});class b{localVariableSetUpdated(e){(0,i.unstable_batchedUpdates)(()=>{null==l||l({added:[e]})})}localVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{null==l||l({deleted:e}),null==u||u({setDeleted:e})})}subscribedVariableSetUpdated(e,t){(0,i.unstable_batchedUpdates)(()=>{null==c||c({added:[e]}),null==_||_({setDeleted:e.id}),null==_||_({added:t})})}subscribedVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{null==c||c({deleted:e}),null==_||_({setDeleted:e})})}localVariablesUpdated(e){null==u||u({added:e})}localVariableOverridesUpdated(e){null==m||m({added:e})}localVariableOverridesDeleted(e){null==m||m({deleted:e})}localVariablesDeleted(e){null==u||u({deleted:e}),e.forEach(e=>{f.trigger(e,{})})}variableResolvedValueUpdated(e,t){f.trigger(e,t)}explicitModeUpdated(e,t){y.trigger(e,t)}resetMirrorCache(){(0,i.unstable_batchedUpdates)(()=>{null==l||l(null),null==u||u(null),null==m||m(null),null==c||c(null),null==_||_(null)}),f.removeAllListeners()}}let I=()=>{n=new b}},644749:(e,t,r)=>{r.d(t,{a:()=>a,w:()=>i});let n=[];function i(e){return n.push(e),()=>{n=n.filter(t=>t!==e)}}function a(e,t){for(let r of n)r(e,t)}},271774:(e,t,r)=>{let n;r.d(t,{At:()=>C,Bw:()=>S,CP:()=>g,D:()=>K,Fx:()=>G,Mz:()=>B,NL:()=>v,Op:()=>A,QF:()=>V,SI:()=>P,Un:()=>b,YS:()=>I,Yc:()=>H,dj:()=>L,dz:()=>y,f4:()=>f,jK:()=>R,k$:()=>T,mA:()=>E,mJ:()=>k,nJ:()=>n,qp:()=>O,sM:()=>w,wD:()=>F});var i=r(652983),a=r(63730),o=r(172497),l=r(615537),s=r(286206),c=r(518484),d=r(764850),u=r(878475),p=r(398772),m=r(158774),h=r(784667),_=r(729408);function g(e,t,r=!0){let n={x:e.width/2+(t.x-e.offsetX)*e.zoomScale,y:e.height/2+(t.y-e.offsetY)*e.zoomScale};return r?c.OW.rounded(n):n}function f(e,t){let r=new c.OW(e.x,e.y),n=g(e,t),i=c.OW.add(n,r);return i}function E(e,t){return Math.round(e/t-.5)}function y(e,t,r,n){return Math.round(n/2+(e-t)*r)}function v(e,t){return c.OW.rounded({x:(t.x-e.width/2)/e.zoomScale+e.offsetX,y:(t.y-e.height/2)/e.zoomScale+e.offsetY})}function b(e,t,r){let n={x:t.x,y:t.y},i=g(e,n,r),a={x:i.x,y:i.y,width:t.width*e.zoomScale,height:t.height*e.zoomScale};return a}function I(e,t){return!(e.x+e.width<0)&&!(e.x>t.width)&&!(e.y+e.height<0)&&!(e.y>t.height)}function T(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,s.YD)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function w(e,t){return{x:e.x+t.x,y:e.y+t.y,width:e.width,height:e.height}}function S(e){let t=(0,l.ws)((e,t,r,n)=>({x:e,y:t,height:r,width:n}));return t(e.x,e.y,e.height,e.width)}function C(e){let t=B(e),r=i.useRef(t);return i.useEffect(()=>{r.current=t},[r,t]),r}function O({subscribeToUpdates_expensive:e}){let t=B({subscribeToUpdates_expensive:e}),r=i.useContext(p.VH).current||t,n=t.offsetX-r.offsetX,a=t.offsetY-r.offsetY,o=t.zoomScale-r.zoomScale;return{...t,deltaOffsetX:n,deltaOffsetY:a,deltaZoomScale:o}}function A(e,t){i.useEffect(()=>{var r;(null==(r=m.Gr)?void 0:r.isReady())&&e.subscribeToUpdates_expensive&&(t(m.Gr.getViewportInfo()),(0,u.n)())},[t,e.subscribeToUpdates_expensive]),i.useEffect(()=>{if(m.Gr&&e.subscribeToUpdates_expensive){let e=e=>{(0,a.flushSync)(()=>{t(e)})};return m.Gr.viewport.on("onSetViewport",e),()=>{m.Gr.viewport.removeListener("onSetViewport",e)}}},[t,e.subscribeToUpdates_expensive])}function N(e){i.useContext(e);let t=i.useContext(p.M).current;return t||p.Ps}let L=e=>N(e.subscribeToUpdates_expensive?p.BD:p.wu).x,P=e=>N(e.subscribeToUpdates_expensive?p.he:p.wu).y,R=e=>N(e.subscribeToUpdates_expensive?p.pj:p.wu).width,k=e=>N(e.subscribeToUpdates_expensive?p.G6:p.wu).height,D=e=>N(e.subscribeToUpdates_expensive?p.lh:p.wu).offsetX,M=e=>N(e.subscribeToUpdates_expensive?p.Yl:p.wu).offsetY,F=e=>N(e.subscribeToUpdates_expensive?p.OU:p.wu).zoomScale,x=e=>N(e.subscribeToUpdates_expensive?p.kg:p.Bo).isPanning,U=e=>N(e.subscribeToUpdates_expensive?p.xh:p.Bo).isZooming;function B(e){let t=L(e),r=P(e),n=R(e),a=k(e),o=D(e),l=M(e),s=F(e),c=x(e),d=U(e);return i.useMemo(()=>({x:t,y:r,width:n,height:a,offsetX:o,offsetY:l,zoomScale:s,isPanning:c,isZooming:d}),[t,r,n,a,o,l,s,c,d])}function V(){let e={subscribeToUpdates_expensive:!0},t=L(e),r=P(e),n=R(e),a=k(e);return i.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a])}let G=()=>{n=void 0};function H(e){let t=new Promise(e=>{n=e});return d.iTB.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),t}let W=(0,o.F)(_.dGl);function K(){let e={subscribeToUpdates_expensive:!0},t=(0,h.zu)(),r=t?W:0,n=L(e)+r,a=P(e)+r,o=R(e)-r,l=k(e)-r;return i.useMemo(()=>({x:n,y:a,width:o,height:l}),[n,a,o,l])}},532928:(e,t,r)=>{let n;r.d(t,{Gq:()=>h,bL:()=>n});var i=r(600486),a=r(938414),o=r(391320),l=r(269658),s=r(307188),c=r(740794),d=r(961215);let u=0;class p{constructor(){this._currentSessionId=-1,this._infoBySessionId=new s.g({}),this._voiceMetadataBySessionId=new s.q({},o.qt),this._reactionsBySessionId=new s.g({}),this._reactionTimeout=-1,this._onReactionsUpdated=void 0,this._onInfoBySessionIdUpdated=void 0,this._onOtherUserMouseMoved=void 0,this._cursorChatLoggerTimerID=null}infoBySessionId(){return{...this._infoBySessionId.get()}}voiceMetadataBySessionId(){return{...this._voiceMetadataBySessionId.get()}}reactionsBySessionId(){return{...this._reactionsBySessionId.get()}}handleConnect(e){-1!==this._currentSessionId&&this.removeUser(this._currentSessionId),this._currentSessionId=e,this.addUser(this._currentSessionId)}addUser(e){let t=this._infoBySessionId.get(),r={sessionId:e.toString(),mouse:null,isHoveringWidgetWithHiddenCursors:!1,chatMessage:[null,null],highFiveStatus:!1,cursorType:d.wPU.DEFAULT,lastMouseMoveMs:-1};this.setInfoBySessionId({...t,[e]:r});let n=this._voiceMetadataBySessionId.get();this._voiceMetadataBySessionId.set({...n,[e]:{connectedCallId:""}});let i=this._reactionsBySessionId.get();this.setReactionsBySessionId({...i,[e]:{}})}removeUser(e){let t={...this._infoBySessionId.get()};delete t[e],this.setInfoBySessionId(t);let r={...this._voiceMetadataBySessionId.get()};delete r[e],this._voiceMetadataBySessionId.set(r);let n={...this._reactionsBySessionId.get()};delete n[e],this.setReactionsBySessionId(n)}setMouseCursor(e,t){let r=this._infoBySessionId.get();this.setInfoBySessionId({...r,[e]:{...r[e],cursorType:t}})}setMousePosition(e,t,r,n){var i;let a=this._infoBySessionId.get();if(e in a){let o=a[e],l={...o,mouse:{canvasSpacePosition:{x:r,y:n},pageId:t},lastMouseMoveMs:window.performance.now()};this.otherUserMouseMoved(e,l,o)&&(null==(i=this._onOtherUserMouseMoved)||i.call(this)),this.setInfoBySessionId({...a,[e]:l})}}setIsHoveringWidgetWithHiddenCursors(e,t){let r=this._infoBySessionId.get();e in r&&this.setInfoBySessionId({...r,[e]:{...r[e],isHoveringWidgetWithHiddenCursors:t}})}otherUserMouseMoved(e,t,r){var n,i;return e!==this._currentSessionId&&(null==(n=t.mouse)?void 0:n.canvasSpacePosition)!==(null==(i=r.mouse)?void 0:i.canvasSpacePosition)}setFocusOnTextCursor(e,t){let r=this._infoBySessionId.get();this.setInfoBySessionId({...r,[e]:{...r[e],focusOnTextCursor:t}})}setChatMessage(e,t,r){let n=this._infoBySessionId.get(),{eventName:o,sendToDataDogEveryMs:l}=m.CURSOR_CHAT;a.xb.start(`${o}_${e}_${t}`),null===this._cursorChatLoggerTimerID&&(this._cursorChatLoggerTimerID=setTimeout(()=>{let e=a.th.analyticsProperties(o);(0,i.L9)(o,e,{forwardToDatadog:!0}),a.th.reset(o),this._cursorChatLoggerTimerID=null},l)),e in n&&this.setInfoBySessionId({...n,[e]:{...n[e],chatMessage:[t,r]}})}setHighFiveStatus(e,t){let r=this._infoBySessionId.get();e in r&&this.setInfoBySessionId({...r,[e]:{...r[e],highFiveStatus:t}})}sendHighFiveStatus(e){d.B9x.sendHighFiveStatus(e)}setVoiceMetadata(e,t){let r=this._voiceMetadataBySessionId.get();e in r&&this._voiceMetadataBySessionId.set({...r,[e]:{...r[e],connectedCallId:t}})}sendVoiceMetadata(e){d.B9x.sendVoiceMetadata(e)}addReactionForSessionId(e,t,r){let n=++u+"",i=this._reactionsBySessionId.get();return e in i&&this.setReactionsBySessionId({...i,[e]:{...i[e],[n]:{localId:n,reactionId:t,canvasSpacePosition:r}}}),n}removeReactionWithId(e,t){let r=this._reactionsBySessionId.get();if(e in r){let n={...r[e]};delete n[t],this.setReactionsBySessionId({...r,[e]:n})}}setOnReactionsUpdatedCallback(e){this._onReactionsUpdated=e}setInfoBySessionIdUpdatedCallback(e){this._onInfoBySessionIdUpdated=e}setOtherUserMouseMovedCallback(e){this._onOtherUserMouseMoved=e}setReactionsBySessionId(e){this._reactionsBySessionId.set(e),this._onReactionsUpdated&&this._onReactionsUpdated()}setInfoBySessionId(e){this._infoBySessionId.set(e),this._onInfoBySessionIdUpdated&&this._onInfoBySessionIdUpdated()}resetReactions(){clearTimeout(this._reactionTimeout)}sendReaction(e){d.B9x.sendReaction(e),this.handleReactionForSession(d.B9x.currentSessionID(),e)}handleReactionFromServer(e,t){e!==d.B9x.currentSessionID()&&this.handleReactionForSession(e,t)}handleReactionForSession(e,t){var r;let n=this._infoBySessionId.get()[e],i=null==(r=null==n?void 0:n.mouse)?void 0:r.canvasSpacePosition;if(null==n||null==i)return null;let a=this.addReactionForSessionId(e,t,i);return setTimeout(()=>this.removeReactionWithId(e,a),2500),d.B9x&&e===d.B9x.currentSessionID()&&(this._reactionTimeout=setTimeout(()=>{let t=this._reactionsBySessionId.get(),r=t[e+""]||[];0===Object.keys(r).length&&l.V.dispatch(c.So())},2500)),a}useInfoBySessionId(e){return this._infoBySessionId.use(e)}useInfoBySessionIdSubscription(e){return this._infoBySessionId.useSubscription(e)}useVoiceMetadataBySessionId(){return this._voiceMetadataBySessionId.use()}useReactionsBySessionId(){return this._reactionsBySessionId.use()}}let m={CURSOR_CHAT:{eventName:"view_cursor_chat_message",bins:[1,9,17,19,20,23,25,29,32,48,64,80,96,112,224,448,896,1792,3584,1e4],sendToDataDogEveryMs:6e4}},h=()=>{Object.entries(m).forEach(([e,t])=>{a.th.create(t.eventName,t.bins)}),n=new p}},138212:(e,t,r)=>{r.d(t,{Yz:()=>s,xg:()=>d,z7:()=>u});var n=r(970740),i=r(877567),a=r(794800),o=r(568734),l=r(508212);let s={[l.F.EMBED_WIDGET]:a.S,[l.F.LINK_PREVIEW_WIDGET]:o.p$,[l.F.AI_SUMMARY_WIDGET]:i.E},c={[l.F.EMBED_WIDGET]:{propertyMenuItemNameToI18nId:{[a.F.OPEN]:()=>(0,n.t)("whiteboard.embeds.inline_menu.open_link"),[a.F.CONVERT_TO_TEXT]:()=>(0,n.t)("whiteboard.embeds.inline_menu.change_back_to_text")}},[l.F.LINK_PREVIEW_WIDGET]:{propertyMenuItemNameToI18nId:{[o.pB.OPEN]:()=>(0,n.t)("whiteboard.embeds.inline_menu.open_link"),[o.pB.VERTICAL]:()=>(0,n.t)("whiteboard.embeds.inline_menu.display_vertical"),[o.pB.HORIZONTAL]:()=>(0,n.t)("whiteboard.embeds.inline_menu.display_horizontal"),[o.pB.CONVERT_TO_TEXT]:()=>(0,n.t)("whiteboard.embeds.inline_menu.change_back_to_text")}},[l.F.AI_SUMMARY_WIDGET]:{propertyMenuItemNameToI18nId:{"":function(){throw Error("Function not implemented.")}}}};function d(e){return!!l.F[e]}function u(e,t){let r=c[e];if(r.propertyMenuItemNameToI18nId[t])return r.propertyMenuItemNameToI18nId[t]()}},179438:(e,t,r)=>{r.d(t,{Er:()=>k,O1:()=>P,O_:()=>x,Oc:()=>F,hU:()=>G,ik:()=>V,uO:()=>R});var n=r(600486),i=r(239299),a=r(850724),o=r(448501),l=r(716250),s=r(571529),c=r(733449),d=r(286206),u=r(117986),p=r(361763),m=r(417704),h=r(961215),_=r(875989),g=r(947303),f=r(995383),E=r(764850);function y(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function v(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function b(e,t){await (0,a.ve)(v(t));let r=window.executeFullscreenEmscriptenCode;delete window.executeFullscreenEmscriptenCode;let n={wasmBinaryFile:y(t),preRun(){n.emscripten_realloc_buffer(1610612736)}};window.Module=n,window.tsapi_init=(r,n)=>{e.tsapi_init(r),(0,f.wO)(t,n)},window.tsApisForCpp=e.tsApisForCpp,r()}async function I(e){let t,r;try{await g.nc.timeAsync("loadingCode",()=>{var t;return(null==(t=window.FULLSCREEN_PRELOADS)?void 0:t.js)||(0,a.ve)(v(e))})}catch(e){throw Error("Failed to load fullscreen JS code")}let n=window.executeFullscreenEmscriptenCode;delete window.executeFullscreenEmscriptenCode;let i={instantiateWasm:(e,n)=>(t=e,r=n,{}),wasmMemory:(0,_.W_)(e)};window.Module=i;try{n()}finally{delete window.Module}if(void 0===t)throw Error('Expected WebAssembly code to set "imports"');if(void 0===r)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:t,receiveInstance:r}}async function T(e,t){let r=g.nc.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,t)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await g.nc.timeAsync("awaitInstantiateStreaming",()=>r)}async function w(e,t){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let r=await e.arrayBuffer(),n=g.nc.time("instantiate",async()=>{try{return await WebAssembly.instantiate(r,t)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await g.nc.timeAsync("awaitInstantiate",()=>n)}let S=!1,C=null;async function O(e){var t;!C||C===e||(0,p.rm)()||P()||("fullscreen-app"===C?(0,d.Jz)(u.k.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===C&&(0,d.Jz)(u.k.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=y(e);g.nc.start("loadingBinaryStart");let[n,i]=await Promise.all([(null==(t=window.FULLSCREEN_PRELOADS)?void 0:t.wasm)||fetch(r),I(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:a,receiveInstance:o}=i;if("true"===n.headers.get("x-figma-local-build")&&(S=!0),WebAssembly.instantiateStreaming)try{let t=await T(n,a);return C=e,{receiveInstance:o,wasmResult:t}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,d.Jz)(u.k.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,d.Cp)("loader","Error loading wasm",{url:r,message:null==e?void 0:e.message}),e}let l=await w(n,a);return C=e,{receiveInstance:o,wasmResult:l}}let A=(0,c.a3)(async()=>await O("fullscreen-app")),N=(0,c.a3)(async()=>await O("prototype-lib")),L=async e=>{switch(e){case"fullscreen-app":return await A();case"prototype-lib":return await N()}};function P(){let e=o.default.location.pathname;for(let t of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(t))return!0;return!1}let R=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function k(e="fullscreen-app"){return L(e).then(()=>{})}let D=document.location.pathname;function M(e){return"/preload-editor"===e||"/preload-android-proto"===e}function F(){let e=M(D)&&(0,s.k)()&&s.Dt||D.startsWith("/proto/");return e||i.YO&&!i.YO.isFileTab()||i.Gu||P()||M(o.default.location.pathname)&&!i.YO?"never":!(0,l.BZ)().preload_fullscreen_on_load||"complete"===document.readyState||o.default.location.pathname.includes("file/")?"immediately":"eventually"}function x(){function e(){L("fullscreen-app").catch(e=>{})}let t=F();"immediately"===t?e():"eventually"===t&&window.addEventListener("load",()=>{e()})}let U=null,B=null;async function V(e,t="fullscreen-app"){if(B&&B!==t&&!(0,p.rm)()&&("fullscreen-app"===B?(0,d.Jz)(u.k.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===B&&(0,d.Jz)(u.k.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!y(t)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,m.BA)("asan"))return B=t,b(e,t);try{U&&U!==e&&await o.default.reloadAndWaitForever("wasmBindings changed",{from:E.pRH[U.tsApisForCpp.CommonApp().appType()],to:E.pRH[e.tsApisForCpp.CommonApp().appType()]}),U=e;let{receiveInstance:r,wasmResult:i}=await L(t);(0,f.dl)(()=>{g.nc.time("callMain",()=>r(i.instance,i.module))},U,t),B=t,(0,p.rm)()&&h.HH3.setIsRunningInteractionTests(),(0,n.L9)("Fullscreen Loaded")}catch(e){throw(0,n.L9)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,d.Jz)(u.k.UNOWNED,e)),e.reportedToSentry=!0,e}}let G=()=>{if(S)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},727803:(e,t,r)=>{r.d(t,{Br:()=>d,C2:()=>u,eR:()=>c,fk:()=>s,i4:()=>o,qr:()=>l});var n,i,a,o=((n=o||{}).COMMUNITY="community",n);let l=2e3,s="DROPDOWN_TYPE_GENERIC_COMMENT_MENU",c="DROPDOWN_TYPE_COMMUNITY_PROFILE_MORE_ACTIONS_MENU";var d=((i=d||{}).ALL_DISABLED="all_disabled",i.PINNED_DISABLED="pinned_disabled",i.ENABLED="enabled",i),u=((a=u||{}).REPORT="report",a.REPORT_AND_HIDE="report_and_hide",a)},343878:(e,t,r)=>{r.d(t,{PI:()=>f,Rc:()=>h,YU:()=>p,bT:()=>E,dX:()=>m,jp:()=>g,mA:()=>_});var n,i=r(46347),a=r(838903),o=r(761767),l=r(257817),s=r(249203),c=r(868894),d=r(656145),u=r(451267),p=((n=p||{}).FILE="FILE",n.PROTOTYPE="PROTOTYPE",n.REPO="REPO",n.PINNED_FILE="PINNED_FILE",n.PROJECT="PROJECT",n.OFFLINE_FILE="OFFLINE_FILE",n);let m=e=>({type:"FILE",file:e}),h=e=>({type:"PROTOTYPE",prototype:e}),_=(e,t)=>({type:"REPO",repo:e.repo,branches:e.files,selectedBranchKey:t[e.repo.id],accessed_at:e.timestamp});function g(e){return{type:"OFFLINE_FILE",file:e}}class f{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"PROJECT":return e.folder.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.vE)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,a.MY)(e.repo);case"PROJECT":return e.folder.name;default:(0,i.vE)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.accessed_at;case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":case"PROJECT":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.vE)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.file.shared_at;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":case"PINNED_FILE":case"PROJECT":case"OFFLINE_FILE":return null;default:(0,i.vE)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":return e.file.created_at;case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,t)=>e<t.created_at?e:t.created_at,e.repo.created_at);case"PROJECT":return e.folder.created_at;case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,i.vE)(e)}}static getTouchedAt(e){var t;switch(e.type){case"FILE":return e.file.touched_at??e.file.updated_at;case"REPO":return e.branches.reduce((e,t)=>null!==e&&e>t.touched_at?e:t.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"PROJECT":return(null==(t=e.folder.folderLastUpdated)?void 0:t.toISOString())??null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.vE)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashed_at;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;case"PROJECT":return e.folder.deleted_at;default:(0,i.vE)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.is_favorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;case"PROJECT":return!!e.folder.is_favorited;default:(0,i.vE)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return o.IK.FILE;case"PROTOTYPE":return o.IK.PROTOTYPE;case"PROJECT":return o.IK.FOLDER;default:(0,i.vE)(e)}}static getFileKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"PROJECT":case"OFFLINE_FILE":return;default:(0,i.vE)(e)}}static getFileIconType(e){switch(e.type){case"FILE":let t=e.file.editor_type;switch(t){case o.gg.DESIGN:case null:return d.I1.DESIGN;case o.gg.WHITEBOARD:return d.I1.WHITEBOARD;default:(0,i.vE)(t)}case"PINNED_FILE":switch(e.file.editorType){case o.gg.DESIGN:return d.I1.DESIGN;case o.gg.WHITEBOARD:return d.I1.WHITEBOARD;default:(0,i.vE)(e.file.editorType)}case"REPO":return d.I1.DESIGN;case"PROTOTYPE":return d.I1.PROTOTYPE;case"PROJECT":return;case"OFFLINE_FILE":{let t=(0,l.On)(e.file.editorType);switch(t){case o.gg.DESIGN:return d.I1.DESIGN;case o.gg.WHITEBOARD:return d.I1.WHITEBOARD;default:(0,i.vE)(t)}}default:(0,i.vE)(e)}}static getUrl(e,t){switch(e.type){case"FILE":return(0,s.Sb)(e.file);case"PINNED_FILE":return(0,u.z4)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let r=(0,a.T)(e.repo,e.branches,t);return(0,a.x5)(r,e.repo,"file");case"PROJECT":case"OFFLINE_FILE":return"";default:(0,i.vE)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"PROJECT":return e.folder.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.vE)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":return e.file.is_team_template;case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"PROJECT":case"OFFLINE_FILE":return!1;default:(0,i.vE)(e)}}static getFavoriteResourceOrgId(e){var t,r;switch(e.type){case"FILE":return(null==(t=e.file.parent_org)?void 0:t.id)??e.file.parent_org_id;case"PINNED_FILE":case"OFFLINE_FILE":return null;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return(null==(r=e.repo.parent_org)?void 0:r.id)??e.repo.parent_org_id;case"PROJECT":return e.folder.org_id;default:(0,i.vE)(e)}}static getFavoriteResourceTeamId(e){var t,r,n,i,a;switch(e.type){case"FILE":return(null==(t=e.file.parent_team)?void 0:t.id)??e.file.team_id;case"PINNED_FILE":default:return null;case"PROTOTYPE":return(null==(r=e.prototype.parent_team)?void 0:r.id)??(null==(n=e.prototype.fig_file)?void 0:n.team_id);case"REPO":return(null==(i=e.repo.parent_team)?void 0:i.id)??e.repo.team_id;case"PROJECT":return e.folder.team_id??(null==(a=e.folder.parent_team)?void 0:a.id)}}static getSharedBy(e){var t,r,n,a;switch(e.type){case"FILE":return(null==(t=e.file.shared_by_user)?void 0:t.id)??e.file.shared_by;case"PROTOTYPE":return(null==(r=e.prototype.shared_by_user)?void 0:r.id)??e.prototype.shared_by;case"REPO":return(null==(n=e.repo.shared_by_user)?void 0:n.id)??e.repo.shared_by;case"PROJECT":return(null==(a=e.folder.shared_by_user)?void 0:a.id)??e.folder.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.vE)(e)}}static getSharedByName(e){var t,r,n,a;switch(e.type){case"FILE":return null==(t=e.file.shared_by_user)?void 0:t.name;case"PROTOTYPE":return null==(r=e.prototype.shared_by_user)?void 0:r.name;case"REPO":return null==(n=e.repo.shared_by_user)?void 0:n.name;case"PROJECT":return null==(a=e.folder.shared_by_user)?void 0:a.name;case"PINNED_FILE":return(0,i.q8)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,i.q8)(!0,"Cannot get shared by name from an offline file"),null;default:(0,i.vE)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"PROJECT":case"OFFLINE_FILE":(0,i.q8)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,i.vE)(e)}}static getAppData(e){switch(e.type){case"FILE":return e.file.appData;case"REPO":return e.repo.appData;case"PROJECT":return e.folder.appData;case"PROTOTYPE":case"PINNED_FILE":return{};case"OFFLINE_FILE":return{isRenaming:!!e.file.isRenaming};default:(0,i.vE)(e)}}}let E={FILE:c.m.FILES,PROTOTYPE:c.m.PROTOTYPES,REPO:c.m.REPOS,PINNED_FILE:c.m.PINNED_FILES,PROJECT:c.m.PROJECTS,OFFLINE_FILE:c.m.OFFLINE_FILES}},752784:(e,t,r)=>{r.d(t,{Hf:()=>A,KC:()=>O,VU:()=>N,Zn:()=>C,cq:()=>w,w5:()=>S,wT:()=>I,ze:()=>T});var n=r(652983),i=r(63730),a=r(407908),o=r(172497),l=r(768358),s=r(808556),c=r(518484),d=r(83779),u=r(238809),p=r(764850),m=r(358156),h=r(59293),_=r(157607),g=r(54055),f=r(317907),E=r(961215),y=r(332224);let v=552,b=320,I=480,T=616,w=T-_.Mz,S=(e,t=v,r=b)=>{let[i,a]=n.useState(),[s,d]=n.useState(),[u,p]=n.useState(!1);return n.useLayoutEffect(()=>{let n=()=>{let n,i;switch(e.kind){case"mountCenter":n=window.innerWidth/2,i=window.innerHeight/2;break;case"buttonTarget":let l=(0,f.e5)(e.buttonTarget);if(!l)return;let s=l.getBoundingClientRect();n=s.x+s.width/2,i=s.y-s.height;break;case"sourceRect":n=e.sourceRect.x+e.sourceRect.width/2,i=e.sourceRect.y}let d=n-r/2,m=i-t-12+_.Mz;window.innerWidth-d<r?(u||p(!0),d=window.innerWidth-r-h.UF):u&&p(!1),m=Math.max((0,o.z)(y.JZB)+h.UF,m),a(new c.OW(d,m))};setTimeout(n,0);let i=(0,l.D)(n,100);return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e,t,r,u]),{initialModalPosition:i,modalPosition:s,setModalPosition:d,modalWasClippedByRightSide:u}},C=()=>{let e=(0,a.I0)();return n.useCallback(()=>{E.iTB&&E.iTB.triggerAction("set-tool-default",null),e(u.ko())},[e])},O=(e,t,r)=>{let o=(0,a.v9)(e=>e.mirror.appModel.currentTool===p.UAh.CODE_BLOCK),l=(0,a.v9)(e=>e.modalShown),c=(0,a.v9)(e=>e.mirror.appModel.showUi),d=C(),u=n.useCallback(()=>{!o&&(l||d())},[o,l,d]);n.useEffect(()=>{let n=n=>{var a;if(!e||(0,s.r)(n.target,"data-does-not-dismiss-modal"))return;let o=i.findDOMNode(null==(a=t.current)?void 0:a.getEl());if(!o)return;let l=o.contains(n.target);if(c||l||u(),!r){u();return}let d=document.querySelector(r);if(!d)return;let p=d.contains(n.target);l||p||u()};return document.addEventListener("pointerdown",n),()=>{document.removeEventListener("pointerdown",n)}},[r,u,e,t,c])},A=e=>e.mirror.appModel.currentTool===p.UAh.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===m.e.NOT_PINNED,N=(e,t,r,i)=>{let o=(0,a.I0)(),l=(0,a.v9)(e=>{var t;return(0,g.jE)({authedProfilesById:e.authedProfilesById,userId:null==(t=e.user)?void 0:t.id})});return{unsave:n.useCallback(r=>{e&&o((0,d.Ci)({id:e,resourceType:t,communityProfile:l||void 0,hideSuccessVisualBell:r,source:d.Fj.INSERTS_MODAL,optimisticData:{pluginInstallId:i}}))},[e,o,t,l,i]),save:n.useCallback((n,i)=>{e&&o((0,d.VG)({id:e,resourceType:t,communityProfile:l||void 0,onSuccess:n,hideSuccessVisualBell:i,source:d.Fj.INSERTS_MODAL,optimisticData:{resource:r}}))},[e,o,t,l,r])}}},295202:(e,t,r)=>{r.d(t,{j:()=>i,q:()=>a});var n=r(407908);function i(){return(0,n.v9)(e=>""!==e.desktopNewTab.searchQuery&&e.desktopNewTab.isSearchBarFocused)}function a(){var e;let t=(0,n.v9)(e=>e.search),r=!t.responses.files,i=((null==(e=t.responses.files)?void 0:e.results)??[]).slice(0,5);return{isLoading:r,searchResults:i}}},484810:(e,t,r)=>{r.d(t,{$g:()=>m,Ii:()=>g,Kt:()=>f,NN:()=>h,Q4:()=>_,um:()=>E});var n=r(652983),i=r(407908),a=r(716250),o=r(970740),l=r(331945),s=r(864974);r(11802);var c=r(955687),d=r(646472),u=r(493866),p=r(312616);let m=new Set(["PM","ENG","DES","MKT","UR"]),h=(e,t)=>e?l.aJ.loadingKeyForPayload({shelfType:d.sq.FILE_BROWSER_RECOMMENDED_TEMPLATES,filterLabel:t}):l.R.loadingKeyForPayload({shelfType:d.sq.FILE_BROWSER_RECOMMENDED_TEMPLATES}),_=(0,u.t)(e=>{let t=function(e){var t;return null==(t=null==e?void 0:e.profile)?void 0:t.job_title}(e)??"OTH";return function(e){if(!e)return"OTH";let t={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in t)return t[e];let r={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in r?r[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"}(t)});function g(e){let t=function(){function e(e){return!!(e&&e.createdAt&&new Date(e.createdAt).getTime()>0)}let t=(0,p.p)("thumbnail_exp_variant_1"),r=(0,p.p)("thumbnail_exp_variant_2"),n=(0,p.p)("thumbnail_exp_variant_3");return(0,a.BZ)().file_browser_23_thumbnails_ret?e(t)?"variant_1":e(r)?"variant_2":e(n)?"variant_3":void 0:void 0}(),r=(0,i.I0)();return(0,n.useMemo)(()=>{if(t)return t;if(!e)return"control";let n=(0,c.E)("exp_file_browser_23_thumbnails",e.id).defaultValue("control").treatment("variant_1","variant_1").treatment("variant_2","variant_2").treatment("variant_3","variant_3").get();return"control"!==n&&r(s.v({thumbnail_exp_variant_1:"variant_1"===n,thumbnail_exp_variant_2:"variant_2"===n,thumbnail_exp_variant_3:"variant_3"===n})),n},[t,e,r])}function f(e,t){if("control"!==t){if("variant_1"===t)return({"1009957993740460488":"https://static.figma.com/uploads/dec5a579e129f850d9cb185e10eb9cb857c549b3","1025461733126324339":"https://static.figma.com/uploads/cb7a96dc6ea6f0a0b8923c232a08611b8336a67a","1026970355968683737":"https://static.figma.com/uploads/2ede031a7acb59d1f6f5f6c8ae188074913680af","1027357893837345723":"https://static.figma.com/uploads/f8de29efb26c60db3029ce1a9c88eb530e849d39","1027358830096634813":"https://static.figma.com/uploads/e0b44978a4d3f08f0fe4b73d6be7ed7b5f24cc79","1028014024373154378":"https://static.figma.com/uploads/13599dd138874321a78e009db24dbe76ff979daf","1028076208648642188":"https://static.figma.com/uploads/095ae1d553942aa896ccf6b25966edd97667b165","1028102440297541271":"https://static.figma.com/uploads/d234bd0d3547321b683bfeb0a95260de01f33cd9","1035969027238355356":"https://static.figma.com/uploads/9f5e7c6ec10186bdd4716d9651e20b03570b7c22","1007804018270351087":"https://static.figma.com/uploads/2adfa67fff1922d3f0faba620e8660deab23a699"})[e];if("variant_2"===t)return({"1009957993740460488":"https://static.figma.com/uploads/b82cbe0b8d583693678dfe2eb7fb85662c7fe11c","1025461733126324339":"https://static.figma.com/uploads/e2ebd20d15452c471d365f88d629911da44aacf2","1026970355968683737":"https://static.figma.com/uploads/ccd5c27beb272f3608160108cec503de9550b789","1027357893837345723":"https://static.figma.com/uploads/cfca0b847f79993d092d635786f5b085b6664006","1027358830096634813":"https://static.figma.com/uploads/919a10d3fff28cb90bd53fb4435f807b5b708963","1028014024373154378":"https://static.figma.com/uploads/292a8d13e09a3506e7d874b7b1595bee1a7beda3","1028076208648642188":"https://static.figma.com/uploads/d057fcc153fa36f56c30a0cb8a53328663b1960e","1028102440297541271":"https://static.figma.com/uploads/8275bd22bf5b995454fc577d515d8452ff0783c7","1035969027238355356":"https://static.figma.com/uploads/ac044621d0e841ba6f0e7f0481dde1bb2c301c26","1007804018270351087":"https://static.figma.com/uploads/67c41046ae9c09e17728ac922871df4582b6a159"})[e];if("variant_3"===t)return({"1009957993740460488":"https://static.figma.com/uploads/7d5267406323239e5f1ad8c9ff5a3a4dbf93f239","1025461733126324339":"https://static.figma.com/uploads/02b39eb93add7d83214a9cd88be7dab63f255ee2","1026970355968683737":"https://static.figma.com/uploads/d15980d666915e1615d39c7205b1b133a26148e9","1027357893837345723":"https://static.figma.com/uploads/266af7247de711d9f48d811a1a9c2b4dd852e6b9","1027358830096634813":"https://static.figma.com/uploads/cfc9173b679cf2fd03f52d72abc8edbbacab4512","1028014024373154378":"https://static.figma.com/uploads/03696f3080f65ef88bac7bace1e4ab25ba5dbe97","1028076208648642188":"https://static.figma.com/uploads/5fb013c0234616b8e1d91b9d0c33310e4416ead4","1028102440297541271":"https://static.figma.com/uploads/18745d0e7879928855004562e40c33ea76e6477d","1035969027238355356":"https://static.figma.com/uploads/80f319257d9228e6c395d3f6e69410a56c4e96b1","1007804018270351087":"https://static.figma.com/uploads/4f7d5c6a313bfd6295406bc60d8157b85418bfd0"})[e]}}function E(e){if(!e||!m.has(e))return[null,null];switch(e){case"PM":return[(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_pm"),(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_pm_badge")];case"ENG":return[(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_eng"),(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_eng_badge")];case"DES":return[(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_des"),(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_des_badge")];case"MKT":return[(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_mkt"),(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_mkt_badge")];case"UR":return[(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_ur"),(0,o.t)("file_browser.new_file_creation_topbar.explore_fig_jam_templates_ur_badge")];default:return[null,null]}}},464368:(e,t,r)=>{r.d(t,{Dg:()=>m,EJ:()=>p,IC:()=>y,Y0:()=>h,Yu:()=>g,at:()=>d,mB:()=>E,nh:()=>f,ob:()=>_,vC:()=>u});var n=r(652983),i=r(407908),a=r(76085),o=r(882562),l=r(424479);let s=e=>{var t;return null==(t=null==e?void 0:e.mirror)?void 0:t.sceneGraph},c=()=>(0,i.oR)(),d=()=>(0,i.v9)(s),u=()=>{let e=n.useMemo(()=>new l.TSSceneGraph(l.cJ.PLAYGROUND),[]);return e},p=()=>(0,i.v9)(e=>e.mirror.sceneGraphSelection),m=()=>{let e=!(0,i.v9)(e=>(0,a.xb)(e.mirror.sceneGraphSelection));return e};function h(e){let t=c(),r=p(),i=(0,n.useRef)();i.current=()=>{e(t.getState())},(0,n.useEffect)(()=>{i.current()},[r])}let _=()=>(0,i.v9)(e=>{var t,r;return null==(r=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:r.currentTool}),g=()=>(0,i.v9)(e=>{var t;return(0,o.M)(null==(t=null==e?void 0:e.progressBarState)?void 0:t.mode)});function f(e){return(0,i.v9)(t=>t.mirror.appModel[e])}let E=(0,n.createContext)(null);function y(){let e=(0,i.v9)(e=>e.mirror.sceneGraph),t=(0,n.useContext)(E);return t||e}},344668:(e,t,r)=>{r.d(t,{B0:()=>E,H5:()=>g,K$:()=>h,RO:()=>f,Td:()=>m,aG:()=>w,gE:()=>T,mK:()=>_,sq:()=>S});var n,i=r(652983),a=r(407908),o=r(269658),l=r(716250),s=r(337167),c=r(644383),d=r(961215),u=r(875989),p=r(786521);let m=75,h=60,_=90;var g=((n=g||{})[n.SAFE=0]="SAFE",n[n.WARNING=1]="WARNING",n[n.ERROR=2]="ERROR",n[n.OOM=3]="OOM",n);function f(e){}let E=()=>{let e=100*((0,u.EI)()/((0,l.BZ)().recovery_mode?2*u.tx:u.U4));return{memoryUsedPercent:e=Math.round(100*(e=Math.max(0,e=Math.min(100,e)))+Number.EPSILON)/100,usingTestMemory:!1}},y=()=>((0,a.v9)(e=>e.mirror),E()),v=(0,s.cn)(0),b=(0,s.cn)(0),I=(0,s.cn)(!1),T=()=>{let e=(0,a.v9)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===p.m}),[t,r]=(0,s.KO)(v),[n,o]=(0,i.useState)(!1),{memoryUsedPercent:l,usingTestMemory:c}=y(),[u,_]=(0,s.KO)(b),[g,f]=(0,s.KO)(I);return(0,i.useEffect)(()=>{let n=e?3:function(e,t){let r=e;return 0===e?t>=m?r=2:t>=h&&(r=1):1===e?t>=m?r=2:t<h&&(r=0):2===e&&t<m&&(r=t<h?0:1),r}(t,l);t!==n&&(_(t),r(n),f(!1),n>0&&d.O$1.uiState().showInFileMemoryPercentage.set(!0)),u&&u>0&&(0===n&&d.O$1.uiState().showInFileMemoryPercentage.set(!1),o(!0))},[t,l,e,u,f,r,_]),{warningLevel:t,memoryUsedPercent:l,usingTestMemory:c,previousWarningLevelUnsafe:n,previousWarningLevel:u,warningTracked:g,setWarningTracked:f}};function w(e,t,r,n){let i=o.V.dispatch,a=n||!(0,l.BZ)().manual_refresh_node_memory?(0,u.EI)():d.O$1.uiState().cachedTotalMallocLevelBytes.getCopy(),s=100*(a/t*e)/u.U4;return(i(c.R.dequeue({matchType:"recalculatingNodeMemoryStats"})),r)?s>=.1?`${s.toFixed(1)}%`:"--":s>=10?`${s.toFixed(1)}%`:`${s.toFixed(2)}%`}function S(){let e=d.gng.getSubtreeMemoryUsage("0:2"),t=(0,u.EI)()/d.gng.getSubtreeMemoryUsage("0:0"),r=100*(t*e)/u.U4;return r}},600831:(e,t,r)=>{r.d(t,{QP:()=>f,bM:()=>b,c8:()=>y,cS:()=>_,gH:()=>g,kP:()=>E,xF:()=>v});var n=r(652983),i=r(407908),a=r(337167),o=r(824801),l=r(246905),s=r(840568),c=r(764850),d=r(598253),u=r(424479),p=r(646027),m=r(572333),h=r(352297);let _=(0,p.qj)(()=>c.O$1.sceneGraphQuerySyncState().pageSyncState),g=e=>(0,a.cn)(t=>{let r=t(_);return r.get(e)===c.AgT.LOADED});function f(){var e;let t=(0,i.v9)(e=>e.selectedView),r=null==(e=(0,i.v9)(e=>e.versionHistory))?void 0:e.isLoadingPage,n=(0,l.Fg)();return E({selectedView:t,isLoadingVersionHistory:r,theme:n})}function E({selectedView:e,isLoadingVersionHistory:t,theme:r}){var i,l,p;let _=(null==e?void 0:e.view)==="prototype",g=(0,m.YO)(null==(i=c.O$1)?void 0:i.sceneGraphQuerySyncState().pageSyncState,new Map),f=_?null:u.TSSceneGraph.instance.getCurrentPage(),E=n.useMemo(()=>null==f?void 0:f.backgroundColor,[f]),y=n.useMemo(()=>null==f?void 0:f.guid,[f]),v=null==(l=c.B9x)?void 0:l.isIncrementalSession(),b=n.useMemo(()=>!!y&&(!v||g.get(y)===c.AgT.LOADED),[y,g,v]),I=!!(0,m.mA)(null==(p=c.O$1)?void 0:p.currentPageState().requestedPageChange),T=(0,a.Dv)(d.Jn),w=(0,a.Dv)(d.Vj);return n.useMemo(()=>{let e;if(_)return{isLoading:!1};let n=(0,s.qD)(E);return(e=null!==n?o.Z.format(n):r&&"dark"===(0,h.zI)(r)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",b&&(null!=n?(n.a=.7,e=o.Z.format(n)):e="rgba(229, 229, 229, 0.1)"),T)?{background:e,isLoading:!1}:{background:e,isLoading:!!t||I||w}},[_,E,r,b,T,t,I,w])}function y(e){return e.some(e=>e.status!==c.AgT.LOADED)}function v(e){return e.every(e=>e.status===c.AgT.LOADED)}function b(e,t){for(let r of e)if(r.nodeId===t)return r.status;return null}},987923:(e,t,r)=>{r.d(t,{AC:()=>E,HI:()=>_,K1:()=>f,WV:()=>v,a2:()=>y});var n=r(652983),i=r(407908),a=r(716250),o=r(669277),l=r(249683),s=r(954109),c=r(862610),d=r(801998),u=r(166885),p=r(523945),m=r(200273),h=r(322186);function _(e){let t=(0,i.v9)(e=>e.library),r=(0,p.hg)(),o=(0,i.v9)(e=>e.recentlyUsed.libraryItems);return(0,n.useMemo)(()=>{let n=[],i=[];for(let l of o[e])if(l.type===u.h3.COMPONENT||l.type===u.h3.STATE_GROUP){let e=function(e,t){var r,n,i,a,o,l,s,c;return e.type===u.h3.COMPONENT?(null==(n=null==(r=t.published.components[e.team_id])?void 0:r[e.file_key])?void 0:n[e.node_id])||(null==(a=null==(i=t.defaultPublished.components[e.team_id])?void 0:i[e.file_key])?void 0:a[e.node_id]):e.type===u.h3.STATE_GROUP?(null==(l=null==(o=t.published.stateGroups[e.team_id])?void 0:o[e.file_key])?void 0:l[e.node_id])||(null==(c=null==(s=t.defaultPublished.stateGroups[e.team_id])?void 0:s[e.file_key])?void 0:c[e.node_id]):void 0}(l,t);e&&n.push(e)}else if(l.type===u.h3.MODULE&&(0,a.BZ)().dse_editor_templates_v1&&r.data){let e=function(e,t){var r;return null==(r=t[e.file_key])?void 0:r.find(t=>t.node_id===e.node_id)}(l,r.data);e&&i.push(e)}return{productComponents:n,templates:i}},[o,e,t,r])}let g=e=>{let t={};return e.forEach(e=>{t[e.fileKey]={design:e.isSubscribed,figjam:!!e.figJamSubscribed}}),t},f=()=>{let e=(0,i.I0)(),t=(0,m.uC)(),r=(0,h.Ng)(),a=!!t&&(0,d.d$)(r)&&(0,d.OR)(r),u=(0,o.mU)(c.WorkspaceSubscribedLibrariesForFile,{fileKey:t},{enabled:a});(0,n.useEffect)(()=>{var r,n,i,o;t&&"loaded"===u.status&&a&&(e(l.hT({subscriptions:g((null==(o=null==(i=null==(n=null==(r=u.data)?void 0:r.file)?void 0:n.team)?void 0:i.workspace)?void 0:o.librarySubscriptions)||[])})),e((0,s.L1)({openFileKey:t})))},[e,t,u,a])},E=()=>{let e=(0,i.I0)(),t=(0,m.uC)(),r=(0,h.Ng)(),a=!!t&&(0,d.d$)(r)&&!(0,d.OR)(r),u=(0,o.mU)(c.LicenseGroupSubscribedLibrariesForFile,{fileKey:t},{enabled:a});(0,n.useEffect)(()=>{var r,n,i,o;t&&"loaded"===u.status&&a&&(e(l.Qc({subscriptions:g((null==(o=null==(i=null==(n=null==(r=u.data)?void 0:r.file)?void 0:n.team)?void 0:i.licenseGroup)?void 0:o.librarySubscriptions)||[])})),e((0,s.L1)({openFileKey:t})))},[e,t,u,a])},y=e=>{let t=(0,i.I0)(),r=(0,h.Ng)(),a=!!e&&(0,d.d$)(r)&&(0,d.OR)(r),s=(0,o.mU)(c.WorkspaceSubscribedLibrariesForTeam,{teamId:e},{enabled:a});(0,n.useEffect)(()=>{var e,r,n;"loaded"===s.status&&a&&t(l.hT({subscriptions:g((null==(n=null==(r=null==(e=s.data)?void 0:e.team)?void 0:r.workspace)?void 0:n.librarySubscriptions)||[])}))},[t,s,a])},v=e=>{let t=(0,i.I0)(),r=(0,h.Ng)(),a=!!e&&(0,d.d$)(r)&&!(0,d.OR)(r),s=(0,o.mU)(c.LicenseGroupSubscribedLibrariesForTeam,{teamId:e},{enabled:a});(0,n.useEffect)(()=>{var e,r,n;"loaded"===s.status&&a&&t(l.Qc({subscriptions:g((null==(n=null==(r=null==(e=s.data)?void 0:e.team)?void 0:r.licenseGroup)?void 0:n.librarySubscriptions)||[])}))},[t,s,a])}},187436:(e,t,r)=>{r.d(t,{DP:()=>S,Nn:()=>s,OP:()=>d,QF:()=>g,Qb:()=>i,U0:()=>b,Wc:()=>v,Ym:()=>I,Zf:()=>T,_8:()=>o,_9:()=>c,de:()=>w,gG:()=>p,kU:()=>f,m:()=>m,pE:()=>l,pv:()=>E,wA:()=>y,xF:()=>a,zD:()=>_,zM:()=>h});var n=r(571529);let i=()=>window.FigmaMobile,a=()=>i(),o=()=>window.FigmaMobile,l=()=>o(),s=()=>window.FigmaMobile,c=()=>window.FigmaMobile,d=()=>window.FigmaMobile,u=()=>window.FigmaMobile,p=()=>window.FigmaMobile,m=()=>window.FigmaMobile,h=()=>window.FigmaMobile,_=()=>window.FigmaMobile,g=()=>_(),f=()=>window.FigmaMobile,E=()=>window.FigmaMobile,y=()=>window.FigmaMobile,v=()=>window.FigmaMobile,b=()=>window.FigmaMobile,I=()=>window.FigmaMobile,T=()=>window.FigmaMobile,w=()=>window.FigmaMobile,S=e=>{let t=u();return"prototype"===e.view?n.ZP.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!(null==t?void 0:t.shouldOptimizeForIpadApp)&&!e.commentsEnabled}},685798:(e,t,r)=>{r.d(t,{Gu:()=>l,L2:()=>s,Qs:()=>d,Ri:()=>c});var n=r(407908),i=r(207941),a=r(484893),o=r(456326);let l=()=>{let e=(0,n.v9)(e=>{var t,r;return(null==(t=e.selectedView)?void 0:t.view)==="fullscreen"&&(null==(r=e.selectedView)?void 0:r.editorType)==="design"}),t=(0,n.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),r=(0,n.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.isReadOnly}),i=(0,n.v9)(e=>{var t;return(null==(t=e.versionHistory)?void 0:t.activeId)!==o.we});return e&&t&&!r&&!i},s=()=>(0,n.v9)(e=>"WHEEL"===e.multiplayerEmoji.type),c=()=>(0,n.v9)(e=>e.universalInsertModal.showing),d=()=>{let e=!!(0,i.Dv)(a.qs),t=(0,n.v9)(e=>!!e.modalShown),r=(0,n.v9)(e=>e.exportSettingsPickerShown.isShown);return e||t||r}},102170:(e,t,r)=>{r.d(t,{PT:()=>d,Py:()=>c,TS:()=>h,_5:()=>p,v8:()=>m});var n=r(652983),i=r(407908),a=r(9247),o=r(716250),l=r(217810),s=r(200273);let c=()=>{let[e,t]=n.useState(4);return n.useEffect(()=>{let e=()=>{window.innerWidth<786?t(2):t(4)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e},d=e=>"sessionID"in e,u=e=>{let{user:t,sessionID:r,presenterSessionID:n,lastObservedSessionID:i,fileCreatorID:a,mostActiveSpeakerID:l,observingSessionID:s}=e;return d(t)&&t.sessionID===r?0:d(t)&&n&&t.sessionID===n?1:d(t)&&s&&t.sessionID===s?2:(0,o.BZ)().live_feedback_large_meetings&&d(t)&&i&&t.sessionID===i?3:d(t)&&t.userID===a?4:t.userID===l?5:t.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function p(e,t){let r=e;return t&&(r=r.filter(e=>d(e)&&e.deviceName===t)),r=r.filter(e=>!d(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}let m=(e,t,r,n,i)=>{let{deviceNameFilter:a}=i,o=[],l=[...e];if(!l||0===l.length)return t&&!r?{users:[t],overflowUsers:[]}:{users:[],overflowUsers:[]};let s=function(e){return(t,r)=>{let n=u({...e,user:t})-u({...e,user:r});if(0!==n)return n;let i=t.name.toLocaleLowerCase(),a=r.name.toLocaleLowerCase();return d(t)&&d(r)&&i===a?t.sessionID-r.sessionID:i>a?1:-1}}(i);return l.sort(s),(l=p(l,a)).length>=n&&(o=l.slice(n-1),l=l.slice(0,n-1)),{users:l,overflowUsers:o}};function h(e,t,r,o,c){let d=(0,i.v9)(e=>e.multiplayer.sessionID),u=(0,i.v9)(e=>e.multiplayer.observingSessionID),p=(0,i.v9)(e=>e.multiplayer.presenterSessionID),h=(0,i.v9)(e=>e.multiplayer.deviceNameFilter),_=(0,s.CA)(),[g,f]=n.useState(null),E=(0,a.D)(u);E!==u&&(0,l.lm)(E)&&-1!==E&&E!==g&&f(E);let y=n.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:p,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:null==_?void 0:_.creatorId,deviceNameFilter:h}),[d,u,p,g,c,null==_?void 0:_.creatorId,h]),{users:v,overflowUsers:b}=n.useMemo(()=>m(e,t,r,o,y),[e,t,r,o,y]);return{users:v,overflowUsers:b}}},200273:(e,t,r)=>{r.d(t,{CA:()=>f,CV:()=>v,IE:()=>g,Oj:()=>h,Ow:()=>m,R8:()=>y,RB:()=>b,Sh:()=>_,Up:()=>u,dh:()=>d,uC:()=>E,xe:()=>p});var n=r(407908),i=r(365653),a=r(716250),o=r(337167),l=r(656077),s=r(451573),c=r(411268);function d(e){return e.openFile}let u=(0,s.cg)(d),p=(0,o.cn)(e=>{let t=e(u),r=e(c.f);return(null==t?void 0:t.teamId)?r[t.teamId]??null:null}),m=(0,o.kv)(u,e=>(null==e?void 0:e.teamId)??void 0);function h(e){var t;return(null==(t=e.openFile)?void 0:t.key)||null}let _=(0,s.cg)(h);function g(e){var t;return(null==(t=e.openFile)?void 0:t.key)&&e.fileByKey[e.openFile.key]||null}function f(){return(0,n.v9)(d)}function E(){var e;return(null==(e=f())?void 0:e.key)||null}function y(){let e=f();return((null==e?void 0:e.sourceFileKey)??(null==e?void 0:e.key))||null}function v(e){let t=(0,i.c)(e=>({openFile:e.openFile,fileByKey:e.fileByKey}));return b(t,e)}function b(e,t){let r=d(e),n=g(e);return(null==t?void 0:t.useSinatraType)?n:(0,a.BZ)().open_file_migration?r:n?(0,l.a0)(n):null}},196532:(e,t,r)=>{r.d(t,{G0:()=>o,Hw:()=>d,IG:()=>u,KF:()=>s,Mn:()=>a,S0:()=>p,_Z:()=>c,bt:()=>l,oI:()=>m});var n=r(407908),i=r(733609);let a=()=>(0,n.v9)(i.getPermissionsState,n.wU);function o(){return(0,n.v9)(i.canRunCodegen)}function l(){return(0,n.v9)(e=>!!e.openFile&&(0,i.isCopyExportRestricted)(e.openFile))}let s=e=>{let t=a();return(0,i.isFileFigjamDisabled)(e,t)},c=e=>{let t=a();return(0,i.isFigJamDisabledForOrg)(e,t)},d=(e,t)=>{let r=a();return(0,i.canCreateFile)(e,r,t)},u=(e,t)=>{let r=a();return(0,i.canCreateFileLG)(e,r,t)},p=(e,t)=>{let r=a();return(0,i.canCreateFileOrRequestUpgrade)(e,r,t)},m=(e,t)=>{let r=a();return(0,i.canCreateFileOrRequestUpgradeLG)(e,r,t)}},72815:(e,t,r)=>{r.d(t,{T$:()=>s,dS:()=>c,zy:()=>l});var n=r(407908),i=r(733609),a=r(881835),o=r(388398);let l=e=>{let t=!!(0,o.f)({teamId:e,flag:a.e4}),r=(0,n.v9)(t=>t.teams[e]),l=(0,n.v9)(e=>(0,i.getPermissionsStateMemoized)(e));return a.pl.getProTrial(r,t,l)},s=()=>{let e=(0,n.v9)(e=>e.userTeamFlags),t=(0,n.v9)(e=>(0,i.getPermissionsStateMemoized)(e));return a.pl.getUpgradableProTrials(e,t)},c=()=>{let e=(0,n.v9)(e=>e.user),t=(0,n.v9)(e=>e.isFreeUser),r=(0,n.v9)(e=>(0,i.getPermissionsStateMemoized)(e)),o=(0,n.v9)(e=>e.userTeamFlags);return a.pl.getEligibleProTrialTeams(e,t,r,o)}},9715:(e,t,r)=>{r.d(t,{n:()=>p});var n=r(407908),i=r(337167),a=r(668849),o=r(437651),l=r(900294),s=r(881835),c=r(453268),d=r(464368),u=r(72815);let p=e=>{let t=(0,u.zy)(e),r=(0,i.Dv)(o.p),p=(0,a.A2)(),m=(0,d.nh)("showUi"),h=(0,d.Yu)(),_=(0,n.v9)(e=>e.openFile),g=(0,n.v9)(e=>e.selectedView),f=(0,n.v9)(e=>e.userFlags),E=(0,n.v9)(e=>e.notifications.length>0);return!!(_&&_.editorType&&s.pl.canSeeProTrialUxInFile(t,_))&&c.iF.canSeeOnboardingInFile({editorType:_.editorType,selectedView:g,showStarterKit:r!==l.sI.FALSE,userFlags:f,hasNotifications:E,isDevHandoffView:p,isAppUiShown:m,isLoading:h})}},237544:(e,t,r)=>{r.d(t,{Op:()=>o,WW:()=>l});var n=r(407908);r(448501);var i=r(31642);r(313653);var a=r(857522);function o(){let e=(0,n.I0)();return async(t,r,n)=>{if(t.parentOrgId||!t.teamId)return;let o=await i.ZP.post(`/api/teams/${t.teamId}/team_users/self_upgrade`,{key:t.key,is_reupgrade:!!r,reason:n});e(a.gz({teamUsers:[o.data.meta],teamId:t.teamId}))}}function l(){let e=(0,n.I0)();return t=>{e(a.Z$({...t}))}}},435738:(e,t,r)=>{r.d(t,{E:()=>d});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(661539),s=r(327732),c=r(511978);function d(e){var t,r;if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!(null==(r=e.dragState)?void 0:r.dragOffset))return null;let a=e.dragState.dragPosition.subtract(e.dragState.dragOffset),d=(0,l.rV)(e.dragState.draggingResource)?s.Y:e.dragState.draggingResource.redirect_icon_url;return(0,i.createPortal)(n.createElement("img",{src:d,alt:e.dragState.draggingResource.name,className:o()(c.Jk,{[c.SC]:e.dragState.isDraggingOverCanvas}),style:{left:a.x,top:a.y,width:e.dragState.draggingThumbSize.x,height:e.dragState.draggingThumbSize.y},draggable:!1}),document.getElementById("fullscreen-root"))}},504799:(e,t,r)=>{r.d(t,{i:()=>p});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(852601),s=r(659994),c=r(433834),d=r(167817),u=r(511978);function p(e){var t,r;let a=(0,l.Bs)();if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!(null==(r=e.dragState)?void 0:r.dragOffset))return null;let p=e.dragState.draggingResource,m=e.dragState.dragPosition.subtract(e.dragState.dragOffset),{imageUrl:h,name:_,thumbnailIsSet:g,hubFileId:f,clientMeta:E,isWhiteboard:y,resizedThumbnailUrls:v}=a(p);return(0,i.createPortal)(n.createElement("div",{className:o()(u.tj,{[u.SC]:e.dragState.isDraggingOverCanvas}),style:{left:m.x,top:m.y,width:e.dragState.draggingThumbSize.x,height:e.dragState.draggingThumbSize.y}},n.createElement(c.fb,{removeBorder:!0},n.createElement(d.Pk,{backgroundColor:(0,s.YI)(E),image:h,isSet:g,isWhiteboard:y,hubFileId:f,alt:_,resizedThumbnailUrls:v}))),document.getElementById("fullscreen-root"))}},509382:(e,t,r)=>{r.d(t,{h:()=>c});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(936126),s=r(511978);function c(e){var t,r;if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!(null==(r=e.dragState)?void 0:r.dragOffset))return null;let a=e.dragState.dragPosition.subtract(e.dragState.dragOffset),c=(0,l.Q4)(e.dragState.draggingResource);return(0,i.createPortal)(n.createElement("img",{src:c,alt:e.dragState.draggingResource,className:o()(s.mN,{[s.SC]:e.dragState.isDraggingOverCanvas}),style:{left:a.x,top:a.y,width:e.dragState.draggingThumbSize.x,height:e.dragState.draggingThumbSize.y},draggable:!1}),document.getElementById("fullscreen-root"))}},346553:(e,t,r)=>{r.d(t,{v:()=>d});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(661539),s=r(816980),c=r(511978);function d(e){var t,r;if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!(null==(r=e.dragState)?void 0:r.dragOffset))return null;let a=e.dragState.dragPosition.subtract(e.dragState.dragOffset),d=(0,l.rV)(e.dragState.draggingResource)?s.$:e.dragState.draggingResource.redirect_snapshot_url;return(0,i.createPortal)(n.createElement("img",{src:d??void 0,alt:e.dragState.draggingResource.name,className:o()(c.mc,{[c.SC]:e.dragState.isDraggingOverCanvas}),style:{left:a.x,top:a.y,width:e.dragState.draggingThumbSize.x,height:e.dragState.draggingThumbSize.y},draggable:!1}),document.getElementById("fullscreen-root"))}},212271:(e,t,r)=>{r.d(t,{k:()=>y});var n=r(407908),i=r(204829),a=r(111120),o=r(496417),l=r(651850),s=r(298715),c=r(936561),d=r(322186),u=r(177610),p=r(607907),m=r(939179),h=r(661539),_=r(255267),g=r(327732),f=r(425285),E=r(238695);function y(e){var t;let r=null==(t=(0,d.Ng)())?void 0:t.id,y=(0,l.kd)(e.resource.plugin_id,e.triggeredFrom),v=(0,l.v8)(e.resource.plugin_id,e.triggeredFrom),b="whiteboard"===(0,f.fg)(),I=(0,E.hH)(),T=(0,l.Cd)(e.resource.plugin_id,y,v),w=(0,n.I0)(),S=T.length>0,C=(0,s.DG)(),O=(0,c.Jh)(C[e.resource.plugin_id]),A=(0,c.wJ)({isWidget:!1,id:e.resource.plugin_id}),{validatePublishedPluginInOrgAllowlist:N}=(0,s.pL)(e.resource.plugin_id);return(0,u.V)(e,{insertAction:t=>{if(e.showRequestFlow)return Promise.resolve();let r=N();if(!(0,h.rV)(e.resource)&&!r)return Promise.resolve();if(O)A();else{let{e:r}=t;S?w(a.SP({type:o.jq,data:{pluginId:e.resource.plugin_id,target:{top:r.clientY,bottom:r.clientY,right:r.clientX,left:r.clientX,width:0,height:0},triggeredFrom:e.triggeredFrom}})):(0,h.rV)(e.resource)?v():y()}return b&&(0,E.FL)({id:e.resource.plugin_id,type:_.E.PLUGINS,source:e.triggeredFrom,options:{...I,query:e.searchQuery}}),Promise.resolve()},dragPreviewPointerPosition:p.q.CENTERED,getDragPreviewSrc:()=>(0,h.rV)(e.resource)?g.Y:e.resource.redirect_icon_url||"",onPointerDownCallback:()=>{e.showRequestFlow||(0,h.rV)(e.resource)||O||m.W.getAndCache(e.resource,r)},recordingKey:i.ar("plugin",e.resource.plugin_id)})}},465913:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(204829),i=r(75388),a=r(852601),o=r(961215),l=r(177610),s=r(607907),c=r(255267),d=r(425285),u=r(238695);function p(e){let{insertTemplate:t}=(0,i.u8)(),r="whiteboard"===(0,d.fg)(),p=(0,u.hH)(),{primaryKey:m,imageUrl:h}=(0,a.Bs)()(e.resource),_=async n=>{let{dropPosition:i,isClick:a}=n;return r&&(0,u.FL)({id:e.resource.template.id,type:c.E.TEMPLATES,source:e.triggeredFrom,options:{...p,query:e.searchQuery}}),await t({template:e.resource,templateInsertionDirection:a?o.s8o.RIGHT:o.s8o.CUSTOM_POSITION,templateCustomPosition:a?void 0:i,triggeredFrom:e.triggeredFrom})};return(0,l.V)(e,{insertAction:_,dragPreviewPointerPosition:s.q.RELATIVE,getDragPreviewSrc:()=>h||"",recordingKey:n.ar("template",m)})}},936126:(e,t,r)=>{r.d(t,{Q4:()=>d,oY:()=>u,sQ:()=>p});var n=r(204829),i=r(970740),a=r(255267),o=r(425285),l=r(238695),s=r(177610),c=r(607907);function d(e){switch(e){case"Table":return"https://static.figma.com/uploads/ac41ded88c50f0359c02ec3927394b7b33e210b6";case"CodeBlock":return"https://static.figma.com/uploads/8a035152916712353b045f442c2c6c5879ef3e17";case"MindMap":return"https://static.figma.com/uploads/1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e";default:return""}}function u(e){switch(e){case"Table":return"Table";case"CodeBlock":return(0,i.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,i.t)("whiteboard.inserts.mind_map_title");default:return""}}function p(e){let t="whiteboard"===(0,o.fg)(),r=(0,l.hH)(),i=async n=>(e.insertAction(n),t&&(0,l.FL)({type:a.E.MORE,id:e.resource,source:e.triggeredFrom,options:{...r,query:e.searchQuery}}),await Promise.resolve());return(0,s.V)(e,{insertAction:i,dragPreviewPointerPosition:c.q.CENTERED,getDragPreviewSrc:()=>d(e.resource),recordingKey:n.ar("tool",e.resource)})}},152913:(e,t,r)=>{r.d(t,{g:()=>E});var n=r(204829),i=r(518484),a=r(298715),o=r(936561),l=r(269075),s=r(34258),c=r(322186),d=r(177610),u=r(607907),p=r(939179),m=r(661539),h=r(255267),_=r(816980),g=r(425285),f=r(238695);function E(e){var t;let r=null==(t=(0,c.Ng)())?void 0:t.id,i="whiteboard"===(0,g.fg)(),E=(0,f.hH)(),v=(0,a.dZ)(),b=(0,o.Jh)(v[e.resource.plugin_id]),I=(0,o.wJ)({isWidget:!0,id:e.resource.plugin_id});return(0,d.V)(e,{insertAction:t=>{if(b)I();else{let{dropPosition:r}=t;l.y2.user("insert-widget",()=>(0,s.A)({pluginID:e.resource.plugin_id,widgetName:e.resource.name,pluginVersionID:(0,m.rV)(e.resource)?"":e.resource.id,position:r.subtract(y),triggeredFrom:e.triggeredFrom}))}return i&&(0,f.FL)({id:e.resource.plugin_id,type:h.E.WIDGETS,source:e.triggeredFrom,options:{...E,query:e.searchQuery}}),Promise.resolve()},dragPreviewPointerPosition:u.q.RELATIVE,getDragPreviewSrc:()=>(0,m.rV)(e.resource)?_.$:e.resource.redirect_snapshot_url||"",onPointerDownCallback:()=>{(0,m.rV)(e.resource)||b||p.W.getAndCache(e.resource,r)},recordingKey:n.ar("widget",e.resource.plugin_id)})}let y=new i.OW(64,32)},345948:(e,t,r)=>{r.d(t,{A:()=>p,o:()=>m});var n=r(652983),i=r(407908),a=r(365653),o=r(399503),l=r(641052),s=r(764850),c=r(668849),d=r(448694);let u=null;function p(e){let{isTeamFile:t,topLevelMode:r,sceneGraph:p,selectedPageId:m,selectedNodeId:h,numberOfNodesSelected:_,topLevelNodeId:g,topLevelNodeType:f,urlNodeId:E,fileKey:y}=(0,a.c)(e=>{var t,r;let n=Object.keys(e.mirror.sceneGraphSelection),i=(0,c.NE)(e.selectedView)?(0,l.zA)(e.mirror.sceneGraph,(null==n?void 0:n[0])??""):null;return{isTeamFile:!!(null==(t=e.openFile)?void 0:t.teamId),topLevelMode:e.mirror.appModel.topLevelMode,sceneGraph:e.mirror.sceneGraph,selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:n[n.length-1],numberOfNodesSelected:n.length,urlNodeId:"fullscreen"===e.selectedView.view&&e.selectedView.nodeId||void 0,fileKey:null==(r=e.openFile)?void 0:r.key,topLevelNodeId:null==i?void 0:i.guid,topLevelNodeType:null==i?void 0:i.type}}),v=(0,o.ug)(),b=(0,i.oR)(),I=(0,n.useRef)(""),T=(0,n.useRef)(0),w=(0,n.useRef)(!0);(0,n.useEffect)(()=>{if(r===e.topLevelMode&&(t||!e.teamFilesOnly)&&T.current<300){if(w.current&&(w.current=!1,"change_mode"!==u)){I.current=h;return}if(w.current=!1,!h)return;let t=p.get(h);if(!t)return;let n=t.guid;if(n===I.current)return;I.current=n,T.current=T.current+1;let i=s.dCf.getOverridePathForNode(n),a=function(e){for(let t=0;t<22;t++){let r=e.parentNode;if(!r)return t;e=r}return 22}(t)-2,o=u??"canvas";u=null;let l={nodeId:n,nodeType:t.type,pageId:m,topLevelNodeId:g,topLevelNodeType:f,sectionStatus:t.hasReadyStatus?"ready_for_dev":null,overridePath:i,nestingLevel:a,numberOfNodesSelected:_,source:o,hasSeatForDevMode:r===s.bN1.DEV_HANDOFF?v:null};(0,d.hp)(e.eventName,y,b.getState(),l)}},[r,E,t,p,m,h,_,e.topLevelMode,e.eventName,e.teamFilesOnly,y,b,g,f,v])}function m(e){u=e}},497868:(e,t,r)=>{r.d(t,{A:()=>l,Q:()=>s});var n=r(652983),i=r(407908),a=r(518484),o=r(280251);function l(){return(0,i.v9)(e=>e.pickerShown)}function s(e){let t=(0,i.I0)(),r=l();return(0,n.useMemo)(()=>{let n=(null==r?void 0:r.id)===e,i=new a.OW((null==r?void 0:r.initialX)??0,(null==r?void 0:r.initialY)??0);function l(){t(o.le())}function s(r){let{x:n,y:i}=r;t(o.bO({id:e,initialX:n,initialY:i}))}return{showing:n,initialPosition:i,hide:l,show:s,toggle:function(e){n?l():s(e())}}},[e,t,r])}},312616:(e,t,r)=>{r.d(t,{a:()=>o,p:()=>a});var n=r(407908),i=r(365653);let a=e=>(0,n.v9)(t=>t.userFlags[e]),o=e=>(0,i.c)(t=>t.userFlags[e])},135348:(e,t,r)=>{r.d(t,{G3:()=>g,GF:()=>h,L3:()=>p,_P:()=>m,d3:()=>u,mt:()=>_});var n,i=r(652983),a=r(5453),o=r(669277),l=r(862610),s=r(468310),c=r(538483),d=r(761767);function u(e){let t=(0,o.mU)(l.WorkspacesCanAdminView,{orgId:e});return i.useMemo(()=>{var e,r;if("loaded"===t.status){let n=(null==(r=null==(e=t.data)?void 0:e.org)?void 0:r.workspaces)??[],i=n.filter(e=>e.canAdmin);return(0,a.aV)(i,"name"),(0,o.wl)(i)}return t},[t])}function p(e){let t=(0,o.mU)(l.CurrentUserAssignedWorkspaceView,{orgId:e});return i.useMemo(()=>{var e,r,n;if("loaded"===t.status){let i=null==(n=null==(r=null==(e=t.data)?void 0:e.currentUser)?void 0:r.baseOrgUser)?void 0:n.workspaceUsers,a=null==i?void 0:i.find(e=>e.isMainWorkspace);return(0,o.wl)((null==a?void 0:a.workspaceId)??null)}return t},[t])}function m(e,t){var r,n;let i=(0,o.mU)(l.WorkspacesDirectoryView,{orgId:e},{enabled:!!e&&!!t});if(null===t)return(0,o.wl)(c.F);if("loaded"===i.status){let e=(null==(n=null==(r=i.data)?void 0:r.org)?void 0:n.workspaces)??[],a=e.find(e=>e.id===t);return(0,o.wl)(a)}return i}function h(e){let t=(0,o.mU)(l.OrgHasWorkspacesView,{orgId:e});return i.useMemo(()=>{var e,r,n;if("loaded"===t.status){let i=((null==(r=null==(e=t.data.org)?void 0:e.workspaces)?void 0:r.length)||0)>0&&!!(null==(n=t.data.org)?void 0:n.bigmaEnabledAt);return(0,o.wl)(i)}return t},[t])}var _=((n=_||{})[n.IS_GUEST=1]="IS_GUEST",n[n.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",n[n.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",n[n.LG_LOADING=4]="LG_LOADING",n);let g=(e,t)=>{let r=(0,o.mU)(l.WorkspaceCanCreateTeamView,{orgId:(null==e?void 0:e.id)??null}),{permission:n,workspaceMember:a,canCreateTeamInWorkspace:c,teamCreationControls:u,loading:p}=i.useMemo(()=>{var e,n,i,a,o,l,s,c,u;if("loaded"!==r.status)return{permission:d.Gu.GUEST,workspaceMember:null,canCreateTeamInWorkspace:!1,loading:!0};let p=null==(n=null==(e=r.data)?void 0:e.currentUser)?void 0:n.baseOrgUser,m=null==p?void 0:p.permission,h=null==(i=null==p?void 0:p.workspaceUsers)?void 0:i.find(e=>e.isMainWorkspace),_=!!(null==(l=null==(o=null==(a=r.data)?void 0:a.org)?void 0:o.workspaces)?void 0:l.find(e=>e.canCreateTeam&&e.id===t)),g=null==(u=null==(c=null==(s=r.data)?void 0:s.org)?void 0:c.sharedOrgLicenseGroupSetting)?void 0:u.teamCreationControls;return{permission:m,workspaceMember:h,canCreateTeamInWorkspace:_,teamCreationControls:g,loading:!1}},[r,t]);if(p)return{canCreateTeam:!1,cannotCreateTeamReason:4};let m=u===s.ls.TEAM_CREATION_CONTROLS_ADMIN_ONLY;return n===d.Gu.GUEST?{canCreateTeam:!1,cannotCreateTeamReason:1}:n===d.Gu.ADMIN?{canCreateTeam:!0,cannotCreateTeamReason:null}:n!==d.Gu.MEMBER?{canCreateTeam:!1,cannotCreateTeamReason:null}:t?c?{canCreateTeam:!0,cannotCreateTeamReason:null}:(null==a?void 0:a.workspaceId)!==t?{canCreateTeam:!1,cannotCreateTeamReason:2}:m?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!1,cannotCreateTeamReason:null}:a?{canCreateTeam:!1,cannotCreateTeamReason:2}:m?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!0,cannotCreateTeamReason:null}}},179640:(e,t,r)=>{r.d(t,{$M:()=>A,C6:()=>G,D3:()=>L,DO:()=>W,H:()=>U,KE:()=>S,Kf:()=>H,M5:()=>z,O5:()=>D,Ol:()=>k,TC:()=>C,VZ:()=>N,Yo:()=>M,Z4:()=>O,Zs:()=>P,af:()=>R,bG:()=>K,bR:()=>w,dv:()=>x,j5:()=>F,u8:()=>B}),r(5453);var n,i,a=r(220518),o=r(716250),l=r(523495),s=r(413667),c=r(970740),d=r(573196),u=r(289629),p=r(955687),m=r(496478),h=r(158774),_=r(961215),g=r(761767),f=r(315100);r(348209);var E=r(465883),y=r(363402),v=r(864357),b=r(54055),I=r(54159);let T={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},w={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:E.Se.USER,badges:[]},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",canvas_snapshot_url:null,created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:g.Zs.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",tags:[],hide_remixes:!1,thumbnail_is_set:!1,is_pinned:!1,comments_setting:null,should_load_prototype_lib:!1,publishing_status:g.UG.APPROVED_PUBLIC,badges:[]};var S=((n=S||{}).KEY="is-community-duplicate",n.VALUE="1",n),C=((i=C||{}).CURRENT_FILE="currentFile",i.NEW_FILE="newFile",i);function O(e){switch(e){case"currentFile":default:return(0,c.t)("browse_templates_modal.add_template");case"newFile":return(0,c.t)("browse_templates_modal.use_template")}}let A="USER_UPLOADED";function N(e,t){return(0,b.FO)(e,t,w)}function L(e,t){let r=t||e.current_hub_file_version_id;return(0,b.FO)(r,e.versions,T)}function P(e,t,r,n){var i,a,o,l;let s;let p=e.figFilePublishedAsHubFile[t],h=N(p,e.hubFiles),E=L(h),y=b.aQ,I=e.fileByKey[t];!n&&!r&&((null==(i=e.authedActiveCommunityProfile)?void 0:i.team_id)||(null==(a=e.authedActiveCommunityProfile)?void 0:a.org_id))&&(s=e.authedActiveCommunityProfile.team_id?{team_id:e.authedActiveCommunityProfile.team_id}:{org_id:e.authedActiveCommunityProfile.org_id});let T=(0,m.oH)(h,I,e,s),w=r?h.viewer_mode:"design"===I.editor_type?g.Zs.CANVAS:g.Zs.WHITEBOARD;!r&&h.viewer_mode===g.Zs.PROTOTYPE&&n&&(null==(o=_.fs0)?void 0:o.firstPagePrototypeStatus())===_.Uqv.VALID&&(w=g.Zs.PROTOTYPE);let S=[];p&&(null==h?void 0:h.tags)?S=h.tags:(null==I?void 0:I.editor_type)==="whiteboard"&&(S=["figjam"]);let C={...(0,v.UA)(),tokens:S.map(e=>({state:f.k.OK,content:e}))},O={...(0,v.UA)(),tokens:(h.community_publishers?[...h.community_publishers.accepted,...h.community_publishers.pending||[]]:[]).reduce((t,r)=>{let n=e.authedProfilesById[r.id];return(0,m.YH)(n,T)?t:t.concat([{state:f.k.OK,content:r}])},[])};return{name:E.name||(I.name===(0,c.t)("fullscreen.fullscreen_view_selector.untitled")?"":I.name),description:E.description||y.description,categoryId:h.category_id,creatorPolicy:E.creator_policy||y.creatorPolicy,tags:C,viewerMode:w,scalingMode:h.scaling_mode,author:T,publishers:O,commentsSetting:h.comments_setting||y.commentsSetting,hideRemixes:h.hide_remixes,blockPublishingOnToS:(0,m.ED)(e,T),price:(0,u.wB)(h.monetized_resource_metadata),isPaid:!!h.monetized_resource_metadata,supportContact:h.support_contact||(null==(l=e.user)?void 0:l.email),carouselMedia:(0,d.mM)(h),coverImageCarouselMediaId:h.cover_image_carousel_media_id}}function R(e,t){return e?t?(0,u.io)(t)?t<u.kc?(0,c.t)("community.seller.paid_resource_minimum_err"):(0,c.t)("community.seller.paid_resource_maximum_err"):(0,u.nT)(t)?(0,c.t)("community.seller.prices_must_follow_format"):void 0:(0,c.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function k(e){let t=(0,b.gK)(e||null).length;return 0===t?(0,c.t)("community.publishing.name_must_not_be_empty"):t<4?(0,c.t)("community.publishing.name_must_be_4_characters_long"):t>100?(0,c.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function D(e){let t=(0,b.gK)(e||null).length;if(t>1e4)return(0,c.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function M(e){let t=(0,b.gK)(e||null).length;if(t>1e4)return(0,c.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function F(e,t){return e&&!t?(0,c.t)("community.publishing.support_contact_must_not_be_empty"):!t||(0,a.Jh)(t)||(0,l.CB)(t)?void 0:(0,c.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function x(e){if(!e)return(0,c.t)("community.publishing.category_cant_be_empty")}function U(e){if((0,p.E)("exp_required_hub_file_thumbnail").defaultValue(!1).treatment("variant",!0).get()&&!e)return(0,c.t)("community.publishing.thumbnail_is_required")}function B(e){let t={name:k(e.name),description:D(e.description),creatorPolicy:M(e.creatorPolicy)};e.tags&&(t.tags=(0,b.ny)(e.tags)||void 0),e.publisherIds&&(t.publisherIds=(0,b.kH)(e.publisherIds.length)||void 0),"thumbnailIsSet"in e&&(t.thumbnailIsSet=U(e.thumbnailIsSet)||void 0),(0,o.BZ)().cmty_rdp_redesign_publishing&&(t.carouselMedia=(0,m.k6)(e.carouselMedia),t.categoryId=x(e.categoryId));let r="isPaid"in e&&!!e.isPaid;return t.price=R(r,e.price),t.supportContact=F(r,e.supportContact),Object.keys(t).forEach(e=>!t[e]&&delete t[e]),t}let V=e=>{if(!h.Gr)return null;let[t,r]=_.plG.generateThumbnailForNode(e,I.cm,I.YG,2,{});return r},G=(e,t)=>Object.keys(e).reduce((r,n)=>{var i,a;let o=e[n],l=null==(a=null==(i=o.community_publishers)?void 0:i.accepted)?void 0:a.some(e=>e.id===t);return l&&(r[n]=o),r},{}),H=e=>e===y.bD.FULLSCREEN||e===y.bD.FULLSCREEN_WITH_COMMENTS;function W(e,t){let r=new XMLHttpRequest;return r.open("GET",`/api/hub_files/cover_image?file_key=${e}`,!0),r.setRequestHeader("X-Figma-User-ID",t.id),r.setRequestHeader("X-Csrf-Bypass","yes"),r.setRequestHeader("tsid",(0,s.L)()),r.responseType="blob",new Promise(e=>{r.onload=function(){let t=new Image;t.src=URL.createObjectURL(r.response),t.onload=async()=>{let r=document.createElement("canvas");r.width=I.cm,r.height=I.YG;let n=r.width,i=t.height*(r.width/t.width),a=0,o=r.height/2-i/2;i>r.height&&(i=r.height,n=t.width*(r.height/t.height),a=r.width/2-n/2,o=0);let l=r.getContext("2d");l.drawImage(t,a,o,n,i);let s=await new Promise(e=>r.toBlob(e)),[c]=await Promise.all([(0,m.rn)(s)]),d=URL.createObjectURL(new Blob([c||""]));e({url:d,buffer:new Uint8Array(c)})}},r.send(null)})}function K(e,t){let r=null;(null==e?void 0:e.thumbnailGuid)&&(r=V(null==e?void 0:e.thumbnailGuid)),r&&0!==r.length||(r=V(t));let n=URL.createObjectURL(new Blob([r||""]));return{url:n,buffer:r}}function z(e){return!!e&&e.publishing_status===g.UG.APPROVED_PUBLIC}},697364:(e,t,r)=>{r.d(t,{h:()=>i});var n=r(465268);let i=(e,t=!1)=>{let r=e.deltaY,i=e.ctrlKey&&!t,a=i&&(n.x.isChrome()||n.x.isFirefox());return a?r/=-100:0!==r&&(r=r/Math.abs(r)*Math.min(Math.abs(r),10*Math.cbrt(Math.abs(r)))),a?Math.pow(4,r):Math.pow(.995,r)}},697709:(e,t,r)=>{r.d(t,{iA:()=>a,oU:()=>i,rc:()=>c,u4:()=>s,uy:()=>n,zE:()=>l,zk:()=>o});let n=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],i=[["Argentina","AR"],["Armenia","AM"],["Australia","AU"],["Austria","AT"],["Belgium","BE"],["Bolivia (Plurinational State of)","BO"],["Bosnia and Herzegovina","BA"],["Bulgaria","BG"],["Cambodia","KH"],["Canada","CA"],["Chile","CL"],["Colombia","CO"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Dominican Republic","DO"],["Egypt","EG"],["El Salvador","SV"],["Estonia","EE"],["Finland","FI"],["France","FR"],["Gambia","GM"],["Germany","DE"],["Greece","GR"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["Indonesia","ID"],["Ireland","IE"],["Israel","IL"],["Italy","IT"],["Japan","JP"],["Jordan","JO"],["Kenya","KE"],["Korea (Republic of)","KR"],["Latvia","LV"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Malaysia","MY"],["Malta","MT"],["Mauritius","MU"],["Mexico","MX"],["Morocco","MA"],["Namibia","NA"],["Netherlands","NL"],["New Zealand","NZ"],["Norway","NO"],["Panama","PA"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Poland","PL"],["Portugal","PT"],["Romania","RO"],["Saudi Arabia","SA"],["Senegal","SN"],["Singapore","SG"],["Slovakia","SK"],["Slovenia","SI"],["South Africa","ZA"],["Spain","ES"],["Sweden","SE"],["Switzerland","CH"],["Thailand","TH"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["Viet Nam","VN"]],a=["AX","CU","GS","HM","IO","IR","KP","LB","LY","SD","SO","SY","TF","UM"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,t)=>e[1].localeCompare(t[1])),l=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,t)=>e[1].localeCompare(t[1])),s=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,t)=>e[1].localeCompare(t[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},173339:(e,t,r)=>{r.d(t,{_2:()=>o,gO:()=>a,l6:()=>l});var n=r(239299),i=r(703791);function a(e){let t={};e.forEach((e,r)=>{t[r]=e});let r=i.Z$.map(t=>{let r=Object.entries(t.list).map(([t,r])=>null==r?!(t in e):e.get(t)===r).filter(e=>!e).length;return{name:t.name,isValid:0===r}}),n=r.filter(e=>e.isValid).map(e=>e.name);return{layoutJSON:t,detectedLayoutsWeb:n}}async function o(e){try{let e=null;if(n.YO&&(e=await n.YO.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let t=navigator.keyboard;if(!t||!t.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let r=await t.getLayoutMap(),{detectedLayoutsWeb:i,layoutJSON:o}=a(r);return{desktopLayout:e,detectedLayouts:i,layoutJSON:o}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function l(e){let t=e.desktopLayout?(0,i.C5)(e.desktopLayout):null;return t||(1===e.detectedLayouts.length&&i.un[e.detectedLayouts[0]]?i.un[e.detectedLayouts[0]]:null)}},804770:(e,t,r)=>{r.d(t,{a:()=>E,t:()=>y});var n=r(652983),i=r(407908),a=r(220518),o=r(269658),l=r(669277),s=r(571529),c=r(680356),d=r(970740),u=r(746947),p=r(935174),m=r(761767),h=r(862610),_=r(425285),g=r(448694),f=r(442152);let E=(e,t)=>!!((null==e?void 0:e.is_ipad_user)||(0,a.JE)(t));function y(){let e=(0,i.I0)(),t=n.useRef(""),r="whiteboard"===(0,_.fg)(),a=(0,f.tm)(),E=s.ys?m.Yi.DESKTOP:m.Yi.IPAD,y=(0,l.mU)(h.LatestClipboardData,{deviceType:E});n.useEffect(()=>{var n;if(!y||"loaded"!==y.status)return;let i=y.data.latestClipboardData;if(i.deviceType!==E||!i.presignedDownloadUrl||!i.timestamp||Date.now()-parseInt(i.timestamp)>6e4)return;let l=o.V.getState(),s={copy_device_type:i.deviceType,copy_timestamp:i.timestamp};(0,g.hp)("crossDeviceCopyPaste_s3_header_fetch_start",null==(n=l.openFile)?void 0:n.key,l,s);let m=(0,c.k)();t.current=m,b(()=>fetch(i.presignedDownloadUrl,{method:"HEAD"}),m,t).then(({success:n,retryCount:o,errorMessage:c})=>{var h,_;if(a()){if(!n){(0,g.hp)("crossDeviceCopyPaste_s3_header_fetch_failure",null==(h=l.openFile)?void 0:h.key,l,{...s,error:c,retryCount:o});return}(0,g.hp)("crossDeviceCopyPaste_s3_header_fetch_success",null==(_=l.openFile)?void 0:_.key,l,{...s,retryCount:o}),e(u.N.dequeue({type:p.k.CLIPBOARD_DATA_AVAILABLE})),e(u.N.enqueue({notification:{type:p.k.CLIPBOARD_DATA_AVAILABLE,message:(0,d.t)("fullscreen.notification.clipboard_data_available"),downloadUrl:i.presignedDownloadUrl,deviceType:i.deviceType,timestamp:i.timestamp,isFigJam:r,acceptCallback:()=>{var e;return(0,g.hp)("crossDeviceCopyPaste_dialog_paste_tapped",null==(e=l.openFile)?void 0:e.key,l,s)},dismissCallback:()=>{var e;return(0,g.hp)("crossDeviceCopyPaste_dialog_dismiss_tapped",null==(e=l.openFile)?void 0:e.key,l,s)},displayCallback:()=>{var e;return(0,g.hp)("crossDeviceCopyPaste_dialog_shown",null==(e=l.openFile)?void 0:e.key,l,s)}}})),setTimeout(()=>{a()&&t.current===m&&e(u.N.dequeue({type:p.k.CLIPBOARD_DATA_AVAILABLE}))},6e4)}})},[r,y,E,t,e,a])}let v=e=>new Promise(t=>setTimeout(t,300*e)),b=async(e,t,r,n=0)=>{if(t!==r.current)return{success:!1,retryCount:n,errorMessage:"Download retry cancelled by new user initiated paste action"};try{let t=await e();if(!t.ok)throw Error("Failed to fetch header with status "+t.status)}catch(i){if(n>4)return{success:!1,retryCount:n,errorMessage:i.toString()};return await v(n),b(e,t,r,n+1)}return{success:!0,retryCount:n}}},691236:(e,t,r)=>{r.d(t,{Ks:()=>A,PD:()=>M,Rk:()=>N,bm:()=>D,ec:()=>O,uZ:()=>L});var n=r(652983),i=r(407908),a=r(605271),o=r.n(a),l=r(864038),s=r.n(l),c=r(490292),d=r.n(c),u=r(716250),p=r(303498),m=r(669277),h=r(615537),_=r(217810),g=r(249683),f=r(954109),E=r(200273),y=r(112088),v=r(862610),b=r(485091),I=r(523945),T=r(508887),w=r(334245),S=r(492459);let C=n.createContext(null);function O(e){let{subscriptions:t,requestLibraryItems:r,releaseLibraryItems:i}=(0,_.LG)(n.useContext(C),"Must call `useLibraryData` from within <LibraryDataProvider>");return n.useEffect(()=>{if(e)return r(e),()=>i(e)},[r,i,e]),e&&t[e]||(0,m.AC)()}function A(){let{subscriptions:e}=(0,_.LG)(n.useContext(C),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function N({fileKey:e}){return O(e),null}function L({children:e,maxSubscriptionsBeforeCleanup:t=20}){let r=(0,E.uC)(),[a,l]=n.useState({}),c=n.useCallback((e,t)=>{l(r=>({...r,[e]:t}))},[]),p=n.useMemo(()=>{let e={};for(let t of Object.keys(a)){let r=a[t];null!=r&&(e[t]=k(r))}return e},[a]),[m,h]=n.useState({});n.useEffect(()=>{r&&h(e=>({...e,[r]:(e[r]||0)+1}))},[r]);let[_,v]=n.useState({});!function(e){let t=n.useMemo(()=>(null==e?void 0:e.status)==="loaded"?M(e):[],[e]),r=n.useMemo(()=>s()(t,e=>e.node_id),[t]),a=n.useMemo(()=>(null==e?void 0:e.status)==="loaded"?F(e):[],[e]),o=n.useMemo(()=>s()(a,"node_id"),[a]),l=n.useMemo(()=>(null==e?void 0:e.status)==="loaded"?x(e):[],[e]),c=n.useMemo(()=>s()(l,e=>e.node_id),[l]),d=(0,S.xg)(),p=n.useMemo(()=>s()(d,e=>e.node_id),[d]),m=(0,S.j3)(),h=n.useMemo(()=>s()(m,e=>e.node_id),[m]),_=(0,I.lt)(),E=n.useMemo(()=>(0,u.BZ)().dse_editor_templates_v1?s()(_,e=>e.node_id):{},[_]),v=(0,i.I0)();n.useLayoutEffect(()=>{v(g.HN({components:o,styles:r,stateGroups:c,variableSets:p,variables:h,modules:E})),v((0,f.k$)())},[v,o,c,r,p,h,E]),n.useEffect(()=>{((null==e?void 0:e.status)==="loaded"||(null==e?void 0:e.status)==="errors")&&(0,y.to)()},[e])}(r?p[r]:null);let b=n.useCallback(e=>{h(t=>{let r=t[e]??0;return{...t,[e]:r+1}}),v(t=>({...t,[e]:Date.now()}))},[]),T=n.useCallback(e=>{h(t=>{let r=t[e]??0,n=r-1;if(n>0)return{...t,[e]:n};{n<0&&console.error("Tried to release subscription for library items that doesn't exist");let r={...t};return delete r[e],r}})},[]),w=Object.keys(m),O=Object.keys(a),A=d()([...w,...O]),N=o()(A,w);n.useEffect(()=>{let e=A.length,r=N.length;e>t&&r>0&&l(r=>{let n=[...N].sort((e,t)=>{let r=_[e],n=_[t];return null==r?-1:null==n?1:null==r&&null==n?0:r-n}),i=n.slice(0,e-t),a={...r};for(let e of i)delete a[e];return a})});let L=n.useMemo(()=>({requestLibraryItems:b,releaseLibraryItems:T,fetchedFileKeys:A,subscriptions:p}),[b,T,A,p]);return n.createElement(n.Fragment,null,n.createElement(C.Provider,{value:L},e),A.map(e=>n.createElement(R,{key:e,fileKey:e,onChange:c})),Object.entries(p).map(([e,t])=>t&&n.createElement(P,{subscription:t,fileKey:e,key:e})))}function P({subscription:e,fileKey:t}){return(0,p.n_)(e,"Library Data Subscription Load Time",{fileKey:t,numStyles:"loaded"===e.status?e.data.numStyles:0}),null}let R=n.memo(function({fileKey:e,onChange:t}){let r=e!==(0,E.uC)(),i=(0,w.mY)(e),a=(0,T.RI)(),{view:o,args:l,options:s}=(()=>{if(i)return{view:v.CommunityLibraryStyleData,args:{hubFileId:e},options:{enabled:a()}};let t=r?v.LibraryStyleData:v.LibraryData;return{view:t,args:{fileKey:e},options:void 0}})(),c=(0,m.mU)(o,l,s);return n.useEffect(()=>{t(e,c)},[t,e,c]),null}),k=(0,h.Hf)(function(e){var t;if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,m.Pt)([]);let t=e.libraryHierarchyPaths.map(t=>{let r=t.styles.map(t=>(0,b.j2)(t,{key:e.hubFileId}));return{pageName:t.pageName??void 0,containingFrameName:t.containingFrameName??void 0,nameHierarchyPath:t.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:r}});return(0,m.wl)({fileKey:e.hubFileId,name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:t})}let n=r.file;if(!n)return(0,m.Pt)([]);let i=n.libraryHierarchyPaths.map(e=>{let t="components"in e?e.components.map(e=>(0,b.DV)(e,n)):[],r="stateGroups"in e?e.stateGroups.map(e=>(0,b.q4)(e,n)):[],i=e.styles.map(e=>(0,b.j2)(e,n));return{pageName:e.pageName??void 0,containingFrameName:e.containingFrameName??void 0,nameHierarchyPath:e.nameHierarchyPath??void 0,components:t,stateGroups:r,styles:i}});return(0,m.wl)({fileKey:n.key,name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:(null==(t=n.library)?void 0:t.numStyles)??0,libraryHierarchyPaths:i})}),D=(e,t)=>{let r=[];for(let n of e.libraryHierarchyPaths)for(let e of n.styles)t?e.style_type===t&&r.push(e):r.push(e);return r},M=(e,t)=>D(e.data,t),F=e=>{let t=[];for(let r of e.data.libraryHierarchyPaths)for(let e of r.components)t.push(e);return t},x=e=>{let t=[];for(let r of e.data.libraryHierarchyPaths)for(let e of r.stateGroups)t.push(e);return t}},112088:(e,t,r)=>{r.d(t,{Ar:()=>eV,Be:()=>ej,Cc:()=>t1,Cm:()=>tU,Cv:()=>eA,E:()=>eO,EA:()=>eE,Fv:()=>tw,Fz:()=>eD,GH:()=>tv,Gn:()=>ts,HI:()=>tM,HL:()=>en,Hr:()=>tL,I3:()=>tX,IK:()=>tA,IM:()=>tG,Ik:()=>e8,Iy:()=>te,JA:()=>ty,JY:()=>tY,K6:()=>t_,KY:()=>e0,LI:()=>tD,LW:()=>tW,M:()=>tE,Nf:()=>eb,Or:()=>$,Ot:()=>tQ,Ov:()=>eQ,PJ:()=>e6,PU:()=>ta,PZ:()=>e3,QH:()=>tH,Qf:()=>tK,Rs:()=>tl,S7:()=>tt,TA:()=>tO,TO:()=>tm,TS:()=>tP,UA:()=>eM,VF:()=>er,WF:()=>tJ,X1:()=>ef,XD:()=>eq,XG:()=>tn,ZF:()=>ec,_G:()=>tR,aM:()=>e$,aR:()=>eg,ap:()=>tx,b7:()=>tT,b_:()=>tg,bk:()=>X,cC:()=>tf,cZ:()=>et,cy:()=>ep,dU:()=>eF,e9:()=>tz,eb:()=>e9,ej:()=>e1,fY:()=>em,fu:()=>J,h3:()=>ew,i4:()=>ea,iG:()=>td,iI:()=>t0,jq:()=>eR,jv:()=>e_,lL:()=>tj,mL:()=>tV,me:()=>tZ,mf:()=>e5,nT:()=>tF,oE:()=>ev,os:()=>tq,p2:()=>eN,ri:()=>ee,rq:()=>ek,rs:()=>tc,s9:()=>j,tD:()=>el,ti:()=>ei,tj:()=>Y,to:()=>tC,u$:()=>to,uX:()=>Q,uY:()=>eI,us:()=>q,uv:()=>eo,vB:()=>es,wF:()=>eW,wI:()=>tS,wM:()=>Z,wQ:()=>tB,x9:()=>eJ,yg:()=>th,yx:()=>tk,zC:()=>t$,zE:()=>e2,zQ:()=>ed,zT:()=>ez,zo:()=>tu});var n,i=r(652983),a=r(407908),o=r(903010),l=r.n(o),s=r(600486),c=r(5453),d=r(46347),u=r(269658),p=r(365653),m=r(716250),h=r(615537),_=r(142891),g=r(286206),f=r(668683),E=r(523495),y=r(117986),v=r(31642),b=r(297296),I=r(970740),T=r(746947),w=r(935174),S=r(215698),C=r(721154),O=r(249683),A=r(671708),N=r(28786),L=r(837728),P=r(667981),R=r(999177),k=r(961215),D=r(992750),M=r(699072),F=r(481508),x=r(436649),U=r(966922),B=r(166885),V=r(605508),G=r(220949),H=r(152691),W=r(236893),K=r(531640),z=r(456326),Z=((n=Z||{}).CURRENT="current",n.ALL="all",n);let Y=i.createContext(null),j=e=>e===B.mk.CURRENT||e===B.mk.CHANGED||e===B.mk.DELETED,$=e=>e===B.mk.NEW||e===B.mk.CHANGED||e===B.mk.DELETED;function q(e){switch(e.type){case B.h3.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case B.h3.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case B.h3.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case B.h3.VARIABLE_SET:case B.h3.VARIABLE:case B.h3.MODULE:return{type:e.type,key:e.key,version:e.version};default:(0,d.hu)(!1,`Unknown type ${null==e?void 0:e.type}`)}}function X(e){let{key:t}=q(e);return(0,d.q8)(void 0!==t,"Asset had no key",{asset:e}),t}function J(e){return e.map(X)}function Q(e){return q(e).version}let ee=e=>!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style;function et(e,t){return`/file/${e}?node-id=${encodeURIComponent(t)}&main-component=1`}function er(e){return et(e.file_key,e.node_id)}let en=(e,t,r)=>{for(let r of Object.values(t))if("loaded"===r.status&&r.data.key===e)return r.data;for(let t of Object.values(r))if(t.key===e)return t;return null};function ei(e,t){let r=Object.create(null);if(!t)return r;let n=t.team_id||B.p3,i=e[n]&&e[n][t.key]||Object.create(null);for(let e in i)null==i[e].unpublished_at&&(r[e]=i[e]);return r}function ea(e,t){let r=ei(e,t);return Object.keys(r).map(e=>r[e])}function eo(e){let t=[];return el(e,(r,n,i)=>{t.push(e[r][n][i])}),t}function el(e,t){Object.keys(e).forEach(r=>{Object.keys(e[r]).forEach(n=>{Object.keys(e[r][n]).forEach(e=>{t(r,n,e)})})})}let es=e=>{let t=Object.keys(e).map(t=>e[t]);return t.filter(e=>!e.deletedFromSceneGraph)},ec=(e,t)=>{let r=[];for(let n in e){let i=e[n];i.style_type!==t||i.deletedFromSceneGraph||r.push(i)}return r};function ed(e,t,r,n){let i=[];for(let a in t)for(let o in t[a]){let l={team_id:a,key:o};if(eO(e,r,l,n))for(let e in t[a][o]){let r=t[a][o][e];i.push(r)}}return i}let eu=new Set,ep=async e=>{e=e.filter(e=>e.canvas_url&&!P.uK.hasKeyInCache(P._K.augmentUrlWithFileVersion(e.canvas_url))&&!eu.has(e.key));let t=new Map(e.map(e=>[e.key,e.canvas_url])),r=e.map(e=>e.key);if(r.forEach(e=>eu.add(e)),0!==r.length)try{let e=await v.ZP.post("/style/canvases",{style_keys:r});for(let[r,n]of Object.entries(e.data.meta.urls))v.ZP.crossOriginGetAny(n,null,{responseType:"arraybuffer"}).then(({data:e})=>{let n=t.get((0,b.hx)(r));if(n){let t=P._K.augmentUrlWithFileVersion(n);P.uK.putCanvas(t,e)}eu.delete((0,b.hx)(r))}).catch(()=>{eu.delete((0,b.hx)(r))})}catch(e){r.forEach(e=>eu.delete(e))}},em=["TEXT","FILL","EFFECT","GRID"],eh=(e,t)=>{let r=t?1:2;switch(e){case"TEXT":return(0,I.t)("design_systems.styles.text_style",{numStyles:r});case"FILL":return(0,I.t)("design_systems.styles.color_style",{numStyles:r});case"EFFECT":return(0,I.t)("design_systems.styles.effect_style",{numStyles:r});case"GRID":return(0,I.t)("design_systems.styles.grid_style",{numStyles:r});case"EXPORT":return(0,I.t)("design_systems.styles.export_style",{numStyles:r});case"STROKE":return(0,I.t)("design_systems.styles.stroke_style",{numStyles:r});default:return(0,s.L9)("Unknown style type",{styleType:e}),(0,I.t)("design_systems.styles.styles",{numStyles:r})}},e_=e=>eh(e,!1),eg=e=>eh(e,!0),ef=e=>{let t="";if("inheritFillStyleKeyForStroke"===e)t=(0,I.t)("design_systems.styles.stroke_color_style");else if("inheritFillStyleKey"===e)t=(0,I.t)("design_systems.styles.fill_color_style");else{let r=(0,D.So)(e);t=eg(r)}return t},eE=(e,t)=>{var r,n;return t in e?{design:!!(null==(r=e[t])?void 0:r.design),figjam:!!(null==(n=e[t])?void 0:n.figjam)}:{design:null,figjam:null}},ey=e=>null!==e.design&&null!==e.figjam,ev=(e,t)=>t?eE(e,t.key):{design:!1,figjam:!1},eb=(e,t)=>{if(!t)return{design:!1,figjam:!1};let r=ev(e.subscriptions.forCurrentOrg,t),n=eE(e.subscriptions.forCurrentWorkspace,t.key),i=eE(e.subscriptions.forCurrentLicenseGroup,t.key);return ey(n)?n:ey(i)?i:r},eI=(e,t,r)=>{if(!r)return{design:!1,figjam:!1};let n=eb(e,r),i=eE(e.subscriptions.byTeam[t]||{},r.key);return ey(i)?i:n},eT=(e,t)=>{if(!t)return{design:!1,figjam:!1};let r=ev(e.subscriptions.forCurrentOrg,t),n=eE(e.subscriptions.forCurrentUser,t.key);return ey(n)?n:r},ew=(e,t)=>{let r=eT(e,t);if(ey(r))return r;for(let n in e.subscriptions.byTeam){let i=eI(e,n,t);i.design&&(r.design=!0),i.figjam&&(r.figjam=!0)}return r},eS=(e,t,r)=>{let n=eT(e,r);return ey(n)?n:eI(e,t,r)},eC=(e,t)=>e.key===t.key||e.source_file_key===t.key||e.key===t.source_file_key,eO=(e,t,r,n)=>{let i;if(!t||!r||eC(t,r))return!1;let a=(0,m.BZ)().ps_benchmark;i=a?t.team_id?n?eS(e,t.team_id,r):eI(e,t.team_id,r):ew(e,r):t.team_id?eI(e,t.team_id,r):ew(e,r);let o="whiteboard"===t.editor_type?i.figjam:i.design,l=e.subscriptions.byFile;return t.key in l&&r.key in l[t.key]?l[t.key][r.key]:tn(e,r.key)?o||null===o:o},eA=(e,t,r,n)=>eO(e,{key:t.key,team_id:t.teamId,editor_type:t.editorType,source_file_key:t.sourceFileKey},r,n);function eN(e,t,r,n,i){if(r.length)return!0;for(let r of n){let n;let a=i[r];if(!a)continue;n="file_key"in a?a.file_key:"loaded"===a.status&&a.data.file_key;let o=(0,R.eV)(t.project);if(n&&eO(e,{key:t.key,team_id:t.teamId,editor_type:t.editorType,source_file_key:t.sourceFileKey},{key:n},o))return!0}return!1}let eL=(e,t)=>{if(e.style_type===t.style_type)return 0;let r=em.indexOf(e.style_type),n=em.indexOf(t.style_type);return r<n?-1:1},eP=(e,t)=>-(0,_.WQ)(e.sort_position||"",t.sort_position||""),eR=(e,t)=>{let r=eL(e,t);return 0===r?eP(e,t):r},ek=e=>{e.sort(eP)},eD=e=>{let t=new Map;return e.forEach(e=>{let r=t.get(e.style_type);r?r.push(e):t.set(e.style_type,[e])}),t},eM=(e,t)=>{let r=e=>e&&e.toLowerCase?e.toLowerCase():"",n=e.containing_frame||{},i=t.containing_frame||{};return n.pageId!==i.pageId?r(n.pageName)<r(i.pageName)?-1:1:n.nodeId!==i.nodeId?r(n.name)<r(i.name)?-1:1:r(e.name)<r(t.name)?-1:1};function eF(e){let t=[...e];return ek(t),{stylesByPrefix:t.reduce((e,t)=>{let r=(0,M.ce)(t.name);return e[r]=e[r]||[],e[r].push(t),e},Object.create(null)),sortedPrefixes:(0,W.IE)(t)}}let ex=!0;function eU(e,t){if(!e||!t)return!0;for(let r in e){if(!(r in t))return!0;let n=e[r],i=t[r];for(let e in n)if(n[e]!==i[e])return!0;for(let e in i)if(!(e in n))return!0}for(let r in t)if(!(r in e))return!0;return!1}function eB(e,t,r,n,i,a,o,l,s){let c=Object.create(null),d=0;for(let u in t.forEach(t=>{let l=t.nodeId,u=n[l];a[l]=eY(i[l]),c[l]=e(u,r[l],t,o,s);let p=c[l];p.status===B.mk.NEW&&p.type===B.h3.COMPONENT&&(d+=1)}),n)if(!(u in c)){let e=i[u];e&&e.url&&(0,P.aM)(e.url);let t=n[u];if(t.type===B.h3.COMPONENT||t.type===B.h3.STATE_GROUP){let e=(t.type,B.h3.COMPONENT,t);e.old_key&&l.add(e.node_id)}}for(let t in r)t in c||(a[t]=eY(i[t]),c[t]=e(n[t],r[t],null,o,s));return{newLocal:c,numNewComponents:d}}function eV(e){var t;let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==z.we)return;let n=!!(null==(t=r.mirror)?void 0:t.sceneGraph);if(!n)return;let i=(0,L.bC)(r),a=i?i.key:"",o=new Set,l={},{newLocal:s,numNewComponents:c}=eB(eW,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,l,a,o,B.h3.COMPONENT),{newLocal:d}=eB(eK,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,l,a,o,B.h3.STATE_GROUP),{newLocal:u}=eB(ez,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,l,a,o,B.h3.STYLE),{newLocal:p}=eB(eZ,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,l,a,o,B.h3.MODULE);if(eU(r.library.local.components,s)&&e.dispatch(O.K({local:s,type:B.h3.COMPONENT})),eU(r.library.local.stateGroups,d)&&e.dispatch(O.K({local:d,type:B.h3.STATE_GROUP})),eU(r.library.local.styles,u)&&e.dispatch(O.K({local:u,type:B.h3.STYLE})),eU(r.library.local.modules,p)&&(0,m.BZ)().dse_editor_templates_v1&&e.dispatch(O.K({local:p,type:B.h3.MODULE})),tr(r.library.local.thumbnails,l)&&e.dispatch(A.jR({thumbnails:l})),c>0&&ex&&((0,G.m_)({id:"Parsed first components"}),ex=!1),o.size>0){let t=r.notifications.filter(e=>e.type===w.k.MOVE_COMPONENTS_PROMPT);if(t.length>0){let r=t[0].type===w.k.MOVE_COMPONENTS_PROMPT&&t[0].movableItemIds;r&&(0,f.TT)(r,o)&&e.dispatch(T.N.dequeue({type:w.k.MOVE_COMPONENTS_PROMPT}))}}}let eG="Generating a local library item that is neither in the library nor in the scene graph. Why.",eH=(e,t,r,n,i)=>{var a;if(!r){if(t)return{...t,status:B.mk.DELETED,deletedFromSceneGraph:!0};throw Error(eG)}let o=t&&null==t.unpublished_at,l=!!r.isPublishable,s=B.mk.NOT_STAGED;o&&!l?s=B.mk.DELETED:!o&&l?s=B.mk.NEW:o||l||(s=B.mk.NOT_STAGED);let{description:c,description_rt:d}=(a=r.description,{description:r.descriptionPlain??"",description_rt:a??""});return{node_id:r.nodeId,name:r.name,description:c,description_rt:d,file_key:n,isPublishable:l,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:s,type:i,thumbnail_url:t&&t.thumbnail_url||void 0}},eW=(e,t,r,n)=>{let i=eH(e,t,r,n,B.h3.COMPONENT),a={...i,type:B.h3.COMPONENT,height:null==r?void 0:r.height,width:null==r?void 0:r.width,x:null==r?void 0:r.x,y:null==r?void 0:r.y,componentPropDefError:null==r?void 0:r.componentPropDefError,containing_frame:(null==r?void 0:r.containingFrame)||(null==t?void 0:t.containing_frame)||void 0,component_key:(null==t?void 0:t.component_key)||void 0,content_hash:(null==r?void 0:r.versionHash)||(null==t?void 0:t.content_hash)||void 0,old_key:(null==r?void 0:r.oldKey)||void 0};if(!t)return a;let o=null==t.unpublished_at,l=!!(null==r?void 0:r.isPublishable);return o&&l&&(t&&t.content_hash===a.content_hash&&!(0,V.vD)(t.containing_frame,null==r?void 0:r.containingFrame)&&(0,V.u2)(t.name,null==r?void 0:r.name)&&(0,V.u2)(t.description,a.description)?a.status=B.mk.CURRENT:a.status=B.mk.CHANGED),a},eK=(e,t,r,n)=>{let i=eH(e,t,r,n,B.h3.STATE_GROUP);if(!t){if(!r)throw Error(eG);return{...i,type:B.h3.STATE_GROUP,version:r.versionHash,containing_frame:r.containingFrame,width:r.width,height:r.height,stateGroupError:r.stateGroupError,componentPropDefError:r.componentPropDefError,fill_color:r.fill_color,default_state_key:r.default_state_key,old_key:r.oldKey||void 0}}let a={...i,type:B.h3.STATE_GROUP,version:(null==r?void 0:r.versionHash)||t.version,containing_frame:(null==r?void 0:r.containingFrame)||t.containing_frame,width:(null==r?void 0:r.width)||t.min_node_width,height:(null==r?void 0:r.height)||t.min_node_height,key:t.key||void 0,stateGroupError:(null==r?void 0:r.stateGroupError)||k.zor.NONE,componentPropDefError:(null==r?void 0:r.componentPropDefError)||k.Hn$.NONE,fill_color:(null==r?void 0:r.fill_color)||(null==t?void 0:t.fill_color),default_state_key:(null==r?void 0:r.default_state_key)||(null==t?void 0:t.default_state_key),old_key:(null==r?void 0:r.oldKey)||void 0},o=null==t.unpublished_at,l=!!(null==r?void 0:r.isPublishable);return o&&l&&(t.version===a.version&&!(0,V.vD)(t.containing_frame,null==r?void 0:r.containingFrame)&&(0,V.u2)(t.name,null==r?void 0:r.name)&&(0,V.u2)(t.description,a.description)?a.status=B.mk.CURRENT:a.status=B.mk.CHANGED),a},ez=(e,t,r,n)=>{let i=eH(e,t,r,n,B.h3.STYLE),a=t&&null==t.unpublished_at,o=!!(null==r?void 0:r.isPublishable),l=!1;if(a&&o&&(t&&t.content_hash===(null==r?void 0:r.versionHash)&&(0,V.u2)(t.name,null==r?void 0:r.name)&&(0,V.u2)(t.description,i.description)?(0,V.u2)(t.sort_position,null==r?void 0:r.sortPosition)?i.status=B.mk.CURRENT:(i.status=B.mk.CHANGED,l=!0):i.status=B.mk.CHANGED),r)return{...i,type:B.h3.STYLE,key:r.styleKey,style_type:r.styleType,is_soft_deleted:r.isSoftDeleted,sort_position:r.sortPosition,content_hash:r.versionHash,hasOnlyBeenReordered:l,old_key:r.oldKey||void 0};if(t)return{...i,type:B.h3.STYLE,key:t.key,style_type:t.style_type,is_soft_deleted:!0,sort_position:t.sort_position,content_hash:t.content_hash,hasOnlyBeenReordered:l};throw Error(eG)},eZ=(e,t,r,n)=>{let i=eH(e,t,r,n,B.h3.MODULE);if(!t){if(!r)throw Error(eG);return{...i,type:B.h3.MODULE,moduleSource:r.moduleSource,height:r.height,width:r.width,x:r.x,y:r.y,containing_frame:r.containingFrame,version:r.versionHash,old_key:r.oldKey||void 0}}let a={...i,type:B.h3.MODULE,moduleSource:(null==r?void 0:r.moduleSource)||t.moduleSource,height:(null==r?void 0:r.height)||t.height,width:(null==r?void 0:r.width)||t.width,x:null==r?void 0:r.x,y:null==r?void 0:r.y,containing_frame:(null==r?void 0:r.containingFrame)||t.containing_frame||void 0,version:(null==r?void 0:r.versionHash)||t.version,old_key:(null==r?void 0:r.oldKey)||void 0,key:t.key},o=t&&null==t.unpublished_at,l=!!(null==r?void 0:r.isPublishable);return o&&l&&(t.version===a.version&&!(0,V.vD)(t.containing_frame,null==r?void 0:r.containingFrame)&&(0,V.u2)(t.name,null==r?void 0:r.name)&&(0,V.u2)(t.description,a.description)?a.status=B.mk.CURRENT:a.status=B.mk.CHANGED),a},eY=e=>{let t={kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0};return t},ej=(e,t)=>`GET_PUBLISHED_COMPONENTS_FOR_${e}_FV${t}`,e$=new Set,eq=e=>{for(let t of e$)e(N.IV({key:t}))},eX=new Set,eJ=e=>eX.has(e),eQ=e=>{eX.add(e)},e0=()=>{eX.clear()};async function e1(e,t,r,n){var i,a,o,l,s,c,d,u;if(null===r)return;let p=ej(e,r);if(!(0,x.d4)(t,p))return;let m=H.u.getLibraryPublishedComponentsFv({key:e,fileVersion:r});(0,U.m)(m,{dispatch:n},p),e$.add(p);try{let e=await m,t=(null==(a=null==(i=null==e?void 0:e.data)?void 0:i.meta)?void 0:a.components)||[],r=(null==(l=null==(o=null==e?void 0:e.data)?void 0:o.meta)?void 0:l.state_groups)||[],p=null==(c=null==(s=null==e?void 0:e.data)?void 0:s.meta)?void 0:c.file,h=null==(u=null==(d=null==e?void 0:e.data)?void 0:d.meta)?void 0:u.library;if(n(C.gz({file:p})),h&&n(O.uP({libraries:[h]})),t=t.map(e=>({...e,team_id:p.team_id})),r=r.map(e=>({...e,team_id:p.team_id})),0!==r.length){let e=r.reduce((e,t)=>(e[t.node_id]=t,e),{});n(O.gz({itemsById:e,fileKey:p.key,teamId:p.team_id,type:B.h3.STATE_GROUP}))}if(0!==t.length){let e=t.reduce((e,t)=>(e[t.node_id]=t,e),{});n(O.gz({itemsById:e,fileKey:p.key,teamId:p.team_id,type:B.h3.COMPONENT}))}eQ(p.key)}catch(t){console.warn(`Failed to get published components from file ${e}`)}}async function e2(e,t,r,n){var i,a,o,l,s,c,d,u;if(null===r)return;let p=ej(e,r);if(!(0,x.d4)(t,p))return;let m=H.u.getCommunityLibraryPublishedComponents({hubFileId:e});(0,U.m)(m,{dispatch:n},p),e$.add(p);try{let t=await m,r=(null==(a=null==(i=null==t?void 0:t.data)?void 0:i.meta)?void 0:a.components)||[],p=(null==(l=null==(o=null==t?void 0:t.data)?void 0:o.meta)?void 0:l.state_groups)||[],h=null==(c=null==(s=null==t?void 0:t.data)?void 0:s.meta)?void 0:c.hub_file,_=null==(u=null==(d=null==t?void 0:t.data)?void 0:d.meta)?void 0:u.library;if(h&&n(S.zQ([h])),_&&n(O.uP({libraries:[_]})),0!==p.length){let e=p.reduce((e,t)=>(e[t.node_id]=t,e),{});n(O.gz({itemsById:e,fileKey:h.id,teamId:null,type:B.h3.STATE_GROUP}))}if(0!==r.length){let t=r.reduce((e,t)=>(e[t.node_id]=t,e),{});n(O.gz({itemsById:t,fileKey:e,teamId:null,type:B.h3.COMPONENT}))}eQ(e)}catch(t){console.warn(`Failed to get published components from Community Library ${e}`)}}let e3=(e,t)=>{let r={};return t.forEach(e=>{var t,n,i,a;if(null==(n=null==(t=e.containing_frame)?void 0:t.containingStateGroup)?void 0:n.nodeId){let t=null==(a=null==(i=e.containing_frame)?void 0:i.containingStateGroup)?void 0:a.nodeId;r[t]||(r[t]=[]),r[t].push(e.name)}}),e.map(e=>({...e,stateNames:r[e.node_id]}))},e4=new Set,e6=async(e,t=[],r,n,i,a,o)=>{var s,c,d,u;if(!t.length)return{};let p={};for(let r of t){let t=e.get(r);if(!t||!t.styleKey)continue;let n=k.iTB.getNumUsagesOfStyle(t.styleKey,!0);0!==n&&(p[t.styleKey]=r)}let m=Object.keys(p),h=m.length>0&&(null==(d=null==(c=null==(s=await v.ZP.post("/api/unpublished_styles",{style_keys:m,org_id:i}))?void 0:s.data)?void 0:c.meta)?void 0:d.styles)||[],_=l()([...h,...Object.values(r).filter(e=>e.key in p)],e=>e.key),g=new Set(_.map(e=>e.key)),f=Object.keys(p).filter(e=>e&&!g.has((0,b.hx)(e))),E=f.length>0&&(null==(u=await v.ZP.post("/api/missing_styles",{style_keys:f}))?void 0:u.data.meta)||{};delete E[a];let y=[],I={};for(let e of _){let t=e.file_key;I[t]||(I[t]=[]),I[t].push(e),n[t]||e4.has(t)||(e4.add(t),y.push(t))}for(let[t,r]of Object.entries(E))for(let n of(I[t]||(I[t]=[]),r)){let r=p[n]&&e.get(p[n]);r&&I[t].push({type:B.h3.STYLE,name:r.name,file_key:t,key:n,thumbnail_url:`/style/${n}/thumbnail?ver=${r.styleVersionHash}`,canvas_url:`/style/${n}/thumbnail?ver=${r.styleVersionHash}`,content_hash:r.styleVersionHash||void 0,node_id:r.guid,isLocal:!1,style_type:r.styleType})}return await e8(y,o),I},e8=async(e,t)=>{if(e.length>0){let n=[];async function r(e){try{let r=await v.ZP.post("/api/files/batch",{file_keys:e});r.data.meta||(0,g.YD)("designSystems","Unexpected empty API response",{data:JSON.stringify(r.data??null),numFiles:e.length,status:r.status}),t(C.qV({files:r.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,g.Jz)(y.k.DESIGN_SYSTEMS_EDITOR,e)}}for(let t=0;t<e.length;t+=200){let i=e.slice(t,t+200);n.push(r(i))}await Promise.all(n)}};async function e9(e,t,r){if(0===t.length)return[];let n=await v.ZP.post("/api/styles",{style_keys:t,org_id:r}),{styles:i,files:a}=n.data.meta;return e(C.qV({files:a,subscribeToRealtime:!0})),i}let e5=(e,t=[],r=[],n,i,a,o,l=!1)=>{var s,c,d,u;let p={},m=t.concat(r),h=[];for(let t of m){let r,o,m;let _=e.get(t);if(!_)continue;let g=tq(_)||void 0,f=_.publishID,E=_.isStateGroup;if(E?(_.sharedStateGroupVersion&&(r=_.sharedStateGroupVersion),_.stateGroupKey&&(o=_.stateGroupKey)):(_.sharedSymbolVersion&&(r=_.sharedSymbolVersion),_.componentKey&&(o=_.componentKey)),!f||!g)continue;let y=i[g];if(y){let e=y.team_id||B.p3,t={};t=E?n.stateGroups[e]||{}:n.components[e]||{};let r=t[g]||{};if((null==(m=r[f])?void 0:m.type)===B.h3.COMPONENT){let t=null==(c=null==(s=m.containing_frame)?void 0:s.containingStateGroup)?void 0:c.nodeId;t&&(m=null==(u=null==(d=n.stateGroups[e])?void 0:d[g])?void 0:u[t],E=!0)}}else e4.has(g)||(e4.add(g),h.push(g));if(m){let e=X(m);p[e]=m}else if(E){if(!o||p[o])continue;let t=_.reversedChildrenGuids.some(t=>{var r;let n=null==(r=e.get(t))?void 0:r.componentKey;return n&&!p[n]});if(!t)continue;p[o]={type:B.h3.STATE_GROUP,name:_.name,file_key:g,key:o,thumbnail_url:`/state_group/${o}/thumbnail?ver=${r}&fv=${a}`,canvas_url:`/state_group/${o}/canvas?ver=${r}&fv=${a}`,node_id:f||"",isLocal:!1,version:r||b.WW.INVALID,containing_frame:{},min_node_width:0,min_node_height:0,default_state_key:""}}else{if(!o||p[o]||_.isState&&!l||null===a)continue;p[o]={type:B.h3.COMPONENT,name:_.name,file_key:g,component_key:o,thumbnail_url:`/component/${o}/thumbnail?ver=${r}&fv=${a}`,canvas_url:`/component/${o}/canvas?ver=${r}&fv=${a}`,node_id:f||"",content_hash:_.sharedSymbolVersion||void 0,isLocal:!1}}}return e8(h,o),Object.values(p)},e7=(e,t,r,n,i,a,o)=>e5(e,t,r,n,i,a,o,!0).reduce((e,t)=>(t.type===B.h3.COMPONENT?t.component_key&&(e[t.component_key]=t):e[t.key]=t,e),Object.create(null));function te(e,t,r,n){e=e.map(e=>({...e,team_id:r[e.file_key].team_id}));let i=e.reduce((e,t)=>(t.file_key in e?e[t.file_key].push(t):e[t.file_key]=[t],e),{});for(let[e,a]of Object.entries(i))n(O.gz({itemsById:a.reduce((e,t)=>(e[t.node_id]=t,e),{}),fileKey:e,teamId:r[e].team_id,type:t}))}function tt(e){let t=(0,a.I0)(),{library:r,fileByKey:n,sceneGraph:o,fileVersion:l,subscribedComponents:s,subscribedStateGroups:c,subscribedComponentsOnCurrentPage:d,subscribedStateGroupsOnCurrentPage:u}=(0,p.c)(e=>({library:e.library,fileByKey:e.fileByKey,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,K.qp)(e),subscribedStateGroups:(0,K.oo)(e),subscribedComponentsOnCurrentPage:(0,K.Ld)(e),subscribedStateGroupsOnCurrentPage:(0,K.vW)(e)})),[m,h]="current"===e?[d,u]:[s,c];return i.useMemo(()=>e7(o,m,h,r.published,n,l,t),[o,m,h,r.published,n,l,t])}let tr=(e,t)=>{if(!e&&!t)return!1;if(!e||!t||Object.keys(e).length!==Object.keys(t).length)return!0;for(let r in e)if(!t[r]||e[r].url!==t[r].url||e[r].content_hash!==t[r].content_hash)return!0;return!1},tn=(e,t)=>{let r=e.defaultPublished.fileKeys.includes(t);return!!r},ti=(0,h.ws)(e=>{let t={},r=e.local.styles;for(let e in r){let n=r[e];t[n.key]=n}return t});function ta(e,t,r){let n=ti(r)[e];if(n)return{kind:B.IW.LOCAL,value:n};let i=r.used__LIVEGRAPH.styles[e];return(null==i?void 0:i.status)==="loaded"?{kind:B.IW.LIBRARY,value:i.data}:t&&t.length?{kind:B.IW.DANGLING,value:{key:e,node_id:t[0]}}:void 0}function to(e,t){let r=(0,a.v9)(e=>e.library);return ta(e,t,r)}function tl(e,t){if(!e)return"";if(e.kind!==B.IW.DANGLING)return e.value.name;{let r=t.get(e.value.node_id);return r?r.name:""}}function ts(e,t){let r=(0,a.v9)(e=>e.mirror.sceneGraph),n=to(e,t);return tl(n,r)}let tc=(0,h.ws)(e=>{let t={};return Object.keys(e).forEach(r=>{t[r]={},Object.keys(e[r]).forEach(n=>{t[r][n]=td(e[r][n])})}),t}),td=e=>{var t;let r={};for(let n in e){let i=e[n];(null==(t=i.containing_frame)?void 0:t.containingStateGroup)&&(r[n]={...i})}return r};function tu(e,t,r){let n=e.team_id,i=e.key,a=n?r[n]:null;if(a){let e=a[i];if(e)return e[t]}return null}let tp=(e,t)=>{var r,n;if(t.components[e]){let i=t.components[e],a=null==(n=null==(r=i.containing_frame)?void 0:r.containingStateGroup)?void 0:n.nodeId;return a?t.stateGroups[a]||null:i||null}return t.stateGroups[e]&&t.stateGroups[e]||null},tm=(e,t)=>{let r=tp(e,t);return r||(0,m.BZ)().dse_editor_templates_v1&&t.modules[e]&&t.modules[e]||null},th=e=>{let t=e.type===B.h3.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==k.zor.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===k.Hn$.CONFLICTING_NAMES_ERROR||e.componentPropDefError===k.Hn$.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===k.Hn$.UNUSED_DEF_ERROR)||t)},t_=e=>e.variableSetError!==k.J9h.NONE,tg=()=>{},tf=new Promise(e=>{tg=e}),tE=()=>{},ty=new Promise(e=>{tE=e}),tv=e=>{e.dispatch(O.Il({}))},tb=()=>{},tI=new Promise(e=>{tb=e}),tT=e=>{var t;return{callback:tb,promise:tI,resetPromise:tN,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${null==(t=e.getState().openFile)?void 0:t.key}`}},tw=()=>{},tS=new Promise(e=>{tw=e}),tC=()=>{},tO=new Promise(e=>{tC=e});function tA(){tg(),tE(),tw(),tf=new Promise(e=>{tg=e}),ty=new Promise(e=>{tE=e}),tS=new Promise(e=>{tw=e}),tN()}function tN(){tb(),tI=new Promise(e=>{tb=e})}function tL(e,t,r){return e.team_id===r?-1:t.team_id===r?1:(e.team_name||"").localeCompare(t.team_name||"")}function tP(e,t,r){return e.sort((e,n)=>{var i;let a=(i=null==r?void 0:r.groupByFolders,e.team_id!==n.team_id?tL(e,n,t):i&&e.file.folder_id!==n.file.folder_id?e.folder_name<n.folder_name?-1:1:(e.library_file_name||"").localeCompare(n.library_file_name||""));return(null==r?void 0:r.isDescending)?a:-a})}function tR(e,t,r){let n;let i=e.node_id,a=t[i]||{},o=a.url||null;switch(e.type){case B.h3.COMPONENT:case B.h3.STYLE:n=e.content_hash;break;case B.h3.VARIABLE:case B.h3.VARIABLE_SET:case B.h3.STATE_GROUP:case B.h3.MODULE:n=e.version;break;default:(0,d.vE)(e)}return(r||a.content_hash!==n||!(0,P.nu)(o))&&(e.type===B.h3.COMPONENT||e.type===B.h3.STATE_GROUP||e.type===B.h3.MODULE?o=(0,P.k_)(i):e.type===B.h3.STYLE?o=(0,F.yw)(e)?(0,P.ml)():(0,P.n2)(i,e.style_type):(e.type===B.h3.VARIABLE||e.type===B.h3.VARIABLE_SET)&&(o=(0,P.ml)())),o}function tk({numProductComponents:e,numStyles:t,numVariables:r,numModuleAssets:n}){let i=t>0?(0,I.t)("design_systems.libraries_modal.plural.num_style",{numStyles:t}):null,a=e>0?(0,I.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,o=r>0?(0,I.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:r}):null,l=(0,m.BZ)().dse_editor_templates_v1&&n>0?(0,I.t)("design_systems.libraries_modal.plural.num_templates",{numTemplates:n}):null,s=(0,c.We)([a,i,o,l]);return 0===s.length?(0,m.BZ)().dse_editor_templates_v1?(0,I.t)("design_systems.libraries_modal.no_publishable_assets"):(0,I.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,E.WH)(s,"unit")}let tD=e=>e!==B.mk.DELETED&&e!==B.mk.NOT_STAGED,tM=(e,t,r,n)=>{let i=t[e];if(!i)return null;let a=eo(r),o=a.find(e=>e.type===B.h3.COMPONENT?e.component_key===i:e.key===i),l="another file";if(!o)return l;let s=n[o.file_key];return s?s.name:l},tF=(e,t,r)=>{var n,i;let a=e.reduce((r,n)=>(t[n]?r[n]=t[n]:(0,d.q8)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:t}),r),Object.create(null));for(let e of r){let r=null==(i=null==(n=e.containing_frame)?void 0:n.containingStateGroup)?void 0:i.nodeId,o=t[e.node_id];if(!r||!o)continue;let l=!!t[r];a[r]||!l?a[e.node_id]=o:a[e.node_id]&&delete a[e.node_id]}return{moveRemappings:a,movableItemsToPublishAsNew:new Set(Object.keys(t).filter(e=>!a[e]))}};function tx(e){return e.type===B.h3.COMPONENT||e.type===B.h3.STATE_GROUP}function tU(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState}let tB=e=>B.tK.includes(e.type);function tV(e){switch(e.type){case B.h3.COMPONENT:return e.component_key;case B.h3.STATE_GROUP:case B.h3.STYLE:case B.h3.VARIABLE:case B.h3.VARIABLE_SET:case B.h3.MODULE:return e.key;default:(0,d.vE)(e)}}function tG(e){return e.isLocal?k.dCf.getAssetKeyForPublish(e.node_id):X(e)}function tH(e){var t,r;return(null==(r=null==(t=e.containing_frame)?void 0:t.containingStateGroup)?void 0:r.nodeId)??null}function tW(e){return!!tH(e)}let tK=(e,t,r,n)=>{let i;if(!e)return;let a=t.get(e);if(a&&a.containingStateGroupId&&(a=t.get(a.containingStateGroupId)),!a)return;let o=tq(a);if(o){let e=a.componentKey??a.stateGroupKey;e&&(i=null==n?void 0:n[e])}else i=null==r?void 0:r[a.guid];return i};function tz(e,t){function r(e){return e.toLowerCase()}let n=r(e.name),i=r(t.name);return n<i?-1:n>i?1:0}function tZ(e){switch(e){case B.bO.THIRTY_DAYS:return(0,I.t)("design_systems.libraries_modal.30_days");case B.bO.SIXTY_DAYS:return(0,I.t)("design_systems.libraries_modal.60_days");case B.bO.NINETY_DAYS:return(0,I.t)("design_systems.libraries_modal.90_days");case B.bO.YEAR:return(0,I.t)("design_systems.libraries_modal.year");default:(0,d.vE)(e)}}function tY(e){var t;return!!((0,m.BZ)().dse_templates_proto&&(null==(t=e.description)?void 0:t.startsWith("Figma.TemporaryIsTemplate")))}function tj(e){return!!((0,m.BZ)().dse_editor_templates_v1&&"MODULE"===e.type)}function t$(e,t){return(null!==e.design||null!==e.figjam)&&(!!e.design||!!e.figjam)&&(!!e.design&&!t.designSubscribed||!!e.figjam&&!t.figjamSubscribed||void 0)}function tq(e){return(0,m.BZ)().ds_publish_file_deprecation?e?e.isLooseComponent||e.isState?tX(e.componentKey):e.isStateGroup?tJ(e.stateGroupKey):null:null:(null==e?void 0:e.publishFile)??null}function tX(e,t){var r;if(!e)return null;if(!t){let e=u.V.getState();t=t1(e.library.published.components)}return(null==(r=t[e])?void 0:r.file_key)??null}function tJ(e,t){var r;if(!e)return null;if(!t){let e=u.V.getState();t=t1(e.library.published.stateGroups)}return(null==(r=t[e])?void 0:r.file_key)??null}function tQ(e,t,r){return r[e]?r[e].file_key??null:t[e]?t[e].file_key??null:null}function t0(e){let t={};return el(e,(r,n,i)=>{t[n]=t[n]||{},t[n][i]=e[r][n][i]}),t}function t1(e){let t={};return el(e,(r,n,i)=>{let a=e[r][n][i];t[X(a)]=a}),t}},57013:(e,t,r)=>{r.d(t,{Nh:()=>k,QZ:()=>D,WJ:()=>x,sA:()=>M,yX:()=>L});var n=r(950663),i=r.n(n),a=r(600486),o=r(46347),l=r(716250),s=r(290686),c=r(218609),d=r(249683),u=r(837728),p=r(508887),m=r(667981),h=r(999177),_=r(112088),g=r(761767),f=r(458763),E=r(166885),y=r(554564),v=r(493771),b=r(272583),I=r(425285),T=r(535245),w=r(436649),S=r(531640),C=r(841017),O=r(604358),A=r(591233),N=r(590602);let L={threshold:.3,tokenize:!0,shouldSort:!0},P=new f.D3({keys:[{name:"name",weight:.6},{name:"stateNames",weight:.4},{name:"containing_frame.name",weight:.1},{name:"containing_frame.pageName",weight:.1},{name:"description",weight:.05}],...L});class R extends A._{constructor(){super(...arguments),this.lastUpdatedQuery=Date.now(),this.initSources=e=>{let t=(0,u.bC)(e);if(!t)return;let r=e.folders,n=!!t.folder_id&&(0,h.Gd)(r[t.folder_id]);((r,i,a,o)=>{let s=[],c=new Set,d=e=>{for(let t of e){let e=(0,T.Y)(t);e&&c.has(e)||(e&&c.add(e),s.push({...t}))}},u=(0,_.vB)(i);d(u),e.library.assetsPanelSearch.shouldSearchDefaultLibraries&&(d((0,_.zQ)(e.library,(0,m.Pp)(e.library.defaultPublished.components),t,n)),d((0,_.zQ)(e.library,e.library.defaultPublished.stateGroups,t,n)));let p=Object.values((0,_.iG)(e.library.local.components)),h=Object.values(e.library.local.stateGroups),g=(0,_.PZ)(h,p);d(g),d(a),(0,l.BZ)().dse_editor_templates_v1&&d(Object.values(o)),r.set(s)})(P,(0,m.jL)(e.library.local.components),(0,_.mf)(e.mirror.sceneGraph,(0,S.qp)(e),(0,S.oo)(e),e.library.published,e.fileByKey,e.fileVersion,e.dispatch),e.library.local.modules)},this.useInitSearch=v.S,this.computeLocalResultsPromise=async(e,t)=>{let r=(0,N.tC)(y.u.LOCAL,P,e),n=(await r).filter(e=>e.file_key===t);return{normalizedSearchResults:n,unsubscribedSearchResults:[]}},this.computeFileResultsPromise=async(e,t,r,n)=>{let i=(0,N.tC)(y.u.FILE,P,e),a=(0,N.H5)(e,t),o=(0,N.bY)(e,this.subscribedLibraryFileKeys,n,r),[l,{subscribedSearchResults:s,unsubscribedSearchResults:c},{communitySearchResults:d,unsubscribedCommunitySearchResults:u}]=await Promise.all([i,a,o]),p=(0,O.lB)(l,s),m=(0,O.lB)((null==d?void 0:d.filter(({file_key:e})=>e===t))||[],s),h=(0,O.lB)(c,p),_=(0,O.lB)((null==u?void 0:u.filter(({file_key:e})=>e===t))||[],h),g={normalizedSearchResults:[...s,...m],unsubscribedSearchResults:[...h,..._]};return g},this.computeAllResultsPromise=async(e,t,r,n,i,a,o)=>{let l=(0,N.tC)(y.u.ALL,P,e),s=(0,N.fO)(e,r,n,i,a,this.subscribedLibraryFileKeys),c=(0,N.bY)(e,this.subscribedLibraryFileKeys,o,t),[d,{subscribedSearchResults:u,unsubscribedSearchResults:p},{communitySearchResults:m,unsubscribedCommunitySearchResults:h}]=await Promise.all([l,s,c]),_=(0,O.lB)(d,u,m||[]),g=(0,N.Tx)(_,u,y.u.ALL),f=(0,O.lB)(m||[],g),E=(0,O.lB)(p,_),v=(0,O.lB)(h||[],E),b={normalizedSearchResults:[...g,...f],unsubscribedSearchResults:[...E,...v]};return b},this.computeResultsReduxSearchTypeHelper=(e,t,r,n)=>{var i;switch(null==t?void 0:t.type){case y.u.LOCAL:return this.computeLocalResultsPromise(e,null==(i=n.openFile)?void 0:i.key);case y.u.FILE:return this.computeFileResultsPromise(e,t.fileKey,r,()=>(0,p.K1)(n.user,(0,C.kA)(n)));case y.u.RECENT:case void 0:case y.u.ALL:return this.computeAllResultsPromise(e,r,n.fileVersion,n.currentUserOrgId,n.openFile,n.fileByKey,()=>(0,p.K1)(n.user,(0,C.kA)(n)));default:return(0,o.vE)(t,"unknown search type")}},this.computeResultsRedux=async e=>{var t;let r=e.getState(),n=r.library.assetsPanelSearch.query,o=null==(t=r.openFile)?void 0:t.key;if(!n||!o){e.dispatch(d.M5());return}let l=r.library.assetsPanelSearch.searchOptions;if(l&&!(0,O.v5)(l)){e.dispatch(d.M5());return}let c=(0,I.j3)(r.selectedView)===g.gg.DESIGN;a.RQ.trackDefinedEvent("assets_panel.component_search",{query:n,inDesignEditor:c,searchSessionId:r.search.sessionId??""}),r.search.sessionId&&e.dispatch(s.C.incrementQueryCount());let u=Date.now();if(u<=this.lastUpdatedQuery)return;let p=await this.computeResultsReduxSearchTypeHelper(n,l,c,r);if((null==l?void 0:l.type)===y.u.LOCAL){e.dispatch(d.Kr(p)),a.RQ.trackDefinedEvent("assets_panel.search_time",{elapsedTime:Date.now()-u,query:n,localSearchResultCount:p.normalizedSearchResults.length,searchType:l.type}),this.lastUpdatedQuery=u;return}if(n!==e.getState().library.assetsPanelSearch.query)return;e.dispatch(d.Kr(p));let[m,h]=i()(p.normalizedSearchResults,e=>e.file_key===o);a.RQ.trackDefinedEvent("assets_panel.search_time",{elapsedTime:Date.now()-u,query:n,localSearchResultCount:m.length,subscribedSearchResultCount:h.length,unsubscribedSearchResultsCount:p.unsubscribedSearchResults.length,searchType:(null==l?void 0:l.type)??y.u.ALL}),this.lastUpdatedQuery=u}}}let k=new R,D=(0,c.u4)(e=>{M(e.getState())&&k.runComputeResultWithSourceChange(e)});function M(e){return!!(e.openFile&&e.fileVersion&&(0,w.B4)(e.loadingState,(0,b.O1)(e.openFile.key)))}let F=e=>e.type===E.h3.STATE_GROUP,x=e=>e.filter(e=>(0,E.pE)(e)||F(e))},604358:(e,t,r)=>{r.d(t,{L4:()=>c,hg:()=>p,lB:()=>u,nW:()=>s,v5:()=>d});var n=r(950663),i=r.n(n),a=r(166885),o=r(554564),l=r(112088);let s=e=>e.library.assetsPanelSearch,c=e=>e.library.assetsPanelSearch.query;function d(e){return e.type===o.u.ALL||e.type===o.u.LOCAL||e.type===o.u.FILE}function u(e,...t){let r=new Set(t.flatMap(e=>e.map(e=>(0,l.bk)(e))));return e.filter(e=>!r.has((0,l.bk)(e)))}function p(e){return i()(e,e=>e.type===a.h3.MODULE)}},590602:(e,t,r)=>{r.d(t,{H5:()=>E,Tx:()=>f,bY:()=>h,fO:()=>m,tC:()=>g,wH:()=>_});var n=r(950663),i=r.n(n),a=r(600486),o=r(716250),l=r(166885),s=r(740280),c=r(554564),d=r(838903),u=r(761767),p=r(795153);let m=async(e,t,r,n,l,c)=>{try{let a=(null==n?void 0:n.editorType)===u.gg.WHITEBOARD,p=[],m=[];if((0,o.BZ)().dse_editor_templates_v1&&(0,o.BZ)().dse_library_v5_read&&!a){let t=await s.D_.getCanvasAssets({query:e,orgId:r||void 0});p=t.data.meta.product_components,m=t.data.meta.templates}else{let n=await s.D_.getComponents({query:e,fv:t||0,orgId:r||void 0});p=n.data.meta}let h=n?n.key:"",_=n&&((0,d.vp)(n)?n.sourceFileKey:""),g=[...p,...m],f=g.filter(e=>e.file_key in l&&e.file_key!==_),[E,y]=i()(f,e=>c.has(e.file_key)||e.file_key===h);return{subscribedSearchResults:E,unsubscribedSearchResults:y}}catch(t){return a.RQ.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),{subscribedSearchResults:[],unsubscribedSearchResults:[]}}},h=async(e,t,r,n)=>{if(!n)return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};try{if(r()){let{results:r}=(await s.D_.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,s.sQ)([l.h3.COMPONENT,l.h3.STATE_GROUP]).join(",")})).data.meta,[n,a]=i()(r,e=>t.has(e.file_key));return{communitySearchResults:n,unsubscribedCommunitySearchResults:a}}return{communitySearchResults:null,unsubscribedCommunitySearchResults:null}}catch(t){return a.RQ.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),{communitySearchResults:null,unsubscribedCommunitySearchResults:null}}},_=p.t1.Query({fetch:async({query:e,assetTypes:t})=>{let{results:r}=(await s.D_.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,s.sQ)(t).join(",")}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return r},enabled:({query:e})=>null!=e&&e.trim().length>0}),g=(e,t,r)=>e===c.u.FILE?Promise.resolve([]):t.search(r).then(e=>e.map(e=>({...e.item,score:e.score})));function f(e,t,r){if(0===t.length)return e;if(r===c.u.FILE)return t;let n=Math.max(...t.map(e=>e.score)),i=e.map(e=>{let t=(1-e.score)*.95*n;return{...e,score:t}});return[...i,...t].sort((e,t)=>t.score-e.score)}let E=async(e,t)=>{try{if((0,o.BZ)().dse_editor_templates_v1&&(0,o.BZ)().dse_library_v5_read){let r=await s.D_.getCanvasAssetsFromFile({query:e,fileKey:t}),n=r.data.meta.product_components,i=r.data.meta.templates;return{subscribedSearchResults:[...n,...i],unsubscribedSearchResults:[]}}let r=await s.D_.getComponentsFromFile({query:e,fileKey:t});return{subscribedSearchResults:r.data.meta,unsubscribedSearchResults:[]}}catch(r){return a.RQ.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,fileKey:t}),{subscribedSearchResults:[],unsubscribedSearchResults:[]}}}},812424:(e,t,r)=>{r.d(t,{F:()=>_,d:()=>g});var n=r(652983),i=r(407908),a=r(600486),o=r(9247),l=r(716250),s=r(337167),c=r(970740),d=r(746947),u=r(935174),p=r(764850),m=r(843104),h=r(200273);let _=(0,s.cn)(!1);function g(){let e=(0,i.I0)(),t=(0,i.v9)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)||!("editorType"in e.selectedView)||"design"!==e.selectedView.editorType||!!(0,l.ZP)().integration_host}),{updateCount:r,includesMoveComponentUpdatesOnCurrentPage:g,includesMoveStyleUpdatesOnCurrentPage:f}=(0,s.Dv)(m.Ej),{updateCount:E,includesMoveComponentUpdates:y,includesMoveStyleUpdates:v}=n.useMemo(()=>({updateCount:r,includesMoveComponentUpdates:g,includesMoveStyleUpdates:f}),[g,f,r]),b=(0,s.Dv)(m.Dm),[I,T]=(0,s.KO)(_),w=(0,i.v9)(e=>e.mirror.appModel.multiplayerSessionState===p.hKT.DETACHED),S=(0,h.uC)(),C=(0,o.D)(E)??0,O=(0,o.D)(w)??!1,A=(0,o.D)(t)??t,N=(0,i.v9)(e=>e.mirror.appModel.topLevelMode===p.bN1.HISTORY),L=(0,o.D)(N)??!1,P=(0,i.v9)(e=>e.mirror.appModel.currentPage),R=(0,o.D)(P);return n.useEffect(()=>{t&&A||(!O&&w||!A&&t||C>0&&0===E||!L&&N?(P!==R&&T(!0),e(d.N.dequeue({type:u.k.COMPONENT_UPDATES_AVAILABLE}))):b||I||(!(E>C)||w||N)&&(!(E>0)||!A||t)||((0,a.L9)("Component Updates Displayed",{fileKey:S,timestamp:Date.now(),isMoveUpdate:y||v}),e(d.N.enqueue({notification:{type:u.k.COMPONENT_UPDATES_AVAILABLE,message:y&&v?(0,c.t)("design_systems.updates.some_components_styles_were_moved_updates_are_available"):y?(0,c.t)("design_systems.updates.some_components_were_moved_updates_are_available"):v?(0,c.t)("design_systems.updates.some_styles_were_moved_updates_are_available"):(0,c.t)("design_systems.updates.component_updates_available"),dismissCallback:()=>{(0,a.L9)("Component Updates Dismissed"),T(!0)}}}))))},[e,I,y,v,w,t,b,N,S,C,T,E,O,A,L,P,R]),null}},437815:(e,t,r)=>{r.d(t,{WE:()=>s,f2:()=>u,wo:()=>c});var n=r(46347),i=r(508239),a=r(970740),o=r(941600),l=r(625893);function s(e){switch(e){case o.nb.TEAMS:return(0,a.t)("license_group_admin_tab.teams");case o.nb.MEMBERS:return(0,a.t)("license_group_admin_tab.members");case o.nb.LIBRARIES:return(0,a.t)("license_group_admin_tab.libraries");case o.nb.SETTINGS:return(0,a.t)("license_group_admin_tab.settings");default:(0,n.vE)(e)}}let c="originTab",d=[l.rN.BILLING],u=e=>{let t=(0,i.i)(l.rN,e);if(t)return d.includes(t)?t:void 0}},26939:(e,t,r)=>{r.d(t,{j:()=>o});var n=r(508239),i=r(941600),a=r(801998);let o=(e,t)=>{let r=(0,a.uH)(t);return r?i.nb.MEMBERS:(0,n.i)(i.nb,e||i.Uq[0])||i.Uq[0]}},971237:(e,t,r)=>{r.d(t,{$4:()=>f,N:()=>w,O:()=>T,U4:()=>v,US:()=>b,hj:()=>S,jF:()=>C,lV:()=>g,lz:()=>y,oI:()=>E,xY:()=>O,zj:()=>I});var n=r(652983),i=r(407908),a=r(5453),o=r(256768),l=r(313653),s=r(970740),c=r(97049),d=r(163853),u=r(322186),p=r(196532),m=r(521384),h=r(617406),_=r(733609);let g=e=>`LICENSE_GROUP_GET_${e}`;function f(e){var t;let r=(0,i.v9)(({licenseGroups:e})=>e),o=null==(t=(0,u.Ng)())?void 0:t.id;return(0,n.useMemo)(()=>{let t=Object.values(r).filter(t=>t&&t.org_id===(e??o));return(0,a.aV)(t,"name"),t},[r,o,e])}let E=(e,t=!0)=>{let[r,a]=n.useState(!1),[o,c]=n.useState(!1),[u,p]=n.useState(!1),[m,h]=n.useState({}),_=(0,i.I0)();return n.useEffect(()=>{let n=async()=>{if(!r&&!o&&!u&&t){a(!0);try{let t=await d.uU.getLicenseGroupsMembersCounts({orgId:e});h(t.data.meta),c(!0),a(!1)}catch(e){_(l.l.error((0,s.t)("license_group.an_error_occurred_fetching_license_group_counts"))),a(!1),c(!1),p(!0)}}};n()},[e,o,r,u,_,t]),{isFetched:o,memberCounts:m,isLoading:r}};function y(e){let t={};return e.forEach(e=>{let r=e.license_group_id??c.u,n=t[r]??0;n++,t[r]=n}),t}function v(e){return(0,i.v9)(t=>{if(!e)return!1;let r=t.orgById[e];return I(r)})}function b(){return(0,i.v9)(e=>{if(!e.currentUserOrgId)return!1;let t=e.orgById[e.currentUserOrgId];return I(t)})}function I(e){return!!((null==e?void 0:e.bigma_enabled)&&(null==e?void 0:e.license_groups_count))}function T(e,t,r){let n=[],i=[];return e.forEach(e=>{e.admin_users_metadata.length>0?e.admin_users_metadata.some(e=>e.id===t)?n.push(e):r||i.push(e):r||n.push(e)}),(0,a.aV)(n,"name"),(0,a.aV)(i,"name"),{groupsUserIsAdminOf:n,otherLicenseGroups:i}}function w(e,t){if(!t)return!1;let r=(0,m.Zh)(t,"upcoming");return(0,m.qQ)(t)&&(!e.last_reviewed_at||(0,o.Z)(e.last_reviewed_at).add(14,"days")<(0,o.Z)(r.due_at))}function S(e,t){let r=[],n=[];return e.forEach(e=>{w(e,t)?r.push(e):n.push(e)}),{groupsToReview:r,groupsAlreadyReviewed:n}}function C(){var e;let t=(0,p.Mn)(),r=(0,_.canAdminOrg)(t.currentUserOrgId,t),i=f();return(0,n.useMemo)(()=>{var e;return r?i:T(i,null==(e=t.user)?void 0:e.id,!0).groupsUserIsAdminOf},[r,i,null==(e=t.user)?void 0:e.id])}function O(){return(0,i.v9)(e=>{var t,r;let n=null==(r=null==(t=(0,h.YM)(e))?void 0:t.license_group_member)?void 0:r.license_group_id;return n?e.licenseGroups[n]:void 0})}},761767:(e,t,r)=>{r.d(t,{$Z:()=>n.$Z,CE:()=>n.CE,F9:()=>n.F9,Gm:()=>n.Gm,Gu:()=>n.Gu,I1:()=>n.I1,IK:()=>n.IK,JG:()=>n.JG,KC:()=>n.KC,KF:()=>n.KF,LX:()=>n.LX,Mb:()=>n.Mb,Mg:()=>n.Mg,QC:()=>n.QC,Qe:()=>n.Qe,Ri:()=>n.Ri,UG:()=>n.UG,Vh:()=>n.Vh,Wn:()=>n.Wn,Yi:()=>n.Yi,ZG:()=>n.ZG,ZU:()=>n.ZU,Zd:()=>n.Zd,Ze:()=>n.Ze,Zn:()=>n.Zn,Zs:()=>n.Zs,_g:()=>n._g,bX:()=>n.bX,d3:()=>n.d3,dJ:()=>n.dJ,dV:()=>n.dV,e9:()=>n.e9,f8:()=>n.f8,fH:()=>n.fH,fI:()=>n.fI,fe:()=>n.fe,gZ:()=>n.gZ,gg:()=>n.gg,jq:()=>n.jq,kh:()=>n.kh,mV:()=>n.mV,nM:()=>n.nM,nX:()=>n.nX,oj:()=>n.oj,oz:()=>n.oz,qv:()=>n.qv,rI:()=>n.rI,ur:()=>n.ur,v4:()=>n.v4,yS:()=>n.yS,yg:()=>n.yg});var n=r(347831)},862610:(e,t,r)=>{r.r(t),r.d(t,{AccessibleFolders:()=>n.RgD,AccessibleFoldersFamily:()=>n._IT,AccessibleFoldersV2:()=>n.d$I,AccessibleFoldersV2Family:()=>n.Z8j,ActiveFileUsersForFileView:()=>n.Sjm,ActiveFileUsersForFileViewFamily:()=>n.fpZ,AdminNotificationsCountView:()=>n.GI1,AdminNotificationsCountViewFamily:()=>n.ykI,AdminRequestDashboardView:()=>n.YL7,AdminRequestDashboardViewFamily:()=>n.BxK,AdminSettingsSelectorView:()=>n.G8w,AdminSettingsSelectorViewFamily:()=>n.FzF,AllowlistPluginsSectionView:()=>n.aaZ,AllowlistPluginsSectionViewFamily:()=>n.W9P,AllowlistSettingsModalView:()=>n.uwN,AllowlistSettingsModalViewFamily:()=>n.H6J,AppliedColorPaletteForFile:()=>n.tgR,AppliedColorPaletteForFileFamily:()=>n.D$X,ApprovedLibrariesForOrgView:()=>n.E3E,ApprovedLibrariesForOrgViewFamily:()=>n.Djd,ApprovedLibrariesView:()=>n.Pfx,ApprovedLibrariesViewFamily:()=>n.Vvw,AutoRunPluginsView:()=>n.BHW,AutoRunPluginsViewFamily:()=>n.Ciu,BillingTrialForResource:()=>n.L$c,BillingTrialForResourceAndPlanType:()=>n.dAq,BillingTrialForResourceAndPlanTypeFamily:()=>n.qp5,BillingTrialForResourceFamily:()=>n.Db9,BlockingPrototypeData:()=>n.gRi,BlockingPrototypeDataFamily:()=>n.aXv,BlockingUserState:()=>n.GTW,BlockingUserStateFamily:()=>n.w34,BranchOpenMergeRequest:()=>n._pL,BranchOpenMergeRequestFamily:()=>n.Bo7,BrowseTemplatesView:()=>n.jY9,BrowseTemplatesViewFamily:()=>n.wnh,ChurnFrictionPersonalizedModalView:()=>n.wcs,ChurnFrictionPersonalizedModalViewFamily:()=>n.PXZ,ColorPaletteForUuid:()=>n.ISy,ColorPaletteForUuidFamily:()=>n.AKt,ColorPalettesForTeam:()=>n.Nm0,ColorPalettesForTeamFamily:()=>n.AkP,CommunityHubLikeForProfile:()=>n.zSs,CommunityHubLikeForProfileFamily:()=>n.sze,CommunityLibraries:()=>n.nmH,CommunityLibrariesFamily:()=>n.Gc6,CommunityLibraryStyleData:()=>n.B3N,CommunityLibraryStyleDataFamily:()=>n.eYT,CommunityPayment:()=>n.sGM,CommunityPaymentFamily:()=>n.XdA,CommunityProfileView:()=>n.F5U,CommunityProfileViewFamily:()=>n.B1_,CommunityRatingHubFileView:()=>n.aNd,CommunityRatingHubFileViewFamily:()=>n.PaB,CommunityRatingPluginView:()=>n.hed,CommunityRatingPluginViewFamily:()=>n.Bp_,CommunityRatingStats:()=>n.C75,CommunityRatingStatsFamily:()=>n.n2v,CommunityResourceStat:()=>n.EiD,CommunityResourceStatFamily:()=>n.hAy,ComponentByKey:()=>n.GDT,ComponentByKeyFamily:()=>n.RsL,ComponentUpdatesForFile:()=>n.ANm,ComponentUpdatesForFileFamily:()=>n.KrU,ComponentUpdatesForProject:()=>n.RxN,ComponentUpdatesForProjectFamily:()=>n.e_b,ComponentUpdatesForTeam:()=>n.ibd,ComponentUpdatesForTeamFamily:()=>n.EoA,CopyLinkFileData:()=>n.ACf,CopyLinkFileDataFamily:()=>n.LpG,CurrentUserAssignedWorkspaceView:()=>n.KGX,CurrentUserAssignedWorkspaceViewFamily:()=>n.eC_,CurrentUserFileRecentsView:()=>n.b5K,CurrentUserFileRecentsViewFamily:()=>n.FWP,CurrentUserLicenseGroupAdmins:()=>n.lJU,CurrentUserLicenseGroupAdminsFamily:()=>n.$fm,CurrentWorkspaceView:()=>n.Kx8,CurrentWorkspaceViewFamily:()=>n.n3X,DesktopNewTabData:()=>n.bJS,DesktopNewTabDataFamily:()=>n.vG1,DevModeOptIn:()=>n.ZqX,DevModeOptInFamily:()=>n.X06,DevModeOptInInfo:()=>n.iTe,DevModeOptInInfoFamily:()=>n.lUG,DevModeOrgSuggestedUpgrades:()=>n.nKj,DevModeOrgSuggestedUpgradesFamily:()=>n.JPT,DevModeSuggestedUpgradesFlag:()=>n.GUo,DevModeSuggestedUpgradesFlagFamily:()=>n.QyG,DevModeTeamSuggestedUpgrades:()=>n.NAh,DevModeTeamSuggestedUpgradesFamily:()=>n.cGn,DeveloperCodeSnippet:()=>n.yDx,DeveloperCodeSnippetFamily:()=>n.ss3,DeveloperLinks:()=>n.I9m,DeveloperLinksFamily:()=>n.Vm0,DeveloperRelatedLinks:()=>n.t2K,DeveloperRelatedLinksFamily:()=>n.jnz,DeveloperRelatedLinksForNode:()=>n.yiA,DeveloperRelatedLinksForNodeFamily:()=>n.v5A,DeviceTryFileView:()=>n.Oex,DeviceTryFileViewFamily:()=>n.xlE,DraftFilesView:()=>n.MA4,DraftFilesViewFamily:()=>n.cyy,DraftsToMoveFoldersByUserId:()=>n.$Dh,DraftsToMoveFoldersByUserIdFamily:()=>n.kVl,EduOffboardingData:()=>n.vEc,EduOffboardingDataFamily:()=>n.pMQ,EnterpriseOrgAdminOnboardingSequenceView:()=>n.TTf,EnterpriseOrgAdminOnboardingSequenceViewFamily:()=>n.VX2,EnterpriseOrgMetaContentView:()=>n.XVE,EnterpriseOrgMetaContentViewFamily:()=>n.W0s,EsOrgUsersView:()=>n.Ah5,EsOrgUsersViewFamily:()=>n.u0N,ExtensionActivityLogHistoryView:()=>n.TDA,ExtensionActivityLogHistoryViewFamily:()=>n.Z2A,FavoritesByResourceId:()=>n.KY6,FavoritesByResourceIdFamily:()=>n.DZ4,FeedPostSummary:()=>n.Cnk,FeedPostSummaryFamily:()=>n.yKk,FeedPostWithDetails:()=>n.GU0,FeedPostWithDetailsFamily:()=>n.Rhm,FeedPostsByFileKey:()=>n.dSN,FeedPostsByFileKeyFamily:()=>n.$Ye,FeedPostsByUser:()=>n.KPk,FeedPostsByUserFamily:()=>n.EFY,FeedTagFollowsByUser:()=>n.AaD,FeedTagFollowsByUserFamily:()=>n.sum,FigmadocForNode:()=>n.$yK,FigmadocForNodeFamily:()=>n.BDH,FileBrowserMigratedToSections:()=>n.JOQ,FileBrowserMigratedToSectionsFamily:()=>n._Yw,FileBrowserSearchBarData:()=>n.UJk,FileBrowserSearchBarDataFamily:()=>n._OR,FileBrowserSidebarData:()=>n.uJL,FileBrowserSidebarDataFamily:()=>n.APk,FileByKey:()=>n.OK3,FileByKeyFamily:()=>n.LTT,FileByKeyForRealtimeShim:()=>n.B_7,FileByKeyForRealtimeShimFamily:()=>n.kt8,FileCanAccessDevModeEntryPoint:()=>n.rM9,FileCanAccessDevModeEntryPointFamily:()=>n.xR4,FileCanAccessFullDevMode:()=>n.xUg,FileCanAccessFullDevModeFamily:()=>n.Skv,FileCanDelete:()=>n.SfB,FileCanDeleteFamily:()=>n.Sk,FileCanDiscover:()=>n.oFj,FileCanDiscoverFamily:()=>n.omh,FileCanEdit:()=>n.vRf,FileCanEditCanvas:()=>n.m3w,FileCanEditCanvasFamily:()=>n.JGp,FileCanEditFamily:()=>n.B3k,FileCanEditIgnoreEduGracePeriod:()=>n.zN2,FileCanEditIgnoreEduGracePeriodFamily:()=>n.HIZ,FileCanEditIgnorePaidStatus:()=>n.Prl,FileCanEditIgnorePaidStatusFamily:()=>n.nfd,FileCanFavorite:()=>n.wby,FileCanFavoriteFamily:()=>n.bcB,FileCanInsertTemplate:()=>n.egF,FileCanInsertTemplateFamily:()=>n.Gdc,FileCanManage:()=>n.EEB,FileCanManageFamily:()=>n.pjd,FileCanMoveComments:()=>n.QoZ,FileCanMoveCommentsFamily:()=>n.RhK,FileCanPublishTemplate:()=>n.qbf,FileCanPublishTemplateFamily:()=>n.d3A,FileCanRename:()=>n.h1e,FileCanRenameFamily:()=>n.seM,FileCanView:()=>n.hMF,FileCanViewAndCreateComments:()=>n.dY1,FileCanViewAndCreateCommentsFamily:()=>n.rMh,FileCanViewFamily:()=>n.Ez9,FileCanViewPrototype:()=>n.zrY,FileCanViewPrototypeFamily:()=>n.e8N,FileCanvasMentionsByFileKey:()=>n.rQy,FileCanvasMentionsByFileKeyFamily:()=>n.Gpu,FileContext:()=>n.sRs,FileContextFamily:()=>n.W4V,FileEditRequestExistence:()=>n.AW0,FileEditRequestExistenceFamily:()=>n.b4r,FileExpirationView:()=>n.dP9,FileExpirationViewFamily:()=>n.CnN,FileFeaturesEnabled:()=>n.gym,FileFeaturesEnabledFamily:()=>n.aTw,FileIsEligibleForDevModeTrial:()=>n.T7d,FileIsEligibleForDevModeTrialFamily:()=>n.DcI,FileIsInDevModeTrial:()=>n.FWc,FileIsInDevModeTrialFamily:()=>n.Azy,FileKeysInProject:()=>n.XV,FileKeysInProjectFamily:()=>n.$gy,FileManagePermission:()=>n.NfQ,FileManagePermissionFamily:()=>n.vt8,FilePermissions:()=>n.HgG,FilePermissionsFamily:()=>n.Ztg,FilePermissionsV2:()=>n.bsQ,FilePermissionsV2Family:()=>n.eZ9,FilePermittedUsers:()=>n.Ftt,FilePermittedUsersFamily:()=>n.Iyu,FilePresenterData:()=>n.Ib7,FilePresenterDataFamily:()=>n.WaY,FileSearchResult:()=>n.d8m,FileSearchResultFamily:()=>n.cQl,FileTemplateView:()=>n.fOy,FileTemplateViewFamily:()=>n.eRn,FileTilePermissions:()=>n.eWQ,FileTilePermissionsFamily:()=>n.DAw,FileVersions:()=>n.xUZ,FileVersionsFamily:()=>n.Fzr,FileWithCommentsAndReactions:()=>n.tWt,FileWithCommentsAndReactionsFamily:()=>n.q9c,FileWithPrototypeLibCppConfig:()=>n.RuG,FileWithPrototypeLibCppConfigFamily:()=>n.B2,FileWithRoleRequests:()=>n.ts6,FileWithRoleRequestsFamily:()=>n.t1S,FileWorkshopMode:()=>n.h5X,FileWorkshopModeFamily:()=>n.MvN,FilesForProject:()=>n.BZT,FilesForProjectFamily:()=>n._Or,FilesForRepo:()=>n.a_Y,FilesForRepoFamily:()=>n.B02,FilesForTeam:()=>n.C$n,FilesForTeamFamily:()=>n.S_o,FilesInProjectHighLimit:()=>n.Bad,FilesInProjectHighLimitFamily:()=>n.G18,FolderCanEdit:()=>n.vmF,FolderCanEditFamily:()=>n._4S,FolderCanView:()=>n.Cfn,FolderCanViewFamily:()=>n.UXs,FolderCreation:()=>n.T0c,FolderCreationFamily:()=>n.k2v,FolderIsOwner:()=>n.Tet,FolderIsOwnerFamily:()=>n.pjg,FolderPageView:()=>n.wYh,FolderPageViewFamily:()=>n.vLQ,FolderPermissions:()=>n.vxZ,FolderPermissionsFamily:()=>n.BnU,FolderSearchResult:()=>n.C57,FolderSearchResultFamily:()=>n.PAd,GlobalRecentFilesView:()=>n.tVA,GlobalRecentFilesViewFamily:()=>n.Wwy,GlobalRecentPrototypesView:()=>n.Vw8,GlobalRecentPrototypesViewFamily:()=>n.bIU,HubFile:()=>n.lPT,HubFileFamily:()=>n.MAV,InstalledPlugins:()=>n.Wow,InstalledPluginsFamily:()=>n.Vj2,JamboardOfferRedeemedAt:()=>n.ulW,JamboardOfferRedeemedAtFamily:()=>n.PlY,LatestClipboardData:()=>n.Jl7,LatestClipboardDataFamily:()=>n.tZ3,LegacySourceStyleData:()=>n.$Jn,LegacySourceStyleDataFamily:()=>n.toW,LibraryData:()=>n.GDb,LibraryDataFamily:()=>n.nCw,LibraryFileSelect:()=>n.jIE,LibraryFileSelectFamily:()=>n.NdO,LibraryManagementData:()=>n._I2,LibraryManagementDataFamily:()=>n.b4x,LibraryModalAssetsData:()=>n.nzj,LibraryModalAssetsDataFamily:()=>n.A6g,LibraryModalVariablesData:()=>n.Fqb,LibraryModalVariablesDataFamily:()=>n.LKn,LibraryModuleData:()=>n.SOp,LibraryModuleDataFamily:()=>n.e7j,LibraryPublish:()=>n.QOs,LibraryPublishFamily:()=>n.nor,LibraryStyleData:()=>n.Iqw,LibraryStyleDataFamily:()=>n.WLp,LibrarySubscriptionView:()=>n.Pgx,LibrarySubscriptionViewFamily:()=>n.cMe,LibraryVariableCollectionData:()=>n.zSy,LibraryVariableCollectionDataFamily:()=>n.Cpv,LibraryVariableCollectionDataWithVariables:()=>n.az6,LibraryVariableCollectionDataWithVariablesFamily:()=>n.f47,LicenseGroupCountView:()=>n.Qel,LicenseGroupCountViewFamily:()=>n.QWM,LicenseGroupSubscribedLibrariesForFile:()=>n.i$U,LicenseGroupSubscribedLibrariesForFileFamily:()=>n.qY9,LicenseGroupSubscribedLibrariesForTeam:()=>n.l1d,LicenseGroupSubscribedLibrariesForTeamFamily:()=>n.cXp,Mobile_CommentThreadByRootComment:()=>n.t$C,Mobile_CommentThreadByRootCommentFamily:()=>n.LB3,Mobile_FavoritedFigJamBoards:()=>n.GwS,Mobile_FavoritedFigJamBoardsFamily:()=>n.eG2,Mobile_FavoritedResources:()=>n.G$0,Mobile_FavoritedResourcesFamily:()=>n.zhf,Mobile_FeedPostSummary:()=>n.Qa$,Mobile_FeedPostSummaryFamily:()=>n.S25,Mobile_FileByKey:()=>n.DDp,Mobile_FileByKeyFamily:()=>n.QCe,Mobile_FileCommentThreadsByFile:()=>n.kIs,Mobile_FileCommentThreadsByFileFamily:()=>n.IkM,Mobile_FilePermissions:()=>n.SQZ,Mobile_FilePermissionsFamily:()=>n.BJU,Mobile_LastFrameSelection:()=>n.rUb,Mobile_LastFrameSelectionFamily:()=>n.Mjr,Mobile_OrgSummary:()=>n.YEI,Mobile_OrgSummaryFamily:()=>n.Oyr,Mobile_OrgsByUser:()=>n.AYQ,Mobile_OrgsByUserFamily:()=>n.wFs,Mobile_OrgsByUserV2:()=>n.vwD,Mobile_OrgsByUserV2Family:()=>n.xYL,Mobile_ProjectFigJamBoards:()=>n.P3Z,Mobile_ProjectFigJamBoardsFamily:()=>n.naQ,Mobile_ProjectFiles:()=>n.dVb,Mobile_ProjectFilesFamily:()=>n.$Lc,Mobile_RecentlyViewedPrototypes:()=>n.MS2,Mobile_RecentlyViewedPrototypesFamily:()=>n.svO,Mobile_SpacesByUser:()=>n.JAl,Mobile_SpacesByUserFamily:()=>n.Zdm,Mobile_TeamFavoritedFigJamBoards:()=>n.S_R,Mobile_TeamFavoritedFigJamBoardsFamily:()=>n.yHY,Mobile_TeamFavoritedResources:()=>n.wTT,Mobile_TeamFavoritedResourcesFamily:()=>n.ISm,Mobile_TeamProjectsWithFilesPreview:()=>n.VD6,Mobile_TeamProjectsWithFilesPreviewFamily:()=>n.dIE,Mobile_TeamSummary:()=>n.vOn,Mobile_TeamSummaryFamily:()=>n.e_m,MoveDraftsTeamData:()=>n.BDy,MoveDraftsTeamDataFamily:()=>n.AhM,NewFileCreationBar:()=>n.BEF,NewFileCreationBarFamily:()=>n.ULK,NodeStatusUsagesForFileView:()=>n.a$f,NodeStatusUsagesForFileViewFamily:()=>n.DO_,NodeStatusUsagesForNodeView:()=>n.KDH,NodeStatusUsagesForNodeViewFamily:()=>n.j12,NonEnterpriseOrgMetaContentView:()=>n.o6R,NonEnterpriseOrgMetaContentViewFamily:()=>n.f1p,OpenEditorFileData:()=>n.lCf,OpenEditorFileDataFamily:()=>n.UM,OptionalFileBrowserSearchBarData:()=>n.Xkp,OptionalFileBrowserSearchBarDataFamily:()=>n.oRe,OrgAdminUserView:()=>n.HVB,OrgAdminUserViewFamily:()=>n.Lw1,OrgHasWorkspacesView:()=>n.EvO,OrgHasWorkspacesViewFamily:()=>n.GDg,OrgInviteModalView:()=>n.mNO,OrgInviteModalViewFamily:()=>n.SJ4,OrgJoinRequestExistence:()=>n.XX2,OrgJoinRequestExistenceFamily:()=>n.TYg,OrgSharedSettingView:()=>n.kQH,OrgSharedSettingViewFamily:()=>n.bJI,OrgTaxIdView:()=>n.dRO,OrgTaxIdViewFamily:()=>n.Por,OrgTeamSummariesView:()=>n.FvO,OrgTeamSummariesViewFamily:()=>n.IQ2,OrgTeamView:()=>n.zyc,OrgTeamViewFamily:()=>n.AQu,OrgTeamsWithSummary:()=>n.EtI,OrgTeamsWithSummaryFamily:()=>n.YA_,OrgUserFlag:()=>n.Fci,OrgUserFlagFamily:()=>n.igG,OrgWithWorkspacesPublicLinkControlsSettingView:()=>n.iJV,OrgWithWorkspacesPublicLinkControlsSettingViewFamily:()=>n.$VI,OrgsByUser:()=>n.RTE,OrgsByUserFamily:()=>n.eOA,PaginatedFigFeed:()=>n.rBI,PaginatedFigFeedFamily:()=>n.rv5,PendingTeamRoleRequestsByTeamId:()=>n.Do2,PendingTeamRoleRequestsByTeamIdFamily:()=>n.kiv,PendingUserMentionByCommentView:()=>n.wk3,PendingUserMentionByCommentViewFamily:()=>n.WHN,PersistentLastFrameSelectionView:()=>n.tGM,PersistentLastFrameSelectionViewFamily:()=>n.rnT,PinnedFiles:()=>n.UR7,PinnedFilesFamily:()=>n._yF,Plugin:()=>n.SyM,PluginAllowlistManagementModalView:()=>n.xKE,PluginAllowlistManagementModalViewFamily:()=>n.PEO,PluginFamily:()=>n.H0l,PluginInstall:()=>n.B7O,PluginInstallFamily:()=>n.y2S,PluginPreferencesView:()=>n.QgG,PluginPreferencesViewFamily:()=>n.MDz,PluginRequests:()=>n.dc8,PluginRequestsFamily:()=>n.kNh,PluginSecurityFormResponse:()=>n.kad,PluginSecurityFormResponseFamily:()=>n.YOY,ProRequestUpgradeModalData:()=>n.Hyp,ProRequestUpgradeModalDataFamily:()=>n.lbt,ProjectById:()=>n.qw5,ProjectByIdFamily:()=>n.qyM,ProjectByIdForRealtimeShim:()=>n.Qns,ProjectByIdForRealtimeShimFamily:()=>n.yGg,ProjectFileCount:()=>n.es9,ProjectFileCountFamily:()=>n.GR$,ProjectNameById:()=>n.PqU,ProjectNameByIdFamily:()=>n.pJS,ProjectOwnerRole:()=>n.fnX,ProjectOwnerRoleFamily:()=>n.iMp,ProjectTilePermissions:()=>n.wtN,ProjectTilePermissionsFamily:()=>n.QS0,ProjectsForTeam:()=>n.xWv,ProjectsForTeamFamily:()=>n.gmN,PrototypeTilePermissions:()=>n.AKU,PrototypeTilePermissionsFamily:()=>n.GcX,QuickReply_CommentThreadByRootComment:()=>n.OUS,QuickReply_CommentThreadByRootCommentFamily:()=>n.BH0,RepoById:()=>n.Nx2,RepoByIdFamily:()=>n.Rn5,RepoCanEdit:()=>n.Bkh,RepoCanEditFamily:()=>n.VeQ,RepoCanViewPrototype:()=>n.h0b,RepoCanViewPrototypeFamily:()=>n.Kyi,RepoFiles:()=>n._E8,RepoFilesFamily:()=>n.E6m,RepoReviewerSuggestions:()=>n.q3X,RepoReviewerSuggestionsFamily:()=>n.xcx,RepoTilePermissions:()=>n.aIR,RepoTilePermissionsFamily:()=>n.UYf,ResolvedComments:()=>n.jWg,ResolvedCommentsFamily:()=>n.CCj,ResourceSave:()=>n.o07,ResourceSaveFamily:()=>n.GCD,ResourceSaves:()=>n.XKX,ResourceSavesFamily:()=>n.ebe,RoleUpdatesForTeam:()=>n.vOv,RoleUpdatesForTeamFamily:()=>n.VoW,RoleUpdatesForUser:()=>n.TVQ,RoleUpdatesForUserFamily:()=>n._t$,SearchFilterWorkspaceView:()=>n._M,SearchFilterWorkspaceViewFamily:()=>n.CV0,SharedWithYouFile:()=>n.R7O,SharedWithYouFileFamily:()=>n.ES2,SharedWithYouFolder:()=>n.eZy,SharedWithYouFolderFamily:()=>n.p1X,SharedWithYouPrototype:()=>n.T_f,SharedWithYouPrototypeFamily:()=>n.ixC,SharedWithYouRepo:()=>n.cRL,SharedWithYouRepoFamily:()=>n.V3A,SharedWithYouResources:()=>n.uvx,SharedWithYouResourcesFamily:()=>n.yFu,SharedWithYouTeam:()=>n.Mif,SharedWithYouTeamFamily:()=>n.m5Q,SlidesTheme:()=>n.$Dk,SlidesThemeFamily:()=>n.uLQ,StarterFileEditConfirmation:()=>n.iFh,StarterFileEditConfirmationFamily:()=>n.BkO,StateGroupByKey:()=>n.ile,StateGroupByKeyFamily:()=>n.sKm,StatsigTeamsOrderView:()=>n.jT8,StatsigTeamsOrderViewFamily:()=>n.MMl,StyleByKey:()=>n.$16,StyleByKeyFamily:()=>n.KVm,SubscribedLibrariesForFile:()=>n.Bgx,SubscribedLibrariesForFileFamily:()=>n.dDR,SubscriptionUpdateSloData:()=>n.gWh,SubscriptionUpdateSloDataFamily:()=>n.v60,TeamById:()=>n.aEo,TeamByIdFamily:()=>n.i$1,TeamCanAdmin:()=>n.ecG,TeamCanAdminFamily:()=>n.PfR,TeamCanEdit:()=>n.hzW,TeamCanEditFamily:()=>n.S6Z,TeamCanView:()=>n.Ngd,TeamCanViewFamily:()=>n.QZI,TeamCreationWorkspaceView:()=>n.ChP,TeamCreationWorkspaceViewFamily:()=>n.IVT,TeamFileCountsByTeamId:()=>n.rAQ,TeamFileCountsByTeamIdFamily:()=>n.FPn,TeamFileLimitsInfo:()=>n.DLG,TeamFileLimitsInfoByProject:()=>n.sYg,TeamFileLimitsInfoByProjectFamily:()=>n.cas,TeamFileLimitsInfoFamily:()=>n.Znh,TeamIsOwner:()=>n.CIT,TeamIsOwnerFamily:()=>n.dlf,TeamPermissions:()=>n.v0v,TeamPermissionsFamily:()=>n.WjK,TeamSettings:()=>n.cNd,TeamSettingsFamily:()=>n.FNZ,TeamTaxIdView:()=>n.WNd,TeamTaxIdViewFamily:()=>n.MUT,TeamTilePermissions:()=>n.dhi,TeamTilePermissionsFamily:()=>n.bWI,TeamUserStatusAndRequests:()=>n.w4$,TeamUserStatusAndRequestsFamily:()=>n.o1,ToggledDevModeSettingsView:()=>n.C5N,ToggledDevModeSettingsViewFamily:()=>n.Qx5,UserColorProfilePreferenceView:()=>n.yBX,UserColorProfilePreferenceViewFamily:()=>n._fk,UserForRcs:()=>n.iPP,UserForRcsFamily:()=>n.LyB,UserGlobalFavoritedFiles:()=>n.rTG,UserGlobalFavoritedFilesFamily:()=>n.mms,UserJamboardOfferEligibility:()=>n.t46,UserJamboardOfferEligibilityFamily:()=>n.HQ$,UserMonetizationMetadata:()=>n.KU3,UserMonetizationMetadataFamily:()=>n.Jv0,UserNotificationBellData:()=>n.iIe,UserNotificationBellDataFamily:()=>n.q6n,UserRecentSharedWithYouFiles:()=>n.mUp,UserRecentSharedWithYouFilesFamily:()=>n.e6A,UserWithTeams:()=>n.Kmw,UserWithTeamsFamily:()=>n.D_e,VariableByKey:()=>n.a$K,VariableByKeyFamily:()=>n.HRu,VariableCollectionByKey:()=>n.Osp,VariableCollectionByKeyFamily:()=>n.dFt,VariablesByVariableCollectionKey:()=>n.DlB,VariablesByVariableCollectionKeyFamily:()=>n.sV3,Views:()=>n.kOt,WorkspaceAdminSettingsView:()=>n.wFP,WorkspaceAdminSettingsViewFamily:()=>n.rQE,WorkspaceCanCreateTeamView:()=>n.Hu_,WorkspaceCanCreateTeamViewFamily:()=>n.fqU,WorkspaceDefaultTeamsView:()=>n.vRb,WorkspaceDefaultTeamsViewFamily:()=>n.ow2,WorkspaceModalPluginRequests:()=>n.OEb,WorkspaceModalPluginRequestsFamily:()=>n.l3o,WorkspaceOrgAccessView:()=>n.U18,WorkspaceOrgAccessViewFamily:()=>n.GJk,WorkspacePageMembersView:()=>n.atB,WorkspacePageMembersViewFamily:()=>n.MPP,WorkspaceSelectorView:()=>n.f26,WorkspaceSelectorViewFamily:()=>n.OTB,WorkspaceSubscribedLibrariesForFile:()=>n.d3L,WorkspaceSubscribedLibrariesForFileFamily:()=>n.IJm,WorkspaceSubscribedLibrariesForTeam:()=>n.e_8,WorkspaceSubscribedLibrariesForTeamFamily:()=>n.go$,WorkspacesCanAdminView:()=>n.hn1,WorkspacesCanAdminViewFamily:()=>n.mA_,WorkspacesDirectoryView:()=>n.EmY,WorkspacesDirectoryViewFamily:()=>n.ooQ,WorkspacesTableView:()=>n.p91,WorkspacesTableViewFamily:()=>n.joM});var n=r(240746)},485091:(e,t,r)=>{r.d(t,{$3:()=>N,$9:()=>S,CF:()=>f,DV:()=>k,Hm:()=>K,MB:()=>_,O4:()=>g,Sb:()=>y,T:()=>I,XL:()=>L,ZZ:()=>b,aF:()=>U,bO:()=>A,cL:()=>T,cz:()=>W,il:()=>x,j2:()=>M,j9:()=>C,ld:()=>G,mq:()=>O,nX:()=>B,q4:()=>D,vR:()=>H,we:()=>w,yU:()=>v});var n=r(46347),i=r(598271),a=r(523495),o=r(297296),l=r(11802),s=r(761767),c=r(166885),d=r(321909),u=r(640634),p=r(166689),m=r(961215),h=r(481508);let _=e=>{let t={};for(let r in e)t[(0,a.sG)(r)]=e[r];return t},g=e=>{for(let[t,r]of Object.entries(e))r instanceof Date?e[t]=r.toISOString():r&&"object"==typeof r&&g(e[t])},f=(e,t)=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(r.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(r.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r._name=e.name),r&&t)?{File:{[t]:r}}:null},E=e=>{let t={};return(e.link_access&&(t.linkAccess=e.link_access),"proto_link_access"in e&&(t.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(t.orgAudience=e.org_audience),"org_browsable"in e&&(t.orgBrowsable=e.org_browsable),e.name&&(t.name=e.name),t&&e.id)?{Repo:{[e.id]:t}}:null},y=e=>{if(!e.id)return null;let t=E(e);return t?(e.default_file_key&&Object.assign(t,f(e,e.default_file_key)),t):null},v=(e,t,r)=>{let n=void 0!==e.default_file_key?e.default_file_key:e.key;return n&&"optimistic"===t&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${n}`]:{figFileKey:n,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:s.I1.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:(null==r?void 0:r.id)||null,setByUser:r}}}:null},b=(e,t,r)=>{let n=e.link_access===s.I1.VIEW||e.link_access===s.I1.EDIT||e.proto_link_access===s.ur.VIEW;return t&&"optimistic"!==t&&(!n||"expires_at"in e)?{FigFileLinkExpirationConfig:{[t]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:(null==r?void 0:r.id)||null,setByUser:r}}}:null},I=e=>({key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url});function T(e,t,r){let n=`${window.location.origin}/proto/${e}/${(0,a.W0)(t||"")}`;return null!=r?`${n}?node-id=${(0,a.W0)(r)}`:n}let w=e=>{var t,r;return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,a.W0)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,a.W0)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt.toString(),creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!(null==(t=e.trackTags)?void 0:t.isTemplate),key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:null==(r=e.trackTags)?void 0:r.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user:e.trashedUser,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:!!e.viewerExportRestrictedAt,is_try_file:e.isTryFile}},S=e=>{let t={id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0};return t};function C(e,t,r,n){let i={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:r?{design_paid_status:r.accountType,whiteboard_paid_status:r.whiteboardPaidStatus||s.oz.STARTER,user_id:r.userId,permission:r.permission}:void 0,team_user:n?{design_paid_status:n.designPaidStatus,whiteboard_paid_status:n.whiteboardPaidStatus,user_id:n.userId,team_id:n.teamId}:void 0};return e.pending?{...i,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...i,pending:!1,user_id:t.id,user:t}}let O=e=>({id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}),A=(e,t)=>({id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:t});function N(e){let t={};return e.forEach(e=>t[e.id]=e),t}let L=e=>{switch(e){case s._g.FILE:return"FileRole";case s._g.FILE_REPO:return"RepoRole";case s._g.FOLDER:return"ProjectRole";case s._g.TEAM:return"TeamRole"}};function P(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function R(e,t){var r;return{description:e.description??void 0,description_rt:e.description_rt??void 0,file_key:t.key,id:e.id,name:e.name,team_id:t.teamId,unpublished_at:(null==(r=e.unpublishedAt)?void 0:r.toISOString())??null}}function k(e,t){let r=R(e,t);return{...r,type:c.h3.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,o.lG)(e.componentKey),containing_frame:P(e.containingFrame),content_hash:(0,o.Dl)(e.contentHash),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function D(e,t){return{...R(e,t),type:c.h3.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:P(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,o.No)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,o.WW)(e.version),thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`}}function M(e,t){var r;return{...R(e,t),type:c.h3.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:null==(r=e.checkpoint)?void 0:r.key,content_hash:(0,o.IT)(e.contentHash),key:(0,o.hx)(e.key),meta:e.meta?(0,h.iI)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function F(e,t){return`/variable_set/${e}/canvas?ver=${t}`}function x(e,t,r){let a="",l="";return r?(a=u.vF(i.mL(e.nodeId)??i.AX),l=p.vF(i.mL(e.variableCollection.nodeId)??i.AX)):(a=u.c_((0,o.c5)(e.key),(0,o.v0)(e.version)),l=p.c_((0,o.tb)(e.variableCollection.key),(0,o.X3)(e.variableCollection.version))),{...R({...e,description_rt:null,thumbnailUrl:null},t),subscriptionStatus:"LIBRARY",type:c.h3.VARIABLE,node_id:a,variableSetId:l,variableCollectionKey:(0,o.tb)(e.variableCollection.key),resolvedType:function(e){switch(e){case"BOOLEAN":return m.QC$.BOOLEAN;case"COLOR":return m.QC$.COLOR;case"FLOAT":return m.QC$.FLOAT;case"MAP":return m.QC$.MAP;case"STRING":return m.QC$.STRING;case"SYMBOL_ID":return m.QC$.SYMBOL_ID;default:(0,n.P2)(`Unhandled livegraph type: ${e}`)}}(e.variableType),version:(0,o.v0)(e.version),sortPosition:e.sortPosition,key:(0,o.c5)(e.key),scopes:(0,d.JI)(e.scopes),canvas_url:F(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function U(e,t,r){var n;let a="";return a=r?p.vF(i.mL(e.nodeId)??i.AX):p.c_((0,o.tb)(e.key),(0,o.X3)(e.version)),{...R({...e,description_rt:null,thumbnailUrl:null},t),subscriptionStatus:"LIBRARY",type:c.h3.VARIABLE_SET,node_id:a,version:(0,o.X3)(e.version),canvas_url:F(e.key,e.checkpoint.key),key:(0,o.tb)(e.key),checkpoint_id:null==(n=e.checkpoint)?void 0:n.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let t=[];for(let r of e)t.push({id:r.id,name:r.name});return t}(e.modes),isExtendable:("loaded"===e.isExtendable.status&&e.isExtendable.data)??!1}}function B(e,t){return{...R(e,t),subscriptionStatus:"LIBRARY",type:c.h3.MODULE,node_id:e.nodeId,key:(0,o.y7)(e.key),version:(0,o.qH)(e.version),canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:void 0,thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:V(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height),file_name:t.name}}let V=e=>{switch(e){case"EDITOR_TEMPLATE":return m.T7X.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return m.T7X.SLIDES_TEMPLATE;default:(0,n.P2)(`Unhandled livegraph module source: ${e}`)}},G=e=>({id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,subscription:e.is_favorited?{id:"temp_is_favorited"}:null,description:e.description,ownerRole:null});function H(e,t,r){return(t||r)&&e?(0,l.lR)(e)?{autogen_password_controls:(null==t?void 0:t.autogenPasswordControls)||!1,external_collaboration_controls:(null==t?void 0:t.externalCollaborationControls)||!1,public_link_controls_setting:(null==r?void 0:r.publicLinkControlsSetting)??(null==t?void 0:t.publicLinkControlsSetting),public_link_controls_max_expiration:(null==r?void 0:r.publicLinkControlsMaxExpiration)??(null==t?void 0:t.publicLinkControlsMaxExpiration)}:{autogen_password_controls:(null==t?void 0:t.autogenPasswordControls)||!1,external_collaboration_controls:(null==t?void 0:t.externalCollaborationControls)||!1,public_link_controls_setting:null==t?void 0:t.publicLinkControlsSetting,public_link_controls_max_expiration:null==t?void 0:t.publicLinkControlsMaxExpiration}:null}function W(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?S(e.setByUser):null}:null}function K(e){let t={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{t.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null})}),t}},795153:(e,t,r)=>{r.d(t,{Db:()=>p.Db,aM:()=>p.aM,t1:()=>_});var n=r(269658),i=r(337167),a=r(669277),o=r(235484),l=r(302566),s=r(316094),c=r(732698),d=r(488054),u=r(386015),p=r(870077);let m={File:(0,l.Z)(()=>n.V,()=>d.to),Repo:(0,c.Y)(()=>n.V,()=>d.to),Folder:(0,s.Z)(()=>n.V,()=>d.to)},h=(0,o.h)(i.n_,{getRealtimeClient:()=>d.to,getLivegraphClient:()=>a.tX.get(),getReduxStore:()=>n.V},void 0,m).extend((0,u.s)(m)),_=Object.assign(h,{useFile:e=>(0,u.T)(e,h)})},302341:(e,t,r)=>{r.d(t,{T5:()=>c,V0:()=>s});var n=r(407908),i=r(716250),a=r(925705),o=r(31642),l=r(795153);let s=(0,i.BZ)().livestore_use_file_migration?function(e){return l.t1.File.useValue(e)}:function(e){let t=(0,n.v9)(t=>e?t.fileByKey[e]:void 0);return a.IE.loaded(t)};function c(e,t,r){return async(n,{pageParam:i})=>{var a,l;let s;i?s=i:(s=e(n),s=`${s}${-1===s.indexOf("?")?"?":"&"}page_size=${t}`);let c=await (0,o._e)(s),d=r?r(c.data.meta):c.data.meta;return{data:d,nextPage:null==(a=c.data.pagination)?void 0:a.next_page,prevPage:null==(l=c.data.pagination)?void 0:l.prev_page}}}},687496:(e,t,r)=>{r.d(t,{Dj:()=>v,EB:()=>y,Id:()=>h,Lr:()=>p,Se:()=>I,_M:()=>f,mv:()=>T,uP:()=>E,xC:()=>g,x_:()=>m,yJ:()=>_});var n=r(652983),i=r(716250),a=r(286206),o=r(211879),l=r(45e4),s=r(987004);let c=["jpy","usd","gbp","cad","eur"],d=()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let t=navigator.language;if(t)return t}return"en-US"},u={jpy:{annualFigma:1800,monthlyFigma:2250,orgFigma:6750,orgDevMode:3750,orgFigjam:750,enterprise:11250,enterpriseDevMode:5250,enterpriseFigjam:750,annualFigjam:450,monthlyFigjam:750},usd:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},eur:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},gbp:{annualFigma:1100,monthlyFigma:1400,orgFigma:4e3,orgDevMode:2200,orgFigjam:500,enterprise:7e3,enterpriseDevMode:3200,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},cad:{annualFigma:1600,monthlyFigma:2e3,orgFigma:6e3,orgDevMode:3500,orgFigjam:700,enterprise:1e4,enterpriseDevMode:5e3,enterpriseFigjam:700,annualFigjam:400,monthlyFigjam:700}};class p{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,a.x9)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=d()}formatMoney(e,t){let r={currency:this.currency,style:"currency"};this.hasCents&&(null==t?void 0:t.showCents)||(r.maximumFractionDigits=0,r.minimumFractionDigits=0),this.hasCents&&(e*=.01);let n=e.toLocaleString(this.locale,r);return(n.startsWith("CA$")||n.startsWith("US$"))&&(n=n.slice(2)),(null==t?void 0:t.showFullFormat)?`${n} ${this.fullFormat[this.currency]}`:n}formatPrice(e){return this.formatMoney(this.getPrices()[e])}getPrices(){return u[this.currency]}getPricesForOrgPlan(e){let t,r,n;let i=this.getPrices();if(e===o.On.ORGANIZATION)t=i.orgFigma,r=i.orgFigjam,n=i.orgDevMode;else if(e===o.On.ENTERPRISE)t=i.enterprise,r=i.enterpriseFigjam,n=i.enterpriseDevMode;else throw Error(`Unknown billing plan: ${e}.`);return{[s.z9.DESIGN]:t,[s.z9.FIGJAM]:r,[s.z9.DEV_MODE]:n}}getPricesWithOverride(e,t){let r={},n=this.getPricesForOrgPlan(t);return l.as.forEach(t=>{var a;let o=n[t];(0,i.BZ)().billing_free_periods&&(null==e?void 0:e.license_type_configuration)&&(null==(a=e.license_type_configuration[t])?void 0:a.is_free_period)&&(o=0),r[t]=o}),r}}function m(){let e=(0,i.ZP)().user_currency_from_ip;return y()?e:"usd"}function h(){return new p(m())}function _(){return y()&&"usd"!==m()&&(0,i.ZP)().iso_code||"US"}function g(){return v()&&"usd"!==m()&&(0,i.ZP)().iso_code||"US"}function f(){let e=new Set;return e.add("usd"),e.add(m()),Array.from(e)}function E(e,t,r){let n=e,a=function(){let e=(0,i.ZP)().fxr_for_currency;return y()?e:null}();null==a&&(n="usd",a=1),"usd"===n&&(a=1);let o=new p(n);return"jpy"===n&&(t*=.01),o.formatMoney(t*a,r)}let y=()=>{let e=(0,i.ZP)().user_currency_from_ip;if(!e||!c.includes(e)||"usd"===e)return!1;let t=(0,i.ZP)().user_data;return!!t&&!!t.id},v=()=>{let e=m();return!!(e&&c.includes(e))&&"usd"!==e&&(0,i.BZ)().exp_international_currencies_org},b={usd:[],eur:["AT","BE","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","SK","SI","ES","SE","CH","BG","HR","CY","IE","RO"],jpy:["JP"],cad:["CA"],gbp:["GB","IM","GG","JE","GI","GS"]};function I(e,t){return"usd"===e||b[e].includes(t)}function T(e="usd"){return(0,n.useMemo)(()=>{let t=new p(e);return(...e)=>t.formatMoney(...e)},[e])}},868755:(e,t,r)=>{r.d(t,{Om:()=>d,Ss:()=>m,bI:()=>u,dJ:()=>p,g$:()=>h});var n,i=r(716250),a=r(122342),o=r(955687),l=r(504552);let s="CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",c="CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY";function d(e){if(!(0,i.BZ)().exp_oss_sales_upsell_v1)return;let t=(0,a.gm)();t.get(c)||t.set(s,e)}function u(){(0,i.BZ)().exp_oss_sales_upsell_v1&&(0,a.gm)().set(c,!0)}function p(e){if(!(0,i.BZ)().exp_oss_sales_upsell_v1)return!1;let t=(0,a.gm)();return!t.get(c)&&e===t.get(s)}var m=((n=m||{}).UNASSIGNED="UNASSIGNED",n.ASSIGNED_CONTROL="ASSIGNED_CONTROL",n.ASSIGNED_TREATMENT="ASSIGNED_TREATMENT",n);let h=()=>{let e=(0,l.v)({undefinedIfKnownDomain:!0});return e?(0,o.E)("exp_oss_sales_upsell_v1",e).defaultValue("ASSIGNED_CONTROL").treatment("variant","ASSIGNED_TREATMENT").get():"UNASSIGNED"}},488160:(e,t,r)=>{r.d(t,{FD:()=>m,MF:()=>p,U3:()=>l,dT:()=>h,df:()=>_,fz:()=>u,jh:()=>d,t2:()=>c});var n,i=r(733609),a=r(249203),o=r(312616);let l=(e,t)=>{let r=u(e,t);return r?(0,a.qF)(r):null},s=(e,t)=>!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&t.includes(e.track_tags.figma_basics_experiment),c=(e,t,r)=>null!=e&&null!=t&&s(t,r)&&e===t.creator_id,d=(e,t,r)=>{let n=Object.values(e||{});if(0===n.length)return;let a=n.find(e=>e&&s(e,r));if(a&&(0,i.canEditFile)(a.key,t))return a.key},u=(e,t)=>Object.values(e).find(e=>t.currentUserOrgId===(e.parent_org_id||null)&&e.is_template&&"whiteboard"===e.editor_type&&(0,i.canEditFile)(e.key,t)&&!e.trashed_at&&!e.deleted_at);var p=((n=p||{}).PROPERTIES_PANEL_TITLE="properties-panel-title",n.SCRUBBABLE_CONTROL="scrubbable-control",n.PAINT_PANEL_ROW="paint-panel-row",n.TEXT_PANEL="text-panel",n);function m(e,t){return e+"-"+t.toLowerCase().replace(" ","-")}function h(){let e=(0,o.p)("editor_onboarded"),t=(0,o.p)("figma_basics_tooltips_onboarding"),r=(0,o.p)("no_figma_basics_tooltips_onboarding");return _({editor_onboarded:e,figma_basics_tooltips_onboarding:t,no_figma_basics_tooltips_onboarding:r})}function _(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding)}},37015:(e,t,r)=>{r.d(t,{JG:()=>u,_n:()=>m,jU:()=>p});var n=r(46347),i=r(256768),a=r(600470),o=r(136509),l=r(97049),s=r(45974);let c=(e,t,r)=>{switch(e){case"product":return s.Pr[t];case"role":return s.wn[t];case"accountType":return s.ck[t];case"lastEdit":return s.s$[t];case"billingGroup":let n=decodeURIComponent(t),i=Object.keys(r).find(e=>{var t;return(null==(t=r[e])?void 0:t.name)===n});if("unassigned"===t||"Unassigned"===t)return l.u;if(i)return i;return null;case"newEditor":return"true"===t;default:return null}},d=(e,t,r)=>{switch(e){case"productFilter":return s.Sp[t];case"roleFilter":return s.eT[t];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":return t;case"licenseGroupFilter":let n=(0,o.q4)(t,r);return encodeURIComponent(n);default:return null}},u=(e,t)=>{if(!e)return null;let r=(0,a.Qc)(e);return Object.keys(r).reduce((e,n)=>{if(!(n in s.u0))return e;{let i=s.GF[n],a=r[n],o=c(n,a,t);return{...e,...o&&{[i]:o}}}},s.bu)},p=(e,t)=>Object.keys(e).reduce((r,n)=>{let i=s.tc[n],a=e[n];return{...r,...a&&{[i]:d(n,a,t)}}},{}),m=e=>{let t={filters:{}};e[s.qx.newEditorFilter]&&(t.filters.new_editor=!0);let r=Object.entries(e);return r.forEach(([e,r])=>{if(null!==r&&e!==s.qx.newEditorFilter){if(e===s.qx.productFilter)t.product=r;else switch(e){case s.qx.licenseGroupFilter:t.filters.license_group=r;break;case s.qx.workspaceFilter:t.filters.workspace=r;break;case s.qx.permissionFilter:t.filters.permission=r;break;case s.qx.roleFilter:t.filters.role=r;break;case s.qx.lastEditFilter:t.filters.last_edit=(function(e){switch(e){case s.s$["3mo"]:return(0,i.Z)().subtract(3,"month");case s.s$["6mo"]:return(0,i.Z)().subtract(6,"month");case s.s$["1yr"]:return(0,i.Z)().subtract(1,"year");default:(0,n.vE)(e)}})(r).utc().format()}}}),{...t.product&&{product:t.product},filters:JSON.stringify(t.filters)}}},521384:(e,t,r)=>{r.d(t,{C5:()=>w,EW:()=>v,GJ:()=>M,Gp:()=>F,O4:()=>R,SR:()=>k,Vk:()=>T,Zh:()=>C,bm:()=>f,gD:()=>x,kz:()=>O,ms:()=>b,n8:()=>y,pD:()=>I,qQ:()=>A,qo:()=>S,vk:()=>E,vl:()=>L,wE:()=>P,zt:()=>D});var n,i,a=r(528102),o=r.n(a),l=r(46347),s=r(256768),c=r(220518),d=r(716250),u=r(970740),p=r(761767);r(211879);var m=r(45e4),h=r(987004),_=r(687496),g=r(898080);let f=3,E={[h.z9.DESIGN]:12*g.Q3,[h.z9.FIGJAM]:12*g.JJ,[h.z9.DEV_MODE]:12*g.V_};function y(e,t){if((0,c.Rn)(e.user.email))return!1;switch(t){case h.z9.DESIGN:return e.design_paid_status===p.oz.FULL;case h.z9.FIGJAM:return e.whiteboard_paid_status===p.oz.FULL;case h.z9.DEV_MODE:return e.dev_mode_paid_status===p.oz.FULL;default:(0,l.vE)(t)}}function v(e){return 1===e.quarter?"annual":"true_up"}function b(e,t,r){var n,i;let a=(null==(n=t.license_type_configuration[e])?void 0:n.added_quantity)??0;if((0,d.BZ)().gbo_enable_stubs&&t.is_stub){let r=(0,h.xm)(e),n=(null==(i=t.unit_amount_details_per_license_type[r])?void 0:i.total_cents)??0;return n*a}return a*(5-t.quarter)*(3*r[e])}function I(e){let t=e.is_stub&&1===e.quarter;if(t)return null;let r=e.num_quarters_in_billing_period||4;return(r+1-e.quarter)*3}function T(e){return Object.fromEntries(Object.values(h.z9).map(t=>{var r;return[t,(null==(r=e.license_type_configuration[t])?void 0:r.added_quantity)??0]}))}function w(e,t,r){let n=new _.Lr(e.currency),i=n.getPricesWithOverride(e,r),a=(t,r)=>{var n;if((0,d.BZ)().gbo_enable_stubs&&e.is_stub){let i=(0,h.xm)(t),a=(null==(n=e.unit_amount_details_per_license_type[i])?void 0:n.total_cents)??0;return a*r}return r*(5-e.quarter)*(3*i[t])},l=m.as.dict(r=>{var n,o;let l,s;let c=null==(n=e.license_type_configuration[r])?void 0:n.locked_quantity,d=e.seat_floor[r]??0,u=c??t[r]??0,p=(null==(o=e.license_type_configuration[r])?void 0:o.prev_total_quantity)??0,m=Math.max(u,d??0),h=Math.max(m-p,0);return 1===e.quarter?(l=m,s=u):(l=h,s=Math.max(u-p,0)),{effectiveQuantityToBill:l,rawQuantityToBill:s,effectiveNewQuantity:h,seatFloor:d,prevTotalQuantity:p,totalSeats:u,lineItemTotal:a(r,l),monthlyUnitPrice:i[r]}}),s=o()(Object.values(l).map(({lineItemTotal:e})=>e)),c=e.is_stub&&1===e.quarter,u=(()=>{if(c)return null;let t=e.num_quarters_in_billing_period||4;return(t+1-e.quarter)*3})();return{licenseData:l,amountToPay:s,isStub:e.is_stub,isFirstInvoiceOfStubPeriod:c,remainingMonths:u}}function S(e,t){return C(e,t)}function C(e,t){return e.find(e=>e.status===t)}function O(e){return!!e&&1===e.quarter}function A(e){var t;let r=C(e,"upcoming");return!!r&&!r.is_skipped_trueup&&(t=r.due_at,(0,s.Z)(t)<(0,s.Z)().add(14,"days"))}function N(e){let t=C(e,"open");return!!t&&(0,s.Z)()<(0,s.Z)(t.past_due_at)}function L(e){let t=C(e,"open");return!!t&&(0,s.Z)(t.past_due_at)<(0,s.Z)()}function P(e){return A(e)||N(e)||L(e)}var R=((n=R||{}).OVERDUE="overdue",n.UNPAID="unpaid",n.REVIEW="review",n.LOCKED="locked",n.DEFAULT="default",n),k=((i=k||{}).BILLING_STATUS="billing_status",i.TAX_ID_STATUS="tax_id_status",i.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",i);function D(e){return L(e)?"overdue":C(e,"locked")?"locked":A(e)?"review":N(e)?"unpaid":"default"}function M(e,t,r){if(0===t.length)return"";let n=D(t),i=C(t,"open");switch(n){case"unpaid":return(0,u.t)("billing_status.unpaid",{dueDate:new Date(i.past_due_at)});case"overdue":return(0,u.t)("billing_status.overdue",{dueDate:new Date(i.past_due_at)});case"review":let a=C(t,"upcoming");if(O(a)&&!e.has_automatic_upcoming_invoice)return(0,u.t)("billing_status.review.auto_renewal_off",{renewalDate:new Date(a.period_start_at)});return r?(0,u.t)("billing_status.review.workspace_admin.seat_rename",{dueDate:new Date(a.due_at)}):(0,u.t)("billing_status.review.org_admin",{dueDate:new Date(a.due_at)});case"locked":let o=C(t,"locked");return(0,u.t)("billing_status.locked",{dueDate:new Date(o.due_at)});case"default":let s=C(t,"upcoming");return(0,u.t)("billing_status.default",{dueDate:new Date(s.due_at)});default:(0,l.vE)(n)}}function F(e,t,r){let n=new _.Lr(t),i=n.getPricesForOrgPlan(r),a=o()(Object.values(e)),l=Math.max(f-a,0),s=Object.entries(e).reduce((e,t)=>{let[r,n]=t;return e+n*i[r]},0);return l&&(s+=l*i[h.z9.DESIGN]),12*s}function x(e){return null!==e&&null===e.value}},136509:(e,t,r)=>{r.d(t,{JI:()=>p,Pi:()=>T,Pv:()=>b,Sv:()=>f,Um:()=>I,ZO:()=>E,Zk:()=>h,Zt:()=>y,_D:()=>w,d8:()=>d,dB:()=>m,eW:()=>v,no:()=>S,pL:()=>g,q4:()=>u,r3:()=>_});var n=r(46347),i=r(970740),a=r(761767),o=r(801998),l=r(97049),s=r(45974),c=r(538483);function d(e,t,r){switch(e){case s.h3.NAME:return(0,i.t)("members_table.column_header.name");case s.h3.LAST_EDIT:case s.h3.LAST_DESIGN_EDIT:case s.h3.LAST_WHITEBOARD_EDIT:return(0,i.t)("members_table.column_header.edit_at");case s.h3.LAST_ACTIVE:case s.h3.LAST_DESIGN_ACTIVE:case s.h3.LAST_WHITEBOARD_ACTIVE:return(0,i.t)("members_table.column_header.active_at");case s.h3.DESIGN_ROLE:return(0,i.t)("members_table.column_header.design_role.seat_rename");case s.h3.WHITEBOARD_ROLE:return(0,i.t)("members_table.column_header.whiteboard_role.seat_rename");case s.h3.DEV_MODE_ROLE:return(0,i.t)("members_table.column_header.dev_mode_role.seat_rename");case s.h3.DESIGN_UPGRADE_DATE:case s.h3.WHITEBOARD_UPGRADE_DATE:case s.h3.DEV_MODE_UPGRADE_DATE:return(0,i.t)("members_table.column_header.upgrade_date");case s.h3.WORKSPACE:return(0,i.t)("members_table.column_header.workspace");case s.h3.LICENSE_GROUP:return(0,o.uH)(r)?(0,i.t)("members_table.column_header.billing_group"):(0,i.t)("members_table.column_header.workspace");case s.h3.SCIM_DATA:return t?(0,o.QW)(t):(0,i.t)("members_table.column_header.scim");case s.h3.DESIGN_UPGRADE_REASON:case s.h3.WHITEBOARD_UPGRADE_REASON:return(0,i.t)("members_table.column_header.upgrade_reason");default:(0,n.vE)(e)}}let u=(e,t)=>{var r;return e===l.u?(0,i.t)("license_group.unassigned"):(null==(r=t[e])?void 0:r.name)??""};function p(e){switch(e){case s.R.IDP:return(0,i.t)("members_table.org_permission_filter.pending");case s.R.UNVERIFIED:return(0,i.t)("members_table.org_permission_filter.unverified");case a.Gu.GUEST:return(0,i.t)("members_table.org_permission_filter.guest");case a.Gu.ADMIN:return(0,i.t)("members_table.org_permission_filter.admin");default:return(0,i.t)("members_table.org_permission_filter.member")}}let m=e=>{switch(e){case"3mo":return(0,i.t)("members_table.last_edit_filter.more_than_three_months_ago");case"6mo":return(0,i.t)("members_table.last_edit_filter.more_than_six_months_ago");case"1yr":return(0,i.t)("members_table.last_edit_filter.more_than_a_year_ago");default:return""}},h=(e,t,r)=>"orgAdminSettings"===e||!(0,o.di)(r)&&("licenseGroup"===e?t.licenseGroupFilter!==l.u:"workspace"===e&&t.workspaceFilter!==c.F),_=(e,t)=>"orgAdminSettings"!==e&&!!(0,o.di)(t),g=(e,t,r)=>"orgAdminSettings"===e||!!(0,o.Eq)(r)&&"licenseGroup"===e&&t.licenseGroupFilter!==l.u,f=e=>["orgAdminSettings","licenseGroup"].includes(e),E=(e,t)=>"orgAdminSettings"===e||"licenseGroup"===e&&!t,y=e=>"orgAdminSettings"===e,v=(e,t)=>!!(0,o.uH)(e)&&["orgAdminSettings","workspace"].includes(t),b=(e,t)=>!(0,o.uH)(e)||["orgAdminSettings","licenseGroup"].includes(t),I=(e,t)=>"orgAdminSettings"===e||!t,T=(e,t)=>"orgAdminSettings"===e||!t,w=e=>"orgAdminSettings"===e,S=e=>"orgAdminSettings"===e||"licenseGroup"===e},334136:(e,t,r)=>{r.d(t,{Q5:()=>m,RD:()=>f,Vn:()=>_,cH:()=>g,js:()=>h,vN:()=>u,xP:()=>p});var n,i=r(46347),a=r(970740),o=r(761767),l=r(733609),s=r(827523),c=r(220958),d=r(712137),u=((n=u||{})[n.CLICK_LEAVE=0]="CLICK_LEAVE",n[n.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",n[n.CLICK_JOIN=2]="CLICK_JOIN",n[n.CLICK_REQUEST=3]="CLICK_REQUEST",n[n.BYPASS_REQUEST=4]="BYPASS_REQUEST",n[n.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",n);function p(e,t,r,n){var i;let a=(0,l.hasViewerRoleAccessOnTeam)(e.id,r),s=g(e,r);if(a)return 0;if(t&&t.status===d.n.PENDING)return 1;if(e.org_access===o.Zn.PRIVATE&&s&&(0,l.canAdminOrg)(n,r)||e.org_access===o.Zn.SECRET&&s&&(0,l.canAdminOrg)(n,r))return 4;if((0,l.canManageNonSecretOrgTeam)(e,r,null==(i=r.user)?void 0:i.id))return 5;if(e.org_access===o.Zn.PUBLIC)return 2;if(e.org_access===o.Zn.PRIVATE)return 3;return null}function m(e,t,r){return!!(e.org_access!==o.Zn.SECRET||(0,l.canViewTeam)(e.id,t)||e.org_access===o.Zn.SECRET&&e.orphaned&&(0,l.canAdminOrg)(r,t))}let h=e=>`JOINING_ORG_TEAM_${e}`,_=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`;function g(e,t){var r;if(!e.org_id)return!1;let n=null==(r=t.orgTeams)?void 0:r.teams.find(t=>t.id===e.id);if(n)return!!n.orphaned;let i=t.roles.byTeamId[e.id];return!i||Object.values(i).every(e=>e.level<c.V.ADMIN&&!e.pending)}function f(e){switch(e){case s.O.NAME:case s.O.OWNER:return(0,a.t)("teams_table.team_name");case s.O.PROJECTS:return(0,a.t)("teams_table.projects");case s.O.MEMBERS:return(0,a.t)("teams_table.members");case s.O.WORKSPACE:return(0,a.t)("teams_table.enterprise.workspace");case s.O.ORG_ACCESS:return(0,a.t)("teams_table.org_access");default:(0,i.vE)(e)}}},617406:(e,t,r)=>{r.d(t,{Eu:()=>E,Hw:()=>I,IY:()=>_,L1:()=>b,Ll:()=>f,Lt:()=>y,OX:()=>h,QK:()=>p,YM:()=>u,_j:()=>g,bP:()=>m,bg:()=>d,t5:()=>v});var n=r(5453);r(269658);var i=r(418465),a=r(970740),o=r(987004),l=r(761767),s=r(784802),c=r(451573);function d(e){return!!e.user&&void 0!==e.orgUsersByOrgId&&h(e.orgUsersByOrgId.orgUsers,e.user.id).length>0}function u(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId.orgUsers[e.currentUserOrgId]?e.orgUsersByOrgId.orgUsers[e.currentUserOrgId][e.user.id]:null}(0,c.cg)(u);let p=(0,c.cg)(function(e){var t,r;let n=u(e);return null==(r=null==(t=null==n?void 0:n.workspace_users)?void 0:t.find(e=>e.is_main_workspace))?void 0:r.workspace_id});function m(e,t){return e.user&&e.orgUsersByOrgId.orgUsers[t]?e.orgUsersByOrgId.orgUsers[t][e.user.id]:null}let h=s.O;function _(e){let t=Object.values(e).filter(e=>e.permission===l.Gu.ADMIN);return(0,n.aV)(t,"created_at"),t}function g(e,t){let r=e.admin_users_metadata.map(e=>t[e.id]).filter(e=>!!e);return(0,n.aV)(r,"created_at"),r}function f(e){return _(e).slice(0,3)}function E(e={},t){for(let r in e){let n=e[r];if(n.id===t)return n}}function y(e){return e.permission===l.Gu.ADMIN?{color:i.JV.DEFAULT,text:(0,a.t)("members_table.badge_label.admin")}:e.is_email_validated?e.permission===l.Gu.GUEST?{color:i.JV.DEFAULT,text:(0,a.t)("members_table.badge_label.guest")}:void 0:{color:i.JV.DEFAULT,text:(0,a.t)("members_table.badge_label.unverified")}}function v(e,t){switch(t){case o.z9.DESIGN:return e.design_paid_status===l.oz.RESTRICTED;case o.z9.FIGJAM:case o.xi.WHITEBOARD:return e.whiteboard_paid_status===l.oz.RESTRICTED;case o.z9.DEV_MODE:return e.dev_mode_paid_status===l.oz.RESTRICTED}}let b=e=>"string"!=typeof e,I=e=>{var t;return null==(t=e.workspace_users)?void 0:t.find(e=>e.is_main_workspace)}},801998:(e,t,r)=>{r.d(t,{BD:()=>$,Eq:()=>Z,FT:()=>ei,Fo:()=>z,HR:()=>Q,Hd:()=>F,Ho:()=>R,Kn:()=>U,OR:()=>H,Op:()=>N,QW:()=>L,RP:()=>w,T7:()=>V,TN:()=>I,TO:()=>en,TS:()=>S,W3:()=>D,WI:()=>ee,X9:()=>E,Z0:()=>et,_H:()=>C,aH:()=>v,d$:()=>G,dU:()=>er,di:()=>X,jn:()=>B,kL:()=>O,ko:()=>j,mu:()=>T,nv:()=>y,oz:()=>q,pu:()=>M,r:()=>Y,rt:()=>k,sY:()=>A,uH:()=>K,v1:()=>b,vS:()=>W,yL:()=>J,zk:()=>P});var n=r(46347),i=r(256768),a=r(220518),o=r(716250),l=r(571529),s=r(523495),c=r(970740),d=r(11802),u=r(955687),p=r(761767),m=r(733609);r(315100);var h=r(556928),_=r(211879),g=r(987004),f=r(971237);let E=new Date("2023-12-05");function y(e,t){let r=e.map(e=>e.domain.toLowerCase()),n=(0,a.Gd)(t);return 0!==r.length&&!!n&&r.indexOf(n)>-1}function v(e){return e.saml_sso_only?_.RF.SAML:e.google_sso_only?_.RF.GOOGLE:_.RF.ANY}function b(e){var t;return null==(t=e.config)?void 0:t.has_scim_token}function I(e){return(null==e?void 0:e.id)!==void 0}function T(e,t){let r=I(t)?t.email:t;return!!r&&(0,a.Jh)(r)&&e.domains.length>0&&!y(e.domains,r)}function w(){return(0,u.E)("exp_guest_management_sharing").defaultValue(!1).treatment("variant",!0).get()}let S=e=>{var t;return!!e.currentUserOrgId&&!!(null==(t=e.orgById[e.currentUserOrgId])?void 0:t.template_picker_disabled)};function C(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}let O=e=>(0,o.BZ)().ps_lock_all_plans_during_org_op?e.isAccountLockedDuringOrgOperation:e.lockedOrgIds.has(e.currentUserOrgId||"personal");function A({org:e,invoice:t}){var r;let n=[(0,c.t)("org_admin_settings.billing_banner.finalized_invoice.design_seat_quantity",{quantityAdded:t.quantity_added})],a=null==(r=t.license_type_configuration[g.z9.DEV_MODE])?void 0:r.added_quantity;return(null!=a&&n.push((0,c.t)("org_admin_settings.billing_banner.finalized_invoice.dev_mode_seat_quantity",{quantityAdded:a})),e.figjam_disabled_at||n.push((0,c.t)("org_admin_settings.billing_banner.finalized_invoice.figjam_seat_quantity",{quantityAdded:t.figjam_owed_seats})),1===t.quarter)?(0,c.t)("org_admin_settings.billing_banner_figjam.finalized_renewal.template",{seatCountsText:(0,s.WH)(n)}):(0,c.t)("org_admin_settings.billing_banner_figjam.finalized_trueup_invoice.seat_rename.template",{date:(0,i.Z)(t.due_at).format("MMM D"),seatCountsText:(0,s.WH)(n)})}function N(e){switch(e){case null:return(0,c.t)("org_settings.guest_control.null");case _.lz.REQUIRE_APPROVAL:return(0,c.t)("org_settings.guest_control.require_approval");case _.lz.BANNED:return(0,c.t)("org_settings.guest_control.banned");default:(0,n.vE)(e)}}let L=e=>{switch(e){case p.Wn.COST_CENTER:return(0,c.t)("scim_metadata_display_text.cost_center");case p.Wn.ORGANIZATION:return(0,c.t)("scim_metadata_display_text.organization");case p.Wn.DIVISION:return(0,c.t)("scim_metadata_display_text.division");case p.Wn.DEPARTMENT:return(0,c.t)("scim_metadata_display_text.department");default:(0,n.vE)(e)}},P=e=>!!(e&&e.bigma_enabled),R=(e,t,r,n)=>!(0,m.isOrgUserExternallyRestricted)(n,null)&&null!=r.subscription&&!!e&&!t,k=e=>!!(e&&e.bigma_enabled),D=e=>!!(null==e?void 0:e.domain_capture)&&k(e),M=(e,t,r)=>{var n;if(!(0,f.zj)(e)||t)return!1;let i=!!(null==(n=null==r?void 0:r.privilegedOrgUser)?void 0:n.licenseGroupMember),a=(null==r?void 0:r.teamRoles)||[],o=a.some(e=>{var t;return null==(t=e.team)?void 0:t.licenseGroupId});return i||o};function F(e){let t=C(e);if(!t)return!1;let r=!(0,m.canMemberOrg)(t.id,(0,m.getPermissionsState)(e));return!r&&!!t.workspaces_count}let x=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/(\d+)/),U=e=>x.test(e),B=e=>{let t=e.match(x);return t?t[1]:null};function V(e){var t;return e.bigma_enabled?null==(t=e.shared_org_license_group_settings)?void 0:t.team_creation_controls:null}function G(e){return!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e.id}).defaultValue(!0).treatment("beta",!!(0,o.BZ)().wls_for_billing_groups_beta).disableTracking().get()}function H(e){return!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e.id}).defaultValue(!1).treatment("beta",!0).treatment("ga",!0).disableTracking().get()}function W(e){return!!e&&!!e.bigma_enabled&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e.id}).defaultValue(!0).treatment("beta",!1).treatment("ga",!!(0,o.BZ)().billing_groups_ga__figjam_filter).disableTracking().get()}let K=e=>!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e}).defaultValue(!1).treatment("beta",!0).treatment("ga",!0).enableMobile().get(),z=e=>!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e}).defaultValue(!1).treatment("beta",!0).get(),Z=e=>!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e}).defaultValue(!1).treatment("ga",!0).enableMobile().get(),Y=e=>!!e&&(0,u.E)("exp_workspace_privacy_edit",{type:h.i_.ORG,id:e}).defaultValue(!1).treatment("variant",!0).get(),j=e=>!!(null==e?void 0:e.bigma_enabled),$=()=>(0,o.BZ)().default_teams_using_workspaces,q=e=>!!e&&(0,u.E)("exp_billing_groups",{type:h.i_.ORG,id:e}).defaultValue(!0).treatment("beta",!1).treatment("ga",!1).disableTracking().get();function X(e){return!!e&&Z(e)&&!!(0,o.BZ)().billing_groups_ga__add_members}function J(e){return!l.K1&&!!e&&Z(e)&&!!(0,o.BZ)().billing_groups_ga__onboarding}function Q(e){return!!e&&Z(e)&&!!(0,o.BZ)().billing_groups_ga__billing_admin}function ee(e){return!!e&&(0,u.E)("exp_billing_true_up_glow_up",{type:h.i_.ORG,id:e}).defaultValue(!1).treatment("variant",!0).get()}function et(e){return(0,d.lR)(e)}let er=e=>null!=e&&!!e.id&&!!e.bigma_enabled&&(!!en(e)||(0,u.E)("exp_approved_libraries",{type:h.i_.ORG,id:e.id}).defaultValue(!1).treatment("beta",!0).treatment("ga",!0).get()),en=e=>{if(!(null==e?void 0:e.id)||!e.bigma_enabled)return!1;let t=(0,u.E)("exp_approved_libraries",{type:h.i_.ORG,id:e.id}).defaultValue(void 0).treatment("control","control").treatment("beta","beta").treatment("ga","ga").get();if(t)return"ga"===t;let r=(0,u.E)("exp_approved_libraries",e.id).defaultValue("control").treatment("ga","ga").get();return"ga"===r},ei=e=>null!=e&&!!e.id&&!!e.bigma_enabled&&(0,u.E)("exp_approved_libraries_warnings",{type:h.i_.ORG,id:e.id}).defaultValue(!1).treatment("beta",!0).treatment("ga",!0).get()},898080:(e,t,r)=>{r.d(t,{Al:()=>ea,Bn:()=>P,Cp:()=>w,GH:()=>T,Hf:()=>v,JJ:()=>A,Jb:()=>_,M4:()=>D,My:()=>C,OE:()=>Q,Q3:()=>S,Q6:()=>z,S2:()=>ei,UV:()=>y,V6:()=>J,V_:()=>L,Wv:()=>b,Xl:()=>g,Z$:()=>en,_0:()=>V,ak:()=>N,cv:()=>Z,e3:()=>F,eB:()=>$,ez:()=>U,gP:()=>x,gX:()=>M,h$:()=>X,iH:()=>k,jh:()=>ee,jj:()=>H,kl:()=>E,ld:()=>f,m6:()=>er,n$:()=>B,qZ:()=>et,qq:()=>O,sA:()=>j,tY:()=>I,tf:()=>G,xT:()=>q,yH:()=>W});var n,i=r(256768),a=r(220518),o=r(846999),l=r(313653),s=r(970740),c=r(999177),d=r(761767),u=r(733609),p=r(211879),m=r(326714),h=r(595819),_=((n=_||{}).FREE="free",n.PRO="pro",n.ORG="org",n.ENT="ent",n.EDU="edu",n);let g="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",f=2,E=1,y=3,v=3,b=30,I=500,T=5,w=1200,S=4500,C=7500,O=300,A=500,N=500,L=2500,P=3500,R=e=>e>new Date,k=e=>{let t=e&&!e.org_id&&e.grace_period_end&&i.Z.utc(e.grace_period_end);return!!t&&t.valueOf()>Date.now()},D=(e,t=14)=>!!(e&&k(e))&&i.Z.utc(e.grace_period_end).valueOf()-Date.now()<864e5*t,M=e=>!!e&&null!=e.subscription&&e.subscription!==d.Qe.INCOMPLETE,F=e=>!!e&&(M(e)||e.student_team||!!e.grace_period_end&&R(new Date(e.grace_period_end))),x=e=>{if(!e)return!1;let{subscription:t,studentTeamAt:r,gracePeriodEnd:n}=e;return!!t&&t!==d.Qe.INCOMPLETE||!!r||n&&R(n)},U=e=>Object.values(e.teams).filter(t=>(0,u.canEditTeam)(t.id,e)&&(!F(t)||t.student_team)),B=e=>Object.values(e.teams).filter(t=>(0,u.canEditTeam)(t.id,e)&&!F(t)),V=(e,t)=>{var r;return e&&!M(e)&&!(null==(r=e.restrictions_list)?void 0:r.includes(d.ZG.LOCKED))&&(0,u.canEditTeam)(e.id,t)},G=(e,t,r,n)=>{if(t&&!n&&Z(t,r))return!0;let i=e&&r.folders[e];return!!i&&W(i,r,n)},H=(e,t,r)=>G(e.folder_id,e.team_id,t,r),W=(e,t,r)=>K(e,e.team_id?t.teams[e.team_id]:null,t.user,t.userEduGracePeriods,r),K=(e,t,r,n,i)=>!!(!e.team_id&&!(0,c.Gd)(e)||e.team_id&&(!i&&Y(t,r,n)||!F(t)&&(e.is_invite_only||e.is_view_only))),z=(e,t,r)=>!(e.teamId||(0,c.O2)(e))||!!e.teamId&&(!!j(t,r)||(e.inviteOnlyAt||e.viewOnlyAt)&&!x(t)),Z=(e,t)=>{let r=t.teams[e],n=t.user;return Y(r,n,t.userEduGracePeriods)},Y=(e,t,r)=>{var n;return!!e&&!!t&&(e.student_team?!((0,o.dE)(t)||(0,o.FD)(r,e.id).isInValidGracePeriod):null==(n=e.restrictions_list)?void 0:n.includes(d.ZG.LOCKED))},j=(e,t)=>{var r,n;return!!e&&!!t&&(e.studentTeamAt?!((0,o.dE)(t)||(null==(r=e.eduGracePeriod)?void 0:r.isValid)):null==(n=e.restrictionsList)?void 0:n.includes(d.ZG.LOCKED))},$=e=>Object.values(e.teams).some(t=>Z(t.id,e)&&(0,u.canEditTeam)(t.id,e)),q=(e,t)=>{let r=t.orgById[e];return r&&r.standing===p.zx.DELINQUENT},X=(e,t)=>{let r=t.orgById[e];return r&&r.standing===p.zx.SUSPENDED},J=(e,t)=>{if(e.data&&e.data.message){let r=(0,s.it)(e);r&&t(l.l.error(r))}else{let r=(0,s.it)(e,(0,s.K2)("error.unknown_contact_support"));t(l.l.error(r))}},Q=(e,t)=>{let r=(0,i.Z)(e),n=(0,i.Z)(t);return Math.round(n.diff(r,"months",!0))},ee=e=>{let t=(0,i.Z)(e).isAfter((0,i.Z)(new Date),"second");return t?e:null},et=(e,t)=>e===m.tv.MONTHLY?0:t,er=(e,t)=>e===m.tv.MONTHLY?t:0,en=(e,t={downgrade:{design:[],whiteboard:[]},upgrade:{design:[],whiteboard:[]}},r)=>{let n="whiteboard"===r?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,a.Rn)(e.email)&&(e[n]===h.Eg.FULL&&!t.downgrade[r].includes(e.id)||t.upgrade[r].includes(e.id))).length},ei=(e,t)=>{let r=!1,n=null!==e?Object.values(e).reduce((e,n)=>{var i;if(!n.user)return e;let a={id:n.user.id,design_paid_status:n.design_paid_status,whiteboard_paid_status:n.whiteboard_paid_status,email:n.user.email||"",handle:n.user.handle||"",img_url:n.user.img_url||""};return(null==(i=n.user)?void 0:i.id)===(null==t?void 0:t.id)?(r=!0,e.unshift(a)):e.push(a),e},[]):[];return!r&&t&&n.unshift({id:t.id,design_paid_status:h.Eg.STARTER,whiteboard_paid_status:h.Eg.STARTER,email:t.email,handle:t.handle,img_url:t.img_url}),n},ea=(e,t)=>Math.max(e,t)-t},275648:(e,t,r)=>{r.d(t,{DU:()=>I,aC:()=>S,pO:()=>T});var n=r(652983),i=r(407908),a=r(600486),o=r(220518),l=r(9247),s=r(716250),c=r(31642),d=r(313653),u=r(970740),p=r(28786),m=r(413110),h=r(857522),_=r(761767),g=r(326714),f=r(111120),E=r(180179),y=r(70918),v=r(436649),b=r(898080);let I=()=>{let e=(0,i.I0)(),t=(0,i.v9)(e=>e.payment);function r(r){e(m.DY({numWhiteboardEditors:t.numWhiteboardEditors+r}))}function n(r){e(m.Rd({numDesignEditors:t.numDesignEditors+r}))}return{increment:function(e,t){(0,o.Rn)(t)||("whiteboard"===e?r(1):n(1))},decrement:function(e,t){(0,o.Rn)(t)||("whiteboard"===e?r(-1):n(-1))}}},T=({teamId:e,jamboardPromoCodeId:t})=>{let r=(0,i.I0)(),p=(0,i.v9)(e=>e.loadingState),I=(0,i.v9)(t=>e?t.teamUserByTeamId[e]:null),T=(0,i.v9)(e=>e.selectedView),C=(0,y.xJ)(),[O,A]=(0,n.useState)(!0),N=(0,l.D)(e),L=h.gI.loadingKeyForPayload({teamId:e}),P=(0,v.W_)(p,L),R=(0,s._F)();(0,n.useEffect)(()=>{r(h.gI({teamId:e}))},[r,e]);let k=function(){let e=(0,i.I0)();return(0,n.useCallback)(t=>{(0,a.L9)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(m.Sd(t))},[e])}();return(0,n.useEffect)(()=>{async function n(t){var n;try{let n=await c.ZP.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});r(m.Es({taxes:n.data.meta.estimate}))}catch(t){let e=(0,u.it)(t);e&&(null==(n=null==t?void 0:t.data)?void 0:n.reason)==="PROMOTION_CODE_ID_ERROR"?r(m.x2({error:e,errorCode:"PROMOTION_CODE_ID_ERROR"})):r(d.l.error((0,u.t)("payments.errors.estimate_calculation_error"))),r(f.fv({...T,paymentStep:g.KB.PAYMENT_AND_ADDRESS}))}A(!1)}if(void 0===N||N===e||O||(S(r),A(!0)),(!e||P)&&O){let a=(0,b.S2)(I,C),l=Object.entries(a).map(([e,t])=>{if((0,o.Rn)(t.email||""))return e}).filter(e=>!!e);r(m.mE({figmaEmailTeamUsers:l}));let s=(0,E.D3)({teamId:e,userId:null==C?void 0:C.id});if(s){s.editorStatusChanges=(0,E.z8)(s.editorStatusChanges,a);let o=(0,b.Z$)(a,s.editorStatusChanges,_.gg.DESIGN),c=(0,b.Z$)(a,s.editorStatusChanges,_.gg.WHITEBOARD),d=o+s.numEmptyDesignSeats,u=c+s.numEmptyWhiteboardSeats;if(k({numDesignEditors:d,numWhiteboardEditors:u,editorStatusChanges:s.editorStatusChanges,teamId:e,updatedAt:s.updatedAt}),R){var i;let e=(i=R.billing_period,g.tv[g.tv[i]]);r(m._1({billingPeriod:e})),r(m.VD({vatGstId:R.vat_gst_id})),r(m.sy({legalName:R.company_name,displayName:R.display_name})),r(m.ik({regionalVatGstId:R.regional_vat_gst_id}));let a={address:R.address,editor_status_changes:s.editorStatusChanges,figma_email_team_users:l,selected_currency:R.currency,annual_quantity:(0,b.qZ)(e,d),monthly_quantity:(0,b.m6)(e,d),annual_whiteboard_quantity:(0,b.qZ)(e,u),monthly_whiteboard_quantity:(0,b.m6)(e,u),vat_gst_id:R.vat_gst_id,regional_vat_gst_id:R.regional_vat_gst_id,promotion_code_id:t};n(a)}else A(!1)}else A(!1)}},[r,P,I,N,e,C,O,R,T,k,t]),(0,n.useEffect)(()=>()=>{e&&w(r,e)},[r,e]),O},w=(e,t)=>{let r=h.gI.loadingKeyForPayload({teamId:t});e(p.IV({key:r}))},S=e=>{e(m.$R({editorStatusChanges:{upgrade:{whiteboard:[],design:[]},downgrade:{whiteboard:[],design:[]}}})),e(m.Rd({numDesignEditors:0})),e(m.DY({numWhiteboardEditors:0}))}},733609:(e,t,r)=>{r.d(t,{canAccessFile:()=>eh,canAccessRepo__DEPRECATED:()=>e_,canAdminLicenseGroup:()=>e$,canAdminOrg:()=>eZ,canAdminTeam:()=>eO,canAdminWorkspace:()=>eq,canCreateFile:()=>eF,canCreateFileInFolder:()=>eU,canCreateFileLG:()=>ex,canCreateFileOrRequestUpgrade:()=>eD,canCreateFileOrRequestUpgradeLG:()=>eM,canEditFile:()=>es,canEditFileMemoized:()=>ec,canEditFolder:()=>eT,canEditProTeam:()=>e7,canEditRepo:()=>ev,canEditRole:()=>eG,canEditTeam:()=>eC,canGuestOrg:()=>eK,canMakeAdmin:()=>eH,canManageFile:()=>ey,canManageNonSecretOrgTeam:()=>eX,canManageOrgTeam:()=>eJ,canManageRepo:()=>eb,canMemberOrg:()=>ez,canOwnFolder:()=>ew,canOwnTeam:()=>eA,canRequestToEdit:()=>ek,canRunCodegen:()=>eu,canRunPlugins:()=>ep,canRunWidgets:()=>ed,canUploadAndEditVideo:()=>tT,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>tw,canViewFile:()=>el,canViewFileMetadata:()=>eo,canViewFolder_DEPRECATED:()=>eI,canViewPrototypes:()=>em,canViewResource:()=>eV,canViewTeam:()=>eS,defaultPermissionStrings:()=>ti,discoverabilityStrings:()=>tn,getDeleteReposForeverPayload:()=>tb,getDeleteReposPayload:()=>tv,getExplicitRoleForUserAndFile:()=>$,getOrgAccountTypeString:()=>e2,getPaidStatus:()=>ts,getPermissionLevel:()=>e0,getPermissionsState:()=>F,getPermissionsStateMemoized:()=>x,getReadOnlyOverrideMessageForFile:()=>tg,getReadOnlyOverrideMessageForFileSeenState:()=>tf,getReadOnlyOverrideMessageForFolder:()=>t_,getResourceName:()=>H,getResourceTeamId:()=>G,getRestoreReposPayload:()=>tI,getRolesForResource:()=>q,getRolesForUserAndTeam:()=>z,hasActiveEduTeam:()=>td,hasAdminRoleAccessOnTeam:()=>eR,hasAdminRoleAccessOnTeam__DEPRECATED:()=>eP,hasEditorRoleAccessOnTeam:()=>eL,hasFileAccess:()=>ei,hasMinRole:()=>K,hasOrgAccess:()=>eY,hasProTeamPaidStatus:()=>tc,hasTeamAccess:()=>J,hasViewerRoleAccessOnTeam:()=>eN,isCopyExportRestricted:()=>eg,isCopyExportRestricted__DEPRECATED:()=>ef,isFigJamDisabledForFolder:()=>th,isFigJamDisabledForOrg:()=>tm,isFileFigjamDisabled:()=>tp,isOrgUserExternallyRestricted:()=>e4,isOrgUserExternallyRestrictedFromState:()=>e3,isOrgUserRestricted:()=>e8,isProTeamEditor:()=>tu,isResourceOwner:()=>W,isTeamPartOfOrg:()=>te,isTeamUserFull:()=>tt,isTeamUserRestricted:()=>e9,isTeamUserRestrictedLG:()=>e5,levelName:()=>to,levelNameCapitalized:()=>ta,levelRoleName:()=>tl,orgAccessStrings:()=>tr,orgPermissionName:()=>e1,orgUserHasExternalRestriction:()=>e6,teamUserCanUpgradeToFull:()=>eQ,useGetPermissionsState:()=>V,useMemoizedPermissionsState:()=>U,usePermissionsState:()=>B,userIsAMemberOfAnOrg:()=>ej});var n=r(652983),i=r(407908),a=r(200344),o=r(733668),l=r(420727),s=r(406547),c=r(269658),d=r(365653),u=r(716250),p=r(615537),m=r(846999),h=r(361763),_=r(560620),g=r(970740),f=r(399503),E=r(11802),y=r(838903),v=r(999177),b=r(360530),I=r(761767),T=r(617406),w=r(898080),S=r(389337),C=r(305086),O=r(606536),A=r(552452),N=r(220958),L=r(595819),P=r(818709),R=r(668849);function k(e,t,r,n,i){if((0,l.H0)()||(0,l.Zt)()){let a=null;if((0,h.KF)()){if(null===(a=(0,s.Fs)(e,t,r,n)))return!1}else{let o=c.V.dispatch,l=c.V.getState().loggedPermissionEvents;a=(0,s.Fs)(e,t,r,n,o,l,i)}if((0,l.H0)())return a}return null}function D(e,t,r,n,i,a,o,l,s,c,d,u,p,m,h,_){return{currentUserOrgId:e,user:t,fileByKey:r,repos:n,folders:i,teams:a,roles:o,orgById:l,orgDraftsOwners:s,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:p,orgTeams:m,openFile:h,currentTeamId:_}}let M=(0,p.ws)(D);function F(e){return D(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgDraftsOwners,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function x(e){return M(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgDraftsOwners,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}let U=()=>{let e=(0,i.v9)(e=>e.currentUserOrgId),t=(0,i.v9)(e=>e.user),r=(0,i.v9)(e=>e.fileByKey),a=(0,i.v9)(e=>e.repos),o=(0,i.v9)(e=>e.folders),l=(0,i.v9)(e=>e.teams),s=(0,i.v9)(e=>e.roles),c=(0,i.v9)(e=>e.orgById),d=(0,i.v9)(e=>e.orgDraftsOwners),u=(0,i.v9)(e=>e.orgUsersByOrgId),p=(0,i.v9)(e=>e.teamUserByTeamId),m=(0,i.v9)(e=>e.userEduGracePeriods),h=(0,i.v9)(e=>e.licenseGroups),_=(0,i.v9)(e=>e.orgTeams),g=(0,i.v9)(e=>e.openFile),f=(0,i.v9)(e=>e.currentTeamId);return n.useMemo(()=>F({currentUserOrgId:e,user:t,fileByKey:r,repos:a,folders:o,teams:l,roles:s,orgById:c,orgDraftsOwners:d,orgUsersByOrgId:u,teamUserByTeamId:p,userEduGracePeriods:m,licenseGroups:h,orgTeams:_,openFile:g,currentTeamId:f}),[e,r,o,h,g,c,d,_,u,a,s,p,l,t,m,f])},B=()=>(0,d.c)(e=>F(e));function V(){let e=(0,i.oR)();return n.useCallback(()=>x(e.getState()),[e])}function G(e,t){switch(e.resource_type){case I._g.FILE:let r=t.fileByKey[e.resource_id_or_key];return r&&r.team_id;case I._g.FILE_REPO:let n=t.repos[e.resource_id_or_key],i=t.folders[null==n?void 0:n.folder_id];return i&&i.team_id;case I._g.FOLDER:let a=t.folders[e.resource_id_or_key];return a&&a.team_id;case I._g.TEAM:return e.resource_id_or_key}}function H(e,t){let r=function(e,t){switch(e.resource_type){case I._g.FILE:return t.fileByKey[e.resource_id_or_key];case I._g.FOLDER:return t.folders[e.resource_id_or_key];case I._g.TEAM:return t.teams[e.resource_id_or_key]}}(e,t);if(r)return r.name}function W(e,t,r,n){let i=function(e,t){switch(t){case I._g.FILE:return e.byFileKey;case I._g.FILE_REPO:return e.byRepoId;case I._g.FOLDER:return e.byFolderId;case I._g.TEAM:return e.byTeamId}}(n,r)[t];return!!i&&e in i&&i[e].level===N.V.OWNER}function K(e,t){for(let r of e)if(r.level>=t)return!0;return!1}function z(e,t){var r;let n=null==(r=t.user)?void 0:r.id,i=t.roles;return e in i.byTeamId&&n&&n in i.byTeamId[e]?[i.byTeamId[e][n]]:[]}function Z(e,t){let r=t.user&&t.user.id,n=[],i=t.roles;e in i.byFolderId&&r&&r in i.byFolderId[e]&&n.push(i.byFolderId[e][r]);let a=t.folders[e];return a&&a.team_id&&!a.is_invite_only&&(n=n.concat(z(a.team_id,t))),n}function Y(e,t){let r=t.user&&t.user.id,n=t.roles,i=[];e in n.byRepoId&&r&&r in n.byRepoId[e]&&i.push(n.byRepoId[e][r]);let a=t.repos[e];return a&&(i=[...i,...Z(a.folder_id,t)]),i}function j(e,t){let r=[],n=$(e,t);null!==n&&r.push(n);let i=t.fileByKey[e];return i&&i.folder_id&&(r=r.concat(Z(i.folder_id,t))),i&&i.file_repo_id&&(r=[...r,...Y(i.file_repo_id,t)]),r}function $(e,t){let r=t.user&&t.user.id,n=t.roles;return e in n.byFileKey&&r&&r in n.byFileKey[e]?n.byFileKey[e][r]:null}function q(e,t,r){switch(e){case I._g.FILE:return j(t,r);case I._g.FILE_REPO:return Y(t,r);case I._g.FOLDER:return Z(t,r);case I._g.TEAM:return z(t,r)}}function X(e,t,r){if(r.user&&!(0,m.dE)(r.user))return!1;let n=(0,C.m)(e,r);if(!n)return!1;let i=!!r.user&&(0,m.XW)(r.userEduGracePeriods,(0,m.dE)(r.user),n.id,n.student_team).showAccessRestricted;return t>N.V.VIEWER&&i}function J(e,t,r){var n;let i=(0,C.m)(e,r);if(!i)return!1;let a=null==(n=r.user)?void 0:n.id,o=i.org_id;if(o){let n=t<=N.V.EDITOR&&ez(o,r)&&i.org_access===I.Zn.PUBLIC&&i.default_permission===I.Ze.EDIT,l=K(z(e,r),t),s=t<=N.V.ADMIN&&(l||eX(i,r,a)),c=t<=N.V.VIEWER&&ez(o,r)&&i.org_access===I.Zn.PUBLIC;return(s||c||l||n)&&eK(o,r)}return Q(e,t,r)}function Q(e,t,r){return K(z(e,r),t)&&!X(e,t,r)}function ee(e,t,r){let n;let i=r.user&&r.user.id,a=r.folders[e];if(!i||!a)return!1;let o=(0,v.TC)(a.id,r);if(o&&!eK(o,r))return!1;let l=a.team_id&&r.teams[a.team_id];if(o&&ez(o,r)&&t<=N.V.VIEWER&&l&&l.org_access===I.Zn.PUBLIC&&!a.is_invite_only||o&&ez(o,r)&&t<=N.V.EDITOR&&l&&l.org_access===I.Zn.PUBLIC&&!a.is_invite_only&&!a.is_view_only&&l.default_permission===I.Ze.EDIT)return!0;let s=Z(e,r);return(s.forEach(e=>{e.resource_type===I._g.FOLDER&&(n=e)}),!a.team_id||a.is_invite_only||a.is_view_only&&t>=N.V.EDITOR)?!!n&&n.level>=t:K(s,t)}function et(e,t){return e.proto_link_access===I.ur.VIEW&&t<=N.V.VIEW_PROTOTYPES||(e.link_access===I.I1.EDIT||e.link_access===I.I1.VIEW)&&t<=N.V.VIEWER}function er(e,t,r){return!!(e.link_access===I.I1.EDIT&&t<=N.V.EDITOR||e.parent_org_id&&(e.link_access===I.I1.ORG_EDIT&&t<=N.V.EDITOR||e.link_access===I.I1.ORG_VIEW&&t<=N.V.VIEWER||e.proto_link_access===I.ur.ORG_VIEW&&t<=N.V.VIEW_PROTOTYPES)&&ez(e.parent_org_id,r))}function en(e,t,r,n){var i,a,o;let l=r.user&&r.user.id,s=r.repos[e];if(!l&&t>N.V.VIEWER||!s)return!1;if(!n&&(et(s,t)||er(s,t,r)))return!0;let c=s.parent_org_id;if(c&&!eK(c,r))return!1;if(!c&&s.team_id){let e=r.user&&(null==(a=null==(i=r.teamUserByTeamId)?void 0:i[s.team_id])?void 0:a[r.user.id]);if(e9(e,I.gg.DESIGN))return!1}let d=c&&l&&(null==(o=r.orgUsersByOrgId.orgUsers[c])?void 0:o[l]);return(!(d&&e8(d,I.gg.DESIGN))||!(t>N.V.VIEWER))&&K(Y(s.id,r),t)}function ei(e,t,r,n,i){let a=r.fileByKey[e];return!(!a||!ea(a,t,r,n,i)||ea(a,N.V.EDITOR,r)&&function(e,t){var r,n,i;let a=t.user;if(!a||!e)return!1;let l=e.file_repo_id?t.repos[e.file_repo_id]??(0,o.i)(t,"file_repo",e.file_repo_id):null,s=e.team_id?t.teams[e.team_id]??(0,o.i)(t,"team",e.team_id):null,c=e.team_id?(null==(n=null==(r=t.teamUserByTeamId)?void 0:r[e.team_id])?void 0:n[a.id])??(0,o.i)(t,"team_user",e.team_id):null,d=t.currentUserOrgId?t.orgById[t.currentUserOrgId]??(0,o.i)(t,"org",t.currentUserOrgId):null,u=t.currentUserOrgId?(null==(i=t.orgUsersByOrgId.orgUsers[t.currentUserOrgId])?void 0:i[a.id])??(0,o.i)(t,"org_user",t.currentUserOrgId):null;return function(e,t,r,n,i,a){var o,l;if(!e.parent_org_id&&!e.team_id)return!1;let s=i?i.folder_id:e.folder_id;return e.parent_org_id?("whiteboard"!==(o=e.editor_type)||null==n||!n.figjam_disabled_at)&&!!s&&(!a||s!==a.drafts_folder_id)&&(!a||"whiteboard"===o||a.design_paid_status===I.oz.STARTER)&&(!a||"whiteboard"!==o||a.whiteboard_paid_status===I.oz.STARTER)&&(!n||!(0,E.Wn)(n)):!e.parent_org_id&&!!e.team_id&&(l=e.editor_type,!!(t&&(0,w.gX)(t))&&!!eQ(r,l)&&!(0,E.TU)(t.id))}(e,s,c,d,l,u)}(a,r)&&t>=N.V.EDITOR)}function ea(e,t,r,n,i){let a=r.user&&r.user.id;if(!e||function(e,t,r){var n,i,a;let o=t.currentUserOrgId,l=o&&t.user&&(null==(n=t.orgUsersByOrgId.orgUsers[o])?void 0:n[t.user.id]);if(r>N.V.VIEWER&&e3(t))return!0;if(!e.parent_org_id){if(!e.team_id)return!1;let n=t.user&&(null==(a=null==(i=t.teamUserByTeamId)?void 0:i[e.team_id])?void 0:a[t.user.id]);return r>N.V.VIEWER&&e9(n,e.editor_type)}if(!l)return!1;let s=e.folder_id;return(!s||l.drafts_folder_id!==s)&&!!(s&&e8(t.orgDraftsOwners[s],e.editor_type)&&(r>=N.V.VIEWER||r===N.V.VIEW_PROTOTYPES)||e8(l,e.editor_type)&&r>N.V.VIEWER)}(e,r,t)||e.deleted_at||(e.trashed_at&&t<N.V.VIEW_METADATA&&(t=N.V.VIEW_METADATA),!i&&e.trashed_at&&(0,y.kO)(e)&&t>=N.V.EDITOR))return!1;if(!n&&e.is_try_file&&!e.trashed_at&&t<=N.V.VIEWER||!n&&et(e,t))return!0;if(!a&&t>N.V.VIEWER)return!1;if(!n&&er(e,t,r))return!0;if(e.parent_org_id&&!eK(e.parent_org_id,r))return!1;if(!n){let n=(0,y.Xd)(e,r.repos);if(n&&(et(n,t)||er(n,t,r)))return!0}if(e.folder_id&&e.team_id){let n=(0,C.m)(e.team_id,r),i=r.folders[e.folder_id],a=(0,v.TC)(null==i?void 0:i.id,r);if(i&&n&&a&&ez(a,r)&&n.org_access===I.Zn.PUBLIC&&!i.is_invite_only&&(t<=N.V.VIEWER||t<=N.V.EDITOR&&!i.is_view_only&&n.default_permission===I.Ze.EDIT))return!0}let o=!!e.team_id&&!!a&&J(e.team_id,t,r),l=!1,s=j(e.key,r);if(s.forEach(e=>{switch(e.resource_type){case I._g.FILE:case I._g.FILE_REPO:case I._g.FOLDER:e.level>=t&&(l=!0)}}),l)return!0;if(o){let n=e.folder_id;return!n||ee(n,t,r)}return!1}function eo(e,t,r){let n=ei(e,N.V.VIEW_METADATA,t,r);return k(I._g.FILE,e,a.rM$.CAN_VIEW_METADATA,t,n)??n}(0,p.ws)((e,t)=>(function(e,t){let r=j(e.key,t);return r.forEach(e=>{if(e.level<=N.V.VIEW_PROTOTYPES)return!0}),e.link_access===I.I1.INHERIT&&(e.proto_link_access===I.ur.VIEW||e.proto_link_access===I.ur.ORG_VIEW)})(e,t));let el=(e,t,r)=>{var n;let i=ei(e,N.V.VIEWER,t,r);return(null==(n=t.fileByKey[e])?void 0:n.is_try_file)?i:r?k(I._g.FILE,e,a.rM$.CAN_DOWNLOAD_FILE,t,i)??i:k(I._g.FILE,e,a.rM$.CAN_VIEW,t,i)??i};(0,p.ws)((e,t)=>el(e,t));let es=(e,t,r,n,i)=>{let o=(()=>{if(!e)return!1;let a=t.fileByKey[e];return!(!a||!r&&(0,w.jj)(a,t,i))&&ei(e,N.V.EDITOR,t,void 0,n)})();return n?k(I._g.FILE,e??"",a.rM$.CAN_MANAGE,t,o)??o:k(I._g.FILE,e??"",a.rM$.CAN_EDIT,t,o)??o},ec=(0,p.ws)((e,t)=>es(e,t));function ed(){return(0,_.g)()&&!(0,u.BZ)().integ_zoom_allow_extensions?{canRun:!1,message:(0,g.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function eu(e){let t=(0,u.BZ)().dt_lego_export_restrictions,r=e.openFile&&eg(e.openFile);return!t||!r}function ep(e){return(!(0,b.I)()||!!(0,u.BZ)().ext_vscode_plugins)&&((0,R.NE)(e.selectedView)?(0,f.ui)(e)&&eu(e):(!(0,_.g)()||!!(0,u.BZ)().integ_zoom_allow_extensions)&&!e.mirror.appModel.isReadOnly)}let em=(e,t,r)=>{let n=ei(e,N.V.VIEW_PROTOTYPES,t,r);return r?k(I._g.FILE,e,a.rM$.HAS_ROLE_ACCESS,t,n)??n:k(I._g.FILE,e,a.rM$.CAN_VIEW_PROTOTYPE,t,n)??n};function eh(e,t,r){return"prototype"===r?em(e,t):el(e,t)}function e_(e,t,r){return Object.entries(t.fileByKey).some(([n,i])=>i.file_repo_id===e&&eh(n,t,r))}function eg(e){return!e.canEdit&&e.viewerExportRestricted}function ef(e,t){if(!e)return!1;let r=t.fileByKey[e];return!!r&&!es(e,t)&&!!r.viewer_export_restricted}function eE(e,t,r,n,i,a){var o,l;let s=!1,c=n.user&&n.user.id;if(!c||n.currentUserOrgId&&!eK(n.currentUserOrgId,n)||e4(n.user,n.currentUserOrgId))return!1;if(null===e)return!0;if(!i&&(0,w.tf)(e,t,n,a))return!1;let d=n.roles.byFolderId[e];return d&&c&&c in d&&(s=d[c].level>=N.V.EDITOR),!!s||(t?!!eL(t,n)&&eT(e,n):!t&&!!r&&(null==(l=null==(o=n.orgDraftsOwners)?void 0:o[e])?void 0:l.design_paid_status)!=="restricted")}let ey=(e,t,r,n)=>{let i=t.user&&t.user.id,a=t.fileByKey[e];if(!i||!a)return!1;let o=(0,y.Xd)(a,t.repos);if(o)return es(e,t,r,!0,n);let l=!1,s=t.roles.byFileKey[e];return s&&i&&i in s&&(l=s[i].level>=N.V.OWNER),eE(a.folder_id,a.team_id,l,t,r,n)};function ev(e,t,r){let n=en(e,N.V.EDITOR,t,r);return k(I._g.FILE_REPO,e,a.CTA.CAN_EDIT,t,n)??n}function eb(e,t,r){let n=t.repos[e];if(!n)return!1;let i=t.folders[n.folder_id];return!!i&&eE(n.folder_id,n.team_id,function(e,t){let r=en(e,N.V.OWNER,t);return k(I._g.FILE_REPO,e,a.CTA.IS_OWNER,t,r)??r}(e,t),t,r)}let eI=(e,t)=>{let r=ee(e,N.V.VIEWER,t);return k(I._g.FOLDER,e,a._Iq.CAN_VIEW,t,r)??r},eT=(e,t)=>{let r=ee(e,N.V.EDITOR,t);return k(I._g.FOLDER,e,a._Iq.CAN_EDIT,t,r)??r};function ew(e,t){let r=ee(e,N.V.OWNER,t);return k(I._g.FOLDER,e,a._Iq.IS_OWNER,t,r)??r}let eS=(e,t)=>{let r=J(e,N.V.VIEWER,t);return k(I._g.TEAM,e,a.SV1.CAN_VIEW,t,r)??r},eC=(e,t)=>{let r=J(e,N.V.EDITOR,t);return k(I._g.TEAM,e,a.SV1.CAN_EDIT,t,r)??r},eO=(e,t)=>{let r=J(e,N.V.ADMIN,t);return k(I._g.TEAM,e,a.SV1.CAN_ADMIN,t,r)??r};function eA(e,t){let r=J(e,N.V.OWNER,t);return k(I._g.TEAM,e,a.SV1.IS_OWNER,t,r)??r}function eN(e,t){return Q(e,N.V.VIEWER,t)}function eL(e,t){return Q(e,N.V.EDITOR,t)}function eP(e,t,r){var n;return n=N.V.ADMIN,K(function(e,t,r){let n=t.roles;return e in n.byTeamId&&r&&r in n.byTeamId[e]?[n.byTeamId[e][r]]:[]}(e,t,r),n)&&!X(e,n,t)}function eR(e,t){return Q(e,N.V.ADMIN,t)}function ek(e){var t;let r=e.openFile;if(!r)return!1;let n=e.user,i=r&&e.roles.byFileKey[r.key],a=i&&n&&(null==(t=i[n.id])?void 0:t.level)===N.V.VIEWER,o=!e.currentUserOrgId&&r&&!r.teamId&&!r.parentOrgId,l=r&&r.linkAccess===I.I1.EDIT;return a&&o&&!l}function eD(e,t,r){let n=eF(e,t,r);return function(e,t,r,n){var i;let a=r.currentUserOrgId&&r.orgUsersByOrgId.orgUsers[r.currentUserOrgId],o=(null==(i=r.user)?void 0:i.id)&&a&&a[r.user.id],l=!!o&&e8(o,n),s=tm(r.currentUserOrgId,r),c=!!(l&&("design"===n||!s));if(e3(r))return!1;let d=t?eT(t,r)&&c:c;return e||d}(n,e,t,r)}function eM(e,t,r){let n=ex(e,t,r);return function(e,t,r,n){var i;let a=r.currentUserOrgId&&r.orgUsersByOrgId.orgUsers[r.currentUserOrgId],o=(null==(i=r.user)?void 0:i.id)&&a&&a[r.user.id],l=!!o&&e8(o,n),s=tm(r.currentUserOrgId,r),c=!!(l&&("design"===n||!s));if(e3(r))return!1;let d=t.canEdit&&c;return e||d}(n,e,t,r)}let eF=(e,t,r)=>{let n=e?(0,v.TC)(e,t):t.currentUserOrgId;if("whiteboard"===r&&tm(n||null,t)||e4(t.user,n))return!1;if(!e)return!0;let i=t.folders[e];return eU(i,t,r)},ex=(e,t,r)=>{var n,i,a,o;let l=e.orgId||(e.teamId?null==(n=t.teams[e.teamId])?void 0:n.org_id:null)||null;if("whiteboard"===r&&tm(l,t)||e4(t.user,l))return!1;let s=t.user&&t.user.id;if(l){let n=s?null==(i=t.orgUsersByOrgId.orgUsers[l])?void 0:i[s]:null;if(!n||""===e.path&&n.drafts_folder_id!==e.id)return!1;if(e.id===n.drafts_folder_id)return!0;if(e8(n,r))return!1}else{let n=e.teamId&&s&&(null==(o=null==(a=null==t?void 0:t.teamUserByTeamId)?void 0:a[e.teamId])?void 0:o[s])||null;if(e9(n,r))return!1}return e.canEdit};function eU(e,t,r,n){var i,a,o,l,s;let c=t.currentUserOrgId;if(!e)return!1;if(c){let a=t.user&&t.user.id,o=a?null==(i=t.orgUsersByOrgId.orgUsers[c])?void 0:i[a]:null;return(""!==e.name||(null==o?void 0:o.drafts_folder_id)===e.id)&&(l=e.id,s=r||I.gg.DESIGN,!!o&&(l===o.drafts_folder_id||!e8(o,s)&&(void 0!==n?n:eT(l,t))))}{let i=t.user&&t.user.id,l=(0,u.BZ)().ps_benchmark&&(0,v.q7)(e),s=e.team_id&&i&&(null==(o=null==(a=null==t?void 0:t.teamUserByTeamId)?void 0:a[e.team_id])?void 0:o[i])||null;return(!e9(s,r)||!!l)&&(void 0!==n?n:eT(e.id,t))}}let eB=(e,t,r)=>{switch(e){case I._g.FILE:return es(t,r,!1);case I._g.FILE_REPO:return ev(t,r);case I._g.FOLDER:return eT(t,r);case I._g.TEAM:return eC(t,r)}};function eV(e,t,r){switch(e){case I._g.FILE:return el(t,r,!1);case I._g.FILE_REPO:return function(e,t){let r=en(e,N.V.VIEWER,t);return k(I._g.FILE_REPO,e,a.CTA.CAN_VIEW,t,r)??r}(t,r);case I._g.FOLDER:return eI(t,r);case I._g.TEAM:return eS(t,r)}}function eG(e,t){return e.level!==N.V.OWNER&&(e.level===N.V.ADMIN?eH(e.resource_type,e.resource_id_or_key,t):eB(e.resource_type,e.resource_id_or_key,t))}function eH(e,t,r){return e===I._g.TEAM&&eO(t,r)}function eW(e,t,r){var n;return r?(null==(n=e.orgUsersByOrgId.orgUsers[t])?void 0:n[r])??(0,o.i)(e,"org_user",t):null}function eK(e,t){let r=t.user;if(!e||!r)return!1;let n=t.orgById[e]??(0,o.i)(t,"org",e),i=eW(t,e,r.id);return eY(i,n,O.Wp.GUEST)}function ez(e,t,r){var n;if(!e)return!1;r=r||(null==(n=t.user)?void 0:n.id);let i=t.orgById[e]??(0,o.i)(t,"org",e),a=eW(t,e,r);return eY(a,i,O.Wp.MEMBER)}function eZ(e,t,r){var n;if(!e)return!1;let i=t.orgById[e]??(0,o.i)(t,"org",e);r=r||(null==(n=t.user)?void 0:n.id);let a=eW(t,e,r);return eY(a,i,O.Wp.ADMIN)}function eY(e,t,r){return!!t&&!!e&&e0(e.permission)>=r}function ej(e,t){return(0,T.OX)(e.orgUsersByOrgId.orgUsers,t).some(r=>ez(r.org_id,e,t))}function e$(e,t,r){var n,i;return r=r||(null==(n=t.user)?void 0:n.id),!!(e&&t.licenseGroups&&(null==(i=t.licenseGroups[e])?void 0:i.admin_users_metadata.some(e=>e.id===r)))}function eq(e,t,r){var n,i,a,o,l;r=r||(null==(n=t.user)?void 0:n.id);let s=t.currentUserOrgId;return!!(e&&r&&s&&(null==(l=null==(o=null==(a=null==(i=t.orgUsersByOrgId)?void 0:i.orgUsers)?void 0:a[s])?void 0:o[r].workspace_users)?void 0:l.find(t=>t.permission===I.F9.ADMIN&&t.workspace_id===e)))}function eX(e,t,r){return e.org_access!==I.Zn.SECRET&&eJ(e.id,t,r)}function eJ(e,t,r){var n;if(!(r=r||(null==(n=t.user)?void 0:n.id))||!e||!t.currentUserOrgId)return!1;let i=t.currentUserOrgId&&t.user&&t.orgUsersByOrgId.orgUsers[t.currentUserOrgId]?t.orgUsersByOrgId.orgUsers[t.currentUserOrgId][r]:null;null===i&&(i=(0,o.i)(t,"org_user",t.currentUserOrgId));let a=(0,C.m)(e,t);if(!a||!i||t.currentUserOrgId!==a.org_id)return!1;if(eR(e,t))return!0;let l=eZ(t.currentUserOrgId,t,r);return a.org_access!==I.Zn.SECRET&&(l||!!(a.workspace_id&&eq(a.workspace_id,t,r)))}let eQ=(e,t)=>!e||("whiteboard"===t?"starter"===e.whiteboard_paid_status:"starter"===e.design_paid_status),e0=S.E;function e1(e){switch(e){case I.Gu.GUEST:return(0,g.t)("general.guest");case I.Gu.MEMBER:return(0,g.t)("general.member");case I.Gu.ADMIN:return(0,g.t)("general.admin")}}function e2(e){return(0,A.N)(e)}let e3=e=>e4(e.user,e.currentUserOrgId);function e4(e,t){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==t)}function e6(e){return!!(e&&e.external_restricted_org_id)}function e8(e,t){return"whiteboard"===t?e&&e.whiteboard_paid_status===I.oz.RESTRICTED:e&&e.design_paid_status===I.oz.RESTRICTED}function e9(e,t){return"whiteboard"===t?e&&e.whiteboard_paid_status===L.Eg.RESTRICTED:e&&e.design_paid_status===L.Eg.RESTRICTED}function e5(e,t){return"whiteboard"===t?e&&e.whiteboardPaidStatus===L.Eg.RESTRICTED:e&&e.designPaidStatus===L.Eg.RESTRICTED}function e7(e,t){return!e5(null==e?void 0:e.currentTeamUser,t)&&((null==e?void 0:e.subscription)!==null||(null==e?void 0:e.studentTeamAt)!==null||(null==e?void 0:e.gracePeriodEnd)&&e.gracePeriodEnd>new Date)}function te(e){return e&&!!e.orgId}function tt(e,t){return"whiteboard"===t?!!e&&e.whiteboard_paid_status===L.Eg.FULL:!!e&&e.design_paid_status===L.Eg.FULL}let tr=()=>({[I.Zn.PUBLIC]:(0,g.t)("org_access_strings.open"),[I.Zn.PRIVATE]:(0,g.t)("org_access_strings.closed"),[I.Zn.SECRET]:(0,g.t)("org_access_strings.secret")}),tn=()=>({[P.X_.ORG_BROWSABLE]:(0,g.t)("team_creation.visible"),[P.X_.HIDDEN]:(0,g.t)("team_creation.hidden")}),ti=()=>({[I.Ze.EDIT]:(0,g.t)("team_creation.can_edit"),[I.Ze.VIEW]:(0,g.t)("team_creation.can_view")});function ta(e){switch(e){case N.V.OWNER:return(0,g.t)("permissions.level_name_capitalized.owner");case N.V.ADMIN:return(0,g.t)("permissions.level_name_capitalized.admin");case N.V.EDITOR:return(0,g.t)("permissions.level_name_capitalized.can_edit");case N.V.VIEWER:return(0,g.t)("permissions.level_name_capitalized.can_view");case N.V.VIEW_PROTOTYPES:return(0,g.t)("permissions.level_name_capitalized.can_view_prototypes");default:return(0,g.t)("permissions.level_name_capitalized.none")}}function to(e){switch(e){case N.V.OWNER:return(0,g.t)("permissions.level_name.owner");case N.V.ADMIN:return(0,g.t)("permissions.level_name.admin");case N.V.EDITOR:return(0,g.t)("permissions.level_name.can_edit");case N.V.VIEWER:return(0,g.t)("permissions.level_name.can_view");case N.V.VIEW_PROTOTYPES:return(0,g.t)("permissions.level_name.can_view_prototypes");default:return(0,g.t)("permissions.level_name.none")}}let tl=e=>{switch(e){case N.V.OWNER:return(0,g.t)("permissions.level_role_name.owner");case N.V.ADMIN:return(0,g.t)("permissions.level_role_name.admin");case N.V.EDITOR:return(0,g.t)("permissions.level_role_name.editor");case N.V.VIEWER:return(0,g.t)("permissions.level_role_name.viewer");case N.V.VIEW_PROTOTYPES:return(0,g.t)("permissions.level_role_name.prototype_viewer");default:return""}};function ts(e,t,r,n){let i=t.parent_org_id&&e.orgUsersByOrgId.orgUsers[t.parent_org_id]&&e.orgUsersByOrgId.orgUsers[t.parent_org_id][r],a=t.team_id&&e.teamUserByTeamId&&e.teamUserByTeamId[t.team_id]&&e.teamUserByTeamId[t.team_id][r],o="";return i?o="design"===n?i.design_paid_status:i.whiteboard_paid_status:!i&&a&&(o="design"===n?a.design_paid_status:a.whiteboard_paid_status),o}function tc(e,t,r){if(!t||!r)return!1;let n="whiteboard"===t?"whiteboard_paid_status":"design_paid_status",i=Object.entries(e.teamUserByTeamId||{}).find(([t,i])=>{var a,o;return(null==(a=i[r])?void 0:a[n])===L.Eg.FULL&&(null==(o=e.teams[t])?void 0:o.pro_team)});return!!i}function td(e,t){if(!t)return!1;let r=Object.entries(e.teamUserByTeamId??{}).find(([r,n])=>{let i=e.teams[r];return!!(null==i?void 0:i.student_team_at)&&null!=n[t]});return null!=r}function tu(e,t,r){if(!t||!r)return!1;let n="whiteboard"===t?"whiteboard_paid_status":"design_paid_status",i=Object.entries(e.teams).find(([t,i])=>{var a,o;let l=null==(o=null==(a=e.teamUserByTeamId)?void 0:a[t])?void 0:o[r];return J(t,N.V.EDITOR,e)&&(null==l?void 0:l[n])!==L.Eg.RESTRICTED});return!!i}function tp(e,t){var r;return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!(null==(r=t.orgById[e.parentOrgId])?void 0:r.figjam_disabled_at)}function tm(e,t){var r;return!!e&&!!(null==(r=t.orgById[e])?void 0:r.figjam_disabled_at)}function th(e,t){let r=(0,v.TC)(e.id,t);return tm(r||null,t)}function t_(e,t){if(e.level!==N.V.VIEWER&&e.level!==N.V.VIEW_PROTOTYPES)return null;let r=t.folders[e.resource_id_or_key];if(!r)return null;let n=e.user_id&&r.team_id&&t.roles.byTeamId[r.team_id]&&t.roles.byTeamId[r.team_id][e.user_id],i=!r.is_invite_only&&!r.is_view_only;return n&&n.level>N.V.VIEWER&&i?(0,g.t)("permissions.can_still_edit_team_project_is_in"):null}function tg({role:e,file:t,folder:r=null}){if(e.level!==N.V.VIEWER&&e.level!==N.V.VIEW_PROTOTYPES)return null;let n=(0,y.$s)(t);switch(e.level){case N.V.VIEWER:{if(t.link_access===I.I1.EDIT)return(0,g.t)("permissions.can_still_edit_anybody_with_the_link",{noun:n});if(t.link_access===I.I1.ORG_EDIT&&e.org_user&&e.org_user.permission!==I.Gu.GUEST)return(0,g.t)("permissions.can_still_edit_org_member_with_link",{noun:n});if(e.pending)break;let i=!!r&&!r.is_invite_only&&!r.is_view_only&&!(""===r.name&&r.team_id),a=!!e.teamLevel&&e.teamLevel>N.V.VIEWER&&(!r||i),o=!!e.folderLevel&&e.folderLevel>N.V.VIEWER,l=!!e.repoLevel&&e.repoLevel>N.V.VIEWER;return tE(a,o,l)}case N.V.VIEW_PROTOTYPES:{if(t.link_access===I.I1.EDIT)return(0,g.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:n});if(t.link_access===I.I1.ORG_EDIT&&e.org_user&&e.org_user.permission!==I.Gu.GUEST)return(0,g.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:n});if(e.pending)break;let i=r&&!r.is_invite_only&&!r.is_view_only;if(e.teamLevel&&e.teamLevel>N.V.VIEWER&&(!r||i))return(0,g.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:n});if(e.folderLevel&&e.folderLevel>N.V.VIEWER)return(0,g.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:n});if(e.repoLevel&&e.repoLevel>N.V.VIEWER)return(0,g.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:n});if(t.link_access===I.I1.VIEW)return(0,g.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:n});if(t.link_access===I.I1.ORG_VIEW&&e.org_user&&e.org_user.permission!==I.Gu.GUEST)return(0,g.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:n});if(e.teamLevel&&e.teamLevel>=N.V.VIEWER&&(!r||i))return(0,g.t)("permissions.can_still_see_permission_team_file_is_on",{noun:n});if(e.folderLevel&&e.folderLevel>=N.V.VIEWER)return(0,g.t)("permissions.can_still_see_permission_project_file_is_on",{noun:n});if(e.repoLevel&&e.repoLevel>=N.V.VIEWER)return(0,g.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:n})}}return null}function tf({file:e,seenState:t,folder:r=null}){let n=(0,y.$s)(e);if(e.link_access===I.I1.EDIT)return(0,g.t)("permissions.can_still_edit_anybody_with_the_link",{noun:n});let i=!!r&&!r.is_invite_only&&!r.is_view_only,a=!!t.teamLevel&&t.teamLevel>N.V.VIEWER&&(!r||i),o=!!t.folderLevel&&t.folderLevel>N.V.VIEWER,l=!!t.repoLevel&&t.repoLevel>N.V.VIEWER;return tE(a,o,l)}function tE(e,t,r){return e?(0,g.t)("permissions.can_still_edit_team_permissions"):t?(0,g.t)("permissions.can_still_edit_folder_permissions"):r?(0,g.t)("permissions.can_still_edit_edit_permissions"):null}let ty=(e,t,r=!1,n)=>{let i={...e};if(!r)return i;for(let r in e)r in t.repos&&!eb(r,t,n)&&delete i[r];return i},tv=(e,t,r)=>{let n={},i=ty(e,t,r,!0);for(let e in i){let r=t.repos[e];if(!r)continue;let i=t.fileByKey[r.default_file_key];if(!i)break;r.trashed_at||(n[e]={repo:r,main_file:i})}return n},tb=(e,t,r)=>{let n={},i=ty(e,t,r,!0);for(let e in i){let r=t.repos[e];r.trashed_at&&(n[e]=r)}return n},tI=(e,t,r)=>{let n={},i=ty(e,t,r,!0);for(let e in i){let r=t.repos[e];r.trashed_at&&(n[e]=r)}return n},tT=(e,t)=>!!e&&!!e.canEdit&&(e.team?(0,w.e3)(e.teamId?t.teams[e.teamId]:void 0):!!e.parentOrgId),tw=()=>{if(void 0===c.V)return!1;let e=c.V.getState(),t=F(e);return tT(e.openFile,t)}},994538:(e,t,r)=>{let n;r.d(t,{Ew:()=>j,Gn:()=>A,Il:()=>F,It:()=>e_,JB:()=>Y,LZ:()=>I,ME:()=>J,MG:()=>ed,Mm:()=>eu,NQ:()=>X,O:()=>P,SX:()=>ec,Sd:()=>H,Sy:()=>ea,T1:()=>Q,T9:()=>x,Us:()=>T,V$:()=>R,W7:()=>eo,WR:()=>G,XB:()=>ei,XI:()=>em,Xc:()=>S,Xq:()=>Z,Y6:()=>er,ZY:()=>w,_l:()=>el,bU:()=>B,dO:()=>C,gE:()=>b,gj:()=>ep,hn:()=>n,k8:()=>M,ni:()=>N,qH:()=>U,s7:()=>en,vx:()=>V,wF:()=>O,x0:()=>D,y4:()=>K,ze:()=>k,zg:()=>W});var i=r(768358),a=r(286206),o=r(117986),l=r(961215),s=r(691528),c=r(992750),d=r(424479);let u=[],p=[],m=[],h=[],_=[],g=[],f=[],E=[],y=null,v=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let t of this.eventByGuid.values())if("NONE"!==t.nodeType)for(let r of t.events)e.push(this.injectTypeIntoEvent(t,r));for(let t of _)t(e);let t=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)t.push(r);for(let e of g)e(t);let r=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let t of e.events)r.push({...t,nodeType:e.nodeType});for(let e of f)e(r);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let t=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!t)return;"NONE"===t.nodeType&&(t.nodeType=this.publicNodeTypeFromEvent(e));let r=t.events.find(t=>t.type===e.type&&t.origin===e.origin);if(r)for(let t of e.properties)r.properties.add(t);else{let r=d.TSSceneGraph.instance.get(e.id);r&&(e.type===l.pAX.STYLE_PROPERTY_CHANGE||e.type===l.pAX.STYLE_CREATE||e.type===l.pAX.STYLE_DELETE?r.styleKey&&t.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,c.Pe)({key:r.styleKey,version:r.styleVersionHash})}):t.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:d.TSSceneGraph.instance.developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,t);let n=d.TSSceneGraph.instance.get(e.id);if(n){if(n.styleKey){let r=t.events.filter(e=>e.type===l.pAX.STYLE_DELETE||e.type===l.pAX.STYLE_CREATE||e.type===l.pAX.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:r})}else{let r=t.events.filter(e=>e.type===l.pAX.CREATE||e.type===l.pAX.PROPERTY_CHANGE||e.type===l.pAX.DELETE),i=r.map(e=>{var t;let r="";return e.type===l.pAX.CREATE||e.type===l.pAX.PROPERTY_CHANGE?r=n.containingCanvas||"":e.type===l.pAX.DELETE&&(r=(null==(t=e.oldContainingCanvas)?void 0:t.toString())||""),""===r&&(0,a.Jz)(o.k.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:i})}}}publicNodeTypeFromEvent(e){let t=d.TSSceneGraph.instance.get(e.id);return t&&(null==t?void 0:t.type)!=="NONE"?(0,s.w)(t):"NONE"}injectTypeIntoEvent(e,t){return t.type===l.pAX.CREATE||t.type===l.pAX.DELETE||t.type===l.pAX.PROPERTY_CHANGE?{...t,nodeType:e.nodeType}:t}};function b(){n={selectionChange(e){for(let t of u)e?t.boxSelection():t.normal()},drop(e){for(let t of h)if(!1===t(e))return!1;return!0},boxSelectionEnded(){for(let e of u)e.boxSelection.flush()},currentPageChange(){for(let e of p)e()},timerChange(e){for(let t of m)t(e)},documentChange(e){v.onEventFired(e)},codegenPreferencesChange(e){for(let t of E)t(e)},stackInvariantsEnforced(e){null==eh||eh(e)}}}function I(e){u.push({normal:e,boxSelection:(0,i.D)(e,500)})}function T(e){u=u.filter(t=>t.normal!==e||(t.boxSelection.cancel(),!1))}function w(e){p.push(e)}function S(e){p=p.filter(t=>t!==e)}function C(e){m.push(e)}function O(e){m=m.filter(t=>t!==e)}function A(e){h.push(e)}function N(e){h=h.filter(t=>t!==e)}function L(){_.length||g.length||f.length?l.Cj$.setIsDocumentChangeCallbackRegistered(!0):l.Cj$.setIsDocumentChangeCallbackRegistered(!1)}function P(e){_.push(e),L()}function R(e){_=_.filter(t=>t!==e),L()}function k(e){g.push(e),L()}function D(e){g=g.filter(t=>t!==e),L()}function M(e){f.push(e),L()}function F(e){f=f.filter(t=>t!==e),L()}function x(e){E.push(e)}function U(e){E=E.filter(t=>t!==e)}let{set:B,remove:V,has:G,run:H}=eg(),{set:W,remove:K,has:z,run:Z,reset:Y}=eg(),{set:j,remove:$,has:q,run:X,reset:J}=eg(),{set:Q,remove:ee,has:et,run:er,reset:en}=eg(),{set:ei,remove:ea,has:eo,run:el,reset:es,runOrTimeout:ec}=eg();function ed(e){y=e}function eu(){return!!y}function ep(){y=null}async function em(){return!y||await y()}let eh=null;function e_(e){return eh=e,()=>eh=null}function eg(){let e;let t=new Promise(t=>{e=t}),r=null,n=()=>{t=new Promise(t=>{e=t}),r=null};return{set:t=>{r=t,e(t)},remove:e=>{e===r&&n()},has:()=>!!r,run:async(...e)=>{let r=await t;return await r(...e)},runOrTimeout:async(e,...r)=>{let n=new Promise(t=>{setTimeout(()=>{t()},e)}),i=await Promise.race([t,n]);if(void 0===i)return{didRun:!1};let a=await i(...r);return{didRun:!0,returnValue:a}},reset:n}}},939179:(e,t,r)=>{r.d(t,{W:()=>l});var n=r(269658),i=r(716250),a=r(31642),o=r(924704);let l=new class{constructor(){this.forceRefresh=(e,t,r)=>{var l;if(!t.redirect_code_url)return Promise.reject(Error("Invalid code download url"));let s="",c=n.V.getState(),d={version_id:t.id,file_key:(null==(l=c.openFile)?void 0:l.key)||""};if(r&&(d.org_id=r),(0,i.BZ)().plugins_remove_syntax_checking){let r=(0,a._e)(t.redirect_code_url,d,{raw:!0}).then(({data:t})=>(delete this.requestsInFlight[e],this.cache[e]=t,t)).catch(t=>{throw delete this.requestsInFlight[e],t});return this.requestsInFlight[e]=r,r}let u=(0,a._e)(t.redirect_code_url,d,{raw:!0}).then(({data:e})=>(s=e,(0,o.G)(s))).then(t=>{if(!t.success)throw Error("code is not valid javascript");return delete this.requestsInFlight[e],this.cache[e]=s,s}).catch(t=>{throw delete this.requestsInFlight[e],t});return this.requestsInFlight[e]=u,u},this.getAndCache=(e,t)=>{let r=this.getPluginVersionHash(e);return r?r in this.cache?Promise.resolve(this.cache[r]):r in this.requestsInFlight?this.requestsInFlight[r]:this.forceRefresh(r,e,t):Promise.resolve(null)},this.clearCache=()=>{this.cache=Object.create(null),this.requestsInFlight=Object.create(null)},this.clearCache()}getPluginVersionHash(e){return e&&e.id&&e.plugin_id?`${e.plugin_id}:${e.id}`:null}}},339531:(e,t,r)=>{r.d(t,{$1:()=>e4,$x:()=>eB,BR:()=>eG,Ew:()=>e1,FY:()=>e6,Fl:()=>ee,GE:()=>ex,If:()=>ep,KB:()=>eK,Kb:()=>ev,Le:()=>tS,Li:()=>tb,Ls:()=>tC,Lw:()=>te,MK:()=>tE,N7:()=>tc,NO:()=>tT,NT:()=>e5,Ow:()=>eo,PB:()=>e8,PF:()=>eO,QS:()=>e7,Qj:()=>e0,Sf:()=>tp,T3:()=>eM,Uo:()=>td,V5:()=>eP,Ve:()=>tv,Vt:()=>ek,WA:()=>eS,WC:()=>$,Wt:()=>eA,XA:()=>ta,XM:()=>ty,Xl:()=>to,YU:()=>e2,Ze:()=>tg,_B:()=>eH,_p:()=>ed,_x:()=>eJ,a2:()=>ej,dx:()=>eu,eu:()=>eg,f7:()=>ti,gG:()=>tr,gd:()=>J,hY:()=>t_,hb:()=>ew,hi:()=>eR,hs:()=>eF,iB:()=>eX,iz:()=>Q,jw:()=>e9,kp:()=>eh,l9:()=>tw,lI:()=>eV,lS:()=>eU,lW:()=>eZ,mL:()=>em,nf:()=>th,or:()=>ei,pJ:()=>eQ,pe:()=>er,pj:()=>tI,px:()=>tu,qg:()=>eL,qm:()=>ez,qy:()=>tn,r0:()=>eq,rJ:()=>tm,rw:()=>eN,t4:()=>eW,tO:()=>tl,tP:()=>e$,vI:()=>e_,vS:()=>ts,wc:()=>eD,yd:()=>el,yn:()=>et,yx:()=>es,yy:()=>ef}),r(100768);var n=r(407908),i=r(5453),a=r(647744),o=r(220518),l=r(269658),s=r(716250),c=r(571529),d=r(297891),u=r(286206),p=r(523495),m=r(117986),h=r(361763),_=r(31642),g=r(970740),f=r(644383),E=r(573196),y=r(289629),v=r(565336),b=r(369874),I=r(443721),T=r(897225),w=r(496478),S=r(158774),C=r(840568),O=r(727803),A=r(761767),N=r(356268),L=r(315100),P=r(465883),R=r(147298),k=r(661539),D=r(204884),M=r(842019),F=r(150741),x=r(939818),U=r(864357),B=r(668849),V=r(54055),G=r(776605),H=r(535963),W=r(360530),K=r(527323),z=r(155838),Z=r(801998),Y=r(733609),j=r(54159);let $=async(e,{ignoreMissingEditorType:t,resourceType:r,isPublishing:n})=>{var i;let a=await e_(e,{resourceType:r});if(t&&(null==(i=a.error)?void 0:i.text)===ea)return a.manifest;if(a.error)throw Error((0,k.KA)(a.error));return a.manifest};function q({parameters:e,parameterOnly:t},r){if(e&&function(e,t){if(!e.length)throw Error(`Expected "${t}.parameters" to have non-empty parameter list.`);let r=new Set;e.forEach(e=>{if(r.has(e.key))throw Error(`Expected "${t}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);r.add(e.key)});let n=!1;for(let{key:t,optional:r}of e){if(n&&!r)throw Error(`Optional parameters must be listed last in the parameter list. ${t} not marked as optional.`);r&&(n=!0)}}(e,r),t&&!e)throw Error(`Expected parameters to be defined for "${r}" marked as parameterOnly.`)}let X={design:k.IP.FIGMA,dev_handoff:k.IP.DEV,whiteboard:k.IP.FIGJAM,slides:k.IP.FIGMA,sites:k.IP.FIGMA},J=e=>X[e],Q=()=>(0,n.v9)(e=>"fullscreen"===e.selectedView.view?J(e.selectedView.editorType):void 0);function ee(){let e=l.V.getState().selectedView;return et(e)}function et(e){return"fullscreen"===e.view?J(e.editorType):void 0}let er=(e,t)=>Array.isArray(t)?t.includes(e):e===k.IP.FIGMA;class en extends Error{constructor(e,t){super(e),this.message=e,this.manifest=t}}function ei(){return ea}let ea='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function eo(e){return e?e.includes(k.IP.FIGMA)&&e.includes(k.IP.FIGJAM)?k.yA.UNIVERSAL:e.includes(k.IP.FIGJAM)?k.yA.FIGJAM:e.includes(k.IP.FIGMA)&&tw(e)?k.yA.FIGMA_AND_INSPECT:tw(e)?k.yA.INSPECT:k.yA.FIGMA:k.yA.FIGMA}function el(e,t){switch(e){case k.yA.FIGJAM:return"whiteboard";case k.yA.FIGMA:return"design";case k.yA.FIGMA_AND_INSPECT:case k.yA.INSPECT:return"dev_handoff";case k.yA.UNIVERSAL:return t??(0,v.H)()}}function es(e){return e===A.gg.DESIGN?k.yA.FIGMA:e===A.gg.WHITEBOARD?k.yA.FIGJAM:k.yA.FIGMA}function ec(e,t){let r=new Set(k.Tq);return e.filter(e=>!r.has(e)||(null==t?void 0:t.has(e)))}function ed(e){return k.Sq.some(t=>e.includes(t))}class eu{constructor(e,t){this.permissions=e,this.trustedPluginOrigin=t}static none(){return new eu([],void 0)}static forTest(e){return new eu(e||k.T5,void 0)}static forConsoleGlobal(){return new eu(k.pT,void 0)}static forFirstPartyPlugin(){return new eu(k.T5,void 0)}static forLocalPlugin(e){let t=e.manifest.permissions||[];if((0,u.YK)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:t}),(0,s.BZ)().plugins_internal_apis)return new eu(t,"*");let r=ec(t);return r.length<t.length&&(0,u.Jz)(m.k.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new eu(r,void 0)}static forInstalledPlugin(e){let t=e.manifest.permissions||[];if((0,u.YK)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:t}),(0,N.fJ)(e.plugin_id))return new eu(ec(t,(0,N.nG)(e.plugin_id)),(0,N.Em)(e.plugin_id));let r=ec(t);return r.length<t.length&&(0,u.Jz)(m.k.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new eu(r,void 0)}}function ep(e){try{return new URLPattern(e)}catch(e){return null}}function em(e,t){let r=[],n=0;for(let[i,a]of t)r.push(e.substring(n,i)),n=a;return r.push(e.substring(n,e.length)),r.join("")}function eh(e,t,r){var n,i,a;let o,l,c,d,u;let p="widget"===r.resourceType||!!t.cachedContainsWidget;if("error"in t)l={type:"LOAD",text:t.error};else try{c=JSON.parse(t.manifest)}catch(e){l={type:"PARSE",text:e.message}}if("unknown"===r.resourceType){if(c)p=c.containsWidget;else if("manifest"in t)try{p=!!/containsWidget/.test(t.manifest)}catch{}}if(c){try{(0,F.KV)(c.editorType,D.CW,"manifest.editorType"),d=c.editorType}catch{}try{(0,F.KV)(c.capabilities,D.Vn,"manifest.capabilities"),u=c.capabilities}catch{}}let m=(0,z.D)();if("manifest"in t&&(null==m||m.updateCachedContainsWidget({id:e,cachedContainsWidget:p})),!l)try{o=function(e,t){try{(0,F.KV)(e,"widget"===t.resourceType?D.pE:D.FO,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let t="but got additional property",r=e.lastIndexOf(t);if(-1!==r){let n=e.substring(r+t.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${n}`}return e}(e.message));throw e}if("plugin"===t.resourceType){if(e.relaunchButtons){let t=new Set;e.relaunchButtons.forEach(r=>{if(t.has(r.command))throw new en(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${r.command}"`,e);t.add(r.command)})}!function(e){if(q(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(t){for(let r of t)(0,k.nT)(r)?q(r,r.name):(0,k.i)(r)&&e(r.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new en(ea,e);if(e.editorType.some(e=>!k.ZB.includes(e))||e.editorType.length<1||e.editorType.length>k.ZB.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let t=e.permissions.find(e=>!k.T5.includes(e));if(void 0!==t)throw new en(`Invalid permission specified: ${t}`,e)}}(e),!function(e){if(e.capabilities)for(let t of e.capabilities){if(k.Z7.includes(t)||function(e,t){throw new en(`Invalid capability specified: ${t}`,e)}(e,t),"panel"===t||"inspect"===t||"codegen"===t||"linkpreview"===t||"vscode"===t){if(!tw(e.editorType))throw new en(`Capability "${t}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new en(`Capability "${t}" is not supported for widgets`,e)}if("vscode"===t&&!(0,s.BZ)().ext_vscode_plugins)throw new en(`Capability "${t}" is not supported`,e);if((0,W.I)()&&!e.capabilities.includes("vscode"))throw new en('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){var t,r;if(!(null==(t=e.capabilities)?void 0:t.includes("codegen"))){if(e.codegenLanguages)throw new en("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new en("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new en("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let n=(null==(r=e.codegenLanguages)?void 0:r.map(e=>e.value))??[],i=[],a=new Set;for(let t=0;t<e.codegenPreferences.length;t++){let r=e.codegenPreferences[t];for(let i of r.includedLanguages??[])if(!n.includes(i))throw new en(`Unknown language "${i}" in codegenPreferences[${t}].includedLanguages`,e);if((0,k.y_)(r)&&i.push(r),(0,k.s5)(r)){if(a.has(r.propertyName))throw new en('codegenPreferences "action" itemType settings must have unique propertyName values',e);a.add(r.propertyName)}if((0,k.xh)(r)){let t=0;if(r.options)for(let e of r.options)e.isDefault&&(t+=1);if(1!==t)throw new en('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(i.length>1)throw new en('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===t.resourceType&&e.containsWidget&&"1.0.0"!==e.widgetApi)throw new en("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let t=(0,M.qN)(e.networkAccess);if(!t.isValid)throw new en(t.validationErr,e)}if(e.relatedLinkDomains){if(!tw(e.editorType))throw new en("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let t of e.relatedLinkDomains){if(!t.startsWith("https://")||t.startsWith("http://"))throw new en(`Invalid domain '${t}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);let r=ep(t);if(!r)throw new en(`Invalid domain '${t}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!tw(e.editorType))throw new en("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let t of e.devResourceDomains){if(!t.startsWith("https://")||t.startsWith("http://"))throw new en(`Invalid domain '${t}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);let r=ep(t);if(!r)throw new en(`Invalid domain '${t}' in 'devResourceDomains'.`,e)}}if(e.documentAccess&&!(0,s.BZ)().plugins_incremental_loading_api)throw new en("'documentAccess' is not supported yet",e);return e}(c,{resourceType:p?"widget":"plugin"})}catch(e){l={type:"VALIDATE",text:e.message},e.manifest&&(o=e.manifest)}let h=p?(n=d,{...ey,editorType:n||void 0}):(i=d,a=u,{...eE,editorType:i||void 0,capabilities:a||void 0});return{plugin_id:o&&o.id||"",name:function(e,t){if(e)return e.name;if(t.lastKnownName)return t.lastKnownName;if(!t.path)return"Error";{let e=t.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:t.path}}(o,t),manifest:o??h,localFileId:e,localFilePath:t.path,error:l}}async function e_(e,t){let r=(0,z.D)();try{if(!r)throw Error("desktopApp not available");let n=await r.getLocalFileExtensionManifest(e);return eh(e,n,t)}catch(r){return{plugin_id:"",name:"Error",manifest:"widget"===t.resourceType?ey:eE,localFileId:e,localFilePath:"",error:{type:"LOAD",text:r.message}}}}let eg=async e=>{let t;let r=(0,z.D)();try{if(!r)throw Error("desktopApp not available");t=await r.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(t.buildErrCode)throw Error("Build error: "+t.stderr+"\nPath was: "+t.path);let n=t.source;return t.html&&(n=function(e,t){let r=e=>{let t=JSON.stringify(e),r=t.split(/(<!--|-->|\bimport)/g),n=r.map((e,t)=>1&t?e.slice(0,2)+'"+"'+e.slice(2):e);return n.join("")};if("string"==typeof t)return`const __html__ = ${r(t)};${e}`;let n=Object.entries(t).map(([e,t])=>`[${r(e)}]:${r(t)}`).join(",");return`const __uiFiles__ = {${n}};${e}`}(n,t.html)),n};function ef(e){var t;return(null==(t=e.error)?void 0:t.text)===ea?e.name:`${e.error?`\u{26A0}  `:""}${e.name}`}let eE={id:"",name:"",api:"",main:""},ey={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},ev={id:"",plugin_id:"",manifest:{...eE},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},eb={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:P.Se.USER,badges:[]},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,tags:[],community_publishers:{accepted:[],pending:[]},comments_setting:O.Br.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eI={...eb,is_widget:!0},eT={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",tags:(0,U.UA)(),iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:O.Br.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:T.i.Actions.NOOP};function ew(e){if(!e||!e.versions)return ev;let t=e.current_plugin_version_id;return t&&e.versions[t]||ev}function eS(e,t){if((0,K.dn)(t))return(0,K.Lp)(t);let r=e[t]??{};for(let e in r)return r[e].current_plugin_version_id}let eC=e=>(null==e?void 0:e.containsWidget)?eI:eb;function eO(e,t,r,n){var i,a,o,l,s;if(null==(i=null==r?void 0:r.manifest)?void 0:i.id){if(e&&e[null==(a=null==r?void 0:r.manifest)?void 0:a.id])return e[null==(o=null==r?void 0:r.manifest)?void 0:o.id];if(t&&t[null==(l=null==r?void 0:r.manifest)?void 0:l.id])return t[null==(s=null==r?void 0:r.manifest)?void 0:s.id]}if(n){if(e&&e[n])return e[n];if(t&&t[n])return t[n]}return eC(null==r?void 0:r.manifest)}function eA(e,t,r){var n,i,a,o,l;if(null==(n=null==r?void 0:r.manifest)?void 0:n.id){if(e&&e[null==(i=null==r?void 0:r.manifest)?void 0:i.id])return e[null==(a=null==r?void 0:r.manifest)?void 0:a.id];if(t&&t[null==(o=null==r?void 0:r.manifest)?void 0:o.id])return t[null==(l=null==r?void 0:r.manifest)?void 0:l.id]}return null}function eN(e,t){return(0,V.FO)(e,t,eb)}function eL(e,t){return(0,V.FO)(e,t,eI)}function eP(e,t){let r={};return Object.keys(e).forEach(n=>{(function(e,t){let r=e.roles.org&&e.roles.org.id===t.id,n=e.roles.is_public&&e.publisher.id===t.community_profile_id;return!!(r||n)})(e[n],t)&&(r[n]=e[n])}),r}function eR(e,t){let r={};return Object.keys(e).forEach(n=>{let i=e[n];i.roles.org&&i.roles.org.id===t&&(r[i.id]=i)}),r}function ek(e,t){let r={};return Object.keys(e).forEach(n=>{let i=e[n],a=ew(i);er(t,a.manifest.editorType)&&(r[i.id]=i)}),r}function eD(e,t){let r={};return Object.keys(e).forEach(n=>{let i=e[n],a=i.roles.org&&i.roles.org.id;a&&a!==t||(r[i.id]=i)}),r}function eM(e){return Object.keys(e.versions).length>0}function eF(e){var t;return!!(null==(t=null==e?void 0:e.roles)?void 0:t.org)}function ex(e,t,r=!0){let n={};return Object.keys(e).forEach(i=>{let a=e[i],o=r?G.k2:G.$L;((0,w.xv)(a,t)||o(a,t))&&(n[i]=e[i])}),n}function eU(e,t){return Object.keys(e).reduce((r,n)=>{var i,a;let o=e[n];if(o.roles.is_public){let l=null==(a=null==(i=o.community_publishers)?void 0:i.accepted)?void 0:a.some(e=>e.id===t);l&&(r[n]=e[n])}return r},{})}function eB(e){return(0,i.ih)(Object.keys(e).map(t=>ew(e[t]))).map(t=>e[t.plugin_id])}function eV(e,t){var r,n;let i=e.roles,a=!t.is_public&&(0,b.k4)(e);return!!i.is_public!=!!t.is_public||(null==(r=i.org)?void 0:r.id)!==(null==(n=t.org)?void 0:n.id)||a}function eG(e){if(!e)throw Error("Code string cannot be empty");let t=(0,p.Wj)(e).length;if(t>V.Eo)throw Error(`plugin code exceeds max size of ${Math.floor(V.Eo/1e6)}MB`);return t}function eH(e){return(0,w.o1)(e,"Icon image")}async function eW(e,t){return eH(e),await eY(e,{width:H.dO,height:H.dO},t,(0,g.t)("community.publishing.error_icon_image_dimensions"))}function eK(e){return(0,w.o1)(e,"Artwork image",["image/jpeg","image/png","image/svg+xml","image/gif"])}async function ez(e,t){return eK(e),await eY(e,{width:j.cm,height:j.YG},t,(0,g.t)("community.publishing.error_artwork_image_dimensions",{coverImageWidth:j.cm,coverImageHeight:j.YG}))}function eZ(e){let t=null==e?void 0:e[0];if(!t)throw Error((0,g.t)("community.publishing.error_file_not_found"));return t}async function eY(e,t,r,n){let{width:i,height:a}=t,o=URL.createObjectURL(e),l=await (0,w.Lv)(o);try{if(!function(e,t,r){let{width:n,height:i}=t;return e.width===n&&e.height===i||r&&e.width%n==0&&e.height%i==0&&e.width/n==e.height/i}(l,t,r))throw Error(n);if(l.width===i&&l.height===a)return e;let o=await new Promise((e,t)=>{let r=document.createElement("canvas");try{r.width=i,r.height=a;let n=r.getContext("2d");n.drawImage(l,0,0,i,a),r.toBlob(r=>r?e(r):t(Error("Failed to resize image")))}catch(e){t(e)}finally{r.remove()}});return new File([o],e.name,{type:o.type})}finally{URL.revokeObjectURL(o),l.remove()}}async function ej(e){let t=(await _.ZP.post(`/api/${(0,V.$U)(e)}`)).data.meta;if(!t.id)throw Error("cannot generate plugin ID");return t}function e$(e,t,r){return e.roles.org??(t&&r?{id:t.id,name:t.name,img_url:t.img_url}:null)}function eq(e,t){return t===k.jZ.ORG?e?{org:e}:(a.u.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function eX(e){return e.name===eT.name&&e.newVersionReleaseNotes===eT.newVersionReleaseNotes&&e.supportContact===eT.supportContact&&e.description===eT.description&&e.iconSrc===eT.iconSrc&&e.coverImageSrc===eT.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}let eJ=(e,t,r,n,i)=>{var a,o,l,s,c,d;let u;let p=void 0!==t?e.localPlugins[t]:void 0,m=p&&p.manifest,h=eO(e.publishedPlugins,e.publishedWidgets,p,r),_=ew(h),g={...(0,U.UA)(),tokens:(h.tags||[]).map(e=>({content:e,state:L.k.OK}))},f=null==(a=null==m?void 0:m.permissions)?void 0:a.includes("payments"),v=(0,w.I_)(h,(0,Z._H)(e),(0,Y.canMemberOrg)(e.currentUserOrgId,e,null==(o=e.user)?void 0:o.id),f);try{u=(0,w.is)(h,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:b,pending:I}=h.community_publishers,S={...(0,U.UA)(),tokens:(h.community_publishers?[...b.map(e=>({...e,isPending:!1})),...(null==I?void 0:I.map(e=>({...e,isPending:!0})))||[]]:[]).reduce((t,r)=>(0,w.YH)(e.authedProfilesById[r.id],u)?t:t.concat([{state:L.k.OK,content:r}]),[])};return{name:_.name||m&&m.name||eT.name,currentVersionReleaseNotes:_.release_notes||eT.newVersionReleaseNotes,newVersionReleaseNotes:eT.newVersionReleaseNotes,tags:g,supportContact:h.support_contact||(null==(l=e.user)?void 0:l.email)||eT.supportContact,description:_.description||eT.description,tagline:_.tagline||eT.tagline,creatorPolicy:_.creator_policy??eT.creatorPolicy,iconSrc:_.redirect_icon_url||eT.iconSrc,widgetSnapshotImageSrc:n||_.redirect_snapshot_url||eT.widgetSnapshotImageSrc,widgetSnapshotImageBlob:i||eT.widgetSnapshotImageBlob,coverImageSrc:_.redirect_cover_image_url||eT.coverImageSrc,iconImageError:eT.iconImageError,coverImageError:eT.coverImageError,widgetSnapshotImageError:eT.widgetSnapshotImageError,twoFactorAuthDisabledError:eT.twoFactorAuthDisabledError,emailNotVerifiedError:eT.emailNotVerifiedError,accountDetailsChangedError:eT.accountDetailsChangedError,freemiumRequiredForMigrating:eT.freemiumRequiredForMigrating,author:u,publishers:S,creators:b.map(e=>({...e,isPending:!1})).concat((I??[]).map(e=>({...e,isPending:!0}))).filter(t=>!(0,w.YH)(e.authedProfilesById[t.id],u)&&t.entity_type===P.Se.USER),commentsSetting:h.comments_setting||eT.commentsSetting,categoryId:h.category_id||eT.categoryId,blockPublishingOnToS:(0,w.ED)(e,u,v),playgroundFigFile:_.playground_fig_file,playgroundFilePublishType:T.i.Actions.NOOP,isPaid:!!h.monetized_resource_metadata||f,price:(0,y.wB)(h.monetized_resource_metadata),isSubscription:null==(s=h.monetized_resource_metadata)?void 0:s.is_subscription,hasPaymentsApi:f,annualDiscount:null==(c=h.monetized_resource_metadata)?void 0:c.annual_discount_percentage,isAnnualDiscountActive:!!(null==(d=h.monetized_resource_metadata)?void 0:d.annual_discount_active_at),carouselMedia:(0,E.mM)(h)}};function eQ(e){if(!e)return{};let t={};return e.forEach(e=>{ew(e).id&&!e.unpublished_at&&(t[e.id]=e)}),t}function e0(e,t,r,n){let i={};return(e.email_validated_at||(i.emailNotVerifiedError=(0,g.t)("community.publishing.please_verify_your_email_address_to_publish")),n||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(t.code!==P.QW.FAILURE||t.error!==(0,g.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!n&&(e.plugin_publishing_blocked_at||e.community_blocked_at||t.code===P.QW.FAILURE&&t.error===(0,g.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?i.accountDetailsChangedError=(0,g.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):t.code===P.QW.FAILURE&&t.error&&(i.other=t.error):i.twoFactorAuthDisabledError=r?(0,g.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,g.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),i}function e1(e,t,r,n){var i,a;if(!e)return{};let l={};0===(0,V.gK)(e.name).length&&(l.name=(0,g.t)("community.publishing.name_must_not_be_empty")),0===(0,V.gK)(e.tagline).length&&(l.tagline=(0,g.t)("community.publishing.add_a_tagline")),(0,d._N)(e.description)&&(l.description=(0,g.t)("community.publishing.add_a_description"));let c=(0,V.gK)(e.supportContact);if(0===c.length?l.supportContact=(0,g.t)("community.publishing.support_contact_must_not_be_empty"):(0,o.Jh)(c)||(0,p.CB)(c)||(l.supportContact=(0,g.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,V.gK)(e.iconSrc).length&&(l.iconImageError=(0,g.t)("community.publishing.icon_cant_be_empty")),(0,s.BZ)().cmty_rdp_redesign_publishing||0!==(0,V.gK)(e.coverImageSrc).length||(l.coverImageError=(0,g.t)("community.publishing.cover_art_cant_be_empty")),(0,s.BZ)().cmty_rdp_redesign_publishing&&(l.carouselMedia=(0,w.k6)(e.carouselMedia)),(0,s.BZ)().cmty_rdp_redesign_publishing&&!e.categoryId&&(l.categoryId=(0,g.t)("community.publishing.category_cant_be_empty")),void 0===e.price||(null==(i=t.permissions)?void 0:i.includes("payments"))||(null==n?void 0:n.third_party_m10n_status)!==R.CA.FLAGGED||(l.freemiumRequiredForMigrating=(0,g.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&(null==(a=t.editorType)?void 0:a.length)===1){let n=t.editorType[0],i=e.playgroundFigFile.editor_type;if(n===k.IP.FIGMA&&"design"!==i||n===k.IP.FIGJAM&&"whiteboard"!==i){let e=n===k.IP.FIGMA?(0,g.t)("community.publishing.playground_file.figma"):(0,g.t)("community.publishing.playground_file.figjam");l.playgroundFigFile=r?(0,g.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,g.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}r&&0===(0,V.gK)(e.widgetSnapshotImageSrc).length&&(l.widgetSnapshotImageError=(0,g.t)("community.publishing.snapshot_must_not_be_empty"));let u=function(e,t){var r,n;if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,g.t)("community.publishing.price_is_required_for_paid_resources");if((0,y.io)(e.price))return e.price<y.kc?(0,g.t)("community.seller.paid_resource_minimum_err"):(0,g.t)("community.seller.paid_resource_maximum_err");if((0,y.nT)(e.price))return(0,g.t)("community.seller.prices_must_follow_format");if(!t||(0,b.k4)(t))return null;let i=null==(r=null==t?void 0:t.monetized_resource_metadata)?void 0:r.price;return e.isSubscription&&i&&(0,y.fl)(i/100,e.price)?(0,g.t)("community.seller.price_increase_limit"):!(null==(n=null==t?void 0:t.monetized_resource_metadata)?void 0:n.can_increase_price)&&i&&(0,y.A4)(i/100,e.price)?(0,g.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,n);u&&(l.price=u);let m=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,g.t)("community.seller.discount_must_follow_format"):null;return m&&(l.annualDiscount=m),l}function e2(e,t){if(!e)return{};let r={},n=(0,V.gK)(e.name).length;n<4?r.name=(0,g.t)("community.publishing.name_must_be_4_characters_long"):n>100&&(r.name=(0,g.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,V.gK)(e.description).length>1e4&&(r.description=(0,g.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,V.gK)(e.newVersionReleaseNotes).length>1e4&&(r.newVersionReleaseNotes=(0,g.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,V.gK)(e.creatorPolicy).length>1e4&&(r.creatorPolicy=(0,g.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long"));let i=e.tags.tokens.map(e=>e.content);e.tags.inputValue&&(i=i.concat([e.tags.inputValue]));let a=(0,V.ny)(i);a&&(r.tags=a);let o=(0,V.vO)(e.tagline);return o&&(r.tagline=o),(0,V.gK)(e.supportContact).length>100&&(r.supportContact=(0,g.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(r.iconImageError=e.iconImageError),e.coverImageError&&(r.coverImageError=e.coverImageError),r}let e3=(e,t)=>!t||!!e.roles.org&&e.roles.org.id===t.id||e.install_status!==k.vF.PUBLIC_PLUGINS_DISALLOWED&&e.install_status!==k.vF.PLUGIN_NOT_ORG_APPROVED;function e4(e){return(0,k.gX)(e.plugin)}function e6(e){var t;let r;let{installedWidgetVersions:n,localPlugins:i,publishedCanvasWidgetVersions:a,publishedWidgets:o}=l.V.getState(),s=!e.widgetVersionId,c=e.widgetId;if(c){if(s){let e=Object.values(i).filter(e=>e.plugin_id===c);e.length>1&&ti((0,g.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=(null==(t=a[c])?void 0:t[e.widgetVersionId])||n.widgets[c]||o[c]&&ew(o[c])))return;r.id===e.widgetVersionId||(0,h.rm)()||(0,h.KF)()||(0,u.Jz)(m.k.UNOWNED,Error(`plugin versionId=${null==r?void 0:r.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function e8(e){function t(t){e.logErrorToConsole&&(ti(t),console.error(t))}let r=e.canRunPluginState?e.canRunPluginState:l.V.getState(),n=(0,Y.canRunWidgets)();if(!n.canRun)return t(n.message),!1;if(!(0,Y.canRunPlugins)(r))return t("canRunPlugins check failed"),!1;if(!function(e,t){if(!e.currentUserOrgId)return!0;let r=e.orgById[e.currentUserOrgId];if(!r||(0,k.rV)(t)||(0,k.$M)(t)||!r.plugins_whitelist_enforced)return!0;let n=e.whitelistedPlugins;return!!n[t.plugin_id]}(r,e.plugin))return!1;let{plugin:i,publishedPlugins:a,orgEntity:o,installedPluginVersions:s,editorType:c}=e;if((0,k.rV)(i))return!(0,k.gX)(i)||(t("Local widgets are not supported"),!1);if(c){let e=J(c);if(!er(e,i.manifest.editorType))return t("Plugin has invalid editor type"),!1;if("dev_handoff"===c&&!ts(i))return t("Dev mode plugin required for dev mode"),!1}if(s&&s[i.plugin_id])return!0;a[i.plugin_id]&&t("Plugin does not exist in state");let d=eN(i.plugin_id,a);return!!e3(d,o)||(t("Plugin is not runnable in workspace"),!1)}function e9({canAssociatedUserPurchaseThisResource:e,resource:t}){return(0,k.ec)(t)&&t.current_user_has_run&&!t.community_resource_payment&&e}let e5=e=>e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"};function e7(e){let t=e.match(/\/community\/widget\/(\d+)(\/.*)?$/);return t&&t[1]?t[1]:null}function te(e){let t=e.match(/\/community\/plugin\/(\d+)(\/.*)?$/);return t&&t[1]?t[1]:null}function tt(e,t,r){if(!e.manifest.relaunchButtons)return[];let n=[];for(let i of e.manifest.relaunchButtons){if(r>1&&!i.multipleSelection)continue;let a=function(e,t,r){let n=null;for(let i of r){let r=!1;for(let{pluginID:a,command:o,message:l}of i)if(a===e&&o===t.command){r=!0,n?l!==n.description&&(n.description=k.fu):n={pluginID:e,command:t.command,name:t.name,description:l||""};break}if(!r)return null}return n}(e.plugin_id,i,t);a&&n.push(a)}return n}let tr=(e,t)=>t?t.localFileId:e.id,tn=(e,t,r,n,i,a,o,l)=>{let s=[],c=(0,C.K)(e),d=function(e){if(0===e.length)return[];let t=new Set;for(let{pluginID:r}of e[0])t.add(r||"");return Array.from(t).reverse()}(c);for(let e of d){let d=function(e,t){let r=[];for(let n in e)e[n].plugin_id===t&&r.push(e[n]);return r}(n,e);if(d.filter(e=>er(l,e.manifest.editorType)).forEach((t,r)=>{let n=tt(t,c,a);for(let i of n)s.push({type:"local",pluginTypeAndID:`local-${e}-${r+1}`,plugin:t,relaunchButton:i})}),e in t){let n=t[e],d=ew(n);if(!er(l,d.manifest.editorType))continue;let u=tt(d,c,a),p=!!r[e],m=e3(n,i);if(m)for(let t of u)s.push({type:"published",pluginTypeAndID:`installed-${e}`,plugin:d,publishedPlugin:n,relaunchButton:t});p||o(e,!1)}else o(e,!0)}return s};function ti(e){(0,x.KC)({shouldShowVisualBell:!0});let t=(0,z.D)();S.Gr.dispatch(f.R.enqueue({type:"plugins-runtime-error",message:e,button:t?{text:"Show/Hide console",action:()=>{t.toggleDevTools("bottom")}}:void 0,error:!0}))}function ta(){S.Gr.dispatch(f.R.dequeue({matchType:"plugins-runtime-error"}))}function to(e,t){return e.plugin_id===(null==t?void 0:t.plugin_id)&&(null==e?void 0:e.id)===(null==t?void 0:t.id)}function tl(e,t){switch(t){case I.e.CODEGEN:return td(e);case I.e.INSPECT:return tc(e);case I.e.TEXTREVIEW:return tu(e);default:return!1}}function ts(e,t){var r;return(!!(!(0,W.I)()||(null==(r=e.manifest.capabilities)?void 0:r.includes("vscode")))||null!=t&&!!t.allowNonVsCodePluginsInVsCode)&&tw(e.manifest.editorType)&&!(0,k.gX)(e)}function tc(e){return ts(e)&&tT(e.manifest.capabilities)}function td(e){var t,r;return ts(e)&&(null==(r=null==(t=e.manifest)?void 0:t.capabilities)?void 0:r.includes("codegen"))}function tu(e){var t,r;return null==(r=null==(t=e.manifest)?void 0:t.capabilities)?void 0:r.includes("textreview")}function tp(e,t,r){if(!e)return t;switch(e){case"whiteboard":case"design":return Object.fromEntries(Object.entries(t).filter(([t,r])=>er(J(e),r.manifest.editorType)));case"dev_handoff":return Object.fromEntries(Object.entries(t).filter(([e,t])=>ts(t,r)));default:return{}}}function tm(e,t){if(!e)return t;switch(e){case"whiteboard":case"design":return t.filter(t=>er(J(e),t.manifest.editorType));case"dev_handoff":return t.filter(e=>ts(e));default:return[]}}function th(e,t){if(!e)return t;switch(e){case"whiteboard":case"design":return Object.fromEntries(Object.entries(t).filter(([t,r])=>er(J(e),ew(r).manifest.editorType)));case"dev_handoff":return Object.fromEntries(Object.entries(t).filter(([e,t])=>ts(ew(t))));default:return{}}}function t_(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let t=l.V.getState().selectedView;return(0,B.NE)(t)}function tg(e){var t;return(null==(t=null==e?void 0:e.manifest.editorType)?void 0:t.length)===1&&tw(e.manifest.editorType)}function tf(e){let t=e.manifest.capabilities??[],r=function(e){let t=["vscode"];return e.filter(e=>!t.includes(e))}(t);return 1===r.length&&"codegen"===r[0]}function tE(e){return tg(e)&&tf(e)}function ty(e){return tw(e.manifest.editorType)&&tf(e)}function tv(e){let t=l.V.getState().selectedView;return(0,B.NE)(t)&&ty(e)}function tb(e,t,r){let n=l.V.getState().selectedView,i=null==t?void 0:t.plugins_whitelist_enforced,a=i&&r&&r[e.plugin_id]||!i;return(0,B.NE)(n)&&!tE(e)&&a}function tI({idToSearch:e,localPluginsByFileId:t,publishedPlugins:r,savedPlugins:n,recentPlugins:i}){let a=t&&t[e];if(a)return a;let o=(null==n?void 0:n.loaded)&&n.plugins[e];if(o)return o;let l=null==r?void 0:r[e];if(l){let e=ew(l);return""!==e.id?e:null}let s=i&&i[e];return s||null}function tT(e){return!!((null==e?void 0:e.includes("inspect"))||(null==e?void 0:e.includes("panel")))}function tw(e){return!!((null==e?void 0:e.includes(k.IP.DEV))||(null==e?void 0:e.includes(k.IP.INSPECT)))}function tS(e){let t=ee(),r=e&&(null==e?void 0:e.plugin)&&tE(null==e?void 0:e.plugin),n=e&&t&&er(t,e.plugin.manifest.editorType)&&("dev"!==t||ts(e.plugin));return n&&!r}function tC(){return(0,W.I)()?"plugins-menu-open-directory-vscode":c.ZP.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},179791:(e,t,r)=>{r.d(t,{BW:()=>s,RG:()=>l,X9:()=>c});var n=r(407908),i=r(54055),a=r(339531);let o=null;function l(e){o=e}function s(){return o}function c(){let e=(0,n.v9)(e=>e.installedPluginVersions.plugins),t=(0,n.v9)(e=>e.publishedPlugins),r=(0,i.rI)();o&&!(0,a.PB)({plugin:o.plugin,publishedPlugins:t,orgEntity:r,installedPluginVersions:e})&&(o=null)}},642577:(e,t,r)=>{let n;function i(){return new Promise(e=>{n=e})}function a(e){n&&(n(e),n=void 0)}r.d(t,{Y:()=>a,x:()=>i})},215958:(e,t,r)=>{r.d(t,{D:()=>o,I:()=>l});var n=r(256768),i=r(244311),a=r(436649);let o=new class{loadPluginsPublishedByUser(e){let t=e.getState().loadingState,r=i.Lk.loadingKeyForPayload();(0,a.d4)(t,r)&&e.dispatch(i.Lk())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:t,currentUserOrgId:r}=e.getState();if(!r)return;let n=i.D5.loadingKeyForPayload(r);(0,a.d4)(t,n)&&await e.dispatch(i.D5(r))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:t,currentUserOrgId:r}=e.getState();if(!r)return;let n=i.IR.loadingKeyForPayload(r);(0,a.d4)(t,n)&&e.dispatch(i.IR(r))}};class l{constructor(e){this.expireDuration=e,this.lastRefreshed={}}clear(){this.lastRefreshed={}}debounceRefresh(e,t,r){if(e in this.lastRefreshed){let t=(0,n.Z)(this.lastRefreshed[e]).add(this.expireDuration);if(t.valueOf()>Date.now())return}else if(!r){this.lastRefreshed[e]=(0,n.Z)(Date.now());return}try{t(e)}catch(e){throw e}finally{this.lastRefreshed[e]=(0,n.Z)(Date.now())}}}},470283:(e,t,r)=>{r.d(t,{Bz:()=>$,Cf:()=>H,MG:()=>W,M_:()=>j,ho:()=>D.ho,i3:()=>G,pv:()=>K});var n=r(600486),i=r(239299),a=r(269658),o=r(716250),l=r(337167),s=r(286206),c=r(117986),d=r(473515),u=r(970740),p=r(644383),m=r(299370),h=r(648183),_=r(307425),g=r(363400),f=r(158774),E=r(360530),y=r(939179),v=r(179791),b=r(646472),I=r(597694),T=r(661539),w=r(598253),S=r(410224),C=r(502116),O=r(109032),A=r(608715),N=r(939818),L=r(758846),P=r(493866),R=r(339531),k=r(610668),D=r(45016),M=r(758903),F=r(164179),x=r(662202),U=r(390253),B=r(493312);r(625822);class V extends Error{constructor(e){super(e)}}function G(e){U.Ot.resetGlobalPluginAPI=G;try{if((0,U.$8)())return;!function(e){let t=(0,C.CH)(),r=[()=>t.destroy(),()=>{delete window.figma},()=>f.Gr.triggerAction("commit")],n=()=>{let e;for(let t of r)try{t()}catch(t){e||(e=t)}if(r=[],e)throw e},i=()=>(n(),Promise.resolve());delete window.figma;let a=new O.Au(t,{...(0,O.N8)(),openFileKey:e.openFileKey,userID:e.userID,closePlugin:i,addShutdownAction:e=>{-1===r.indexOf(e)&&r.push(e)},forceDocumentAccessStateIncrementalMode:!!(0,o.BZ)().plugins_incremental_loading_api});a.createAPI(),(0,U.mF)(i)}(e)}catch(e){(0,o.rz)()&&"fullscreen"===a.V.getState().selectedView.view&&console.error(e)}}function H({pluginID:e,widgetNodeID:t}){return(0,D.ho)()&&void 0!==U.Ot.currentWidget&&U.Ot.currentWidget.pluginID===e&&U.Ot.currentWidget.widgetNodeID===t}let W="Plugin Start Initiated",K=(0,P.t)(async e=>{let t=(0,U.Vt)();U.Ot.currentPluginRunID=t;let r=new L.F;U.Ot.stats=r;let i=e.plugin;(0,n.L9)(W,{pluginID:i.plugin_id,trigger:e.triggeredFrom,runMode:e.runMode,isWidget:e.isWidget,command:e.command,fileKey:e.openFileKey,pluginRunID:t,editorType:(0,R.Fl)(),...(0,T.rV)(i)?{pluginVersionID:"",source:"development",name:"<local plugin>"}:{pluginVersionID:i.id,source:"imported",name:i.name}});let{isCancelled:d}=await r.markDuration("waitForAllPagesMs",async()=>await (0,x.U)(e));if(!d){if((0,E.I)()&&!(0,o.BZ)().ext_vscode_plugins){f.Gr.dispatch(p.R.enqueue({message:(0,u.t)("dev_handoff.plugins_coming_soon_vscode")}));return}if((0,R.hY)(e.triggeredFrom)){if(!(0,R.N7)(e.plugin))throw Error('Plugin not compatible to run in dev handoff panel. Make sure you have "dev" as an editorType and "inspect" as a capability in your manifest.json.');l.n_.set(w.YT,"LOADING"),l.n_.set(h.X,h.w.PLUGIN)}e.isWidget||e.ignoreForRunLastPlugin||(0,v.RG)(e),(0,U.Qv)(e.plugin),(0,U.eC)(e.triggeredFrom),"default"===e.runMode&&(0,R.hY)(e.triggeredFrom)&&(e.runMode="inspect"),(0,U.Bb)(e.runMode);try{if((0,T.rV)(e.plugin))try{let n=await Z(e,r,e.plugin);await Y({localPlugin:e.plugin,runPluginArgs:e,stats:r,pluginRunID:t,code:n})}catch(t){(0,k.N6)(t),z(t,e.isWidget)}else try{let i=await Z(e,r,e.plugin);await function({pluginVersion:e,runPluginArgs:t,stats:r,pluginRunID:i,code:l}){let{command:s,queryMode:c,triggeredFrom:d,openFileKey:p,deferRunEvent:m,parameterValues:h,isWidget:f,widgetAction:y,forcePluginVersionId:v}=t,T=(0,S.Pb)();if(!T){let e=t.isWidget?(0,u.t)("plugins.cannot_run_widget_logged_out"):(0,u.t)("plugins.cannot_run_plugin_logged_out");throw new V(e)}if(e={...e,id:v||e.id},U.Ot.currentPluginRunID!==i)return;let w=a.V.getState().selectedView.editorType,C=(0,g.$)(w),O={storeInRecentsKey:C,id:e.plugin_id,version:e.version,currentUserId:(0,S.Pb)()};f?a.V.dispatch(_._o(O)):a.V.dispatch(_.zD(O));let A=a.V.getState().publishedPlugins[e.plugin_id],N=(0,b.vu)(A),L={pluginID:e.plugin_id,pluginVersionID:e.id,trigger:d,source:"imported",command:s,name:e.name,fileKey:p,pluginRunID:i,queryMode:c,deferRunEvent:!!m,runWithParameters:!!h,manifest:JSON.stringify(e.manifest),productType:w,isWidget:f,isMonetized:N,paidStatus:function(e){let t=(0,b.vu)(e),r=null==e?void 0:e.community_resource_payment;return t&&r?r.status===I.Cy.TRIALING?"trial":"paid":"none"}(A),widgetAction:y??null,isReadOnly:a.V.getState().mirror.appModel.isReadOnly,editorType:(0,R.Fl)(),incrementalMode:!!(0,o.BZ)().plugins_incremental_loading_api&&"dynamic-page"===e.manifest.documentAccess,isVsCode:(0,E.I)()};(0,n.L9)("Plugin Start",L,f?{forwardToDatadog:!0}:{});let P=q({runPluginArgs:t,manifest:e.manifest,stats:r,isLocal:!1,customOverrides:{code:l,name:e.name,openFileKey:p,permissions:R.dx.forInstalledPlugin(e),pluginID:e.plugin_id,pluginRunID:i,pluginVersionID:e.id,titleIconURL:e.redirect_icon_url,userID:T,enablePrivatePluginApi:!!(e.manifest.enablePrivatePluginApi&&e.is_private)}});return $(P)}({pluginVersion:e.plugin,runPluginArgs:e,stats:r,pluginRunID:t,code:i})}catch(t){t instanceof V||(0,s.Jz)(c.k.EXTENSIBILITY,t),z(t,e.isWidget)}}finally{(0,U.Qv)(null),(0,U.eC)(null),(0,U.Bb)(null)}}});function z(e,t){let r=(e instanceof V?null==e?void 0:e.message:void 0)??(t?(0,u.t)("plugins.error_loading_environment_widget"):(0,u.t)("plugins.error_loading_environment_plugin"));(0,R.f7)(r)}async function Z(e,t,r){let n;let i=(0,T.rV)(r);try{if(f.Gr.dispatch(p.R.enqueue({message:(0,u.t)("plugins.loading_plugin",{pluginName:r.name}),icon:m.B4.SPINNER,type:"loading-plugin",delay:200,timeoutOverride:1/0})),(0,o.BZ)().plugins_parallelize_load_sandbox){let a=i?(0,S.lf)():"cppvm",[o,l]=await Promise.all([(async()=>await (i?r.testCode?r.testCode:(0,R.eu)(r.localFileId):t.markDuration("pluginCodeDownloadedMs",async()=>await y.W.getAndCache(r,(0,S.Uu)()))))(),(async()=>{await t.markDuration("loadSandboxAndRunSecurityChecksMs",async()=>{try{await (0,B.Z)(a,e.triggeredFrom)}catch(r){let t=e.isWidget?(0,u.t)("plugins.error_loading_environment_widget"):(0,u.t)("plugins.error_loading_environment_plugin");throw new V(t)}})})()]);n=o}else n=i?r.testCode?r.testCode:await (0,R.eu)(r.localFileId):await t.markDuration("pluginCodeDownloadedMs",async()=>await y.W.getAndCache(r,(0,S.Uu)()));if(!n){let t=e.isWidget?(0,u.t)("plugins.no_code_found_for_widget"):(0,u.t)("plugins.no_code_found_for_plugin");throw new V(t)}return n}finally{f.Gr.dispatch(p.R.dequeue({matchType:"loading-plugin"}))}}async function Y({localPlugin:e,runPluginArgs:t,pluginRunID:r,stats:i,code:l}){let{command:s,isWidget:c,widgetAction:d,queryMode:p,triggeredFrom:m,openFileKey:h,deferRunEvent:f,parameterValues:y}=t,v=(0,S.Pb)();if(!v){let e=c?(0,u.t)("plugins.cannot_run_widget_logged_out"):(0,u.t)("plugins.cannot_run_plugin_logged_out");throw new V(e)}let b=a.V.getState().selectedView.editorType;if(e.manifest){let t={pluginID:e.manifest.id||"",pluginVersionID:"",trigger:m,source:"development",command:s,name:"<local plugin>",fileKey:h,pluginRunID:r,queryMode:p,deferRunEvent:!!f,runWithParameters:!!y,manifest:JSON.stringify(e.manifest),productType:b,isWidget:c,widgetAction:d??null,isReadOnly:a.V.getState().mirror.appModel.isReadOnly,editorType:(0,R.Fl)(),incrementalMode:!!(0,o.BZ)().plugins_incremental_loading_api&&"dynamic-page"===e.manifest.documentAccess,isVsCode:(0,E.I)()};(0,n.L9)("Plugin Start",t,c?{forwardToDatadog:!0}:{})}let I=(0,g.$)(b),T={storeInRecentsKey:I,id:String(e.localFileId),isDevelopment:!0,version:"",currentUserId:(0,S.Pb)()};c?a.V.dispatch(_._o(T)):a.V.dispatch(_.zD(T));try{let n=e.testCode?e.manifest:await (0,R.WC)(e.localFileId,{resourceType:c?"widget":"plugin",ignoreMissingEditorType:!0,isPublishing:!1}),a=q({runPluginArgs:t,manifest:n,stats:i,isLocal:!0,customOverrides:{code:l,openFileKey:h,permissions:R.dx.forLocalPlugin(e),enablePrivatePluginApi:!!n.enablePrivatePluginApi,pluginID:n.id||"",pluginRunID:r,pluginVersionID:"",titleIconURL:"",userID:v}});await $(a)}catch(t){(0,k.N6)(t),(0,N.KC)({shouldShowVisualBell:!0});let e=(t instanceof V?null==t?void 0:t.message:void 0)??(c?(0,u.t)("plugins.error_occured_while_running_widget"):(0,u.t)("plugins.error_occured_while_running_plugin"));(0,R.f7)(e)}}let j=(0,P.t)(({newTriggeredFrom:e}={newTriggeredFrom:"runlast"})=>{let t=(0,v.BW)();t&&(0,R.Le)(t)&&(e&&(t.triggeredFrom=e),F.Q.instance.enqueue({mode:"run-forever",runPluginArgs:t}))});function $(e){if(U.Ot.currentPluginRunID!==e.pluginRunID)return Promise.resolve();let t=e.stats;t.markTime("timeToRunPluginCodeStartMs");let r=e.isWidget?"widget":"plugin";(0,R.XA)();let a=(0,D.CQ)();(0,D.Dh)(a),(0,D.UF)();let l=new Promise(async(r,n)=>{if(await (0,U.Qz)({overriddenBy:e.triggeredFrom}),(0,D.Cq)()!==a){r();return}let l=()=>(r(),Promise.resolve());(0,U.I1)(l);try{if(e.isWidget){let{widgetNodeID:t}=JSON.parse(e.command);U.Ot.currentWidget={widgetNodeID:t,pluginID:e.pluginID}}else U.Ot.currentWidget=void 0}catch{U.Ot.currentWidget=void 0}try{if((0,o.BZ)().plugins_parallelize_load_sandbox||await t.markDuration("loadSandboxAndRunSecurityChecksMs",async()=>{await (0,B.Z)(e.vmType,e.triggeredFrom)}),i.YO&&(0,R._p)(e.permissions.permissions)&&(U.Ot.setMediaEnabled=!0,e.permissions.trustedPluginOrigin&&i.YO&&(U.Ot.allowedPluginOrigin=e.permissions.trustedPluginOrigin,await i.YO.addAllowedPluginOrigin(e.permissions.trustedPluginOrigin))),await (0,d.X_)(0),(0,D.Cq)()!==a){r();return}let{runResult:n,closePlugin:s}=await (0,M.q)({...e,pluginCounter:a,html:null});if((0,D.Cq)()===a){(0,U.I1)(s,{ignorePreviousCloseFunc:l}),l=s;let e=await n;e&&f.Gr.dispatch(p.R.enqueue({type:"plugins-supplied-message",message:e}))}r()}catch(e){n(e)}finally{a===(0,D.Cq)()&&((0,U.I1)(null,{ignorePreviousCloseFunc:l}),(0,U.$o)())}}).catch(t=>{if(e.noConsoleError||(0,k.N6)(t),e.showLaunchErrors){let r=(t instanceof V?null==t?void 0:t.message:void 0)??(e.isWidget?(0,u.t)("plugins.error_occured_while_running_widget"):(0,u.t)("plugins.error_occured_while_running_plugin"));(0,R.f7)(r)}else throw t}),s=()=>{let i={pluginID:e.pluginID,pluginVersionID:e.pluginVersionID,pluginRunID:e.pluginRunID,apiUsage:t.callCountsToJSON(),perfMetrics:t.perfMetricsToJSON(),ranWithParameters:t.ranWithParameters(),parameterCount:t.parameterCount(),isWidget:e.isWidget,trigger:e.triggeredFrom,stackInvariants:t.stackInvariantFieldsToJSON(),incrementalMode:e.incrementalSafeApi,numPagesLoaded:t.getNumPagesLoaded(),...t.getTimingMarks()},a={pluginDataHistogram:t.pluginDataHistogramToJSON(),pluginDataTotalSetSize:t.pluginDataTotalSetSize(),sharedPluginDataTotalSetSize:t.sharedPluginDataTotalSetSize(),pluginDataMaximumKeyCountExceeded:t.pluginDataMaximumKeyCountExceeded()};(0,n.L9)("Plugin End",{...i,...a},{forwardToDatadog:!0}),e.pluginID&&t.hasResizedNodeWithMissingFont()&&((0,n.L9)("Plugin resized node with missing font",{pluginID:e.pluginID}),console.warn(`This ${r} resized a node with missing fonts. Text layout for node will not be applied.`))};return l.then(s,s),l}function q({manifest:e,isLocal:t,stats:r,runPluginArgs:n,customOverrides:i}){return{name:e.name,allowedDomains:function(e,t){let{networkAccess:r}=e;return r?t&&r.devAllowedDomains?r.allowedDomains.concat(r.devAllowedDomains):r.allowedDomains:A.mh}(e,t),apiVersion:e.api,capabilities:e.capabilities??[],stats:r,checkSyntax:t,isLocal:t,disableSilenceConsole:t,enableProposedApi:t&&!!e.enableProposedApi,showLaunchErrors:!t,showRuntimeErrors:t,vmType:t?(0,S.lf)():"cppvm",...i,command:n.command,queryMode:n.queryMode,triggeredFrom:n.triggeredFrom,openFileKey:n.openFileKey,deferRunEvent:n.deferRunEvent,parameterValues:n.parameterValues,isWidget:n.isWidget,editorType:n.plugin.manifest.editorType??[],incrementalSafeApi:!!(0,o.BZ)().plugins_incremental_loading_api&&"dynamic-page"===e.documentAccess}}},356268:(e,t,r)=>{r.d(t,{CV:()=>W,Em:()=>x,L_:()=>G,QM:()=>p,Z:()=>v,b2:()=>k,bH:()=>V,fC:()=>H,fJ:()=>F,nG:()=>U,wG:()=>B});var n=r(716250),i=r(361763),a=r(661539);let o="1039957324840667051",l="1042072203439057981",s="1017757619521383731",c="1037692671113105119",d="1030479012894344777",u="1100947233945489758",p="1274481464484630971",m="1220512233196109878",h="1220802563996996107",_="1221187540287746170",g="1029476790898052743",f="1270487405418367065",E="1028089855820989707",y="1100944790471783866",v="1268676638869538880",b="1217135789855512677",I="1217657098906612843",T={[o]:a.Sq,[l]:a.Sq,[s]:a.Sq,[c]:a.Sq,"1096460041736534298":["analytics"],[m]:["analytics","openexternal"],[h]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[d]:a.Sq,[u]:a.Sq,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[p]:["cortex","analytics"],[_]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"]},w={[o]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[s]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://www.figma.com",[u]:"https://www.figma.com"},S={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[b]:["analytics","openexternal"],[I]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[g]:a.Sq,[f]:a.Sq,[E]:a.Sq,[y]:a.Sq,"1256428543638612749":["cortex"],[v]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":a.Sq,"1105998344712102365":a.Sq,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},C={[b]:"https://static.figma.com/uploads/83e16c32f7fbe88022ff9fcff130cdd6c6423861"},O={[m]:"https://static.figma.com/uploads/83e16c32f7fbe88022ff9fcff130cdd6c6423861"},A={[g]:"https://staging.figma.com",[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com"},N=new Set([b,I]),L=new Set([m,h,_,"1220851659530313303"]),P={"1311749001261674187":"1311747530036311881"},R={"1312547578554957136":"1311777988952403297"};function k(e){return"prod"===(0,n.Gm)().cluster_name?e===h:"staging"===(0,n.Gm)().cluster_name&&e===I}let D={},M={};function F(e){return"prod"===(0,n.Gm)().cluster_name?e in w||e in T:"staging"===(0,n.Gm)().cluster_name?e in A||e in S:(0,i.rm)()||(0,i.KF)()?e in D:!!(0,n.D0)()}function x(e){return"prod"===(0,n.Gm)().cluster_name?e in w?w[e]:void 0:"staging"===(0,n.Gm)().cluster_name?e in A?A[e]:void 0:(0,i.rm)()||(0,i.KF)()?e in D?D[e]:void 0:(0,n.D0)()?"*":void 0}function U(e){if(!F(e))throw Error("Untrusted pluginID");return"prod"===(0,n.Gm)().cluster_name?new Set(T[e]??[]):"staging"===(0,n.Gm)().cluster_name?new Set(S[e]??[]):(0,i.rm)()||(0,i.KF)()?new Set(M[e]??[]):(0,n.D0)()?new Set(a.Tq):new Set}function B(){return"prod"===(0,n.Gm)().cluster_name?L:"staging"===(0,n.Gm)().cluster_name?N:((0,i.rm)()||(0,i.KF)()||(0,n.D0)(),new Set)}function V(e,t){let r=e===("staging"===(0,n.Gm)().cluster_name?b:m);return!(t&&r)}function G(e){return"prod"===(0,n.Gm)().cluster_name?O[e]:"staging"===(0,n.Gm)().cluster_name?C[e]:void 0}function H(e){return"prod"===(0,n.Gm)().cluster_name?"1286792998372727741"===e:"staging"===(0,n.Gm)().cluster_name?"1286790870036328880"===e:!!((0,i.rm)()||(0,i.KF)())||!!(0,n.D0)()}function W(e){return"prod"===(0,n.Gm)().cluster_name?R[e]:"staging"===(0,n.Gm)().cluster_name?P[e]:void 0}},881835:(e,t,r)=>{r.d(t,{St:()=>y,e4:()=>_,fu:()=>f,h6:()=>g,ir:()=>m,pl:()=>n,wb:()=>E});var n,i=r(5453),a=r(256768),o=r(716250),l=r(11802),s=r(761767),c=r(898080),d=r(733609),u=r(676973);let p="pro_trials_v3",m=14,h=s.bX.PRO_TRIAL,_="exp_pro_trials_v3_start_trial",g="seen_pro_trials_v3_entry_modal",f="seen_pro_trials_v3_team_welcome_modal",E="seen_pro_trials_v3_expiry_modal",y="dismissed_pro_trials_v3_unlocked_expiry_banner";(e=>{e.uxEnabled=()=>!!(0,o.BZ)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.BZ)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.BZ)().pro_trials_v3_expiry,e.isUserInVariant=l.AC,e.getTrackingProperties=e=>e?{productArea:p,text:e}:{productArea:p},e.getProTrial=(r,n,i)=>{if(!r)return null;let a=(0,e.getProTrialStatus)(r);if(!a)return null;let o=new Date(r.grace_period_end),l=t(o),s=r.id;return{status:a,isOwner:n,userCanEditTeam:(0,d.canEditTeam)(s,i),trialExpiresAt:o,daysLeft:l,teamId:s}},e.getUpgradableProTrials=(t,r)=>{let n=Object.values(r.teams),o=(0,i.We)(n.map(n=>{var i;return e.getProTrial(n,!!(null==(i=t[n.id])?void 0:i[_]),r)})),l=o.filter(e=>e.status===u.Y.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,t)=>(0,a.Z)(e.trialExpiresAt).diff(t.trialExpiresAt));let s=o.filter(e=>e.status===u.Y.IN_TRIAL&&e.userCanEditTeam);return s.sort((e,t)=>(0,a.Z)(e.trialExpiresAt).diff(t.trialExpiresAt)),{ongoingTrials:s,expiredTrials:l}},e.getEligibleProTrialTeams=(t,r,n,i)=>{let a=(0,c.eB)(n),o=Object.values(n.teams).filter(o=>e.canStartProTrial(t,r,a,o,n,i));return o.sort((e,t)=>t.editors-e.editors),o},e.canStartProTrial=(t,r,n,i,o,l)=>!(!t||!e.entryEnabled()||(0,c.e3)(i)||i.stripe_customer_id||!r||n||!(0,d.canEditTeam)(i.id,o)||30>(0,a.Z)().utc().diff((0,a.Z)(t.created_at).utc(),"days",!0)||(0,a.Z)().utc().diff((0,a.Z)(t.created_at).utc(),"days",!0)>90||e.getProTrialStatus(i)||function(e){let t=Object.keys(e);return t.some(t=>!!e[t][_])}(l))&&!!e.isUserInVariant(t.id);let t=e=>Math.max(Math.ceil((0,a.Z)(e).diff((0,a.Z)(),"days",!0)),0);e.getProTrialStatus=t=>(0,e.uxEnabled)()&&t.grace_period_end&&t.grace_period_type&&h===t.grace_period_type?new Date(t.grace_period_end)<new Date?u.Y.TRIAL_EXPIRED:u.Y.IN_TRIAL:null,e.isEligibleTrialEntryView=e=>"folder"===e.view||"team"===e.view||"recentFiles"===e.view,e.canSeeProTrialUx=e=>!!e&&e.status===u.Y.IN_TRIAL&&e.userCanEditTeam,e.canSeeProTrialUxInFile=(t,r)=>(0,e.canSeeProTrialUx)(t)&&(null==r?void 0:r.editorType)&&(null==r?void 0:r.canEdit),e.canSeeProTrialExpiryUx=t=>{if(!(0,e.expiryEnabled)()||!t||t.status!==u.Y.TRIAL_EXPIRED)return!1;let r=(0,a.Z)().utc().diff((0,a.Z)(t.trialExpiresAt).utc(),"days",!0);return!(r<0)&&r<7},e.canSeeExpiredProTrialBanner=(t,r,n)=>{var i;if(!r)return!1;let a=!!(null==(i=t[r.id])?void 0:i[_]),o=e.getProTrial(r,a,n);return e.canSeeProTrialExpiryUx(o)}})(n||(n={}))},558443:(e,t,r)=>{r.d(t,{EU:()=>a,Oc:()=>s,qk:()=>c});var n=r(122342),i=r(961215);function a(e){let t=[e];for(;0!==t.length;){let e=t.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;t.push(...e.childrenNodes)}}return!1}let o="last-used-left-panel-tab",l="ASSETS_TAB";function s(e){n.D5&&n.D5.setItem(o,e===i.caZ.ASSETS?l:"LAYERS_TAB")}function c(){if(n.D5){let e=n.D5.getItem(o);if(e)return e===l?i.caZ.ASSETS:i.caZ.LAYERS}return null}},537765:(e,t,r)=>{r.d(t,{$A:()=>d,Jv:()=>E,LC:()=>f,Wi:()=>y,Yn:()=>u,if:()=>m,j0:()=>p,jk:()=>c,oe:()=>h,px:()=>_,wK:()=>g});var n=r(46347),i=r(122342),a=r(761767),o=r(646472),l=r(938110),s=r(339531);let c="recent-widgets-figjam",d="recent-plugins-figjam",u="recent-templates-figjam",p="recent-widgets-figma-design",m="recent-plugins-figma-design",h="recent-face-stamps-figjam",_="recent-whiteboard-tools-figjam";function g(e,t){if(e===l.xQ.FigJam)switch(t){case o.Xh.PLUGIN:return d;case o.Xh.WIDGET:return c;case o.Xh.HUB_FILE:return u;case l.ER.FACE_STAMP:return h;case l.ER.WHITEBOARD_TOOL:return _;default:return null}if(e===l.xQ.Design)switch(t){case o.Xh.PLUGIN:return m;case o.Xh.WIDGET:return p;default:return null}return e===l.xQ.Handoff&&t===o.Xh.PLUGIN?"recent-plugins-handoff":null}function f(e,t){if(!i.D5)return[];let r=[],n=g(e,t),a=n&&i.D5.getItem(n);try{r=a&&JSON.parse(a)||[]}catch(e){}return r.map(e=>({...e,type:e.type||l._g.CommunityResource}))}function E(e){let t=(0,s.hb)(e),r=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:a.fH.CREATOR}));return t.community_publishers=r,t}function y(e){switch(e.type){case l._g.CommunityResource:return e.id;case l._g.TeamTemplate:return e.key;default:(0,n.vE)(e)}}},584826:(e,t,r)=>{r.d(t,{$Y:()=>I,Ft:()=>f,JG:()=>v,kd:()=>b,u4:()=>y});var n=r(600486),i=r(5453),a=r(954109),o=r(667981),l=r(961215),s=r(112088),c=r(699072),d=r(166885),u=r(938110),p=r(605508),m=r(513080),h=r(162512),_=r(269075),g=r(994004);function f(e,t,r,n,a,o,s,d,u=l.Xft.NONE,p){let g=_.UJ.user("swap-to-related-symbol",(e,n)=>{(null==n?void 0:n.componentOrStateGroup)&&v(n.componentOrStateGroup,t,r,s,"Related Symbol Dropdown Menu",!1)}),f=[];return u===l.Xft.NONE?f=function(e,t,r,n,a){let{selectedItem:o,relatedItems:l}=y(e,t,r,n);if(!o||l.length<2)return[];let s=l.map(e=>{var t;return{args:{componentOrStateGroup:e},callback:a,displayText:e.name,separator:!1,recordingKey:t?`${t}.${e.name}`:e.name,isChecked:e.node_id===o.node_id,displayText:(0,c.rP)(e.name)}});return(0,i.po)(s,e=>{var t;return`${e.displayText}-${(null==(t=e.args.componentOrStateGroup)?void 0:t.node_id)||""}`}),s}(e,n,a,o,g):u===l.Xft.STATE_INSTANCE&&(f=function(e,t,r,n,i){let a=(0,h.mh)(e,t);if(!a||a.mode!==l.Xft.STATE_INSTANCE)return[];let{allStates:o,stateGroup:s,stateGroupModel:c,selectedStates:d,selectedStatesPropertyValues:u}=a,p=(0,m.m)(Object.keys(r),n),g=(e,t)=>{if((null==t?void 0:t.property)&&(null==t?void 0:t.value)){let e={},r=[{property:t.property,value:t.value}];for(let n of d){let{propertyValues:i}=n.stateInfo,a={...i,[t.property]:t.value},l=(0,h.Au)(a,r,o);if(null!==l){let t=l.symbol.node_id;e[t]=(e[t]||[]).concat(p[n.symbol.node_id])}}0!==Object.keys(e).length&&((0,h._R)("Swapping A Variant",s.nodeId,{source:"context_menu"}),_.y2.user("swap-related-symbol",()=>I(e)))}},f=c.propertySortOrder||[],E=c.propertyValues;if(!f||!E)return[];let y=f.map(e=>{let t=u[e],r=E[e];return{displayText:e,children:r.map(r=>({args:{property:e,value:r},callback:g,separator:!1,recordingKey:r,isChecked:r===t,displayText:r})),recordingKey:i?`${i}.${e}`:e}});return y}(p,r,s,o,"swapVariants")),f}let E=e=>{var t,r;return(null==(r=null==(t=null==e?void 0:e.containing_frame)?void 0:t.containingStateGroup)?void 0:r.nodeId)||null},y=(e,t,r,n)=>{var i;if(!e)return{selectedItem:null,relatedItems:[]};let a=null,l={},d=(0,g.lJ)(e,n);if(d){let{publishID:e,fileKey:n}=d,i=t[n];if(i){let t=(0,s.ti)(r.published.components,i),n=(0,s.ti)(r.published.stateGroups,i);l={...(0,o.jL)(t),...n};let c=t[e]??n[e],d=E(c);a=d?l[d]:c}}else{l=(0,o.KW)(r),a=r.local.components[e]??r.local.stateGroups[e];let t=E(a);t&&(a=l[t])}if(!a)return{selectedItem:null,relatedItems:[]};if(!(null==(i=a.containing_frame)?void 0:i.nodeId)&&1===(0,c.$N)(a.name).length)return{selectedItem:a,relatedItems:[]};let u=(0,c.ce)(a.name),m=Object.values(l).filter(e=>(0,p.jM)(e.containing_frame,null==a?void 0:a.containing_frame)&&(0,c.ce)(e.name)===u);return{selectedItem:a,relatedItems:m}};function v(e,t,r,n,i,a){b(e,t,r,Object.keys(n),i,a)}function b(e,t,r,i,o,s){if(!e)return;let c=e.file_key===r;if(c){if(e.type===d.h3.COMPONENT){let t=e.node_id;l.iTB.replaceSymbolBackingInstances({[t]:i},s)}else{let t=l.iTB.getSimilarStates(i,e.node_id,"");l.iTB.replaceSymbolBackingInstances(t,s)}(0,n.L9)("Instance Swapped To Local Component",{source:o})}else t(a.jM({item:e,instanceGUIDs:i,sourceForTracking:o,storeInRecentsKey:u.xQ.Design,usedSwapInstanceKeyboardShortcut:s}))}function I(e){l.iTB.replaceSymbolBackingInstances(e,!1)}},722330:(e,t,r)=>{r.d(t,{A:()=>s,K:()=>c});var n=r(993394),i=r(31642),a=r(736653),o=r(78426),l=r(755560);async function s(e,t="",r="",s,c=!1){c&&await (0,l.G)();let{data:{meta:d}}=await i.ZP.post(`/api/multiplayer/${e}/create_savepoint`);return s(o.R3({history:{versions:[d]},direction:n.V$})),s(o.rJ({status:!1})),s(a.a({fileKey:e,savepointID:d.id,label:t,description:r})),d}async function c(e,t="",r="",n,i=!1){return null!=e?await s(e,t,r,n,i):null}},671755:(e,t,r)=>{r.d(t,{Mr:()=>c,OU:()=>o,Ux:()=>l,vl:()=>s});var n=r(652983);r(510570);var i=r(424479),a=r(651179);function o(e,...t){let r=(0,n.useRef)(new a.F(i.TSSceneGraph.instance,e)),l=(0,n.useCallback)(()=>r.current.readValue(...t),[r,...t]);return(0,n.useSyncExternalStore)(e=>{let t=r.current.subscribe(e);return t},l)}function l(e,...t){let r=(0,n.useRef)(new a.E(i.TSSceneGraph.instance,e)),o=(0,n.useCallback)(()=>r.current.readValue(...t),[r,...t]);return(0,n.useSyncExternalStore)(e=>{let t=r.current.subscribe(e);return t},o)}let s=e=>o((e,t)=>{if(!t)return[];let r=t.map(t=>e.get(t));return r.filter(e=>null!==e)},e);function c(e){return o((e,t)=>t?e.get(t):null,e)}},413810:(e,t,r)=>{r.d(t,{GW:()=>A,Ij:()=>M,Pm:()=>y,UE:()=>U,Yj:()=>R,Z$:()=>x,_Z:()=>D,aH:()=>P,cP:()=>N,eP:()=>L,hM:()=>v,lV:()=>F,np:()=>b,x_:()=>k});var n=r(812819),i=r(716250),a=r(600470),o=r(512354),l=r(278287),s=r(160393),c=r(785258),d=r(668849),u=r(381289),p=r(19394),m=r(301828),h=r(117692),_=r(873546),g=r(371253),f=r(46347),E=r(242030);let y=new o.K([new _.Sw,new h.V,new d.VZ,new m.Q4,new _.nR,new s.Cg,new _.r0,new _.Gl,new p.d,new u.i,new c.b,new g.s]),v=(e,t)=>new URL(b(e,t),document.baseURI).href;function b(e,t){return y.selectedViewToPath(t,e)}let I=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(_.Xm),T=RegExp(`^/files/([0-9]+)/(?:${I.join("|")})(.*)$`),w=RegExp("^/files/([0-9]+)/?$"),S=RegExp(`^/files/team/([0-9]+)/(?:${I.join("|")})(.*)$`),C=(e,t,r)=>{let n=e.split("/");if(!n[1]||"files"!==n[1])return n;let i=e.match(T);if(i)return n.splice(2,1),n;let a=e.match(S);return a?n.splice(2,2):(n.length>=3&&t&&n[2]===t&&n.splice(2,1),n.length>=3&&r&&n[3]===r&&n.splice(2,2)),n},O=(e,t)=>{let r=e.split("/");if(!r[1]||"files"!==r[1])return r;let n=e.match(T);return n?r.splice(2,1):r.length>=3&&t&&r[2]===t&&r.splice(2,1),r};function A(e){let t=e.match(T);if(t)return t[1];let r=e.match(w);return r?r[1]:null}function N(e){let t=O(e,(0,E.Vt)());return""===t[t.length-1]&&t.splice(t.length-1,1),t}function L(e,t,r,n){let o=[],l=(0,i.BZ)().dev_mode_suggested_upgrades&&(0,i.BZ)().admin_requests_dashboard&&r&&!!(0,a.Qc)(r).devModeSuggestions;return(0,i.BZ)().ps_benchmark?o=C(t,e.currentUserOrgId,e.currentTeamId):l?(o=C(t,e.currentUserOrgId,e.currentTeamId),t.match(S)&&(o[3]=O(t,e.currentUserOrgId)[3])):o=O(t,e.currentUserOrgId),""===o[o.length-1]&&o.splice(o.length-1,1),y.pathToSelectedView(e,o,r,n)||{view:"recentFiles"}}function P(e,t,r,n,i){let a=t===n&&r===i;if(a)return e;let o=t===l.k.ORG?r:`team/${r}`,s=n===l.k.ORG?i:`team/${i}`;return e.replace(o,s)}function R(e,t){return y.selectedViewName(t,e)}let k=e=>{let t=e.modalShown;for(;t;){if("ACCOUNT_SETTINGS_MODAL"===t.type)return!0;t=t.prevModal}return!1};function D(e){let t=e.view;switch(t){case"recentFiles":case"deletedFiles":case"folder":case"team":case"allProjects":case"orgAdminSettings":case"licenseGroup":case"workspace":case"search":case"fullscreen":case"org":case"user":case"resourceUnavailable":case"feed":case"desktopNewTab":case"modalInIFrame":case"teamFeed":case"sharedWithYou":case"recentsAndSharing":case"draftsToMove":return!0;case"teamCreation":case"teamUpgrade":case"teamRestore":case"addAnnualPlan":case"addCollaborators":case"promoReview":case"eduReview":case"orgSelfServe":case"communityHub":case"prototype":case"figmascope":case"mobileViewer":case"teamAdminConsole":case"figjamTry":case"presenter":return!1;default:(0,f.vE)(t)}}let M=e=>"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&"whiteboard"===e.editorType&&new Date<e.workshopModeInfo.until||!1,F=e=>!!("fullscreen"===e.view&&e.tryPluginId&&e.tryPluginName&&e.tryPluginVersionId);function x(e){return"fullscreen"===e.view&&e.nodeId||null}function U(e){var t;switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return(null==(t=e.file)?void 0:t.key)||null;case"prototype":return null==e.file&&n.n_({data:{selectedView:e}}),e.file.key;default:return null}}},460174:(e,t,r)=>{r.d(t,{N:()=>m,P:()=>p});var n=r(391320),i=r(337167),a=r(701635),o=r(280251),l=r(440392),s=r(496417),c=r(961215),d=r(112088),u=r(772769);let p=(0,i.cn)({});class m{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,t,r,n,i,a){this.dispatch(o.CC({color:e,width:t,height:r,rgba:n,grid:i,styleID:a}))}hideEyedropper(){this.dispatch(o.CC(null))}getColorFromNativeEyeDropper(){return window.EyeDropper?new EyeDropper().open().then(({sRGBHex:e})=>e):Promise.reject()}updateSelectionImages(e){let t=i.n_.get(p),r=Object.keys(e).length!==Object.keys(t).length;if(!r){for(let n in t)if(!e[n]){r=!0;break}}r&&i.n_.set(p,e)}updateSelectionPaintsWithFillEncodedPaints(e,t,r,i,a,o){let s=(0,u.RV)(e,t,r,i,a),c=this.store.getState().mirror.selectionPaints;(!(0,n.qt)(c.paints,s)||c.emptyDueToLimitExceeded||o)&&(this.store.dispatch(l.cQ(s)),o&&this.store.dispatch(l.I(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,t){var r=[];for(let t of e){let e=(0,u.aF)(t);e?r.push(e):console.error(`Failed to decode: ${t}`)}r=r.map((e,r)=>(e.variableScopes=new Set(t?t[r]:[]),e));let i=this.store.getState().mirror.selectionPaints;(!(0,n.qt)(i.paintsDirectlyOnSingleNode,r)||i.emptyDueToLimitExceeded)&&this.store.dispatch(l.US(r))}updatePaintStyles(e,t,r){let i=this.store.getState().library,a=this.store.getState().mirror.sceneGraph,o=t.map(e=>{let t=(0,d.PU)(e.key,e.guids,i);return t?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,d.Rs)(t,a),variableScopes:new Set(e.variableScopes)}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes)}});o.sort((e,t)=>e.count>t.count?-1:e.count===t.count&&e.styleName<t.styleName?-1:1),(!(0,n.qt)(e,o)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(r(o))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,l.$R)}updateSelectionTextAndEffectStyles(e){a.Pr.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,l.oS)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(l.gI())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){a.Pr.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let t=this.store.getState().currentSelectionPaintInPicker;if(null==t.originalPaint)return!1;let r=(0,u.aF)(e);return null==r?(console.error(`Failed to apply paint: ${e}`),!1):(c.i0b.updatePaint((0,u.Qv)(t.originalPaint),e,!0),this.store.dispatch(l.hf({...t,updatedPaintFromDropper:r.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,u.Qv)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;return e.isShown&&e.resolvedType===c.QC$.COLOR&&"variable-picker-alias"===e.type?{varId:e.variableID,modeId:e.modeID}:{}}isPrototypingModalOpen(){var e;return(null==(e=this.store.getState().pickerShown)?void 0:e.id)===s.d8}}},108242:(e,t,r)=>{r.d(t,{HB:()=>_,kM:()=>o,vq:()=>l});var n=r(981114),i=r(867325),a=r(783237);let o=e=>e.selectedView,l=(0,n.P1)(o,e=>"workspace"===e.view&&e.subView===i.ep.DIRECTORY?e.workspaceId:void 0),s=(0,n.P1)(o,e=>"team"===e.view?e.teamId:void 0),c=(0,n.P1)(o,e=>"folder"===e.view?e.folderId:void 0),d=(0,n.P1)(o,e=>"org"===e.view?e.orgId:void 0),u=(0,n.P1)(o,e=>e.currentTeamId,(e,t)=>"allProjects"===e.view?t:void 0),p=(0,n.P1)(s,u,e=>e.teams,(e,t,r)=>e&&r[e]||t&&r[t]),m=(0,n.P1)(c,e=>e.folders,(e,t)=>e&&t[e]);(0,n.P1)(d,e=>e.orgById,(e,t)=>e&&t[e]);let h=(0,n.P1)(m,a.k,(e,t)=>e&&e.id!==t?e:void 0),_=(0,n.P1)(p,h,(e,t)=>e||t)},919726:(e,t,r)=>{r.d(t,{Bu:()=>c,Ig:()=>s,Kh:()=>a,dM:()=>l,tW:()=>o});var n=r(981114),i=r(451573);let a=(0,i.cg)(e=>e.fileByKey),o=e=>e.fileByKey,l=(0,n.P1)([o],e=>{let t={};for(let r of Object.keys(e)){let n=e[r];n&&(t[r]=n.name)}return t});function s(e){return e.fileVersion}function c(e){let t=e.mirror.appModel.currentPage;return e.mirror.appModel.pagesList.length>0&&!!e.mirror.appModel.pagesList[0]&&e.mirror.appModel.pagesList[0].nodeId===t}},966041:(e,t,r)=>{r.d(t,{$I:()=>e0,AV:()=>x,BR:()=>M,Iu:()=>eJ,J8:()=>e1,Lv:()=>en,Pg:()=>Y,QQ:()=>ex,RD:()=>W,T7:()=>V,Ts:()=>X,VL:()=>ee,Wi:()=>e_,Xv:()=>N,Yr:()=>ei,bo:()=>ev,cm:()=>ek,dz:()=>L,eo:()=>eR,fJ:()=>e2,jg:()=>eU,ki:()=>eb,kk:()=>H,pJ:()=>Z,pW:()=>A,ql:()=>eQ,ri:()=>eX,vs:()=>F,wF:()=>eD,wq:()=>B});var n=r(239907),i=r.n(n),a=r(864038),o=r.n(a),l=r(852930),s=r.n(l),c=r(950663),d=r.n(c),u=r(757383),p=r.n(u),m=r(981114),h=r(5453),_=r(716250),g=r(76085),f=r(933858),E=r(200273),y=r(880381),v=r(166885),b=r(605508),I=r(999177),T=r(961215),w=r(112088),S=r(898080),C=r(900710),O=r(411268);let A=e=>e.library,N=e=>e.library.libraryRemapping,L=e=>e.library.subscriptions.byTeam,P=(0,m.P1)([E.Oj,y.H6],(e,t)=>e&&t[e]||{}),R=(0,m.P1)([E.Oj,y.QQ],(e,t)=>e&&t[e]||{}),k=e=>e.library.openFilePublished__LIVEGRAPH.styles,D=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,M=(0,m.P1)([P,k,D],(e,t,r)=>!(0,g.xb)(t)||!(0,g.xb)(e)||!(0,g.xb)(r)),F=(0,m.P1)([e=>e.library.local.styles,k],(e,t)=>{if(!(0,_.BZ)().ds_remove_redux_library_status)return e;let r={};for(let n of Object.values(e)){let e=eo(n,t[n.node_id],ed);r[n.node_id]={...n,status:e}}return r}),x=(0,m.P1)([e=>e.library.local.components,P,U,R],(e,t,r,n)=>{if(!(0,_.BZ)().ds_remove_redux_library_status)return e;let i={},a=(e,t)=>{if((null==t?void 0:t.content_hash)!==e.content_hash||!(0,b.u2)(t.name,null==e?void 0:e.name)||!(0,b.u2)(t.description,e.description)||(0,b.vD)(t.containing_frame,null==e?void 0:e.containing_frame))return!0;let i=(0,w.QH)(e),a=i&&r[i]||null,o=(0,w.QH)(t),l=o&&n[o]||null;return a?!l||eu(a,l):null!=l};for(let r of Object.values(e)){let e=eo(r,t[r.node_id],(0,_.BZ)().ds_snowy_moon_fix?a:es);i[r.node_id]={...r,status:e}}return i});function U(e){return e.library.local.stateGroups}let B=(0,m.P1)([U,R],(e,t)=>{if(!(0,_.BZ)().ds_remove_redux_library_status)return e;let r={};for(let n of Object.values(e)){let e=eo(n,t[n.node_id],eu);r[n.node_id]={...n,status:e}}return r}),V=(0,f.ue)([e=>{let t={};return Object.entries(e.library.localVariablesById).forEach(([e,r])=>{r.isSoftDeleted||(t[e]=r)}),t},e=>e.library.openFilePublished__LIVEGRAPH.variables,E.dh],(e,t,r)=>{let n={};for(let[i,a]of Object.entries(t))e.hasOwnProperty(i)||(n[i]={...a,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},status:v.mk.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:(null==r?void 0:r.key)??"",hasOnlyBeenReordered:!1});for(let i of Object.values(e)){let e=t[i.node_id],a=eo(i,e,ep);n[i.node_id]={...i,status:a,file_key:(null==r?void 0:r.key)??"",key:null==e?void 0:e.key,hasOnlyBeenReordered:i&&e&&i.version===e.version&&i.sortPosition!==e.sortPosition}}return n}),G=(0,m.P1)([V],e=>i()(Object.values(e),e=>e.variableSetId)),H=(0,f.ue)([e=>{let t={};return Object.entries(e.library.localVariableSetsById).forEach(([e,r])=>{r.isSoftDeleted||(t[e]=r)}),t},D,G,E.dh],(e,t,r,n)=>{let i={};for(let[r,a]of Object.entries(t))e.hasOwnProperty(r)||(i[r]={...a,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:a.key,status:v.mk.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:(null==n?void 0:n.key)??"",variableSetError:T.J9h.NONE});for(let a of Object.values(e)){let e=t[a.node_id],o=el(a,e,r[a.node_id]??[]);i[a.node_id]={...a,status:o,file_key:(null==n?void 0:n.key)??"",key:null==e?void 0:e.key}}return i}),W=(0,m.P1)([x],e=>{let t={};for(let r of Object.values(e)){let e=(0,w.QH)(r);null!=e&&(t[e]=t[e]??[],t[e].push(r))}return t}),K=(0,m.P1)([x],e=>p()(e,e=>!(0,w.LW)(e)));function z(e,t){return!!t&&!(t.version===e.version&&(0,b.u2)(t.name,null==e?void 0:e.name)&&(0,b.u2)(t.description,e.description))}(0,f.ue)([F],e=>Object.values(e).map(e=>e.key)),(0,f.ue)([F],e=>o()(Object.values(e),"key"));let Z=(0,m.P1)([e=>e.library.local.modules,e=>e.library.openFilePublished__LIVEGRAPH.modules],(e,t)=>{if(!(0,_.BZ)().dse_editor_templates_v1)return{};let r={};for(let n of Object.values(e)){let e=eo(n,t[n.node_id],z);r[n.node_id]={...n,status:e}}return r}),Y=(0,m.P1)([K,B],(e,t)=>({...e,...t}));(0,m.P1)([Y],e=>Object.values(e).filter(e=>(0,w.s9)(e.status)));let j=(0,m.P1)([Y],e=>s()(e,e=>(0,w.IM)(e))),$=(0,m.P1)([Y],e=>Object.values(e).some(e=>(0,w.s9)(e.status))),q=(0,m.P1)([Z],e=>Object.values(e).some(e=>(0,w.s9)(e.status))),X=(0,m.P1)([$,q],(e,t)=>e||t),J=(0,m.P1)([Y,C.LI],(e,t)=>Object.keys(t).reduce((t,r)=>(e[r]&&(t[r]=e[r]),t),Object.create(null))),Q=(0,m.P1)([Z,C.LI],(e,t)=>Object.keys(t).reduce((t,r)=>(e[r]&&(t[r]=e[r]),t),Object.create(null))),ee=(0,m.P1)([F,Y],(e,t)=>Object.keys(e).length>0||Object.keys(t).length>0),et=(e,t)=>null!=e.status&&(!!(0,w.Or)(e.status)||!!(0,w.LI)(e.status)&&(t?t.has(e.node_id):!!e.old_key)),er=(e,t)=>et(e,t)&&(0,w.s9)(e.status),en=(0,m.P1)([x,B,F,(e,t)=>t],ea),ei=(0,m.P1)([x,B,F],(e,t,r)=>ea(e,t,r,void 0));function ea(e,t,r,n){let i={...e,...t,...r},a=new Set(n?Object.keys(n).filter(e=>"FORCED_COPY"!==n[e].publishType):Object.values(i).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(a).map(t=>e[t]&&(0,w.QH)(e[t])).filter(e=>!!e).forEach(e=>{a.add(e)}),a}let eo=(e,t,r)=>{let n=t&&null==t.unpublished_at,i="isSoftDeleted"in e&&e.isSoftDeleted,a=!!e.isPublishable&&!i;return a&&(0,_.BZ)().cmty_lib_admin_publish?v.mk.NEW:n&&!a?v.mk.DELETED:!n&&a?v.mk.NEW:n||a?r(e,t)?v.mk.CHANGED:v.mk.CURRENT:v.mk.NOT_STAGED},el=(e,t,r)=>{let n=eo(e,t,em);if(n!==v.mk.CURRENT)return n;for(let e of r)if(e.status!==v.mk.CURRENT&&e.status!==v.mk.NOT_STAGED)return v.mk.CHANGED;return v.mk.CURRENT},es=(e,t)=>!(t&&t.content_hash===e.content_hash&&!(0,b.vD)(t.containing_frame,null==e?void 0:e.containing_frame)&&(0,b.u2)(t.name,null==e?void 0:e.name)&&(0,b.u2)(t.description,e.description)),ec=(e,t)=>!(t&&t.content_hash===(null==e?void 0:e.content_hash)&&(0,b.u2)(t.name,e.name)&&(0,b.u2)(t.description,e.description)),ed=(e,t)=>ec(e,t)||!(0,b.u2)(t.sort_position,e.sort_position),eu=(e,t)=>!(t&&t.version===e.version&&!(0,b.vD)(t.containing_frame,null==e?void 0:e.containing_frame)&&(0,b.u2)(t.name,null==e?void 0:e.name)&&(0,b.u2)(t.description,e.description)),ep=(e,t)=>!e||!t||t.version!==e.version||t.sortPosition!==e.sortPosition,em=(e,t)=>!(t&&t.version===(null==e?void 0:e.version));(0,f.ue)([F,k],(e,t)=>{let r=new Set;for(let n of Object.values(e)){let e=t[n.node_id],i=e&&null==e.unpublished_at,a=!!n.isPublishable;i&&a&&!ec(n,e)&&!(0,b.u2)(e.sort_position,n.sort_position)&&r.add(n.node_id)}return r});let eh=(e,t,r,n)=>{let[i,a]=d()(t,t=>et(t,e)),[o,l]=d()(i,r),[s,c]=d()(a,e=>(0,w.s9)(e.status));return{modified:{erroneous:(0,h.MR)(o,...n),wellFormed:(0,h.MR)(l,...n)},unmodified:{published:(0,h.MR)(s,...n),unpublished:(0,h.MR)(c,...n)}}};function e_(e,t){return null==t?ef(e):eg(e,t)}let eg=(0,m.P1)([F,x,B,Y,H,V,Z,en,(e,t)=>t],eE),ef=(0,m.P1)([F,x,B,Y,H,V,Z,ei],(e,t,r,n,i,a,o,l)=>eE(e,t,r,n,i,a,o,l,void 0));function eE(e,t,r,n,i,a,o,l,s){let c=(e,t)=>{if(!s)return 0;let r=s[e.node_id],n=s[t.node_id];return r&&n?"FORCED_COPY"===r.publishType&&"FORCED_COPY"!==n.publishType?1:"FORCED_COPY"!==r.publishType&&"FORCED_COPY"===n.publishType?-1:0:0},d=new Set(Object.values(a).filter(e=>!e.isPublishable).map(e=>e.variableSetId)),u=[...d].map(e=>i[e]).filter(e=>!!e);return{styles:eh(l,Object.values(e),()=>!1,[w.jq,c]),components:eh(l,Object.values(t),w.yg,[w.UA,c]),stateGroups:eh(l,Object.values(r),w.yg,[w.UA,c]),productComponents:eh(l,Object.values(n),w.yg,[w.UA,c]),variableSets:eh(l,(0,_.BZ)().ds_variables_extended_sets?Object.values(i):Object.values(i).filter(e=>!(0,v.z4)(e)),w.K6,[w.e9]),variableSetsWithHiddenVariables:eh(l,u,()=>!1,[w.e9]),modules:eh(l,(0,_.BZ)().dse_editor_templates_v1?Object.values(o):[],()=>!1,[w.UA])}}let ey=(0,f.ue)([G],e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e,eh(new Set,t,()=>!1,[w.e9])]))),ev=()=>(0,f.ue)([ey,(e,t)=>t],(e,t)=>{let r=e[t];return r?r.modified.wellFormed:[]}),eb=()=>(0,f.ue)([ey,(e,t)=>t],(e,t)=>{let r=e[t];return r?r.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),eI=(0,m.P1)([e_],e=>e.styles.modified.wellFormed),eT=(0,m.P1)([F],e=>Object.values(e).filter(e=>er(e))),ew=(0,m.P1)([e_],e=>e.components.modified.wellFormed),eS=(0,m.P1)([e_],e=>e.stateGroups.modified.wellFormed),eC=(0,m.P1)([e_],e=>e.productComponents.modified.wellFormed),eO=(0,m.P1)([eC],e=>e.filter(e=>(0,w.s9)(e.status))),eA=(0,m.P1)([e_],e=>e.variableSets.modified.wellFormed),eN=(0,m.P1)([eA],e=>e.filter(e=>(0,w.s9)(e.status))),eL=(0,m.P1)([e_],e=>(0,_.BZ)().dse_editor_templates_v1?e.modules.modified.wellFormed:[]),eP=(0,m.P1)([eL],e=>e.filter(e=>(0,w.s9)(e.status))),eR=(0,m.P1)([E.dh,O.G],(e,t)=>{if((0,_.BZ)().cmty_lib_admin_publish&&(null==e?void 0:e.publishedHubFile))return!0;let r=(0,_.BZ)().ps_benchmark;return!(r&&(0,I.Tf)(null==e?void 0:e.project))&&!!(e&&(0,S.e3)(e.teamId?t[e.teamId]:null))});function ek(e){return eI(e).length>0||eC(e).length>0||eA(e).length>0||eL(e).length>0}let eD=eI,eM=(0,m.P1)([eD],e=>e.length>0),eF=(0,m.P1)([eT],e=>e.length>0),ex=(0,m.P1)([ew,eR],(e,t)=>t?e:[]),eU=(0,m.P1)([eS,eR],(e,t)=>t?e:[]),eB=(0,m.P1)([eC,eR],(e,t)=>t?e:[]),eV=(0,m.P1)([eB],e=>e.length>0),eG=(0,m.P1)([eO,eR],(e,t)=>t?e:[]),eH=(0,m.P1)([eG],e=>e.length>0),eW=(0,m.P1)([eA],e=>e),eK=(0,m.P1)([eW],e=>e.length>0),ez=(0,m.P1)([eN],e=>e),eZ=(0,m.P1)([ez],e=>e.length>0),eY=(0,m.P1)([eL,eR],(e,t)=>t?e:[]),ej=(0,m.P1)([eY],e=>e.length>0),e$=(0,m.P1)([eP],e=>e.length>0),eq=(0,m.P1)([eD,eB,eW,eY],(e,t,r,n)=>[...e,...t,...r,...n]),eX=(0,m.P1)([eq],e=>e.map(e=>e.node_id)),eJ=(0,m.P1)([eM,eV,eK,ej],(e,t,r,n)=>e||t||r||n),eQ=(0,m.P1)([eF,eH,eZ,e$],(e,t,r,n)=>e||t||r||n),e0=(0,m.P1)([J,eB],(e,t)=>t.some(t=>e[t.node_id])),e1=(0,m.P1)([Q,eY],(e,t)=>t.some(t=>e[t.node_id])),e2=(0,m.P1)([j,y.RP],(e,t)=>({...t,...e}));(0,m.P1)([eY],e=>e.map(e=>e.node_id))},843104:(e,t,r)=>{r.d(t,{CM:()=>G,Dm:()=>et,Ej:()=>Z,Kr:()=>B,L4:()=>V,Lj:()=>W,MQ:()=>R,UX:()=>ee,YV:()=>x,Yt:()=>H,Z3:()=>Q,ZV:()=>P,ff:()=>$,fr:()=>q,i8:()=>X,mt:()=>j,r2:()=>Y,rl:()=>K,rp:()=>J,zC:()=>U});var n=r(605271),i=r.n(n),a=r(981114),o=r(716250),l=r(337167),s=r(933858),c=r(286206),d=r(297296),u=r(112088),p=r(166885),m=r(837728),h=r(838903),_=r(961215),g=r(451573),f=r(756437),E=r(880381),y=r(900710),v=r(531640),b=r(915234);function I(e,t,r,n,i){let a=Object.create(null);for(let{key:t,version:n}of e)if(t){if(t in r){let e=t;t=r[t],n=(null==i?void 0:i[e])===n?n:"FAKE_VERSION_FOR_MOVED_ITEM"}a[t]=a[t]||new Set,a[t].add(n)}for(let e of t)if(e in n){let t=n[e];a[t]=a[t]||new Set,a[t].add((0,d.nu)("FAKE_VERSION_FOR_MOVED_ITEM"))}return a}let T=(0,a.P1)([v.$s,y.tg,f.Io,f.YC,e=>{let{styles:t,destinationStyleKeyToLegacySourceStyle:r}=e.library.used__LIVEGRAPH;return Object.values(t).reduce((e,t)=>{if("loaded"!==t.status||!r[t.data.key])return e;let{key:n,version:i}=r[t.data.key];return e[n]=i,e},Object.create(null))}],I),w=(0,a.P1)([v.X8,y.yN,f.Io,f.YC],I),S=(0,a.P1)([v.ZA],e=>I(e,[],{},{})),C=(0,a.P1)([v.gb],e=>Object.values(e).reduce((e,t)=>(e.has(t.key)||e.set(t.key,new Set),t.pageIds.forEach(r=>{var n;return null==(n=e.get(t.key))?void 0:n.add(r)}),e),new Map));function O(e,t,r){if(0===e.size)return!1;if(1===e.size){let n=Array.from(e)[0],i=r(t);return(null==i?void 0:i.toLowerCase())!==n.toLowerCase()}return!0}function A({publishedAssetsByKey:e,usedVersionsByAssetKey:t,editingFile:r,getVersion:n,getUpdateAsset:i}){let a=[];for(let o of Object.keys(t)){let l=e[(0,d.HE)(o)];if(!l||r&&(0,h.uu)(r,l.file_key))continue;let s=t[(0,d.HE)(o)],c=O(s,l,n);c&&a.push(i(l))}return a}let N=(0,a.P1)([b.Oh,T,m.bC,f.kJ,f.vi,f.Wg,v._m,y.d8],(e,t,r,n,i,a,o,l)=>{let s=!1,c=[],d=!1,u=A({publishedAssetsByKey:e,usedVersionsByAssetKey:t,editingFile:r,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let t={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in n&&(t.oldSubscribedKeysToUpdate=Array.from(n[e.key]),!a[e.key]))for(let e of(s=!0,t.oldSubscribedKeysToUpdate))o.has(e)&&(d=!0);if(e.key in i){for(let r of(t.localIdsToUpdate=Array.from(i[e.key]),a[e.key]||(s=!0),t.localIdsToUpdate))if(l.has(r)){d=!0;break}}return(o.has(e.key)||t.oldSubscribedKeysToUpdate.some(e=>o.has(e))||t.localIdsToUpdate.some(e=>l.has(e)))&&c.push(t),t}});return{styleUpdatesForAllPages:u,styleUpdatesForCurrentPage:c,includesMoveUpdatesOnAnyPage:s,includesMoveUpdatesOnCurrentPage:d}}),L=(0,s.ue)([E.rr,w],(e,t)=>{let r=Object.keys(t),n=Object.keys(e);return i()(r,n)}),P=(0,a.P1)([L,E.k5,v.Eb,y.F1],(e,t,r,n)=>{let i=new Map;if((0,o.BZ)().ds_reset_deleted_state_default)for(let a of e){let e=r[a];if(!e)continue;let o=n.get(e.nodeId),l=null==o?void 0:o.parentNode;if(o&&l&&o.isState&&(null==l?void 0:l.stateGroupKey)){let e=t[l.stateGroupKey];e&&i.set(a,e)}}return i}),R=(0,a.P1)([E.rr,E.QQ,w,m.bC,f.kJ,f.vi,v.Op,y.n2],(e,t,r,n,i,a,o,l)=>{var s,c,d;let u=!1,p=!1,m=A({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let t={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},r=e.component_key;if(r in i)for(let e of(t.oldSubscribedKeysToUpdate=Array.from(i[r]),u=!0,t.oldSubscribedKeysToUpdate))o.has(e)&&(p=!0);if(r in a){for(let e of(t.localIdsToUpdate=Array.from(a[r]),u=!0,t.localIdsToUpdate))if(l.has(e)){p=!0;break}}return t}}),h=[],_=[],g=[],f=[],E=new Set;for(let e of m){let r=null==(c=null==(s=e.containing_frame)?void 0:s.containingStateGroup)?void 0:c.nodeId;if(r){let n=null==(d=t[e.file_key])?void 0:d[r];if(n){let t=g.find(e=>e.key===n.key);if(null==t&&(t={...n,newStateKeyToOutdatedItems:{}},g.push(t)),e.component_key){let r=e.component_key;t.newStateKeyToOutdatedItems[r]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(o.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>o.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!E.has(n.key)&&(f.push(t),E.add(n.key))}}}else h.push(e),(e.component_key&&o.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>o.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&_.push(e)}return{componentUpdatesForAllPages:h,stateGroupUpdatesForAllPages:g,includesMoveUpdatesOnAnyPage:u,componentUpdatesForCurrentPage:_,stateGroupUpdatesForCurrentPage:f,includesMoveUpdatesOnCurrentPage:p}}),k=(0,a.P1)([E.lU,E.u0,S,m.bC,C,e=>e.mirror.appModel.currentPage],(e,t,r,n,i,a)=>{var o;let l={},s=new Set,u=null==(o=_.iTB)?void 0:o.getInternalCanvasNodeId();for(let o of Object.keys(r)){let m=e[(0,d.c5)(o)];if(!m||n&&(0,h.uu)(n,m.file_key))continue;let _=t[(0,d.tb)(m.variableCollectionKey)];if(!_)continue;let g=l[(0,d.tb)(m.variableCollectionKey)]||{..._,libraryVariableIdsForUpdate:[]};if((0,p.z4)(g)){(0,c.YD)("variables","Encountered variable bound to variable set extension");continue}let f=r[m.key];if(f&&O(f,m,e=>e.version)&&g.libraryVariableIdsForUpdate.push(m.node_id),g.libraryVariableIdsForUpdate.length>0&&(l[(0,d.tb)(_.key)]=g,i.has(_.key))){let e=i.get(_.key);((null==e?void 0:e.has(a))||u&&(null==e?void 0:e.has(u)))&&s.add(_.key)}}let m=Object.values(l),g=m.filter(e=>s.has(e.key));return{variableSetUpdatesForAllPages:m,variableSetUpdatesForCurrentPage:g}}),D=(0,g.cg)(R),M=(0,g.cg)(N),F=(0,g.cg)(k),x=(0,l.xu)(e=>(0,l.cn)(t=>{let{componentUpdatesForAllPages:r,componentUpdatesForCurrentPage:n}=t(D);return e===u.wM.ALL?r:n})),U=(0,l.xu)(e=>(0,l.cn)(t=>{let{stateGroupUpdatesForAllPages:r,stateGroupUpdatesForCurrentPage:n}=t(D);return e===u.wM.ALL?r:n})),B=(0,l.xu)(e=>(0,l.cn)(t=>{let{styleUpdatesForAllPages:r,styleUpdatesForCurrentPage:n}=t(M);return e===u.wM.ALL?r:n})),V=(0,l.kv)(M,e=>e.styleUpdatesForAllPages),G=(0,l.xu)(e=>(0,l.cn)(t=>{let{variableSetUpdatesForAllPages:r,variableSetUpdatesForCurrentPage:n}=t(F);return e===u.wM.ALL?r:n})),H=(0,l.cn)(e=>{let{componentUpdatesForAllPages:t,stateGroupUpdatesForAllPages:r,includesMoveUpdatesOnAnyPage:n}=e(D),{styleUpdatesForAllPages:i,includesMoveUpdatesOnAnyPage:a}=e(M),{variableSetUpdatesForAllPages:o}=e(F);return{componentUpdatesForAllPages:t,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:o,includesMoveStyleUpdatesOnAnyPage:a,includesMoveComponentUpdatesOnAnyPage:n}}),W=(0,l.cn)(e=>{let{componentUpdatesForCurrentPage:t,stateGroupUpdatesForCurrentPage:r,includesMoveUpdatesOnCurrentPage:n}=e(D),{styleUpdatesForCurrentPage:i,includesMoveUpdatesOnCurrentPage:a}=e(M),{variableSetUpdatesForCurrentPage:o}=e(F);return{componentUpdatesForCurrentPage:t,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:i,variableSetUpdatesForCurrentPage:o,includesMoveStyleUpdatesOnCurrentPage:a,includesMoveComponentUpdatesOnCurrentPage:n}}),K=(0,l.xu)(e=>(0,l.cn)(t=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:i,variableSetUpdatesForAllPages:a}=t(H),{componentUpdatesForCurrentPage:o,stateGroupUpdatesForCurrentPage:l,styleUpdatesForCurrentPage:s,variableSetUpdatesForCurrentPage:c}=t(W);return e===u.wM.ALL?{scopedComponentUpdates:r,scopedStateGroupUpdates:n,scopedStyleUpdates:i,scopedVariableSetUpdates:a}:{scopedComponentUpdates:o,scopedStateGroupUpdates:l,scopedStyleUpdates:s,scopedVariableSetUpdates:c}})),z=(0,l.kv)(H,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:t,styleUpdatesForAllPages:r,variableSetUpdatesForAllPages:n,includesMoveStyleUpdatesOnAnyPage:i,includesMoveComponentUpdatesOnAnyPage:a})=>{let o=e.length+t.length+r.length+n.length;return{updateCount:o,hasUpdates:o>0,includesMoveStyleUpdatesOnAnyPage:i,includesMoveComponentUpdatesOnAnyPage:a}}),Z=(0,l.kv)(W,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:t,styleUpdatesForCurrentPage:r,variableSetUpdatesForCurrentPage:n,includesMoveStyleUpdatesOnCurrentPage:i,includesMoveComponentUpdatesOnCurrentPage:a})=>{let o=e.length+t.length+r.length+n.length;return{updateCount:o,hasUpdates:o>0,includesMoveStyleUpdatesOnCurrentPage:i,includesMoveComponentUpdatesOnCurrentPage:a}}),Y=(0,l.kv)(z,({hasUpdates:e})=>e),j=(0,l.kv)(Z,({hasUpdates:e})=>e),$=(0,l.xu)(e=>(0,l.cn)(t=>t(e===u.wM.ALL?z:Z).hasUpdates)),q=(0,l.kv)(z,({updateCount:e})=>e),X=(0,l.kv)(Z,({updateCount:e})=>e),J=(0,l.gf)([H],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:t,styleUpdatesForAllPages:r,variableSetUpdatesForAllPages:n})=>({componentUpdateKeys:(0,u.fu)(e),stateGroupUpdateKeys:(0,u.fu)(t),styleUpdateKeys:(0,u.fu)(r),variableSetKeys:(0,u.fu)(n)})),Q=(0,g.cg)(e=>e.library.libraryUpdatesBannerDismissed),ee=(e,t)=>{let r=(0,y.F1)(e),n=r.get(t);if(!n)return null;let i=n.guid,a=n.styleKey,o=n.styleVersionHash;return a&&o?{GUID:i,key:a,version:o,isLocalStyle:n.isLocalStyle}:null},et=(0,l.cn)(!1)},516342:(e,t,r)=>{r.d(t,{b$:()=>a,e2:()=>l,oB:()=>o});var n=r(981114),i=r(236893);let a=e=>e.library.localStyleSelection,o=(0,n.P1)([a,(e,t)=>t],(e,t)=>(null==e?void 0:e.type)===t?e:null),l=(0,n.P1)([o,(e,t,r)=>r],(e,t)=>{if(!e)return null;let r=new Set,n=new Set;return e.folderNames.forEach(e=>{let a=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);a&&((0,i.gc)(a).forEach(e=>{r.add(e.name)}),(0,i.mb)(a).forEach(e=>{n.add(e.node_id)}))}),{type:e.type,folderNames:r,styleIds:n}})},756437:(e,t,r)=>{r.d(t,{F6:()=>_,Io:()=>c,Wg:()=>h,YC:()=>d,kJ:()=>p,vi:()=>m});var n=r(981114),i=r(933858),a=r(297296),o=r(451573),l=r(915234);let s=e=>e.library.movedLibraryItems,c=(0,n.P1)([(0,i.tl)(s,e=>e.subscribed),l.ss],(e,t)=>({...e,...t})),d=(0,n.P1)([s,l.qK],(e,t)=>({...e.local,...t}));function u(e){let t=Object.create(null);for(let r in e){let n=e[(0,a.HE)(r)];t[n]=t[n]||new Set,t[n].add((0,a.HE)(r))}return t}let p=(0,n.P1)([c],u),m=(0,n.P1)([d],u),h=e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle,_=(0,o.cg)(h)},900710:(e,t,r)=>{r.d(t,{EF:()=>g,F1:()=>l,LI:()=>o,Qq:()=>h,St:()=>_,XB:()=>w,aQ:()=>E,d8:()=>v,dJ:()=>s,dj:()=>d,jG:()=>u,jq:()=>f,lR:()=>b,n2:()=>T,tg:()=>y,uq:()=>m,xK:()=>c,yN:()=>I});var n=r(981114),i=r(933858),a=r(451573);let o=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,s=e=>e.mirror.appModel,c=(0,i.Py)(e=>Object.keys(o(e))),d=e=>{let t=Object.keys(o(e));return 1===t.length?t[0]:null},u=(0,n.P1)([l,d],(e,t)=>t?e.get(t):null),p=()=>(e,t)=>l(e).get(t),m=()=>{let e=p();return(0,i.Py)((t,r)=>{let n=e(t,r);return null==n?null:{key:n.styleKey,version:n.styleVersionHash}})},h=()=>{let e=m();return(0,i.Py)((t,r)=>new Map(r.map(r=>[r,e(t,r)])))};function _(e){return e.mirror.selectionProperties.numSelected||0}let g=(0,i.ue)([c,l],(e,t)=>{let r=[];return e.forEach(e=>{let n=t.get(e);((null==n?void 0:n.type)==="INSTANCE"||(null==n?void 0:n.isInstanceSublayer))&&r.push(e)}),r}),f=(0,n.P1)([l,c],(e,t)=>{let r=[];return t.forEach(t=>{let n=e.get(t);n&&r.push(n)}),r}),E=(0,i.Py)(e=>e.library.publishableStyles.map(e=>e.nodeId)),y=(0,i.Py)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),v=(0,i.Py)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),b=(0,a.cg)(y),I=(0,i.Py)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),T=(0,i.Py)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage)),w=(e,t)=>{var r;let n=l(e);return!(null==(r=n.get(t))?void 0:r.visible)}},531640:(e,t,r)=>{r.d(t,{$s:()=>E,A1:()=>g,Aq:()=>k,Eb:()=>_,Ld:()=>C,Mn:()=>x,Op:()=>R,W1:()=>N,X8:()=>u,ZA:()=>m,_m:()=>M,gb:()=>h,iJ:()=>b,jr:()=>L,mB:()=>F,oo:()=>O,qp:()=>S,vW:()=>A,xj:()=>P});var n=r(864038),i=r.n(n),a=r(490292),o=r.n(a),l=r(981114),s=r(933858),c=r(451573);function d(e){return(0,s.tl)(e=>e.library,e)}let u=d(e=>e.subscribedSymbolsFromLoadedPages),p=d(e=>e.subscribedSymbolsOnCurrentPage),m=(0,s.ue)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),h=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,_=(0,l.P1)([u],e=>i()(e,e=>e.key)),g=d(e=>e.subscribedStateGroupsFromLoadedPages),f=d(e=>e.subscribedStateGroupsOnCurrentPage),E=d(e=>e.directlySubscribedStylesFromLoadedPages),y=d(e=>e.directlySubscribedStylesOnCurrentPage),v=d(e=>e.indirectlySubscribedStylesFromLoadedPages),b=(0,l.P1)([v],e=>e.length>0),I=(0,l.P1)([E,v],(e,t)=>[...e,...t]);function T(e){return e.map(e=>e.nodeId)}function w(e){return o()(e.map(e=>e.key))}let S=(0,l.P1)([u],T),C=(0,l.P1)([p],T),O=(0,l.P1)([g],T),A=(0,l.P1)([f],T),N=(0,l.P1)([E],T);(0,l.P1)([y],T);let L=(0,l.P1)([I],T),P=(0,l.P1)([u],w),R=(0,l.P1)([p],e=>new Set(e.map(e=>e.key))),k=(0,l.P1)([g],w),D=(0,l.P1)([E],w),M=(0,l.P1)([y],e=>new Set(e.map(e=>e.key))),F=(0,c.cg)(D),x=(0,l.P1)([I],w)},915234:(e,t,r)=>{r.d(t,{BF:()=>s,Oh:()=>c,qK:()=>l,ss:()=>o});var n=r(981114),i=r(297296),a=r(451573);let o=e=>e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey,l=e=>e.library.used__LIVEGRAPH.localNodeIdToDestinationKey,s=(0,a.cg)(e=>e.library.used__LIVEGRAPH.sourceAssetKeyToFileName),c=(0,n.P1)([e=>e.library.used__LIVEGRAPH.styles],function(e){let t={};for(let[r,n]of Object.entries(e))"loaded"===n.status&&(t[(0,i.hx)(r)]=n.data);return t})},590708:(e,t,r)=>{r.d(t,{Cs:()=>u,Mf:()=>l,Zy:()=>d,nT:()=>p,wv:()=>s,x4:()=>c}),r(970740);var n=r(468310),i=r(196532),a=r(801998),o=r(733609);function l(e,t,r){return!!e&&(0,a.T7)(e)===n.ls.TEAM_CREATION_CONTROLS_ADMIN_ONLY&&!(t||r)}function s(e){let t=(0,i.Mn)(),r=(0,o.canAdminOrg)(t.currentUserOrgId,t),n=!!e&&(0,o.canAdminLicenseGroup)(e,t),a=t.currentUserOrgId?t.orgById[t.currentUserOrgId]:null,s=l(a,r,n);return{canUserAdminOrg:r,canUserAdminLicenseGroup:n,teamCreationIsDisabled:s}}function c(e){switch(e){case null:case void 0:return n.Ey.ALLOWED;default:return e}}function d(e){return c(null==e?void 0:e.public_link_controls_setting)===n.Ey.BANNED}let u=e=>[n.Ey.EXPIRATION_REQUIRED,n.Ey.EXP_AND_PWD_REQUIRED].includes(c(null==e?void 0:e.public_link_controls_setting));function p(e){return[n.Ey.PASSWORD_REQUIRED,n.Ey.EXP_AND_PWD_REQUIRED].includes(c(null==e?void 0:e.public_link_controls_setting))}},161939:(e,t,r)=>{r.d(t,{A1:()=>O,AS:()=>A,EO:()=>C,OP:()=>M,Qe:()=>T,SZ:()=>L,xZ:()=>S});var n,i=r(652983),a=r(407908),o=r(950663),l=r.n(o),s=r(903010),c=r.n(s),d=r(5453),u=r(626650),p=r(716250),m=r(303498),h=r(669277),_=r(217810),g=r(361763),f=r(200273),E=r(862610),y=r(508887),v=r(322186),b=r(801998),I=r(783237),T=((n=T||{}).ORGANIZATION="organization",n.LICENSE_GROUP="license-group",n.WORKSPACE="workspace",n.TEAM="team",n.FILE="file",n.USER="user",n.COMMUNITY="community",n);let w=i.createContext(null);function S(){let{subscription:e,ensureSubscription:t}=(0,_.LG)(i.useContext(w),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");i.useEffect(()=>{t()},[t]);let r=i.useMemo(()=>(0,h.wl)([]),[]);return(0,g.rm)()?r:e}function C(){let e=S(),t=(0,u.vE)(()=>{var t;let r=new Set;return null==(t=e.data)||t.forEach(e=>r.add(e.fileKey)),r},[e.data]);return t}function O(){let{untransformedSubscription:e}=(0,_.LG)(i.useContext(w),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let t={},{file:r}=e.data;return(null==r?void 0:r.libraryOrgSubscriptions.length)&&(t.org=r.libraryOrgSubscriptions.reduce((e,t)=>{var r;let n=null==(r=t.library)?void 0:r.file.key;return n&&e.add(n),e},new Set)),(null==r?void 0:r.libraryTeamSubscriptions.length)&&(t.team=r.libraryTeamSubscriptions.reduce((e,t)=>{var r;let n=null==(r=t.library)?void 0:r.file.key;return n&&e.add(n),e},new Set)),(null==r?void 0:r.libraryFileSubscriptions.length)&&(t.file=r.libraryFileSubscriptions.reduce((e,t)=>{var r;let n=null==(r=t.library)?void 0:r.file.key;return n&&e.add(n),e},new Set)),(null==r?void 0:r.libraryUserSubscriptions.length)&&(t.user=r.libraryUserSubscriptions.reduce((e,t)=>{var r;let n=null==(r=t.library)?void 0:r.file.key;return n&&e.add(n),e},new Set)),t}function A({children:e}){var t,r;let n=(0,f.CA)(),o=(0,a.v9)(I.k),l=!!(o&&(null==n?void 0:n.folderId)===o),[s,c]=i.useState(!1),d=null==n?void 0:n.key,u=null==n?void 0:n.teamId,p=null==(t=null==n?void 0:n.team)?void 0:t.licenseGroupId,m=null==(r=null==n?void 0:n.team)?void 0:r.workspaceId,_=null==n?void 0:n.parentOrgId,g=(0,h.mU)(E.SubscribedLibrariesForFile,{fileKey:d||"",teamId:u??"-1",licenseGroupId:p||null,workspaceId:m||null,orgId:_||null},{enabled:!!n&&s}),T=function(e,t){let r=(0,f.CA)(),n=(0,v.Ng)(),a=(0,b.d$)(n)&&!(0,b.OR)(n),o=(0,b.d$)(n)&&(0,b.OR)(n),l=(null==r?void 0:r.parentOrgId)||null,s=(0,y.RI)();return i.useMemo(()=>L(e,l,t,a,o,s),[e,l,t,a,o,s])}(g,l),S=i.useMemo(()=>({subscription:T,ensureSubscription:()=>c(!0),untransformedSubscription:g}),[g,T]);return i.createElement(i.Fragment,null,i.createElement(w.Provider,{value:S},e),s&&i.createElement(N,{subscription:T}))}function N({subscription:e}){return(0,m.n_)(e,"Subscribed Libraries Subscription Load Time",{numLibraries:"loaded"===e.status?e.data.length:0}),null}function L(e,t,r,n,i,a){var o,s,u,m,g;if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let f=e.data.file;if(null==f)return(0,h.wl)([]);let{communityLibraryFileSubscriptions:E,communityQuickstartLibraries:y,libraryFileSubscriptions:v,libraryTeamSubscriptions:b,libraryUserSubscriptions:I,libraryOrgSubscriptions:T}=f,w=null==(s=null==(o=f.team)?void 0:o.licenseGroup)?void 0:s.librarySubscriptions,S=null==(m=null==(u=f.team)?void 0:u.workspace)?void 0:m.librarySubscriptions,C=v.map(e=>P(e,"file")),O=[],A=[];if(a()){let[e,t]=l()(E,e=>e.isSubscribed);O=e.map(e=>R(e,"file")).filter(_.lm);let r=new Set(t.map(e=>{var t;return null==(t=e.communityLibrary)?void 0:t.hubFileId}).filter(_.lm));A=(y??[]).filter(e=>e.communityLibrary&&!r.has(e.communityLibrary.hubFileId)).map(e=>R(e,"file")).filter(_.lm)}let N=T.filter(e=>r?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):n||i?null==(e.libraryFileSubscriptionOverride||e.libraryLicenseGroupSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>P(e,"organization")),L=[...C,...O,...A,...N];if(r){let e=I.filter(e=>{var r;return null==e.libraryFileSubscriptionOverride&&(null==(r=e.library)?void 0:r.file.parentOrgId)===t}).map(e=>P(e,"user")),r=(null==(g=function(e){var t,r,n,i;let a=(0,p.BZ)().ps_benchmark;if(!a)return null==(i=null==(n=null==e?void 0:e.currentUser)?void 0:n.orgAwareTeamRoles)?void 0:i.map(e=>{var t;return null==(t=e.team)?void 0:t.libraryTeamSubscriptions}).filter(_.lm);{let n=null==e?void 0:e.teamId,i=null==(r=null==(t=null==e?void 0:e.currentUser)?void 0:t.orgAwareTeamRoles)?void 0:r.filter(e=>{var t;return(null==(t=e.team)?void 0:t.id)===n}).map(e=>{var t;return null==(t=e.team)?void 0:t.libraryTeamSubscriptions}).filter(_.lm);return i}}(f))?void 0:g.map(e=>e.filter(D).map(e=>P(e,"team"))))??[],n=(0,d.xH)(r);L.push(...e),L.push(...n)}else{let e=b.filter(k).map(e=>P(e,"team"));if(L.push(...e),n){let e=(w||[]).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>P(e,"license-group"));L.push(...e)}else if(i){let e=(S||[]).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>P(e,"workspace"));L.push(...e)}}let M=c()(L.filter(_.lm),e=>e.fileKey);return(0,d.aV)(M,"name"),(0,h.wl)(M)}function P(e,t){return e.library?{fileKey:e.library.file.key,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:t}:null}function R(e,t){return(null==e?void 0:e.communityLibrary)?{fileKey:e.communityLibrary.hubFileId,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,parentOrgId:null,subscriptionType:t}:null}function k(e){return null==e.libraryFileSubscriptionOverride}function D(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function M(e,t){switch(t){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},584516:(e,t,r)=>{r.d(t,{Is:()=>l,S:()=>d,WT:()=>c,aH:()=>s,qs:()=>o});var n=r(31642),i=r(417704),a=r(733609);let o=(e,t)=>n.ZP.put("/api/team_join_link",{team_id:e,level:t}).then(({data:e})=>e.meta).catch(e=>{throw e}),l=e=>`${window.location.origin}/team_invite/redeem/${e.token}`,s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,c=e=>`RESETTING_TEAM_JOIN_LINK_${e}`,d=()=>{let e=(0,i.BA)("team_role_redemption"),t=!!e&&parseInt(e),r=t&&(0,a.levelRoleName)(t),n=(0,i.BA)("team_name");if(!n||!r)return;let o=!!(0,i.BA)("skipped");return o?`You're already ${"owner"===r?"the":"a"} team ${r} of ${n}`:`You're now a team ${r} of ${n}`}},841017:(e,t,r)=>{r.d(t,{$c:()=>$,AO:()=>J,Cq:()=>er,Gu:()=>G,Ig:()=>H,KK:()=>Y,Pw:()=>R,Rs:()=>X,Ut:()=>w,V7:()=>q,V8:()=>F,Vl:()=>S,Wr:()=>A,Xy:()=>k,YV:()=>et,ZT:()=>ee,bw:()=>M,cU:()=>x,dv:()=>L,fG:()=>U,gc:()=>V,i2:()=>en,kA:()=>Q,nn:()=>N,pw:()=>B,pz:()=>ea,qd:()=>ei,w9:()=>P,xk:()=>z,zk:()=>Z});var n,i=r(407908),a=r(5453),o=r(46347),l=r(716250),s=r(303498),c=r(615537),d=r(970740),u=r(761767),p=r(862610),m=r(898080),h=r(733609),_=r(716221);r(656077);var g=r(220958),f=r(966515),E=r(100304),y=r(286206),v=r(117986),b=r(999177),I=r(451573),T=r(795153);async function w(e){let t=[],r={};return await Promise.all(e.map(async e=>{var n;let i=await T.t1.fetchFile(e);if(!(null==i?void 0:i.trashed_at)||!(null==i?void 0:i.team_id))return;t.push(i);let a=await (0,s.Yj)(p.TeamFileLimitsInfo,{teamId:i.team_id}),o=null==(n=a.data)?void 0:n.team;(null==o?void 0:o.id)&&(r[o.id]=o)})),await C(t,r)}async function S(e){let t=[],r={};return await Promise.all(e.map(async e=>{var n,i;let a=await T.t1.fetchFile(e.key),o=(0,l.BZ)().ps_benchmark_counts,c={...a,folder_id:o?e.folderId:a.folder_id};if(c&&t.push(c),!e.folderId)return;let d=await (0,s.Yj)(p.TeamFileLimitsInfoByProject,{projectId:e.folderId}),u=null==(i=null==(n=d.data)?void 0:n.project)?void 0:i.team;(null==u?void 0:u.id)&&(r[u.id]=u)})),await C(t,r)}let C=async(e,t)=>{let r={},n={};if((0,l.BZ)().ps_benchmark_counts){let t={};for(let i of e){if(!i.folder_id)continue;let e=t[i.folder_id]??await T.t1.fetchFolder(i.folder_id);t[i.folder_id]=e;let a=(null==i?void 0:i.editor_type)==="design",o=(null==i?void 0:i.editor_type)==="whiteboard",l=(0,b.q7)(e)?0:1;i.team_id&&a&&(r[i.team_id]=(r[i.team_id]||0)+l),i.team_id&&o&&(n[i.team_id]=(n[i.team_id]||0)+l)}}else for(let t of e){let e=(null==t?void 0:t.editor_type)==="design",i=(null==t?void 0:t.editor_type)==="whiteboard";t.team_id&&e&&(r[t.team_id]=(r[t.team_id]||0)+1),t.team_id&&i&&(n[t.team_id]=(n[t.team_id]||0)+1)}let i=Object.keys(r).find(e=>{var n;let i=t[e];return i&&!D(i,{type:2,nDesignFilesToAdd:r[e],nCurrentDesignFiles:(null==(n=i.teamFileCounts)?void 0:n.designFileCount)||0})});return i||(i=Object.keys(n).find(e=>{var r;let i=t[e];return i&&!D(i,{type:5,nWhiteboardFilesToAdd:n[e],nCurrentWhiteboardFiles:(null==(r=i.teamFileCounts)?void 0:r.whiteboardFileCount)||0})}))};function O(e,t){return!!e.edit_roles&&("whiteboard"===t&&e.edit_roles.whiteboard_files.length>0||"design"===t&&e.edit_roles.design_files.length>0)}function A(e){var t,r;let n=null==(t=e.team_role)?void 0:t.level,i=(null==(r=e.team_role)?void 0:r.pending)||!1;return n&&n>=g.V.EDITOR&&!i||!!e.edit_roles&&e.edit_roles.folders.length>0||!(0,h.isTeamUserRestricted)(e.team_user,u.gg.DESIGN)&&O(e,u.gg.DESIGN)||!(0,h.isTeamUserRestricted)(e.team_user,u.gg.WHITEBOARD)&&O(e,u.gg.WHITEBOARD)}function N(e){var t,r,n,i,a,o,l,s;return!!e.team_role||((null==(r=null==(t=null==e?void 0:e.edit_roles)?void 0:t.design_files)?void 0:r.length)||0)>0||((null==(i=null==(n=null==e?void 0:e.edit_roles)?void 0:n.whiteboard_files)?void 0:i.length)||0)>0||((null==(o=null==(a=null==e?void 0:e.edit_roles)?void 0:a.folders)?void 0:o.length)||0)>0||((null==(l=null==e?void 0:e.view_roles)?void 0:l.file_count)||0)>0||((null==(s=null==e?void 0:e.view_roles)?void 0:s.folder_count)||0)>0}let L=e=>((0,h.isTeamUserFull)(e.team_user,u.gg.DESIGN)||(0,h.isTeamUserFull)(e.team_user,u.gg.WHITEBOARD))&&!N(e),P=e=>{var t;return!!(null==(t=null==e?void 0:e.restrictions_list)?void 0:t.includes(u.ZG.FILES_LIMITED_LEGACY))},R=e=>{var t;return!!(null==(t=null==e?void 0:e.restrictions_list)?void 0:t.includes(u.ZG.WHITEBOARD_FILES_LIMITED_BETA))};var k=((n=k||{})[n.ADD_DESIGN_FILE=0]="ADD_DESIGN_FILE",n[n.ADD_PROJECT=1]="ADD_PROJECT",n[n.ADD_N_DESIGN_FILES=2]="ADD_N_DESIGN_FILES",n[n.ADD_EDITOR=3]="ADD_EDITOR",n[n.ADD_FIGJAM_FILE=4]="ADD_FIGJAM_FILE",n[n.ADD_N_FIGJAM_FILES=5]="ADD_N_FIGJAM_FILES",n);function D(e,t){var r,n,i,a,o,l,s,c,d,p,h,_;if(!e||(null==(r=e.restrictionsList)?void 0:r.includes(u.ZG.LOCKED)))return!1;if((0,m.gP)(e))return!0;switch(t.type){case 0:if(null==(n=e.restrictionsList)?void 0:n.includes(u.ZG.FILES_LIMITED_LEGACY))return!1;if(t.isDestinationTeamDrafts)return!0;if(t.nCurrentDesignFiles&&t.nCurrentDesignFiles>=m.Hf)return!1;return!(null==(i=e.restrictionsList)?void 0:i.includes(u.ZG.FILES_LIMITED));case 1:return!(null==(a=e.restrictionsList)?void 0:a.includes(u.ZG.PROJECTS_LIMITED))&&!(null==(o=e.restrictionsList)?void 0:o.includes(u.ZG.PROJECTS_LIMITED_LEGACY));case 2:if(null==(l=e.restrictionsList)?void 0:l.includes(u.ZG.FILES_LIMITED_LEGACY))return!1;if(t.isDestinationTeamDrafts||0===t.nDesignFilesToAdd)return!0;if(t.nCurrentDesignFiles+t.nDesignFilesToAdd>m.Hf)return!1;return!(null==(s=e.restrictionsList)?void 0:s.includes(u.ZG.FILES_LIMITED));case 3:if(null==(c=e.restrictionsList)?void 0:c.includes(u.ZG.EDITORS_LIMITED))return!1;return!0;case 4:if(null==(d=e.restrictionsList)?void 0:d.includes(u.ZG.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(t.isDestinationTeamDrafts)return!0;if(t.nCurrentWhiteboardFiles&&t.nCurrentWhiteboardFiles>=m.Hf)return!1;return!(null==(p=e.restrictionsList)?void 0:p.includes(u.ZG.WHITEBOARD_FILES_LIMITED));case 5:if(null==(h=e.restrictionsList)?void 0:h.includes(u.ZG.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(t.isDestinationTeamDrafts||0===t.nWhiteboardFilesToAdd)return!0;if(t.nCurrentWhiteboardFiles+t.nWhiteboardFilesToAdd>m.Hf)return!1;return!(null==(_=e.restrictionsList)?void 0:_.includes(u.ZG.WHITEBOARD_FILES_LIMITED))}}function M(e,t){let r={subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null};return D(r,t)}let F=e=>{var t;let r=Object.values(e.teams),n=Object.values(e.authedTeamsById);if(1===r.length&&(0,h.canAdminTeam)(r[0].id,e))return r[0];if(0===r.length&&1===n.length){let r=null==(t=e.user)?void 0:t.id;if(r){let t=e.teamAdminRolesForAuthedUsers[r],i=t.find(e=>e.team_id===n[0].id);return i?n[0]:null}}return null};function x(e){return!!e.student_team||!!e&&!!e.subscription&&[u.Qe.OK,u.Qe.GRACE_PERIOD].includes(e.subscription)}function U(e){var t,r,n,i,a,o;let l=null==(t=e.user)?void 0:t.id,s=null==(r=e.openFile)?void 0:r.key;if(!l||!s)return null;let c=null==(i=null==(n=e.fileByKey)?void 0:n[s])?void 0:i.team_id;return c?null==(o=null==(a=e.teamUserByTeamId)?void 0:a[c])?void 0:o[l]:null}function B(){return(0,i.v9)(e=>{var t,r,n;let i=null==(t=e.user)?void 0:t.id;return i?(null==(n=null==(r=e.teamUserByTeamId)?void 0:r[$(e)])?void 0:n[i])??null:null})}function V(e){switch(e){case f.U.NAME:return(0,d.t)("team_view.team_members_table_column.name");case f.U.ACTIVE_AT:return(0,d.t)("team_view.team_members_table_column.active_at");case f.U.PERMISSIONS:return(0,d.t)("team_view.team_members_table_column.team_permissions");case f.U.DESIGN_PAID_STATUS:return(0,d.t)("team_view.team_members_table_column.design_role.seat_rename");case f.U.FIGJAM_PAID_STATUS:return(0,d.t)("team_view.team_members_table_column.figjam_role.seat_rename");default:(0,o.vE)(e)}}let G=e=>{switch(e){case E.m.DASHBOARD:return(0,d.t)("team_view.toolbar.dashboard");case E.m.MEMBERS:return(0,d.t)("team_view.toolbar.members");case E.m.SETTINGS:return(0,d.t)("team_view.toolbar.settings");case E.m.BILLING:return(0,d.t)("team_view.toolbar.billing");default:(0,o.vE)(e)}};function H(e,t){return e&&!(0,h.hasViewerRoleAccessOnTeam)(e.id,t)&&(0,h.canViewTeam)(e.id,t)&&e.org_access===u.Zn.PRIVATE?E.x.MEMBERS:E.x.HOME}let W=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),K=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/team\/(\d+)/),z=e=>W.test(e),Z=e=>K.test(e),Y=e=>{let t=new URL(e),r=t.pathname.match("team/([A-z0-9]*)");return r?r[1]:null},j=["recentsAndSharing","draftsToMove"];function $(e){var t;try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,l.ZP)().page_load_team_id||"";return(null==(t=e.folders[r])?void 0:t.team_id)||""}if(j.includes(e.selectedView.view))return e.currentTeamId||""}catch(e){(0,y.Jz)(v.k.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function q(){return(0,i.v9)(e=>$(e))||""}function X(){return(0,i.v9)(e=>e.teams[$(e)])||null}let J=(0,I.cg)(e=>e.teams[$(e)]||null);function Q(e){return e.currentTeamId?e.teams[e.currentTeamId]:null}function ee(e,t,r){return e?Object.keys((0,_.E)(t.byTeamId,e.id)).filter(e=>r[e]):[]}let et=(0,c.ws)(function(e,t,r){return e?ee(e,t,r).map(e=>r[e]):[]}),er=(e,t)=>{let r=[],n={};for(let t of e)t&&(n[t.id]=t,r.push(t.id));return e.sort((e,r)=>{let n=t.indexOf(e.id),i=t.indexOf(r.id);return -1===n&&-1===i?e.createdAt<r.createdAt?1:-1:n-i}),e},en=(e,t)=>er(e,t).map(e=>e.id);function ei(e,t){let r=e.byTeamId[t]||{},n=(0,a.We)(Object.keys(r).map(e=>{let t=r[e];return t?!0===t.pending?null:t.user:null}));return n}let ea=(e,t,r)=>{let n=0,i={};for(let a of(t.forEach(e=>i[e.id]=e),Object.keys(r))){let t=i[a],o=r[a][e];if(t&&o){if(t.pro_team||t.org_access||t.student_team)return!1;o.level===g.V.OWNER&&n++}}return n>1}},501741:(e,t,r)=>{r.d(t,{GJ:()=>s,SK:()=>o,lY:()=>l});var n=r(970740),i=r(337102),a=r(241182);let o=e=>{let t={light:(0,n.t)("fullscreen_actions.theme.light"),dark:(0,n.t)("fullscreen_actions.theme.dark"),system:(0,n.t)("fullscreen_actions.theme.system_theme")};return t[e]};function l(e){return a.l.map(t=>({name:`theme-${t}-mode`,isChecked:e===t,displayText:o(t),callback:(e,r,n)=>{n(i.l$({theme:t,userInitiated:!0}))}}))}function s(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,t,r)=>{r(i.l$({theme:"light",userInitiated:!0}))}},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,t,r)=>{r(i.l$({theme:"dark",userInitiated:!0}))}},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,t,r)=>{r(i.l$({theme:"system",userInitiated:!0}))}}]}},848550:(e,t,r)=>{r.d(t,{AS:()=>h,DM:()=>c,Hy:()=>p,Zc:()=>u,iM:()=>d,pr:()=>_});var n,i=r(615537),a=r(970740),o=r(840568),l=((n=l||{})[n.OLD=0]="OLD",n[n.FEB19=1]="FEB19",n);class s{constructor(e,t,r,n){this.textUserLayoutVersion=e,this.intrinsicLineHeight=t,this.fontSize=r,this.lineHeight=n}withLineHeight(e){return new s(this.textUserLayoutVersion,this.intrinsicLineHeight,this.fontSize,e)}}let c=(0,i.ws)(e=>{let t=null!=e.textUserLayoutVersion&&(0,o.Wn)(e.textUserLayoutVersion)?0===e.textUserLayoutVersion?0:1:o.t1;return new s(t,e.intrinsicLineHeight??null,e.fontSize,e.lineHeight)});function d(e){let{intrinsicLineHeight:t,fontSize:r,lineHeight:n}=e;if((0,o.Wn)(n))switch(n.units){case"RAW":return n.value;case"PIXELS":if(!(0,o.Wn)(r))return;return n.value/r;case"PERCENT":let i=(0,o.qD)(t);if(null==i)return;return n.value/100*i}}function u(e){let{textUserLayoutVersion:t,intrinsicLineHeight:r,fontSize:n}=e,i=(0,o.qD)(e.lineHeight);if(i)switch(i.units){case"RAW":if(!(0,o.Wn)(n))return;return m(i.value*n,t);case"PIXELS":return i.value;case"PERCENT":let a=(0,o.qD)(r);if(null==a||!(0,o.Wn)(n))return;return m(i.value/100*a*n,t)}}function p(e){let{textUserLayoutVersion:t,intrinsicLineHeight:r,fontSize:n,lineHeight:i}=e;if((0,o.Wn)(i))switch(i.units){case"RAW":if(!(0,o.Wn)(n))return;return m(100*i.value,t);case"PIXELS":let a=(0,o.qD)(r);if(null==a||!(0,o.Wn)(n))return;return m(100*i.value/(n*a),t);case"PERCENT":return i.value}}function m(e,t){return t===o.t1||0===t?e:Math.round(e)}function h(e){let{lineHeight:t}=e;if(!(0,o.Wn)(t))return(0,a.t)("fullscreen.mixed");if(_(t))return(0,a.t)("fullscreen.auto");switch(t.units){case"PERCENT":let r=d(e);if(null==r)return"Mixed";return`${parseFloat((100*r).toFixed(1))}%`;case"PIXELS":return`${parseFloat(t.value.toFixed(1))}`;case"RAW":return`${parseFloat((100*t.value).toFixed(1))}%`}}function _(e){return!!(null!=e&&(0,o.Wn)(e))&&"PERCENT"===e.units&&.1>Math.abs(e.value-100)}},502594:(e,t,r)=>{r.d(t,{Z:()=>s,j:()=>c});var n=r(980220),i=r(31642),a=r(970740),o=r(218609),l=r(163172);let s=(0,o.u4)((e,t)=>{if(!t.userInitiated){e.dispatch(l.kx(t));return}let r="0"==t.notificationSpaceId?null:t.notificationSpaceId,o={bell:t.isBellStateHigh,current_org_id:r};return(0,n.T)({requestPromise:i.ZP.put("/api/user_notifications_bell",o),fallbackError:(0,a.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.kx(t)})}),c=(0,o.u4)((e,t)=>{if(!t.userInitiated){e.dispatch(l.HF(t));return}return(0,n.T)({requestPromise:i.ZP.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,a.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.HF(t)})})},242030:(e,t,r)=>{r.d(t,{DC:()=>P,K3:()=>O,K4:()=>N,Vt:()=>L,Xr:()=>x,_K:()=>G,dI:()=>E,eh:()=>y,ep:()=>U,fg:()=>B,gr:()=>H,i3:()=>F,iF:()=>v,jp:()=>W,ml:()=>V,q6:()=>A,rV:()=>M});var n,i=r(777179),a=r.n(i),o=r(785466),l=r.n(o),s=r(256768),c=r(461490),d=r(239299),u=r(716250),p=r(387306),m=r(198138),h=r(122342),_=r(278287),g=r(557581),f=r(828837);let E=(0,c.P)(),y=(0,c.P)(),v=!(null==(n=window.EARLY_ARGS)?void 0:n.file_minimal_user_state),b=null,I=null,T=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,m.z$)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,p.C)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:"web.api_user_state.requested",tags:{source:e,client_visibility:document.visibilityState}})}},w=null,S=null,C=null,O=(e,t)=>{v=!0;let r=L(),n=P();return w&&r===S&&n===C||(T.reportUserStateCall(e),w=f.W.getState({orgId:r||void 0,teamId:n||void 0},t),S=r,S=n,w.then(()=>{w=null,S=null,C=null}).catch(()=>{w=null,S=null,C=null})),w},A=e=>g.J.getState(e),N=e=>{e||(e="personal"),b=e},L=()=>b?"personal"===b?null:b:b=(0,u.Gm)().org_id||null,P=()=>(I||(I=(0,u.Gm)().team_id||null),I),R="recent_user_data",k=e=>btoa(JSON.stringify(e)),D=e=>JSON.parse(atob(e)),M=e=>{B(e,!0)},F=e=>{let t=V(),r=a()(t),n=(0,h.WC)();if(r.communityProfileId=e,!l()(t,r))try{n.set(R,k(r))}catch(e){console.error("Failed to set community profile",e)}},x=e=>{B(e,!1)},U=(e,t,r)=>{B(e,!1,void 0,void 0,void 0,`${t}-${r}`)},B=(e,t,r,n,i,o)=>{if(d.Gu)return;let c=V(),p=a()(c),m=(0,h.WC)();t?p.communityUserId=e:p.fileBrowserUserId=e,void 0!==r&&(p.userIdToOrgId||(p.userIdToOrgId={}),p.userIdToOrgId[e]=r);let g=(0,u.BZ)().ps_benchmark;if(g&&(void 0!==r||void 0!==i)&&(p.userIdToPlan||(p.userIdToPlan={}),r?p.userIdToPlan[e]=[_.k.ORG,r]:i&&(p.userIdToPlan[e]=[_.k.TEAM,i])),n&&(p.communityProfileId=n),o&&(p.seenRecurringBannerIds||(p.seenRecurringBannerIds={}),p.seenRecurringBannerIds[o]=s.Z.utc().toISOString()),!l()(c,p))try{m.set(R,k(p))}catch(e){console.error("Failed to set recent workspace",e)}},V=()=>{let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{},seenRecurringBannerIds:{}},t=(0,h.WC)();try{let r=t.get(R);r&&(e=D(r))}catch(e){console.error("Failed to get recent workspace",e)}return e},G=e=>{let t=V();return t.userIdToOrgId[e]??null},H=e=>{var t;let r=V();return(null==(t=r.userIdToPlan)?void 0:t[e])??null},W=(e,t)=>{var r;let n=`${e}-${t}`,i=V();return null==(r=i.seenRecurringBannerIds)?void 0:r[n]}},456326:(e,t,r)=>{r.d(t,{KF:()=>k,Nm:()=>Y,RS:()=>Q,SU:()=>ee,Tf:()=>Z,X_:()=>U,_l:()=>et,bo:()=>K,cH:()=>F,g6:()=>x,hD:()=>en,hv:()=>er,r6:()=>X,rB:()=>D,sT:()=>z,ti:()=>M,we:()=>R,yZ:()=>H});var n=r(600486),i=r(256768),a=r(269658),o=r(716250),l=r(337167),s=r(638237),c=r(993394),d=r(286206),u=r(117986),p=r(680356),m=r(31642),h=r(313653),_=r(935174),g=r(36350),f=r(644383),E=r(218609),y=r(111120),v=r(280251),b=r(78426),I=r(640723),T=r(926143),w=r(467373),S=r(113550),C=r(158774),O=r(961215),A=r(415438),N=r(220275),L=r(795153),P=r(413810);let R="current_version",k=new s.z(40),D=(0,l.cn)(""),M=L.t1.Query({fetch:async e=>{var t;let r=e.fileKey;if(!r)return null;let i=performance.now(),a=await S.U.getPaginatedVersions({...e,fileKey:r}),o=performance.now()-i;return(0,n.L9)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:o}),(null==(t=a.data.meta)?void 0:t.versions)||[]},key:"fileVersionsPaginated"});function F(e,t,r){return`${e}-${t}-${r.id}`}function x(e,t){var r,n;let i=a.V.getState(),o=null==(r=i.openFile)?void 0:r.key,l=i.mirror.appModel.currentPage,s=null==(n=i.mirror.sceneGraph.getInternalCanvas())?void 0:n.guid,c=t??l,d=[c,s].filter(e=>!!e);if(!o||!c)return null;let u=F(o,c,e);if(k.has(u))return k.get(u);let p=new Promise((t,r)=>{B(`${e.canvas_url}&nodes_to_extract=${d.join(",")}`,e=>{t({canvas:e,key:u})},r).onerror=r});return k.set(u,p),p}function U(e){var t;let r=a.V.getState(),n=null==(t=r.openFile)?void 0:t.key,i=r.mirror.appModel.currentPage;if(!n||!i)return null;let o=F(n,i,e);k.delete(o)}function B(e,t,r){var n;let i=null,a=new XMLHttpRequest;a.open("GET",e);let l=null==(n=(0,o.ZP)().user_data)?void 0:n.id;return l&&a.setRequestHeader("X-Figma-User-ID",l),a.onload=()=>{200===a.status&&(i=new Uint8Array(a.response))},a.onloadend=()=>{null!=i?t(i):null==r||r("Failed to fetch bytes")},a.responseType="arraybuffer",a.send(),a}let V=async(e,t,r,n)=>{let i=new URLSearchParams;i.set("diff_version","2"),i.set("from_file_version_id",t),i.set("migration_version",`${r}`),n&&n.length>0&&i.set("nodes_to_diff",n.join(","));let{data:{meta:{checkpoint_diff:a}}}=await m.ZP.post(`/api/file_diff/v2/checkpoint_diff/${e}?${i.toString()}`);return a},G=async e=>{let t=new Date().getTime(),{data:r}=await m.ZP.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),i=new Date().getTime();return(0,n.L9)("versioning_performance_metrics",{name:"download_diff",durationMs:i-t},{forwardToDatadog:!0}),r};function H(e){for(let t of e.versions)if(t.id===e.activeId)return t;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}let W=async(e,t,r)=>{var i;let a=await V(t.getState().openFile.key,e,t.getState().fileVersion,r);if(!a.signed_url)return"Error viewing what's changed between file versions.";let o=!!(null==(i=t.getState().openFile)?void 0:i.canEdit),l=new Date().getTime(),[s,c]=await Promise.all([G(a.signed_url),(0,A.bM)()]),d=new Date().getTime();(0,n.L9)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:d-l,isEditor:o},{forwardToDatadog:!0});let u=O.iTB.loadHistoryChangesState(s);return u?"":"Error loading HistoryChangesState into memory."},K=(e,t)=>{if(e)return t.versions.find(t=>t.id===e)};async function z(e,t){let r=Date.now(),n=K(e,t.getState().versionHistory);if(!n)return{elapsedTime:Date.now()-r,numPagesWithChanges:0};let i=await W(n.id,t),a=Date.now()-r;if(i)throw(0,d.YD)("version diffing","error checking for visible changes",{error:i}),Error("Error checking for visible changes");return{elapsedTime:a,numPagesWithChanges:O.iTB.getPagesWithChanges().length}}let Z=(0,E.u4)(async(e,t)=>{var r;let n,a;let l=e.getState(),s=()=>{e.dispatch(y.fv({...l.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(v.aW({mode:O.oum.OFF})),s()},d=l.user;if(!(0,o.BZ)().version_diffing||!(0,o.BZ)().xr_debounce_threshold||!d||"fullscreen"!==l.selectedView.view||"whiteboard"===l.selectedView.editorType||l.mirror.appModel.topLevelMode===O.bN1.HISTORY||l.mirror.appModel.activeCanvasEditModeType===O.Nw4.COMPARE_CHANGES)return c();let{openFileKey:u}=t;try{let e=await w.h.getLastInteraction({openFileKey:u});n=e.data.meta.last_view_at,a=e.data.meta.last_edit_at}catch{c()}let p=(0,i.Z)(n),m=(0,i.Z)(a),h=p>m?p:m;if(!h.isValid()||h<(0,i.Z)().subtract(7,"days"))return c();let _=S.U.getPaginatedVersions({fileKey:u,createdAtOrBefore:h.toISOString()}),g=S.U.getPaginatedVersions({fileKey:u}),[f,E]=await Promise.all([_,g]),b=f.data.meta.versions,I=E.data.meta.versions;if(!(b.length>0&&I.length>0))return c();let T=b[0],C=I[0];if(!((0,i.Z)(C.created_at)>(0,i.Z)(T.created_at))||C.user_id===d.id||(null==(r=C.participating_users_array)?void 0:r.includes(d.handle)))return c();e.dispatch(Q()),e.dispatch(en({fromVersionId:T.id}))}),Y=(0,E.u4)(async(e,t)=>{var r;let a=e.getState(),l=a.user;if(!(0,o.BZ)().version_diffing||!(0,o.BZ)().version_diffing_notification||!l||"fullscreen"!==a.selectedView.view||"whiteboard"===a.selectedView.editorType||a.mirror.appModel.topLevelMode===O.bN1.HISTORY||a.mirror.appModel.activeCanvasEditModeType===O.Nw4.COMPARE_CHANGES)return;let{openFileKey:s}=t,c=(0,i.Z)(t.versionHistory.lastEdited),d=(0,i.Z)(t.versionHistory.lastViewed),u=d>c?d:c;if(!u.isValid()||u<(0,i.Z)().subtract(7,"days"))return;let m=Date.now(),h=S.U.getPaginatedVersions({fileKey:s,pageSize:1,createdAtOrBefore:u.toISOString()}),_=S.U.getPaginatedVersions({fileKey:s,pageSize:1}),[g,f]=await Promise.all([h,_]),E=g.data.meta.versions,y=f.data.meta.versions;if(E.length>0&&y.length>0){let t=E[0],a=y[0];if((0,i.Z)(a.created_at)>(0,i.Z)(t.created_at)&&a.user_id!==l.id&&!(null==(r=a.participating_users_array)?void 0:r.includes(l.handle))){let r={fileKey:s,eventId:(0,p.k)(),lastEdited:c.toISOString(),lastViewed:d.toISOString(),lastSeenVersion:t.id,lastSeenCreatedAt:t.created_at,latestVersion:a.id,latestCreatedAt:a.created_at};(0,n.L9)("Version Diffing Changed Since Last View",{...r,durationMs:Date.now()-m},{forwardToDatadog:!0}),e.dispatch(q({lastSeenVersionId:t.id,trackingProps:r}))}}}),j=null;function $(e,t,r,n,i){if(!e.canvas_url)return"Couldn't get this version from version history.";{let a=r.size>0,o=n,s=!1,c=e.canvas_url,d=t.getState().mirror.appModel.currentPage;if("LOAD_NEW_VERSION"===i&&d&&(o=d),s=!r.has(o))c+=`&nodes_to_extract=${o}`;else{t.dispatch(b.Md({isLoadingPage:!1}));return}if(c){let e=t.getState().selectedView;N.Z.markVersionHistoryLoadStart(e.fileKey,e.nodeId,i);let d=B(c,i=>{if(d===j){var c;j=null;let d=t.getState().selectedView.editorType;if((c=t.getState().mirror.appModel.topLevelMode)===O.bN1.HISTORY||c===O.bN1.DEV_HANDOFF){if(a)O.iTB.applyFileToCurrentScene(i);else{l.n_.set(D,"");let e=O.iTB.loadFigFileForPreview(i);if(!e)return"Error loading this version into memory."}N.Z.markVersionHistoryLoadEnd();let c=t.getState().selectedView.fileKey;N.Z.report(c,"whiteboard"===d?"figjam":"design"===d?"design":"unknown"),s&&(r.add(o),t.dispatch(b.C5({fetchedPageIds:r})),t.dispatch(b.Md({isLoadingPage:!1}))),e.nodeId&&e.nodeId!==n&&I.t4([e.nodeId]),t.dispatch(v.aW({mode:O.oum.OFF}))}}});j=d}}return""}let q=(0,E.u4)(async(e,t)=>{let r,i;let{lastSeenVersionId:a,trackingProps:o}=t;try{let t=await z(a,e);r=t.elapsedTime,i=t.numPagesWithChanges}catch(e){return}if(0===i){(0,n.L9)("Version Diffing Notification Skipped",{...t.trackingProps,pagesWithChanges:0,durationMs:r},{forwardToDatadog:!0});return}(0,n.L9)("Version Diffing Notification Shown",{...t.trackingProps,pagesWithChanges:i,durationMs:r},{forwardToDatadog:!0}),e.dispatch(g.X.enqueueFront({notification:{type:_.k.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,n.L9)("Version Diffing Notification Opened",o),e.dispatch(Q()),e.dispatch(en({fromVersionId:a}))},dismissCallback:()=>{(0,n.L9)("Version Diffing Notification Dismissed",o)}}}))}),X=(0,E.u4)((e,{direction:t})=>{let r=e.getState(),n=(0,P.UE)(r.selectedView);n&&!r.versionHistory.loading&&(e.dispatch(b.o4({loading:!0})),(0,c.V6)(`/api/versions/${n}`,30,r.versionHistory,t).then(r=>{n===(0,P.UE)(e.getState().selectedView)&&e.dispatch(b.R3({history:r,direction:t}))}))}),J=(0,E.u4)(e=>{e.dispatch(b.A_()),e.dispatch(X({direction:c.V$}))}),Q=(0,E.u4)((e,t)=>{C.Gr.triggerAction("enter-history-mode"),C.Gr.triggerAction("deselect-all"),e.dispatch(J()),(0,n.L9)("Toggle Version History",{source:(null==t?void 0:t.source)||null})}),ee=(0,E.u4)(e=>{var t;e.dispatch(et({id:R})),e.dispatch(en({fromVersionId:void 0})),e.dispatch(f.R.dequeue({matchType:"versions"})),e.dispatch(f.R.dequeue({matchType:"view_changes"})),e.dispatch(v.aW({mode:O.oum.OFF})),O.iTB.exitVersionHistoryMode((null==(t=e.getState().openFile)?void 0:t.canEdit)??!1)}),et=(0,E.u4)((e,t)=>{if(t.id===R){l.n_.set(D,""),O.iTB.loadFigFileForPreview(new Uint8Array);let r=e.getState();e.dispatch(y.fv({...r.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(b.Iv({id:t.id}));return}e.dispatch(b.Iv({id:t.id}));let r=e.getState(),n=H(r.versionHistory);if(!n)return;e.dispatch(y.fv({...r.selectedView,compareVersionId:void 0}));let i=e.getState().mirror.appModel.currentPage,a=t.eventType,o=$(n,e,new Set,i,a);if(o){e.dispatch(h.l.error(o));return}}),er=(0,E.u4)((e,t)=>{let r=t.version,n=t.currentPageNodeId,i=t.fetchedPageIds,a=t.eventType,o=$(r,e,i,n,a);if(o){let t=`[${a}] Failed load fig file for preview: ${o}`;(0,d.Jz)(u.k.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${t}`)),e.dispatch(h.l.error(o));return}e.dispatch(b.fm({version:t.version}))}),en=(0,E.u4)(async(e,t)=>{if(!(0,o.BZ)().version_diffing){e.dispatch(b.jb(t));return}let r=t.fromVersionId;if(!r)return;let i=K(r,e.getState().versionHistory);if(!i)return;let a=new Date().getTime(),l=await W(i.id,e);if(l){e.dispatch(h.l.error(l));return}let s=new Date().getTime(),c=e.getState().selectedView.editorType,d=T.I[T.I.COMPARE_CHANGES];if((0,n.L9)("versioning_performance_metrics",{name:"load_diff",durationMs:s-a,fromCheckpointKey:i.checkpoint_key,nodesToDiff:"all",editorType:c,source:d},{forwardToDatadog:!0}),i.canvas_url){let e=O.iTB.getChangesToCompareFromHistoryChangesState();if(e.size>0){let t=Array.from(e).join(","),r=`${i.canvas_url}&nodes_to_extract=${t}`;B(r,e=>{O.iTB.loadPartialHistoryScene(e)})}}let u=function(){let e=O.iTB.startComparingChanges();return e?"":"Error starting history compare"}();if(u){e.dispatch(h.l.error(u));return}let p=e.getState();e.dispatch(y.fv({...p.selectedView,compareVersionId:r,compareLatest:void 0})),(0,n.L9)("Version History Compare Start",{fromVersionId:r}),e.dispatch(b.jb(t))})},845825:(e,t,r)=>{r.d(t,{OQ:()=>d,Re:()=>c,hP:()=>s});var n=r(652983),i=r(407908),a=r(864974),o=r(961215),l=r(488383);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"},c=()=>{let e=(0,i.I0)(),t=(0,i.v9)(e=>e.multiplayer.observingSessionID),r=(0,i.v9)(e=>e.multiplayer.sessionID),l=(0,n.useCallback)(function(n){if(!n||!n.sessionID)return;try{o.B9x.observeUser(n.sessionID)}catch{return}let i=t!==n.sessionID&&r!==n.sessionID;i&&e(a.v({aware_of_observation_mode:!0}))},[t,r,e]);return l};function d(){let[e,t]=n.useState(null),r=(0,i.v9)(e=>e.voice.showWidget);return n.useEffect(()=>{r&&!e&&t(l.Q.getInstance())},[r,e]),e}},289025:(e,t,r)=>{r.d(t,{aI:()=>c,rC:()=>d,t6:()=>u});var n=r(652983),i=r(407908),a=r(600486),o=r(809988),l=r(970740),s=r(154831);let c="audio-paywall-key",d=(()=>{let e=!0,t=!1;return r=>{t||setTimeout(()=>{r>0&&e?(e=!1,(0,a.L9)("Context Viewed",{name:"join-call-with-others"})):e||0!==r||(t=!0,(0,a.L9)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})();function u(){let e;let t=(0,i.v9)(e=>e.openFile),{userIdsInCall:r}=(0,s.OP)(t.key),a=(0,s.Xt)(r,t.key),c=a.map(e=>e.name);e=c.length>3?[...c.slice(0,2),(0,l.t)("collaboration.voice.n_others",{numUsers:c.length-2})]:c;let d=n.createElement(o.x,null,e);return n.createElement(l.Tx,{id:"collaboration.voice.are_talking_in_this_file",numVoiceUsers:e.length,voiceUserNames:d,joinText:n.createElement("b",null,n.createElement(l.Tx,{id:"collaboration.voice.join_lower"}))})}},488383:(e,t,r)=>{r.d(t,{Q:()=>I,R:()=>E});var n=r(600486),i=r(239299),a=r(716250),o=r(571529),l=r(344650),s=r(286206),c=r(117986),d=r(448694),u=r(532928),p=r(53481),m=r(166595),h=r(559511),_=r(276537),g=r(157506);let f=e=>e>.1,E=.05,y=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),v=0,b=class{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,h._)({}),this.activeSpeakerIdStore=(0,h._)(null),this.recentlySpokeIdStore=(0,h._)(null),this.setMicrophone=async e=>{var t,r;try{null==(t=this.unpublishedLocalAudioTrack)||t.setDevice(e.deviceId),await (null==(r=this.localAudioTrack)?void 0:r.setDevice(e.deviceId)),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{var t;try{null==(t=this.client)||t.remoteUsers.forEach(t=>{var r;return null==(r=t.audioTrack)?void 0:r.setPlaybackDevice(e.deviceId)}),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>{var t;return null==(t=this.AgoraRTC)?void 0:t.getPlaybackDevices(e)},this.currentMicrophone=async()=>{var e;return this.microphone||(null==(e=await this.getMicrophones())?void 0:e[0])},this.currentPlaybackDevice=async()=>{var e;return this.playbackDevice||(null==(e=await this.getPlaybackDevices())?void 0:e[0])},this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let t of this.client.remoteUsers){let r=await this.getDecryptedUserId(t.uid);r&&e.push(r)}return e.push(this.userId),e},this.startPollingMicState=()=>{i.YO&&(this.microphonePermissionDenied&&i.YO.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{var e,t;this.client&&(null==(e=i.YO)||e.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),null==(t=i.YO)||t.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>{var e;return null==(e=this.client)?void 0:e.localTracks.some(e=>{var t;return e.getTrackId()===(null==(t=this.localAudioTrack)?void 0:t.getTrackId())})},this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{var e,t;if(!this.client||!this.userId)return;let r={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let t of this.client.remoteUsers){let n=await this.getDecryptedUserId(t.uid);if(!n)continue;let i=(null==(e=t.audioTrack)?void 0:e.getVolumeLevel())||0,a=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(a||0)+i,r[n]={isMuted:!t.audioTrack,volumeLevel:i}}let n=(null==(t=this.localAudioTrack)?void 0:t.getVolumeLevel())||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+n,r[this.userId]={isMuted:this.isMuted,volumeLevel:n},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(r),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{var e;this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&(null==(e=this.callEventCallback)||e.call(this,g.nP.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED))},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>E).sort((e,t)=>e[1]>t[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,t)=>e[1]>t[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{var e,t,r,n;u.bL.sendVoiceMetadata(""),this.stopPollingVolumeData(),null==(e=i.YO)||e.setIsInVoiceCall(!1),null==(t=i.YO)||t.setUsingMicrophone(!1),null==(r=this.localAudioTrack)||r.setEnabled(!1),null==(n=this.unpublishedLocalAudioTrack)||n.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{var t;(null==(t=this.microphone)?void 0:t.deviceId)===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{var t;(null==(t=this.playbackDevice)?void 0:t.deviceId)===e.device.deviceId&&"INACTIVE"===e.state&&o.ZP.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new p.D,this.audioCaptionStream=new m.F,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,a.BZ)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,a.BZ)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),y[v++%y.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((e,t)=>{let r=document.createElement("script");r.src="https://static.figma.com/uploads/0706b46bdc09a419282285b791ea1dd3c019ecd6",r.setAttribute("nonce",(0,a.Gm)().csp_nonce),r.onload=()=>{let t=window.AgoraRTC;this.instance=new b(t),e()},r.onerror=()=>{t(Error("Provider audio script load error"))},document.body.appendChild(r)})}static getInstance(){return this.instance}static leave(){var e;null==(e=this.instance)||e.leave()}async join({appId:e,callId:t,token:r,callUserId:a,userId:l,encryptionKey:s,userEncryptionKey:c,setParticipantIdsCallback:u,callEventCallback:p,store:m,fileKey:h}){var _,g,f,E,y;await this.setMicrophonePermissions();let v=this.getSystemCompatibility();if(!v)throw Error("System incompatible");this.setParticipantIdsCallback=u,this.userId=l,this.userEncryptionKey=c,this.callEventCallback=p;try{let n="vp8";o.ZP.safari&&+o.ZP.version>=13&&(n="h264"),await (null==(_=this.client)?void 0:_.leave()),this.client=this.AgoraRTC.createClient({mode:"live",codec:n}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=l,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",s),this.attachClientListeners(t,r,l,s,p),await this.client.join(e,t,r,a),null==(g=i.YO)||g.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:null==(f=this.microphone)?void 0:f.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:null==(E=this.microphone)?void 0:E.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(i){(0,n.L9)("Voice Call - Error",{callId:t,token:r,userId:l,encryptionKey:s,message:`${i.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let e=Error(`Error joining call: ${i.message}`);throw await b.leave(),e}finally{(0,d.hp)("voice_user_joined",h,m.getState(),{callId:t,userId:l,encryptionKey:s,captions_enabled:this.captionsToggleEnabled}),((null==(y=this.client)?void 0:y.connectionState)!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){var e;return null==(e=this.client)?void 0:e.uid}async renewToken(e){var t,r,i;await (null==(t=this.client)?void 0:t.renewToken(e)),this.handlingTokenExpiration=!1,(0,n.L9)("Voice Call - Token Renewed",{token:e,userId:(null==(r=this.client)?void 0:r.uid)&&this.decryptedUserMap[null==(i=this.client)?void 0:i.uid]})}async leave(){var e;await (null==(e=this.client)?void 0:e.leave()),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){var e,t,r;await (null==(e=this.localAudioTrack)?void 0:e.setEnabled(!1)),this.audioCaptionQueues.removeTrack(this.userId,null==(t=this.localAudioTrack)?void 0:t.getMediaStreamTrack()),null==(r=i.YO)||r.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){var e,t,r;await (null==(e=this.localAudioTrack)?void 0:e.setEnabled(!0)),(0,_.y9)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,null==(t=this.localAudioTrack)?void 0:t.getMediaStreamTrack()),null==(r=i.YO)||r.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){var t;(0,_.y9)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(null==(t=this.client)||t.remoteUsers.forEach(async e=>{var t;let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,null==(t=e.audioTrack)?void 0:t.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&f(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,t,r,a,o){var l,s,c,d,p,m,h,f,E,y;null==(l=this.client)||l.removeAllListeners(),null==(s=this.client)||s.on("user-published",async(e,t)=>{var r;if(await (null==(r=this.client)?void 0:r.subscribe(e,t)),"audio"===t){let t=e.audioTrack||null;if(null==t||t.play(),this.playbackDevice&&(null==t||t.setPlaybackDevice(this.playbackDevice.deviceId)),(0,_.y9)()&&t&&this.streamingAudioForCaptions){let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,t.getMediaStreamTrack())}}}),null==(c=this.client)||c.on("user-unpublished",async(e,t)=>{var r,n;if(!i.YO||"audio"!==t)return;let a=await this.getDecryptedUserId(e.uid);if(!a)return;let o=new Set;for(let t of(null==(r=this.client)?void 0:r.remoteUsers)||[]){let r=await this.getDecryptedUserId(t.uid),i=null==(n=e.audioTrack)?void 0:n.getMediaStreamTrack().id;r===a&&i&&o.add(i)}this.audioCaptionQueues.removeUnpublishedTrack(a,o)});let v=!0;null==(d=this.client)||d.on("network-quality",function(i){v&&(i.downlinkNetworkQuality>=4||i.uplinkNetworkQuality>=4)?((0,n.L9)("Voice Call - Bad Call Quality",{callId:e,token:t,userId:r,encryptionKey:a,message:`Bad call quality detected. downlink = ${i.downlinkNetworkQuality}, uplink = ${i.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),v=!1):v=!0}),null==(p=this.client)||p.on("user-joined",async e=>{var t;null==(t=this.setParticipantIdsCallback)||t.call(this,await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&o(g.nP.USER_JOINED,r)}),null==(m=this.client)||m.on("user-left",async e=>{var t;null==(t=this.setParticipantIdsCallback)||t.call(this,await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&o(g.nP.USER_LEFT,r)}),null==(h=this.client)||h.on("connection-state-change",async t=>{var r;let n;switch(t){case"CONNECTED":if(u.bL.sendVoiceMetadata(e),null==(r=this.setParticipantIdsCallback)||r.call(this,await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=g.nP.CONNECTED_WITH_MIC_DISABLED;break}n=g.nP.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=g.nP.DISCONNECTED;break;case"CONNECTING":n=g.nP.CONNECTING;break;case"DISCONNECTING":n=g.nP.DISCONNECTING;break;case"RECONNECTING":n=g.nP.RECONNECTING}void 0!==n&&o(n)}),null==(f=this.client)||f.on("exception",i=>{let l;switch(i.code){case 2001:if(this.microphonePermissionDenied)break;l=g.nP.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=g.nP.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=g.nP.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=g.nP.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=g.nP.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=g.nP.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=g.nP.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=g.nP.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&o(l),i.code>=3e3?(console.error(i),(0,n.L9)("Voice Call - Error",{callId:e,token:t,userId:r,encryptionKey:a,message:i.msg,code:i.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):(0,n.L9)("Voice Call - Error",{callId:e,token:t,userId:r,encryptionKey:a,message:i.msg,code:i.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),null==(E=this.client)||E.on("token-privilege-will-expire",()=>{var i;if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!(null==(i=this.client)?void 0:i.remoteUsers.length)){o(g.nP.CALL_INACTIVE),(0,n.L9)("Voice Call - Token Will Expire",{callId:e,token:t,userId:r,encryptionKey:a,callInactive:!0});return}o(g.nP.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),(0,n.L9)("Voice Call - Token Will Expire",{callId:e,token:t,userId:r,encryptionKey:a})}}),null==(y=this.client)||y.on("token-privilege-did-expire",()=>{o(g.nP.TOKEN_EXPIRED),(0,n.L9)("Voice Call - Token Did Expire",{callId:e,token:t,userId:r,encryptionKey:a})})}async getDecryptedUserId(e){var t;try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,l.FQ)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,s.Jz)(c.k.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),null==(t=this.callEventCallback)||t.call(this,g.nP.ERROR)}}async setMicrophonePermissions(){if(i.YO){this._microphonePermissionDenied=!await i.YO.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}},I=b;I.instance=null},154831:(e,t,r)=>{r.d(t,{OP:()=>m,Xt:()=>_,eF:()=>h});var n=r(652983),i=r(407908),a=r(391320),o=r(626650),l=r(9247),s=r(516788),c=r(532928),d=r(102170),u=r(70918);function p(){let e=(0,i.v9)(e=>e.multiplayer),t=e.allUsers,r=c.bL.useVoiceMetadataBySessionId();function n(e,t){return e.sessionID===t.sessionID&&e.sawMouse===t.sawMouse&&e.deviceName===t.deviceName&&e.name===t.name&&e.imageURL===t.imageURL}let a=(0,o.sp)(()=>t.filter(e=>{var t;return null==(t=r[e.sessionID])?void 0:t.connectedCallId}),[t,r],n),l=(0,o.sp)(()=>t.filter(e=>{var t;return!(null==(t=r[e.sessionID])?void 0:t.connectedCallId)}),[t,r],n);return{multiplayerUsersInVoiceCall:a,multiplayerUsersNotInVoiceCall:l}}let m=(e,t)=>{let r=(0,u.xJ)(),a=(0,i.v9)(e=>e.multiplayer.deviceNameFilter),o=(0,i.v9)(t=>e&&t.voice.activeCall[e]),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:c}=p(),m=(0,i.v9)(e=>e.voice.userIdsInCallFromProvider),[h,_]=(0,n.useState)(new Set),[g,f]=(0,n.useState)([]),[E,y]=n.useState(),v=(0,l.D)(o);return n.useEffect(()=>{o&&!v&&!E&&t&&(y(!0),setTimeout(()=>{y(!1)},2e3))},[o,v,t,E]),n.useEffect(()=>{!function(){if(o&&m.length>1&&!E){let e=new Set(m);_(e);let t=[];for(let r of[...c,...s])e.has(r.userID)||t.push(r);f((0,d._5)(t,a))}else _(new Set(s.map(e=>e.userID))),f((0,d._5)(c,a))}()},[o,s,c,r,a,m,E]),{userIdsInCall:h,usersNotInCall:g}};function h(e,t){let r=(0,i.I0)(),{multiplayerUsersInVoiceCall:o,multiplayerUsersNotInVoiceCall:l}=p(),c=n.useMemo(()=>o.reduce((e,t)=>({...e,[t.userID]:t.userID in e?e[t.userID].add(t):new Set([t])}),{}),[o]),d=n.useMemo(()=>l.reduce((e,t)=>({...e,[t.userID]:t.userID in e?e[t.userID].add(t):new Set([t])}),{}),[l]),u=(0,i.v9)(e=>t&&t in e.activeFileUsers?e.activeFileUsers[t]:void 0,i.wU),m=(0,i.v9)(e=>e.voice.voiceUsersById),[h,_]=(0,n.useState)([]),[g,f]=(0,n.useState)([]),[E,y]=(0,n.useState)([]);return n.useEffect(()=>{let t=[],r=[],n=[];for(let i of e)if(i in c)r.push(...c[i]);else if(i in d)r.push(...d[i]);else if(u&&i in u){let e=u[i];t.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else i in m?t.push(m[i]):n.push(i);(0,a.qt)(E,r)||y(r),(0,a.qt)(g,t)||f(t),(0,i.wU)(h,n)||_(n)},[u,e,c,d,m,h,E,g]),n.useEffect(()=>{t&&h.length>0&&r(s.tP({fileKey:t,userIds:h}))},[h,r,t]),{voiceUsersInMultiplayer:E,voiceUsersNotInMultiplayer:g}}function _(e,t){let{voiceUsersInMultiplayer:r,voiceUsersNotInMultiplayer:i}=h(e,t),a=n.useMemo(()=>[...r,...i],[r,i]);return a}},276537:(e,t,r)=>{r.d(t,{Jw:()=>g,Pn:()=>y,RM:()=>v,SN:()=>f,hn:()=>_,oo:()=>h,vj:()=>b,y9:()=>E});var n,i=r(652983),a=r(407908),o=r(239299),l=r(9247),s=r(571529),c=r(484188),d=r(516788),u=r(841017),p=r(157506);let m=()=>!((0,s.Dv)()||(0,s.dB)()),h=()=>{let e=(0,a.v9)(e=>e.openFile),t=(0,a.v9)(e=>e.orgById),r=(0,a.v9)(e=>e.teams),n=null==e?void 0:e.key,o=(0,a.v9)(e=>n&&!!e.voice.activeCall[n]),[s,c]=i.useState(!1),d=(0,l.D)(s);return i.useEffect(()=>{let n=m()&&4===g({openFile:e,teams:r,orgById:t}),i=!0===d&&!n&&o;i||c(n)},[e,t,r,d,o]),s};var _=((n=_||{})[n.FEATURE_DISABLED=0]="FEATURE_DISABLED",n[n.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",n[n.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",n[n.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",n[n.ELIGIBLE=4]="ELIGIBLE",n);function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let t=e.openFile;if(!t||!t.parentOrgId&&!t.teamId)return 0;if(t.parentOrgId){let r=e.orgById[t.parentOrgId];return r?r.voice_enabled?4:1:0}if(t.teamId){let r=e.teams[t.teamId];return r?(0,u.cU)(r)?4:3:0}return 2}function f(){var e;return(null==(e=(0,c.Kd)())?void 0:e.getPrimaryLocale(!0))==="en"}function E(){return!!o.YO}function y(e){return e>=p.kI.STARTED&&e<p.kI.DONE}function v(e){return e<p.kI.NOT_STARTED}function b(e,t){var r;null==(r=o.YO)||r.setCaptionsEnabled(t),e(d.BF(t))}},973834:(e,t,r)=>{r.d(t,{LI:()=>i,M:()=>l,VK:()=>a,bq:()=>o});var n=r(652983);function i(e,t){let[r,i]=(0,n.useState)(null),[a,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(t&&!a){let r=function(t){i(t[e]||null)};return t.volumeLevelsStore.subscribe(r),o(!0),()=>{t.volumeLevelsStore.unsubscribe(r),o(!1)}}},[t]),t)?r:null}function a(e,t,r){let n=t=>{r(t[e]||null)};return t&&t.volumeLevelsStore.subscribe(n),{unsubscribe:()=>null==t?void 0:t.volumeLevelsStore.unsubscribe(n)}}function o(e,t){let[r,i]=(0,n.useState)(),[a,o]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(t&&!a){let r=function(t){var r;i(null==(r=t[e])?void 0:r.isMuted)};return t.volumeLevelsStore.subscribe(r),o(!0),()=>{t.volumeLevelsStore.unsubscribe(r),o(!1)}}},[t]),t)return r}function l(e){let[t,r]=(0,n.useState)(null),[i,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(e&&!i){let t=function(e){r(e)};return e.recentlySpokeIdStore.subscribe(t),a(!0),()=>{e.recentlySpokeIdStore.unsubscribe(t),a(!1)}}},[e]),t}},678910:(e,t,r)=>{r.d(t,{$e:()=>S,Do:()=>A,Ek:()=>c,Fp:()=>T,H1:()=>O,Hq:()=>n,K$:()=>b,O2:()=>v,OB:()=>h,Pu:()=>s,QE:()=>y,Tc:()=>u,Y9:()=>E,_g:()=>P,dB:()=>f,dH:()=>d,e9:()=>p,fP:()=>g,gY:()=>m,hX:()=>w,o3:()=>N,q0:()=>I,qV:()=>L,st:()=>C,u6:()=>_});var n,i=r(286206),a=r(680356),o=r(493866);function l(e){window.parent.postMessage(e,"*")}function s(){l({type:"FIGMA_READY"})}function c(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function d(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function u(e){l({type:"TEXT",data:{text:e}})}function p(e,t){l({type:"LAYERS",data:{rootNodeId:e,layers:t}})}function m(e){l({type:"ASSET",data:{asset:e}})}function h(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function _(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function g(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function f(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function E(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function y(e){l({type:"GENERATED_CODE",data:{sections:e}})}function v(e){l({type:"OPEN_RELATED_LINK",data:{href:e}})}function b(){l({type:"CREATE_FILE_LINK"})}let I=(0,o.t)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function T(e){l({type:"FILE_NAME",data:{name:e}})}function w(){l({type:"OPEN_AUTOCOMPLETE_LINE_SETTINGS"})}function S(){l({type:"OPEN_AUTOCOMPLETE_BLOCK_SETTINGS"})}function C(e,t,r){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:t,thumbnailSize:r}})}function O(){l({type:"PAGE_LOADED"})}function A(){l({type:"IDLE_LOGOUT"})}function N(){l({type:"GO_BACK_TO_INDEX_PAGE"})}(e=>{e.sendGetLocalFileExtensionManifest=function(e){return L.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,t){return L.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:t}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return L.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return L.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return L.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return P.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return P.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return P.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return L.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return L.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return L.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return L.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(n||(n={}));let L=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let t=(0,a.k)(),r={...e,requestId:t};return new Promise((e,n)=>{this.pendingMessagesById[t]={...r,resolve:e,reject:n},l(r)})}resolveMessage(e){let t=this.pendingMessagesById[e.requestId];if(!t){(0,i.YD)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(t.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},P=new class{constructor(){this.callbacksById={}}registerCallback(e,t){let r=(0,a.k)();this.callbacksById[r]=t;let n={...e,callbackId:r};return l(n),()=>this.cancelCallback(r)}resolveMessage(e){let t=this.callbacksById[e.callbackId];if(!t){(0,i.YD)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}t(e.callbackData)}async cancelCallback(e){await L.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},124120:(e,t,r)=>{r.d(t,{KD:()=>l,i7:()=>o,pv:()=>i,yl:()=>a});var n=r(538483);let i=e=>`WORKSPACE_GET_${e}`;function a(e){let t={};return e.forEach(e=>{let r=e.workspace_id??n.F;t[r]=(t[r]??0)+1}),t}let o=(e,t)=>`${location.origin}/files/${t?t+"/":""}workspace/${e}/directory/teams`;function l(e){let t={},r=0,n=0;return e.forEach(e=>{if(e.workspace_id){let r=t[e.workspace_id]??0;r++,t[e.workspace_id]=r}else e.team_id?r++:n++}),{libraryCountByWorkspaceId:t,unassignedLibrariesCount:r,draftLibrariesCount:n}}},81340:(e,t,r)=>{r.d(t,{Qo:()=>O,ZP:()=>R,_0:()=>A,op:()=>L});var n=r(448501),i=r(716250),a=r(573196),o=r(215698),l=r(244311),s=r(721154),c=r(111120),d=r(266377),u=r(280251),p=r(614261),m=r(225592),h=r(448694),_=r(838903),g=r(278832),f=r(392665),E=r(898080),y=r(413810),v=r(134765),b=r(242030),I=r(257817),T=r(100304),w=r(902736),S=r(873546),C=r(219332);function O(e,t){return null==e||null==t?e!==t:y.Pm.requireHistoryChange(e,t)}let A=(e,t)=>y.Pm.selectedViewHasMissingResources(e,t),N=(e,t)=>new S.Sw().selectedViewMissingResourceType(e,t),L=!1,P=0,R=e=>t=>function(r){var S,R,k,D,M;let F=e.getState().selectedView;t(r);let x=e.getState();if(c.ZB.matches(r)){L=!0;let t=x.selectedView;if(t===w.r_&&(t=(0,i.ZP)().selected_view||(0,y.eP)(x,n.default.location.pathname,n.default.location.search,n.default.location.hash)),"fullscreen"===t.view&&t.fileKey){let{fileKey:r}=t,n=e.getState().fileByKey[r];n&&(0,I.On)(t.editorType)!==n.editor_type&&(t.editorType=n.editor_type??"design")}if(A(x,t)&&(t={view:"resourceUnavailable",resourceType:N(x,t)}),"teamUpgrade"===t.view&&t.teamId){let e=x.teams[t.teamId];e&&e.pro_team&&!(0,E.iH)(e)&&(t={view:"team",teamId:t.teamId,teamViewTab:T.x.SETTINGS})}t!==w.r_?e.dispatch(c.fv(t)):(null==(S=x.user)?void 0:S.drafts_folder_id)?e.dispatch(c.fv({view:"folder",folderId:x.user.drafts_folder_id})):e.dispatch(c.fv({view:"recentFiles"}))}else if(u.OJ.matches(r)){let e={view:"fullscreen",fileKey:r.payload.file.key,editorType:r.payload.fullscreenEditorType},t=(0,y.np)(x,e);n.default.replace(t,{...e,jsCommitHash:(0,g.Ir)()})}else if(c.fv.matches(r)){if("prototype"!==F.view&&"prototype"===r.payload.view&&(0,C.Y)()){let e=(0,y.np)(x,r.payload);n.default.redirect(e)}"fullscreen"===r.payload.view&&("fullscreen"!==F.view||r.payload.editorType!==F.editorType)&&f.hT(r.payload.editorType);let{selectedView:t}=e.getState(),o="inlinePreview"in t&&t.inlinePreview;if(!o&&!r.payload.fromPopstate){let t=(0,y.np)(x,r.payload);if(n.default.location.pathname+n.default.location.search!==t){("fullscreen"!==r.payload.view||r.payload.fileKey!==(null==(R=(0,i.ZP)().editing_file)?void 0:R.key))&&!b.iF&&(0,v.$)()&&(0,b.K3)("fileBrowserHistory middleware selectView").then(t=>{e.dispatch(c.ZB(t.data.meta))});let a=!r.payload.forceReplaceState&&n.default.location.state&&O(F,r.payload);a?n.default.push(t,{...r.payload,previousSelectedView:F,jsCommitHash:(0,g.Ir)()}):n.default.replace(t,{...r.payload,previousSelectedView:F,jsCommitHash:(0,g.Ir)()})}else null==n.default.location.state&&n.default.replace(t,{...r.payload,previousSelectedView:F,jsCommitHash:(0,g.Ir)()});(null==(M=null==(D=null==(k=e.getState())?void 0:k.user)?void 0:D.appData)?void 0:M.loggedOut)&&"fullscreen"!==r.payload.view&&n.default.reload("User Logged out")}"searchAndBrowse"===r.payload.subView?(0,g.x6)((0,a.Kw)(r.payload.data)):(0,g.Ch)(x,r.payload)}else if(o.ZL.matches(r)&&"hubFile"===x.selectedView.subView)(0,g.Ch)(x,{hubFileId:r.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(l.jb.matches(r)){let t=e.getState().selectedView,i=r.payload.publishedPlugins,a=t&&"communityHub"===t.view&&"plugin"===t.subView&&t.publishedPluginId;if(a&&i&&i.some(e=>e.id===a)){if(n.default){let e=(0,y.np)(x,t);n.default.replace(e,{...t,jsCommitHash:(0,g.Ir)()})}(0,g.Ch)(x,t)}}else if(d.gz.matches(r)){let t=e.getState().selectedView;"folder"===t.view&&t.folderId===r.payload.folder.id&&(0,g.Ch)(x,t)}else if(d.v_.matches(r)){let t=e.getState().selectedView;if("folder"===t.view&&t.folderId===r.payload.id){(0,g.Ch)(x,t);let e=(0,y.np)(x,t);n.default.replace(e,{...t,jsCommitHash:(0,g.Ir)()})}}else if(p.gz.matches(r)){let t=e.getState().selectedView;if("fullscreen"===t.view){let e=t.fileKey&&x.fileByKey[t.fileKey];if(e){let i=(0,_.Xd)(e,x.repos);if(i&&i.id===r.payload.repo.id){(0,g.Ch)(x,t);let e=(0,y.np)(x,t);n.default&&n.default.replace(e,{...t,jsCommitHash:(0,g.Ir)()})}}}}else if(s.gz.matches(r)){let t=e.getState().selectedView,i="fullscreen"===t.view&&r.payload.file.key===t.fileKey||"prototype"===t.view&&r.payload.file.key===t.file.key;if(i){(0,g.Ch)(x,t);let e=(0,y.np)(x,t);n.default&&n.default.replace(e,{...t,jsCommitHash:(0,g.Ir)()})}}else if(m.dR.matches(r)){let t=e.getState().selectedView;(null==t?void 0:t.view)==="search"&&(n.default.replace((0,y.np)(x,t),{...t,jsCommitHash:(0,g.Ir)()}),(0,g.Ch)(x,t))}else c.D5.matches(r)?(0,h.iP)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:r.payload.clickedResourceType,resourceIdOrKey:r.payload.resourceIdOrKey}):0===P&&(P=setTimeout(function(){P=0,null===e.getState().selectedView&&e.dispatch(c.fv({view:"recentFiles"}))},0));return r}},892061:(e,t,r)=>{r.d(t,{DZ:()=>s,kh:()=>l,py:()=>o});var n,i,a,o=((n=o||{})[n.CURRENT_USER=0]="CURRENT_USER",n[n.TEAM=1]="TEAM",n[n.ORG=2]="ORG",n[n.WORKSPACE=3]="WORKSPACE",n),l=((i=l||{})[i.INIT=0]="INIT",i[i.POSITIONING=1]="POSITIONING",i[i.UPLOADING=2]="UPLOADING",i),s=((a=s||{})[a.SMALL=120]="SMALL",a[a.LARGE=500]="LARGE",a)},3342:(e,t,r)=>{r.d(t,{P:()=>a,s:()=>o});var n,i=r(255267),a=((n=a||{}).ALL="All",n.STICKERS_AND_COMPONENTS="Stickers",n.TEMPLATES="Templates",n.TEAM_TEMPLATES="TeamTemplates",n.WIDGETS="Widgets",n.PLUGINS="Plugins",n.MORE="More",n.ORG_FACE_STAMPS="OrgFaceStamps",n.COLOR_PALETTES="ColorPalettes",n);let o=e=>{switch(e){case i.E.ALL:return"universal-insert-figjam-all";case i.E.TEMPLATES:return"universal-insert-figjam-templates";case i.E.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case i.E.WIDGETS:return"universal-insert-figjam-widgets";case i.E.PLUGINS:return"universal-insert-figjam-plugins";case i.E.MORE:return"universal-insert-figjam-more";case i.E.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},336980:(e,t,r)=>{r.d(t,{Fo:()=>o,TX:()=>n,bE:()=>i});let n="f195f195-f195-f195-f195-f195f195f195",i=9;var a,o=((a=o||{}).DEFAULT="DEFAULT",a.CUSTOM="CUSTOM",a)},646472:(e,t,r)=>{r.d(t,{$M:()=>R,F4:()=>U,Jt:()=>W,M4:()=>G,O7:()=>C,Q8:()=>b,QN:()=>L,RX:()=>v,S9:()=>H,X9:()=>S,Xh:()=>y,_4:()=>k,_g:()=>T,bH:()=>D,fu:()=>V,gH:()=>z,l8:()=>I,mX:()=>w,ow:()=>F,sg:()=>M,sq:()=>P,v9:()=>B,vu:()=>x,xg:()=>A,yb:()=>O});var n,i,a,o,l,s,c,d,u,p,m,h,_,g,f=r(188558),E=r(147298),y=((n=y||{}).HUB_FILE="hub_file",n.PLUGIN="plugin",n.WIDGET="widget",n.COMMENT="comment",n.FACE_STAMP="face_stamp",n),v=((i=v||{}).SUBSCRIPTION="subscription",i.ONE_TIME="one_time",i),b=((a=b||{}).DETAIL="detail",a.INSERTS="inserts",a.PLUGIN_ROW="plugin_row",a.SEARCH="search",a),I=((o=I||{})[o.NO_USER=0]="NO_USER",o[o.NO_PROFILE=1]="NO_PROFILE",o),T=((l=T||{}).HUB_FILE="hub_file",l.PLUGIN="plugin",l.WIDGET="widget",l),w=((s=w||{}).HUB_FILE="hub_file",s.PLUGIN="plugin",s.WIDGET="widget",s.PROFILE="profile",s);function S(e){return!(null==e?void 0:e.rating_value)}function C(e){var t;return!!(null==(t=e.client_meta)?void 0:t.x)}function O(e){return!!(null==e?void 0:e.rating_value)}let A=f.z.object({plugin:f.z.ignore().nullish(),plugin_install:f.z.ignore().nullish(),whitelisted_plugin:f.z.ignore().nullish(),hub_file:f.z.ignore().nullish(),profile:f.z.ignore().nullish(),community_comment:f.z.ignore().nullish(),widget:f.z.ignore().nullish(),community_resource_payment:f.z.ignore().nullish()});var N=((c=N||{})[c.SHOW_404=0]="SHOW_404",c[c.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",c),L=((d=L||{}).ALL="ALL",d.ME="ME",d.RATINGS_REVIEWS="RATINGS_REVIEWS",d.COMMENTS="COMMENTS",d),P=((u=P||{}).COMMUNITY_LANDING="community_landing",u.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",u.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",u.BROWSE_PLUGINS_MODAL="browse_plugins_modal",u.BROWSE_WIDGETS_MODAL="browse_widgets_modal",u.CURATED_PAGE="curated_page",u.NA="na",u.CONFIG_VOTE="config_vote",u.COMMUNITY_WIDGETS_PAGE="community_widgets_page",u.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",u.FIGMA_INSERTS_NUX="figma_inserts_nux",u.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",u.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",u.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",u),R=((p=R||{}).PM="PM",p.DES="DES",p.ENG="ENG",p.MKT="MKT",p.UR="UR",p.OTH="OTH",p.ALL="ALL",p.STARTER="STARTER",p);function k(e){return"is_widget"in e&&e.is_widget}function D(e){return"current_plugin_version_id"in e&&!e.is_widget}function M(e){return"client_meta"in e}function F(e){return"fig_file_metadata"in e}function x(e){return!!(null==e?void 0:e.monetized_resource_metadata)}function U(e){var t;return!!(null==(t=null==e?void 0:e.monetized_resource_metadata)?void 0:t.has_freemium_code)}function B(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===E.CA.FLAGGED}function V(e){return M(e)||k(e),e}var G=((m=G||{}).POST_COMPOSER="POST_COMPOSER",m.NAVBAR="NAVBAR",m.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",m.IFRAME="IFRAME",m),H=((h=H||{}).ACTIVE="active",h.INACTIVE="inactive",h),W=((_=W||{}).PASTE="paste",_.DROP="drop",_.FILE_INPUT="file_input",_),K=((g=K||{})[g.TRY_IT_OUT=0]="TRY_IT_OUT",g[g.OPEN=1]="OPEN",g);f.z.object({id:f.z.string().nullish(),hubFileId:f.z.string().nullish(),pluginId:f.z.string().nullish(),widgetId:f.z.string().nullish(),oneStars:f.z.number(),twoStars:f.z.number(),threeStars:f.z.number(),fourStars:f.z.number(),fiveStars:f.z.number(),totalRatings:f.z.number(),avgRating:f.z.number().nullish(),createdAt:f.z.date().nullish(),updatedAt:f.z.date().nullish()});let z=e=>{if(e)return{oneStars:e.one_stars,twoStars:e.two_stars,threeStars:e.three_stars,fourStars:e.four_stars,fiveStars:e.five_stars,totalRatings:e.total_ratings,avgRating:e.avg_rating}}},92538:(e,t,r)=>{r.d(t,{$:()=>o,Q:()=>a});var n,i,a=((n=a||{}).VISIBLE="visible",n.TEXT="text-data",n.OVERRIDDEN_SYMBOL_ID="overridden-symbol-id",n),o=((i=o||{}).TYPED="typed",i.VARIANT="variant",i)},545858:(e,t,r)=>{r.d(t,{f:()=>i});var n=r(337167);let i=(0,n.cn)(new Map)},685774:(e,t,r)=>{function n(e){return"backend"in e&&"fullscreen"===e.backend}function i(e){switch(e){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function a(e){switch(e.type){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function o(e){switch(e.type){case"server_checkpoint_diff":case"local_diff_file":return!0;case"server_file":case"local_file":case"server_checkpoint":case"multiplayer_journal":case"pasted_data":return!1}}r.d(t,{Bk:()=>o,HO:()=>a,W:()=>n,y9:()=>i})},249203:(e,t,r)=>{r.d(t,{BD:()=>u,Oh:()=>p,Sb:()=>d,j9:()=>s,qF:()=>c});var n=r(188558),i=r(761767);let a=n.z.nativeEnum(i.I1),o=n.z.nativeEnum(i.ur),l=n.z.nativeEnum(i.gg),s=n.z.normalize("File",n.z.object({checkpoint_id:n.z.string().optional(),checkpoint_token:n.z.coerce.undefined(n.z.string().optional()),client_meta:n.z.coerce.null(n.z.string().nullable()),created_at:n.z.string(),creator_id:n.z.string(),deleted_at:n.z.string().nullable(),trashed_at:n.z.union([n.z.string(),n.z.number()]).nullable(),trashed_user_id:n.z.string().nullable(),trashed_user:n.z.object({handle:n.z.string()}).nullish(),description:n.z.string().nullable(),edit_url:n.z.string(),folder_id:n.z.string().nullable(),has_file_link_password:n.z.boolean().nullable(),has_proto_link_password:n.z.boolean().nullable(),key:n.z.primaryKey(),license:n.z.string().nullable(),link_access:a,parent_org_id:n.z.string().optional().nullable(),proto_link_access:o.nullable(),name:n.z.string(),realtime_token:n.z.string().optional(),team_id:n.z.string().nullable(),thumbnail_url:n.z.string(),thumbnail_url_override:n.z.string().optional().nullable(),thumbnail_guid:n.z.string().optional().nullable(),touched_at:n.z.string(),track_tags:n.z.any(),is_favorited:n.z.boolean().optional(),is_template:n.z.boolean().optional(),is_new_user_playground_library:n.z.boolean().optional(),starter_library_src_file_key:n.z.string().optional().nullable(),url:n.z.string(),prototype_url:n.z.string(),appData:n.z.object({isRenaming:n.z.boolean().optional()}).optional(),org_browsable:n.z.boolean().optional().nullable(),viewer_export_restricted:n.z.boolean().optional(),pinned_by_user_name:n.z.string().optional(),updated_at:n.z.string(),accessed_at:n.z.string().optional(),org_audience:n.z.coerce.undefined(n.z.boolean().optional()),file_repo_id:n.z.string().nullable(),source_file_key:n.z.string().nullable(),source_checkpoint_id:n.z.string().optional().nullable(),editor_type:l.nullable(),last_published_at:n.z.string().optional().nullable(),is_try_file:n.z.boolean(),shared_at:n.z.string().optional().nullable(),shared_by:n.z.string().optional().nullable(),shared_by_text:n.z.string().optional(),shared_by_user:n.z.object({id:n.z.string(),name:n.z.string().nullable()}).optional().nullable(),parent_org:n.z.object({id:n.z.string(),imgUrl:n.z.string().nullable(),name:n.z.string().nullable()}).optional().nullable(),parent_team:n.z.object({id:n.z.string(),imgUrl:n.z.string().nullable(),name:n.z.string().nullable(),subscription:n.z.string().nullable()}).optional().nullable(),is_team_template:n.z.boolean().optional()}));function c(e){return e.edit_url.includes("?type")?e.edit_url:e.edit_url+"?type="+(e.editor_type||i.gg.DESIGN)}function d(e){return e.url.includes("?type")?e.url:e.url+"?type="+(e.editor_type||i.gg.DESIGN)}function u(e,t){let r=d(e);return t?function(e,t){if("design"!==t)return e;let r=new URL(e);return r.searchParams.set("mode","design"),r.toString().replace("/?","?")}(r,e.editor_type):r}let p=100},525392:(e,t,r)=>{r.d(t,{DR:()=>a,K3:()=>c,M5:()=>s,q5:()=>l,s9:()=>o,z5:()=>d});var n,i,a=((n=a||{})[n.SUCCESS=0]="SUCCESS",n[n.WARNING=1]="WARNING",n[n.FAILURE=2]="FAILURE",n[n.BUSY=3]="BUSY",n[n.WAITING=4]="WAITING",n[n.CANCELED=5]="CANCELED",n),o=((i=o||{}).START="start",i.CONFIRM_PDF_IMPORT="confirm_pdf_import",i.FILE_IMPORT_WITH_CANCELED_PDF="file_import_with_canceled_pdf",i.FILE_IMPORT_WITH_CONFIRMED_PDF="file_import_with_confirmed_pdf",i);function l(e){let t=e.replace(/\.[^\.]+$/,""),r=e.slice(t.length);return r}function s(e){let t=l(e);return".pdf"===t.toLowerCase()}function c(e){let t=l(e);return".jamboard"===t.toLowerCase()}function d(e){let t=l(e);return".jam"===t.toLowerCase()}},656077:(e,t,r)=>{r.d(t,{EI:()=>h,HY:()=>d,JD:()=>c,L7:()=>s,QU:()=>_,SR:()=>p,__:()=>u,a0:()=>m,bc:()=>g});var n,i,a,o,l,s=((n=s||{}).FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",n.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",n.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",n.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",n.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",n.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",n.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",n.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",n.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",n.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",n.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",n.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",n.FILE_BROWSER_FEED="file_browser_feed",n.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",n.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",n.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",n.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",n.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",n.FILE_BROWSER_NUX="file_browser_nux",n.FILE_BROWSER_ONBOARDING="file_browser_onboarding",n.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",n.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",n.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",n.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",n.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",n.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",n.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",n.SIMULATED_USE_CASES_TOOLTIP="SIMULATED_USE_CASES_TOOLTIP",n.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",n.FIGJAM_EDITOR_FILE_CREATE_BUTTON="figjam_editor_file_create_button",n.OFFLINE_NOTIFICATION="offline_notification",n.FIGJAM_MINI_HOME="figjam_mini_home",n),c=((i=c||{}).NEW_TAB="new_tab",i.SAME_TAB="same_tab",i),d=((a=d||{})[a.NONE=0]="NONE",a[a.FOR_OPEN=1]="FOR_OPEN",a[a.FOR_MENU=2]="FOR_MENU",a);function u(e,t=!0,r=!0){return e?{id:e.id,orgId:e.org_id||null,teamId:e.team_id,path:e.path,canEdit:t,canRename:r,inviteOnlyAt:e.is_invite_only?new Date:null,viewOnlyAt:e.is_view_only?new Date:null,subscription:e.is_subscribed?{}:null,description:e.description}:null}function p(e){return e?{id:e.id,name:e.name,org_id:e.orgId,img_url:e.imgUrl??void 0,subscription:e.subscription,restrictions_list:e.restrictionsList,student_team_at:e.studentTeamAt?e.studentTeamAt.toString():null,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toString():null,deleted_at:e.deletedAt?e.deletedAt.toString():null,created_at:e.createdAt.toString(),student_team:!!e.studentTeamAt}:null}function m(e,t){let r={key:e.key,teamId:e.team_id,folderId:e.folder_id,clientMeta:e.client_meta,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,sourceFileKey:e.source_file_key,linkAccess:e.link_access,hasFileLinkPassword:e.has_file_link_password,hasProtoLinkPassword:e.has_proto_link_password,updatedAt:new Date(e.updated_at||e.created_at),trashedAt:e.trashed_at?new Date(e.trashed_at):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,creatorId:e.creator_id,createdAt:new Date(e.created_at),name:e.name,_name:e.name,editorType:e.editor_type||"design",orgBrowsable:e.org_browsable||null,thumbnailGuid:e.thumbnail_guid||null,sourceCheckpointId:e.source_checkpoint_id||null,license:e.license,isTeamTemplate:!!e.is_team_template,figFileLinks:[],isFavorited:!!(null==e?void 0:e.is_favorited),isTryFile:e.is_try_file,votingSessions:null,template:null,canPublishTemplate:!1,viewerExportRestricted:!!e.viewer_export_restricted,publishedHubFile:null,ownerRole:null,trackTags:{isTemplate:e.is_template||null}};if(!t)return r;let{team:n,folder:i,repo:a,sourceFile:o,can_delete:l,can_edit:s,can_edit_canvas:c,can_access_full_dev_mode:d,can_manage:p,can_view:m,showEditButton:h,hasEduGracePeriod:_,org:g,orgUser:f,teamUser:E}=t;return{...r,team:function(e,t=!1){return e?{id:e.id,name:e.name,orgId:e.org_id,subscription:e.subscription,imgUrl:e.img_url||null,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team_at?new Date(e.student_team_at):e.student_team?new Date:null,trialPeriodEnd:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,createdAt:new Date(e.created_at),eduGracePeriod:{id:"",isValid:t},licenseGroupId:e.license_group_id,licenseGroup:e.license_group,workspaceId:e.workspace_id,orgAccess:e.org_access}:null}(n,_),project:u(i),repo:a?{id:a.id,name:a.name,folderId:a.folder_id,teamId:a.team_id,defaultFileKey:a.default_file_key}:null,sourceFile:o?{key:o.key,name:o.name,fileRepoId:o.file_repo_id}:null,showEditButton:h,canDelete:l,canEdit:s,canEditCanvas:c,canAccessFullDevMode:d,canManage:p,canView:m,org:g?{figjamDisabledAt:g.figjam_disabled_at,inviteWhitelist:{guestInviteSetting:g.invite_whitelist_guest_invite_setting},name:g.name}:null,currentPartialOrgUser:f?{draftsFolderId:f.drafts_folder_id,whiteboardPaidStatus:f.whiteboard_paid_status,accountType:f.design_paid_status,designOrgAccountTypeRequest:null,whiteboardOrgAccountTypeRequest:null,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null,devModeAccountTypeRequest:null}:null,currentTeamUser:E?{whiteboardPaidStatus:E.whiteboard_paid_status,designPaidStatus:E.design_paid_status,designProAccountTypeRequest:null,whiteboardProAccountTypeRequest:null,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null}:null}}var h=((o=h||{})[o.BAR=0]="BAR",o[o.SPINNER=1]="SPINNER",o);class _{constructor(e,t,r){this.tabCloseText=e,this.unsaved=t,this.error=r,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=t.hasAutosaveChanges||t.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var g=((l=g||{})[l.CUT=0]="CUT",l[l.COPY=1]="COPY",l[l.PASTE=2]="PASTE",l)},465883:(e,t,r)=>{r.d(t,{JD:()=>_,Ky:()=>f,QW:()=>u,Se:()=>m,U1:()=>y,W7:()=>v,jS:()=>d});var n,i,a,o,l=r(188558),s=r(467815),c=r(310975),d=((n=d||{}).RESOURCE_PAGE="resource_page",n.EDITOR="editor",n.UNIVERSAL_POSTING="universal_posting",n.ADMIN="admin",n),u=((i=u||{})[i.EDIT=0]="EDIT",i[i.PREVIEW=1]="PREVIEW",i[i.UPLOADING=2]="UPLOADING",i[i.SUCCESS=3]="SUCCESS",i[i.FAILURE=4]="FAILURE",i);let p=l.z.object({"500_500":l.z.string().optional(),"120_120":l.z.string().optional()});var m=((a=m||{}).USER="user",a.TEAM="team",a.ORG="org",a);let h=l.z.object({email:l.z.string().optional(),user_id:l.z.string(),is_primary_user:l.z.boolean(),can_sell_on_community:l.z.boolean().optional()}),_=s.e.and(l.z.object({id:l.z.string(),name:l.z.string(),profile_handle:l.z.string(),img_url:l.z.string().optional(),img_urls:p,current_user_is_following:l.z.boolean(),current_user_is_followed:l.z.boolean(),is_restricted_by_current_user:l.z.boolean(),entity_type:l.z.nativeEnum(m),primary_user_id:l.z.string().nullable(),location:l.z.string().nullable(),follower_count:l.z.number(),following_count:l.z.number(),isPending:l.z.boolean().optional(),associated_users:l.z.array(h).optional()})),g=l.z.object({accepted:l.z.array(_),pending:l.z.array(_).optional()}),f=l.z.object({creator:c.cv,publisher:_,community_publishers:g}),E=c.cv.pick({id:!0,email:!0}),y=l.z.object({accepted:l.z.array(c.cv),pending:l.z.array(E).optional()});var v=((o=v||{}).OWNER="owner",o.PUBLISHER="publisher",o.NONE="none",o)},321909:(e,t,r)=>{r.d(t,{G6:()=>u,JI:()=>g,P7:()=>p,bV:()=>h,h3:()=>m,nD:()=>_,s:()=>f,wj:()=>d});var n,i,a,o=r(46347),l=r(716250),s=r(646012),c=r(764850);let d={isInitialized:!1,hasMissingFonts:!1,activeUserAction:c.f5F.DEFAULT,currentTool:c.UAh.SELECT,currentStampToolName:null,activeCanvasEditModeType:c.Nw4.LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:c.bN1.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:c.kZC.NONE,index:-1},currentSelectedProperty:{type:c.Rmy.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:c.hKT.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:c.Mk1.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11},votingSessionInfo:{sessionId:"",votingStage:c.Kb2.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:c.TG8.ATTACHED_FILE_TIP,lastBranchingStagingAction:c.n$W.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var u=((n=u||{})[n.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",n[n.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",n),p=((i=p||{})[i.NO=0]="NO",i[i.YES=1]="YES",i[i.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",i[i.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",i[i.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",i),m=((a=m||{})[a.NOT_ASSET=0]="NOT_ASSET",a[a.ASSET_ICON=1]="ASSET_ICON",a[a.ASSET_IMAGE=2]="ASSET_IMAGE",a[a.ASSET_GIF=4]="ASSET_GIF",a[a.ASSET_VIDEO=8]="ASSET_VIDEO",a[a.ASSET_COMPONENT=16]="ASSET_COMPONENT",a);function h(e){switch(e){case c.QC$.BOOLEAN:return"BOOLEAN";case c.QC$.COLOR:return"COLOR";case c.QC$.FLOAT:return"FLOAT";case c.QC$.STRING:return"STRING";case c.QC$.SYMBOL_ID:return"SYMBOL_ID";case c.QC$.MAP:return"MAP";case c.QC$.FONT_STYLE:return"FONT_STYLE";case c.QC$.TEXT_DATA:return"TEXT_DATA";default:(0,o.vE)(e)}}function _(e){let t=[c.xTW.STROKE_FLOAT,c.xTW.OPACITY,c.xTW.EFFECT_COLOR,c.xTW.EFFECT_FLOAT];return(0,l.BZ)().ds_variables_strokes?e.map(e=>c.xTW[e]):e.filter(e=>!t.includes(e)).map(e=>c.xTW[e])}function g(e){return e?e.map(e=>c.xTW[e]):[c.xTW.ALL_SCOPES]}function f(e){let t={entries:[]},r=Object.keys(e);return r.forEach(r=>{var n;let i=e[r];if(!i||i.isMixed)return;let a=function(e){function t(e){if(e.type!==c.M6J.ALIAS)return null;let t=s.pp.fromString(e.value);return t?s.pp.toKiwi(t):null}switch(e.type){case c.M6J.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case c.M6J.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case c.M6J.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case c.M6J.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case c.M6J.ALIAS:{let r=t(e);if(!r)return null;return{dataType:"ALIAS",resolvedDataType:h(e.resolvedType),value:{alias:r}}}case c.M6J.FONT_STYLE:{let r=e.value.asFloat&&t(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:t(e.value.asFloat)}:e.value.asString&&t(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:t(e.value.asString)}:null;if(!r)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[r.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:r.resolvedDataType,value:{alias:r.variableId}}}}}}case c.M6J.MAP:case c.M6J.EXPRESSION:case c.M6J.SYMBOL_ID:case c.M6J.TEXT_DATA:return null}}(i);a&&(null==(n=t.entries)||n.push({variableData:a,variableField:r}))}),t}},344031:(e,t,r)=>{r.d(t,{K:()=>o});var n=r(46347),i=r(970740),a=r(625893);function o(e,t){switch(e){case a.rN.ACTIVITY:return(0,i.t)("org_admin_tab.activity");case a.rN.DASHBOARD:return(0,i.t)("org_admin_tab.dashboard");case a.rN.LICENSE_GROUPS:case a.rN.WORKSPACES:return(0,i.t)("org_admin_tab.workspaces");case a.rN.TEAMS:return(0,i.t)("org_admin_tab.teams");case a.rN.MEMBERS:return(0,i.t)("org_admin_tab.members");case a.rN.BILLING:switch(t){case a._J.INVOICES:return(0,i.t)("org_admin_settings.billing.invoices");case a._J.BILLING_GROUPS:return(0,i.t)("org_admin_settings.billing.billing_groups");default:return(0,i.t)("org_admin_tab.billing")}case a.rN.RESOURCES:switch(t){case a.Q$.LIBRARIES:return(0,i.t)("resources_tab.libraries");case a.Q$.SHARED_FONTS:return(0,i.t)("resources_tab.fonts");case a.Q$.APPROVED_PLUGINS:return(0,i.t)("resources_tab.approved_plugins");case a.Q$.APPROVED_WIDGETS:return(0,i.t)("resources_tab.approved_widgets");default:return(0,i.t)("org_admin_tab.resources")}case a.rN.SETTINGS:return(0,i.t)("org_admin_tab.settings");default:(0,n.vE)(e)}}},625893:(e,t,r)=>{r.d(t,{GK:()=>s,Q$:()=>c,_J:()=>d,rN:()=>l,yA:()=>u});var n,i,a,o,l=((n=l||{}).DASHBOARD="",n.LICENSE_GROUPS="license_groups",n.WORKSPACES="workspaces",n.TEAMS="teams",n.MEMBERS="members",n.ACTIVITY="activity",n.BILLING="billing",n.RESOURCES="resources",n.SETTINGS="settings",n);let s=["license_groups","workspaces"];var c=((i=c||{}).LIBRARIES="",i.SHARED_FONTS="fonts",i.APPROVED_PLUGINS="plugins",i.APPROVED_WIDGETS="widgets",i),d=((a=d||{}).INVOICES="",a.BILLING_GROUPS="billing_groups",a),u=((o=u||{}).ORG="Org",o.LICENSE_GROUP="LicenseGroup",o.WORKSPACE="Workspace",o)},45974:(e,t,r)=>{r.d(t,{Cy:()=>A,GF:()=>g,Pr:()=>v,R:()=>I,SR:()=>p,Sp:()=>b,bu:()=>_,ck:()=>T,eT:()=>C,h3:()=>d,n3:()=>E,qx:()=>m,s$:()=>O,tc:()=>f,u:()=>c,u0:()=>h,vj:()=>u,wn:()=>S});var n,i,a,o,l=r(987004),s=r(761767),c=((n=c||{}).ASC="asc",n.DESC="desc",n),d=((i=d||{}).NAME="name",i.LAST_ACTIVE="last_active",i.LAST_DESIGN_ACTIVE="last_design_active",i.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",i.LAST_EDIT="last_edit",i.LAST_DESIGN_EDIT="last_design_edit",i.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",i.DESIGN_ROLE="design_role",i.DESIGN_UPGRADE_DATE="design_upgrade_date",i.WHITEBOARD_ROLE="whiteboard_role",i.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",i.LICENSE_GROUP="license_group",i.WORKSPACE="workspace",i.SCIM_DATA="scim_data",i.DESIGN_UPGRADE_REASON="design_upgrade_reason",i.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",i.SEARCH_SCORE="score",i.DEV_MODE_ROLE="dev_mode_role",i.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",i);let u=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date"],p={columnName:"name",isReversed:!1};var m=((a=m||{}).productFilter="productFilter",a.licenseGroupFilter="licenseGroupFilter",a.workspaceFilter="workspaceFilter",a.permissionFilter="permissionFilter",a.roleFilter="roleFilter",a.lastEditFilter="lastEditFilter",a.newEditorFilter="newEditorFilter",a),h=((o=h||{}).product="product",o.workspace="workspace",o.billingGroup="billingGroup",o.accountType="accountType",o.role="role",o.lastEdit="lastEdit",o.newEditor="newEditor",o);let _={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1},g={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter"},f={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor"};function E(){let e={full:0,restricted:0,starter:0};return{designAccountType:{...e},figjamAccountType:{...e},devModeAccountType:{...e},permission:{guest:0,member:0,admin:0,provisional:0,unverified:0},lastEdit:{[O["3mo"]]:0,[O["6mo"]]:0,[O["1yr"]]:0}}}let y={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},v={[y.FIGMA]:l.xi.DESIGN,[y.FIGJAM]:l.xi.WHITEBOARD,[y.DEV_MODE]:l.xi.DEV_MODE},b={[l.xi.DESIGN]:y.FIGMA,[l.xi.WHITEBOARD]:y.FIGJAM,[l.xi.DEV_MODE]:y.DEV_MODE},I={IDP:"provisional",UNVERIFIED:"unverified"},T={[s.Gu.ADMIN]:s.Gu.ADMIN,[s.Gu.GUEST]:s.Gu.GUEST,[s.Gu.MEMBER]:s.Gu.MEMBER,[I.IDP]:I.IDP,[I.UNVERIFIED]:I.UNVERIFIED},w={EDITOR:"editor",VIEWER:"viewer","VIEWER-RESTRICTED":"viewer-restricted"},S={[w.EDITOR]:s.oz.FULL,[w.VIEWER]:s.oz.STARTER,[w["VIEWER-RESTRICTED"]]:s.oz.RESTRICTED},C={[s.oz.FULL]:w.EDITOR,[s.oz.STARTER]:w.VIEWER,[s.oz.RESTRICTED]:w["VIEWER-RESTRICTED"]},O={"3mo":"3mo","6mo":"6mo","1yr":"1yr"},A=e=>"user_id"in e&&void 0!==e.user_id},827523:(e,t,r)=>{r.d(t,{O:()=>i});var n,i=((n=i||{}).NAME="name",n.OWNER="owner_name",n.PROJECTS="projects",n.MEMBERS="member_count",n.WORKSPACE="workspace_name",n.ORG_ACCESS="org_access",n)},606536:(e,t,r)=>{r.d(t,{II:()=>E,NT:()=>T,Nz:()=>v,Wp:()=>f,dR:()=>y,fz:()=>b,gu:()=>h});var n,i,a,o=r(46347),l=r(188558),s=r(761767),c=r(987004),d=r(240310),u=r(700163),p=r(310975),m=r(967197),h=((n=h||{}).SELF_SELECTED="self",n.SELF_SELECTED_NOT_LISTED="not listed",n.SELF_SELECTED_DONT_KNOW="don't know",n.MOVED_BY_ADMIN="moved",n.AUTO_ASSIGNED="auto",n);let _=l.z.nativeEnum(h),g=l.z.object({id:l.z.string(),license_group_id:l.z.string().nullable(),org_user_id:l.z.string(),assigned_at:l.z.string(),created_at:l.z.string(),actor_user_id:l.z.string().nullable(),update_reason:_,updated_at:l.z.string()});s.oz.FULL,s.oz.STARTER,s.oz.RESTRICTED;var f=((i=f||{})[i.GUEST=0]="GUEST",i[i.MEMBER=2]="MEMBER",i[i.ADMIN=3]="ADMIN",i),E=((a=E||{}).ORG_USER="org_user",a.IDP_USER="idp_user",a.ORG_INVITE="org_invite",a);let y=l.z.object({design_paid_status:s.kh,whiteboard_paid_status:s.kh,dev_mode_paid_status:s.kh,id:l.z.string(),org_id:l.z.string(),user_id:l.z.string(),user:p.cv,permission:s.qv,description:l.z.string().nullish(),drafts_folder_id:l.z.string(),created_at:l.z.string(),updated_at:l.z.string(),disabled_at:l.z.string().nullish(),account_type_changed_at:l.z.string().optional(),last_edit:l.z.coerce.undefined(l.z.string().optional()),last_seen:l.z.coerce.undefined(l.z.string().optional()),last_design_edit:l.z.coerce.undefined(l.z.union([l.z.string(),d.l]).optional()),last_whiteboard_edit:l.z.coerce.undefined(l.z.union([l.z.string(),d.l]).optional()),last_design_seen:l.z.coerce.undefined(l.z.union([l.z.string(),d.l]).optional()),last_whiteboard_seen:l.z.coerce.undefined(l.z.union([l.z.string(),d.l]).optional()),scim_account_type:l.z.string().nullish(),scim_whiteboard_paid_status:l.z.string().nullish(),scim_dev_mode_paid_status:l.z.string().nullish(),user_state_changed_at:l.z.string().optional(),design_upgrade_reason:l.z.coerce.undefined(u.S.optional()),whiteboard_upgrade_reason:l.z.coerce.undefined(u.S.optional()),dev_mode_upgrade_reason:l.z.coerce.undefined(u.S.optional()),scim_metadata:l.z.record(l.z.string()).nullish(),agreed_to_community_tos_at:l.z.string().nullish(),license_group_member:g.optional(),license_admin:l.z.boolean().optional(),is_email_validated:l.z.boolean().optional().nullable(),show_figjam_user_onboarding:l.z.boolean().nullable(),has_shown_figjam_admin_onboarding:l.z.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:l.z.boolean().nullable(),ecc_upgrading_locked:l.z.boolean().nullish(),type:l.z.literal("org_user").default("org_user"),workspace_users:l.z.array(m.b).optional(),is_dev_mode_beta_user:l.z.boolean().optional()}),v=y;s.gg.WHITEBOARD,s.gg.DESIGN;let b={[c.z9.FIGJAM]:"whiteboard_paid_status",[c.z9.DESIGN]:"design_paid_status",[c.z9.DEV_MODE]:"dev_mode_paid_status"},I=(e,t)=>{switch(t){case c.z9.DESIGN:return e.design_paid_status;case c.z9.FIGJAM:return e.whiteboard_paid_status;case c.z9.DEV_MODE:return e.dev_mode_paid_status;default:(0,o.vE)(t)}},T=(e,t)=>{switch(t){case c.z9.DESIGN:case c.z9.FIGJAM:return I(e,t);case c.z9.DEV_MODE:return I(e,c.z9.DESIGN)===s.oz.FULL?s.oz.FULL:I(e,t);default:(0,o.vE)(t)}}},211879:(e,t,r)=>{r.d(t,{Ld:()=>T,On:()=>C,RF:()=>g,S$:()=>S,lz:()=>b,zW:()=>y,zx:()=>E});var n,i,a,o,l,s,c,d=r(188558),u=r(761767),p=r(828819),m=r(556928),h=r(721038),_=r(468310),g=((n=g||{}).ANY="any",n.GOOGLE="google",n.SAML="saml",n);let f=d.z.union([d.z.literal("AUTO"),d.z.literal("GOOD"),d.z.literal("DELINQUENT"),d.z.literal("SUSPENDED"),d.z.literal("DEACTIVATED")]),E={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var y=((i=y||{}).MANUAL="manual",i.DISABLED="disabled",i.QUARTERLY="quarterly",i.CHARGE_IMMEDIATELY="quarterly_auto_charge",i);let v=d.z.nativeEnum(y);var b=((a=b||{}).REQUIRE_APPROVAL="require_approval",a.BANNED="banned",a);let I=d.z.nativeEnum(b);var T=((o=T||{}).US="US",o.EU="EU",o);let w=d.z.nativeEnum(T);d.z.object({name:d.z.string(),img_url:d.z.string().optional(),id:d.z.string()});var S=((l=S||{}).Initial="Initial",l.ChoosePlan="ChoosePlan",l.AddCollaborators="AddCollaborators",l.PseudoCreateTeam="PseudoCreateTeam",l.CreateTeam="CreateTeam",l.TeamSelect="TeamSelect",l.Details="Details",l.Payment="Payment",l.Review="Review",l.Confirmation="Confirmation",l),C=((s=C||{}).ENTERPRISE="enterprise",s.ORGANIZATION="organization",s);let O=d.z.nativeEnum(C);var A=((c=A||{}).DEPROVISION="deprovision",c);m.nF.extend({id:d.z.string(),name:d.z.string(),domain_capture:d.z.boolean(),created_at:d.z.string().optional(),updated_at:d.z.string().optional(),deleted_at:d.z.string().optional(),img_url:d.z.string().optional(),handle:d.z.string().optional(),figjam_disabled_at:d.z.date().nullable(),realtime_token:d.z.string().optional(),standing:f,stripe_customer_id:d.z.string().optional(),invite_whitelist_enforced:d.z.boolean(),invite_whitelist_enforced_guests:d.z.boolean(),invite_whitelist_guest_invite_setting:I.nullable(),invite_whitelist_member_allowlist_enabled:d.z.boolean().nullable(),ip_ranges:d.z.array(d.z.string()),past_due_at:d.z.string().nullable(),plugins_whitelist_enforced:d.z.boolean(),widgets_whitelist_enforced:d.z.boolean(),plugin_requests_allowed:d.z.boolean(),widget_requests_allowed:d.z.boolean(),public_plugins_allowed:d.z.boolean(),voice_enabled:d.z.boolean().optional(),billing:v.nullable(),google_sso_only:d.z.boolean(),saml_sso_only:d.z.boolean(),locked_quantity_full_members:d.z.number().nullable(),locked_quantity_figjam_members:d.z.number().nullable(),featured_scim_metadata:u.Mg.nullable(),community_profile_id:d.z.string().optional(),community_profile_handle:d.z.string().optional(),template_picker_disabled:d.z.boolean().optional(),experiment_seed:d.z.string().optional(),experiment_eligible:d.z.boolean().optional(),bigma_enabled:d.z.boolean().optional(),bigma_enabled_at:d.z.number().optional(),workshop_enabled:d.z.boolean().optional(),cursor_chat_disabled:d.z.boolean().optional(),plan:O.optional(),design_default_paid_status:u.kh.optional(),whiteboard_default_paid_status:u.kh.optional(),k12_google_org:d.z.boolean(),shared_org_license_group_settings:_.zn.nullable(),vat_gst_id:d.z.string().optional().nullable(),tax_id_verification_status:u.fI.optional(),are_custom_templates_allowed:d.z.boolean(),should_auto_renew:d.z.boolean(),has_automatic_upcoming_invoice:d.z.boolean(),target_locality:w.optional(),org_domains:h.x.optional().nullable(),workspaces_count:d.z.number().optional(),cmty_publish_as_user_enabled:d.z.boolean().optional(),license_groups_count:d.z.number().optional(),license_group_nux_active_at:d.z.string().optional(),workspaces_nux_active_at:d.z.string().optional(),ai_features_disabled:d.z.boolean().optional(),is_dev_mode_opt_in_accepted:d.z.boolean().optional(),has_invalid_upgrades:d.z.boolean().optional(),figma_provided_libraries_disabled:d.z.boolean().optional(),billing_api:p.K})},326714:(e,t,r)=>{r.d(t,{KB:()=>l,Th:()=>s,YH:()=>d,Zh:()=>c,oX:()=>u,qu:()=>h,r3:()=>m,tv:()=>o});var n,i,a,o=((n=o||{})[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ANNUAL=1]="ANNUAL",n[n.MONTHLY=2]="MONTHLY",n[n.STUDENT=3]="STUDENT",n);let l={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var s=((i=s||{}).MONTHLY="monthly",i.ANNUAL="annual",i);let c="US",d="JP",u=e=>({line1:"",line2:"",country:e||c,city:"",region:"",postal_code:""});var p=((a=p||{}).PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",a.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",a.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",a.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",a);let m=["prod_BTrZbmnROhwnmX","prod_BUXN0CamqLCsuF"],h=["figjam_annual_usd_36","figjam_monthly_usd_5"]},661539:(e,t,r)=>{r.d(t,{$9:()=>et,$M:()=>ee,EA:()=>ei,Eq:()=>ed,Gx:()=>X,IP:()=>$,KA:()=>em,Mm:()=>eo,Or:()=>el,Sq:()=>S,T5:()=>P,Tq:()=>C,Z7:()=>R,ZB:()=>q,ec:()=>es,fu:()=>ep,gX:()=>er,gu:()=>e_,i:()=>eu,jZ:()=>eh,mz:()=>eg,nT:()=>ec,nw:()=>T,pT:()=>A,rV:()=>Q,s5:()=>M,vF:()=>b,xh:()=>B,yA:()=>I,y_:()=>x});var n,i,a,o,l,s,c=r(188558),d=r(692379),u=r(727803),p=r(761767),m=r(465883),h=r(467815),_=r(698784),g=r(552835),f=r(769142),E=r(597694),y=r(147298),v=r(887138),b=((a=b||{})[a.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",a[a.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",a[a.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",a[a.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",a[a.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",a),I=((o=I||{}).FIGMA="design",o.FIGJAM="whiteboard",o.UNIVERSAL="design_and_whiteboard",o.INSPECT="inspect",o.FIGMA_AND_INSPECT="design_and_inspect",o),T=((l=T||{}).Plugin="plugin",l.Widget="widget",l);let w=c.z.object({type:c.z.union([c.z.literal("LOAD"),c.z.literal("PARSE"),c.z.literal("VALIDATE")]),text:c.z.string()}),S=["camera","microphone","displaycapture"],C=["openexternal","analytics","cortex","firstdraft","filekey","hidecursors",...S],O=c.z.object({command:c.z.string(),name:c.z.string(),multipleSelection:c.z.boolean().optional()}),A=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],N=c.z.object({name:c.z.string(),key:c.z.string(),description:c.z.string().optional(),optional:c.z.boolean().optional(),allowFreeform:c.z.boolean().optional()}),L=c.z.array(N),P=[...A,...C];[...P];let R=["textreview","panel","inspect","codegen","linkpreview","vscode"],k=c.z.object({label:c.z.string(),value:c.z.string(),isDefault:c.z.boolean().optional()}),D=c.z.object({itemType:c.z.literal("action"),propertyName:c.z.string(),includedLanguages:c.z.array(c.z.string()).optional(),label:c.z.string().optional()}),M=e=>D.safeParse(e).success,F=c.z.object({itemType:c.z.literal("unit"),scaledUnit:c.z.string(),defaultScaleFactor:c.z.number().optional(),default:c.z.boolean().optional(),includedLanguages:c.z.array(c.z.string()).optional()}),x=e=>F.safeParse(e).success,U=c.z.object({itemType:c.z.literal("select"),propertyName:c.z.string(),label:c.z.string().optional(),options:c.z.array(k),includedLanguages:c.z.array(c.z.string()).optional()}),B=e=>U.safeParse(e).success,V=c.z.union([D,F,U]),G=c.z.array(V),H=c.z.object({label:c.z.string(),value:c.z.string()}),W=c.z.object({command:c.z.string(),name:c.z.string(),parameters:L.optional(),parameterOnly:c.z.boolean().optional()}),K=c.z.object({separator:c.z.literal(!0)}),z=c.z.object({name:c.z.string()}),Z=z.extend({menu:c.z.lazy(()=>c.z.array(c.z.union([W,K,Z])))}),Y=c.z.object({allowedDomains:c.z.array(c.z.string()),reasoning:c.z.string().optional(),devAllowedDomains:c.z.array(c.z.string()).optional()}),j=c.z.union([Z,W,K]);var $=((n=$||{}).FIGMA="figma",n.FIGJAM="figjam",n.INSPECT="inspect",n.DEV="dev",n);let q=Object.values($),X=c.z.object({id:c.z.string().optional(),name:c.z.string(),api:c.z.string(),main:c.z.string(),ui:c.z.union([c.z.string(),c.z.record(c.z.string(),c.z.string())]).optional(),build:c.z.string().optional(),enableProposedApi:c.z.boolean().optional(),enablePrivatePluginApi:c.z.boolean().optional(),menu:j.array().optional(),networkAccess:Y.optional(),relaunchButtons:O.array().optional(),relatedLinkDomains:c.z.array(c.z.string()).optional(),devResourceDomains:c.z.array(c.z.string()).optional(),parameters:L.optional(),parameterOnly:c.z.boolean().optional(),editorType:c.z.filteredArray(c.z.nativeEnum($)).optional(),containsWidget:c.z.boolean().optional(),widgetApi:c.z.string().optional(),permissions:c.z.filteredArray(c.z.union([c.z.enum(A),c.z.enum(C)])).optional(),enableReadOnly:c.z.boolean().optional(),capabilities:c.z.filteredArray(c.z.enum(R)).optional(),codegenLanguages:c.z.array(H).optional(),codegenPreferences:G.optional(),documentAccess:c.z.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=c.z.object({id:c.z.string(),name:c.z.string().nullable(),version:c.z.string().nullable(),releaseNotes:c.z.string().nullable(),description:c.z.string().nullable(),tagline:c.z.string().nullable(),creatorPolicy:c.z.string().nullable(),manifest:c.z.string().nullable(),createdAt:c.z.date(),iconPath:c.z.string().nullable(),coverImagePath:c.z.string().nullable(),codePath:c.z.string().nullable(),plugin:c.z.object({currentPluginVersionId:c.z.string().nullable()})}),e.PluginInstallSchema=c.z.object({id:c.z.string(),pluginId:c.z.string(),pinnedStatus:c.z.nativeEnum(p.Vh),createdAt:c.z.date(),plugin:c.z.object({id:c.z.string(),currentPluginVersionId:c.z.string().nullable(),publishingStatus:c.z.nativeEnum(p.UG).nullable(),isWidget:c.z.boolean().nullable(),viewableInEditor:c.z.boolean(),orgId:c.z.string().nullable(),approvedAt:c.z.date().nullable(),approvalStatus:c.z.number().nullable(),communityPublishers:c.z.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=c.z.object({id:c.z.string(),installedPlugins:c.z.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=c.z.object({id:c.z.string(),name:c.z.string()}),e.OrgInfoSchema=c.z.object({id:c.z.string(),name:c.z.string()}),e.CommunityProfileSchema=c.z.object({id:c.z.string(),profileHandle:c.z.string(),user:c.z.object({id:c.z.string(),name:c.z.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=c.z.object({role:c.z.nativeEnum(p.fH),isPending:c.z.boolean(),profile:e.CommunityProfileSchema})})(s||(s={}));let J=c.z.object({id:c.z.string(),plugin_id:c.z.string(),name:c.z.string(),version:c.z.string(),current_plugin_version_id:c.z.string().optional(),release_notes:c.z.string(),description:c.z.string(),tagline:c.z.string(),creator_policy:c.z.string(),is_private:c.z.boolean(),manifest:X,created_at:c.z.string(),org_id:c.z.string().optional(),redirect_icon_url:c.z.string(),redirect_cover_image_url:c.z.string(),redirect_code_url:c.z.string(),redirect_snapshot_url:c.z.string().nullish(),community_publishers:c.z.array(s.CommunityPublisherSchema).optional(),installed_by:c.z.union([c.z.literal("user"),c.z.literal("org")]).nullish(),playground_fig_file_key:c.z.string().nullish(),playground_fig_file:c.z.ignore().optional(),playground_file_version_id:c.z.string().nullish(),saved_at_by_current_user:c.z.string().optional()});function Q(e){return void 0!==e.localFileId}function ee(e){return!Q(e)&&!!e.is_private}function et(e){return!Q(e)&&!ee(e)}function er(e){var t;return!!(null==(t=e.manifest)?void 0:t.containsWidget)}c.z.object({plugin_id:c.z.string(),name:c.z.string(),manifest:X,localFileId:c.z.number(),localFilePath:c.z.string(),error:w.optional(),cachedContainsWidget:c.z.boolean().optional(),lastKnownPluginId:c.z.string().optional(),testCode:c.z.string().optional()});let en=c.z.object({org:c.z.object({id:c.z.string(),name:c.z.string()}).optional(),is_public:c.z.boolean().optional()}),ei=c.z.object({id:c.z.string(),versions:c.z.record(J),current_plugin_version_id:c.z.string().nullable(),is_widget:c.z.coerce.boolean()}),ea=ei.merge(c.z.object({install_count:c.z.number(),view_count:c.z.number(),like_count:c.z.number(),comment_count:c.z.number(),category_id:c.z.string().nullable(),roles:en,org_id:c.z.string().nullable(),realtime_token:c.z.string(),created_at:c.z.string(),redirect_thumbnail_url:c.z.string().nullable(),thumbnail_url:c.z.string().nullable(),tags:c.z.array(c.z.string()).optional(),current_user_has_run:c.z.boolean().optional(),current_user_first_ran_at:c.z.string().optional(),unique_run_count:c.z.number(),editor_type:c.z.nativeEnum(I),unpublished_at:c.z.string().nullable(),support_contact:c.z.string().nullable(),comments_setting:c.z.nativeEnum(u.Br).nullable(),related_content:(0,d.BA)(c.z.lazy(()=>eo)),hide_related_content_by_others:c.z.boolean().optional(),publishing_status:c.z.nativeEnum(p.UG).nullable(),score:c.z.number().nullable(),install_status:c.z.nativeEnum(b).optional(),profile_install_status:c.z.nativeEnum(b).optional(),commenting_is_restricted:c.z.boolean(),monetization_status:c.z.nativeEnum(y.Vt).optional(),community_resource_payment:E.Yb.optional(),third_party_m10n_status:c.z.nativeEnum(y.CA).optional(),creator_policy:c.z.string(),plugin_publishers:m.U1.optional(),carousel_media_urls:c.z.optional(v.MA),carousel_videos:c.z.optional(v.C7)})),eo=ea.and(m.Ky).and(h.e).and(f.Z).and(g.yG).and(_.E),el=eo.and(c.z.object({is_widget:c.z.literal(!0)}));function es(e){return e.third_party_m10n_status===y.CA.MIGRATING}function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}let ep=Symbol("relaunchMixedDescription");function em({type:e,text:t}){switch(e){case"LOAD":return"Manifest load error: "+t;case"PARSE":return"Manifest not valid JSON: "+t;case"VALIDATE":return"Manifest error: "+t}}var eh=((i=eh||{}).ORG="ORG",i.PUBLIC="PUBLIC",i);let e_=(e,t)=>t?`GET_PLUGIN_ALLOW_LIST_${e}_${t}`:`GET_PLUGIN_ALLOW_LIST_${e}`,eg=(e,t)=>t?`GET_WIDGET_ALLOW_LIST_${e}_${t}`:`GET_WIDGET_ALLOW_LIST_${e}`},854622:(e,t,r)=>{r.d(t,{s:()=>o,y:()=>l});var n=r(46347),i=r(970740),a=r(987004);let o=e=>{switch(e){case a.z9.DESIGN:return(0,i.t)("general.figma_design");case a.xi.WHITEBOARD:case a.z9.FIGJAM:return(0,i.t)("general.figjam");case a.z9.DEV_MODE:return(0,i.t)("general.dev_mode");default:(0,n.vE)(e)}},l=e=>{switch(e){case a.z9.DESIGN:return(0,i.t)("general.figma_design_short");case a.xi.WHITEBOARD:case a.z9.FIGJAM:return(0,i.t)("general.figjam");case a.z9.DEV_MODE:return(0,i.t)("general.dev_mode");default:(0,n.vE)(e)}}},367938:(e,t,r)=>{r.d(t,{J:()=>n,U:()=>a});let n={id:""};var i,a=((i=a||{}).NORMAL="normal",i.INHERITED_INTERNAL="inherited_internal",i)},112602:(e,t,r)=>{r.d(t,{D:()=>o,X:()=>l});var n,i=r(716250),a=r(916903),o=((n=o||{}).RECENTLY_VIEWED="recently-viewed",n.SHARED_FILES="shared-with-you",n.SHARED_PROJECTS="shared-projects",n);let l={"recently-viewed":[a.BO.NAME,a.BO.CREATED_AT,a.BO.ACCESSED_AT],"shared-with-you":(0,i.BZ)().sunflower_swy_sort_options?[a.BO.NAME,a.BO.CREATED_AT,a.BO.SHARED_AT]:[a.BO.SHARED_AT],"shared-projects":(0,i.BZ)().sunflower_swy_sort_options?[a.BO.NAME,a.BO.CREATED_AT,a.BO.SHARED_AT]:[a.BO.SHARED_AT]}},887138:(e,t,r)=>{r.d(t,{C7:()=>u,MA:()=>c,Pk:()=>o});var n,i=r(188558),a=r(195600),o=((n=o||{})[n.CURATED_IMAGE=0]="CURATED_IMAGE",n[n.THUMBNAIL=1]="THUMBNAIL",n[n.EMBED=2]="EMBED",n);let l=i.z.record(i.z.string().refine(e=>Object.keys(a.e.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),i.z.string().url()),s=i.z.object({url:i.z.string().url(),resized_thumbnail_urls:i.z.optional(l),created_at:i.z.date().optional()}),c=i.z.record(i.z.number(),s);s.extend({id:i.z.optional(i.z.string()),buffer:i.z.instanceof(Uint8Array).nullable(),sha1:i.z.string()});let d=i.z.object({url:i.z.string().url(),video_file_uuid:i.z.string().uuid(),thumbnail_url:i.z.string().url(),thumbnail_sha1:i.z.string()}),u=i.z.record(i.z.number(),d);d.merge(i.z.object({id:i.z.optional(i.z.string()),buffer:i.z.instanceof(Uint8Array).nullable(),sha1:i.z.string(),video_file_uuid:i.z.optional(i.z.string().uuid()),thumbnail_buffer:i.z.optional(i.z.instanceof(Uint8Array))}))},201248:(e,t,r)=>{r.d(t,{UB:()=>s,b4:()=>l});var n,i,a,o=((n=o||{}).MODAL="modal",n),l=((i=l||{})[i.URGENT_ALERT=9999]="URGENT_ALERT",i[i.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",i[i.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",i[i.DEFAULT_MODAL=10]="DEFAULT_MODAL",i[i.SECONDARY_MODAL=5]="SECONDARY_MODAL",i[i.SURVEY=1]="SURVEY",i);(e=>{let t={name:"modal",priority:10,blocking:"UNTIL_COMPLETE",whenBlocked:"BACK"};e.FeatureAnnouncement=t,e.NUX={...t,priority:15},e.Survey={name:"modal",priority:1,blocking:"UNTIL_COMPLETE",whenBlocked:"BACK"},e.Nudge={name:"modal",priority:5,blocking:"ONCE",whenBlocked:"BACK"}})(a||(a={}));let s="team-library"},363402:(e,t,r)=>{r.d(t,{BZ:()=>v,Bx:()=>g,E5:()=>_,F1:()=>O,GH:()=>S,Hy:()=>I,Lr:()=>C,bD:()=>y,l$:()=>h,nr:()=>N,rD:()=>w,sk:()=>E,tr:()=>b,wD:()=>T,zs:()=>m});var n,i,a,o,l,s,c,d,u,p=r(326714),m=((n=m||{})[n.INVITE=0]="INVITE",n[n.PUBLISH=1]="PUBLISH",n[n.PUBLISH_COMMUNITY=2]="PUBLISH_COMMUNITY",n[n.PUBLISH_TEMPLATE=3]="PUBLISH_TEMPLATE",n[n.POST_TO_FEED=4]="POST_TO_FEED",n[n.COLLABORATORS=5]="COLLABORATORS",n[n.EMBED_CODE=6]="EMBED_CODE",n[n.SHARE_DEV_MODE=7]="SHARE_DEV_MODE",n[n.SHARE_SETTINGS=8]="SHARE_SETTINGS",n[n.FOLDER_MEMBERS=9]="FOLDER_MEMBERS",n[n.SHARE_GOOGLE_DEVICE=10]="SHARE_GOOGLE_DEVICE",n),h=((i=h||{}).ACCOUNT="account",i.PLUGINS="plugins",i.COMMUNITY="community",i.NOTIFICATIONS="notifications",i);function _(e){return"search"===e.view}let g={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var f=((a=f||{}).IN_VIEW="in_view",a.DIRECT="direct",a),E=((o=E||{}).RESOURCES="resources",o.LIKES="likes",o.FOLLOWERS="followers",o.FOLLOWING="following",o.METRICS="metrics",o.SAVES="saves",o),y=((l=y||{})[l.DEFAULT=0]="DEFAULT",l.FULLSCREEN="fullscreen",l.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",l),v=((s=v||{}).ONBOARDING="onboarding",s);function b(e){return"org"===e.view}var I=((c=I||{})[c.PROJECT=0]="PROJECT",c[c.TEAM=1]="TEAM",c[c.WORKSPACE=2]="WORKSPACE",c[c.LICENSE_GROUP=3]="LICENSE_GROUP",c),T=((d=T||{}).UPGRADE_EXISTING_TEAM="upgrade_existing_team",d.CREATE_AND_UPGRADE="create_and_upgrade",d.CREATE="create",d),w=((u=w||{})[u.UNDETERMINED=0]="UNDETERMINED",u[u.STARTER=1]="STARTER",u[u.TEAM=2]="TEAM",u[u.ORG=3]="ORG",u);function S(e){return"create"===e||"create_and_upgrade"===e}function C(e){return"upgrade_existing_team"===e}function O(e,t){return"create"===e&&(t===p.KB.CREATE_TEAM||t===p.KB.ADD_COLLABORATORS)||t===p.KB.PLAN_COMPARISON}let A=["recentFiles","deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects"];function N(e){return A.includes(e.view)}},468310:(e,t,r)=>{r.d(t,{Ey:()=>u,ls:()=>l,zn:()=>m});var n,i,a,o=r(188558),l=((n=l||{}).TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",n.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",n);let s=o.z.nativeEnum(l);var c=((i=c||{}).MEMBERS="members",i.ALL_USERS="all_users",i.DISABLED="disabled",i);let d=o.z.nativeEnum(c);var u=((a=u||{}).ALLOWED="public_link_controls_setting_allowed",a.PASSWORD_REQUIRED="public_link_controls_setting_password_required",a.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",a.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",a.BANNED="public_link_controls_setting_banned",a);let p=o.z.nativeEnum(u),m=o.z.object({team_creation_controls:s.optional().nullable(),external_collaboration_controls:o.z.boolean(),ip_account_restriction:o.z.boolean().optional(),idle_timeout_duration_in_secs:o.z.number().optional().nullable(),autogen_password_controls:o.z.boolean(),public_link_controls_setting:p.optional().nullable(),public_link_controls_max_expiration:o.z.number().optional().nullable(),configured_upgrade_request_setting:d.optional().nullable(),configured_upgrade_request_message:o.z.string().optional().nullable()})},966515:(e,t,r)=>{r.d(t,{U:()=>i});var n,i=((n=i||{}).NAME="Name",n.ACTIVE_AT="Last active",n.PERMISSIONS="Team permissions",n.DESIGN_PAID_STATUS="Design role",n.FIGJAM_PAID_STATUS="FigJam role",n)},712137:(e,t,r)=>{r.d(t,{n:()=>n});let n={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},595819:(e,t,r)=>{r.d(t,{Eg:()=>a,_N:()=>o,j:()=>l});var n,i,a=((n=a||{}).FULL="full",n.RESTRICTED="restricted",n.STARTER="starter",n),o=((i=o||{}).DESIGN="design",i.WHITEBOARD="whiteboard",i);let l={full:3,starter:2,restricted:1}},460122:(e,t,r)=>{r.d(t,{I:()=>o,g:()=>a});var n,i=r(970740),a=((n=a||{}).ROLE_UPGRADE="role_upgrade",n.INVITE_REDEEM="invite_redeem",n.INVITE_AUTOUPGRADE="invite_autoupgrade",n.CREATE_TEAM="create_team",n.FIGMA_ADMIN="figma_admin",n.DEPART_TEAM="depart_team",n.CREATE_FILE="create_file",n.RESOURCE_MOVED="resource_moved_to_team",n.RESOURCE_MOVED_FROM_DRAFTS="resource_moved_from_plan_drafts",n.RESTORED_FROM_TRASH="resource_restored_from_trash",n.JOIN_LINK_REDEEM="join_link_redeem",n.ADMIN_UPGRADE="team_admin_upgrade",n.CHECKOUT="checkout",n.EDIT_REQUEST_APPROVAL="edit_request_approval",n.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",n.EDIT_ACTION="edit_action",n.EDIT_BUTTON="edit_button",n.FIGJAM_GA_REUPGRADE="fj_ga_reupgrade",n.RUN_PLUGIN="run_plugin",n.DEV_MODE="dev_mode",n);let o=(e,t)=>{switch(e.reason){case"role_upgrade":if(e.actor_name)return(0,i.t)("team_user.upgrade_reasons.role_upgrade.seat_rename",{actorName:e.actor_name,memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});return(0,i.t)("team_user.upgrade_reasons.role_upgrade_without_actor_name.seat_rename",{memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});case"invite_redeem":return(0,i.t)("team_user.upgrade_reasons.invite_redeem.seat_rename",{actorName:e.actor_name||"",memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});case"invite_autoupgrade":return(0,i.t)("team_user.upgrade_reasons.invite_autoupgrade.seat_rename",{actorName:e.actor_name||"",memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});case"resource_moved_from_plan_drafts":case"resource_moved_to_team":return(0,i.t)("team_user.upgrade_reasons.resource_moved",{memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});case"create_team":return(0,i.t)("team_user.upgrade_reasons.create_team",{memberNameOrEmail:t});case"resource_restored_from_trash":return(0,i.t)("team_user.upgrade_reasons.restored_from_trash",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"figma_admin":return(0,i.t)("team_user.upgrade_reasons.figma_admin",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"depart_team":return(0,i.t)("team_user.upgrade_reasons.depart_team",{memberNameOrEmail:t});case"join_link_redeem":return(0,i.t)("team_user.upgrade_reasons.join_link_redeem",{memberNameOrEmail:t});case"create_file":return(0,i.t)("team_user.upgrade_reasons.create_file",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"team_admin_upgrade":case"checkout":return(0,i.t)("team_user.upgrade_reasons.checkout.seat_rename",{actorName:e.actor_name||"",memberNameOrEmail:t});case"edit_request_auto_approval":case"edit_request_approval":return(0,i.t)("team_user.upgrade_reasons.edit_request_approval",{memberNameOrEmail:t,resourceType:e.resource_type||"",resourceName:e.resource_name||""});case"edit_action":return(0,i.t)("team_user.upgrade_reasons.edit_action",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"edit_button":return(0,i.t)("team_user.upgrade_reasons.edit_button",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"fj_ga_reupgrade":return(0,i.t)("team_user.upgrade_reasons.figjam_ga_reupgrade",{memberNameOrEmail:t,resourceName:e.resource_name||""});case"run_plugin":return(0,i.t)("team_user.upgrade_reasons.run_plugin",{memberNameOrEmail:t});default:return(0,i.t)("team_user.upgrade_reasons.default",{memberNameOrEmail:t})}}},818709:(e,t,r)=>{r.d(t,{HB:()=>f,JO:()=>m,QX:()=>_,XH:()=>E,X_:()=>h,x$:()=>y,zO:()=>p});var n,i,a,o,l,s=r(188558),c=r(761767),d=r(556928),u=r(97049);let p=118;var m=((n=m||{}).REQUIRES_SOURCE_ACTION="requires_source_action",n),h=((i=h||{}).ORG_BROWSABLE="org_browsable",i.HIDDEN="hidden",i),_=((a=_||{}).STUDENT_TEAM_NULL="not_student_team",a.STUDENT_TEAM_CURRENT="current_student_team",a.STUDENT_TEAM_EXPIRED="expired_student_team",a);let g=s.z.nativeEnum(_);d.nF.extend({created_at:s.z.string(),id:s.z.string(),img_url:s.z.string().optional(),org_id:s.z.string().nullable(),name:s.z.string(),description:s.z.string(),projects:s.z.number(),editors:s.z.number(),realtime_token:s.z.string().optional(),restrictions_list:s.z.array(c.CE).nullable(),subscription:c.KC.nullable(),subscription_raw:c.KC.nullable(),org_access:c.ZU.nullable(),stripe_customer_id:s.z.string().nullable(),student_team_at:s.z.string().nullable(),student_team_state:g,student_autoverifying_team_at:s.z.string().nullable(),student_team:s.z.boolean(),pro_team:s.z.boolean(),org_team:s.z.boolean(),starter_team:s.z.boolean(),grace_period_end:s.z.string().nullable(),grace_period_type:c.KF.nullable(),last_upgraded_at:s.z.string().nullable(),deleted_at:s.z.string().nullable(),community_profile_id:s.z.string().optional(),community_profile_handle:s.z.string().optional(),experiment_seed:s.z.union([s.z.number(),s.z.string()]).nullable(),license_group_id:s.z.string().nullable(),license_group:u._.nullable(),workspace_id:s.z.string().nullable(),default_permission:c.Zd.optional().nullable(),is_favorited:s.z.boolean().optional(),vat_gst_id:s.z.string().optional(),tax_id_verification_status:c.fI.optional(),cmty_publish_as_user_enabled:s.z.boolean().optional(),ai_features_disabled:s.z.boolean().optional(),legal_name:s.z.string().nullable(),shared_by_text:s.z.string().optional(),org_or_team_name:s.z.string().optional().nullable(),sharing_audience_control:c.f8.optional(),org_browsable:s.z.boolean().optional(),hidden:s.z.boolean().optional()});let f=(e,t)=>`${location.origin}/files/${t?t+"/":""}team/${e}`;var E=((o=E||{}).MOVE_FILES="move_files",o.DUPLICATE_FILES="duplicate_files",o.RESTORE_FILES="restore_files",o.MOVE_FOLDER="move_folder",o.IMPORT_FILES="import_files",o.CREATE_FILE="create_file",o.CREATE_FOLDER="create_folder",o.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",o.CREATE_PAGE="create_page",o.DUPLICATE_PAGE="duplicate_page",o.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",o.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",o.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",o),y=((l=y||{}).PUBLISH_COMPONENTS="publish_components",l.USE_AUDIO="use_audio",l.VIEW_ONLY_PROJECT="view_only_project",l.INVITE_ONLY_PROJECT="invite_only_project",l)},916903:(e,t,r)=>{r.d(t,{$Q:()=>m,$j:()=>f,BO:()=>d,FN:()=>p,H6:()=>h,Ox:()=>_,go:()=>g,qP:()=>u});var n,i,a,o,l,s,c,d=((n=d||{})[n.NAME=0]="NAME",n[n.CREATED_AT=1]="CREATED_AT",n[n.TOUCHED_AT=2]="TOUCHED_AT",n[n.TRASHED_AT=3]="TRASHED_AT",n[n.OWNER=4]="OWNER",n[n.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",n[n.PROJECT_NAME=6]="PROJECT_NAME",n[n.ACCESSED_AT=7]="ACCESSED_AT",n[n.SHARED_AT=8]="SHARED_AT",n),u=((i=u||{})[i.ASC=0]="ASC",i[i.DESC=1]="DESC",i),p=((a=p||{})[a.ANY=0]="ANY",a[a.SELF=1]="SELF",a[a.OTHER=2]="OTHER",a),m=((o=m||{})[o.ANY=0]="ANY",o[o.DESIGN=1]="DESIGN",o[o.FIGJAM=2]="FIGJAM",o[o.PROTOTYPE=3]="PROTOTYPE",o),h=((l=h||{})[l.LIST=0]="LIST",l[l.GRID=1]="GRID",l),_=((s=_||{}).ALL="",s.SHARED="shared",s.ORG_DELETED_DRAFTS="deleted_user_drafts",s);let g=e=>{switch(e){case 0:return"resource_name";case 1:return"resource_created_at";case 8:return"shared_at";default:return null}};var f=((c=f||{})[c.TIME=0]="TIME",c[c.ALPHABETICAL=1]="ALPHABETICAL",c[c.OTHER=2]="OTHER",c)},310975:(e,t,r)=>{r.d(t,{QE:()=>s,Sc:()=>l,cv:()=>d,ph:()=>c,rU:()=>u});var n,i,a,o=r(188558),l=((n=l||{}).NONE="none",n.ACCEPTED="accepted",n.STARTED_ONBOARDING="started_onboarding",n.DISABLED="disabled",n.ENABLED="enabled",n),s=((i=s||{}).NUM_CUSTOMERS="num_customers",i.PAYOUTS="payouts",i.GROSS="gross",i.LAST_UPDATED="last_updated_at",i.ALL_TIME_TOTAL_EARNED="all_time_total_earned",i.NUM_PURCHASES="num_purchases",i);function c(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}let d=o.z.object({id:o.z.string(),name:o.z.string().optional(),handle:o.z.string(),img_url:o.z.string(),email:o.z.string().optional(),description:o.z.string().nullish(),org_id:o.z.string().optional()});var u=((a=u||{}).EDITOR_ON_MAIN="Editor on main",a.EDITOR_ON_TEAM="Editor on team",a)},229273:(e,t,r)=>{r.d(t,{Ay:()=>o,Wx:()=>s,bA:()=>a,cE:()=>n,jF:()=>c,pP:()=>l,qb:()=>u,zF:()=>d,zr:()=>i});let n="show_m10n_approval_banner",i="show_m10n_stripe_onboarding_incomplete",a="show_m10n_stripe_adtl_info_needed_banner",o="seen_advanced_prototyping_upsell",l=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_ux_feedback_survey","seen_ux_figjam_feedback_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"]),s=["collective_upsell_widget_seen_1","collective_upsell_widget_seen_10","collective_upsell_widget_seen_100"],c=["collective_upsell_full_screen_seen_1","collective_upsell_full_screen_seen_10"],d="exp_single_editor_recommended_badge_control_new",u="exp_single_editor_recommended_badge_variant_new"},157506:(e,t,r)=>{r.d(t,{$c:()=>s,Tb:()=>d,Zz:()=>c,kI:()=>u,nP:()=>l});var n,i,a,o,l=((n=l||{})[n.CONNECTED=0]="CONNECTED",n[n.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",n[n.DISCONNECTED=2]="DISCONNECTED",n[n.CONNECTING=3]="CONNECTING",n[n.DISCONNECTING=4]="DISCONNECTING",n[n.RECONNECTING=5]="RECONNECTING",n[n.ERROR=6]="ERROR",n[n.CALL_INACTIVE=7]="CALL_INACTIVE",n[n.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",n[n.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",n[n.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",n[n.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",n[n.USER_JOINED=12]="USER_JOINED",n[n.USER_LEFT=13]="USER_LEFT",n[n.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",n[n.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",n[n.UNMUTE=16]="UNMUTE",n[n.MUTE=17]="MUTE",n[n.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",n[n.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",n[n.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",n[n.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",n[n.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",n[n.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",n[n.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",n[n.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",n[n.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",n[n.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",n);let s=new Set([9,10]);var c=((i=c||{})[i.NONE=0]="NONE",i[i.HEADPHONES=1]="HEADPHONES",i[i.FULL=2]="FULL",i),d=((a=d||{}).ERROR="error",a.WARNING="warning",a.MESSAGE="message",a.SUCCESS="success",a.PENDING="pending",a),u=((o=u||{})[o.DONE=100]="DONE",o[o.STARTED=1]="STARTED",o[o.NOT_STARTED=0]="NOT_STARTED",o[o.DISK_ERROR=-1]="DISK_ERROR",o[o.NETWORK_ERROR=-2]="NETWORK_ERROR",o)},867325:(e,t,r)=>{r.d(t,{Ov:()=>s,ep:()=>o,fW:()=>c,rE:()=>l,u5:()=>d});var n,i,a,o=((n=o||{}).ADMIN="admin",n.DIRECTORY="directory",n),l=((i=l||{}).TEAMS="teams",i);let s=["teams"];var c=((a=c||{}).TEAMS="teams",a.MEMBERS="members",a.LIBRARIES="libraries",a.SETTINGS="settings",a);let d=["teams","members"]},598253:(e,t,r)=>{r.d(t,{Dn:()=>c,Jn:()=>i,PY:()=>u,Sp:()=>s,VJ:()=>o,Vj:()=>a,YT:()=>l,rs:()=>d});var n=r(337167);let i=(0,n.cn)(!1),a=(0,n.cn)(!1),o=(0,n.cn)(null),l=(0,n.cn)(null),s=(0,n.cn)(null),c=(0,n.cn)(null),d=(0,n.cn)(!1),u=(0,n.cn)(e=>{let t=e(l);return t?e(o):null})},154938:(e,t,r)=>{r.d(t,{f:()=>a,p:()=>o});var n=r(337167);let i=(0,n.cn)(0);function a(){n.n_.set(i,e=>e+1)}function o(){return(0,n.Dv)(i)}},500278:(e,t,r)=>{r.d(t,{G:()=>_,Y:()=>g});var n=r(652983),i=r(391320),a=r(716250),o=r(594619),l=r(970740),s=r(456496),c=r(160296),d=r(300174),u=r(809377),p=r(761767),m=r(13155),h=r(158451);function _(){var e;let{toggle:t,showing:r}=(0,u.x)("CODE_SETTINGS_DROPDOWN"),i=n.useRef(null),c=null==(e=i.current)?void 0:e.getBoundingClientRect(),{updateDefaultCodegenSettings:d,isSetToDefault:p}=g();return(0,a.BZ)().dev_mode_default_codegen?n.createElement(n.Fragment,null,n.createElement("button",{ref:i,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},className:"default_codegen--dotsButton--Svkin"},n.createElement(s.JO,{icon:"dots-32"})),r&&c&&n.createElement(m.AQ,{targetRect:c,propagateCloseClick:!0},n.createElement(o.j.CheckableOption,{onClick:d,checked:p},n.createElement(l.Tx,{id:"dev_handoff.code.settings.set_as_default"})))):null}function g(){let{setCodegenSettings:e,localCodegenSettings:t}=(0,h.Pc)(),r=(0,c.U2)(),a=(0,d.Gn)(),o=n.useMemo(()=>(null==t?void 0:t.behavior)===p.LX.OVERRIDE&&(0,i.Me)(null==t?void 0:t.language,r)&&(0,i.Me)(null==t?void 0:t.preferences,a),[r,a,t]),l=n.useCallback(()=>{e({behavior:o?p.LX.INHERIT:p.LX.OVERRIDE,language:r,preferences:a})},[r,a,o,e]);return{updateDefaultCodegenSettings:l,isSetToDefault:o}}},109032:(e,t,r)=>{r.d(t,{Au:()=>tl,J9:()=>th,N8:()=>tE,ZA:()=>t_,dg:()=>e9,rA:()=>ty,vV:()=>tg});var n=r(600486),i=r(5453),a=r(46347),o=r(196401),l=r(647744),s=r(239299),c=r(556979),d=r(269658),u=r(448501),p=r(716250),m=r(337167),h=r(609380),_=r(286206),g=r(117986),f=r(361763),E=r(518484),y=r(31642),v=r(188558),b=r(297296),I=r(369874),T=r(255215),w=r(47389),S=r(199184),C=r(721154),O=r(954109),A=r(721127),N=r(239461),L=r(837728),P=r(646012),R=r(936561),k=r(667981),D=r(161895),M=r(597630),F=r(158774),x=r(961215),U=r(269075),B=r(784667),V=r(494318),G=r(545577),H=r(640723),W=r(662507),K=r(992750),z=r(271774),Z=r(360530),Y=r(259309),j=r(527323),$=r(200273),q=r(112088),X=r(994538),J=r(763877),Q=r(54159),ee=r(339531),et=r(642577),er=r(662202),en=r(722330),ei=r(413810),ea=r(758622),eo=r(678910),el=r(996068),es=r(646472),ec=r(257817),ed=r(661539),eu=r(598253),ep=r(154938),em=r(508966),eh=r(175190),e_=r(737298),eg=r(758846),ef=r(657759),eE=r(808549),ey=r(19984),ev=r(611784),eb=r(640634),eI=r(166689),eT=r(247694),ew=r(228488),eS=r(410224),eC=r(502116),eO=r(490420),eA=r(437557),eN=r(706034),eL=r(964517),eP=r(282542),eR=r(968935),ek=r(978776),eD=r(482962),eM=r(414861),eF=r(386342),ex=r(122037),eU=r(633481),eB=r(204884),eV=r(490441),eG=r(374871),eH=r(883261),eW=r(608715),eK=r(89947),ez=r(150741),eZ=r(814851),eY=r(226821),ej=r(9674),e$=r(851035),eq=r(107387),eX=r(613783),eJ=r(44017),eQ=r(939818),e0=r(641455),e1=r(504181),e2=r(984612),e3=r(374389),e4=r(324077),e6=r(398336),e8=r(903280);function e9(e,t,r){e.isEqual(e.undefined,e.getProp(e.global,"alert"))&&e.defineFunction(e.global,"alert","alert",t=>{let n=e.toString(t);return n=""!==r?`From the plugin "${r}":

${n}`:`From the current plugin:

${n}`,alert(n),e.undefined})}function e5({vm:e,callerName:t,nodes:r,parentArg:n,indexArg:i,getNode:a}){if(!e.isArray(r))throw Error(`First argument to ${t}() must be an array`);let o=e.getNumberProp(r,"length");if(o<1)throw Error(`First argument to ${t}() must be an array of at least one node`);let l=[];for(let t=0;t<o;t++){let n=e.getProp(r,t.toString());l.push(a(n).guid)}let s=e.isUndefined(n)?void 0:a(n),c=-1;return e.isUndefined(i)||(c=(0,ez.v1)({vm:e,handle:i,vmSchema:ez.ng.integer.min(0),zSchema:eX.Y.PositiveInteger,property:`${t} index`})),{nodeIds:l,parent:s,index:c}}let e7=new Set(["codegen","related-link-preview","textreview"]),te=new Set(["codegen","linkpreview","textreview"]),tt=ez.ng.exact({origin:ez.ng.string.isOptional}).isOptional,tr=v.z.object({origin:v.z.string().optional()}).optional(),tn=["close","selectionchange","currentpagechange","drop","run","documentchange","textreview"].concat(eH.h),ti=[],ta=["message"],to=["input"];class tl{constructor(e,t){if(this.vm=e,this.options=t,this.visualBellCounter=0,this.eventHandlers=new Map,this.eventHandlerTimeouts=new Map,this.scheduledEvents=new Map,this.runningSyncEvent=null,this.previousSelection=[],this.previousSelectedTextRangeJson="null",this.onMessageCallback=void 0,this.queryMode=!1,this.checkoutRequested=!1,this.ignoreEditActions=!1,this.widgetManager=void 0,this.skipInvisibleInstanceChildren=!1,this.getNode=e=>{let t=this.vm,r=this.privateSceneGraph;if(!t.isObject(e))throw Error(`Expected node, got ${t.isNull(e)?"null":t.typeof(e)}`);let n=t.getProp(e,"id");if(!t.isString(n))throw Error(`Expected node id to be a string, got ${t.typeof(n)}`);let i=t.toString(n);if((0,K.gY)(i)){let e=this.styleManager.get(i);if(void 0===e)throw new eM.PM(`The style with id ${JSON.stringify(i)} does not exist`);return e}if(eb.JY(i)){let e=eb.mL(i),t=r.getVariable(e);if(void 0===t)throw new eM.PM(`The variable with id ${JSON.stringify(i)} does not exist`);return t}if(P.lP.isValid(i)){let e=eI.mL(i),t=r.getVariableCollection(e);if(void 0===t)throw new eM.PM(`The variable collection with id ${JSON.stringify(i)} does not exist`);return t}if(x.Cj$.isDeveloperFriendlyIdAGuidPath(i)){let e=r.guidFromDeveloperFriendlyId(i),t=e?r.get(e):void 0;if(void 0===t)throw new eM.PM(`The node (instance sublayer or table cell) with id ${JSON.stringify(i)} does not exist`);return t}{let e=(0,eM.eG)(i,r);if(e.isInWidget&&!((0,p.BZ)().widgets_children_trait_for_test||"scopednoopvm"===t.vmType))throw new eM.PM(`The node (instance sublayer) with id ${JSON.stringify(i)} does not exist`);return e}},this.ignoreEditActionsScope=e=>{try{return this.ignoreEditActions=!0,e()}finally{this.ignoreEditActions=!1}},this.defineVmIncrementalProp=({handle:e,key:t,metricsKey:r,enumerable:n,incrementalSafeApiKey:i,incrementalSafeApiMetricsKey:a,incrementalSafeApiSetKey:o,incrementalSafeApiSetMetricsKey:l,canWriteInReadOnly:s,parseThis:c,parseIncrementalValueArg:d,prepareDocument:u,resolveValue:m,resolveValueIncremental:h,retainGetter:_,retainSetter:g=!1,setValue:f,setValueIncremental:E,incrementalSafeApi:y,isAllowedInWidgetRender:v=!0,hasEditScope:b=!0})=>{let I=this.vm;this.defineVmProp({handle:e,key:t,options:{metricsKey:r,enumerable:n,get:function(){if(y&&a&&!_)throw Error(eL.$5.invalidIncremental(a));let e=c(this);return m(e)},set:f?function(e){if(y&&E&&!g)throw Error(eL.$5.invalidIncremental(l));let t=c(this);return f(t,e)}:void 0},canWriteInReadOnly:s,isAllowedInWidgetRender:v,hasEditScope:b}),(0,p.BZ)().plugins_incremental_loading_api&&(i&&a&&this.defineVmFunction({handle:e,key:i,metricsKey:a,cb:function(){let e=c(this),{promise:t,resolve:r,reject:n}=I.newPromise();return I.registerPromise(u(e)).then(()=>{h?r(h(e)):r(m(e))}).catch(e=>{n(I.newString(e.message))}),t},isAllowedInReadOnly:!0,isAllowedInWidgetRender:v,hasEditScope:b}),o&&l&&E&&d&&this.defineVmFunction({handle:e,key:o,metricsKey:l,cb:function(e){let t=c(this),r=d(e),{promise:n,resolve:i,reject:a}=I.newPromise();return I.registerPromise(u(t)).then(()=>{U.y2.plugin(o,()=>{E(t,r),i(I.undefined)})}).catch(e=>{a(I.newString(e.message))}),n},isAllowedInReadOnly:!1,isAllowedInWidgetRender:v,hasEditScope:b}))},this.defineVmFunction=({handle:e,key:t,metricsKey:r,cb:n,isAllowedInReadOnly:i,isAllowedInWidgetRender:a=!0,hasEditScope:o=!0})=>{let l=this;this.vm.defineFunction(e,t,r,function(e,r,s,c,d){var u;if((null==(u=l.widgetManager)?void 0:u.isRunningWidgetFunction())&&l.shouldLockDownPluginApiForWidgets()&&!a&&l.handleLockDownPluginApiError(`Widget Rendering Error: Cannot use "${t}" during widget rendering.`),l.isReadOnlyMode()&&!i)throw Error(`Can't call "${t}" in read-only mode`);return i||l.ignoreEditActions||N.WT.reportEditAction(`plugin-${t}`),l.conditionalEditScope(o,t,()=>n.call(this,e,r,s,c,d))})},this.defineVmIncrementalFunction=({handle:e,key:t,metricsKey:r,incrementalSafeApiKey:n,incrementalSafeApiMetricsKey:i,parseArg:a,prepareDocument:o,resolveValue:l,isAllowedInReadOnly:s,incrementalSafeApi:c,isAllowedInWidgetRender:d=!0,hasEditScope:u=!0})=>{this.defineVmFunction({handle:e,key:t,metricsKey:r,cb:e=>{if(c&&i)throw Error(eL.$5.invalidIncremental(i));let t=a(e);return l(t)},isAllowedInReadOnly:s,isAllowedInWidgetRender:d,hasEditScope:u}),(0,p.BZ)().plugins_incremental_loading_api&&this.defineVmFunction({handle:e,key:n,metricsKey:i,cb:e=>{let t=a(e),{promise:r,resolve:n,reject:i}=this.vm.newPromise();return this.vm.registerPromise(o(t)).then(()=>{n(l(t))}).catch(e=>{i(this.vm.newString(e.message))}),r},isAllowedInReadOnly:s,isAllowedInWidgetRender:d,hasEditScope:u})},this.defineVmIncrementalMethod=({handle:e,key:t,metricsKey:r,incrementalSafeApiKey:n,incrementalSafeApiMetricsKey:i,parseThis:a,parseArg:o,prepareDocument:l,resolveValue:s,isAllowedInReadOnly:c,incrementalSafeApi:d,isAllowedInWidgetRender:u,hasEditScope:m})=>{let h=this.vm;this.defineVmFunction({handle:e,key:t,metricsKey:r,cb:function(e,t,r,n,l){if(d)throw Error(eL.$5.invalidIncremental(i));let c=a(this),u=o(c,e,t,r,n,l);return s(c,u)},isAllowedInReadOnly:c,isAllowedInWidgetRender:u,hasEditScope:m}),(0,p.BZ)().plugins_incremental_loading_api&&this.defineVmFunction({handle:e,key:n,metricsKey:i,cb:function(e,t,r,i,c){let d=a(this),u=o(d,e,t,r,i,c),{promise:p,resolve:m,reject:_}=h.newPromise();return h.registerPromise(l(d,u)).then(()=>{m(U.y2.plugin(n,()=>s(d,u)))}).catch(e=>{_(h.newString(e.message))}),p},isAllowedInReadOnly:c,isAllowedInWidgetRender:u,hasEditScope:m})},this.defineVmProp=({handle:e,key:t,options:r,canWriteInReadOnly:n,isAllowedInWidgetRender:i=!0,hasEditScope:a=!0})=>{let{get:o,set:l}=r,s={...r},c=this;o&&(s.get=function(){var e;return(null==(e=c.widgetManager)?void 0:e.isRunningWidgetFunction())&&c.shouldLockDownPluginApiForWidgets()&&!i&&c.handleLockDownPluginApiError(`Widget Rendering Error: Cannot use "${t}" during widget rendering.`),o.call(this)}),l&&(s.set=function(e){var r;if((null==(r=c.widgetManager)?void 0:r.isRunningWidgetFunction())&&c.shouldLockDownPluginApiForWidgets()&&!i&&c.handleLockDownPluginApiError(`Widget Rendering Error: Cannot use "${t}" during widget rendering.`),c.isReadOnlyMode()&&!n)throw Error(`Can't set "${t}" in read-only mode`);return n||c.ignoreEditActions||N.WT.reportEditAction(`plugin-${t}`),c.conditionalEditScope(a,t,()=>l.call(this,e))}),this.vm.defineProp(e,t,s)},this.addEventHandler=(e,t,r,n,i)=>{let a;if(this.options.stats.increment(n?`${i}.once.${t}`:`${i}.on.${t}`),!this.vm.isFunction(r))throw Error(`${t} handler must be a function`);let o=this.eventHandlers.get(t)||[],l=o.length;if(!l&&"documentchange"===t){if(this.options.incrementalSafeApi&&this.documentAccessState.getIsIncrementalMode())throw Error("Cannot register documentchange handler in incremental mode without calling figma.loadAllPagesAsync first.");(0,X.O)(this.documentChangeCallback)}if(l||"stylechange"!==t||this.vm.registerPromise((0,eL.f1)(this.documentAccessState)).then(()=>{(0,X.ze)(this.styleChangeCallback)}).catch(e=>{throw Error(`Cannot register stylechange handler: ${e.message}`)}),"nodechange"===t){let t=this.getNode(e);if("CANVAS"!==t.type)throw Error("Cannot register nodechange handler on non-page node");a=t.guid,l||(0,X.k8)(this.nodeChangeCallback)}o.push({handler:r,once:n,pageGuid:a}),this.eventHandlers.set(t,o),this.vm.retainHandle(r),l||"textreview"!==t||"textreview"!==this.options.command||(0,X.bU)(this.spellCheckCallback),l||"generate"!==t||(0,X.zg)(this.codegenCallback),this.options.isLocal||l||"codegen"!==t||(0,X.zg)(this.legacyCodegenCallback),l||"linkpreview"!==t||(0,X.Ew)(this.linkPreviewCallback),l||"auth"!==t||(0,X.T1)(this.authCallback),l||"open"!==t||(0,X.XB)(this.devResourceOpenCallback);let s=this.scheduledEvents.get(t);s&&s()},this.removeEventHandler=(e,t,r)=>{let n=this.eventHandlers.get(t);if(n){for(let i=n.length-1;i>=0;i--)if(this.vm.isEqual(n[i].handler,r)){if("nodechange"===t){let t=this.getNode(e);if(n[i].pageGuid!==t.guid)continue}n.splice(i,1),this.vm.releaseHandle(r),n.length||"nodechange"!==t||(0,X.Il)(this.nodeChangeCallback),n.length||"stylechange"!==t||(0,X.x0)(this.styleChangeCallback),n.length||"documentchange"!==t||(0,X.V$)(this.documentChangeCallback);return}}},this.addEventHandlersTo=(e,t,r,n)=>{let i=ez.ng.oneOf(t),a=this.vm,o=this.addEventHandler,l=this.removeEventHandler;this.defineVmFunction({handle:e,key:"on",metricsKey:null,cb:function(e,l){let s=(0,ez.v1)({vm:a,handle:e,vmSchema:i,zSchema:eP.S.refine(e=>t.includes(e)),property:"eventName"});return o(this,s,l,!1,r),n&&n(s),a.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:e,key:"once",metricsKey:null,cb:function(e,l){let s=(0,ez.v1)({vm:a,handle:e,vmSchema:i,zSchema:eP.S.refine(e=>t.includes(e)),property:"eventName"});return o(this,s,l,!0,r),n&&n(s),a.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:e,key:"off",metricsKey:null,cb:function(e,r){let n=(0,ez.v1)({vm:a,handle:e,vmSchema:i,zSchema:eP.S.refine(e=>t.includes(e)),property:"eventName"});return l(this,n,r),a.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1})},this.selectionCallback=()=>{this.fireDebouncedEventAsync("selectionchange",()=>{let e=tg(this.privateSceneGraph).map(e=>e.guid),t=this.currentSelectedTextRangeJson();(0,i.Vg)(this.previousSelection,e)&&this.previousSelectedTextRangeJson===t||this.fireEventSync("selectionchange",[]),this.previousSelection=e,this.previousSelectedTextRangeJson=t,x.Cj$.resetSelectionCouldBeDirty()})},this.pageCallback=()=>{this.fireDebouncedEventAsync("currentpagechange",()=>{this.fireEventSync("currentpagechange",[])})},this.codegenPreferencesChangeCallback=e=>{this.fireDebouncedEventAsync("preferenceschange",()=>{this.overrideRuntimeOptions({allowVisibleIframe:!0,defaultIframePosition:"codegen-default",iframeId:(0,eK.q)({triggeredFrom:"codegen"}),allowInitiateCheckout:!0},()=>{let t=this.vm.newObject();this.vm.setStringProp(t,"propertyName",e.propertyName),this.fireEventSync("preferenceschange",[t])})})},this.devResourceOpenCallback=e=>{this.fireEventSync("open",[this.vm.deepWrap(e)])},this.dropCallback=e=>{if(!e.dataTransfer)return!0;let t=[];for(let r=0;r<e.dataTransfer.items.length;r++){let n=e.dataTransfer.items[r];"string"===n.kind&&t.push({type:n.type,data:e.dataTransfer.getData(n.type)})}let r=this.createDropEvent({x:e.clientX,y:e.clientY},t,e.dataTransfer.files);return this.fireEventSyncWithReturn("drop",[r])},this.spellCheckCallback=this.createPromiseCallback({makeInputEvent:e=>{let t=this.vm.newObject();return this.vm.setProp(t,"text",this.vm.newString(e)),t},eventName:"textreview",resultSchema:eB.k6,zResultSchema:eX.Y.TextReviewResultSchema,defaultResult:[],rejectMessage:"Promise returned from 'textreview' event rejected. Unable to show text review suggestions."}),this.legacyCodegenCallback=this.createPromiseCallback({makeInputEvent:e=>{let t=this.vm.newObject(),r=this.nodeFactory.createNode(e,"codegen");return this.vm.setProp(t,"node",r),t},eventName:"codegen",resultSchema:eB.K,zResultSchema:eX.Y.CodegenResultSchema,defaultResult:[],rejectMessage:"Promise returned from codegen event rejected. Unable to generate code."}),this.codegenCallback=this.createPromiseCallback({makeInputEvent:e=>{let t=this.vm.newObject(),r=this.nodeFactory.createNode(e,"generate");return this.vm.setProp(t,"node",r),this.vm.setProp(t,"language",this.vm.newString(this.getCodegenLanguage())),t},eventName:"generate",resultSchema:eB.K,zResultSchema:eX.Y.CodegenResultSchema,defaultResult:[],rejectMessage:"Promise returned from codegen 'generate' event rejected. Unable to generate code."}),this.getChangeCallbackHandle=(e,t)=>{let r=this.vm.newArray();for(let n=0;n<t.length;n++){let i=this.vm.newObject(),a=t[n];a.type===x.pAX.STYLE_PROPERTY_CHANGE||a.type===x.pAX.STYLE_CREATE||a.type===x.pAX.STYLE_DELETE?this.vm.setProp(i,"id",this.vm.newString(a.styleKey)):(a.type===x.pAX.PROPERTY_CHANGE||a.type===x.pAX.CREATE||a.type===x.pAX.DELETE)&&this.vm.setProp(i,"id",this.vm.newString(a.devFriendlyId));let o=this.documentChangeTypeToString(a.type);if(this.vm.setProp(i,"origin",this.vm.newString(this.documentChangeOriginToString(a.origin))),this.vm.setProp(i,"type",this.vm.newString(o)),"PROPERTY_CHANGE"===o||"STYLE_PROPERTY_CHANGE"===o){let e=this.vm.newArray(),t=Array.from(a.properties);for(let r=0;r<t.length;r++)"strokeTopWeight"===t[r]?this.vm.setProp(e,String(r),this.vm.newString("stokeTopWeight")):this.vm.setProp(e,String(r),this.vm.newString(t[r]));this.vm.setProp(i,"properties",e)}if(a.type===x.pAX.STYLE_PROPERTY_CHANGE||a.type===x.pAX.STYLE_CREATE){let e=this.styleFactory.createStyle(a.styleKey);this.vm.setProp(i,"style",e)}else if(a.type===x.pAX.STYLE_DELETE)this.vm.setProp(i,"style",this.vm.null);else if(a.type===x.pAX.PROPERTY_CHANGE||a.type===x.pAX.CREATE||a.type===x.pAX.DELETE){let t;let r=this.privateSceneGraph.get(a.id);r?t=this.nodeFactory.createNode(a.id,e):(t=this.vm.newObject(),this.vm.setProp(t,"id",this.vm.newString(a.devFriendlyId)),this.vm.setProp(t,"type",this.vm.newString(a.nodeType)),this.vm.setProp(t,"removed",this.vm.newBoolean(!0)),this.vm.shallowFreezeObject(t)),this.vm.setProp(i,"node",t)}this.vm.setProp(r,String(n),i)}return r},this.documentChangeCallback=e=>{let t=this.getChangeCallbackHandle("documentchange",e),r=this.vm.newObject();this.vm.setProp(r,"documentChanges",t);try{x.Cj$.prepareToRunDocumentChangeCallback(),this.fireEventSync("documentchange",[r])}finally{x.Cj$.finishedRunningDocumentChangeCallback()}},this.styleChangeCallback=e=>{if(0===e.length)return;let t=this.getChangeCallbackHandle("stylechange",e),r=this.vm.newObject();this.vm.setProp(r,"styleChanges",t);try{x.Cj$.prepareToRunDocumentChangeCallback(),this.fireEventSync("stylechange",[r])}finally{x.Cj$.finishedRunningDocumentChangeCallback()}},this.nodeChangeCallback=e=>{let t=this.eventsByPageGuid(e);for(let[e,r]of t){if(0===r.length)continue;let t=this.getChangeCallbackHandle("nodechange",r),n=this.vm.newObject();this.vm.setProp(n,"nodeChanges",t);try{x.Cj$.prepareToRunDocumentChangeCallback(),this.fireEventSyncForPage("nodechange",e,[n])}finally{x.Cj$.finishedRunningDocumentChangeCallback()}}},this.linkPreviewCallback=this.createPromiseCallback({makeInputEvent:e=>{let t=this.vm.newObject();return this.vm.setProp(t,"link",this.vm.deepWrap(e)),t},eventName:"linkpreview",resultSchema:eB.tL,zResultSchema:eX.Y.LinkPreviewResultSchema,defaultResult:null,rejectMessage:"Promise returned from 'linkpreview' event rejected. Unable to generate preview."}),this.authCallback=this.createPromiseCallback({makeInputEvent:e=>{let t=this.vm.newObject();return this.vm.setProp(t,"links",this.vm.deepWrap(e)),t},eventName:"auth",resultSchema:eB.qg,zResultSchema:eX.Y.AuthResultSchema,rejectMessage:"Promise returned from 'auth' event rejected. Unable to authenticate.",defaultResult:null}),this.triggerParameterInputEvent=e=>{let t=this.vm;this.fireAsyncEventOrSchedule("input",()=>{let r=!1,n=t.newObject();t.defineFunction(n,"setSuggestions","result.setSuggestions",n=>{if(r)throw Error("setSuggestions or setError called multiple times on the same result object");let i=(0,ez.v1)({vm:t,handle:n,vmSchema:eB.v4,zSchema:eX.Y.ParameterValues,property:"setSuggestions"}),a=i.map(e=>"string"==typeof e?{name:e,data:void 0}:e);return a.forEach(e=>{var t,r;if(void 0!==e.data&&function(e){(function e(t,r){if(t!==r){if(Array.isArray(t)&&Array.isArray(r)&&t.length===r.length){for(let n=0;n<t.length;n++)e(t[n],r[n]);return}if("[object Object]"===Object.prototype.toString.call(t)&&"[object Object]"===Object.prototype.toString.call(r)){for(let n in t)e(t[n],n in r?r[n]:Symbol("missing property"));return}throw Error(`Contains value which could not be serialized to JSON: ${t}`)}})(e,JSON.parse(JSON.stringify(e)))}(e.data),e.icon&&e.iconUrl)throw Error("Only icon or iconUrl may be provided. Not both.");if(((null==(t=JSON.stringify(e.data))?void 0:t.length)||0)+((null==(r=e.icon)?void 0:r.length)||0)>20480)throw Error("Total size of suggestion must be no greater than 20KB");if(e.iconUrl){let t=new URL(e.iconUrl);if(!["https:","http:"].includes(t.protocol))throw Error("Must be https or http URL");if(t.hostname.endsWith(".figma.com")||t.hostname.endsWith(".figma.com.")||"figma.com"===t.hostname||"figma.com."===t.hostname||t.hostname===window.location.hostname)throw Error("figma.com URLs not supported");e.iconUrl=t.href}}),e.onSuggestions({type:"SUGGESTIONS",suggestions:a}),r=!0,t.undefined}),t.defineFunction(n,"setError","result.setError",n=>{if(r)throw Error("setSuggestions or setError called multiple times on the same result object");if(e.currentParameter.allowFreeform)throw Error("setError not supported on allowFreeform parameters");let i=(0,ez.v1)({vm:t,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"message"});return e.onSuggestions({type:"ERROR",message:i}),r=!0,t.undefined}),t.defineFunction(n,"setLoadingMessage","result.setLoadingMessage",n=>{let i=(0,ez.v1)({vm:t,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"message"});return r||e.onSuggestions({type:"LOADING",message:i}),t.undefined}),t.shallowFreezeObject(n);let i=tf(e.parameterValues),a=t.newObject();t.setStringProp(a,"query",e.currentSearchQuery),t.setStringProp(a,"key",e.currentParameter.key),t.setProp(a,"parameters",t.deepWrap(i)),t.setProp(a,"result",n),this.fireEventSync("input",[a])})},this.triggerRunEvent=e=>{this.setQueryMode(!1),this.triggerOrScheduleRunEvent(e)},this.triggerOrScheduleRunEvent=e=>{this.options.stats.setRunParameters(e),this.fireAsyncEventOrSchedule("run",()=>{let t=this.vm,r=this.options.command;this.fireDebouncedEventAsync("run",()=>{let n=t.newObject();t.setProp(n,"command",t.newString(r)),"parameters"===e.command?e.parameters?t.setProp(n,"parameters",t.deepWrap(tf(e.parameters))):(0,ea.J)(this.options.pluginID)&&t.setProp(n,"parameters",t.deepWrap((0,ea.dx)(this.options.pluginID))):("open-related-link"===e.command||"open-dev-resource"===e.command)&&t.setProp(n,"link",t.deepWrap(e.link)),t.shallowFreezeObject(n),this.fireEventSync("run",[n])})})},this.requestCheckoutCallback=async()=>{try{await this.initiateCheckoutAsyncImpl();let e=this.getPublishedExtension(this.options.pluginID);return this.userPaymentStatusType(e)===R.iK.PAID}catch(e){l.u.error(e)}return!1},this.timerCallback=e=>{this.fireEventSync(e,[])},this.uiCancelCallback=e=>{this.closePlugin(e)},this.iframeMessageHandler=e=>{let t=this.vm;if(e.data===eW.v){F.Gr.triggerAction("plugins-run-last",{source:"keyboard"});return}if(!(e.data instanceof Object)){l.u.warn('Message from UI to plugin ignored because it\'s not an object. The message must be an object with a "pluginMessage" property containing the actual message.');return}let r=this.options.pluginID;if("getPluginId"in e.data){let t="null"!==e.origin?e.origin:"*";this.uiHandle.postMessageToIframe({pluginId:r},{origin:t,skipQueue:!0})}let n=e.origin+"";if(/^https?\:\/\/\%7b[a-f0-9\.-]+\%7d$/.test(n)&&(n="null"),"*"!==e.data.pluginId&&("pluginId"in e.data||"null"!==e.origin)){if(r&&(e.data.pluginId===r||Array.isArray(e.data.pluginId)&&e.data.pluginId.indexOf(r)>=0));else if("pluginId"in e.data){l.u.warn("Provided pluginId does not match id of currently running plugin");return}else{l.u.warn("Message from UI to plugin ignored due to missing pluginId in message. Please specify the pluginId that you wish to deliver the message to when using postMessage. You can also use '*' if it is safe to deliver the message to any plugin.\n\nExample: `parent.postMessage({pluginMessage: /*your message*/, pluginId: /*your plugin id*/}, '*')`.");return}}if("pluginMessage"in e.data){let t=this.eventHandlers.get("message");if((void 0===t||!t.length)&&!this.onMessageCallback){l.u.warn("Message from UI to plugin dropped due to no message handler installed");return}let r=[this.vm.deepWrap(e.data.pluginMessage),this.vm.deepWrap({origin:n})];this.fireEventSync("message",r),this.onMessageCallback&&this.vm.callFunction(this.onMessageCallback,this.vm.undefined,...r);return}if("pluginDrop"in e.data){let r=(0,ez.lj)(e.data.pluginDrop,eB.FX,"pluginDrop");if(r.length>0||void 0===e.data.pluginDrop.items&&void 0===e.data.pluginDrop.files||"files"in e.data.pluginDrop&&e.data.pluginDrop.files.some(e=>!(e instanceof File)))l.u.warn(`"pluginDrop" object must have "clientX" and "clientY" properties,
          as well as either "items" or "files" properties`);else{let r=this.createDropEvent({x:e.data.pluginDrop.clientX,y:e.data.pluginDrop.clientY},e.data.pluginDrop.items??[],e.data.pluginDrop.files??[]);t.setProp(r,"dropMetadata","dropMetadata"in e.data.pluginDrop?t.deepWrap(e.data.pluginDrop.dropMetadata):t.null),this.fireEventSync("drop",[r])}return}l.u.warn('Ignoring postMessage from plugin UI iframe due to missing "pluginMessage" or "pluginDrop"')},this.textReviewRequestRejects=0,this.isTextReviewRequestModalOpen=!1,this.privateSceneGraph=t.sceneGraph??W.b.instance,this.styleManager=new ev.a(this.privateSceneGraph),this.imageStore=new eR.w,this.videoStore=new e$.r,this.documentAccessState=new eL.K9(t.forceDocumentAccessStateIncrementalMode||t.incrementalSafeApi,t.stats),this.isWidget="WIDGET"===this.options.apiMode.type,this._hasRegisteredWidgetFunction=!1,this.isWidget){let{runtimeBridge:r,shutdownCallback:n}=tl.createRuntimeBridgeForWidgetReconciler(t.pluginID,e,this.ignoreEditActionsScope);this.widgetManager=new e3.fH(e,t.pluginID,r),n&&this.widgetManager.addShutdownAction(n)}let r=d.V.getState(),n=r.selectedView;this.fullscreenEditorType=n.editorType;let a=e.evalTrustedCode("Symbol('figma.mixed')");if("FAILURE"===a.type)throw Error(`Figma Internal Error: failed to create mixed constant, ${a.error}`);this.mixedSentinel=a.handle,this.setSkipInvisibleInstanceChildren("dev_handoff"===this.fullscreenEditorType),this.runtimeOptions=(0,p.BZ)().ext_lego_plugins_runmode?{allowVisibleIframe:!te.has(this.getRunMode()),iframeId:(0,eK.q)({runMode:this.getRunMode()}),allowInitiateCheckout:!te.has(this.getRunMode())}:{allowVisibleIframe:!t.triggeredFrom||!e7.has(t.triggeredFrom),iframeId:(0,eK.q)({triggeredFrom:t.triggeredFrom}),allowInitiateCheckout:!t.triggeredFrom||!e7.has(t.triggeredFrom)},e.retainHandle(this.mixedSentinel),this.nodeFactory=new eU.p(e,{pluginID:t.pluginID,pluginVersionID:t.pluginVersionID,imageStore:this.imageStore,videoStore:this.videoStore,getStyleFactory:()=>this.styleFactory,documentAccessState:this.documentAccessState,mixedSentinel:this.mixedSentinel,stats:t.stats,enableProposedApi:t.enableProposedApi,isWidget:this.isWidget,widgetManager:this.widgetManager,validatedPermissions:t.validatedPermissions,editorType:this.fullscreenEditorType,defineVmFunction:this.defineVmFunction,defineVmIncrementalMethod:this.defineVmIncrementalMethod,defineVmProp:this.defineVmProp,defineVmIncrementalProp:this.defineVmIncrementalProp,addEventHandlersTo:this.addEventHandlersTo,incLoadingErrorLogger:new eJ.QV({pluginID:t.pluginID,pluginVersionID:t.pluginVersionID}),openFileKey:t.openFileKey,apiMode:t.apiMode,sceneGraph:this.privateSceneGraph,getNode:this.getNode,incrementalSafeApi:t.incrementalSafeApi,styleManager:this.styleManager}),this.styleFactory=new eV.M({vm:e,stats:this.options.stats,pluginID:t.pluginID,pluginVersionID:t.pluginVersionID,getNodeFactory:()=>this.nodeFactory,imageStore:this.imageStore,videoStore:this.videoStore,documentAccessState:this.documentAccessState,mixedSentinel:this.mixedSentinel,enableProposedApi:t.enableProposedApi,isWidget:this.isWidget,widgetManager:this.widgetManager,validatedPermissions:t.validatedPermissions,editorType:this.fullscreenEditorType,defineVmFunction:this.defineVmFunction,defineVmIncrementalMethod:this.defineVmIncrementalMethod,defineVmProp:this.defineVmProp,defineVmIncrementalProp:this.defineVmIncrementalProp,addEventHandlersTo:this.addEventHandlersTo,apiMode:t.apiMode,openFileKey:t.openFileKey,getNode:this.getNode,sceneGraph:this.privateSceneGraph,incrementalSafeApi:t.incrementalSafeApi,styleManager:this.styleManager}),this.variableFactory=new eZ.En({vm:e,stats:this.options.stats,pluginID:t.pluginID,pluginVersionID:t.pluginVersionID,getNodeFactory:()=>this.nodeFactory,getStyleFactory:()=>this.styleFactory,imageStore:this.imageStore,videoStore:this.videoStore,documentAccessState:this.documentAccessState,mixedSentinel:this.mixedSentinel,enableProposedApi:t.enableProposedApi,isWidget:this.isWidget,widgetManager:this.widgetManager,validatedPermissions:t.validatedPermissions,editorType:this.fullscreenEditorType,defineVmFunction:this.defineVmFunction,defineVmIncrementalMethod:this.defineVmIncrementalMethod,defineVmProp:this.defineVmProp,defineVmIncrementalProp:this.defineVmIncrementalProp,addEventHandlersTo:this.addEventHandlersTo,apiMode:t.apiMode,openFileKey:t.openFileKey,getNode:this.getNode,sceneGraph:this.privateSceneGraph,incrementalSafeApi:t.incrementalSafeApi,styleManager:this.styleManager}),this.variableCollectionFactory=new eY.T({vm:e,stats:this.options.stats,pluginID:t.pluginID,pluginVersionID:t.pluginVersionID,getNodeFactory:()=>this.nodeFactory,getStyleFactory:()=>this.styleFactory,imageStore:this.imageStore,videoStore:this.videoStore,documentAccessState:this.documentAccessState,mixedSentinel:this.mixedSentinel,enableProposedApi:t.enableProposedApi,isWidget:this.isWidget,widgetManager:this.widgetManager,validatedPermissions:t.validatedPermissions,editorType:this.fullscreenEditorType,defineVmFunction:this.defineVmFunction,defineVmIncrementalMethod:this.defineVmIncrementalMethod,defineVmProp:this.defineVmProp,defineVmIncrementalProp:this.defineVmIncrementalProp,addEventHandlersTo:this.addEventHandlersTo,apiMode:t.apiMode,openFileKey:t.openFileKey,getNode:this.getNode,sceneGraph:this.privateSceneGraph,incrementalSafeApi:t.incrementalSafeApi,styleManager:this.styleManager});let o=this.options.apiMode;if("CONSOLE_SHIM"===o.type)this.uiHandle=o.uiHandle;else if(function(e){switch(e.type){case"GLOBAL_API":case"CONSOLE_SHIM":case"SECURITY_CHECK":return!1;case"WIDGET_RECONCILER":return!0;case"WIDGET":case"PLUGIN":return e.noOpUI}}(o))this.uiHandle=new eW.zj;else{let t="GLOBAL_API"!==o.type&&"SECURITY_CHECK"!==o.type;this.uiHandle=new eW.im(e.vmType,this.options.pluginID,this.options.titleIconURL,this.options.name,this.options.validatedPermissions.permissions,this.isWidget,this.isWidget?JSON.parse(this.options.command||"{}"):{},t,this.uiCancelCallback,this.iframeMessageHandler,this.options.allowedDomains,this.options.isLocal,this.options.triggeredFrom,this.options.capabilities)}this.vm instanceof eD.p||this.vm instanceof eD.i||((0,X.LZ)(this.selectionCallback),(0,X.ZY)(this.pageCallback),(0,X.dO)(this.timerCallback),(0,X.Gn)(this.dropCallback),(0,X.T9)(this.codegenPreferencesChangeCallback)),this.options.addShutdownAction(e=>this.tearDown(e)),this.previousSelection=tg(this.privateSceneGraph).map(e=>e.guid),x.Cj$.resetSelectionCouldBeDirty()}hasRegisteredWidget(){return this._hasRegisteredWidgetFunction}shouldLockDownPluginApiForWidgets(){return this.isWidget}overrideRuntimeOptions(e,t){let r=this.runtimeOptions;this.runtimeOptions={...r,...e};try{return t()}finally{this.runtimeOptions=r}}validateMakeIframeOptionsOrThrow(e,t){var r,n,i;if((0,p.BZ)().ext_codegen_strict_generate&&this.options.isLocal&&((null==(r=this.runtimeOptions)?void 0:r.activePromiseCallback)==="generate"||(null==(n=this.runtimeOptions)?void 0:n.activePromiseCallback)==="codegen"))throw Error(`Cannot call figma.showUI inside the codegen generate callback.

Move figma.showUI outside the callback and use figma.ui.postMessage within the callback instead to ensure that your plugin handles concurrent "generate" events correctly.`);let a=t.position??(null==(i=this.runtimeOptions)?void 0:i.defaultIframePosition)??"last";if(t.visible&&this.queryMode)throw Error("Cannot show UI in queryMode.");if(t.visible&&!this.runtimeOptions.allowVisibleIframe)throw Error("Cannot show UI");return{html:e,title:t.title,width:t.width,height:t.height,iframeId:this.runtimeOptions.iframeId,position:a,includeThemeColors:t.themeColors}}inDesignOrDevHandoff(){return"design"===this.fullscreenEditorType||"dev_handoff"===this.fullscreenEditorType}isReadOnlyMode(){let e=d.V.getState(),t=e.selectedView,r="dev_handoff"===t.editorType,n=e.mirror.appModel.isReadOnly;return n||r}handleLockDownPluginApiError(e){var t;if(this.options.isLocal)throw Error(e);{let r=null==(t=this.widgetManager)?void 0:t.getCurrentWidgetNodeId();r&&Y.t.trackLockDownApiError(Error(e),this.getWidgetContext(r))}}getRunMode(){return m.n_.get(eu.Dn)??"default"}getWidgetContext(e){let t=this.privateSceneGraph.get(e),r={widgetNodeID:e,pluginID:t.widgetId,widgetVersionID:t.widgetVersionId,isLocalWidget:!t.widgetVersionId,widgetName:t.name};return r}editScope(e,t){return U.y2.plugin(`plugin-${e}`,t)}conditionalEditScope(e,t,r){return e?this.editScope(t,r):r()}async tearDown(e){var t,r;for(let[t,r]of((0,X.wF)(this.timerCallback),(0,X.Us)(this.selectionCallback),(0,X.Xc)(this.pageCallback),(0,X.ni)(this.dropCallback),(0,X.vx)(this.spellCheckCallback),(0,X.y4)(this.codegenCallback),(0,X.y4)(this.legacyCodegenCallback),(0,X.gj)(),(0,X.V$)(this.documentChangeCallback),(0,X.x0)(this.styleChangeCallback),(0,X.Il)(this.nodeChangeCallback),(0,X.qH)(this.codegenPreferencesChangeCallback),(0,X.Sy)(this.devResourceOpenCallback),this.fireEventSync("close",[]),this.imageStore.tearDown(),this.videoStore.tearDown(),this.uiHandle.tearDown(e),this.eventHandlers.entries()))for(let e of r)this.vm.releaseHandle(e.handler);this.eventHandlers.clear(),this.eventHandlerTimeouts.forEach(e=>clearTimeout(e)),this.eventHandlerTimeouts.clear(),this.scheduledEvents.clear(),this.onMessageCallback=void 0,this.setSkipInvisibleInstanceChildren(!1),this.isWidget&&(await new Promise(e=>setTimeout(e)),await (null==(t=this.widgetManager)?void 0:t.waitForFinish({fromClosePlugin:!0})),null==(r=this.widgetManager)||r.clear())}currentSelectedTextRangeJson(){let e=this.privateSceneGraph.getCurrentPage();return JSON.stringify((null==e?void 0:e.getSelectedTextRange())||null)}makeGroupingOperationFunction(e,t){return(r,n,i)=>{let{nodeIds:a,parent:o,index:l}=e5({vm:this.vm,callerName:e,nodes:r,parentArg:n,indexArg:i,getNode:this.getNode});if(!o)throw Error(`Second argument to ${e}() must be provided`);let s=x.Cj$.groupNodes(t,a,o.sessionID,o.localID,l);return this.nodeFactory.createNode(s,e)}}fireAsyncEventOrSchedule(e,t){let r=this.eventHandlers.get(e);r&&0!==r.length?this.fireEventAsync(t):this.scheduledEvents.set(e,()=>{this.scheduledEvents.delete(e),this.fireEventAsync(t)})}fireEventAsync(e){Promise.resolve().then(e)}fireDebouncedEventAsync(e,t){this.eventHandlerTimeouts.has(e)&&clearTimeout(this.eventHandlerTimeouts.get(e)),this.eventHandlerTimeouts.set(e,setTimeout(()=>{this.eventHandlerTimeouts.delete(e),t()},0))}fireEventSync(e,t){this.runningSyncEvent=e;let r=this.eventHandlers.get(e);for(let n of(r?this.eventHandlers.set(e,r.filter(({once:e})=>!e)):r=[],r))this.vm.callFunction(n.handler,this.vm.undefined,...t);this.runningSyncEvent=null}fireEventSyncForPage(e,t,r){this.runningSyncEvent=e;let n=this.eventHandlers.get(e),i=n?n.filter(e=>e.pageGuid===t):[];for(let a of(n&&i.length>0&&this.eventHandlers.set(e,n.filter(({once:e,pageGuid:r})=>!(e&&r===t))),i))this.vm.callFunction(a.handler,this.vm.undefined,...r);this.runningSyncEvent=null}fireEventSyncWithReturn(e,t){let r=this.vm,n=this.eventHandlers.get(e);for(let i of(n?this.eventHandlers.set(e,n.filter(({once:e})=>!e)):n=[],n)){let e=r.callFunction(i.handler,this.vm.undefined,...t);if("SUCCESS"===e.type&&!1===r.deepUnwrap(e.handle))return!1}return!0}windowToCanvasPosition(e){let t=F.Gr.getViewportInfo(),r=new E.OW(t.x,t.y),n=new E.OW(e.x,e.y).subtract(r);return(0,z.NL)(t,n)}wrapFile(e){let t=this.vm,r=t.newObject();return t.setProp(r,"name",t.newString(e.name)),t.setProp(r,"type",t.newString(e.type)),t.defineFunction(r,"getBytesAsync","file.getBytesAsync",function(){let{promise:r,resolve:n,reject:i}=t.newPromise(),a=new FileReader;return a.onload=e=>{t.isDestroyed()||n(t.deepWrap(new Uint8Array(a.result)))},a.onerror=e=>{t.isDestroyed()||i(t.deepWrap(a.error))},a.readAsArrayBuffer(e),r}),t.defineFunction(r,"getTextAsync","file.getTextAsync",function(){let{promise:r,resolve:n,reject:i}=t.newPromise(),a=new FileReader;return a.onload=e=>{t.isDestroyed()||n(t.newString(a.result))},a.onerror=e=>{t.isDestroyed()||i(t.deepWrap(a.error))},a.readAsText(e),r}),r}createDropEvent(e,t,r){let n=this.vm,i=this.windowToCanvasPosition(e),{parentId:a,relativeTransform:o}=x.Cj$.pickInsertionLocation(i.x,i.y),l={x:o.m02,y:o.m12,absoluteX:i.x,absoluteY:i.y,items:t},s=n.deepWrap(l),c=this.privateSceneGraph.get(a);n.setProp(s,"node",void 0===c||(null==c?void 0:c.isInImmutableFrame)||(null==c?void 0:c.isInWidget)?n.null:this.nodeFactory.createNode(a,"drop"));let d=n.newArray();for(let e=0;e<r.length;e++){let t=r[e];n.setProp(d,e.toString(),this.wrapFile(t))}return n.setProp(s,"files",d),s}createPromiseCallback(e){return t=>{let r=this.vm,n=e.makeInputEvent(t),i=this.eventHandlers.get(e.eventName);for(let t of(i?this.eventHandlers.set(e.eventName,i.filter(({once:e})=>!e)):i=[],i)){let i=this.overrideRuntimeOptions({activePromiseCallback:e.eventName},()=>r.callFunction(t.handler,this.vm.undefined,n));if("SUCCESS"===i.type){let t;return(0,ex.t)(r,i.handle)?t=(0,ex.i)({vm:r,promiseHandle:i.handle,shouldRetainResult:!0}):(r.retainHandle(i.handle),t=Promise.resolve(i.handle)),r.registerPromise(t).then(t=>{let n=(0,ez.v1)({vm:r,handle:t,vmSchema:e.resultSchema,zSchema:e.zResultSchema,property:e.eventName+" Result"});return r.releaseHandle(t),n}).catch(t=>{console.error(t);let r=e.rejectMessage;return"object"==typeof t&&"message"in t&&(r+="\nError: "+t.message),console.warn(r),e.defaultResult})}}return Promise.reject()}}documentChangeTypeToString(e){switch(e){case x.pAX.CREATE:return"CREATE";case x.pAX.DELETE:return"DELETE";case x.pAX.PROPERTY_CHANGE:return"PROPERTY_CHANGE";case x.pAX.STYLE_PROPERTY_CHANGE:return"STYLE_PROPERTY_CHANGE";case x.pAX.STYLE_CREATE:return"STYLE_CREATE";case x.pAX.STYLE_DELETE:return"STYLE_DELETE"}}documentChangeOriginToString(e){switch(e){case x.T9q.LOCAL:return"LOCAL";case x.T9q.REMOTE:return"REMOTE"}}eventsByPageGuid(e){let t=new Map;for(let r of e){let{containingCanvas:e}=r;t.has(e)||t.set(e,[]),t.get(e).push(r)}return t}createTimerApi(){let e=this.vm,t=e.newObject(),r=e=>{let t=(0,ew.jL)(e);return t<=0?"STOPPED":(null==e?void 0:e.isPaused)?"PAUSED":"RUNNING"},n=()=>d.V.getState().timer;return e.defineProp(t,"remaining",{enumerable:!1,metricsKey:"timer.remaining",get:()=>{let t=n();return e.newNumber(Math.max(0,(0,ew.jL)(t.time))/1e3)}}),e.defineProp(t,"total",{enumerable:!1,metricsKey:"timer.total",get:()=>{var t;let r=n();return e.newNumber(((null==(t=r.time)?void 0:t.totalTimeMs)||0)/1e3)}}),e.defineFunction(t,"pause","timer.pause",()=>{let t=n();return(0,ew.jL)(t.time)>0&&d.V.dispatch(w.w2(t.time)),e.undefined}),e.defineFunction(t,"resume","timer.resume",()=>{let t=n();return(0,ew.jL)(t.time)>0&&t.time.isPaused&&d.V.dispatch(w.eA(t.time)),e.undefined}),e.defineFunction(t,"start","timer.start",t=>{var i;let a=e.getNumber(t),o=n(),l=Math.max(0,(0,ew.jL)(o.time)),s=r(null==o?void 0:o.time);return"STOPPED"===s?d.V.dispatch(w.BS({totalTimeMs:1e3*a})):(d.V.dispatch(w.TG({timer:o.time,deltaMs:1e3*a-l})),(null==(i=o.time)?void 0:i.isPaused)&&d.V.dispatch(w.eA(n().time))),e.undefined}),e.defineFunction(t,"stop","timer.stop",()=>{let t=n();return(0,ew.jL)(t.time)>0&&d.V.dispatch(w.gs()),e.undefined}),e.defineProp(t,"state",{enumerable:!1,metricsKey:"timer.state",get:()=>{let t=n();return e.newString(r(t.time))}}),e.shallowFreezeObject(t),t}createActiveUsersApi(){var e,t;let r=this.vm,n=x.Cj$.getAllUsers(),i=r.newArray(),a=1,o=this.getMultiplayerUserInfoBySessionId();for(let l of n){let{isCurrentUser:n,userId:s,photoUrl:c,name:d,color:u}=this.getMultiplayerUserInfo(l.sessionId,o),p=a;n?p=0:a++;let m={};m.id=s,m.name=d||"",m.sessionId=l.sessionId,m.photoUrl=c,m.color=u,m.selection=l.selection,(null==(e=l.position)?void 0:e.x)===null||(null==(t=l.position)?void 0:t.y)===null?m.position=null:m.position=l.position;let h=l.viewport;(null==h?void 0:h.x)===null||(null==h?void 0:h.y)===null||(null==h?void 0:h.height)===null||(null==h?void 0:h.width)===null?m.viewport=null:m.viewport=h,r.setProp(i,p.toString(),r.deepWrap(m))}return i}getMultiplayerUserInfo(e,t){let r=d.V.getState().multiplayer,n=r.sessionID===e,i=t[e],a=null,o=null,l=null;if(n&&!i){let e=d.V.getState().user,t=(0,ei.Ij)(d.V.getState().selectedView),r="fullscreen"===d.V.getState().selectedView.view&&d.V.getState().selectedView.workshopModeInfo,n=r?localStorage.getItem((0,el.i4)(r.id)):null;a=e?e.name:t?n:null,o=e?e.img_url:null}else a=null==i?void 0:i.name,o=null==i?void 0:i.imageURL,l=null==i?void 0:i.userID;n&&!l&&(l=(0,eS.Pb)()??null);let s=o?(0,eO.Y)(new URL(o)):null;return{sessionId:e,name:a,userId:l,color:(null==i?void 0:i.color)||null,photoUrl:s?s.toString():null,isCurrentUser:r.sessionID===e}}getMultiplayerUserInfoBySessionId(){let e=d.V.getState().multiplayer,t={};return e.allUsers.forEach(e=>{t[e.sessionID]=e}),t}createUserApi(){let e=this.vm,t=e.newObject(),r=d.V.getState().user,n=(0,ei.Ij)(d.V.getState().selectedView);if(null===r&&!n)return e.null;let i=(0,eS.Pb)(),a=d.V.getState().multiplayer,{sessionId:o,photoUrl:l,color:s,name:c}=this.getMultiplayerUserInfo(a.sessionID,this.getMultiplayerUserInfoBySessionId());return e.setProp(t,"id",i?e.newString(i):e.null),e.setProp(t,"photoUrl",l?e.newString(l.toString()):e.null),e.setProp(t,"name",c?e.newString(c):e.null),e.setProp(t,"color",s?e.newString(s):e.null),e.setProp(t,"sessionId",e.newNumber(o)),e.shallowFreezeObject(t),t}createViewportApi(){let e=this.vm,t=e.newObject(),r=()=>this.queryMode;return this.defineVmProp({handle:t,key:"center",options:{enumerable:!1,metricsKey:"viewport.center",get:()=>{let t=x.Cj$.getViewportBounds(),r=e.newObject();return e.setProp(r,"x",e.newNumber(t.x+t.width/2)),e.setProp(r,"y",e.newNumber(t.y+t.height/2)),e.shallowFreezeObject(r),r},set:function(t){if(r())throw Error("Cannot modify viewport in queryMode");let{x:n,y:i}=(0,ez.v1)({vm:e,handle:t,vmSchema:eB.OW,zSchema:eX.Y.Vector,property:"viewport.center"});return x.Cj$.setViewportCenter({x:n,y:i}),e.undefined}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:t,key:"bounds",options:{enumerable:!1,metricsKey:"viewport.bounds",get:()=>{let t=x.Cj$.getViewportBounds(),r=e.newObject();return e.setProp(r,"x",e.newNumber(t.x)),e.setProp(r,"y",e.newNumber(t.y)),e.setProp(r,"width",e.newNumber(t.width)),e.setProp(r,"height",e.newNumber(t.height)),e.shallowFreezeObject(r),r}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:t,key:"zoom",options:{enumerable:!1,metricsKey:"viewport.zoom",get:()=>{let t=x.Cj$.getViewportZoomScale();return e.newNumber(t)},set:function(t){if(r())throw Error("Cannot modify viewport in queryMode");let n=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.float.min(0),zSchema:eX.Y.PositiveFloat,property:"viewport.zoom"});if(!(n>0))throw Error("viewport.zoom expects a positive number");return x.Cj$.setViewportZoomScale(n),e.undefined}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"scrollAndZoomIntoView",metricsKey:"viewport.scrollAndZoomIntoView",cb:t=>{if(r())throw Error("Cannot modify viewport in queryMode");let n=[];if(!e.isArray(t))throw Error("Call to scrollAndZoomIntoView expected an array");let i=e.getNumberProp(t,"length");for(let r=0;r<i;r++){let i=e.getProp(t,r.toString());n.push(e.getString(e.getProp(i,"id")))}return x.Cj$.scrollAndZoomIntoView(n),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(t),t}createParametersApi(){let e=this.vm,t=e.newObject();return this.addEventHandlersTo(t,to,"figma.parameters",e=>{if("PLUGIN"!==this.options.apiMode.type)throw Error('Cannot use "parameters.on(input)" from the developer tools console')}),e.shallowFreezeObject(t),"PLUGIN"===this.options.apiMode.type&&(0,et.Y)({triggerParameterInputEvent:this.triggerParameterInputEvent,triggerRunEvent:this.triggerRunEvent}),t}createCodegenApi(){var e,t;let r=this.vm;if(!(null==(e=this.options.capabilities)?void 0:e.includes("codegen")))throw Error((t="codegen",`"${t}" capability is not specified in manifest.json. Add the following to your manifest.json: "capabilities": ["${t}"]. See https://www.figma.com/plugin-docs/manifest/#cpabilities for more details.`));let n=r.newObject();return this.defineVmProp({handle:n,key:"preferences",options:{metricsKey:"codegen.preferences",enumerable:!0,configurable:!1,get:()=>r.deepWrap(this.getCodegenPreferences())},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:n,key:"refresh",metricsKey:"codegen.refresh",cb:()=>((0,ep.f)(),r.undefined),isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.addEventHandlersTo(n,["generate","preferenceschange"],"figma.codegen"),n}createDevResourcesApi(){var e;let t=this.vm,r=t.newObject(),{apiMode:n,pluginID:i,pluginVersionID:a}=this.options;if((0,ek.e)({apiMode:n,pluginId:i,pluginVersionId:a})){let t=["open"];(null==(e=this.options.capabilities)?void 0:e.includes("linkpreview"))&&(t=t.concat(["linkpreview","auth"])),this.addEventHandlersTo(r,t,"figma.devResources")}return r}createVsCodeApi(){let e=this.vm;if(!(0,Z.I)()||!(0,p.BZ)().ext_vscode_plugins)return e.undefined;let t=e.newObject();return t}isTextReviewPluginEnabled(){let{activeTextReviewPlugin:e}=d.V.getState().mirror.appModel,t=this.getPlugin();return!!e&&!!t&&(0,e0.E)(e,t)}createTextReviewApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"requestToBeEnabledAsync",metricsKey:"textreview.requestToBeEnabledAsync",cb:()=>{var t;let{promise:r,resolve:n,reject:i}=e.newPromise();return this.queryMode?i(e.newString("Cannot enable text review plugin in query mode.")):this.isTextReviewPluginEnabled()?n(e.undefined):this.textReviewRequestRejects>=2||this.isTextReviewRequestModalOpen?i(e.newString("The user rejected your request to enable text review plugin too many times.")):(this.isTextReviewRequestModalOpen=!0,e.registerPromise((0,eG.I)(d.V.dispatch,(null==(t=this.getPlugin())?void 0:t.name)||"Plugin")).then(({turnOffSpellCheck:t})=>{t&&(0,B.tZ)().spellCheckPreference.getCopy()&&F.Gr.triggerAction("toggle-spell-check");let r=this.getPlugin();r&&(0,H.ox)((0,ed.rV)(r)?{type:"local",localFileId:r.localFileId}:{type:"published",pluginId:r.plugin_id}),requestAnimationFrame(()=>n(e.undefined))},()=>{this.textReviewRequestRejects++,i(e.newString("The user declined to enable your plugin for text review."))}).finally(()=>{this.isTextReviewRequestModalOpen=!1})),r},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"requestToBeDisabledAsync",metricsKey:"textreview.requestToBeDisabledAsync",cb:()=>{let{promise:t,resolve:r,reject:n}=e.newPromise();if(this.queryMode)return n(e.newString("Cannot disable text review plugin in query mode.")),t;let{activeTextReviewPlugin:i}=d.V.getState().mirror.appModel;return this.isTextReviewPluginEnabled()?((0,H.ox)(null),requestAnimationFrame(()=>{r(e.undefined)})):null==i?r(e.undefined):n(e.newString("The user currently has a text review plugin enabled that isn't yours. Did you mean to call figma.textreview.requestToBeEnabledAsync?")),t},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:t,key:"isEnabled",options:{enumerable:!0,metricsKey:"textreview.isEnabled",get:()=>e.deepWrap(this.isTextReviewPluginEnabled())},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),t}getCodegenLanguage(){let{devHandoffCodeLanguage:e}=d.V.getState().mirror.appModel;return(null==e?void 0:e.pluginLanguage)??""}getCodegenPreferences(){let e=this.getPlugin();if(!e)return{unit:"PIXEL",scaleFactor:1,customSettings:{}};let t=this.getCodegenLanguage(),r=(0,em.D)(e,t),{preferences:n}=(0,T.SP)(e,r);return{...n,unit:n.unit===x.QC6.PIXEL?"PIXEL":"SCALED",scaleFactor:n.scaleFactor||1}}createUiApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"show",metricsKey:"ui.show",cb:()=>{if(this.queryMode)throw Error("Cannot show UI in queryMode.");if(!this.runtimeOptions.allowVisibleIframe)throw Error("Cannot show UI");return this.uiHandle.showIframe(),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"resize",metricsKey:"ui.resize",cb:(t,r)=>{let n=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.integer.min(0),zSchema:eX.Y.PositiveInteger,property:"resize width"}),i=(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.integer.min(0),zSchema:eX.Y.PositiveInteger,property:"resize height"});return this.uiHandle.setIframeSize(n,i),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:t,key:"reposition",metricsKey:"ui.reposition",cb:(t,r)=>{let n=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.float,zSchema:eX.Y.FiniteNumber,property:"x"}),i=(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.float,zSchema:eX.Y.FiniteNumber,property:"y"});return this.uiHandle.setIframePosition(n,i),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"hide",metricsKey:"ui.hide",cb:()=>(this.uiHandle.hideIframe(),e.undefined),isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"close",metricsKey:"ui.close",cb:()=>(this.uiHandle.destroyIframe(),e.undefined),isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.addEventHandlersTo(t,ta,"figma.ui"),this.defineVmProp({handle:t,key:"onmessage",options:{enumerable:!1,metricsKey:"ui.onmessage",get:()=>{if("CONSOLE_SHIM"===this.options.apiMode.type)throw Error('Cannot use "onmessage" from the developer tools console');return this.onMessageCallback?this.onMessageCallback:e.undefined},set:t=>{let r;if("CONSOLE_SHIM"===this.options.apiMode.type)throw Error('Cannot use "onmessage" from the developer tools console');if(e.isNull(t)||e.isUndefined(t))r=void 0;else if(e.isFunction(t))r=t;else throw Error("onmessage must be a function");return this.onMessageCallback&&e.releaseHandle(this.onMessageCallback),this.onMessageCallback=r,this.onMessageCallback&&e.retainHandle(this.onMessageCallback),e.undefined}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"postMessage",metricsKey:"ui.postMessage",cb:(t,r)=>{let n=(0,ez.Sq)((0,ez.v1)({vm:e,handle:r,vmSchema:tt,zSchema:tr,property:"postMessage options"})||{},{origin:"*"});return this.uiHandle.postMessageToIframe({pluginMessage:e.deepUnwrap(t),pluginId:this.options.pluginID},{origin:n.origin}),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(t),t}createClientStorageApi(){let e=this.vm,{userID:t,pluginID:r}=this.options,n=e.newObject();return this.defineVmFunction({handle:n,key:"getAsync",metricsKey:"clientStorage.getAsync",cb:n=>{let i=(0,ez.v1)({vm:e,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"}),{promise:a,resolve:o,reject:l}=e.newPromise();return e.registerPromise((0,J.fb)({userID:t,pluginID:r,name:i})).then(t=>o(e.deepWrap(t)),t=>{let r=JSON.stringify(i);l(e.newString(`Failed to get client storage key ${r}: ${t}`))}),a},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:n,key:"setAsync",metricsKey:"clientStorage.setAsync",cb:(n,i)=>{let a=(0,ez.v1)({vm:e,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"}),o=e.deepUnwrap(i),{promise:l,resolve:s,reject:c}=e.newPromise();return e.registerPromise((0,J.Ry)({userID:t,pluginID:r,name:a,value:o})).then(t=>s(e.undefined),t=>{let r=JSON.stringify(a);c(e.newString(`Failed to set client storage key ${r}: ${t}`))}),l},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:n,key:"deleteAsync",metricsKey:"clientStorage.deleteAsync",cb:n=>{let i=(0,ez.v1)({vm:e,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"}),{promise:a,resolve:o,reject:l}=e.newPromise();return e.registerPromise((0,J.Ry)({userID:t,pluginID:r,name:i,remove:!0})).then(t=>o(e.undefined),t=>{let r=JSON.stringify(i);l(e.newString(`Failed to delete client storage key ${r}: ${t}`))}),a},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:n,key:"keysAsync",metricsKey:"clientStorage.keysAsync",cb:()=>{let{promise:n,resolve:i,reject:a}=e.newPromise();return e.registerPromise((0,J.JS)({userID:t,pluginID:r})).then(t=>i(e.deepWrap(t)),t=>{a(e.newString(`Failed to get client storage keys: ${t}`))}),n},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(n),n}getPublishedExtension(e){let{publishedPlugins:t,publishedWidgets:r}=d.V.getState();return t[e]??r[e]}getOnCanvasPublishedWidgetVersion(e,t){var r;let{publishedCanvasWidgetVersions:n}=d.V.getState();return null==(r=n[e])?void 0:r[t]}getLocalPlugin(e){let{localPlugins:t}=d.V.getState();return Object.values(t).find(t=>t.plugin_id===e)}getPlugin(){var e;return this.options.isLocal?this.getLocalPlugin(this.options.pluginID):null==(e=this.getPublishedExtension(this.options.pluginID))?void 0:e.versions[this.options.pluginVersionID]}inReviewByCommunityAdmin(e){return!!((0,p.BZ)().community_hub_admin&&e&&(0,I.k4)(e))}userPaymentStatusType(e){if(this.options.isLocal||this.inReviewByCommunityAdmin(e)){let e=(0,R.Z9)();return(null==e?void 0:e.type)||R.iK.UNPAID}if(e&&(0,es.vu)(e)){let{communityPayments:t,user:r}=d.V.getState();return r?(0,R.fU)(e,r)?R.iK.PAID:(0,R.Gv)(e,t)?R.iK.PAID:R.iK.UNPAID:R.iK.NOT_SUPPORTED}return R.iK.NOT_SUPPORTED}createPaymentsApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"getUserFirstRanSecondsAgo",metricsKey:"figma.payments.getUserFirstRanSecondsAgo",cb:()=>{let{pluginID:t}=this.options,r=this.getPublishedExtension(t);if(null==r?void 0:r.current_user_first_ran_at){let t=new Date(r.current_user_first_ran_at),n=Math.floor((Date.now()-t.getTime())/1e3);return e.newNumber(n)}return e.newNumber(0)},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:t,key:"status",options:{enumerable:!0,metricsKey:"figma.payments.status",get:()=>{let{pluginID:t}=this.options,r=this.getPublishedExtension(t),n=e.newObject();return e.setProp(n,"type",e.newString(this.userPaymentStatusType(r))),e.shallowFreezeObject(n),n}},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"setPaymentStatusInDevelopment",metricsKey:"figma.payments.setPaymentStatusInDevelopment",cb:t=>{let{pluginID:r}=this.options,n=this.getPublishedExtension(r);if(!this.options.isLocal&&!this.inReviewByCommunityAdmin(n))return e.undefined;let i=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.oneOf([ez.ng.exact({type:R.iK.NOT_SUPPORTED}),ez.ng.exact({type:R.iK.UNPAID}),ez.ng.exact({type:R.iK.PAID})]),zSchema:v.z.object({type:v.z.nativeEnum(R.iK)}),property:"setPaymentStatusInDevelopment"});return(0,R.Mz)(i),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"requestCheckout",metricsKey:"figma.payments.requestCheckout",cb:t=>(this.checkoutRequested||(this.checkoutRequested=!0,(0,X.MG)(this.requestCheckoutCallback)),e.undefined),isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"initiateCheckoutAsync",metricsKey:"figma.payments.initiateCheckoutAsync",cb:t=>{if(this.queryMode||!this.runtimeOptions.allowInitiateCheckout)throw Error("Unexpected call to figma.payments.initiateCheckoutAsync");let{promise:r,resolve:n}=e.newPromise(),i={interstitial:ey.d.PAID_FEATURE,...e.isUndefined(t)?{}:(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.exact({interstitial:ez.ng.oneOf([ey.d.PAID_FEATURE,ey.d.TRIAL_ENDED,ey.d.SKIP]).isOptional}).isOptional,zSchema:v.z.object({interstitial:v.z.nativeEnum(ey.d)}).partial(),property:"initiateCheckoutAsync"})};return e.registerPromise(this.initiateCheckoutAsyncImpl(i)).then(()=>n(e.undefined)),r},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"getPluginPaymentTokenAsync",metricsKey:"figma.payments.getPluginPaymentTokenAsync",cb:()=>{let{promise:t,resolve:r,reject:n}=e.newPromise();return e.registerPromise(this.getPluginPaymentTokenAsyncImpl()).then(t=>r(e.newString(t))).catch(t=>n(e.newString(`Failed to generate plugin payment token with error: ${t.message}`))),t},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(t),t}initiateCheckoutAsyncImpl(e){let t=d.V.getState().user,{pluginID:r,pluginVersionID:n,isLocal:i}=this.options,a=this.getPublishedExtension(r),o=i?this.getLocalPlugin(r):void 0,l=this.getOnCanvasPublishedWidgetVersion(r,n);if(a){if(!(0,es.vu)(a)&&!o)throw Error("Resource must be monetized to initiate checkout");if(this.userPaymentStatusType(a)!==R.iK.UNPAID){if(i)throw Error("Cannot initiate checkout, user's payment status type is not UNPAID");return Promise.resolve()}}return(0,eQ.KC)({shouldShowVisualBell:!0}),new Promise(async r=>{let n=!0;this.options.addShutdownAction(()=>{n&&(F.Gr.dispatch(A.h0(ey.T)),F.Gr.dispatch(A.h0(eE.n)))}),await (0,R.xz)(d.V.dispatch,t,a,o,l,null==e?void 0:e.interstitial),n=!1,r()})}getPluginPaymentTokenAsyncImpl(){let{pluginID:e,isLocal:t}=this.options,r=this.getPublishedExtension(e),n=t?this.getLocalPlugin(e):void 0;if(!e||!r&&!n)throw Error("Cannot generate plugin payment token, plugin is not found");if(!(0,es.vu)(r)&&!n)throw Error("Resource must be monetized to generate a plugin payment token");let i=(null==r?void 0:r.is_widget)||(null==n?void 0:n.cachedContainsWidget)?"widgets":"plugins";return y.ZP.put(`/api/${i}/${e}/id_token`).then(({data:e})=>Promise.resolve(e.meta.token)).catch(e=>Promise.reject(e))}createUtilApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"rgba",metricsKey:"figma.util.rgba",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:eA.nL,zSchema:eX.Y.ColorInput,property:"color"});return e.deepWrap((0,eA.mM)(r))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!0,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"rgb",metricsKey:"figma.util.rgb",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:eA.nL,zSchema:eX.Y.ColorInput,property:"color"});return e.deepWrap((0,eA.Sx)(r))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!0,hasEditScope:!1}),this.defineVmFunction({handle:t,key:"solidPaint",metricsKey:"figma.util.solidPaint",cb:(t,r)=>{let n=(0,ez.v1)({vm:e,handle:t,vmSchema:eA.nL,zSchema:eX.Y.ColorInput,property:"color"}),i=(0,ez.v1)({vm:e,handle:r,vmSchema:eA.qo,zSchema:eX.Y.PartialSolidPaint,property:"SolidPaint"});if(void 0!==i)for(let e in i)void 0===i[e]&&delete i[e];return e.deepWrap((0,eA.Kj)(n,i))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!0,hasEditScope:!1}),t}createInternalApi(){let e=this.vm,t=e.newObject();return e.shallowFreezeObject(t),t}createConstantsApi(){let e=this.vm,t=e.newObject();return this.defineVmProp({handle:t,key:"colors",options:{enumerable:!1,metricsKey:"constants.colors",get:()=>{let t=e.newObject(),r=e.newObject();for(let t in e_.p){let n=e.newString(e_.p[t]);e.setProp(r,t,n)}let n=e.newObject();for(let t in e_.t){let r=e.newString(e_.t[t]);e.setProp(n,t,r)}return e.setProp(t,"figJamBase",n),e.setProp(t,"figJamBaseLight",r),t}},canWriteInReadOnly:!1,isAllowedInWidgetRender:!0,hasEditScope:!1}),t}defineWidgetApi(e){if(!this.isWidget)return;let t=this.widgetManager;if(!t)throw Error("WidgetManager not defined");let r=this.vm,n=r.newObject();r.defineProp(e,"widget",{enumerable:!1,value:n});let i=(e,r,n)=>{let i=this.privateSceneGraph.get(e);(0,eq.WV)(i,r,n),t.scheduleRender(e)},a=(e,i)=>{r.defineFunction(n,e,`widget.${e}`,(r,n,a)=>{if(!t.isRunningWidgetFunction())throw Error(`Cannot use ${e} hook outside of widget rendering.`);return i(r,n,a)})};r.defineFunction(n,"register","widget.register",e=>{this._hasRegisteredWidgetFunction=!0;let r=async()=>{t.registerWidgetFunction(e);try{let e=JSON.parse(this.options.command);if("object"!=typeof e)throw Error("Invalid widget event");t.setLifecycleCommand(e);let r=e.widgetNodeID,n=this.privateSceneGraph.get(r);if(!n){this.closePlugin();return}let i=null;if(this.options.isLocal&&this.options.code&&!(0,j.dn)(this.options.pluginID)){let e=n.getPluginData(this.options.pluginID,eN.rG),t=(0,h.F)(this.options.code);e!==t&&(i=t)}if("click"===e.name||"propertymenu"===e.name||"rerender"===e.name||"textEditEnd"===e.name||"attachedStickablesChanged"===e.name||"stuckStatusChanged"===e.name){t.initializeRenderingState(r);let n=t.renderWidgetTree(r,"previous");switch(i||t.setOldVRoot(r,n),t.maybeRunEffects(r),e.name){case"textEditEnd":case"click":await U.y2.plugin(`widget-${e.name}`,()=>t.trackPromise((0,e2.GH)({vm:this.vm,uiHandle:this.uiHandle,runtime:t.getPluginRuntimeBridge(),vNode:n.rootNode,command:e,widgetManager:t}))),t.scheduleRender(r);break;case"propertymenu":let a=t.getPropertyMenuCallbackHandle(r);a&&await t.trackPromise(U.y2.user("widget-property-menu",()=>(0,e2.We)({vm:this.vm,uiHandle:this.uiHandle,widgetManager:t,callbackHandle:a,propertyName:e.propertyName,propertyValue:e.propertyValue})));break;case"stuckStatusChanged":{let n=t.getRenderingState(r),i=n.stickableState.stuckStatusChangedHandle;if(!i)break;await t.trackPromise((0,e2.mV)({vm:this.vm,handler:i,event:e}));break}case"attachedStickablesChanged":{let n=t.getRenderingState(r),i=n.stickableState.attachedStickablesChangedHandle;if(!i)break;await t.trackPromise((0,e2.Ju)({vm:this.vm,handler:i,event:e}))}}}("mount"===e.name||"rerender"===e.name||i)&&(i&&n.setPluginData(this.options.pluginID,eN.rG,i),t.scheduleRender(r)),await t.waitForFinish()}catch(e){if(e instanceof e1.uF)l.u.error(e);else if(e instanceof e1.hO);else throw e}finally{await this.closePlugin()}};return r(),this.vm.undefined}),r.defineFunction(n,"waitForTask","widget.waitForTask",e=>{if(t.isRunningWidgetFunction())throw Error("waitForTask can only be called in useEffect or an event handler");return t.trackPromise((0,ex.i)({vm:r,promiseHandle:e})),r.undefined}),r.defineFunction(n,"colorMapToOptions","widget.colorMapToOptions",e=>{let t=r.newArray(),n=r.deepUnwrap(e);return Object.keys(n).forEach((e,i)=>{let a=r.newObject();if(r.setProp(a,"option",r.newString(n[e])),""===e)r.setProp(a,"tooltip",r.newString(""));else{let t=e.replace(/([A-Z])/g," $1").trim().split(" ").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ");r.setProp(a,"tooltip",r.newString(t))}r.setProp(t,String(i),a)}),t});let o=()=>r.newString(t.getCurrentWidgetNodeId());a("useWidgetId",o),a("useWidgetNodeId",o),a("useEffect",e=>(t.addEffect(e),r.undefined)),a("useSyncedState",(e,n)=>{let a=t.getCurrentWidgetNodeId(),o=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"}),l=()=>{if(r.isFunction(n)){let e=r.undefined;return t.runSyncedStateDefaultValueFunction(()=>{let t=r.callFunction(n,r.undefined);if("FAILURE"===t.type)throw new e1.uF(`Error in useSyncedState default value function: ${t.error}`);if(r.isUndefined(t.handle))throw new e1.uF("Cannot return undefined from default value function in useSyncedState");e=t.handle}),e}return n},s=this.privateSceneGraph.get(a);if(!s){let e=r.newArray();return r.setProp(e,"0",l()),r.setProp(e,"1",r.newFunction("setSyncedState",()=>{if(t.isRunningWidgetFunction())throw Error("Cannot call setSyncedState while widget is rendering.");throw Error(`Invalid widgetID=${a}`)})),e}let c=()=>{let e=t.getRenderMode(s.guid),n=(0,eq.Jy)(e,s),i=l();if("current"===e&&!r.isUndefined(i)&&!n.hasOwnProperty(o)){let e=r.deepUnwrap(i);(0,eq.Iy)(this.privateSceneGraph.get(a),o,e)}return n.hasOwnProperty(o)?r.deepWrap(n[o]):i},d=r.newFunction("setSyncedState",e=>{if(t.isRunningWidgetFunction())throw Error("Cannot call setSyncedState while widget is rendering.");return i(a,o,r.deepUnwrap((()=>{if(r.isFunction(e)){let t=r.callFunction(e,r.undefined,c());if("FAILURE"===t.type)throw new e1.uF(`Error in setSyncedState: ${t.error}`);return t.handle}return e})())),r.undefined}),u=this.vm.newArray();return r.setProp(u,"0",c()),r.setProp(u,"1",d),u}),a("useSyncedMap",e=>{let n=t.getCurrentWidgetNodeId(),i=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"mapKey"}),a=()=>{let e=this.privateSceneGraph.get(n);return(0,eq.Wp)(t.getRenderMode((null==e?void 0:e.guid)??"-1:-1"),e,i)},o=r.newObject();return r.defineFunction(o,"set","map.set",(e,a)=>{if(t.isRunningWidgetFunction())throw Error("Cannot call map.set while widget is rendering.");let o=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"map.key"}),l=r.deepUnwrap(a);return U.y2.plugin("widget-set-synced-map-key",()=>(0,eq.ui)(this.privateSceneGraph.get(n),i,o,l)),t.scheduleRender(n),r.undefined}),r.defineFunction(o,"get","map.get",e=>{let t=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"map.key"});return r.deepWrap(a()[t])}),r.defineFunction(o,"has","map.has",e=>{let t=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"map.key"});return r.newBoolean(a().hasOwnProperty(t))}),r.defineFunction(o,"delete","map.delete",e=>{if(t.isRunningWidgetFunction())throw Error("Cannot call map.delete while widget is rendering.");let a=(0,ez.v1)({vm:r,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"map.key"});return(0,eq.Iq)(this.privateSceneGraph.get(n),i,a),t.scheduleRender(n),r.undefined}),r.defineFunction(o,"keys","map.keys",()=>r.deepWrap(Object.keys(a()))),r.defineProp(o,"length",{enumerable:!1,metricsKey:"map.length",get:()=>(l.u.warn("map.length is deprecated. please use map.size instead."),r.newNumber(Object.keys(a()).length))}),r.defineProp(o,"size",{enumerable:!1,metricsKey:"map.size",get:()=>r.newNumber(Object.keys(a()).length)}),r.defineFunction(o,"values","map.values",()=>r.deepWrap(Object.values(a()))),r.defineFunction(o,"entries","map.entries",()=>r.deepWrap(Object.entries(a()))),o}),a("usePropertyMenu",(e,n)=>(t.setPropertyMenu({propertyMenuDefinitionHandle:e,propertyMenuCallbackHandle:n}),r.undefined)),a("useStickable",e=>(t.setIsStickable(e),r.undefined)),a("useStickableHost",e=>(t.setIsStickableHost(e),r.undefined)),this.options.validatedPermissions.permissions.includes("hidecursors")&&a("useHideCursors",e=>(t.setShouldHideCursors(e),r.undefined)),this.addJSXComponentsToObject("figma.widget"),r.shallowFreezeObject(n)}defineWidgetLiteApi(e){let t=this.vm.newObject();this.vm.defineProp(e,"widget",{value:t,enumerable:!1}),this.addJSXComponentsToObject("figma.widget"),this.vm.shallowFreezeObject(t)}addJSXComponentsToObject(e){let t={...e4.Dp,...e4.Lm};this.vm.evalTrustedTopLevelCode(`
    const __BUILT_IN_WIDGET_COMPONENT_NAMES = new Set(${JSON.stringify(Object.keys(t))})
    for (let name of __BUILT_IN_WIDGET_COMPONENT_NAMES) {
      ${e}[name] = name;
    }

    ${e}.h = (component, props, ...rawChildren) => {
      let children = (rawChildren.length ? rawChildren : props?.children) || []
      children = Array.isArray(children) ? children : [children]
      if (__BUILT_IN_WIDGET_COMPONENT_NAMES.has(component)) {
        return {
          type: component,
          props,
          children,
        }
      }
      if (typeof component === 'function') {
        children = children.map((child, idx) => {
          if (typeof child?.props === 'object') {
            // In custom components, children ends up being an array which
            // causes spurious and confusing missing key prop warnings.
            // Lets just add a key to all children to avoid this.
            child.props = { key: 'children-' + idx, ...child.props }
          }
          return child
        })
        const result = component({...props, children})
        if (result && typeof result === 'object' && result.props && props && props.key != null) {
          result.props.key = props.key
        }
        return result
      }
      throw new Error('Component is not a function')
    }
    `)}defineInternalApis(e){this.options.validatedPermissions.permissions.includes("analytics")&&this.defineVmProp({handle:e,key:"analytics",options:{enumerable:!1,value:this.createAnalyticsApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.options.validatedPermissions.permissions.includes("cortex")&&this.defineVmProp({handle:e,key:"cortex",options:{enumerable:!1,value:this.createCortexApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.options.validatedPermissions.permissions.includes("firstdraft")&&this.defineVmProp({handle:e,key:"firstDraft",options:{enumerable:!1,value:this.createFirstDraftApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1})}createFirstDraftApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"serializeProductComponentForPublish",metricsKey:"firstDraft.serializeProductComponentForPublish",cb:t=>{let r=this.getNode(t);if(r.isLooseComponent||r.isStateGroup){let[t,n]=x.Cj$.serializeProductComponentForPublish(r.guid);if(t&&n){let r=e.deepWrap(t);return e.setProp(r,"buffer",e.deepWrap(new Uint8Array(n))),r}}return e.null},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(t),t}createAnalyticsApi(){let e=this.vm,t=e.newObject();return this.defineVmFunction({handle:t,key:"track",metricsKey:"analytics.track",cb:(t,r)=>((0,n.L9)((0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"analytics.track name"}),(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.dictionaryOf(ez.ng.any),zSchema:v.z.record(v.z.any()),property:"analytics.track properties"})),e.undefined),isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),e.shallowFreezeObject(t),t}wrapPromise(e){let t=this.vm,{promise:r,resolve:n,reject:i}=t.newPromise();return t.registerPromise(e).then(e=>n(t.deepWrap(e))).catch(e=>i(this.wrapError(e))),r}wrapError(e){let t=this.vm,r=t.newObject();return t.defineProp(r,"message",{enumerable:!0,value:t.newString(e.message)}),t.shallowFreezeObject(r),r}createCortexKiwiApi(){let e=this,t=this.vm,r=t.newObject();return this.defineVmFunction({handle:r,key:"getSceneForNode",metricsKey:"cortex.internal.kiwi.getSceneForNode",cb:r=>{let n=e.getNode(r),i=x.iTB.generateClipboardScene(n.guid);return t.newUint8Array(i)},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:r,key:"applyScene",metricsKey:"cortex.internal.kiwi.applyScene",cb:e=>{let r=(0,ez.v1)({vm:t,handle:e,vmSchema:ez.ng.uint8Array,zSchema:eX.Y.UInt8Array,property:"applyScene"});return x.iTB.applyFileToCurrentScene(r),t.undefined},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),t.shallowFreezeObject(r),r}createCortexApi(){let e=this.vm,t=e.newObject();this.defineVmProp({handle:t,key:"kiwi",options:{enumerable:!1,writable:!1,metricsKey:"figma.kiwi",value:this.createCortexKiwiApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1});let r=(t,r)=>(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.dictionaryOf(ez.ng.any),zSchema:v.z.record(v.z.any()),property:t}),n=(e,n,i)=>{this.defineVmFunction({handle:t,key:e,metricsKey:n,cb:e=>{let t=r(`${n} input`,e),a=d.V.getState(),o=(0,eT.So)(a);return this.wrapPromise(i(t,o))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1})},i=(e,n,i)=>{let a=this.vm;this.defineVmFunction({handle:t,key:e,metricsKey:n,cb:e=>{let t=r(`${n} input`,e),o=d.V.getState(),l=(0,eT.So)(o),{promise:s,resolve:c,reject:u}=a.newPromise();return a.registerPromise(i(t,l)).then(e=>c(this.wrapReadableStream(e))).catch(e=>u(this.wrapError(e))),s},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1})};return n("completeChat","cortex.internal.openai.completeChat",D.ZP.openai.completeChat),i("streamChat","cortex.internal.openai.streamChat",D.ZP.openai.streamChat),n("completeRainbowChat","cortex.internal.openai.rainbow.completeChat",D.ZP.openai.completeRainbowChat),i("streamRainbowChat","cortex.internal.openai.rainbow.streamChat",D.ZP.openai.streamRainbowChat),n("computeEmbeddings","cortex.internal.openai.embeddings",D.ZP.openai.computeEmbeddings),n("getClaudeCompletions","cortex.internal.anthropic.getClaudeCompletions",D.ZP.anthropic.getClaudeCompletions),i("streamClaudeCompletions","cortex.internal.anthropic.streamClaudeCompletions",D.ZP.anthropic.streamClaudeCompletions),n("jamGPT","cortex.internal.figjam.jamGPT",D.ZP.figjam.jamGPT),i("createTemplate","cortex.internal.figjam.createTemplate",D.ZP.figjam.createTemplate),n("createVisual","cortex.internal.figjam.createVisual",D.ZP.figjam.createVisual),e.shallowFreezeObject(t),t}callConstructor(e,...t){let r=this.vm;if(!this.constructorHelper){let e=this.vm.evalCode("(o, ...args) => new o(...args)");if("FAILURE"===e.type)throw Error(`Error creating constructor helper: ${e.error}`);this.constructorHelper=e.handle,r.retainHandle(this.constructorHelper)}return this.vm.callFunction(this.constructorHelper,r.undefined,e,...t)}wrapReadableStream(e){let t=this.vm,r=t.getProp(t.global,"ReadableStream");if(!r)throw l.u.error(`
Import a polyfill to use this plugin API, eg:
\`\`\`

import { ReadableStream } from "web-streams-polyfill/es6";
if (typeof globalThis !== "undefined" && !("ReadableStream" in globalThis)) {
  globalThis.ReadableStream = ReadableStream;
}
// Now it's safe to use APIs that return ReadableStreams

\`\`\`
`),Error("ReadableStream not available on the VM global object.");let n=t.newObject(),i=e.getReader(),a=(e,r,...n)=>{let i=t.getProp(e,r);if(!t.isFunction(i))return!1;{let a=t.callFunction(i,e,...n);if("FAILURE"!==a.type)return!0;l.u.error(`Error calling controller.${r}(\u2026)`)}};t.defineFunction(n,"pull","underlyingSource.pull",e=>(t.retainHandle(e),this.wrapPromise((async()=>{try{let{done:r,value:n}=await i.read();if(t.isDestroyed()){i.cancel();return}r?a(e,"close",t.undefined):a(e,"enqueue",t.deepWrap(n))}catch(t){l.u.error("ReadableStream: Error reading from stream passing to plugin vm",t),a(e,"error",this.wrapError(t))}finally{t.releaseHandle(e)}})()))),t.defineFunction(n,"cancel","underlyingSource.cancel",e=>this.wrapPromise(i.cancel())),t.shallowFreezeObject(n);let o=this.callConstructor(r,n);if("FAILURE"===o.type)throw l.u.error(`Error creating ReadableStream: ${o.error}`),Error(`Error creating ReadableStream: ${o.error}`);return o.handle}setQueryMode(e){this.queryMode=e,x.Cj$.runInQueryMode(this.queryMode),this.uiHandle.setHideVisibleUI(this.queryMode)}setSkipInvisibleInstanceChildren(e){this.skipInvisibleInstanceChildren=e,x.Cj$.skipInvisibleInstanceChildren(e)}getUiHandle(){return this.uiHandle}createAPI(){let e=this.vm,{command:t,queryMode:r,pluginID:n,apiVersion:i,enableProposedApi:c,enablePrivatePluginApi:m,openFileKey:h,stats:E,incrementalSafeApi:y}=this.options,I=0,T=e.newObject();e.setProp(e.global,"figma",T),this.defineVmProp({handle:T,key:"apiVersion",options:{enumerable:!1,writable:!1,metricsKey:"figma.apiVersion",value:e.newString(i)},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"getHTMLString",metricsKey:"figma.getHTMLString",cb:()=>this.vm.newString(this.options.html??""),isAllowedInReadOnly:!0,hasEditScope:!1}),(m||this.options.validatedPermissions.permissions.includes("filekey"))&&this.defineVmProp({handle:T,key:"fileKey",options:{enumerable:!1,writable:!1,metricsKey:"figma.fileKey",value:e.newString(h)},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.inDesignOrDevHandoff()&&(function({vm:e,figmaApi:t,styleFactory:r,defineVmFunction:n,defineVmIncrementalFunction:i,incrementalSafeApi:a,getNode:o,styleManager:l,documentAccessState:s}){for(let{styleType:c,moveMethod:d}of(i({handle:t,key:"getStyleById",metricsKey:"figma.getStyleById",incrementalSafeApiKey:"getStyleByIdAsync",incrementalSafeApiMetricsKey:"figma.getStyleByIdAsync",parseArg:t=>e.toString(t),prepareDocument:async e=>{await (0,eL.f1)(s)},resolveValue:e=>r.createStyle(e),incrementalSafeApi:a,isAllowedInReadOnly:!0,hasEditScope:!1}),eN.Oc))n({handle:t,key:d,metricsKey:"figma."+d,cb:(t,r)=>{let n=o(t),i=e.isNull(r)?null:o(r);if(n.styleType!==c)throw Error(`Target node is a ${n.styleType} node, instead of ${c}`);if(null!==i&&i.styleType!==c)throw Error(`Reference node is a ${i.styleType} node, instead of ${c}`);if(null!==i&&i&&n.guid===i.guid)throw Error("Target node and reference node cannot be equal");let a=l.moveStyle(n,i,c);if(""!==a)throw Error(a);return e.undefined},isAllowedInReadOnly:!1,hasEditScope:!0});for(let{styleType:r,moveFolderMethod:i}of eN.Oc)n({handle:t,key:i,metricsKey:"figma."+i,cb:(t,n)=>{let i=e.toString(t),a=e.isNull(n)?null:e.toString(n),o=l.moveFolder(i,a,r);if(""!==o)throw Error(o);return e.undefined},isAllowedInReadOnly:!1,hasEditScope:!0});for(let{styleType:e,createMethod:i}of eN.Oc)n({handle:t,key:i,metricsKey:"figma."+i,cb:()=>{let t=l.createStyle(e);if(!t)throw Error(`Could not create ${e} style`);return r.createStyle(t)},isAllowedInReadOnly:!1,hasEditScope:!0});for(let{styleType:n,getMethod:o,getMethodAsync:s}of eN.Oc)i({handle:t,key:o,metricsKey:"figma."+o,incrementalSafeApiKey:s,incrementalSafeApiMetricsKey:"figma."+s,parseArg:e=>{},prepareDocument:async()=>{},resolveValue:()=>(function({styleType:t}){let n=l.getAllLocalStyles(t).map(K.Pe),i=e.newArray(),a=0;for(let t of n){let n=r.createStyle(t);!e.isNull(n)&&(e.setProp(i,a.toString(),n),a++)}return i})({styleType:n}),incrementalSafeApi:a,isAllowedInReadOnly:!0,hasEditScope:!1})}({vm:e,stats:E,figmaApi:T,styleFactory:this.styleFactory,defineVmFunction:this.defineVmFunction,defineVmIncrementalFunction:this.defineVmIncrementalFunction,incrementalSafeApi:this.options.incrementalSafeApi,getNode:this.getNode,styleManager:this.styleManager,documentAccessState:this.documentAccessState}),function({vm:e,imageStore:t,videoStore:r,figmaApi:n,variableFactory:i,variableCollectionFactory:a,defineVmFunction:o,defineVmIncrementalFunction:s,defineVmProp:c,incrementalSafeApi:d,documentAccessState:u,pluginVersionID:m,getNode:h}){c({handle:n,key:"variables",options:{enumerable:!1,metricsKey:"figma.variables",get:(0,eC.Y2)(e,()=>(function(){let n=e.newObject();return s({handle:n,key:"getVariableById",hasEditScope:!1,metricsKey:"figma.variables.getVariableById",incrementalSafeApiKey:"getVariableByIdAsync",incrementalSafeApiMetricsKey:"figma.variables.getVariableByIdAsync",parseArg:t=>e.toString(t),prepareDocument:async e=>{await (0,eL.f1)(u)},resolveValue:e=>i.createVariableHandle(e),isAllowedInReadOnly:!0,incrementalSafeApi:d}),s({handle:n,key:"getLocalVariables",hasEditScope:!1,metricsKey:"figma.variables.getLocalVariables",incrementalSafeApiKey:"getLocalVariablesAsync",incrementalSafeApiMetricsKey:"figma.variables.getLocalVariablesAsync",parseArg:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ej.SA.isOptional,zSchema:ej.i6.PublicVariableResolvedType.optional(),property:"resolvedType"})??null;return r},prepareDocument:async e=>{},resolveValue:e=>i.getLocalVariables(e),isAllowedInReadOnly:!0,incrementalSafeApi:d}),o({handle:n,key:"getSubscribedVariables",hasEditScope:!1,metricsKey:"figma.variables.getSubscribedVariables",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ej.SA.isOptional,zSchema:ej.i6.PublicVariableResolvedType.optional(),property:"resolvedType"})??null;return i.getSubscribedVariables(r)},isAllowedInReadOnly:!0}),s({handle:n,key:"getVariableCollectionById",hasEditScope:!1,metricsKey:"figma.variables.getVariableCollectionById",incrementalSafeApiKey:"getVariableCollectionByIdAsync",incrementalSafeApiMetricsKey:"figma.variables.getVariableCollectionByIdAsync",parseArg:t=>e.toString(t),prepareDocument:async e=>{await (0,eL.f1)(u)},resolveValue:e=>a.createVariableCollectionHandle(e),incrementalSafeApi:d,isAllowedInReadOnly:!0}),s({handle:n,key:"getLocalVariableCollections",hasEditScope:!1,metricsKey:"figma.variables.getLocalVariableCollections",incrementalSafeApiKey:"getLocalVariableCollectionsAsync",incrementalSafeApiMetricsKey:"figma.variables.getLocalVariableCollectionsAsync",parseArg:e=>{},prepareDocument:async e=>{},resolveValue:e=>a.getLocalVariableCollections(),isAllowedInReadOnly:!0,incrementalSafeApi:d}),o({handle:n,key:"createVariableCollection",hasEditScope:!0,metricsKey:"figma.variables.createVariableCollection",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"name"}),n=a.createNewVariableCollection(r);return a.createVariableCollectionHandle(n)},isAllowedInReadOnly:!1}),o({handle:n,key:"createVariable",hasEditScope:!0,metricsKey:"figma.variables.createVariable",cb:(t,r,n)=>{let a=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"name"}),o=(0,eM.Wg)({callerName:"createVariable",consoleLogger:l.u,getNode:h,incrementalSafeApi:d,pluginVersionID:m,throwOnStringIdInIncrementalSafeApi:!0,vm:e,vmHandle:r}),s=(0,ez.v1)({vm:e,handle:n,vmSchema:ej.SA,zSchema:ej.i6.PublicVariableResolvedType,property:"resolvedType"}),c=i.createNewVariable(a,o,s);return i.createVariableHandle(c)},isAllowedInReadOnly:!1}),o({handle:n,key:"createVariableAlias",hasEditScope:!0,metricsKey:"figma.variables.createVariableAlias",cb:t=>{let r=h(t);if("VARIABLE"!==r.type)throw Error("Can only construct variable aliases from variables");let n=e.getStringProp(t,"id");return e.deepWrap({type:"VARIABLE_ALIAS",id:n})},isAllowedInReadOnly:!0}),(0,p.BZ)().plugins_incremental_loading_api&&o({handle:n,key:"createVariableAliasByIdAsync",metricsKey:"figma.variables.createVariableAliasByIdAsync",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"variableId"});if(!eb.JY(r))throw Error("Invalid variable id");let{promise:n,resolve:i,reject:a}=e.newPromise();return e.registerPromise((0,eL.f1)(u)).then(()=>{i(e.deepWrap({type:"VARIABLE_ALIAS",id:r}))}).catch(t=>{a(e.newString(t.message))}),n},isAllowedInReadOnly:!0,hasEditScope:!1}),o({handle:n,key:"importVariableByKeyAsync",metricsKey:"figma.variables.importVariableByKeyAsync",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"variableKey"});return i.importByKeyAsync(r)},isAllowedInReadOnly:!1,hasEditScope:!1}),o({handle:n,key:"setBoundVariableForPaint",metricsKey:"figma.variables.setBoundVariableForPaint",cb:(n,i,a)=>{let o=(0,ez.v1)({vm:e,handle:n,vmSchema:eB.wG,zSchema:eX.Y.Paint,property:"paintCopy"}),l=(0,ez.v1)({vm:e,handle:i,vmSchema:ej.j1,zSchema:ej.i6.VariableBindablePaintField,property:"field"});if(e.isNull(a)||e.isUndefined(a)){let n=(0,eF.Zz)(t,r,o,[]);return n.colorVar=void 0,e.deepWrap((0,eF.bV)(n))}let s=h(a);if(!s||"VARIABLE"!==s.type||s.variableResolvedType!==x.QC$.COLOR)throw Error(`can only bind color variables to ${l}`);let c=e.getStringProp(a,"id"),d=(0,eF.Zz)(t,r,o,[]);if("SOLID"!==d.type)throw Error("can only bind variables to solid paints");return d.colorVar={value:{alias:eb.mL(c)},dataType:"ALIAS",resolvedDataType:"COLOR"},e.deepWrap((0,eF.bV)(d))},isAllowedInReadOnly:!0,hasEditScope:!1}),(0,p.BZ)().ds_variables_strokes&&(o({handle:n,key:"setBoundVariableForEffect",metricsKey:"figma.variables.setBoundVariableForEffect",cb:(t,r,n)=>{let i=(0,ez.v1)({vm:e,handle:t,vmSchema:eB.wE,zSchema:eX.Y.EffectWithVariables,property:"effectCopy"});if(e.isNull(n)||e.isUndefined(n)){let t=(0,eM.Ps)(i);return t.colorVar=void 0,t.radiusVar=void 0,t.spreadVar=void 0,t.xVar=void 0,t.yVar=void 0,e.deepWrap((0,eM.EI)(t))}let a=h(n),o=e.getStringProp(n,"id"),l=(0,eM.Ps)(i);if("INNER_SHADOW"===l.type||"DROP_SHADOW"===l.type){let t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.U_,zSchema:ej.i6.VariableBindableShadowEffectField,property:"field"});if(!a||"VARIABLE"!==a.type||"color"===t&&a.variableResolvedType!==x.QC$.COLOR)throw Error(`can only bind color variables to ${t}`);if(!a||"VARIABLE"!==a.type||"color"!==t&&a.variableResolvedType!==x.QC$.FLOAT)throw Error(`can only bind float variables to ${t}`);switch(t){case"color":l.colorVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"COLOR"};break;case"radius":l.radiusVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"};break;case"spread":l.spreadVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"};break;case"offsetX":l.xVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"};break;case"offsetY":l.yVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"}}}else{let t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.NW,zSchema:ej.i6.VariableBindableBlurEffectField,property:"field"});if(!a||"VARIABLE"!==a.type||a.variableResolvedType!==x.QC$.FLOAT)throw Error(`can only bind float variables to ${t}`)}return e.deepWrap((0,eM.EI)(l))},isAllowedInReadOnly:!0,hasEditScope:!1}),o({handle:n,key:"setBoundVariableForLayoutGrid",metricsKey:"figma.variables.setBoundVariableForLayoutGrid",cb:(t,r,n)=>{let i=(0,ez.v1)({vm:e,handle:t,vmSchema:eB.pA,zSchema:eX.Y.LayoutGridWithVariables,property:"layoutGridCopy"});if(e.isNull(n)||e.isUndefined(n)){let t=(0,eM.GE)(i);return t.offsetVar=void 0,t.gutterSizeVar=void 0,t.numSectionsVar=void 0,t.sectionSizeVar=void 0,e.deepWrap((0,eM.yR)(t))}let a=h(n),o=e.getStringProp(n,"id");if(!a||"VARIABLE"!==a.type||a.variableResolvedType!==x.QC$.FLOAT)throw Error("can only bind float variables to layoutGrids");let l=(0,eM.GE)(i);if("GRID"===l.pattern){let t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.m,zSchema:ej.i6.VariableBindableGridLayoutField,property:"field"});if(!a||"VARIABLE"!==a.type||a.variableResolvedType!==x.QC$.FLOAT)throw Error(`can only bind float variables to ${t}`);l.sectionSizeVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"}}else{let t;switch(l.type){case"MIN":case"MAX":t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.Sb,zSchema:ej.i6.VariableBindableMinMaxLayoutField,property:"field"});break;case"CENTER":t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.iG,zSchema:ej.i6.VariableBindableCenterLayoutField,property:"field"});break;case"STRETCH":t=(0,ez.v1)({vm:e,handle:r,vmSchema:ej.Nh,zSchema:ej.i6.VariableBindableStretchLayoutField,property:"field"})}switch(t){case"sectionSize":l.sectionSizeVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"COLOR"};break;case"offset":l.offsetVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"};break;case"count":l.numSectionsVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"};break;case"gutterSize":l.gutterSizeVar={value:{alias:eb.mL(o)},dataType:"ALIAS",resolvedDataType:"FLOAT"}}}return e.deepWrap((0,eM.yR)(l))},isAllowedInReadOnly:!0,hasEditScope:!1})),(0,p.BZ)().ds_variables_extended_sets&&o({handle:n,key:"createVariableCollectionExtension",metricsKey:"figma.variables.createVariableCollectionExtension",cb:(t,r)=>{let n=h(t);if(!n||"VARIABLE_SET"!==n.type)throw Error("Can only extend variable collections or other variable collection extensions");let i=e.getStringProp(t,"id");if(!P.lP.isValid(i))throw Error("The provided variable collection to extend is invalid");let o=(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"name"}),l=a.createNewVariableCollectionExtension(i,o);return a.createVariableCollectionExtensionHandle(l)},isAllowedInReadOnly:!1,hasEditScope:!0}),e.shallowFreezeObject(n),n})())},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1})}({vm:e,videoStore:this.videoStore,imageStore:this.imageStore,figmaApi:T,variableFactory:this.variableFactory,variableCollectionFactory:this.variableCollectionFactory,defineVmFunction:this.defineVmFunction,defineVmIncrementalFunction:this.defineVmIncrementalFunction,defineVmProp:this.defineVmProp,incrementalSafeApi:this.options.incrementalSafeApi,documentAccessState:this.documentAccessState,pluginVersionID:this.options.pluginVersionID,getNode:this.getNode}),function({vm:e,stats:t,validatedPermissions:r,figmaApi:n,variableFactory:i,variableCollectionFactory:a,defineVmFunction:o,defineVmProp:l}){l({handle:n,key:"teamLibrary",options:{enumerable:!1,metricsKey:"figma.teamLibrary",get:(0,eC.Y2)(e,()=>{if(!r.permissions.includes("teamlibrary"))throw Error('"teamlibrary" permission not specified in manifest.json.');return function(){let t=e.newObject();return o({handle:t,key:"getAvailableLibraryVariableCollectionsAsync",metricsKey:"figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync",cb:()=>a.getLibraryVariableCollectionsAsync(),isAllowedInReadOnly:!0,hasEditScope:!1}),o({handle:t,key:"getVariablesInLibraryCollectionAsync",metricsKey:"figma.teamLibrary.getVariablesInLibraryCollectionAsync",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"variableCollectionKey"});return i.getVariablesInLibraryCollectionAsync(r)},isAllowedInReadOnly:!0,hasEditScope:!1}),t}()})},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1})}({vm:e,stats:E,figmaApi:T,validatedPermissions:this.options.validatedPermissions,variableFactory:this.variableFactory,variableCollectionFactory:this.variableCollectionFactory,defineVmFunction:this.defineVmFunction,defineVmProp:this.defineVmProp})),this.defineVmProp({handle:T,key:"root",options:{enumerable:!1,metricsKey:"figma.root",get:()=>this.nodeFactory.createNode("0:0","root")},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmProp({handle:T,key:"mode",options:{metricsKey:"figma.mode",enumerable:!1,get:()=>{if((0,p.BZ)().ext_lego_plugins_runmode){let t=this.getRunMode();return"inspect"!==t||this.options.capabilities.includes("inspect")||(t="panel"),e.newString(t)}let t="codegen"===this.options.triggeredFrom,r="related-link-preview"===this.options.triggeredFrom,n="related-link-auth"===this.options.triggeredFrom,i="dev_handoff"===this.fullscreenEditorType&&!t,a="textreview"===this.options.command,o="default";return t?o="codegen":r?o="linkpreview":n?o="auth":i?o=this.options.capabilities.includes("inspect")?"inspect":"panel":a&&(o="textreview"),e.newString(o)}},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmProp({handle:T,key:"editorType",options:{get:()=>{var t;let r="figjam";switch(this.fullscreenEditorType){case"design":case ec.tc:r="figma";break;case"dev_handoff":r=(null==(t=this.options.editorType)?void 0:t.includes(ed.IP.DEV))?"dev":"inspect";break;case"whiteboard":r="figjam";break;case ec.QK:r=ec.QK;break;default:(0,a.vE)(this.fullscreenEditorType)}return e.newString(r)},metricsKey:"figma.editorType",enumerable:!1},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0});let w=this;this.defineVmProp({handle:T,key:"currentPage",options:{enumerable:!1,metricsKey:"figma.currentPage",get:()=>{let t=w.privateSceneGraph.getCurrentPage();return null===t?e.null:((0,eL.x0)(t.guid,this.documentAccessState),this.nodeFactory.createNode(t.guid,"currentPage"))},set:function(t){if(y)throw Error(eL.$5.invalidIncremental("figma.setCurrentPageAsync"));let r=w.getNode(t);if("CANVAS"!==r.type)throw Error("figma.currentPage expects a PageNode");return w.privateSceneGraph.setCurrentPage(r.guid),e.null}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),(0,p.BZ)().plugins_incremental_loading_api&&this.defineVmFunction({handle:T,key:"setCurrentPageAsync",metricsKey:"figma.setCurrentPageAsync",cb:t=>{let r=this.getNode(t),{promise:n,resolve:i,reject:a}=e.newPromise();return e.registerPromise((0,eL.wG)(r.guid,this.documentAccessState)).then(()=>{if("CANVAS"!==r.type)throw Error("figma.setCurrentPageAsync expects a PageNode");this.privateSceneGraph.setCurrentPage(r.guid),i(e.null)}).catch(t=>a(e.newString(t.message))),n},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"currentUser",options:{enumerable:!1,metricsKey:"figma.currentUser",get:()=>{if(!this.options.validatedPermissions.permissions.includes("currentuser"))throw Error(tv("currentuser",{isWidget:this.isWidget}));return this.createUserApi()}},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"activeUsers",options:{enumerable:!1,metricsKey:"activeUsers",get:()=>{if(!this.options.validatedPermissions.permissions.includes("activeusers"))throw Error(tv("activeusers",{isWidget:this.isWidget}));return this.createActiveUsersApi()}},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.isWidget?this.defineVmProp({handle:T,key:"widgetId",options:{enumerable:!1,metricsKey:"figma.widgetId",get:()=>e.newString(this.options.pluginID)},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}):this.defineVmProp({handle:T,key:"pluginId",options:{enumerable:!1,metricsKey:"figma.pluginId",get:()=>e.newString(this.options.pluginID)},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"command",options:{enumerable:!1,metricsKey:"figma.command",get:()=>this.isWidget?e.undefined:e.newString(t)},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.setQueryMode(r),e.defineProp(T,"mixed",{enumerable:!1,metricsKey:"figma.mixed",get:()=>this.mixedSentinel}),this.defineVmProp({handle:T,key:"skipInvisibleInstanceChildren",options:{enumerable:!1,metricsKey:"figma.skipInvisibleInstanceChildren",get:()=>e.newBoolean(this.skipInvisibleInstanceChildren),set:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.bool,zSchema:v.z.boolean(),property:"skipInvisibleInstanceChildren"});this.setSkipInvisibleInstanceChildren(r)}},canWriteInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"payments",options:{enumerable:!1,metricsKey:"figma.payments",get:(0,eC.Y2)(e,()=>{if(!this.options.validatedPermissions.permissions.includes("payments"))throw Error('"payments" permission not specified in manifest.json.');return this.createPaymentsApi()})},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1});let S=this.inDesignOrDevHandoff();for(let{nodeType:t,createMethod:r}of eN.UP)(0,eh.Fr)(t)&&S&&!(0,p.BZ)().figjam_plugins_create_in_df||!S&&(0,eN.$x)().includes(t)||S&&(0,eN.A5)().includes(t)||("TABLE"===t?this.defineVmFunction({handle:T,key:r,metricsKey:"figma."+r,cb:(n,i)=>{let a=(0,ez.v1)({vm:e,handle:n,vmSchema:ez.ng.integer.min(1).isOptional,zSchema:eX.Y.FiniteNumber.int().min(1).optional(),property:"options"}),o=(0,ez.v1)({vm:e,handle:i,vmSchema:ez.ng.integer.min(1).isOptional,zSchema:eX.Y.FiniteNumber.int().min(1).optional(),property:"options"}),l={tracking:x.zPy.TRACK,...a&&{tableNumRows:a},...o&&{tableNumColumns:o}},s=this.privateSceneGraph.createNode(t,l);return(0,eL.x0)(s.guid,this.documentAccessState),this.nodeFactory.createNode(s.guid,`figma.${r}`)},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}):this.defineVmFunction({handle:T,key:r,metricsKey:"figma."+r,cb:()=>{let e=this.privateSceneGraph.createNode(t);return(0,eL.x0)(e.guid,this.documentAccessState),this.nodeFactory.createNode(e.guid,`figma.${r}`)},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}));this.defineVmFunction({handle:T,key:"flatten",metricsKey:"figma.flatten",cb:(t,r,n)=>{let{nodeIds:i,parent:a,index:o}=e5({vm:e,callerName:"flatten",nodes:t,parentArg:r,indexArg:n,getNode:this.getNode}),l=x.Cj$.flattenNodes(i,a?a.sessionID:-1,a?a.localID:-1,o);return this.nodeFactory.createNode(l,"figma.flatten")},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),S&&this.defineVmFunction({handle:T,key:"combineAsVariants",metricsKey:"figma.combineAsVariants",cb:this.makeGroupingOperationFunction("combineAsVariants",x.JiX.STATE_GROUP),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"group",metricsKey:"figma.group",cb:this.makeGroupingOperationFunction("group",x.JiX.GROUP),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"union",metricsKey:"figma.union",cb:this.makeGroupingOperationFunction("union",x.JiX.UNION),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"subtract",metricsKey:"figma.subtract",cb:this.makeGroupingOperationFunction("subtract",x.JiX.SUBTRACT),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"intersect",metricsKey:"figma.intersect",cb:this.makeGroupingOperationFunction("intersect",x.JiX.INTERSECT),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"exclude",metricsKey:"figma.exclude",cb:this.makeGroupingOperationFunction("exclude",x.JiX.XOR),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"ungroup",metricsKey:"figma.ungroup",cb:t=>{let r=this.getNode(t);if(!r)throw Error("Parent must be provided to ungroup()");let n=x.Cj$.ungroupNode(r.guid),i=e.newArray();return n.forEach((t,r)=>{let n=this.nodeFactory.createNode(t,"figma.ungroup");e.setProp(i,r.toString(),n)}),i},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"commitUndo",metricsKey:"figma.commitUndo",cb:t=>(F.Gr.triggerAction("commit"),e.undefined),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"triggerUndo",metricsKey:"figma.triggerUndo",cb:t=>(F.Gr.triggerAction("undo"),e.undefined),isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"createImage",metricsKey:"figma.createImage",cb:t=>{let r=this.imageStore.createImage((0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.uint8Array,zSchema:eX.Y.UInt8Array,property:"createImage"}));return(0,eM.$_)(e,r)},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"createImageAsync",metricsKey:"figma.createImageAsync",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"createImageAsync"}),{promise:n,resolve:i,reject:a}=e.newPromise(),o=(0,e8.o7)(r,this.options.allowedDomains);return e.registerPromise(o).then(t=>{let r=this.imageStore.createImage(t),n=(0,eM.$_)(e,r);i(n)}).catch(t=>a(e.newString(t.message))),n},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"getImageByHash",metricsKey:"figma.getImageByHash",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"getImageByHash"}),n=this.imageStore.getImageFromSHA1(r);return null===n?e.null:(0,eM.$_)(e,n)},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"createVideo",metricsKey:"figma.createVideo",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise();return e.registerPromise(this.videoStore.createVideoAsync((0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.uint8Array,zSchema:eX.Y.UInt8Array,property:"createVideo"}))).then(t=>{n((0,eM.Iq)(e,t))},t=>i(e.newString(`Failed create video. Error: ${t.message}`))),r},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"createVideoAsync",metricsKey:"figma.createVideoAsync",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise();return e.registerPromise(this.videoStore.createVideoAsync((0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.uint8Array,zSchema:eX.Y.UInt8Array,property:"createVideoAsync"}))).then(t=>{n((0,eM.Iq)(e,t))},t=>i(e.newString(`Failed create video. Error: ${t.message}`))),r},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"listAvailableFontsAsync",metricsKey:"figma.listAvailableFontsAsync",cb:()=>{let{promise:t,resolve:r,reject:n}=e.newPromise();return e.registerPromise(ts()).then(t=>r(e.deepWrap(t)),t=>{n(e.newString("Internal error")),(0,_.Jz)(g.k.EXTENSIBILITY,t)}),t},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),(0,p.BZ)().plugins_incremental_loading_api&&this.defineVmFunction({handle:T,key:"loadAllPagesAsync",metricsKey:"figma.loadAllPagesAsync",cb:()=>{if("textreview"===this.options.command||this.queryMode)throw Error("Unexpected call to figma.loadAllPagesAsync");let{promise:t,resolve:r}=e.newPromise();return e.registerPromise((0,er.s)(null,null)).then(t=>r(e.deepWrap(t))),this.documentAccessState.loadedAllPages(),t},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"loadFontAsync",metricsKey:"figma.loadFontAsync",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise(),a=(0,ez.v1)({vm:e,handle:t,vmSchema:eB.mO,zSchema:eX.Y.FontName,property:"loadFontAsync"});return I+=1,setTimeout(()=>{e.registerPromise(function({family:e,style:t}){return new Promise((r,n)=>{let i=x.Cj$.startLoadingFontName(e,t);if(i===x.ni0.LOADED){r();return}if(i===x.ni0.LOADING){let i=a=>{a===x.ni0.LOADED?((0,G.Wk)(e,t,i),r()):a===x.ni0.FAILED&&((0,G.Wk)(e,t,i),n())};(0,G.j3)(e,t,i);return}n()})}(a)).then(()=>{I-=1,n(e.undefined)},()=>{I-=1,i(e.newString(`The font "${a.family} ${a.style}" could not be loaded`))})}),r},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"hasMissingFont",options:{enumerable:!1,metricsKey:"hasMissingFont",get:()=>e.newBoolean(x.Cj$.documentHasMissingFont())},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmIncrementalFunction({handle:T,key:"getNodeById",hasEditScope:!1,metricsKey:"figma.getNodeById",incrementalSafeApiKey:"getNodeByIdAsync",incrementalSafeApiMetricsKey:"figma.getNodeByIdAsync",parseArg:t=>e.toString(t),prepareDocument:async e=>{await (0,eL.wG)(e,this.documentAccessState)},resolveValue:t=>(function({nodeID:e,vm:t,nodeFactory:r,method:n,sceneGraph:i}){if(!eN.SQ.test(e))return t.null;let a=i.guidFromDeveloperFriendlyId(e);if(!a)return t.null;let o=i.get(a);return void 0===o||o&&(0,eM.K)(t,o)?t.null:r.createNode(a,n)})({nodeID:t,vm:e,nodeFactory:this.nodeFactory,sceneGraph:this.privateSceneGraph,method:"figma.getNodeById"}),incrementalSafeApi:this.options.incrementalSafeApi,isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1}),this.defineVmFunction({handle:T,key:"getSelectionColors",metricsKey:"figma.getSelectionColors",isAllowedInReadOnly:!0,cb:()=>{x.i0b.collectPaintsAndSendToWeb();let{selectionPaints:t}=d.V.getState().mirror;if(t.emptyDueToLimitExceeded)return e.null;let r=e.newObject(),n=t.paints.length?t.paints:t.paintsDirectlyOnSingleNode,i=n.map(e=>(0,eF.C7)([e.paint])[0]),a=t.styles.length?t.styles:t.stylesDirectlyOnSingleNode,o=a.map(t=>{let r=this.styleFactory.createStyle((0,K.Pe)({key:t.styleKey,version:(0,b.IT)(t.version)}));if(r!==e.null)return r;let n=this.privateSceneGraph.get(t.styleGUIDs[0]);if(!n)return null;let i=null==n?void 0:n.styleVersionHash,a=null==n?void 0:n.styleKey;return i&&a?this.styleFactory.createStyle((0,K.Pe)({key:a,version:i})):null}).filter(e=>null!=e),l=e.newArray();for(let t=0;t<o.length;t++)e.setProp(l,String(t),o[t]);return e.setProp(r,"paints",e.deepWrap(i)),e.setProp(r,"styles",l),r},hasEditScope:!1}),this.defineVmFunction({handle:T,key:"createNodeFromSvg",metricsKey:"figma.createNodeFromSvg",cb:t=>{let r=e.toString(t),n=x.Cj$.createNodeFromSvgForPlugin(r,x.zPy.TRACK);if(""===n)throw Error("Failed to convert SVG file");return this.nodeFactory.createNode(n,"figma.createNodeFromSvg")},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"importStyleByKeyAsync",metricsKey:"figma.importStyleByKeyAsync",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise(),a=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"});return e.registerPromise(tu(e,a,this.options.openFileKey)).then(({key:t,version:r})=>{let i=this.styleFactory.createStyle((0,K.Pe)({key:t,version:r}));if(e.isNull(i))throw Error("Unable to create style");n(i)},t=>{i(e.newString(`Failed to import style by key "${a}"`))}),r},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"importComponentByKeyAsync",metricsKey:"figma.importComponentByKeyAsync",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise(),a=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"});return e.registerPromise(th(a)).then(e=>n(this.nodeFactory.createNode(e,"figma.importComponentByKeyAsync"))).catch(t=>{i(e.newString(t.message))}),r},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"importComponentSetByKeyAsync",metricsKey:"figma.importComponentSetByKeyAsync",cb:t=>{let{promise:r,resolve:n,reject:i}=e.newPromise(),a=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"key"});return e.registerPromise(t_(a)).then(e=>n(this.nodeFactory.createNode(e,"figma.importComponentSetByKeyAsync"))).catch(t=>{i(e.newString(`Failed to import component set by key "${a}"`))}),r},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"closePlugin",metricsKey:"figma.closePlugin",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string.isOptional,zSchema:v.z.string().optional(),property:"closePlugin message"});return I>0&&l.u.warn("There are still font loads in progress. Please ensure `closePlugin` is not called until after the font loading has resolved."),r?this.closePlugin({message:r,isError:!1}):this.closePlugin(),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"notify",metricsKey:"figma.notify",cb:(t,r)=>{if(this.queryMode)throw Error("Cannot notify in queryMode.");let n=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"notify message"}),i=(0,ez.Sq)(r&&(0,ez.v1)({vm:e,handle:r,vmSchema:eB.yN.isOptional,zSchema:eX.Y.ShowVisualBellOptions.optional(),property:"notify options"})||{},{timeout:null,error:!1,button:void 0});null==i.timeout&&(i.timeout=i.error?1/0:3e3),i.timeout=Math.max(i.timeout,100);let a=null;i.button&&(a=(0,eC.xM)(i.button.action),e.retainHandle(a),i.button.action=()=>{if(!e.isDestroyed()){let t=e.callFunction(a,e.undefined);if("SUCCESS"===t.type){let r=e.deepUnwrap(t.handle);if("boolean"==typeof r)return r}}});let o=null;i.onDequeue&&(o=(0,eC.xM)(i.onDequeue),e.retainHandle(o));let l=`message-from-plugin-${this.visualBellCounter}`;return this.uiHandle.showPluginVisualBell(n,l,i,t=>{!e.isDestroyed()&&(o&&(e.callFunction(o,e.undefined,e.newString(t)),e.releaseHandle(o)),a&&e.releaseHandle(a))}),this.visualBellCounter++,function(e,t,r){let n=e.newObject();return e.defineFunction(n,"cancel","visualBellHandler.cancel",()=>(t.cancelPluginVisualBell(r),e.undefined)),n}(e,this.uiHandle,l)},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1});let O=tn;if(c&&(O=O.concat(ti)),this.options.isLocal||(O=O.concat(["codegen"])),(0,p.BZ)().plugins_incremental_loading_api&&(O=O.concat(["stylechange"])),this.addEventHandlersTo(T,O,"figma"),this.options.parameterValues?this.triggerOrScheduleRunEvent({command:"parameters",parameters:this.options.parameterValues}):this.options.deferRunEvent||this.triggerOrScheduleRunEvent({command:"parameters"}),(0,f.rm)()&&this.defineVmFunction({handle:T,key:"closePluginWithFailure",metricsKey:"figma.closePluginWithFailure",cb:t=>{let r;try{r=e.toString(t)}catch(e){r='The plugin called "closePluginWithFailure"'}return this.closePlugin({message:r,isError:!0}),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"showUI",metricsKey:"figma.showUI",cb:(t,r)=>{let n=ez.ng.exact({visible:ez.ng.bool.isOptional,title:ez.ng.string.isOptional,width:ez.ng.integer.min(0).isOptional,height:ez.ng.integer.min(0).isOptional,position:ez.ng.exact({x:ez.ng.float,y:ez.ng.float}).isOptional,themeColors:ez.ng.bool.isOptional}).isOptional,i=v.z.object({visible:v.z.boolean(),title:v.z.string(),width:eX.Y.FiniteNumber.min(0),height:eX.Y.FiniteNumber.min(0),position:v.z.object({x:eX.Y.FiniteNumber,y:eX.Y.FiniteNumber}),themeColors:v.z.boolean()}).partial().optional(),a=e.isObject(t)&&e.getBooleanProp(t,"__html__")&&this.options.html?this.options.html:(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"showUI"}),o=(0,ez.v1)({vm:e,handle:r,vmSchema:n,zSchema:i,property:"showUI options"}),l=(0,ez.Sq)(o||{},{visible:!0,themeColors:!1}),s=this.validateMakeIframeOptionsOrThrow(a,{visible:l.visible,title:l.title,width:l.width,height:l.height,position:l.position,themeColors:l.themeColors});return E.increment(`showUI.${l.visible?"visible":"invisible"}`),l.themeColors&&E.increment("showUI.themeColors"),this.uiHandle.makeIframe(s),l.visible&&this.uiHandle.showIframe(),E.markTime("timeToShowUIMs"),e.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"saveVersionHistoryAsync",metricsKey:"figma.saveVersionHistoryAsync",cb:(t,r)=>{let n=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"saveVersionHistoryAsync"}),i=(0,ez.v1)({vm:e,handle:r,vmSchema:ez.ng.string.isOptional,zSchema:v.z.string().optional(),property:"saveVersionHistoryAsync"})||"",{promise:a,resolve:o,reject:l}=e.newPromise();return e.registerPromise(tc(n,i)).then(t=>{let r=e.newObject();e.setProp(r,"id",e.newString(t.id)),e.shallowFreezeObject(r),o(r)},t=>l(e.newString(`Failed to save version history. Error: ${t.message}`))),a},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"base64Encode",metricsKey:"figma.base64Encode",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.uint8Array,zSchema:eX.Y.UInt8Array,property:"base64Encode"});return e.deepWrap((0,o.cv)(r))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"base64Decode",metricsKey:"figma.base64Decode",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"base64Decode"});if(!(0,o.Gu)(r))throw Error("Invalid base64 string");return e.deepWrap((0,o.Jx)(r))},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmIncrementalFunction({handle:T,key:"getFileThumbnailNode",metricsKey:"figma.getFileThumbnailNode",incrementalSafeApiKey:"getFileThumbnailNodeAsync",incrementalSafeApiMetricsKey:"figma.getFileThumbnailNodeAsync",prepareDocument:async e=>{e&&await (0,eL.wG)(e,this.documentAccessState)},parseArg:e=>{let t=d.V.getState(),r=(0,$.RB)(t);return r?null==r?void 0:r.thumbnailGuid:null},resolveValue:t=>t&&this.privateSceneGraph.get(t)?this.nodeFactory.createNode(t,"getFileThumbnailNode"):e.null,incrementalSafeApi:this.options.incrementalSafeApi,isAllowedInReadOnly:!0,hasEditScope:!1}),this.defineVmFunction({handle:T,key:"setFileThumbnailNodeAsync",metricsKey:"figma.setFileThumbnailNodeAsync",cb:t=>{var r;let n;let i=d.V.getState(),a=null==(r=i.openFile)?void 0:r.key;if(null==a)throw Error("File must be open for editing");if(e.isNull(t))n=null;else{let e=this.getNode(t),r=("FRAME"===e.type||"SYMBOL"===e.type||"SECTION"===e.type)&&!e.resizeToFit;if(!r)throw Error("Thumbnail node must be a FrameNode, ComponentNode, ComponentSetNode, or SectionNode");n=e.guid}let{promise:o,resolve:l,reject:s}=e.newPromise();return e.registerPromise((0,C.zN)(a,n)).then(()=>{l(e.undefined)}).catch(t=>{s(e.newString(`Failed to set thumbnail guid. Error: ${t.message}`))}),o},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmProp({handle:T,key:"parameters",options:{enumerable:!1,value:this.createParametersApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"codegen",options:{enumerable:!1,get:(0,eC.Y2)(e,()=>this.createCodegenApi())},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"relatedLinks",options:{enumerable:!1,get:(0,eC.Y2)(e,()=>{if(this.options.isLocal)throw Error("relatedLinks API is not available for local plugins. Please use the figma.devResources API instead.");return this.createDevResourcesApi()})},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"devResources",options:{enumerable:!1,get:()=>this.createDevResourcesApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"vscode",options:{enumerable:!1,value:this.createVsCodeApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"ui",options:{enumerable:!1,value:this.createUiApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"viewport",options:{enumerable:!1,value:this.createViewportApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"clientStorage",options:{enumerable:!1,value:this.createClientStorageApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineVmProp({handle:T,key:"constants",options:{enumerable:!1,value:this.createConstantsApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!0,hasEditScope:!1}),(0,p.BZ)().internal_only_debug_tools&&this.defineVmProp({handle:T,key:"internal",options:{enumerable:!1,value:this.createInternalApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),!S){let t="createLinkPreviewAsync",r=this;this.defineVmFunction({handle:T,key:t,metricsKey:"figma.createLinkPreviewAsync",cb:n=>{let i=(0,ez.v1)({vm:e,handle:n,vmSchema:ez.ng.string,zSchema:v.z.string(),property:t}),{promise:a,resolve:o,reject:l}=e.newPromise();return e.registerPromise(td(this.privateSceneGraph,i)).then(e=>{(0,eL.x0)(e,this.documentAccessState),r.editScope(t,()=>o(this.nodeFactory.createNode(e,"figma.createLinkPreviewAsync")))},t=>l(e.newString(`Failed to create an embed. Error: ${t.message}`))),a},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1})}function A(e,t,r){let n=t.deepUnwrap(e,!0),i=(0,e4.P_)(n,{isLocalWidget:!1,widgetNodeID:"",pluginID:r.pluginID,widgetVersionID:r.pluginVersionID,widgetName:"",widgetApiVersion:"1.0.0",enableFullJsx:!0});return i}(!S||(0,f.rm)())&&this.defineVmFunction({handle:T,key:"createGif",metricsKey:"figma.createGif",cb:t=>{let r=(0,ez.v1)({vm:e,handle:t,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"createGif"}),n=x.iTB.createRichMediaGifNode(r);if(!n)throw Error("Failed to create GIF");let i=[],a={data:(0,eF.qt)(this.imageStore,this.videoStore,[{type:"IMAGE",scaleMode:"FILL",imageHash:r}],i),blobs:i},o=this.privateSceneGraph.get(n);if(null==o)throw Error("Failed to create GIF");return o.fillPaints=a,(0,eL.x0)(n,this.documentAccessState),this.nodeFactory.createNode(n,"figma.createGif")},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),S&&(0,p.BZ)().plugins_component_from_node&&this.defineVmFunction({handle:T,key:"createComponentFromNode",metricsKey:"figma.createComponentFromNode",cb:e=>{let t=this.privateSceneGraph.createComponentFromNode(this.getNode(e).guid);return this.nodeFactory.createNode(t.guid,"figma.createComponentFromNode")},isAllowedInReadOnly:!1,hasEditScope:!0}),this.isWidget?this.defineWidgetApi(T):this.defineWidgetLiteApi(T),(0,p.BZ)().ext_full_jsx&&this.defineVmFunction({handle:T,key:"reconcileNodeFromJSXAsync",metricsKey:"figma.reconcileNodeFromJSXAsync",cb:(t,r,n)=>{let i=e.deepUnwrap(t,!0),a=A(r,e,this.options),o=A(n,e,this.options),{runtimeBridge:l,shutdownCallback:s}=tl.createRuntimeBridgeForWidgetReconciler(this.options.pluginID,this.vm,this.ignoreEditActionsScope);s&&this.options.addShutdownAction(s);let c=(0,e8.dY)(()=>({rootNode:a,syncedState:{}}),l,this.options.allowedDomains),d=(0,e8.dY)(()=>({rootNode:o,syncedState:{}}),l,this.options.allowedDomains),{promise:u,resolve:p,reject:m}=e.newPromise();return e.registerPromise((async()=>{try{let[e,t]=await Promise.all([c,d]),r=this.privateSceneGraph.getCurrentPage(),n=(0,e6.oS)({vNode:t.vRoot.rootNode,oldVNode:e.vRoot.rootNode,imgInfoMap:t.imgInfoMap,runtime:l,parentId:r.guid,currentNodeId:i.id,editScopeLabel:"reconcile-node-from-jsx"}),a=this.nodeFactory.createNode(n.getID(),"figma.reconcileNodeFromJSXAsync");p(a)}catch(t){m(e.newString(t.message))}})()),u},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmFunction({handle:T,key:"createNodeFromJSXAsync",metricsKey:"figma.createNodeFromJSXAsync",cb:t=>{let r=this.vm.deepUnwrap(t,!0),n=(0,e4.P_)(r,{isLocalWidget:!1,widgetNodeID:"",pluginID:this.options.pluginID,widgetVersionID:this.options.pluginVersionID,widgetName:"",widgetApiVersion:"1.0.0",enableFullJsx:!0}),{runtimeBridge:i,shutdownCallback:a}=tl.createRuntimeBridgeForWidgetReconciler(this.options.pluginID,this.vm,this.ignoreEditActionsScope);a&&this.options.addShutdownAction(a);let o=(0,e8.dY)(()=>({rootNode:n,syncedState:{}}),i,this.options.allowedDomains).then(e=>{let t=this.privateSceneGraph.getCurrentPage(),r=(0,e6.oS)({vNode:e.vRoot.rootNode,imgInfoMap:e.imgInfoMap,runtime:i,parentId:t.guid,editScopeLabel:"create-node-from-jsx"}),n=r.getID();return n}),{promise:l,resolve:s,reject:c}=e.newPromise();return e.registerPromise(o).then(e=>{s(this.nodeFactory.createNode(e,"figma.createNodeFromJSXAsync"))}).catch(t=>c(e.newString(t.message))),l},isAllowedInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!0}),this.defineVmProp({handle:T,key:"util",options:{enumerable:!1,metricsKey:"figma.util",value:this.createUtilApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!0,hasEditScope:!1}),this.options.capabilities.some(e=>"textreview"===e)&&this.defineVmProp({handle:T,key:"textreview",options:{enumerable:!1,value:this.createTextReviewApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.defineInternalApis(T),(!S||(0,f.rm)())&&this.defineVmProp({handle:T,key:"timer",options:{enumerable:!1,value:this.createTimerApi()},canWriteInReadOnly:!1,isAllowedInWidgetRender:!1,hasEditScope:!1}),this.options.validatedPermissions.permissions.includes("displaycapture")&&this.defineVmFunction({handle:T,key:"getDisplayMetadataAsync",metricsKey:"figma.getDisplayMetadataAsync",cb:t=>{if(!s.YO){let{promise:t,resolve:r}=e.newPromise();return r(e.null),t}let r=(0,ez.v1)({vm:e,handle:t,vmSchema:eB.$u.isOptional,zSchema:eX.Y.Size.optional(),property:"thumbnailSize"})??{width:150,height:150},n=s.YO.getDisplayMetadata(r),{promise:i,resolve:a,reject:o}=e.newPromise();return e.registerPromise(n).then(t=>a(e.deepWrap(t)),t=>o(e.newString("Failed to get display metadata"))),i},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),(this.options.validatedPermissions.permissions.includes("openexternal")||(0,p.BZ)().ext_vscode_plugins)&&this.defineVmFunction({handle:T,key:"openExternal",metricsKey:"figma.openExternal",cb:e=>{let t=(0,ez.v1)({vm:this.vm,handle:e,vmSchema:ez.ng.string,zSchema:v.z.string(),property:"url"});return(0,Z.I)()?(0,eo.q0)(t):u.default.unsafeRedirect(t,"_blank"),this.vm.undefined},isAllowedInReadOnly:!0,isAllowedInWidgetRender:!1,hasEditScope:!1}),function(e){let{vm:t,figmaApi:r,openFileKey:n,pluginID:i}=e,a=(0,p.Gm)().zeplin_plugin_id;a&&i===a&&t.defineFunction(r,"infoForZeplinExportAsync","figma.infoForZeplinExportAsync",()=>{let{promise:e,resolve:r,reject:i}=t.newPromise();return n?r(t.deepWrap({fileKey:n})):i(t.newString("Failed to get the fileKey")),e}),i&&(i===(0,p.Gm)().avocode_plugin_id||i===(0,p.Gm)().avocode_markup_plugin_id)&&t.defineFunction(r,"infoForAvocodeExportAsync","figma.infoForAvocodeExportAsync",()=>{let{promise:e,resolve:r,reject:i}=t.newPromise();return(0,V.K)(n).then(({token:e})=>r(t.deepWrap({token:e})),e=>{i(t.newString("Failed to generate Avocode export information"))}),e})}({vm:e,figmaApi:T,openFileKey:this.options.openFileKey,pluginID:n}),e.shallowFreezeObject(T)}async closePlugin(e){"close"!==this.runningSyncEvent&&(await this.options.closePlugin(e),"codegen"===this.options.triggeredFrom&&setTimeout(()=>(0,ep.f)(),0))}static createRuntimeBridgeForWidgetReconciler(e,t,r){if(t instanceof eD.i)return{runtimeBridge:new ef.p(e,t,r),shutdownCallback:void 0};let{vm:n,api:i}=ty({type:"WIDGET_RECONCILER"});return{runtimeBridge:new ef.p(e,n,i.ignoreEditActionsScope),shutdownCallback:()=>i.closePlugin()}}}async function ts(){let e=d.V.getState(),t=e.fonts,r=[];for(let e in t){let n=new Set,i=t[e];for(let t in i){let a=i[t];for(let t in a.styles)n.has(t)||(n.add(t),r.push({fontName:{family:e,style:t}}))}}return r.sort((e,t)=>e.fontName.family>t.fontName.family?1:e.fontName.family<t.fontName.family?-1:e.fontName.style>t.fontName.style?1:e.fontName.style<t.fontName.style?-1:0),r}async function tc(e,t){let r=await F.Gr.openFileKeyPromise();if(!r)throw Error("File must be open for editing");if(!e)throw Error("Version title must be non-empty");let n=await (0,en.K)(r,e,t,d.V.dispatch);if(null===n)throw Error("createSavepoint() returned null");return n}async function td(e,t){let r=(0,c.w1)(t);if(!r||r.isFromIFrame)throw Error("The provided text was not a URL");let n=await (0,S.BT)(t,r.url,r.isFromIFrame,M._F.PLUGIN,d.V.getState());if("error"===n.status)throw Error(n.error);if(n.nodeID&&e.get(n.nodeID))return n.nodeID;throw Error("Could not find the created link preview in the documnet")}async function tu(e,t,r){let n;let i=d.V,a=i.getState(),o=(0,q.HL)(t,a.library.used__LIVEGRAPH.styles,a.library.openFilePublished__LIVEGRAPH.styles)||await (0,O.qL)(i,t);if(!o)throw Error(`Could not find a published style with the key "${t}"`);if(o.file_key===r)return{key:(0,b.hx)(o.key),version:(0,b.IT)(o.content_hash)??b.IT.INVALID};try{n=await k.uK.getCanvas(o)}catch{throw Error(`Failed to download the style with the key "${t}"`)}let l=U.y2.system("upsert-shared-style-plugin",()=>x.Ekn.getOrCreateSubscribedStyleNodeId(o.key,o.content_hash??b.IT.INVALID,o.file_key,n));if(null==l?void 0:l.fileUpdateRequired)throw Error("Can't insert style of a different file version");return i.dispatch(C.Ws({fileKeys:[o.file_key]})),{key:(0,b.hx)(l.key),version:(0,b.IT)(l.version)}}async function tp(e,t){let r=e.node_id;if(e.file_key!==t){let t;try{t=await k.uK.getCanvas(e)}catch{throw Error(`Failed to download the component with the key "${e.component_key}"`)}let n=U.y2.system("upsert-shared-symbol-plugin",()=>x.Ekn.upsertSharedSymbol(e.component_key??b.lG.INVALID,e.content_hash??b.Dl.INVALID,e.file_key,x.e9h.NO,t,x.Glg.ACTIVE_SCENE));if(n.fileUpdateRequired)throw Error("Can't insert component of a different file version");r=n.localGUID}return r}async function tm(e,t){let r=e.node_id;if(e.file_key!==t){let t;try{t=await k.uK.getCanvas(e)}catch{throw Error(`Failed to download the component set with the key "${e.key}"`)}let n=U.y2.system("upsert-shared-state-group-plugin",()=>x.Ekn.upsertSharedStateGroup(e.key,e.version,e.file_key,x.e9h.NO,t,x.Glg.ACTIVE_SCENE));if(n.fileUpdateRequired)throw Error("Can't insert state group of a different file version");r=n.localGUID}return r}async function th(e,t=W.b.instance){var r,n,i;let a=d.V,o=a.getState(),l=(0,L.bC)(o);if(!l)throw Error("Missing a current file");let s=null,c=null,u=o.library.published,m=o.library.movedLibraryItems.subscribed[e]||e;if((0,q.tD)(u.components,(e,t,r)=>{var n,i;let a=u.components[e][t][r];if(a.component_key===m){s=a;let r=null==(i=null==(n=a.containing_frame)?void 0:n.containingStateGroup)?void 0:i.nodeId;r&&(c=u.stateGroups[e][t][r])}}),(0,p.BZ)().ds_block_unpublished_symbol_reqs&&!s)for(let t of Object.values(o.library.local.components)){if(t.component_key)continue;let r=x.dCf.getAssetKeyForPublish(t.node_id);if(r===e)throw Error(`Cannot import component with key "${e}" since it is unpublished`)}if(!s&&({component:s,parentStateGroup:c}=await (0,O.t_)(a,m,"importComponentByKeyAsync"),!s))throw Error(`Could not find a published component with the key "${e}"`);if(null==(n=null==(r=s.containing_frame)?void 0:r.containingStateGroup)||!n.nodeId||null==c||!c.key)return a.dispatch(C.Ws({fileKeys:[s.file_key]})),await tp(s,l.key);{let r=await t_(c.key);for(let e of(null==(i=t.get(r))?void 0:i.reversedChildrenGuids)||[]){let r=t.get(e);if(r&&r.componentKey===s.component_key)return r.guid}throw Error(`Could not find a published component set with the key "${e}"`)}}async function t_(e){let t=d.V,r=t.getState(),n=(0,L.bC)(r);if(!n)throw Error("Missing a current file");let i=null,a=r.library.published.stateGroups,o=r.library.movedLibraryItems.subscribed[e]||e;if((0,q.tD)(a,(e,t,r)=>{let n=a[e][t][r];n.key===o&&(i=n)}),!i&&!(i=await (0,O.ys)(t,o)))throw Error(`Could not find a published component set with the key "${e}"`);return t.dispatch(C.Ws({fileKeys:[i.file_key]})),await tm(i,n.key)}function tg(e){var t;return(null==(t=(e??W.b.instance).getCurrentPage())?void 0:t.directlySelectedNodes)||[]}function tf(e){let t={};for(let r in e){let n=e[r];n&&(t[r]=void 0!==n.data?n.data:n.name)}return t}function tE(){var e,t;return{stats:new eg.F,name:"",command:"",pluginID:"",pluginVersionID:"",queryMode:!1,userID:(null==(e=d.V.getState().user)?void 0:e.id)||"",titleIconURL:"",openFileKey:(null==(t=d.V.getState().openFile)?void 0:t.key)||"",apiVersion:Q.i_,apiMode:{type:"GLOBAL_API"},enableProposedApi:!0,enablePrivatePluginApi:!0,deferRunEvent:!1,validatedPermissions:ee.dx.forConsoleGlobal(),isLocal:!0,capabilities:[],allowedDomains:eW.mh,editorType:[ed.IP.FIGMA,ed.IP.FIGJAM,ed.IP.INSPECT,ed.IP.DEV],html:null,incrementalSafeApi:!1}}function ty(e){let{addShutdownAction:t,closePlugin:r,noOpVm:n}=(0,eC.xB)(),i=new tl(n,{...tE(),apiMode:e,closePlugin:r,addShutdownAction:t});return i.createAPI(),{vm:n,api:i}}function tv(e,t={}){let r=(null==t?void 0:t.isWidget)?"https://www.figma.com/widget-docs/widget-manifest/#permissions":"https://www.figma.com/plugin-docs/manifest/#permissions";return`"${e}" permission not specified in manifest.json. Add the following to your manifest.json: "permissions": ["${e}"]. See ${r} for more details.`}},608715:(e,t,r)=>{r.d(t,{Sd:()=>c.Sd,by:()=>a.b,hB:()=>s.h,im:()=>i.im,mh:()=>c.mh,qu:()=>n.q,uk:()=>o.u,v:()=>c.v,wT:()=>l.w,zj:()=>i.zj});var n=r(89947),i=r(221529),a=r(731668),o=r(356175),l=r(953674),s=r(302044),c=r(424045)},158451:(e,t,r)=>{r.d(t,{Pc:()=>V,rd:()=>G,rg:()=>H});var n=r(652983),i=r(407908),a=r(807012),o=r(357768),l=r(337167),s=r(669277),c=r(217810),d=r(31642),u=r(38987),p=r(399503),m=r(996544),h=r(255215),_=r(300174),g=r(864974),f=r(298715),E=r(883945),y=r(640723),v=r(200273),b=r(322186),I=r(70918),T=r(761767),w=r(862610),S=r(339531),C=r(356268),O=r(668849),A=r(260572),N=r(450787),L=r(425285),P=r(128839),R=r(46347),k=r(716250),D=r(961215);let M={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:T.QC.PIXEL,scaleFactor:null},behavior:T.LX.INHERIT};class F{constructor(e,t,r){if(this.workingPreferences=e,this.parentPreferences=t,this.parentEnabledPreferences=r,!t||!r)return;let{codegenEnabled:n,pinnedPluginsEnabled:i}={...r},a={...t};!n&&(0,k.BZ)().dev_mode_default_codegen&&(a.codegenSettings=null),!i&&(0,k.BZ)().dev_mode_org_pinned_plugins_ent&&(a.pins=[],a.removedInheritedPins=[]),this.parentPreferences=a}orgPinsNotInUserPins(){var e;let t=[];for(let r of(null==(e=this.parentPreferences)?void 0:e.pins)??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||t.push(r);return t}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],t=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!t.has(e.pluginId)&&(!e.inherited||x(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){var e,t;return this.parentPreferences&&(null==(e=this.workingPreferences.codegenSettings)?void 0:e.behavior)!==T.LX.OVERRIDE?(null==(t=this.parentPreferences)?void 0:t.codegenSettings)??null:this.workingPreferences.codegenSettings}update(e){return new F((0,P.ZP)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var t;let r=null==(t=this.workingPreferences)?void 0:t.pins.findIndex(t=>t.pluginId===e&&t.inherited);return null!=r&&-1!==r?this.update(t=>{t.pins[r].inherited=!1,t.removedInheritedPins=t.removedInheritedPins.filter(t=>t!==e)}):x(this.workingPreferences,e)?this:this.update(t=>{t.pins.push({pluginId:e,inherited:!1}),t.removedInheritedPins=t.removedInheritedPins.filter(t=>t!==e)})}unpinPlugin(e){return this.update(t=>{t.pins=t.pins.filter(t=>t.pluginId!==e),x(this.parentPreferences,e)&&t.removedInheritedPins.push(e)})}movePin(e,t){return"after"===t.type&&e===t.id||"begin"===t.type&&this.pinnedPluginIDs[0]===e?this:this.update(r=>{let n=x(this.workingPreferences,e),i=x(this.parentPreferences,e),a=!!(!n&&i);switch(r.pins=r.pins.filter(t=>t.pluginId!==e),t.type){case"begin":r.pins.unshift({pluginId:e,inherited:a});break;case"after":{let n=r.pins.findIndex(e=>e.pluginId===t.id);if(-1!==n)r.pins.splice(n+1,0,{pluginId:e,inherited:a});else{let n=this.orgPinsNotInUserPins(),i=n.findIndex(e=>e.pluginId===t.id);if(-1===i)throw Error("Invalid pin to move after");r.pins.push(...n.slice(0,i+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:a})}}}})}get localCodegenSettings(){var e;if(!this.codegenSettings)return null;let t=null==(e=this.codegenSettings)?void 0:e.language,r=this.lgLanguageToLocalLanguage(t);if(!r)return null;let n=this.codegenSettings.preferences,i=this.lgUnitToLocalUnit(n.unit),a={scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:i};return{language:r,preferences:a,behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(t=>{var r,n;let i=this.localLanguageTypeToLgLanguageType(e.type);if(!i)throw Error("Invalid language type");let a={...e,type:i,pluginLanguage:e.pluginLanguage??null};t.codegenSettings={language:a,preferences:(null==(r=this.codegenSettings)?void 0:r.preferences)||M.preferences,behavior:(null==(n=this.codegenSettings)?void 0:n.behavior)||M.behavior}})}setCodegenSettingUnit(e){return this.update(t=>{if(!this.codegenSettings)return;let r=this.localUnitToLgUnit(e);if(!r)throw Error("Invalid unit");let n=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:r}:{scaleFactor:null,unit:r,customSettings:null};t.codegenSettings={language:this.codegenSettings.language,preferences:n,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,t){return this.update(r=>{var n,i,a;if(!this.codegenSettings)return;let o=this.localLanguageTypeToLgLanguageType(e.type);if(!o)throw Error("Invalid language type");let l={...e,type:o,pluginLanguage:e.pluginLanguage??null},s={scaleFactor:(null==(n=this.codegenSettings.preferences)?void 0:n.scaleFactor)??null,unit:(null==(i=this.codegenSettings.preferences)?void 0:i.unit)??null,customSettings:{...null==(a=this.codegenSettings.preferences)?void 0:a.customSettings,...t.customSettings}};r.codegenSettings={language:l,preferences:s,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(t=>{if(!e){t.codegenSettings=null;return}let{behavior:r,language:n,preferences:i}=e,a=this.localLanguageTypeToLgLanguageType(n.type);if(!a)throw Error("Invalid language type");let o={...n,type:a,pluginLanguage:n.pluginLanguage??null},l=this.localUnitToLgUnit(i.unit),s={unit:l,customSettings:i.customSettings??null,scaleFactor:i.scaleFactor??null};t.codegenSettings={behavior:r,language:o,preferences:s}})}localUnitToLgUnit(e){switch(e){case D.QC6.PIXEL:return T.QC.PIXEL;case D.QC6.SCALED:return T.QC.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case T.QC.PIXEL:return D.QC6.PIXEL;case T.QC.SCALED:return D.QC6.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return T.dJ.FIRST_PARTY;case"published-plugin":return T.dJ.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let t;switch(e.type){case T.dJ.FIRST_PARTY:t={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case T.dJ.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;t={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,R.vE)(e.type)}return t}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function x(e,t){return null==e?void 0:e.pins.some(e=>e.pluginId===t)}let U={pins:[],removedInheritedPins:[],codegenSettings:null},B={...U,codegenSettings:{language:{id:E.PB.CSS,type:T.dJ.FIRST_PARTY,pluginLanguage:null},preferences:{customSettings:null,unit:T.QC.PIXEL,scaleFactor:null},behavior:T.LX.INHERIT}};function V(){let{loaded:e,preferences:t}=function(){let e=(0,I.dO)(),t=(0,s.mU)(w.PluginPreferencesView,{targetOrgId:null,targetUserId:e}),{loaded:r,preferences:n}=z(t);return{loaded:r,preferences:n}}(),{loaded:r,preferences:o,codegenEnabled:l,pinnedPluginsEnabled:d}=K(),h=(0,i.I0)(),_=(0,a.Pe)(),E=(0,O.A2)(),y=(0,p.ug)(),v=E&&!y;(0,n.useEffect)(()=>{t&&S(null)},[t]);let b=(0,n.useMemo)(()=>new F(t??U,o??null,{codegenEnabled:l,pinnedPluginsEnabled:d}),[t,o,l,d]),[T,S]=(0,n.useState)(null),C=(0,n.useMemo)(()=>{let e=new Map,r=[...(null==t?void 0:t.pins)??[],...(null==o?void 0:o.pins)??[]];for(let t of r)t.plugin&&e.set(t.pluginId,t.plugin);return e},[null==o?void 0:o.pins,null==t?void 0:t.pins]),A=(0,n.useMemo)(()=>(null==T?void 0:T.pinnedPluginIDs)??b.pinnedPluginIDs,[b,T]),N=(0,i.v9)(e=>e.currentUserOrgId),L=(0,I.dO)(),P=(0,f.X7)(),R=(0,n.useMemo)(()=>A.map(e=>{let t=C.get(e);if(!t||!t.publishingStatus||t.publishingStatus!==u.UG.APPROVED_PUBLIC&&t.publishingStatus!==u.UG.ORG_PRIVATE)return null;let r=(0,f.yv)(t,N,L,null);return r&&(v||P(r))?r:null}).filter(c.lm),[A,C,N,L,v,P]),k=e=>{S(e),W(e.serialize()).catch(()=>{S(null)})};return{pinnedPlugins:R,unpinPlugin(e){k(b.unpinPlugin(e)),_("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){h(g.v({[m.GC]:!0})),k(b.pinPlugin(e)),_("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,t){k(b.movePin(e,t)),_("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:b.localCodegenSettings,setCodegenSettings(e){k(b.setCodegenSetting(e))},setCodegenSettingsLanguage(e){k(b.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){k(b.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,t){k(b.setCodegenSettingCustomSettings(e,t))},loaded:e&&r}}function G(){let{loaded:e,preferences:t}=K(),[r,i]=(0,n.useState)(!1),[o,s]=(0,n.useState)(new F({...B,codegenSettings:null},null,null)),c=(0,a.EA)(),[d,u]=(0,l.KO)(A.J),p=(0,n.useCallback)(e=>{var t;s(e),u((null==(t=e.localCodegenSettings)?void 0:t.language)??null)},[u]);(0,n.useEffect)(()=>{if(e){if(null!=t){let e=new F({...t,codegenSettings:t.codegenSettings??B.codegenSettings},null,null);p(e)}i(!0)}},[t,e,u,p]);let m=(0,n.useMemo)(()=>(null==o?void 0:o.pinnedPluginIDs)??[],[o]),h=(0,f.Ag)(m,{enabled:!0});return{pinnedPlugins:h,unpinPlugin(e){p(o.unpinPlugin(e)),c("Dev Handoff Org Unpin Plugin",{pluginID:e})},pinPlugin(e){p(o.pinPlugin(e)),c("Dev Handoff Org Pin Plugin",{pluginID:e})},movePin(e,t){p(o.movePin(e,t)),c("Dev Handoff Org Move Plugin",{pluginID:e})},localCodegenSettings:o.localCodegenSettings,setCodegenSettings(e){p(o.setCodegenSetting(e)),c("Dev Handoff Org Set codegenSettings",{codeLanguage:null==e?void 0:e.language.id})},setCodegenSettingsLanguage(e){p(o.setCodegenSettingLanguage(e)),c("Dev Handoff Org Set codegenSettingsLanguage",{codeLanguage:e.id})},setCodegenSettingsUnit(e){p(o.setCodegenSettingUnit(e)),c("Dev Handoff Org Set codegenSettings Unit in preferences",{unit:e})},setCodegenSettingsCustomSettings(e,t){p(o.setCodegenSettingCustomSettings(e,t))},serialize:()=>o.serialize(),updatePrefs(e){let t=e.map(e=>({pluginId:e.plugin_id,inherited:!1})),r={pins:t,removedInheritedPins:[],codegenSettings:o.codegenSettings};s(new F(r,null,null))},loaded:r}}function H(){let e;let[t,r]=(0,n.useState)(!1),{localCodegenSettings:a,loaded:s}=V(),{loaded:c,plugin:d}=function(){let e=(0,v.uC)(),t=(0,l.Dv)(o.v),r=(0,i.v9)(e=>e.figFileDuplicatedFromHubFile),a=(0,n.useMemo)(()=>{if(!e)return null;let t=r[e];return t&&t.hubFileId?(0,C.CV)(t.hubFileId):null},[r,e]),s=!!a,c=(0,f.OF)(a??"",s);return t?a&&s?c:{loaded:!0,plugin:null}:{loaded:!1,plugin:null}}(),u=(0,_.kP)(),p=(0,N.V)("community_hub_file"),m=(0,L.yD)(),g=null==a?void 0:a.language,E=(null==g?void 0:g.type)==="published-plugin"&&s,b=(0,f.OF)((null==g?void 0:g.id)??"",E);if(!t){if(c&&d){if(!(0,S.Uo)(d)||!(e=(0,h.Ep)(d)))return;"design"===m&&p("handoff")}else if(E&&b.loaded&&a){if((null==g?void 0:g.type)==="published-plugin"&&!b.plugin||b.plugin&&!(0,S.Uo)(b.plugin))return;e=g}else(null==a?void 0:a.language.type)==="first-party"&&(e=g);e&&(!d&&a&&u(e,b.plugin??null,a.preferences),(0,y.KQ)(e),r(!0))}}async function W(e){await d.ZP.post("/api/plugin_preferences/user",{preferences:e})}function K(){let e=(0,b.Ng)(),t=(0,s.mU)(w.PluginPreferencesView,{targetOrgId:(null==e?void 0:e.id)??null,targetUserId:null});return z(t)}function z(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let t=e.data.pluginPreferences,{codegenEnabled:r,pinnedPluginsEnabled:n}=t||{};return{loaded:!0,preferences:null==t?void 0:t.preferences,codegenEnabled:r??!1,pinnedPluginsEnabled:n??!1}}},864357:(e,t,r)=>{r.d(t,{Cw:()=>l,Hk:()=>d,OW:()=>s,Oe:()=>o,UA:()=>c,VP:()=>a});var n=r(48518),i=r(315100);function a(e,t){let r=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);if(e.tokens.some(e=>e.state===i.k.ERROR)&&(r=!1),e.inputValue&&e.inputValue.length){let n=t(e.inputValue);n.state===i.k.ERROR&&(r=!1)}return r}function o(e){let t=[];for(let r of e.tokens)t.push(r.content.toLowerCase());return e.inputValue&&t.push(e.inputValue.toLowerCase()),t}function l(e){let t=[];for(let r of e.tokens)t.push(r.content.toLowerCase());return t}function s(e){let t=[];for(let r of e.tokens){let e="string"==typeof r.content?r.content:r.content.email;t.push(e.toLowerCase())}return e.inputValue&&t.push(e.inputValue.toLowerCase()),t}function c(){return{inputValue:"",tokens:[],errorMessage:""}}function d(e=c(),t){return n.mc.matches(t)?c():n.t8.matches(t)?{...t.payload}:n.oL.matches(t)?{...e,tokens:e.tokens.concat(t.payload),inputValue:""}:n.Y9.matches(t)?{...e,inputValue:t.payload}:n.uH.matches(t)?{...e,errorMessage:t.payload}:e}},605508:(e,t,r)=>{r.d(t,{Dh:()=>d,JE:()=>E,JT:()=>v,K2:()=>S,Kk:()=>m,Wx:()=>g,bQ:()=>w,iA:()=>_,j$:()=>b,jA:()=>T,jM:()=>u,mH:()=>h,mg:()=>y,rA:()=>C,re:()=>f,u2:()=>c,vD:()=>p});var n=r(716250),i=r(571529),a=r(111120),o=r(280251),l=r(961215),s=r(321909);function c(e,t){return!e&&!t||e===t}function d(e,t){return!e&&!t||!!e&&!!t&&e.pageId==t.pageId}function u(e,t){return!e&&!t||!!e&&!!t&&e.nodeId==t.nodeId}function p(e,t){let r=e?e.nodeId:void 0,n=e?e.name:void 0,i=e?e.backgroundColor:void 0,a=e?e.pageId:void 0,o=t?t.nodeId:void 0,l=t?t.name:void 0,s=t?t.backgroundColor:void 0,d=t?t.pageId:void 0;return(r!==o||n!==l||i!==s||!!a||!d)&&!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;for(let r of["nodeId","name","backgroundColor","pageName","pageId","containingStateGroup"])switch(r){case"nodeId":case"name":case"backgroundColor":case"pageName":case"pageId":if(!c(e[r],t[r]))return!1;break;case"containingStateGroup":if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;for(let r of["nodeId","name"])if(!c(e[r],t[r]))return!1;return!0}(e[r],t[r]))return!1}return!0}(e,t)}function m(e={...s.wj},t){return a.S1.matches(t)?s.wj:(o.h9.matches(t)&&t.payload.appModelChanges&&-1===(e={...e,...t.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:l.kZC.COLOR}),e)}let h="fullscreen-menu-dropdown",_=e=>(null==e?void 0:e.type)===h,g="page-picker-dropdown",f=e=>(null==e?void 0:e.type)===g,E="quick-actions-dropdown",y=e=>(null==e?void 0:e.type)===E,v="quick-actions-component-search-dropdown",b=e=>!!(0,n.BZ)().dse_quick_action_comp_search&&(null==e?void 0:e.type)===v,I=Object.create(null),T=(e,t)=>!!e[function(e){let t=I[e];return t||(t=I[e]=`actionEnabled__${e}`),t}(t)];function w(e,t){switch(t){case"set-tool-bend":return i.ZP.mac?"\u2318":"Ctrl";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return i.ZP.mac?"\u23252":"Alt+2";case"toggle-inline-preview":return"\u21E7Space";case"toggle-inline-html-preview":return"\u2325\u21E7Space";case"deselect-all":return"\u238B"}if(e[t]){let r=e[t];if(r&&r.length>=1)return r[0].text}return""}function S(e,t){if(e[t]){let r=e[t];if(r&&r.length>=1)return r[0].originalText}return""}function C(e){return e&&e.currentPage?e.currentPage:"0:1"}},673541:(e,t,r)=>{r.d(t,{e:()=>u,j:()=>s});var n=r(111120),i=r(280251),a=r(184203),o=r(424479),l=r(653696);let s="not implemented",c=(...e)=>{throw Error(s)},d={scene:0,get:()=>null,getFromStablePath:()=>null,guidFromDeveloperFriendlyId:()=>"",developerFriendlyIdFromGuid:()=>"",getRoot:c,createNode:c,getCurrentPage:c,setCurrentPageAsync:c,setCurrentPageFromNodeAsync:c,getInternalCanvas:c,onChange:c,onAdd:c,onDelete:c,triggerChange:c,triggerAddCallbacks:c,triggerDeleteCallbacks:c};function u(e=d,t){return n.S1.matches(t)||a.x.matches(t)?((0,l.fU)(),d):i.h9.matches(t)&&t.payload.invalidateSceneGraph?((0,l.Rd)(),new o.TSSceneGraph):e}},60908:(e,t,r)=>{r.d(t,{Br:()=>u,G$:()=>d,VL:()=>p,Wr:()=>c,dU:()=>m,ld:()=>s});var n=r(46347),i=r(111120),a=r(280251),o=r(184203),l=r(641052);function s(e=Object.create(null),t){if(i.S1.matches(t)||o.x.matches(t))return Object.create(null);if(a.h9.matches(t)&&t.payload.selection){let{add:r,remove:i,replace:a}=t.payload.selection;if((0,n.q8)(!((r||i)&&a),"We expect either an add or remove OR a replace."),a)return a;let o=Object.assign(Object.create(null),e,r);for(let e in i)delete o[e];return o}return e}function c(e,t,r){for(let n in t){let t=e.get(n);t&&(0,l.fw)(e,t,r)}}function d(e,t,r){for(let n in t){let t=e.get(n);t&&r(t)}}function u(e,t){return!!e[t]}function p(e,t,r){return!!m(e,t,r)}function m(e,t,r){if(t[r])return e.get(r)||null;let n=null;return(0,l.pr)(e,r,e=>{if(!n&&t[e.guid]&&(n=e),n)return"stop"}),n}},852904:(e,t,r)=>{r.d(t,{fd:()=>F,sb:()=>x});var n=r(950663),i=r.n(n),a=r(418786),o=r(46347),l=r(122342),s=r(752775),c=r(218609),d=r(215698),u=r(244311),p=r(954109),m=r(28786),h=r(334392),_=r(307425),g=r(112088),f=r(339531),E=r(537765),y=r(646472),v=r(166885),b=r(938110),I=r(360229);let T="recent-library-items-design",w="recent-library-items",S=(0,c.wV)("FIGJAM_REMOVE_RECENTLY_USED_WIDGET",async(e,t)=>{}),C=(0,c.u4)(async(e,t,{loadingKey:r})=>{let n=e.getState(),{orgId:i}=t,a=n.recentlyUsed.templates[t.key],o=a.filter(e=>e.type===b._g.CommunityResource),l=a.filter(e=>e.type===b._g.TeamTemplate),s=new Set;for(let e of o){let t=n.hubFiles[e.id];t||s.add(e.id)}if(0===s.size&&0===l.length)return;e.dispatch(m.DB({key:r}));let c=[],u=Array.from(s).map(async t=>{try{await e.dispatch(d.CI({hubFileId:t}))}catch(e){c.push(t)}}),p=!1,g=new Set;if(0!==l.length&&i){let t=await I.U.getRecents({fileKeys:l.map(e=>e.key).join(","),orgId:i}).catch(e=>{p=!0,console.error("Error fetching recent custom templates",e)});if(t){let r=null==t?void 0:t.data.meta.templates;if(r.length<l.length)for(let e of l){let t=r.find(t=>t.file_key===e.key);t||g.add(e.key)}e.dispatch(h.z(r))}}await Promise.all(u);let f=p||0!==g.size;if(0!==c.length||f){let r=new Set;for(let e of c)r.add(e);let n=a.filter(e=>e.type===b._g.TeamTemplate?!p&&!g.has(e.key):!r.has(e.id));e.dispatch(_.Vn({storeInRecentsKey:t.key,recentTemplates:n}))}e.dispatch(m.dN({key:r}))}),O=(0,c.u4)(async(e,t,{loadingKey:r})=>{var n;let i=e.getState(),a={};for(let e of i.recentlyUsed.widgets[t.key]){let t=(0,f.WA)(i.publishedCanvasWidgetVersions,e.id),r=i.installedWidgetVersions.widgets[e.id]||t&&(null==(n=i.publishedCanvasWidgetVersions[e.id])?void 0:n[t]);!r&&e.version&&(a[e.id]||(a[e.id]=[]),e.version&&a[e.id].push(e.version))}if(e.dispatch(m.DB({key:r})),0===Object.keys(a).length){e.dispatch(m.dN({key:r}));return}Object.keys(a).length>0&&(await (0,u.Un)(a,i.currentUserOrgId),e.dispatch((0,u.un)({widgetIDToVersions:a})),e.dispatch(m.dN({key:r})))}),A=[],N=[];if(l.D5){let e=l.D5.getItem(T),t=l.D5.getItem(w);try{A=e&&JSON.parse(e)||[],N=t&&JSON.parse(t)||[]}catch(e){}}let L={[b.xQ.Design]:A,[b.xQ.FigJam]:N,[b.xQ.Handoff]:[]},P={[b.xQ.Design]:[],[b.xQ.FigJam]:(0,E.LC)(b.xQ.FigJam,y.Xh.WIDGET),[b.xQ.Handoff]:[],fetchedResources:{}},R={[b.xQ.Design]:[],[b.xQ.FigJam]:(0,E.LC)(b.xQ.FigJam,y.Xh.PLUGIN),[b.xQ.Handoff]:(0,E.LC)(b.xQ.Handoff,y.Xh.PLUGIN),fetchedResources:{}},k={[b.xQ.Design]:[],[b.xQ.FigJam]:(0,E.LC)(b.xQ.FigJam,y.Xh.HUB_FILE),[b.xQ.Handoff]:[]},D={[b.xQ.Design]:[],[b.xQ.FigJam]:(0,E.LC)(b.xQ.FigJam,b.ER.FACE_STAMP),[b.xQ.Handoff]:[]},M={[b.xQ.Design]:[],[b.xQ.FigJam]:(0,E.LC)(b.xQ.FigJam,b.ER.WHITEBOARD_TOOL),[b.xQ.Handoff]:[]},F={fetchWidgetsMetadata:O,fetchTemplatesMetadata:C,removeRecentlyUsedWidget:S},x=(0,a.UY)({libraryItems:function(e=L,t){var r;if(p._J.matches(t)){if(!t.payload.storeInRecentsKey)return e;let n=(0,g.us)(t.payload.item);if(!n.key)return e;let{file_key:a,node_id:o,team_id:s}=t.payload.item,[[c],d]=i()(e[t.payload.storeInRecentsKey],e=>e.file_key===a&&e.node_id===o),u={...n,team_id:s||v.p3,file_key:a,node_id:o,last_added_at_by_user_id:{...(null==c?void 0:c.last_added_at_by_user_id)||{},...t.payload.userId?{[t.payload.userId]:Date.now()}:{}}},p=[u,...d].slice(0,21);return null==(r=l.D5)||r.setItem(t.payload.storeInRecentsKey===b.xQ.Design?T:w,JSON.stringify(p)),{...e,[t.payload.storeInRecentsKey]:p}}return e},widgets:function(e=P,t){var r;if(_._o.matches(t)){let r=(0,s.$)({currentUserId:t.payload.currentUserId,resourceId:t.payload.id,currentVersionId:t.payload.version,editorKey:t.payload.storeInRecentsKey,resourceKey:y.Xh.WIDGET});return{...e,[t.payload.storeInRecentsKey]:r}}if(_.XX.matches(t))return{...e,[t.payload.storeInRecentsKey]:t.payload.recentResources};if(S.matches(t)){let n=t.payload.id;if(!n)return e;let i=(0,E.LC)(b.xQ.FigJam,y.Xh.WIDGET);i=i.filter(e=>e.id!==n);let a=(0,E.wK)(t.payload.storeInRecentsKey,y.Xh.WIDGET);return a&&(null==(r=l.D5)||r.setItem(a,JSON.stringify(i))),{...e,[t.payload.storeInRecentsKey]:i}}return _.d5.matches(t)?{...e,[t.payload.storeInRecentsKey]:(0,E.LC)(t.payload.storeInRecentsKey,y.Xh.WIDGET)}:_.mR.matches(t)?{...e,fetchedResources:{...e.fetchedResources,[t.payload.id]:{version:t.payload.version,status:t.payload.status}}}:e},plugins:function(e=R,t){if(_.zD.matches(t)){let r=(0,s.$)({currentUserId:t.payload.currentUserId,resourceId:t.payload.id,currentVersionId:t.payload.version||void 0,editorKey:t.payload.storeInRecentsKey,resourceKey:y.Xh.PLUGIN});return{...e,[t.payload.storeInRecentsKey]:r}}return _.lk.matches(t)?{...e,[t.payload.storeInRecentsKey]:t.payload.recentResources}:_.cD.matches(t)?t.payload.storeInRecentsKey===b.xQ.Design?e:{...e,[t.payload.storeInRecentsKey]:(0,E.LC)(t.payload.storeInRecentsKey,y.Xh.PLUGIN)}:_.Ws.matches(t)?{...e,fetchedResources:{...e.fetchedResources,[t.payload.id]:{version:t.payload.version,status:t.payload.status}}}:e},templates:function(e=k,t){var r;if(_.UN.matches(t)){let n;if(t.payload.storeInRecentsKey!==b.xQ.FigJam)throw Error("Recently used templates currently only implemented for Figjam. ");let{payload:a}=t,{type:s,userId:c}=a,[[d],u]=i()((0,E.LC)(b.xQ.FigJam,y.Xh.HUB_FILE),e=>{let{type:t}=e;switch(t){case b._g.CommunityResource:return a.type===b._g.CommunityResource&&e.id===a.id;case b._g.TeamTemplate:return a.type===b._g.TeamTemplate&&e.key===a.file_key;default:(0,o.vE)(t)}}),p={...(null==d?void 0:d.last_added_at_by_user_id)||{},...c?{[c]:Date.now()}:{}};switch(s){case b._g.CommunityResource:n={id:a.id,type:b._g.CommunityResource,last_added_at_by_user_id:p};break;case b._g.TeamTemplate:n={key:a.file_key,type:b._g.TeamTemplate,last_added_at_by_user_id:p};break;default:(0,o.vE)(s)}let m=[n,...u].slice(0,4);return null==(r=l.D5)||r.setItem(E.Yn,JSON.stringify(m)),{...e,[t.payload.storeInRecentsKey]:m}}return _.Vn.matches(t)?{...e,[t.payload.storeInRecentsKey]:t.payload.recentTemplates}:e},faceStamps:function(e=D,t){var r;if(_.ho.matches(t)){if(t.payload.storeInRecentsKey!==b.xQ.FigJam)throw Error("Recently used facestamps currently only implemented for Figjam.");let[[n],a]=i()(e[t.payload.storeInRecentsKey],e=>e.user.id===t.payload.item.user.id),o={id:t.payload.item.user.id,type:b._g.FaceStamp,user:t.payload.item.user,last_added_at_by_user_id:{...(null==n?void 0:n.last_added_at_by_user_id)||{},...t.payload.currentUserId?{[t.payload.currentUserId]:Date.now()}:{}}},s=[o,...a].slice(0,20);return null==(r=l.D5)||r.setItem(E.oe,JSON.stringify(s)),{...e,[t.payload.storeInRecentsKey]:s}}return _.Rc.matches(t)?{...e,[t.payload.storeInRecentsKey]:t.payload.recentFaceStamps}:e},whiteboardTools:function(e=M,t){var r;if(_.no.matches(t)){if(t.payload.storeInRecentsKey!==b.xQ.FigJam)throw Error("Recently used whiteboard tools currently only implemented for Figjam.");let[[n],a]=i()(e[t.payload.storeInRecentsKey],e=>e.id===t.payload.item.id),o={id:t.payload.item.id,type:b._g.WhiteboardTool,last_added_at_by_user_id:{...(null==n?void 0:n.last_added_at_by_user_id)||{},...t.payload.currentUserId?{[t.payload.currentUserId]:Date.now()}:{}}},s=[o,...a];return null==(r=l.D5)||r.setItem(E.px,JSON.stringify(s)),{...e,[t.payload.storeInRecentsKey]:s}}return _.GE.matches(t)?{...e,[t.payload.storeInRecentsKey]:t.payload.recentWhiteboardTools}:e}})},414994:(e,t,r)=>{r.d(t,{HC:()=>c,W2:()=>d,ln:()=>m});var n=r(122342),i=r(111120),a=r(225592),o=r(112602),l=r(916903);let s="sort-filter-prefs-v1";function c(e,t){return e.sort.key===t.sort.key&&e.sort.dir===t.sort.dir&&e.filters.creator===t.filters.creator&&e.filters.fileType===t.filters.fileType}let d={viewMode:l.H6.GRID,sort:{key:l.BO.NAME,dir:l.qP.DESC},filters:{creator:l.FN.ANY,fileType:l.$Q.ANY,orgDeletedDrafts:l.Ox.ALL}},u={deletedFiles:{...d,filters:{...d.filters,creator:l.FN.ANY},sort:{...d.sort,key:l.BO.TRASHED_AT}},folders:{default:{...d,sort:{...d.sort,key:l.BO.TOUCHED_AT}},byId:Object.create(null)},recentFiles:{...d,sort:{...d.sort,key:l.BO.TOUCHED_AT}},search:{...d,sort:{...d.sort,key:l.BO.SEARCH_RELEVANCE}},user:{...d,sort:{...d.sort,key:l.BO.TOUCHED_AT}},sharedWithYou:{...d,filters:{...d.filters,sharedBy:""},sort:{...d.sort,key:l.BO.SHARED_AT}},recentsAndSharing:{recents:{...d,sort:{...d.sort,key:l.BO.ACCESSED_AT}},sharedFiles:{...d,filters:{...d.filters,sharedBy:""},sort:{...d.sort,key:l.BO.SHARED_AT}},sharedProjects:{...d,filters:{...d.filters,sharedBy:""},sort:{...d.sort,key:l.BO.SHARED_AT}}}};function p(e,t){return void 0===e||void 0===t?(e||t)??d:{...t,sort:{...d.sort,...t.sort},filters:{...d.filters,...t.filters}}}function m(e=u,t){if(i.ZB.matches(t)){let t=function(){let e=null!=n.D5?n.D5.getItem(s):null;if(e){let t=function(e){try{let t=JSON.parse(e),r={deletedFiles:p(u.deletedFiles,t.deletedFiles),folders:{default:p(u.folders.default,t.folders.default),byId:{}},recentFiles:p(u.recentFiles,t.recentFiles),search:p(u.search,t.search),user:p(u.user,t.user),sharedWithYou:p(u.sharedWithYou,t.sharedWithYou),recentsAndSharing:{recents:p(u.recentsAndSharing.recents,t.recentsAndSharing.recents),sharedFiles:p(u.recentsAndSharing.sharedFiles,t.recentsAndSharing.sharedFiles),sharedProjects:p(u.recentsAndSharing.sharedProjects,t.recentsAndSharing.sharedProjects)}};for(let e in t.folders.byId)r.folders.byId[e]=p(u.folders.default,t.folders.byId[e]);return r}catch(e){return null}}(e);return t}let t=null!=n.D5?n.D5.getItem("persisted-sorting"):null;if(t){let e=function(e){let t;function r(e){let t=l.BO[l.BO[e]];if(void 0!==e)return{...d,sort:{...d.sort,key:t}}}try{t=JSON.parse(e)}catch(e){return console.error(e),null}let n={};t.folders&&t.folders.byId&&Object.keys(t.folders.byId).forEach(e=>{n[e]=r(t.folders.byId[e])});let i={deletedFiles:r(t.deletedFiles)||u.deletedFiles,folders:{default:t.folders&&t.folders.default&&r(t.folders.default)||u.folders.default,byId:n},recentFiles:r(t.recentFiles)||u.recentFiles,search:r(t.searchResults)||u.search,user:u.user,sharedWithYou:u.sharedWithYou,recentsAndSharing:u.recentsAndSharing};return i}(t);return e||null}return null}();return t||e}if(i.lh.matches(t)){let r=t.payload.selectedView;if("folder"===r.view){let n={...e.folders,byId:{...e.folders.byId,[r.folderId]:t.payload.config}},i={...e,folders:n};return h(i),i}if("recentsAndSharing"===r.view){let r;switch(t.payload.tab){case o.D.RECENTLY_VIEWED:r={...e.recentsAndSharing,recents:t.payload.config};break;case o.D.SHARED_FILES:r={...e.recentsAndSharing,sharedFiles:t.payload.config};break;case o.D.SHARED_PROJECTS:r={...e.recentsAndSharing,sharedProjects:t.payload.config};break;default:return e}let n={...e,recentsAndSharing:r};return h(n),n}{let n={...e,[r.view]:t.payload.config};return h(n),n}}if(a.dR.matches(t)&&null!=t.payload.fileTypeFilter){let r={...e,search:{...e.search,filters:{...e.search.filters,fileType:t.payload.fileTypeFilter??l.$Q.ANY}}};return h(r),r}return e}let h=e=>{if(n.D5)try{let t=JSON.stringify(e);n.D5.setItem(s,t)}catch(e){}}},226770:(e,t,r)=>{r.d(t,{KW:()=>d,Xv:()=>u,bN:()=>p,rH:()=>c});var n=r(122342),i=r(111120),a=r(72038);let o={[a.R.VIEW_MODE]:"view-bar-view-mode-option",[a.R.SORT_MODE]:"view-bar-sort-options"};function l(e){let t=n.D5&&n.D5.getItem(e)||"{}";try{return JSON.parse(t)}catch(e){return{}}}function s(e,t){if(n.D5)try{let r=JSON.stringify(t);n.D5.setItem(e,r)}catch(e){}return t}function c(e={},t){if(i.ZB.matches(t))return l(o[a.R.VIEW_MODE]);if(i.zu.matches(t)){let r={...e,[t.payload.viewId]:t.payload.viewMode};return s(o[a.R.VIEW_MODE],r)}return e}function d(e={},t){if(i.ZB.matches(t))return l(o[a.R.SORT_MODE]);if(i.vU.matches(t)){let r={...e,[t.payload.viewId]:t.payload.sortMode};return s(o[a.R.SORT_MODE],r)}return e}function u(e,t,r){return t[e]??r}function p(e,t,r,n){let i=t.viewBarSortOptionsByView[e];return i&&-1!==r.indexOf(i.sortKey)?i:n}},985103:(e,t,r)=>{r.d(t,{U:()=>o});var n=r(198348),i=r(31642),a=r(617994);let o=new class{constructor(){this.ColorPaletteSchemaValidator=(0,n._p)("ColorPaletteSchemaValidator",a.H6C.sinatra(),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:t})=>{let r=await t.post("/api/color_palettes",n.yA.toAPIParameters(e));return r})}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:t})=>{let r=await t.put(`/api/color_palettes/${e.uuid}`,n.yA.toAPIParameters(e));return r})}async deleteColorPalette(e){await i.ZP.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,t){return i.ZP.post(`/api/files/${e}/color_palette`,n.yA.toAPIParameters({colorPaletteUuid:t}))}async setTeamDefaultPalette(e,t){await i.ZP.post(`/api/teams/${e}/default_color_palette`,n.yA.toAPIParameters({colorPaletteUuid:t}))}async clearTeamDefaultPalette(e){await i.ZP.del(`/api/teams/${e}/default_color_palette`)}}},41937:(e,t,r)=>{r.d(t,{R:()=>o,Z:()=>a});var n,i=r(198348),a=((n=a||{}).VIEW_OR_PENDING="view_or_pending",n.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",n);let o=new class{constructor(){this.ContactsSchemaValidator=(0,i.PP)(),this.AtMentionsSchemaValidator=(0,i.PP)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/at_mentions",i.yA.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/at_mentions",i.yA.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,i.PP)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/share",i.yA.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/share",i.yA.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,i.PP)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/feed_at_mentions",i.yA.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/feed_at_mentions",i.yA.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,i.PP)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/face_stamps",i.yA.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/face_stamps",i.yA.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,i.PP)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/feed_post_creators",i.yA.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:t})=>t.get("/api/contacts/feed_post_creators",i.yA.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/contacts",i.yA.toAPIParameters(e));return r})}}},883027:(e,t,r)=>{r.d(t,{L:()=>a});var n=r(198348),i=r(31642);let a=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,n.PP)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,n.yA.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion}));return r})}markFeedViewed(e){i.ZP.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){i.ZP.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},65002:(e,t,r)=>{r.d(t,{Q:()=>c,f:()=>s});var n,i=r(198348),a=r(31642),o=r(188558),l=r(606536),s=((n=s||{}).DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",n);let c=new class{constructor(){this.GuestResourcesSchemaValidator=(0,i.PP)(),this.OrgUserSchemaValidator=(0,i._p)("OrgUserSchemaValidator",l.Nz,"xrv:org_user"),this.UpdateOrgUsersSchemaValidator=(0,i._p)("UpdateOrgUsersSchemaValidator",o.z.array(l.Nz),"xrv:org_user"),this.CreateStarterTeamSchemaValidator=(0,i.PP)(),this.PostOrgUserFlagsSchemaValidator=(0,i.PP)(),this.DevModeSuggestedUpgradesSchemaValidator=(0,i.PP)(!1)}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/org_user/${e.orgUserId}/guest_resources`);return r})}updateOrgUser(e){let{id:t,changes:r}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${t}`,i.yA.toAPIParameters(r)))}updateOrgUsers(e){let{orgId:t,...r}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:t})=>t.put(`/api/orgs/${e.orgId}/org_users`,i.yA.toAPIParameters(r)))}useDevModeBeta(e){return a.ZP.post(`/api/orgs/${e}/org_users/use_dev_mode_beta`)}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:t,flags:r}=e;return this.PostOrgUserFlagsSchemaValidator.validate(({xr:e})=>e.post(`/api/org_users/${t}/flags`,{flags:r}))}declineDevModeSuggestedUpgrades(e){return this.DevModeSuggestedUpgradesSchemaValidator.validate(async({xr:t})=>await t.del(`/api/orgs/${e.org_id}/org_users/dev_mode_suggested_upgrades`,e))}}},163853:(e,t,r)=>{r.d(t,{II:()=>c.II,uU:()=>g});var n,i=r(198348),a=r(31642),o=r(188558),l=r(820553),s=r(917185),c=r(606536),d=r(310975);(e=>{e.isOrgInvite=function(e){return e.type===c.II.ORG_INVITE},e.isOrgUser=function(e){return e.type===c.II.ORG_USER},e.isIdpUser=function(e){return e.type===c.II.IDP_USER}})(n||(n={}));let u=c.dR.pick({id:!0,user:!0,type:!0}),p=o.z.discriminatedUnion("type",[c.Nz,l.L,s.k]),m=o.z.object({users:o.z.array(o.z.union([p,u])).optional(),cursor:o.z.ignore(),designEditorCutoff:o.z.ignore().optional(),whiteboardEditorCutoff:o.z.ignore().optional(),devModeEditorCutoff:o.z.ignore().optional(),totalUserCount:o.z.number()}),h=o.z.object({id:o.z.string(),org_id:o.z.string(),name:o.z.string(),created_at:o.z.string(),updated_at:o.z.string(),uuid:o.z.string(),member_count:o.z.number(),top_members:o.z.array(d.cv)}),_=o.z.array(h),g=new class{constructor(){this.IdpUsersSchemaValidator=(0,i.PP)(),this.LicenseGroupsSchemaValidator=(0,i.PP)(),this.WorkspacesSchemaValidator=(0,i._p)("WorkspacesSchemaValidator",_,null),this.BillingDataSchemaValidator=(0,i.PP)(),this.TeamsSchemaValidator=(0,i.PP)(),this.TeamSchemaValidator=(0,i.PP)(),this.EligibleUpgradesFigjamSchemaValidator=(0,i.PP)(),this.OrgNameSchemaValidator=(0,i.PP)(),this.DomainsSchemaValidator=(0,i.PP)(),this.AdminsSchemaValidator=(0,i._p)("AdminsSchemaValidator",e=>e.array(c.Nz),"xrv:org_user"),this.OrgUsersPaginatedSchemaValidator=(0,i._p)("OrgUsersPaginatedSchemaValidator",m,"xrv:org_user"),this.UserSchemaValidator=(0,i._p)("UserSchemaValidator",c.Nz,"xrv:org_user"),this.OauthConnectionsSchemaValidator=(0,i.PP)(),this.ShowVatGstSchemaValidator=(0,i.PP)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,i.PP)(),this.OrgUsersCountSchemaValidator=(0,i.PP)(),this.OrgUsersFilterCountsSchemaValidator=(0,i.PP)(),this.OrgAdminsSchemaValidator=(0,i.PP)()}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/idp_users`);return r})}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.currentOrgId}/license_groups`);return r})}getWorkspaces(e){return this.WorkspacesSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.currentOrgId}/workspaces`);return r})}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/billing_data`);return r.data.meta?r:{...r,data:{...r.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:t})=>{let r=await t.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return r.data.meta?r:{...r,data:{...r.data,meta:null}}})}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:t})=>{let{orgId:r,...n}=e,a=await t.get(`/api/orgs/${e.orgId}/teams`,i.yA.toAPIParameters(n));return a})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`);return r})}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>{let t=await e.get("/api/orgs/eligible_upgrades_figjam");return t})}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/org_name`);return r})}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.currentOrgId}/domains`);return r})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/admins`,i.yA.toAPIParameters({include_license_admins:e.includeLicenseAdmins}));return r})}getOrgUsersPaginatedV2(e){let{orgId:t,after:r,minimalFields:n,pageSize:a,sort:o,filter:l,...s}=e;return this.OrgUsersPaginatedSchemaValidator.validate(async({xr:e})=>{let c=await e.get(`/api/v2/orgs/${t}/org_users`,i.yA.toAPIParameters({...s,...l||{},...o||{},minimalFields:n||void 0,pageSize:a||void 0,after:r?JSON.stringify(r):void 0}));return c})}getUser(e){return this.UserSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/user/${e.userId}`);return r})}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/oauth_connections`);return r})}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/show_vat_gst`);return r})}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/license_groups/members/counts`);return r})}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/org_users/count`);return r})}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,i.yA.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role})))}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:t})=>{let r=await t.get(`/api/orgs/${e.orgId}/org_admins`);return r})}apiAutogenControls(e){let{orgId:t,autogen_password_controls:r}=e;return a.ZP.put(`/api/orgs/${t}`,{autogen_password_controls:r})}delWorkspaces(e){return a.ZP.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return a.ZP.post(`/api/orgs/${e.orgId}/validate_trial`)}selfAssignWorkspace(e){return a.ZP.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return a.ZP.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}}},561237:(e,t,r)=>{r.d(t,{g:()=>a});var n=r(198348),i=r(31642);let a=new class{constructor(){this.CommunitySchemaValidator=(0,n.PP)(),this.UserNotificationsSchemaValidator=(0,n.PP)(),this.CommunityServerDrivenSchemaValidator=(0,n.PP)(),this.ServerDrivenSchemaValidator=(0,n.PP)(),this.ServerDrivenPlanSchemaValidator=(0,n.PP)()}getCommunity(e){return this.CommunitySchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/user_notifications/community",{currentView:null==e?void 0:e.currentView});return r})}getUserNotifications(e){return this.UserNotificationsSchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/user_notifications",n.yA.toAPIParameters(e,["currentView"]));return r})}getCommunityServerDriven(e){return this.CommunityServerDrivenSchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/user_notifications/community/server_driven",{currentView:e.currentView});return r})}getServerDriven(e){return this.ServerDrivenSchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/user_notifications/server_driven",n.yA.toAPIParameters(e,["currentView"]));return r})}getServerDrivenPlan(e){return this.ServerDrivenPlanSchemaValidator.validate(async({xr:t})=>{let r=await t.get("/api/user_notifications/server_driven/plan",n.yA.toAPIParameters(e,["currentView"]));return r})}recordNotificationClicked(e){return i.ZP.post("/api/user_notification/clicked",{id:e.id,currentView:e.currentView,medium:e.medium})}}},777107:(e,t,r)=>{r.d(t,{Ui:()=>l,jW:()=>s,jy:()=>c});var n=r(716250),i=r(337167),a=r(685253);let o="showFigmentDebugger";function l(e,t){try{if(!(0,n.BZ)().internal_only_debug_tools||!(0,n.BZ)().figment_debugger||null==e)return;i.n_.set(a.aX,{requestJsons:e,networkState:t})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function s(){let e=c();localStorage.setItem(o,e?"false":"true"),i.n_.set(a.AR,!e)}function c(){try{if(null==localStorage)return!1;let e=localStorage.getItem(o);return"true"===e}catch(e){return!1}}},456211:(e,t,r)=>{r.d(t,{$:()=>s,j:()=>l});var n=r(652983),i=r(9247),a=r(435804);let o=n.createContext(null);function l(){return n.useContext(o)}function s({children:e}){let[t,r]=n.useState(null),[l,s]=n.useState(null),c=(0,a.fh)(),d=(0,i.D)(c);(0,n.useEffect)(()=>{d!==c&&"fullscreen"===d&&(r(null),s(null))},[d,c]);let u=(0,n.useMemo)(()=>({dltNode:t,dltContainerNode:l,setDltNode:r,setDltContainerNode:s}),[t,l,r,s]);return n.createElement(o.Provider,{value:u},e)}},828867:(e,t,r)=>{r.d(t,{B7:()=>E,BJ:()=>U,Kn:()=>F,M_:()=>y,Zq:()=>j,lO:()=>B,oJ:()=>Y,qV:()=>S,uv:()=>V,zf:()=>x});var n=r(652983),i=r(87608),a=r.n(i),o=r(418465),l=r(435613),s=r(970740),c=r(65249),d=r(225468),u=r(415850),p=r(432578);let m=r(851060),h=r(151169),_=[r(999244),r(369622),r(812069),r(558662),r(964353),r(317834),r(888159),r(328268),r(933965),r(74896),r(718254),r(169064),r(32657),r(441647),r(908378),r(403650),r(552909),r(842738)],g=[p.Iv,p.nu,p.S5,p.Cr],f=[];for(let e=0;e<_.length*g.length;e+=1){let t=e%_.length,r=_[t],n=(e+Math.floor(e/_.length))%g.length,i=g[n];f.push({svgSrc:r,className:i})}function E(e){return e.startsWith("https://www.gravatar.com/avatar/")}function y(e){return e&&!E(e)?e:void 0}let v={CIRCLE:`${p.ri} ${p.Xw}`,SQUARE:`${p.ri} ${p.h6}`,ROUNDED_SQUARE:`${p.ri} ${p.x2}`};function b(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class Range{constructor(e,t){this.lower=e,this.upper=t}contains(e){return e>=this.lower&&e<this.upper}}let I=new Range(65,91),T=new Range(97,123),w=new Range(48,58);class S extends n.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,u.lH)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},t=this.props.enabled||!0,{size:r,fontSize:i}=this.props;r&&(e.width=`${r}px`,e.height=`${r}px`,e.lineHeight=`${r}px`,e.fontSize=`${i??r/2}px`);let o=this.props.shape||"CIRCLE",l=v[o];return n.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:a()(l,this.props.className||"",{[p.Xm]:!t}),"aria-hidden":"true"},this.props.children)}}class C extends n.Component{render(){return n.createElement(S,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function O(e){let t={};if(e.size&&e.svgSizeRatio){let r=e.size*e.svgSizeRatio;t.width=`${r}px`,t.height=`${r}px`}let r=(0,u.lH)(e.color);return t.fill=r,n.createElement(S,{...e},n.createElement("div",{style:t},n.createElement(l.n,{svg:e.svg,autosize:!0})))}class A extends n.Component{render(){let{size:e}=this.props,t=e?`${e}px`:void 0,r=this.props.shape||"CIRCLE",i=v[r];return n.createElement(l.n,{className:`${i} ${this.props.className||""} ${(this.props.enabled,"")}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:t,height:t,dataTestId:"svg-avatar"})}}class N extends n.Component{constructor(e){super(e),this.onImageLoadError=()=>{this.setState({loadError:!0})},this.state={loadError:!1}}render(){var e,t;let r={},i=this.props.style||{};if(this.props.size){let n=this.state.loadError?null==(e=b(this.props.size))?void 0:e.fallbackSize:null==(t=b(this.props.size))?void 0:t.imgSize,a=`${n}px`;r.width=a,r.height=a,i.width=a,i.height=a}let a=this.props.enabled||!0,o=this.props.shape||"CIRCLE",l=v[o],s=this.state.loadError||!this.props.imgUrl?this.props.children:n.createElement("img",{"data-testid":"image-avatar",className:`${a?"":p.Xm}`,style:r,src:this.props.imgUrl,onError:this.onImageLoadError,alt:""});return n.createElement("div",{className:`${l} ${this.props.className} ${a?"":p.Xm}`,style:{...i,position:"relative"}},s)}}let L=[I,T,w],P={colors:u.dn,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:m},R=["fallback_text","handle","name","email"],k=(e,t=P)=>class extends n.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=this.props.initializableEntityProperties?this.props.initializableEntityProperties:R,r=e.map(e=>this.props.entity[e]),n=H(r);return n&&"string"==typeof n?t.getInitial(n):null},this.computeFallbackColor=()=>(0,u.hx)(this.props.entity.id,t.colors)}render(){let r=this.props.fallbackInitial||this.computeFallbackInitial(),i=this.computeFallbackColor()||null,a=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return n.createElement(e,{imgUrl:a,fallbackInitial:r,fallbackColor:this.props.defaultFallbackAvatarSvg&&!r?null:i,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:t.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||t.defaultFallbackAvatarSvg})}};class D extends n.Component{renderFallback(){var e,t,r,i,a,o;let{size:l,fontSize:s,fallbackSvg:c,avatarSvg:d,svgSizeRatio:u}=this.props,p=null==(e=b(l))?void 0:e.fallbackSize;if(d)return n.createElement(O,{size:p,fontSize:s,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:d,svgSizeRatio:u,opacity:this.props.opacity});if(c)return n.createElement(A,{size:null==(t=b(l))?void 0:t.fallbackSize,src:c,shape:this.props.shape});if(this.props.hideFallbackInitial)return n.createElement(S,{size:null==(r=b(l))?void 0:r.fallbackSize,fontSize:s,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let m=this.props.fallbackInitial;return m?n.createElement(C,{size:null==(o=b(l))?void 0:o.fallbackSize,fontSize:s,className:this.props.className,initial:m,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape}):this.props.defaultFallbackAvatarSvg?n.createElement(A,{className:this.props.className,size:null==(a=b(l))?void 0:a.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):n.createElement(S,{size:null==(i=b(l))?void 0:i.fallbackSize,fontSize:s,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||E(this.props.imgUrl)?this.renderFallback():n.createElement(N,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape},this.renderFallback())}}D.displayName="Avatar";let M=k(D,{...P,getInitial:e=>{let t=e.charCodeAt(0);return L.some(e=>e.contains(t))?e[0]:null}}),F=M;function x({entity:e,size:t=40}){if(e.imgUrl)return n.createElement(M,{shape:"SQUARE",entity:e,size:t});let r=(0,u.wu)(null==e?void 0:e.id,f);return n.createElement(A,{src:r.svgSrc,size:t,shape:"SQUARE",className:r.className})}let U=k(D,{...P,defaultFallbackAvatarSvg:h,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function B(e){return n.createElement(U,{shape:"SQUARE",...e})}function V(e){return n.createElement("div",{className:e.isHovered?p.go:p.NK},e.teams.slice(0,3).map(t=>n.createElement(B,{key:t.id,entity:t,...e})))}class G extends n.Component{render(){let e=this.props.size||0,t=Math.round(e/4)+1,r=Math.round(t/5);return n.createElement("span",{className:p.z4,style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&n.createElement("div",{className:p.Kj,style:e?{width:`${t}px`,height:`${t}px`,top:`-${r}px`,right:`-${r}px`}:void 0}),this.props.children)}}G.displayName="AvatarBellWrapper";let H=(e=[],t="?")=>e.find(e=>e)||t,W=(e,t)=>class extends n.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let r=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return n.createElement("div",{className:`${p.Wq} ${this.props.onClick?p.jF:""} ${this.props.enabled?p.Qu:""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":r},n.createElement("div",{id:r,"data-tooltip-type":d.fR.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&n.createElement(e,{...this.props,className:void 0})),n.createElement(t,{...this.props}),this.props.children)}};class K extends n.Component{render(){let e=this.props.showTruncatedTextTooltip?n.createElement(c.x,{truncate:!0},this.props.text):n.createElement("span",{className:p.pr},this.props.text),t=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return n.createElement("div",{className:p.um,title:t},n.createElement("div",{className:`${p.sy} ${p.Wq} ${this.props.onLabelClick?p.jF:""}`,onClick:this.props.onLabelClick},this.props.text.length>0&&e,this.props.showIsMe&&n.createElement("span",{className:p.qB},n.createElement(s.Tx,{id:"avatar.tooltip.you"})),this.props.badge&&n.createElement(o.Ct,{...this.props.badge})),this.props.email&&n.createElement("div",{className:this.props.onEmailClick?p.fC:"",onClick:this.props.onEmailClick},n.createElement("div",{className:p.Do},this.props.email)))}}let z=e=>class extends n.Component{render(){let t=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&t.push(this.props.entity.email);let r=H(t,this.props.defaultText),i=`${r}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:a,onLabelClick:o,...l}=this.props;return n.createElement(e,{text:r,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?i:null,onEmailClick:a,onLabelClick:o,...l})}},Z=z(K),Y=W(M,Z),j=W(B,z(K))},548802:(e,t,r)=>{r.d(t,{Fu:()=>m,U6:()=>g,eL:()=>_,oX:()=>h});var n=r(652983),i=r(623046),a=r(435613),o=r(970740),l=r(519782),s=r(892061),c=r(828867),d=r(623497);let u=r(69339),p=(e,t={})=>function(r){let c=null==r.size?120:r.size,p=()=>{r.dispatch((0,l.X)({entity:r.entity,entityType:r.entityType,shape:t.editorShape?t.editorShape:void 0}))},m={width:`${c}px`,minWidth:`${c}px`,height:`${c}px`,minHeight:`${c}px`},h=r.avatarEditorState&&r.avatarEditorState.status===s.kh.UPLOADING&&r.entity===r.avatarEditorState.entity,_=t.className?t.className:d.Xw,g=n.createElement(i.u,{isLoading:h,className:`${d.V_} ${_}`},()=>n.createElement(e,{size:c,...r})),f=n.createElement("div",{className:`${_} ${r.overlayClass||""}`},n.createElement(a.n,{className:`${d.IJ} ${d.qv} ${_} ${r.overlayClass||""}`,svg:r.icon||u}));return t.withButton?n.createElement("div",{className:`${d.YS} ${d.Xw}`,style:m},g,f,n.createElement("div",{className:d.eP,onClick:p},n.createElement(o.Tx,{id:"avatar_editor.edit"}))):n.createElement("div",{className:`${d.SV} ${_}`,onClick:p,style:m},g,f)},m=p(c.Kn),h=p(c.Kn,{withButton:!0}),_=p(c.lO,{editorShape:"SQUARE",className:d.h6}),g=p(c.zf,{editorShape:"SQUARE",className:d.h6})},415850:(e,t,r)=>{r.d(t,{dn:()=>i,hx:()=>o,lH:()=>l,wu:()=>a});var n=r(951261);let i=[n.rRT,n.GJ7,n.Ivo,n.GiK,n.TDC,n.IxL,n.nQ];function a(e,t){if(!e)return t[0];try{let r=e.substring(e.length-4),n=parseInt(r);if(Number.isNaN(n))return t[Math.abs(function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}(e)%t.length)];return t[n%t.length]}catch(e){return t[0]}}function o(e,t){return a(e,t)}function l(e){return e===n.IxL?"var(--color-textonmultiplayeryellow)":"var(--color-textonmultiplayerblue)"}},394970:(e,t,r)=>{r.d(t,{Jr:()=>w,TM:()=>T,_W:()=>i,he:()=>n});var n,i,a=r(652983),o=r(87608),l=r.n(o),s=r(571529),c=r(435613),d=r(212984),u=r(970740),p=r(547699),m=r(442152),h=r(206279),_=r(13155),g=r(470787),f=r(801068),E=r(238436),y=r(526763),v=r(963142);let b=r(175148),I=r(636869),T=a.memo(function(e){return a.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:v.k2+(e.className?` ${e.className}`:""),"data-testid":e.dataTestId??"community-card-layout"},a.createElement("div",null,e.image),e.subtitle&&a.createElement("div",{className:v.tH},e.subtitle),e.bottomRow&&a.createElement("div",{className:v.Rk},e.bottomRow))});function w(e){let t={backgroundClip:s.ZP.safari?"padding-box":""};e.backgroundColor&&(t.backgroundColor=e.backgroundColor);let r="";return r=e.removeBorder?v.ad+` ${y.HR}`+(e.className?` ${e.className}`:""):v.ad+(e.className?` ${e.className}`:""),a.createElement("div",{className:r,onClick:e=>{e.preventDefault()},style:t},a.createElement("div",{className:y.jB}),a.createElement("div",{className:y.ZJ},e.children))}function S(e){return 1===e.dropdown.publishers.length?a.createElement(E.O,{className:v.D,targetRect:e.dropdown.targetRect,profile:e.dropdown.publishers[0],resources:e.dropdown.resources,isFollowing:e.dropdown.isFollowing,toggleFollowing:e.dropdown.toggleFollowing}):a.createElement(_.AQ,{targetRect:e.dropdown.targetRect,className:v.WT,disableDropdownScrollContainer:!0,maxWidth:250,minWidth:100,type:_.eg.LIGHT,propagateCloseClick:!0},a.createElement("div",{onClick:e=>{e.stopPropagation()}},e.dropdown.publishers.map(e=>a.createElement(f.HC,{key:e.id,profile:e},a.createElement("div",{className:v.Pz},a.createElement(p.Yt,{user:e,size:p.DZ.LARGE}),a.createElement("div",{className:v.f6},e.name))))))}(e=>{e.Center=function(e){return a.createElement("div",{className:v.lb},e.children)},e.Cover=function(e){return a.createElement("div",{className:v.Jn},e.children)},e.BottomRight=function(e){return a.createElement("div",{className:v.Zl},e.children)},e.BottomLeft=function(e){return a.createElement("div",{className:v.Qn},e.children)},e.TopLeft=function(e){return a.createElement("div",{className:v.ui},e.children)}})(n||(n={})),(e=>{function t(e){let t=e.length-1;return t>0?(0,u.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:t}):""}e.MetadataContainer=function(e){return a.createElement("div",{className:`${e.className} ${v.Q4}`,onClick:e.onClick},e.children)},e.PublisherAvatar=function(e){if(!e.publishers||!e.publishers.length)return null;let t=e.publishers[0];return a.createElement("div",{className:v.f4},a.createElement(f.HC,{profile:t},a.createElement(p.Yt,{user:t,size:p.DZ.LARGE})))},e.PublisherAvatarWithDropdown=function(e){let[t,r]=a.useState(!1),n=a.useRef(null),{isFollowing:i,toggleFollowing:o,resources:l,fetchCreatorResources:c}=(0,E.Q)();if((0,m.Fm)("scroll",()=>r(!1)),!e.publishers||!e.publishers.length)return null;let d=e.publishers[0];return a.createElement("div",{onMouseLeave:()=>r(!1)},a.createElement("div",{className:v.f4,onMouseEnter:()=>{s.K1||(t||c(d.id),r(!0))}},a.createElement(f.HC,{profile:d},a.createElement("span",{ref:n},a.createElement(p.Yt,{user:d,size:p.DZ.LARGE})))),t&&n.current&&a.createElement(a.Fragment,null,a.createElement("div",{className:v.SY}),a.createElement(E.O,{className:v.D,targetRect:n.current.getBoundingClientRect(),profile:d,resources:l,isFollowing:i,toggleFollowing:o})))},e.AvatarAndIconContainer=function(e){return a.createElement("div",{className:v.f4},e.children)},e.TextMetadataLayout=function(e){return a.createElement("div",{className:v.y1},a.createElement("div",{className:v.jM},e.primaryText),e.secondaryText&&a.createElement("div",{className:v.GP},e.planIconEntity&&a.createElement(h.E,{entityId:e.planIconEntity.id,entityName:e.planIconEntity.name,imgUrl:e.planIconEntity.img_url}),e.secondaryText))},e.TextWithHover=function(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:v.OY},e.text),a.createElement("div",{className:v.e4},e.hoverText))},e.MetadataAuthorWithHover=function(e){let r=e.publishers||[],n=t(r);return a.createElement(a.Fragment,null,r.length>0&&a.createElement("div",{className:v.OY},a.createElement(u.Tx,{id:"community.publisher_with_suffix",publisherName:r[0].name,publishersSuffix:n})),a.createElement("div",{className:r.length>0?v.e4:v.kB},e.hoverText))},e.MetadataAuthorWithDropdown=function(e){var r;let n=e.publishers||[],i=t(n),o=a.useRef(null),[l,c]=a.useState(!1),{isFollowing:d,toggleFollowing:p,resources:h,fetchCreatorResources:_}=(0,E.Q)();return(0,m.Fm)("scroll",()=>c(!1)),a.createElement("div",{onMouseLeave:()=>{c(!1)}},a.createElement("div",{ref:o,className:v.vf,onMouseEnter:()=>{s.K1||(1!==n.length||l||_(n[0].id),c(!0))}},a.createElement(f.HC,{profile:n[0]},a.createElement(u.Tx,{id:"community.publisher_with_suffix",publisherName:n[0].name,publishersSuffix:i})),l&&a.createElement(a.Fragment,null,a.createElement("div",{className:v.fs}),a.createElement(S,{dropdown:{targetRect:null==(r=o.current)?void 0:r.getBoundingClientRect(),publishers:n,resources:h,isFollowing:d,toggleFollowing:p}}))))},e.MetadataAuthor=function(e){let r=e.publishers||[],n=t(r);return a.createElement("div",null,a.createElement(u.Tx,{id:"community.publisher_with_suffix",publisherName:r[0].name,publishersSuffix:n}))},e.FigjamMetadataAuthorWithDetails=function(e){let r=e.publishers||[],n=t(r);return r.length>0?a.createElement("div",{className:v.qm},a.createElement("div",{className:v.Iy},a.createElement(u.Tx,{id:"community.by_publisher_with_suffix",publisherName:r[0].name,publishersSuffix:n}))):null},e.FigJamMetadata=function(t){var r;let n=l()(v.vX,{[v.FP]:t.showPaymentError});return a.createElement("div",{className:v.Oh},a.createElement(e.MetadataContainer,{className:l()(v.oU,!t.onClick&&v.UB),onClick:t.onClick},a.createElement("div",{className:d.cx.flex.justifyBetween.wFull.minW0.$},a.createElement(e.TextMetadataLayout,{primaryText:a.createElement(a.Fragment,null,a.createElement("div",{className:n},a.createElement("div",{className:v.uH},t.name),t.showLockIcon&&a.createElement(c.n,{svg:b,className:v.a1}),t.onClick&&a.createElement(c.n,{svg:I,className:v.vP}),t.showPaymentError&&a.createElement("div",{className:v.rL},a.createElement(g.bg,null)))),secondaryText:a.createElement(e.FigjamMetadataAuthorWithDetails,{publishers:t.publishers})}),t.rightAlignedElement&&t.rightAlignedElement),t.showUserAvatar&&(null==(r=t.publishers)?void 0:r[0])&&a.createElement(p.Yt,{user:t.publishers[0]})))},e.ResourceActionContainer=function(e){return a.createElement("div",{className:`${e.className} ${v.Eu}`},e.children)},e.ButtonWrapper=function(e){return a.createElement("div",{className:v.AQ},e.children)}})(i||(i={}))},433834:(e,t,r)=>{r.d(t,{$:()=>n,VM:()=>i,fb:()=>h,iT:()=>m});var n,i,a=r(652983),o=r(87608),l=r.n(o),s=r(571529),c=r(970740),d=r(828867),u=r(526763),p=r(442561);let m=a.memo(function(e){return a.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:l()(p.cc,e.containerStyle)},a.createElement("div",null,e.image),a.createElement("div",{className:e.bottomRowStyle??p.wZ},e.bottomRow))});function h(e){let t={backgroundClip:s.ZP.safari?"padding-box":""};return e.backgroundColor&&(t.backgroundColor=e.backgroundColor),a.createElement("div",{className:l()(p.HJ,e.className,e.removeBorder&&u.HR),onClick:e=>{e.preventDefault()},style:t},a.createElement("div",{className:e.customRatioClassName??u.jB}),a.createElement("div",{className:u.ZJ},e.children))}(e=>{e.Center=function(e){return a.createElement("div",{className:p.YW},e.children)},e.Cover=function(e){return a.createElement("div",{className:p.pP},e.children)},e.BottomLeft=function(e){return a.createElement("div",{className:p.os},e.children)},e.BottomRowRight=function(e){return a.createElement("div",{className:p.uA},e.children)}})(n||(n={})),(e=>{function t(e){let t=e.publishers&&e.publishers.length>0&&e.publishers[0];return a.createElement("div",{className:`${p.E3} ${e.className}`},t&&a.createElement("div",{className:p.cv},a.createElement(d.Kn,{entity:t,size:32,className:p.Nj})),a.createElement("div",{className:p.tx},a.createElement("div",{className:e.textClassName||p.ZL},e.name)))}e.NameMetadata=function(e){return a.createElement(t,{name:e.name,className:e.className,textClassName:e.textClassName})},e.AvatarAndNameMetadata=t,e.FullMetadata=function(e){if(!e.publishers||0===e.publishers.length)return null;let t=e.publishers.length-1,r=e.publishers.length>1?(0,c.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:t}):"";return a.createElement("div",{className:p.E3,onClick:e.onClick},a.createElement("div",{className:p.cv},a.createElement(d.Kn,{entity:e.publishers[0],size:32,className:p.Nj})),a.createElement("div",{className:p.tx},a.createElement("div",{className:p.eC},e.name),a.createElement("div",{className:e.hoverText?p.$J:p.q7},(0,c.t)("community.cards.by")," ",e.publishers[0].name," ",r),e.hoverText&&a.createElement("div",{className:p.Z2},e.hoverText)))}})(i||(i={}))},608898:(e,t,r)=>{r.d(t,{$B:()=>S,ob:()=>C});var n=r(652983),i=r(407908),a=r(448501),o=r(810373),l=r(435613),s=r(970740),c=r(793196),d=r(111120),u=r(131826),p=r(54055),m=r(339531),h=r(553667),_=r(167817),g=r(401649),f=r(569522),E=r(82873),y=r(378189),v=r(394970),b=r(714531),I=r(265029);let T=r(673111);function w({onClick:e,widget:t}){let r=(0,i.I0)(),l=n.useCallback(n=>{if(null==e||e(t.id),(0,o.v8)(n)){a.default.redirect((0,g.Xh)(t.id),"_blank");return}r(d.fv({view:"communityHub",subView:"widget",widgetId:t.id}))},[t.id,e,r]),s=(0,m.hb)(t);return{onTileClicked:l,version:s}}let S=(0,u.z7)(function(e){var t,r,a,o;let{onTileClicked:c,version:d}=w(e),u=!!e.widget.org_id,m=(0,i.v9)(e=>e.orgById),S=(0,i.v9)(({selectedView:e})=>e),C="search"===S.view,O=e.widget.org_id&&m[e.widget.org_id];return n.createElement(v.TM,{onClick:c,image:n.createElement(v.Jr,null,n.createElement(v.he.BottomLeft,null,n.createElement(f.Td,{editorType:d.manifest.editorType})),n.createElement("a",{href:(0,g.Xh)(e.widget.id)},!!(e.lastViewedAtForNewBadge&&Date.parse(e.widget.created_at)>Date.parse(e.lastViewedAtForNewBadge))&&n.createElement(_.gl,null),n.createElement(b.V,{src:d.redirect_snapshot_url||d.redirect_icon_url,context:"community"}))),bottomRow:n.createElement(n.Fragment,null,n.createElement(v._W.MetadataContainer,null,u?n.createElement(v._W.PublisherAvatar,{publishers:null==(t=e.widget.community_publishers)?void 0:t.accepted}):n.createElement(v._W.PublisherAvatarWithDropdown,{publishers:null==(r=e.widget.community_publishers)?void 0:r.accepted}),n.createElement(v._W.TextMetadataLayout,{primaryText:d.name,secondaryText:u?n.createElement(v._W.MetadataAuthor,{publishers:null==(a=e.widget.community_publishers)?void 0:a.accepted}):n.createElement(v._W.MetadataAuthorWithDropdown,{publishers:null==(o=e.widget.community_publishers)?void 0:o.accepted}),planIconEntity:C?O:null})),n.createElement(v._W.ResourceActionContainer,null,u?n.createElement(v._W.ButtonWrapper,null,n.createElement("div",{className:I.jR},n.createElement(l.n,{className:I.YG,svg:T}),n.createElement(s.Tx,{id:"community.cards.private"}),"OrgWidgetsView"===e.viewContext&&n.createElement(h.Z,{resource:e.widget}))):n.createElement(n.Fragment,null,n.createElement(v._W.ButtonWrapper,null,(0,p.g3)()&&n.createElement(E.oO,{metric:e.widget.view_count})),n.createElement(v._W.ButtonWrapper,null,n.createElement(y.p,{resource:e.widget,viewContext:e.viewContext})))))})});function C(e){let t=(0,i.v9)(t=>t.publishedWidgets[e.widgetId]);return t?n.createElement(S,{...e,widget:t}):null}(0,u.z7)(function(e){let{onTileClicked:t,version:r}=w(e);return n.createElement(v.TM,{onClick:t,image:n.createElement(v.Jr,null,n.createElement(v.he.TopLeft,null,n.createElement(c.MF,{resource:e.widget})),n.createElement(v.he.BottomLeft,null,n.createElement(f.Td,{editorType:r.manifest.editorType})),n.createElement("a",{href:(0,g.Xh)(e.widget.id)},n.createElement(b.V,{src:r.redirect_snapshot_url||r.redirect_icon_url,context:"community"}))),bottomRow:n.createElement(n.Fragment,null,n.createElement(v._W.MetadataContainer,null,n.createElement(v._W.TextMetadataLayout,{primaryText:r.name})),n.createElement(v._W.ResourceActionContainer,null,n.createElement(v._W.ButtonWrapper,null,(0,p.g3)()&&n.createElement(E.oO,{metric:e.widget.view_count})),n.createElement(v._W.ButtonWrapper,null,n.createElement(y.p,{resource:e.widget}))))})})},714531:(e,t,r)=>{r.d(t,{V:()=>E,H:()=>y});var n=r(652983),i=r(87608),a=r.n(i),o=r(805992),l=r(298715),s=r(936561),c=r(34258),d=r(346553),u=r(152913),p=r(761767),m=r(661539),h=r(475042),_=r(229949);let g="widget_snapshot--widgetSnapshotWithHoverBG--kKwGc",f=r(868982);function E(e){return n.createElement("div",{className:a()("widget_snapshot--widgetSnapshot--Xb4VG widget_snapshot--flexBase---cZA-",{[g]:e.context===p.gg.WHITEBOARD}),"data-testid":"widget-snapshot-static"},n.createElement("img",{src:e.src,alt:""}))}function y(e){let t=(0,h.M)(),r=(0,l.dZ)(),i=(0,s.Jh)(r[e.widget.plugin_id]),E="boolean"==typeof e.clickToInsert?e.clickToInsert&&!i:!i,{dragState:y,onInsertableResourcePointerDown:v}=(0,u.g)({clickToInsert:E,afterSuccessfulInsert:t,triggeredFrom:e.analytics.triggeredFrom,resource:e.widget,searchQuery:e.analytics.searchQuery}),b=(0,m.rV)(e.widget);return n.createElement(n.Fragment,null,n.createElement("div",{className:a()({"widget_snapshot--widgetSnapshotDraggable--JLzEE widget_snapshot--widgetSnapshot--Xb4VG widget_snapshot--flexBase---cZA-":!0,[_.Z]:!!y,"widget_snapshot--fillContainer--s26-z":e.fillContainer,[g]:e.context===p.gg.WHITEBOARD}),onPointerDown:v,"data-testid":"widget-snapshot-draggable"},n.createElement("button",{style:{visibility:"hidden",width:0,height:0},onClick:r=>{i||((0,c.A)({pluginID:e.widget.plugin_id,widgetName:e.widget.name,pluginVersionID:b?"":e.widget.id,triggeredFrom:"universal-insert"}),t())},ref:e.keyboardNavigationButtonRef}),n.createElement("img",{src:e.src,alt:"",draggable:!1}),n.createElement("div",{className:"widget_snapshot--developmentIconRow--pmYvU"},b&&n.createElement(o.f,{svg:f,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:f}))),n.createElement(d.v,{dragState:y}))}},817462:(e,t,r)=>{r.d(t,{Jk:()=>a,Ms:()=>o,Wn:()=>l,jW:()=>i});var n=r(524261);let i=(0,n.kH)("lazy_create_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(1006),r.e(5376)]).then(r.bind(r,866375));return{default:e.CreateCommentComposer}}}),a=(0,n.kH)("lazy_edit_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(1006),r.e(5376)]).then(r.bind(r,307838));return{default:e.EditCommentComposer}}}),o=(0,n.kH)("lazy_reply_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(1006),r.e(5376)]).then(r.bind(r,531313));return{default:e.ReplyCommentComposer}}}),l=(0,n.kH)("lazy_comment_editable_typeahead",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(1006),r.e(5376)]).then(r.bind(r,866375));return{default:e.CommentEditableTypeahead}}})},121310:(e,t,r)=>{r.d(t,{X:()=>i,l:()=>a});var n=r(71013);let i=e=>document.querySelector(`[data-comment-id="${e}"]`),a={fadeOut:async(e,t)=>{t||(t={resetNextComment:!1});let r=i(e);if(!r)return;let o=r.getBoundingClientRect();r.classList.add(n.kC);let l=r.nextSibling;return l&&(l.style.marginTop=`-${o.height-1}px`),await new Promise(e=>setTimeout(e,a.ANIMATION_LENGTH)),t.resetNextComment&&a.resetNextComment(null==l?void 0:l.dataset.commentId),null==l?void 0:l.dataset.commentId},resetNextComment:e=>{let t=e&&i(e);t&&(t.classList.add(n.vd),t.style.marginTop="0px",setTimeout(()=>t.classList.remove(n.vd),50))},fadeIn:e=>{let t=document.querySelector(`[data-comment-id="${e}"]`);if(!t)return;t.classList.remove(n.kC);let r=t.nextSibling;r&&(r.style.marginTop="0px")},ANIMATION_LENGTH:400}},119419:(e,t,r)=>{r.d(t,{k:()=>l});var n=r(795914);let i={},a={},o=(e,t)=>{if(a[e]){t(a[e]);return}i[e]||(i[e]=[],n.D.getVersions({id:e}).then(t=>{if(!t)return;let{data:r}=t,n=r.meta;a[e]=n,i[e].map(e=>e(n)),i[e]=[]})),i[e].push(t)};function l(e){return new Promise(t=>o(e,t))}},412596:(e,t,r)=>{r.d(t,{dG:()=>b});var n=r(652983),i=r(407908),a=r(600486),o=r(388899),l=r(31642),s=r(519781),c=r(618723),d=r(407598),u=r(212984),p=r(970740),m=r(289629),h=r(44571),_=r(721127),g=r(147298),f=r(291904),E=r(597085),y=r(505468),v=r(102677);let b=(0,f.Y3)(function(e){let{name:t,user:r,monetizedResource:o}=e,[s,c]=n.useState(!1),[h,f]=n.useState(null),[v,b]=n.useState(""),w=(0,i.I0)(),S=()=>{w((0,_.K4)({type:I,data:{user:r}}))},C=()=>{w((0,_.K4)({type:T,data:{user:r}}))};return n.createElement(y.cV,{size:"small",content:n.createElement("div",{className:u.cx.flexColumn.colorText.$},n.createElement(p.Tx,{id:"community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",resourceName:n.createElement("span",{className:u.cx.fontBold.$},t)}),n.createElement("div",{className:u.cx.my16.$},n.createElement(d.E,{value:h,onChange:e=>{f(e)}},Object.values(g.HZ).map(e=>n.createElement(d._,{className:u.cx.font11.selectNone.$,key:e,value:e},(0,m.V7)(e)))),h===g.HZ.OTHER?n.createElement("div",{className:u.cx.mt8.$},n.createElement(E.C,{value:v,onChange:e=>b(e.target.value),placeholder:(0,p.t)("community.buyer.refund_reason.add_additional_details"),maxLength:g.Q6})):null)),onConfirm:()=>{c(!0),(0,a.L9)("Request Refund Modal Confirm",{refundReason:h,refundOtherReasonText:v,monetizedResourceMetadataId:o.id}),l.ZP.post(`/api/community/buyer/${o.id}/refund`,{refund_reason:h,refund_other_reason_text:v}).then(()=>{c(!1),w(_.hV()),S()}).catch(e=>{c(!1),w(_.hV()),C()})},hideOnConfirm:!1,isLoading:s,confirmationTitle:n.createElement(p.Tx,{id:"community.buyer.need_a_refund"}),disableConfirm:!h,confirmText:n.createElement(p.Tx,{id:"general.confirm"}),cancelText:n.createElement(p.Tx,{id:"general.close"}),autoFocusCta:!1,dispatch:w,popStack:!0})},"CommunityRequestRefundModal"),I=(0,f.Y3)(function(e){let{user:t}=e,r=(0,i.I0)();return n.createElement(y.Rj,{size:"small",hide:o.ZT,title:(0,p.t)("community.buyer.refund_requested")},n.createElement(s.ol,{dispatch:r}),n.createElement(p.Tx,{id:"community.buyer.keep_an_eye_out",here:n.createElement(c.UU,{onClick:()=>{(0,h.ko)(t),r(_.hV())},trusted:!0},n.createElement(p.Tx,{id:"community.buyer.here"}))}),n.createElement("div",{className:v.UN},n.createElement(c.pJ,{onClick:()=>r(_.hV())},n.createElement(p.Tx,{id:"general.close"}))))},"CommunityRefundRequestedSuccessModal"),T=(0,f.Y3)(function(e){let{user:t}=e,r=(0,i.I0)();return n.createElement(y.cV,{size:"small",confirmationTitle:n.createElement(p.Tx,{id:"community.buyer.unable_to_process_refund"}),content:n.createElement("span",{className:u.cx.colorText.$},n.createElement(p.Tx,{id:"community.buyer.error_requesting_refund_please_contact_support"})),confirmText:n.createElement(p.Tx,{id:"community.buyer.get_support"}),onConfirm:()=>(0,h.nj)(t),cancelText:n.createElement(p.Tx,{id:"general.close"}),autoFocusCta:!1,dispatch:r})},"CommunityErrorRequestingRefundModal")},613551:(e,t,r)=>{r.d(t,{x:()=>c});var n=r(652983),i=r(970740),a=r(721127),o=r(646472),l=r(291904),s=r(505468);let c=(0,l.Y3)(function({error:e,dispatch:t,resourceType:r}){return n.createElement(s.cV,{confirmationTitle:r===o.Xh.PLUGIN?(0,i.t)("community.plugin_development.plugin_issue"):(0,i.t)("community.plugin_development.widget_issue"),content:e.text,onConfirm:()=>{t(a.eI())},dispatch:t,confirmText:(0,i.t)("general.done"),size:"small",destructive:!0,disableClickOutsideToHide:!0,hideOnConfirm:!1,hideCancel:!0,popStack:!0})},"DevelopmentPluginErrorModal",l.Et.YES)},512010:(e,t,r)=>{r.d(t,{Z:()=>U,f:()=>N});var n=r(652983),i=r(407908),a=r(600486),o=r(46347),l=r(391320),s=r(618723),c=r(44667),d=r(85808),u=r(212984),p=r(970740),m=r(367674),h=r(597837),_=r(65249),g=r(721127),f=r(761767),E=r(795153),y=r(951911),v=r(661465),b=r(410745),I=r(636357),T=r(929140),w=r(624431);let S=r(376833),C=r(665229);function O({text:e}){return n.createElement(_.x,{"data-testid":"extension-security-form-error",color:"danger"},e)}function A(e){let{canShowErrors:t}=(0,I.Q)();return t&&(0,y.mI)(e)}function N(e){let t=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!t||!t.index)return e;let[r,i,a]=t;return n.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,t.index),n.createElement("a",{href:a,target:"_blank",className:u.cx.colorTextBrand.cursorPointer.$},i),e.slice(t.index+r.length))}function L(e){let{onChange:t,question:r}=e,{prompt:i,value:a,placeholder:o}=r,l=A(r);return n.createElement("div",{className:u.cx.flex.flexColumn.gap8.$},i&&n.createElement("div",null,N(i)),n.createElement(s.Sc,{className:u.cx.wFull.$,value:a??"",onChange:t,placeholder:o}),l&&n.createElement(O,{text:(0,p.t)("community.publishing.data_security.incomplete_text")}))}function P(e){let{question:t,dispatch:r,path:i}=e,{prompt:a,options:o}=t,l=A(t);return n.createElement("div",{className:u.cx.flex.flexColumn.gap16.$},n.createElement(_.x,{fontWeight:"semi-bold"},a),n.createElement(n.Fragment,null,o.map((e,t)=>{let a=`path-${i.join("-")}-option-input-${t}`;return n.createElement("div",{className:u.cx.flex.flexColumn.$,key:`option-${t}`},n.createElement("div",{className:u.cx.flex.gap8.$},n.createElement("input",{type:"radio",id:a,checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:i[0],optionIndex:t})},className:u.cx.cursorPointer.$}),n.createElement("label",{htmlFor:a,className:u.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&n.createElement("div",{className:u.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,a)=>n.createElement(k,{key:`sub-question-${a}`,question:e,dispatch:r,path:i.concat(t,a)}))))})),l&&n.createElement(O,{text:(0,p.t)("community.publishing.data_security.incomplete_single_select")}))}function R(e){let{dispatch:t,path:r,question:i}=e,{prompt:a,options:o}=i,l=A(i);return n.createElement("div",{className:u.cx.flex.flexColumn.gap16.$},n.createElement(_.x,{fontWeight:"semi-bold"},a),n.createElement(n.Fragment,null,o.map((e,i)=>{let a=`path-${r.join("-")}-option-input-${i}`;return n.createElement("div",{className:u.cx.flex.flexColumn.$,key:`option-${i}`},n.createElement("div",{className:u.cx.flex.gap8.$},n.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{t({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:r[0],optionIndex:i})},id:a,className:u.cx.cursorPointer.$}),n.createElement("label",{htmlFor:a,className:u.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&n.createElement("div",{className:u.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,a)=>n.createElement(k,{key:`sub-question-${a}`,question:e,dispatch:t,path:r.concat(i,a)}))))})),l&&n.createElement(O,{text:(0,p.t)("community.publishing.data_security.incomplete_multi_select")}))}function k(e){let{question:t,dispatch:r,path:i}=e;switch(t.inputType){case"single_select":return n.createElement(P,{question:t,dispatch:r,path:i});case"multi_select":return n.createElement(R,{question:t,dispatch:r,path:i});case"text":return n.createElement(L,{question:t,onChange:e=>{1===i.length?r({type:"UPDATE_TEXT_QUESTION",questionIndex:i[0],value:e.currentTarget.value}):3===i.length&&r({type:"UPDATE_TEXT_SUBQUESTION",path:[i[0],i[1],i[2]],value:e.currentTarget.value})},path:i});default:return null}}function D(e){let{extensionType:t,securityForm:r,dispatch:i}=e,a="plugin"===t?n.createElement(p.Tx,{id:"community.publishing.security_form.plugin_description"}):n.createElement(p.Tx,{id:"community.publishing.security_form.widget_description"}),o="plugin"===t?n.createElement(p.Tx,{id:"community.publishing.security_form.plugin_sharing_description"}):n.createElement(p.Tx,{id:"community.publishing.security_form.widget_sharing_description"});return n.createElement("div",{className:u.cx.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},n.createElement("div",{className:u.cx.pb16.$},n.createElement(_.x,{i18nId:"community.publishing.security_form.header",fontSize:14,fontWeight:"medium"})),n.createElement("div",{className:u.cx.pb16.$},a),n.createElement("div",{className:u.cx.pb16.$},o,n.createElement("a",{href:"plugin"===t?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:u.cx.colorTextBrand.cursorPointer.$},n.createElement(p.Tx,{id:"community.publishing.security_form.learn_more"}))),n.createElement("div",{className:u.cx.flex.flexColumn.gap32.$},r.questions.map((e,t)=>n.createElement(k,{key:`question-${t}`,question:e,dispatch:i,path:[t]}))))}function M({onDiscard:e,onDone:t,securityFormFromDB:r,localSecurityFormResponse:o,onOptOut:s,currentFormStatus:c,extensionId:d}){let _=n.useMemo(()=>!(0,l.qt)(o,r),[o,r]),{canShowErrors:f,numberOfErrors:E,optedOutOfSecurityForm:v,extensionType:T}=(0,I.Q)(),w=(0,y.dM)(r),S=(0,i.I0)();return n.createElement("div",{className:u.cx.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$},!w&&n.createElement("button",{className:u.cx.bgTransparent.noWrap.if(v,u.cx.colorTextSecondary,u.cx.colorTextBrand.cursorPointer).$,onClick:()=>{S((0,g.K4)({type:b.R,data:{onConfirm:s,status:c,extensionType:T},showModalsBeneath:!0})),(0,a.L9)("Data Security Plugin Form",{action:"Remove security details",extensionType:T,extensionId:d})},disabled:v},n.createElement(p.Tx,{id:"community.publishing.security_form.opt_out_button"})),n.createElement(m.j,{width:"fill-parent",horizontalAlignItems:"end"},n.createElement(h.z,{variant:"secondary",onClick:()=>{e(),(0,a.L9)("Data Security Plugin Form",{action:"Discard changes",extensionType:T,extensionId:d})},disabled:!_},n.createElement(p.Tx,{id:"community.publishing.security_form.discard_changes"})),n.createElement(h.z,{variant:"primary",onClick:t,disabled:f&&E>0},n.createElement(p.Tx,{id:"general.done"}))))}function F({currentFormStatus:e}){let t,r,i;if(!e)return null;switch(e){case f.Ri.APPROVED:t=n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.approved.title",fontWeight:"semi-bold"})),n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.approved.description"}))),r=S,i="success";break;case f.Ri.PENDING:t=n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.pending.title",fontWeight:"semi-bold"})),n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.pending.description"}))),r=C,i="brand";break;case f.Ri.REJECTED:t=n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.rejected.title",fontWeight:"semi-bold"})),n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.rejected.description"})),n.createElement("div",null),n.createElement("div",null,n.createElement(_.x,{i18nId:"community.publishing.security_banner.rejected.description.check_email"}))),r=C,i="brand";break;default:(0,o.vE)(e)}return n.createElement(c.X,{iconSrc:r,variant:i,orientation:"vertical"},t)}function x({localSecurityFormResponse:e,securityFormFromDB:t,setSecurityFormResponse:r,extensionType:i,onDone:a,currentFormStatus:o,existingSecurityFormResponse:l,extensionId:s}){let c={questions:t.questions,version:t.version},[u,p]=(0,n.useReducer)(T.q,e??c),{setCanShowErrors:m,setOptedOutOfSecurityForm:h,optedOutOfSecurityForm:_}=(0,I.Q)();return n.useEffect(()=>{r(u),(0,y.dM)(u)||h(!1)},[r,u,h]),n.createElement(n.Fragment,null,n.createElement(d.l,{className:w.L,maxHeight:800},n.createElement(F,{currentFormStatus:o}),n.createElement(D,{securityForm:u,dispatch:p,extensionType:i})),n.createElement(M,{onOptOut:()=>{p({type:"RESET_FORM"}),h(!0)},onDiscard:()=>{p({type:"DISCARD_CHANGES",originalState:c}),m(!1)},onDone:()=>{if((0,y.xX)(e,l)&&!_){m(!0);return}a()},securityFormFromDB:t,localSecurityFormResponse:e,currentFormStatus:o,extensionId:s}))}function U(e){let{version:t,setSecurityFormResponse:r,extensionType:i,localSecurityFormResponse:a,existingSecurityFormResponse:o,onDone:l,optedOutOfSecurityForm:s,setOptedOutOfSecurityForm:c,extensionId:d}=e,[u]=(0,E.aM)(B(t),{enabled:!o}),p=o?{version:String(o.formVersion),questions:o.responses}:null,m=p??("loaded"===u.status?u.data:null);return m?n.createElement(I.T,{localSecurityFormResponse:a,existingSecurityFormResponse:o,optedOutOfSecurityForm:s,setOptedOutOfSecurityForm:c,extensionType:i},n.createElement(x,{localSecurityFormResponse:a,securityFormFromDB:m,setSecurityFormResponse:r,extensionType:i,onDone:l,currentFormStatus:(null==o?void 0:o.status)??null,existingSecurityFormResponse:o,extensionId:d})):null}let B=E.t1.Query({fetch:async e=>await v.j3.getBlankSecurityForm(e)})},959522:(e,t,r)=>{r.d(t,{E1:()=>L,Sw:()=>C,cp:()=>N,e5:()=>O,vW:()=>A});var n,i=r(652983),a=r(407908),o=r(439252),l=r(65961),s=r(810373),c=r(925705),d=r(293351),u=r(782051),p=r(654230),m=r(435613),h=r(970740),_=r(573196),g=r(225592),f=r(496478),E=r(343878),y=r(196532),v=r(643826),b=r(740280),I=r(621376),T=r(597927);let w=r(328630),S=r(244573);var C=((n=C||{}).FILES="FILES",n.PLUGINS="PLUGINS",n.WIDGETS="WIDGETS",n);function O(e){return i.createElement("div",{className:T.YE},i.createElement("div",{className:T.oF},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),i.createElement("div",{className:T.RM},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function A(e){var t;let r=(0,a.v9)(e=>e.currentUserOrgId),n=(0,o.AA)(r||null,l.Plq.CAN_PUBLISH_TO_COMMUNITY),s=i.useMemo(()=>{let e=n.data||[];return c.IE.loaded(e.filter(e=>e.parent_org_id===r))},[n,r]),d=(t=e.editorTypes,i.useMemo(()=>{if(!t||1!==t.length)return s;let e=s.data||[];return c.IE.loaded(e.filter(e=>e.editor_type===t[0]))},[s,t])),u=i.useMemo(()=>"loaded"!==d.status?[]:d.data.map(e=>({type:E.YU.FILE,file:e})),[d]);return 0===u.length?i.createElement(O,{tab:"FILES"}):i.createElement("div",{className:T.eC,onClick:e.deselectActiveFile,role:"presentation"},u.map(t=>{if(t.type!==E.YU.FILE)return null;let r=t.file;if(e.filterFn&&!e.filterFn(r))return null;let n=e.disableCmtyLibraries&&r.hub_file&&(0,_.nD)(r.hub_file);return i.createElement(P,{key:r.key,file:r,disabled:n,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function N(e){let t=(0,y.Mn)(),r=(0,a.v9)(e=>e.authedProfilesById),n=(0,a.v9)(e=>e.figFileDuplicatedFromHubFile);return e.searchResults?0===e.searchResults.length?i.createElement("div",{className:T.YE},i.createElement("div",{className:T.oF},i.createElement(h.Tx,{id:"community.universal_posting_modal.recent_editable_files_search.no_files_matching",searchQuery:i.createElement("span",{className:T.w4},e.activeSearchQuery)}))):i.createElement("div",{className:T.eC,onClick:e.deselectActiveFile,role:"presentation"},e.searchResults.filter(i=>{var a;return i.model.editor_type&&(void 0===e.editorTypes||(null==(a=e.editorTypes)?void 0:a.includes(i.model.editor_type)))&&(0,f.zY)(i.model,{...t,authedProfilesById:r,figFileDuplicatedFromHubFile:n},null)}).map(t=>{let r=t.model,n=e.disableCmtyLibraries&&r.hub_file&&(0,_.nD)(r.hub_file);return i.createElement(P,{key:r.key,file:r,disabled:n,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})})):i.createElement("div",{className:T.xf},i.createElement(u.TK,{size:"small"}))}function L(e){let{query:t,setQuery:r,setSearchResults:n,hasCloseButton:o=!0}=e,l=(0,a.I0)(),c=i.useCallback(()=>{t&&(l(g.Ft({entryPoint:"community:universal_posting"})),n(null),b.D_.getFigFiles({query:t,desc:!0,sort:v.Gl.RELEVANCY,orgId:void 0,isGlobal:!0}).then(({data:{meta:e}})=>{n(e.results)}))},[t,l,n]),u=i.useCallback(()=>{r("")},[r]),_=i.useCallback(e=>(e.keyCode===s.sr.ENTER&&c(),!0),[c]),f=i.useCallback(e=>{r(e)},[r]);i.useEffect(()=>{let e=setTimeout(c,300);return()=>clearTimeout(e)},[t,c]);let E=i.useRef(null),{searchInputRef:y,onMouseDown:I,onMouseUp:C,onBlur:O,onClearSearchClick:A,onSearchKeyDown:N,onSearchChange:L}=(0,p.Hz)({...e,focusOnMount:!1,clearSearch:u,onChange:f,onSubmit:c,isKeyDownHandled:_},E);return i.createElement("div",{className:T.AP},i.createElement(m.n,{className:T.RL,svg:S}),i.createElement(d.Q,{ref:y,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),className:T.eK,value:t,onMouseDown:I,onMouseUp:C,onBlur:O,onChange:L,onKeyDown:N,spellCheck:!1}),!!t&&o&&i.createElement(m.n,{className:T.FZ,svg:w,onClick:A}))}function P(e){let{file:t,disabled:r,setActiveFile:n,activeFileKey:a}=e;return i.createElement(I.ZJ,{onClick:e=>{e.stopPropagation(),r||n(t)},file:t,subtitle:i.createElement(I.q$,{file:t}),activeFileUsers:[],currentUser:null,isRenaming:!1,isSelected:!r&&a===t.key,disabled:r,tooltipText:r?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},801068:(e,t,r)=>{r.d(t,{EZ:()=>h,HC:()=>g,WT:()=>_});var n=r(652983),i=r(407908),a=r(448501),o=r(810373),l=r(111120),s=r(413810),c=r(828867),d=r(839929);let u={underline:d.De,noUnderline:d.a3};class p extends n.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,o.v8)(e)||this.props.openInNewTab){a.default.redirect(this.props.hrefPath||"","_blank");return}let t=m(this.props);this.props.dispatch(l.fv(t))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},t=n.createElement(n.Fragment,null,this.props.showAvatar&&n.createElement("div",{className:this.props.avatarClassName||d.Ix},n.createElement(c.Kn,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&n.createElement("span",{className:this.props.childrenClassName||d.C$},this.props.publisher.name));return n.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?n.createElement("span",{className:this.props.childrenClassName||d.n3},t):n.createElement("a",{href:`/@${this.props.publisher.profile_handle}`,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},t))}}let m=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),h=(0,i.$j)((e,t)=>{let r=m(t);return{hrefPath:(0,s.np)(e,r),authorLinkStyle:"communityHub"===e.selectedView.view&&"landing"===e.selectedView.subView?u.noUnderline:u.underline}})(p),_=(0,i.$j)((e,t)=>({hrefView:m(t),hrefPath:(0,s.np)(e,m(t)),authorLinkStyle:u.underline}))(p);function g(e){let t=(0,i.I0)(),r={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},c=(0,i.v9)(e=>(0,s.np)(e,r));return n.createElement("a",{href:`/@${e.profile.profile_handle}`,className:d.yZ,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,o.v8)(e)){a.default.redirect(c||"","_blank");return}t(l.fv(r))}},e.children)}},162586:(e,t,r)=>{r.d(t,{S:()=>v});var n,i=r(652983),a=r(407908),o=r(970740),l=r(435452),s=r(968034),c=r(573196),d=r(215698),u=r(24591),p=r(721127),m=r(692379),h=r(448694),_=r(54055),g=r(70918),f=r(646472),E=r(225468),y=r(921396);function v(e){var t,r,s;let{resource:d,viewContext:u}=e,p=(0,a.v9)(e=>e.authedActiveCommunityProfile),m=(0,_.Kk)(p),h=(0,c.Cd)(d.id,(0,c.yA)(d)),g=!!(null==(t=h.data)?void 0:t[0]),f=n.useLikeActions(d,!!(null==(r=h.data)?void 0:r[0]),(null==(s=h.data)?void 0:s[1])||null,u);return m?i.createElement("div",{"data-tooltip-type":E.fR.TEXT,"data-tooltip":(0,o.t)("community.likes.to_like_switch_to_your_personal_profile"),"data-tooltip-show-immediately":!0},i.createElement(l.v,{isResourceLiked:!1,shouldTriggerFunHearts:!1,disabled:!0})):i.createElement(l.v,{onClick:f(),isResourceLiked:g,shouldTriggerFunHearts:!!(!g&&p&&!m)})}(n||(n={})).useLikeActions=function(e,t,r,n){let i=(0,a.I0)(),o=(0,g.xJ)(),l=(0,s.X)(),c=()=>{(0,h.T6)(b()),(0,f.sg)(e)?i(d.yv({hubFileId:e.id})):(0,f._4)(e)?i(u.o({id:e.id,resourceType:f._g.WIDGET})):i(u.o({id:e.id,resourceType:f._g.PLUGIN}))},_=e=>{if(e.stopPropagation(),o){if(!o.community_profile_id){i(p.K4({type:y.WV,data:{userId:o.id,variations:[y.u_.OPT_IN],onFinish:()=>c()}}));return}c()}},E=t=>{if(t.stopPropagation(),!o)throw Error(`Tried to unlike a ${v} as a signed out user`);(0,h.T6)(b()),(0,f.sg)(e)?i(d.jb({hubFileId:e.id,likeId:r||void 0})):(0,f._4)(e)?i(u.x({id:e.id,resourceType:f._g.WIDGET,likeId:r||void 0})):i(u.x({id:e.id,resourceType:f._g.PLUGIN,likeId:r||void 0}))},v=(0,f.sg)(e)?"hub file":(0,f._4)(e)?"widget":"plugin",b=()=>({action:(0,f.sg)(e)?t?m.N0.HUB_FILE_UNLIKE:m.N0.HUB_FILE_LIKE:(0,f._4)(e)?t?m.N0.WIDGET_UNLIKE:m.N0.WIDGET_LIKE:t?m.N0.PLUGIN_UNLIKE:m.N0.PLUGIN_LIKE,pluginId:e.id,profileId:e.publisher.id,viewContext:n,...l});return function(){return t?e=>E(e):e=>_(e)}}},501713:(e,t,r)=>{r.d(t,{C4:()=>d,Di:()=>u,bD:()=>h,br:()=>g,eu:()=>m,t1:()=>_,uX:()=>E,w8:()=>p});var n=r(652983),i=r(768358),a=r(177944),o=r(970740),l=r(587487),s=r(498266),c=r(752487);let d="profile_admin_dropdown",u="community-tab",p="community-comments-on-focus",m="seen_community_comments_compose",h="seen_community_comments_tips",_="seen_community_profile_admin_dropdown_onboarding",g="seen_community_monetization_metrics_tab_onboarding";function f({dismissModal:e}){let t=n.useRef(null),r=n.useCallback((0,i.D)(()=>{t.current&&(t.current.style.opacity="0")},0,!0),[t]),s=n.useCallback((0,i.D)(()=>{t.current&&(t.current.style.opacity="1")},450),[t]);n.useEffect(()=>(window.addEventListener("scroll",r,!1),window.addEventListener("scroll",s,!1),()=>{window.removeEventListener("scroll",r,!1),window.removeEventListener("scroll",s,!1)}),[r,s]);let d=n.useCallback(e=>{let r=t.current;r&&(e.isIntersecting?r.style.visibility="visible":r.style.visibility="hidden")},[t]);return n.createElement(l.Qm,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:t,className:c.nK},n.createElement(a.X,{onIntersectionChange:d}),n.createElement("div",{className:c.XW},n.createElement(o.Tx,{id:"community.onboarding.see_more_of_what_you_love"})),n.createElement(o.Tx,{id:"community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"}))}function E({dismissModal:e}){return n.createElement(l.Qm,{width:302,targetKey:d,dismissModal:e},n.createElement("div",{className:c.XW},n.createElement(o.Tx,{id:"community.onboarding.use_community_as_an_org_or_team"})),n.createElement(o.Tx,{id:"community.onboarding.switch_to_browsing_community_as_an_admin_to_save_plugins_and_manage_content_published_by_your_org_or_team"}))}e=>n.createElement(f,{...e}),s.w8.SELF_CONTAINED},128322:(e,t,r)=>{r.d(t,{q:()=>z});var n,i=r(652983),a=r(407908),o=r(600486),l=r(324906),s=r(269658),c=r(810373),d=r(519781),u=r(618723),p=r(435613),m=r(970740),h=r(644383),_=r(819190),g=r(244311),f=r(721127),E=r(238809),y=r(158774),v=r(155838),b=r(54159),I=r(339531),T=r(927045),w=r(646472),S=r(661539),C=r(225468),O=r(505468),A=r(425285),N=r(291904),L=r(668849),P=r(255267),R=r(592035),k=r(442296),D=r(712212),M=r(616635);let F=r(349984),x=r(981051),U=(0,v.D)();var B=((n=B||{}).CHOOSE_EDITOR_TYPE="choose_editor_type_step",n.CHOOSE_TEMPLATE="choose_template_step",n.SUCCESS_SCREEN="success_screen_step",n.HIDDEN="hidden",n);function V({children:e,onClick:t}){return i.createElement("div",{role:"button",onClick:t,tabIndex:0},e)}function G({resourceType:e,showFigmaDesignOption:t,showFigJamOption:r,selectedEditorTypes:n,setSelectedEditorTypes:a}){return i.createElement(i.Fragment,null,i.createElement(K,{isSelected:n.includes(S.IP.FIGMA)&&n.includes(S.IP.FIGJAM),image:i.createElement(D.Z.editorTypes.figmaDesignAndFigJam,null),titleText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_and_figjam":"community.plugin_development.plugin_creation_editor_option_figma_design_and_figjam"),descriptionText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_and_figjam_description":"community.plugin_development.plugin_creation_editor_option_figma_design_and_figjam_description"),onSelect:()=>a([S.IP.FIGMA,S.IP.FIGJAM])}),t&&i.createElement(K,{isSelected:n.includes(S.IP.FIGMA)&&1===n.length,image:i.createElement(D.Z.editorTypes.figmaDesign,null),titleText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design":"community.plugin_development.plugin_creation_editor_option_figma_design"),descriptionText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figma_design_description":"community.plugin_development.plugin_creation_editor_option_figma_design_description"),onSelect:()=>a([S.IP.FIGMA])}),r&&i.createElement(K,{isSelected:n.includes(S.IP.FIGJAM)&&1===n.length,image:i.createElement(D.Z.editorTypes.figJam,null),titleText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figjam":"community.plugin_development.plugin_creation_editor_option_figjam"),descriptionText:(0,m.t)(e===w.Xh.WIDGET?"community.plugin_development.widget_creation_editor_option_figjam_description":"community.plugin_development.plugin_creation_editor_option_figjam_description"),onSelect:()=>a([S.IP.FIGJAM])}))}function H({selectedTemplate:e,setSelectedTemplate:t}){let r=(0,a.v9)(e=>(0,L.NE)(e.selectedView));return i.createElement(i.Fragment,null,r?i.createElement(i.Fragment,null,i.createElement(K,{isSelected:"tab"===e,onSelect:()=>t("tab"),image:i.createElement(D.Z.templates.tab,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_tab"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_tab_description")}),i.createElement(K,{isSelected:"codegen"===e,onSelect:()=>t("codegen"),image:i.createElement(D.Z.templates.codegen,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_codegen"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_codegen_description")})):i.createElement(i.Fragment,null,i.createElement(K,{isSelected:"empty"===e,onSelect:()=>t("empty"),image:i.createElement(D.Z.templates.empty,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_default"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_default_description")}),i.createElement(K,{isSelected:"runOnce"===e,onSelect:()=>t("runOnce"),image:i.createElement(D.Z.templates.runOnce,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_run_once"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_run_once_description")}),i.createElement(K,{isSelected:"withUI"===e,onSelect:()=>t("withUI"),image:i.createElement(D.Z.templates.withUI,null),titleText:(0,m.t)("community.plugin_development.plugin_creation_template_option_with_ui"),descriptionText:(0,m.t)("community.plugin_development.plugin_creation_template_option_with_ui_description")})))}function W({widgetCreationType:e,setWidgetCreationType:t}){return i.createElement(i.Fragment,null,i.createElement(K,{isSelected:"empty"===e,image:i.createElement(D.Z.widgetOptions.empty,null),titleText:(0,m.t)("community.plugin_development.widget_creation_option_default"),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_default_description"),onSelect:()=>t("empty")}),i.createElement(K,{isSelected:"simple"===e,image:i.createElement(D.Z.widgetOptions.simple,null),titleText:(0,m.t)("community.plugin_development.widget_creation_option_simple"),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_simple_description"),onSelect:()=>t("simple")}),i.createElement(K,{isSelected:"with_iframe"===e,image:i.createElement(D.Z.widgetOptions.withIframe,null),titleText:i.createElement("span",{style:{letterSpacing:"-0.5px"}},(0,m.t)("community.plugin_development.widget_creation_option_with_iframe")),descriptionText:(0,m.t)("community.plugin_development.widget_creation_option_with_iframe_description"),onSelect:()=>t("with_iframe")}))}function K({isSelected:e,onSelect:t,image:r,titleText:n,descriptionText:a}){return i.createElement("div",{className:e?M.tN:M.kd,onClick:t},i.createElement("div",{className:e?M.XJ:M.JA},i.createElement("div",{className:M.k0},e?i.createElement(p.n,{svg:F}):i.createElement("div",{className:M.g5})),r,i.createElement("div",{className:M.V6},i.createElement("div",{className:M.zy},n),i.createElement("div",null,a))))}let z=(0,N.Y3)(function({resourceType:e}){let t=(0,a.I0)(),r=(0,a.v9)(e=>(0,L.NE)(e.selectedView)),[n,v]=i.useState(""),[N,F]=i.useState(-1),[B,K]=(0,l.Q)(r?"choose_template_step":"choose_editor_type_step",`${e}_create_flow_change_step`,{productType:(0,I.Fl)()===S.IP.FIGMA?"design":"whiteboard"}),[z,Z]=i.useState(r?"tab":"runOnce"),[Y,j]=i.useState(r?[S.IP.DEV]:[S.IP.FIGMA,S.IP.FIGJAM]),[$,q]=i.useState("simple"),[X,J]=i.useState(!1),Q=()=>n.replace(/[^0-9a-zA-Z\.\-\+!%&_ =]/g,"_").trim(),ee=async({resourceId:r,template:n})=>{if(""===Q())return t(h.R.enqueue({message:(0,m.t)("community.plugin_development.please_add_some_alphanumeric_text_to_your_resource_name"),error:!0})),null;n.name=Q();try{let i=await ((0,T.SJ)()?U.writeNewExtensionDirectoryToDisk(n):U.writeNewExtensionToDisk(Q(),n.files));if(i)return(0,o.L9)(`Added New ${e}`,{how:"created",[e+"Id"]:r,version:b.i_,isWidget:e===w.Xh.WIDGET,productType:(0,I.Fl)()===S.IP.FIGMA?"design":"whiteboard"}),t(_.Pi({localFileId:i,resourceType:e})),i}catch(e){console.error(e)}return t(h.R.enqueue({message:(0,m.t)("community.plugin_development.unable_to_write_resource_to_disk"),error:!0})),null},et=async()=>{if(!n){J(!0);return}let r="";try{let n=await (0,I.a2)(e);t(g.jb({publishedPlugins:[n],src:"onGenerateNewClick"})),K("hidden"),r=n.id}catch(e){t(h.R.enqueue({message:(0,m.t)("community.plugin_development.unable_to_generate_resource_id"),error:!0}));return}let i=e===w.Xh.PLUGIN?T.qq[z]:T.B$[$],a=await ee({resourceId:r,template:i(n,r,Y)});null!=a?(K("success_screen_step"),F(a)):t(f.hV())},er=()=>{t(f.hV()),y.Gr.dispatch(E.KD({initialX:0,initialY:0,initialTab:el?"widget"===e?P.E.WIDGETS:P.E.PLUGINS:void 0,initialFdResourceTab:eo?"widget"===e?R.P.WIDGET:R.P.PLUGIN:void 0,initialFdView:eo?"development":void 0,scrollDevelopmentSectionIntoView:el}))},en=()=>{U.openExtensionDirectory(N)},ei=(0,a.v9)(e=>"fullscreen"===e.selectedView.view),ea=(0,A.yD)(),eo="design"===ea||"dev_handoff"===ea,el="whiteboard"===ea,es=!ei||eo,ec=!ei||el,ed=e=>{"Enter"===e.key||e.keyCode===c.sr.ENTER?"choose_editor_type_step"===B?K("choose_template_step"):"choose_template_step"===B?et():"success_screen_step"===B&&er():("Escape"===e.key||e.keyCode===c.sr.ESCAPE)&&er()},eu=i.createElement(i.Fragment,null,i.createElement(u.DF,{className:M.LI,onClick:et,disabled:""===n},i.createElement("span",{"data-tooltip":e===w.Xh.PLUGIN?(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_plugin"):(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_widget"),"data-tooltip-type":""===n?C.fR.TEXT:null},i.createElement(m.Tx,{id:"community.plugin_development.save_as"})))),ep=i.createElement("div",null,i.createElement("div",{className:M.mw},i.createElement(m.Tx,{id:"community.general.name"})),i.createElement(u.Sc,{value:n,onChange:e=>{e.currentTarget.value&&X&&J(!1),v(e.currentTarget.value)},className:M.rw,placeholder:e===w.Xh.PLUGIN?(0,m.t)("community.plugin_development.plugin_name"):(0,m.t)("community.plugin_development.widget_name"),autoFocus:!0,"data-tooltip":e===w.Xh.PLUGIN?(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_plugin"):(0,m.t)("community.plugin_development.you_must_provide_a_name_for_your_widget"),"data-tooltip-type":C.fR.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip-key":"plugin-new-development-modal","data-tooltip-ignore-mouse":!0}),i.createElement(k.Xf,{visible:X,tooltipKey:"plugin-new-development-modal"}));return"choose_editor_type_step"===B?(()=>{let r=ei?M.EU:M.A2;return i.createElement(V,{onClick:()=>J(!1)},i.createElement(O.u_,{className:M.Z,dispatch:t,onKeyDown:ed,disableClickOutsideToHide:!0,onModalClick:e=>e.stopPropagation()},i.createElement(d.ol,{dispatch:t}),i.createElement("div",{className:M.fO},i.createElement("div",null,e===w.Xh.PLUGIN?(0,m.t)("community.plugin_development.create_plugin"):(0,m.t)("community.plugin_development.create_widget"))),i.createElement("div",{className:M.Ag},ep,i.createElement("div",{className:r},i.createElement(G,{resourceType:e,showFigmaDesignOption:es,showFigJamOption:ec,selectedEditorTypes:Y,setSelectedEditorTypes:j}))),i.createElement("div",{className:M.Nf},i.createElement("div",{className:M.OZ},i.createElement(u.DF,{className:M.LI,onClick:()=>K("choose_template_step")},i.createElement(m.Tx,{id:"general.next"}))))))})():"choose_template_step"===B?(()=>{let n=r?M.EU:M.A2;return i.createElement(V,{onClick:()=>J(!1)},i.createElement(O.u_,{className:M.Z,dispatch:t,onKeyDown:ed,disableClickOutsideToHide:!0},i.createElement(d.ol,{dispatch:t}),i.createElement("div",{className:M.fO},i.createElement("div",null,e===w.Xh.PLUGIN?i.createElement(m.Tx,{id:"community.plugin_development.create_plugin"}):i.createElement(m.Tx,{id:"community.plugin_development.create_widget"}))),i.createElement("div",{className:M.Ag},ep,i.createElement("div",{className:n},e===w.Xh.PLUGIN?i.createElement(H,{selectedTemplate:z,setSelectedTemplate:Z}):i.createElement(W,{widgetCreationType:$,setWidgetCreationType:q}))),i.createElement("div",{className:M.Nf},i.createElement("div",{className:M.rM},!(0,L.NE)(s.V.getState().selectedView)&&i.createElement(u.PL,{className:M.LI,onClick:()=>K("choose_editor_type_step")},i.createElement(p.n,{svg:x,className:M.Bo}),i.createElement(m.Tx,{id:"general.back"})),eu))))})():"success_screen_step"===B?(()=>{let r=i.createElement(u.rU,{href:`https://www.figma.com/${e}-docs/`,trusted:!0},i.createElement(m.Tx,{id:"community.plugin_development.setup_guide"})),n=i.createElement(u.rU,{href:"https://discord.gg/xzQhe2Vcvx",trusted:!0},i.createElement(m.Tx,{id:"community.plugin_development.join_our_discord"}));return i.createElement(O.u_,{className:M.pH,dispatch:t,onKeyDown:ed,disableClickOutsideToHide:!0},i.createElement(d.ol,{dispatch:t}),i.createElement("div",{className:M.xi},i.createElement("div",{className:M.d$},e===w.Xh.PLUGIN?(0,m.t)("community.plugin_development.new_plugin_created"):(0,m.t)("community.plugin_development.new_widget_created")),i.createElement("div",{className:M.Ag},i.createElement("span",{className:M.iN},e===w.Xh.PLUGIN?i.createElement(m.Tx,{id:"community.plugin_development.follow_our_setup_guide_plugin",setupGuideLink:r}):i.createElement(m.Tx,{id:"community.plugin_development.follow_our_setup_guide_widget",setupGuideLink:r})),i.createElement("div",{className:M.qP},e===w.Xh.PLUGIN?i.createElement(m.Tx,{id:"community.plugin_development.connect_with_other_plugin_developers",joinOurDiscordLink:n}):i.createElement(m.Tx,{id:"community.plugin_development.connect_with_other_widget_developers",joinOurDiscordLink:n}))),i.createElement("div",{className:M.Nf},i.createElement("div",{className:M.xm},i.createElement(u.PL,{onClick:en},i.createElement(m.Tx,{id:"community.plugin_development.open_folder"})),i.createElement(u.DF,{className:M.LI,onClick:er},i.createElement(m.Tx,{id:"general.done"}))))),i.createElement("div",{className:M.E},e===w.Xh.WIDGET?i.createElement(D.Z.widgetSuccess,null):i.createElement(D.Z.pluginSuccess,null)))})():i.createElement(i.Fragment,null)},"PluginNewDevelopmentModal")},343630:(e,t,r)=>{r.d(t,{Db:()=>M,mW:()=>U});var n=r(652983),i=r(407908),a=r(600486),o=r(19516),l=r(388899),s=r(435613),c=r(212984),d=r(970740),u=r(968034),p=r(573196),m=r(883906),h=r(111120),_=r(721127),g=r(809377),f=r(322186),E=r(442152),y=r(761767),v=r(339531),b=r(661539),I=r(104529),T=r(229693),w=r(656145),S=r(512169),C=r(13155),O=r(569522),A=r(388397);let N=r(295799),L=r(428179);function P(e,t,r,n){(0,a.L9)("extension_opened_from_community",{extension_id:e,file_type:t,editor_type:r,...n})}function R(e){return"whiteboard"===e?w.I1.WHITEBOARD:w.I1.DESIGN}function k(e){return n.createElement("button",{type:"button",className:A.j2,onClick:e.onClick,"data-testid":e.dataTestId},n.createElement("div",{className:A.jw},n.createElement("div",{className:c.cx.w32.flex.justifyCenter.$},e.icon),n.createElement("div",{className:A.Lc},e.text)),e.rightIcon)}function D(e){let t=e.fileName?e.fileName:e.playgroundFile?(0,d.t)("community.using.playground_file"):e.fileIconType===w.I1.WHITEBOARD?(0,d.t)("community.using.figjam_board"):(0,d.t)("community.using.figma_file");return n.createElement(k,{onClick:e.onClick,"data-testid":e.dataTestId,icon:n.createElement("div",{className:A.d5},n.createElement(O.ZJ,{fileIconType:e.fileIconType})),text:t})}function M(e){let t;let r=n.createElement(O.Td,{editorType:[e.editorType]});return t=e.fileName?e.fileName:e.playgroundFile?(0,d.t)("community.using.playground_file"):e.editorType===b.IP.FIGMA?(0,d.t)("community.using.figma_file"):(0,d.t)("community.using.figjam_board"),n.createElement("button",{type:"button",className:A.j2,onClick:e.onClick,"data-testid":e.dataTestId},n.createElement("div",{className:A.jw},n.createElement("div",{className:A.d5},r),n.createElement("div",{className:A.Lc},t)))}function F(e){let t=(0,i.I0)(),{files:r,resource:a,editorTypes:o}=e,l=(0,u.X)(),s=e=>{if(!e.org_id)return;let r=(0,p.$o)(a),n={extension:{pluginId:r.plugin_id,iconUrl:r.redirect_icon_url,name:r.name},isWidget:a.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};t((0,_.K4)({type:T.L,data:n}))},c=e=>{P(a.id,"existing_file",e.editor_type,l),t(m.O6({resource:a,fullscreenEditorType:e.editor_type===y.gg.DESIGN&&(0,v.l9)(o)?"dev_handoff":(0,v.yx)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return(null==r?void 0:r.length)===0?null:n.createElement(n.Fragment,null,n.createElement("div",{className:A.Wv},n.createElement(d.Tx,{id:"community.detail_view.recent_files"})),n.createElement("div",{className:A.ne},r?r.map(e=>n.createElement(D,{key:e.key,fileIconType:e.editor_type===y.gg.DESIGN&&e.last_published_at?w.I1.PUBLISHED:e.editor_type===y.gg.DESIGN?w.I1.DESIGN:w.I1.WHITEBOARD,fileName:e.name,onClick:()=>{t(h.kp()),e.can_run?c(e):e.requests_allowed&&s(e)}})):n.createElement("div",{className:A.ai},[...Array(6)].map((e,t)=>n.createElement("div",{key:t,className:A.f8})))))}function x({hasSecondaryDropdown:e,text:t,primaryFullscreenEditorType:r,resource:a}){let o=(0,i.I0)(),l=(0,v.hb)(a),c=(0,u.X)();return n.createElement(k,{onClick:()=>{if(!e){let e=!!(l.playground_fig_file||"dev_handoff"===r);P(a.id,e?"playground":"new_file",r,c),o(h.kp()),o(m.O6({resource:a,fullscreenEditorType:r,isPlaygroundFile:e}))}},icon:n.createElement(s.n,{svg:N,className:A.Rt}),text:t,rightIcon:e?n.createElement(s.n,{svg:L,className:A.c4}):void 0})}let U=(e,t,r)=>{let s=(0,i.I0)(),c=(0,g.L)(),p=(null==c?void 0:c.type)===B&&c.data.resourceId===e.id&&c.data.viewContext===r,_=n.memo(function({primaryFullscreenEditorType:r}){var i;let _;let g=(0,f.Ng)(),y=(0,u.X)(),[T,w]=n.useState();(0,o.O)(()=>{!async function(){let t=await I.i.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,a.L9)("recent_files_for_plugins_loaded",{response_count:t.data.meta.length,extension_id:e.id,...y}),w(t.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let O=(0,v.hb)(e),N=(null==(i=O.manifest.editorType)?void 0:i.sort())??[],L=!!O.playground_fig_file||"dev_handoff"===r,k=N.includes(b.IP.FIGMA)&&N.includes(b.IP.FIGJAM);k&&("design"!==r&&"dev_handoff"!==r||(null==g?void 0:g.figjam_disabled_at)?"whiteboard"===r&&(_="design"):_="whiteboard");let M=(()=>{let t=[{displayText:(0,d.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>n.createElement(D,{fileIconType:R(r),onClick:()=>{P(e.id,"new_file",r,y),s(h.kp()),s(m.O6({resource:e,fullscreenEditorType:r}))}})}];return k&&_&&t.push({displayText:(0,d.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>n.createElement(D,{fileIconType:R(_),onClick:()=>{P(e.id,"new_file",_,y),s(h.kp()),s(m.O6({resource:e,fullscreenEditorType:_}))}})}),t})(),U={displayText:(0,d.t)("community.using.new_file"),className:A.$s,preventDismissOnSelected:!0,render:()=>n.createElement(x,{hasSecondaryDropdown:M.length>1,text:(0,d.t)("community.using.new_file"),primaryFullscreenEditorType:r,resource:e}),children:M.length>1?M:void 0},B={displayText:(0,d.t)("community.using.playground_file"),className:A.$s,preventDismissOnSelected:!0,render:()=>n.createElement(x,{hasSecondaryDropdown:!1,text:(0,d.t)("community.using.playground_file"),primaryFullscreenEditorType:r,resource:e})};(0,E.Fm)("resize",()=>{p&&s(h.kp())});let V=(()=>{let t=[];if(void 0===T||T.length>0)t.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>n.createElement(F,{files:T,resource:e,editorTypes:N})});else if(!L&&k)return M;return L?t.push(B):t.push(U),t})();return n.createElement(S.z,{showPoint:!1,lean:t,className:A.sW,subMenuClassName:A.Cq,type:C.eg.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:280,minWidth:280,autoHeight:!0,onSelectItem:l.ZT,hidePointWhenContentOffScreen:!0,items:V,parentRect:null==c?void 0:c.data.targetRect,dispatch:s})});return{dropdownIsShown:p,toggleSwitchEditorDropdown:(t,n)=>{var i;let a=null==(i=t.current)?void 0:i.getBoundingClientRect();a&&((void 0!==n?n:!p)?s(h.SP({type:B,data:{resourceId:e.id,viewContext:r,targetRect:a}})):s(h.kp()))},PluginTrySwitchEditorDropdown:_}},B="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},401649:(e,t,r)=>{r.d(t,{BZ:()=>o,J$:()=>s,Vk:()=>p,Xh:()=>l,hw:()=>a,iA:()=>d,oj:()=>u,tu:()=>c,xy:()=>m});var n=r(573196),i=r(363402);function a(e,t){return(0,n.Ly)({path:"file",id:e,name:t})}function o(e,t){return(0,n.Ly)({path:"plugin",id:e,name:t})}function l(e,t){return(0,n.Ly)({path:"widget",id:e,name:t})}function s(e,t,r){let n="";return t===i.sk.METRICS&&(null==r?void 0:r.community_profile_handle)!==e?`/@${e}`:(t&&t!==i.sk.RESOURCES&&t!==i.sk.LIKES&&(n=t?`/${t}`:""),`/@${e}${n}`)}let c=(e,t)=>{let r=new URL(o(e,t),location.href);return r.href},d=(e,t)=>{let r=new URL(l(e,t),location.href);return r.href},u=(e,t)=>{let r=new URL(a(e,t),location.href);return r.href},p=()=>{let e=new URL("/community/plugin/pluginID",location.href);return e.href},m=e=>{let t=e.match(/\/community\/plugin\/([^/]+)/);return t?t[1]:null}},569522:(e,t,r)=>{r.d(t,{CE:()=>n,Ik:()=>N,Td:()=>O,ZJ:()=>L});var n,i=r(652983),a=r(435613),o=r(970740),l=r(339531),s=r(348209),c=r(661539),d=r(225468),u=r(656145),p=r(649100);let m=r(476161),h=r(601608),_=r(69163),g=r(67676),f=r(845312),E=r(275361),y=r(551287),v=r(92602),b=r(216058),I=r(740512),T=r(8071),w=r(363876),S=r(28545),C=r(236843);function O(e,t){if(!e.editorType)return null;let r=p.x9;return(t?r=p.Ne:e.isPlaygroundFileInsertBadge&&(r=p.Gc),e.editorType instanceof Array)?e.editorType.includes(c.IP.FIGMA)&&e.editorType.includes(c.IP.FIGJAM)&&(0,l.l9)(e.editorType)?i.createElement(a.n,{svg:t?C:y,className:r,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.universal"),dataTestId:"editor-type-badge-universal"}):e.editorType.includes(c.IP.FIGMA)&&e.editorType.includes(c.IP.FIGJAM)?i.createElement(a.n,{svg:t?T:g,className:r,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.made_for_figma_design_and_figjam"),dataTestId:"editor-type-badge-figma-figjam"}):e.editorType.includes(c.IP.FIGMA)&&(0,l.l9)(e.editorType)?i.createElement(a.n,{svg:t?S:E,className:p.x9,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.figma_design_and_dev_mode"),dataTestId:"editor-type-badge-figma-devmode"}):e.editorType.includes(c.IP.FIGJAM)&&(0,l.l9)(e.editorType)?i.createElement(a.n,{svg:t?w:f,className:p.x9,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.made_for_fig_jam_and_dev_mode"),dataTestId:"editor-type-badge-figjam-devmode"}):A(e.editorType[0],r,t):A(e.editorType,r,t)}function A(e,t,r){switch(e){case c.IP.FIGJAM:case s.lt.FIGJAM:return i.createElement(a.n,{svg:r?b:h,className:t,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.made_for_fig_jam"),dataTestId:"editor-type-badge-figjam"});case c.IP.FIGMA:case s.lt.FIGMA:return i.createElement(a.n,{svg:r?v:m,className:t,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.made_for_figma_design"),dataTestId:"editor-type-badge-figma"});case c.IP.INSPECT:case c.IP.DEV:return i.createElement(a.n,{svg:r?I:_,className:p.x9,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.detail_view.dev_mode_only"),dataTestId:"editor-type-badge-devmode"});default:return null}}function N(){return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,o.t)("community.insert_modal.codegen_plugin_icon_tooltip")},i.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H12C14.2091 0 16 1.79086 16 4V12C16 14.2091 14.2091 16 12 16H4C1.79086 16 0 14.2091 0 12V4Z",fill:"var(--color-bg)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1H4C2.34315 1 1 2.34315 1 4V12C1 13.6569 2.34315 15 4 15H12C13.6569 15 15 13.6569 15 12V4C15 2.34315 13.6569 1 12 1ZM4 0C1.79086 0 0 1.79086 0 4V12C0 14.2091 1.79086 16 4 16H12C14.2091 16 16 14.2091 16 12V4C16 1.79086 14.2091 0 12 0H4Z",fill:"var(--color-border)"}),i.createElement("path",{d:"M3 3.5C3 3.22386 3.22386 3 3.5 3H9.5C9.77614 3 10 3.22386 10 3.5C10 3.77614 9.77614 4 9.5 4H3.5C3.22386 4 3 3.77614 3 3.5Z",fill:"var(--color-icon)"}),i.createElement("path",{d:"M3 12.5C3 12.2239 3.22386 12 3.5 12H9.5C9.77614 12 10 12.2239 10 12.5C10 12.7761 9.77614 13 9.5 13H3.5C3.22386 13 3 12.7761 3 12.5Z",fill:"var(--color-icon)"}),i.createElement("path",{d:"M5 6.5C5 6.22386 5.22386 6 5.5 6H12.5C12.7761 6 13 6.22386 13 6.5C13 6.77614 12.7761 7 12.5 7H5.5C5.22386 7 5 6.77614 5 6.5Z",fill:"var(--color-icon-assistive)"}),i.createElement("path",{d:"M6 9.5C6 9.22386 6.22386 9 6.5 9H13.5C13.7761 9 14 9.22386 14 9.5C14 9.77614 13.7761 10 13.5 10H6.5C6.22386 10 6 9.77614 6 9.5Z",fill:"var(--color-icon-design)"}))}function L(e){switch(e.fileIconType){case u.I1.WHITEBOARD:return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_8665_227734)"},i.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2966 20.8616C19.4811 21.0461 19.7802 21.0461 19.9647 20.8616L21.0059 19.8205C21.1903 19.636 21.1903 19.3369 21.0059 19.1524L15.0579 13.2045L13.3487 14.9137L19.2966 20.8616ZM12.6416 14.2066L11.7021 13.2671L11.2748 11.1305L13.4113 11.5578L14.3508 12.4974L12.6416 14.2066ZM11.0623 10.0682L13.9043 10.6366L21.713 18.4453C22.288 19.0203 22.288 19.9526 21.713 20.5276L20.6718 21.5687C20.0968 22.1438 19.1645 22.1438 18.5895 21.5687L10.7809 13.7601L10.2125 10.9181L10 9.85578L11.0623 10.0682Z",fill:"white"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"#D9B8FF"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_8665_227734"},i.createElement("rect",{width:"32",height:"32",fill:"white"}))));case u.I1.PUBLISHED:return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_8665_306087)"},i.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z",fill:"var(--color-iconpublishedfile, --grey-800)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z",fill:"white"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconpublishedfilesecondary, --grey-500)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_8665_306087"},i.createElement("rect",{width:"32",height:"32",fill:"white"}))));case u.I1.DESIGN:default:return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_8665_306087)"},i.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z",fill:"#0D99FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z",fill:"white"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"#80CAFF"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_8665_306087"},i.createElement("rect",{width:"32",height:"32",fill:"white"}))))}}(e=>{e.IconAndBadgeContainer=function({children:e,className:t}){return i.createElement("div",{className:p.Nw+(t?` ${t}`:"")},e)},e.BadgeContainer=function({children:e,fromBrowseResourceModal:t,resourceType:r}){let n=p.Tl;return t&&"plugin"===r?n=p.tl:t&&"widget"===r&&(n=p.sy),i.createElement("div",{className:n},e)}})(n||(n={}))},82873:(e,t,r)=>{r.d(t,{A2:()=>_,Pn:()=>f,Rx:()=>m,aj:()=>E,oO:()=>g,oS:()=>p,vC:()=>h});var n=r(652983),i=r(523495),a=r(435613),o=r(532558);let l=r(91781),s=r(724671),c=(r(526641),r(381715),r(689886)),d=r(564753),u=r(676169);function p(e){return n.createElement("div",{className:o.nX},n.createElement("div",{className:o.YB},n.createElement(a.n,{className:o.II,svg:e.icon})),(0,i.K2)(e.metric))}function m(e){let t="onClick"in e?e.onClick:void 0,r=e.classNameOverride?e.classNameOverride:o.aB;return n.createElement("div",{className:r,onClick:t},n.createElement("div",{className:o.YB},n.createElement(a.n,{className:(()=>{let t=[o.II];return e.hoverIcon&&t.push(o.ax),e.activeIcon&&t.push(o.Ep),t.join(" ")})(),svg:e.icon}),e.hoverIcon&&n.createElement(a.n,{className:o.aY,svg:e.hoverIcon}),e.activeIcon&&n.createElement(a.n,{className:o.Xd,svg:e.activeIcon})),(0,i.K2)(e.metric))}function h(e){return!e.onClick||e.isDisabled?n.createElement(p,{icon:l,metric:e.metric}):n.createElement(m,{icon:l,hoverIcon:l,activeIcon:l,metric:e.metric,classNameOverride:e.isActive?e.isWhiteboard?o.cE:o.KJ:void 0,onClick:e.onClick})}function _(e){return n.createElement(p,{icon:u,metric:e.metric})}function g(e){return n.createElement(p,{icon:s,metric:e.metric})}function f(e){return n.createElement(p,{icon:c,metric:e.metric})}function E(e){return n.createElement(p,{icon:d,metric:e.metric})}},231995:(e,t,r)=>{r.d(t,{CQ:()=>x,Fh:()=>L,Fo:()=>I,L1:()=>h,LE:()=>M,O$:()=>U,OZ:()=>N,TZ:()=>D,VI:()=>k,Y6:()=>B,YE:()=>w,ZK:()=>E,Zk:()=>g,Zp:()=>O,c:()=>v,e3:()=>R,hY:()=>F,jZ:()=>C,k9:()=>y,pl:()=>A,r1:()=>T,uY:()=>b,vg:()=>P,zW:()=>f,zr:()=>S,zx:()=>_});var n,i,a,o=r(600486),l=r(935212),s=r(970740),c=r(961215),d=r(840568),u=r(92538),p=r(46347),m=r(272583);let h=304,_="add-component-prop-dropdown",g="bubbled-props-picker";var f=((n=f||{})[n.DEFINITION=0]="DEFINITION",n[n.ASSIGNMENT=1]="ASSIGNMENT",n),E=((i=E||{})[i.REGULAR=0]="REGULAR",i[i.WIDE=1]="WIDE",i[i.UNBOUNDED=2]="UNBOUNDED",i[i.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",i);let y=e=>{switch(e){case c.cGt.BOOL:return r(606132);case c.cGt.TEXT:return r(252171);case c.cGt.INSTANCE_SWAP:return r(305225);default:(0,p.vE)(e,`Unexpected component prop type: ${e}`)}},v=(e,t,r,n)=>{e&&(0,o.L9)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:t,prop_type:c.cGt[r],source:n})},b=e=>{switch(e){case c.cGt.BOOL:return(0,s.t)("design_systems.component_properties.boolean");case c.cGt.TEXT:return(0,s.t)("design_systems.component_properties.text");case c.cGt.INSTANCE_SWAP:return(0,s.t)("design_systems.component_properties.instance_swap");case c.cGt.VARIANT:return(0,s.t)("design_systems.component_properties.variant");default:(0,p.vE)(e,`Unexpected component prop type: ${e}`)}},I=(e,t)=>{if((0,d.nK)(t))return d.t1;switch(e){case c.cGt.BOOL:return"true"===t;case c.cGt.TEXT:case c.cGt.INSTANCE_SWAP:return t;default:throw Error(`Unexpected component prop type: ${e}`)}},T=e=>{switch(e){case u.Q.VISIBLE:return c.cGt.BOOL;case u.Q.TEXT:return c.cGt.TEXT;case u.Q.OVERRIDDEN_SYMBOL_ID:return c.cGt.INSTANCE_SWAP;default:(0,p.vE)(e,`Unexpected node field: ${e}`)}},w=e=>{switch(e){case c.cGt.BOOL:return!0;case c.cGt.TEXT:return"";case c.cGt.INSTANCE_SWAP:return null;case c.cGt.VARIANT:return(0,s.t)("design_systems.states_panel.default_property_value");default:(0,p.vE)(e,`Unexpected component prop type: ${e}`)}},S=(e,t)=>{switch(e){case c.cGt.INSTANCE_SWAP:return!!t;case c.cGt.TEXT||c.cGt.VARIANT:return!!(null==t?void 0:t.length);default:return!0}},C={format:e=>e?(0,s.t)("design_systems.component_properties.boolean_true"):(0,s.t)("design_systems.component_properties.boolean_false"),isEqual:(e,t)=>e===t};function O(e,t){if(!t.length)return null;let r=e(t[0]),n=r&&t.every(t=>e(t)===r);return n?r:null}function A(e,t){switch(e){case c.Hn$.CONFLICTING_NAMES_ERROR:case c.Hn$.CONFLICTING_NAMES_WITH_VARIANT_ERROR:return(0,s.t)("design_systems.component_properties.error_conflicting_name");case c.Hn$.UNUSED_DEF_ERROR:return(0,s.t)("design_systems.component_properties.error_unused_property");default:return t?(0,s.t)("design_systems.component_properties.has_unpublished_preferred_values"):""}}function N(e,t){if(!e.length)return null;let{backingSymbolGUID:r,backingStateGroupGUID:n}=(0,m.Os)(new Set(e),t);return n&&(0,d.Wn)(n)?t.get(n):r&&(0,d.Wn)(r)?t.get(r):d.t1}function L(e,t,r){let n;if(t.size)return n=t.has(d.t1)?d.t1:e===c.cGt.INSTANCE_SWAP?N([...t],r):t.size>1?d.t1:t.values().next().value,I(e,n)}function P(e,t,r){let n=e.file_key!==r;return n?c.iTB.getDefaultStateForSubscribedStateGroup(t,e.default_state_key):c.iTB.getDefaultStateForLocalStateGroup(t)}function R(e){if(e)try{let t=new URL(e).hostname;return t}catch(e){}}var k=((a=k||{}).PILL="pill",a.ICON="icon",a);function D(e,t){if(!("INSTANCE"===e.type&&!e.isInstanceSublayer&&e.simplifyInstancePanels))return!1;let r=t.get(e.symbolId||"");return!!r&&e.hasHiddenChildrenWhenSimplified}let M=(e,t)=>{let r;if(e.length){for(let n of e){let e=t.get(n);if(!e||"INSTANCE"!==e.type)continue;let i=e.symbolId;if(i){if(void 0===r)r=i;else if(i!==r)return}}return r}},F=(e,t)=>{let r;if(e.length){for(let n of e){let e=t.get(n);if(!e||"INSTANCE"!==e.type)continue;let i=e.symbolId;if(!i)continue;let a=t.get(i);if(!a)continue;if(a.isLooseComponent)return;let o=a.containingStateGroupId;if(o){if(void 0===r)r=o;else if(o!==r)return}}return r}},x=(e,t)=>{var r;if(!e.length)return new Set;let n=new Set(null==(r=t[e[0]])?void 0:r.hiddenProps);return e.reduce((e,r)=>{var n;return(null==(n=t[r])?void 0:n.hiddenProps)?(0,l.OV)(e,new Set(t[r].hiddenProps)):e},n)},U=(e,t)=>{var r;return e?(null==(r=t[e])?void 0:r.componentPropDefError)??c.Hn$.NONE:c.Hn$.NONE};function B(e,t){var r;let n=null==(r=t[e])?void 0:r.defs;return n?Object.values(n).sort((e,t)=>e.sortPosition<t.sortPosition?-1:1):[]}},513080:(e,t,r)=>{r.d(t,{I:()=>a,m:()=>i});var n=r(840568);function i(e,t){var r;let n={};for(let i of e){let e;let a=t.get(i);(e=(null==a?void 0:a.type)==="INSTANCE"?a.symbolId:(null==a?void 0:a.containingSymbolId)??(null==a?void 0:a.topmostBackingStateId))&&(null==(r=t.get(e))?void 0:r.isState)&&(n[e]||(n[e]=[]),n[e].push(i))}return n}let a=(e,t,r)=>{var i,a;if(!e)return{};let o={};for(let l of t){let t=null==(a=null==(i=e[l])?void 0:i.stateVariantProps)?void 0:a.propertyValues;if(t)for(let e of r)e in o&&o[e]!==t[e]?o[e]=o[e]&&t[e]?n.t1:"":o[e]=t[e]||""}return o}},638187:(e,t,r)=>{r.d(t,{BU:()=>k,V6:()=>D,bJ:()=>U,iB:()=>M,r1:()=>F,ry:()=>x,yl:()=>R});var n=r(652983),i=r(407908),a=r(46347),o=r(170435),l=r(365653),s=r(716250),c=r(337167),d=r(286206),u=r(518484),p=r(206423),m=r(721127),h=r(239461),_=r(158774),g=r(961215),f=r(269075),E=r(640723),y=r(662507),v=r(200273),b=r(112088),I=r(900710),T=r(545858),w=r(166885),S=r(170926),C=r(162512),O=r(231995),A=r(671538),N=r(409590),L=r(202789),P=r(325487);function R({propType:e,refField:t}){return(0,l.c)(r=>({allStates:(0,S.Un)(r),singleSelectedNode:(0,I.jG)(r),stateGroup:(0,S.$k)(r),stateGroupPropertySortOrder:(0,S.O1)(r),dropdownShown:r.dropdownShown,openFileKey:(0,v.Oj)(r),defaultPropName:e===g.cGt.VARIANT?(0,L.yh)(r):(0,N.CB)(r,e,t),isInstanceSwapPickerShown:r.instanceSwapPickerShown.isShown}))}function k({propType:e,isUsingGeneratedValue:t,propName:r,generatedValues:i,defaultValue:a}){return(0,n.useMemo)(()=>(0,s.BZ)().ce_component_props&&e===g.cGt.TEXT&&t?!r.length||!(null==i?void 0:i.length):!r.length||!(0,O.zr)(e,a),[a,r.length,e,t,null==i?void 0:i.length])}function D({type:e,pickerShown:t}){let{windowInnerHeight:r,windowInnerWidth:i}=(0,o.i)();return(0,n.useMemo)(()=>"create"===e?new u.OW(i/2-O.L1/2,r/3):new u.OW(null==t?void 0:t.initialX,null==t?void 0:t.initialY),[r,i,e,t])}function M({propType:e,isUsingGeneratedValue:t,generatedValues:r,propName:o,refField:l,prompt:s,preferredProductComponents:c,defaultValue:d,productComponentNode:u}){let y=function(){let e=(0,i.I0)();return(0,n.useCallback)(()=>{e(m.hV()),e((0,p.qe)())},[e])}(),{allStates:v,stateGroup:I,stateGroupPropertySortOrder:T}=R({refField:l,propType:e}),S=(0,n.useCallback)((e,t)=>{let r=T||[];""!==(e=(0,C.yD)(e))&&(f.y2.user("add-variant-property",()=>{null==v||v.forEach(n=>{let i=n.stateInfo.propertyValues;i&&E.qC(n.symbol.node_id,(0,C.e0)({...i,[e]:t},[...r,e]))})}),(0,C._R)("Adding Property to Variant Component",null==I?void 0:I.nodeId),_.Gr.commit(),h.WT.reportEditAction("add-prop"))},[T,v,I]);return(0,n.useCallback)(()=>{f.y2.user("add-prop-def",()=>{switch(e){case g.cGt.BOOL:g.iTB.addBoolComponentPropDef(o,d,l??"");break;case g.cGt.TEXT:let n=g.iTB.addTextComponentPropDef(o,d,l??"");if(t&&r&&r.length>0){if(u){let e=null==s?void 0:s.trim(),t={componentPropSource:P.k,componentPropGeneratedPrompt:e||void 0};(0,A.U2)(u,n,t)}else throw Error("useCreateComponentPropDef called without a productComponentNode.")}break;case g.cGt.INSTANCE_SWAP:let i=c.map(e=>({type:e.type===w.h3.STATE_GROUP?g.iCX.STATE_GROUP:g.iCX.COMPONENT,key:(0,b.IM)(e)})).filter(e=>!!e.key);g.iTB.addInstanceComponentPropDef(o,d,l??"",i);break;case g.cGt.VARIANT:S(o,d);break;default:(0,a.vE)(e)}}),y()},[y,e,o,d,l,t,r,c,S,u,s])}function F(e){let t=(0,i.v9)(I.xK),r=(0,n.useMemo)(()=>{if(!t.length)throw Error("No selected nodes in CreateComponentPropModal");let r=y.b.instance.get(t[0]);if(r){let n;let i=r.containingStateGroupId,a=r.containingSymbolId;if(e?i?n=i:a&&(n=a):n=t[0],!n||!n.length)throw(0,d.YD)("Prop modal hooks","Failed to get product component GUID.",{selectedGUIDs:t,refField:e,containingStateGroupId:i,containingSymbolId:a}),Error("Failed to get product component GUID.");let o=y.b.instance.get(n);if(o)return o;throw(0,d.YD)("Prop modal hooks","Failed to get PluginsSceneNode for product component node.",{selectedGUIDs:t,refField:e,productComponentNodeGuid:n,containingStateGroupId:i,containingSymbolId:a}),Error("Failed to get PluginsSceneNode for product component node.")}let n=t[0];throw(0,d.YD)("Prop modal hooks","Failed to get PluginsSceneNode",{firstNode:n,refField:e}),Error("Failed to get PluginsSceneNode for selected node")},[e,t]);return r}function x(e){let t=(0,c.Dv)(T.f);if(!(0,s.BZ)().ce_component_props)return!1;let r=e.reduce((e,r)=>{let n=t.get(r);return n?new Set([...e,...n]):e},new Set);return r.size>0}function U(e,t){let r=(0,c.Dv)(T.f);if(!(0,s.BZ)().ce_component_props)return!1;let n=r.get(e);return!!n&&n.has(t)}},762287:(e,t,r)=>{r.d(t,{m:()=>h,z:()=>m});var n=r(652983),i=r(407908),a=r(598271),o=r(626650),l=r(840568),s=r(900710),c=r(231995),d=r(513080),u=r(381421),p=r(202789);function m(e,t){let r=n.useMemo(p.se,[]),d=(0,i.v9)(s.F1),m=(0,i.v9)(u.MU),h=(0,i.v9)(t=>r(t,e)),y=function(e,t){let r=(0,i.v9)(s.F1);if(t!==c.zW.DEFINITION)return(0,c.hY)(e,r)||(0,c.LE)(e,r)||"";{let t=(0,c.OZ)(e,r);return t&&!(0,l.nK)(t)?t.guid:""}}(e,t),v=(0,o.vE)(()=>m&&y?_(y,e,m):[],[m,e,y]),b=(0,o.vE)(()=>{if(!m)return{};let t=e.filter(e=>{let t=d.get(e);return(null==t?void 0:t.type)==="INSTANCE"});return g(v,t,d,m)},[e,d,m,v]),I=(0,o.vE)(()=>y&&m?f(y,m,d):[],[y,m,d]),T=(0,o.vE)(()=>{let t=e.reduce((e,t)=>{let r=d.get(t),n=null==r?void 0:r.symbolId;return n&&n!==a.A0&&e.add(n),e},new Set);return I.filter(e=>t.has(e.guid))},[I,e,d]),w=(0,o.vE)(()=>y&&m?E(y,e,m):{},[y,e,m]);return n.useMemo(()=>({typedPropDefsExcludingHidden:v,variantPropDefs:h,assignmentValuesByDefId:b,allStateVariantProps:I,backingStateVariantProps:T,statePropertyValues:w,productComponentGUID:y}),[v,h,b,I,T,w,y])}function h(e,t,r,i){var a,l;let s;let c=(0,o.vE)(()=>r?_(r,[e],t):[],[e,r,t]),d=(0,o.vE)(()=>r?(0,p.T2)(r,t):[],[r,t]),u=(0,o.vE)(()=>g(c,[e],i,t),[e,t,i,c]),m=(0,o.vE)(()=>{var e;return r&&(null==(e=i.get(r))?void 0:e.isStateGroup)?f(r,t,i):[]},[r,t,i]),h=(0,o.vE)(()=>r?E(r,[e],t):{},[e,r,t]),y=null==(a=i.get(e))?void 0:a.symbolId;return y&&(null==(l=i.get(y))?void 0:l.isState)||(s=[]),s=m.filter(e=>y===e.guid),n.useMemo(()=>({typedPropDefsExcludingHidden:c,variantPropDefs:d,assignmentValuesByDefId:u,allStateVariantProps:m,backingStateVariantProps:s,statePropertyValues:h}),[c,d,u,m,s,h])}function _(e,t,r){let n=(0,c.CQ)(t,r);return(0,c.Y6)(e,r).filter(e=>!n.has(e.explicitDefID))}function g(e,t,r,n){let i={};return e.forEach(e=>{var a,o;let s=new Set;for(let r of t){let t=null==(o=null==(a=n[r])?void 0:a.assignments)?void 0:o[e.explicitDefID];if(t){if(t.isMixed){s.add(l.t1);continue}null!=t.value&&s.add(t.value)}}i[e.explicitDefID]=(0,c.Fh)(e.type,s,r)}),i}function f(e,t,r){let n=r.get(e);if(!(null==n?void 0:n.isStateGroup))return[];let i=n.childrenNodes;return i.reduce((e,r)=>{var n;let i=null==(n=t[r.guid])?void 0:n.stateVariantProps;return i?e.push({...i,guid:r.guid}):e.push({propertyValues:r.statePropertyValues,guid:r.guid}),e},[])}function E(e,t,r){var n,i;let a=(null==(i=null==(n=r[e])?void 0:n.stateGroupVariantProps)?void 0:i.propertySortOrder)??[];return(0,d.I)(r,t,a)}},452064:(e,t,r)=>{r.d(t,{C:()=>C,JK:()=>D,O2:()=>R,_u:()=>L,f2:()=>F,fc:()=>b,i:()=>I,m8:()=>P,zB:()=>k});var n,i=r(652983),a=r(407908),o=r(981114),l=r(626650),s=r(218609),c=r(954109),d=r(961215),u=r(112088),p=r(966041),m=r(756437),h=r(880381),_=r(92538),g=r(166885),f=r(225468),E=r(493866),y=r(667898),v=r(381421);let b=e=>["preferredValuesInstancePicker",...e],I=e=>({"data-tooltip-type":f.fR.TEXT,"data-tooltip-show-left":!0,...(0,y.f4)(e)}),T=()=>{},w=new Promise(e=>{T=e});function S(){T(),w=new Promise(e=>{T=e})}let C=e=>`GET_MISSING_PREFERRED_PRODUCT_COMPONENTS_FOR_${e}`,O=(e,t)=>{var r;return{callback:T,promise:w,resetPromise:S,loadingKey:C(null==(r=e.getState().openFile)?void 0:r.key),callbackForComponent:t}},A=(0,s.u4)((e,{stateGroupKeys:t,componentKeys:r,callback:n})=>{c.P7(r,t,e,O(e,n))}),N=()=>{let e=(0,o.P1)([p.fJ,(e,t)=>t],(e,t)=>{let r=[],n=[];return t.forEach(t=>{let i=e[t.key];i?r.push(i):n.push(t)}),{preferredProductComponents:r,missingValues:n}});return e};var L=((n=L||{}).ADD="ADD",n.REMOVE="REMOVE",n);function P(e){let t=(0,l.vE)(()=>{var t,r;return(null==e?void 0:e.type)!==d.cGt.INSTANCE_SWAP?[]:(t=e.type,r=e.preferredValues,t===d.cGt.INSTANCE_SWAP?r.filter(e=>"key"in e&&"string"==typeof e.key&&"type"in e&&e.type in d.iCX):[])},[e]),r=(0,a.v9)(m.Io),n=(0,i.useMemo)(()=>t.map(e=>{let t=r[e.key];return t?{type:e.type,key:t}:e}),[r,t]),o=(0,i.useMemo)(N,[]),{preferredProductComponents:s,missingValues:c}=(0,a.v9)(e=>o(e,n)),p=(0,a.I0)(),h=(0,i.useRef)(new Set),[f,E]=(0,i.useState)(!1),[y,v]=(0,i.useState)(0),b=(0,i.useCallback)(()=>v(e=>e+1),[]);(0,i.useEffect)(()=>{let e=[],t=[];c.forEach(r=>{h.current.has(r.key)||(r.type===d.iCX.COMPONENT?e.push(r.key):t.push(r.key))}),e.length>0||t.length>0?p(A({componentKeys:e,stateGroupKeys:t,callback:r=>{r?([...e,...t].forEach(e=>h.current.add(e)),E(!1)):E(!0)}})):E(!1)},[c,p,y]);let I=(0,i.useCallback)((n,i)=>{if(e&&e.kind===_.$.TYPED){let a=[...t];n.forEach(e=>{let t=(0,u.IM)(e),n=a.findIndex(e=>e.key===t||r[e.key]===t);-1!==n&&"ADD"!==i?a.splice(n,1):-1===n&&"REMOVE"!==i&&a.push({key:t,type:e.type===g.h3.COMPONENT?d.iCX.COMPONENT:d.iCX.STATE_GROUP})}),Object.keys(r).length>0&&a.forEach((e,t)=>{let n=r[e.key];n&&(a[t].key=n)}),d.iTB.editInstanceSwapPreferredValues(e.explicitDefID,a)}},[e,r,t]),T=(0,i.useCallback)(t=>{if((null==e?void 0:e.kind)!==_.$.TYPED)return;let n=t.map(e=>{let t=(0,u.IM)(e),n=r[t]??t;return{key:n,type:e.type===g.h3.COMPONENT?d.iCX.COMPONENT:d.iCX.STATE_GROUP}});d.iTB.editInstanceSwapPreferredValues(e.explicitDefID,n)},[e,r]);return{preferredValues:s,togglePreferredValues:I,handleSetPreferredValues:T,preferredValuesFetchError:f,retryPreferredValuesFetch:b}}function R(e,t){let r=(0,a.v9)(p.Pg),n=(0,a.v9)(h.RP),[o,l]=(0,i.useState)(()=>{let i=[];if("string"==typeof e){let a=(0,u.Qf)(e,t,r,n);a&&i.push(a)}return i});return[o,l]}function k(e){return(0,i.useCallback)((t,r)=>{e(e=>{let n=[...e];return t.forEach(e=>{let t=(0,u.IM)(e),i=n.findIndex(e=>t===(0,u.IM)(e));i>-1&&"ADD"!==r?n.splice(i,1):-1===i&&"REMOVE"!==r&&n.push(e)}),n})},[e])}function D(e){return(0,i.useCallback)(t=>{e([...t])},[e])}let M=(0,E.t)(e=>(!!e.component_key||!!e.key)&&!e.unpublished_at),F=e=>{let t=(0,a.v9)(v.xf),r=(0,a.v9)(p.Pg),n=(0,i.useMemo)(()=>!!t&&M(r[t]??{}),[t,r]),o=(0,l.vE)(()=>n?new Set(e.filter(e=>!M(e)).map(e=>e.node_id)):new Set,[n,e]);return o}},277447:(e,t,r)=>{r.d(t,{Dq:()=>m,H5:()=>u,co:()=>d,mo:()=>p});var n=r(981114),i=r(840568),a=r(900710),o=r(409590),l=r(202789);let s=(0,n.P1)([o.i3],e=>e.length>0),c=(0,n.P1)([l.N3],e=>e.length>0),d=(0,n.P1)([s,c],(e,t)=>e||t),u=(0,n.P1)([a.jq],e=>{if(!e.length)return null;let t=new Set(e.map(e=>e.textContent)),[r]=t;return 1===t.size?r:i.t1}),p=()=>{let e=(0,n.P1)([(0,l.o4)(),(0,o.Tb)()],(e,t)=>[...e,...t]);return e},m=(0,n.P1)([l.N3,o.i3],(e,t)=>[...e,...t])},381421:(e,t,r)=>{r.d(t,{$n:()=>h,AP:()=>N,Cm:()=>u,G0:()=>D,GC:()=>E,HE:()=>L,IG:()=>x,Kt:()=>C,L0:()=>p,MU:()=>d,P4:()=>M,PB:()=>v,YK:()=>g,ZH:()=>k,gl:()=>B,kS:()=>F,kV:()=>T,mw:()=>A,nv:()=>_,vE:()=>f,xf:()=>y});var n=r(981114),i=r(105665),a=r(490838),o=r(840568),l=r(112088),s=r(900710),c=r(231995);let d=e=>e.mirror.selectionProperties.componentProps,u=e=>e.mirror.selectionProperties.moduleProps,p=e=>e.mirror.selectionProperties.resettableComponentPropAssignments,m=(0,n.P1)([s.F1,s.xK],U),h=(0,n.P1)([s.F1,s.xK],function(e,t){return(0,c.Zp)(t=>{var r;return null==(r=e.get(t))?void 0:r.containingModuleId},t)??void 0}),_=e=>{let{description:t,symbolDescription:r}=e.mirror.selectionProperties;return(0,o.nK)(t)||(0,o.nK)(r)?t??"":t&&function(e,t){return!!e&&(!!(e.startsWith("<")&&e.endsWith(">"))||(0,i.k)(t)===e)}(t,r)?t:(0,o.nK)(r)?r:(0,i.k)(r??"")},g=(0,n.P1)([s.F1,s.xK],B),f=(0,n.P1)([s.F1,s.xK],(e,t)=>{var r;let n=new Set;for(let i of t){let t=null==(r=e.get(i))?void 0:r.containingSymbolId;t&&n.add(t)}return Array.from(n)}),E=()=>(0,n.P1)([s.F1,(e,t)=>t],(e,t)=>B(e,t)??U(e,t)),y=(()=>{let e=E();return t=>e(t,(0,s.xK)(t))})(),v=(0,n.P1)([m,g],(e,t)=>e??t),b=()=>(0,n.P1)([(e,t)=>t,s.F1],(e,t)=>{let r=(0,a.x)(e,e=>{let r=t.get(e);return!!r&&(0,l.Cm)(r)});for(let n of e){let e=t.get(n),i=(null==e?void 0:e.containingStateGroupId)??(null==e?void 0:e.containingSymbolId);if(i&&i!==r)return}return r??void 0}),I=()=>(0,n.P1)([(e,t)=>t,s.F1],(e,t)=>{let r=(0,a.x)(e,e=>{let r=t.get(e);return!!r&&(0,l.lL)(r)});return r??void 0});(()=>{let e=b();return t=>e(t,(0,s.xK)(t))})();let T=()=>(0,n.P1)([E(),b()],(e,t)=>e??t),w=()=>(0,n.P1)([I()],e=>e),S=(()=>{let e=T();return t=>e(t,(0,s.xK)(t))})(),C=(0,n.P1)([S,s.F1],(e,t)=>e?t.get(e):null),O=(()=>{let e=w();return t=>e(t,(0,s.xK)(t))})(),A=(0,n.P1)([O,s.F1],(e,t)=>e?t.get(e):null),N=(0,n.P1)([d,s.xK],(e,t)=>{if(e)return(0,c.Zp)(t=>{var r;return null==(r=e[t])?void 0:r.containingInstance},t)??void 0}),L=()=>(0,n.P1)([d,(e,t)=>t],(e,t)=>{if(e)return(0,c.Zp)(t=>{var r;return null==(r=e[t])?void 0:r.containingInstanceBackingSymbol},t)??void 0}),P=(0,n.P1)([d,s.xK],(e,t)=>{if(e)return G(e,t)}),R=(0,n.P1)([d,s.xK,s.F1],(e,t,r)=>{if(e)return V(e,t,r)}),k=()=>(0,n.P1)([d,(e,t)=>t,s.F1],(e,t,r)=>{if(!e)return;let n=[];for(let e of t){let t=r.get(e);if(!t||t.isLooseComponent||t.isState||t.isStateGroup)return;t.symbolId&&n.push(e)}return V(e,n,r)??G(e,n)}),D=(0,n.P1)([R,P],(e,t)=>t??e),M=()=>(0,n.P1)([s.F1,(e,t)=>t],(e,t)=>t.some(t=>{var r;return(null==(r=e.get(t))?void 0:r.isInstanceSublayer)??!1})),F=(()=>{let e=M();return t=>e(t,(0,s.xK)(t))})(),x=(0,n.P1)([s.jq],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function U(e,t){return(0,c.Zp)(t=>{var r;return null==(r=e.get(t))?void 0:r.containingSymbolId},t)??void 0}function B(e,t){return(0,c.Zp)(t=>{var r;return null==(r=e.get(t))?void 0:r.containingStateGroupId},t)??void 0}function V(e,t,r){return(0,c.Zp)(t=>{var n,i;let a=null==(n=e[t])?void 0:n.backingSymbol;if(a)return null==(i=r.get(a))?void 0:i.containingStateGroupId},t)??void 0}function G(e,t){return(0,c.Zp)(t=>{var r,n;return(null==(r=e[t])?void 0:r.backingSymbol)??(null==(n=e[t])?void 0:n.containingInstanceBackingSymbol)},t)??void 0}},409590:(e,t,r)=>{r.d(t,{CB:()=>C,HE:()=>I,Tb:()=>O,fp:()=>b,i3:()=>y,jm:()=>T,pb:()=>_,ru:()=>v,ti:()=>w,xh:()=>A});var n=r(981114),i=r(933858),a=r(523495),o=r(970740),l=r(840568),s=r(764850),c=r(419049),d=r(900710),u=r(162512),p=r(231995),m=r(381421);let h=(0,i.ue)([m.MU,(e,t)=>t],(e,t)=>{var r;return e&&t&&(null==(r=e[t])?void 0:r.defs)||{}}),_=()=>{let e=(0,i.ue)([h],e=>Object.values(e).sort((e,t)=>e.sortPosition<t.sortPosition?-1:1));return e},g=(0,i.ue)([m.MU,m.xf],(e,t)=>{var r;return e&&t?(null==(r=e[t])?void 0:r.defs)??{}:{}}),f=(0,i.ue)([g],e=>Object.values(e).sort((e,t)=>e.sortPosition<t.sortPosition?-1:1).map(e=>e.name)),E=()=>(0,i.ue)([m.MU,(0,m.kV)(),(0,m.ZH)()],(e,t,r)=>{var n;let i=r??t;if(!e||!i)return[];let a=Object.values((null==(n=e[i])?void 0:n.defs)||{});return a.sort((e,t)=>e.sortPosition<t.sortPosition?-1:1)}),y=(()=>{let e=E();return t=>e(t,(0,d.xK)(t))})(),v=(0,n.P1)([m.MU,d.xK,(e,t)=>t],(e,t,r)=>{if(e)return(0,p.Zp)(t=>{var n,i;let a=null==(i=null==(n=e[t])?void 0:n.refs)?void 0:i[r];if((null==a?void 0:a.isLinked)===!1)return a.fallbackName},t)??void 0}),b=()=>{let e=(0,i.ue)([h,(e,t,r)=>r],(e,t)=>{let r=(0,p.r1)(t),n=Object.values(e).filter(({type:e})=>e===r);return(0,a.JN)(n,e=>e.name.toLocaleLowerCase()),n});return e},I=()=>(0,n.P1)([m.MU,(0,m.GC)(),(0,m.HE)(),(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n,i)=>{var a,o,l,s,c;if(!e)return null;if(t){let r=(0,p.Zp)(t=>{var r,n;let a=null==(n=null==(r=e[t])?void 0:r.refs)?void 0:n[i];if(null==a?void 0:a.isLinked)return a.explicitDefID},n);if(r){let n=(null==(o=null==(a=e[t])?void 0:a.defs)?void 0:o[r])||null;return n}}if(r){let t=[];for(let r of n){let n=null==(l=e[r])?void 0:l.correspondingSymbolSublayer;if(!n)return null;t.push(n)}let a=(0,p.Zp)(t=>{var r,n;let a=null==(n=null==(r=e[t])?void 0:r.refs)?void 0:n[i];if(null==a?void 0:a.isLinked)return a.explicitDefID},t);if(a){let t=(null==(c=null==(s=e[r])?void 0:s.defs)?void 0:c[a])||null;return t}}return null}),T=()=>{let e=I();return(t,r)=>e(t,(0,d.xK)(t),r)},w=()=>(0,n.P1)([m.MU,(e,t,r)=>t,(e,t,r)=>r],(e,t,r)=>!!e&&t.some(t=>{var n,i;return(null==(i=null==(n=e[t])?void 0:n.refs)?void 0:i[r])!==void 0})),S=()=>{let e=(0,i.ue)([m.MU,d.F1,(e,t)=>t],(e,t,r)=>{var n,i;if(!e||0===r.length)return{};let a=(0,p.LE)(r,t),o=(0,p.hY)(r,t),l=o??a;if(!l)return{};let s=Object.keys((null==(n=e[l])?void 0:n.defs)??{});if(0===s.length)return{};let c={};for(let n of s){let a=null;for(let o of r){let r=t.get(o);if((null==r?void 0:r.type)!=="INSTANCE")continue;let l=null==(i=e[r.guid])?void 0:i.assignments;if(!l)continue;let s=l[n];if(null!=s){if(s.isMixed){a={isMixed:!0};break}if(null===a)a={isMixed:!1,value:s.value};else if(a.value!==s.value){a={isMixed:!0};break}}}a&&(c[n]=a)}return c});return e},C=(0,n.P1)([(e,t)=>t,(e,t,r)=>r,f,d.jG],(e,t,r,n)=>{if(e===s.cGt.BOOL&&t){let e=(null==n?void 0:n.name)?(0,o.t)("design_systems.component_properties.boolean_property_default_name",{selectedNodeName:n.name}):(0,o.t)("design_systems.component_properties.boolean_property_default_name_fallback",{numSelected:n?1:2});return(0,c.u)(e,r)}{let t=e===s.cGt.INSTANCE_SWAP?(0,o.t)("design_systems.component_properties.instance_swap_property_default_name"):(0,p.uY)(e);return(0,c.u)(t,r)}}),O=()=>{let e=(0,i.ue)([d.F1,E(),S(),m.MU,(e,t)=>t],(e,t,r,n,i)=>{if(!n)return[];let a=(0,p.CQ)(i,n);return t.filter(e=>!a.has(e.explicitDefID)).map(t=>{let n=t.defaultValue;if(null!=r[t.explicitDefID]){let e=r[t.explicitDefID];n=e?e.isMixed?l.t1:null==e.value?u.$8:e.value:u.$8}if(t.type===s.cGt.INSTANCE_SWAP&&n!==u.$8&&n!==l.t1){let t=(0,p.OZ)([n],e);n=t&&(0,l.Wn)(t)?t.name:u.$8}return[t.name,n]})});return e},A=()=>(0,n.P1)([m.MU,m.L0,d.F1,(e,t)=>t],(e,t,r,n)=>{var i,a;let o={};if(!e||!t)return o;for(let l of n)for(let n in t[l]){let s=null==(i=e[n])?void 0:i.backingSymbol;if(!s)continue;let c=(null==(a=r.get(s))?void 0:a.containingStateGroupId)||s;for(let e in o[c]||(o[c]={}),t[l][n])o[c][e]?o[c][e].instanceGUIDs.push(n):o[c][e]={name:t[l][n][e],instanceGUIDs:[n]}}return o})},202789:(e,t,r)=>{r.d(t,{N3:()=>f,T2:()=>y,o4:()=>_,se:()=>g,yh:()=>E});var n=r(981114),i=r(933858),a=r(970740),o=r(961215),l=r(840568),s=r(419049),c=r(900710),d=r(92538),u=r(162512),p=r(231995),m=r(513080),h=r(381421);let _=()=>{let e=(0,i.ue)([u.u_,h.MU,c.F1,(e,t)=>t],(e,t,r,n)=>{var i;if(!t||0===n.length)return[];let o=(0,p.hY)(n,r)??(0,h.gl)(r,n);if(!o||n.includes(o))return[];let s=null==(i=t[o])?void 0:i.stateGroupVariantProps;if(!s)return[];let c=(0,m.I)(t,n,s.propertySortOrder),d=s.propertySortOrder||[];return d.map(e=>{let t=c[e]||u.$8;return(0,l.nK)(t)?[e,(0,a.t)("inspect_panel.property.mixed")]:[e,t]})});return e},g=()=>(0,i.ue)([h.MU,(0,h.kV)(),(0,h.ZH)()],(e,t,r)=>{if(!e)return[];let n=r??t;return n?y(n,e):[]}),f=(()=>{let e=g();return t=>e(t,(0,c.xK)(t))})(),E=(0,n.P1)([f],e=>{let t=e.map(e=>e.name),r=(0,a.t)("design_systems.component_properties.variant_property_default_name");return(0,s.u)(r,t)}),y=(e,t)=>{var r;let n=null==(r=t[e])?void 0:r.stateGroupVariantProps;if(!n)return[];let i=(0,p.Y6)(e,t),a=(0,p.O$)(e,t);return n.propertySortOrder.map(e=>{let t=a===o.Hn$.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&i.some(t=>t.name===e),r=n.propertyValues[e];return{name:e,values:r,type:o.cGt.VARIANT,kind:d.$.VARIANT,error:t?o.Hn$.CONFLICTING_NAMES_WITH_VARIANT_ERROR:o.Hn$.NONE}})}},471845:(e,t,r)=>{r.d(t,{$c:()=>E,Bw:()=>b,E_:()=>w,KC:()=>I,Py:()=>C,SJ:()=>A,ST:()=>D,WH:()=>R,aM:()=>v,hJ:()=>L,pR:()=>S,q:()=>P,sB:()=>k,uI:()=>y,wd:()=>O,wx:()=>T});var n=r(652983),i=r(848080),a=r(970740),o=r(909765),l=r(32483),s=r(804089),c=r(840568),d=r(321909),u=r(225468),p=r(585692),m=r(160905),h=r(964207),_=r(289476),g=r(172885);let f={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:o.lN,bigNudgeAmount:o.uy};function E(e){let{onValueChange:t}=e,r=(0,n.useCallback)(e=>null==t?void 0:t(e,d.P7.YES),[t]),i=e.isTokenizable?h.H:m.Q1;return n.createElement(_.Y,{...f,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===c.t1&&!e.mixedMathHandler},e.childrenAtEnd?null:e.children,n.createElement(i,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,recordingKey:e.recordingKey,className:e.inputClassName,dataTestId:e.dataTestId,noLeftBorder:e.noLeftBorder,squareRightBorder:e.squareRightBorder,formatter:e.formatter,property:e.value??null,onMouseDown:s.UW,onChange:r,allowEmpty:e.allowEmpty,mixedMathHandler:e.mixedMathHandler,mixedMathCallback:e.mixedMathCallback,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onMixedMathNudge:e.onMixedMathNudge,disabled:e.disabled??null===e.value,placeholder:e.placeholder,autoFocus:e.autoFocus,noBorderOnFocus:!0,forwardedRef:e.forwardedRef}),e.childrenAtEnd?e.children:null)}function y({onMouseEnter:e,onMouseLeave:t,...r}){let i={...f,...r,noBorderOnFocus:r.noBorderOnFocus||r.disableSelectFocus};return n.createElement("div",{className:r.className},n.createElement(p.C,{id:r.id,inputClassName:r.inputClassName,dropdownClassName:r.dropdownClassName,dropdownWidth:r.dropdownWidth,willShowDropdown:r.willShowDropdown,formatter:r.formatter,property:r.value,onChange:(e,t=d.P7.YES)=>{var n;null==(n=r.onValueChange)||n.call(r,e,t)},onKeyDown:r.onKeyDown,onKeyUp:r.onKeyUp,onInputFocus:r.onFocus,onInputBlur:r.onBlur,onMouseEnter:e,onMouseLeave:t,mixedMathHandler:r.mixedMathHandler,dispatch:r.dispatch,disabled:r.disabled,dropdownShown:r.dropdownShown,autoFocus:r.autoFocus,recordingKey:r.recordingKey,scrubbableControlProps:i,svg:r.svg,fallbackSvg:r.fallbackSvg,icon:r.label,ui3Icon:r.ui3Icon,forwardedRef:r.forwardedRef,isTokenizable:r.isTokenizable,dataTestId:r.dataTestId,allowEmpty:r.allowEmpty,unNamespacedInputRecordingKey:r.unNamespacedInputRecordingKey,placeholder:r.placeholder,omitValueFromDropdown:r.omitValueFromDropdown,noPlaceholderLine:r.noPlaceholderLine,onboardingKey:r.onboardingKey,disableSelectFocus:r.disableSelectFocus,openBelowTarget:r.openBelowTarget,chevronClassName:r.chevronClassName,dropdownAlignment:r.dropdownAlignment,enablePreview:r.enablePreview,optionsWithDisabledPreviews:r.optionsWithDisabledPreviews},r.children))}function v(e){let{min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a,formatter:o}=e,s=(0,n.useMemo)(()=>new l.uf({min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a}),[t,r,i,a]);return n.createElement(y,{...e,formatter:o??s})}function b(e){let{min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a}=e,o=(0,n.useMemo)(()=>new l.aV({min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a}),[t,r,i,a]);return n.createElement(E,{...e,formatter:o})}function I(e){let{min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a,onEvaluateExpressionError:o}=e,s=(0,n.useMemo)(()=>new l.uf({min:t,max:r,smallNudgeAmount:i,bigNudgeAmount:a,onEvaluateExpressionError:o}),[t,r,i,a,o]);return n.createElement(E,{...e,formatter:s})}function T({min:e=0,max:t,floatingPointFormat:r,onEvaluateExpressionError:i,...a}){let{smallNudgeAmount:o,bigNudgeAmount:s}=a,c=(0,n.useMemo)(()=>new l.uf({min:Math.max(e,0),max:t,smallNudgeAmount:o,bigNudgeAmount:s,floatingPointFormat:r,onEvaluateExpressionError:i}),[e,t,o,s,r,i]);return n.createElement(E,{...a,formatter:c})}function w({min:e=0,max:t,...r}){let{smallNudgeAmount:i,bigNudgeAmount:a}=r,o=(0,n.useRef)(!1),s=(0,n.useMemo)(()=>new l.PI({min:Math.max(e,0),max:t,smallNudgeAmount:i,bigNudgeAmount:a}),[e,t,i,a]),u=(0,c.nK)(r.value)&&r.mixedMathHandler,p=r.disabled||r.scrubbingDisabled||"number"!=typeof r.value&&!Array.isArray(r.value)&&!u,g=r.isTokenizable?h.H:m.Q1;return n.createElement(_.Y,{...f,...r,formatter:s,scrubbingDisabled:p,onScrubBegin:e=>{var t;o.current=!0,null==(t=r.onScrubBegin)||t.call(r,e)},onScrubEnd:e=>{var t;o.current=!1,null==(t=r.onScrubEnd)||t.call(r,e)},className:r.className},r.children,n.createElement(g,{forwardedRef:r.forwardedRef,disabled:r.disabled,className:r.inputClassName,formatter:s,property:r.value??null,source:o.current?"scrub":"document",onChange:e=>r.onValueChange(e,d.P7.YES),mixedMathHandler:r.mixedMathHandler,onMixedMathNudge:r.onMixedMathNudge,onBlur:r.onBlur,onFocus:r.onFocus,onNudge:r.onNudge,onKeyDown:r.onKeyDown,onClick:r.onClick,onPaste:r.onPaste,recordingKey:r.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:r.shouldClearOnFocus,placeholder:r.placeholder,dataTestId:r.dataTestId}))}function S({min:e,max:t,allowEmpty:r,...i}){let{smallNudgeAmount:a,bigNudgeAmount:o}=i,s=(0,n.useRef)(!1),u=(0,n.useMemo)(()=>new l.HA({min:e,max:t,smallNudgeAmount:a,bigNudgeAmount:o,allowEmpty:r}),[e,t,a,o,r]),p=(0,c.nK)(i.value)&&i.mixedMathHandler,g=i.disabled||i.scrubbingDisabled||"number"!=typeof i.value&&!p,E=i.isTokenizable?h.H:m.Q1;return n.createElement(_.Y,{...f,...i,formatter:u,scrubbingDisabled:g,onScrubBegin:e=>{var t;s.current=!0,null==(t=i.onScrubBegin)||t.call(i,e)},onScrubEnd:e=>{var t;s.current=!1,null==(t=i.onScrubEnd)||t.call(i,e)},className:i.className},i.children,n.createElement(E,{forwardedRef:i.forwardedRef,disabled:i.disabled,className:i.inputClassName,formatter:u,property:i.value??null,source:s.current?"scrub":"document",allowEmpty:r,onChange:e=>i.onValueChange(e,d.P7.YES),mixedMathHandler:i.mixedMathHandler,onMixedMathNudge:i.onMixedMathNudge,onBlur:i.onBlur,onFocus:i.onFocus,onNudge:i.onNudge,onKeyDown:i.onKeyDown,onPaste:i.onPaste,recordingKey:i.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:i.shouldClearOnFocus,placeholder:i.placeholder,dataTestId:i.dataTestId}))}function C({min:e=.001,max:t=10,resolution:r=.001,...i}){let a=(0,n.useMemo)(()=>new l.Mw(l.n6.MILLISECONDS,t,e),[t,e]);return n.createElement(E,{...i,resolution:r,formatter:a})}function O({min:e=.001,max:t=10,resolution:r=.001,...i}){let a=(0,n.useMemo)(()=>new l.Mw(l.n6.SECONDS,t,e),[t,e]);return n.createElement(E,{...i,resolution:r,formatter:a})}function A({max:e=3600,displayFractions:t=!1,...r}){let i=(0,n.useMemo)(()=>new l.DX(e,t),[e,t]);return n.createElement(E,{...r,formatter:i})}let N={...f,scrubMultiplier:4,wheelMultiplier:2};function L({min:e=0,max:t=1,decimals:r,hidePercentSign:i,...a}){let{smallNudgeAmount:o,bigNudgeAmount:s}=a,c=(0,n.useMemo)(()=>new l.JP({min:e,max:t,smallNudgeAmount:o,bigNudgeAmount:s,decimals:r,hidePercentSign:i}),[e,t,o,s,r,i]);return n.createElement(E,{...N,...a,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function P(e){let t="ui3"===(0,i.Fg)().version,{inputClassName:r,...o}=e;return t?n.createElement(L,{...o,inputClassName:`${g.Nx} ${r}`,"data-tooltip-type":u.fR.TEXT,"data-tooltip":(0,a.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0,hidePercentSign:!0,childrenAtEnd:!0},n.createElement("span",{className:g.Xn},n.createElement(a.Tx,{id:"fullscreen.scrubbable.percent"}))):n.createElement(L,{...e,"data-tooltip-type":u.fR.TEXT,"data-tooltip":(0,a.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function R(e){let{smallNudgeAmount:t,bigNudgeAmount:r}=e,i=(0,n.useMemo)(()=>new l.Fz({smallNudgeAmount:t,bigNudgeAmount:r}),[t,r]);return n.createElement(E,{...e,formatter:i,postScrubMultiplier:-.5,postWheelMultiplier:-.2,postBigNudgeAmount:.1})}function k(e){let t=(0,n.useMemo)(()=>new l.Fz({min:7.16,max:180}),[]);return n.createElement(E,{...e,formatter:t,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function D(e){let{min:t,smallNudgeAmount:r=o.lN,bigNudgeAmount:i=o.uy,formatter:a}=e,s=(0,n.useRef)(!1),c=(0,n.useMemo)(()=>a??new l.nb({min:t,smallPixelNudgeAmount:r,bigPixelNudgeAmount:i}),[t,r,i,a]);return n.createElement(_.Y,{...f,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,className:e.className,value:e.value,onValueChange:e.onValueChange,smallNudgeAmount:r,bigNudgeAmount:i,scrubMultiplier:e.scrubMultiplier,disabled:e.disabled,scrubbingDisabled:e.disabled,dispatch:e.dispatch,formatter:c,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1}},e.children,n.createElement(m.Q1,{disabled:e.disabled,className:e.inputClassName,formatter:c,property:e.value,source:s.current?"scrub":"document",onChange:t=>e.onValueChange(t,d.P7.YES),recordingKey:e.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:e.shouldClearOnFocus,placeholder:e.placeholder}))}},140461:(e,t,r)=>{r.d(t,{Nt:()=>y,nw:()=>v,z9:()=>E});var n=r(652983),i=r(87608),a=r.n(i),o=r(716250),l=r(381846),s=r(204829),c=r(435613),d=r(401960),u=r(492459),p=r(809377),m=r(269783),h=r(509982),_=r(146213),g=r(882030);let f=n.forwardRef(function({children:e,disabled:t,icon:r,inputClassName:i,isActive:o,nonTextChild:l,noBorder:s,onMouseDownCapture:c,onContextMenuCapture:d},u){return n.createElement("div",{ref:u,className:a()(i,{[g.tz]:!0,[g.bB]:o,[g.iP]:!s,[g.JU]:t,[g.E8]:l}),onMouseDownCapture:c,onContextMenuCapture:d},n.createElement("div",{className:g.cW},e),!t&&r)}),E=n.forwardRef(function({inputClassName:e,inputRef:t,currentFieldValue:i,recordingKey:d,disabled:u,children:m,hideIcon:E=!1,nonTextChild:y,isActive:v,onPickerOpen:b,disableEntryPoint:I=!1,noBorder:T,hasBindingContextMenu:w},S){var C,O;let A=n.useId(),N=(0,n.useContext)(h.e),L=(0,n.useRef)(null),{showing:P,show:R,data:k,hide:D}=(0,p.x)(_.F+A),M=n.useCallback(()=>{b?b():null==N||N.showBindingUI(L.current,{currentFieldValue:i}),D()},[i,D,b,N]),F=n.useCallback(()=>{var e;null==(e=null==N?void 0:N.onVariableSelected)||e.call(N,void 0),D()},[D,N]),x=s.Wn(d,"mousedown",e=>{if(e&&!I&&e.shiftKey){M(),e.preventDefault(),e.stopPropagation();return}}),U=s.Wn(d,"contextmenu",e=>{e&&!I&&w&&(0,o.BZ)().ds_variables_strokes&&(null==t?void 0:t.current)&&(R({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())});return n.createElement(n.Fragment,null,n.createElement(f,{recordingKey:d,inputClassName:e,disabled:u,isActive:null!=v?v:!!(null==N?void 0:N.isShowingBindingUI),ref:(0,l.Z)(S,L),onMouseDownCapture:x,onContextMenuCapture:U,nonTextChild:y,noBorder:T,icon:E||I?void 0:n.createElement(c.n,{recordingKey:s.ar(d,"comboBoxButton"),className:a()(g.qv),svg:r(25495),onClick:M})},m),w&&t&&P&&"number"==typeof(null==(C=null==k?void 0:k.position)?void 0:C.top)&&"number"==typeof(null==(O=null==k?void 0:k.position)?void 0:O.left)&&n.createElement(_.m,{inputRef:t,isBound:!!(null==N?void 0:N.boundVariableId),left:k.position.left,onClose:D,onOpenVariablePicker:M,onUnbindVariable:F,recordingKey:s.ar(d,"contextMenu"),top:k.position.top}))});function y({fields:e,currentFieldValue:t,resolvedType:r,inputClassName:i,inputRef:a,disabled:o,recordingKey:l,disableEntryPoint:s,hideIcon:c,noBorder:d,children:p,hasBindingContextMenu:h}){let _=(0,u.$D)(e).data??[];return n.createElement(m.IJ,{fields:e,resolvedType:r},n.createElement(E,{recordingKey:l,inputClassName:i,inputRef:a,disabled:o,currentFieldValue:t,disableEntryPoint:!!s||0===_.length,hideIcon:c,noBorder:d,hasBindingContextMenu:h},p))}let v=n.forwardRef(function({currentFieldValue:e,disabled:t,isActive:r,recordingKey:i,children:o,onPickerOpen:c,dataTestId:u},p){let m=(0,n.useContext)(h.e),_=(0,n.useRef)(null),f=n.useCallback(()=>{c?c():null==m||m.showBindingUI(_.current,{currentFieldValue:e})},[e,c,m]),E=s.Wn(i,"mousedown",e=>{if(e&&!t){if((0,d.Z)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){f(),e.preventDefault(),e.stopPropagation();return}}}),y=s.Wn(i,"contextmenu",e=>{e&&!t&&(f(),e.preventDefault(),e.stopPropagation())});return n.createElement("div",{ref:(0,l.Z)(p,_),className:a()({[g.cM]:!0,[g.gO]:r}),onMouseDownCapture:E,onContextMenu:y,"data-testid":u},o)})},401106:(e,t,r)=>{r.d(t,{KD:()=>p,fY:()=>u});var n=r(652983),i=r(407908),a=r(239299),o=r(864974),l=r(312616);function s(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function c(e,t){return e.getState().userFlags[t]}function d(e,t,r){let{isDefault:n,isManaged:i,isSrgb:a,isUnmanaged:l}=t,c={};n&&"default"!==r&&(c.color_management_desktop_app_setting_default=!1),l&&"unmanaged"!==r&&(c.color_management_desktop_app_setting_unmanaged=!1),i&&"managed"!==r&&(c.color_management_desktop_app_setting_managed=!1),a&&"srgb"!==r&&(c.color_management_desktop_app_setting_srgb=!1);let d=n&&"default"===r||l&&"unmanaged"===r||i&&"managed"===r||a&&"srgb"===r;void 0===r||d||(c[s(r)]=!0),Object.keys(c).length>0&&e(o.v(c))}function u(e){var t;if(!a.YO)return;let r=null==(t=a.YO)?void 0:t.getLegacyColorSpacePreference();d(e.dispatch,{isDefault:!!c(e,s("default")),isUnmanaged:!!c(e,s("unmanaged")),isManaged:!!c(e,s("managed")),isSrgb:!!c(e,s("srgb"))},r)}function p(){let e=!!(0,l.p)(s("default")),t=!!(0,l.p)(s("unmanaged")),r=!!(0,l.p)(s("managed")),a=!!(0,l.p)(s("srgb")),o=(0,i.I0)(),c=n.useCallback(n=>{d(o,{isDefault:e,isUnmanaged:t,isManaged:r,isSrgb:a},n)},[o,e,r,a,t]),u=null;return e&&(u="default"),t&&(u="unmanaged"),r&&(u="managed"),a&&(u="srgb"),[u,c]}},409859:(e,t,r)=>{r.d(t,{lo:()=>y,sW:()=>f,z6:()=>E});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(618723),c=r(212984),d=r(970740),u=r(547699),p=r(100834),m=r(659994),h=r(322186),_=r(171433),g=r(852254),f=((n=f||{})[n.LARGE=0]="LARGE",n[n.MEDIUM=1]="MEDIUM",n[n.SMALL=2]="SMALL",n);function E({size:e=1,useCurrentFileAsThumbnail:t=!1}){var r;let n=(0,h.Ng)(),o=(0,a.v9)(e=>e.user),s=(0,a.v9)(e=>e.openFile),c=null==s?void 0:s.key,d=(0,m.QN)(),p={modalGraphic:g._w,orgAvatar:g.Jz,userAvatar:g.rR,exampleFileThumbnail:g.Jx,thumbnailContainer:g.JF,avatar:g.Gd,thumbnailInnerContainer:g.g2},f={modalGraphic:g.fT,orgAvatar:g.ae,userAvatar:g.mV,exampleFileThumbnail:g.Ps,thumbnailContainer:g.PV,avatar:g.Qq,thumbnailInnerContainer:g.tw},E={modalGraphic:g.r8,orgAvatar:g.Tg,userAvatar:g.K$,exampleFileThumbnail:g.Td,thumbnailContainer:g.eQ,avatar:g.DB,thumbnailInnerContainer:g.tw},y={2:E,1:f,0:p}[e],v=i.createElement("img",{src:"https://static.figma.com/uploads/b13789723ab5e9138ab263193f7d82aff4c47674",alt:"",className:g.z$});if(void 0!==c&&t){let e=null==(r=d[c])?void 0:r.thumbnail_url;void 0!==e&&(v=i.createElement("img",{src:e,alt:"",className:g.z$}))}return i.createElement("div",{className:y.modalGraphic},i.createElement("img",{src:"https://static.figma.com/uploads/f290b00b2b225be3eb5056cb4473d87953764837",alt:"",className:y.exampleFileThumbnail}),o&&i.createElement(_.w,{className:l()(y.avatar,y.orgAvatar),userId:o.id,orgId:null==n?void 0:n.id,size:2===e?16:1===e?24:32}),o&&i.createElement("div",{className:l()(y.avatar,y.userAvatar)},i.createElement(u.Yt,{user:o,size:2===e?u.DZ.SMALL16:1===e?u.DZ.MEDIUM:u.DZ.LARGE})),i.createElement("div",{className:y.thumbnailContainer},i.createElement("div",{className:y.thumbnailInnerContainer},v)))}function y(){return i.createElement("div",null,i.createElement(E,{size:0,useCurrentFileAsThumbnail:!0}),i.createElement("div",{className:c.cx.p16.font11.$},i.createElement(d.Tx,{id:"whiteboard.inserts.custom_templates_description"})),i.createElement("div",{className:c.cx.flex.justifyEnd.mx16.mb16.$},i.createElement(s.Ok,{target:"_blank",href:p.C},i.createElement(d.Tx,{id:"whiteboard.inserts.learn_more"}))))}},933244:(e,t,r)=>{r.d(t,{Nm:()=>c,Ov:()=>s,TI:()=>u,ju:()=>p,mh:()=>d,pp:()=>a,t8:()=>l});var n,i=r(337167),a=((n=a||{}).STICKY="STICKY",n.STAMP="STAMP",n.PAN="PAN",n.ZOOM="ZOOM",n);let o=Object.values(a),l=(0,i.w0)({onboardingCanShow:!1,shownTooltips:new Set(o)},(e,t)=>{switch(t.type){case"INITIALIZE_ONBOARDING":{let t=new Set(o);return{...e,onboardingCanShow:!0,shownTooltips:t}}case"DISMISS_ONBOARDING":return{...e,shownTooltips:new Set};case"DISMISS_TOOLTIP":{let r=new Set([...e.shownTooltips]);return r.delete(t.tooltip),{...e,shownTooltips:r}}case"SHOW_TOOLTIP":{let r=new Set([...e.shownTooltips]);return r.add(t.tooltip),{...e,shownTooltips:r}}}}),s=(0,i.cn)(e=>{let{onboardingCanShow:t,shownTooltips:r}=e(l);return t&&!r.size}),c=e=>{let t=(0,i.Dv)(l);return t.onboardingCanShow&&t.shownTooltips.has(e)},d=e=>{let t=(0,i.Dv)(l);return t.onboardingCanShow&&!t.shownTooltips.has(e)},u=()=>{let e=(0,i.Dv)(l);return e.onboardingCanShow},p=()=>{let e=(0,i.b9)(l);return()=>{e({type:"DISMISS_TOOLTIP",tooltip:"PAN"}),e({type:"DISMISS_TOOLTIP",tooltip:"ZOOM"})}}},686688:(e,t,r)=>{r.d(t,{B3:()=>l,E3:()=>a,Id:()=>o,_n:()=>s});var n=r(961215);function i(){return new Date(Date.now()-6e4)}function a(e){return null!==e&&e.createdAt>i()}function o(e){return[n.UAh.NONE,n.UAh.SELECT].includes(e)}function l(e,t){return t===(null==e?void 0:e.creatorId)}function s(e){return!!e&&e.createdAt>i()}},883968:(e,t,r)=>{r.d(t,{b:()=>o,u:()=>a});var n=r(301760);let i=()=>Date.now()-12096e5;function a({userCreatedAt:e,lastUsedFigjamDate:t,hasSeenOverlayV2:r}){return!!(e.getTime()<=i()&&(null==t||t.getTime()<=i()))&&!r}function o(e,t=[]){return null==e.data||t.includes(e.data)||!n.Nt.includes(e.data)?"other":e.data}},116693:(e,t,r)=>{r.d(t,{Z:()=>R,x:()=>A});var n=r(652983),i=r(407908),a=r(19516),o=r(365653),l=r(716250),s=r(337167),c=r(864974),d=r(329660),u=r(11802),p=r(702348),m=r(37930),h=r(520531),_=r(590245),g=r(685056),f=r(536562),E=r(652309),y=r(723259),v=r(200273),b=r(733609),I=r(201248),T=r(532444),w=r(736823),S=r(362568),C=r(237122),O=r(498266);let A=(0,s.cn)(!1),N=()=>new Date(Date.now()-1e4),L="Move Drafts Nudge -",P=(0,f.n_)("dismissed_move_drafts_nudge");function R(){let e=(0,o.c)(e=>(0,b.getPermissionsState)(e)),t=(0,s.Dv)(v.Up),r=(0,s.Dv)(g.$e),R=(0,s.Dv)(f.PW),k=(0,s.Dv)(_.Tv),D=(0,s.Dv)(g.O1),M=(0,s.Dv)(_.LP),F=(0,s.Dv)(h.l),x=(0,s.Dv)(P),U=(0,s.b9)(A),B=(0,p.I)({id:y.G.MoveDraftsNudge,priority:I.b4.SECONDARY_MODAL},[F,r,R,k,D,M,x]),{currentStep:V,next:G}=(0,m.Z)({numSteps:2,onComplete:B.complete}),H=(0,i.I0)();return(0,a.O)(()=>{((0,l.BZ)().exp_move_drafts_v1||(0,l.BZ)().exp_pro_user_move_draft_nudge)&&null!=t&&t.canEdit&&t.createdAt>N()&&B.show({canShow:(r,n,i,a,o,l,s)=>n===T.FQ.PERSONAL&&l&&a&&!function(e,t){let r=(0,E.K5)(e,"ran_move_drafts_nudge_machine");return!!r||(t(c.v({ran_move_drafts_nudge_machine:!0})),!1)}(i,H)&&!s&&(!!(0,u.Il)(o,r)||!!(0,d.Hw)((0,b.isProTeamEditor)(e,null==t?void 0:t.editorType,r))),onShow:()=>{U(!0)}})}),n.createElement(w.Y,{currentStep:V,isShowing:B.isShowing},n.createElement(S.a,{isShowing:B.isShowing,modalType:O.w8.SELF_CONTAINED,trackingContextName:`${L} Main nudge`,element:C.aA,onClickPrimaryCta:G,onManualDismiss:B.complete,testId:"move_drafts_main_nudge",onClose:B.complete}),n.createElement(S.a,{isShowing:B.isShowing,modalType:O.w8.SELF_CONTAINED,trackingContextName:`${L} Dropdown highlight`,element:C.pc,onClickPrimaryCta:G,onManualDismiss:B.complete,onClose:B.complete}))}},529717:(e,t,r)=>{r.d(t,{a:()=>w,u:()=>S});var n=r(652983),i=r(407908),a=r(280229),o=r.n(a),l=r(337167),s=r(864974),c=r(11802),d=r(702348),u=r(693693),p=r(590245),m=r(685056),h=r(536562),_=r(652309),g=r(723259),f=r(862610),E=r(201248),y=r(532444),v=r(362568),b=r(237122),I=r(498266),T=r(116693);let w="Node Count Reached for Draft";function S(){let e=(0,n.useRef)(!1),t=(0,l.Dv)(p.QL),r=(0,l.Dv)(p.Tv),a=(0,l.Dv)(m.O1),S=(0,l.Dv)(p.LP),C=(0,l.Dv)(m.$e),O=(0,l.Dv)(h.PW),A=(0,l.Dv)(T.x),N=(0,l.Dv)((0,f.MoveDraftsTeamData)({orgId:null})),L=(0,i.I0)(),P=(0,i.v9)(e=>{var t,r,n;let i=null==(r=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:r.currentPage,a=null==(n=null==e?void 0:e.mirror)?void 0:n.sceneGraph,o=null==a?void 0:a.get(i);return!!o&&(!o.childrenNodes.length||o.childrenAreAllGhosts)}),R=(0,d.I)({id:g.G.MoveDraftsNudgeV2,priority:E.b4.SECONDARY_MODAL,experiment:{check:c.kt,predicate:o(),postCheck:()=>!0}},[a,r,S,C,O,N]),k=(0,n.useCallback)(()=>{!t||e.current||A||P||R.show({canShow(e,t,r,n,i,a){var o,l;let c=(null==(l=null==(o=null==a?void 0:a.currentUser)?void 0:o.teamEditRoles)?void 0:l.map(e=>e.team))??[],d=c.filter(e=>e&&e.projects&&e.projects.length>0),u=0===d.length;return e&&t&&r&&n===y.FQ.PERSONAL&&!u&&!(0,_.aS)(i,"ran_move_drafts_nudge_v2_num_3")&&((0,_.aS)(i,"ran_move_drafts_nudge_v2_num_2")?!(0,_.K5)(i,"ran_move_drafts_nudge_v2_num_2")&&(L(s.v({ran_move_drafts_nudge_v2_num_3:!0})),!0):(0,_.aS)(i,"ran_move_drafts_nudge_v2_num_1")?!(0,_.K5)(i,"ran_move_drafts_nudge_v2_num_1")&&(L(s.v({ran_move_drafts_nudge_v2_num_2:!0})),!0):(L(s.v({ran_move_drafts_nudge_v2_num_1:!0})),!0))},onShow(){e.current=!0}})},[t,P,L,A,R]),D=(0,n.useCallback)(({dismissModal:e,onClickPrimaryCta:t})=>n.createElement(b.um,{dismissModal:e,onClickPrimaryCta:t}),[]);return(0,u.J)(R.uniqueId,w,k),n.createElement(v.a,{isShowing:R.isShowing,modalType:I.w8.SELF_CONTAINED,trackingContextName:"Move Drafts Nudge - Team nudge",element:D,onClickPrimaryCta:()=>{L(s.v({ran_move_drafts_nudge_v2_num_3:!0})),R.complete()},onClose:R.complete,onManualDismiss:R.complete})}},298423:(e,t,r)=>{r.d(t,{jm:()=>v,nN:()=>b});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(365653),s=r(286206),c=r(618723),d=r(782051),u=r(970740),p=r(111120),m=r(866359),h=r(436649),_=r(488160),g=r(733609),f=r(63888);let E=e=>{e(m.N_())},y=(e,t)=>{t(p.YQ({url:e}))};function v(e){let t=(0,i.I0)(),r=(0,l.c)(e=>{let t=(0,_.U3)(e.fileByKey,(0,g.getPermissionsState)(e)),r=m.N_.loadingKeyForPayload();return{isLoading:(0,h.hg)(e.loadingState,r),tutorialFileUrl:t,shouldShowLoadingState:!t,didFail:(0,h.OZ)(e.loadingState,r)}});n.useEffect(()=>{r.tutorialFileUrl||r.isLoading||E(t)},[]);let{dismissModal:a}=e;return n.useEffect(()=>{r.didFail&&(a(),b("failure","curator"))},[r.didFail,a]),n.useEffect(()=>{let e=setTimeout(()=>{r.isLoading&&b("timeout","curator")},5e3);return()=>clearTimeout(e)},[r.isLoading]),n.createElement("div",{className:f._5},n.createElement("div",{className:f.ef},n.createElement("div",{className:f.cH},n.createElement("div",{className:f.er},n.createElement("div",{className:f.Bj},n.createElement("img",{className:f.BH,src:"https://static.figma.com/uploads/964c3ddf18b0f2712b664efde991dfc4f2c58eb8",alt:""})),n.createElement("div",{className:o()({[f.Mr]:!0,[f.mJ]:!0})},n.createElement("div",{className:f.h6},n.createElement(u.Tx,{id:"rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial"})),n.createElement("div",{className:f.Me},n.createElement("div",{className:f.eB,onClick:e.dismissModal},n.createElement(u.Tx,{id:"rcs.figjam_onboarding.maybe_later"})),n.createElement(c.RS,{className:r.shouldShowLoadingState?f.rB:f.sp,onClick:()=>{r.tutorialFileUrl&&y(r.tutorialFileUrl,t),e.dismissModal()},disabled:r.shouldShowLoadingState},r.shouldShowLoadingState?n.createElement(d.TK,{className:f.aU}):n.createElement(u.Tx,{id:"rcs.figjam_onboarding.open_tutorial"}))))))))}function b(e,t){(0,s.wT)("type",e),(0,s.wT)("source",t),(0,s.x9)("FigJam onboarding - failed to load open tutorial button")}},983251:(e,t,r)=>{r.d(t,{qj:()=>C,ds:()=>S,hi:()=>L});var n=r(652983),i=r(407908),a=r(388899),o=r(970740),l=r(299482),s=r(65249),c=r(765177),d=r(405027),u=r(702348),p=r(693693),m=r(723259),h=r(200273),_=r(201248),g=r(362568),f=r(93213),E=r(157607),y=r(498266),v=r(477365),b=r(425285);let I=f.W9,T=v.sq,w=c.x,S="open-playground-file-onboarding-event",C="open-playground-file-click-event";function O(){let e=(0,i.v9)(e=>e.selectedView),t=n.createElement(s.x,{i18nId:"rcs.playground_file.ready_to_try",fontWeight:"bold"});return n.createElement("p",{style:l.sx.add({animation:"none"}).$},e.isWidget?n.createElement(o.Tx,{id:"rcs.playground_file.ready_to_try.widget",readyToTry:t}):n.createElement(o.Tx,{id:"rcs.playground_file.ready_to_try.plugin",readyToTry:t}))}function A(){return n.createElement("div",{style:l.sx.add({animation:"none"}).$},n.createElement("div",{className:"open_playground_file_overlay--titleText--dfQ-w"},n.createElement(o.Tx,{id:"rcs.playground_file.switch_devmode_to_design_title"})),n.createElement("div",{className:"open_playground_file_overlay--bodyText--o-uaP"},n.createElement(o.Tx,{id:"rcs.playground_file.switch_devmode_to_design_description"})))}function N(e){let t,r,i,o;switch(e.fullscreenEditorType){case"dev_handoff":t="Open Playground File Onboarding Nudge (DevMode)",r=w,i=A,o=6;break;case"whiteboard":t="Open Playground File Onboarding Nudge (FigJam)",r=T,i=O;break;default:t="Open Playground File Onboarding Nudge (Figma)",r=I,i=O}return n.createElement(g.a,{testId:"OpenPlaygroundFileOverlay",modalType:y.w8.POINTER,onboardingKey:r,trackingContextName:t,width:250,element:i,shouldCenterArrow:E.Ht.FALLBACK,shouldNotWrapInParagraphTag:!0,isShowing:e.isShowing,onClickPrimaryCta:e.onClose,onClose:a.ZT,onManualDismiss:e.onClose,topPadding:o})}function L(){let e=(0,u.I)({id:m.G.OpenPlaygroundFile,priority:_.b4.SECONDARY_MODAL}),t=(0,h.CA)(),r=(0,b.yD)();return((0,p.J)(e.uniqueId,S,()=>{(null==t?void 0:t.canEdit)&&e.show()}),(0,p.J)(e.uniqueId,[v.bB,C,"action_open_universal_insert_collage_modal",d.DE],()=>{e.complete()}),t)?n.createElement(N,{onClose:e.complete,fullscreenEditorType:r,isShowing:e.isShowing}):null}},763568:(e,t,r)=>{r.d(t,{Nk:()=>y,Ut:()=>h,Wz:()=>_});var n=r(652983),i=r(337167),a=r(970740),o=r(702348),l=r(693693),s=r(536562),c=r(723259),d=r(201248),u=r(362568),p=r(722145),m=r(498266);let h="plugin-publish-invite-publishers-onboarding-event",_="plugin-publish-invite-publishers-click-event",g="seen_plugin_publish_invite_publishers_onboarding",f=(0,s.n_)(g),E=()=>(0,a.t)("rcs.plugin_publish.work_with_other_developers");function Element(){return n.createElement("p",null,n.createElement(a.Tx,{id:"rcs.plugin_publish.if_anyone_helped"}))}function y(){let e=(0,i.Dv)(f),t=(0,o.I)({id:c.G.PluginPublishInvitePublishersOnboardingNudgeModal,priority:d.b4.SECONDARY_MODAL},[e]);return(0,l.J)(t.uniqueId,h,()=>{t.show({canShow:e=>!e})}),(0,l.J)(t.uniqueId,[_,"Lost DOM Target"],()=>{t.complete()}),n.createElement(u.a,{isShowing:t.isShowing,modalType:m.w8.ANNOUNCEMENT_POINTER,trackingContextName:"Plugin Publish Invite Publishers Onboarding Modal",element:Element,title:E,onboardingKey:p.k,userFlagOnShow:g,width:300,onClickPrimaryCta:t.complete,onClose:t.complete,onManualDismiss:t.complete})}},616803:(e,t,r)=>{r.d(t,{Yl:()=>k,m9:()=>M,PQ:()=>D});var n=r(652983),i=r(407908),a=r(19516),o=r(337167),l=r(388899),s=r(519781),c=r(618723),d=r(212984),u=r(970740),p=r(702348),m=r(693693),h=r(417704),_=r(723259),g=r(244770),f=r(961215),E=r(232888),y=r(424479),v=r(312616),b=r(572333),I=r(30593),T=r(201248),w=r(220949),S=r(362568),C=r(699483),O=r(93213),A=r(157607),N=r(762616),L=r(498266);let P=r(670955),R="trigger-magic-touch";function k(){let e=(0,p.I)({id:_.G.AddThatMagicTouchTooltip,priority:T.b4.DEFAULT_MODAL}),t=(0,i.v9)(e=>{var t;return null==(t=e.dropdownShown)?void 0:t.type});return((0,m.J)(e.uniqueId,R,()=>{e.isShowing||e.show()}),(0,n.useEffect)(()=>{e.isShowing&&("interaction-type-select"===t||(null==t?void 0:t.includes("prototypeInteractionEditModal")))&&e.complete()},[t,e]),e.isShowing)?n.createElement(S.a,{modalType:L.w8.POINTER,trackingContextName:"Prototyping Onboarding > Add that magic touch",element:()=>n.createElement("div",{className:"tooltips--magicTouchHeader--KbJRc"},n.createElement("div",{className:d.cx.font13.fontSemiBold.$},n.createElement(u.Tx,{id:"prototyping_in_onboarding.add_that_magic_touch"})),n.createElement(c.Ki,{multiple:1}),n.createElement(u.Tx,{id:"prototyping_in_onboarding.take_your_prototype_to_the_next_level"})),shouldNotWrapInParagraphTag:!0,isShowing:e.isShowing,width:268,onClickPrimaryCta:l.ZT,onManualDismiss:()=>e.complete(),onClose:()=>e.complete(),onboardingKey:C.I6,arrowPosition:A.xI.RIGHT_TITLE,topPadding:10,onTargetLost:()=>e.complete()}):null}function D(){let e=(0,p.I)({id:_.G.PresentPrototypeTooltip,priority:T.b4.DEFAULT_MODAL}),t=(0,v.p)("seen_present_prototype_tooltip"),[r,a]=n.useState(!1),[s,c]=(0,o.KO)(g.UJ),h=(0,o.b9)(g.Kx),I=(0,i.v9)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)==="flyout-dropdown-prototype-view-flyout"}),C=(0,b.mA)(f.O$1.prototypingEditorState().nodeWithPlusBubble),{destination:A}=(0,E.Ju)(y.TSSceneGraph.instance),N=null==A?void 0:A.guid;(0,n.useEffect)(()=>{s!==g.TC.NotStarted&&C!==y.Hx&&a(!0)},[C,s]),(0,n.useEffect)(()=>{r&&!e.isShowing&&!t&&C===y.Hx&&N&&(e.show(),h(N))},[t,r,C,e,h,N]),(0,m.J)(e.uniqueId,"action_present_as_prototype",()=>{e.isShowing&&(e.complete(),s===g.TC.AnimationComplete&&c(g.TC.PrototypePlayed),setTimeout(()=>(0,w.m_)({id:R}),1e3))});let P=()=>{e.complete(),c(g.TC.PrototypePlayed)};if(!e.isShowing)return null;let k=I?O.TC:O.oG;return n.createElement(S.a,{modalType:L.w8.POINTER,trackingContextName:"Prototyping Onboarding > Preview or present your prototype",element:()=>n.createElement("span",{className:d.cx.font11.fontMedium.$},n.createElement(u.Tx,{id:"prototyping_in_onboarding.preview_or_present_your_prototype"})),isShowing:e.isShowing,width:236,onClickPrimaryCta:l.ZT,onManualDismiss:P,onClose:P,onboardingKey:k,showHighlight:!0,userFlagOnShow:"seen_present_prototype_tooltip"})}function M(){let e=(0,p.I)({id:_.G.ClickThroughHotspotsTooltip,priority:T.b4.DEFAULT_MODAL}),t=(0,v.p)("seen_click_through_hotspots_tooltip"),r=(0,h.BA)(I.AJ),i=!!r;(0,a.O)(()=>{t||!i||e.isShowing||e.show()});let o=()=>{e.complete()};return((0,m.J)(e.uniqueId,N.g0,t=>{var n;r&&(null==(n=null==t?void 0:t.properties)?void 0:n.nodeId)===r&&e.isShowing&&o()}),e.isShowing)?n.createElement(S.a,{modalType:L.w8.SELF_CONTAINED,trackingContextName:"Prototyping Onboarding > Click through hotspots",element:()=>n.createElement("div",{className:"tooltips--bottomRightModalContainer--5sTcE"},n.createElement("div",{role:"tooltip",className:"tooltips--hotspotsModalContainer--6LZH1 pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",style:{width:"268px"}},n.createElement("p",{className:d.cx.font11.fontMedium.$},n.createElement(u.Tx,{id:"prototyping_in_onboarding.click_through_all_the_hotspots"})),n.createElement(s.PZ,{innerText:"close",className:"tooltips--closeButton--d70aK pointer_modal--closeButton--yKnli",onClick:o,svg:P,useOriginalSrcFills_DEPRECATED:!0}))),isShowing:e.isShowing,onClickPrimaryCta:l.ZT,onManualDismiss:o,onClose:o,userFlagOnShow:"seen_click_through_hotspots_tooltip"}):null}},474987:(e,t,r)=>{r.d(t,{yn:()=>L,li:()=>k,jH:()=>R});var n=r(652983),i=r(407908),a=r(716250),o=r(337167),l=r(970740),s=r(124040),c=r(702348),d=r(590245),u=r(685056),p=r(536562),m=r(723259),h=r(961215),_=r(393932),g=r(639399),f=r(612565),E=r(671755),y=r(201248),v=r(718160),b=r(663257),I=r(852046),T=r(247949),w=r(40162),S=r(88323),C=r(229382),O=r(53797),A=r(437651),N=r(900294);let L="section_presets_announcement_key",P="seen_figjam_section_presets_announcement",R=(0,p.OD)(P);function k(){let e=(0,o.Dv)(A.p)===N.sI.TRUE,t=(0,i.v9)(t=>(0,g.f9)(t.mirror)||e&&(0,g.TD)(t.mirror)),r=(0,i.v9)(e=>e.mirror.appModel.currentPage),p=(0,E.OU)((t,r)=>(0,f.W)(t,r)||e&&(0,f.A)(t,r),r),k=(0,a.BZ)().scenegraph_hooks_mirror_helpers?p:t,D=(0,_.e)(),M=(0,o.Dv)((0,o.n7)(d.sb)),F=(0,o.Dv)(R),x=(0,o.Dv)(C.showSectionPresetsTreatment),U=(0,S.UY)(),B=function(){let[e,t]=(0,n.useState)(!1),r=(0,i.v9)(e=>e.isMakeSomethingV2Active),a=(0,o.Dv)(T.SA),l="closed"!==(0,o.Dv)(O.xm);return(0,n.useEffect)(()=>{(r||l||a)&&t(!0)},[a,r,l]),e}(),V=(0,o.Dv)(T.NL),G=(0,o.Dv)(u.JT),H=V.status!==w.L.NONE,[W,K]=(0,n.useState)(!1),{show:z,isShowing:Z,complete:Y}=(0,c.I)({id:m.G.FigJamSectionPresetsAnnouncementOverlay,priority:y.b4.SECONDARY_MODAL,queueOnBlock:!0},[F,M,G]),j=1e3*parseFloat("0.5s")+1e3;return(0,n.useEffect)(()=>{let e=setTimeout(()=>{K(!0)},j);return()=>{clearTimeout(e)}},[j]),(0,n.useEffect)(()=>{x&&!B&&!H&&k&&D&&U&&W&&z({canShow:(e,t,r)=>{let n=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(r);return!e&&!t&&n}})},[z,k,D,x,U,W,H,B]),n.createElement(b.ZZ,{isShowing:Z,userFlagOnShow:P,targetKey:L,onClose:Y,trackingContextName:"section_preset_picker_dlt_announcement",title:n.createElement(l.Tx,{id:"whiteboard.section_presets_onboarding.feature_announcement.title"}),description:n.createElement(l.Tx,{id:"whiteboard.section_presets_onboarding.feature_announcement.description"}),media:n.createElement(v.H,{src:"https://static.figma.com/uploads/0ccb9b0b677f719939bd9bacd937201dfea4e8c9",aspectRatio:4/3}),primaryCta:{label:n.createElement(l.Tx,{id:"rcs.got_it"}),type:"button",onClick:Y,ctaTrackingDescriptor:s.y.GOT_IT},secondaryCta:{label:n.createElement(l.Tx,{id:"whiteboard.section_presets_onboarding.feature_announcement.secondary"}),type:"button",onClick:()=>{e&&h.vor.setFigjamStarterKitEnabled(!1),h.HEw.createSectionForOnboarding(),Y()},ctaTrackingDescriptor:s.y.SECTION_PRESET_PICKER_SHOW_ME},arrowPosition:I.xI.BOTTOM})}},472879:(e,t,r)=>{r.d(t,{vM:()=>u,vr:()=>d});var n=r(652983),i=r(239299),a=r(716250),o=r(122342),l=r(188558);let s="desktop-new-tab-plan-space",c=l.z.object({userId:l.z.string(),orgId:l.z.string().nullish(),teamId:l.z.string().nullish(),timestamp:l.z.number()});function d(e){let t=o.D5;t&&t.setItem(s,JSON.stringify({...e,timestamp:Date.now()}))}function u(){(0,n.useEffect)(()=>{var e,t;let r=(null==(e=(0,a.ZP)().user_data)?void 0:e.id)||void 0,n=(0,a.ZP)().org_id,l=(0,a.ZP)().team_id;if(!i.YO||i.YO.getVersion()>=103||!(0,a.BZ)().desktop_ps_new_tab_reload||n&&!l)return;let d=e=>{let t;if(e){try{t=c.parse(JSON.parse(e))}catch(e){return}t.userId===r&&null==t.orgId&&(t.teamId??null)!==(l??null)&&Date.now()-t.timestamp<1e4&&(window.location.href=`/desktop_new_tab?fuid=${t.userId}&team_id=${t.teamId}`)}},u=e=>{e.key===s&&d(e.newValue)};return d(null==(t=o.D5)?void 0:t.getItem(s)),window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}},[])}},412417:(e,t,r)=>{r.d(t,{I:()=>p});var n=r(652983),i=r(87608),a=r.n(i),o=r(46347),l=r(618723),s=r(623046),c=r(212984),d=r(299482),u=r(902385);function p(e){let{defaultVariant:t,ctaButtonMeta:r}=e,i="big"===e.size,p=n.createElement(s.u,{isLoading:!!r.isLoading,className:c.cx.flex.alignCenter.$},()=>r.label),m=e.ctaButtonMeta.variantOverride||t,h=d.sx.font13.lh24.h40.pl16.pr16;switch(m){case"primary":let _={trackingProperties:{trackingDescriptor:r.ctaTrackingDescriptor,...r.trackingProperties},disabled:r.disabled??r.isLoading,style:d.sx.fontMedium.if(e.emphasized,d.sx.b1.colorBorderOnbrandStrong).if(i,h).$,className:"text"===r.type?u.Z:void 0,dataTestId:r.dataTestId};switch(r.type){case"button":case"text":return n.createElement(l.RS,{onClick:r.onClick,..._},p);case"link":return n.createElement(l.Ok,{href:r.href,target:"_blank",..._},p);default:(0,o.vE)(r)}case"secondary":let g={trackingProperties:{trackingDescriptor:r.ctaTrackingDescriptor,...r.trackingProperties},disabled:r.disabled??r.isLoading,style:d.sx.fontMedium.if(e.emphasized,d.sx.colorTextOnbrand).if(i,h).$,className:a()("text"===r.type?u.Z:void 0,e.emphasized?u.P:void 0),dataTestId:r.dataTestId};switch(r.type){case"text":case"button":return n.createElement(l.pJ,{onClick:r.onClick,...g},p);case"link":return n.createElement(l.fE,{href:r.href,target:"_blank",...g},p);default:(0,o.vE)(r)}default:(0,o.vE)(m)}}},718160:(e,t,r)=>{r.d(t,{H:()=>d,S:()=>c});var n=r(652983),i=r(87608),a=r.n(i),o=r(212984),l=r(299482),s=r(150696);function c(e){return n.createElement("div",{className:a()(o.cx.colorIconOnbrand.colorBorder.bSolid.bt1.bb1.flex.$,s._),style:l.sx.add({margin:"0 -16px",aspectRatio:e.aspectRatio.toString(),width:"-webkit-fill-available"}).$},n.createElement("img",{src:e.src,alt:e.alt,className:o.cx.flex.justifyCenter.alignCenter.overflowHidden.$}))}function d(e){return n.createElement("div",{style:l.sx.colorIconOnbrand.colorBorder.bSolid.bt1.bb1.flex.add({margin:"0 -16px",aspectRatio:e.aspectRatio.toString(),width:"-webkit-fill-available"}).$},n.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial","aria-hidden":"true",style:l.sx.flex.justifyCenter.alignCenter.overflowHidden.$},n.createElement("source",{src:e.src,type:"video/mp4"})))}},1819:(e,t,r)=>{r.d(t,{zR:()=>w,t_:()=>A,yV:()=>S});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(46347),s=r(9247),c=r(519781),d=r(618723),u=r(212984),p=r(970740),m=r(299482),h=r(597837),_=r(456496),g=r(721127),f=r(124040),E=r(131826),y=r(291904),v=r(892826),b=r(505468),I=r(412417);let T="FeatureAnnouncement";function w(e){let t=(0,i.I0)(),{isShowing:r,onClose:a}=e,o=(0,s.D)(r),l=(0,i.v9)(e=>{var t;return null==(t=e.modalShown)?void 0:t.type}),c=l===T,d=(0,s.D)(c);return(0,n.useEffect)(()=>{r&&d&&!c&&a("different_modal_shown")},[r,d,c,a]),(0,n.useEffect)(()=>{o||!r||c?o&&!r&&c&&t(g.eI()):t(g.bF({type:T,optOutOfPrevModal:!0}))},[t,o,r,c]),n.createElement(v.R,{isShowing:r&&c,testId:e.testId,userFlagOnShow:e.userFlagOnShow},n.createElement(S,{...e}))}function S(e){return n.createElement(E.Ui,{name:e.trackingContextName,properties:e.trackingProperties},n.createElement(b.Rj,{animateIn:!0,className:u.cx.overflowHidden.colorText.$,padding:0,size:700,hide:t=>{switch(t){case b.pf.CLICK_OUTSIDE:return e.onClose("modal_background_clicked");case b.pf.PRESS_ESCAPE:return e.onClose("escape_button_pressed");default:(0,l.vE)(t)}},enableEscapeToClose:!0,disableClickOutsideToHide:!1===e.clickOutsideToHide},"landscape"===e.orientation?n.createElement(O,{...e}):n.createElement(C,{...e}),n.createElement(c.PZ,{innerText:(0,p.t)("general.close"),className:o()(u.cx.w32.h32.m8.absolute.top0.right0.colorIcon.$,{"feature_annoucement--closeButtonLight--Xjb45":"light"===e.closeButtonColor,"feature_annoucement--closeButtonDark--VMWkW":"dark"===e.closeButtonColor}),onClick:()=>e.onClose("close_button_clicked"),trackingProperties:{trackingDescriptor:f.y.CLOSE}}),n.createElement(k,{stepCounter:e.stepCounter})))}function C(e){return n.createElement("div",{className:u.cx.flex.$},n.createElement("div",{className:u.cx.flex.flexColumn.justifyCenter.p32.$},n.createElement("div",{className:u.cx.fontInter.font24.fontSemiBold.lh32.$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),n.createElement(d.Ki,{direction:"y",multiple:1}),n.createElement("div",{className:u.cx.fontInter.font14.fontNormal.lh24.$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description),n.createElement(d.Ki,{direction:"y",multiple:3}),n.createElement("div",{className:u.cx.flex.gap8.$},e.primaryCta&&n.createElement(I.I,{defaultVariant:"primary",size:"big",ctaButtonMeta:e.primaryCta}),e.secondaryCta&&n.createElement(I.I,{defaultVariant:"secondary",size:"big",ctaButtonMeta:e.secondaryCta}))),e.media)}function O(e){return n.createElement("div",{className:u.cx.flex.flexColumn.$},e.media,n.createElement("div",{className:u.cx.flex.pl32.pr32.pt32.pb24.gap32.$},n.createElement("div",{className:u.cx.fontInter.font24.fontSemiBold.lh32.w200.flexShrink0.$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),n.createElement("div",{className:u.cx.fontInter.font14.fontNormal.lh24.$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description)),n.createElement("div",{className:u.cx.flex.pl32.pr32.gap8.justifyEnd.$},e.secondaryCta&&n.createElement(I.I,{defaultVariant:"secondary",size:"big",ctaButtonMeta:e.secondaryCta}),e.primaryCta&&n.createElement(I.I,{defaultVariant:"primary",size:"big",ctaButtonMeta:e.primaryCta})),n.createElement(d.Ki,{direction:"y",multiple:4}))}function A(e){return n.createElement("img",{src:e.src,alt:e.alt,style:m.sx.add({aspectRatio:e.aspectRatio.toString()}).$,width:e.width})}function N(e){return n.createElement("div",{className:u.cx.absolute.left0.pl8.$,hidden:e.hidden},n.createElement(h.z,{variant:"text",onClick:e.onBack},n.createElement("div",{className:u.cx.font13.lh24.flex.itemsCenter.pr12.$},n.createElement(_.JO,{icon:"chevron-left-32"}),n.createElement(p.Tx,{id:"general.back"}))))}function L(e){return n.createElement("div",{className:u.cx.absolute.right0.pr8.$,hidden:e.hidden},n.createElement(h.z,{variant:"text",onClick:e.onNext},n.createElement("div",{className:u.cx.font13.lh24.flex.itemsCenter.pl12.$},n.createElement(p.Tx,{id:"general.next"}),n.createElement(_.JO,{icon:"chevron-right-32"}))))}function P(e){return n.createElement("div",{className:u.cx.absolute.right0.pr8.$,hidden:e.hidden},n.createElement(h.z,{variant:"text",onClick:e.onDone},n.createElement("div",{className:u.cx.font13.lh24.flex.itemsCenter.$},n.createElement(p.Tx,{id:"general.done"}))))}function R(e){let t=t=>t+1===e.stepNum;return n.createElement("div",{className:u.cx.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,r)=>n.createElement("div",{className:u.cx.w8.h8.bRadius8.b1.colorBorder.if(t(r),u.cx.colorBgInverse,u.cx.colorBg).$,key:r})))}function k(e){let{stepCounter:t}=e;if(!t)return null;let r=1===t.stepNum,i=t.stepNum===t.totalNumSteps;return n.createElement("div",{className:u.cx.p8.bt1.colorBorder.bSolid.h32.$},n.createElement(R,{stepNum:t.stepNum,totalNumSteps:t.totalNumSteps}),n.createElement(N,{onBack:t.onBack,hidden:r}),n.createElement(L,{onNext:t.onNext,hidden:i}),n.createElement(P,{onDone:t.onNext,hidden:!i}))}(0,y.Y3)(()=>null,T)},825004:(e,t,r)=>{r.d(t,{AG:()=>n,Kj:()=>o,d:()=>a,t4:()=>i});let n="fig-kiwi",i="fig-jam.",a="fig-diff";function o(e){return e.byteLength>=2&&80===e[0]&&75===e[1]}},802783:(e,t,r)=>{r.d(t,{$M:()=>_,Af:()=>C,B7:()=>f,DW:()=>E,Gr:()=>T,Jf:()=>N,KH:()=>I,LJ:()=>P,LM:()=>x,ND:()=>R,OM:()=>U,Pv:()=>D,QU:()=>B,Sp:()=>F,Uw:()=>y,WL:()=>k,YP:()=>h,b9:()=>S,dC:()=>L,g7:()=>w,gV:()=>V,mS:()=>A,pk:()=>g,ri:()=>G,w0:()=>O,y4:()=>M,ym:()=>b});var n=r(598271),i=r(716250),a=r(767310),o=r(217810),l=r(646012),s=r(424479),c=r(966894),d=r(276287),u=r(609688),p=r(59486),m=r(775585);function h(e){return U("FigmaScope type",{type:m.aX.String,value:e})}function _(e,t){if(!e.isAsset())return null;let r=e.isSubscribedAsset(),n=[U("Status",{type:m.aX.String,value:r?"Subscribed":"Local"}),U("Key",{type:m.aX.String,value:t??e.key()??"[not computed]"}),U("Version",{type:m.aX.String,value:e.version()??"[unknown]"})];return r&&!(0,i.BZ)().ds_publish_file_deprecation&&n.push(U("File",{type:m.aX.String,value:e.publishFile()??"[unknown]"})),{label:"Asset info",children:n,expandByDefault:!1}}function g(e,t,r){let n=(0,m.c3)(e,t,r);if(null!=n)return U(e,n);if(Array.isArray(t))return B({label:e,list:t,buildChild:(e,t)=>g(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return V({label:e,object:t,buildChild:(t,r)=>g(t,r,e),expandByDefault:r})}}function f(e){let t=e.backingSymbol();return t?x("Backing symbol",t):U("Backing symbol ID",{type:m.aX.Error,value:"MISSING"})}function E(e){var t;let r=null==(t=e.backingSymbol())?void 0:t.parent();return r&&r.isStateGroup()?x("Backing state group",r):null}function y(e){return B({label:"Other versions",list:e,buildChild:x,expandByDefault:!1})}function v(e,t,r){return B({label:e,list:[...t].sort((e,t)=>{var r,n,i,a;let o=(null==(n=null==(r=e.guidPath)?void 0:r.guids)?void 0:n.length)??0,l=(null==(a=null==(i=t.guidPath)?void 0:i.guids)?void 0:a.length)??0;if(o===l){if("overriddenSymbolID"in e)return -1;if("overriddenSymbolID"in t)return 1;if("componentPropAssignments"in e)return -1;if("componentPropAssignments"in t)return 1}return function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length}(e.guidPath||{},t.guidPath||{})}),buildChild:(e,{guidPath:t,...n})=>{let i=null==t?void 0:t.guids,a=i?r.followOverridePath(i):void 0;return V({label:e,value:i?{type:m.aX.OverridePath,value:i,targetGuid:null==a?void 0:a.guid()}:{type:m.aX.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:g(e,t),expandByDefault:!0})},expandByDefault:!1})}function b(e){let t=e.overridesList();return 0===t.length?null:v("Instance overrides",t,e)}function I(e){let t=e.derivedOverridesList();return 0===t.length?null:v("Instance derived symbol data",t,e)}function T(e,t){let r=e.immutableFrameSublayerOverridesList();return 0===r.length?null:B({label:"Sublayer path overrides",list:r,buildChild:(e,{guidPath:r,...n})=>{var i,a;let o;let l=null==r?void 0:r.guids,s=`[${null==(i=null==l?void 0:l.map(e=>(0,u.YG)(e)))?void 0:i.join(", ")}]`;if(t.has(s)){let e=null==(a=t.get(s))?void 0:a.sublayerGuid,r=e?(0,u._r)(e):void 0;r&&(o=r)}return V({label:e,value:l?{type:m.aX.OverridePath,value:l,targetGuid:o}:{type:m.aX.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:g(e,t),expandByDefault:!0})},expandByDefault:!1})}function w(e,t){return V({label:"Sublayer path override from containing immutable frame",object:t,buildChild:(e,t)=>null==t?null:g(e,t),expandByDefault:!0})}function S(e){return function({label:e,object:t,buildChild:r,expandByDefault:n}){let i=Object.keys(t).sort().map(e=>r(e,t[e])).filter(o.lm);return{label:e,value:{type:m.aX.Metadata,value:i.length},children:i,expandByDefault:n}}({label:"Text insertion style",object:e,buildChild:(e,t)=>null==t?null:g(e,t),expandByDefault:!0})}function C(e){return B({label:"Style consumers",list:e,buildChild:x,expandByDefault:!1})}function O(e){return x("Variable collection",e)}function A(e){return B({label:"Variable consumers",list:e,buildChild:x,expandByDefault:!1})}function N(e){return B({label:"Consumed variables",list:e,buildChild:x,expandByDefault:!1})}function L(e){return B({label:"Variables",list:e,buildChild:x,expandByDefault:!1})}function P(e){return B({label:"Direct dependents on this variable",list:e,buildChild:x,expandByDefault:!1})}function R(e){return V({label:"Variable direct dependencies",object:e,buildChild:(e,t)=>B({label:e,list:t,buildChild:x,expandByDefault:!1}),expandByDefault:!1})}function k(e){return B({label:"Consumed styles",list:e,buildChild:x,expandByDefault:!1})}function D(e){return B({label:"SceneGraph validation errors",list:e,buildChild:(e,t)=>U(e,{type:m.aX.Error,value:t}),expandByDefault:!0})}function M(e){return V({label:"Chunk details",object:e.chunk,buildChild:g,expandByDefault:!1})}function F(e){let t=new d.k;for(let[r,n]of e.entries())for(let e of n)t.add(e,r);return[...t.values()].forEach(e=>e.sort()),B({label:"SceneGraph validation errors (Whole File)",list:[...t.entries()],buildChild:(e,[t,r])=>B({label:t,list:r,buildChild:x,expandByDefault:!0}),expandByDefault:!0})}function x(e,t){if(t instanceof p.ob){let r=t.isStyle()?t.styleId():void 0;if(r)return x(e,r);let n=t.isVariable()?t.variableId():void 0;if(n)return x(e,n);let i=t.isVariableCollection()?t.variableCollectionId():void 0;return i?x(e,i):x(e,t.guid())}if("string"==typeof t){let r=l.th.fromString(t);if(r)return U(e,{type:m.aX.StyleId,value:r});let i=l.pp.fromString(t);if(i)return U(e,{type:m.aX.VariableId,value:i});let a=l.lP.fromString(t);if(a)return U(e,{type:m.aX.VariableCollectionId,value:a});let o=(0,u._r)(t)??n.AX;return U(e,{type:m.aX.NodeId,value:o})}return U(e,{type:m.aX.NodeId,value:t})}function U(e,t,r){return{label:e,value:t,children:[],expandByDefault:!1,onEdit:r}}function B({label:e,value:t,list:r,buildChild:n,expandByDefault:i}){return{label:e,value:t??{type:m.aX.Metadata,value:r.length},children:r.map((e,t)=>{var r;let i=`[${t}]`,a=n(i,e,t);if(!(0,c._j)(e)||!a)return a;{let t={...a,value:{type:m.aX.OverridePath,value:null==(r=e.guidPath)?void 0:r.guids}};return t}}).filter(o.lm),expandByDefault:i}}function V({label:e,value:t,object:r,buildChild:n,expandByDefault:i}){return{label:e,value:t,children:Object.keys(r).sort().map(e=>n(e,r[e])).filter(o.lm),expandByDefault:i}}function G(e,t,r,n){let i={x:t.m02,y:t.m12},o=t.m00*t.m11-t.m01*t.m10,l=Math.atan2(t.m10,t.m00)*(180/Math.PI);l=(0,a.C7)(l,0,1e-4)?0:-1*l;let c="No";o<0&&(c=(0,a.C7)(l,0,1e-4)?"Vertically":(0,a.C7)(Math.abs(l),180,1e-4)?"Horizontally":"Yes");let d=r&&n,u={label:e,children:[U("Offset",{type:m.aX.Vector,value:i},d?e=>{let t=s.TSSceneGraph.instance.get(n);t&&(t.relativeTransform={...t.relativeTransform,m02:e.value.x,m12:e.value.y})}:void 0),U("Angle",{type:m.aX.Numeric,value:l},d?e=>{let t=s.TSSceneGraph.instance.get(n);if(!t)return;let r=e.value*(Math.PI/180),i=Math.sin(r),a=Math.cos(r),{m00:o,m01:l,m02:c,m10:d,m11:u,m12:p}=t.relativeTransform;t.relativeTransform={m00:a*o+i*l,m01:a*l-i*o,m02:c,m10:a*d+i*u,m11:a*u-i*d,m12:p}}:void 0),U("Scale",{type:m.aX.Numeric,value:o}),U("Mirrored",{type:m.aX.String,value:c})],expandByDefault:!0};return u}},650088:(e,t,r)=>{r.d(t,{A6:()=>a,CM:()=>l,Lz:()=>o,pH:()=>i});var n=r(46347);let i=new Set(["inheritFillStyleID","inheritFillStyleIDForStroke","inheritGridStyleID","inheritTextStyleID","inheritEffectStyleID"]),a=new Set(["styleIdForFill","styleIdForStrokeFill","styleIdForText","styleIdForEffect","styleIdForGrid"]);function o(e){return i.has(e)}function l(e){return a.has(e)}(0,n.p_)(i),(0,n.p_)(a)},904882:(e,t,r)=>{r.d(t,{H2:()=>c,QJ:()=>d,QN:()=>_,Xq:()=>g,fq:()=>h,jR:()=>m,km:()=>p});var n,i,a=r(600486),o=r(337167),l=r(934247),s=r(256634),c=((n=c||{}).None="No Diff",n.Layer="Layer Diff",n.Tree="Tree Diff",n.File="File Diff",n);let d=(0,o.cn)(null);function u(e){return"Layer Diff"===e?"layer":"tree"}let p=(0,o.oH)((0,o.cn)(null),(e,t,r)=>{var n;let i,o;let s=new Date;if("clear"===t.type)return e&&a.RQ.trackDefinedEvent("figmascope.diff_end",{type:u(e.type),duration_seconds:(s.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(i=t.guidStr,o=t.diffType):"refresh"===t.type&&e&&(i=e.node.guidStr(),o=e.type),!i||!o)return null;let c=null==(n=r(l.QI).getNode(i))?void 0:n.freeze();return c?(a.RQ.trackDefinedEvent("figmascope.diff_start",{type:u(o)}),{type:o,node:c,time:new Date}):null}),m=(0,o.cn)(e=>{let t=e(d);return t?{type:"File Diff",scene:t}:e(p)??{type:"No Diff"}}),h=(0,o.cn)(e=>{let t=e(s.th),r=e(m);switch(r.type){case"Layer Diff":return r.node;case"Tree Diff":{let e=null==t?void 0:t.treeDiffKey();return r.node.findDescendant(t=>t.treeDiffKey()===e,{includeSelf:!0})??null}case"File Diff":{let e=null==t?void 0:t.treeDiffKey();return r.scene.findNode(t=>t.treeDiffKey()===e)}default:return null}});var _=((i=_||{}).Changed="CHANGED",i.ChildChanged="CHILD_CHANGED",i.Added="ADDED",i.Removed="REMOVED",i);function g(e,t,r,n){return e?t?r?"CHANGED":n?"CHILD_CHANGED":void 0:"ADDED":"REMOVED"}},318673:(e,t,r)=>{r.r(t),r.d(t,{EmbeddedFigmaScopeView:()=>R,EmbeddedPrototypingFigmaScopeViewEnabled:()=>M});var n=r(652983),i=r(407908),a=r(327251),o=r(288223),l=r(172497),s=r(340154),c=r(170435),d=r(716250),u=r(337167),p=r(767310),m=r(933858),h=r(249683),_=r(496417),g=r(866551),f=r(246905),E=r(961215),y=r(784667),v=r(640723),b=r(200273),I=r(572333),T=r(516342),w=r(900710),S=r(425285),C=r(435804),O=r(615824),A=r(934247),N=r(933114),L=r(546106),P=r(332224);let R=n.memo(function(){return(0,d.BZ)().internal_only_debug_tools?n.createElement(D,null):null});function k(e,t){n.useEffect(()=>{let r=r=>{70===r.keyCode&&r.ctrlKey&&r.altKey&&r.metaKey&&t(!e)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[e,t])}function D(){let e=(0,I.mA)((0,y.tZ)().showFigmaScope),{setIsOpen:t,setClosed:r}=n.useMemo(()=>{let e=e=>(0,y.tZ)().showFigmaScope.set(e);return{setIsOpen:e,setClosed:()=>e(!1)}},[]);return k(e,t),e?n.createElement(F,{onClose:r}):null}function M(){let[e,t]=n.useState(!1),r=n.useCallback(()=>{t(!1)},[t]);return k(e,t),e?n.createElement(x,{onClose:r,appSelection:void 0,setAppSelection:void 0}):null}function F({onClose:e}){let t=(0,i.I0)(),r=(0,i.v9)(B),a=n.useCallback(e=>{if("canvas"===e.selectionType){let t=E.dCf.setSelectedNodeAndCanvas(e.guidStr,!1);t&&(v.PL(e.guidStr),E.Cj$.scrollAndZoomIntoView([e.guidStr]))}"local_style"===e.selectionType&&(v.MO(),t(h._$({type:e.styleType,styleIds:new Set([e.guidStr]),folderNames:new Set})))},[t]);return n.createElement(x,{onClose:e,appSelection:r,setAppSelection:a})}function x({onClose:e,appSelection:t,setAppSelection:r}){let d=(0,C.A6)(),m=(0,b.uC)(),h=(0,I.mA)(E.gng.sceneGeneration()),[y]=(0,a.Z)(h,500,{trailing:!0}),v=(0,u.b9)(A.nO),T=(0,i.v9)(e=>{if("prototype"===d.view)return!0;try{return null!=e.mirror.sceneGraph.getCurrentPage()}catch(e){return!1}}),w=(0,i.v9)(e=>e.mirror.appModel.pagesList);n.useEffect(()=>{T&&v((0,o.r7)(new O.H({resource:{type:"server_file",key:m??"unknown",backend:"fullscreen"},sensitiveTextPolicy:"show",inPrototypeViewer:"prototype"===d.view})))},[y,v,T,d.view,m]);let R=(0,f.Cs)(),k=n.useRef(null);(0,g.D)("legacy"===R?"light":R,k.current,d);let D=(0,S.fg)(),{windowInnerHeight:M}=(0,c.i)(),[F,x]=n.useState(window.innerHeight/2),B=n.useMemo(()=>M-(0,p.uZ)(F,(0,l.z)("design"===D?P.RHn:P.JZB),M-32),[F,D,M]),V=(0,u.b9)(N.Z);n.useEffect(()=>{V(B)},[V,B]);let G=n.useCallback(e=>{x(e.clientY)},[]),[H,W]=n.useState(null);return((0,s.G)(H,G),T)?n.createElement(U,null,n.createElement("div",{style:{zIndex:3,height:B,color:"#000",position:"relative"},ref:k,className:_.Hy,tabIndex:-1},n.createElement("div",{ref:W,style:{cursor:"ns-resize",position:"absolute",left:0,right:0,top:"-3px",height:"5px"}}),n.createElement(L.A,{embedded:!0,onClose:e,appSelection:t,setAppSelection:r,pagesList:w}))):null}class U extends n.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error(e)}render(){return this.state.hasError?null:this.props.children}}let B=(0,m.ue)([w.LI,T.b$],(e,t)=>{let r=Object.keys(e);if(r.length>0)return{selectionType:"canvas",guidStr:r[0]};if(t){let e=Array.from(t.styleIds);if(e.length>0)return{selectionType:"local_style",guidStr:e[0],styleType:t.type}}})},280668:(e,t,r)=>{r.d(t,{$Q:()=>l,kI:()=>o,x:()=>a});var n=r(652983),i=r(299482);function a(){return n.createElement(l,null,n.createElement("p",null,"Reading file..."))}function o({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(l,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.$},t))}function l({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},906498:(e,t,r)=>{r.d(t,{P:()=>a,u:()=>i});var n=r(337167);let i=(0,n.cn)({}),a=(0,n.cn)({})},937275:(e,t,r)=>{r.d(t,{AU:()=>I,At:()=>B,BX:()=>F,Fg:()=>N,Gy:()=>C,LL:()=>S,PY:()=>U,Uj:()=>D,YH:()=>A,_H:()=>x,cn:()=>O,jj:()=>w,qW:()=>P,rE:()=>L,tq:()=>k,xj:()=>T,zD:()=>M});var n,i,a,o=r(652983),l=r(46347),s=r(736521),c=r(716250),d=r(669277),u=r(229845),p=r(782051),m=r(212984),h=r(970740),_=r(367674),g=r(456496),f=r(987004),E=r(761767),y=r(862610),v=r(687496),b=r(211879);let I="UPGRADE_REQUESTS_PRODUCT_DROPDOWN",T="UPGRADE_REQUESTS_SORT_DROPDOWN",w="request",S="\u2013",C=new Date(2024,0,31),O=50;var A=((n=A||{}).TEAM="Team",n.ORG="Org",n),N=((i=N||{}).APPROVE_ALL="APPROVE_ALL",i.BULK_SELECT="BULK_SELECT",i.SINGLE="SINGLE",i.EMAIL="EMAIL",i),L=((a=L||{}).NEWEST_FIRST="NEWEST_FIRST",a.OLDEST_FIRST="OLDEST_FIRST",a);let P={NEWEST_FIRST:()=>(0,h.t)("admin_dashboard.requests.sort.newest_first"),OLDEST_FIRST:()=>(0,h.t)("admin_dashboard.requests.sort.oldest_first")},R={[f.xi.DESIGN]:{name:()=>(0,h.t)("admin_dashboard.requests.design_seat"),icon:"file-design-16-file-type"},[f.xi.WHITEBOARD]:{name:()=>(0,h.t)("admin_dashboard.requests.figjam_seat"),icon:"file-figjam-16-file-type"},[f.xi.DEV_MODE]:{name:()=>(0,h.t)("admin_dashboard.requests.devmode_seat"),icon:"file-devmode-16-file-type"}};function k({licenseType:e}){let t=R[e];return o.createElement(_.j,{spacing:8},o.createElement(g.JO,{icon:t.icon}),o.createElement("div",null,t.name()))}let D=e=>{switch(e){case E.oj.DESIGN:return f.xi.DESIGN;case E.oj.WHITEBOARD:return f.xi.WHITEBOARD;case E.oj.DEV_MODE:return f.xi.DEV_MODE;default:(0,l.vE)(e)}};function M(e){return e.trim().slice(0,O)}function F({text:e,showSpinner:t}){return o.createElement("div",{className:m.cx.flex.itemsCenter.justifyCenter.$},o.createElement("span",{className:t?m.cx.invisible.$:""},e),t&&o.createElement(p.TK,{className:m.cx.absolute.$,shouldMatchTextColor:!0,size:"small"}))}function x(){return!!(0,c.BZ)().dev_mode_opt_in&&!!(0,c.BZ)().dev_mode_suggested_upgrades}function U({planType:e,planId:t}){var r,n;let i=x(),a=(0,d.mU)(y.DevModeSuggestedUpgradesFlag,{planType:e,planId:t},{enabled:i});return!!i&&"loaded"===a.status&&(null==(r=a.data)?void 0:r.devModeSuggestedUpgrades.status)===d.wy.Loaded&&!!(null==(n=a.data.devModeSuggestedUpgrades)?void 0:n.data)&&a.data.devModeSuggestedUpgrades.data.length>0}function B({planType:e,planId:t,isEnterprise:r}){let n=(0,s.A9)("Org"===e?t:void 0);return(0,o.useMemo)(()=>{var t;let i="Org"===e&&"loaded"!==n.status,a=("Org"===e?null==(t=n.data)?void 0:t.currency:(0,v.x_)())??"usd",l=new v.Lr(a),s="Org"===e?l.getPricesForOrgPlan(r?b.On.ENTERPRISE:b.On.ORGANIZATION).dev_mode:l.getPrices().annualFigma;return i?o.createElement(u.g4,{className:m.cx.h8.w20.inlineBlock.$}):o.createElement(o.Fragment,null,l.formatMoney(s))},[n,r,e])}},621376:(e,t,r)=>{r.d(t,{TN:()=>ei,Wf:()=>ea,ZJ:()=>eo,q$:()=>et});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(764150),s=r(448501),c=r(716250),d=r(810373),u=r(669277),p=r(925705),m=r(925960),h=r(435613),_=r(212984),g=r(970740),f=r(65249),E=r(275286),y=r(721154),v=r(111120),b=r(858368),I=r(534187),T=r(131826),w=r(366533),S=r(723214),C=r(609346),O=r(219160),A=r(278832),N=r(659994),L=r(999177),P=r(343878),R=r(421765),k=r(322186),D=r(435804),M=r(761767),F=r(862610),x=r(249203),U=r(278287),B=r(112602),V=r(868894),G=r(225468),H=r(542936),W=r(751696),K=r(656145),z=r(720756),Z=r(677937),Y=r(716120),j=r(206279),$=r(42988),q=r(422949),X=r(312938),J=r(702566),Q=r(438049);let ee=r(643440);function et(e){let t=function(e){var t,r;let n=null==(t=(0,k.Ng)())?void 0:t.id,i=(0,D.A6)(),a="folder"===i.view,o=(0,u.mU)(F.ProjectNameById,{projectId:e},{enabled:!!e&&!a});if(a)return p.IE.loaded(null);if("loaded"!==o.status)return p.IE.from(o);let l=o.data.project,s=(null==(r=null==l?void 0:l.team)?void 0:r.orgId)||(null==l?void 0:l.orgId);if(s!==n)return p.IE.loaded(null);{let e=o.data.project;return p.IE.loaded(e?(0,L.R_)(e):null)}}(e.file.folder_id),r=t.data;return(0,N.SB)(e.file)?n.createElement("span",{className:Q.LH},n.createElement(g.Tx,{id:"tile.file_tile.password_protected"})):"loaded"!==t.status?null:n.createElement("div",{className:Q.Fj},n.createElement("span",{className:_.cx.inlineFlex.$},e.left||null),n.createElement("span",{className:Q.vy},e.file.touched_at&&!r&&n.createElement("span",{className:Q.LH},n.createElement(g.Tx,{id:"tile.file_tile.edited_time",time:n.createElement(m.Lt,{date:e.file.touched_at})})),e.file.touched_at&&r&&n.createElement("span",{className:Q.Ap},n.createElement(g.Tx,{id:"tile.file_tile.edited_time_with_separator",time:n.createElement(m.Lt,{date:e.file.touched_at})})),r&&n.createElement(f.x,{truncate:!0,showTooltipWhenTruncated:!0},r)))}function er(e){let{file:t,currentUserId:r}=e,i=n.createElement(n.Fragment,null,n.createElement(z.gu,{date:e.file.trashed_at}));return n.Fragment,t.trashed_user_id&&t.trashed_user_id===r?n.createElement("span",{className:Q.yl},n.createElement(g.Tx,{id:"tile.file_tile.deleted_by_you",time:i})):t.trashed_user&&t.trashed_user.handle?n.createElement("span",null,n.createElement(g.Tx,{id:"tile.file_tile.deleted_by_other_user",userHandle:t.trashed_user.handle,time:i})):n.createElement("span",{className:Q.yl},n.createElement(g.Tx,{id:"tile.file_tile.deleted_generic",time:i}))}class en extends n.PureComponent{constructor(e){super(e),this.disableEvent=e=>{e.stopPropagation(),e.preventDefault()},this.onFileSettingsClick=e=>{this.props.onTileContextMenu&&(e.stopPropagation(),e.preventDefault(),this.props.isDropdownShown()?this.props.dispatch(v.kp()):(this.props.dispatch(I.LA()),this.props.dispatch(I.pz({type:V.m.FILES,tiles:[this.props.tile]})),this.props.onTileContextMenu(this.props.tile,e,this.props.index)))},this.submitFileName=e=>{var t;this.props.dispatch(y.NX({file:this.props.tile.file,name:e})),"renameCallbacks"in this.props.tile&&(null==(t=this.props.tile.renameCallbacks)||t.onStopRename(e))},this.cancelFileName=()=>{var e;this.props.dispatch(y.NX({file:this.props.tile.file})),"renameCallbacks"in this.props.tile&&(null==(e=this.props.tile.renameCallbacks)||e.onStopRename(null))},this.stopEventPropagation=e=>{e.stopPropagation()},this.getActiveFileUsers=()=>this.props.isDeletedFilesView?[]:(0,S.m)(this.props.activeFileUsers,this.props.user.id,this.props.tile.file.key),this.getHasUnsyncedChanges=()=>{let e=this.props.tile.file.key;return this.props.unsyncedFileKeys.findIndex(t=>t.fileKey===e)>=0},this.onMouseEnter=()=>{this.setState({isHover:!0})},this.onMouseLeave=()=>{this.setState({isHover:!1})},this.state={isHover:!1}}render(){var e,t,r;let i;let a=this.props.tile.file,o=(null==(e=a.appData)?void 0:e.isRenaming)||!1,s=this.props;o&&(s={...s,draggable:!1});let c=this.props.showSettingsIcon?{showSettingsIcon:!0,onFileSettingsClick:this.onFileSettingsClick,onFileSettingsMouseDown:this.stopEventPropagation,onFileSettingsDoubleClick:this.disableEvent}:{showSettingsIcon:!1},d=o?{isRenaming:!0,submitTileName:this.submitFileName,cancelTileName:this.cancelFileName}:{isRenaming:!1};if(this.props.isSharedWithYouFilesView&&((null==(t=a.shared_by_user)?void 0:t.name)||a.shared_at)){let e=a.shared_at&&n.createElement(n.Fragment,null,n.createElement(g.Tx,{id:"swy_tile.shared"}),n.createElement(m.Lt,{date:new Date(a.shared_at)})),t=(null==(r=a.shared_by_user)?void 0:r.name)?`From ${a.shared_by_user.name}`:e,o=a.parent_org||a.parent_team,l=n.createElement(n.Fragment,null,n.createElement("div",{className:Q.yp},o&&n.createElement(j.E,{entityId:o.id,entityName:o.name||void 0,imgUrl:o.imgUrl||void 0}),n.createElement("div",null,t)));i=l}else if(this.props.isDeletedFilesView)i=n.createElement(er,{currentUserId:this.props.user.id,file:this.props.tile.file});else if(this.props.isRecentsView){let e=this.props.parentOrgOrTeam;i=n.createElement("div",{className:Q.yp},n.createElement(et,{left:e&&n.createElement(j.E,{entityId:e.id,entityName:e.name,imgUrl:e.img_url}),file:a}))}else i=n.createElement(et,{file:a});let u=(0,x.qF)(a);return u=(0,l.xq)(u,this.props.user),u=(0,l.me)(u,this.props.currentOrgId,this.props.currentTeamId,this.props.selectedView),n.createElement(T.Ui,{name:"File Tile",trackingTargets:w.p.RCS,properties:{fileKey:a.key}},n.createElement(z.Sv,{...s,href:u,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,isHover:this.state.isHover,tileRef:this.props.tileRef},this.props.isListView?n.createElement(Z.l,{tile:this.props.tile,renamingProps:d,activeFileUserList:this.getActiveFileUsers(),...c}):n.createElement(ei,{file:a,subtitle:i,activeFileUsers:this.getActiveFileUsers(),currentUser:this.props.user,hasUnsyncedChanges:this.getHasUnsyncedChanges(),isHover:this.state.isHover,...d,...c})))}}function ei(e){var t;let r=e.file.last_published_at,a=(0,R.F)(),l=(0,m.zL)(r),s=(0,i.v9)(e=>"deletedFiles"===e.selectedView.view),d=(0,i.v9)(e=>"teamFeed"===e.selectedView.view),u=(0,c.BZ)().ps_benchmark,p=(0,i.I0)(),{file:_}=e,f=e.tile,y=n.useMemo(()=>f||{type:P.YU.FILE,file:_},[f,_]),v=_.parent_org_id??(null==(t=_.parent_org)?void 0:t.id)??null,b=u&&(null==_?void 0:_.team_id)?_.team_id:null,I=(0,Y.G)(_.key,M.IK.FILE,v,b),T=n.useMemo(()=>"loaded"===I.status?!!I.favorite:P.PI.getIsFavorited(y),[y,I]),w=n.useMemo(()=>{if(y.type===P.YU.REPO)return y.repo.id},[y]),S=n.useCallback((e,t,r)=>{if(y.type===P.YU.FILE||y.type===P.YU.REPO){let n={entrypoint:"file_tile",favoriteId:t,sectionId:r,file:_,repoId:w,fileBrowserFavorite:!0};e?p(E.$P(n)):p(E.u9(n))}},[_,y,w,p]),C=(0,A.GG)(v,b),N=!!(0,c.BZ)().ps_benchmark,L=N&&!_.team_id&&!_.parent_org_id;return n.createElement(n.Fragment,null,n.createElement(X.pL,{file:e.file,disabled:e.disabled,tooltipText:e.tooltipText}),n.createElement("div",{className:Q.rG},n.createElement(K.aA,{type:a(_),size:K.Sj.MEDIUM,"data-tooltip-type":r?G.fR.TEXT:void 0,"data-tooltip":r?(0,g.t)("tile.file_tile.published_as_library",{time:l}):void 0}),e.showBranchIndicator&&n.createElement($.P,{className:Q.lg,fileKey:e.file.key,branches:e.branches,selectedBranchKey:e.selectedBranchKey,onSelectBranch:e.onSelectBranch})),n.createElement("div",{className:o()(Q.Nk,{[Q.oP]:T})},!!((!N||C)&&!s&&!d&&!L)&&n.createElement("div",{className:Q.$C},n.createElement(q.M,{setFavorite:S,favoriteType:(0,O.jJ)(y.type),resourceId:e.file.key,noHoverState:!0,size:q.v.MEDIUM,orgId:v,teamId:b}))),n.createElement("div",{className:Q.sc},n.createElement(z.P0,{tile:y,...e,isListView:!1}),n.createElement("div",{className:Q.BB},e.hasUnsyncedChanges&&n.createElement("div",{className:J.E9},n.createElement("div",{className:J.pF,"data-tooltip-type":G.fR.TEXT,"data-tooltip":(0,g.t)("tile.file_tile.unsynced_changes"),"data-tooltip-timeout-delay":50},n.createElement(h.n,{className:J.b6,svg:ee}))),n.createElement(z.AU,{subtitle:e.subtitle,disabled:e.disabled})),n.createElement("div",{className:Q.PM},n.createElement(W.U,{entityList:e.activeFileUsers,maxNumHeads:3,currentUser:e.currentUser,overlapped:!0}))))}en.displayName="FileTile";let ea=(0,i.$j)((e,t)=>{let r=t.tile.file.parent_org_id?e.orgById[t.tile.file.parent_org_id]:null,n=t.tile.file.team_id?e.teams[t.tile.file.team_id]:null;return{isDeletedFilesView:"deletedFiles"===e.selectedView.view,isRecentsView:"recentFiles"===e.selectedView.view||"recentsAndSharing"===e.selectedView.view&&e.selectedView.tab===B.D.RECENTLY_VIEWED,isSharedWithYouFilesView:"sharedWithYou"===e.selectedView.view&&"files"===e.selectedView.tab||"recentsAndSharing"===e.selectedView.view&&e.selectedView.tab===B.D.SHARED_FILES,user:e.user,activeFileUsers:e.activeFileUsers,unsyncedFileKeys:(0,C.vr)(e.autosave.unclaimedFilesWithChangesInIDB,e),parentOrgOrTeam:r||n,currentOrgId:e.currentUserOrgId,currentTeamId:e.currentTeamId,selectedView:e.selectedView}})(en),eo=(0,i.$j)((e,t)=>{let r=(0,C.vr)(e.autosave.unclaimedFilesWithChangesInIDB,e),n=t.file.key,i=r.findIndex(e=>e.fileKey===n)>=0;return{hasUnsyncedChanges:i}})(function(e){let t=(0,i.v9)(e=>e.currentUserOrgId),r=(0,i.v9)(e=>e.currentTeamId),a=(0,i.v9)(e=>e.user),u=(0,i.v9)(e=>e.selectedView),p=(0,i.I0)();return n.createElement("div",{className:Q.Zl},n.createElement("div",{onClick:n=>{if((0,c.BZ)().ps_benchmark?p(b.cy({planId:t||r,planType:t?U.k.ORG:U.k.TEAM})):p(b.qB({planId:t||H.y})),(0,d.v8)(n)){p(v.ku({fileKey:e.file.key,entrypoint:"standalone file tile",viewMode:0===e.viewMode?"list":"grid"}));let n=`/file/${e.file.key}`;n=(0,l.xq)(n,a),n=(0,l.me)(n,t,r,u),s.default.redirect(n,"_blank")}else if((0,l.km)(t,e.file.parent_org_id,r,e.file.team_id)){p(v.ku({fileKey:e.file.key,entrypoint:"standalone file tile",viewMode:0===e.viewMode?"list":"grid"}));let n=(0,c.BZ)().ps_benchmark;(0,l.wD)(e.file.key,a,t,n?r:null,u)}else n.preventDefault(),e.onClick(n)},className:o()(Q.si,Q.Cp,{[Q.ww]:e.isSelected}),role:"link",tabIndex:0},n.createElement("div",{className:Q.OJ},n.createElement("div",{className:Q.A2}),n.createElement(ei,{...e}))))})},720756:(e,t,r)=>{r.d(t,{AU:()=>w,P0:()=>b,Sv:()=>v,gu:()=>S,iP:()=>y});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(335863),s=r(716250),c=r(925960),d=r(435613),u=r(970740),p=r(65249),m=r(131826),h=r(343878),_=r(225468),g=r(45224),f=r(438049);let E=r(174341);class y extends n.PureComponent{constructor(e){super(e),this.disallowAnchorHrefTask=new l.S,this.onClick=e=>{if(this.props.onClick(),!this.props.selectable){this.props.openTile(this.props.tile,e,this.props.index);return}this.state.useAnchorHref?(this.props.isSelected&&this.props.selectTile(this.props.tile,e),this.props.openTile(this.props.tile,e,this.props.index)):(this.props.selectTile(this.props.tile,e),this.disallowAnchorHrefTask.reset(),this.disallowAnchorHrefTask.scheduleOnce(()=>{this.setState({useAnchorHref:!1})},500),this.setState({useAnchorHref:!0}),e.preventDefault(),e.stopPropagation())},this.onContextMenu=e=>{this.props.onTileContextMenu&&this.props.onTileContextMenu(this.props.tile,e,this.props.index)},this.onDragStart=e=>{this.props.draggable&&this.props.onTileDragStart(this.props.tile,e)},this.onDragEnd=e=>{this.props.draggable&&this.props.onTileDragEnd(this.props.tile,e)},this.state={useAnchorHref:!1}}componentWillUnmount(){this.disallowAnchorHrefTask.reset()}render(){let e=this.props.isRenaming||!1,t=o()(f.nC,{[f.v4]:this.props.isListView,[f.ww]:this.props.selectable&&this.props.isSelected}),r=o()(f.A2,f.Af);return n.createElement("a",{className:t,href:!this.props.selectable||this.state.useAnchorHref?this.props.href:void 0,rel:"noopener",onClick:this.onClick,onContextMenu:this.props.onTileContextMenu?this.onContextMenu:void 0,draggable:!!this.props.draggable&&void 0,onDragStart:this.props.draggable?this.onDragStart:void 0,onDragEnd:this.props.draggable?this.onDragEnd:void 0,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,ref:this.props.tileRef},n.createElement("div",{className:o()(f.OJ,f.Cp),draggable:this.props.draggable&&!e},this.props.isListView?this.props.children:n.createElement(n.Fragment,null,n.createElement("div",{className:r,onClick:()=>!0}),this.props.children)))}}y.displayName="GenericTile";let v=(0,m.z7)(y);function b(e){let[t,r]=n.useState(null),i=h.PI.getName(e.tile);if(e.isRenaming)return n.createElement(g.I,{className:e.isListView?f.Js:f.dJ,placeholderValue:h.PI.getName(e.tile),submit:e.submitTileName,cancel:e.cancelTileName,dontPropagateKeyDown:!0});{let a=i&&i.length>12?t=>{let n=t.target;n.offsetWidth<n.scrollWidth&&e.tile?r(n.innerText):r(null)}:void 0;return n.createElement("div",{className:e.disabled?f.WP:f.TN,onMouseEnter:a,"data-tooltip-type":_.fR.TEXT,"data-tooltip":t,dir:"auto"},n.createElement(p.x,{fontWeight:"medium",truncate:!0},i),n.createElement(T,{tile:e.tile}))}}let I=(e,t,r)=>{if(!(0,s.BZ)().ps_benchmark||r)return!1;let n=e.type===h.YU.FILE&&e.file.trashed_at&&e.file.team_id!==t,i=e.type===h.YU.REPO&&e.repo.trashed_at&&e.repo.team_id!==t;return n||i};function T({tile:e}){let{currentTeamId:t,currentUserOrgId:r}=(0,i.v9)(e=>e);return I(e,t,r)?n.createElement(d.n,{svg:E,"data-tooltip-type":_.fR.TEXT,"data-tooltip":(0,u.t)("tile.tooltip.external_file"),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0}):null}function w({subtitle:e,disabled:t}){return n.createElement("div",{className:t?f.uw:f.Oc},e)}function S({date:e}){return n.createElement("div",{className:f.t6},n.createElement(c.Lt,{className:f.LH,date:e}))}},923895:(e,t,r)=>{r.d(t,{E:()=>d,W:()=>c});var n=r(652983),i=r(407908),a=r(600486),o=r(303498),l=r(862610),s=r(716250);function c(){let e=(0,i.v9)(e=>e.currentUserOrgId),t=(0,i.v9)(e=>e.currentTeamId),r=d({currentOrgId:e,currentTeamId:(0,s.BZ)().ps_benchmark&&t||null});return"loaded"===r.status?r.data:null}function d(e,t){let r=n.useMemo(()=>({stuckMs:1e4,onEvent:(t,r,n)=>{var i,o;return i=e.currentOrgId,o=e.currentTeamId,void((0,s.BZ)().file_browser_sidebar_lg_logging&&(0,a.L9)("File Browser Sidebar LG",{lgEvent:t,traceId:n.traceId,hasBeenOffline:n.wasOffline,hasBeenBackgrounded:n.wasBackgrounded,timeElapsedMs:n.timeElapsedMs,orgId:i,teamId:o,errors:JSON.stringify(r.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,o.uL)(l.FileBrowserSidebarData,e,{...t,subscriptionLogger:r})}},817028:(e,t,r)=>{r.d(t,{z:()=>o});var n=r(652983),i=r(600486),a=r(680356);let o=(e,t)=>{let r=(0,n.useRef)(null),o=(0,n.useRef)((0,a.k)()),l=(0,n.useRef)("hidden"===document.visibilityState),s=(0,n.useRef)(!1===navigator.onLine);(0,n.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&(l.current=!0)},t=()=>{s.current=!0};return document.addEventListener("visibilitychange",e),window.addEventListener("offline",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("offline",t)}},[]);let c=(0,n.useCallback)((n,c={})=>{let d=performance.now(),u=d-(r.current??d);if("fetch_start"===n||"fetch_next"===n)r.current=d,o.current=(0,a.k)();else{if(null==r.current)return;r.current=null}(0,i.L9)(e,{eventName:n,traceId:o.current,source:t,duration:u,hasBeenBackgrounded:l.current,hasBeenOfflined:s.current,...c})},[e,t]);return{trackPerformanceEvent:c}}},614657:(e,t,r)=>{r.d(t,{Im:()=>f,N2:()=>v,Og:()=>b});var n=r(652983),i=r(87608),a=r.n(i),o=r(600486),l=r(337167),s=r(571529),c=r(122342),d=r(618723),u=r(212984),p=r(970740),m=r(596724),h=r(124040),_=r(273331);let g="mobile_download_prompt_dismissed";function f(e){let{isCompact:t}=e,r=s.s?m.l:m.s,i=(0,c.WC)(),l=!t&&!!e.renderBlockingPrompt,[u,f]=n.useState(!l),[v,b]=n.useState(!l);n.useEffect(()=>{null===i.get(g)&&(f(!1),b(!1))},[i,l]);let I=()=>{l||(f(!0),(0,o.L9)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{b(!0)},300),i.set(g,!0))};return n.createElement(n.Fragment,null,n.createElement("div",{className:a()({[_.IJ]:!0,[_.Cc]:u,[_.gq]:v}),style:{transitionDuration:"300ms"},onClick:I},n.createElement("div",{className:a()(_.ZJ,_.vn,{[_.JQ]:u,[_.ux]:l}),onClick:e=>{e.stopPropagation()}},n.createElement("div",{className:a()(_._q,{[_.SD]:l})},t?n.createElement(y,null):n.createElement(E,{renderBlockingPrompt:l??!1})),n.createElement("hr",{className:a()({[_.Oh]:!0,[_.yc]:l})}),n.createElement("div",{className:_.w9},n.createElement("img",{className:_.MT,src:"https://static.figma.com/uploads/249f0f055b922ecef6bffc592a8420e7e6eddcea",alt:(0,p.t)("file_browser.mobile_prompt.app_image_alt")}),n.createElement("div",null,n.createElement("h3",{className:_.QH},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.app_title"})),n.createElement("p",{className:_.k5},l?n.createElement(p.Tx,{id:"file_browser.mobile_prompt.app_description_new"}):n.createElement(p.Tx,{id:"file_browser.mobile_prompt.app_description"}))),n.createElement(d.MM,{trackingProperties:{userId:e.userIdForTracking,appLink:r,trackingDescriptor:h.y.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:r,className:_.h2},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.app_action"}))),!l&&n.createElement("div",{className:_.w9},n.createElement("img",{className:_.MT,src:"https://static.figma.com/uploads/741698fed49afa5e8f3becdd906e66d32c8e7fae",alt:(0,p.t)("file_browser.mobile_prompt.browser_image_alt")}),n.createElement("div",null,n.createElement("h3",{className:_.QH},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.browser_title"}))),n.createElement(d.F7,{onClick:()=>I(),className:_.hl},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.browser_action"}))))))}function E(e){return n.createElement(n.Fragment,null,n.createElement("img",{className:_.VW,src:"https://static.figma.com/uploads/5f1dc37f397dbddf711d3d950bee5dd46c07fc72",alt:(0,p.t)("file_browser.mobile_prompt.image_alt")}),n.createElement("div",{className:_.qW},n.createElement("h2",{className:_.gr},e.renderBlockingPrompt?n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_title_blocking"}):n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_title"})),n.createElement("p",{className:_.xj},e.renderBlockingPrompt?n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_body_blocking"}):n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_body"}))))}function y(){return n.createElement(n.Fragment,null,n.createElement("h2",{className:_.gr},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_title_compact"})))}let v=(0,l.cn)(!1);function b(){let e=s.s?m.l:m.s,[t,r]=(0,l.KO)(v),i=()=>{r(!0),(0,o.L9)("mobile_web_mobile_app_download_prompt_dismissed")};return n.createElement(n.Fragment,null,n.createElement("div",{className:a()({[_.IJ]:!0,[_.Cc]:t,[_.gq]:t})},n.createElement("div",{className:a()(_.Qi,_.ZJ,_.Wz,{[_.JQ]:t})},n.createElement("div",{className:_.mg}),n.createElement("div",{className:_.O3},n.createElement("img",{className:_.Cz,src:"https://static.figma.com/uploads/249f0f055b922ecef6bffc592a8420e7e6eddcea",alt:(0,p.t)("file_browser.mobile_prompt.app_image_alt")}),n.createElement(d.Ki,{multiple:3}),n.createElement("h2",null,n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_title_blocking"})),n.createElement(d.Ki,{multiple:2}),n.createElement("p",null,n.createElement(p.Tx,{id:"file_browser.mobile_prompt.modal_body_blocking"})),n.createElement(d.Ki,{multiple:4}),n.createElement(d.MM,{fullWidth:!0,trackingProperties:{appLink:e,trackingDescriptor:h.y.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:e,className:u.cx.font16.fontWhyte.$},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.open_in_the_app_store"})),n.createElement(d.Ki,{multiple:3}),n.createElement(d.UA,{className:u.cx.font16.colorTextSecondary.$,onClick:()=>{i()}},n.createElement(p.Tx,{id:"file_browser.mobile_prompt.ill_do_this_later"}))))))}},505468:(e,t,r)=>{r.d(t,{Rj:()=>I,cV:()=>S,lN:()=>w,pf:()=>b,u_:()=>T});var n,i=r(652983),a=r(87608),o=r.n(a),l=r(600486),s=r(810373),c=r(204829),d=r(519781),u=r(618723),p=r(782051),m=r(617984),h=r(970740),_=r(456496),g=r(721127),f=r(496417),E=r(131826),y=r(291904),v=r(230451),b=((n=b||{}).CLICK_OUTSIDE="click_outside",n.PRESS_ESCAPE="press_escape",n);function I(e){let t,r;let{useModalViewScroll:n=!0,tintedModalBackground:a=!0,hide:l,disableClickOutsideToHide:c,size:d,alignment:u,absolutePosition:p,padding:m,height:h,maxHeight:_,width:g,title:E,titleClassName:y,className:b,fixedTop:I,backgroundClassName:T,onKeyDown:w,disableKeyboardEventPropagation:S,modalRef:C,onModalClick:O,allowBackgroundPassThrough:A,showOverflow:N,enableEscapeToClose:L,children:P,animateIn:R}=e,k=i.useCallback(()=>{c||l("click_outside")},[c,l]),D=i.useCallback(e=>{e.stopPropagation()},[]),M=i.useCallback(e=>{O&&O(e)},[O]),F=i.useCallback(e=>{if(e.keyCode===s.sr.ESCAPE&&(!c||L)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}w&&w(e),S&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[c,l,w,S,L]),x=i.useRef(null);i.useEffect(()=>{x.current&&!x.current.contains(document.activeElement)&&x.current.focus()}),"number"==typeof d&&(t=d,r=d);let U=o()({[v.Gx]:"small"===d,[v.sj]:"fitContent"===d,[v.wD]:"mobile"===d,[v.zm]:!d||"medium"===d||"number"==typeof d}),B=o()(v.Fx,T,{[f.Hy]:!A,[v.wk]:A,[v.z9]:a,[v.V8]:I,[v.Fe]:"left"===u,[v.TF]:"right"===u}),V=o()(U,b,{[v.oC]:n,[v.BA]:!n,[f.Hy]:A,[v.wZ]:A,[v.tx]:N,[v.F_]:!!p,[v.l$]:R}),G=p?{top:p.top,left:p.left}:{},H={minWidth:t,maxWidth:r,height:h,maxHeight:_,width:g,padding:m,...G};return i.createElement("div",{tabIndex:0,className:B,onMouseDown:k,onKeyDown:F,ref:x,"data-testid":"modal-background"},i.createElement("div",{className:V,style:H,onMouseDown:D,onClick:M,ref:C,role:"dialog","data-testid":e["data-testid"]},E&&i.createElement("div",{className:`${v.TN} ${y||""}`},E),P))}function T(e){let{dispatch:t,onHide:r,popStack:n}=e,{name:a}=(0,E.gx)(),o=i.useCallback(e=>{n?t(g.eI()):t(g.hV()),r&&r(),(0,l.L9)("Modal Close",{source:e,trackingContext:a})},[t,r,n,a]);return i.createElement(I,{...e,hide:o})}let w="CONFIRMATION_MODAL";(0,y.QR)(w,e=>i.createElement(S,{...e.modalShown.data}));class S extends c.wA{constructor(){super(...arguments),this.hideModal=()=>{this.props.dontClose||(this.props.popStack?this.props.dispatch(g.eI()):this.props.dispatch(g.hV()))},this.onCloseButtonClick=c.hO(this,"click",e=>{this.hideModal(),this.props.onCloseButtonClick&&this.props.onCloseButtonClick()}),this.onSubmit=c.Eb(this,"confirm",e=>{e.preventDefault(),(this.props.hideOnConfirm??!0)&&this.hideModal(),this.props.onConfirm()},{playback:()=>({preventDefault:()=>{}})}),this.onCancel=c.Eb(this,"cancel",e=>{e.preventDefault(),(this.props.hideOnCancel??!0)&&this.hideModal(),this.props.onCancel&&this.props.onCancel()},{playback:()=>({preventDefault:()=>{}})})}render(){let e=this.props.destructive?u.VG:u.RS,t=!(this.props.dontClose||this.props.hideClose),r=!!this.props.autoFocusCta&&this.props.destructive,n=!!this.props.autoFocusCta&&!this.props.destructive;return i.createElement(T,{size:this.props.size||"small",...this.props,className:this.props.className||v.oC,onHide:this.props.overrideOnHide??this.props.onCancel},t&&i.createElement(d.Q7,{...this.props,className:this.props.closeClass,onClick:this.onCloseButtonClick}),i.createElement(m.L,null,!this.props.hideConfirmationTitle&&i.createElement("div",{className:this.props.titleClass??v.TN},this.props.confirmationTitle??i.createElement(h.Tx,{id:"modal.are_you_sure"})),this.props.children?this.props.children:i.createElement("div",{className:v.Tr},this.props.content),i.createElement("div",{className:v.UN},i.createElement("div",{className:this.props.helperTextClass??v.bS},this.props.helperText),!this.props.hideCancel&&i.createElement(u.pJ,{onClick:this.onCancel,autoFocus:r},this.props.cancelText??i.createElement(h.Tx,{id:"modal.cancel"})),this.props.isLoading?i.createElement(e,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:v.My,disabled:!0,trackingProperties:this.props.trackedConfirmationProperties||{}},i.createElement(p.TK,{className:this.props.loadingText?v.Zd:v.lY}),this.props.loadingText):i.createElement("form",{onSubmit:this.onSubmit},i.createElement(e,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:v.iY,disabled:this.props.disableConfirm,autoFocus:n,trackingProperties:this.props.trackedConfirmationProperties||{}},this.props.confirmText))),this.props.bottomWarningText&&i.createElement("div",{className:v.of},i.createElement(_.JO,{icon:"warning-32"}),this.props.bottomWarningText)))}}S.displayName="ConfirmationModal",S.defaultProps={destructive:!1,autoFocusCta:!0}},555532:(e,t,r)=>{r.d(t,{Ex:()=>f,TF:()=>E,Wm:()=>w,aL:()=>S});var n=r(652983),i=r(407908),a=r(172497),o=r(391320),l=r(418465),s=r(970740),c=r(84315),d=r(54055),u=r(70918),p=r(733609),m=r(512169),h=r(171433),_=r(748425),g=r(807358);let f="COMMUNITY_WORKSPACE_SWITCHER_SECTION_DROPDOWN",E="ACCOUNT_SWITCHING_ADD_ACCOUNT_ONBOARDING_KEY",y=(0,a.z)(_.vN),v=(0,a.z)(_.vx),b=(0,a.z)(_.cm)+2*(0,a.z)(_.qW),I=b+1;function T(e,t,r,i,a,o,u){return{displayText:e.name,sideText:`@${e.profile_handle}`,optionHeight:I,icon:n.createElement("div",{className:g.$v},a[e.id]&&n.createElement("div",{className:g.Ly}),n.createElement(h.w,{userId:t.id,profileId:e.id,forceAvatar:!0})),itemBadge:(0,d.Kk)(e)?n.createElement(l.Ct,{className:g.fk,text:(0,s.t)("navbar.community.admin_label"),color:l.JV.INVERT,subtle:!0}):void 0,isActive:i,isChecked:i,className:g.BO,callback:()=>u(c.bP({profileId:e.id,view:r?o:void 0}))}}function w(e,t,r,i,a,o,u,p,m,_,f){let E=[],y=new Set,v=r.user,b=[],w=[];return Object.keys(e).forEach(r=>{let i=e[r],a=i.community_profile_id;if(f&&i.id===v.id){y.add(a);return}if(a){let e=o[a];if(!e||y.has(a))return;y.add(a);let r=!!(null==p?void 0:p.primary_user_id)&&(null==p?void 0:p.id)===e.id,n=t&&r;E=E.concat([T(e,v,t,n,u,m,_)]);return}let l=(null==p?void 0:p.primary_user_id)===i.id,s=t&&l,w=(0,d.jE)({authedProfilesById:o,userId:i.id});b=b.concat([{displayText:i.name,sideText:i.email,optionHeight:I,icon:n.createElement("div",{className:g.$v},n.createElement(h.w,{userId:i.id,forceAvatar:!0})),isActive:s,isChecked:s,className:g.BO,callback:()=>_(c.bP({profileId:(null==w?void 0:w.id)||null,view:t?m:void 0}))}])}),Object.keys(i).forEach(e=>{let r=i[e],a=null==r?void 0:r.community_profile_id;if(a){let e=o[a];if(!e||y.has(a))return;y.add(a);let r=t&&(null==p?void 0:p.id)===e.id;E=E.concat([T(e,v,t,r,u,m,_)]);return}let f=t&&(null==p?void 0:p.org_id)===r.id,b=(0,d.jE)({authedProfilesById:o,orgId:r.id});b&&(w=w.concat([{displayText:r.name,sideText:void 0,optionHeight:I,icon:n.createElement("div",{className:g.$v},n.createElement(h.w,{userId:v.id,orgId:r.id,forceAvatar:!0})),isActive:f,itemBadge:n.createElement(l.Ct,{className:g.fk,text:(0,s.t)("navbar.community.admin_label"),color:l.JV.INVERT,subtle:!0}),isChecked:f,className:g.BO,callback:()=>_(c.bP({profileId:b.id||null,view:t?m:void 0}))}]))}),Object.values(a).forEach(e=>{let r=null==e?void 0:e.community_profile_id;if(r){let e=o[r];if(!e||y.has(r))return;y.add(r);let n=t&&(null==p?void 0:p.id)===e.id;E=E.concat([T(e,v,t,n,u,m,_)]);return}}),E=E.concat(b).concat(w)}function S(){let e=(0,i.I0)(),t=(0,i.v9)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===f}),r=(0,i.v9)(e=>e.selectedView),a=(0,d.hC)(),l=(0,i.v9)(e=>{var t,r;return null==(r=null==(t=e.dropdownShown)?void 0:t.data)?void 0:r.targetRect}),s=(0,u.XU)(),c=(0,i.v9)(e=>(0,p.getPermissionsStateMemoized)(e)),h=(0,i.v9)(e=>(0,d.h_)(e)),_=(0,i.v9)(e=>(0,d.OG)(e),o.qt),g=(0,i.v9)(e=>e.authedProfilesById),E=(0,i.v9)(e=>e.userNotifications.communityProfileBellStates),b=(0,i.v9)(e=>e.authedActiveCommunityProfile);return n.createElement(n.Fragment,null,t&&n.createElement(m.z,{showPoint:!0,showCheckmarkOnRight:!0,items:(()=>{let t=w({[s.id]:s},a,c,h,_,g,E,b,r,e,!(0,d.Kk)(b)&&(null==b?void 0:b.primary_user_id)===s.id||void 0);return t})(),onSelectItem:(t,r)=>{t.callback&&t.callback("",null,e)},parentRect:l,dispatch:e,minWidth:y,rootAndSubmenuMaxWidth:v}))}},241806:(e,t,r)=>{r.d(t,{T4:()=>A,VY:()=>M,hH:()=>O});var n=r(652983),i=r(407908),a=r(172497),o=r(716250),l=r(418465),s=r(435613),c=r(805992),d=r(212984),u=r(970740),p=r(644383),m=r(111120),h=r(54055),_=r(557274),g=r(686096),f=r(761767),E=r(733609),y=r(512169),v=r(555532),b=r(171433),I=r(748425),T=r(807358);let w=r(355949),S=r(265220),C=r(382814),O="FILE_BROWSER_WORKSPACE_SWITCHER",A="ACCOUNT_SWITCHING_PERSONAL_ONBOARDING_KEY",N="ACCOUNT_SWITCHING_COMMUNITY_ONBOARDING_KEY",L=(0,a.z)(I.jm),P=(0,a.z)(I.vN),R=(0,a.z)(I.vx),k=(0,a.z)(I.cm)+2*(0,a.z)(I.qW),D=k+1;function M(){let e=(0,i.I0)(),t=(0,i.v9)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===O}),a=(0,i.v9)(e=>e.selectedView),I=(0,i.v9)(e=>{var t,r;return null==(r=null==(t=e.dropdownShown)?void 0:t.data)?void 0:r.targetRect}),M=(0,i.v9)(e=>e.authedUsers),F=(0,i.v9)(e=>e.authedProfilesById),x=(0,i.v9)(e=>(0,E.getPermissionsStateMemoized)(e)),U=(0,g.Km)(x,M.orderedIds),B=(0,i.v9)(e=>e.orgUsersByOrgId),V=(0,i.v9)(e=>e.orgById),G=(0,i.v9)(e=>e.authedTeamsById),H=(0,i.v9)(e=>e.authedActiveCommunityProfile),W=(0,h.hC)(),K=(0,i.v9)(e=>Object.keys(e.authedProfilesById).some(t=>!!e.authedProfilesById[t].org_id||!!e.authedProfilesById[t].team_id)),z=(0,i.v9)(e=>e.userNotifications.communityProfileBellStates),Z=(0,i.v9)(e=>e.userNotifications.userBellStates),Y=(0,i.v9)(e=>e.teamFeedBellStates),j=(0,o.BZ)().ps_benchmark;n.useEffect(()=>{j&&(0,_.Qd)(!0)(e).catch(t=>{var r;let n=(null==(r=null==t?void 0:t.data)?void 0:r.message)||(0,u.t)("file_browser.error_try_again");e(p.R.enqueue({message:n,type:"error"}))})},[e,j]);let $=()=>{let t=[];return M.orderedIds.forEach(r=>{var i;let a=M.byId[r];if(!a)return;t=t.concat([{displayText:a.email,optionHeight:k,icon:n.createElement("span",{className:T.SU}),disabled:!0}]);let s=(null==(i=a.plans)?void 0:i.map(t=>{let r={userId:a.id,orgId:t.is_org?t.plan_id:null,teamId:t.is_org?null:t.plan_id},i=(0,g.DO)(x,r),s=!!t.is_guest,c=r.orgId&&!s&&(0,o.BZ)().xr_debounce_threshold?{view:"teamFeed"}:{view:"recentsAndSharing"};return{displayText:t.name,optionHeight:D,itemBadge:s?n.createElement(l.Ct,{className:T.R0,text:(0,u.t)("navbar.navbar.guest"),color:l.JV.INVERT,subtle:!0}):void 0,icon:n.createElement(b.w,{className:d.cx.mr8.$,userId:r.userId,orgId:r.orgId,teamId:r.teamId}),isActive:i,isChecked:i,className:T.FF,callback:()=>e(m.NO({workspace:r,view:c})),activeClassName:T.ox}}))||[];t=(t=t.concat(s)).concat([{displayText:"",disabled:!0,separator:!0}])}),t};return n.createElement(n.Fragment,null,t&&n.createElement(y.z,{showPoint:!0,showCheckmarkOnRight:!0,lean:"left",leanPadding:L,items:(()=>{if(j)return $();let t=[];return M.orderedIds.forEach(i=>{let a=M.byId[i];t=(t=(t=t.concat([{displayText:a.email,optionHeight:k,icon:n.createElement("span",{className:T.SU}),disabled:!0}])).concat(U[i].map(t=>{var i,o;let s=(0,g.CV)(x,t),c=!W&&(0,g.DO)(x,t),d=!t.orgId,p=!1;t.orgId&&B.orgUsers[t.orgId]&&(p=(null==(i=B.orgUsers[t.orgId][t.userId])?void 0:i.permission)===f.Gu.GUEST);let h=null==(o=null==Z?void 0:Z[t.userId])?void 0:o[t.orgId||"0"],_=Y[t.orgId||"0"];return{displayText:s,optionHeight:D,badge:p?n.createElement(l.Ct,{className:T.R0,text:(0,u.t)("navbar.navbar.guest"),color:l.JV.INVERT,subtle:!0}):void 0,icon:n.createElement("div",{className:T.$v},(h||_)&&n.createElement("div",{className:T.Ly}),n.createElement(b.w,{userId:t.userId,orgId:t.orgId})),subText:d&&a.external_restricted_org_id?(0,u.t)("navbar.workspaces.disabled_by_your_admins"):void 0,alternativeRightIconIfNotChecked:d&&a.external_restricted_org_id?r(753224):void 0,isActive:c,isChecked:c,className:T.FF,activeClassName:T.ox,callback:()=>e(m.NO({workspace:t})),"data-onboarding-key":d?A:void 0}}))).concat([{displayText:"",disabled:!0,separator:!0}])}),t})().concat((()=>{let t=!!z&&Object.values(z).some(e=>e),r=(0,v.Wm)(M.byId,W,x,V,G,F,z,H,a,e);if(r.length>1){let e=[{displayText:K?"":(0,u.t)("navbar.community.browse_community_workspace_switcher_label"),optionHeight:k,itemBadge:K?n.createElement("div",{className:T.ui},n.createElement(u.Tx,{id:"navbar.community.browse_community_workspace_switcher_label"}),n.createElement("a",{href:"https://help.figma.com/hc/articles/4404108672663",target:"_blank",className:T.CA},n.createElement(s.n,{svg:C,className:T._R}))):void 0,icon:n.createElement("span",{className:T.Uh}),disabled:!0}];return[{displayText:(0,u.t)("navbar.community.community_label"),optionHeight:k,icon:n.createElement("div",{className:T.$v},t&&n.createElement("div",{className:T.Ly}),n.createElement(c.f,{svg:w,fallbackSvg:S})),onMouseEnter:()=>(0,h.XF)("submenu",a.view),className:T.Kw,children:e.concat(r),activeClassName:T.ox,"data-onboarding-key":N}]}if(1!==r.length)return[];{let e=r[0];return[{displayText:(0,u.t)("navbar.community.community_label"),sideText:e.sideText,rightJustifySideText:!0,optionHeight:k,icon:n.createElement("div",{className:T.$v},t&&n.createElement("div",{className:T.Ly}),n.createElement(c.f,{svg:w,fallbackSvg:S})),activeClassName:T.ox,isActive:e.isActive,isChecked:e.isChecked,className:T.Kw,callback:e.callback,"data-onboarding-key":N}]}})()),onSelectItem:(t,r)=>{t.callback&&t.callback("",null,e)},parentRect:I,dispatch:e,minWidth:P,rootAndSubmenuMaxWidth:R}))}},176639:(e,t,r)=>{r.d(t,{ak:()=>M,X$:()=>x,JX:()=>F});var n,i=r(652983),a=r(407908),o=r(365653),l=r(716250),s=r(810373),c=r(594619),d=r(435613),u=r(970740),p=r(111120),m=r(489465),h=r(721127),_=r(131826),g=r(987004),f=r(285852),E=r(196532),y=r(761767),v=r(656077),b=r(833897),I=r(999177),T=r(13155),w=r(594835),S=r(46347);let C=r(92602),O=r(216058);var A=((n=A||{})[n.DESIGN=0]="DESIGN",n[n.DESIGN_SELECTED=1]="DESIGN_SELECTED",n[n.WHITEBOARD=2]="WHITEBOARD",n[n.WHITEBOARD_SELECTED=3]="WHITEBOARD_SELECTED",n);function N(e){switch(e.type){case 0:return i.createElement(d.n,{svg:C,className:"file_badges--figmaDesignBadge--0Bza6"});case 1:return i.createElement(d.n,{svg:C,className:"file_badges--figmaDesignBadgeSelected--SS-iQ"});case 2:return i.createElement(d.n,{svg:O,className:"file_badges--figjamBadge--lFKrQ"});case 3:return i.createElement(d.n,{svg:O,className:"file_badges--figjamBadgeSelected--PyCgN"});default:(0,S.vE)(e.type)}}var L=r(678211);let P="new_file_dropdown--dropdownOptionGroup--BiMgZ",R="new_file_dropdown--optionSubtext--iSTIe",k=r(749891),D=(0,_.z7)(c.j.Option),M="CREATE_FILES_ONBOARDING_KEY";function F(e){let t=(0,E.Mn)(),r=(0,o.c)(t=>{let r=e?p.B4(e).payload:t.selectedView;return{selectedView:r,currentOrgId:t.currentUserOrgId,orgById:t.orgById,currentTeamId:t.currentTeamId,teams:t.teams}}),n={...t,...r};return n}function x(e){let{from:t,anchorRef:r,team:n,lean:o}=e,_=F(e.folder.id),S=(0,E._Z)(null==_?void 0:_.currentOrgId),C=(0,E.IG)(e.folder,y.gg.WHITEBOARD),O=(0,E.IG)(e.folder,y.gg.DESIGN),x=(0,E.oI)(e.folder,y.gg.WHITEBOARD),U=(0,E.oI)(e.folder,y.gg.DESIGN),B=(0,i.useRef)(null),V=(0,a.I0)(),[G,H]=(0,i.useState)(null),[W,K]=i.useState(!1),[z,Z]=i.useState(!1),Y=r.current;if((0,i.useLayoutEffect)(()=>{if(!Y)return;let e=Y.getBoundingClientRect();e.y+=4,H(e)},[Y]),!G)return null;let j=(e,r,i)=>{let a={state:_,editorType:i,team:n,from:t,openNewFileIn:(0,s.v8)(e)?v.JD.NEW_TAB:v.JD.SAME_TAB};V(m.ae(a)),V(p.kp())},$=e=>{var t;let r=null==(t=_.user)?void 0:t.id,n=_.currentOrgId,i=n&&_.orgUsersByOrgId.orgUsers[n],a=r&&i&&i[r];n&&a&&V((0,h.K4)({type:w.W,data:{orgId:n,orgUser:a,entryPoint:"create-file",licenseType:(0,g.wq)(e)}}))};return i.createElement(i.Fragment,null,i.createElement(T.AQ,{leanPadding:8,lean:o,targetRect:G,ref:B,className:"new_file_dropdown--newFileDropdown--9Iki6",onboardingKey:(0,I.eV)(e.folder)?M:void 0,propagateCloseClick:!0},i.createElement(D,{disabled:!U,key:"design",onPointerUp:e=>U&&!O?$(y.gg.DESIGN):j(e,!1,y.gg.DESIGN),className:"new_file_dropdown--extraSpaceOption--7prXh",onPointerOver:()=>K(!0),onPointerOut:()=>K(!1)},i.createElement("div",{className:P},i.createElement("span",null,i.createElement(u.Tx,{id:"sidebar.new_design_file"})),U&&!O&&i.createElement("span",{className:R},i.createElement(u.Tx,{id:"sidebar.need_an_upgrade_to_create"}))),i.createElement(N,{type:W?A.DESIGN_SELECTED:A.DESIGN})),i.createElement(D,{disabled:!x,key:"whiteboard",onPointerUp:e=>x&&!C?$(y.gg.WHITEBOARD):j(e,!1,y.gg.WHITEBOARD),onPointerOver:()=>Z(!0),onPointerOut:()=>Z(!1),className:x?"new_file_dropdown--purpleHoverOption--im1na":""},i.createElement("div",{className:P},i.createElement("div",{className:"new_file_dropdown--figjamFileOptionContainer--073AK"},i.createElement("span",null,i.createElement(u.Tx,{id:"sidebar.new_fig_jam_file"}))),S&&i.createElement("span",{className:R},i.createElement(u.Tx,{id:"sidebar.disabled_by_your_organization"})),x&&!C&&i.createElement("span",{className:R},i.createElement(u.Tx,{id:"sidebar.need_an_upgrade_to_create"}))),i.createElement(N,{type:z?A.WHITEBOARD_SELECTED:A.WHITEBOARD})),i.createElement(c.j.Separator,null),i.createElement(D,{key:L.y.IMPORT,onClick:()=>{V(p.B4(e.folder.id)),V((0,f.v)({showImportModal:(0,l.BZ)().figjam_3p_file_importer}))},disabled:!C&&!O,onboardingKey:b.V},i.createElement("div",{className:P},i.createElement(u.Tx,{id:"sidebar.import"})),i.createElement("span",{className:"new_file_dropdown--icon--tjtCA"},i.createElement(d.n,{svg:k})))))}},418363:(e,t,r)=>{r.d(t,{MU:()=>a,bM:()=>i,kU:()=>o});var n=r(652983);function i(e){return n.createElement("div",{"data-tooltip-type":e.dataTooltipType,"data-tooltip":e.dataTooltip,"data-tooltip-show-above":e.dataTooltipShowAbove,"data-tooltip-show-below":e.dataTooltipShowAbove,"data-tooltip-max-width":e.dataTooltipMaxWidth,"data-tooltip-timeout-delay":e.dataTooltipTimeout,"data-testid":"notice-icon-yellow",className:e.className,style:e.style},n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 16C8 11.5817 11.5817 8 16 8V8C20.4183 8 24 11.5817 24 16V16C24 20.4183 20.4183 24 16 24V24C11.5817 24 8 20.4183 8 16V16Z",fill:`var(${e.faded?"--color-bg-warning-tertiary":"--color-icon-warning"}, #FFEB00)`}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 11.7499C16.4142 11.7499 16.75 12.0857 16.75 12.4999V15.6259C16.75 16.0401 16.4142 16.3759 16 16.3759C15.5858 16.3759 15.25 16.0401 15.25 15.6259V12.4999C15.25 12.0857 15.5858 11.7499 16 11.7499Z",fill:`var(${e.faded?"--color-text":"--color-icon-onwarning"}, #FFEB00)`}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 17.9999C16.5523 17.9999 17 18.4476 17 18.9999V19.0685C17 19.6208 16.5523 20.0685 16 20.0685C15.4477 20.0685 15 19.6208 15 19.0685V18.9999C15 18.4476 15.4477 17.9999 16 17.9999Z",fill:`var(${e.faded?"--color-text":"--color-icon-onwarning"}, #FFEB00)`})))}function a(e){return n.createElement("div",{"data-tooltip-type":e.dataTooltipType,"data-tooltip":e.dataTooltip,"data-tooltip-show-above":e.dataTooltipShowAbove,"data-tooltip-show-below":e.dataTooltipShowAbove,"data-tooltip-max-width":e.dataTooltipMaxWidth,"data-tooltip-timeout-delay":e.dataTooltipTimeout,"data-testid":"notice-icon-yellow-new",className:e.className,style:e.style},n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"16",y:"16",width:"16",height:"16",rx:"8",transform:"rotate(-180 16 16)",fill:`var(${e.faded?"--color-bg-warning-tertiary":"--color-icon-warning"})`}),n.createElement("path",{d:"M8.5 8.66701H7.5L7.5 6.50001V4.66701H8.5V6.50001V8.66701ZM8.666 10.667C8.666 11.035 8.368 11.333 7.999 11.333C7.631 11.333 7.333 11.035 7.333 10.667C7.333 10.298 7.631 10 7.999 10C8.368 10 8.666 10.298 8.666 10.667Z",fill:`var(${e.faded?"--color-text":"--color-icon-onwarning"})`})))}function o(e){return n.createElement("div",{"data-tooltip-type":e.dataTooltipType,"data-tooltip":e.dataTooltip,"data-tooltip-show-above":e.dataTooltipShowAbove,"data-tooltip-show-below":e.dataTooltipShowAbove,"data-tooltip-max-width":e.dataTooltipMaxWidth,"data-tooltip-timeout-delay":e.dataTooltipTimeout,className:e.className,style:e.style},n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M7.5 16C7.5 11.5817 11.0817 8 15.5 8V8C19.9183 8 23.5 11.5817 23.5 16V16C23.5 20.4183 19.9183 24 15.5 24V24C11.0817 24 7.5 20.4183 7.5 16V16Z",fill:"var(--color-iconprototypefile, #00001a)"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 11.75C15.9142 11.75 16.25 12.0858 16.25 12.5V15.626C16.25 16.0402 15.9142 16.376 15.5 16.376C15.0858 16.376 14.75 16.0402 14.75 15.626V12.5C14.75 12.0858 15.0858 11.75 15.5 11.75Z",fill:"var(--color-icon-onwarning, #FFEB00)"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 18C16.0523 18 16.5 18.4477 16.5 19V19.0686C16.5 19.6208 16.0523 20.0686 15.5 20.0686C14.9477 20.0686 14.5 19.6208 14.5 19.0686V19C14.5 18.4477 14.9477 18 15.5 18Z",fill:"var(--color-icon-onwarning, #FFEB00)"})))}},759578:(e,t,r)=>{r.d(t,{EK:()=>y,Zz:()=>v,xd:()=>E});var n=r(652983),i=r(407908),a=r(964341),o=r.n(a),l=r(716250),s=r(212984),c=r(970740),d=r(65249),u=r(721127),p=r(987004),m=r(687496),h=r(291904),_=r(236750),g=r(496227);let f=(e,t,r,n)=>{var i,a,o,s,d,u;let m=e.invoice,h=t.getPricesWithOverride(m,e.billingPlan),_=(null==(i=m.license_type_configuration[p.z9.DESIGN])?void 0:i.added_quantity)??0,g=(null==(a=m.license_type_configuration[p.z9.FIGJAM])?void 0:a.added_quantity)??0,f=(null==(o=m.license_type_configuration[p.z9.DEV_MODE])?void 0:o.added_quantity)??0,E={[p.z9.DESIGN]:{addedQuantity:_,monthlyUnitPrice:h[p.z9.DESIGN],amountDueFromInvoice:(null==(s=m.amount_due_breakdown)?void 0:s.design)??0,totalCost:0,i18nHeaderText:(0,c.t)("org.cost_breakdown.design_seats_figma_design_editor.seat_rename",{designSeats:_}),shouldDisplay:!0},[p.z9.DEV_MODE]:{addedQuantity:f,monthlyUnitPrice:h[p.z9.DEV_MODE],amountDueFromInvoice:(null==(d=m.amount_due_breakdown)?void 0:d.dev_mode)??0,totalCost:0,i18nHeaderText:(0,c.t)("org.cost_breakdown.dev_mode_seats",{quantity:f}),shouldDisplay:!!(0,l.BZ)().billing_dev_mode_customer_ui},[p.z9.FIGJAM]:{addedQuantity:g,monthlyUnitPrice:h[p.z9.FIGJAM],amountDueFromInvoice:(null==(u=m.amount_due_breakdown)?void 0:u.figjam)??0,totalCost:0,i18nHeaderText:(0,c.t)("org.cost_breakdown.figjam_seats_fig_jam_editor_seats.seat_rename",{figjamSeats:g}),shouldDisplay:!!e.showFigJamCostBreakdown}};return Object.keys(E).forEach(e=>{let t=E[e];t.totalCost=r?t.amountDueFromInvoice:t.monthlyUnitPrice*t.addedQuantity*n}),E};function E(e){let t=e.invoice,r=new m.Lr(t.currency||"usd"),i=t.num_quarters_in_billing_period||4,a=(i+1-t.quarter)*3,l=!!(t.is_stub&&1===t.quarter),s=f(e,r,l,a),d=r.formatMoney(o()(Object.values(s),"totalCost"),{showCents:!1}),u=!l;return n.createElement("div",{className:g.nC},Object.entries(s).map(([e,r])=>r.shouldDisplay?n.createElement(y,{key:e,licenseType:e,totalCost:r.totalCost,currency:t.currency,shouldShowCost:!0,shouldShowBreakdown:u,monthlyUnitPrice:r.monthlyUnitPrice,addedQuantity:r.addedQuantity,remainingMonths:a}):null),n.createElement("div",{className:g.qE}),n.createElement("div",{className:g.MF},n.createElement("div",null,e.summaryLabel||(0,c.t)("org.cost_breakdown.invoice_subtotal")),n.createElement("div",{className:g.Aq,"data-testid":"cost-breakdown-total-cost"},d)))}function y({licenseType:e,totalCost:t,currency:r,shouldShowBreakdown:i,shouldShowCost:a,remainingMonths:o,addedQuantity:l,monthlyUnitPrice:u}){let h=(0,m.mv)(r),_=(()=>{switch(e){case p.z9.DESIGN:return n.createElement(d.x,{i18nId:"org.cost_breakdown.design_seats_figma_design_editor.seat_rename",i18nParams:{designSeats:l}});case p.z9.FIGJAM:return n.createElement(d.x,{i18nId:"org.cost_breakdown.figjam_seats_fig_jam_editor_seats.seat_rename",i18nParams:{figjamSeats:l}});case p.z9.DEV_MODE:return n.createElement(d.x,{i18nId:"org.cost_breakdown.dev_mode_seats",i18nParams:{quantity:l}})}})();return n.createElement("div",{className:s.cx.flex.flexColumn.m16.spacingWide.wAuto.$},n.createElement("div",{className:s.cx.flex.justifyBetween.$},_,a&&n.createElement("span",{className:g.Aq},h(t??0,{showCents:!1}))),i&&o&&n.createElement("div",null,n.createElement(d.x,{color:"secondary",i18nId:"org.cost_breakdown.price_x_num_seats_x_remaining_months",i18nParams:{remainingMonthsText:n.createElement(c.Tx,{id:"org.cost_breakdown.remaining_months_remaining_months",remainingMonths:o}),quantity:l,price:h(u,{showCents:!1})}})))}let v=(0,h.Y3)(function(e){var t,r;let a=(0,i.I0)(),o=!(null==(t=e.org)?void 0:t.figjam_disabled_at);return n.createElement(_.ge,{onClose:()=>a(u.hV()),isCloseHidden:!1,title:e.title,minWidth:341,maxWidth:341},n.createElement(E,{invoice:e.invoice,summaryLabel:(0,c.t)("org.cost_breakdown.projected_subtotal"),showFigJamCostBreakdown:o,billingPlan:null==(r=e.org)?void 0:r.plan}))},"OrgCostBreakdown")},162648:(e,t,r)=>{r.d(t,{eP:()=>p,hI:()=>m,rn:()=>h});var n=r(652983),i=r(782051),a=r(85808),o=r(212984),l=r(970740),s=r(367674),c=r(65249),d=r(344031),u=r(625893);function p(e){return n.createElement(s.j,{height:200,verticalAlignItems:"center",horizontalAlignItems:"center"},e.children)}function m(e){let t=e.selectedViewAndTab.view===u.yA.ORG?e.selectedViewAndTab:void 0,r=t?t.tab??u.Q$.LIBRARIES:void 0,i=r?(0,d.K)(u.rN.RESOURCES,r):(0,l.t)("resources_tab.libraries");return n.createElement(s.j,{direction:"vertical",spacing:0,height:"hug-contents"},n.createElement(s.j,{height:80,spacing:24,backgroundColor:"default",dataTestId:"resources-section-container-header"},n.createElement(c.x,{fontSize:24,fontWeight:"regular"},i),e.leftActions,n.createElement(s.m,null),e.rightActions),e.notices&&n.createElement(s.j,{direction:"vertical",height:"hug-contents",spacing:24,padding:{bottom:24}},e.notices))}function h(e){return e.isLoading?n.createElement(p,null,n.createElement(i.jz,null)):n.createElement(a.l,{className:o.cx.wFull.hFull.$},n.createElement(s.j,{padding:{horizontal:32}},n.createElement(m,{selectedViewAndTab:e.selectedViewAndTab,leftActions:e.leftActions,rightActions:e.rightActions,notices:e.notices})),n.createElement("div",{className:o.cx.wFull.$},e.children))}},641222:(e,t,r)=>{r.d(t,{sJ:()=>x,h2:()=>B,Ej:()=>U,ud:()=>D,MF:()=>k,j2:()=>R,WH:()=>M});var n,i=r(652983),a=r(63730),o=r(407908),l=r(594619),s=r(435613),c=r(212984),d=r(970740),u=r(111120),p=r(131826),m=r(366533),h=r(809377),_=r(322186),g=r(971237),f=r(801998),E=r(225468),y=r(13155),v=r(944075),b=r(172497),I=r(948042),T=r(268819);let w="shared_table--batchActionsSelector--RHjtW",S="shared_table--whiteChevron--nrA-L",C=r(624336),O=(0,b.z)(T.FT),A=(0,b.z)(T.E8),N="BATCH_CHANGE_LICENSE_GROUP_DROPDOWN",L="BATCH_CHANGE_WORKSPACE_DROPDOWN",P="BATCH_EDIT_ORG_ACCESS_DROPDOWN";function R(e){return i.createElement(p.UE,{className:e.disabled?"shared_table--optionDisabled--nqqvb shared_table--_optionBase--p1jvR shared_table--_disabled--aygfl":"shared_table--option--lzikw shared_table--_optionBase--p1jvR",onClick:e.onClick,trackingProperties:e.trackingProperties,...e.tooltip?{"data-tooltip-type":E.fR.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}class k extends i.PureComponent{constructor(){super(...arguments),this.defaultDisplayValue=(0,d.t)("multi_select_list.filter_default"),this.isDropdownShown=()=>{var e;return(null==(e=this.props.dropdownShown)?void 0:e.type)===this.props.dropdownType}}render(){let e=null===this.props.selectedValue?this.defaultDisplayValue:this.props.getDisplayText(this.props.selectedValue),t=this.props.hideDefaultOption?this.props.values.length*O:(this.props.values.length+1)*O+A;return i.createElement(D,{dispatch:this.props.dispatch,type:this.props.dropdownType,showingDropdown:this.isDropdownShown()},i.createElement("div",{"data-onboarding-key":this.props["data-onboarding-key"],className:c.cx.maxW200.ellipsis.overflowHidden.$},this.props.getSelectedDisplayText?i.createElement("span",{className:c.cx.noWrap.$},this.props.getSelectedDisplayText(this.props.selectedValue)):i.createElement(i.Fragment,null,i.createElement("span",{className:c.cx.noWrap.$},this.props.label,":")," ",i.createElement("span",{className:c.cx.noWrap.$},e))),this.isDropdownShown()&&i.createElement(l.j.DropdownWithScrim,{stopScrollPropagation:!0,dispatch:this.props.dispatch,className:I.eR,style:this.props.dropdownShown.data.position},i.createElement(y.YB,{maxDropdownHeight:e=>Math.round(.5*e),dropdownChildrenHeight:t},!this.props.hideDefaultOption&&i.createElement(i.Fragment,null,i.createElement(l.j.CheckableOptionTrackable,{checked:null===this.props.selectedValue,onClick:()=>this.props.updateFilter(null),trackingProperties:{filterType:this.props.dropdownType}},this.defaultDisplayValue),i.createElement(l.j.Separator,null)),this.props.values.map(e=>i.createElement(l.j.CheckableTwoColumnOptionTrackable,{key:this.props.getDisplayText(e),checked:this.props.selectedValue===e,onClick:()=>this.props.updateFilter(e),primaryText:this.props.getDisplayText(e),secondaryText:null===this.props.selectedValue&&this.props.getCount?this.props.getCount(e).toString():"",trackingProperties:{filterType:this.props.dropdownType,text:this.props.getDisplayText(e)}})))))}}k.displayName="MenuBarFilter";class D extends i.PureComponent{constructor(){super(...arguments),this.toggleDropdown=e=>{if(e.preventDefault(),e.stopPropagation(),this.props.showingDropdown)this.props.dispatch(u.kp());else{let e;let t=a.findDOMNode(this).getBoundingClientRect(),r=t.top>=window.innerHeight-200;e=this.props.isMultilevelDropdown?{targetRect:t}:{position:{top:r?"auto":t.top,bottom:r?36:"auto",left:this.props.isRightAligned?"auto":Math.min(t.left,window.innerWidth-180),right:this.props.isRightAligned?window.innerWidth-Math.max(t.right,180):"auto"}},this.props.dispatch(u.SP({type:this.props.type,data:e}))}}}render(){return i.createElement("div",{className:`${this.props.isDisabled?I.AN:I.tD} ${this.props.className?this.props.className:""}`,onClick:this.props.isDisabled?void 0:this.toggleDropdown,"data-tooltip-type":this.props.tooltip?E.fR.TEXT:void 0,"data-tooltip":this.props.tooltip?this.props.tooltip:void 0,"data-tooltip-show-above":!!this.props.tooltip||void 0,"data-testid":"dropdown-selector"},this.props.children,!this.props.isDisabled&&!this.props.hideChevron&&i.createElement(s.n,{className:`${I.Sf} ${this.props.chevronClassName?this.props.chevronClassName:""}`,svg:C}))}}var M=((n=M||{}).NONE="NONE",n.UNASSIGNED="UNASSIGNED",n.WORKSPACE="WORKSPACE",n);function F(e){let t=(0,o.I0)(),r=(0,h.L)(),n=i.createRef(),a=0,s=e.workspaces.map(t=>{let r="WORKSPACE"===e.selectedWorkspace.type&&e.selectedWorkspace.workspaceId===t.id;return i.createElement(l.j.CheckableOptionTrackable,{key:t.id,checked:r,onClick:r?void 0:()=>e.onChange(t)},t.name)});a+=O*s.length,s.push(i.createElement(l.j.Separator,{key:"separator"})),a+=A;let c="UNASSIGNED"===e.selectedWorkspace.type;s.push(i.createElement(l.j.CheckableOptionTrackable,{key:"",checked:c,onClick:c?void 0:()=>e.onChange(null)},c?"Unassigned":"Unassign")),a+=O;let d=i.createElement(y.YB,{maxDropdownHeight:e=>Math.round(.8*e),dropdownChildrenHeight:a,ref:n},s);return i.createElement(l.j.DropdownWithScrim,{dispatch:t,className:"shared_table--batchActionsSelectorDropdown--rCt6G",style:r.data.position},d)}function x(e){let t=(0,o.I0)(),r=(0,h.L)(),n=(0,_.Ng)(),a=(0,g.US)();if(!a||0===e.licenseGroups.length)return null;let l=(null==r?void 0:r.type)===N;return i.createElement(p.Ui,{name:"Change billing group",trackingTargets:m.p.NONE},l&&i.createElement(F,{workspaces:e.licenseGroups,selectedWorkspace:e.selectedLicenseGroup,onChange:e.onChange}),i.createElement(D,{className:w,dispatch:t,showingDropdown:l,type:N,chevronClassName:S},(0,f.uH)(n.id)?i.createElement(d.Tx,{id:"members_table.batch_actions_menu.change_billing_group"}):i.createElement(d.Tx,{id:"members_table.batch_actions_menu.change_workspace"})))}function U(e){let t=(0,o.I0)(),r=(0,h.L)();if(0===e.workspaces.length)return null;let n=(null==r?void 0:r.type)===L;return i.createElement(p.Ui,{name:"Change Workspace",trackingTargets:m.p.NONE},n&&i.createElement(F,{workspaces:e.workspaces,selectedWorkspace:e.selectedWorkspace,onChange:e.onChange}),i.createElement(D,{className:w,dispatch:t,showingDropdown:n,type:L,chevronClassName:S},i.createElement(d.Tx,{id:"members_table.batch_actions_menu.change_workspace"})))}function B({orgAccessOptions:e,selectedOrgAccess:t,onChange:r,disabled:n,tooltip:a}){let l=(0,o.I0)(),s=(0,h.L)(),c=(null==s?void 0:s.type)===P;return i.createElement(D,{className:n?"shared_table--batchActionsSelectorDisabled--dWdph shared_table--_disabled--aygfl":w,dispatch:l,isDisabled:n,tooltip:a,showingDropdown:c,type:P,chevronClassName:S},i.createElement(d.Tx,{id:"members_table.batch_actions_menu.edit_org_access"}),c&&i.createElement(v.m,{dispatch:l,dropdownShown:s,options:e,value:t,onChange:r}))}},833897:(e,t,r)=>{r.d(t,{V:()=>d,t:()=>u});var n=r(652983),i=r(407908),a=r(716250),o=r(970740),l=r(285852),s=r(678211),c=r(41285);let d="import";function u(){let e=(0,i.I0)();return n.createElement(c.J,{action:{kind:s.G.BUTTON,key:s.y.IMPORT,displayText:(0,o.t)("file_browser.folder.import"),onClick:()=>{e((0,l.v)({showImportModal:(0,a.BZ)().figjam_3p_file_importer}))},dataTestId:"file-import-button","data-onboarding-key":d}})}},41285:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(652983),i=r(87608),a=r.n(i),o=r(618723),l=r(782051),s=r(435613),c=r(212984),d=r(678211),u=r(760527);function p(e){switch(e.action.kind){case d.G.BUTTON:return n.createElement(n.Fragment,null,e.action.displayText);case d.G.ICON_BUTTON:return n.createElement(s.n,{svg:e.action.icon});case d.G.ICON_TEXT_BUTTON:return n.createElement(n.Fragment,null,n.createElement(s.n,{svg:e.action.icon,className:e.action.svgStyleClass,style:{alignSelf:"center",paddingRight:"5px"}}),n.createElement("div",null,e.action.displayText));case d.G.CUSTOM_BUTTON:return e.action.element;default:return null}}function m(e){if(e.action.kind===d.G.CUSTOM)return n.createElement("div",{className:u._X,key:e.action.key},e.action.element);let t="isLoading"in e.action&&!0===e.action.isLoading;return n.createElement(o.pJ,{key:e.action.key,className:a()(c.cx.flex.itemsCenter.justifyCenter.$,e.action.showOnMobile?null:u._X,e.action.hideOnDesktop?u.Ah:null,"styleClass"in e.action?e.action.styleClass:null),"data-tooltip":"data-tooltip"in e.action?e.action["data-tooltip"]:void 0,"data-tooltip-type":"data-tooltip-type"in e.action?e.action["data-tooltip-type"]:void 0,"data-onboarding-key":"data-onboarding-key"in e.action?e.action["data-onboarding-key"]:void 0,dataTestId:"dataTestId"in e.action?e.action.dataTestId:void 0,innerText:"displayText"in e.action?e.action.displayText:void 0,onClick:"onClick"in e.action?e.action.onClick:void 0},t?n.createElement(l.TK,{className:c.cx.px4.$}):n.createElement(p,{action:e.action}))}},262734:(e,t,r)=>{r.d(t,{M:()=>_,b:()=>g});var n=r(652983),i=r(407908),a=r(618723),o=r(782051),l=r(970740),s=r(644383),c=r(84315),d=r(780931),u=r(291904),p=r(88578),m=r(505468),h=r(660166);function _(e){let{profileId:t,profileHandle:r,emptyStateText:u}=e,m=(0,i.I0)(),[_,g]=n.useState([]),[f,E]=n.useState(!1);n.useEffect(()=>{E(!0),d.P.getRestrictedProfiles({profileId:t}).then(({data:e})=>{g(e.meta),E(!1)})},[t]);let y=(e,t)=>{g(_.map(r=>r.id===e?{...r,is_restricted_by_current_user:t}:r))},v=(e,t)=>{y(e,t),m(s.R.enqueue({message:t?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{t?I(e):b(e)}}}))},b=t=>{m(c.Au({profileId:e.profileId,blockedProfileId:t,onSuccess:()=>v(t,!0)}))},I=t=>{m(c.yf({profileId:e.profileId,blockedProfileId:t,onSuccess:()=>v(t,!1)}))},T=_&&_.length>0;if(!u&&!T)return n.createElement(n.Fragment,null);if(f)return n.createElement(o.TK,null);let w=T?n.createElement(n.Fragment,null,r?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:r}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):n.createElement(n.Fragment,null,u," ",n.createElement(l.Tx,{id:"community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",learnMoreLink:n.createElement(a.Z6,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},n.createElement(l.Tx,{id:"general.learn_more"}))})," "),S=n.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},n.createElement("div",{className:h.lB},_.map(e=>n.createElement(p.u,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?n.createElement(a.PL,{onClick:I.bind(null,e.id)},n.createElement(l.Tx,{id:"community.comments.unrestrict"})):n.createElement(a.DF,{onClick:b.bind(null,e.id)},n.createElement(l.Tx,{id:"community.comments.restrict"}))}))));return n.createElement(n.Fragment,null,n.createElement("div",{className:h.RF},n.createElement(l.Tx,{id:"settings_tab.community_commenters_label"})),w,S)}let g=(0,u.Y3)(function(e){let t=(0,i.I0)();return n.createElement(m.u_,{dispatch:t,className:h.DS,popStack:!0},n.createElement(_,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},222679:(e,t,r)=>{r.d(t,{S:()=>p,e:()=>m});var n=r(652983),i=r(87608),a=r.n(i),o=r(212984),l=r(5119),s=r(312938),c=r(438049),d=r(957297),u=r(421678);function p(e){return n.createElement("div",{className:e.fillContainer?o.cx.wFull.hFull.$:c.Zl},n.createElement(m,{thumbnail_url:e.thumbnail_url,additionalClassName:e.fillContainer?o.cx.wFull.hFull.$:c.BH,isLocked:e.isLocked}))}function m(e){let{isLocked:t}=e;return n.createElement("div",{className:a()({[e.additionalClassName||""]:!!e.additionalClassName,[u.Ub]:!0,[d.AV]:t}),style:t?{}:{background:`url(${(0,l.Z)()})`}},n.createElement("div",{className:u.kR,style:{backgroundColor:"transparent"}},n.createElement("div",{className:u.ZU,style:t?{}:{backgroundImage:`url(${e.thumbnail_url})`}},t&&n.createElement(s.HE,{additionalClassName:d.IN,iconClassName:d.r5}))))}},568157:(e,t,r)=>{r.d(t,{S:()=>u,p:()=>p});var n=r(652983),i=r(87608),a=r.n(i),o=r(600486),l=r(212984),s=r(299482),c=r(435804),d=r(346150);function u(e){let{mobileToolBarSpacerStyle:t,containerStyle:r,metaContainerStyle:i}=e.collapseSidebarOnTabletView?{mobileToolBarSpacerStyle:"",containerStyle:d._,metaContainerStyle:d.lM}:{mobileToolBarSpacerStyle:d.uE,containerStyle:d.nC,metaContainerStyle:d.Vn},l=(0,c.A6)(),[s,u]=n.useState(!1),p=window.performance.getEntriesByType("navigation")[0];return n.useEffect(()=>{let e=null==p?void 0:p.loadEventEnd;0===e||s||((0,o.L9)("File Browser Cold Start Page Load Time",{elapsedMs:e,selectedView:l.view},{forwardToDatadog:!0,batchRequest:!0}),u(!0))},[null==p?void 0:p.loadEventEnd,s,l.view]),n.createElement(n.Fragment,null,!!e.banner&&e.banner,e.toolbar,n.createElement("div",{className:t}),e.viewbar&&n.createElement("div",{className:a()(d.jZ,{[d.zz]:!0,[d.Ek]:e.viewBarSticky})},e.viewbar),!!e.belowToolbarBanner&&e.belowToolbarBanner,n.createElement("div",{className:a()(e.scrollableContainerClass,d.fF)},!!e.header&&e.header,n.createElement("div",{className:`${r} ${e.containerClass||""}`},e.metaContent&&n.createElement("div",{className:i},e.metaContent),n.createElement("div",{className:`${d.er} ${e.contentContainerClass||""}`},e.content))))}function p(e){let{containerStyle:t,metaContainerStyle:r}=e.collapseSidebarOnTabletView?{containerStyle:d._,metaContainerStyle:a()(d.lM,d._X)}:{containerStyle:d.nC,metaContainerStyle:a()(d.Vn,d._X)};return n.createElement(n.Fragment,null,!!e.banner&&e.banner,!!e.header&&n.createElement("div",{className:a()(d.u7,{[d.NT]:e.noFileBrowserToolbar}),style:{backgroundColor:e.headerColor}},e.header),n.createElement("div",{className:e.scrollableContainerClass?e.scrollableContainerClass:""},n.createElement("div",{className:`${t} ${e.containerClass||""}`},e.metaContent&&n.createElement("div",{className:r,style:s.sx.add({marginTop:"-24px"}).$},e.metaContent),n.createElement("div",{className:d.er},e.toolbar&&n.createElement("div",{className:a()(l.cx.pt10.h48.mx32.$,e.shouldHideDivider?void 0:l.cx.bSolid.colorBorder.bt1.$,d.eG)},e.toolbar),n.createElement("div",{className:e.contentContainerClass},e.content),e.footer&&n.createElement("div",{className:d.Y2},e.footer)))))}},409935:(e,t,r)=>{r.d(t,{hU:()=>b,ll:()=>v});var n=r(652983),i=r(407908),a=r(600486),o=r(970740),l=r(456496),s=r(65249),c=r(111120),d=r(329660),u=r(898080),p=r(733609),m=r(225468),h=r(158314),_=r(937275),g=r(277030),f=r(148598),E=r(888431);let y=r(763382);function v(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.teams),l=r[e.team.id],s=n.useCallback(r=>{r.stopPropagation(),t(c.fv({view:"teamAdminConsole",teamId:e.team.id,isProTeam:null==l?void 0:l.pro_team})),(0,a.L9)("Admin Console Opened",{trackingContext:e.trackingContextName,entryPoint:"sidebar"})},[t,e.team,e.trackingContextName,null==l?void 0:l.pro_team]);return n.createElement(h.Hz,{svg:y,onClick:s,"data-tooltip-type":m.fR.TEXT,"data-tooltip":(0,o.t)("sidebar.admin_console"),className:E.L})}function b(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.currentTeamId),a=(0,i.v9)(e=>e.teams),o=(0,i.v9)(p.getPermissionsState);if(!r)return null;let m=a[r],h=(0,p.hasAdminRoleAccessOnTeam)(r,o);if(!h||!m||!(0,u.e3)(m))return null;let E=(0,d.hU)((null==m?void 0:m.pro_team)&&h),y=e.selectedView&&"teamAdminConsole"===e.selectedView.view,v=n.createElement(g.PD,{planType:_.YH.TEAM,planId:r,isSelected:y});return n.createElement(f.N,{isSelected:y,onClick:()=>{t(c.fv({view:"teamAdminConsole",teamId:r,isProTeam:m.pro_team})),t(c.D5({clickedResourceType:"teamAdminSettings",resourceIdOrKey:m.id}))},"data-onboarding-key":"PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY",icon:n.createElement(l.JO,{icon:"settings-16"}),text:E?n.createElement(s.x,{i18nId:"sidebar.admin_dashboard",truncate:!0}):n.createElement(s.x,{i18nId:"sidebar.admin_settings",truncate:!0}),badge:E?v:void 0})}},277030:(e,t,r)=>{r.d(t,{PD:()=>W,x9:()=>B,IB:()=>H});var n,i=r(652983),a=r(407908),o=r(209411),l=r(716250),s=r(337167),c=r(669277),d=r(418465),u=r(212984),p=r(456496),m=r(65249),h=r(111120),_=r(465530),g=r(329660),f=r(131826),E=r(175965),y=r(135348),v=r(26939),b=r(971237),I=r(761767),T=r(862610),w=r(521384),S=r(801998),C=r(225468),O=r(867325),A=r(418363),N=r(435613),L=r(970740),P=r(941600),R=r(625893),k=r(906498),D=r(937275),M=r(148598);let F="admin_settings_link--yellowIcon--bsDMr",x=r(858901);var U=((n=U||{}).WARNING="warning",n.NOTICE="notice",n);function B(e){var t,r;let n;let o=(0,a.I0)(),l=e.orgUser.permission===I.Gu.ADMIN,s=(0,b.US)(),d=(0,b.$4)(),{groupsUserIsAdminOf:u}=(0,b.O)(d,e.orgUser.user_id,!l),f=(0,E.yS)();i.useEffect(()=>{o(_.U2({forceRefetch:!1}))},[o,e.org.id]);let{groupsToReview:C}=(0,b.hj)(u,f),A=null==(t=u[0])?void 0:t.id,N=e.org.bigma_enabled&&s&&!!A,L=(0,S.uH)(e.org.id),k=(0,y.d3)(e.org.id).data??[],F=e.org.bigma_enabled&&L&&k.length>0,x=(0,c.mU)(T.OrgTaxIdView,{orgId:e.org.id}),U="loaded"===x.status?null==(r=x.data.org)?void 0:r.taxIdVerificationStatus:null,B=(0,g.LL)(l);if(!l&&!N&&!F)return null;let V=function(e){switch(e.view){case"orgAdminSettings":return!0;case"licenseGroup":return e.subView===P.gp.ADMIN;case"workspace":return e.subView===O.ep.ADMIN;default:return!1}}(e.selectedView);return l&&B?n=i.createElement(W,{planType:D.YH.ORG,planId:e.org.id,taxIdVerificationStatus:U,invoices:f,isSelected:V}):(l||N)&&(n=i.createElement(H,{invoices:f,showTooltip:!0,org:e.org,orgUser:e.orgUser})),i.createElement(M.N,{icon:i.createElement(p.JO,{icon:"settings-16"}),text:B?i.createElement(m.x,{i18nId:"sidebar.admin_dashboard",truncate:!0}):i.createElement(m.x,{i18nId:"sidebar.admin_settings",truncate:!0}),isSelected:V,onClick:()=>{let t=f&&(0,w.qQ)(f);if(l){let r=R.rN.DASHBOARD;!B&&t&&e.org.bigma_enabled&&(r=R.rN.BILLING),o(h.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:r})),o(h.D5({clickedResourceType:"orgAdminSettings"}))}else N?(o(h.fv({view:"licenseGroup",subView:P.gp.ADMIN,licenseGroupId:t&&C.length>0?C[0].id:A,selectedTab:(0,v.j)(t&&C.length>0?P.nb.MEMBERS:P.Uq[0],e.org.id)})),o(h.D5({clickedResourceType:"licenseGroupAdminSettings"}))):F&&(o(h.fv({view:"workspace",subView:O.ep.ADMIN,workspaceId:k[0].id,selectedTab:O.u5[0]})),o(h.D5({clickedResourceType:"workspaceAdminSettings"})))},badge:n})}function V(e,t,r,n,i,a){if(!n||!(0,w.wE)(n))return null;if(a){if(!i)return null;let{groupsUserIsAdminOf:e}=(0,b.O)(r,t.user_id,a),{groupsToReview:o}=(0,b.hj)(e,n);if(0===o.length)return null}return{tooltipData:(0,w.GJ)(e,n,a),iconStyle:(0,w.vl)(n)?"admin_settings_link--redIcon--2sF2X":F,iconType:(0,w.vl)(n)?"warning":"notice"}}function G(e){return(0,l.BZ)().tax_id_status_admin_ui&&e===I.v4.UNVERIFIED?{tooltipData:(0,L.t)("billing_status.tax_id.invalid"),iconStyle:F,iconType:"notice"}:null}function H(e){var t;let r=(0,a.I0)(),n=(0,b.$4)(),o=e.invoices&&(0,w.qQ)(e.invoices),l=e.org.bigma_enabled&&e.orgUser.license_admin&&e.orgUser.permission!==I.Gu.ADMIN,s=(0,c.mU)(T.OrgTaxIdView,{orgId:e.org.id}),d="loaded"===s.status?null==(t=s.data.org)?void 0:t.taxIdVerificationStatus:null;i.useEffect(()=>{o&&l&&r(_.U2({forceRefetch:!1}))},[r,e.org.id,o,l]);let u=(()=>{switch(e.highlightType){case w.SR.BILLING_STATUS:return V(e.org,e.orgUser,n,e.invoices,o,l);case w.SR.TAX_ID_STATUS:return G(d);default:return V(e.org,e.orgUser,n,e.invoices,o,l)||G(d)}})();if(!u)return null;let p=`${u.iconStyle} ${e.inlineIcon?"admin_settings_link--inline--ySRcs":""} ${e.alignTop?"admin_settings_link--multiLineIcon--Mtp3R":""}`,m={};e.showTooltip&&(m["data-tooltip-type"]=C.fR.TEXT,m["data-tooltip"]=u.tooltipData,m["data-tooltip-show-below"]=!0,m["data-tooltip-timeout-delay"]=50,m["data-tooltip-max-width"]=117);let h=i.createElement(N.n,{className:`admin_settings_link--warningSvg--gfNTp ${p}`,svg:x,useOriginalSrcFills_DEPRECATED:!0,...m}),g=e.showTooltip?i.createElement(A.bM,{className:p,dataTooltipType:m["data-tooltip-type"],dataTooltip:m["data-tooltip"],dataTooltipShowBelow:m["data-tooltip-show-below"],dataTooltipTimeout:m["data-tooltip-timeout-delay"],dataTooltipMaxWidth:m["data-tooltip-max-width"]}):i.createElement(A.bM,{className:p}),E="warning"===u.iconType?h:g;return(0,f.bC)(E,"Org Admin Billing Status Badge",{orgId:e.org.id,isCurrentUserLicenseAndNotOrgAdmin:l})}function W(e){var t,r,n;let a=(0,c.mU)(T.AdminNotificationsCountView,{planType:e.planType,planId:e.planId,filterParams:null}),p=(0,D.PY)({planType:e.planType,planId:e.planId}),m=(0,c.mU)(T.DevModeOptInInfo,{orgId:e.planType===D.YH.ORG?e.planId:""},{enabled:e.planType===D.YH.ORG}),h="loaded"===m.status,_=e.planType===D.YH.ORG&&(0,l.BZ)().dev_mode_opt_in&&h&&(0,w.gD)((null==(r=null==(t=m.data)?void 0:t.org)?void 0:r.devModeOptInPlanProperty)||null),g=_||p?1:0,f="loaded"===a.status&&a.data.adminRequestDashboardTotalRowCount.status===o.wy.Loaded?null==(n=a.data.adminRequestDashboardTotalRowCount.data)?void 0:n.rowCount:void 0,E=f??0,y=e.invoices&&(0,w.wE)(e.invoices)?1:0,v=(0,l.BZ)().tax_id_status_admin_ui&&e.taxIdVerificationStatus===I.v4.UNVERIFIED?1:0,[b,S]=(0,s.KO)(k.u),[C,O]=(0,s.KO)(k.P),A=[e.planType,e.planId].toString();i.useEffect(()=>{if(f){let e={...b};e[A]=E,S(e)}return()=>{let e={...b};delete e[A],S(e)}},[f,A]),i.useEffect(()=>{let e={...C};return e[A]=1===g,O(e),()=>{let e={...C};delete e[A],O(e)}},[g,A]);let N=C[A]?1:0,L=(b[A]??0)+y+v+N;if(L<1)return null;let P=d.JV.DEFAULT;return y||v||N?P=d.JV.WARNING:e.isSelected&&(P=d.JV.LIGHT),i.createElement(d.Ct,{text:L.toString(),color:P,className:P===d.JV.DEFAULT?u.cx.mr0.colorText.colorBgSelectedSecondary.$:u.cx.mr0.$})}},365737:(e,t,r)=>{r.d(t,{C8:()=>h,c3:()=>g,qV:()=>f});var n=r(652983),i=r(407908),a=r(716250),o=r(388899),l=r(970740),s=r(275286),c=r(111120),d=r(219160),u=r(512169),p=r(822132);let m=(e,t,r,n={})=>e?[{displayText:t||"",callback:r,...n}]:[],h="organize-favorite-menu",_=()=>{let e=(0,i.v9)(e=>e.dropdownShown);return e&&(null==e?void 0:e.type)===h?e:null};function g(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.currentTeamId),a=(0,i.v9)(e=>e.currentUserOrgId),o=(0,i.v9)(e=>e.mobileNavShown),l=(0,i.v9)(e=>e.favorites.collapsedCustomSections),s=n.useMemo(()=>(0,d.zF)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),c=_();if(null==c)return null;let{updateFavorite:p,resourceId:m,resourceType:h,isFavorited:g,currentSectionId:E}=e,y=f({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:l,updateFavorite:p,resourceId:m,resourceType:h,isFavorited:g,currentSectionId:E,sections:s,mobileNavShown:o});return n.createElement(u.z,{items:y,parentRect:c.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:t,onSelectItem:(e,r)=>{var n;null==(n=e.callback)||n.call(e,"",{},t,r)}})}function f(e){let{dispatch:t,currentOrgId:r,currentTeamId:n,collapsedCustomSections:i,updateFavorite:d,resourceId:u,resourceType:h,isFavorited:_,currentSectionId:g,sections:f}=e,E=(e,n)=>{d(e,n),t(c.kp()),e&&n&&(i.delete(n),t(s.l6({collapsedCustomSections:i})),p.Ox({type:"topLevel",id:"custom",orgId:r,sectionId:n},!0))},y=f.map(e=>({displayText:""===e.name?(0,l.t)("sidebar.starred"):e.name,isChecked:_&&g===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>E(!(_&&g===e.id),e.id)})),v=[...m(_,null,o.ZT,{separator:!0}),...m(_,(0,l.t)("favorited_resources.remove_from_sidebar"),()=>E(!1))],b=n&&(0,a.BZ)().ps_benchmark,I=[...m(!e.showFavoriteOptionsOnly&&!b,(0,l.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||t(c.HH());let r=g?f.findIndex(e=>e.id===g):0;h&&t(s.lt({movingResource:{resourceId:u,isFavorited:!0,resourceType:h}})),t(s.J6({newCustomSectionIndex:r})),t(c.kp())})],T=[{displayText:"",separator:!0}],w=f.find(e=>e.id===g),S=_?`${(0,l.t)("favorited_resources.indicate_section_prefix")}: ${(null==w?void 0:w.name)||(0,l.t)("sidebar.starred")}`:(0,l.t)("favorited_resources.add_to_sidebar"),C=f.length>4,O=C?[{displayText:S,children:[...y,...T,...I]},...v]:[...m(!0,(0,l.t)("favorited_resources.add_to_sidebar"),o.ZT,{disabled:!0}),...y,...T,...v,...T,...I];return O}},345952:(e,t,r)=>{r.d(t,{T:()=>Y,l:()=>Z});var n=r(652983),i=r(407908),a=r(600486),o=r(172497),l=r(19516),s=r(870077),c=r(286206),d=r(117986),u=r(212984),p=r(313653),m=r(970740),h=r(644383),_=r(512512),g=r(266377),f=r(721127),E=r(329660),y=r(131826),v=r(366533),b=r(448694),I=r(706039),T=r(870295),w=r(999177),S=r(761767),C=r(617406),O=r(898080),A=r(733609),N=r(760592),L=r(841017),P=r(614860),R=r(731436),k=r(220958),D=r(973655),M=r(512169),F=r(938336),x=r(927699),U=r(787618),B=r(530676),V=r(334079),G=r(446833),H=r(655430),W=r(449606),K=r(117482),z=r(332224);function Z(){let e=(0,i.v9)(e=>e.fileKeysByFolderId),t=(0,i.v9)(e=>e.repoIdsByFolderId),r=(0,i.v9)(e=>(0,A.getPermissionsState)(e)),n=(0,i.v9)(e=>e.currentUserOrgId),l=(0,i.v9)(e=>e.loadedFolders),h=(0,V.f)(),y=(0,s.Db)(T.wj),v=(0,i.I0)();return({folder:i,useLGPerms:s,onRenameClick:b,shouldShowJoinButton:D,onRevokeTransfer:M,getPendingInfo:V,pendingTransfer:Z})=>{var Y,j,$,q,X,J,Q;let ee=()=>{v(f.K4({type:K.I,data:{folder:i}}))},et=({canTransferProject:e,canAccessPaidFeatures:t,team:r})=>{if(!r||!e){en();return}if(t){er();return}if((0,E.E4)()){v(f.K4({type:U.yd,data:{team:r,resource:P.gx.PROJECT_TRANSFER,currentPlan:I.V.Plan.STARTER,upsellPlan:I.V.Plan.PRO}}));return}(0,c.Jz)(d.k.MONETIZATION,Error("ExpStandardizeProEntrypoints: Starter users in control should not be able to access handler"),{extra:{teamId:null==r?void 0:r.id}})},er=()=>{i.teamId&&V&&v(f.K4({type:W.Mz,data:{folder:r.folders[i.id],team:r.teams[i.teamId],entryPoint:W.ts.PROJECT_SETTINGS,onRequestClose:V}}))},en=()=>{i.teamId&&v(f.K4({type:H.a,data:{folder:r.folders[i.id],team:r.teams[i.teamId],entryPoint:W.ts.PROJECT_SETTINGS}}))},ei=e=>{Z&&M&&v(f.K4({type:G.$,data:{pending:Z,canTransferProject:e,onRevokeTransfer:M}}))},ea=(0,w.V6)(i),eo=!1;eo=s?!!(null==(Y=i.folderPerms)?void 0:Y.canEdit):i.canEdit;let el=!1;el=s?!!(null==(j=i.folderPerms)?void 0:j.canDelete):i.teamId?(0,A.hasEditorRoleAccessOnTeam)(i.teamId,r)&&eo:ea?eo:(0,A.canOwnFolder)(i.id,r);let es=!1;es=s?!!(null==($=i.folderPerms)?void 0:$.canShare):!ea;let ec=!1;ec=s?!!(null==(q=i.folderPerms)?void 0:q.canMove):eo&&null==i.inviteOnlyAt&&null==i.viewOnlyAt;let ed=!1,eu=!1,ep=i.teamId?r.teams[i.teamId]:void 0;if(s)ed=!!(null==(X=i.folderPerms)?void 0:X.canSeeTransferOption),eu=!!(null==(J=i.folderPerms)?void 0:J.canTransfer);else{let e=(0,C.YM)(r),t=(null==e?void 0:e.permission)===S.Gu.ADMIN,n=(null==ep?void 0:ep.id)&&(0,A.hasAdminRoleAccessOnTeam)(null==ep?void 0:ep.id,r);ed=!!((null==e?void 0:e.permission)!==S.Gu.GUEST&&ep&&(0,A.canViewTeam)(ep.id,r)&&((0,L.cU)(ep)||(0,E.E4)())),eu=!!t||!!(!(null==ep?void 0:ep.org_id)&&n)}let em=!1;if(s)em=!!(null==(Q=i.folderPerms)?void 0:Q.canEditDescription);else{let e=(0,O.yH)({...i,is_invite_only:null!==i.inviteOnlyAt,is_view_only:null!==i.viewOnlyAt,team_id:i.teamId},r);em=i.canEdit&&!e}let eh=window.innerWidth<=(0,o.z)(z.Jbu),e_=!es||!eh,eg=[];return i.description&&(eg.push({displayText:(0,m.t)("project_menu.description"),disabled:!0},{displayText:i.description,displayTextClassname:u.cx.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),em&&eg.push({displayText:(0,m.t)("project_menu.edit_description"),callback:ee},{displayText:"",separator:!0})),!i.description&&em&&eg.push({displayText:(0,m.t)("project_menu.add_description"),callback:ee}),eg.push({displayText:(0,m.t)("file_browser.copy_link"),callback:()=>{let e=(0,R.DS)(i.id,n);v(_.fB({url:e}))}}),D||(e_||eg.push({displayText:(0,m.t)("sidebar.share"),callback:()=>{v((0,T.G3)({folderId:i.id,loadedFolders:l})),v(f.K4({type:B.I,data:{folderId:i.id}}))}}),eg.push({displayText:(0,m.t)("sidebar.move_project"),callback:()=>{v((0,T.G3)({folderId:i.id,loadedFolders:l})),v(f.K4({type:x.IQ,data:{folderId:i.id}}))},disabled:!ec}),b&&eg.push({displayText:(0,m.t)("sidebar.rename"),callback:()=>{b&&b(i)},disabled:!eo}),h||eg.push({displayText:i.isSubscribed?(0,m.t)("sidebar.remove_from_favorites"):(0,m.t)("sidebar.add_to_favorites"),callback:()=>{v(g.FH({folderId:i.id,folderName:i.path,teamId:i.teamId,isSubscribed:!i.isSubscribed}))}}),eg.push({displayText:"",separator:!0}),ed&&!Z&&eg.push({displayText:(0,m.t)("project_menu.transfer"),callback:()=>et({canTransferProject:eu,canAccessPaidFeatures:!!(ep&&(0,L.cU)(ep)),team:ep}),trackingProperties:{canUserAccessProFeature:!!(ep&&(0,L.cU)(ep))}}),Z&&ed&&eg.push({displayText:"",separator:!0},{displayText:(0,m.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,m.t)("project_menu.view_transfer_details"),callback:()=>ei(!!eu)},{displayText:"",separator:!0}),eg.push({displayText:(0,m.t)("project_menu.delete"),callback:()=>{var r;(0,a.L9)("Folder Delete Click",{folderId:i.id,teamId:i.teamId,orgId:i.orgId});(s?!!(null==(r=i.folderPerms)?void 0:r.canSkipDeletionConfirmation):(0,w.k4)(i.id,{fileKeysByFolderId:e,repoIdsByFolderId:t}))?y({folderId:i.id}).catch(()=>{v(p.l.error((0,m.t)("file_browser.api_folder.error_when_deleting")))}):v(f.K4({type:F.H,data:{folder:i}}))},disabled:!el}),el||i.teamId||eg.push({displayText:(0,m.t)("sidebar.leave_shared_project"),callback:()=>{v((0,N.Fm)({role:r.roles.byFolderId[i.id][r.user.id],level:k.V.NONE}))}})),eg}}function Y({className:e,folder:t,useLGPerms:r,onRenameClick:a}){var o;let s=(0,i.v9)(e=>e.dropdownShown),c=(0,i.I0)(),[d,u]=n.useState(void 0),p=()=>{D.j.getFolderTransfer({folderId:t.id}).then(({data:e})=>{u(e.meta)},e=>{u(void 0)})};(0,l.O)(()=>{p()});let m=(0,y.gx)(),_=Z(),g=null==(o=null==s?void 0:s.data)?void 0:o.targetRect;if(!g)return null;let f=_({folder:t,useLGPerms:r,onRenameClick:a,onRevokeTransfer:()=>{d?D.j.deleteAssetTransferRequest({id:d.id}).then(()=>{u(void 0),c(h.R.enqueue({message:"Transfer revoked."}))},e=>{c(h.R.enqueue({message:"Something went wrong - check your connection and try again",error:!0}))}):c(h.R.enqueue({message:"No pending transfer found for this project.",error:!0}))},getPendingInfo:p,pendingTransfer:d});return n.createElement(y.Ui,{trackingTargets:v.p.RCS,name:"Folder Context Menu"},n.createElement(M.z,{className:e,items:f,parentRect:g,showPoint:!1,lean:"right",dispatch:c,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},c,t),e.trackingProperties&&(0,b.T6)({...m.properties,trackingContext:m.name,...e.trackingProperties})}}))}},847495:(e,t,r)=>{r.d(t,{P4:()=>w,W3:()=>C});var n=r(652983),i=r(407908),a=r(615537),o=r(275835),l=r(435613),s=r(313653),c=r(970740),d=r(841573),u=r(111120),p=r(43120),m=r(696740),h=r(870295),_=r(999177),g=r(761767),f=r(733609),E=r(648597),y=r(45224),v=r(797370),b=r(148598),I=r(712675);let T=r(403034),w=e=>`new-file-from-folder-link-${e}`;class S extends n.Component{constructor(e){super(e),this.dragPaneImageRef=null,this.setDragImageRef=e=>{this.dragPaneImageRef=e},this.droppingIntoPersonalDisabled=()=>!this.props.folder.teamId&&this.props.folder.path,this.onFolderContextMenu=(e,t)=>{t.stopPropagation(),t.preventDefault();let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};this.props.dispatch(u.SP({type:C.NAV_FOLDER_CONTEXT_MENU,data:{folder:{...e,isSubscribed:!0,description:e.description},targetRect:r}}))},this.onFolderDragStart=e=>{let t=this.props.folder;e.dataTransfer.effectAllowed="move";let r=new m.nb(e.dataTransfer);r.setArbitraryData(t),this.dragPaneImageRef&&r.setDragImage(this.dragPaneImageRef),this.props.dispatch(d.f({type:E.D.Folder,data:t})),e.stopPropagation()},this.onFolderDragStop=e=>{this.props.dispatch(d.C())},this.isDragTarget=e=>{let t=new m.nb(e);return t.isFigFiles()||t.isRepos()},this.onFolderDragEnter=e=>{this.droppingIntoPersonalDisabled()||this.setState({isDraggingFile:!0})},this.onFolderDragLeave=e=>{this.droppingIntoPersonalDisabled()||this.setState({isDraggingFile:!1})},this.onFileDrop=e=>{if(this.droppingIntoPersonalDisabled()){this.props.dispatch(s.l.error((0,c.t)("file_browser.error_on_move_to_personal_project")));return}this.moveDroppedFiles(new m.nb(e))},this.moveDroppedFiles=e=>{let{folder:t}=this.props;if(e.isFigFiles()){this.setState({isDraggingFile:!1});let r=e.getData();return!!r&&(this.props.dispatch(p.M({files:r,folder:t,team:this.props.team})),!0)}if(e.isRepos()){this.setState({isDraggingFile:!1});let r=e.getReposData();return!!r&&(this.props.dispatch(p.M({files:r.files,repos:r.repos,folder:t,team:this.props.team})),!0)}return!1},this.onFolderLinkMouseDown=e=>{let t=this.props.folder;e.metaKey||e.ctrlKey||0!==e.button||(this.props.dispatch(u.B4(t.id)),this.props.dispatch(u.D5({clickedResourceType:"folder",resourceIdOrKey:t.id})))},this.onFolderRenameSubmit=(e,t)=>{this.props.dispatch((0,h.p0)({folderId:e.id,folderName:t})),this.props.dispatch(u.T_({folderId:e.id}))},this.onFolderRenameCancel=()=>{let e=this.props.folder;this.props.dispatch(u.T_({folderId:e.id}))},this.onMouseOver=()=>{this.setState({isHovered:!0})},this.onMouseLeave=()=>{this.setState({isHovered:!1})},this.state={isDraggingFile:!1,isHovered:!1}}static getContextSelectedFolder(e){return e&&e.type===this.NAV_FOLDER_CONTEXT_MENU?e.data.folder:null}renderRenameFolderInput(e){return n.createElement(b.N,{useSpacer:!0,text:n.createElement("div",{key:`rename-input-${e.id}`,className:I.EA},n.createElement(y.I,{className:I.q,placeholderValue:e.path,submit:t=>{this.onFolderRenameSubmit(e,t)},cancel:this.onFolderRenameCancel}))})}render(){var e;let t=this.props.folder;if(this.props.renamingNavFolderWithId===t.id)return this.renderRenameFolderInput(t);let r=(0,_.R_)(t),i=this.props.disambiguationFolders?(0,_.lU)(t,this.props.disambiguationFolders,this.props.permissionsState.teams,this.props.permissionsState.roles):void 0,a=this.props.draggable,s=a&&(this.state.isHovered||this.props.dragState.type===E.D.Folder&&(null==(e=this.props.dragState.data)?void 0:e.id)===this.props.folder.id),c=I.EA,d=null,u=C.getContextSelectedFolder(this.props.dropdownShown),p="folder"===this.props.selectedView.view&&this.props.selectedView.folderId===t.id;p&&(d=this.props.selectedItemRef),u&&u.id===t.id?c=I._b:this.state.isDraggingFile&&(c=I.p8);let m=this.props.shouldSeeCreateFileButton?n.createElement(v.S,{folder:this.props.folder,dropdownType:w(this.props.folder.id),isUserDraftFolder:!1}):void 0,h=`(${i})`;return n.createElement("div",{ref:d},n.createElement(o.h,{className:c,title:r.length>28?r:void 0,draggable:a,isDragTarget:this.isDragTarget,onTargetDragEnter:this.onFolderDragEnter,onTargetDragLeave:this.onFolderDragLeave,onTargetDrop:this.onFileDrop,onDragStart:this.onFolderDragStart,onDragEnd:this.onFolderDragStop,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave,onMouseDown:this.onFolderLinkMouseDown,onContextMenu:e=>this.onFolderContextMenu(t,e)},n.createElement("div",{className:I.A2}),n.createElement(b.N,{showGrabber:s,isSelected:p,icon:this.props.isSharedProject?n.createElement(l.n,{className:I.qv,svg:T}):void 0,useSpacer:!0,text:n.createElement("span",{className:I.M2},r,i&&n.createElement("span",{className:I.ns},h)),badge:m})),n.createElement("div",{className:I.sb,ref:this.setDragImageRef}))}}S.displayName="FolderLink",S.NAV_FOLDER_CONTEXT_MENU="nav-folder-context-menu";let C=(0,i.$j)((e,t)=>{let r=(0,a.ws)(f.canCreateFileOrRequestUpgradeLG),n=r(t.folder,e,g.gg.WHITEBOARD),i=r(t.folder,e,g.gg.DESIGN);return{shouldSeeCreateFileButton:n||i,dragState:e.dragState}})(S)},148598:(e,t,r)=>{r.d(t,{N:()=>u});var n=r(652983),i=r(87608),a=r.n(i),o=r(388899),l=r(435613),s=r(212984),c=r(171073);let d=r(745048);function u(e){return n.createElement("div",{role:"link","data-onboarding-key":e["data-onboarding-key"],className:a()(c.EE,e.rowClassName,{[c.$I]:e.isSelected&&!e.isFavoritesToMove,[c.aS]:e.isHighlighted&&!e.isFavoritesToMove,[c.cK]:e.showGrabber&&!e.isFavoritesToMove,[c.fw]:e.isFavoritesToMove,[c.C3]:e.isFavoritesToMove}),tabIndex:0,onClick:e.isFavoritesToMove?o.ZT:e.onClick,onContextMenu:e.isFavoritesToMove?o.ZT:e.onContextMenu},n.createElement("div",{className:s.cx.flex.flexRow.wFull.overflowHidden.$},!e.isFavoritesToMove&&e.showGrabber&&n.createElement(l.n,{svg:d,className:s.cx.colorIcon.$}),n.createElement("div",{className:a()(s.cx.flex.itemsCenter.flexRow.gap12.wFull.overflowHidden.$,{[c.rL]:e.useSpacer&&!e.icon})},e.icon&&n.createElement("div",{className:s.cx.flex.w16.h16.itemsCenter.alignCenter.justifyCenter.flexShrink0.$},e.icon),e.text)),e.badge)}},822132:(e,t,r)=>{r.d(t,{GR:()=>c,Ox:()=>s,pJ:()=>l});var n=r(122342);let i="sidebar-collapsed-sections";function a(e,t){return"custom"===e.id?e.type===t.type&&e.id===t.id&&e.orgId===t.orgId&&e.sectionId===t.sectionId:e.type===t.type&&e.id===t.id&&e.orgId===t.orgId}function o(){return(0,n.gm)().get(i)||[]}function l(e){let t=o().find(t=>a(t,e));return!t}function s(e,t){let r=(0,n.gm)();l(e)?t||r.set(i,[...o(),e]):t&&r.set(i,o().filter(t=>!a(t,e)))}function c(){let e=new Set;return o().forEach(t=>{"custom"===t.id&&t.sectionId?e.add(t.sectionId):"favorited"===t.id&&e.add(t.id)}),e}},931904:(e,t,r)=>{r.d(t,{Mk:()=>W,iu:()=>G});var n=r(652983),i=r(600486),a=r(716250),o=r(846999),l=r(418465),s=r(212984),c=r(970740),d=r(547699),u=r(20245),p=r(65249),m=r(111120),h=r(721127),_=r(131826),g=r(519782),f=r(219160),E=r(728443),y=r(72815),v=r(761767),b=r(898080),I=r(733609),T=r(881835),w=r(885755),S=r(787449),C=r(892061),O=r(648597),A=r(220958),N=r(225468),L=r(532444),P=r(548802),R=r(45224),k=r(418363),D=r(746125),M=r(23640),F=r(896903),x=r(213104),U=r(409935),B=r(148598),V=r(21690);let G="team-link-context-menu",H=class extends n.Component{constructor(e){super(e),this.onContextMenu=e=>{e.stopPropagation(),e.preventDefault();let t=this.props.dispatch;this.props.team&&(0,w._C)(this.props.team.id,{dispatch:t});let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};this.props.dispatch(m.SP({type:G,data:{teamId:this.props.team.id,targetRect:r}}))},this.onTeamRenameClick=e=>{this.props.dispatch(m.PH({teamId:e.id}))},this.onRenameSubmit=e=>{this.props.dispatch((0,E.gZ)({team:this.props.team,name:e})),this.props.dispatch(m.sS({teamId:this.props.team.id}))},this.onRenameCancel=()=>{this.props.dispatch(m.sS({teamId:this.props.team.id}))},this.onClickChangeTeamIcon=()=>{this.props.dispatch((0,g.u)({team:{...this.props.team,imgUrl:this.props.team.imgUrl||void 0}}))},this.onTeamLinkClick=e=>{let t=this.props.team;this.props.dispatch(m.g(t.id)),this.props.dispatch(m.D5({clickedResourceType:"team",resourceIdOrKey:t.id}))},this.onTeamLinkMouseOver=()=>{this.setState({isHovered:!0})},this.onTeamLinkMouseLeave=()=>{this.setState({isHovered:!1})},this.isTeamOverStarterTeamFileLimit=()=>{var e,t;let r=this.props.teams[this.props.team.id];return!!((null==(e=null==r?void 0:r.restrictions_list)?void 0:e.includes(v.ZG.FILES_LIMITED_LEGACY))||(null==(t=null==r?void 0:r.restrictions_list)?void 0:t.includes(v.ZG.WHITEBOARD_FILES_LIMITED_BETA)))},this.state={isHovered:!1}}static getContextSelectedTeam(e,t){if(e&&e.type===G&&e.data.teamId in t)return t[e.data.teamId]}render(){var e;let t;let r=this.props.team,i=H.getContextSelectedTeam(this.props.dropdownShown,this.props.teams),a=null,l=this.props.selectedView&&"team"===this.props.selectedView.view&&this.props.selectedView.teamId===r.id&&this.props.renamingNavTeamWithId!==r.id;l?a=this.props.selectedItemRef:i&&i.id===r.id&&(t=V.vT);let c=(0,I.hasAdminRoleAccessOnTeam)(r.id,this.props.permissionsState),m=(0,I.hasEditorRoleAccessOnTeam)(r.id,this.props.permissionsState),h=(0,I.canEditTeam)(r.id,this.props.permissionsState),_=(0,I.getPermissionsState)(this.props.permissionsState),g=!!this.props.draggable&&(this.state.isHovered||this.props.dragState.type===O.D.Team&&(null==(e=this.props.dragState.data)?void 0:e.id)===this.props.team.id),E=this.props.renamingNavTeamWithId===r.id,y=this.isTeamOverStarterTeamFileLimit(),v=(0,b.cv)(r.id,_),T=!E&&!(0,I.isOrgUserExternallyRestricted)(this.props.user,this.props.currentUserOrgId)&&this.state.isHovered&&!(y||v),w=!E&&c&&(0,b.gP)(this.props.team)&&!this.props.team.orgId,S={showReminder:!1,showAccessRestricted:!1};return _.user&&(S=(0,o.XW)(_.userEduGracePeriods,(0,o.dE)(_.user),r.id,!!r.studentTeamAt)),n.createElement("div",{onContextMenu:this.onContextMenu,onMouseOver:this.onTeamLinkMouseOver,onMouseLeave:this.onTeamLinkMouseLeave,ref:a,"data-onboarding-key":this.props.onboardingKey},n.createElement(B.N,{rowClassName:t,onClick:this.onTeamLinkClick,showGrabber:g,isSelected:this.props.selectedView&&"team"===this.props.selectedView.view&&this.props.selectedView.teamId===r.id&&!E,icon:n.createElement("div",{className:s.cx.h16.w16.flex.itemsCenter.justifyCenter.$},n.createElement(d.Ir,{size:{imgSize:d.DZ.SMALL,fallbackSize:d.DZ.XSMALL},fallbackDisplay:u.D.HIDDEN,team:{...this.props.team,imgUrl:this.props.team.imgUrl||void 0}})),text:n.createElement("div",{className:s.cx.flex.flexRow.overflowHidden.flexGrow1.itemsCenter.$},E?n.createElement(R.I,{className:V.kl,placeholderValue:r.name,submit:this.onRenameSubmit,cancel:this.onRenameCancel}):n.createElement(p.x,{truncate:!0},r.name),n.createElement(K,{team:r,dispatch:this.props.dispatch,permissionsState:this.props.permissionsState,selectedView:this.props.selectedView,shouldShowFileLimitBadge:y,eduVerificationNeeded:S})),badge:n.createElement(n.Fragment,null,T&&n.createElement(D.b,{team:this.props.team,trackingContextName:L.V4.FILE_BROWSER}),w&&n.createElement(U.ll,{team:this.props.team,trackingContextName:L.V4.FILE_BROWSER}))}),!(0,f.Gd)(this.props.currentUserOrgId)&&i&&i.id===r.id&&n.createElement(M.k,{team:{...i,canEdit:h,canEditTeamContents:m},onRenameClick:this.onTeamRenameClick,onChangeTeamIconClick:this.onClickChangeTeamIcon,teamRoleRequests:this.props.teamRoleRequests}),c&&n.createElement("span",{className:V.xq},n.createElement(P.Fu,{entity:{...r,imgUrl:r.imgUrl||void 0},entityType:C.py.TEAM,avatarEditorState:this.props.avatarEditorState,size:14,dispatch:this.props.dispatch})))}},W=H;function K(e){var t,r,o,s;let[d,u]=n.useState(!1),p=n.useRef(),g=(0,y.zy)(e.team.id);if(e.shouldShowFileLimitBadge)return n.createElement(k.bM,{className:V.kP,dataTooltipType:N.fR.TEXT,dataTooltip:(0,c.t)("team_list.your_team_is_over_the_starter_plan_s_file_limit"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});let f=e.permissionsState,E=(0,I.getRolesForUserAndTeam)(e.team.id,f),v=(0,I.hasMinRole)(E,A.V.EDITOR),w=f.user&&((null==(t=e.eduVerificationNeeded)?void 0:t.showReminder)||(null==(r=e.eduVerificationNeeded)?void 0:r.showAccessRestricted))&&v;if(w){let t=n.createElement(k.bM,{className:V.kP,dataTooltipType:N.fR.TEXT,dataTooltip:(0,c.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});return(null==(o=e.eduVerificationNeeded)?void 0:o.showReminder)&&(t=n.createElement(k.kU,{className:V.kP,dataTooltipType:N.fR.TEXT,dataTooltip:(0,c.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})),t}let C=null==(s=f.user)?void 0:s.id,O=t=>{e.dispatch((0,h.K4)({type:x.nY,data:{teamId:e.team.id,upsellSource:t}}))};if((0,b.cv)(e.team.id,e.permissionsState)){if(e.team.studentTeamAt&&(0,a.BZ)().edu_onboarding_grace_period)return null;let t=T.pl.canSeeProTrialExpiryUx(g);return(0,I.hasEditorRoleAccessOnTeam)(e.team.id,f)?t?n.createElement(_.Ui,{name:l.gZ.PRO_TRIAL_EXPIRED,properties:{userId:C,teamId:e.team.id,...T.pl.getTrackingProperties()}},n.createElement(_.XT,{type:"button",onClick:()=>O(S.V.PRO_TRIAL_UPSELL_MODAL),className:V.zR,trackingProperties:T.pl.getTrackingProperties("Badge Clicked")},n.createElement("span",{"data-tooltip-type":N.fR.SPECIAL,"data-tooltip":N._7.PRO_TRIAL_EXPIRED,"data-tooltip-show-right":!0,"data-tooltip-max-width":128,"data-tooltip-timeout-delay":50},n.createElement(l.Ct,{color:l.JV.WARNING,text:(0,c.t)("team_list.pro_trial_expired"),className:V.ll})))):n.createElement(_.Ui,{name:l.gZ.LOCKED,properties:{userId:C,teamId:e.team.id}},n.createElement(_.XT,{type:"button",onClick:()=>O(S.V.LOCKED_TEAM_BADGE),className:V.zR,trackingProperties:{text:"Badge Clicked"}},n.createElement(l.Ct,{color:l.JV.WARNING,text:(0,c.t)("team_list.locked"),className:V.ll}))):t?n.createElement(_.Ui,{name:l.gZ.PRO_TRIAL_EXPIRED,properties:{userId:C,teamId:e.team.id,...T.pl.getTrackingProperties()}},n.createElement(l.Ct,{color:l.JV.WARNING,text:(0,c.t)("team_list.pro_trial_expired"),className:V.ll})):n.createElement(l.Ct,{color:l.JV.WARNING,text:(0,c.t)("team_list.locked"),className:V.R0})}return g&&T.pl.canSeeProTrialUx(g)?n.createElement(_.Ui,{name:l.gZ.PRO_TRIAL,properties:{userId:C,teamId:e.team.id,...T.pl.getTrackingProperties()}},n.createElement(_.XT,{type:"button",onClick:()=>O(S.V.PRO_TRIAL_UPSELL_MODAL),className:V.zR,trackingProperties:T.pl.getTrackingProperties("Badge Clicked")},n.createElement("span",{"data-tooltip-type":N.fR.SPECIAL,"data-tooltip":N._7.PRO_TRIAL,"data-tooltip-pro-trials-days-left":g.daysLeft,"data-tooltip-show-right":!0,"data-tooltip-max-width":195,"data-tooltip-timeout-delay":50},n.createElement(F.d,null)))):!(0,b.gP)(e.team)&&(0,I.hasEditorRoleAccessOnTeam)(e.team.id,f)?n.createElement("button",{onClick:t=>{t.stopPropagation(),e.dispatch(m.g(e.team.id)),O(S.V.STARTER_TEAM_BADGE),(0,i.L9)("Starter Team Badge Clicked",{userId:C,teamId:e.team.id})},onMouseEnter:()=>{d||(p.current=setTimeout(()=>{(0,i.L9)("Starter Team Badge Viewed",{userId:C,teamId:e.team.id}),u(!0)},1e3))},onMouseLeave:()=>{clearTimeout(p.current)},className:V.zR},n.createElement(l.Ct,{color:l.JV.INFORMATIONAL,text:(0,c.t)("team_list.free"),className:V.OH})):null}W.displayName="TeamLink"},898844:(e,t,r)=>{r.d(t,{g:()=>o,t:()=>a});var n,i,a=((n=a||{}).BLUE="blue",n.WHITE="white",n),o=((i=o||{}).PRO_TRIALS_ENTRY="Pro Trials Entry",i.PRO_TRIALS_UPGRADE="Pro Trials Upgrade",i.EDU_EXPIRY="EDU Expiry",i.EDU_UPGRADE="EDU Upgrade",i.JAMBOARD_OFFER_NUDGE="Jamboard Offer Nudge",i.JAMBOARD_OFFER_UPGRADE="Jamboard Offer Upgrade",i.ORG_UPGRADE="Org Upgrade",i.SINGLE_EDITOR_TEAM_COPY_VARIANT="Single Editor Team Copy Variant",i.UNIVERSAL="Universal",i)},997025:(e,t,r)=>{r.d(t,{aF:()=>N});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(448501),s=r(926416),c=r(716250),d=r(519781),u=r(618723),p=r(714288),m=r(782051),h=r(313653),_=r(970740),g=r(721127),f=r(329660),E=r(134e3),y=r(686246),v=r(326714),b=r(291904),I=r(505468),T=r(236750),w=r(209467),S=r(217192),C=r(56400);class O extends n.PureComponent{constructor(e){super(e),this.hide=()=>{this.props.dispatch(g.hV()),this.props.onHide&&this.props.onHide()},this.onCreateTokenSuccess=(e,t)=>{this.props.onSubmit(e,t,e=>this.setState({error:e})).then(e=>{e&&this.hide(),this.setState({pendingPut:!1})})},this.onSubmitCardAndAddress=e=>{if(this.setState({error:null}),e&&e.preventDefault(),!this.state.cardEl)return;this.setState({pendingPut:!0});let t="An error occurred while reading your card.";(0,y.V3)(this.state.cardEl).then(e=>{if(e.error)this.props.dispatch(h.l.error(e.error.message||t)),this.setState({pendingPut:!1});else if(e&&e.token){if((0,c.BZ)().stripe_3ds_change_payment)return(0,y.B1)(e.token.id,this.props.estimatedChargeCents,this.props.currency||"usd").then(e=>{this.onCreateTokenSuccess({setup_intent:e},this.state.address)});this.onCreateTokenSuccess({token:e.token},this.state.address)}else this.props.dispatch(h.l.error("Sorry, we're unable to change your payment source. Refresh and try again."))}).catch(e=>{var r;this.props.dispatch(h.l.error((null==(r=e.data)?void 0:r.message)||e.message||t)),this.setState({pendingPut:!1})})},this.state={address:(0,v.oX)(e.defaultCountry),cardEl:null,pendingPut:!1,error:null}}render(){return n.createElement(I.Rj,{hide:this.hide,size:464,className:C.EE},n.createElement("div",{className:C.Rf},n.createElement("div",{className:C.pC},n.createElement(_.Tx,{id:"change_payment.enter_credit_or_debit_card"})),n.createElement(d.PZ,{className:C.Ah,onClick:this.hide,innerText:"close"})),null!=this.state.error?n.createElement("div",{className:C.XX},n.createElement(p.f,{color:p.Z.ERROR,text:this.state.error})):null,n.createElement("form",{onSubmit:this.onSubmitCardAndAddress},n.createElement(w.g,{id:"change-payment-modal-form",cardId:"change-payment-modal-card",address:this.state.address,onCardReady:e=>this.setState({cardEl:e}),onAddressChange:e=>this.setState({address:e}),isCommunityCheckout:!1}),n.createElement("div",{className:C.UN},n.createElement("div",{className:C.bS}),n.createElement(u.RS,{tabIndex:0,type:"submit",disabled:this.state.pendingPut},n.createElement(_.Tx,{id:"change_payment.use_this_card"})))))}}function A({currency:e,isReactivating:t,estimatedChargeCents:r,defaultCountry:a,customerInfo:c,onHide:d}){let p=t?(0,_.t)("change_payment.success.successfully_reactivated_subscription"):(0,_.t)("change_payment.success.successfully_updated_your_payment_method"),{createPaymentElement:h,unmountPaymentElement:f,savePayment:y,address:v,updateAddress:b,paymentMethodType:I,error:w}=(0,E.uw)({setupIntentParams:{redirect_url:l.default.location.href,subtotal_estimate:r,currency:e,success_message:p},paymentFlowSource:E.E.PRO_CHANGE_PAYMENT,customerInfo:c,defaultCountry:a,currency:e}),[O,A]=n.useState(!1),[N,L]=n.useState(!1),[P,R]=n.useState(window.innerHeight),k=(0,i.I0)(),D=(null==w?void 0:w.code)===E.qo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,M=n.useCallback(()=>{k(g.hV()),d&&d()},[k,d]);(0,s.c)(({height:e})=>{R(e)});let F=async e=>{e&&e.preventDefault(),L(!0),await y(),L(!1)};return n.createElement(T.ge,{title:(0,_.t)("change_payment.enter_payment_method"),onClose:M,maxWidth:448,headerSize:"large"},n.createElement("div",{className:o()({[C.U3]:!O,[C.L$]:D})},n.createElement("form",{onSubmit:F},n.createElement("div",{className:C.Lk,style:{maxHeight:Math.min(P-49-65,652)}},n.createElement(S.R,{createPaymentElement:h,unmountPaymentElement:f,address:v,updateAddress:b,paymentMethodType:I,error:w,isCommunityCheckout:!1,paymentElementEventHandlers:{ready:()=>A(!0)}})),O&&!D&&n.createElement("div",{className:C.qP},N&&n.createElement(m.TK,{className:C.lY}),n.createElement(u.pJ,{onClick:M},n.createElement(_.Tx,{id:"change_payment.cancel"})),n.createElement(u.RS,{tabIndex:0,type:"submit",disabled:N},n.createElement(_.Tx,{id:"change_payment.save"})))),D&&n.createElement(u.pJ,{onClick:M},n.createElement(_.Tx,{id:"change_payment.close_window"}))))}O.displayName="ChangePaymentModal";let N=(0,b.Y3)(function(e){if(e.customerInfo.orgId&&!(0,c.BZ)().alt_payments_change_payment_org)return n.createElement(O,{...e});let t=(0,f.gI)(),r=t?A:O;return n.createElement(r,{...e})},"ChangePaymentModal")},60993:(e,t,r)=>{r.d(t,{s:()=>I});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(716250),s=r(669277),c=r(618723),d=r(714288),u=r(970740),p=r(721127),m=r(761767),h=r(291904),_=r(236750),g=r(167484),f=r(862610),E=r(230451),y=r(221001);function v(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let b=n.memo(function(e){var t,r,a;let h=(0,i.I0)(),{updateVatGstId:b}=e,I=!!(null==(t=e.org)?void 0:t.id),T=(0,s.mU)(f.OrgTaxIdView,{orgId:(null==(r=e.org)?void 0:r.id)||""},{enabled:I}),w=(0,s.mU)(f.TeamTaxIdView,{teamId:(null==(a=e.team)?void 0:a.id)||""},{enabled:!I}),S=I?T:w,C=v(I,S),O=null==C?void 0:C.taxIdVerificationStatus,[A,N]=n.useState(),[L,P]=n.useState(""),[R,k]=n.useState(""),[D,M]=n.useState(!1),[F,x]=n.useState({country:"",state:""}),[U,B]=n.useState(!1);n.useEffect(()=>{if(!U&&"loaded"===S.status){let e=v(I,S),t=e?(0,s.Wg)(e.taxInfo):null;P((null==e?void 0:e.vatGstId)||""),k((null==t?void 0:t.regionalVatGstId)||""),M((null==t?void 0:t.canUpdateRegionalVatGst)||!1),x({country:(null==t?void 0:t.country)||"",state:(null==t?void 0:t.state)||""}),B(!0)}},[I,S,U]);let V=()=>{h(p.hV())};return n.createElement(_.ge,{onClose:V,title:(0,u.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0},A&&n.createElement("div",{className:y.X,"data-testid":"change-vat-gst-id-error"},n.createElement(d.f,{color:d.Z.ERROR,rounded:!1,text:A})),(0,l.BZ)().tax_id_status_admin_ui&&O===m.v4.VERIFIED&&n.createElement("div",{"data-testid":"change-vat-gst-id-information"},n.createElement(d.f,{color:d.Z.INFORMATION,rounded:!1,text:(0,u.t)("change_vat_gst_id.tax_id_verification_succeeded")})),(0,l.BZ)().tax_id_status_admin_ui&&O===m.v4.UNVERIFIED&&n.createElement("div",{"data-testid":"change-vat-gst-id-warning"},n.createElement(d.f,{color:d.Z.WARNING,rounded:!1,text:(0,u.t)("change_vat_gst_id.tax_id_verification_failed")})),n.createElement("div",{className:E.yT},n.createElement("p",{className:y.W},n.createElement(u.Tx,{id:"change_vat_gst_id.description"})),n.createElement("form",{onSubmit:e=>{e.preventDefault();let t=D?R:"";b(L,e=>N(e),t).then(e=>{e&&V()})},"data-testid":"change-vat-form"},U&&n.createElement(g.Z,{onChange:P,country:F.country,vatId:L,isCommunityCheckout:!1}),D&&n.createElement(g.Z,{onChange:k,country:F.country,region:F.state,vatId:R,isCommunityCheckout:!1,variant:"regional"}),n.createElement("div",{className:o()(E.UN,E.kD)},n.createElement(c.RS,{className:E.iY,type:"submit",disabled:!U},n.createElement(u.Tx,{id:"change_vat_gst_id.save_id"}))))))}),I=(0,h.Y3)(b,"ChangeVatGstIdModal")},23640:(e,t,r)=>{r.d(t,{K:()=>A,k:()=>N});var n=r(652983),i=r(407908),a=r(172497),o=r(313653),l=r(970740),s=r(512512),c=r(111120),d=r(721127),u=r(963465),p=r(293269),m=r(870295),h=r(761767),_=r(733609),g=r(731436),f=r(220958),E=r(818709),y=r(239342),v=r(512169),b=r(108051),I=r(87794),T=r(272976),w=r(213104),S=r(164932),C=r(332224),O=r(213585);function A(){let e=(0,i.v9)(e=>(0,_.getPermissionsState)(e)),t=(0,i.v9)(e=>e.selectedView),r=(0,i.I0)();return({team:i,onRenameClick:v,onChangeTeamIconClick:A,teamRoleRequests:N})=>{let L=()=>{r(c.kp()),r(d.K4({type:T.Y,data:{teamId:i.id}}))},P=(0,p.FI)(r,i.id),R=e=>{r(d.K4({type:b.M_,data:{team:e}}))},k=(0,p.FI)(r,i.id,f.V.ADMIN),D=(0,p.FI)(r,i.id,f.V.OWNER),M=e=>{if(!N)return;let t=N[e.id].id;r(u.pn({requestId:t}))},F=e=>{r(d.K4({type:T.Y,data:{teamId:e.id}}))},x=()=>{r(c.kp());let e=!!i.org_id,t=e=>{r(d.K4({type:I.d,data:{team:i,subscriptionStatus:e}}))};e?t(!0):y.j.getSubscriptionStatus({teamId:i.id}).then(({data:e})=>{t(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{var t;(null==(t=e.data)?void 0:t.message)&&r(o.l.error(e.data.message))})},U=e.roles.byTeamId[i.id]||{},B=Object.keys(U).filter(e=>!U[e].pending).length,V=(0,_.canAdminTeam)(i.id,e),G=(null==i?void 0:i.org_access)===h.Zn.PUBLIC||B>1,H=(0,_.hasAdminRoleAccessOnTeam)(i.id,e),W=(0,_.isOrgUserExternallyRestricted)(e.user,e.currentUserOrgId),K=window.innerWidth<=(0,a.z)(C.Jbu),z=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,E.HB)(i.id,i.org_id);r(s.fB({url:e}))}}];return"search"===t.view&&i.org_id!==e.currentUserOrgId||(i.canEditTeamContents&&K&&!W&&z.push({displayText:(0,l.t)("file_browser.team.new_project"),callback:()=>{r((0,m.nw)({where:g.A4.FolderListView,team:{...i,canAdmin:V}}))}}),K&&z.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{r(d.K4({type:w.nB,data:{teamId:i.id,notifyOnSuccess:!0}}))}}),V&&z.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{r(c.kp()),v&&v(i)}}),V&&A&&z.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{r(c.kp()),A&&A(i)}}),z.push(...(()=>{let t=[];return((0,_.hasViewerRoleAccessOnTeam)(i.id,e)?G&&t.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:L}):i.org_id&&t.push({displayText:"",render:()=>n.createElement(S.O,{key:"main-cta",className:O.l,onBypassRequest:D,onJoin:P,onJoinRequest:R,onJoinAsAdmin:k,onLeave:F,onWithdrawRequestForTeam:M,team:i,useLinks:!0,isCardActive:!1})}),H&&t.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:x}),0===t.length)?[]:[{displayText:"",separator:!0},...t]})())),z}}function N({className:e,team:t,onRenameClick:r,onChangeTeamIconClick:a,teamRoleRequests:o}){var l;let s=(0,i.v9)(e=>e.dropdownShown),c=(0,i.I0)(),d=A(),u=d({team:t,onRenameClick:r,onChangeTeamIconClick:a,teamRoleRequests:o});return n.createElement(v.z,{className:e,items:u,parentRect:null==(l=null==s?void 0:s.data)?void 0:l.targetRect,showPoint:!1,lean:"right",dispatch:c,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},c,t)}})}},433517:(e,t,r)=>{r.d(t,{$k:()=>w,ID:()=>y,OM:()=>O,Qm:()=>A,W4:()=>T,XB:()=>N,mf:()=>S,uy:()=>C,wn:()=>I,zj:()=>v});var n=r(899063),i=r(600486),a=r(46347),o=r(716250),l=r(958189),s=r(902510),c=r(31642),d=r(961215),u=r(991273),p=r(722330),m=r(716215),h=r(883027),_=r(346451),g=r(347373);let f="team_feed",E=(e,t,r)=>{let n;let i=new Image;if(i.crossOrigin="anonymous",e.type===m.zc.NODE?n=(0,g.po)(e.image_url,i).then(async e=>{let n=new Image;if(n.crossOrigin="anonymous",!r)throw Error("Expected a oldNodeImageUrl value");let i=await (0,g.po)(r,n).then(e=>e.naturalWidth),a=e.naturalWidth/i;return t.state.zoom/=a,(0,g.Z9)(e,t.state)}):e.type===m.zc.IMAGE&&t.url&&(n=Promise.resolve(t.url)),!n)throw Error("Expected a previewImagePromise");return n.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let t=new Uint8Array(e),r=URL.createObjectURL(new Blob([t]));return(0,s.I)(f,t,"image/jpeg").then(({data:e})=>({data:e,localUrl:r}))}).then(({data:e,localUrl:r})=>({previewImageUrl:e.meta.url,localUrl:r,previewState:t.state}))},y=async(e,t,r,o)=>{let s;let c=t.find(e=>e.displayContentItem.type===m.zc.NODE||e.displayContentItem.type===m.zc.PROTOTYPE);if(c){let t=new l.B7;t.start();let n=await (0,p.A)(r,o,"",e);t.stop(),(0,i.L9)("Team Feed New Savepoint Created",{elapsedTimeMs:t.getElapsedTime()}),s=n.id}let d=t.map(e=>{switch(e.displayContentItem.type){case m.zc.NODE:return e.processedContentItem.then(t=>{let r;let a={...t,fileVersionId:s};e.preview&&(r=new l.B7).start();let o=e.preview?E(a,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0);return o.then(e=>{r&&(r.stop(),(0,i.L9)("Team Feed Preview Uploaded",{elapsedTimeMs:r.getElapsedTime()}));let t=void 0!==e?{...a,preview_image_url:e.previewImageUrl,backgroundColor:(0,n.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:a;return(0,m.jQ)(t)})});case m.zc.IMAGE:return e.processedContentItem.then(t=>{let r;e.preview&&(r=new l.B7).start();let a=e.preview?E(t,e.preview):Promise.resolve(void 0);return a.then(e=>{r&&(r.stop(),(0,i.L9)("Team Feed Preview Uploaded",{elapsedTimeMs:r.getElapsedTime()}));let a=void 0!==e?{...t,preview_image_url:e.previewImageUrl,backgroundColor:(0,n.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:t;return(0,m.jQ)(a)})});case m.zc.VIDEO:return e.processedContentItem.then(e=>(0,m.jQ)(e));case m.zc.PROTOTYPE:return e.processedContentItem.then(e=>(0,m.jQ)({...e,fileVersionId:s}));default:(0,a.vE)(e.displayContentItem)}});return await Promise.all(d)},v=(e,t,r)=>t.map(t=>{let r={type:m.zc.NODE,fileKey:e,fileVersionId:"",nodeId:t,image_url:"",isLoading:!0};return{displayContentItem:r,processedContentItem:Promise.resolve(r)}}),b=(e,t,r)=>{let n=h.L.getGenerateImageToken({orgId:r,tokenVersion:"2",fileKey:e});return n.then(r=>{let n=r.data.meta,i=(0,o.ZP)().api_cdn_url||(0,o.ZP)().api_url;return c.ZP.crossOriginGet(`${i}/v1/images/${e}`,{token:n,scale:g._7.toString(),ids:t.join(",")})})};function I(e){let[t,r]=d.plG.generateThumbnailForNode(e,g.ET.width,g.ET.height,1,{});return r}let T=async(e,t,r,n,a,o)=>{let s;let c=b(e,t,r);if(a)s=t.map(t=>({type:m.zc.NODE,fileKey:e,fileVersionId:"",nodeId:t,image_url:a[t],backgroundColor:o&&o[t]}));else{let r=new l.B7;r.start();let n=function(e,t){let r=t.map(t=>new Promise((r,n)=>{setTimeout(()=>{let n=I(t),i=new Blob([n]),a=URL.createObjectURL(i),o={type:m.zc.NODE,fileKey:e,fileVersionId:"",nodeId:t,image_url:a};r(o)},0)}));return r}(e,t);s=await Promise.all(n),r.stop(),(0,i.L9)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:t,elapsedTimeMs:r.getElapsedTime()})}return t.map((t,r)=>{let i=c.then(i=>{var a;let o=i.data.images;return{type:m.zc.NODE,fileKey:e,fileVersionId:"",nodeId:t,image_url:o[t],backgroundColor:(null==(a=s[r])?void 0:a.backgroundColor)??n}});return{nodeId:t,displayContentItem:s[r],processedContentItem:i}}).reduce((e,t)=>({...e,[t.nodeId]:t}),{})},w=(e,t)=>{let r={type:m.zc.IMAGE,...e},n=(0,u.sn)(e,f).then(e=>({type:m.zc.IMAGE,...e}));return{displayContentItem:r,processedContentItem:n,fileIdentifier:t}},S=(e,t,r,n)=>{let i={type:m.zc.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},a=(0,u.xd)(e,t,r,f).then(e=>({type:m.zc.VIDEO,...e}));return{displayContentItem:i,processedContentItem:a,fileIdentifier:n}},C=(e,t)=>{let r={...e,type:m.zc.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},n=b(e.fileKey,[e.startingNodeId],t).then(t=>(r.imageUrl=t.data.images[e.startingNodeId],r));return{displayContentItem:r,processedContentItem:n}},O=e=>{switch(e.displayContentItem.type){case m.zc.NODE:return;case m.zc.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case m.zc.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case m.zc.PROTOTYPE:return;default:(0,a.vE)(e.displayContentItem)}},A=(e,t)=>{let r=e.find(e=>e.type===m.zc.NODE),n=(null==r?void 0:r.mediumImageUrl)||(null==r?void 0:r.preview_image_url)||(null==r?void 0:r.image_url);if(n)return{thumbnail:n,padImage:!r.preview_image_url,thumbnailBackground:(0,_.L_)(r,t)};let i=e.find(e=>e.type===m.zc.PROTOTYPE),a=null==i?void 0:i.imageUrl;if(a)return{thumbnail:a,padImage:!1,thumbnailBackground:(0,_.L_)(i,t)};let o=e.find(e=>e.type===m.zc.IMAGE),l=(null==o?void 0:o.mediumImageUrl)||(null==o?void 0:o.preview_image_url)||(null==o?void 0:o.url);if(l)return{thumbnail:l,padImage:!(null==o?void 0:o.preview_image_url),thumbnailBackground:(0,_.L_)(o,t)};let s=e.find(e=>e.type===m.zc.VIDEO),c=null==s?void 0:s.coverImage;return c?{thumbnail:c,padImage:!1,thumbnailBackground:(0,_.L_)(s,t)}:{thumbnail:"",padImage:!1,thumbnailBackground:(0,_.L_)(null,t)}};function N(e){return!!((0,m.QT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}},937194:(e,t,r)=>{r.d(t,{$r:()=>ec,QN:()=>ed,gE:()=>en,o$:()=>er,og:()=>ea,rY:()=>eo,wu:()=>ep});var n,i,a=r(652983),o=r(407908),l=r(87608),s=r.n(l),c=r(600486),d=r(46347),u=r(969709),p=r(9247),m=r(716250),h=r(337167),_=r(810373),g=r(669277),f=r(388899),E=r(958189),y=r(680356),v=r(31642),b=r(618723),I=r(435613),T=r(212984),w=r(313653),S=r(970740),C=r(644383),O=r(547699),A=r(111120),N=r(721127),L=r(255301),P=r(322186),R=r(70918),k=r(761767),D=r(862610),M=r(991273),F=r(259162),x=r(346451),U=r(765096),B=r(716215),V=r(949506),G=r(291904),H=r(173095),W=r(505468),K=r(793430),z=r(275835),Z=r(782051),Y=r(433517),j=r(396093),$=r(436003),q=r(407108),X=r(213887),J=r(412310),Q=r(714607),ee=r(736744),et=r(23312);let er=(0,G.Y3)(function(e){let t=(0,o.I0)(),r=(0,P.Ng)(),n=ed(),i=a.useCallback(()=>{t(N.hV())},[t]),l=((null==r?void 0:r.name)&&a.createElement(S.Tx,{id:"fig_feed.post_to_org_feed",orgName:r.name}))??a.createElement(S.Tx,{id:"fig_feed.post_to_feed"});return a.createElement(K.nO,{header:a.createElement("div",{className:ee.X3},l,(0,m.BZ)().xr_debounce_beta_badging&&a.createElement($.v,null)),onClose:()=>n(i),maxWidth:K.$,disableFixedTop:!0,closeOnEsc:!0},a.createElement(ep,{nodeInfo:e.nodeInfo,uploadInfo:e.uploadInfo,prototypeInfo:e.prototypeInfo,pageBackgroundColor:e.pageBackgroundColor,onSubmitSuccess:e.onSubmitSuccess,entryPoint:e.entryPoint,lockedFileKey:e.lockedFileKey}))},"CreateFeedPostModal"),en=(0,G.Y3)(function(e){let t=(0,o.I0)(),r=a.useCallback(()=>{t(N.hV())},[t]),n=a.createElement(S.Tx,{id:"fig_feed.edit_post"}),i=(0,g.mU)(D.FeedPostWithDetails,{publicUuid:e.feedPostUuid},{enabled:!e.preloadedFeedPost&&!!e.feedPostUuid}),l=a.useMemo(()=>e.preloadedFeedPost?e.preloadedFeedPost:"loaded"===i.status?i.data.feedPost:null,[e.preloadedFeedPost,i]);return a.createElement(K.nO,{header:a.createElement("div",{className:ee.X3},n,(0,m.BZ)().xr_debounce_beta_badging&&a.createElement($.v,null)),onClose:r,maxWidth:K.$,disableFixedTop:!0,closeOnEsc:!0},l?a.createElement(em,{onSubmitSuccess:e.onSubmitSuccess,entryPoint:e.entryPoint,lockedFileKey:e.lockedFileKey,feedPost:l}):a.createElement("div",{className:ee.$6},a.createElement(Z.TK,{size:"large"})))},"EditFeedPostModal"),ei=r(527925);var ea=((n=ea||{}).CONTEXT_MENU="content_menu",n.SHARE="share",n.FEED_HEADER="feed_header",n),eo=((i=eo||{}).FEED="feed",i.FILE="file",i);let el=["content_menu","share"],es=e=>{switch(e.type){case U.Q7.MAX_UPLOADS_EXCEEDED:return(0,S.t)("fig_feed.too_many_content_items",e.params);case U.Q7.MAX_VIDEO_SIZE_EXCEEDED:return(0,S.t)("fig_feed.video_file_size_limit_MB",e.params);case U.Q7.MAX_IMAGE_SIZE_EXCEEDED:return(0,S.t)("fig_feed.image_file_size_limit_MB",e.params);case U.Q7.INVALID_FILE_TYPE:return(0,S.t)("fig_feed.unsupported_file_types_were_not_uploaded",e.params);case U.Q7.DUPLICATE_FILE_UPLOAD:return(0,S.t)("fig_feed.already_uploaded_items",e.params);case U.Q7.FAILED_TO_UPLOAD:return(0,S.t)("fig_feed.error_on_feed_post_creation",e.params);default:(0,d.vE)(e)}},ec=(0,h.cn)(!1);function ed(){let e=(0,h.Dv)(ec),t=(0,o.I0)();return a.useCallback(r=>{if(!e){r();return}t((0,N.K4)({type:eu,data:{onConfirm:r},showModalsBeneath:!0}))},[t,e])}let eu=(0,G.Y3)(function(e){let t=(0,o.I0)();return a.createElement(W.cV,{destructive:!0,confirmationTitle:a.createElement(S.Tx,{id:"fig_feed.discard_draft"}),confirmText:a.createElement(S.Tx,{id:"fig_feed.discard_draft"}),onConfirm:e.onConfirm,dispatch:t,popStack:!0,allowBackgroundPassThrough:!1},a.createElement(S.Tx,{id:"fig_feed.youll_lose_your_post_draft"}))},"PostConfirmDiscardDraftModal");function ep(e){var t,r;let n=(0,o.I0)(),i=(0,P.Ng)(),l=(0,R.xJ)(),[d,g]=(0,h.KO)(ec),[L,D]=a.useState(!1),[G,W]=a.useState(!0),[er,en]=a.useState(!1),[ea,eo]=a.useState(!1),[ed,ep]=a.useState((0,S.t)("fig_feed.title_input_placeholder")),em={id:(null==i?void 0:i.id)??"",type:k.fe.ORG,name:(null==i?void 0:i.name)??"",isPrivate:!1},[eh,e_]=a.useState(em),[eg,ef]=a.useState(em);a.useEffect(()=>{i&&V.l.getDefaultContainer({orgId:null==i?void 0:i.id}).then(({data:e})=>{if(e.meta){let t={id:e.meta.container_id,type:(0,q.X5)(e.meta.container_type),name:e.meta.container_name,isPrivate:e.meta.is_private};ef(t),e_(t)}})},[i]);let[eE,ey]=a.useState(e.nodeInfo??null),ev=e.setMinimized,eb=a.useCallback(e=>{ev&&ev(e)},[ev]),eI=(0,o.v9)(e=>e.modalShown),[eT,ew]=a.useState((0,y.k)()),[eS,eC]=a.useState(0),eO=a.useCallback(()=>{eK(""),eZ([]),eb(!0),en(!1),eD([]),ew((0,y.k)()),eC(0),ey(null)},[eb]),eA=a.useCallback(()=>{n((0,N.K4)({type:eu,data:{onConfirm:eO},showModalsBeneath:!0}))},[n,eO]),eN=()=>{ep(B.pw[Math.floor(Math.random()*B.pw.length)]())};a.useEffect(()=>{eN()},[]);let eL=e.pageBackgroundColor,eP=(null==eE?void 0:eE.fileKey)??(null==(t=e.prototypeInfo)?void 0:t.fileKey)??"";a.useEffect(()=>{let t={entryPoint:e.entryPoint};eP&&(t.fileKey=eP),(0,c.L9)("Team Feed Create Post Modal Opened",t)},[e.entryPoint,eP]);let eR=a.useCallback((e,t)=>{if(t){n(N.hV());return}let r={text:(0,S.t)("fig_feed.view_post"),action:()=>{n(A.YQ({url:(0,x.yS)(i.id,{uuid:e})}))}};n(C.R.enqueue({message:(0,S.t)("fig_feed.posted_to_org_feed",{orgName:i.name}),button:r})),n(N.hV())},[n,i]),[ek,eD]=a.useState([]),eM=a.useMemo(()=>new Set(ek.map(e=>e.displayContentItem.type===B.zc.NODE?e.displayContentItem.nodeId:null).filter(e=>null!==e)),[ek]);a.useEffect(()=>{(0,j.Y1)(eE,eM,eD,null==i?void 0:i.id,eL)},[eE,eM,eD,null==i?void 0:i.id,eL]);let eF=a.useRef(null);a.useEffect(()=>{let t=e.prototypeInfo;if(!(null==i?void 0:i.id)||!t||eF.current)return;let r=(0,Y.uy)(t,i.id);eF.current=r.displayContentItem,eD(e=>[...e.filter(e=>e.displayContentItem.type!==B.zc.PROTOTYPE),r])},[null==i?void 0:i.id,e.prototypeInfo]);let ex=a.useCallback(e=>{let t=(0,J.WN)(ek[eS].displayContentItem),r=e.findIndex(e=>(0,J.WN)(e)===t);eC(r);let n=[];e.forEach(e=>{let t=(0,J.WN)(e),r=ek.find(e=>(0,J.WN)(e.displayContentItem)===t);r?n.push(r):console.error("Expected to have a matchedPendingItem")}),eD(n)},[ek,eS]),eU=a.useCallback(e=>{eC(ek.findIndex(t=>(0,J.WN)(t.displayContentItem)===e))},[ek]),{setContentPreview:eB,snapshotStates:eV}=(0,j.JT)(ek,eD),{onSubmitSuccess:eG}=e,eH=a.useCallback((t,r)=>{v.ZP.post("/api/feed_posts",t).then(t=>{el.includes(e.entryPoint)?eR(t.data.meta.public_uuid,r):(eO(),eN()),r&&n(C.R.enqueue({message:(0,S.t)("fig_feed.post_submission_pending")})),eG&&eG(r)}).catch(()=>{n(w.l.error((0,S.t)("fig_feed.error_on_feed_post_creation"))),W(!1)})},[n,eR,eG,eO,e.entryPoint]),[eW,eK]=a.useState(""),[ez,eZ]=a.useState([]),eY=a.useMemo(()=>({library:new F.UH(i.id)}),[i]);a.useEffect(()=>{W(eW.trim().length>Q.Yq||(0,u.nV)(ez).length>Q.VA||0===ek.length)},[eW,ez,ek.length]),a.useEffect(()=>{let e=eW.trim().length>0||!(0,u.Cm)(ez);D(e||ek.length>0),g(e)},[ez,g,eW,ek.length]);let ej=e.lockedFileKey||(null==eE?void 0:eE.fileKey),e$=async t=>{let r=new E.B7;if(r.start(),(0,c.L9)("team_feed_onsubmit",{currentOrgPresent:!!i,submitDisabled:G},{logFromProber:!0}),!i||G)return;null==t||t.preventDefault(),W(!0);let a={description_meta:ez,org_id:i.id};a.background_color=eL;let o=(0,u.nV)(ez);a.content=await (0,Y.ID)(n,ek,eP,eW),(0,c.L9)("team_feed_content_awaited",{payloadContent:JSON.stringify(a.content)},{logFromProber:!0});let l=a.content.some(e=>e.pending);a.uuid=eT,eW?a.title=eW:a.title=o.length>0?o.slice(0,40)+"\u2026":(0,S.t)("fig_feed.untitled_post"),eh.id&&eh.type&&(a.container_id=eh.id,a.container_type=(0,q.kt)(eh.type)),ej&&(a.attached_file_key=ej),eH(a,l),r.stop(),(0,c.L9)("team_feed_click_to_post_latency",{elapsedTimeMs:r.getElapsedTime()},{forwardToDatadog:!0}),(0,c.L9)("Team Feed New Post Submitted",{fileKey:eP,entryPoint:e.entryPoint,text:o,numContentItems:a.content.length,contentItemTypes:a.content.map(e=>e.type),containerId:a.container_id,containerType:a.container_type,isCurrentDefaultContainer:a.container_id===eg.id&&a.container_type===eg.type},{forwardToDatadog:!0})},eq=a.useCallback((e,t)=>{if(!i)return;let r=Array.from(e);if(0===r.length)return;let a=(0,M.ll)(r,ek.length,B.H0,B.wD,e=>{n(C.R.enqueue({message:es(e)}))},ek.map(e=>e.fileIdentifier)),o=a.map(e=>{let t=(0,M.hn)(e);if(U.Rp.includes(e.type))return(0,Y.$k)(t,e);if(U.ZK.includes(e.type))return(0,Y.mf)(t,eT,i.id,e);throw Error("unexpected file type")}),l=void 0!==t?t:ek.length;eD(e=>[...e.slice(0,l),...o,...e.slice(l)]),eC(l)},[n,i,eT,ek]),eX=a.useCallback((e,t)=>()=>{var r;let n=(null==(r=e.current)?void 0:r.files)||null;null!==n&&0!==n.length&&(eq(n,t),eb(!1),e.current&&(e.current.value=""))},[eq,eb]),eJ=(0,p.D)(e.uploadInfo);a.useEffect(()=>{e.uploadInfo&&e.uploadInfo!==eJ&&(eb(!1),eq(e.uploadInfo))},[e.uploadInfo,eJ,eb,eq]);let eQ=a.useCallback(e=>{let t=Math.min(e,Math.max(0,ek.length-2)),r=ek[e];if((0,Y.OM)(r),eD(t=>t.filter((t,r)=>r!==e)),r.displayContentItem.type===B.zc.NODE){let e=r.displayContentItem.nodeId;ey(t=>{if(t){let r=t.nodeIds.filter(t=>t!==e),n=t.nodeThumbnails,i=n&&r.reduce((e,t)=>(e[t]=n[t],e),{});return{...t,nodeIds:r,nodeThumbnails:i}}return null})}eC(t)},[ek]),e0=a.useCallback((e,t)=>{eq(e.files,t),eo(!1)},[eq]),e1=a.useRef(null),e2=!!(null==(r=null==eE?void 0:eE.nodeIds)?void 0:r.length),{openPostFromFileModal:e3,attachedFileData:e4}=(0,j.IY)({setLinkedFileNodeInfo:ey,numUserContentItems:ek.length,hasNodeContent:e2,parentModalRef:e1,attachedFileKey:ej,lockedFileKey:e.lockedFileKey,currentOrgId:null==i?void 0:i.id}),e6=a.useCallback(()=>{let e=ek.map(e=>e.displayContentItem);return a.createElement(z.h,{className:s()(ee.AY,ea&&ee.Pr),isDragTarget:()=>!0,onTargetDragEnter:()=>eo(!0),onTargetDragLeave:()=>eo(!1),onTargetDrop:e=>e0(e)},a.createElement(J.rV,{contentItems:e,staticContent:!0,scrollable:!1,deleteItemAtIdx:er?void 0:eQ,pageBackgroundColor:eL,onReorderCallback:er?void 0:ex,shouldScrollToIndex:null,selectedIdx:eS,setSelectedIdx:eC,onFileInputChange:eX,setSelectedContent:eU,snapshotStates:eV,setContentPreview:eB,openPostFromFileModal:e3,attachedFile:e4,dragging:ea,mode:"create"}))},[eL,ea,ex,eQ,er,ek,e0,eS,eX,eU,eV,eB,e3,e4]),e8=a.useCallback(e=>{e.keyCode===_.sr.ESCAPE&&eb(!0)},[eb]),e9=a.useCallback(()=>{eI||(L&&(eK(e=>e.trim()),(0,u.Cm)(ez)&&eZ([])),eb(!0))},[ez,eb,eI,L]),e5=a.useCallback(()=>{e9(),n(N.hV())},[n,e9]),e7=a.createElement("div",{className:s()(ee.rM,d&&ee.Vd),onKeyDown:e.disabled?f.ZT:e8,role:"textbox",tabIndex:0,onClick:()=>!e.disabled&&eb(!1)},l&&a.createElement("div",{className:ee.O_},a.createElement(O.Yt,{user:l,size:O.DZ.LARGE})),a.createElement("div",{className:ee.Fo},a.createElement("div",{className:ee.iZ},a.createElement("div",{className:ee.qb},a.createElement("div",{className:ee.N3},eW||ed," ",eW&&a.createElement("span",{className:ee.tU},(0,S.t)("fig_feed.draft")))),a.createElement("div",{className:ee.SJ},a.createElement(b.DF,{disabled:!0,dataTestId:"feed-post-post"},a.createElement(S.Tx,{id:"fig_feed.post"})))))),te=a.createElement("div",{className:ee.YW,onKeyDown:e8,role:"textbox",tabIndex:0,onClick:()=>eb(!1),ref:e1},a.createElement("div",{className:ee.nw},e6(),i&&l?a.createElement("div",{className:ee.fv},a.createElement(Q.vZ,{fallback:null,errorFallback:null,user:l,currentOrgId:i.id,autofocus:!0,mentionables:eY,onSubmit:G?void 0:e$,submitOnEnter:!1,hideSubmitButton:!0,description:ez,updateDescription:eZ,title:eW,updateTitle:eK,displayDecoratorsDownwards:!0,minimized:e.minimized,readOnly:er,editableTypeaheadClass:et.WJ,openPostFromFileModal:()=>e3({skipFrameSelection:!e2}),fileData:e4,lockFileAddition:ek.length>=B.H0,parentRef:e1,canUnlinkFile:!e2&&!e.lockedFileKey,unlinkFile:()=>ey(null)})):null),a.createElement("div",{className:ee.J0},a.createElement("div",{className:ee.bS},a.createElement("div",{className:T.cx.flex.itemsCenter.$},a.createElement(S.Tx,{id:"fig_feed.post_to"}),a.createElement(X.zL,{dropdownId:X.cj,orgId:i.id,defaultContainer:eg,selectedContainer:eh,onContainerSelect:e=>{e_(e),n(A.kp())},onSetDefaultContainer:ef,hideAllSpaces:!0,showMemberCount:!0,showUnusedContainers:!0},a.createElement("div",{className:T.cx.flex.justifyCenter.itemsCenter.ml8.pr4.pl8.h32.maxW300.borderBox.bRadius5.colorBorder.b1.bSolid.overflowHidden.selectNone.$,"data-onboarding-key":"feed-audience-container-selection-nux"},a.createElement(X.__,{option:eh,defaultContainer:eg,showMemberCount:!1}),a.createElement("div",{className:ee.Ud},a.createElement(I.n,{svg:ei})))),a.createElement(H.u,null))),a.createElement("div",{className:ee.qP},!el.includes(e.entryPoint)&&(L?a.createElement(b.PL,{onClick:e=>{e.stopPropagation(),eA()}},a.createElement(S.Tx,{id:"fig_feed.discard_draft"})):a.createElement(b.PL,{onClick:e=>{e.stopPropagation(),eO()}},a.createElement(S.Tx,{id:"general.cancel"}))),a.createElement(b.DF,{onClick:e=>{if(!er)return en(!0),e$(e).finally(()=>{en(!1)})},disabled:G,dataTestId:"feed-post-post",className:er?ee.tp:ee.tB},er&&a.createElement("div",{className:ee.Jf},a.createElement(Z.TK,{shouldMatchTextColor:!0,size:"medium"})),er?a.createElement(S.Tx,{id:"fig_feed.posting"}):a.createElement(S.Tx,{id:"fig_feed.post"}))))),tt=((null==i?void 0:i.name)&&a.createElement(S.Tx,{id:"fig_feed.post_to_org_feed",orgName:i.name}))??a.createElement(S.Tx,{id:"fig_feed.post_to_feed"});return i&&l&&(0,m.BZ)().xr_debounce_threshold?"feed_header"===e.entryPoint?a.createElement(a.Fragment,null,e7,!e.minimized&&a.createElement(K.nO,{header:a.createElement("div",{className:ee.X3},tt," ",(0,m.BZ)().xr_debounce_beta_badging&&a.createElement($.v,null)),onClose:e5,maxWidth:K.$,disableFixedTop:!0},te)):te:null}function em(e){var t;let r=(0,o.I0)(),n=(0,P.Ng)(),i=(0,R.xJ)(),[l,d]=a.useState(!0),[p,h]=a.useState(!1),[g,f]=a.useState(!1),E=(0,q.a$)(e.feedPost),y=e.feedPost.publicUuid,I=a.useMemo(()=>e.feedPost.content.map(e=>JSON.parse(e)),[e.feedPost]),[T,O]=a.useState(I.reduce((e,t)=>{if(t.type!==B.zc.NODE)return e;e.fileKey=t.fileKey;let r=t.nodeId;return e.nodeIds.push(r),e},{fileKey:e.feedPost.fileKey||"",nodeIds:[]})),k=a.useMemo(()=>{let e=I.find(e=>e.type===B.zc.PROTOTYPE);return e?{fileKey:e.fileKey,pageId:e.pageId,startingNodeId:e.startingNodeId}:null},[I]),[D,V]=a.useState(0),G=a.useCallback(()=>{r(N.hV())},[r]),H=a.useCallback(()=>{r((0,N.K4)({type:eu,data:{onConfirm:G},showModalsBeneath:!0}))},[r,G]),W=e.lockedFileKey||(null==T?void 0:T.fileKey)||(null==k?void 0:k.fileKey);a.useEffect(()=>{let t={entryPoint:e.entryPoint};W&&(t.fileKey=W),(0,c.L9)("Team Feed Edit Post Modal Opened",t)},[e.entryPoint,W]);let K=a.useCallback((e,t,i)=>{if(t){r(N.hV());return}let a={text:(0,S.t)("fig_feed.view_post"),action:()=>{r(A.YQ({url:(0,x.yS)(n.id,{uuid:e})}))}};r(C.R.enqueue({message:(0,S.t)("fig_feed.post_edited"),button:i?a:void 0})),r(N.hV())},[r,n]),[$,X]=a.useState(I.map(e=>{let t=(0,Y.XB)(e),r=(0,B.QT)(e)&&!!e.hasPreviousEditPreview,n={...e,copiedToS3:e.type===B.zc.NODE||e.type===B.zc.PROTOTYPE,shouldBlockEditPreview:r&&!t};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})),er=a.useMemo(()=>new Set($.map(e=>e.displayContentItem.type===B.zc.NODE?e.displayContentItem.nodeId:null).filter(e=>null!==e)),[$]);a.useEffect(()=>{(0,j.Y1)(T,er,X,null==n?void 0:n.id)},[T,er,X,null==n?void 0:n.id]);let en=a.useCallback(e=>{let t=(0,J.WN)($[D].displayContentItem),r=e.findIndex(e=>(0,J.WN)(e)===t);V(r);let n=[];e.forEach(e=>{let t=(0,J.WN)(e),r=$.find(e=>(0,J.WN)(e.displayContentItem)===t);r?n.push(r):console.error("Expected to have a matchedPendingItem")}),X(n)},[$,D]),ei=a.useCallback(e=>{V($.findIndex(t=>(0,J.WN)(t.displayContentItem)===e))},[$]),{setContentPreview:ea,snapshotStates:eo}=(0,j.JT)($,X),{onSubmitSuccess:el}=e,ec=a.useCallback((t,n)=>{v.ZP.put(`/api/feed_posts/${y}`,t).then(t=>{K(t.data.meta.public_uuid,n,"file"===e.entryPoint),n&&r(C.R.enqueue({message:(0,S.t)("fig_feed.post_submission_pending")})),el&&el(n)}).catch(()=>{r(w.l.error((0,S.t)("fig_feed.error_on_feed_post_creation"))),d(!1)})},[r,K,el,y,e.entryPoint]),[ed,ep]=a.useState(e.feedPost.title||""),[em,eh]=a.useState((0,L.Qi)(e.feedPost.descriptionMeta)),e_=a.useMemo(()=>({library:new F.UH(n.id)}),[n]);a.useEffect(()=>{d(ed.trim().length>Q.Yq||(0,u.nV)(em).length>Q.VA||0===$.length)},[ed,em,$.length]);let eg=async t=>{if(!n||l)return;null==t||t.preventDefault(),d(!0);let i={description_meta:em,org_id:n.id},a=(0,u.nV)(em);i.content=await (0,Y.ID)(r,$,W??"",ed),(0,c.L9)("team_feed_content_awaited",{payloadContent:JSON.stringify(i.content)},{logFromProber:!0});let o=i.content.some(e=>e.pending);ed?i.title=ed:i.title=a.length>0?a.slice(0,40)+"\u2026":(0,S.t)("fig_feed.untitled_post"),W&&(i.attached_file_key=W),ec(i,o),(0,c.L9)("Team Feed Post Edited",{fileKey:W,entryPoint:e.entryPoint,text:a,numContentItems:i.content.length,contentItemTypes:i.content.map(e=>e.type)},{forwardToDatadog:!0})},ef=a.useCallback((e,t)=>{if(!n)return;let i=Array.from(e);if(0===i.length)return;let a=(0,M.ll)(i,$.length,B.H0,B.wD,e=>{r(C.R.enqueue({message:es(e)}))},$.map(e=>e.fileIdentifier)),o=a.map(e=>{let t=(0,M.hn)(e);if(U.Rp.includes(e.type))return(0,Y.$k)(t,e);if(U.ZK.includes(e.type))return(0,Y.mf)(t,y,n.id,e);throw Error("unexpected file type")}),l=void 0!==t?t:$.length;X(e=>[...e.slice(0,l),...o,...e.slice(l)]),V(l)},[r,n,y,$]),eE=a.useCallback((e,t)=>()=>{var r;let n=(null==(r=e.current)?void 0:r.files)||null;null!==n&&0!==n.length&&(ef(n,t),e.current&&(e.current.value=""))},[ef]),ey=a.useCallback(e=>{let t=Math.min(e,Math.max(0,$.length-2)),r=$[e];if((0,Y.OM)(r),X(t=>t.filter((t,r)=>r!==e)),r.displayContentItem.type===B.zc.NODE){let e=r.displayContentItem.nodeId;O(t=>{if(t){let r=t.nodeIds.filter(t=>t!==e),n=t.nodeThumbnails,i=n&&r.reduce((e,t)=>(e[t]=n[t],e),{});return{...t,nodeIds:r,nodeThumbnails:i}}return null})}V(t)},[$]),ev=a.useCallback((e,t)=>{ef(e.files,t),f(!1)},[ef]),eb=a.useRef(null),eI=!!(null==(t=null==T?void 0:T.nodeIds)?void 0:t.length),{openPostFromFileModal:eT,attachedFileData:ew}=(0,j.IY)({setLinkedFileNodeInfo:O,numUserContentItems:$.length,hasNodeContent:eI,parentModalRef:eb,attachedFileKey:W,lockedFileKey:e.lockedFileKey,currentOrgId:null==n?void 0:n.id}),eS=a.useCallback(()=>{let t=$.map(e=>e.displayContentItem);return a.createElement(z.h,{className:s()(ee.AY,g&&ee.Pr),isDragTarget:()=>!0,onTargetDragEnter:()=>f(!0),onTargetDragLeave:()=>f(!1),onTargetDrop:e=>ev(e)},a.createElement(J.rV,{contentItems:t,staticContent:!0,scrollable:!1,deleteItemAtIdx:p?void 0:ey,pageBackgroundColor:e.feedPost.backgroundColor??void 0,onReorderCallback:p?void 0:en,shouldScrollToIndex:null,selectedIdx:D,setSelectedIdx:V,onFileInputChange:eE,setSelectedContent:ei,snapshotStates:eo,setContentPreview:ea,openPostFromFileModal:eT,attachedFile:ew,dragging:g,mode:"edit"}))},[e.feedPost,g,en,ey,p,$,ev,D,eE,ei,eo,ea,eT,ew]),eC=a.useCallback(e=>{e.keyCode===_.sr.ESCAPE&&G()},[G]);return n&&i&&(0,m.BZ)().xr_debounce_threshold?a.createElement("div",{className:ee.YW,onKeyDown:eC,role:"textbox",tabIndex:0,ref:eb},a.createElement("div",{className:ee.nw},eS(),n&&i?a.createElement("div",{className:ee.fv},a.createElement(Q.vZ,{fallback:null,errorFallback:null,user:i,currentOrgId:n.id,autofocus:!0,mentionables:e_,onSubmit:l?void 0:eg,submitOnEnter:!1,hideSubmitButton:!0,description:em,updateDescription:eh,title:ed,updateTitle:ep,displayDecoratorsDownwards:!0,minimized:!1,readOnly:p,editableTypeaheadClass:et.WJ,openPostFromFileModal:()=>eT({skipFrameSelection:!eI}),fileData:ew,lockFileAddition:$.length>=B.H0,parentRef:eb,canUnlinkFile:!eI&&!e.lockedFileKey,unlinkFile:()=>O(null)})):null),a.createElement("div",{className:ee.J0},a.createElement("div",{className:ee.bS},a.createElement("div",{className:ee.A8},a.createElement("div",{className:ee.QN},a.createElement(S.Tx,{id:"fig_feed.post_to"})),a.createElement("div",{className:ee.Ng},a.createElement("div",{className:ee.TI},a.createElement(q.ZP,{containerInfo:E,withoutTooltip:!0}),a.createElement("div",{className:ee.Kx},E.name))))),a.createElement("div",{className:ee.qP},a.createElement(b.PL,{onClick:e=>{e.stopPropagation(),H()}},a.createElement(S.Tx,{id:"fig_feed.discard_edit"})),a.createElement(b.DF,{onClick:e=>{if(!p)return h(!0),eg(e).finally(()=>{h(!1)})},disabled:l,dataTestId:"feed-post-post",className:p?ee.tp:ee.tB},p&&a.createElement("div",{className:ee.Jf},a.createElement(Z.TK,{shouldMatchTextColor:!0,size:"medium"})),p?a.createElement(S.Tx,{id:"fig_feed.saving"}):a.createElement(S.Tx,{id:"general.save"}))))):null}},92714:(e,t,r)=>{r.d(t,{Rh:()=>A,Eb:()=>b,K8:()=>v,cL:()=>E});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(458169),c=r(970740),d=r(177303),u=r(402757),p=r(414413),m=r(496417),h=r(809377),_=r(225468),g=r(482919),f=r(281595),E=((n=E||{}).ActualSize="Actual Size",n.Default="Default",n.Fit="Fit to Screen",n.FitWidth="Fit Width",n.FillScreen="Fill Screen",n);let y={"Actual Size":()=>(0,c.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,c.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,c.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,c.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,c.t)("viewer.options_menu.fit_width")},v=Object.keys(E),b="Default";class I extends g.Ph{}class T extends g.Wx{}let w={format:e=>e in E?y[E[e]]():(0,c.t)("fig_feed.zoom_pan_preset.custom")};function S({reportWidth:e,inputProps:t}){let r=i.useRef(null),n=t.property;return i.useLayoutEffect(()=>{let t=r.current;if(t){let r=t.getBoundingClientRect().width;e(n,r)}return()=>e(n,void 0)},[r,n,e]),i.createElement("div",{className:f.G3,"aria-hidden":!0},i.createElement(g.ld,{...t,containerClassName:l()(t.containerClassName,f.Pf),ref:r}))}function C({reportWidth:e,value:t,optionProps:r}){let n=i.useRef(null);return i.useLayoutEffect(()=>{var r;let i=null==(r=n.current)?void 0:r.getElement();if(i){let r=i.getBoundingClientRect().width;e(t,r)}return()=>e(t,void 0)},[n,t,e]),i.createElement("div",{className:f.G3,"aria-hidden":!0},i.createElement(T,{...r,additionalStylesClassName:l()(r.additionalStylesClassName,f.gW),ref:n}))}function O(e){let[t,r]=i.useState(void 0),[n,o]=i.useState(void 0),l=(0,a.I0)(),s=(0,h.L)(),d=i.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--qRA5x text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:w}),[]),p=i.useMemo(()=>i.createElement(u.i,{setMaxWidth:r,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,v.map(t=>i.createElement(S,{key:t,reportWidth:e,inputProps:{...d,property:t}})))}),[d]),g=i.useMemo(()=>i.createElement(u.i,{setMaxWidth:o,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,v.map(t=>i.createElement(C,{key:t,value:t,reportWidth:e,optionProps:{height:32,value:t,formattedValue:w.format(t)}})))}),[]);return i.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--G1TQT","data-tooltip-show-above":!0,"data-tooltip-type":_.fR.TEXT,"data-tooltip":(0,c.t)("fig_feed.zoom_pan_preset.tooltip")},g,p,i.createElement(I,{...d,inputWidth:t,property:e.value,onChange:t=>{e.setZoomPanPreset(t)},chevronClassName:"edit_preview_toolbar--chevron--9rq56",dropdownClassName:m.Hy,id:`feedZoomPanPresetControl:${e.id}`,blurOnChange:!0,dropdownAlignment:"right",recordingKey:"feedZoomPanPreset",dispatch:l,dropdownShown:s,targetDomNode:document.body,dropdownWidth:n,preventHiddenInput:"always",ariaLabel:(0,c.t)("fig_feed.zoom_pan_preset.tooltip"),role:"combobox"},v.map(e=>i.createElement(T,{key:e,value:e,fullWidth:!0}))))}function A({id:e,backgroundColor:t,setBackgroundColor:r,zoomPanPreset:n,setZoomPanPreset:a,onResetCallback:o,applyToAllCallback:u}){let m=!(n in E);return i.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--dkd0w"},i.createElement(d.c4,{value:t,onColorChange:r,recordingKey:"teamFeedEditablePreviewBackgroundColorControl",paletteType:"base",buttonCaretType:"down",buttonSize:"small",optionSize:"medium",positionX:()=>0,positionY:(e,t)=>(0,s.b$)(e,t,4),dropperDisabled:!0,inlineButtonTooltip:(0,c.t)("fig_feed.background_color.tooltip"),onlyShowCustomColorPopover:!0}),i.createElement(p.Z0,null),i.createElement(O,{id:e,value:n,setZoomPanPreset:a}),!!u&&i.createElement(i.Fragment,null,i.createElement(p.Z0,null),i.createElement(p.zx,{tooltip:(0,c.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await u()},disabled:m,recordingKey:"teamFeedResetPreview"},i.createElement("span",{className:l()({"edit_preview_toolbar--buttonDisabled---xrWn":m})},(0,c.t)("fig_feed.apply_to_all")))),o&&i.createElement(i.Fragment,null,i.createElement(p.Z0,null),i.createElement(p.zx,{tooltip:(0,c.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:o,recordingKey:"teamFeedResetPreview"},i.createElement("span",null,(0,c.t)("fig_feed.reset")))))}},213887:(e,t,r)=>{r.d(t,{zL:()=>Y,__:()=>Z,cj:()=>G,f8:()=>$});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(600486),c=r(768358),d=r(19516),u=r(388899),p=r(198348),m=r(518484),h=r(594619),_=r(293351),g=r(782051),f=r(85808),E=r(654230),y=r(435613);function v(e){let{tabs:t,selectedTabKey:r,onTabClick:n}=e;return i.createElement("div",{className:"tab_group--tabs--ChhR5"},t.map(e=>i.createElement("button",{key:e.key,className:e.key===r?"tab_group--selectedTab--dwZ1b tab_group--tab--j43X-":"tab_group--tab--j43X-",onClick:()=>n(e.key)},e.label)))}var b=r(212984),I=r(970740),T=r(644383),w=r(111120),S=r(41937);class C{constructor(e,t={list:S.R.getFeedPostCreators,search:S.R.searchFeedPostCreators}){this.api=t,this.orgId=e}async list(){try{let{data:{meta:e}}=await this.api.list({orgId:this.orgId});return e}catch(e){console.error("An error ocurred while trying to fetch feed post creator contacts.",e)}return[]}async search(e){try{let{data:{meta:t}}=await this.api.search({query:e,orgId:this.orgId});return t}catch(e){console.error("An error ocurred while searching for feed post creator contacts.",e)}return[]}maxResultsLength(){return 100}}var O=r(70918),A=r(716215),N=r(225468),L=r(949506),P=r(989353),R=r(13155),k=r(157607),D=r(407108),M=r(779593);let F=r(527925),x=r(328630),U=r(244573),B=r(273799),V="feed-user-filter-dropdown",G="feed-container-creation-dropdown";var H=((n=H||{})[n.DEFAULT=0]="DEFAULT",n[n.LIGHT=1]="LIGHT",n);function W(){return i.createElement("div",{className:M.xQ})}function K(e){let{setSelectedOption:t}=e,r=i.useRef(null),n=i.useRef(""),[a,o]=i.useState(""),[l,s]=i.useState([]),[d,u]=i.useState(!1),{search:p}=e,v=i.useCallback(async e=>{try{u(!0);let t=await p(e);s(t)}catch(e){console.error(e)}finally{u(!1)}},[p]);i.useEffect(()=>{a&&n.current!==a&&v(a),n.current=a},[a,v]);let b=(0,c.D)(o,250),T=i.useCallback(()=>o(""),[]),w=i.useCallback(e=>{b(e)},[b]),{searchInputRef:S,onMouseDown:C,onMouseUp:O,onBlur:A,onSearchChange:N,onSearchKeyDown:L,onClearSearchClick:D,onClearSearchKeyDown:F}=(0,E.Hz)({query:a,focusOnMount:!1,clearSearch:T,onChange:w},r),B=i.useCallback(e=>{"Enter"===e.key&&F(e),e.stopPropagation()},[F]),V=i.useCallback(e=>()=>{t(e)},[t]);return i.createElement(P.n,{dropdownId:e.dropdownId,renderDropdown:t=>{let r=i.createElement("div",{className:M.X6,key:"search-bar"},i.createElement(y.n,{className:M.RL,svg:U}),i.createElement(_.Q,{className:M.eK,ref:S,placeholder:e.searchPlaceholder,value:a,onChange:N,onKeyDown:L,onMouseDown:C,onMouseUp:O,onBlur:A,style:{width:"100%"},autoFocus:!0}),!!a&&i.createElement("button",{className:M.Ah,onClick:D,onKeyDown:B},i.createElement(y.n,{svg:x}))),n=a?l:e.initialOptions,o=(t,r,n,a)=>{switch(t.optionType){case"no_matching_results":return i.createElement("div",{key:"no-matching-results",className:M.Br},i.createElement(I.Tx,{id:"fig_feed.no_matching_results"}));case"group":let l=`${r}-group`;return i.createElement(i.Fragment,{key:`${r}-frag`},t.label&&i.createElement("div",{className:M.zI},t.label),t.options.map((e,t)=>o(e,t,l)),!a&&i.createElement(W,null));case"option":return i.createElement(h.j.CheckableOption,{key:`${r}-${t.id}${n?`-${n}`:""}`,className:M.es,onClick:V(t),checked:e.selectedOption===t.id},t.display)}},s=i.createElement(f.l,{maxHeight:e.maxContentHeight,hideScrollbar:!0},e.defaultDisplay&&i.createElement(i.Fragment,null,i.createElement(h.j.CheckableOption,{className:M.es,onClick:V(null),checked:null===e.selectedOption},e.defaultDisplay),i.createElement(W,null)),d?i.createElement("div",{className:M.M8},i.createElement(g.TK,{size:"small"})):n.map((e,t)=>o(e,t,void 0,t===n.length-1))),c=i.createElement(i.Fragment,null,r,i.createElement(W,{key:"initial-separator"}),s);return 1===e.type?i.createElement(k.My,{title:"",headerSize:"hidden",initialConstraints:{x:"left",y:"bottom"},initialPosition:new m.OW(t.x,window.innerHeight-t.bottom),initialWidth:300,maxWidth:300,dragHeaderOnly:!1,containerClassName:M.qj,frameStyle:{borderRadius:"4px"},disableDragging:!0},i.createElement("div",{className:M.EP},c)):i.createElement(R.AQ,{showPoint:!0,targetRect:t,lean:"left",minWidth:300,maxWidth:300,disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement("div",{className:M.ds},c))},hideOverflow:!0},e.children)}let z=(0,p.PP)();function Z(e){let t=e.defaultContainer&&e.option.id===e.defaultContainer.id&&e.option.type===e.defaultContainer.type,r=e.defaultContainer&&!t&&e.setDefaultContainer,n=e.showSecretTeamTooltip&&e.option.isPrivate?(0,I.t)("fig_feed.secret_team_tooltip",{containerName:e.option.name}):void 0;return i.createElement("div",{className:M.pD},i.createElement("div",{className:M.dc,"data-tooltip-type":N.fR.TEXT,"data-tooltip":n},i.createElement(D.ZP,{containerInfo:{type:e.option.type},withoutTooltip:!0}),i.createElement("div",{className:M.Ip},i.createElement("div",{className:M.ah},e.option.name),e.option.isPrivate&&i.createElement(y.n,{className:M.E$,svg:B}),t&&i.createElement("div",{className:M.cI},i.createElement(I.Tx,{id:"fig_feed.default_in_parens"})))),e.showMemberCount&&null!=e.option.memberCount&&i.createElement("div",{className:l()(M.m1)},i.createElement("div",{className:l()(M._n,{[M.ax]:r})},i.createElement(I.Tx,{id:"fig_feed.num_members",numMembers:e.option.memberCount??0})),r&&i.createElement("div",{className:M.mp,onMouseDown:t=>{var r;t.stopPropagation(),null==(r=e.setDefaultContainer)||r.call(e,e.option)},role:"button",tabIndex:0},i.createElement(I.Tx,{id:"fig_feed.set_as_default"}))))}function Y(e){var t;let r=(0,a.I0)(),[n,o]=i.useState(e.selectedContainer?[{...e.selectedContainer,optionType:"option",display:e.selectedContainer.name??""}]:[]),{onContainerSelect:l,onSetDefaultContainer:c}=e,u=(0,O.xJ)(),p=i.useCallback(t=>{var n,i;(t.id!==(null==(n=e.defaultContainer)?void 0:n.id)||t.type!==(null==(i=e.defaultContainer)?void 0:i.type))&&((0,s.L9)("Team Feed Set Default Audience",{containerId:t.id,containerType:t.type,userId:null==u?void 0:u.id,orgId:e.orgId}),L.l.setDefaultContainer({containerId:t.id,containerType:(0,D.kt)(t.type),orgId:e.orgId}).then(()=>{l(t),c(t),r(T.R.enqueue({message:(0,I.t)("fig_feed.new_default_container_has_been_set")}))}))},[r,e.orgId,l,c,null==u?void 0:u.id,e.defaultContainer]),m=i.useCallback(async t=>{let r=`/api/feed_posts/${e.orgId}/containers`,n=new URLSearchParams;t&&n.append("query",t),e.showMemberCount&&n.append("with_member_count","true"),e.showUnusedContainers&&n.append("with_unused_containers","true");let a=`${r}?${n.toString()}`;try{let r=await z.validate(async({xr:e})=>{let t=await e.get(a);return t}).then(e=>e.data.meta),n=t=>{let r=(0,D.X5)(t.container_type),n={id:t.container_id,type:r,name:t.display_name,isPrivate:t.is_private,memberCount:t.member_count};return{optionType:"option",...n,display:i.createElement(Z,{option:n,defaultContainer:e.defaultContainer,showMemberCount:e.showMemberCount,setDefaultContainer:p})}},o=(e,t)=>({optionType:"group",label:t,options:e.map(n)}),l=e.selectedContainer&&e.selectedContainer.id&&e.selectedContainer.type&&r.member_results.concat(r.results).some(t=>t.container_id===e.selectedContainer.id&&(0,D.X5)(t.container_type)===e.selectedContainer.type),s=[];return!l&&e.selectedContainer&&s.push(o([{container_id:e.selectedContainer.id,container_type:(0,D.kt)(e.selectedContainer.type),display_name:e.selectedContainer.name,is_private:e.selectedContainer.isPrivate}],null)),0===r.member_results.length&&0===r.results.length?s.push({optionType:"no_matching_results"}):(r.member_results.length>0&&s.push(o(r.member_results,t?(0,I.t)("fig_feed.your_spaces"):(0,I.t)("fig_feed.your_recent_spaces"))),r.results.length>0&&s.push(o(r.results,t?(0,I.t)("fig_feed.other_spaces"):(0,I.t)("fig_feed.other_recent_spaces")))),s}catch(e){console.error(e)}return[]},[e.orgId,e.showMemberCount,e.showUnusedContainers,e.selectedContainer,e.defaultContainer,p]);(0,d.O)(()=>{m(null).then(e=>o(e))});let h=0;return e.dropdownId===G&&(h=1),i.createElement(K,{dropdownId:e.dropdownId,search:m,searchPlaceholder:(0,I.t)("fig_feed.placeholder.container_search"),defaultDisplay:e.hideAllSpaces?void 0:(0,I.t)("fig_feed.all_spaces"),initialOptions:n,selectedOption:(null==(t=e.selectedContainer)?void 0:t.id)??null,setSelectedOption:t=>{e.onContainerSelect(t)},type:h,maxContentHeight:344},e.children)}function j(e){var t;let[r,n]=i.useState([]),a=i.useMemo(()=>new C(e.orgId),[e.orgId]),o=e=>e.map(e=>({optionType:"option",id:e.id,display:i.createElement("div",{className:M.ah},e.handle),handle:e.handle}));i.useEffect(()=>{a.list().then(e=>n(o(e.slice(0,a.maxResultsLength()))))},[a]);let l=async e=>{let t=await a.search(e);return 0===t.length?[{optionType:"no_matching_results"}]:o(t)};return i.createElement(K,{dropdownId:V,search:l,searchPlaceholder:(0,I.t)("fig_feed.placeholder.user_search"),defaultDisplay:(0,I.t)("fig_feed.all_users"),initialOptions:r,type:0,selectedOption:(null==(t=e.selectedUser)?void 0:t.id)??null,setSelectedOption:t=>e.onUserSelect(t),maxContentHeight:344},e.children)}function $(e){let t=(0,a.I0)(),{setSelectedContainer:r,setSelectedUser:n}=e,o=i.useCallback(e=>{n(e)},[n]),l=e.selectedContainer?e.selectedContainer.name:(0,I.t)("fig_feed.all_spaces").toLocaleLowerCase(),s=e.selectedUser?e.selectedUser.handle:(0,I.t)("fig_feed.all_users").toLocaleLowerCase(),c=e=>i.createElement("div",{className:b.cx.flex.selectNone.overflowHidden.$},i.createElement("span",{className:b.cx.overflowHidden.ellipsis.noWrap.flexShrink1.$},e),i.createElement("div",{className:b.cx.flex.itemsCenter.justifyCenter.w16.colorIcon.$},i.createElement(y.n,{svg:F})));return i.createElement(i.Fragment,null,i.createElement("div",{className:b.cx.flex.itemsCenter.justifyBetween.mr8.h64.$},i.createElement("div",{className:b.cx.py12.pr8.$},i.createElement(v,{tabs:e.tabs,selectedTabKey:e.selectedTabKey,onTabClick:t=>{e.setSelectedTabKey(t)}})),e.selectedTabKey===A.QP.All&&i.createElement("div",{className:b.cx.flex.gap16.$},i.createElement("div",{className:b.cx.flex.itemsCenter.gap4.maxW150.overflowHidden.$},i.createElement("label",{id:"feed-space-dropdown-label"},i.createElement(I.Tx,{id:"fig_feed.label.in"})),i.createElement(Y,{dropdownId:"feed-container-filter-dropdown",orgId:e.orgId,selectedContainer:e.selectedContainer,onContainerSelect:e=>{r(e),t(w.kp())},defaultContainer:null,onSetDefaultContainer:u.ZT,showMemberCount:!1},c(l))),i.createElement("div",{className:b.cx.flex.itemsCenter.gap4.maxW150.overflowHidden.$},i.createElement("label",{id:"feed-space-dropdown-label"},i.createElement(I.Tx,{id:"fig_feed.label.by"})),i.createElement(j,{dropdownId:V,orgId:e.orgId,selectedUser:e.selectedUser,onUserSelect:o},c(s))))))}},412310:(e,t,r)=>{r.d(t,{$2:()=>U,WN:()=>O,rV:()=>G});var n=r(652983),i=r(87608),a=r.n(i),o=r(772760),l=r(46347),s=r(141757),c=r(965591),d=r(600802),u=r(623046),p=r(970740),m=r(597837),h=r(346451),_=r(765096),g=r(716215),f=r(435613),E=r(225468),y=r(785578),v=r(347373),b=r(626963),I=r(110878),T=r(37841);let w=r(436535),S=r(846320),C=r(834549),O=e=>{let t;switch(e.type){case g.zc.NODE:t=e.nodeId;break;case g.zc.IMAGE:t=e.url;break;case g.zc.VIDEO:t=e.path;break;case g.zc.PROTOTYPE:t=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${t}`};function A(e){let[t,r]=n.useState(!e.isThumbnail&&!e.usesPreviewImage);if(n.useEffect(()=>{if(!e.imgUrl)return;let t=new Image;t.src=e.imgUrl,t.onload=()=>{let e=t.width/t.height;r(t=>t&&Math.abs(e-v.Zg)>.01)}},[e.imgUrl]),null===e.imgUrl)return n.createElement("div",null,(0,p.t)("fig_feed.could_not_load_preview_image"));let i=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return n.createElement(n.Fragment,null,e.showPreviewFacade&&n.createElement("div",{className:T.Mx},n.createElement(d.Us,{onClick:e.onUpdatePreviewImage},(0,p.t)("fig_feed.update_preview_image"))),n.createElement("img",{src:i,alt:(0,p.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:a()(T.eU,e.isThumbnail&&T.yr,t&&T.ZH)}),e.isThumbnail?null:"image/gif"===e.mediaType?n.createElement("div",{className:T.f9},(0,p.t)("fig_feed.gif")):null)}function N(e){let t=!!e.editPreviewOptions;return n.createElement("div",{className:T.su},e.contentItems.map((r,i)=>{var o,l,c,d,u,p,m;let _;return(null==(o=e.editPreviewOptions)?void 0:o.applyToAllCallback)&&(_=t=>e.editPreviewOptions.applyToAllCallback(t,O(r))),n.createElement("div",{key:i,className:a()({[T.cT]:!0,[T.r_]:i===e.selectedIdx})},n.createElement(v.ex,{key:`details::${r.image_url}`,imageSrc:r.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:t,setContentPreview:i===e.selectedIdx?null==(l=e.editPreviewOptions)?void 0:l.setContentPreview:void 0,initialSnapshotState:null==(d=null==(c=e.editPreviewOptions)?void 0:c.initialSnapshotStates)?void 0:d[O(r)],disableReset:!!(null==(u=e.editPreviewOptions)?void 0:u.disableReset),resetSnapshotState:null==(p=e.editPreviewOptions)?void 0:p.selectedContentResetSnapshotState,pageBackgroundColor:(null==(m=e.editPreviewOptions)?void 0:m.pageBackgroundColor)||r.backgroundColor&&(0,s.lu)(r.backgroundColor)||e.pageBackgroundColor&&(0,s.lu)(e.pageBackgroundColor)||void 0,applyToAllCallback:_,imageScale:t?1:void 0,enableZoomKeyControls:i===e.selectedIdx&&(e.source===h.iz.DETAIL_MODAL||t),enableSnapToGuidelines:t,enableZoomControls:e.source===h.iz.DETAIL_MODAL}))}))}function L(e){return n.createElement(b.I,{item:e.prototypeContent})}function P(e){var t,r,i,a,o,l,c;let d=!!e.editPreviewOptions;return n.createElement(v.ex,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:d,setContentPreview:null==(t=e.editPreviewOptions)?void 0:t.setContentPreview,initialSnapshotState:null==(i=null==(r=e.editPreviewOptions)?void 0:r.initialSnapshotStates)?void 0:i[O(e.imageContent)],disableReset:!!(null==(a=e.editPreviewOptions)?void 0:a.disableReset),resetSnapshotState:null==(o=e.editPreviewOptions)?void 0:o.selectedContentResetSnapshotState,applyToAllCallback:(null==(l=e.editPreviewOptions)?void 0:l.applyToAllCallback)?t=>e.editPreviewOptions.applyToAllCallback(t,O(e.imageContent)):void 0,pageBackgroundColor:(null==(c=e.editPreviewOptions)?void 0:c.pageBackgroundColor)||e.imageContent.backgroundColor&&(0,s.lu)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,s.lu)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===h.iz.DETAIL_MODAL||d,enableSnapToGuidelines:d,enableZoomControls:e.source===h.iz.DETAIL_MODAL})}function R(e){let t=(0,I.gJ)(e.feedPostUuid,e.videoContent.path,e.source);return n.createElement(I.qI,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function k(e){return e.isThumbnail?n.createElement("div",null,n.createElement(p.Tx,{id:"fig_feed.video"})):n.createElement("div",null,n.createElement(p.Tx,{id:"fig_feed.transcode_after_submit"}))}function D(e){if(_.Xz.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return n.createElement(k,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return n.createElement(A,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let t=(0,I.gJ)(e.feedPostUuid,e.videoContent.path,e.source);return n.createElement(I.qI,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function M(e){return n.createElement(n.Fragment,null,n.createElement(u.u,{isLoading:!e.content.imageUrl},()=>n.createElement(A,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&n.createElement("div",{className:T.f9},n.createElement(p.Tx,{id:"fig_feed.prototype_badge"})))}function F(e){let t=e.contentItems[e.selectedIdx];switch(t.type){case g.zc.NODE:return n.createElement(N,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case g.zc.IMAGE:return n.createElement(P,{imageContent:t,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case g.zc.VIDEO:return n.createElement(R,{videoContent:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case g.zc.PROTOTYPE:return n.createElement(L,{prototypeContent:t});default:(0,l.vE)(t)}}function x(e){switch(e.content.type){case g.zc.NODE:let t=e.content,r=t.mediumImageUrl??t.preview_image_url??t.image_url,i=t.preview_image_url??t.image_url;return n.createElement(u.u,{isLoading:!!t.isLoading},()=>n.createElement(A,{imgUrl:e.isEditing?i:r,usesPreviewImage:!!t.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?i:t.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case g.zc.IMAGE:let a=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,o=e.content.preview_image_url??e.content.url;return n.createElement(A,{imgUrl:e.isEditing?o:a,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?o:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case g.zc.VIDEO:return n.createElement(D,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case g.zc.PROTOTYPE:return n.createElement(M,{content:e.content,isThumbnail:e.isThumbnail});default:(0,l.vE)(e.content)}}function U(e){let t=!!e.editPreviewOptions,r=e.contentItems.length>1||t,{selectedContentIdx:i,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:d,onContentHover:m}=e,[_,y]=(0,c.X)();n.useEffect(()=>{null==m||m(y)},[y,m]);let v=n.useMemo(()=>d[i],[d,i]),b=n.useMemo(()=>r?n.createElement(V,{direction:"horizontal",contentItems:d,selectedIdx:i,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[r,d,i,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&v&&"node"===v.type&&v.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,s.lu)(v.backgroundColor)??void 0);let{openEditPreviewModalCallback:I,deleteSelectedItemCallback:S}=e,[C,O]=n.useState(!1),A=n.useMemo(()=>{if(!I&&!S||!C||!v)return null;let e=r?T.dR:T.e7;return n.createElement("div",{className:e},v&&(0,g.QT)(v)&&I&&n.createElement("div",null,n.createElement("button",{onClick:I,className:T.ky},n.createElement(p.Tx,{id:"fig_feed.edit_preview"}))),S&&n.createElement(f.n,{svg:w,className:T.E0,onClick:S,autosize:!0,"data-tooltip-type":E.fR.TEXT,"data-tooltip":(0,p.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[C,v,r,I,S]);return n.createElement("div",{className:a()(T.ho,t&&T.rL)},n.createElement("div",{ref:_,className:r&&!t?T.ff:T.h2,style:{backgroundColor:(0,h.L_)(v,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>O(!0),onPointerLeave:()=>O(!1),"data-testid":"feed-post-content-section"},A,n.createElement(u.u,{isLoading:!v},()=>e.staticContent?n.createElement(x,{content:v,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):n.createElement(F,{contentItems:d.filter(e=>null!==e),selectedIdx:i,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),b)}let B=r(295799);function V(e){let t=n.useRef(null);n.useEffect(()=>{var r;let n=t.current,i=null==(r=t.current)?void 0:r.children[e.selectedIdx];if(!n||!i)return;let a=null==n?void 0:n.getBoundingClientRect(),o=(null==a?void 0:a.top)>=0&&(null==a?void 0:a.left)>=0&&(null==a?void 0:a.bottom)<=(window.innerHeight||document.documentElement.clientHeight)&&(null==a?void 0:a.right)<=(window.innerWidth||document.documentElement.clientWidth);o&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let r=(0,I.dp)(),{scrollToItem:i,onReorderCallback:l,setSelectedIdx:s,deleteItem:c}=e,[d,u]=n.useState(null),p=e.thumbnailType||"wide",_=n.useCallback((t,o,l)=>{let m=a()(T.Uk,l&&T.K4,"small"===p&&T.fd,"wide"===p&&T.b0);return n.createElement("div",{className:m,onMouseDown:()=>{r(e.feedPostUuid),null==i||i(o),null==s||s(o)},onPointerEnter:()=>u(o),onPointerLeave:()=>u(null),role:"button",tabIndex:0,style:{backgroundColor:(0,h.L_)(t,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},n.createElement(x,{content:t,isThumbnail:!0,isEditing:e.isEditing}),c&&o===d&&n.createElement("div",{className:T.nz},n.createElement("div",{className:T.ap,onClick:e=>{e.stopPropagation(),c(o)},role:"button",tabIndex:0},n.createElement(y.a,null))))},[e.pageBackgroundColor,e.feedPostUuid,p,e.isEditing,d,r,i,s,c]),g=t=>{if("horizontal"!==e.direction)return null;let r=e.selectedIdx===("left"===t?0:e.contentItems.length-1);return n.createElement(m.z,{onMouseDown:()=>{let r=(e.selectedIdx+("left"===t?-1:1)+e.contentItems.length)%e.contentItems.length;null==s||s(r)},icon:"left"===t?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},E=a()(T.xD,"horizontal"===e.direction?T.NF:T.GU);if(l)return n.createElement("div",{className:E},n.createElement(o.t.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:l,values:e.contentItems,className:a()(T.cv,"horizontal"===e.direction?T.RX:T.RI),role:"button",tabIndex:0,ref:t},e.contentItems.map((t,r)=>n.createElement(o.t.Item,{value:t,id:O(t),key:O(t),translate:"no"},_(t,r,!(e.canAddContent&&e.isAddingContent)&&r===e.selectedIdx))),e.canAddContent&&n.createElement("div",{className:a()(T.Uk,"small"===e.thumbnailType&&T.fd,"wide"===e.thumbnailType&&T.b0,e.isAddingContent?T.lV:T.R7),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},n.createElement(f.n,{svg:B}))));{let r=a()(T.cv,"horizontal"===e.direction?T.ID:T.RI);return n.createElement("div",{className:E},g("left"),n.createElement("div",{className:r,ref:t},e.contentItems.map((t,r)=>n.createElement(n.Fragment,{key:r},_(t,r,r===e.selectedIdx)))),g("right"))}}function G(e){let t=e.contentItems[e.selectedIdx],r=t&&(0,g.QT)(t),{onReorderCallback:i,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:s,setContentPreview:c,openPostFromFileModal:d}=e,[m,_]=n.useState(0===e.contentItems.length);n.useEffect(()=>{0===e.contentItems.length?_(!0):_(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||r,b=n.useCallback(()=>{_(!0)},[]),I=n.useCallback(e=>{l(e),_(!1)},[l]),[A,N]=n.useState(!1),L=n.useMemo(()=>A&&t?n.createElement("div",{className:T.e7},o&&n.createElement(f.n,{svg:w,className:T.E0,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.fR.TEXT,"data-tooltip":(0,p.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[t,A,e.selectedIdx,o]),P=n.useRef(null),R=(e,t,r,i)=>n.createElement("div",{className:T.K0,onClick:i,role:"button",tabIndex:0},n.createElement(f.n,{svg:r}),n.createElement("div",{className:T.YR},n.createElement("div",{className:T.Qx},e),t)),k=n.useCallback((r,n,i)=>{let a=O(t);t&&a&&!(0,v.Yp)(n,e.snapshotStates[a])&&c(a,r,n)},[t,e.snapshotStates,c]),D=(t,r)=>{k(t,r,e.selectedIdx)},[M,U]=n.useState({}),B=n.useCallback(()=>{U(e=>({...e,[O(t)]:!0}))},[t]);return n.createElement("div",null,(()=>{if(m){let t=null===e.attachedFile?(0,p.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,p.t)("fig_feed.share_something_from_figjam"):(0,p.t)("fig_feed.add_frames_from_this_figma_file");return n.createElement("div",{className:a()(T.W5,y&&T.aR)},n.createElement("div",{className:a()(T.Mt,e.dragging&&T.yG)},R((0,p.t)("fig_feed.choose_frames"),t,C,d),n.createElement("form",null,n.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:g.wD.join(","),ref:P,onChange:s(P),multiple:!0,className:T.w_}),n.createElement("label",{htmlFor:"fileInput"},R((0,p.t)("fig_feed.upload_files"),(0,p.t)("fig_feed.add_images_or_videos"),S)))))}return n.createElement("div",{className:a()(T.W5,y&&T.aR),style:{backgroundColor:(0,h.L_)(t,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1)},L,n.createElement(u.u,{isLoading:!t},()=>(0,g.QT)(t)&&("edit"===e.mode&&(M[O(t)]||!t.shouldBlockEditPreview)||"create"===e.mode)?n.createElement(F,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:D,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):n.createElement(x,{content:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,g.QT)(t)&&t.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?B:void 0})),e.dragging&&n.createElement("div",{className:T.JR},n.createElement("div",{className:T.IW})))})(),y?n.createElement(V,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:i,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:I,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<g.H0,isAddingContent:m,setAddingActive:b,isEditing:!0}):null)}},183631:(e,t,r)=>{r.d(t,{K:()=>el});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(600486),s=r(46347),c=r(448501),d=r(9247),u=r(716250),p=r(810373),m=r(524261),h=r(669277),_=r(31642),g=r(85808),f=r(435613),E=r(313653),y=r(970740),v=r(547699),b=r(445041),I=r(111120),T=r(721127),w=r(306361),S=r(255301),C=r(271981),O=r(278832),A=r(322186),N=r(435804),L=r(70918),P=r(862610),R=r(259162),k=r(346451),D=r(716215),M=r(225468),F=r(220949),x=r(612112),U=r(291904),B=r(149935),V=r(465998),G=r(463670),H=r(345805),W=r(656145),K=r(665074),z=r(505468),Z=r(937194),Y=r(436003),j=r(407108),$=r(412310),q=r(36629),X=r(722317),J=r(815179),Q=r(714607),ee=r(561824),et=r(233196);let er=r(614772),en=r(328630),ei=r(413355),ea=r(862675);function eo(){return n.createElement("div",null,(0,y.t)("fig_feed.post_dne"))}let el=(0,U.Y3)(function(e){var t;let r=(0,i.I0)(),a=(0,A.Ng)(),o=(0,N.A6)();n.useEffect(()=>{"teamFeed"!==o.view&&"user"!==o.view&&("fullscreen"===o.view&&e.inFileView||r(T.hV()))},[r,o,e.inFileView]);let u=n.useRef({selectedView:o,inFileView:e.inFileView});n.useEffect(()=>{u.current={selectedView:o,inFileView:e.inFileView}},[e.inFileView,o]);let m=n.useCallback(t=>{let n={view:"teamFeed",hashtag:t};u.current={selectedView:n,inFileView:e.inFileView},r(I.fv(n)),r(T.hV())},[e.inFileView,r]);n.useEffect(()=>()=>{u.current.inFileView||"teamFeed"!==u.current.selectedView.view||r(I.fv({...u.current.selectedView,postUuid:void 0}))},[r]);let g=n.useRef(!1),f=n.useCallback(t=>{g.current||!t||e.autofocusCommentInput||(t.focus(),g.current=!0)},[e.autofocusCommentInput]),v=(0,d.D)(e.postUuid);n.useEffect(()=>{a&&(e.inFileView||v===e.postUuid||"teamFeed"!==o.view||(g.current=!1,c.default.replace((0,k.yS)(a.id,{uuid:e.postUuid,tab:o.feedTab,hashtag:o.hashtag}))))},[v,e.postUuid,a,e.inFileView,o]);let b=(0,h.mU)(P.FeedPostWithDetails,{publicUuid:e.postUuid});n.useEffect(()=>{var t,r;!e.inFileView&&(null==(r=null==(t=b.data)?void 0:t.feedPost)?void 0:r.title)&&(0,O.x6)(b.data.feedPost.title)},[e.inFileView,b.data]),n.useEffect(()=>((0,l.L9)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,l.L9)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),n.useEffect(()=>{_.ZP.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[w,S]=n.useState(0);n.useEffect(()=>{S(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let C=n.useMemo(()=>{var e;return(null==(e=b.data)?void 0:e.feedPost)?b.data.feedPost.content.map(e=>JSON.parse(e)):[]},[b.data]),L=C.length,{requestToOpenPostByFeedIdx:R}=e,M=n.useCallback(t=>{t.keyCode===p.sr.LEFT_ARROW?0===w?R&&void 0!==e.feedIdx&&R(e.feedIdx-1):S(w-1):t.keyCode===p.sr.RIGHT_ARROW&&(w===L-1?R&&void 0!==e.feedIdx&&R(e.feedIdx+1):S(w+1))},[w,L,R,e.feedIdx]),[x,U]=n.useState(!0),H=n.useCallback(()=>U(e=>!e),[]),[W,K]=n.useState(!1);n.useEffect(()=>{!W&&"loaded"===b.status&&C[w]&&(0,D.gT)(C[w])&&((0,F.m_)({id:V.o}),K(!0))},[b.status,W,C,w]);let Z=(null==(t=b.data)?void 0:t.feedPost)||e.initialPreloadedPost;if(!Z)switch(b.status){case"errors":return n.createElement(eo,null);case"loading":case"disabled":return n.createElement(z.u_,{dispatch:r,className:et.Ew,size:"any"});case"loaded":return r(E.l.error((0,y.t)("fig_feed.post_dne"))),r(T.hV()),null;default:(0,s.vE)(b)}return n.createElement(n.Fragment,null,n.createElement(z.u_,{dispatch:r,className:et.Ew,size:"any"},n.createElement("div",{className:et.bK,role:"listbox",tabIndex:0,onKeyDown:M,ref:f},n.createElement("div",{className:et.nC,"data-onboarding-key":G.B},n.createElement("div",{className:x?et.er:et.$N},n.createElement($.$2,{contentItems:C,staticContent:!1,selectedContentIdx:w,setSelectedContentIdx:t=>{var r;S(t),null==(r=e.onSetSelectedContentIdx)||r.call(e,t)},pageBackgroundColor:Z.backgroundColor??void 0,feedPostUuid:e.postUuid,source:k.iz.DETAIL_MODAL})),n.createElement(es,{feedPost:Z,contentItems:C,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:H,show:x,onHashtagClick:m})))),n.createElement(B.V,null,n.createElement(G.a,null)))},C.I,U.Et.YES);function es(e){let t=(0,i.I0)(),r=(0,L.xJ)(),a=(0,i.v9)(e=>e.currentUserOrgId),o=n.useCallback(()=>{t(T.hV())},[t]),{fileData:l,fileIcon:s,fileLoaded:c,openFile:d}=(0,k.nz)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),p=n.useCallback(()=>{let r=e.inFileView&&e.feedPost.fileKey||void 0;t((0,T.K4)({type:Z.gE,data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?Z.rY.FILE:Z.rY.FEED,lockedFileKey:r}}))},[t,e.feedPost,e.inFileView]),m=(0,k._y)(e.feedPost.publicUuid,k.Iq.DETAIL);if(!a||!r)return null;let h=n.createElement(n.Fragment,null,n.createElement("div",{className:et.PO},n.createElement(ee.Le,{feedPost:e.feedPost,source:k.iz.DETAIL_MODAL,onEditClick:p})),n.createElement("button",{onClick:m,"data-tooltip-type":M.fR.TEXT,"data-tooltip":(0,y.t)("fig_feed.copy_link_to_post")},n.createElement(f.n,{svg:ea,className:et.AW})),n.createElement("button",{onClick:e.onSidebarToggle},n.createElement(f.n,{svg:er,className:et.AW})),n.createElement("button",{onClick:o},n.createElement(f.n,{svg:en,className:et._v})));if(!e.show)return n.createElement("div",{className:et.St},h);let _=n.createElement("div",{className:et.Sl},n.createElement("div",{className:et.r9},n.createElement(y.Tx,{id:"fig_feed.details"}),(0,u.BZ)().xr_debounce_beta_badging&&n.createElement(Y.v,null)),n.createElement("div",{className:et.KF,"data-testid":"feed-modal-open-file"},h)),g=(0,j.a$)(e.feedPost),E=n.createElement("div",{className:et.RZ},n.createElement("div",{className:et.NU},n.createElement(X.X,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:v.DZ.MEDIUM,shortDate:!1,containerInfo:g})),n.createElement(ed,{feedPost:e.feedPost,currentOrgId:a,currentUser:r,onHashtagClick:e.onHashtagClick}),c&&!e.inFileView&&n.createElement("button",{className:et.E9,onClick:e.inFileView?void 0:d},n.createElement(y.Tx,{id:"fig_feed.from_file",fileComponent:n.createElement(n.Fragment,null,n.createElement(W.aA,{className:et.up,type:s,size:W.Sj.SMALL}),n.createElement("span",{className:et.QA},l.name))})),n.createElement("div",{className:et.P2},n.createElement(J.BO,{type:J.rY.FULL,source:J.e5.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return n.createElement("div",{className:et.Yq},_,n.createElement(ec,{postInfo:E,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:r,currentOrgId:a,autofocusCommentInput:e.autofocusCommentInput}))}function ec(e){let t=(0,i.I0)(),r=n.useRef(null),a=n.useRef(null),[o,l]=n.useState(!1),s=n.useCallback(t=>{0===t.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,K.K)(a,s,{threshold:[0,1]});let c=n.useCallback(()=>{r.current&&r.current.scrollToBottom()},[]),d=e.comments.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),[u,p]=n.useState(e.comments.length);n.useEffect(()=>{let t=u<e.comments.length;t&&p(e.comments.length);let r=e.comments[e.comments.length-1];t&&r.user.id===e.currentUser.id&&c()},[u,e.comments,e.currentUser,c]);let[h,_]=n.useState([]),E=(0,i.v9)(e=>e.comments.newComment),I=n.useCallback(()=>{t(w.nV({postUuid:e.postUuid,messageMeta:h,attachmentIds:Object.keys(E.attachments)})),_([]),t(b.Ti({resetStatusOnly:!1}))},[t,e.postUuid,h,E]),T=n.useMemo(()=>({library:new R.UH(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),C=n.useCallback(e=>{t(b.WJ({attachmentId:e.id,attachment:e}))},[t]),O=n.useCallback((e,r)=>{t(b.WJ({attachmentId:e,attachment:null})),r?r.then(()=>x.a.delete(e)):x.a.delete(e)},[t]);return n.createElement("div",{className:et.Sf},n.createElement(g.l,{innerClassName:et.gG,useBottomPinning:!0,ref:r},e.postInfo,n.createElement("div",{ref:a,className:et.Fo},d.map(t=>n.createElement(q.v,{key:t.id,commentId:t.id,commentUuid:t.uuid||"",createdAt:t.createdAt,commentUser:t.user,reactions:t.reactions,messageMeta:(0,S.Qi)(t.messageMeta),user:e.currentUser,currentOrgId:e.currentOrgId,mentionables:T,attachments:t.attachments}))),o&&n.createElement("div",{className:et.r3,onClick:c,role:"button",tabIndex:0},n.createElement(f.n,{svg:ei,className:et.DI}),n.createElement(y.Tx,{id:"fig_feed.num_comments",numComments:d.length}))),n.createElement("div",{className:et.RH},n.createElement("div",{className:et.ME},n.createElement(v.Yt,{user:e.currentUser,size:v.DZ.MEDIUM})),n.createElement(Q.XG,{fallback:null,errorFallback:m.NY.NONE,user:e.currentUser,currentOrgId:e.currentOrgId,autofocus:e.autofocusCommentInput,onSubmit:I,hideSubmitButton:!1,mentionables:T,composerContainerClass:et.T$,editableTypeaheadClass:et.Kr,messageContent:h,updateMessage:_,editingExistingComment:!1,updateAttachment:C,deleteAttachment:O,attachments:Object.values(E.attachments)})))}function ed(e){let t=n.useMemo(()=>(0,S.Qi)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return n.createElement("div",{role:"textbox",tabIndex:0,className:et.$0},n.createElement("div",{className:et.lO},e.feedPost.title),n.createElement(H._H,{messageMeta:t,commentId:e.feedPost.id,className:o()(et.zW),enableHashtags:(0,u.BZ)().xr_debounce_tags,onHashtagClick:e.onHashtagClick}))}},722317:(e,t,r)=>{r.d(t,{X:()=>h,m:()=>_});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(825028),s=r(925960),c=r(970740),d=r(547699),u=r(111120),p=r(907755),m=r(588359);function h(e){var t;let r=e.date&&n.createElement(s.Lt,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),i=[n.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:o()(e.onTileMouseDown&&m.YI,m.Zh)},(null==(t=e.containerInfo)?void 0:t.name)?n.createElement(c.Tx,{id:"fig_feed.time_ago_to_container",timeAgo:r,container:n.createElement("span",null,e.containerInfo.name)}):r)];return n.createElement("div",{className:m.N5},n.createElement(_,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:i}))}function _(e){let t=(0,i.I0)(),r=n.useCallback(()=>{e.user.id&&t(u.fv({view:"user",userId:e.user.id,userViewTab:p.l.INTERNAL_PROFILE_POSTS}))},[t,e.user.id]),a=e.appendToHandle||!1===e.noHandle;return n.createElement("div",{className:m.N5},!e.noAvatar&&n.createElement(l.r,{onClick:r,trusted:!0},n.createElement(d.Yt,{user:e.user,size:e.size??d.DZ.LARGE})),a&&n.createElement("div",{className:m.kQ},!e.noHandle&&n.createElement(l.r,{className:m.UF,onClick:r,trusted:!0},n.createElement("div",{className:m.pr},e.user.handle)),e.appendToHandle))}},815179:(e,t,r)=>{r.d(t,{BO:()=>f,VT:()=>T,e5:()=>g,iP:()=>E,rY:()=>_});var n,i,a=r(652983),o=r(407908),l=r(87608),s=r.n(l),c=r(306361),d=r(809377),u=r(70918),p=r(195139),m=r(506377),h=r(893954),_=((n=_||{})[n.FULL=0]="FULL",n[n.ADD_ONLY=1]="ADD_ONLY",n),g=((i=g||{})[i.TILE_CONTENT=0]="TILE_CONTENT",i[i.TILE_POST=1]="TILE_POST",i[i.DETAIL_POST=2]="DETAIL_POST",i[i.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",i[i.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",i[i.FILE_POPOVER=5]="FILE_POPOVER",i);function f(e){let t=(0,o.I0)(),r=(0,u.xJ)(),{existingReactionIdForCurrentUser:n}=b(e.feedReactions,r),i=a.useCallback(({emoji:r,addOnly:i})=>{let a=n(r);a?i||t(c.oZ({feedPostUuid:e.postUuid,emoji:r,reactionId:a})):t(c.FK({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:r}))},[t,n,e.postUuid,e.postId]);return a.createElement(y,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:i,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function E(e){let t=(0,o.I0)(),r=(0,u.xJ)(),{existingReactionIdForCurrentUser:n}=b(e.feedReactions,r),i=a.useCallback(({emoji:r,addOnly:i})=>{let a=n(r);a?i||t(c.t8({commentUuid:e.commentUuid,emoji:r,reactionId:a})):t(c.ax({commentUuid:e.commentUuid,commentId:e.commentId,emoji:r}))},[t,n,e.commentUuid,e.commentId]);return a.createElement(y,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:i,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function y(e){let t=(0,u.xJ)(),{toggleReaction:r}=e,{reactionsWithSelected:n}=b(e.feedReactions,t),i=a.useCallback((e,t)=>{t.stopPropagation(),r({emoji:e.emoji,addOnly:!1})},[r]),o=a.useCallback(e=>{r({emoji:e,addOnly:!0})},[r]),l=a.createElement(v,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:o,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:a.createElement("div",{className:h.QY},a.createElement(m.XS,{reactions:n,collapseOverflow:!1,onClickExisting:i,prependToList:e.prependToList},l))}function v(e){let t=a.useRef(null),{isReactionPickerVisible:r,toggleReactionPicker:n,emojiPicker:i}=w(e.feedResource,e.source,t,e.onAddReaction);return e.hideAddReactionButton&&!r?a.createElement("div",{className:h.dU}):a.createElement(a.Fragment,null,a.createElement("div",{ref:t,className:s()(1===e.type?h.As:h.k3)},a.createElement(m.Uk,{onClick:n,selected:r,styleClassName:h.dU,selectedStyleClassName:h.Gl})),r&&i)}let b=(e,t)=>{let r=a.useMemo(()=>{let r={};if(!t)return r;for(let n of e)n.user.id===t.id&&(r[n.emoji]=n.id);return r},[e,t]),n=a.useCallback(e=>r[e],[r]),i=a.useMemo(()=>{let t={};for(let r of e){let{emoji:e,user:i,createdAt:a}=r;t[e]||(t[e]={emoji:e,users:[],selected:!!n(e),createdAt:a.getTime(),skinTonesToUsers:{}}),t[e].createdAt=Math.min(t[e].createdAt,a.getTime()),t[e].users.push({handle:i.handle,id:i.id,img_url:i.imgUrl})}return Object.values(t).sort((e,t)=>e.createdAt-t.createdAt||e.emoji.localeCompare(t.emoji))},[e,n]);return{reactionsWithSelected:i,existingReactionIdForCurrentUser:n}},I=(e,t)=>`FEED_TILE_EMOJI_PICKER-${e}${t?`-${t}`:null}`,T=(e,t)=>{let r=(0,d.x)(I(t,null==e?void 0:e.id));return r.showing},w=(e,t,r,n)=>{let i=(0,d.x)(I(t,null==e?void 0:e.id)),o=a.useCallback(e=>{n(e.shortcodes),i.hide()},[i,n]),l=r.current&&a.createElement(p.y,{onInsert:o,onCancel:i.hide,targetRect:r.current.getBoundingClientRect()});return{isReactionPickerVisible:i.showing,toggleReactionPicker:i.toggle,emojiPicker:l}}},561824:(e,t,r)=>{r.d(t,{$9:()=>E,KE:()=>b,Le:()=>v});var n,i=r(652983),a=r(407908),o=r(600486),l=r(31642),s=r(594619),c=r(970740),d=r(721127),u=r(306361),p=r(175965),m=r(70918),h=r(291904),_=r(505468),g=r(615580);let f=(0,h.Y3)(function(e){let t=(0,a.I0)(),r=i.createElement(c.Tx,{id:"fig_feed.delete_confirmation"});return e.numComments&&e.numReactions?r=i.createElement(c.Tx,{id:"fig_feed.delete_confirmation_with_comments_and_reactions",numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=i.createElement(c.Tx,{id:"fig_feed.delete_confirmation_with_comments",numComments:e.numComments}):e.numReactions&&(r=i.createElement(c.Tx,{id:"fig_feed.delete_confirmation_with_reactions",numReactions:e.numReactions})),i.createElement(_.cV,{destructive:!0,confirmationTitle:i.createElement(c.Tx,{id:"fig_feed.delete_post"}),confirmText:i.createElement(c.Tx,{id:"fig_feed.delete"}),onConfirm:e.onConfirm,dispatch:t,popStack:!0},i.createElement("p",null,r))},"PostConfirmDeleteModal");var E=((n=E||{}).USER="user_post_context_menu",n.SYSTEM="system_post_context_menu",n);let y=e=>{let t=(0,m.xJ)(),r=(0,p.Fj)(),n=(t&&t.id===e.creator.id)??!1,i=(null==r?void 0:r.isAdmin)??!1;return{canDelete:n,canAdminDelete:i,canEdit:n}};function v(e){let t=(0,a.I0)(),r=i.useCallback(()=>t(u.cV()),[t]),{onEditClick:n,feedPost:p}=e,{canDelete:m,canAdminDelete:h,canEdit:_}=y(p),E=p.comments.length,v=p.reactions.length,I=i.useCallback(()=>{t((0,d.VG)()),l.ZP.del(`/api/feed_posts/post_uuid/${p.publicUuid}`).then(()=>{(0,o.L9)("Team Feed Post Deleted",{postUuid:p.publicUuid}),r()})},[t,p.publicUuid,r]),T=i.useCallback(()=>{t((0,d.K4)({type:f,data:{onConfirm:I,numComments:E,numReactions:v},showModalsBeneath:!0}))},[t,I,E,v]);if(!m&&!h)return null;let w=m?i.createElement(c.Tx,{id:"fig_feed.delete_ellipsis"}):i.createElement(c.Tx,{id:"fig_feed.delete_admin_ellipsis"}),S=[!!_&&!!n&&i.createElement(s.j.Option,{key:"edit",onClick:n},i.createElement(c.Tx,{id:"fig_feed.edit"})),(!!m||!!h)&&i.createElement(s.j.Option,{key:"delete",onClick:T},w)];return i.createElement(g.n,{dropdownId:b("user_post_context_menu",e.feedPost.publicUuid,e.source),options:S,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let b=(e,t,r)=>e+t+r},636204:(e,t,r)=>{r.d(t,{ky:()=>M,m6:()=>x,mW:()=>U});var n=r(652983),i=r(407908),a=r(101426),o=r(669277),l=r(212984),s=r(970740),c=r(547699),d=r(456496),u=r(275286),p=r(111120),m=r(721127),h=r(448694),_=r(196532),g=r(761767),f=r(862610),E=r(436649),y=r(471122),v=r(334136),b=r(733609),I=r(958550),T=r(112602),w=r(225468),S=r(457440),C=r(213104),O=r(422949),A=r(206279),N=r(931904),L=r(23640),P=r(13423),R=r(814527);let k=r(989025);function D(e){var t,r;let a=(0,i.I0)(),o=(0,i.v9)(e=>e.currentUserOrgId),f=(0,_.Mn)(),E=(0,y.q)(),v=(0,i.v9)(e=>e.orgById),b=(0,i.v9)(({selectedView:e})=>e),[D,M]=n.useState(!1),F=()=>{if(!e.canUserViewTeam){e.onJoinRequest(e.team);return}(0,h.H)("file_browser_team_click",e.team.id,f,{selectedView:"recentsAndSharing"===b.view?b.tab||T.D.RECENTLY_VIEWED:b.view,viewMode:"grid"}),a(p.Hg({clickedResourceType:"team",resourceIdOrKey:e.team.id})),a(p.fv({view:"team",teamId:e.team.id}))},x=t=>{t.stopPropagation(),t.preventDefault(),e.setSelectedTeamId(e.team.id);let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};a(p.SP({type:N.iu,data:{teamId:e.team.id,targetRect:r}}))},U=n.useCallback((t,r,n)=>{if(e.team){let i={team:e.team,entrypoint:"org_browse_teams_view",sectionId:n,favoriteId:r};t?a(u.Aw(i)):a(u.NP(i))}},[a,e.team]),B="search"===b.view,V=e.team.org_id&&v[e.team.org_id]||e.team.id&&E[e.team.id],G=n.createElement(s.Tx,{id:"team_tile.members_count",numMembers:e.memberCount}),H=n.createElement("div",{className:l.cx.flex.flexRow.itemsCenter.$},B&&V&&n.createElement(A.E,{entityId:V.id,entityName:V.name,imgUrl:V.img_url}),e.isCurrentUserInTeam&&n.createElement(n.Fragment,null,n.createElement(s.Tx,{id:"team_list.org_join_status_joined"}),n.createElement("span",null,"\xa0\xb7\xa0")),G),W=e.selectedTeamId===e.team.id,K=n.createElement(S.b,{team:e.team,isCurrentUserInTeam:e.isCurrentUserInTeam,isLoading:e.isLoading,onOpenTeam:F,onJoin:e.onJoin,onLeave:e.onLeave,onJoinRequest:e.onJoinRequest,onBypassRequest:e.onBypassRequest,onWithdrawRequestForTeam:e.onWithdrawRequestForTeam,spinnerClassName:R.wU,isCardActive:D||W,onClickButton:e.setSelectedTeamId}),z=n.createElement("div",{className:l.cx.flex.$},K,o&&e.canUserViewTeam&&n.createElement(O.M,{setFavorite:U,favoriteType:g.IK.TEAM,resourceId:e.team.id,size:O.v.MEDIUM,containerStyle:R.E0,noHoverState:!0,orgId:e.team.org_id})),Z=e.team.org_access===g.Zn.PRIVATE?(0,s.t)("file_browser.team_tiles.private_team_tooltip"):e.team.org_access===g.Zn.SECRET?(0,s.t)("file_browser.team_tiles.secret_team_tooltip"):void 0,Y=(0,I.IQ)((null==(t=e.team)?void 0:t.id)||null,(null==(r=e.team)?void 0:r.org_id)||null),j=e.team.org_access===g.Zn.PRIVATE||e.team.org_access===g.Zn.SECRET?n.createElement("div",{className:l.cx.mr4.$,style:{marginLeft:Y?"4px":"-4px"},"data-tooltip-type":w.fR.TEXT,"data-tooltip":Z,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200},n.createElement(d.JO,{icon:"lock-16"})):void 0,$=Y?void 0:j,q=Y?j:void 0;return n.createElement(n.Fragment,null,n.createElement(P.R,{name:e.team.name,onContextMenu:e=>{x(e)},headerLeft:n.createElement(c.Ir,{team:e.team,size:40,avatarSvg:k}),onMouseOver:()=>{M(!0)},titleSubtitle:$,titleSubtitleRight:q,onMouseOut:()=>{M(!1)},isSelected:W,headerRight:z,footerLeft:H,isCardActive:D||W,onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&F()},canView:e.canUserViewTeam}),e.dropdownTeamId===e.team.id&&n.createElement("div",{className:l.cx.fixed.$},n.createElement(L.k,{team:{...e.team,canEdit:!1,canEditTeamContents:!1},onRenameClick:e=>{a(m.K4({type:C.A2,data:{team:e}}))}})))}function M(e){var t;let r=e.team,i=(0,o.mU)(f.TeamTilePermissions,{teamId:r.id}),l=!1,s=!1;if("loaded"===i.status&&(null==(t=i.data)?void 0:t.team)){let e=(0,a.O)(i.data.team);l=e.canView,s=e.isInTeam}return n.createElement("div",null,n.createElement(U,{...e,team:r,canUserViewTeam:l,isCurrentUserInTeam:s}))}let F=(0,i.$j)((e,t)=>{var r,n,i;let a=e.user,o=t.team&&t.team.top_members&&t.team.top_members.filter(e=>!e.pending),l=(0,b.hasViewerRoleAccessOnTeam)(t.team.id,e),s=(0,b.canMemberOrg)(t.team.org_id,e)&&t.team.org_access===g.Zn.PUBLIC,c=(0,b.canManageNonSecretOrgTeam)(t.team,e,null==a?void 0:a.id);return{isCurrentUserInTeam:l,canUserViewTeam:s||l||c,currentUser:a,memberCount:t.team.member_count??0,topMembers:o||[],isLoading:(0,E.hg)(e.loadingState,(0,v.js)(t.team.id)),dropdownTeamId:(null==(r=e.dropdownShown)?void 0:r.type)===N.iu?null==(i=null==(n=e.dropdownShown)?void 0:n.data)?void 0:i.teamId:void 0}})(D),x=F,U=D},622799:(e,t,r)=>{r.d(t,{W:()=>s,z:()=>c});var n=r(652983),i=r(618723),a=r(970740),o=r(299482),l=r(925187);let s=["","",""];function c({disableInvites:e,collaborators:t,setCollaborators:r,willSendInvites:s,skipInviteStep:c}){let d=(e,n)=>{if(n>=t.length)return;let i=[...t];i[n]=e,r(i)};return n.createElement(n.Fragment,null,n.createElement("div",{className:l.nx},n.createElement(a.Tx,{id:"pro_cart.add_collaborators.add_collaborators_to_your_team"})),n.createElement(i.Ki,{multiple:.5}),n.createElement("div",{className:l.Kp},n.createElement(a.Tx,{id:"pro_cart.add_collaborators.well_add_them_to_your_team"})),n.createElement(i.Ki,{multiple:4}),n.createElement("div",{style:o.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>n.createElement(i.Ev,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>d(e.target.value,t),placeholder:(0,a.t)("pro_cart.add_collaborators.email")})),n.createElement(i.Z6,{onClick:()=>{let e=[...t];e.push(""),r(e)},trusted:!0,style:o.sx.alignLeft.font14.fontMedium.$},n.createElement(a.Tx,{id:"pro_cart.add_collaborators.add_another"}))),n.createElement("div",{style:o.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},n.createElement(i.RS,{disabled:!!e,style:o.sx.font14.add({height:"44px",width:"110px"}).$,onClick:s},n.createElement(a.Tx,{id:"pro_cart.add_collaborators.sent_invites"})),n.createElement(i.Cr,{trusted:!0,onClick:c,style:o.sx.colorTextSecondary.alignCenter.$},n.createElement(a.Tx,{id:"pro_cart.add_collaborators.skip_for_now"}))))}},279539:(e,t,r)=>{r.d(t,{$p:()=>b,CM:()=>h,Fq:()=>T,I1:()=>v,Ik:()=>N,M3:()=>I,Ou:()=>y,WI:()=>S,X3:()=>C,ZA:()=>A,dd:()=>w,ib:()=>_,o3:()=>f,pN:()=>O,vn:()=>E});var n,i,a=r(652983),o=r(256768),l=r(403273),s=r(716250),c=r(669277),d=r(322186),u=r(312616),p=r(862610),m=r(326714);let h=25;var _=((n=_||{}).NOT_IN_FEATURE_FLAG="not_in_feature_flag",n.NO_IMPORTED_JAMBOARD_FILES="no_imported_jamboard_files",n.IN_PAID_TEAM="in_paid_team",n.IN_STUDENT_TEAM="in_student_team",n.REDEEMED="redeemed",n);let g=({enabled:e})=>{var t;let r=(0,c.mU)(p.JamboardOfferRedeemedAt,{},{enabled:e});return"loaded"!==r.status||!!(null==(t=r.data.jamboardOfferRedeemedAt)?void 0:t.redeemedAt)},f=({enabled:e})=>{let t=(0,c.mU)(p.UserJamboardOfferEligibility,{},{enabled:e});return"loaded"===t.status?t.data.currentUser.jamboardOfferEligibility:null},E=()=>{let e=!!(0,s.BZ)().figjam_jamboard_offer,t=(0,c.mU)(p.UserJamboardOfferEligibility,{},{enabled:e});return"loading"===t.status},y=e=>{let t=(0,l.N)(),r=e?(0,o.Z)().isBefore((0,o.Z)(e)):null,n=null==e?void 0:e.getTime();return(0,a.useEffect)(()=>{if(r){let e=(0,o.Z)(n).diff(),r=setTimeout(t,e+1);return()=>clearTimeout(r)}},[n,t,r]),r},v=e=>{let t=!!(0,s.BZ)().figjam_jamboard_offer,r=f({enabled:t});return T(e)&&r?r.promoCodeId:null},b=()=>{let e=!!(0,s.BZ)().figjam_jamboard_offer,t=g({enabled:e}),r=f({enabled:e}),n=y(null==r?void 0:r.promoExpirationDate);return e&&!!r&&!t&&r.isEligible&&!!n&&!!r.promoCodeId},I=()=>{var e;let t=!!(0,s.BZ)().figjam_jamboard_offer,r=(0,c.mU)(p.UserJamboardOfferEligibility,{},{enabled:t}),n=y(null==(e=r.data)?void 0:e.currentUser.jamboardOfferEligibility.promoExpirationDate);return t?{isOfferActive:n,queryStatus:r.status}:{isOfferActive:!1,queryStatus:"disabled"}},T=e=>b()&&e===m.tv.ANNUAL,w=({numWhiteboardEditors:e,billingPeriod:t})=>{let r=T(t)?Math.min(h,e):0;return r},S=({numWhiteboardEditors:e,billingPeriod:t})=>e-w({numWhiteboardEditors:e,billingPeriod:t}),C=e=>Math.max(0,h-e),O=e=>Math.min(e,h);var A=((i=A||{}).IMPORT_JAMBOARD_FILE="import_jamboard_file",i.REDEEM_OFFER="redeem_offer",i);let N=()=>{let e=!!(0,d.$0)(),t=!!(0,u.p)("signed_up_from_figjam_jamboard"),r=(0,s.BZ)(),n=!!r.figjam_jamboard_offer&&!e,i=g({enabled:n}),a=f({enabled:n}),o=y(null==a?void 0:a.promoExpirationDate);return n&&!i&&a&&o?!i&&a.isEligible&&a.promoCodeId?"redeem_offer":!i&&t&&r.figjam_3p_file_importer&&"no_imported_jamboard_files"===a.ineligibilityReason?"import_jamboard_file":null:null}},281220:(e,t,r)=>{r.d(t,{A7:()=>L,AB:()=>C,DV:()=>I,Kl:()=>P,QC:()=>R,UL:()=>E,W4:()=>N,ZI:()=>S,bF:()=>v,dm:()=>k,du:()=>b,eL:()=>U,hW:()=>O,jE:()=>y,jN:()=>x,ky:()=>F,nj:()=>A});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(716250),s=r(418465),c=r(618723),d=r(970740),u=r(124040),p=r(761767),m=r(687496),h=r(326714),_=r(730799),g=r(279539),f=r(925187);function E(e,t){let r=new m.Lr(t).getPrices();switch(e){case h.tv.ANNUAL:return r.annualFigma;case h.tv.MONTHLY:return r.monthlyFigma;case h.tv.STUDENT:return 0}throw Error(`Unknown plan type: ${e}`)}function y(e,t){let r=new m.Lr(t).getPrices();switch(e){case h.tv.ANNUAL:return r.annualFigjam;case h.tv.MONTHLY:return r.monthlyFigjam;case h.tv.STUDENT:return 0}throw Error(`Unknown plan type: ${e}`)}function v({isPromo:e,isEducationTeam:t,claimsEndAtDate:r}){var i;let a=!!(0,l.BZ)().pro_team_checkout_updated_terms;return e?{trackingDescriptor:u.y.START_PRO_PLAN_FOR_FREE,buttonText:n.createElement(d.Tx,{id:"pro_cart.review.start_professional_plan_for_free"}),finePrint:n.createElement(n.Fragment,null,n.createElement(d.Tx,{id:"pro_cart.review.offer_redeem_agree",termsOfServiceLink:n.createElement(U,null)}),r&&n.createElement(n.Fragment,null," ",n.createElement(d.Tx,{id:"pro_cart.review.redeem_offer_by",date:(i=new Date(r),new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(i))})))}:t?{trackingDescriptor:u.y.COMPLETE_UPGRADE,buttonText:n.createElement(d.Tx,{id:"pro_cart.review.complete_upgrade"}),finePrint:n.createElement(d.Tx,{id:"pro_cart.review.all_editors_on_an_education_team_must_be_verified.seat_rename"})}:{trackingDescriptor:u.y.COMPLETE_PURCHASE,buttonText:n.createElement(d.Tx,{id:"pro_cart.review.complete_purchase"}),finePrint:a?n.createElement(d.Tx,{id:"pro_cart.review.your_subscription_will_automatically_renew_without_link.seat_rename"}):n.createElement(d.Tx,{id:"pro_cart.review.your_subscription_will_automatically_renew.seat_rename",cancelLink:n.createElement(c.Z6,{href:"/pricing-faq#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},n.createElement(d.Tx,{id:"pro_cart.review.canceling_is_easy"}))})}}function b(e,t,r,n,i,a){let o=new m.Lr(i),l=a&&!(0,m.Dj)()?(0,m.uP)(i,n):o.formatMoney(n,{showCents:!r}),s=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),c=(0,d.t)("all_carts.plural_months",{months:e?12:1});return(0,d.t)("all_carts.cost_equation",{money:l,editors:s,billingTime:c})}function I({currentBillingPeriod:e,numEditors:t,noCents:r,shouldStrikethroughMonthlyUnitCostIfAnnual:i,currency:a}){return e===h.tv.STUDENT?null:n.createElement(T,{isAnnual:e===h.tv.ANNUAL,numEditors:t,noCents:r,unitCost:E(e,a),currency:a,monthlyUnitCostForStrikethrough:i?E(h.tv.MONTHLY,a):void 0})}function T({isAnnual:e,numEditors:t,noCents:r,unitCost:i,monthlyUnitCostForStrikethrough:a,currency:o}){let l=new m.Lr(o),s=l.formatMoney(i,{showCents:!r}),c=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),u=(0,d.t)("all_carts.plural_months",{months:e?12:1});return"number"==typeof a&&e?n.createElement(d.Tx,{id:"all_carts.cost_equation_strikethrough_unit_price",strikethroughUnitPrice:n.createElement("span",{className:f.Jq},l.formatMoney(a,{showCents:!r})),money:s,editors:c,billingTime:u}):n.createElement(d.Tx,{id:"all_carts.cost_equation",money:s,editors:c,billingTime:u})}function w({currentBillingPeriod:e,numEditors:t,noCents:r,shouldStrikethroughMonthlyUnitCostIfAnnual:i,currency:a,isJamboardOffer:o}){return n.createElement(T,{isAnnual:e===h.tv.ANNUAL,numEditors:t,unitCost:o?0:y(e,a),noCents:r,currency:a,monthlyUnitCostForStrikethrough:i?y(h.tv.MONTHLY,a):void 0})}function S(e,t){let r=new m.Lr(t);return n.createElement(d.Tx,{id:"pro_cart.design_billing_cost_per_month.seat_rename","data-testid":"design_cost_per_editor_text",monthlyCostInDollars:r.formatMoney(E(e,t))})}function C(e,t){let r=new m.Lr(t);return n.createElement(d.Tx,{id:"pro_cart.whiteboard_billing_cost_per_month.seat_rename","data-testid":"whiteboardCostPerEditorText",monthlyCostInDollars:r.formatMoney(y(e,t))})}function O(e,t,r){return e*E(t,r)*(t===h.tv.ANNUAL?12:1)}function A(e,t,r){return e*y(t,r)*(t===h.tv.ANNUAL?12:1)}function N(e,t){return Math.ceil((1-12*e/(12*t))*100)}function L({noCents:e=!0,shouldStrikethroughMonthlyUnitCostIfAnnual:t,currency:r,numEditors:a,isJamboardOffer:o}){let l=(0,i.v9)(e=>e.payment.billingPeriod),s=(0,i.v9)(e=>e.payment.numWhiteboardEditors),c=(0,g.WI)({numWhiteboardEditors:s,billingPeriod:l});return l===h.tv.STUDENT?null:n.createElement(w,{currentBillingPeriod:l,numEditors:a||c,noCents:e,currency:r,shouldStrikethroughMonthlyUnitCostIfAnnual:t,isJamboardOffer:o})}function P(e,t){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===h.KB.CONFIRM_PAY&&t.promo}function R({editorType:e,numEditors:t,currency:r}){let i;i="design"===e?O(t,h.tv.MONTHLY,r):A(t,h.tv.MONTHLY,r);let a=new m.Lr(r);return n.createElement(d.Tx,{id:"edu.cost_per_month",cost:a.formatMoney(i)})}function k({"data-testid":e,discountPercentage:t,mainText:r,priceText:i,strikethroughPriceText:a,subText:l,showDevModeIncludedText:u}){let p=t=>void 0===e?void 0:`${e}-${t}`;return n.createElement("div",{"data-testid":e},n.createElement("div",{className:f.nt,"data-testid":p("cost-row")},n.createElement("span",{"data-testid":p("main-text")},r),n.createElement("span",{"data-testid":p("price-section")},a&&n.createElement(n.Fragment,null,n.createElement("span",{className:o()(f.zV,f.uR),"data-testid":p("strikethrough-price-text")},a),"\xa0"),n.createElement("span",{className:f.uR,"data-testid":p("price-text")},i))),u&&n.createElement(n.Fragment,null,n.createElement(c.Ki,{multiple:.2}),n.createElement(_.F,null),n.createElement(c.Ki,{multiple:.1})),n.createElement("div",{className:f.a0,"data-testid":p("sub-row")},n.createElement("span",{"data-testid":p("sub-text")},l),t&&n.createElement("span",{"data-testid":p("discount-percentage")},n.createElement(s.Ct,{className:f.R0,color:s.JV.SUCCESS,size:s.OD.LARGE,subtle:!0,text:n.createElement(d.Tx,{id:"pro_cart.sidebar.annual_savings_percentage",percentage:t})}))))}function D({payment:e,currency:t,isPromo:r,isEducationTeam:i,...a}){var o,s,c;let u,p,_,g,f;let E=new m.Lr(t),{editorType:y}=a;return"design"===y?(p=e.numDesignEditors,_=M(h.r3,null==(o=e.taxes)?void 0:o.lines)??O(p,e.billingPeriod,t),u=n.createElement(d.Tx,{id:"pro_cart.info.figma_design_editors.seat_rename",numEditors:p}),f=i?n.createElement(R,{editorType:y,currency:t,numEditors:e.numDesignEditors}):null,r?g=n.createElement(d.Tx,{id:"pro_cart.review.free_for_days",days:null==(s=e.promo)?void 0:s.promo_value}):i||(g=n.createElement(I,{currentBillingPeriod:e.billingPeriod,numEditors:e.numDesignEditors,noCents:!1,currency:t}))):(a.isJamboardOffer?(p=a.numJamboardOfferEditors,_=0):(p=a.numPaidFigjamEditors,_=M(h.qu,null==(c=e.taxes)?void 0:c.lines)??A(p,e.billingPeriod,t)),g=!i&&n.createElement(L,{noCents:!1,currency:t,numEditors:p,isJamboardOffer:a.isJamboardOffer}),u=n.createElement(d.Tx,{id:"pro_cart.info.figjam_editors.seat_rename",numEditors:p}),f=i?n.createElement(R,{editorType:y,currency:t,numEditors:e.numWhiteboardEditors}):null),r&&(f=E.formatMoney(_,{showCents:!0})),n.createElement(k,{"data-testid":`confirm-${y}-summary`,mainText:u,strikethroughPriceText:f,priceText:E.formatMoney(r||i?0:_,{showCents:!0}),subText:g,showDevModeIncludedText:"design"===y&&(0,l.BZ)().org_checkout_with_dm})}function M(e,t){return null==t?void 0:t.filter(t=>e.includes(t.product)).reduce((e,t)=>e+t.sub_total,0)}function F(e){let t=(0,g.WI)({numWhiteboardEditors:e.payment.numWhiteboardEditors,billingPeriod:e.payment.billingPeriod}),r=(0,g.dd)({numWhiteboardEditors:e.payment.numWhiteboardEditors,billingPeriod:e.payment.billingPeriod});return n.createElement(n.Fragment,null,e.payment.numDesignEditors>0&&n.createElement("div",null,n.createElement(D,{...e,editorType:p.gg.DESIGN}),n.createElement(c.Ki,{multiple:2})),r>0&&n.createElement("div",null,n.createElement(D,{...e,editorType:p.gg.WHITEBOARD,isJamboardOffer:!0,numJamboardOfferEditors:r,numPaidFigjamEditors:t}),n.createElement(c.Ki,{multiple:2})),t>0&&n.createElement("div",null,n.createElement(D,{...e,editorType:p.gg.WHITEBOARD,numJamboardOfferEditors:r,numPaidFigjamEditors:t}),n.createElement(c.Ki,{multiple:2})))}function x(e){let t=(0,g.WI)({numWhiteboardEditors:e.payment.numWhiteboardEditors,billingPeriod:e.payment.billingPeriod}),r=(0,g.dd)({numWhiteboardEditors:e.payment.numWhiteboardEditors,billingPeriod:e.payment.billingPeriod});return n.createElement(n.Fragment,null,n.createElement(D,{...e,editorType:p.gg.DESIGN}),n.createElement(c.Ki,{multiple:2}),n.createElement(D,{...e,editorType:p.gg.WHITEBOARD,numJamboardOfferEditors:r,numPaidFigjamEditors:t}),n.createElement(c.Ki,{multiple:2}))}function U(){return n.createElement(c.Z6,{href:"/tos",target:"_blank",trusted:!0},n.createElement(d.Tx,{id:"pro_cart.review.tos"}))}},678710:(e,t,r)=>{r.d(t,{TR:()=>I,yl:()=>T});var n,i=r(652983),a=r(407908),o=r(46347),l=r(716250),s=r(919325),c=r(970740),d=r(111120),u=r(124040),p=r(131826),m=r(180179),h=r(70918),_=r(275648),g=r(326714),f=r(363402),E=r(925187);function y(e){return i.createElement(p.XT,{type:"button",className:E.wt,trackingProperties:{trackingDescriptor:u.y.CANCEL},onClick:e.onClick},i.createElement(c.Tx,{id:"pro_cart.breadcrumbs.cancel"}))}var v=((n=v||{})[n.PLAN_COMPARISON=0]="PLAN_COMPARISON",n[n.CREATE_TEAM=1]="CREATE_TEAM",n[n.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",n[n.ADJUST_EDITORS=3]="ADJUST_EDITORS",n[n.SET_EDITORS=4]="SET_EDITORS",n[n.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",n[n.CONFIRM_PAY=6]="CONFIRM_PAY",n);function b(e,t,r,n){let i=t===g.tv.STUDENT,a=[];switch(e){case f.wD.CREATE_AND_UPGRADE:a.push(0),a.push(1),i?a.push(4):r||(a.push(4),a.push(5)),a.push(6);break;case f.wD.UPGRADE_EXISTING_TEAM:n===f.rD.TEAM?(a.push(3),i||a.push(5)):i?(a.push(0),a.push(3)):r?a.push(0):(a.push(0),a.push(4),a.push(5)),a.push(6);break;case f.wD.CREATE:a.push(1),a.push(2),a.push(0),n===f.rD.TEAM&&(i?a.push(4):r||(a.push(4),a.push(5)),a.push(6));break;default:(0,o.vE)(e)}return a.map(e=>(function(e){switch(e){case 0:return{step:g.KB.PLAN_COMPARISON,text:(0,c.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:g.KB.CREATE_TEAM,text:(0,c.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:g.KB.ADD_COLLABORATORS,text:(0,c.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:g.KB.CHOOSE_PLAN,text:(0,c.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:g.KB.CHOOSE_PLAN,text:(0,c.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:g.KB.PAYMENT_AND_ADDRESS,text:(0,c.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:g.KB.CONFIRM_PAY,text:(0,c.t)("pro_cart.breadcrumbs.review")}}})(e))}function I(e,t,r,n,i,a){let o=b(t,r,n,i).map(e=>e.step),l=o.indexOf(e);return a=a||o[0],-1===l?a:o[l+1]}function T(e){var t;let{selectedView:r}=e,{teamId:n,paymentStep:o,teamFlowType:c}=r,u=(0,a.I0)(),p=(0,a.v9)(e=>e.payment.billingPeriod),v=null==(t=(0,h.xJ)())?void 0:t.id,I=(0,a.v9)(e=>e.payment.promo),T=b(c,p,I,e.selectedView.planType||f.rD.UNDETERMINED),w=T.findIndex(e=>e.step===o);return i.createElement("div",{className:E.yP},i.createElement(y,{onClick:()=>{var e;(0,l.nW)(),(0,_.aC)(u),(0,f.GH)(c)&&null===n&&(0,m.bC)(v);let t=(0,l.BZ)().ps_benchmark;t&&v?n?u(d.NO({workspace:{userId:v,teamId:n,orgId:null},view:{view:"recentFiles"}})):u(d.fv(r.previousView||{view:"recentFiles"})):u(d.fv(r.previousView||(n?{view:"team",teamId:n}:{view:"recentFiles"}))),null==(e=r.callbackOnClose)||e.call(r)}}),T.map((e,t)=>i.createElement(s.ut,{key:e.text,selected:o===e.step,number:t+1,text:e.text,canClick:t<w,lightText:!0,onClick:()=>{u(d.fv({...r,paymentStep:e.step,billingPeriod:p===g.tv.UNSPECIFIED?void 0:p,planType:(0,f.F1)(c,e.step)?f.rD.UNDETERMINED:r.planType,teamFlowType:(0,f.Lr)(c)&&e.step===g.KB.PLAN_COMPARISON?f.wD.CREATE_AND_UPGRADE:r.teamFlowType}))}})))}},449606:(e,t,r)=>{r.d(t,{BA:()=>A,Mz:()=>N,ts:()=>O});var n,i=r(652983),a=r(407908),o=r(46347),l=r(220518),s=r(618723),c=r(782051),d=r(212984),u=r(970740),p=r(721127),m=r(841017),h=r(163853),_=r(239342),g=r(236750),f=r(31642),E=r(435613),y=r(644383),v=r(131826),b=r(448694),I=r(801998),T=r(291904),w=r(82238);let S=r(753224),C=r(619483);var O=((n=O||{}).ORG_TEAM_SETTINGS="org_team_settings",n.PRO_TEAM_SETTINGS="pro_team_settings",n.ORG_ADMIN_TEAMS_TABLE="org_admin_teams_table",n.PROJECT_SETTINGS="project_settings",n);let A=e=>{switch(e){case"org_team_settings":case"pro_team_settings":case"org_admin_teams_table":return!1;case"project_settings":return!0;default:(0,o.vE)(e)}},N=(0,T.Y3)(function(e){var t,r,n,o,T;let O;let N=(0,a.I0)(),L=(0,a.oR)(),P=(0,a.v9)(e=>e.currentUserOrgId),R=(0,a.v9)(e=>P&&e.orgById[P]),k=R&&(null==(t=R.shared_org_license_group_settings)?void 0:t.external_collaboration_controls),[D,M]=i.useState(1),[F,x]=i.useState(""),[U,B]=i.useState(""),[V,G]=i.useState(""),[H,W]=i.useState(),[K,z]=i.useState(null),[Z,Y]=i.useState(null),[j,$]=i.useState(null),[q,X]=i.useState(),[J,Q]=i.useState(!1),[ee,et]=i.useState(!1);(T=O||(O={})).URL_FORMAT="url_format",T.SAME_ORG="same_org",T.EMAIL_FORMAT="email_format",T.EMAIL_MATCH="email_match",T.TRANSFER_ALREADY_INITIATED="transfer_already_initiated",T.NETWORK_OR_OTHER_ERROR="network_or_other_error",T.SAME_TEAM="same_team",T.NON_ORG_DEST_TEAM="non_org_dest_team",T.VIEW_OR_INVITE_ONLY_FOLDER="view_or_invite_only_folder";let er=A(e.entryPoint),en=er?"project":"team";if(er&&!e.folder||!er&&!e.team)throw Error(`transferringProject: ${er}, but the project/team was not present`);let ei=(null==(r=e.team)?void 0:r.id)??(null==(n=e.folder)?void 0:n.team_id),ea=e=>i.createElement("a",{className:w.he,href:"https://help.figma.com/hc/articles/10250387712407",target:"_blank"},e||i.createElement(u.Tx,{id:"asset_transfers.request_modal.learn_more"})),eo=()=>{N(p.eI())};i.useEffect(()=>{var t;q&&((null==(t=e.folder)?void 0:t.id)?(0,b.Qs)("Project transfer error",e.folder.id,ei,L.getState(),{error:q}):(0,b.H)("Team transfer error",ei,L.getState(),{error:q}))},[q,ei,L,null==(o=e.folder)?void 0:o.id]);let el=()=>{switch(q){case"url_format":return i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.this_link_isn_t_valid"});case"same_org":return er?i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_projects_within_your_own_organization"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_teams_within_your_own_organization"});case"email_format":return i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.please_use_a_valid_email_format"});case"email_match":return i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.this_email_isn_t_associated_with_the_destination_linked_above",destinationType:e.folder?"team":"organization"});case"same_team":return i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.you_don_t_need_a_transfer_to_move_projects_within_your_own_team"});case"non_org_dest_team":return i.createElement(u.Tx,{id:"asset_transfers.request_modal.errors.this_links_to_a_team_that_isn't_able_to_receive_transfers"})}},es=J?i.createElement(s.VG,{disabled:!0},i.createElement(c.jz,null)):i.createElement(s.VG,{disabled:2===D&&!(V&&F)||J,onClick:()=>{var t;if(X(null),1===D){M(2);return}if(F&&!(0,l.Jh)(F)){X("email_format");return}2===D&&Q(!0);let r={transfer_type:en,folder_id:null==(t=e.folder)?void 0:t.id,team_id:ei,destination_user_email:F,destination_team_id:Z,destination_org_id:H,message:""===U?null:U};f.ZP.post("/api/asset_transfer/create_request",r).then(()=>{e.onRequestClose(),eo(),N(y.R.enqueue({message:"Transfer request sent"}))},e=>{"Destination user not found"===e.message||"Destination user is not part of the provided destination org"===e.message||"Destination user is not part of the provided destination team"===e.message?(X("email_match"),Q(!1)):"This team already has a transfer initiated"===e.message?(X("transfer_already_initiated"),eo(),N(y.R.enqueue({message:"A team transfer was already initiated for this team.",error:!0})),Q(!1)):"This project already has a transfer initiated"===e.message?(X("transfer_already_initiated"),eo(),N(y.R.enqueue({message:"A project transfer was already initiated for this team.",error:!0}))):"Folder is invite-only"===e.message||"Folder is view-only"===e.message?(X("view_or_invite_only_folder"),eo(),N(y.R.enqueue({message:"Projects that are view-only or invite-only can't be transferred.",error:!0}))):(X("network_or_other_error"),eo(),N(y.R.enqueue({message:e.message||"Something went wrong - check your connection and try again",error:!0})),Q(!1))})}},1===D?i.createElement(u.Tx,{id:"asset_transfers.request_modal.next"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.request_transfer"}));return i.createElement(v.Ui,{name:e.folder?"Project Transfer Request Modal":"Team Transfer Request Modal",properties:{folderId:e.folder?e.folder.id:"",teamId:ei,entryPoint:e.entryPoint}},i.createElement(g.ge,{containerClassName:w.oC,title:i.createElement(u.Tx,{id:"asset_transfers.request_modal.start_this_transfer"}),onClose:eo,minWidth:380,maxWidth:380},i.createElement("div",{className:w.Tr},i.createElement("div",{className:w.Dc},i.createElement("div",{className:w.bX},i.createElement(E.n,{className:w.qv,svg:S}),i.createElement("div",{className:w.tJ},i.createElement(u.Tx,{id:"asset_transfers.request_modal.once_a_transfer_is_accepted_by_an_external_organization_it_can_t_be_undone"})))),i.createElement("div",{className:w.er},1===D?i.createElement("div",null,i.createElement("p",{className:d.cx.pt24.$},er?i.createElement(u.Tx,{id:"asset_transfers.request_modal.you_can_transfer_this_project_and_its_content_to_another_organization"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.you_can_transfer_this_team_and_its_content_to_another_organization"})),i.createElement("p",{className:d.cx.pt16.$,style:{fontWeight:600}},i.createElement(u.Tx,{id:"asset_transfers.request_modal.next_steps"})),i.createElement("ul",{className:w.pb},i.createElement("li",{className:w.qb},i.createElement(u.Tx,{id:"asset_transfers.request_modal.you_ll_need_the_email_address_of_a_contact_person",strongPlan:i.createElement("span",{className:w.Se},i.createElement(u.Tx,{id:"asset_transfers.request_modal.enterprise_or_organization_plan"})),learnMore:ea()})),i.createElement("li",{className:w.qb},e.folder?i.createElement(u.Tx,{id:"asset_transfers.request_modal.ask_your_contact_person_for_a_link_to_a_team_in_their_figma_org",learnMore:ea()}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.ask_your_contact_person_for_a_link_to_their_figma_organization_so_the_team_transfers_to_the_right_place",learnMore:ea()})),i.createElement("li",{className:w.qb},i.createElement(u.Tx,{id:"asset_transfers.request_modal.when_you_send_your_request_the_contact_person_and_their_organization_admins_will_be_notified"})),k?i.createElement("li",{className:w.qb},er?i.createElement(u.Tx,{id:"asset_transfers.request_modal.once_an_admin_accepts_the_project_will_be_transferred"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.once_an_admin_accepts_the_team_will_be_transferred"})):i.createElement("li",{className:w.qb},er?i.createElement(u.Tx,{id:"asset_transfers.request_modal.once_an_admin_accepts_the_project_will_be_transferred_some_of_your_members_may_still_have_access_to_the_project",learnMore:ea()}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.once_an_admin_accepts_the_team_will_be_transferred_some_of_your_members_may_still_have_access_to_the_team",learnMore:ea()})),k&&i.createElement("li",{className:w.qb},er?i.createElement(u.Tx,{id:"asset_transfers.request_modal.ask_the_other_organization_to_invite_back_members_due_to_external_collaboration_controls_for_project"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.ask_the_other_organization_to_invite_back_members_due_to_external_collaboration_controls_for_team"})))):i.createElement("div",null,i.createElement("div",{className:w.MJ},i.createElement("p",{className:d.cx.pt24.$,style:{fontWeight:600}},i.createElement(u.Tx,{id:"asset_transfers.request_modal.add_a_link"})),i.createElement("p",{className:d.cx.pt12.$},i.createElement(u.Tx,{id:"asset_transfers.request_modal.add_link_here_description",destinationType:e.folder?"team":"organization",learnMore:ea(i.createElement(u.Tx,{id:"asset_transfers.request_modal.learn_how_to_find_the_link"}))})),i.createElement(s.Sc,{onChange:e=>G(e.currentTarget.value),onBlur:t=>{W(null),z(null),Y(null),et(!1);let r=(0,m.zk)(V);if(r&&e.folder){X("non_org_dest_team");return}let n=(0,m.xk)(V),i=(0,I.Kn)(V);if(e.folder&&!n||!i){X("url_format");return}if(i&&(0,I.jn)(V)===P){X("same_org");return}let a=e.folder?n&&i:i;if(a){let t=(0,I.jn)(V);if(h.uU.getOrgName({orgId:t}).then(({data:r})=>{("url_format"===q||"same_org"===q)&&X(null),W(t),t===P||e.folder||(z(r.meta),et(!0))}),e.folder){let e=(0,m.KK)(V);_.j.getTeamName({teamId:e}).then(({data:t})=>{("url_format"===q||"non_org_dest_team"===q)&&X(null),Y(e),e!==ei&&($(t.meta),et(!0))})}}},className:"url_format"===q||"same_org"===q||"same_team"===q||"non_org_dest_team"===q?w.nO:w.FU,value:V,placeholder:(0,u.t)("asset_transfers.request_modal.web_link")}),("url_format"===q||"same_org"===q||"same_team"===q||"non_org_dest_team"===q)&&i.createElement("span",{className:w.Vv},el()),ee&&i.createElement("div",{className:w.s7},i.createElement("div",{className:w.rb},i.createElement(E.n,{className:w.qv,svg:C}),i.createElement("div",{className:w.OV},e.folder?""===j?i.createElement(u.Tx,{id:"asset_transfers.request_modal.team_verified"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.data_meta_verified",assetName:j}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.data_meta_verified",assetName:K}))))),i.createElement("span",{className:d.cx.pt8.$,style:{fontWeight:600}},i.createElement(u.Tx,{id:"asset_transfers.request_modal.who_to_notify"})),i.createElement(s.Sc,{onChange:e=>x(e.currentTarget.value),className:"email_format"===q||"email_match"===q?w.nO:w.FU,value:F,placeholder:(0,u.t)("asset_transfers.request_modal.email_address")}),("email_format"===q||"email_match"===q)&&i.createElement("span",{className:d.cx.colorTextDanger.$}," ",el()," "),i.createElement(s.Sc,{onChange:e=>B(e.currentTarget.value),className:w.yw,value:U,type:"textarea",placeholder:(0,u.t)("asset_transfers.request_modal.add_a_message_if_you_d_like")}))),i.createElement("div",{className:w.QE},i.createElement("span",{className:w.S6},i.createElement(u.Tx,{id:"asset_transfers.request_modal.step_1_of_2",stepNumber:D})," "),i.createElement(s.pJ,{onClick:1===D?eo:()=>{M(1)}},1===D?i.createElement(u.Tx,{id:"asset_transfers.request_modal.cancel"}):i.createElement(u.Tx,{id:"asset_transfers.request_modal.back"})),es))))},"AssetTransferRequestModal")},516413:(e,t,r)=>{r.d(t,{L:()=>eo,o:()=>ea});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(600486),s=r(764150),c=r(239299),d=r(716250),u=r(810373),p=r(669277),m=r(381846),h=r(217810),_=r(571529),g=r(925960),f=r(782051),E=r(177944),y=r(435613),v=r(212984),b=r(970740),I=r(65249),T=r(111120),w=r(489465),S=r(266377),C=r(858368),O=r(534187),A=r(448694),N=r(219160),L=r(659994),P=r(343878),R=r(809377),k=r(435804),D=r(761767),M=r(862610),F=r(485091),x=r(471122),U=r(733609),B=r(153574),V=r(656077),G=r(112602),H=r(868894),W=r(542936),K=r(312938),z=r(770329),Z=r(176639),Y=r(198059),j=r(225468),$=r(923895),q=r(334079),X=r(206279),J=r(847495),Q=r(210300),ee=r(544430),et=r(41295),er=r(20825);let en=r(122429);function ei(e){var t,r;let a=(0,i.I0)(),l=(0,U.usePermissionsState)(),c=(0,k.A6)(),u=(0,i.v9)(e=>e.currentUserOrgId),h=(0,i.v9)(e=>e.currentTeamId),g="recentsAndSharing"===c.view&&"shared-projects"===c.tab?(null==(t=e.folder.parent_org)?void 0:t.id)??null:u,y="recentsAndSharing"===c.view&&"shared-projects"===c.tab?(null==(r=e.folder.parent_team)?void 0:r.id)??null:h,v=(0,d.BZ)().ps_benchmark,b=v?y:null,I=(0,q.f)(),w=(0,R.L)(),O=(0,d.BZ)().ps_benchmark,L=(0,p.mU)(M.FavoritesByResourceId,{resourceId:e.folder.id,resourceType:D.IK.FOLDER,orgId:g,teamId:g?null:y}),P=(0,$.E)({currentOrgId:g,currentTeamId:(b??y)||null}),x=n.useMemo(()=>{if("loaded"===L.status){if(v||I)return void 0!==(0,N.QR)(L.data,D.IK.FOLDER)}else if("loaded"===P.status)return(0,N.wn)(P.data,e.folder.id);return v||I?!!e.folder.is_favorited:!!e.folder.is_subscribed},[e.folder.id,P,L,I,v,e.folder.is_favorited,e.folder.is_subscribed]),B=t=>{e.isSearch||a(S.zD({folderId:t}))},V=()=>{var t,r;a(T.Hg({clickedResourceType:"team",resourceIdOrKey:e.folder.id})),(0,A.Qs)("file_browser_folder_click",e.folder.id,e.folder.team_id,l,{selectedView:"recentsAndSharing"===e.selectedView.view?e.selectedView.tab||G.D.RECENTLY_VIEWED:e.selectedView.view,planFilterId:(null==(t=e.currentPlanFilter)?void 0:t.planId)||null,planFilterType:(null==(r=e.currentPlanFilter)?void 0:r.planType)||null,viewMode:"grid"}),a(T.B4(e.folder.id))},H=n.useCallback(t=>{var r;let i=t=>{a(T.ku({fileKey:t.key,entrypoint:"folder list card"})),a(C.qB({planId:u||W.y}));let r="recentsAndSharing"===e.selectedView.view||"folder"===e.selectedView.view?e.selectedView:void 0;(0,s.km)(u,t.parent_org_id,h,t.team_id)?(0,s.wD)(t.key,l.user,u,O?h:null,e.selectedView):a(T.fv({view:"fullscreen",fileKey:t.key,editorType:t.editor_type||"design",prevSelectedView:r}))},o=e.useLGPerms?!!(null==(r=e.folder.folderPerms)?void 0:r.canCreateDesignFile):(0,U.canCreateFile)(e.folder.id,l,D.gg.DESIGN),c=t.slice(0,4).map(t=>n.createElement(ec,{key:t.key,file:t,teamId:e.folder.team_id,onFileClick:i,selectedView:e.selectedView}));for(;c.length<4;)c.push(n.createElement(ed,{key:`${c.length}`,folder:e.folder,canCreateFile:o}));return c},[a,e.folder,e.selectedView,u,h,O,e.useLGPerms,l]),K=e.folderFiles.length,z=e.isSearch?"loaded":"loaded"===e.loadedFolders[e.folder.id],Z=n.useMemo(()=>e.folderFiles.sort((e,t)=>e.touched_at<t.touched_at?1:-1).slice(0,15),[e.folderFiles]);return n.createElement("div",{ref:(0,m.Z)(e.folderRef),className:o()(er.VG,{[er.ZM]:!0}),onClick:e=>{let t=_.ZP.mac?e.metaKey:e.ctrlKey;t||e.shiftKey||(e.preventDefault(),e.stopPropagation(),2===e.detail&&V())},onContextMenu:t=>{t.stopPropagation(),t.preventDefault();let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};a(T.SP({type:J.W3.NAV_FOLDER_CONTEXT_MENU,data:{folder:{...(0,F.ld)(e.folder),folderPerms:e.folder.folderPerms,description:e.folder.description,canEdit:(0,U.canEditFolder)(e.folder.id,l),isSubscribed:x},useLGPerms:e.useLGPerms,targetRect:r}}))},"data-onboarding-key":e.dataOnboardingKey,tabIndex:0},n.createElement("div",{className:er.Tp}),n.createElement("div",{className:er.Wu},n.createElement(E.X,{onIntersectionChange:t=>{t.isIntersecting&&B(e.folder.id)}}),!z&&n.createElement(f.jz,null),z&&n.createElement("div",{className:er.$Y},H(Z)),n.createElement(n.Fragment,null,n.createElement("div",{className:er.Nk},n.createElement("div",{className:o()(er.$C,{[er.Yc]:(null==w?void 0:w.type)==="organize-favorite-menu"}),tabIndex:0},n.createElement(Y.w,{folder:{...e.folder,is_subscribed:x},containerStyle:er.E0}))),n.createElement("div",{className:er.Me},n.createElement(es,{...e,folder:e.folder,folderName:e.folderName,folderTeamName:e.folderTeamName,folderOwnerName:e.folderOwnerName,folderLastUpdated:e.folderLastUpdated,folderFileCount:K,showTeamNameOrAuthor:!1,showFavoriteStar:!1,hideSubscribe:!!e.hideSubscribe,isSharerInfoIncluded:e.isSharerInfoIncluded})))))}let ea=(0,i.$j)((e,t)=>{let r=e.fileKeysByFolderId[t.folder.id]??[],n=(e.repoIdsByFolderId[t.folder.id]??[]).map(t=>e.repos[t].default_file_key).filter(e=>null!==e),i=[...r,...n].map(t=>e.fileByKey[t]).filter(h.lm),a=e.selectedView;return{...(0,et.$)(e,t.folder),loadedFolders:e.loadedFolders,folderFiles:i,selectedView:a}})(ei),eo=ei,el={open:!0,openNewTab:!0,share:!0,copyLink:!0,delete:!0,moveFile:!0};function es(e){let t=e.folder,a=(0,i.v9)(e=>e.orgById),o=(0,x.q)(),l=(0,U.usePermissionsState)(),s=e.folderTeamName,c=e.folderOwnerName&&(0,b.t)("team_view.folder_list_card.owner_handle",{folderOwnerName:e.folderOwnerName}),u=t.shared_by_user&&t.shared_by_user.name?n.createElement(b.Tx,{id:"team_tile.shared_by",shared_by_text:t.shared_by_user.name}):t.shared_at&&n.createElement("div",{className:er.Ys},n.createElement(b.Tx,{id:"swy_tile.shared"}),n.createElement(g.Lt,{date:new Date(t.shared_at)})),p=t.parent_org||t.parent_team,m=n.createElement(n.Fragment,null,n.createElement("div",{className:er.Wi},n.createElement(I.x,{fontSize:11,i18nId:"team_view.folder_list_card.number_of_files",i18nParams:{numFiles:e.folderFileCount}}),n.createElement("div",null,"\xa0\xb7\xa0"),n.createElement(I.x,{fontSize:11,truncate:!0},p&&n.createElement(X.E,{entityId:p.id,entityName:p.name||void 0,imgUrl:p.imgUrl||void 0}),u))),h=t.parent_org_id&&a[t.parent_org_id]||t.team_id&&o[t.team_id],_=h&&"search"===e.selectedView.view,f=_?n.createElement("div",{className:v.cx.flex.flexRow.itemsCenter.pre.$},n.createElement(X.E,{entityId:h.id,entityName:h.name,imgUrl:h.img_url}),s&&n.createElement(n.Fragment,null,s+" \xb7 "),n.createElement(b.Tx,{id:"team_view.folder_list_card.number_of_files",numFiles:e.folderFileCount})):n.createElement(n.Fragment,null,n.createElement(b.Tx,{id:"team_view.folder_list_card.number_of_files",numFiles:e.folderFileCount}),e.folderLastUpdated&&n.createElement(b.Tx,{id:"team_view.folder_list_card.last_updated_at",lastUpdatedTime:n.createElement(g.Lt,{date:e.folderLastUpdated})}));return n.createElement("div",{className:er.i2},n.createElement("div",{className:er.eL},n.createElement("div",{className:er.LP},n.createElement(I.x,{fontSize:13,fontWeight:"medium",truncate:!0},e.folderName),(()=>{var t;let i=r(174341);return(0,d.BZ)().team_root_folder_conversion&&(0,U.canEditFolder)(e.folder.id,l)&&(null==(t=e.folder.settings)?void 0:t.legacy_team_root_folder)&&"Untitled project"===e.folder.path?n.createElement(y.n,{className:er.DJ,svg:i,"data-tooltip-type":j.fR.SPECIAL,"data-tooltip-interactive":!0,"data-tooltip":j._7.TEAM_ROOT_FOLDER_RENAME,"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-folder-id":e.folder.id}):null})()),n.createElement(z.l,{...e})),e.showTeamNameOrAuthor&&n.createElement("div",{className:er.$P},s||c),n.createElement("div",{className:er.pR},n.createElement("div",{className:er.Pu},n.createElement("div",{className:er.rc},(t.shared_by_user||t.shared_at)&&e.isSharerInfoIncluded?m:f))))}function ec(e){var t,r,a;let s=(0,i.I0)(),d=(0,i.v9)((0,B.o)((0,ee.S)(e.file.key))),u=(0,i.v9)(e=>e.dropdownShown),p=(null==(a=null==(r=null==(t=null==u?void 0:u.data)?void 0:t.tile)?void 0:r.file)?void 0:a.key)===e.file.key,m=t=>{t.preventDefault(),t.stopPropagation(),c.YO&&(0,l.L9)("Open File Click",{fileKey:e.file.key,uiSelectedView:JSON.stringify({teamId:e.teamId})}),e.onFileClick(e.file)},h=e.file,_="whiteboard"===h.editor_type?er.uK:er.kR,g=h.thumbnail_guid?er.ZU:er.Q1,f={type:P.YU.FILE,file:h};return n.createElement("button",{className:o()(er.lX,{[er.hv]:p}),onClick:e=>{2===e.detail&&m(e)},draggable:!1,tabIndex:0,onContextMenu:t=>{t.preventDefault(),t.stopPropagation();let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};s(T.SP({type:(0,ee.S)(e.file.key),data:{tile:f,targetRect:r}})),s(O.LA()),s(O.pz({type:H.m.FILES,tiles:[f]}))}},n.createElement("div",{className:er.BH},n.createElement("div",{className:_,style:{backgroundColor:(0,L.YI)(h.client_meta)}},h.has_file_link_password||h.has_proto_link_password?n.createElement("div",{className:o()(g,er.KW)},n.createElement(K.HE,null)):n.createElement("div",{className:g,style:{backgroundImage:`url(${h.thumbnail_url})`}}))),n.createElement("div",{className:er.v_},n.createElement("div",{className:er.T5},h.name)),d&&n.createElement(Q.b,{tileActions:el,tile:f,openTile:m,recentsIndexToLog:void 0,dropdownVisible:d}))}function ed(e){let t=(0,i.I0)(),r=(0,Z.JX)(),a=(0,i.v9)(t=>e.folder.team_id?t.teams[e.folder.team_id]:void 0);return n.createElement("a",{href:"#",rel:"noopener",role:"button",className:er.sZ,onClick:n=>{n.preventDefault(),n.stopPropagation(),e.canCreateFile&&t(w.ae({state:r,editorType:D.gg.DESIGN,folderId:e.folder.id,team:a,from:V.L7.FILE_BROWSER_FOLDER_EMPTY_TILE,openNewFileIn:(0,u.v8)(n)?V.JD.NEW_TAB:V.JD.SAME_TAB}))},draggable:!1,tabIndex:0,onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},e.canCreateFile&&n.createElement(y.n,{svg:en}))}},683843:(e,t,r)=>{r.d(t,{N:()=>f,t:()=>g});var n=r(652983),i=r(407908),a=r(46347),o=r(111120),l=r(534187),s=r(343878),c=r(435804),d=r(112602),u=r(916903),p=r(334489),m=r(175586),h=r(45426),_=r(100352);let g=e=>{switch(e.view){case"recentsAndSharing":return e.tab===d.D.SHARED_FILES?h.LH:h.mu;case"search":return h.oP;default:return h.mu}};function f(e){let t=(0,i.I0)(),r=(0,c.A6)(),{nonSelectableFirstColumn:d,columns:h}=g(r);return n.createElement(p.B,{config:h,currentSort:{field:e.sortConfig.key,isDescending:e.sortConfig.dir===u.qP.DESC},handleContextMenu:e.onContextMenuOverride?e.onContextMenuOverride:(e,r,n)=>{t(l.LA()),t(l.pz({type:s.bT[e[0].type],tiles:e})),t(o.SP({type:"tile-actions-dropdown",data:{tile:e[0],targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n,enableRestore:r.shiftKey&&r.altKey}}))},handleDragDataTransfer:(e,t)=>{let r=[],n=[],i=[];e.forEach(e=>{switch(e.type){case s.YU.FILE:n.push(e.file);break;case s.YU.PROTOTYPE:i.push(e.prototype);break;case s.YU.REPO:r.push(e.repo);break;case s.YU.PROJECT:case s.YU.PINNED_FILE:(0,a.q8)(!0,"Do not expec to be rendering project or pinned tiles here");break;case s.YU.OFFLINE_FILE:break;default:(0,a.vE)(e)}}),!n.length||r.length||i.length?n.length||!r.length||i.length?n.length||r.length||!i.length?t.setTilesData(n,r,i):t.setPrototypesData(i):t.setReposData(r,[]):t.setFigFilesData(n)},handleOpenItem:(t,r,n)=>e.openTile(t,r,n),handleSortBy:e.sortBy,isDraggable:!e.disableItemDrag,items:e.items,nonSelectableFirstColumn:d,multiselectDisabled:e.multiSelectDisabled,renderItemDragImage:e=>n.createElement(m.B,{tile:e}),rowClassName:_.Pt,shouldFocusOnLoad:e.shouldFocusOnLoad})}},893262:(e,t,r)=>{r.d(t,{Bw:()=>y,Lf:()=>m,Wl:()=>f});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(111120),c=r(199344),d=r(13155),u=r(901116),p=r(147369),m=((n=m||{}).DEFAULT="default",n.ADMIN_SETTINGS="adminSettings",n);class h extends u.O{constructor(){super(...arguments),this.styleOverrides=()=>({base:p.js})}}class _ extends u.O{constructor(){super(...arguments),this.styleOverrides=()=>({base:p.xT,selected:p.Ls})}}class g extends i.PureComponent{constructor(e){super(e),this.shouldShowDropdown=()=>!!(this.props.dropdownKey&&this.props.dropdownShown&&this.props.dropdownShown.type===this.props.dropdownKey&&this.props.dropdownShown.data&&this.props.dropdownShown.data.targetRect),this.toggleDropdown=()=>{let e=this.dropdownRef.current;this.props.dropdownKey&&e&&(this.props.dropdownShown?this.props.dispatch(s.kp()):this.props.dispatch(s.SP({type:this.props.dropdownKey,data:{targetRect:e.getBoundingClientRect()}})))},this.getTabClassWithStyling=()=>"adminSettings"===this.props.variant?_:h,this.dropdownRef=i.createRef()}render(){let e=this.getTabClassWithStyling();return i.createElement(e,{tab:this.props.tab,selectedTab:this.props.selectedTab,onClick:this.props.onClick??this.toggleDropdown,disabled:this.props.disabled,tooltipText:this.props.tooltipText,showTooltipWhenDisabled:this.props.showTooltipWhenDisabled,dataText:this.props.dataText},i.createElement("span",{ref:this.dropdownRef,className:p.UR,"data-onboarding-key":this.props["data-onboarding-key"]},this.props.children),this.props.dropdownKey&&i.createElement(i.Fragment,null,i.createElement(c.T,{showingDropdown:this.shouldShowDropdown(),dropdownKey:this.props.dropdownKey,dispatch:this.props.dispatch,className:l()(p.Sf,this.props.chevronClassName),svgContainerClassName:p._i}),this.shouldShowDropdown()&&i.createElement(d.AQ,{targetRect:this.props.dropdownShown.data.targetRect,lean:"right",minWidth:120,propagateCloseClick:!0},this.props.dropdownOptions)))}}let f=g.name,E=e=>({dropdownShown:e.dropdownShown});function y(){return(0,a.$j)(E)(g)}},811327:(e,t,r)=>{r.d(t,{I:()=>h,N:()=>m});var n=r(652983),i=r(464759),a=r(87608),o=r.n(a),l=r(204829),s=r(435613),c=r(805992),d=r(954463);let u=e=>e.stopPropagation(),p=r(137817),m=n.forwardRef((e,t)=>n.createElement("div",{key:"topBarWrapper",role:"none",onClick:u},n.createElement(h,{...e,children:void 0,recordingKey:e.recordingKey,ref:t}),e.children));class h extends l.wA{constructor(e){super(e),this.onClick=l.hO(this,"click",e=>{this.props.onClick&&!this.props.onClickForKeyDownOnly&&this.props.onClick(e)}),this.onKeyDown=e=>{var t,r;"Escape"===e.key&&(e.preventDefault(),null==(t=this.wrapperRef.current)||t.blur(),null==(r=this.buttonRef.current)||r.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))},this.wrapperRef=n.createRef(),this.buttonRef=n.createRef()}render(){let e="";this.props.fullHeightSidebarsEnabled||(e=this.props.selected?d.hv:this.props.enabled?d.am:d.JU);let t=n.createElement(n.Fragment,null,!this.props.hidden&&!this.props.useSvgNode&&this.props.svg&&this.props.fallbackSvg&&n.createElement(c.f,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}),!this.props.hidden&&!this.props.useSvgNode&&this.props.svg&&!this.props.fallbackSvg&&n.createElement(s.n,{svg:this.props.svg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}),!this.props.hidden&&this.props.useSvgNode&&this.props.svgNode&&n.createElement("span",null,this.props.svgNode),this.props.text&&n.createElement("span",{className:this.props.textStyle||(this.props.svg?d.PS:d.fL)},this.props.text),this.props.showIndicator&&n.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:d._y}),this.props.showChevron&&(this.props.isUI3?n.createElement("div",{className:d.Ot},n.createElement(i.T,null)):n.createElement(s.n,{svg:p,className:d.GT})),this.props.children);return n.createElement("button",{id:this.props.id,ref:this.buttonRef,className:o()(e,this.props.narrow?d.Ln:null,this.props.className),onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0,onClick:u,"data-tooltip-type":this.props["data-tooltip-type"],"data-tooltip":this.props["data-tooltip"],"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,onKeyDown:this.onKeyDown,"aria-label":this.props.ariaLabel,"aria-expanded":this.props["aria-expanded"],"aria-controls":this.props["aria-controls"],"aria-haspopup":this.props["aria-haspopup"],"data-fullscreen-intercept":!0},t)}}h.displayName="TopBarAction",h.defaultProps={enabled:!0,hidden:!1}},579006:(e,t,r)=>{r.d(t,{JP:()=>n,K3:()=>i,wC:()=>o});let n=e=>!!(e.deeplink&&e.preferred_attachments.map(e=>e._block_type).includes("ClientActionableAttachment"))&&a(e.deeplink.href),i=e=>e.deeplink?o(e.deeplink.href):null,a=e=>{let t=new URL(e);return"file"===t.pathname.split("/")[1]&&t.hash.length>1&&"#-1"!==t.hash},o=e=>{if(!1===a(e))return null;let t=new URL(e),r=t.pathname.split("/");if(r.length<3)return null;let n=r[2],i=t.hash.slice(1);return{fileKey:n,threadId:i,deeplink:e}}},861235:(e,t,r)=>{r.d(t,{m:()=>i});var n=r(337167);let i=(0,n.cn)(void 0)},698605:(e,t,r)=>{r.d(t,{CH:()=>E,Le:()=>I,Uh:()=>f,Vg:()=>_,Zc:()=>v,fj:()=>g,vh:()=>y,wD:()=>b,z8:()=>T});var n=r(899063),i=r(600486),a=r(141757),o=r(542881),l=r(716250),s=r(337167),c=r(246905),d=r(764850),u=r(538483),p=r(616466),m=r(861235);let h=(0,a.lu)("#2c2c2c");function _(e){let t=(0,a.lu)(e);if(!t)return!1;let r=.2126*t.r+.7152*t.g+.0722*t.b;return r<.6}function g(e){return"dark"===e?h:a.Cj}function f(e){try{if(e)return(0,a.lu)(e)}catch(e){console.error(e)}}function E(){let e=(0,p.Mo)("base"),t=e.filter(e=>!(0,a.l7)(e,(0,p.Ol)(d.I7V.BLACK,"base"))).map(e=>({option:e})),r=(0,p.Mo)("baseLight"),n=r.map(e=>({option:e}));return[{option:h},...t,...n]}function y(e,t,r){try{if((0,l.BZ)().workspace_colors_a11y_ks)return t;let n=(0,a.lu)(t),s=_(n),c=(0,o.iq)(t,!s,s);return r&&c!==t&&(0,i.L9)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:c}),c}catch(e){console.error(e)}return t}function v(e){var t;let r=(0,s.Dv)(m.m);if(!e||"unset"===r)return;let i=((null==(t=e.colorConfig)?void 0:t.colors)??[])[0];return r?(0,n.colorToHex)(r):i}function b(e){return!!e&&"unset"!==e}function I(e){let t=(0,c.Fg)(),r=v(e);if(!(r&&("light"===t||"dark"===t)))return;let n=_(r);return n!==("dark"===t)}function T(e){return e&&e!==u.F&&"colorConfig"in e?e:void 0}},475721:(e,t,r)=>{r.d(t,{I_:()=>ee,Ur:()=>et});var n=r(652983),i=r(407908),a=r(764150),o=r(346887),l=r(448501),s=r(814754),c=r(19516),d=r(36940),u=r(869949),p=r(618723),m=r(435613),h=r(970740),_=r(504552),g=r(131826),f=r(135458),E=r(493359),y=r(269658),v=r(70918);let b=()=>{let e=(0,i.v9)(e=>e.selectedView),t=!1;return"fullscreen"===e.view&&(t=e.isMeetHardware||!1),t},I=()=>{let e=(0,f.DO)(),t=y.V.getState().selectedView,r=(null==t?void 0:t.view)==="fullscreen"?t.claim:null,n=(0,f.tm)("google_hardware_claim_file"),i=(0,v.xJ)();if(e&&t&&r&&!i){if("signup"===r)return()=>{n(u.zd.SIGN_UP)};if("login"===r)return()=>{n(u.zd.SIGN_IN)}}return()=>{}};var T=r(838903),w=r(343328),S=r(764850),C=r(187436),O=r(435804),A=r(54548),N=r(669277),L=r(721154),P=r(111120),R=r(200273),k=r(862610),D=r(795153),M=r(733609),F=r(900471),x=r(599900),U=r(34366);let B=r(40238);function V(e){let{buttonText:t,buttonOnClick:r,message:i}=e;return n.createElement(F.M,{className:U.nC},n.createElement("div",{className:U.Mv},n.createElement("div",{className:U.F8},n.createElement(m.n,{svg:B,className:U.YG}),n.createElement("span",{className:U.WB},n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.locked"}),"\xa0\xa0\xa0"),n.createElement("span",{className:U.yM},i)),n.createElement("div",{className:U.yy},t&&r&&n.createElement(p.PL,{className:U.LI,onClick:r},e.buttonText))))}function G(){let e=(0,i.I0)(),t=(0,i.v9)(R.dh),r=D.t1.useFile((null==t?void 0:t.key)||"").data,a=(0,i.v9)(e=>(0,M.getPermissionsState)(e)),o=(0,N.mU)(k.BranchOpenMergeRequest,{branchFileKey:t&&(null==t?void 0:t.key)||""}),l=(0,T.XB)(t??{fileRepoId:null},a.repos),s=(0,A.$)((null==l?void 0:l.default_file_key)??"");if(!t||!r||!l)return null;let c=l.default_file_key,d="loaded"===o.status&&(null===o.data.file||o.data.file&&(0,x.TJ)(o.data.file)===x.ty.MERGED),u="loaded"!==o.status||d,p=(0,M.canManageFile)(t.key,a,void 0),m=c&&"loaded"===s.status&&s.data.result;return u?n.createElement(V,{message:n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.merged"})}):p?n.createElement(V,{message:n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.restore_branch"}),buttonText:n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.restore_branch_button"}),buttonOnClick:()=>{e(L.V_({fileKeys:{[r.key]:r},userInitiated:!0}))}}):n.createElement(V,{message:n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.can_restore_branch"}),buttonText:m?n.createElement(h.Tx,{id:"collaboration.branching_archived_footer.back_to_main_file"}):void 0,buttonOnClick:m?()=>{e(P.fv({view:"fullscreen",fileKey:c,editorType:"design"}))}:void 0})}G.displayName="ArchivedBranchFooter";var H=r(198456),W=r(256768),K=r(721127),z=r(799915);let Z=({origin:e})=>{let t=(0,i.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.name}),r=(0,O.A6)(),n=(0,i.I0)();return i=>{let a="DUPLICATE"===r.landingState&&t?(0,h.t)("footer_banner.log_in_or_create_an_account_to_get_a_copy_of_file_name",{fileName:t}):"";n(d.Y.init({origin:e,formState:i,redirectUrl:l.default.location.pathname})),n(K.K4({type:z.m,data:{headerText:a}}))}};function Y(e){let t=(0,W.Z)(),r=(0,W.Z)(e),n=Math.max(0,Math.ceil(r.diff(t,"minutes",!0)));return n>=60?(0,h.t)("figjam_try_v2.timer_hours_left",{hoursLeft:Math.ceil(n/60)}):(0,h.t)("figjam_try_v2.timer_minutes_left",{minutesLeft:n})}var j=r(676848),$=r(102677),q=r(722955);let X=r(641172),J=r(275341),Q=r(673592);function ee(){let e=(0,i.v9)(e=>e.openFile),t=(0,v.xJ)(),r=(0,E.nO)(!0),a=(0,i.v9)(e=>e.progressBarState.mode),l=(0,w.uB)(),s=(0,f.DO)(),d=!s&&r.enabled,p=(0,C.QF)(),m=!!(null==p?void 0:p.handleSignUp),h=b(),_=I();(0,c.O)(()=>{_()});let g=Z({origin:o.xx.LOGGED_OUT_FILE});return t?e&&(0,T.vp)(e)&&e.trashedAt&&a===S.oum.OFF?n.createElement(G,null):null:l||d||!e||h?null:n.createElement("div",{className:m?q.lH:q.Cg},n.createElement(er,{isFigJamTry:s}),!s&&n.createElement(j.K,{origin:o.xx.LOGGED_OUT_FILE,authModalCallback:()=>g(u.zd.SIGN_UP_EXTRA_INFO)}))}let et=120;function er({isFigJamTry:e}){let t=e?o.yg.FIGJAM_TRY_FOOTER_BANNER:o.yg.LOGGED_OUT_FOOTER_ORIGIN,r=(0,f.tm)(t),c=Z({origin:t}),y=e?r:c,v=(0,i.I0)(),b=(0,C.QF)(),I=!!(null==b?void 0:b.handleSignUp),T=(0,E.nO)(!I),w=(0,O.A6)(),S=function(e,t){let[r,i]=n.useState(Y((()=>{let e=new Date;return e.setDate(e.getDate()+1),e})()));return n.useEffect(()=>{if(!e||!t.enabled)return;let r=()=>i(Y(t.until));r();let n=setInterval(r,6e4);return()=>clearInterval(n)},[e,t]),r}(e,T),A=(0,h.t)("footer_banner.welcome_to_figma"),N="DUPLICATE"===w.landingState?(0,h.t)("footer_banner.create_an_account_to_get_your_own_copy_of_this_file"):(0,h.t)("footer_banner.create_an_account_to_edit_and_collaborate_on_this_file"),L={src:X,style:q.Ov},P=!1;e&&(A=S,N=I?(0,h.t)("figjam_try_v2.to_save_your_work_create_free_account"):(0,h.t)("figjam_try_v2.after_that_this_board_will_be_deleted"),L={src:Q,style:q.OB},P=!T.enabled||"fallback"===T.id);let R=(0,_.VL)(),k=P?n.createElement("div",{className:q.YU}):n.createElement("span",{className:I?q.Du:q.cL},A),D=P?N:n.createElement("span",{className:I?q.KT:q.wz},N),M=n.useRef(null);(function(e,t){let r=(0,s.y)(t)??s.Q;n.useEffect(()=>{if(!e)return;let n=document.documentElement.style,i=t.current;if(!i)return;let a=i.parentElement;if(!a)return;let o=window.getComputedStyle(i),l=parseInt(o.getPropertyValue("padding"))||0,s=window.getComputedStyle(a),c=parseInt(getComputedStyle(document.body).getPropertyValue("--toolbar-height"))||48,d=parseInt(s.getPropertyValue("top"))||c,u=parseInt(s.getPropertyValue("margin"))||0;return n.setProperty("--editor-banner-height",`${r.height+2*l+(d-c)+u}px`),()=>{n.setProperty("--editor-banner-height","0px")}},[e,t,r.height])})(I,M),n.useEffect(()=>{(null==b?void 0:b.updateFigJamTryExpiration)&&T.enabled&&T.until&&b.updateFigJamTryExpiration(T.until)},[b,T]);let[F,x]=n.useState(!1),U=(0,C.de)();return n.useEffect(()=>{U&&(U._processing_sign_up=e=>{x(e)})},[U,x]),n.createElement(g.Ui,{name:"Google Logged-out File Banner",properties:{localExperimentSeed:R,origin:t}},I?n.createElement("div",{className:`${q.Ve} ${$.oC}`,ref:M},n.createElement("div",{className:q.X7},n.createElement("a",{className:L.style,href:"/",target:"_blank",rel:"noopener"},n.createElement(m.n,{svg:L.src,useOriginalSrcFills_DEPRECATED:!0})),n.createElement("div",{className:q.bY},k,D)),n.createElement("div",{className:`${q.Yq} ${q.J1}`},n.createElement(p.RS,{disabled:F,fullWidth:!0,key:"email-btn",onClick:()=>{(null==b?void 0:b.handleSignUp)&&b.handleSignUp()},className:`${q.Zk} ${q.QM}`},n.createElement("div",{className:q.tV},F&&n.createElement("span",{className:q.lY},n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no}),n.createElement("div",{className:q.no})),n.createElement(h.Tx,{id:"footer_banner.sign_up_for_free"}))))):n.createElement("div",{className:`${q._T} ${$.oC}`,ref:M},n.createElement("div",{className:q.X7},n.createElement("a",{className:L.style,href:"/",target:"_blank",rel:"noopener"},n.createElement(m.n,{svg:L.src,useOriginalSrcFills_DEPRECATED:!0})),n.createElement("div",{className:q.AR},k,D)),n.createElement("div",{className:q.Yq},n.createElement(p.pJ,{onClick:()=>{o.Io(v,t,()=>y(u.zd.SIGN_UP_EXTRA_INFO)).then(t=>{v(d.Y.setRedirectUrl({redirectUrl:(0,a.BT)(l.default.location.pathname,e?{[H.x0.key]:H.x0.value}:{})})),v(d.Y.complete({userId:t.id}))},()=>{})},innerText:"Continue with Google",key:"google-btn"},n.createElement("div",{className:q.yS},n.createElement(m.n,{svg:J,useOriginalSrcFills_DEPRECATED:!0}),n.createElement(h.Tx,{id:"footer_banner.continue_with_google"}))),n.createElement("div",{style:{width:12},key:"spacer-div"}),n.createElement(p.oi,{key:"email-btn",onClick:()=>{y(u.zd.SIGN_UP)},className:q.Zk},n.createElement(h.Tx,{id:"footer_banner.sign_up_with_email"})))))}},676848:(e,t,r)=>{r.d(t,{K:()=>E});var n=r(652983),i=r(407908),a=r(46347),o=r(346887),l=r(448501),s=r(134193),c=r(716250),d=r(792808),u=r(36940),p=r(161719),m=r(869949),h=r(790774),_=r(844041);let g="g_one_tap";function f({origin:e,iFrameHandler:t,authModalCallback:r=()=>{}}){let f=(0,s.q)(h.v,[]),E=(0,i.I0)(),y=n.useCallback(async({credential:n})=>{(0,p.Tl)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let i=(0,_.p)(n);if(!i)return;let a={name:i.name,token:n,tokenType:m.Dh.ID_TOKEN};if(t){t(a);return}try{let t=await (0,o.OS)(a,{dispatch:E,apiUrl:o.cW,origin:e,showExtraInfoModalCb:r});(0,p.Tl)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),E(u.Y.setRedirectUrl({redirectUrl:l.default.location.pathname})),E(u.Y.complete({userId:t.id}))}catch(e){E(u.Y.showError({message:e.message}))}},[E,e,t,r]),v=n.useRef(!1);return n.useEffect(()=>{if(f.status===d.Q.SUCCESS&&!v.current){v.current=!0;let t=f.value,{google_client_id:r}=(0,c.ZP)();(0,a.q8)(void 0!==r,"google_client_id should be defined in initialOptions"),t.accounts.id.initialize({client_id:r,prompt_parent_id:g,callback:y,cancel_on_tap_outside:!1,itp_support:!1}),t.accounts.id.prompt(t=>{"display"===t.getMomentType()?t.isDisplayed()?(0,p.Tl)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,p.Tl)("google_one_tap_prompt_display_failed",e,{reason:t.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===t.getMomentType()?(0,p.Tl)("google_one_tap_prompt_skipped",e,{reason:t.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===t.getMomentType()&&(0,p.Tl)("google_one_tap_prompt_dismissed",e,{reason:t.getDismissedReason()},{forwardToDatadog:!0})})}},[f,y,e]),n.createElement("div",{id:g,"data-testid":"google_one_tap",className:"google_one_tap--googleOneTap--c-K3O"})}function E(e){var t;return(null==(t=(0,c.BZ)())?void 0:t.google_one_tap_killswitch)?null:n.createElement(f,{...e})}},629568:(e,t,r)=>{r.d(t,{$z:()=>c,BA:()=>m,Cl:()=>u,Q:()=>h,Xc:()=>g,Xw:()=>d,ZI:()=>p,h6:()=>f,jc:()=>_,rE:()=>E});var n=r(250390),i=r(523495),a=r(970740),o=r(271774),l=r(511093),s=r(18707);function c(e,t){return(0,l.t4)(e,t)||"WIDGET"===t.type}function d(e){let t=[];e.shapeType&&t.push(E(e.shapeType)),"img"===e.ariaRole?e.accessibleLabel?t.push(e.accessibleLabel):t.push((0,a.t)("fullscreen.accessibility_dom.unlabeled_image")):"MEDIA"===e.type?e.accessibleLabel?t.push(e.accessibleLabel):t.push((0,a.t)("fullscreen.accessibility_dom.unlabeled_video")):t.push((0,s.E)(e.type));let r="SECTION"===e.type||"INSTANCE"===e.type||"FRAME"===e.type;for(let[n,i]of(r&&e.name&&t.push(e.name),e.contentsHidden&&t.push((0,a.t)("fullscreen.accessibility.contents_hidden")),e.setData.size>1&&t.push((0,a.t)("fullscreen.accessibility_dom.pos_in_set",{i:e.setData.i,size:e.setData.size})),e.numChildren&&e.numChildren>0&&t.push((0,a.t)("fullscreen.accessibility_dom.num_children",{n:e.numChildren})),Object.entries(e.stampFrequencies??{})))t.push((0,a.t)("fullscreen.accessibility_dom.num_stamps",{count:i,name:n}));return(0,i.WH)(t,"unit")}function u(e){return"SECTION"===e}function p(e){return u(e.type)&&e.name?e.name:null}function m(e){if(0===Math.round(e.angle))return e;let t=(0,n.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-t[0][2],y:e.y-t[1][2]}}function h(e){let t=null==e?void 0:e.textData;return(null==t?void 0:t.characters)?{characters:t.characters,lines:t.lines,styleOverrideTable:t.styleOverrideTable,characterStyleIDs:t.characterStyleIDs,hyperlink:e.hyperlink}:{}}function _(e,t){return"TABLE"!==t.type?[]:t.sortedTableCells}function g(e){let t=e.fills&&(1===e.fills.length&&"IMAGE"===e.fills[0].type||2===e.fills.length&&"IMAGE"===e.fills[1].type);return t?"img":"SECTION"===e.type?"region":"TABLE"===e.type?"table":"group"}function f(){let e={x:0,y:0,width:1e3,height:1e3,angle:0};return{viewportContainerToCss:t=>{let r=(0,o.Un)(t,e),n=(0,o.sM)(r,t);return{left:n.x,top:n.y,width:n.width,height:n.height,position:"absolute"}},nodeRectToCss:(t,r)=>{let n=0!==Math.round(t.angle)?{transform:`rotate(${(360-t.angle).toString()}deg)`}:{},i=e;"canvas"!==r&&(i=r);let a={position:"absolute",left:100*t.x/i.width+"%",top:100*t.y/i.height+"%",width:100*t.width/i.width+"%",height:100*t.height/i.height+"%"};return{...a,...n}}}}function E(e){switch(e){case"DIAMOND":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},18707:(e,t,r)=>{r.d(t,{E:()=>a,r:()=>o});var n=r(970740),i=r(961215);function a(e){switch(e){case"SECTION":return(0,n.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,n.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,n.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,n.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,n.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,n.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,n.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,n.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,n.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,n.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":return(0,n.t)("fullscreen.accessibility_dom.node_name_instance");case"STAMP":return(0,n.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":return(0,n.t)("fullscreen.accessibility_dom.node_name_canvas");default:return(0,n.t)("fullscreen.accessibility_dom.node_name_fallback")}}function o(e,t){return e===i.UAh.STAMP?t?(0,n.t)("fullscreen.accessibility_dom.current_tool_stamp",{stampName:t}):(0,n.t)("fullscreen.accessibility_dom.current_tool",{toolName:(0,n.t)("fullscreen_actions.set-tool-stamp")}):null}},646632:(e,t,r)=>{r.d(t,{iz:()=>N,jf:()=>O,tc:()=>C});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(391320),s=r(337167),c=r(767310),d=r(571529),u=r(970740),p=r(111120),m=r(496417),h=r(158774),_=r(961215),g=r(640723),f=r(271774),E=r(493968),y=r(175161),v=r(65053),b=r(529428),I=r(629568),T=r(129138),w=r(960751);let{nodeRectToCss:S}=(0,I.h6)(),C={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},O={jumpOnAbort:!0};function A(e){let t=(0,c.uZ)(e.headerLevel,2,6);return e.header?n.createElement(n.Fragment,null,n.createElement("div",{role:"heading","aria-level":t,id:e.header.headerId},e.header.label),e.children):n.createElement(n.Fragment,null,e.children)}function N({nodeId:e,accessibilityScope:t,isDebugMode:r,navigate:a,suppressIds:o}){let l=(0,E.r)(e,t),s=(0,i.v9)(e=>e.mirror.appModel.showComments);if(!l)return null;let c=l.childIds.length,d=l.childIds.map((i,l)=>n.createElement(L,{parentId:e,key:i,nodeId:i,accessibilityScope:t,isDebugMode:r,navigate:a,setSize:c,setPosition:l+1,headingLevel:1,suppressIds:o}));return n.createElement(n.Fragment,null,d,s?n.createElement(k,{guid:e,navigate:a,isDebugMode:r,parentTransformProperties:"canvas",isTopLevel:!0}):null)}function L({accessibilityScope:e,nodeId:t,isDebugMode:r,navigate:i,setSize:a,setPosition:o,headingLevel:l,parentId:s,suppressIds:c}){let d=(0,E.r)(t,e);if(!d)return null;let{childIds:u,...p}=d;return n.createElement(P,{...p,nodeId:t,isDebugMode:r,navigate:i,setSize:a,setPosition:o,headingLevel:l,parentId:s,childIds:u,accessibilityScope:e,suppressIds:c})}let P=n.memo(function({childIds:e,parentId:t,setSize:r=1,setPosition:a=1,headingLevel:l=2,author:c,transformProperties:E,directTextContent:v,innerTextContent:N,tableCells:P,headerLabel:R,guid:D,isDebugMode:M,navigate:F,ariaRole:x,name:U,shapeType:B,type:V,accessibilityScope:G,nodeId:H,suppressIds:W,stampFrequencies:K,accessibleLabel:z,contentsHidden:Z}){let Y;let j=(0,i.oR)(),$=j.getState().comments.showResolved,q=(0,i.v9)(e=>e.mirror.appModel.showComments),X=j.getState().mirror.sceneGraph,J=e.length,Q=(0,I.Cl)(V)?l+1:l,ee=e.map((e,t)=>n.createElement(L,{key:e,nodeId:e,accessibilityScope:G,isDebugMode:M,navigate:F,parentId:H,headingLevel:Q,setSize:J,setPosition:t+1,suppressIds:W})),et=(0,I.Xw)({type:V,shapeType:B,ariaRole:x,name:U,setData:{size:r,i:a,headerLevel:l},numChildren:J,stampFrequencies:K,accessibleLabel:z,contentsHidden:Z}),er=t?X.get(t):void 0;Y=t&&er&&"CANVAS"!==er.type?(0,I.BA)(_.dCf.getNodeTransformProperties(t)):"canvas";let en=S(E,Y),ei=(0,T.O)(v),ea=(0,T.O)(N),eo=(0,T.w)(X,H,P),el=R?{label:R,headerId:`sectionHeaderFor-${D}`}:null,es=(0,i.v9)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),r=e.mirror.appModel.activeCanvasEditModeType!==_.Nw4.TEXT&&1===t.length?t[0]:"";return r===D}),{groupCommentNodeId:ec,groupCommentTransformProperties:ed,groupSize:eu}=function(e,t){var r;let n,i,a;let o=null==(r=t.get(e))?void 0:r.parentGuid,l=o?t.get(o):void 0;for(;null==l?void 0:l.resizeToFit;){n=l.guid??e;let r=l.parentGuid;l=r?t.get(r):void 0}if(n){let t=_.iTB.getSortedChildGuids(n),r=t.length>0&&t[t.length-1]===e;r?(a=t.length,i=(0,I.BA)(_.dCf.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:i,groupSize:a}}(D,X);(function(e,t,r,i,a,o,l,c,d){let u=(0,s.b9)(y.f);n.useEffect(()=>{if(e){let e=(0,I.Xw)({type:t,shapeType:r,name:i,accessibleLabel:a,setData:{size:o,i:l,headerLevel:c}});u({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:d,ariaLabel:e}})}},[a,c,l,e,i,d,r,o,t,u])})(es,V,B,U,z,r,a,l,H),n.useEffect(()=>{var e,t,r,n;W||(es&&!_.jCr.getExpectingTextInput()?(null==(e=document.getElementById(D))||e.setAttribute("tabindex","0"),null==(t=document.getElementById(D))||t.focus()):(null==(r=document.getElementById(D))||r.setAttribute("tabindex","-1"),null==(n=document.getElementById(D))||n.blur()))},[D,es,W]);let[ep,em]=(0,b.z)(M?[e,t,c,E,v,N,R,D,es,x,U,B,V,H,W]:[]);return n.createElement(n.Fragment,null,n.createElement("div",{id:W?void 0:D,ref:em,role:x,className:o()(w.dH,M&&ep),style:en,"aria-label":et,tabIndex:-1,contentEditable:d.ZP.windows&&es?"true":void 0,onContextMenu:e=>{j.dispatch(p.SP({type:m.j,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||es||(g.MO(),g.cY([D]),h.Gr.commit(),F((0,f.Yc)({nodeId:D,...C}),O))},"data-guid":W?D:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},n.createElement(A,{header:el,headerLevel:Q},n.createElement(n.Fragment,null,ea.length>0?ea:null,ei.length>0?ei:null,null!=c&&n.createElement(u.Tx,{id:"fullscreen.accessibility.author",authorName:c}),eo.length>0?eo:null,ee)),q?n.createElement(k,{guid:D,navigate:F,isDebugMode:M,parentTransformProperties:E,showResolved:$}):null),q&&ec?n.createElement(k,{guid:ec,navigate:F,isDebugMode:M,parentTransformProperties:"canvas",intermediateTransformProperties:ed??E,showResolved:$,groupSize:eu}):null)},function({directTextContent:e,innerTextContent:t,tableCells:r,transformProperties:n,childIds:a,stampFrequencies:o,accessibleLabel:s,...c},{directTextContent:d,innerTextContent:u,tableCells:p,transformProperties:m,childIds:h,stampFrequencies:_,accessibleLabel:g,...f}){return(0,i.wU)(c,f)&&(0,i.wU)(n,m)&&(0,i.wU)(o,_)&&(0,i.wU)(s,g)&&(0,i.wU)(a,h)&&(0,l.qt)(e,d)&&(0,l.qt)(t,u)&&(0,l.qt)(r,p)});function R({isDebugMode:e,threads:t,navigate:r,parentTransformProperties:i,intermediateTransformProperties:a}){return n.createElement(n.Fragment,null,null==t?void 0:t.map((o,l)=>n.createElement(v.A,{key:o.id,thread:o,navigate:r,isDebugMode:e,setPos:l+1,setSize:t.length,intermediateTransformProperties:a,parentTransformProperties:i})))}function k({guid:e,isDebugMode:t,navigate:r,isTopLevel:i,groupSize:a,parentTransformProperties:o,intermediateTransformProperties:l,showResolved:s}){let c=(0,v.n)(e),d=s?c:null==c?void 0:c.filter(e=>e.comments.length>0&&!e.comments[0].resolved_at),p=n.createElement(R,{threads:d,navigate:r,isDebugMode:t,parentTransformProperties:o,intermediateTransformProperties:l});if(!(d&&d.length>0))return null;if(i)return n.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},n.createElement("h2",{id:"canvas-comments-heading"},n.createElement(u.Tx,{id:"fullscreen.accessibility_dom.unattached_comments"})),p);if(!a)return p;{let e=(0,u.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:a});return n.createElement("div",{role:"group","aria-label":e},p)}}},220183:(e,t,r)=>{r.d(t,{Rg:()=>v,VB:()=>b,eT:()=>y,fO:()=>E});var n=r(652983),i=r(407908),a=r(365653),o=r(217810),l=r(523495),s=r(970740),c=r(644383),d=r(626291),u=r(975975),p=r(158774),m=r(961215),h=r(336752),_=r(18707);function g(e){e.target instanceof HTMLInputElement&&e.target.setAttribute("aria-hidden","false")}function f(e){e.target instanceof HTMLInputElement&&e.target.setAttribute("aria-hidden","true")}let E="hidden-input-activedescendant";function y(e){(0,n.useEffect)(()=>{let t=v();return null==t?p.Gr.onReady().then(()=>{let t=v();setTimeout(()=>{null!=t&&(t.ariaLabel=I(e),t.setAttribute("aria-activedescendant",E),t.addEventListener("focus",g),t.addEventListener("blur",f))},500)}):(t.ariaLabel=I(e),t.setAttribute("aria-activedescendant",E),t.addEventListener("focus",g),t.addEventListener("blur",f)),()=>{null==t||t.removeEventListener("focus",g),null==t||t.removeEventListener("blur",f)}},[e]);let t=(0,a.c)(e=>Object.keys(e.mirror.sceneGraphSelection).length),r=(0,i.v9)(e=>e.mirror.appModel.activeCanvasEditModeType===m.Nw4.LAYOUT||e.mirror.appModel.activeCanvasEditModeType===m.Nw4.WHITEBOARD_LAYOUT||e.mirror.appModel.activeCanvasEditModeType===m.Nw4.COMMENTS),y=(0,d.cV)(),[b,T]=(0,a.c)(e=>{let t;if(null!=e.mirror.appModel.currentStampToolName&&""!==e.mirror.appModel.currentStampToolName){let r=(0,h.MQ)(e.mirror.appModel.currentStampToolName);t=r()}return[e.mirror.appModel.currentTool,t]}),w=(0,i.I0)(),S=(0,n.useRef)(!1);(0,n.useEffect)(()=>{if("whiteboard"!==e||!r)return;let n=null;0===t&&!0===S.current?n=(0,s.t)("fullscreen.accessibility.selection_cleared"):t>1&&(n=(0,s.t)("fullscreen.accessibility.multi_select",{n:t})),y&&n&&w(c.R.enqueue({type:`${u.Ze}-${u.UV}`,message:n,role:"status",timeoutOverride:100})),S.current=t>0},[e,w,t,r,y]),(0,n.useEffect)(()=>{let r=v();if(null==r)return;let n=[I(e),(0,_.r)(b,T),t>0?(0,s.t)("fullscreen.accessibility.num_items_selected",{num_selected:t}):null].filter(o.lm);r.ariaLabel=(0,l.WH)(n,"unit");let i=document.getElementById(E);i&&(i.ariaLabel=(0,l.WH)(n,"unit"))},[e,t,b,T])}function v(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target");if(null==t)return null;for(let e of t){let t="application"===e.getAttribute("role")||"application"===e.role;if(e.hasAttribute("readonly")&&t)return e}return null}function b(){var e;null==(e=v())||e.focus()}function I(e){return"whiteboard"===e?(0,s.t)("general.figjam"):(0,s.t)("general.figma_design")}},4811:(e,t,r)=>{r.d(t,{T:()=>p,f:()=>m});var n=r(652983),i=r(422876),a=r(87608),o=r.n(a),l=r(594619),s=r(333222),c=r(525699),d=r(729762);let u=r(63476);function p(e){return n.createElement("div",{className:d.Fu},e.children)}function m(e){return n.createElement(l.j.Option,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:o()(d.L8,{[d.AU]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover},!e.hideCheck&&n.createElement("div",{className:d.JX},e.isChecked&&n.createElement(c.r,{svg:u},n.createElement(i.x,null))),e.children&&n.createElement(p,null,e.children),n.createElement("div",{className:d.fL},e.text),null!=e.shortcut&&n.createElement(s.e,{shortcut:e.shortcut,className:d.Xl}))}},955470:(e,t,r)=>{r.d(t,{S9:()=>S,eT:()=>C,sx:()=>x});var n=r(652983),i=r(87608),a=r.n(i),o=r(5453),l=r(598271),s=r(680356),c=r(374406),d=r(799671),u=r(435613),p=r(970740),m=r(855987),h=r(961215),_=r(784667),g=r(572333),f=r(225468),E=r(321926),y=r(627128),v=r(815478),b=r(594509),I=r(951187);let T=r(790070),w=r(792668);function S({changesToDisplay:e,selectedNode:t,onHover:r,onClick:i,expandedLayers:s,setLayerExpanded:c}){let u=(0,g.mA)((0,_.tZ)().showGuids),h=n.useMemo(()=>{let t=e=>{if(e.value){let t=e.value.change.guid||e.value.basis.guid,r=(0,l.BB)(t)||l.A0;return!!(null==s?void 0:s.has(r))}return!0};return(0,o.We)((0,b.dw)((0,b.Gy)(e,(e,r)=>{if(e.parent&&!t(e.parent))return{result:null,visitChildren:!1};let n=!0,{value:i,children:a}=e;if(i.changesToDisplay.length>0){let o=!!a&&a.length>0,s=i.change.guid||i.basis.guid,c=(0,l.BB)(s)||l.A0;return n=t(e),{result:{...i,indentation:r,isContainer:o,isExpanded:n,idToExpand:c}}}return{result:null}})))},[e,s]);return n.createElement("div",{className:a()(I.cw,I.rA)},n.createElement("div",{className:a()(I.Hi,I.s9,I.j$)},(0,p.t)("dev_handoff.compare_changes.layers")),h&&n.createElement("div",{className:a()(I.hQ)},n.createElement("div",{className:I.OK},h.map((e,o)=>{let s=(0,l.BB)(e.change.guid)||(0,l.BB)(e.basis.guid),p=(0,E.wk)(e.basis,e.change);return n.createElement("div",{key:s,className:a()(I._P,t===s?I.ZT:void 0,I.Hi),onMouseOver:()=>{r&&s&&r(s)},onMouseLeave:()=>{r&&r(l.A0)},onClick:()=>{i&&s&&i(s,e)},role:"button",tabIndex:o},n.createElement("div",{className:I.jV,style:{paddingLeft:`${16*e.indentation}px`}},n.createElement("div",{className:I.h_},n.createElement(m.aY,{visible:e.isContainer,expanded:e.isExpanded,onMouseDown:t=>{t.stopPropagation(),e.isContainer&&(null==c||c([e.idToExpand],!e.isExpanded))},name:p}),n.createElement("div",{className:I.XT},n.createElement(E.qh,{basis:e.basis,change:e.change})),n.createElement(d.ID,{className:I.k4,text:u?`${p} (${(0,l.BB)(e.change.guid)||(0,l.BB)(e.basis.guid)})`:p,tooltipPropsWhenTruncated:{"data-tooltip":p,"data-tooltip-type":f.fR.TEXT}})),n.createElement(P,{change:e.change,basis:e.basis})))}))))}function C(e,t,r,n){return(0,b.Gy)(e,e=>{let i=e.value,a=(0,v.ZB)({basis:i.basis,changes:i.change,chunkViewType:y.yh.MERGE_REVIEW,compareThumbnailSource:t,chunk:r,changedStyles:i.changedStyles,isRootNode:i.isRootNode,RenderTableDelegate:n});return a.length>0?{result:{...i,changesToDisplay:a}}:{result:null}})}function O(e){let{basis:t,change:r,changesToDisplay:i}=e,a=(0,E.wk)(t,r),o=n.useMemo(()=>({"data-tooltip":a,"data-tooltip-type":f.fR.TEXT}),[a]);return n.createElement("div",{className:I.dH},n.createElement("div",{className:I.zp},n.createElement("span",{className:I.bp},n.createElement(E.qh,{basis:t,change:r})),n.createElement(c.C,{className:I.k4,text:a,tooltipPropsWhenTruncated:o}),n.createElement(P,{change:r,basis:t})),n.createElement("div",null,n.createElement(R,{changesToDisplay:i})))}function A({skipMargin:e}){return n.createElement("span",{className:a()(I.Yw,{[I.ES]:e})},n.createElement(p.Tx,{id:"collaboration.branching_chunk.phase_removed"}))}function N({skipMargin:e}){return n.createElement("span",{className:a()(I.xw,{[I.ES]:e})},n.createElement(p.Tx,{id:"collaboration.branching_chunk.phase_updated"}))}function L({skipMargin:e}){return n.createElement("span",{className:a()(I.IJ,{[I.ES]:e})},n.createElement(p.Tx,{id:"collaboration.branching_chunk.phase_created"}))}function P(e){let{basis:t,change:r}=e;return(0,v.TP)(t)?n.createElement(L,null):(0,v.Io)(r)?n.createElement(A,null):n.createElement(N,null)}function R(e){let{changesToDisplay:t}=e;return n.createElement(n.Fragment,null,t.map(e=>n.createElement("div",{key:e.identifier,className:a()(I.eL,I.e5)},n.createElement("div",{className:a()(I.t$,I.rp)},n.createElement("div",{className:I.eL},n.createElement("div",{className:I.Vm},null==e?void 0:e.name()),n.createElement("div",{className:I.WG},n.createElement("div",{className:I.CU},e.oldValue())))),n.createElement("div",{className:a()(I.F2,I.rp)},n.createElement("div",{className:I.CU},e.newValue())))))}function k(e){let{chunk:t,compareThumbnailSource:r}=e,[i,o]=n.useState(!0),l=e.pairedChanges[0],{change:c,basis:d}=l,m=t.displayNode.styleType,h=(0,v.vz)(m,d,c,y.yh.MERGE_REVIEW,t,r);return 0===h.length?null:n.createElement(n.Fragment,null,n.createElement("div",{className:I.M0},n.createElement("div",{className:I.cz,role:"button",tabIndex:0,onClick:()=>{o(!i)}},i?n.createElement(u.n,{svg:T,className:I.Ud}):n.createElement(u.n,{svg:w,className:I.Ud}),n.createElement(p.Tx,{id:"collaboration.branching_chunk.change_details"}))),n.createElement("div",null,h.map(e=>n.createElement("div",{className:I.e5,key:(0,s.k)()},n.createElement("div",{className:I.eL},n.createElement("div",{className:a()(I.t$)},n.createElement("div",{className:I.eL},n.createElement("div",{className:a()(I.t$,I.Vm)},e.name()),n.createElement("div",{className:I.F2},n.createElement("div",{className:I.CU},e.oldValue())))),n.createElement("div",{className:a()(I.F2,I.yb)},n.createElement("div",{className:I.CU},e.newValue())))))))}function D(e){let{pairedChanges:t,chunk:r,compareThumbnailSource:i}=e,[a,s]=n.useState(!0),c=(0,v.uH)(t,i),d=(0,o.We)(t.map(e=>{let t=(0,v.ZB)({basis:e.basis,changes:e.change,chunkViewType:y.yh.MERGE_REVIEW,compareThumbnailSource:i,chunk:r,changedStyles:e.changedStyles});return t.length?{...e,changesToDisplay:t}:null}));return(0,b.PC)(d)&&0===c.length||r&&r.phase===h.Z_q.REMOVED?null:n.createElement(n.Fragment,null,n.createElement("div",{className:I.M0},n.createElement("div",{className:I.cz,role:"button",tabIndex:0,onClick:()=>{s(!a)}},a?n.createElement(u.n,{svg:T,className:I.Ud}):n.createElement(u.n,{svg:w,className:I.Ud}),n.createElement("div",null,n.createElement(p.Tx,{id:"collaboration.branching_chunk.change_details"})))),a&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(R,{changesToDisplay:c})),n.createElement("div",{className:I.aq},Array.isArray(d)&&d.map(e=>n.createElement(O,{key:(0,l.BB)(e.change.guid),basis:e.basis,change:e.change,changesToDisplay:e.changesToDisplay})))))}let M=n.memo(function(e){let{basis:t,changes:r,chunk:i,compareThumbnailSource:a}=e,o=n.useMemo(()=>(0,E.Sx)(t||[]),[t]);if(!r||!t)return null;let s=r.map(e=>({change:e,basis:o[(0,l.BB)(e.guid)]}));return n.createElement("div",{className:I.P_},n.createElement("div",{className:I.qE}),(0,E.PT)(i)?n.createElement(k,{pairedChanges:s,chunk:i}):n.createElement(D,{pairedChanges:s,chunk:i,compareThumbnailSource:a}))});class F extends n.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){}render(){return this.state.hasError?n.createElement(p.Tx,{id:"collaboration.branching_chunk.error"}):n.createElement(M,{changes:this.props.changes,basis:this.props.basis,chunk:this.props.chunk,compareThumbnailSource:this.props.compareThumbnailSource})}}let x=F},627128:(e,t,r)=>{r.d(t,{DU:()=>d,GP:()=>l,JK:()=>c,LW:()=>_,Mp:()=>f,VW:()=>u,ZH:()=>p,d4:()=>g,jp:()=>m,sH:()=>E,wR:()=>h,yh:()=>s});var n,i,a,o=r(680356),l=((n=l||{}).RENDER_SINGLE_PROPERTY="RENDER_SINGLE_PROPERTY",n.RENDER_MULTI_PROPERTY="RENDER_MULTI_PROPERTY",n.RENDER_MULTI_NODE="RENDER_MULTI_NODE",n.RENDER_DISPLAY_NODE_SINGLE_PROPERTY="RENDER_DISPLAY_NODE_SINGLE_PROPERTY",n),s=((i=s||{})[i.MERGE_REVIEW=0]="MERGE_REVIEW",i[i.CONFLICT_REVIEW=1]="CONFLICT_REVIEW",i);let c={derivedTextData:!1,name:!0,visible:!0,locked:!0,parentIndex:!0,transform:!0,description:!0,symbolDescription:!0,symbolLinks:!0,type:!0,booleanOperation:!0,horizontalConstraint:!0,verticalConstraint:!0,hyperlink:!0,mention:!0,proportionsConstrained:!0,inheritGridStyleID:!0,layoutGrids:!0,inheritTextStyleID:!0,inheritFillStyleID:!0,inheritFillStyleIDForStroke:!0,inheritEffectStyleID:!0,inheritExportStyleID:!0,inheritStrokeStyleID:!0,styleIdForFill:!0,styleIdForStrokeFill:!0,styleIdForText:!0,styleIdForEffect:!0,styleIdForGrid:!0,scrollBehavior:!0,transitionType:!0,transitionDuration:!0,easingType:!0,scrollDirection:!0,transitionPreserveScroll:!0,connectionType:!0,interactionType:!0,transitionTimeout:!0,interactionMaintained:!0,interactionDuration:!0,overlayPositionType:!0,transitionShouldSmartAnimate:!0,overlayRelativePosition:!0,overlayBackgroundInteraction:!0,overlayBackgroundAppearance:!0,keyTrigger:!0,prototypeInteractions:!0,prototypeStartNodeID:!0,prototypeStartingPoint:!0,videoPlayback:!0,stackMode:!0,stackSpacing:!0,stackCounterSizing:!0,stackPrimarySizing:!0,stackChildPrimaryGrow:!0,stackChildAlignSelf:!0,stackPrimaryAlignItems:!0,stackCounterAlignItems:!0,stackHorizontalPadding:!0,stackVerticalPadding:!0,stackPaddingRight:!0,stackPaddingBottom:!0,stackPositioning:!0,stackReverseZIndex:!0,bordersTakeSpace:!0,stackWrap:!0,stackCounterSpacing:!0,stackCounterAlignContent:!0,minSize:!0,maxSize:!0,maxLines:!0,pluginData:!0,pluginRelaunchData:!0,stackPadding:!1,stackJustify:!1,stackCounterAlign:!1,codeBlockLanguage:!0,pasteSource:!1,fontVariations:!0,detachOpticalSizeFromFontSize:!0,widgetMetadata:!0,widgetPropertyMenuItems:!0,widgetSyncedState:!0,renderedSyncedState:!0,widgetEvents:!1,widgetInputBehavior:!1,widgetCachedAncestor:!0,interactiveSlideConfigData:!1,interactiveSlideParticipantData:!1,themeID:!1,slideThemeData:!1,slideThemeMap:!1,slideTemplateFileKey:!1,componentPropDefs:!0,componentPropRefs:!0,componentPropAssignments:!1,simplifyInstancePanels:!0,propsAreBubbled:!0,size:!1,guid:!1,phase:!0,opacity:!1,blendMode:!1,count:!1,dashPattern:!1,autoRename:!1,backgroundEnabled:!1,mask:!1,maskType:!1,exportContentsOnly:!1,maskIsOutline:!1,backgroundOpacity:!1,cornerRadius:!1,fontSize:!1,paragraphIndent:!1,paragraphSpacing:!1,listSpacing:!1,starInnerScale:!1,miterLimit:!1,strokeWeight:!1,textTracking:!1,strokeAlign:!1,strokeCap:!1,strokeJoin:!1,textAlignHorizontal:!1,textAlignVertical:!1,textCase:!1,textDecoration:!1,leadingTrim:!1,hangingPunctuation:!1,hangingList:!1,fillPaints:!1,strokePaints:!1,lineHeight:!1,fontName:!1,textData:!1,effects:!1,handleMirroring:!1,exportSettings:!1,textAutoResize:!1,vectorData:!1,styleID:!1,backgroundColor:!1,fillGeometry:!1,strokeGeometry:!1,guidPath:!1,symbolData:!1,frameMaskDisabled:!1,resizeToFit:!1,exportBackgroundDisabled:!1,sharedSymbolReference:!1,isSymbolPublishable:!1,sharedSymbolMappings:!1,derivedSymbolData:!1,sharedSymbolVersion:!1,overrideLevel:!1,nestedInstanceResizeEnabled:!1,fontVariantCommonLigatures:!1,fontVariantContextualLigatures:!1,fontVariantDiscretionaryLigatures:!1,fontVariantHistoricalLigatures:!1,fontVariantOrdinal:!1,fontVariantSlashedZero:!1,fontVariantNumericFigure:!1,fontVariantNumericSpacing:!1,fontVariantNumericFraction:!1,fontVariantCaps:!1,fontVariantPosition:!1,guides:!1,transitionNodeID:!1,prototypeBackgroundColor:!1,internalOnly:!1,overriddenSymbolID:!1,rectangleTopLeftCornerRadius:!1,rectangleTopRightCornerRadius:!1,rectangleBottomLeftCornerRadius:!1,rectangleBottomRightCornerRadius:!1,rectangleCornerRadiiIndependent:!1,rectangleCornerToolIndependent:!1,sharedComponentMasterData:!1,cornerSmoothing:!1,styleType:!1,styleDescription:!1,unflatteningMappings:!1,letterSpacing:!1,version:!1,sharedStyleMasterData:!1,sharedStyleReference:!1,sortPosition:!1,isPublishable:!1,exportTextAsSVGText:!1,isSoftDeletedStyle:!1,isSoftDeleted:!1,isNonUpdateable:!1,isOverrideOverTextStyle:!1,connectionURL:!1,prototypeDevice:!1,backgroundPaints:!1,arcData:!1,derivedSymbolDataLayoutVersion:!1,navigationType:!1,fontVersion:!1,textUserLayoutVersion:!1,textExplicitLayoutVersion:!1,textBidiVersion:!1,toggledOnOTFeatures:!1,toggledOffOTFeatures:!1,overrideKey:!1,publishFile:!1,sourceLibraryKey:!1,publishID:!1,key:!1,componentKey:!1,isC2:!1,fileAssetIds:!1,publishedVersion:!1,containerSupportsFillStrokeAndCorners:!1,isStateGroup:!1,voiceEventPhrase:!1,forceUnflatteningMappings:!1,ancestorPathBeforeDeletion:!1,stateGroupPropertyValueOrders:!1,nodeGenerationData:!1,derivedImmutableFrameData:!1,derivedImmutableFrameDataVersion:!1,shapeWithTextType:!1,connectorStart:!1,connectorEnd:!1,connectorLineStyle:!1,connectorStartCap:!1,connectorEndCap:!1,connectorType:!1,shapeUserHeight:!1,overrideStash:!1,internalEnumForTest:!1,internalDataForTest:!1,connectorControlPoints:!1,connectorTextMidpoint:!1,annotations:!1,measurements:!1,libraryMoveInfo:!1,libraryMoveHistory:!1,developerRelatedLinks:!1,stampData:!1,embedData:!1,linkPreviewData:!1,richMediaData:!1,textTruncation:!0,shapeTruncates:!1,sectionContentsHidden:!1,widgetTooltip:!1,borderTopWeight:!1,borderBottomWeight:!1,borderLeftWeight:!1,borderRightWeight:!1,borderStrokeWeightsIndependent:!1,widgetHoverStyle:!1,hasHadRTLText:!1,emojiImageSet:!1,slideThumbnailHash:!1,isWidgetStickable:!1,shouldHideCursorsOnWidgetHover:!1,variableDataValues:!1,variableConsumptionMap:!1,variableModeBySetMap:!1,variableSetModes:!1,variableSetID:!1,backingVariableSetId:!1,rootVariableKey:!1,variableResolvedType:!1,isCollectionExtendable:!1,variableScopes:!1,codeSyntax:!0,agendaPositionMap:!1,agendaMetadataMap:!1,migrationStatus:!1,editInfo:!1,documentColorProfile:!1,accessibleHTMLTag:!0,ariaRole:!0,ariaAttributes:!0,accessibleLabel:!0,tableRowPositions:!1,tableColumnPositions:!1,tableRowHeights:!1,tableColumnWidths:!1,detachedSymbolId:!1,sevMoonlitLilyData:!1,childReadingDirection:!1,readingIndex:!1,sectionStatusInfo:!1,handoffStatusMap:!1,slideActiveThemeLibKey:!1,slideSpeakerNotes:!1,diagramParentIndex:!1,diagramLayoutRuleType:!1,diagramLayoutPaused:!1,editScopeInfo:!1,sectionPresetInfo:!1,semanticWeight:!1,semanticItalic:!1,isPageDivider:!1,moduleType:!1,isResponsiveSet:!1},d=new Map(Object.entries({inheritTextStyleID:["fontName","fontSize","textCase","textDecoration","letterSpacing","fontVariations","fontVariantCommonLigatures","fontVariantContextualLigatures","fontVariantDiscretionaryLigatures","fontVariantHistoricalLigatures","fontVariantOrdinal","fontVariantSlashedZero","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","fontVariantCaps","fontVariantPosition"],inheritFillStyleID:["fillPaints"],inheritFillStyleIDForStroke:[],inheritEffectStyleID:["effects"],styleIdForText:["fontName","fontSize","textCase","textDecoration","letterSpacing","fontVariations","fontVariantCommonLigatures","fontVariantContextualLigatures","fontVariantDiscretionaryLigatures","fontVariantHistoricalLigatures","fontVariantOrdinal","fontVariantSlashedZero","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","fontVariantCaps","fontVariantPosition"],styleIdForFill:["fillPaints"],styleIdForStrokeFill:["strokePaints"],styleIdForEffect:["effects"]})),u={derivedTextData:!1,name:!1,visible:!0,locked:!1,parentIndex:!1,transform:!0,description:!1,symbolDescription:!1,symbolLinks:!1,type:!1,booleanOperation:!1,horizontalConstraint:!0,verticalConstraint:!0,hyperlink:!0,mention:!1,proportionsConstrained:!1,inheritGridStyleID:!0,layoutGrids:!1,inheritTextStyleID:!0,inheritFillStyleID:!0,inheritFillStyleIDForStroke:!0,inheritEffectStyleID:!0,inheritExportStyleID:!0,inheritStrokeStyleID:!0,styleIdForFill:!0,styleIdForStrokeFill:!0,styleIdForText:!0,styleIdForEffect:!0,styleIdForGrid:!0,scrollBehavior:!1,transitionType:!1,transitionDuration:!1,easingType:!1,scrollDirection:!1,transitionPreserveScroll:!1,connectionType:!1,interactionType:!1,transitionTimeout:!1,interactionMaintained:!1,interactionDuration:!1,overlayPositionType:!1,transitionShouldSmartAnimate:!1,overlayRelativePosition:!1,overlayBackgroundInteraction:!1,overlayBackgroundAppearance:!1,keyTrigger:!1,prototypeInteractions:!1,prototypeStartNodeID:!1,prototypeStartingPoint:!1,videoPlayback:!1,stackMode:!0,stackSpacing:!0,stackCounterSizing:!0,stackPrimarySizing:!0,stackChildPrimaryGrow:!0,stackChildAlignSelf:!0,stackPrimaryAlignItems:!0,stackCounterAlignItems:!0,stackHorizontalPadding:!0,stackVerticalPadding:!0,stackPaddingRight:!0,stackPaddingBottom:!0,stackPositioning:!0,stackReverseZIndex:!0,bordersTakeSpace:!0,stackWrap:!0,stackCounterSpacing:!0,stackCounterAlignContent:!0,minSize:!0,maxSize:!0,maxLines:!0,pluginData:!1,pluginRelaunchData:!1,stackPadding:!1,stackJustify:!1,stackCounterAlign:!1,codeBlockLanguage:!1,pasteSource:!1,fontVariations:!0,detachOpticalSizeFromFontSize:!1,widgetMetadata:!1,widgetPropertyMenuItems:!1,widgetSyncedState:!1,renderedSyncedState:!1,widgetEvents:!1,widgetInputBehavior:!1,widgetCachedAncestor:!1,interactiveSlideConfigData:!1,interactiveSlideParticipantData:!1,themeID:!1,slideThemeData:!1,slideThemeMap:!1,slideTemplateFileKey:!1,componentPropDefs:!1,componentPropRefs:!1,componentPropAssignments:!1,simplifyInstancePanels:!1,propsAreBubbled:!1,size:!0,guid:!1,phase:!1,opacity:!0,blendMode:!0,count:!0,dashPattern:!0,autoRename:!1,backgroundEnabled:!1,mask:!0,maskType:!0,exportContentsOnly:!1,maskIsOutline:!1,backgroundOpacity:!1,cornerRadius:!1,fontSize:!0,paragraphIndent:!0,paragraphSpacing:!0,listSpacing:!0,starInnerScale:!0,miterLimit:!0,strokeWeight:!0,textTracking:!0,strokeAlign:!0,strokeCap:!0,strokeJoin:!0,textAlignHorizontal:!0,textAlignVertical:!0,textCase:!0,textDecoration:!0,leadingTrim:!0,hangingPunctuation:!1,hangingList:!1,fillPaints:!0,strokePaints:!0,lineHeight:!0,fontName:!0,textData:!0,effects:!0,handleMirroring:!1,exportSettings:!1,textAutoResize:!1,vectorData:!0,styleID:!1,backgroundColor:!1,fillGeometry:!1,strokeGeometry:!1,guidPath:!1,symbolData:!1,frameMaskDisabled:!1,resizeToFit:!0,exportBackgroundDisabled:!1,sharedSymbolReference:!1,isSymbolPublishable:!1,sharedSymbolMappings:!1,derivedSymbolData:!1,sharedSymbolVersion:!1,overrideLevel:!1,nestedInstanceResizeEnabled:!1,fontVariantCommonLigatures:!0,fontVariantContextualLigatures:!0,fontVariantDiscretionaryLigatures:!0,fontVariantHistoricalLigatures:!0,fontVariantOrdinal:!0,fontVariantSlashedZero:!0,fontVariantNumericFigure:!0,fontVariantNumericSpacing:!0,fontVariantNumericFraction:!0,fontVariantCaps:!0,fontVariantPosition:!0,guides:!1,transitionNodeID:!1,prototypeBackgroundColor:!1,internalOnly:!1,overriddenSymbolID:!1,rectangleTopLeftCornerRadius:!0,rectangleTopRightCornerRadius:!0,rectangleBottomLeftCornerRadius:!0,rectangleBottomRightCornerRadius:!0,rectangleCornerRadiiIndependent:!1,rectangleCornerToolIndependent:!1,sharedComponentMasterData:!1,cornerSmoothing:!0,styleType:!1,styleDescription:!1,unflatteningMappings:!1,letterSpacing:!0,version:!1,sharedStyleMasterData:!1,sharedStyleReference:!1,sortPosition:!1,isPublishable:!1,exportTextAsSVGText:!1,isSoftDeletedStyle:!1,isSoftDeleted:!1,isNonUpdateable:!1,isOverrideOverTextStyle:!1,connectionURL:!1,prototypeDevice:!1,backgroundPaints:!1,arcData:!1,derivedSymbolDataLayoutVersion:!1,navigationType:!1,fontVersion:!1,textUserLayoutVersion:!1,textExplicitLayoutVersion:!1,textBidiVersion:!1,toggledOnOTFeatures:!1,toggledOffOTFeatures:!1,overrideKey:!1,publishFile:!1,sourceLibraryKey:!1,publishID:!1,key:!1,componentKey:!1,isC2:!1,fileAssetIds:!1,publishedVersion:!1,containerSupportsFillStrokeAndCorners:!1,isStateGroup:!1,voiceEventPhrase:!1,forceUnflatteningMappings:!1,ancestorPathBeforeDeletion:!1,stateGroupPropertyValueOrders:!1,nodeGenerationData:!0,derivedImmutableFrameData:!1,derivedImmutableFrameDataVersion:!1,shapeWithTextType:!0,connectorStart:!1,connectorEnd:!1,connectorLineStyle:!1,connectorStartCap:!1,connectorEndCap:!1,connectorType:!1,shapeUserHeight:!0,overrideStash:!1,internalEnumForTest:!1,internalDataForTest:!1,connectorControlPoints:!1,connectorTextMidpoint:!1,annotations:!1,measurements:!1,libraryMoveInfo:!1,libraryMoveHistory:!1,developerRelatedLinks:!1,stampData:!1,embedData:!0,linkPreviewData:!0,richMediaData:!0,textTruncation:!0,shapeTruncates:!0,sectionContentsHidden:!0,widgetTooltip:!1,borderTopWeight:!0,borderBottomWeight:!0,borderLeftWeight:!0,borderRightWeight:!0,borderStrokeWeightsIndependent:!1,widgetHoverStyle:!1,hasHadRTLText:!1,emojiImageSet:!1,slideThumbnailHash:!1,isWidgetStickable:!1,shouldHideCursorsOnWidgetHover:!1,variableDataValues:!1,variableConsumptionMap:!0,variableModeBySetMap:!1,variableSetModes:!1,variableSetID:!1,backingVariableSetId:!1,rootVariableKey:!1,isCollectionExtendable:!1,variableResolvedType:!1,variableScopes:!1,codeSyntax:!0,agendaPositionMap:!1,agendaMetadataMap:!1,migrationStatus:!1,editInfo:!1,documentColorProfile:!1,accessibleHTMLTag:!1,ariaRole:!1,ariaAttributes:!1,accessibleLabel:!1,tableRowPositions:!1,tableColumnPositions:!1,tableRowHeights:!1,tableColumnWidths:!1,detachedSymbolId:!1,sevMoonlitLilyData:!1,childReadingDirection:!1,readingIndex:!1,sectionStatusInfo:!1,handoffStatusMap:!1,slideActiveThemeLibKey:!1,slideSpeakerNotes:!1,diagramLayoutRuleType:!1,diagramParentIndex:!1,diagramLayoutPaused:!1,editScopeInfo:!1,sectionPresetInfo:!1,semanticWeight:!1,semanticItalic:!1,isPageDivider:!1,moduleType:!1,isResponsiveSet:!1},p=Object.keys(u).filter(e=>u[e]);var m=((a=m||{})[a.LEGO=0]="LEGO",a[a.BRANCHING=1]="BRANCHING",a[a.COMPARE_CHANGES=2]="COMPARE_CHANGES",a[a.TEST_SUITE=3]="TEST_SUITE",a);function h(e){return e.toLowerCase().replace("_"," ")}function _(e,t,r){return{treatmentType:"RENDER_SINGLE_PROPERTY",renderName:e,renderOldValue:"string"==typeof t?()=>h(t):t,renderNewValue:"string"==typeof r?()=>h(r):r}}function g(e,t,r){return{identifier:(0,o.k)(),treatmentType:"RENDER_MULTI_NODE",renderName:e,renderOldValue:"string"==typeof t?()=>t:t,renderNewValue:"string"==typeof r?()=>r:r}}function f(e,t,r){return{identifier:(0,o.k)(),treatmentType:"RENDER_MULTI_PROPERTY",renderName:e,renderOldValue:"string"==typeof t?()=>t:t,renderNewValue:"string"==typeof r?()=>r:r}}function E(e,t,r){return{treatmentType:"RENDER_DISPLAY_NODE_SINGLE_PROPERTY",renderName:e,renderOldValue:"string"==typeof t?()=>t:t,renderNewValue:"string"==typeof r?()=>r:r}}},594509:(e,t,r)=>{function n(e,t){t.parent=e,e.children=e.children||[],e.children.push(t)}function i(e,t){let r=(e,i=0,o)=>{var l;let s;let{result:c,visitChildren:d=!0}=a(e)?t(e,i,o):{result:null,visitChildren:!0},u=c?{value:c}:null,p=0;return u?(p=1,s=u):s=o||{},u&&o&&n(o,u),d&&(null==(l=e.children)||l.forEach(e=>r(e,i+p,s))),s};return r(e)}r.d(t,{$y:()=>o,Gy:()=>i,PC:()=>l,Z7:()=>function e(t,r){if(a(t)&&r(t.value))return t.value;if(t.children)for(let n of t.children){let t=e(n,r);if(t)return t}return null},dw:()=>s,jG:()=>n,nr:()=>a});let a=e=>void 0!==e.value,o=e=>{let t=[e];for(;t.length>0;){let e=t.pop();if(e&&a(e))return!1;t.push(...(null==e?void 0:e.children)||[])}return!0},l=e=>Array.isArray(e)?0===e.length:o(e),s=e=>{if(Array.isArray(e))return e;let t=[],r=e=>{var n;e.value&&t.push(e.value),null==(n=e.children)||n.forEach(r)};return r(e),t}},569867:(e,t,r)=>{r.d(t,{A2:()=>o,Nm:()=>d,e5:()=>s,fE:()=>l,hE:()=>c});var n,i=r(764850),a=r(254081);let o={[i.$YG.TEXT]:0,[i.$YG.FRAME_OR_GROUP]:0,[i.$YG.COMPONENT]:0,[i.$YG.INSTANCE]:0,[i.$YG.IMAGE]:0,[i.$YG.SHAPE]:0,[i.$YG.OTHER]:0},l=[...a.Dc,...a.FW],s=a.FW;function c(e){return a.Dc.filter(t=>e[t])}var d=((n=d||{})[n.PREV=-1]="PREV",n[n.NONE=0]="NONE",n[n.NEXT=1]="NEXT",n)},813788:(e,t,r)=>{r.d(t,{v:()=>L});var n,i=r(652983),a=r(407908),o=r(141757),l=r(716250),s=r(518484),c=r(519781),d=r(617984),u=r(970740),p=r(644383),m=r(597837),h=r(111120),_=r(721127),g=r(222490),f=r(496417),E=r(45547),y=r(225468),v=r(291904),b=r(505468),I=r(347373),T=r(200189),w=r(584568),S=r(468439),C=r(634021),O=r(729493);let A={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10};var N=((n=N||{})[n.LEFT=-1]="LEFT",n[n.RIGHT=1]="RIGHT",n);let L=(0,v.Y3)(function(e){let t=(0,a.I0)(),[r,n]=i.useState(e.selectedIdx),v=i.useRef(null),[N,L]=i.useState(null),P=i.useRef(null),{onUpdateAltText:R}=e,[k,D]=i.useState(e.attachments),M=(0,w.ls)(S.T.ATTACHMENT_MODAL_BACKGROUND_COLOR),F=M?(0,o.lu)(M):void 0,x=e=>{var t;if(v.current){let r=null==(t=v.current)?void 0:t.children[e].firstChild;null==r||r.blur()}},U=e=>{x(r),n(e),L(null)},B=e=>{let t=(r+e+k.length)%k.length;U(t)},V=e=>{let t=-1===e?0:k.length-1,n=r===t;return i.createElement(m.z,{onClick:()=>B(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},G=e=>{if("ArrowLeft"===e.key)0!==r&&B(-1);else if("ArrowRight"===e.key){if(r===k.length-1)return;B(1)}},H=()=>(t(_.eI()),!0);(0,E.jI)(H,E.Yw.FULL_SCREEN_MODAL);let W=(e,r)=>{e.preventDefault(),e.stopPropagation(),t(h.SP({type:f.pv,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:r}}))},K=i.useRef(null),z=i.useCallback(()=>{if(P.current&&!N){let e=P.current.getBoundingClientRect(),r=new s.OW(e.left+e.width/2,e.top);t(g.Cp()),L(r)}else L(null)},[t,N]),Z=i.useCallback(e=>{if(K.current){let n=K.current.value.trim();(n||e)&&R(n,r).then(e=>{200!==e.status?t(p.R.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):D(e=>(e[r]={...e[r],altText:n},e))}).catch(e=>{t(p.R.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}L(null)},[t,R,r]);return i.createElement(i.Fragment,null,i.createElement(d.L,null,i.createElement(b.u_,{dispatch:t,className:O.jS,size:"any",onKeyDown:e=>{G(e)}},i.createElement("div",{className:O.ho},i.createElement("div",{className:O.Sl},i.createElement("div",{className:O.r9},k[r].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:k[r].mediaType.split("/")[1]})),i.createElement(c.PZ,{className:O.d3,recordingKey:"commentMediaDetailModal",onClick:H,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),i.createElement("div",{className:O.h2},i.createElement(I.ex,{imageSrc:k[r].imageUrl,onContextMenu:e=>{W(e,k[r])},pageBackgroundColor:F??void 0,...A}),!!(0,l.BZ)().comments_media_alt_text&&(e.canEdit||k[r].altText)&&i.createElement("button",{className:k.length>1?O.eL:O.Bt,"data-tooltip-type":y.fR.TEXT,"data-tooltip":N?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>N?Z(k[r].altText):z(),ref:P},(0,u.t)("comments.alt_text"))),k.length>1&&i.createElement("div",{className:O.qP},V(-1),i.createElement("div",{ref:v,className:O.kR},k.map((e,t)=>i.createElement("div",{key:e.thumbnailUrl,className:O.Zd},i.createElement(C.J,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:t===r,onClick:e=>{U(t)},onRightClick:t=>W(t,e)})))),V(1)))),N&&i.createElement(T.K,{text:k[r].altText??"",location:N,onEnter:()=>Z(k[r].altText),onEscape:()=>(L(null),!0),inputRef:K,canEdit:e.canEdit})))},"AttachmentDetailModal",v.Et.NO)},634021:(e,t,r)=>{r.d(t,{J:()=>u});var n=r(652983),i=r(782051),a=r(970740),o=r(80401),l=r(642017);let s=e=>e.height<256&&e.width<256,c=e=>e.height/e.width>2||e.width/e.height>2,d=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function u(e){let[t,r]=n.useState(e.thumbnailUrl);n.useEffect(()=>{t.startsWith("blob")||r(e.thumbnailUrl)},[t,e.thumbnailUrl]);let u=e.dimensions??void 0,p=u&&(s(u)?u:c(u)?d(u):(0,o.uJ)(u.width,u.height,256));return n.createElement("button",{className:e.isSelected?l.Mb:l.pf,onClick:()=>{e.onClick(e.thumbnailUrl)},style:p&&{width:`${p.width}px`,height:`${p.height}px`},onContextMenu:t=>{e.onRightClick&&e.onRightClick(t)}},n.createElement("img",{src:t,crossOrigin:"use-credentials",alt:e.altText||(0,a.t)("comments.attachment_thumbnail_alt_text_default"),className:l.qI}),n.createElement("div",{className:e.overlayText||e.isUploading?l.$:l.Qb},e.isUploading&&n.createElement(i.TK,null),e.overlayText))}},87020:(e,t,r)=>{r.d(t,{I:()=>h});var n=r(652983),i=r(407908),a=r(970740),o=r(111120),l=r(721127),s=r(496417),c=r(142690),d=r(813788),u=r(634021),p=r(670329),m=r(642017);function h(e){let t=(0,i.I0)(),{attachments:r}=e,h=n=>{t((0,l.K4)({type:d.v,data:{attachments:r,selectedIdx:r.map(e=>e.thumbnailUrl).indexOf(n),onUpdateAltText:_,canEdit:e.canEdit},showModalsBeneath:!0}))},_=(t,n)=>{let i=r[n];return c.p.put(e.fileKey,i.id,t)},g=(e,r)=>{e.preventDefault(),e.stopPropagation(),t(o.SP({type:s.pv,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:r}}))};return n.createElement("div",{className:p.O2},r.slice(0,3).map((e,t)=>n.createElement("div",{key:e.id,className:m.db},n.createElement(u.J,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,a.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:r.length>3&&2===t?`+${r.length-3}`:void 0,onClick:h,onRightClick:t=>g(t,e),dimensions:0===t&&1===r.length?e.metadata.dimensions:void 0}))))}},829600:(e,t,r)=>{r.d(t,{I5:()=>u,SG:()=>d,jT:()=>s,u7:()=>l,xi:()=>c});var n,i=r(785466),a=r.n(i);let o=(e,t)=>e.x!==t.x||e.y!==t.y||!a()(e.avatars,t.avatars)||!a()(e.previewMessageMeta,t.previewMessageMeta)||e.isUnread!==t.isUnread||e.numUnreadReplies!==t.numUnreadReplies||e.isResolved!==t.isResolved||!a()(e.selectionBoxAnchor,t.selectionBoxAnchor)||!a()(e.otherBoundingBoxes,t.otherBoundingBoxes)||!a()(e.isPinnedToFile,t.isPinnedToFile);var l=((n=l||{})[n.NORMAL=0]="NORMAL",n[n.ACTIVE=1]="ACTIVE",n[n.DIMMED=2]="DIMMED",n);let s=(e,t)=>`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${t}`,c=(e,t)=>e.isSinglePin&&t.isSinglePin?o(e.pins[0],t.pins[0]):e.pins.length!==t.pins.length||e.isUnread!==t.isUnread||e.isPinnedToFile!==t.isPinnedToFile,d={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1},u=e=>{let t=new Map,r=[];return e.forEach(e=>{if(t.has(e.user.id)){let n=t.get(e.user.id);r[n].num_unread_comments+=e.isUnread?1:0,r[n].num_comments+=1}else r.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),t.set(e.user.id,r.length-1)}),r}},345805:(e,t,r)=>{r.d(t,{B0:()=>w,DL:()=>b,_H:()=>C,nM:()=>y,nW:()=>v});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(600486),s=r(642045),c=r(635723),d=r(618723),u=r(56554),p=r(970740),m=r(133354),h=r(435804),_=r(70918),g=r(4818),f=r(225468),E=r(335034);function y(e){let t=RegExp("^\\w+:"),r=e.match(t);return""===e||r&&["http:","https:","mailto:","tel:"].includes(r[0].toLowerCase())?e:"https://"+e}let v=n.memo(e=>{let{text:t,hyperlink:r}=e,a=n.useMemo(()=>(0,s.mB)(t),[t]),o=(0,h.fh)(),l=(0,i.I0)();return n.createElement(d.rU,{onClick:()=>{l((0,m.IO)({rawInput:y(r)}))},className:E.EH,"data-tooltip-type":f.fR.SPECIAL,"data-tooltip":f._7.HYPERLINK_POPUP,"data-tooltip-show-above":!0,"data-tooltip-unconstrain-width":!0,"data-tooltip-editor-type":o,"data-tooltip-url-string":r,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,trusted:!1},a)}),b=n.memo(e=>{let{userId:t,imgUrl:r,handle:i,href:a}=e;return n.createElement(d.rU,{href:a,target:"_blank",className:E.Pl,"data-tooltip-type":f.fR.SPECIAL,"data-tooltip":f._7.USER_INFO,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":r,"data-tooltip-user-handle":i,"data-tooltip-unconstrain-width":!0,"data-mention-user-id":t,trusted:!0},i)}),I=n.memo(function(e){var t;let r=null==(t=(0,_.xJ)())?void 0:t.community_profile_id,{handle:i,commentId:a,profileId:o,profileName:s,profileImgUrl:u}=e,p=(0,c.A)(i),m=(0,c.A)(s);return n.createElement(d.rU,{href:`/${p}`,target:"_blank",className:E.Pl,"data-tooltip-type":f.fR.SPECIAL,"data-tooltip":f._7.USER_INFO,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":u,"data-tooltip-user-handle":m,"data-tooltip-unconstrain-width":!0,onClick:()=>{(0,l.L9)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:a})},trusted:!0},p)}),T=n.memo(e=>{let{text:t,tokenStyles:r}=e,i=n.useMemo(()=>(0,s.mB)(t),[t]),a=(null==r?void 0:r.map(e=>"b"===e?E.rJ:"i"===e?E.p:"s"===e?E.Cd:"lightbold"===e?E.wG:void 0))||[];return n.createElement(u._,null,n.createElement("span",{className:o()(a)},i))}),w=n.memo(e=>{let{text:t,highlightHashtag:r,onHashtagClick:i}=e,a=`#${t}`;return r&&i?n.createElement(d.rU,{className:E.EH,trusted:!0,onClick:()=>i(t.toLowerCase()),"data-tooltip-type":f.fR.SPECIAL,"data-tooltip":f._7.FEED_HASHTAG,"data-tooltip-hashtag-text":t},a):n.createElement("span",null,a)}),S=n.memo(e=>{let{text:t,userId:r,profileId:i,user:a,orgPath:o,profiles:l,commentId:s,tokenStyles:d,hyperlink:u,isHashtag:p,enableHashtags:m,onHashtagClick:h}=e,_=(0,c.A)(t);if(r)return n.createElement(b,{href:`/files${o}/user/${r}`,userId:r,handle:(0,c.A)(null==a?void 0:a.handle)||void 0,imgUrl:null==a?void 0:a.img_url});if(i&&_){let e="@"+_,t=null==l?void 0:l[i];return t?n.createElement(I,{handle:e,commentId:s,profileId:t.id,profileName:t.name,profileImgUrl:t.img_url}):n.createElement("span",null,e)}if(null===i&&_){let e="@"+_;return n.createElement("span",null,e)}return u&&_?n.createElement(v,{text:_,hyperlink:u}):p&&_?n.createElement(w,{text:_,highlightHashtag:m,onHashtagClick:h}):_?n.createElement(T,{text:_,tokenStyles:d}):null}),C=n.memo(e=>{let t=(0,i.v9)(g.Q),r=(0,i.v9)(t=>{var r,n;return e.mentionedProfiles||(null==(n=null==(r=t.communityHub)?void 0:r.comments)?void 0:n.mentionedProfiles)}),a=(t,r,i,o,l)=>t.map((t,s)=>{var d,u,p,m,h;let _="";if((null==(d=t.styles)?void 0:d.includes("ul"))?_=E.BZ:(null==(u=t.styles)?void 0:u.includes("ol"))&&(_=E.PL),null==(p=t.children)?void 0:p.length){let e=t.children.map((e,t)=>n.createElement("li",{key:`li-${r}-${s}-${t}`,className:_},a(e.children,`${r}-${s}-${t}`,i,o,l)));if(null==(m=t.styles)?void 0:m.includes("ul"))return n.createElement("ul",{key:`ul-${r}-${s}`},e);if(null==(h=t.styles)?void 0:h.includes("ol"))return n.createElement("ol",{key:`ol-${r}-${s}`},e)}return n.createElement(S,{key:`${r}-${s}`,orgPath:i,profiles:o||null,commentId:l,text:(0,c.A)(t.t)||void 0,hyperlink:t.link,user:t.user_annotated,userId:t.user_id,profileId:t.profile_id,tokenStyles:t.styles||null,isHashtag:t.is_hashtag,enableHashtags:e.enableHashtags,onHashtagClick:e.onHashtagClick})}),{messageMeta:o,showEditedIndicator:l,commentId:s}=e,d=e.className||E.Bi;return n.createElement("div",{className:E.vs+" "+d,"data-testid":"comment-message",dir:"auto"},a(o,s,t,r,s),l&&n.createElement("span",{className:E.Pz,key:"edited_indicator"},"\xa0",n.createElement(p.Tx,{id:"comments.edited"})))});C.displayName="CommentMessage"},749985:(e,t,r)=>{r.d(t,{Cs:()=>x,IL:()=>B,VG:()=>w,mE:()=>F,r9:()=>O,xz:()=>V});var n=r(652983),i=r(407908),a=r(785466),o=r.n(a),l=r(642045),s=r(970740),c=r(445041),d=r(84315),u=r(798462),p=r(211960),m=r(255301),h=r(112191),_=r(54055),g=r(961215),f=r(424479),E=r(70918),y=r(572333),v=r(646472),b=r(266344),I=r(837264);let T=new Set([]);function w(e){let t={creationDate:(0,s.t)("comments.sort_by_date"),recent:(0,s.t)("comments.sort_by_last_action"),unread:(0,s.t)("comments.sort_by_unread")};return t[e]}let S=(e,t)=>Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at),C={creationDate:S,recent:(e,t)=>Date.parse(t.lastRepliedAt||t.comments[t.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,t)=>{let r=Number(e.comments.some(e=>e.isUnread)),n=Number(t.comments.some(e=>e.isUnread));return r===n?S(e,t):n-r}};function O(e){let t={resolved:(0,s.t)("comments.show_resolved_comments"),yours:(0,s.t)("comments.only_your_threads"),currentPage:(0,s.t)("comments.only_current_page"),currentSlide:(0,s.t)("comments.only_current_slide")};return t[e]}let A=e=>!e.comments[0].resolved_at,N=e=>t=>e&&t.comments.some(t=>t.user_id===e||(0,m.IW)(t).includes(e))||!1,L=e=>t=>e&&t.page===e||!1,P=e=>t=>{let r=t.comments[0].client_meta;return null!=r&&!!r.in_frame&&r.node_id===e},R=(e,t)=>r=>{let n=r.comments[0].client_meta;return!(0,f.JY)(e)||!n||t.get(null==n?void 0:n.node_id)===e},k=e=>"comment-thread"===e.sidebarItemType,D=e=>"feed-post"===e.sidebarItemType,M={currentPage:!1,currentNode:!1,currentSlide:!0};function F(e){let t={commentsOnly:(0,s.t)("comments.only_comments"),postsOnly:(0,s.t)("comments.only_posts")};return t[e]}let x={postsOnly:[I.Kp.RESOLVED],all:[],commentsOnly:[]};async function U(e,t){if(t){let r=t.replace(l.gh,l.XL);return await e.search(r).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return T}let B=n.createContext({});function V(e){var t;let r=(0,p.LE)(),a=(0,p.Wj)(),l=(0,i.I0)(),s=(0,_.hC)(),m=(0,i.v9)(e=>e.comments.showResolved),T=(0,i.v9)(e=>e.comments.showOnlyParticipating),w=(0,i.v9)(e=>e.mirror.appModel.currentPage),S=e.currentNode||w,O=(0,E.dO)()||void 0,F=(0,i.v9)(e=>{let t=e.selectedView;return t.commentThreadId}),V=(0,b.b)(),G=(0,y.YO)(null==(t=g.O$1)?void 0:t.singleSlideLayout().focusedSlideId,f.Hx),[H,W]=n.useState("creationDate"),[K,z]=n.useState({...M,resolved:!m,yours:T,...e.initialFilterState}),[Z,Y]=n.useState("all"),[j,$]=n.useState(""),[q,X]=n.useState(null),J=(0,h.Op)(r),Q=n.useMemo(()=>({resolved:A,yours:N(O),currentPage:L(w),currentNode:P(S),currentSlide:R(G,V)}),[O,w,S,V,G]),ee=n.useMemo(()=>({all:()=>!0,commentsOnly:k,postsOnly:D}),[]),et=n.useCallback(e=>{$(e)},[]),er=n.useCallback(e=>{l(c.H7({activeSort:e})),W(e)},[l]);n.useEffect(()=>{var e;K.resolved||null==(e=null==a?void 0:a.fetchAPI)||e.loadResolved()},[a,K]);let en=n.useCallback(e=>{"resolved"===e&&(l(c.Uc({showResolved:K.resolved})),s&&l((0,u.KU)(K.resolved))),"yours"===e&&(l(c.AH({showOnlyParticipating:!K.yours})),s&&l(d.Bl(K.yours?v.QN.ALL:v.QN.ME))),z(t=>(t[e]=!t[e],{...t}))},[l,K,s]),ei=n.useMemo(()=>{let e=new Set,t=Object.values(I.Kp);for(let r of t)K[r]&&e.add(r);return e},[K]),ea=n.useCallback(e=>{Y(e)},[]);n.useEffect(()=>{x[Z].forEach(e=>{let t="resolved"===e?!ei.has(e):ei.has(e);t&&en(e)})},[Z,ei,en]),n.useEffect(()=>{j?U(J,j).then(e=>{o()(q,e)||X(e)}):X(null)},[r,j,q,J]);let eo=n.useMemo(()=>(function(e,t,r,n,i,a,o,l){if("loaded"!==e.status)return e;let s=[...e.data];for(let e of(l&&(s=s.filter(e=>l.has(e.id))),n))s=s.filter(a[e]);return s=s.filter(o[r]),{...e,data:s.sort(i[t])}})(r,H,Z,ei,C,Q,ee,q),[r,H,Z,ei,Q,ee,q]),el=n.useMemo(()=>({setSort:er,toggleFilter:en,setMode:ea,setQuery:et}),[et,er,en,ea]),es=n.useMemo(()=>({activeQuery:j,activeSort:H,activeMode:Z,activeFilters:ei,threads:r,filteredThreads:eo,filteredSidebarItems:eo,threadManager:el}),[j,H,Z,ei,r,eo,el]),ec=n.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===F)},[F,r]);return n.useEffect(()=>{ec&&ec.comments[0].resolved_at&&K.resolved&&en("resolved")},[K,ec,en]),n.createElement(B.Provider,{value:es},e.children)}},655366:(e,t,r)=>{r.d(t,{Z:()=>E,ge:()=>y,qJ:()=>f});var n=r(652983),i=r(407908),a=r(172497),o=r(445041),l=r(961215),s=r(271774),c=r(70918),d=r(769975),u=r(797674),p=r(160586),m=r(402772),h=r(195139),_=r(289666),g=r(332224);function f(e){let t=(0,i.v9)(e=>e.comments.typeahead);return e.mentionsDisabled&&(null==t?void 0:t.type)==="mentions"||e.hashtagsDisabled&&(null==t?void 0:t.type)==="hashtags"?null:n.createElement(y,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function E(e){let t=(0,i.v9)(e=>e.comments.typeaheadPositionOffset),r=n.useMemo(()=>{let r=e.position||{x:0,y:0};return{top:t.top+r.y,right:t.right+r.x,bottom:t.bottom+r.y,left:t.left+r.x,width:t.width,height:t.height}},[t,e.position]);return n.createElement(y,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:(0,a.F)(g.gw_),direction:u.Vk.DOWNWARDS,targetRect:r})}function y(e){let t;let r=(0,i.v9)(e=>e.comments.emojiPicker),a=(0,i.v9)(e=>e.comments.typeahead),[g,f]=(0,n.useState)(null);n.useEffect(()=>{(null==a?void 0:a.type)==="suggestions"&&f(_.ar)},[null==a?void 0:a.type]);let E=(0,i.I0)(),y=n.useCallback(()=>{E(o.Td({visible:!1}))},[E]),v=n.useCallback(e=>{E(o.rK(e))},[E]),b=(0,s.Mz)({subscribeToUpdates_expensive:!0}),I=n.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:b,[e.useWindowAsViewport,b]),T=((null==I?void 0:I.isPanning)||(null==I?void 0:I.isZooming))&&(null==r?void 0:r.visible);n.useEffect(()=>{T&&y()},[T,y]);let w=(0,c.xJ)(),S=!!(r&&r.visible||a),{onClear:C}=e,O=n.useCallback(()=>{r&&r.visible&&y(),a&&C()},[r,a,y,C]),{decoratorsRef:A}=e;return n.useEffect(()=>{A&&(A.current={visible:S,clearDecorators:O})},[O,A,S]),t={...t=e.useFixedPosition||e.direction!==u.Vk.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>I.height-g&&e.targetRect.top>I.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:u.Vk.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:I.height-e.targetRect.top},direction:u.Vk.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:u.Vk.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:u.Vk.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},n.createElement("div",{style:{pointerEvents:"auto"}},r&&r.visible&&n.createElement(h.y,{onInsert:r.onPick,onCancel:r.onCancel??y,targetRect:r.targetRect}),a&&"emojis"===a.type&&n.createElement(d.p,{dispatchTypeahead:v,typeahead:a,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,emojiImageSet:l.dEA.APPLE,...t}),w&&a&&"mentions"===a.type&&(a.search||a.mentions.length>0)&&n.createElement(m.d,{dispatch:E,setTypeahead:v,typeahead:a,onInsert:e.onInsert,onClear:e.onClear,entity:w,isCommunityMentions:e.isCommunityMentions,width:e.width,recordingKey:"mentionsTypeaheadView",dataTestId:"comment-mentions-typeahead",setMaxTypeaheadHeight:f,isComments:!0,...t}),a&&"suggestions"===a.type&&n.createElement(_.i2,{setTypeahead:v,typeahead:a,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...t}),a&&"hashtags"===a.type&&n.createElement(p.V,{setTypeahead:v,typeahead:a,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,...t}))}},506377:(e,t,r)=>{r.d(t,{Uk:()=>E,XS:()=>y});var n=r(652983),i=r(87608),a=r.n(i),o=r(642045),l=r(523495),s=r(970740),c=r(690590),d=r(225468),u=r(158314),p=r(446595);let m=r(889326);function h(e){return void 0!==e.numUsers}let _={};function g(e,t){let r=e.map(e=>e.handle).slice(0,t),n=e.length-t;return n>0&&r.push((0,l._6)(n,"other")),(0,l.WH)(r)}c.qt.forEach(e=>{_[`:${e.id}:`]=e});let f=n.forwardRef(function(e,t){let r=h(e.reaction)?e.reaction.numUsers:e.reaction.users.length,i=Object.keys(e.reaction.skinTonesToUsers).length,l=i>0?Object.keys(e.reaction.skinTonesToUsers):[""],s=l.map(t=>(0,o.WG)(`${e.reaction.emoji}${t}`)[0]),c={};if(!h(e.reaction)){let t=[],r=[];if(i>0)l.forEach(n=>{let a=`${e.reaction.emoji}${n}`;t.push((0,o.WG)(a)[0].unicode);let l=g(e.reaction.skinTonesToUsers[n],Math.floor(40/i));r.push([a,l])});else{t.push((0,o.WG)(e.reaction.emoji)[0].unicode);let n=g(e.reaction.users,40);r.push([e.reaction.emoji,n])}c={emojiUnicodeList:t,emojiShortcodeToUsers:r}}return n.createElement("button",{className:a()({[p.cY]:e.reaction.selected,[p.U5]:!e.reaction.selected,[p.mT]:!e.visible}),"data-tooltip-type":d.fR.SPECIAL,"data-tooltip":d._7.EMOJI_REACTION,"data-tooltip-data":JSON.stringify(c),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:t},s.map(e=>n.createElement("span",{key:`${e.meta}`,className:p.yL},e.unicode)),n.createElement("span",{className:p.QX},r))});function E(e){let t=e.styleClassName?e.styleClassName:p.rU;return n.createElement(u.I_,{svg:m,"data-tooltip-type":d.fR.TEXT,"data-tooltip":(0,s.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:t,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button"})}function y(e){let{reactions:t,collapseOverflow:r,onClickExisting:i,children:o,prependToList:l}=e,c=n.useRef(null),d=n.useRef({}),[u,m]=n.useState(null),[h,_]=n.useState(!r);n.useLayoutEffect(()=>{if(!c.current)return;let{width:e}=c.current.getBoundingClientRect(),r=-parseInt(p.Y8)+parseInt(p.q9),n=0;for(let i of t){let a=d.current[i.emoji];if(!a)return;if((r+=parseInt(p.Y8)+a.getBoundingClientRect().width)>e||n===t.length-1&&r+40+parseInt(p.Y8)>e)break;n+=1}m(n)},[t]);let g=null===u?null:t.length-u,E=t.map((t,r)=>{let a=i?e=>i(t,e):void 0;return n.createElement(f,{key:t.emoji,reaction:t,onClick:a,ref:e=>d.current[t.emoji]=e,visible:h||e.addedReaction||null===u||r<u})}),y=!(h||e.addedReaction)&&null!==g&&g>0;return n.createElement(n.Fragment,null,n.createElement("div",{className:a()({[p.QY]:!0,[p.eA]:y,[p.yf]:!(h||e.addedReaction)&&null===g}),ref:c},...l??[],E,!y&&o),y&&n.createElement("div",{className:p.Z0},n.createElement("button",{className:p.U5,onClick:()=>{_(!0)},"data-testid":"show-more-reactions-button"},n.createElement(s.Tx,{id:"comments.num_hidden_more",numHidden:g}))))}},940118:(e,t,r)=>{r.d(t,{i:()=>d,p:()=>c});var n=r(652983),i=r(87608),a=r.n(i),o=r(524261),l=r(970740),s=r(614711);let c=(0,o.kH)("lazy_thread_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(1006),r.e(5376)]).then(r.bind(r,792425));return{default:e.ThreadCommentComposer}}});function d(e){let{type:t}=e;return n.createElement("div",{className:a()({[s.XJ]:"new"===t,[s.lD]:"thread"===t})},n.createElement("span",null,n.createElement(l.Tx,{id:"comments.failed_to_load"})))}},621654:(e,t,r)=>{r.d(t,{M:()=>d});var n=r(652983),i=r(716250),a=r(523495),o=r(970740),l=r(547699),s=r(940118),c=r(614711);function d(e){let t=n.useCallback(()=>{var t;if(null==(t=e.replyContainerRef)?void 0:t.current){let t=(0,i.BZ)().comments_smooth_scroll?"smooth":"auto";e.replyContainerRef.current.scrollIntoView({block:"end",behavior:t})}},[e.replyContainerRef]),r=n.createElement(s.p,{fallback:null,errorFallback:n.createElement(s.i,{type:"thread"}),editorRef:e.editorRef,editorType:e.editorType,dispatch:e.dispatch,user:e.user,typeahead:e.typeahead,mentionables:e.mentionables,threadPosition:e.threadPosition,setHyperlinkLocation:e.setHyperlinkLocation,hyperlinkLocation:e.hyperlinkLocation,setHyperlinkEditorRef:e.setHyperlinkEditorRef,messageMeta:e.messageMeta,attachments:e.attachments,submitText:e.submitText,placeholderText:e.placeholderText,onCancel:e.onCancel,onSubmit:e.onSubmit,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,editorOnInsert:e.editorOnInsert,editorOnClear:e.editorOnClear,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,isDisabled:e.isDisabled,mountInputFocused:e.mountInputFocused,updateMessage:e.updateMessage,updateAttachment:e.updateAttachment,deleteAttachment:e.deleteAttachment,setIsEditorFocused:e.setIsEditorFocused,isEmojiPickerDisabled:e.isEmojiPickerDisabled,hideEmojiPicker:e.hideEmojiPicker,allowAttachments:e.allowAttachments,recordingKey:e.recordingKey,className:e.className,authorChanged:e.authorChanged,createdAt:e.createdAt,threadId:e.threadId,fileKey:e.fileKey,editingExistingComment:e.editingExistingComment,scrollToBottom:e.replyContainerRef&&t,maintainSelectionOnFocus:e.maintainSelectionOnFocus});return n.createElement("div",{className:c.tA,ref:e.replyContainerRef,"aria-label":e.authorNames?(0,o.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,a.WH)(e.authorNames)}):(0,o.t)("fullscreen.accessibility.reply_to_comment")},n.createElement("div",{className:c.vl},n.createElement(l.Yt,{user:e.user||{}})),r)}},182239:(e,t,r)=>{r.d(t,{S:()=>s,V:()=>l});var n=r(269658),i=r(337167),a=r(448694),o=r(718099);function l(e,t){var r;let n=i.n_.get(o.WZ),a=i.n_.get(o.ko),l=(null==(r=i.n_.get(o.bt))?void 0:r.index)??null;return c(e,n,l,t,a)}function s(e,t,r,i){var o;let l=n.V.getState(),s=c(t,e,r,n.V,i);(0,a.hp)("canvas_mention_search_cancelled",null==(o=l.openFile)?void 0:o.key,l,s)}function c(e,t,r,n,i){return{search_session_id:i,node_id:e,node_type:function(e,t){if(!e)return null;let r=t.getState().mirror.sceneGraph,n=r.get(e);return(null==n?void 0:n.type)||null}(e,n),query_length:null==t?void 0:t.length,contains_at_symbol:null==t?void 0:t.includes("@"),result_row_index:r}}},853915:(e,t,r)=>{r.d(t,{Bp:()=>eu,hq:()=>ed,n:()=>er});var n,i=r(652983),a=r(63730),o=r(407908),l=r(87608),s=r.n(l),c=r(686926),d=r(46347),u=r(172497),p=r(204829),m=r(564380),h=r(435613),_=r(617984),g=r(970740),f=r(740794),E=r(317907),y=r(158774),v=r(961215),b=r(474935),I=r(420353),T=r(271774),w=r(457753),S=r(464368),C=r(809340),O=r(225468),A=r(415850),N=r(761090),L=r(130939),P=r(209006),R=r(186379),k=r(518484);let D=(0,i.createContext)({finishedAnimating:!1,draggedStamp:null,shouldDragCancel:!1,setFinishedAnimating:e=>{},onDrag:e=>{},onDragStart:e=>{},onDragEnd:()=>{},wheelContainerRef:{current:null},wheelContentRef:{current:null}});function M(e){let[t,r]=(0,i.useState)(!1),[n,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),s=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useMemo)(()=>({finishedAnimating:t,draggedStamp:n,shouldDragCancel:o,wheelContainerRef:s,wheelContentRef:c,onDragStart:e=>{var t;d.current=(null==(t=c.current)?void 0:t.getBoundingClientRect())||null,a(e)},onDragEnd:()=>{d.current=null,a(null),l(!1)},onDrag:e=>{if(d.current){let t=d.current,r=k.OW.distance(new k.OW(e.x,e.y),new k.OW(t.left+t.width/2,t.top+t.height/2))<=t.width/2;r!==o&&l(r)}},setFinishedAnimating:e=>{r(e)}}),[t,n,o]);return i.createElement(D.Provider,{value:u},e.children)}function F(e){let t=(0,i.useContext)(D);return e?t.draggedStamp===e:null!=t.draggedStamp}function x(){let e=(0,i.useContext)(D);return e.wheelContainerRef}var U=r(264505),B=r(617113),V=r(336752);let G="emoji_wheel--active---0zBa",H="emoji_wheel--reactionsCenter--Z6kHH emoji_wheel--center--5zTgA",W="emoji_wheel--expand--bSTWk",K="emoji_wheel--switchWheel1--pASAD",z="emoji_wheel--switchWheel2--1Iksu";var Z=r(951261),Y=r(332224),j=r(729408);let $=r(223825),q=r(612705),X=r(522652),J=r(776730),Q=(0,u.z)(Y.JZB),ee=2*I.q;var et=((n=et||{}).REACTION="REACTION",n.STAMP="STAMP",n.VOTE_STAMP="VOTE_STAMP",n);function er(){return(0,o.v9)(e=>{let t=Z.GJ7.toUpperCase().substring(1),r=e.multiplayer.allUsers;return r&&0!==r.length?r[0].color.substring(1):t})}function en(e){let{className:t,name:r,position:n,onMouseEnter:a,onMouseLeave:o}=e,l=p.Wn(`emojiWheel.wedge.${r}`,"mousedown",e.onClick),c=(0,R.y)(),d={transform:`scaleX(-1) rotate(${(n-1)*45+22.5}deg)`};return n%2==0&&(d.transform=`rotate(${(4-n)*45-22.5}deg)`),i.createElement("svg",{"aria-hidden":"true",style:d,className:s()(t,c&&"r-chat"===r&&"emoji_wheel--reactionsWedgeDisabled--0h2dE"),width:ee,height:ee,viewBox:`0 0 ${ee} ${ee}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{onClick:l,onMouseEnter:a,onMouseLeave:o,d:`M0 ${I.q}H${I.q}L0 0V${I.q}Z`,fill:"white","data-tooltip-type":O.fR.TEXT,"data-tooltip-offset-x":30,"data-tooltip-offset-y":-50,"data-tooltip":!0===c&&"r-chat"===r?(0,g.t)("fullscreen_actions.disable-cursor-chat"):null}))}function ei({type:e,x:t,y:r,openedViaHover:n}){let a=(0,o.I0)(),l=(0,o.v9)(e=>e.mirror.appModel.isReadOnly);if(l)return i.createElement("div",{className:H},i.createElement("div",{className:"emoji_wheel--singleCenterReaction--xWX-5 emoji_wheel--singleCenter--X3W61"},i.createElement(h.n,{svg:q})));if("VOTE_STAMP"===e)return i.createElement("div",{className:"emoji_wheel--voteStampsCenter--4F1L3 emoji_wheel--center--5zTgA"},i.createElement("div",{className:"emoji_wheel--singleCenterVoting--N2E5- emoji_wheel--singleCenter--X3W61"},i.createElement(h.n,{svg:X})));let c=()=>{a(f.wT({wheelType:{STAMP:"REACTION2",REACTION:"STAMP1"}[e],isReadonly:l,isJoinedToActiveVotingSession:!1,viewportX:t,viewportY:r,source:"emoji_wheel_toggle",openedViaHover:n}))},d={REACTION:H,STAMP:"emoji_wheel--stampsCenter---ZqKJ emoji_wheel--center--5zTgA"}[e];return i.createElement("div",{className:d},i.createElement(m.yh,{"aria-label":(0,g.t)("fullscreen.reaction_wheel"),"aria-pressed":"REACTION"===e,role:"button",recordingKey:"emoji-wheel-reaction-button",className:s()("emoji_wheel--reactionsButton--H7Rps","REACTION"===e&&G),onClick:"REACTION"!==e?c:void 0},i.createElement(h.n,{svg:q})),i.createElement(m.yh,{"aria-label":(0,g.t)("fullscreen.stamp_wheel"),"aria-pressed":"STAMP"===e,role:"button",recordingKey:"emoji-wheel-stamp-button",className:s()("emoji_wheel--stampsButton--XDDR8","STAMP"===e&&G),onClick:"STAMP"!==e?c:void 0},i.createElement(h.n,{svg:X})))}let ea=i.createContext({top:0,left:0});function eo({x:e,y:t,type:r,emojis:n,openedViaHover:a}){let l=x(),c=function(){let e=(0,i.useContext)(D);return e.wheelContentRef}(),u=(0,o.I0)(),[p,m]=i.useState(null),{onAnimationStart:y,onAnimationEnd:T}=function(){let e=(0,i.useContext)(D);return{onAnimationStart:()=>e.setFinishedAnimating(!1),onAnimationEnd:()=>e.setFinishedAnimating(!0)}}(),[w,O]=(0,i.useState)(!1),A=i.useCallback(()=>{u(f.Jo())},[u]),R=F();(0,P.C)(A,{closeOnEsc:!0,ignore:[l.current,(0,L.rk)(),(0,E.e5)(N.bO)]});let k=er(),M=(0,S.ob)();i.useEffect(()=>{a||M===v.UAh.SELECT||M===v.UAh.HAND_SELECT||A()},[M,A,a]),i.useEffect(()=>{R&&M!==v.UAh.SELECT&&M!==v.UAh.HAND_SELECT&&v.iTB.triggerAction("set-tool-default",null)},[R,M]),i.useLayoutEffect(()=>{m(e=>{switch(e){case null:return W;case W:return K;case K:return z;case z:return K;default:return e}})},[r]);let B={REACTION:"emoji_wheel--reactions--RKlR4 emoji_wheel--wheel--sg2lN",STAMP:"emoji_wheel--stamps--ty-ji emoji_wheel--wheel--sg2lN",VOTE_STAMP:"emoji_wheel--voteStamps--yhYZR emoji_wheel--wheel--sg2lN"}[r],V={REACTION:"emoji_wheel--reactionsDial--A3mRG emoji_wheel--dial--05ZOf",STAMP:"emoji_wheel--stampsDial--CLKFt emoji_wheel--dial--05ZOf",VOTE_STAMP:"emoji_wheel--voteStampsDial--v9czq emoji_wheel--dial--05ZOf"}[r],G=I.q+3,H=Math.min(window.innerHeight-2*G,Math.max(Q,t+Q-G)),Z=Math.min(window.innerWidth-2*G,Math.max(0,e-G)),Y={top:H,left:Z,position:"absolute",zIndex:j.CbF},q=i.useRef(null),[X,et]=i.useState(null),en=i.useCallback((e,t,r)=>{let n=(0,U.lw)(e,k),i={x:t,y:r-Q},a=e.type;switch(a){case"STAMP":C.Tx.trackFromFullscreen("Start stamping",{name:e.name}),(0,U.G7)(n,e.label||""),A();break;case"VOTE_STAMP":C.Tx.trackFromFullscreen("Start vote stamping",{name:e.name}),(0,U.G7)(n,e.label||""),A();break;case"REACTION":C.Tx.trackFromFullscreen("Start reacting",{name:e.name}),u(f.uM({imageUrl:n,name:e.name,position:i})),v.iTB.triggerAction("set-tool-default",null);break;case"ACTION":A(),e.action(i,u);break;default:(0,d.vE)(a)}},[k,A,u]),eo=a&&!R;i.useEffect(()=>{if(eo&&!w){let e=setTimeout(A,300);return()=>clearTimeout(e)}},[w,eo,A]),i.useEffect(()=>{let e=e=>{if(q.current){let{x:t,y:r}=e;en(q.current,t,r)}};return b.J8.addTriggerActiveWheelButtonListener(e),()=>{b.J8.removeTriggerActiveWheelButtonListener(e)}},[en]),i.useEffect(()=>{var e;null==(e=l.current)||e.focus()},[l,r]);let es=null!=X?{transform:`rotate(${-(45*X)-22.5}deg)`}:null,ec=null!=p?{animation:`${p} 0.2s ease-in-out`}:{};return i.createElement(ea.Provider,{value:{top:H,left:Z}},i.createElement("div",{tabIndex:-1,"aria-label":function(e){switch(e){case"REACTION":return(0,g.t)("fullscreen.reaction_wheel");case"STAMP":return(0,g.t)("fullscreen.stamp_wheel");case"VOTE_STAMP":return(0,g.t)("fullscreen.vote_stamp_wheel")}}(r),ref:l,style:Y,className:s()("emoji_wheel--wheelContainer--PDwZJ",a&&"emoji_wheel--wheelContainerWithExtendedHitBox--dtL8J"),onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),"data-fullscreen-intercept":!0},i.createElement(_.L,null,i.createElement("div",{style:ec,ref:c,className:B,onAnimationStart:y,onAnimationEnd:T},i.createElement(h.n,{ariaHidden:!0,autosize:!0,height:`${ee}px`,width:`${ee}px`,useOriginalSrcFills_DEPRECATED:!0,svg:$}),n.map(e=>i.createElement(el,{key:e.name,emoji:e,multiplayerColor:k,active:q.current===e,type:r,onMouseEnter:e=>{if(q.current=e,null==X)et(e.position);else{let t=(e.position-X)%8;t<-4&&(t+=8),t>4&&(t-=8),et(X+t)}},onMouseLeave:()=>{q.current=null,et(null)},onClick:(e,t)=>{en(t,e.clientX,e.clientY)}})),es&&i.createElement(h.n,{ariaHidden:!0,autosize:!0,height:`${ee+54}px`,width:`${ee+54}px`,className:V,svg:J,style:es}))),i.createElement(ei,{type:r,x:e,y:t,openedViaHover:a})))}function el(e){let{active:t,emoji:r,multiplayerColor:n,onMouseEnter:a,onMouseLeave:o,onClick:l,type:c}=e,d=F(r.name),u=function(){let e=(0,i.useContext)(D);return e.finishedAnimating}(),p=(0,R.y)(),m=i.useRef(null),[h,_]=i.useState(null);if(i.useEffect(()=>{(0,U.z5)(r,n).then(_)},[r,n]),!h)return i.createElement(i.Fragment,{key:r.name});let g={REACTION:12,STAMP:20,VOTE_STAMP:20}[c],f={REACTION:!1,STAMP:!0,VOTE_STAMP:!0,ACTION:!1}[r.type],E=r.offset||.74,y=r.position*Math.PI/4,v=(Math.cos(y)*E+1)*I.q-20,b=(1-Math.sin(y)*E)*I.q-20;return i.createElement("span",{key:r.name},i.createElement(en,{className:s()("emoji_wheel--wedge--sBm7k",t&&!d&&({REACTION:"emoji_wheel--reactionsWedgeActive--nDFhr",STAMP:"emoji_wheel--stampsWedgeActive--fiShF",VOTE_STAMP:"emoji_wheel--voteStampsWedgeActive--F5i4m"})[c]),name:r.name,position:r.position,onMouseEnter:()=>a(r),onMouseLeave:o,onClick:e=>l(e,r)}),i.createElement("div",{className:"emoji_wheel--emoji--EG-Xt",style:{top:b,left:v},ref:m},!d&&i.createElement("button",{"aria-label":null==r.i18nName?r.label:r.i18nName(),className:s()("emoji_wheel--emojiButtonContainer--kC-6-",p&&"r-chat"===r.name&&"emoji_wheel--emojiButtonContainerDisabled--zc8XC"),"data-fullscreen-intercept":!0,onClick:e=>l(e,r),onFocus:()=>a(r),onBlur:o},i.createElement("img",{style:{width:2*g,height:2*g},src:h,alt:`${r.name} emoji`}))),f&&u&&i.createElement(es,{contentTarget:m.current,stamp:r,url:h,onClick:e=>l(e,r),onMouseEnter:()=>a(r),onMouseLeave:o}))}function es(e){let{contentTarget:t,onMouseEnter:r,onMouseLeave:n,stamp:o,url:l}=e,s=x(),[d,u]=i.useState(0),m=i.useRef(null),[h,_]=i.useState(null),g=i.useContext(ea);i.useLayoutEffect(()=>{if(t){let e=t.getBoundingClientRect();_({top:e.top,left:e.left})}else _(null)},[t,g.top,g.left]);let{onDragStart:f,onDrag:E,onDragEnd:b}=function(){let e=(0,i.useContext)(D);return{onDragStart:e.onDragStart,onDrag:e.onDrag,onDragEnd:e.onDragEnd}}(),I=F(o.name),w=function(){let e=(0,i.useContext)(D);return e.shouldDragCancel}(),S=(0,T.wD)({subscribeToUpdates_expensive:I}),C=p.Wn(`emojiWheel.draggableStamp.${o.name}`,"mousedown",e.onClick);return h&&l&&s.current?(0,a.createPortal)(i.createElement(c.E.div,{key:d,"aria-hidden":"true",onClick:e=>{e.stopPropagation(),e.preventDefault(),C(e)},className:"emoji_wheel--emojiDraggable--6hh9L",style:{top:h.top,left:h.left},onMouseEnter:r,onMouseLeave:n,drag:!0,variants:{initial:{scale:1},whileDrag:{scale:1.5*S},whileDragCancel:{scale:.93}},animate:I?w?"whileDragCancel":"whileDrag":"initial",ref:m,dragElastic:1,dragConstraints:{top:0,bottom:0,right:0,left:0},onDragStart:()=>{f(o.name)},onDrag:(e,t)=>{E(t.point)},onDragEnd:()=>{if(!w){let e=m.current;if(e){let t=e.getBoundingClientRect(),r=y.Gr.getViewportInfo(),n={x:t.left-r.x,y:t.top-r.y},i=(0,T.NL)(r,n);(0,U.HI)(l,o.label||"",Math.round(i.x),Math.round(i.y),null,v.Od1.USER)}}u(e=>e+1),b(),n()}},i.createElement("img",{draggable:!1,style:{width:40,height:40},src:l,alt:`${o.name} emoji`})),s.current):null}function ec(){let e=function(){let e=(0,o.v9)(e=>e.multiplayer.allUsers.find(t=>t.sessionID===e.multiplayer.sessionID)),t=(0,o.v9)(t=>{var r,n;if(e&&e.imageURL)return`${e.imageURL}?c=1`;let i=null==(n=null==(r=t.user)?void 0:r.profile)?void 0:n.images;return i&&i["500_500"]?`${i["500_500"]}?c=1`:null}),r=e?e.name:null,n=(0,A.hx)(null==e?void 0:e.userID,A.dn),a=(0,U.mM)(t,r,n),l=(0,U.DB)(t,r,n);return i.useMemo(()=>({stamp:a,voteStamp:l}),[a,l])}(),t=er(),r=i.useMemo(()=>(0,V.t2)(e.stamp),[e.stamp]),n=i.useMemo(()=>(0,V.Z)(e.voteStamp),[e.voteStamp]);return i.useEffect(()=>{(0,U.rr)(B.o,t)},[t]),i.useEffect(()=>{(0,U.rr)(r,t)},[t,r]),i.useEffect(()=>{(0,U.rr)(n,t)},[t,n]),{REACTION:B.o,STAMP:r,VOTE_STAMP:n}}function ed(){return ec(),i.createElement(i.Fragment,null)}function eu(e){let t=(0,w.EK)(),r=function({wheelType:e,isJoinedToActiveVotingSession:t}){return t?"VOTE_STAMP":({STAMP1:"STAMP",STAMP2:"STAMP",REACTION1:"REACTION",REACTION2:"REACTION"})[e]}({wheelType:e.multiplayerEmoji.wheelType,isJoinedToActiveVotingSession:t}),n=function({wheelType:e}){return ec()[e]}({wheelType:r});if("WHEEL"!==e.multiplayerEmoji.type)return i.createElement(i.Fragment,null);let{viewportX:a,viewportY:o,openedViaHover:l}=e.multiplayerEmoji;return i.createElement(M,null,i.createElement(eo,{x:a,y:o,type:r,emojis:n,openedViaHover:l}))}},264505:(e,t,r)=>{r.d(t,{DB:()=>E,G7:()=>y,HI:()=>v,e:()=>I,kx:()=>b,lw:()=>T,mM:()=>f,pc:()=>g,rr:()=>w,z5:()=>S});var n=r(652983),i=r(196401),a=r(286206),o=r(117986),l=r(961215),s=r(269075),c=r(347712),d=r(535963),u=r(840944),p=r(951261);let m=Object.create(null);function h(e){return(0,d.r6)(e).catch(()=>null)}let _=new u.W;async function g({profileImageUrl:e,userName:t,userColor:r,noCircleOutline:n}){let i=500*window.devicePixelRatio,a=81.25*window.devicePixelRatio,[o,l]=await Promise.all([h({url:"https://static.figma.com/uploads/cbbdc3ccc2f650369332a454328722aa11cbd78a",height:i,width:i}),e?h({url:e,height:i,width:i}):null]),s=(0,d.AY)(i,i),c=s.getContext("2d");if(!o)return"";if(n||c.drawImage(o,0,0,i,i),c.arc(i/2,i/2,i/2-a,0,2*Math.PI,!0),c.clip(),l){let e=i-2*a;c.drawImage(l,a,a,e,e)}else{if(!r||!t)return"";c.fillStyle=r,c.fillRect(0,0,i,i),c.textBaseline="middle",c.textAlign="center";let e=187.5*window.devicePixelRatio;c.font=`${e}px Inter`,c.fillStyle===p.IxL?c.fillStyle=p.Ycf:c.fillStyle="white",c.fillText(t.substring(0,1).toUpperCase(),i/2,i/2+10*window.devicePixelRatio)}c.scale(window.devicePixelRatio,window.devicePixelRatio);let u=s.toDataURL("image/png");return _.set(u,e,t,r,n),u}function f(e,t,r,i){let[a,o]=(0,n.useState)(_.get(e,t,r,i)||"");return(0,n.useEffect)(()=>{if(!e&&!(t&&r)){o("");return}let n=!1,l=_.get(e,t,r,i);return l!==a&&(l?o(l):g({profileImageUrl:e,userName:t,userColor:r,noCircleOutline:i}).then(e=>{n||o(e)})),()=>{n=!0}},[e,t,r,i,a]),a}function E(e,t,r){let[i,a]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e&&!(t&&r)){a(null);return}let n=!1,i=async()=>{let[n,i,a]=await Promise.all([h({url:"https://static.figma.com/uploads/cd58a828de2645b5c35b76d4b8ea61b0e93e2b34",height:160,width:160}),h({url:"https://static.figma.com/uploads/e8f7fcffc0ef390a0bdac65da832cf0a35588ae0",height:80,width:76}),e?h({url:e,height:500,width:500}):null]),o=(0,d.AY)(160,160),l=o.getContext("2d");if(!n||!i)return null;if(l.drawImage(n,0,0,160,160),l.save(),l.arc(72,80,48,0,2*Math.PI,!0),l.clip(),a)l.drawImage(a,24,32,96,96);else{if(!r||!t)return null;l.fillStyle=r,l.fillRect(0,0,160,160),l.textBaseline="middle",l.textAlign="center",l.font="53px Inter",l.fillStyle="white",l.fillText(t.substring(0,1).toUpperCase(),72,83)}return l.restore(),l.drawImage(i,80,56,76,80),o.toDataURL("image/png")};return i().then(e=>{n||a(e)}),()=>{n=!0}},[e,t,r]),i}async function y(e,t){let r=await (0,c.f)(e,m);(0,a.YK)("activateStampToolWithImageURL","setting stamp tool",{label:t,bytesLength:null==r?void 0:r.length}),l.iTB.activateStampTool(r,t)}async function v(e,t,r,n,i,a){let o=await (0,c.f)(e,m);(0,s.y2)(a,"drop-stamp",()=>l.iTB.emojiWheelDropStampOntoCanvas(o,t,r,n,i,"wheel"))}async function b(e,t,r,n,i,a){let o=await (0,c.f)(e,m);(0,s.y2)(a,"drop-face",()=>l.iTB.dropFaceOntoCanvas(o,"Face Stamp",t,r,n,i))}async function I(e,t,r,n){let i=await (0,c.f)(e,m);(0,s.y2)(n,"replace-face",()=>l.iTB.updateFaceForNode(i,t,r))}function T(e,t){if(e.image)return`https://static.figma.com/uploads/${e.image}`;if(e.imageFunc)return e.imageFunc(t);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function w(e,t){for(let r of e){let e=T(r,t);e&&(0,c.f)(e,m).catch(e=>{(0,a.Jz)(o.k.FIGJAM_CORE,e)})}}async function S(e,t){let r=T(e,t);if(!r)return null;try{let e=await (0,c.f)(r,m);return`data:image/png;base64,${(0,i.cv)(e)}`}catch{return(0,a.Cp)("emoji wheel","unable to load emoji data",{url:r,name:e.name}),null}}},617113:(e,t,r)=>{r.d(t,{o:()=>a});var n=r(740794),i=r(186379);let a=[{type:"REACTION",name:"r-fire",image:"d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",position:2},{type:"REACTION",name:"r-surprised",image:"1429964104bceac90c5c8e731ce4cc50b27e2797",position:1},{type:"REACTION",name:"r-eyes",image:"ffd0635e8f9322352eff0c15411ac0b536b98d87",position:8},{type:"REACTION",name:"r-wave",image:"0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",position:7},{type:"ACTION",name:"r-chat",image:"d1de3f6fe1f8ffa74d3db5203b2df761d0fed1cc",position:6,action:(e,t)=>{(0,i.R)().then(r=>{r||t(n.fJ({position:e,source:"emoji_wheel_reactions"}))})}},{type:"REACTION",name:"r-sad",image:"78f60a21d2616c2a24c7645d8636dec855e48ffb",position:5},{type:"REACTION",name:"r-laugh",image:"a83de90bf34495081ce2e8bcaf28d1d2c16e5186",position:4},{type:"REACTION",name:"r-love",image:"ff5be810b821d264cc2c95f665d24a867c34e587",position:3}]},336752:(e,t,r)=>{r.d(t,{Hd:()=>u,MQ:()=>l,Z:()=>d,dM:()=>p,n0:()=>i,t2:()=>o});var n=r(970740);let i="s-heart";function a(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,n.t)("fullscreen.stamp_wheel.heart")}]}function o(e){return a({heart:"af824a5efc8f5738e597b114e77ec693dc694783",thumbsDown:"aa22611268cdcc5c6a89b0fbfdb1acbf6d98378d",star:"3b83c9551d5d60e27ad4ca2f67cd10358a154401",thumbsUp:"933574dba7004721d4f0fe0ba0f4d5069e106383",question:"d81074b0b59deec7f21f7c9d68653119fb0dbac2",profile:()=>e,dots:e=>`https://static.figma.com/figjam_dots/${e}.png`,plusOne:"f54909c2377f2c9da84382594e98db7b2a5c5f8f"})}function l(e){let t=o(null),r=t.find(t=>t.label===e);return r&&r.i18nName?r.i18nName:()=>(0,n.t)("fullscreen.accessibility_dom.labelled_stamp",{label:(null==r?void 0:r.label)??""})}let s={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return a({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let t=s[e]||s["667799"];return`https://static.figma.com/uploads/${t}`},plusOne:c["s-plusOne"]})}let u="https://static.figma.com/uploads/2b2029d1eabf48358e208427103a2023435751dc",p=a({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>"https://static.figma.com/uploads/cb417fb549d06a2fb42e182cddd2b94b1996b768",dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},318649:(e,t,r)=>{r.d(t,{yz:()=>b,JZ:()=>f,AY:()=>y,U:()=>v});var n=r(652983),i=r(87608),a=r.n(i),o=r(519781),l=r(618723),s=r(970740),c=r(367674),d=r(124040),u=r(131826),p=r(587487),m=r(675207),h=r(578627);let _="figma_basics_tooltip--tooltipContainer--y5pAG pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",g=r(328630);function f({currentStepNum:e,totalNumSteps:t,useLoadingBar:r}){if(null==e||null==t)return null;let i=Math.min(e/t*64,64);return r?n.createElement("div",{className:"figma_basics_tooltip--loadingBar--RRCLi"},n.createElement("div",{className:a()({"figma_basics_tooltip--filledLoadingSection--hztYR":!0,"figma_basics_tooltip--borderRightRadius--OD3B7":i>=64}),style:{width:`${i}px`}})):n.createElement("span",{className:"figma_basics_tooltip--lowerLeftText--6fDVr text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(s.Tx,{id:"rcs.rcs_shared.step_counter",currentStepNum:e,totalNumSteps:t}))}function E(e){return n.createElement(n.Fragment,null,n.createElement("h2",{className:"figma_basics_tooltip--header--1MabN text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.title),n.createElement(l.Ki,{multiple:1}),n.createElement("div",{className:"figma_basics_tooltip--description--2Km4-"},e.children),n.createElement(l.Ki,{multiple:3}),n.createElement(c.j,{verticalAlignItems:"center",direction:"horizontal",spacing:8},e.lowerLeftText,n.createElement(c.m,null),e.onSecondaryCtaClick&&n.createElement(l.pJ,{onClick:e.onSecondaryCtaClick},e.secondaryCtaText||n.createElement(s.Tx,{id:"tooltips_plus_onboarding.back"})),e.onPrimaryCtaClick&&n.createElement(l.RS,{onClick:e.onPrimaryCtaClick,trackingProperties:{ctaTrackingDescriptor:d.y.NEXT}},e.primaryCtaText||n.createElement(s.Tx,{id:"tooltips_plus_onboarding.next"}))))}function y(e){return n.createElement(u.Ui,{name:e.trackingContextName},!e.disableHighlight&&n.createElement(m.t,{target:e.targetKey}),n.createElement(p.fv,{className:a()({[_]:!0,"figma_basics_tooltip--tooltipContainerForDesignPanel--UI7Mt":"designPanel"===e.pointsTo,"figma_basics_tooltip--tooltipContainerForToolbar--PhD77":"toolbar"===e.pointsTo,"figma_basics_tooltip--tooltipContainerForLeftPanel--pBrWU":"leftPanel"===e.pointsTo}),targetKey:e.targetKey,shouldCenterArrow:e.shouldCenterArrow,disableClickOutsideToHide:!0,dismissModal:e.dismissModal,hideCloseButton:e.hideCloseButton,arrowPosition:e.arrowPosition,hidePointer:e.hidePointer,width:300,hideIfTargetLost:!0},n.createElement(E,{title:e.title,children:e.children,lowerLeftText:e.lowerLeftText,onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,secondaryCtaText:e.secondaryCtaText,primaryCtaText:e.primaryCtaText})))}function v(e){return n.createElement(u.Ui,{name:e.trackingContextName},n.createElement("div",{style:{width:300},className:a()(_,"figma_basics_tooltip--tooltipContainer__noTarget--kQ-Rm")},n.createElement(E,{title:e.title,children:e.children,lowerLeftText:e.lowerLeftText,onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,secondaryCtaText:e.secondaryCtaText,primaryCtaText:e.primaryCtaText}),n.createElement(o.PZ,{className:h.Ah,onClick:e.dismissModal,innerText:"close",svg:g})))}function b(e){return n.createElement("div",{className:"figma_basics_tooltip--bottomRightContainer--zvs9g"},e.children)}},55669:(e,t,r)=>{r.d(t,{X1:()=>u,tS:()=>d});var n=r(652983),i=r(407908),a=r(768358),o=r(337167),l=r(217810),s=r(864974);let c={x:(0,o.cn)(void 0),y:(0,o.cn)(void 0),cornerRadius:(0,o.cn)(void 0),angle:(0,o.cn)(void 0),width:(0,o.cn)(void 0),height:(0,o.cn)(void 0),fontSize:(0,o.cn)(void 0),fontStyle:(0,o.cn)(void 0),fontFamily:(0,o.cn)(void 0),fillPaints:(0,o.cn)(void 0),strokePaints:(0,o.cn)(void 0),effects:(0,o.cn)(void 0)},d=(0,a.D)(e=>{let t=c[e];t&&o.n_.set(t,e=>!e)},200,!0);function u(e,t){let r=(0,i.oR)(),a=c[e],d=(0,o.Dv)(a);n.useEffect(()=>{if(t&&t.current||(0,l.Rw)(d))return;let e=r.getState().userFlags.figma_basics_has_modified_properties;e||r.dispatch(s.v({figma_basics_has_modified_properties:!0}))},[t,d,r])}},136448:(e,t,r)=>{r.d(t,{V:()=>p,g:()=>u});var n=r(652983);let i="file_load--tabBar--D43oo",a="file_load--tabName--TrE24",o="file_load--shimmer--0w-rr",l="file_load--title--kxgMz";function s(){return n.createElement("div",{className:`${o} file_load--text--6ZMqP`})}function c(e){let t=12+.5*e.index;return n.createElement("div",{className:"file_load--style--r3WWP",style:{animationDelay:`${t}s`}},n.createElement("div",{className:`${o} file_load--circle--RmZhY`}),n.createElement(s,null))}function d(e){let t=Math.floor(e.index/5),r=e.index%5;return n.createElement("div",{className:"file_load--shimmerContainer--TJ3Mx",style:{animationDelay:`${3+2*t+.05*r}s`}},n.createElement(s,null))}function u(){let e=[];for(let t=0;t<15;t++)e.push(n.createElement(c,{key:t,index:t}));return n.createElement("div",null,n.createElement("div",{className:i},n.createElement("div",{className:`${a} ${o}`}),n.createElement("div",{className:`${a} ${o}`}),n.createElement("div",{className:`${a} ${o}`})),n.createElement("div",null,n.createElement("div",{className:"file_load--backgroundProperty--Uw1mR"},n.createElement("div",{className:`${o} ${l}`}),n.createElement("div",{className:`${o} file_load--full--YH06h`}))),n.createElement("div",{className:"file_load--styles--jq3r4"},n.createElement("div",{className:`${o} ${l}`}),e))}function p(){let e=[];for(let t=0;t<24;t++)e.push(n.createElement(d,{key:t,index:t}));return n.createElement("div",null,n.createElement("div",{className:i},n.createElement("div",{className:`file_load--searchTab--7r-4M ${o}`}),n.createElement("div",{className:`${a} ${o}`}),n.createElement("div",{className:`${a} ${o}`})),n.createElement("div",{className:"file_load--layers--llavb"},e))}},402191:(e,t,r)=>{r.d(t,{JJ:()=>T,w7:()=>function e(t,r){return(0,i.We)(t.filter(e=>T(e,{isDesktopMenu:!1,isReadOnly:r.appModel.isReadOnly,isSearching:!!r.isSearching,selectedView:r.selectedView,isLimitedDevMode:r.isLimitedDevMode})).map(t=>(function(t,r){let i;if(!t)return null;if((0,d.CL)(t)){let e={...t};return e.disabled=!1,e.separator=!0,e}if((0,d.$T)(t))return{displayText:t.name,disabled:!0};if((0,d.gK)(t))return{...t};let o=(0,d.JA)(t)&&t.disabled||!t.name&&!((0,d.JA)(t)&&(0,E.jA)(r.appModel,t.action));if(o&&r.removeDisabledItems)return null;if((0,d.JA)(t)&&t.nodeId)return function(e,t,r){if(!e)return null;(0,a.q8)(null!=r.sceneGraph&&null!=r.sceneGraphSelection,"You should be providing a scene graph and a selection if you are rendering a menu item for a particular layer");let i=r.sceneGraph.get(t);if(!i)return null;let o=(0,y.Br)(r.sceneGraphSelection,t),l=e=>"INSTANCE"===e.type||"SYMBOL"===e.type||(0,g.XN)(e),s=l(i);(0,g.pr)(r.sceneGraph,t,e=>{if(s=s||l(e))return"stop"});let c={displayText:i.name,shortcut:"",disabled:!1,isChecked:o,isPurple:s,isLocked:i.locked&&!o,alwaysShowCheckMarkOffset:r.alwaysShowCheckMarkOffset,recordingKey:e.action,action:e.action,name:e.name,args:e.args,callback:e.callback,onMouseEnter:e.onMouseEnter,onMouseExit:e.onMouseExit};return c.icon=n.createElement(b.uB,{guid:i.guid,isMenuIcon:!0,isMenuIconPurple:c.isPurple},null),c}(t,t.nodeId,r);let l={...t},s=(0,d.iv)(t);return l.displayText=((0,d.A4)(t)||(0,d.JA)(t))&&t.displayText||i||(0,u.K)(s,t.args),(0,d.JA)(t)&&t.shortcutText?l.shortcut=t.shortcutText:l.shortcut=(0,E.bQ)(r.appModel.keyboardShortcuts,s),l.disabled=o,l.visuallyDisabledWithSelection=(0,d.JA)(t)?t.visuallyDisabledWithSelection:void 0,l.rightText=(0,d.JA)(t)?t.rightText:void 0,l.isChecked=(0,d.JA)(t)&&(0,d.CK)(r.appModel,t),l.alwaysShowCheckMarkOffset=r.alwaysShowCheckMarkOffset,l["data-onboarding-key"]=(0,d.JA)(t)?t["data-onboarding-key"]:void 0,(0,d.A4)(t)?(t.children?l.children=e(t.children,r):t.childDropdown&&(l.children=t.childDropdown.items),l.recordingKey=t.childDropdown&&t.childDropdown.recordingKey||t.name):l.recordingKey=t.recordingKey||t.action||t.name,(0,d.JA)(t)&&t.inputProperty&&t.action&&(l.input={value:(0,d.$l)(r.appModel,t.inputProperty),width:t.inputWidth,onChange:e=>{void 0!==e&&m.Ml.get(t.action,"menu",{inputValue:e})()}}),l})(t,r)))}});var n=r(652983),i=r(5453),a=r(46347),o=r(239299),l=r(716250),s=r(571529),c=r(361763),d=r(522494),u=r(241239),p=r(955687),m=r(574620),h=r(158774),_=r(343328),g=r(641052),f=r(257817),E=r(605508),y=r(60908),v=r(668849),b=r(187506);let I=(0,_.uB)();function T(e,t){if(!e||!t.isSearching&&(0,d.JA)(e)&&e.searchOnly)return!1;if(e.flags){if(e.flags.indexOf("!ship")>-1)return!1;if(e.flags.indexOf("!desktop")>-1){if(o.YO)return!1}else if(e.flags.indexOf("desktop")>-1&&!o.YO)return!1;if(e.flags.indexOf("recovery")>-1){if(!t.selectedView.isRecoveryMode)return!1}else if(e.flags.indexOf("!recovery")>-1&&t.selectedView.isRecoveryMode)return!1;let r=!t.isReadOnly&&!(0,v.NE)(t.selectedView)||(0,c.rm)();if(e.flags.indexOf("!edit")>-1){if(r)return!1}else if(e.flags.indexOf("edit")>-1&&!r)return!1;if(e.flags.indexOf("!dev_handoff")>-1&&"dev_handoff"===t.selectedView.editorType||e.flags.indexOf("!limited_dev_mode")>-1&&t.isLimitedDevMode||e.flags.indexOf("!whiteboard")>-1&&"whiteboard"===t.selectedView.editorType||e.flags.indexOf(`!${f.QK}`)>-1&&t.selectedView.editorType===f.QK||e.flags.indexOf("drafts")>-1&&!h.Gr.isInDrafts()||e.flags.indexOf("view_restricted")>-1&&h.Gr.isCopyExportRestricted())return!1;let n=e.flags.includes("design"),i=e.flags.includes("whiteboard"),a=e.flags.includes("dev_handoff"),l=e.flags.includes(f.QK);if(n||i||a||l)switch(t.selectedView.editorType){case"sites":case"design":if(!n)return!1;break;case"whiteboard":if(!i)return!1;break;case"dev_handoff":if(!a)return!1;break;case f.QK:if(!l)return!1}if(e.flags.indexOf("!desktop_os_menu")>-1&&t.isDesktopMenu||e.flags.indexOf("desktop_os_menu")>-1&&!t.isDesktopMenu||e.flags.indexOf("!integration")>-1&&I||e.flags.indexOf("integration")>-1&&!I)return!1}return!!((0,d.CL)(e)||(0,d.$T)(e))||!(null!=e.platforms&&!function(e){for(let t of e){if("mac"===t&&s.ZP.mac||"linux"===t&&s.ZP.linux)return!0;if("windows"===t&&s.ZP.windows)return!0;if("!ipad"===t&&!s.ZP.isIpad)return!0}return!1}(e.platforms)||e.featureFlags&&!e.featureFlags.every(e=>(0,l.BZ)()[e])||e.notFeatureFlags&&e.notFeatureFlags.some(e=>(0,l.BZ)()[e]))&&(!e.experiments||!!e.experiments.every(({flag:e,treatment:t})=>(0,p.E)(e).defaultValue(!1).treatment(t,!0).get()))}},225164:(e,t,r)=>{r.d(t,{FS:()=>x,GZ:()=>O,I8:()=>M,K9:()=>L,Nj:()=>B,OI:()=>P,Zl:()=>V,gB:()=>R,jd:()=>S,kb:()=>C,n5:()=>N,tq:()=>U,u_:()=>D,wB:()=>A,zo:()=>k});var n=r(652983),i=r(407908),a=r(281090),o=r(172497),l=r(716250),s=r(337167),c=r(286206),d=r(765745),u=r(117986),p=r(385782),m=r(751548),h=r(782051),_=r(970740),g=r(512512),f=r(961215),E=r(200273),y=r(795153),v=r(456326),b=r(827423),I=r(236750),T=r(729408),w=r(347228);let S={alwaysPan:!0,maxScale:1},C=300,O=[25,50,75,100],A=.5,N=4;function L(e,t){let r=(0,i.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),n=(0,i.v9)(e=>e.mirror.appModel.currentPage),a=t??n;return!!r&&!!a&&!!e&&(0,v.cH)(r,a,e)===s.n_.get(v.rB)}function P(e){let t=new Map;return e.forEach((e,r)=>{let n=function(e){if(!e||!(0,l.BZ)().version_diffing)return 0;let t=f.JZ.getChangeCountForPage(e);return Math.max(t,0)}(e.nodeId);n>0&&t.set(e.nodeId,n)}),t}function R(){let e=(0,E.uC)(),t=(0,v.ti)({fileKey:e,pageSize:200}),[r]=(0,y.aM)(t,{enabled:!!e});return n.useEffect(()=>{"errors"===r.status&&(0,c.Jz)(u.k.FEEDBACK,Error(`Version fetch in CC error: ${r.errors}`))},[r.status]),{versions:r.data||[],requestStatus:r.status}}function k(e){var t;let r=(0,a.nF)(e),i=(null==r?void 0:r.createdAt)||null,o=i?new Date(i).toISOString():void 0,l=(null==r?void 0:r.lastEditedAt)||null,s=l?new Date(l+6e4).toISOString():void 0,c=R(),d=null==(t=(0,a.AO)())?void 0:t.toISOString(),u=n.useMemo(()=>(function(e,t,r,n){let i=[],a=!1,o=e.length?e[0]:null;for(let l of e){let e={...l};if(e.canvas_url){if(!a&&n&&e.created_at&&e.created_at<n&&(a=!0,e.lastViewed=!0),t&&e.edited_at>t){o=e;continue}if(i.push(e),r&&e.edited_at<r)break}}return function(){if(!i.length&&o&&i.push(o),i.length>0){let e=i[i.length-1];e.frameCreated=!0,e.frameEdited=void 0}}(),i})(c.versions,s,o,d),[c.versions,s,o,d]),{requestStatus:p}=c;return{versions:u,versionsQueryLoaded:"loaded"===p||"disabled"===p}}function D({title:e,onClose:t,children:r}){let i=(0,o.F)(T.Cg2);return n.createElement(I.ge,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:t,headerClassName:w.Fs,containerClassName:w.nr,maxWidth:i,innerContainerClassName:w.Dx,focus:!0},r)}function M(e){return!!e&&e.hasOwnProperty("getImage")}function F(e){return!!e.image&&M(e.image)}function x(e){let{view:t,opacity:r,Overlay:i,hideNoImageText:a,header:o}=e,l=()=>void 0!==r?{opacity:r}:{},s=n.useMemo(()=>F(e)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||N},[e]);return n.createElement("div",{className:t===p.G7.SIDE_BY_SIDE?w.OM:w.uL},!!o&&n.createElement("div",{className:w.qi},o),!s&&n.createElement("div",{className:w.T1},!a&&n.createElement(_.Tx,{id:"collaboration.feedback.compare_changes_modal.no_image_found"})),F(e)?n.createElement(m.xe,{className:w.BH,style:{...l()},image:s,Overlay:i}):s&&n.createElement(m.bv,{className:w.BH,style:{...l()},selectionBoxes:e.selectionBoxes,image:s,Overlay:i}))}function U(){return n.createElement("div",{className:w.vV},n.createElement(h.jz,null))}b.m.COMPARE_THUMBNAIL;let B=e=>d.f.decodeMessage(e).nodeChanges||[],V=(e,t)=>{let r=null==e?void 0:e.toString();r&&t(g.vQ({stringToCopy:r}))}},135403:(e,t,r)=>{r.d(t,{RU:()=>E,zP:()=>g,El:()=>f});var n=r(652983),i=r(407908),a=r(600486),o=r(256768),l=r(716250),s=r(600802),c=r(782051),d=r(435613),u=r(970740),p=r(961215),m=r(456326),h=r(828867);let _=r(741450);function g(e,t=!1){let r=(0,o.Z)(new Date),n=(0,o.Z)(e);return n.isSame(r,"day")?(0,u.t)("collaboration.feedback.time_hour_minutes",{time:n.toDate()}):n.isSame(r,"year")?(0,u.t)("collaboration.feedback.time_date_minutes_without_year",{time:n.toDate()}):t?(0,u.t)("collaboration.feedback.time_date_minutes",{time:n.toDate()}):(0,u.t)("collaboration.feedback.date",{time:n.toDate()})}let f=(e,t)=>e?n.createElement(h.Kn,{size:t,entity:{img_url:e}}):n.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"});function E({compareId:e,versions:t,buttonOnClickOverride:r}){let o=(0,i.I0)(),[h,E]=n.useState(null);n.useEffect(()=>{let r=t.find(t=>t.id===e);r&&E(r)},[e,t]);let[y,v]=n.useState({});n.useEffect(()=>{if(!h)return;let e=t.filter(e=>e.created_at&&h.created_at&&e.created_at>=h.created_at);if(0===e.length)return;let r={};e.forEach(e=>{r={...r,...e.participating_images_dict},e.user.handle&&e.user.img_url&&(r[e.user.handle]=e.user.img_url)}),Object.keys(r).length>0&&v(r)},[h,t]);let b=n.useCallback(t=>{t.stopPropagation(),setTimeout(()=>{o((0,m.SU)()),(0,a.L9)("Version History Compare Stop",{fromVersionId:e})},300)},[o,e]);if(!(0,l.BZ)().version_diffing)return null;let I=e=>Math.max(p.JZ.getChangeCountForStatus(e),0),T=I(p.B5h.EDITED),w=I(p.B5h.CREATED),S=I(p.B5h.LIBRARY_UPDATES)+I(p.B5h.AFFECTED),C=I(p.B5h.REMOVED),O=T+w+S+C,A=[],N=Object.keys(y).length,L=N>8,P=L?6:N;return Object.entries(y).slice(0,P).forEach(([e,t])=>{A.push(n.createElement("span",{className:"diffing_compare_summary--editorAvatar--w3xnL",key:e},f(t,24)))}),L&&A.push(n.createElement("span",{className:"diffing_compare_summary--editorsOverflowText--JcgMo"},n.createElement(u.Tx,{id:"collaboration.feedback.compare_changes_overflow_editors",numAddlEditors:N-6}))),n.createElement("div",{className:"diffing_compare_summary--comparingDetailsContainerLeft--UrX34"},n.createElement("div",null,n.createElement("div",{className:"diffing_compare_summary--comparingDetailsHeaderText--CToWP"},n.createElement(u.Tx,{id:"collaboration.feedback.compare_changes_m2"})),!h&&n.createElement("div",{className:"diffing_compare_summary--comparingDetailsSpinnerContainer--DWjiP"},n.createElement(c.jz,null)),!!h&&n.createElement("div",null,h&&function(e){let t=e.label;return t||e.created_at?n.createElement("div",{className:"diffing_compare_summary--compareWithVersionName--B9k0o"},n.createElement("div",{className:"diffing_compare_summary--versionName--NyScQ"},t||g(e.created_at)),n.createElement(d.n,{svg:_,className:"diffing_compare_summary--arrowLeftRightIcon--XdePz"}),n.createElement("div",{className:"diffing_compare_summary--currentText--FoiBm"},n.createElement(u.Tx,{id:"collaboration.feedback.current_file"}))):null}(h),A.length>0&&O>0&&n.createElement("div",{className:"diffing_compare_summary--editorAvatarsContainer--vdLWd"},A),n.createElement("div",{className:"diffing_compare_summary--comparingDetailsText--WlaVi"},O>0&&n.createElement(u.Tx,{id:"collaboration.feedback.num_editors_of_changes",numEditors:N})))),n.createElement(s.DF,{className:"diffing_compare_summary--doneComparingButton--ZSZ0E",onClick:b},n.createElement(u.Tx,{id:"collaboration.feedback.done_version_history"})))}},667740:(e,t,r)=>{r.d(t,{$3:()=>eW,RX:()=>eD,UO:()=>eP,dl:()=>eV,eo:()=>eB,m_:()=>eM,p:()=>eR,tg:()=>ek});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(600486),s=r(46347),c=r(350853),d=r(172497),u=r(716250),p=r(810373),m=r(993394),h=r(571529),_=r(297891),g=r(204829),f=r(564380),E=r(286206),y=r(117986),v=r(594619),b=r(618723),I=r(925960),T=r(782051),w=r(435613),S=r(212984),C=r(313653),O=r(970740),A=r(644383),N=r(65249),L=r(721154),P=r(111120),R=r(280251),k=r(721127),D=r(413110),M=r(736653),F=r(385431),x=r(496417),U=r(241239),B=r(329660),V=r(124040),G=r(131826),H=r(837728),W=r(706039),K=r(659994),z=r(158774),Z=r(343328),Y=r(764850),j=r(898080),$=r(733609),q=r(470283),X=r(787449),J=r(456326),Q=r(614860),ee=r(656077),et=r(818709),er=r(225468),en=r(926143),ei=r(668849),ea=r(135403),eo=r(27346),el=r(181809),es=r(158314),ec=r(787618),ed=r(391930),eu=r(213104),ep=r(301828),em=r(13155),eh=r(332224),e_=r(564873);let eg=r(790070),ef=r(792668),eE=r(323020),ey=r(374269),ev=r(879509),eb=r(815051),eI=r(333113),eT=r(295799),ew=r(452262),eS=r(416914),eC=r(494304),eO=r(250973),eA=r(902798),eN=(0,d.F)(eh.K0J),eL=(0,d.F)(eh.ze_);function eP(e){return e===Y.Nw4.HISTORY||e===Y.Nw4.COMPARE_CHANGES||e===Y.Nw4.DEV_HANDOFF_HISTORY}function eR(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,E.YD)("version","Verison history got user without a handle",{item:e}),(0,E.Jz)(y.k.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function ek(e){switch(e.item.view){case"branch_child_create":return n.createElement(O.Tx,{id:"collaboration.feedback.new_branch_created"});case"branch_child_merge":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_merged"});case"branch_child_update":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_updated_from_main_file"});case"branch_create":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_created"});case"branch_merge":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_merged_into_main_and_archived"});case"branch_update":return n.createElement(O.Tx,{id:"collaboration.feedback.updated_from_main"});case"branch_archive":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_archived"});case"branch_restore":return n.createElement(O.Tx,{id:"collaboration.feedback.branch_restored"})}return n.createElement(n.Fragment,null,eR(e.item))}function eD(e){let{time:t}=e,r=n.useMemo(()=>(0,ea.zP)(t,!0),[t]),{onChange:i}=e;return n.useEffect(()=>{i&&i(r)},[i,r]),n.createElement(n.Fragment,null,r)}class eM extends g.wA{constructor(e){super(e),this.descriptionRef=n.createRef(),this.onClick=g.hO(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=g.hO(this,"click",()=>{setTimeout(()=>{var e;if((0,l.L9)("CTA Clicked",{name:"Disabled Version History",teamId:null==(e=this.props.team)?void 0:e.id}),this.props.isExpProEntrypointsEnabled){if(!this.props.team){(0,E.Jz)(y.k.MONETIZATION,Error("ExpStandardizeProEntrypoints: no team present"));return}this.props.dispatch(k.K4({type:ec.yd,data:{team:this.props.team,editorType:this.props.editorType,resource:Q.gx.VERSION_HISTORY,currentPlan:W.V.Plan.STARTER,upsellPlan:W.V.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let t=this.descriptionRef.current;t&&t.scrollHeight>t.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=g.hO(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=g.hO(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==J.we&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=g.hO(this,"click",e=>{e.stopPropagation(),this.props.dispatch(P.fv({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:"design"}))}),this.onCompareClick=g.hO(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrent=g.hO(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({longDescription:!this.state.longDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,t)=>n.createElement("div",{className:e_.Ym,"data-tooltip-type":er.fR.TEXT,"data-tooltip":t,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},t),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let t=this.props.fileByKey[this.props.branchFileKey];return t&&!t.deleted_at?n.createElement("span",{className:e_.oq,onClick:this.onBranchClick},e||(t.name??n.createElement(O.Tx,{id:"collaboration.feedback.branch"}))):n.createElement("span",{className:e_.DU},(null==t?void 0:t.name)??n.createElement(O.Tx,{id:"collaboration.feedback.branch"}))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={longDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}render(){var e,t,r,i,a;let o,l;let s=this.descriptionRef.current,c=!!(s&&(this.state.longDescription||s.scrollHeight>s.clientHeight||this.state.hovered)&&!this.props.isActive),d=(0,ea.El)(this.props.userUrl,15),u=this.props.versionId===J.we,p=!this.props.label&&!u&&!this.props.isLinked&&!this.props.isBranchingVersion,m=(null==(e=this.props.version)?void 0:e.frameCreated)||(null==(t=this.props.version)?void 0:t.frameEdited)||(null==(r=this.props.version)?void 0:r.lastViewed),h=p&&!m,f=this.props.isPreview?e_.B0:e_.wc;this.props.disabled&&!this.props.isExpProEntrypointsEnabled&&(f=e_.ad+" "+f),u&&(f=e_.lT+" "+f),this.props.isActive&&(f=e_.PN+" "+f);let E=this.props.isActive&&!u?e_.qx:this.state.longDescription?e_.CH:c?e_.ct:e_.WL,y=this.state.longDescription?n.createElement(O.Tx,{id:"collaboration.feedback.show_less"}):n.createElement(O.Tx,{id:"collaboration.feedback.show_more"}),v=[],b=0;if(this.props.participatingImagesDict){let e=Object.keys(this.props.participatingImagesDict).length;for(let[t,r]of Object.entries(this.props.participatingImagesDict))if(o=(0,ea.El)(r,15),l=this.generateEditorName(b,t),v.push(n.createElement("span",{className:e_.LU,key:t},(!this.props.first||"current_version"!=this.props.versionId)&&o,l)),++b>4&&b<e&&!this.props.isActive){v.push(n.createElement("div",{className:e_.s5,key:"number-additional-editors"},n.createElement(O.Tx,{id:"collaboration.feedback.num_editors_number_editor_count_more",numEditors:e-Number(b)})));break}}else this.props.user&&this.props.userUrl?(o=(0,ea.El)(this.props.userUrl,15),l=this.generateEditorName(b,this.props.user),v.push(n.createElement("span",{className:e_.LU,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&o,l))):h&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&v.push(n.createElement("div",{className:e_.Kq,key:"figma-system"},this.props.user));let S=e_.V1;this.props.hideLine?S="":this.props.first&&this.props.last?S=e_.jg:this.props.first?S=e_.O9:this.props.last&&(S=e_.SN);let C=d,A=null,N="text"in this.props?this.props.text.toLowerCase():void 0;if(h||(C="components published"===N||"published to community hub"===N?n.createElement(w.n,{className:e_.nY,svg:eb,useOriginalSrcFills_DEPRECATED:!0}):n.createElement(eo.g,null)),h&&this.props.last&&(C=n.createElement(eo.g,null)),this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":C=n.createElement(w.n,{className:e_.sM,svg:ey}),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_child_create",link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(S=e_.Q5),this.props.last&&(S=e_.Cu);break;case"branch_child_merge":C=n.createElement(w.n,{className:e_.z8,svg:ev}),A=n.createElement(O.Tx,{id:"collaboration.feedback.merged",link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":C=n.createElement(eo.g,null),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_child_update",link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(S=e_.Q5),this.props.last&&(S=e_.Cu);break;case"branch_merge":C=n.createElement(w.n,{className:e_.Lo,svg:eI,useOriginalSrcFills_DEPRECATED:!0}),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_merge",link:this.generateBranchLink((0,O.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":C=n.createElement(w.n,{className:e_.BG,svg:eS}),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_created"});break;case"branch_update":C=n.createElement(w.n,{className:e_.sM,svg:ey}),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_updated_from",link:this.generateBranchLink((0,O.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":C=n.createElement(w.n,{className:e_.Lz,svg:eC}),A=n.createElement(O.Tx,{id:"collaboration.feedback.branch_archived"});break;default:C=n.createElement(eo.g,null)}let L=[];return(null==(i=this.props.version)?void 0:i.frameCreated)&&L.push(n.createElement(O.Tx,{id:"collaboration.feedback.compare_changes_modal.frame_created"})),(null==(a=this.props.version)?void 0:a.lastViewed)&&L.push(n.createElement(O.Tx,{id:"collaboration.feedback.compare_changes_modal.last_viewed_by_you"})),p&&!h&&this.props.time?L.push(n.createElement("div",{className:e_.dp},n.createElement(eD,{time:this.props.time}))):"displayText"in this.props?L.push(this.props.displayText):L.push(this.props.text),n.createElement(n.Fragment,null,(!h||this.props.showAutosaves)&&n.createElement("div",{className:f,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isExpProEntrypointsEnabled?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isExpProEntrypointsEnabled?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isExpProEntrypointsEnabled?void 0:this.onDoubleClick},n.createElement("div",{className:S}),n.createElement("div",{className:h?e_.vY:e_.kI},n.createElement("div",{className:e_.Az},n.createElement("div",{className:e_.eY,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},C,h&&this.props.time?this.renderTime(this.props.time,e_.jE,this.props.showCompareChanges):n.createElement(n.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?n.createElement("div",{className:e_.fm,dir:"auto"},A):n.createElement("div",{className:e_.PS,dir:"auto"},L[0]))),this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!u&&!this.props.isComparingLoading&&!this.props.isComparing&&n.createElement("div",{dir:"auto"},n.createElement("button",{className:e_.I4,onClick:this.onCompareClick},n.createElement("div",{className:e_._B},n.createElement(O.Tx,{id:"collaboration.feedback.compare"})))),this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!u&&this.props.isComparingLoading&&!this.props.isComparing&&n.createElement("div",{className:e_.cs},n.createElement(T.TK,null)),this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&n.createElement("div",{dir:"auto"},n.createElement("div",{className:e_.Z2},n.createElement(O.Tx,{id:"collaboration.feedback.comparing"})),n.createElement("button",{className:e_.I4,onClick:this.props.onDoneComparingClick},n.createElement("div",{className:e_._B},n.createElement(O.Tx,{id:"collaboration.feedback.done_version_history"})))),this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&u&&!this.props.isComparingLoading&&!this.props.isComparing&&n.createElement("div",{dir:"auto"},n.createElement("button",{className:e_.I4,onClick:this.onCompareCurrent},n.createElement("div",{className:e_._B},n.createElement(O.Tx,{id:"collaboration.feedback.compare"})))),this.props.isActive&&this.props.onSavepointMenuCallback&&!u&&n.createElement(es.hU,{svg:eE,onClick:this.props.disabled?void 0:this.onMenuClick,className:e_.$e,"data-tooltip-type":er.fR.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.more_options"),recordingKey:g.ar(this.props,"versonContext")})),L.length>1&&n.createElement("div",{className:e_.sl},L.slice(1).map((e,t)=>n.createElement("div",{className:e_.PS,dir:"auto",key:t},e))),n.createElement("div",{className:E,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},(0,_.ju)(this.props.description)),c&&n.createElement("div",{className:e_.ox,onClick:this.props.disabled?void 0:this.toggleSeeMore},n.createElement("div",{className:e_.oj},y)),n.createElement("div",null,v.length>0&&n.createElement("div",{className:e_.Xm},v),!p&&this.props.time&&n.createElement("span",{className:e_.Fd,"data-tooltip-type":er.fR.TEXT,"data-tooltip":(0,ea.zP)(this.props.time)}," ",n.createElement(I.Lt,{onChange:this.setFormattedTime,date:this.props.time}))))))}renderTime(e,t,r){let i=n.createElement(eD,{time:e,onChange:this.setFormattedTime});return n.createElement("div",{className:t},i)}getLabelRightPosition(e){return e?"65px":"35px"}}function eF({shouldShowUpgradeLink:e,startUpgrade:t,hasRestrictedVersions:r,isExpProEntrypointsEnabled:i}){return i?n.createElement(G.Ui,{name:"Version History Paywall Panel"},n.createElement("div",{className:e_.mn},n.createElement(N.x,{fontWeight:"semi-bold",i18nId:r?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history"}),n.createElement("div",null,e?n.createElement(N.x,{i18nId:"upsell.history.upsell_upgrade_description",i18nParams:{upgradeLink:n.createElement(b.Cr,{className:e_.nK,onClick:t,trackingProperties:{trackingDescriptor:V.y.UPGRADE,upsellSource:X.V.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},n.createElement(N.x,{i18nId:"upsell.history.upsell_upgrade"}))}}):n.createElement(N.x,{i18nId:"upsell.history.upsell_learn_more_description",i18nParams:{upgradeLink:n.createElement(b.Cr,{className:e_.nK,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},n.createElement(O.Tx,{id:"upsell.history.learn_more"}))}})))):n.createElement(G.Ui,{name:"Version History Paywall Panel"},n.createElement("div",{className:e_.rf},n.createElement("p",null,n.createElement(O.Tx,{id:"upsell.history.end_of_num_free_days_day_version_history",numFreeDays:j.Wv})),n.createElement("p",null,n.createElement(O.Tx,{id:"upsell.history.unlimited_version_history_is_available_to_paid_teams"})),e?n.createElement(b.Cr,{className:e_.p4,onClick:t,trackingProperties:{trackingDescriptor:V.y.UPGRADE,upsellSource:X.V.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},n.createElement(O.Tx,{id:"upsell.history.upgrade_now"})):n.createElement(b.Cr,{className:e_.p4,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},n.createElement(O.Tx,{id:"upsell.history.learn_more"}))))}function ex(){return n.createElement(n.Fragment,null,n.createElement("span",{className:e_.dD},h.ZP.mac?n.createElement(O.Tx,{id:"collaboration.feedback.shortcut_mac"}):n.createElement(O.Tx,{id:"collaboration.feedback.shortcut"})))}eM.displayName="VersionRow";class eU extends g.wA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let t=new Set(this.state.expandedIds);t.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(t.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(t.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:t})},this.drawRows=(e,t,r,n)=>{let i=[],a=0,o=-1,l=-1,s=0,c=e.length-1-e.slice().reverse().findIndex(e=>(0,en.R)(e)||e.label),d=e.length-1-e.slice().reverse().findIndex(e=>{var t,r,n,i;return(null==(t=this.props.user)?void 0:t.handle)&&((null==(n=e.participating_users_array)?void 0:n.includes(null==(r=this.props.user)?void 0:r.handle))||e.user.handle===(null==(i=this.props.user)?void 0:i.handle))});for(;a<e.length;){let t=e[a];if(t.label||(0,en.R)(t)){let u=r&&(0===a&&t.disabled||0===i.length);s>0&&(this.renderAutoVersionBatch(i,e,o,l,r&&(t.disabled&&0===o||0===i.length),!1,this.state.showAutosaves),u=!1),i.push(this.renderRow(t,u,a===e.length-1||a===c&&!this.state.showAutosaves||a===d&&this.state.showOnlyUserVersionHistory,n)),s=0,o=-1,l=-1}else o<0&&(o=a),l=a,s++;a++}return s>0&&this.renderAutoVersionBatch(i,e,o,l,r&&(e[0].disabled&&0===o||0===i.length),t,this.state.showAutosaves,n),i},this.hasLabeledVersions=e=>{for(let t of e)if(t.label&&t.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(P.fv({...this.props.selectedView,versionId:e.id})),this.props.dispatch(R.aW({mode:Y.oum.KEEP_UI,type:ee.EI.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,l.L9)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let t=this.getVersionByID(e);if(t){let e;if(null!=t.label&&t.label.length>0)e=(0,O.t)("collaboration.feedback.viewing_version",{label:t.label});else{let r=(0,ea.zP)(t.touched_at);e=(0,O.t)("collaboration.feedback.viewing_version",{label:r})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(A.R.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===J.we){this.props.dispatch((0,J._l)({id:J.we}));return}let t=this.getVersionByID(e);t&&this.loadVersion(t)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,J._l)({id:e.id,nodeId:this.props.selectedView.nodeId,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,q.ho)(),this.onKeyDown=g.v1(this,"keydown",e=>{if(!this.props.dropdownShown){if(e.keyCode===p.sr.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,J.SU)());else if(e.keyCode===p.sr.UP_ARROW||e.keyCode===p.sr.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let t=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let r=-1;if(this.props.versionHistory.activeId===J.we)e.keyCode===p.sr.DOWN_ARROW&&(r=0);else{let t=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==t&&(r=e.keyCode===p.sr.UP_ARROW?t-1:t+1)}if(r<0){this.props.dispatch((0,J._l)({id:J.we}));return}r>=t&&(r=t-1);let n=this.props.versionHistory.versions[r];n.disabled||this.loadVersion(n)}}}),this.startComparingChanges=e=>{this.props.dispatch(R.aW({mode:Y.oum.KEEP_UI,type:ee.EI.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0){let t=this.getVersionByID(e);if(!t)return;let r=null!=t.label&&t.label.length>0?t.label:(0,ea.zP)(t.touched_at),n=(0,O.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:r});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(A.R.enqueue({type:"versions",message:n}))}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(R.aW({mode:Y.oum.OFF}))},this.compareChangesById=e=>{if(e===J.we)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,J.hD)({fromVersionId:e}));return}let t=this.getVersionByID(e);t&&this.compareChanges(t)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let t=this.getVersionByID(e);t&&(this.props.dispatch((0,J._l)({id:J.we})),this.compareChanges(t))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,J.hD)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,J.r6)({direction:m.wt}))},this.startUpgrade=e=>{let t=this.getOpenFile(),r=t.teamId&&this.props.teams[t.teamId];if(!r){(0,E.Jz)(y.k.MONETIZATION,Error("ExpStandardizeProEntrypoints: no team present"));return}if(e){this.props.dispatch(k.K4({type:eu.nY,data:{upsellSource:X.V.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}));return}this.props.dispatch(D.F2({teamId:r.id,selectedView:this.props.selectedView}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch(L.nu({fileKey:this.getOpenFile().key,versionId:e.id})),(0,l.L9)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let t=this.getOpenFile(),r=(0,Z.w9)(t,(0,$.getPermissionsState)(this.props));r?this.props.dispatch(k.K4({type:ec.yd,data:{team:r,resource:Q.Q3.FILE,action:et.XH.DUPLICATE_FILES,editorType:t.editorType,currentPlan:W.V.Plan.STARTER,upsellPlan:W.V.Plan.PRO}})):(this.props.dispatch(L.OM({file:this.getOpenFile(),versionId:e.id})),(0,l.L9)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(M.a({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(k.K4({type:ed.Of,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let t=this.getVersionByID(e);(null==t?void 0:t.label)&&(this.label=t.label),(null==t?void 0:t.description)&&(this.description=t.description),this.props.dispatch(k.K4({type:ed.Of,data:{description:this.description,label:this.label,savepointID:e}}))}},this.dropdownCallback=(e,t)=>{let{version:r}=t;switch(e){case"savepoint-clear":this.clearVersion(r.id);break;case"savepoint-restore":this.restoreVersion(r);break;case"savepoint-duplicate":this.duplicateVersion(r);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(r.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{this.props.dispatch(F.m4({...this.props.selectedView,versionId:r.id})),this.props.dispatch(A.R.enqueue({type:"link_copied_to_clipboard",message:(0,U.K)("link-copied")}))}catch(e){this.props.dispatch(C.l.error("Failed to copy link"))}}},this.getVersionByID=e=>{var t;let r=this.props.versionHistory,n=r.versions.find(t=>t.id===e);return(null==(t=r.linkedVersion)?void 0:t.id)===e?r.linkedVersion:n},this.onSavepointMenu=(e,t,r)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===x.wy){r.preventDefault();return}r.stopPropagation(),r.preventDefault();let n=this.getVersionByID(e),{clientX:i,clientY:a}=r;this.props.dispatch(P.SP({type:x.wy,data:{clientX:i,clientY:a,version:n,callback:this.dropdownCallback,editName:n.label?"savepoint-edit":"savepoint-label",enableClear:n.label&&n.label.length>0}}))},this.onDoneComparingClick=g.hO(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&this.props.dispatch((0,J._l)({id:J.we}))},300)}),this.renderRow=(e,t,r,i)=>{var a;let o=this.getOpenFile();return n.createElement(eM,{key:`history-item-${e.id}`,description:e.description,label:e.label,disabled:e.disabled,text:eR(e),displayText:n.createElement(ek,{item:e}),view:e.view?e.view:null,participatingImagesDict:e.participating_images_dict,time:e.edited_at,isActive:this.props.versionHistory.activeId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===J.we,isComparingLoading:this.state.loadingCompareId===e.id,isComparing:this.props.versionHistory.compareId===e.id,user:e.user&&e.user.handle,userUrl:e.user&&((0,en.R)(e)||e.label)?e.user.img_url:null,clearVersion:this.clearVersion.bind(this,e.id),onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,versionId:e.id,checkpointKey:e.checkpoint_key,dispatch:this.props.dispatch,recordingKey:g.ar(this.props,"version",e.id),onSavepointMenuCallback:this.onSavepointMenu,onEditSavepoint:this.editSavepoint,first:t,last:r,isBranchingVersion:(0,en.R)(e),fileByKey:this.props.fileByKey,branchFileKey:e.branch_file_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isExpProEntrypointsEnabled:i,team:o.teamId?null==(a=this.props.teams)?void 0:a[o.teamId]:void 0,editorType:o.editorType})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,J.SU)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,t,r,i,a,o,l,s){let c;if(r<0||null===t||t.length<1)return;let d=t[r].id,u=this.state.expandedIds.has(d)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=r;e<=i;e++)t[e].id===this.props.versionHistory.activeId&&(u=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&o&&(u||this.toggleAutoItemById(d),this.expandLast=!1);let p=i-r+1,m=!0;if(1===p&&(u=!0,m=!1),c=o&&(1===p||!u)?a?e_.jg:e_.SN:a?e_.O9:e_.V1,m&&l&&e.push(n.createElement(f.yh,{key:`auto_row_${r}`,recordingKey:g.ar(this.props,`autoVersionBatch.${r}`),className:t[r].disabled?e_.Gd:e_.S3,onClick:this.toggleAutoItemById.bind(this,d)},n.createElement("div",{className:c}),n.createElement("div",{className:e_.Ej},n.createElement(eo.g,null),n.createElement("div",{className:e_.Mw},n.createElement(O.Tx,{id:"collaboration.feedback.autosave_count",count:p}),n.createElement(w.n,{key:"expand-caret",className:u?e_.mM:e_.t2,svg:u?eg:ef}))))),u)for(let n=r;n<=i;n++)e.push(this.renderRow(t[n],a&&r===i,o&&n===i,s))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,J._l)({id:J.we})),document.addEventListener("keydown",this.onKeyDown),z.Gr.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),c.V.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),z.Gr.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),c.V.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,E.YD)("history","history view should only be possible to open when we have a file"),(0,s.q8)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){var e;return null==(e=this.props.openFile)?void 0:e.canEdit}showCompareChanges(){return(0,u.BZ)().version_diffing&&"whiteboard"!==this.props.selectedView.editorType&&"dev_handoff"!==this.props.selectedView.editorType}render(){var e;let t=this.getOpenFile(),r=t.team,i=this.props.versionHistory.versions.filter(e=>{var t,r,n,i;return!this.state.showOnlyUserVersionHistory||(null==(t=this.props.user)?void 0:t.handle)&&((null==(n=e.participating_users_array)?void 0:n.includes(null==(r=this.props.user)?void 0:r.handle))||e.user.handle===(null==(i=this.props.user)?void 0:i.handle))}),a=i.filter(e=>!e.disabled),l=i.filter(e=>e.disabled).slice(0,j.GH);this.hasLabeled=this.hasLabeledVersions(a)||this.hasLabeledVersions(l);let s=null,c=(0,m.p$)(this.props.versionHistory),d=!(0,j.gP)(r)&&!this.props.currentUserOrgId&&(l.length>0||!c),u=!!r&&!(0,j.gP)(r)&&!this.props.currentUserOrgId&&(0,B.E4)(),p=!!r&&(0,$.canEditTeam)(r.id,(0,$.getPermissionsState)(this.props));d&&(s=n.createElement(eF,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:p,hasRestrictedVersions:!!l.length,isExpProEntrypointsEnabled:u}));let h=n.createElement("div",{className:e_.nR},!this.props.versionHistory.loading&&(0,m.p$)(this.props.versionHistory)&&n.createElement("a",{className:e_.p4,onClick:this.loadMore},n.createElement(O.Tx,{id:"collaboration.feedback.show_older"}))),_=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,f=this.props.versionHistory.linkedVersion,E=f&&a.some(e=>f.id===e.id),y=!this.state.showOnlyUserVersionHistory||(null==f?void 0:f.user.id)===(null==(e=this.props.user)?void 0:e.id),v=(0,ei.NE)(this.props.selectedView),b=(0,ep.YA)(this.props.selectedView),I=!this.canEditFile(),w=a.map(e=>(0,en.R)(e)||e.label?1:0).reduce((e,t)=>e+t,0);return n.createElement("div",null,this.props.progressBarState.mode!==Y.oum.ON_AND_LOCKED&&n.createElement(G.Ui,{name:"Version History Panel",properties:{teamId:null==r?void 0:r.id}},n.createElement("div",{className:o()(e_.nC,x.Hy),style:v||b?{width:v?"100%":eN+eL,borderLeft:v?"unset":void 0}:{position:"fixed",top:"auto",bottom:"auto",width:eN+eL,height:"100%"}},n.createElement(eV,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:I}),n.createElement("div",{"data-not-draggable":!0},n.createElement("div",{className:e_.rj},!this.hasLabeled&&!I&&!v&&n.createElement("div",{className:e_.xu},n.createElement("div",null,n.createElement(O.Tx,{id:"collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",shortcut:n.createElement(ex,null)}))),f&&!E&&y&&n.createElement(eM,{description:f.description,label:f.label,versionId:f.id,onSavepointMenuCallback:this.onSavepointMenu,displayText:n.createElement(O.Tx,{id:"collaboration.feedback.get_version_text_linked_version_linked_version",versionText:n.createElement(ek,{item:f})}),view:f.view?f.view:null,time:f.edited_at,isActive:this.props.versionHistory.activeId===f.id,isCurrentVersionActive:this.props.versionHistory.activeId===J.we,isComparingLoading:this.state.loadingCompareId===f.id,isComparing:this.props.versionHistory.compareId===f.id,userUrl:f.user.img_url,dispatch:this.props.dispatch,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isLinked:!0,first:!0,last:!0,isBranchingVersion:(0,en.R)(f),checkpointKey:f.checkpoint_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick}),this.props.versionHistory.loading&&n.createElement("div",{className:e_.lY},n.createElement(T.TK,null)),_&&n.createElement(eM,{displayText:n.createElement(O.Tx,{id:"collaboration.feedback.current_version"}),view:null,isActive:this.props.versionHistory.activeId===J.we,isCurrentVersionActive:this.props.versionHistory.activeId===J.we,isComparingLoading:this.state.loadingCompareId===J.we,isComparing:!!this.props.versionHistory.compareId,userUrl:this.props.user.img_url,versionId:J.we,dispatch:this.props.dispatch,addSavepoint:this.addSavepoint,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,first:!0,last:!1,recordingKey:g.ar(this.props,"currentVersion"),onCreateSavepoint:this.addSavepoint,onSavepointMenuCallback:this.onSavepointMenu,showAutosaves:this.state.showAutosaves,hideLine:0===a.length||!this.state.showAutosaves&&0===w,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick}),this.drawRows(a,0===l.length,!_),!u&&s,this.drawRows(l,!0,!1,p&&u),u&&s),0===l.length&&h))))}}eU.displayName="VersionHistoryView";let eB=(0,i.$j)(H.aU)(eU);function eV(e){let{onClose:t,addSavepoint:r,filterOptions:i,isViewOnly:a}=e,{toggleDropdown:o,dropdownTargetRef:l,isDropdownShown:s}=(0,el.x)("FILTER_VERSIONS_DROPDOWN");n.useEffect(()=>{},[s,l]);let c=()=>{null==i||i.setShowOnlyUserVersionHistory(!(null==i?void 0:i.showOnlyUserVersionHistory))},d=i?[n.createElement(v.j.CheckableOption,{key:"all",checked:!i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?c():null},n.createElement(O.Tx,{id:"collaboration.feedback.all_filter_text"})),n.createElement(v.j.CheckableOption,{key:"only_yours",disabled:a,checked:i.showOnlyUserVersionHistory,onClick:()=>i.showOnlyUserVersionHistory?null:c()},n.createElement(O.Tx,{id:"collaboration.feedback.only_yours_filter"})),n.createElement(v.j.Separator,{key:"sep"}),n.createElement(v.j.CheckableOption,{key:"autosaves",checked:i.showAutosaves,onClick:()=>{null==i||i.setShowAutosaves(!i.showAutosaves)}},n.createElement(O.Tx,{id:"collaboration.feedback.show_autosave_versions"}))]:[];return n.createElement("div",{className:e_.Sl},n.createElement("div",{className:e_.r9},n.createElement(O.Tx,{id:"collaboration.feedback.version_history"})),n.createElement("div",{className:S.cx.flex.itemsCenter.$},i&&n.createElement("div",{ref:l},n.createElement(es.I_,{svg:eA,selected:!!i.showOnlyUserVersionHistory,"data-tooltip-type":er.fR.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.filter_tooltip"),onClick:o,onMouseDown:e=>s&&e.stopPropagation()})),s&&l.current&&n.createElement(em.ah,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:d,hideDropdown:o,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!a&&n.createElement(es.hU,{svg:eT,fallbackSvg:ew,onClick:r,"data-tooltip-type":er.fR.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:g.ar(e,"plusVersion")}),n.createElement(es.hU,{svg:eO,onClick:t,"data-tooltip-type":er.fR.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.close_tooltip"),recordingKey:"button-close"})))}function eG({versions:e,selectedVersion:t,setVersion:r,last:a,idx:o,isAutosave:l}){let s=(0,i.I0)(),c=(0,K.QN)();return n.createElement(n.Fragment,null,e.map((i,l)=>n.createElement(eM,{key:`history-item-${i.id}`,description:i.description,label:i.label,disabled:i.disabled,text:eR(i),displayText:n.createElement(ek,{item:i}),view:i.view?i.view:null,participatingImagesDict:i.participating_images_dict,time:i.edited_at,isActive:(null==t?void 0:t.id)===i.id,user:i.user&&i.user.handle,userUrl:i.user&&((0,en.R)(i)||i.label)?i.user.img_url:null,onSelect:()=>r(i),isAllowedToChangeVersion:()=>!0,versionId:i.id,checkpointKey:i.checkpoint_key,dispatch:s,first:0===o&&0===l,last:a&&l===e.length-1,isBranchingVersion:(0,en.R)(i),fileByKey:c,branchFileKey:i.branch_file_key,showAutosaves:!0,version:i})))}function eH({versions:e,selectedVersion:t,setVersion:r,last:i,idx:a,isAutosave:o}){let l;let[s,c]=n.useState(t&&!!e.find(e=>e.id===t.id));return l=i&&(1===e.length||!s)?0===a?e_.jg:e_.SN:0===a?e_.O9:e_.V1,n.createElement("div",{key:`auto_row_${a}`},n.createElement(f.yh,{className:e_.S3,onClick:()=>c(!s)},n.createElement("div",{className:l}),n.createElement("div",{className:e_.Ej},n.createElement(eo.g,null),n.createElement("div",{className:e_.Mw},n.createElement(O.Tx,{id:"collaboration.feedback.autosave_count",count:e.length}),n.createElement(w.n,{key:"expand-caret",className:s?e_.mM:e_.t2,svg:s?eg:ef})))),s&&n.createElement(eG,{versions:e,selectedVersion:t,setVersion:r,last:i,idx:a,isAutosave:o}))}function eW({versions:e,selectedVersion:t,setVersion:r}){let i=[],a=[],o=0;function l(e){a.length>0&&(i.push(n.createElement(eH,{key:o,versions:[...a],selectedVersion:t,setVersion:r,idx:o,last:e,isAutosave:!0})),o++,a=[])}for(let s=0;s<e.length;s++){let c=e[s];c.label||c.frameCreated||c.frameEdited||c.lastViewed||(0,en.R)(c)?(l(!1),i.push(n.createElement(eG,{key:o,versions:[c],selectedVersion:t,setVersion:r,idx:o,last:s===e.length-1,isAutosave:!1})),o++,a=[]):a.push(c)}return l(!0),n.createElement(n.Fragment,null,i)}},913698:(e,t,r)=>{r.d(t,{C:()=>E,l:()=>y});var n=r(652983),i=r(63730),a=r(600486),o=r(204829),l=r(435613),s=r(970740),c=r(644383),d=r(496417),u=r(239461),p=r(158774),m=r(961215),h=r(269075),_=r(393357),g=r(516060);let f=r(723818);function E(e){let{onBlur:t,onClickTrash:r,onInputKeyDown:i,onInputChange:a,url:o,location:c}=e,u=n.useRef(null);return n.useEffect(()=>{u.current&&(u.current.focus(),u.current.select())},[u]),n.createElement("div",{className:g.nC,style:{left:c.x,top:c.y}},n.createElement("div",{className:`${g.gk} ${d.Hy}`},n.createElement("input",{className:g.qH,value:o,onKeyDown:i,onChange:a,onBlur:t,placeholder:(0,s.t)("hyperlink.type_or_paste_url"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,ref:u}),""!==o&&n.createElement(l.n,{svg:f,className:g.AB,onMouseDown:e=>{r(e)}})))}class y extends o.Vx{constructor(e){super(e),this.inputRef=e=>{this.input=e,null!==e&&(e.focus(),e.select())},this.onInputChange=o.z5(this,"change",e=>{this.setState({url:e.target.value.trim()})}),this.onInputKeyDown=o.v1(this,"keydown",e=>{if((0,_.pI)(e,_.jQ.NO))return o.Ev;if("Escape"===e.key)e.preventDefault(),this.setState({shouldUpdateLinkOnDismiss:!1}),(0,a.L9)("Hyperlink Editor Cancelled On Escape"),m.iTB.hideHyperlinkEditor();else if("Enter"===e.key){let t=this.input.value.trim();if((0,i.flushSync)(()=>{this.setState({shouldUpdateLinkOnDismiss:!1})}),e.preventDefault(),h.y2.user("set-hyperlink",()=>!m.iTB.setHyperlink(t,this.props.hyperlink.nodeID,this.props.hyperlink.rangeStart,this.props.hyperlink.rangeEnd)))(0,a.L9)("Hyperlink Editor Invalid Link"),this.visualBell((0,s.t)("hyperlink.invalid_link_plain"));else if(""!==this.props.hyperlink.url&&""===t)(0,a.L9)("Hyperlink Editor Deleted Link"),this.visualBell((0,s.t)("hyperlink.link_deleted"));else{this.props.hyperlink.url!==this.state.url&&u.WT.reportEditAction("hyperlink_edit");let e={};if(!t.startsWith("mailto:"))try{let r=new URL(function(e){let t=RegExp("^\\w+:");return""===e||t.test(e)?e:"https://"+e}(t)),n=r.hostname,i=this.props.editorType;e={domain:n,editorType:i}}catch(e){}(0,a.L9)("Hyperlink Editor Updated Link On Enter",e)}m.iTB.hideHyperlinkEditor()}}),this.onClickTrash=o.hO(this,"click",()=>{this.setState({shouldUpdateLinkOnDismiss:!1}),h.y2.user("clear-hyperlink",()=>m.iTB.setHyperlink("",this.props.hyperlink.nodeID,this.props.hyperlink.rangeStart,this.props.hyperlink.rangeEnd)),this.visualBell((0,s.t)("hyperlink.link_deleted")),u.WT.reportEditAction("hyperlink_edit"),m.iTB.hideHyperlinkEditor()}),this.state={url:function(e){return e.startsWith("mailto:")?-1!==e.indexOf("?")?e:e.substr(7):e}(e.hyperlink.url),shouldUpdateLinkOnDismiss:!0}}componentWillUnmount(){super.componentWillUnmount(),this.state.shouldUpdateLinkOnDismiss&&(h.y2.user("set-hyperlink",()=>m.iTB.setHyperlink(this.state.url,this.props.hyperlink.nodeID,this.props.hyperlink.rangeStart,this.props.hyperlink.rangeEnd)),(0,a.L9)("Hyperlink Editor Updated Link On Dismiss"))}visualBell(e){this.props.dispatch(c.R.enqueue({message:e}))}render(){let{url:e,x:t,y:r}=this.props.hyperlink,i=p.Gr.getViewportInfo(),a=Math.min(Math.max(t,100),i.width-100);return n.createElement("div",{className:g.nC,style:{left:Math.round(a+i.x),top:Math.round(r+i.y)}},n.createElement("div",{className:`${g.gk} ${d.Hy}`},n.createElement("input",{className:g.qH,value:this.state.url,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,placeholder:(0,s.t)("hyperlink.type_or_paste_url"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,ref:this.inputRef}),""!==e&&n.createElement(l.n,{svg:f,className:g.AB,onClick:this.onClickTrash})))}}},342689:(e,t,r)=>{r.d(t,{h0:()=>M,y8:()=>D});var n=r(652983),i=r(407908),a=r(600486),o=r(204829),l=r(564380),s=r(435613),c=r(970740),d=r(133354),u=r(496417),p=r(597630),m=r(158774),h=r(961215),_=r(451267),g=r(489859),f=r(605583),E=r(425285);let y="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",v="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",b="hyperlink_popup--clickable--VAzTE",I="hyperlink_popup--divider--NSUKF",T="hyperlink_popup--edit--Q80cZ",w=r(419753),S=r(233323),C=r(992094),O=r(434731),A=r(138665),N=r(192776),L=r(344363),P=r(965603);class R extends o.Vx{constructor(){super(...arguments),this.onMouseEnter=()=>{this.props.onMouseEnter&&this.props.onMouseEnter()},this.onClickOpen=e=>{this.props.dispatch((0,d.IO)({rawInput:this.props.urlString,event:e})),this.props.immediatelyDismissHyperlinkPopup&&this.props.immediatelyDismissHyperlinkPopup()},this.onClickCopy=e=>{this.props.data.type===f.h.MAILTO||this.props.data.type===f.h.TEL?(0,_.pU)(this.props.dispatch,this.props.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),this.props.immediatelyDismissHyperlinkPopup&&this.props.immediatelyDismissHyperlinkPopup(),e.stopPropagation()},this.onClickEdit=e=>{this.props.immediatelyDismissHyperlinkPopup&&this.props.immediatelyDismissHyperlinkPopup(),this.props.showHyperlinkEditor(),(0,a.L9)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),e.stopPropagation()},this.onClickUnfurl=e=>{(this.props.data.type===f.h.GENERIC||this.props.data.type===f.h.FIGMA_FILE||this.props.data.type===f.h.FIGMA_PROTOTYPE||this.props.data.type===f.h.FIGMA_VERSION)&&this.props.getLinkMetadata&&this.props.dispatch(this.props.getLinkMetadata({clipboardText:this.props.data.url.toString(),url:this.props.data.url.toString(),isTextIframe:!1,entrypoint:p._F.MODAL}))},this.onClickLink=e=>{this.props.data.type===f.h.MAILTO||this.props.data.type===f.h.TEL?this.onClickCopy(e):this.onClickOpen(e)}}getOpenLinkLabel(){switch(this.props.data.type){case f.h.MAILTO:return(0,c.t)("hyperlink.send_mail");case f.h.TEL:return(0,c.t)("hyperlink.call_telephone");default:return null}}getLinkPrefix(){switch(this.props.data.type){case f.h.GENERIC:case f.h.FIGMA_FILE:case f.h.FIGMA_PROTOTYPE:return(0,c.t)("hyperlink.prefix.open");case f.h.FIGMA_VERSION:return(0,c.t)("hyperlink.prefix.open_past_version");case f.h.PAGE:case f.h.FRAME:return(0,c.t)("hyperlink.prefix.go_to");case f.h.MAILTO:case f.h.TEL:return(0,c.t)("hyperlink.prefix.email");case f.h.INVALID:case f.h.MISSING:case f.h.NOT_LOADED:return null}}render(){let e,t;let{data:r}=this.props;switch(r.type){case f.h.GENERIC:case f.h.FIGMA_FILE:case f.h.FIGMA_PROTOTYPE:case f.h.FIGMA_VERSION:let i=r.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),a=r.url.pathname+r.url.search+r.url.hash,d=a.split(/\//),u="file"===d[1]||"proto"===d[1];switch(r.type){case f.h.GENERIC:t=O;break;case f.h.FIGMA_FILE:case f.h.FIGMA_VERSION:t=u?w:O;break;case f.h.FIGMA_PROTOTYPE:t=A}if((0,g.k)(r.url.host)&&u&&d[2]&&d[3]){let t=r.url.pathname.split(/\//)[3],i=decodeURI(t).replace(/-/g," ");e=n.createElement("div",{className:v},i)}else e=n.createElement(n.Fragment,null,n.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},i),a&&"/"!==a&&n.createElement("div",{className:y},a));break;case f.h.PAGE:t=S,e=n.createElement("div",{className:v},r.text);break;case f.h.FRAME:t=C,e=n.createElement(n.Fragment,null,n.createElement("div",{className:v},r.text),r.secondaryText&&n.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},n.createElement(s.n,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:P}),r.secondaryText));break;case f.h.INVALID:t=O,e=n.createElement("div",{className:v},n.createElement(c.Tx,{id:"hyperlink.invalid_link",link:r.urlString}));break;case f.h.MISSING:case f.h.NOT_LOADED:t=O,e=n.createElement("div",{className:v},r.text);break;case f.h.MAILTO:e=n.createElement("div",{className:y},r.url.pathname),t=N;break;case f.h.TEL:t=L,e=n.createElement("div",{className:y},r.url.pathname)}let p=this.props.canEdit,m=this.props.canEdit&&(r.type===f.h.GENERIC||r.type===f.h.FIGMA_FILE||r.type===f.h.FIGMA_VERSION||r.type===f.h.FIGMA_PROTOTYPE),h=this.getLinkPrefix(),_=this.getOpenLinkLabel();return n.createElement("div",{role:"none",className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:this.onMouseEnter},n.createElement(l.sq,{type:"button",className:b,onAuxClick:this.onClickLink,onMouseDown:this.onClickLink,recordingKey:this.props.recordingKey},n.createElement(s.n,{className:"hyperlink_popup--icon--7YW8G",svg:t}),h?n.createElement("span",{className:"hyperlink_popup--inlineText--U1QY9"},h," "):null,e),_&&"whiteboard"!==this.props.editorType&&n.createElement(n.Fragment,null,n.createElement("div",{className:I}),n.createElement(l.sq,{type:"button",className:`hyperlink_popup--open--EsmHi ${b}`,onAuxClick:this.onClickOpen,onMouseDown:this.onClickOpen,recordingKey:o.ar(this.props,"secondaryButton")},_)),p&&n.createElement(n.Fragment,null,n.createElement("div",{className:I}),n.createElement(l.sq,{type:"button",recordingKey:o.ar(this.props,"editHyperlinkPopup"),className:T,onMouseDown:this.onClickEdit},n.createElement(c.Tx,{id:"hyperlink.edit"}))),m&&"whiteboard"===this.props.editorType&&n.createElement(n.Fragment,null,n.createElement("div",{className:I}),n.createElement(l.yh,{role:"button",recordingKey:o.ar(this.props,"unfurlHyperlinkPopup"),className:T,onMouseDown:this.onClickUnfurl},n.createElement(c.Tx,{id:"hyperlink.create_preview"}))))}}let k=({size:e,mouse:t,position:r,forceToBottom:n})=>{let i,a,o;let l=m.Gr.getViewportInfo();e.x<300?i=r.x:(i=t.x)<r.x-e.x/2?i=r.x-e.x/2:i>r.x+e.x/2&&(i=r.x+e.x/2),((a=r.y)<50||n)&&(a+e.y>l.height-50?a=t.y:(a+=e.y,o="hyperlink_popup--topAligned--1DH2u"));let s={top:Math.round(a+l.y),left:Math.round(i+l.x),transform:"translateX(-50%)"},c={left:"50%"};if(l.width>=800){if(i<=200){let e=Math.max(i,20),t=1-(e-20)/180,r=50+-50*t;s.left=Math.round(e+l.x),s.transform=`translateX(${-r}%)`,c.left=`calc(${r}% + 20px * ${t})`}else if(i>l.width-200){let e=Math.min(i,l.width-20),t=l.width-20-e,r=1-t/180,n=50+50*r;s.left=Math.round(e+l.x),s.transform=`translateX(${-n}%)`,c.left=`calc(${n}% - 20px * ${r})`}}return{divStyle:s,tooltipStyle:c,verticalAlignmentStyle:o}};function D(e){let{data:t,editorType:r,urlString:a,canEdit:o,onMouseEnter:l,immediatelyDismissHyperlinkPopup:s,getLinkMetadata:c,showHyperlinkEditor:d}=e,u=(0,i.I0)();return n.createElement(R,{data:t,editorType:r,urlString:a,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:l,immediatelyDismissHyperlinkPopup:s,getLinkMetadata:c,showHyperlinkEditor:d,dispatch:u})}function M(e){let{getLinkMetadata:t}=e,r=(0,i.v9)(e=>e.hyperlinkPopup),a=(0,i.v9)(e=>e.mirror.appModel.isReadOnly),o=(0,E.fg)(),l=n.useCallback(()=>{r&&h.iTB.showHyperlinkEditor(r.position.x,r.position.y+r.size.y/2,r.guid)},[r]);if(!r)return null;let s=r.size,c=r.mouse,d=r.position,{divStyle:p,tooltipStyle:m,verticalAlignmentStyle:_}=k({size:s,mouse:c,position:d,forceToBottom:"whiteboard"===o});return n.createElement("div",{className:"hyperlink_popup--container--i1-kA",style:p},n.createElement("div",{className:`hyperlink_popup--popupContainer--MXRdI ${_} ${u.Hy} ${u.tJ}`},n.createElement(D,{data:r.data,editorType:o,urlString:r.urlString,canEdit:!a&&!r.locked,onMouseEnter:h.iTB.stopDismissingHyperlinkPopup,immediatelyDismissHyperlinkPopup:h.iTB.immediatelyDismissHyperlinkPopup,getLinkMetadata:t,showHyperlinkEditor:l}),n.createElement("div",{className:"hyperlink_popup--tooltip--gEvvW",style:m})))}},596085:(e,t,r)=>{r.d(t,{BQ:()=>c,Qu:()=>u,cr:()=>d});var n=r(652983),i=r(149424),a=r(817382);let o=Object.create(null),l=1,s=()=>`${l++}`;class c extends n.PureComponent{constructor(e){super(e),this.el=null,this.ref=e=>{e&&(this.el=e)},this.focus=()=>{u.setFocusedReceiver(this),this.focusDidChange(),this.unmounting&&this.blur()},this.blur=()=>{if(u.isParentOfFocusedReceiver(this)){let e=this.getParentReceiver();e?e.focus():u.setFocusedReceiver(null),this.focusDidChange()}},this.hasFocus=()=>u.receiverIsReceivingKeyboardEvents(this),this.focusDidChange=()=>{if(!this.unmounting){if(this.props.propagateKeyboardFocus){let e=this.getParentReceiver();e&&e.focusDidChange()}else this.props.forceUpdate&&this.props.forceUpdate()}},this.getParentReceiver=()=>{if(!this.el)return null;let e=this.el.parentElement;for(;e;){let t=e.getAttribute("data-keyboard-receiver");if(null!=t)return o[t];e=e.parentElement}return null},this.blurSubtreeIfHidden=e=>{if(!u.isFocusedReceiver(this))return;let t=[],r=!1,n=this.el;for(;n;){let i=n.getAttribute("data-keyboard-receiver");if(null!=i&&t.push(i),n===e){r=!0;break}n=n.parentElement}if(r)for(;t.length;){let e=o[t.pop()];e.onHideOrUnmount()}},this.handleKeyboardEvent=e=>{if(this.props.handleKeyDown&&"keydown"===e.event.type&&this.props.handleKeyDown(e),e.shouldPropagate){let t=this.getParentReceiver();t&&t.handleKeyboardEvent(e)}},this.handleClipboardEvent=(e,t)=>{if(this.props.handleClipboard&&this.props.handleClipboard(e,t),e.shouldPropagate){let r=this.getParentReceiver();r&&r.handleClipboardEvent(e,t)}},this.id=s(),o[this.id]=this,e.focusFunctionRef&&(e.focusFunctionRef.current=this.focus),e.blurFunctionRef&&(e.blurFunctionRef.current=this.blur),this.onShowOrMount()}componentWillUnmount(){this.onHideOrUnmount(),delete o[this.id]}onHideOrUnmount(){this.unmounting=!0,this.blur()}onShowOrMount(){this.unmounting=!1,this.props.focusOnMount&&this.focus()}render(){return n.createElement("div",{role:"none",ref:this.ref,"data-keyboard-receiver":this.id,onMouseDown:this.props.onMouseDown,onMouseLeave:this.props.onMouseLeave,style:this.props.style,className:this.props.className},this.props.children)}}function d(e){for(;e;){if("none"===e.style.display)return!0;e=e.parentElement}return!1}c.displayName="KeyboardReceiver";let u=new class{constructor(){this.focusedReceiver=null,this.customFocusElement=null,this.hasFocus=!0,this.setCustomFocusElement=e=>{this.customFocusElement=e,this.customFocusElement.addFocusChangedCallback(this.focusChanged)},this.focusChanged=e=>{this.hasFocus=e,this.focusedReceiver&&this.focusedReceiver.focusDidChange()},this.setFocusedReceiver=e=>{let t=this.focusedReceiver;this.focusedReceiver=e,t&&t.focusDidChange()},this.shouldInterceptKeyboardEvent=e=>{if(!(this.customFocusElement&&this.customFocusElement.isFocusElement(e.target))&&e.target!==document.body&&!(0,a.u)(e.target)){let t=e.target;for(;t;){if("fullscreen-root"===t.id||"curator-portal-target"===t.id)return!1;t=t.parentElement}return!0}let t=new i.A(e);return this.dispatchKeyboardEvent(t),!t.shouldPropagate},this.shouldInterceptClipboardEvent=(e,t)=>{if(this.customFocusElement&&this.customFocusElement.isFocusElement(e.target)||e.target===document.body){e.preventDefault();let r=new i.A(e);return this.dispatchClipboardEvent(r,t),!r.shouldPropagate}return!1},this.dispatchKeyboardEvent=e=>{if(this.focusedReceiver&&d(this.focusedReceiver.el)){console.warn("Detected a hidden focused receiver, ignoring keyboard event");return}this.focusedReceiver&&this.focusedReceiver.handleKeyboardEvent(e)},this.dispatchClipboardEvent=(e,t)=>{this.focusedReceiver&&this.focusedReceiver.handleClipboardEvent(e,t)},this.receiverIsReceivingKeyboardEvents=e=>{if(!this.hasFocus)return!1;if(this.focusedReceiver===e)return!0;let t=this.focusedReceiver;for(;t&&t.props.propagateKeyboardFocus;){let r=t.getParentReceiver();if(r===e)return!0;t=r}return!1},this.isFocusedReceiver=e=>this.focusedReceiver===e,this.isParentOfFocusedReceiver=e=>{let t=this.focusedReceiver;for(;t;){if(t===e)return!0;t=t.getParentReceiver()}},this.focusSubtreeIfNecessary=e=>{let t=[e],r=0;for(;r<t.length;){let e=t[r],n=e.getAttribute("data-keyboard-receiver");if(n){let e=o[n];e.onShowOrMount()}if(e.children)for(let r=0;r<e.children.length;r++)t.push(e.children[r]);r++}},this.blurSubtreeIfNecessary=e=>{this.focusedReceiver&&this.focusedReceiver.blurSubtreeIfHidden(e)},this.focusedReceiverName=()=>{if(this.focusedReceiver)return this.focusedReceiver.props.name}}focusIfUnfocused(){let e=document.activeElement;if(!document.hasFocus()||!this.customFocusElement||this.customFocusElement.isFocusElement(e))return;let t=!e||e===document.body;t&&this.customFocusElement.focus()}}},661373:(e,t,r)=>{r.d(t,{CH:()=>d,Mj:()=>p,Sb:()=>u,rX:()=>m});var n,i=r(652983),a=r(87608),o=r.n(a),l=r(204829),s=r(680356),c=r(901778);let d=(0,s.k)();function u(e){return void 0!==e.active}var p=((n=p||{}).ESSENTIAL="essential",n.TOOLS="tools",n.VIEW="view",n.ZOOM="zoom",n.TEXT="text",n.SHAPE="shape",n.SELECT="select",n.CURSOR="cursor",n.EDIT="edit",n.COPY="copy",n.TRANSFORM="transform",n.ARRANGE="arrange",n.COMPONENTS="components",n.ADVANCED="advanced",n.ACCESSIBILITY="accessibility",n);let m=i.forwardRef((e,t)=>{let{tabInfo:r,completedTabs:n,onNavClick:a}=e;return i.createElement(i.Fragment,null,r.map((o,l)=>i.createElement(h,{key:o.id,tabInfo:r,completedTabs:n,onNavClick:a,recordingKey:e.recordingKey,tab:o,index:l,ref:t})))}),h=i.forwardRef((e,t)=>{let{tab:r,index:n,onNavClick:a,completedTabs:s}=e,p=l.Wn(l.ar(e,r.id),"click",e=>{a(r.id)}),m=u(r)?i.createElement("div",{role:"tab",ref:e=>{t.current||(t.current=[]),t.current[n]=e},"aria-selected":r.active,"aria-controls":d,key:r.id,id:r.id,className:r.className,"data-completed":s[r.id],onClick:p,tabIndex:-1},r.displayName):i.createElement("div",{key:r.id,className:o()(r.className,c.su)});return m})},246039:(e,t,r)=>{r.d(t,{Av:()=>A,Qj:()=>N,wB:()=>C});var n,i=r(652983),a=r(407908),o=r(848080),l=r(87608),s=r.n(l),c=r(686926),d=r(172497),u=r(204829),p=r(286206),m=r(117986),h=r(496417),_=r(794228),g=r(83894),f=r(784667),E=r(442299),y=r(464368),v=r(187436),b=r(572333),I=r(828798),T=r(136448),w=r(332224),S=r(979391);let C="left-panel-container";var O=((n=O||{}).EDITOR="EDITOR_LEFT_PANEL",n);class A extends u.wA{constructor(){super(...arguments),this.state={isResizing:!1},this.onEdgeMouseDown=u.hO(this,"mousedown",e=>{this.props.disableResizing||(this.setState({isResizing:!0}),this.lastRecordedClientX=e.clientX)},{recordMetadata:e=>null,playbackMetadata:e=>({clientX:this.props.constrainedSidebarWidth})}),this.onMouseMove=u.hO(this,"mousemove",e=>{if(!this.state.isResizing)return u.Ev;{let t=(0,I._q)(e.clientX);t!==this.props.constrainedSidebarWidth&&(0,I.Pt)(t)}},{recordMetadata:e=>{let t=e.clientX-this.lastRecordedClientX;return this.lastRecordedClientX=e.clientX,{diffX:t}},playbackMetadata:e=>{let t=this.lastRecordedClientX+e.diffX;return this.lastRecordedClientX=t,{clientX:t}}}),this.onMouseUp=u.hO(this,"mouseup",e=>{if(!this.state.isResizing)return u.Ev;this.setState({isResizing:!1})})}recordingKey(){return"leftPanel"}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}renderLoading(){let e=E.U.sidebarSplitPosition,t=(0,v.zD)(),r=!!(null==t?void 0:t.shouldOptimizeForIpadApp)&&E.U.hideUiForMobileEditing,n=r?0:(0,I._q)(e);return i.createElement("div",{className:s()(h.Hy,{[S.y5]:this.props.isHidden,[S.$h]:!this.props.isHidden,[S.Cy]:this.props.isFullHeight,[S.bl]:this.props.isFullHeight&&this.props.isHidden}),style:{width:n,display:this.props.appModel.showUi?void 0:"none"}},i.createElement("div",{className:S.kQ},this.props.isLoading&&i.createElement(T.V,null)),!this.props.disableResizing&&i.createElement("div",{className:S.i$,style:{left:n}}))}renderNonLoading(){if((0,p.Xc)(m.k.FIGJAM_CORE,this.props.appModel),!this.props.appModel.currentPage)return null;let e=this.props.isFullHeight&&this.props.isHidden,t=this.props.constrainedSidebarWidth;return i.createElement("div",{className:s()(h.Hy,{[S.gG]:this.state.isResizing,[S.Lv]:!this.props.isHidden,[S.y5]:!this.props.isFullHeight&&this.props.isHidden,[S.eF]:!e&&this.props.showBackgroundGradient,[S.wu]:this.props.rulersVisible,[S.Cy]:this.props.isFullHeight,[S.I_]:this.props.isFullHeight,[S.gv]:this.props.rulersVisible&&this.props.isFullHeight,[S.bl]:e}),style:{width:e?void 0:t,maxWidth:(0,I.kk)(),display:this.props.appModel.showUi?void 0:"none"},ref:this.props.forwardedRef,id:C},i.createElement("div",{className:S.kQ},this.props.children),!this.props.disableResizing&&!e&&i.createElement("div",{className:s()(S.i$,{[S.gT]:this.props.rulersVisible}),style:{left:t},onMouseDown:this.onEdgeMouseDown,onDoubleClick:()=>{(0,I.Jt)()}}))}render(){let e=this.props.constrainedSidebarWidth,t=this.props.isFullHeight?`${(0,d.F)(w.O4v)}px`:"var(--spacer-2)",r=this.props.isUI3&&this.props.isHidden&&!this.props.isFullHeight,n=r?{initial:{left:`calc(-${e}px - ${t})`},animate:{left:`calc(-${e}px - ${t})`,display:"block",transitionEnd:{display:"none"}}}:{initial:{left:0}};return i.createElement(c.E.div,{className:S.U7,style:{width:`calc(${e}px + ${t})`,pointerEvents:this.props.appModel.showUi?void 0:"none"},transition:{ease:"easeOut"},...n},this.props.isLoading?this.renderLoading():this.renderNonLoading())}}function N({children:e,width:t,disableResizing:r}){let n=(0,a.v9)(e=>e.mirror.appModel),l=(0,y.Yu)(),s=(0,I.Lk)(),{isLeftPanelCollapsed:c}=(0,I.yq)(),d="ui3"===(0,o.Fg)().version,u=(0,g.b)(),p=!(0,_.TI)()&&d,m=(0,b.mA)((0,f.tZ)().renderRulers);return i.createElement(A,{appModel:n,isLoading:l,constrainedSidebarWidth:t??s,isHidden:c,disableResizing:r,showBackgroundGradient:p,rulersVisible:m,isUI3:d,isFullHeight:u},e)}A.displayName="LeftPanel"},828798:(e,t,r)=>{r.d(t,{Jt:()=>y,Lk:()=>E,Pt:()=>v,_q:()=>g,dc:()=>I,kk:()=>f,yq:()=>b});var n=r(652983),i=r(407908),a=r(9247),o=r(362886),l=r(280251),s=r(83894),c=r(179110),d=r(961215),u=r(784667),p=r(442299),m=r(187436),h=r(217421),_=r(572333);function g(e){return Math.max(240,Math.min(500,e||0))}function f(){return 500}function E(){let e=(0,u.Yt)();return g(e)}function y(){(0,u.tZ)().sidebarSplitPosition.set(240)}function v(e){(0,u.tZ)().sidebarSplitPosition.set(e)}function b(){var e,t,r;let a=!(0,_.YO)(null==(e=d.O$1)?void 0:e.editorPreferences().showSidebar,p.U.showSidebar),o=(0,i.v9)(e=>e.user),l=!!(null==(t=(0,m.QF)())?void 0:t.shouldOptimizeForIpadApp),s=(0,_.mA)(null==(r=d.O$1)?void 0:r.uiState().hideUiForMobileEditing)&&l;(!o||s)&&(a=!0);let c=(0,n.useCallback)(e=>{(0,u.tZ)().showSidebar.set(!e)},[]),h=(0,n.useCallback)(()=>{c(!a)},[a,c]);return{isLeftPanelCollapsed:a,toggleLeftPanelCollapsed:h}}function I(){let e=(0,i.v9)(e=>(0,o.PG)(e.multiplayer));(function(e){let{isLeftPanelCollapsed:t,toggleLeftPanelCollapsed:r}=b(),i=(0,a.D)(e),o=(0,n.useRef)(),l=T();n.useEffect(()=>{l&&e!==i&&void 0!==i&&(e?t?o.current=!1:(r(),o.current=!0):o.current&&t&&r())},[e,l,i,t,r])})(e),function(e){let{isLeftPanelCollapsed:t}=b(),r=T(),o=(0,i.I0)(),s=(0,a.D)(t&&e);n.useEffect(()=>{r&&e&&s&&!t&&o(l.JD())},[e,s,t,o,r])}(e)}function T(){let e=(0,s.b)(),t=(0,h.Oq)(h.Sw.ui3ExpHidePanelsForObserver),r=(0,c.zQ)();return e||t&&r}},791626:(e,t,r)=>{r.d(t,{V:()=>p,u:()=>m});var n=r(652983),i=r(365653),a=r(594619),o=r(970740),l=r(961215),s=r(112088),c=r(538122);let d=a.j.Dropdown,u=a.j.Option,p="component-insert-leaf-context-menu",m=n.memo(function(){let{dropdownShown:e,defaultFileKeys:t,openFileKey:r}=(0,i.c)(e=>{var t;return{dropdownShown:e.dropdownShown,defaultFileKeys:e.library.defaultPublished.fileKeys,openFileKey:(null==(t=e.openFile)?void 0:t.key)||null}});if(!e||e.type!==p)return null;let a=e.data.component,m=a.file_key===r;return t.includes(a.file_key)?null:n.createElement(d,{className:c.z,style:e.data.position},m?n.createElement(u,{recordingKey:`goToLocalComponent.${a.node_id}`,onClick:()=>l.iTB.goToSymbolOrStateGroupById(a.node_id,!1)},n.createElement(o.Tx,{id:"design_systems.instance_swap_picker.go_to_main_component"})):n.createElement(u,{recordingKey:`goToSubscribedComponent.${a.node_id}`,href:(0,s.VF)(a),target:"_blank"},n.createElement(o.Tx,{id:"design_systems.instance_swap_picker.go_to_main_component"})))})},859401:(e,t,r)=>{r.d(t,{W:()=>i});var n=r(652983);class i extends n.PureComponent{constructor(){super(...arguments),this.state={requestNumber:null},this.timerHandle=null,this.onError=e=>{var t,r;null==(r=(t=this.props).onError)||r.call(t,e),this.reload()},this.reload=()=>{this.clearTimer(),this.timerHandle=this.scheduleNextReload()},this.updateRequestTime=()=>{let e=null===this.state.requestNumber?1:this.state.requestNumber+1;this.setState({requestNumber:e})}}clearTimer(){null!==this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=null)}scheduleNextReload(){let{delayMultiplier:e=10}=this.props,t=Math.min(300,e*((this.state.requestNumber||0)+Math.random()));return setTimeout(this.updateRequestTime,1e3*t)}getSrc(){return this.props.src?null===this.state.requestNumber?this.props.src:`${this.props.src}${-1===this.props.src.indexOf("?")?"?":"&"}requestNumber=${this.state.requestNumber}`:this.props.src}imgProps(){let e={...this.props};return delete e.delayMultiplier,e}UNSAFE_componentWillReceiveProps(e){e.src!==this.props.src&&(this.clearTimer(),this.setState({requestNumber:null}))}componentWillUnmount(){this.clearTimer()}render(){return n.createElement("img",{...this.imgProps(),alt:"",src:this.getSrc(),onError:this.onError})}}i.displayName="ReloadingImage"},926993:(e,t,r)=>{r.d(t,{Et:()=>m,XP:()=>_,_C:()=>h});var n=r(652983),i=r(407908),a=r(600486),o=r(19516),l=r(381846),s=r(854571),c=r(654230),d=r(290686),u=r(158774),p=r(393357);function m({isVisible:e,autofocus:t,selectOnFocus:r,ref:i}){return n.useCallback(()=>{(null==i?void 0:i.current)&&e&&t&&i.current.focus(r)},[t,e,i,r])}function h({isVisible:e,query:t,placeholder:r,onChange:s,className:h,extraSpacing:_,hideXIcon:g,hideSearchIcon:f,isFigjam:E,autofocus:y,selectOnFocus:v,entryPointForTracking:b,forwardedRef:I,recordingKey:T}){let w=(0,i.I0)(),S=(0,i.v9)(e=>e.search.sessionId),C=n.useRef(null),O=m({isVisible:e,autofocus:y,selectOnFocus:v,ref:C}),A=n.useCallback(e=>!!(e.altKey&&u.Gr.isWebContextReady())&&(0,p.cY)(e,!0),[]);(0,o.O)(()=>{function e(){w(d.C.endSession())}return O(),e(),e});let N=n.useCallback(()=>{"editor:assets_panel"===b&&a.RQ.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:t}),s(""),w(d.C.endSession())},[w,s,t,b]),L=n.useCallback(e=>{b&&(""===e&&S?w(d.C.endSession()):""===e||S||w(d.C.startSearch({entryPoint:b})),s(e))},[w,b,S,s]),P=n.useCallback(()=>{"editor:assets_panel"===b&&a.RQ.trackDefinedEvent("assets_panel.search_focused",{})},[b]),R=n.useCallback(()=>{"editor:assets_panel"===b&&a.RQ.trackDefinedEvent("assets_panel.search_unfocused",{})},[b]);return E?n.createElement(c.E1,{ref:(0,l.Z)(C,I),className:h,focusOnMount:!1,query:t,placeholder:r,clearSearch:N,onChange:L,onFocus:P,onBlur:R,isKeyDownHandled:A,hideXIcon:g,recordingKey:T}):n.createElement(c.MU,{ref:(0,l.Z)(C,I),className:h,focusOnMount:!1,extraSpacing:_,query:t,placeholder:r,clearSearch:N,onChange:L,onFocus:P,onBlur:R,isKeyDownHandled:A,hideXIcon:g,hideSearchIcon:f,recordingKey:T})}function _({autofocus:e,className:t,column:r,extraSpacing:i,hideSearchIcon:a,hideXIcon:c,isFigjam:d,isVisible:u,onChange:p,path:m,placeholder:_,query:g,recordingKey:f,selectOnFocus:E,entryPointForTracking:y,forwardedRef:v}){let b=n.useRef(null),{setKeyboardNavigationElement:I}=(0,s.Jd)({path:m,column:r});return(0,o.O)(()=>{b.current&&(null==I||I(b.current.searchInput))}),n.createElement(h,{forwardedRef:(0,l.Z)(b,v),autofocus:e,className:t,extraSpacing:i,hideSearchIcon:a,hideXIcon:c,isFigjam:d,isVisible:u,onChange:p,placeholder:_,query:g,selectOnFocus:E,entryPointForTracking:y,setKeyboardNavigationElement:I,recordingKey:f})}},784209:(e,t,r)=>{r.d(t,{t:()=>M});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(600486),s=r(9247),c=r(337167),d=r(361763),u=r(799671),p=r(435613),m=r(367674),h=r(222490),_=r(983635),g=r(571713),f=r(535245),E=r(200273),y=r(699072),v=r(966041),b=r(900710),I=r(220183),T=r(274389),w=r(991708),S=r(12875),C=r(559417),O=r(891634),A=r(56607),N=r(403199),L=r(357231),P=r(646894),R=r(554564),k=r(949925);let D=r(757252);function M({asset:e,fileName:t,sourceForTracking:r,thumbHeight:a,thumbLayout:M,thumbWidth:F,viewMode:x,sectionNameForTracking:U,sectionPosition:B,noFlyout:V,preventDrag:G,disableContextMenu:H}){var W,K;let z=(0,i.I0)(),Z=(0,i.v9)(e=>e.dropdownShown),Y=(0,i.v9)(b.F1),j=(0,i.v9)(v.BR),$=(0,i.v9)(v.pW),q=(0,c.Dv)(w.d),X=(null==(W=$.assetsPanelSearch.searchOptions)?void 0:W.type)===R.u.ALL,J=(0,_.Ew)(e.file_key),Q=X&&J,ee=n.useRef(null),et=(0,y.rP)(e.name),er=(0,u.WK)({text:et,textRef:ee}),en=n.useRef(null),ei=(0,u.WK)({text:t??"",textRef:en}),ea=(null==Z?void 0:Z.type)===L.z?null==(K=null==Z?void 0:Z.data)?void 0:K.component:void 0,eo=(null==ea?void 0:ea.node_id)===e.node_id,el=x===S.ge.List,es=el?"list-no-padding":"grid",ec=!!$.assetsPanelSearch.query,ed=(0,O.M)(e),eu=(0,C.l)(e),ep=(0,s.D)(eu),em=!V;n.useEffect(()=>{eu&&!ep&&z(h.Cp())},[eu,z,ep]);let eh=e.isLocal&&(0,d.hQ)()?(0,T.hL)(e.node_id,Y).join("-"):e.node_id,e_="Local components"===U||"Local private components"===U||e.isLocal,{handleClick:eg,handleDoubleClick:ef}=function(e,t){let r=(0,i.v9)(E.Oj),a=n.useRef(null),o=n.useCallback(n=>{l.RQ.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:n,isLocalComponent:t,assetKey:(0,f.Y)(e),fileKey:r??void 0})},[e,t,r]),s=n.useCallback(()=>{a.current||(a.current=setTimeout(()=>{o(!1),a.current=null},500))},[o]),c=n.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),o(!0)},[o]);return{handleClick:s,handleDoubleClick:c}}(e,e_??!1),eE=M!==P.Wx.SMALL&&!el,ey=(0,A.X)(e),ev=el?a:a-2,eb=el?F:F-2,eI=n.useMemo(()=>G?void 0:{sourceForTracking:r,clickToInsert:!1,afterSuccessfulInsert:I.VB,sectionNameForTracking:U},[G,U,r]),eT=e_?n.createElement(N.e8,{item:e,height:ev,width:eb,draggable:eI,onContextMenu:H?void 0:ed,shouldHideTooltip:em||eo||eu,isFilePublished:j,recordingNodePath:eh,isSearch:ec,useBaseTile:!0,hideNameOverlay:eE,numVariants:ey,displayType:es,sectionPosition:B,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:er||ei?t:void 0,alwaysShowBorder:!0}):n.createElement(N.OR,{item:e,showName:!0,height:ev,width:eb,draggable:eI,onContextMenu:H?void 0:ed,shouldHideTooltip:em||eo||eu,recordingNodePath:eh,isSearch:ec,useBaseTile:!0,hideNameOverlay:eE,numVariants:ey,displayType:es,sectionPosition:B,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:er||ei?t:void 0,alwaysShowBorder:!0});return n.createElement("div",{className:el?k.qS:k.YS,onClick:eg,onDoubleClick:ef},el?eT:n.createElement("div",{className:o()(k.F6,{[k.GY]:eu,[k.WG]:eu&&q})},eT),eE&&n.createElement("div",{role:"button",className:k.lf,style:{width:F}},n.createElement("span",{className:k.u2,ref:ee},et),em&&n.createElement(p.n,{ariaHidden:!0,className:k.Ud,svg:D})),eE&&!!t&&n.createElement(m.j,{spacing:0,direction:"horizontal"},n.createElement("div",{className:o()(k.Yp,k.BD),ref:en,style:Q?{maxWidth:F-g.Sc}:{width:F}},t),Q&&n.createElement(g.XG,{fileKey:e.file_key,tooltipDelay:500,variant:"secondary",tooltipLocation:"below"})),em&&el&&n.createElement(p.n,{ariaHidden:!0,className:k.J1,svg:D}))}},646894:(e,t,r)=>{r.d(t,{Ji:()=>d,RW:()=>p,Wx:()=>u,bs:()=>m,iH:()=>h});var n,i,a=r(172497),o=r(166885),l=r(304141);let s=(0,a.z)(l.mB),c=(0,a.z)(l.t);var d=((n=d||{}).NORMAL="NORMAL",n.LARGE="LARGE",n),u=((i=u||{}).WIDE="WIDE",i.SMALL="SMALL",i.NORMAL="NORMAL",i);let p=(e,t)=>{let r=!0,n=!0;for(let t of e){let e,i;if(t.type!==o.h3.STYLE){if("min_node_width"in t)e=t.min_node_width,i=t.min_node_height;else{if(!("width"in t))continue;e=t.width,i=t.height}if(!e||!i)return"NORMAL";if(e<3*i&&(r=!1),(e>64||i>64)&&(n=!1),!r&&!n)break}}return r?"WIDE":n&&!t?"SMALL":"NORMAL"},m=e=>{let{containerWidth:t,isList:r,layout:n,maxSmallThumbSize:i,maxWideColWidth:a}=e;if(r)return 1;switch(n){case"WIDE":if(t<=a)return 1;if(t<=450)return 2;return 3;case"SMALL":return Math.ceil((t-32+c)/(i+c));case"NORMAL":return Math.floor(t/100)}},h=(e,t)=>{let{containerWidth:r,isList:n,layout:i}=e;if(n)return{width:s,height:s};let a=(r+2-(t-1)*c-32)/t;return{width:a,height:"WIDE"===i?Math.ceil(a/4):a}}},554564:(e,t,r)=>{r.d(t,{e:()=>a,u:()=>i});var n,i=((n=i||{}).ALL="all",n.RECENT="recent",n.LOCAL="local",n.FILE="file",n);let a={all:!0,recent:!1,local:!0,file:!0}},687844:(e,t,r)=>{r.d(t,{I:()=>I,m:()=>T});var n=r(652983),i=r(407908),a=r(950663),o=r.n(a),l=r(600486),s=r(716250),c=r(810373),d=r(458721),u=r(970740),p=r(721127),m=r(508887),h=r(334245),_=r(983635),g=r(571713),f=r(615675),E=r(200273),y=r(409377),v=r(482919),b=r(554564);let I="component-sidebar-asset-type-select";function T(e){var t;let{assetType:r,libraryNameByFileKey:a,onSetAssetType:T,onSetKeyboardNavigationElement:S,validAssetTypeOptions:C}=e,O=(0,i.I0)(),A=(0,i.v9)(e=>e.modalShown),N=(0,i.v9)(e=>e.dropdownShown),L=(0,i.v9)(E.dh),P=r.type===b.u.FILE?r.fileKey:void 0,R=(0,_.RK)(),k=(0,_.Ew)(P),D=n.useCallback(()=>{(null==A?void 0:A.type)===y.h&&O(p.VG()),l.RQ.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:null==L?void 0:L.key})},[O,A,null==L?void 0:L.key]),M=n.useMemo(()=>{if((0,f.dD)(R)){let e=Object.entries(a??{}).map(([e,t])=>({key:e,name:t}));return(0,f.Vw)({libraries:e,approvedLibraryKeysByResourceType:R}),e.map(({key:e})=>e)}return Object.keys(a??{}).sort((e,t)=>d.s.LEXICOGRAPHICALLY(a[e],a[t]))},[a,R]),F=(0,m.RI)(),[x,U]=o()(M,e=>!(0,h.mY)(e)),B=U.length>0&&F(),V=n.useMemo(()=>({format:e=>{switch(e.type){case b.u.RECENT:return(0,u.t)("design_systems.assets_panel.dropdown_type_recents");case b.u.ALL:return(0,u.t)("design_systems.assets_panel.dropdown_type_all_libraries");case b.u.LOCAL:return(0,s.BZ)().dse_editor_templates_v1?(0,u.t)("design_systems.assets_panel.dropdown_type_local_assets"):(0,u.t)("design_systems.assets_panel.dropdown_type_local");case b.u.FILE:return a[e.fileKey]}},isEqual:w}),[a]);return n.createElement(v.Ph,{className:"sidebar_asset_type_select--select--PTmwH",id:I,property:r,formatter:V,onChange:T,dropdownAlignment:"left",openOnKeyPressed:[c.sr.SPACE,c.sr.ENTER],onSetKeyboardNavigationElement:S,dispatch:O,chevronClassName:"sidebar_asset_type_select--chevron--xyZLx",inputClassName:"sidebar_asset_type_select--input--sSEn2",dropdownShown:e.useLocalState?e.dropdownShown:N,dropdownWidth:260,onShowDropdown:D,onShowDropdownOverride:e.useLocalState?e.onShowDropdownOverride:void 0,onHideDropdownOverride:e.useLocalState?e.onHideDropdownOverride:void 0,rightIcon:k?n.createElement(g.XG,{fileKey:P}):void 0},!!C[b.u.ALL]&&n.createElement(v.Wx,{value:{type:b.u.ALL}}),!!C[b.u.RECENT]&&n.createElement(v.Wx,{value:{type:b.u.RECENT}}),!!C[b.u.LOCAL]&&n.createElement(v.Wx,{value:{type:b.u.LOCAL}}),x.length>0?n.createElement(v.Hz,null):null,x.length>0?n.createElement(v.Wx,{isHeader:!0,formattedValue:(null==(t=null==L?void 0:L.org)?void 0:t.name)?(0,u.t)("design_systems.assets_panel.dropdown_org_libraries",{orgName:L.org.name}):(0,u.t)("design_systems.assets_panel.dropdown_libraries")}):null,x.map(e=>(0,f.v8)(e)?n.createElement(v.Wx,{key:e,value:{type:b.u.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:n.createElement(g.sK,null)}):n.createElement(v.Wx,{key:e,value:{type:b.u.FILE,fileKey:e},fullWidth:!0})),B?n.createElement(v.Hz,null):null,B?n.createElement(v.Wx,{isHeader:!0,formattedValue:(0,u.t)("design_systems.assets_panel.dropdown_curated_libraries")}):null,B&&U.map(e=>n.createElement(v.Wx,{key:e,value:{type:b.u.FILE,fileKey:e},fullWidth:!0})))}function w(e,t){return e.type===b.u.FILE&&t.type===b.u.FILE?e.fileKey===t.fileKey:e.type===t.type}},766046:(e,t,r)=>{r.d(t,{AW:()=>a,ZW:()=>o,tS:()=>l}),r(652983);var n=r(122342);let i="library-section-expanded-";function a(e,t=!1){let r=null;try{if(null!=n.D5){let t=n.D5.getItem(`${i}${e}`);r=t?JSON.parse(t):null}}catch(e){}return null!=r?!!r:t}function o(e,t){null!==n.D5&&n.D5.setItem(`${i}${e}`,JSON.stringify(t))}function l(e,t){switch(e){case"FILE":return"Used in this file"!==t;case"PAGE":case"NAME_GROUP":case"ASSET_TYPE":return!1}}},146198:(e,t,r)=>{r.d(t,{q:()=>d});var n=r(652983),i=r(204829),a=r(970740),o=r(225468),l=r(158314);let s=r(322342),c=r(131077);function d({disabled:e,isList:t,onSetKeyboardNavigationElement:r,onToggleViewMode:d,recordingKey:u}){let p=t?(0,a.t)("design_systems.assets_panel.show_as_grid"):(0,a.t)("design_systems.assets_panel.show_as_list");return n.createElement(l.hU,{ref:r,recordingKey:i.ar(u,"toggleComponentsSidebarViewMode"),"data-tooltip-type":o.fR.TEXT,"data-tooltip":p,svg:t?c:s,onClick:d,disabled:e})}},887815:(e,t,r)=>{r.d(t,{T:()=>d,X:()=>u});var n=r(652983),i=r(407908),a=r(721127),o=r(966041),l=r(880381),s=r(166885),c=r(409377);function d(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.modalShown);return n.useCallback(()=>{(null==r?void 0:r.type)===c.h&&(null==r?void 0:r.data)&&t(a.cU({data:{...null==r?void 0:r.data,asset:e},type:c.h}))},[e,t,r])}function u(e){let t=(0,i.v9)(l.rr),r=(0,i.v9)(l.k5),n=(0,i.v9)(o.AV),a=(0,i.v9)(o.wq);if(e.type===s.h3.COMPONENT){let r=e.isLocal?n[e.node_id]:e.component_key?t[e.component_key]:void 0;return!!r&&r.content_hash!==e.content_hash}if(e.type===s.h3.STATE_GROUP){let t=e.isLocal?a[e.node_id]:e.key?r[e.key]:void 0;return!!t&&t.version!==e.version}return!1}},12875:(e,t,r)=>{r.d(t,{Bg:()=>d,HU:()=>c,Pn:()=>u,R$:()=>h,UR:()=>v,Wp:()=>_,ge:()=>y,m1:()=>m,p3:()=>p,yn:()=>f});var n,i=r(5453),a=r(667981),o=r(112088),l=r(166885),s=r(605508);function c(e){var t;if(!e.length)return!0;let r=null==(t=e.find(e=>(0,o.wQ)(e)&&e.containing_frame))?void 0:t.containing_frame;for(let t of e)if((0,o.wQ)(t)){let e=(0,s.Dh)(r,t.containing_frame),n=(0,s.jM)(r,t.containing_frame);if(!e||!n)return!1}return!0}let d=()=>({subscribedFiles:[],fileKeyToSubscribedItems:{}});function u(e,t){let r=p((0,a.jL)(e)),n=p(t,e);return{allItems:[].concat(r.allItems,n.allItems),publishedItems:[].concat(r.publishedItems,n.publishedItems),privateItems:[].concat(r.privateItems,n.privateItems),erroneousItems:[].concat(r.erroneousItems,n.erroneousItems),numUpdates:r.numUpdates+n.numUpdates,numPublished:r.numPublished+n.numPublished}}function p(e,t,r){var n,i;let s=(0,a.OB)(e),c=[],d=[],u=[],p=r?Object.values(r):[],m=0,h=0,_=new Set;if(t)for(let e of Object.keys(t)){let r=t[e],a=null==(i=null==(n=r.containing_frame)?void 0:n.containingStateGroup)?void 0:i.nodeId;a&&r.old_key&&_.add(a)}for(let e of s)if(e.deletedFromSceneGraph||(c.push(e),e.status===l.mk.NOT_STAGED||e.status===l.mk.DELETED?u.push(e):d.push(e)),(0,a.D9)(e.status)&&h++,e.status!==l.mk.CURRENT&&e.status!==l.mk.NOT_STAGED||(e.type===l.h3.COMPONENT||e.type===l.h3.STATE_GROUP)&&(0,o.LI)(e.status)&&e.old_key||e.type===l.h3.STATE_GROUP&&(0,o.LI)(e.status)&&_.has(e.node_id)){m++;continue}return{allItems:c,publishedItems:d,privateItems:u,erroneousItems:p,numUpdates:m,numPublished:h}}function m(e,t,r,n,i,a){let o=g(e.published.stateGroups,r,e,t,!!n),l=g(e.published.components,r,e,t,!!n,e=>{var t;return(null==(t=e.containing_frame)?void 0:t.containingStateGroup)==null}),s={},c={};for(let e of l.subscribedFiles)(!i||e.key===i)&&(a&&e.key===a||(s[e.key]=e,c[e.key]=(c[e.key]||[]).concat(l.fileKeyToSubscribedItems[e.key])));for(let e of o.subscribedFiles)(!i||e.key===i)&&(a&&e.key===a||(s[e.key]=e,c[e.key]=(c[e.key]||[]).concat(o.fileKeyToSubscribedItems[e.key])));return{subscribedFiles:Object.values(s),fileKeyToSubscribedItems:c}}function h(e,t,r,n,a){let l=e.data;if(!l)return d();let s=[],c={};for(let e in Object.entries(l).forEach(([e,i])=>{let l=t[e];if(!l)return;let s=r?t[r]:null;(!s||(0,o.E)(n,s,l,a))&&i.length>0&&(c[e]=[...i])}),c){let r=t[e];r&&s.push(r)}return(0,i.aV)(s,"name"),{subscribedFiles:s,fileKeyToSubscribedItems:c}}function _(e,t,r,n){let i={...e.defaultPublished.components};for(let t of Object.keys(e.defaultPublished.stateGroups))for(let r of(i[t]||(i[t]=Object.create(null)),Object.keys(e.defaultPublished.stateGroups[t])))i[t][r]={...i[t][r]||{},...e.defaultPublished.stateGroups[t][r]};return g(i,r,e,t,n,e=>{var t;return(null==(t=e.containing_frame)?void 0:t.containingStateGroup)==null})}function g(e,t,r=null,n=null,a,l=()=>!0){let s=Object.create(null);for(let i in e){let c=e[i];for(let e in c){let i=t[e];if(!i||n&&r&&!(0,o.E)(r,t[n],i,a))continue;let d=[];for(let t in c[e]){let r=c[e][t];l(r)&&d.push(r)}d.length>0&&(s[e]=d)}}let c=Object.keys(s).map(e=>t[e]);return(0,i.aV)(c,"name"),{fileKeyToSubscribedItems:s,subscribedFiles:c}}function f(e,t,r,n){let i=E(e.published.stateGroups,r,e,t,n),a=E(e.published.components,r,e,t,n,e=>{var t;return(null==(t=e.containing_frame)?void 0:t.containingStateGroup)==null}),o={},l={};for(let e of[a,i])for(let t of e.subscribedHubFiles)o[t.id]=t,l[t.id]=(l[t.id]||[]).concat(e.hubFileIdToSubscribedItems[t.id]);return{subscribedHubFiles:Object.values(o),hubFileIdToSubscribedItems:l}}function E(e,t,r=null,n=null,a,l=()=>!0){let s={};for(let i in e){let c=e[i];for(let e in c){let i=t[e];if(!i||r&&n&&!(0,o.Cv)(r,n,{key:i.id},a))continue;let d=[];for(let t in c[e]){let r=c[e][t];l(r)&&d.push(r)}d.length>0&&(s[e]=d)}}let c=Object.keys(s).map(e=>t[e]);return(0,i.po)(c,e=>e.versions[e.current_hub_file_version_id].name),{hubFileIdToSubscribedItems:s,subscribedHubFiles:c}}var y=((n=y||{})[n.Grid=0]="Grid",n[n.List=1]="List",n);let v=e=>0===e?"grid":"list"},191107:(e,t,r)=>{r.d(t,{Ke:()=>I,R:()=>m,ak:()=>v,gf:()=>p,nS:()=>h});var n,i=r(5453),a=r(716250),o=r(970740),l=r(615675),s=r(112088),c=r(699072),d=r(166885),u=r(12875);function p(e,t){let r={},n={},i=[];return e.forEach(e=>{let a=t(e);if(!a)return;let o=a.containing_frame;if(null==o?void 0:o.pageId){let t=o.pageId,i=o.pageName||"";n[t]=i,r[t]=r[t]||[],r[t].push(e)}else i.push(e)}),{itemsByPageId:r,pageNamesByPageId:n,itemsWithoutPage:i}}let m="0:1";function h(e,t,r,n){if(0!==r.length){if(1===Object.keys(e).length&&1===Object.keys(t).length){let t=Object.keys(e)[0];e[t].push(...r),r.splice(0,r.length)}else t[m]&&e[m]?(e[m].push(...r),r.splice(0,r.length)):n&&t[m]&&(e[m]=[...r],r.splice(0,r.length))}}let _=(e,t)=>{let r=[...e];if(t&&t.length&&e&&e.length){let n=e.length-t.length;for(let i=t.length-1;i>=0;--i)i+n<e.length&&e[i+n]===t[i]&&r.pop()}return r.length>0?r.join(" / ")+" /":""},g=(e,t,r,n)=>{var a,o;let l=[],s=new Map;for(let i of e)t&&(i.flattenedPath=t.concat(i.name||"").join(" / ")),r&&(i.breadcrumbPath=_(r,t)),n&&(i.stickyHeaderTokens=n.concat(i.name||"")),s.has(i.name||"")?(i.subtrees&&i.subtrees.length&&(null==(a=s.get(i.name||""))||a.subtrees.push(...i.subtrees)),i.items&&i.items.length&&(null==(o=s.get(i.name||""))||o.items.push(...i.items))):s.set(i.name||"",i);for(let e of s.values()){let a=t,o=r,s=n.concat(e.name||""),c=new Set;for(let t of e.subtrees)c.add(t.name);o=o.concat(e.name||""),"PAGE"!==e.type&&(0===e.items.length&&1===c.size?(e.skipElementsInRendering=!0,a=a.concat(e.name||"")):a=[]),e.subtrees=g(e.subtrees,a,o,s),(0,i.aV)(e.subtrees,"name"),l.push(e)}return l},f=(e,t)=>{(0,i.aV)(t,"name");let r=Object.create(null);for(let n of t){let t=(0,c.$N)(n.name),i="";for(let a=0;a<t.length;a++){let o;let l=t[a],s=i,c=a<t.length-1;if(i+=l+(c?"/":""),o=r[s]?r[s]:e,c&&!r[i]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};r[i]=e,o.subtrees.push(e)}c||o.items.push(n)}}},E=(e,t)=>{var r;let n={},i=[],o=[],l={};for(let e of t)if((0,a.BZ)().dse_templates_proto&&e.type===d.h3.COMPONENT&&(0,s.JY)(e))i.push(e);else if((0,s.wQ)(e)&&(null==(r=e.containing_frame)?void 0:r.nodeId)){let t=e.containing_frame.nodeId;n[t]=n[t]||[],n[t].push(e),l[t]=e.containing_frame}else o.push(e);if((0,a.BZ)().dse_templates_proto&&i.length>0){let t={type:"NAME_GROUP",name:"Templates",key:`${e.key}-${b}`,items:[],subtrees:[]};e.subtrees.push(t),f(t,i)}let c=Object.keys(n).length;if(c>0||1===c&&o.length){for(let t in n){let r=l[t],i=n[t],a={type:"NAME_GROUP",name:r.name||"",key:t,items:[],subtrees:[]};e.subtrees.push(a),f(a,i)}f(e,o)}else f(e,(0,a.BZ)().dse_templates_proto?t.filter(e=>!(0,s.JY)(e)):t)},y=(e,t)=>{let{itemsByPageId:r,pageNamesByPageId:n,itemsWithoutPage:a}=p(t,e=>e.type===d.h3.COMPONENT||e.type===d.h3.STATE_GROUP||e.type===d.h3.MODULE?e:null);h(r,n,a);let o=Object.keys(r);if((0,i.po)(o,e=>n[e]),o.length>1||1===o.length&&a.length){for(let t of o){let i=n[t],a={type:"PAGE",name:i,key:t,items:[],subtrees:[]};e.subtrees.push(a),E(a,r[t])}E(e,a)}else E(e,t);e.subtrees=g(e.subtrees,[],[],e.name?[e.name]:[]),(0,i.po)(e.subtrees,e=>e.name.trim())};function v({localLibraryItemsInfo:e,localTemplatesInfo:t,subscribedItemsInfo:r,subscribedTemplatesInfo:n,subscribedCommunityItemsInfo:s,defaultSubscribedItemsInfo:c,canPublish:d,approvedLibraryKeysByResourceType:u}){let p;let m={items:[],subtrees:[]},h={},{fileKeyToSubscribedItems:_,subscribedFiles:g}=r,f=[...g],E={};if((0,a.BZ)().dse_editor_templates_v1&&n)for(let e of(E=n.fileKeyToSubscribedItems,n.subscribedFiles))f.find(t=>t.key===e.key)||f.push(e);(0,a.BZ)().dse_editor_templates_v1&&t&&(p=w(m,t,d,1));let v=w(m,e,d,0),b=c.fileKeyToSubscribedItems,I=c.subscribedFiles;for(let e of I){let t=e.key,r=`defaultLibrary:${t}`,n={items:[],subtrees:[],key:r,name:(0,o.t)("design_systems.assets_panel.created_by_figma"),type:"FILE",isFilePublished:!0,sectionNameForTracking:"Default libraries",subscribedFileKey:t};y(n,b[t]),m.subtrees.push(n),h[t]=n}for(let e of((0,i.aV)(f,"name"),(0,l.dD)(u)&&(0,l.Vw)({libraries:f,approvedLibraryKeysByResourceType:u}),f)){let t=e.key,r=`subscribedComponents:${t}`,n={items:[],subtrees:[],key:r,name:e.name,type:"FILE",isFilePublished:!0,sectionNameForTracking:"Subscribed libraries",subscribedFileKey:t};if((0,a.BZ)().dse_editor_templates_v1){let t={items:[],subtrees:[],key:"templates",name:(0,o.t)("design_systems.assets_panel.templates"),type:"ASSET_TYPE"};E[e.key]&&(y(t,E[e.key]),n.subtrees.push(t));let r={items:[],subtrees:[],key:"components",name:(0,o.t)("design_systems.assets_panel.components"),type:"ASSET_TYPE"};_[e.key]&&y(r,_[e.key]),n.subtrees.push(r)}else y(n,_[e.key]);h[t]=n,m.subtrees.push(n)}if(s){let{hubFileIdToSubscribedItems:e,subscribedHubFiles:t}=s;for(let r of t){let t=r.id,n=`subscribedCommunityComponents:${t}`,i=r.versions[r.current_hub_file_version_id],a={items:[],subtrees:[],key:n,name:i.name,type:"FILE",isFilePublished:!0,sectionNameForTracking:"Subscribed community libraries",subscribedFileKey:t};y(a,e[t]),m.subtrees.push(a),h[t]=a}}return{tree:m,localSubtree:v,localTemplateSubtree:p,subscribedFileSubtrees:h}}let b="template-subtree";function I(e){return"NAME_GROUP"===e.type&&e.key.includes(b)}var T=((n=T||{})[n.COMPONENT=0]="COMPONENT",n[n.TEMPLATE=1]="TEMPLATE",n);function w(e,t,r,n){let{allItems:i,privateItems:a,numPublished:l}=t,s=l>0&&r,c=s&&a.length>0,d=function(e,t){let{allItems:r,publishedItems:n,privateItems:i,numPublished:a}=e,o=a>0&&t&&i.length>0;return o?n:r}(t,r),p={items:[],subtrees:[],key:0===n?"localComponents":"localTemplates",name:i.length>0?(0,o.t)(0===n?"design_systems.assets_panel.local_components":"design_systems.assets_panel.local_templates"):"",type:"FILE",sectionNameForTracking:0===n?"Local components":"Local templates",isFilePublished:s,stickyHeaderTokens:[]};e.subtrees.push(p);let m=!c&&(0,u.HU)(d);if(m?(E(p,d),p.subtrees=g(p.subtrees,[],[],p.name?[p.name]:[])):y(p,d),c){let e={items:[],subtrees:[],key:"privateToThisFile",name:(0,o.t)("design_systems.assets_panel.hidden"),type:"PAGE",sectionNameForTracking:0===n?"Local private components":"Local private templates",isFilePublished:s,stickyHeaderTokens:[]};y(e,a),p.subtrees.push(e)}return p}},891634:(e,t,r)=>{r.d(t,{M:()=>s});var n=r(652983),i=r(407908),a=r(111120),o=r(357231),l=r(396799);function s(e){let t=(0,i.I0)(),r=(0,l.o)();return n.useCallback(n=>{n.preventDefault(),n.stopPropagation(),t(a.SP({type:o.z,data:{component:e,position:{top:n.clientY,left:n.clientX},onJumpToLocalComponent:r}}))},[e,t,r])}},396799:(e,t,r)=>{r.d(t,{o:()=>u});var n=r(652983),i=r(407908),a=r(158774),o=r(961215),l=r(640723),s=r(424479),c=r(900710),d=r(60908);function u(e){let t=(0,i.v9)(c.LI);return n.useCallback(async r=>{t&&!(0,d.Br)(t,r)&&(e?o.iTB.goToSymbolOrStateGroupById(r,!1):await s.TSSceneGraph.instance.setCurrentPageFromNodeAsync(r),l.t4([r]),a.Gr.commit())},[e,t])}},56607:(e,t,r)=>{r.d(t,{X:()=>u});var n=r(652983),i=r(337167),a=r(451573);let o=(0,a.cg)(e=>e.library.published.components),l=(0,a.cg)(e=>e.library.published.stateGroups),s=(0,i.cn)(e=>{var t,r,n;let i={},a=e(o),s=e(l);for(let[e,o]of Object.entries(s))if(e&&o)for(let l of(i[e]={},Object.keys(o))){if(!l)continue;let o={},s=(null==(t=null==a?void 0:a[e])?void 0:t[l])??{};for(let e of Object.values(s)){let t=null==(n=null==(r=null==e?void 0:e.containing_frame)?void 0:r.containingStateGroup)?void 0:n.nodeId;t&&(o[t]=(o[t]??0)+1)}i[e][l]=o}return i});var c=r(961215),d=r(166885);function u(e){let t=(0,i.Dv)(s);return n.useMemo(()=>{var r,n;return e.type!==d.h3.STATE_GROUP?void 0:e.isLocal?c.iTB.getStateGroupNumVariants(e.node_id):e.team_id?null==(n=null==(r=t[e.team_id])?void 0:r[e.file_key])?void 0:n[e.node_id]:void 0},[e,t])}},403199:(e,t,r)=>{r.d(t,{OR:()=>G,e8:()=>H});var n=r(652983),i=r(407908),a=r(848080),o=r(87608),l=r.n(o),s=r(141757),c=r(172497),d=r(19516),u=r(204829),p=r(546829),m=r(518484),h=r(970740),_=r(824801),g=r(804089),f=r(667981),E=r(158774),y=r(961215),v=r(286658),b=r(587649),I=r(699072),T=r(17158),w=r(880381),S=r(352297),C=r(166885),O=r(225468),A=r(404977),N=r(409377),L=r(425285),P=r(621197),R=r(286198),k=r(304141);let D="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",M="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",F=(0,c.z)(k.HL),x=(0,c.z)(k.Jr);function U(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case void 0:return!1}}function B(e,t){switch(e){case"grid":case void 0:return t;case"list-compact":return"library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa";case"list":case"list-no-padding":return"library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa"}}function V(e,t,r){return n.useMemo(()=>{let n={};if(r)return{nameStyle:n,background:null};let i=(0,f.F3)(e,null);return i&&!U(t)&&(n.background=_.Z.format(i),n.color=(0,s.OO)(i)),{nameStyle:n,background:i}},[t,r,e])}function G(e){let{item:t}=e,{nameStyle:r,background:i}=V(e.item,e.displayType,e.noBackground),a=e.showName;return(e.hideNameOverlay||e.shouldShowNamePopout&&!U(e.displayType))&&(a=!1),n.createElement(W,{...e},n.createElement(K,{...e},n.createElement(z,{...e,backgroundColor:i,className:void 0,style:e.isDragged?void 0:e.style}),a&&n.createElement("div",{className:B(e.displayType,D),style:r},U(e.displayType)&&!e.isSearch?(0,I.rP)(t.name):t.name),e.item.type===C.h3.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&n.createElement(Y,{isList:U(e.displayType),numVariants:e.numVariants})))}function H(e){let t;let r=n.useRef(null);(0,d.O)(()=>{let t=({nodeId:t})=>{if(t===e.item.node_id&&r.current){let e=r.current.getBoundingClientRect();e.top<(0,p.kB)()+x?r.current.scrollIntoView():e.bottom>window.innerHeight-(0,p.kB)()&&r.current.scrollIntoView(!1)}};E.Gr.fromFullscreen.on("scrollToNode",t);let n=y.iTB&&y.iTB.getFirstSelectedNodeIdForCurrentPage();return n&&t({nodeId:n}),()=>{E.Gr.fromFullscreen.removeListener("scrollToNode",t)}});let i=e.item,a=e.isFilePublished&&(i.status===C.mk.NOT_STAGED||i.status===C.mk.DELETED),{nameStyle:o,background:l}=V(e.item,e.displayType,a);a&&(t="library_item_tile--privateComponentGrid--i5Mcx");let s=!e.hideNameOverlay&&(!e.shouldShowNamePopout||U(e.displayType));return n.createElement(W,{ref:r,...e,onMouseUp:g.UW,className:t},n.createElement(K,{...e},n.createElement(z,{...e,backgroundColor:l}),s&&n.createElement("div",{className:B(e.displayType,D),style:o,dir:"auto"},U(e.displayType)&&!e.isSearch?(0,I.rP)(i.name):i.name),e.selected&&!U(e.displayType)&&n.createElement("div",{className:"library_item_tile--selectionGrid--bBTZd"}),a&&!e.selected&&!U(e.displayType)&&n.createElement("div",{className:"library_item_tile--privateOutlineGrid--8EHIe"}),e.item.type===C.h3.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&n.createElement(Y,{isList:U(e.displayType),numVariants:e.numVariants})))}let W=n.memo(n.forwardRef(function(e,t){let r;let[i,a]=n.useState({popout:{},arrow:{}}),o=U(e.displayType),l=n.useRef(null),s=t||l,c=n.useRef(null),d=n.useCallback(()=>{if(s.current&&c.current){let e=s.current.getBoundingClientRect(),t=(e.top+e.bottom)/2,r=c.current.offsetHeight,n=(0,p.kB)()+6,i=window.innerHeight-r-6,o=t-r/2;o=Math.max(o=Math.min(o,i),n),a({popout:{left:e.right+9,top:o},arrow:{left:e.right,top:t}})}},[s]),u=e.height||120,m=e.width||120;u-=u%2,m-=m%2;let _=e.itemPadding??0;m+=2*_,u+=2*_;let g=o?e.style:{...e.style,width:m,height:u},f=(0,R.e)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:o});r="list-compact"===e.displayType?"library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":"list"===e.displayType?"library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":"list-no-padding"===e.displayType?"library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":e.isDragged?"library_item_tile--tile--okxBn":e.isFigJam?"library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn":e.useBaseTile?"library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt":"library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt";let E=e.item.type===C.h3.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,y=e.shouldShowNamePopout&&!o,v=!e.shouldHideDescription&&e.item.description,b=e.item.description||e.item.name&&e.shouldShowNamePopout&&!o;if(e.isFigJam)return n.createElement("div",{className:`${r} ${e.className||""}`,style:g,onMouseUp:e.onMouseUp,"data-tooltip":e.isDragged?void 0:(0,I.rP)(e.item.name),"data-tooltip-type":e.isDragged?void 0:O.fR.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove},e.children);if(e.shouldUseDescriptionTooltip&&f){let t=(v||y||E)&&!e.shouldHideTooltip;return n.createElement("div",{ref:s,className:`${r} ${e.className||""}`,style:g,onMouseUp:e.onMouseUp,"data-tooltip-type":t?O.fR.SPECIAL:void 0,"data-tooltip":t?O._7.COMPONENT_INFO:void 0,"data-tooltip-component-name":y?(0,I.rP)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":v?e.item.description:void 0,"data-tooltip-num-variants":E?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0},e.children)}return n.createElement("div",{ref:s,className:`${r} ${e.className||""}`,style:g,onMouseUp:e.onMouseUp,onMouseLeave:()=>{a({popout:{},arrow:{}})},onMouseEnter:d},e.children,b&&!e.shouldHideTooltip&&n.createElement("div",{className:"library_item_tile--descriptionPopoutContainer--zTKKF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",style:i.popout,ref:c,dir:"auto"},y&&n.createElement("div",{className:"library_item_tile--popoutContainerTitle--T3N8F"},(0,I.rP)(e.item.name)),E&&n.createElement("div",null,n.createElement(h.Tx,{id:"design_systems.assets_panel.variant_count",numVariants:e.numVariants})),v&&n.createElement("div",{className:y||E?"library_item_tile--descriptionMarginTop--U1MC0":void 0},e.item.description),n.createElement("div",{className:"library_item_tile--descriptionPopoutArrow--ZA3gV",style:i.arrow})))}));function K(e){var t,r,a,o;let l="whiteboard"===(0,L.fg)(),s=U(e.displayType),c=e.item.type===C.h3.MODULE,d=(0,T._)(),p=(0,i.v9)(e=>{var t;return null==(t=e.modalShown)?void 0:t.type}),h=n.useCallback(()=>{p===N.h&&d()},[p,d]),{onInsertableResourcePointerDown:_,dragState:g}=(0,b.$)({resource:e.item,isList:s,sourceForTracking:(null==(t=e.draggable)?void 0:t.sourceForTracking)||"",sectionNameForTracking:null==(r=e.draggable)?void 0:r.sectionNameForTracking,clickToInsert:!!(null==(a=e.draggable)?void 0:a.clickToInsert),afterSuccessfulInsert:null==(o=e.draggable)?void 0:o.afterSuccessfulInsert,draggingThumbMaxDimensions:c?void 0:new m.OW((e.width||0)-F,(e.height||0)-F),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:p===N.h,onDragStart:h}),f=`componentThumb.${e.recordingNodePath}`,E=u.Wn(f,"contextmenu",t=>{e.onContextMenu&&e.onContextMenu(t)},{recordMetadata:e=>{let t=e.currentTarget,r=t.getBoundingClientRect(),n=new m.OW(r.left,r.top),i=new m.OW(e.clientX,e.clientY),a=i.subtract(n),o=new m.OW(a.x/r.width,a.y/r.height);return{percentageMousePos:o}},playbackMetadata:t=>{let r=e.height||0,n=e.width||0,i=0+t.percentageMousePos.x*n,a=0+t.percentageMousePos.y*r;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:r,width:n})},clientX:i,clientY:a}}}),y=u.Wn(f,"click",t=>{e.onItemClick&&e.onItemClick(t,e.item)});return n.createElement(n.Fragment,null,n.createElement("div",{className:l&&g?"library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH":"library_item_tile--thumbAndNameWrapper--FT1HH",style:{padding:e.itemPadding},onPointerDown:t=>{e.draggable&&_(t)},onContextMenu:E,onDoubleClick:t=>{e.onItemDoubleClick&&e.onItemDoubleClick(t,e.item)},onClick:y,"data-testid":f},e.children),n.createElement(v.L,{dragState:g,isList:s}))}function z({displayType:e,item:t,isDragged:r,isFigJam:i,backgroundColor:o,shouldShowShadowOnHover:s,height:c=120,width:d=120,noBackground:u,style:p,alwaysShowBorder:m}){let h;let g=n.useContext(S.fd),{version:f}=(0,a.Fg)(),E=c-c%2,y=d-d%2,v=U(e);h=v?u?"library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6":"library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6":u||i?"library_item_tile--thumbWrapperNoBg--dq7A6":`${M} ${M}`;let b={width:2*y,height:2*E,padding:i?0:F,...p};return u||!o||i||(m||(b.boxShadow=(0,S.Dd)(g,o,"ui3"===f)),b.background=_.Z.format(o)),r&&(v?(b.width=void 0,b.height=void 0):b.background=void 0),n.createElement("div",{className:"library_item_tile--thumbContainer--7rKmQ",style:r&&v?void 0:{width:y,height:E}},n.createElement("div",{className:l()(`${h} ${h||""}`,{"library_item_tile--tileBorder--clelb":m}),style:b},t.type===C.h3.VARIABLE_SET?n.createElement(Z,{variableSetID:t.node_id}):n.createElement(A.S,{className:s?"library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO":i?"library_item_tile--thumb--MNoWO":"library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",item:t,shouldGenerateLocalThumbnail:!0,draggable:!1})))}let Z=n.memo(function({variableSetID:e}){let t=(0,i.v9)(e=>(0,w.lU)(e)),r=n.useMemo(()=>{let r=new Set;for(let n of Object.values(t))if(n.variableSetId===e&&(r.add(n.resolvedType),r.size>=3))break;return[...r.values()]},[t,e]),a=(r.length-1)/2;return n.createElement("div",{className:"library_item_tile--variableSetThumb--cCo2-"},r.map((e,t)=>n.createElement("div",{className:"library_item_tile--variableTypeIcon--58dL0",key:e,style:{marginTop:(a-t)*20}},n.createElement(P.b,{type:e,showTooltip:!1}))))});function Y({isList:e,numVariants:t}){return t<=1?null:n.createElement("div",{className:e?"library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu":"library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu","data-tooltip":(0,h.t)("design_systems.assets_panel.variant_count",{numVariants:t}),"data-tooltip-type":O.fR.TEXT,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0},t)}},860577:(e,t,r)=>{r.d(t,{F1:()=>i,fV:()=>a,h0:()=>n});let n="root",i=40,a=300},248908:(e,t,r)=>{r.d(t,{IH:()=>I,yT:()=>b});var n=r(652983),i=r(407908),a=r(448501),o=r(131826),l=r(322186),s=r(733609),c=r(413810),d=r(465151),u=r(166885),p=r(291904),m=r(553344),h=r(600975),_=r(123512),g=r(414061),f=r(195544),E=r(748116),y=r(387795);let v=n.memo(function({initialTab:e,teamId:t,initialUpdatesModalScope:r}){let s=(0,i.v9)(e=>e.selectedView),d=(0,i.v9)(e=>(0,c.x_)(e)),u=(0,i.v9)(e=>e.openFile),p=(0,l.Ng)(),m=new URLSearchParams(a.default.location.search),h=m.get("teamToMoveFileToOnNavigate");return n.createElement(o.Ui,{name:"Library Preference Modal",properties:{fileKey:null==u?void 0:u.key,fileTeamId:null==u?void 0:u.teamId,teamId:"team"===s.view&&s.teamId,orgId:null==p?void 0:p.id,inPublishDraftExp:!!h}},d?n.createElement(T,null):"fullscreen"===s.view&&"whiteboard"!==s.editorType?n.createElement(_.s,{initialTab:e,initialUpdatesModalScope:r}):"team"===s.view?n.createElement(w,{initialTab:e,teamId:s.teamId}):t?n.createElement(w,{initialTab:e,teamId:t}):void 0)}),b=(0,p.Y3)(v,u.fD),I=(0,p.Y3)(function(){return n.createElement(v,{initialTab:u.ZB.FONTS})},u.Xj);function T(){let e=(0,f.mR)();return n.createElement(g.y,{width:e,title:n.createElement(y.H,{availableTabs:[u.ZB.LIBRARIES],selectedTab:u.ZB.LIBRARIES})},n.createElement(E.s,null,n.createElement(m.m,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,showingDefaultSubscriptionsForOrg:null,width:e})))}function w({initialTab:e,teamId:t}){let r=(0,i.I0)(),a=(0,i.v9)(e=>e.sharedFonts),o=(0,i.v9)(e=>(0,d._)(e)),l=(0,i.v9)(e=>(0,s.canAdminOrg)(e.currentUserOrgId,e)),c=(0,s.usePermissionsState)(),p=n.useMemo(()=>{let e=[u.ZB.LIBRARIES];return o&&e.push(u.ZB.FONTS),e},[o]),{selectedTab:_,setSelectedTab:v}=(0,f.T7)(p,e),b=(0,f.mR)(o);return n.createElement(g.y,{width:b,title:n.createElement(y.H,{availableTabs:p,selectedTab:_,setSelectedTab:v})},n.createElement(E.s,{showSharedFonts:o},_===u.ZB.LIBRARIES&&n.createElement(m.m,{showingDefaultSubscriptionsForTeamId:t,showingDefaultSubscriptionsForUser:!1,showingDefaultSubscriptionsForOrg:null,width:b}),_===u.ZB.FONTS&&n.createElement(h.B,{dispatch:r,teamId:t,width:b,resourceType:"team",useModalViewComponent:!0,canAdminOrg:l,permissionsState:c,sharedFonts:a})))}},785880:(e,t,r)=>{r.d(t,{Di:()=>g,sF:()=>h});var n=r(652983),i=r(407908),a=r(716250),o=r(782051),l=r(435613),s=r(970740),c=r(809377),d=r(847059),u=r(482919),p=r(939872);let m=r(85429);function h({variableSet:e,modeDropdownStyle:t,fileKey:r,entity:a,defaultModeId:o,isLibraryFileEnabled:l}){var p,m;let h=(0,i.I0)(),g=(0,c.L)(),f="auto_inherit_mode_string",E=e.modes?e.modes[0].name:"",y=n.useMemo(()=>({name:(0,s.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:E}),id:f}),[E]),v=o?null==(p=e.modes)?void 0:p.find(e=>e.id===o):y,[b,I]=(0,n.useState)(v),T=n.useMemo(()=>{var t;if((null==b?void 0:b.id)===f)return y;let r=null==(t=e.modes)?void 0:t.find(e=>e.id===(null==b?void 0:b.id));return r},[e,b,y]),w=n.useCallback(t=>{I(t),t.id===f?d.M.deleteDefaultMode({fileKey:r,entityType:a.entityType,entityId:a.entityId,variableSetKey:e.key}):d.M.setDefaultMode({fileKey:r,entityType:a.entityType,entityId:a.entityId,variableSetKey:e.key,defaultModeId:t.id}).catch(e=>{I(b)})},[b,r,a.entityType,a.entityId,e.key]);return e.modes&&1!==e.modes.length&&a&&v?n.createElement(u.Ph,{id:`subscription-dropdown-${e.id}`,property:T,dispatch:h,dropdownShown:g,onChange:w,formatter:_,dropdownWidth:150,className:t,disabled:!l},n.createElement(u.Wx,{value:y},(0,s.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:E})),n.createElement(u.Hz,null),null==(m=e.modes)?void 0:m.map(e=>n.createElement(u.Wx,{key:e.id,value:e},_.format(e)))):n.createElement("div",{className:t})}let _={format:e=>e.name};function g({forBestMatches:e,variableSets:t,shouldDisplayDefaultModeDropdown:r,fileKey:i,entity:c,isLibraryFileEnabled:u}){let[_,g]=(0,n.useState)({}),[f,E]=(0,n.useState)(!1);if(!t||0===t.length)return null;r&&(r=t.some(e=>e.modes&&e.modes.length>1));let y=(0,a.BZ)().ds_workspace_team_default_modes&&!f&&r&&c&&i;return(y&&d.M.getDefaultModes({fileKey:i,entityType:c.entityType,entityId:c.entityId}).then(e=>{g(e.data.meta),E(!0)}).catch(()=>{E(!0)}),y)?n.createElement(o.jz,null):n.createElement("div",null,!e&&n.createElement("div",{className:p.Fs},n.createElement("div",{className:p.PS},n.createElement(s.Tx,{id:"design_systems.libraries_modal.header_variable_collections"})),(0,a.BZ)().ds_workspace_team_default_modes&&r&&n.createElement("div",{className:p.PS},n.createElement(s.Tx,{id:"design_systems.libraries_modal.header_default_mode"}))),n.createElement("div",{className:e?p.K9:p.YS},t.map(t=>n.createElement("div",{className:p.rJ,key:t.id},e?n.createElement(n.Fragment,null,n.createElement(l.n,{className:p.Fd,svg:m}),n.createElement("span",{className:p.u2},t.name),t.numVariableMatches&&n.createElement("span",{className:p.BG},n.createElement(s.Tx,{id:"design_systems.libraries_modal.plural.num_variable_match",numVariables:t.numVariableMatches}))):n.createElement("div",{className:p.GC},n.createElement("span",{className:p.u2},t.name),r&&c&&i&&(0,a.BZ)().ds_workspace_team_default_modes&&n.createElement(h,{variableSet:t,modeDropdownStyle:p.Sw,fileKey:i,entity:c,defaultModeId:_[t.key],isLibraryFileEnabled:u})||n.createElement("div",{className:p.Sw}),n.createElement("span",{className:p.BG},n.createElement(s.Tx,{id:"design_systems.libraries_modal.plural.num_variables",numVariables:t.numVariables})))))))}},236893:(e,t,r)=>{r.d(t,{BA:()=>s,DC:()=>C,IE:()=>c,Kq:()=>O,PO:()=>A,Tc:()=>b,WQ:()=>S,Wv:()=>w,Zh:()=>u,bY:()=>d,dA:()=>v,gc:()=>f,mb:()=>g,ot:()=>E,rt:()=>m,zO:()=>p});var n=r(600486),i=r(46347),a=r(961215),o=r(699072),l=r(166885);let s=(e,t)=>{let r={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:t};return e.forEach(e=>{let n=r,i=(0,o.$N)(e.name);i.pop(),i.forEach(e=>{let r=n.name?n.name+"/"+e:e,i=n.subfolders.find(e=>e.name===r);if(!i){let e={name:r,type:"STYLE_FOLDER",level:n.level+1,styles:[],subfolders:[],styleTypeSection:t};n.subfolders.push(e),i=e}n=i}),n.styles.push(e)}),r},c=e=>{if(!e.length)return[];let t=s(e,e[0].style_type),r=[],n=e=>{e.styles.length>0&&r.push(e.name),e.subfolders.forEach(n)};return n(t),r},d=e=>{let t=[...e.subfolders].reverse(),r=[...e.styles];for(;t.length>0;){let e=t.pop();e&&(r.push(e),r.push(...e.styles),t.push(...[...e.subfolders].reverse()))}return r},u=e=>"STYLE_FOLDER"===e.type?e.name:e.node_id,p=e=>e.split("/").filter(e=>e).map(e=>e.trim()).join("/"),m=(e,t)=>{let r=t[e];if("STYLE_FOLDER"!==r.type)return[];let n=[];for(let[i,a]of t.slice(e+1).entries()){if("STYLE_FOLDER"===a.type&&a.level<=r.level)break;n.push(e+1+i)}return n},h=e=>"STYLE_FOLDER"===e.type?e.name:(0,o.ce)(e.name),_=(e,t)=>{let r=g(e),n=new Set(t.filter(e=>e.type===l.h3.STYLE).map(e=>e.node_id)),i=r[0];return r.forEach(e=>{e.sort_position&&i.sort_position&&e.sort_position<i.sort_position&&n.has(e.node_id)&&(i=e)}),i},g=e=>d(e).filter(e=>e.type===l.h3.STYLE),f=e=>d(e).filter(e=>"STYLE_FOLDER"===e.type),E=e=>{let t=[];return e.forEach(e=>{"STYLE_FOLDER"===e.type?t.push(...g(e)):t.push(e)}),t},y=e=>{let t=[];return e.styles.forEach(e=>{t.push(e)}),e.subfolders.forEach(e=>{t.push(e),t.push(...y(e))}),t},v=(e,t)=>{let r=b(e,t),n=[];return r.forEach(e=>{let r=t[e];r&&n.push(r)}),n},b=(e,t)=>{let r=[],n=t.map(e=>e.type===l.h3.STYLE?e.node_id:null),i=t.map(e=>"STYLE_FOLDER"===e.type?e.name:null);return e.styleIds.forEach(e=>{let t=n.indexOf(e);-1!==t&&r.push(t)}),e.folderNames.forEach(e=>{let t=i.indexOf(e);-1!==t&&r.push(t)}),r.sort((e,t)=>e-t),r},I=(e,t,r,n)=>{if(!e)return -1;if(!t)return r.length-1;let a=r.map(e=>e.node_id);if(e.type===l.h3.STYLE&&"STYLE_FOLDER"===t.type){let t=a.indexOf(e.node_id);return t}{let e=n.indexOf(t),o=n.slice(e,n.length).find(e=>e.type===l.h3.STYLE);if(!o)return r.length-1;let s=a.indexOf(o.node_id);return(0,i.q8)(-1!==s,"style to insert before does not exist in the stored list"),s-1}},T=(e,t,r,n)=>{if(!e)return n.some(e=>e.type===l.h3.STYLE&&""===(0,o.ce)(e.name))?null:-1;if(!t)return r.length-1;let a=r.map(e=>e.node_id);if(e.type===l.h3.STYLE&&t.type===l.h3.STYLE||"STYLE_FOLDER"===e.type&&t.type===l.h3.STYLE)return null;if(e.type===l.h3.STYLE&&"STYLE_FOLDER"===t.type&&w(e)===w(t)){let r=a.indexOf(e.node_id),i=_(t,n),o=a.indexOf(i.node_id);return r<o?r:o-1}{let o=n.indexOf(t);if(-1!==o){let e=n.slice(o,n.length).find(e=>e.type===l.h3.STYLE);if(!e)return r.length-1;let t=a.indexOf(e.node_id);return(0,i.q8)(-1!==t,"style to insert before does not exist in the stored list"),t-1}{let t=n.indexOf(e),o=n.slice(t+1).reverse().find(e=>e.type===l.h3.STYLE);if(!o)return r.length-1;let s=a.indexOf(o.node_id);return(0,i.q8)(-1!==s,"style to insert after does not exist in the stored list"),s}}},w=e=>e.type===l.h3.STYLE?(0,o.$N)(e.name).length:e.level,S=(e,t)=>{e.file_key===t&&(a.iTB.deleteNode(e.node_id),(0,n.L9)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))},C=(e,t)=>{e.styles.forEach(e=>{S(e,t)}),e.subfolders.forEach(e=>{C(e,t)})},O=(e,t,r,n)=>{if(!e&&!r||!t)return!1;let i=!n&&""!==n||"STYLE_FOLDER"===t.type&&r===t&&(null==e?void 0:e.type)===l.h3.STYLE&&w(e)>w(r)&&n!==(0,o.ce)(t.name);return!(e===t||r===t&&(t.type===l.h3.STYLE||!i)||"STYLE_FOLDER"===t.type&&((null==e?void 0:e.type)===l.h3.STYLE&&(null==r?void 0:r.type)===l.h3.STYLE||(null==e?void 0:e.type)==="STYLE_FOLDER"&&(null==r?void 0:r.type)===l.h3.STYLE||e&&(h(e)+"/").startsWith(t.name+"/")||r&&(h(r)+"/").startsWith(t.name+"/")&&!i))},A=(e,t,r,n,i,s,c)=>{if(e.forEach(e=>{L(i=N([e],i),s)&&(s=P(e,i,s))}),!i)return;let d=new Set(e.map(e=>"STYLE_FOLDER"===e.type||c?T(t,r,s,i):I(t,r,s,i)));if(d.size>1||d.has(null))return;let u=d.values().next().value,p=s[u],m=s[u+1],h=new Map,_=p;for(let t of e){let e=t=>{t.type===l.h3.STYLE?(a.iTB.insertStyleBetween(t.node_id,(null==_?void 0:_.node_id)||"",(null==m?void 0:m.node_id)||""),_=t):(t.styles.forEach(t=>{e(t)}),t.subfolders.forEach(t=>{e(t)}))};e(t);let r=""===n?[]:n.split("/"),i=[...r,(0,o.rP)(t.name)];if(i.join("/")!==t.name){let e=(t,r)=>{if(t.type===l.h3.STYLE){let e=[...r,(0,o.rP)(t.name)].join("/");h.set(t.node_id,e),a.iTB.renameNode(t.node_id,e)}else h.set(t.name,r.join("/")),t.styles.forEach(t=>{e(t,r)}),t.subfolders.forEach(t=>{let n=(0,o.rP)(t.name),i=[...r,n];e(t,i)})};e(t,"STYLE_FOLDER"===t.type?i:r)}else h.set("STYLE_FOLDER"===t.type?t.name:t.node_id,t.name)}return h},N=(e,t)=>{let r=new Set,n=new Set;for(let t of e){let e=t.type===l.h3.STYLE?[t]:y(t).concat([t]);e.forEach(e=>e.type===l.h3.STYLE?n.add(e.node_id):r.add(e.name))}return t.filter(e=>"STYLE_FOLDER"===e.type?!r.has(e.name):!n.has(e.node_id))},L=(e,t)=>{let r=e.filter(e=>e.type===l.h3.STYLE).map(e=>e.node_id),n=[];t.forEach(e=>{r.indexOf(e.node_id)>-1&&n.push(e)});let i=e[0],a=i.type===l.h3.STYLE?i.style_type:i.styleTypeSection,o=s(n,a),c=d(o).filter(e=>e.type===l.h3.STYLE);for(let e=0;e<r.length;e++)if(r[e]!==c[e].node_id)return!0;return!1},P=(e,t,r)=>{let n=(0,o.$N)(e.name);e.type===l.h3.STYLE&&n.pop();let i=t.filter(e=>e.type===l.h3.STYLE),s=[];for(;n.length;){let e=n.join("/");if(0===(s=i.filter(t=>(0,o.ce)(t.name).startsWith(e))).length)n.pop();else break}if(s.length){let t,n=s[0];s.forEach(e=>{null!=e.sort_position&&null!=n.sort_position&&e.sort_position<n.sort_position&&(n=e)}),t=e.type===l.h3.STYLE?e:g(e)[0];let i=r.indexOf(t),o=r[i-1],c=r[i+1];a.iTB.insertStyleBetween(n.node_id,(null==o?void 0:o.node_id)||"",(null==c?void 0:c.node_id)||"");let d=[...r];return d.splice(d.indexOf(n),1),d.splice(d.indexOf(o)+1,0,n),d}return r}},523945:(e,t,r)=>{r.d(t,{hg:()=>g,lt:()=>f});var n=r(652983),i=r(924620),a=r(626650),o=r(337167),l=r(925705),s=r(200273),c=r(485091),d=r(161939),u=r(5453),p=r(769865),m=r(862610);let h=(0,o.xu)(e=>p.cp.LibraryModuleData({fileKey:e})),_=(0,o.xu)(e=>(0,o.cn)(t=>{let r={};for(let n of e)r[n]=t((0,m.LibraryModuleData)({fileKey:n}));return r}),u.Vg);function g(){let e=(0,d.xZ)(),t=(0,a.O4)(()=>{var t;return(null==(t=e.data)?void 0:t.map(e=>e.fileKey))??[]},[e.data]);return function(e){let t=(0,n.useMemo)(()=>_(e),[e]),r=(0,o.Dv)(t);return(0,a.O4)(()=>{let e=l.IE.all(Object.values(r));return"loaded"!==e.status?e.transform(()=>({})):l.IE.loaded(Object.fromEntries(Object.entries(r).map(([e,t])=>[e,E(t)])))},[r])}(t)}function f(){let e=(0,s.uC)(),t=(0,n.useMemo)(()=>e?h(e):(0,o.cn)(null),[e]),r=(0,o.Dv)(t);return(0,n.useMemo)(()=>{let e=null!=r?l.IE.from(r):void 0;return E(e)},[r])}function E(e){var t;if((null==e?void 0:e.status)!=="loaded")return[];let r=e.data.file;if((null==r?void 0:r.status)!==i.wy.Loaded)return[];let n=r.data;return(null==(t=null==n?void 0:n.modules)?void 0:t.status)!==i.wy.Loaded?[]:n.modules.data.map(e=>(0,c.nX)(e,n))}},181809:(e,t,r)=>{r.d(t,{x:()=>d});var n=r(652983),i=r(63730),a=r(407908),o=r(680356),l=r(111120),s=r(13155),c=r(512169);function d(e){let t=(0,a.I0)(),r=n.useMemo(()=>e||(0,o.k)(),[e]),d=(0,a.v9)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===r}),u=n.useMemo(()=>document.createElement("div"),[]);n.useEffect(()=>(document.body.appendChild(u),()=>{document.body.removeChild(u)}),[u]);let p=n.useRef(null),m=i.findDOMNode(p.current),h=(null==m?void 0:m.getBoundingClientRect())||null,_=e=>{e.callback&&e.callback("",null,t)};return{toggleDropdown:()=>{d?t(l.kp()):t(l.SP({type:r}))},dropdownTargetRef:p,Dropdown:function(e){let r=(0,s.bR)(e);return n.createElement(n.Fragment,null,d&&h&&i.createPortal(n.createElement(c.z,{parentRect:h,dispatch:t,onSelectItem:_,...e,...r}),u))},isDropdownShown:d}}},220152:(e,t,r)=>{r.d(t,{QJ:()=>J,fV:()=>ee,xM:()=>U});var n,i,a,o=r(652983),l=r(848080),s=r(87608),c=r.n(s),d=r(115664),u=r(686926),p=r(600486),m=r(938414),h=r(46347),_=r(9247),g=r(337167),f=r(571529),E=r(362886),y=r(746443),v=r(546829),b=r(510570),I=r(970740),T=r(45547),w=r(961215),S=r(271774),C=r(464368),O=r(941485),A=r(403877),N=r(435804),L=r(831271),P=r(849146),R=r(813673),k=r(551813),D=r(984754),M=r(782513),F=r(846209),x=r(476423);let U=5;var B=((n=B||{})[n.Default=0]="Default",n[n.Mobile=1]="Mobile",n[n.Prototype=2]="Prototype",n);let V=(e,t)=>{let r=(0,S.QF)(),n=(0,v.Kp)(),i=(0,C.nh)("showUi"),a="ui3"===(0,l.Fg)().version,s=function({isUI3:e,prototypeHeaderHidden:t,showUi:r,style:n,toolbarHeight:i}){if(e)return 0;switch(n){case 0:case 1:return r?i:0;case 2:return t?0:i;default:(0,h.vE)(n)}}({isUI3:a,prototypeHeaderHidden:t,showUi:i,style:e,toolbarHeight:n});return o.useMemo(()=>({left:r.x,top:s,width:r.width}),[r,s])},G=e=>{let t;let r=(0,S.QF)(),n=r.y;switch(e){case 1:t=4;break;case 2:t=n;break;case 0:t=2*U}return o.useMemo(()=>({left:r.x,top:n,width:r.width-(0===e?2*U:0),height:r.height-t}),[r,e,n,t])},H=(e,t)=>{let r;let n=G(t),i=0;switch(t){case 0:r={borderWidth:U},i=U;break;case 1:r={borderTopWidth:4},i=4;break;case 2:r={}}return o.useMemo(()=>({style:{...n,...r,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${i}px`},borderInfo:{width:i,color:e}}),[e,n,r,i])};function W(e){let{children:t,prototypeHeaderHidden:r}=e,n=(0,N.fh)(),i=0;"prototype"===n?i=2:f.s2&&(i=1);let a=V(i,r||!1),l=2===i?x.Dh:void 0,s=2===i&&r?x.nL:void 0;return o.createElement("div",{className:c()(x.XA,l,s),style:a},t)}function K(){let{style:e,borderInfo:t}=o.useContext(M.R);return e={...e,borderColor:t.color},o.createElement("div",{className:c()(x.sd),style:e})}function z(){let{style:e,borderInfo:t}=o.useContext(M.R);return e={...e,color:"brand"===t.color?"var(--color-bg-brand)":t.color,"--borderColorTransitionDurationSeconds":`${F.A8}s`},o.createElement("div",{className:x.sd,style:e})}function Z(e){let{children:t,colorOverride:r,overlayStatus:n}=e,i=(0,O._h)(),a=(0,O.n2)(),l=(0,O.SR)(),s=(0,N.fh)(),c=0;"prototype"===s?c=2:f.s2&&(c=1);let d=(()=>{if(r)return r;if(n){let{self:e,others:t}=n;return"none"!==e?"brand":"following"===t&&"none"===e?(null==i?void 0:i.color)??"transparent":"transparent"}{let e=a&&(null==l?void 0:l.sessionID)===(null==a?void 0:a.sessionID);return e?(null==l?void 0:l.color)??"transparent":(null==i?void 0:i.color)??"transparent"}})(),u=H(d,c);return o.createElement(M.R.Provider,{value:u},t)}var Y=((i=Y||{}).PRESENTING="presenting",i.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",i.SHOWING_EXPLAINER="showing_explainer",i.NONE="none",i),j=((a=j||{}).PENDING_AUTO_FOLLOW="pending_auto_follow",a.FOLLOWING="following",a.PROMPT_TO_REJOIN="prompt_to_rejoin",a.NONE="none",a);function $(){let e=(0,N.fh)();return"prototype"!==e}function q(e,t){let r=(0,_.D)(e),n=(0,_.D)(t),i=o.useRef(performance.now());return o.useEffect(()=>{if("presenting"===e){let e=m.xb.tryStop("start_spotlight");e&&(0,p.L9)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("pending_auto_follow"===t){let e=m.xb.tryStop("join_spotlight");e&&(0,p.L9)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===t){let e=m.xb.tryStop("start_following");e&&(0,p.L9)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,t]),(e!==r||t!==n)&&(i.current=performance.now()),{statusChangedAt:i.current}}function X(e){let{multiplayer:t,prototypeHeaderHidden:r}=e,n=(0,O.SR)(),i=(0,O.n2)(),a=(0,O._h)(),l=(0,O.Po)(),s=(0,A.s)(),c=(0,E.wt)(),p=(0,E.H1)(),m=(0,E.L3)(),[_,f]=o.useState(!1);o.useEffect(()=>{f(!1)},[null==i?void 0:i.sessionID]),o.useEffect(()=>{(null==a?void 0:a.sessionID)===(null==i?void 0:i.sessionID)&&f(!1)},[null==a?void 0:a.sessionID,null==i?void 0:i.sessionID]);let{isAutoFollowPending:v,cancelAutoFollowCallback:S,completeAutoFollowCallback:C,observeCurrentPresenter:L,autoFollowType:P,autoFollowDelayMs:R}=(0,O.l1)(e),{isWaitingForFirstFollower:M,stopPresenting:x}=function(e){let[t,r]=o.useState(!1),n=e.followerCount,[i,a]=(0,g.KO)(y.bH);0===n||t||r(!0);let l=(0,E.kk)(e)||i;(0,E.kk)(e)&&i&&a(!1),!l&&t&&r(!1);let s=l&&0===n&&!t,c=(0,A.s)(),d=(0,N.fh)(),u=o.useCallback(()=>{var e;c(A.d.STOP),"prototype"===d?null==(e=(0,b.f3)())||e.stopPresenting():w.B9x.stopPresenting()},[c,d]),p=o.useCallback(()=>!!s&&(u(),!0),[u,s]);return(0,T.jI)(p,T.Yw.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:s,stopPresenting:u}}(t),U=(0,g.Dv)(y.Bh),B=(0,g.Dv)(y.bH),V=function(e){let{multiplayer:t,showingExplainer:r,isPendingPresenting:n}=e;return(0,E.kk)(t)||n?"presenting":r?"showing_explainer":(0,E.ik)(t)?"prompt_to_accept_nomination":"none"}({multiplayer:t,showingExplainer:U,isPendingPresenting:B}),G=function(e){let{multiplayer:t,isAutoFollowPending:r,presenterUser:n,suppressRejoinPrompt:i}=e;return r?"pending_auto_follow":(0,E.PG)(t)?"following":n&&!i?"prompt_to_rejoin":"none"}({multiplayer:t,isAutoFollowPending:v,presenterUser:i,suppressRejoinPrompt:_}),{statusChangedAt:H}=q(V,G),[K,Y]=function(e,t){switch(e){case"presenting":if("following"===t||"prompt_to_rejoin"===t)return[e,"none"];return[e,t];case"prompt_to_accept_nomination":if("pending_auto_follow"===t)return["none",t];return[e,"none"];case"showing_explainer":case"none":return[e,t];default:(0,h.vE)(e)}}(V,G),j=o.useCallback(()=>{f(!0),S(),s(A.d.IGNORE)},[S,s]),X=P===O.KM.INITIAL,J=o.useCallback(()=>"pending_auto_follow"===Y&&!!v&&P===O.KM.INITIAL&&(S(),!0),[P,S,v,Y]);(0,T.jI)(J,T.Yw.MULTIPLAYER_SPOTLIGHT);let Q=$(),ee="showing_explainer"===K,et="none"!==K,er="none"!==Y,en=["presenting","prompt_to_accept_nomination","showing_explainer"].includes(K)||["following"].includes(Y),[ei,ea]=(0,g.KO)(y.hk);return en!==ei&&ea(en),o.createElement(Z,{overlayStatus:{self:K,others:Y}},o.createElement(d.M,null,en&&o.createElement(u.E.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.A8}},o.createElement(z,null))),o.createElement(d.M,null,et&&o.createElement(u.E.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.A8}},o.createElement(W,{prototypeHeaderHidden:r},(()=>{switch(K){case"presenting":if(null===n)return null;if(M){let e=o.createElement(I.Tx,{id:"collaboration.spotlight.bell.presenter.waiting_for_followers"}),t=(0,I.t)("collaboration.spotlight.bell.presenter.cancel");return o.createElement(D.h,{color:"brand",message:{text:e},renderKey:`${n.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:t,onClick:x}})}return o.createElement(D.h,{color:"brand",message:{text:o.createElement(k.y,{count:t.followerCount})},renderKey:`${n.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,I.t)("collaboration.spotlight.bell.presenter.stop"),onClick:x},docked:Q});case"prompt_to_accept_nomination":if(!n||!l)return null;return o.createElement(D.h,{color:"brand",useSecondaryColor:!0,message:{text:o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.nominated",nominatorName:l.name})},renderKey:`${n.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,I.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{c(t)}},showCloseButton:!0,onCloseCallback:()=>{p(n.sessionID,t)}});case"showing_explainer":if(null===n)return null;let e=i?o.createElement(I.Tx,{id:"collaboration.spotlight.bell.explainer.takeover",currentPresenter:null==i?void 0:i.name}):o.createElement(I.Tx,{id:"collaboration.spotlight.bell.explainer"});return o.createElement(D.h,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${t.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"none":return null;default:(0,h.vE)(K)}})()))),o.createElement(d.M,null,er&&o.createElement(u.E.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.A8}},o.createElement(W,{prototypeHeaderHidden:r},(()=>{switch(Y){case"pending_auto_follow":{if(!i)return null;let e=i.name,t=X?{text:o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",presenterName:e}),onClick:C}:{text:o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.switching_to_new_presenter",presenterName:e})},r=X?{text:(0,I.t)("collaboration.spotlight.bell.follower.not_now"),onClick:j}:null;return o.createElement(D.h,{color:null==i?void 0:i.color,message:t,renderKey:`${i.sessionID}`,progressBar:X,progressBarDurationMs:R||0,autoHide:!1,button:r,ghost:ee})}case"following":{let e=t.observingSessionID===t.presenterSessionID;if(null===a)return null;let r=(null==a?void 0:a.name)||"",n=e?o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.spotlight_on_presenter",observedUserName:r}):o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.following_non_presenter",observedUserName:r}),i={text:e?(0,I.t)("collaboration.spotlight.bell.stop_following"):(0,I.t)("collaboration.spotlight.bell.stop"),onClick:()=>m(t)};return o.createElement(D.h,{color:null==a?void 0:a.color,message:{text:n},renderKey:`${t.observingSessionID}`,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:i,docked:Q,ghost:ee})}case"prompt_to_rejoin":let e=()=>(0,E.AA)(L,t,"Spotlight Rejoined",H);if(null!==a||null===i)return null;let r=o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",presenterUserName:i.name}),n=(0,I.t)("collaboration.spotlight.bell.follower.follow");return o.createElement(D.h,{color:null==i?void 0:i.color,message:{text:r,onClick:e},renderKey:`${i.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:n,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,E.AA)(()=>f(!0),t,"Spotlight Rejoin Dismissed",H),useSecondaryColor:!0,ghost:ee});case"none":return null;default:(0,h.vE)(Y)}})()))))}function J(e){let{multiplayer:t,prototypeHeaderHidden:r}=e,n=(0,O.GH)(),i=(0,O.iq)(),a=-1!==t.observingSessionID;return((0,O.ET)({multiplayer:t}),(0,O.S7)({multiplayer:t}),i)?null:n?o.createElement(X,{multiplayer:t,prototypeHeaderHidden:r}):a?o.createElement(Q,{multiplayer:t,prototypeHeaderHidden:r}):null}function Q(e){let{multiplayer:t,prototypeHeaderHidden:r}=e,n=(0,O._h)();q("none","following");let i=`${t.observingSessionID}`,a=o.useMemo(()=>{let e=(null==n?void 0:n.name)||"",t=o.createElement(I.Tx,{id:"collaboration.spotlight.bell.follower.following_non_presenter",observedUserName:e});return{text:t}},[n]),l=$();return null===n?null:o.createElement(Z,null,o.createElement(K,null),o.createElement(W,{prototypeHeaderHidden:r},o.createElement(D.h,{color:null==n?void 0:n.color,message:a,renderKey:i,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:null,docked:l})))}function ee(){let e=(0,g.Dv)(L.Rb)===P.qR.PLAYING;return e?o.createElement(Z,{colorOverride:R.ZT},o.createElement(K,null)):null}},831271:(e,t,r)=>{r.d(t,{CB:()=>p,FT:()=>s,O$:()=>g,OK:()=>d,Rb:()=>m,Yl:()=>u,cl:()=>c,dW:()=>h,nm:()=>_,nx:()=>l,wK:()=>o});var n=r(337167),i=r(961215),a=r(849146);let o=2e3,l=2e3,s=(0,n.cn)(o),c=(0,n.cn)(l),d=(0,n.cn)(""),u=(0,n.cn)(0),p=(0,n.cn)(null),m=(0,n.cn)(a.qR.AWAITING_PLAYBACK),h=(0,n.cn)(i.wPU.DEFAULT),_=(0,n.cn)(a.qn.DEFAULT),g=(0,n.cn)(void 0)},849146:(e,t,r)=>{r.d(t,{I3:()=>f,Kb:()=>h,Kq:()=>y,Sq:()=>E,U$:()=>_,by:()=>p,qR:()=>g,qn:()=>m,zq:()=>v});var n,i,a,o,l,s,c,d,u,p=((n=p||{}).SET_CHAT="setChat",n.CLEAR_CHAT="clearChat",n.SET_TUTORIAL_PARENT_NODE="setTutorialParentNode",n.TARGET_DOM_NODE="targetDOMNode",n.TARGET_SCENE_NODE="targetSceneNode",n.INSERT_NODE="insertNode",n.ADJUST_ZOOM_LEVEL="adjustZoomLevel",n.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",n.CHANGE_TOOL="changeTool",n.MOVE_VIEWPORT="moveViewport",n.SET_CURSOR_DIRECTION="setCursorDirection",n.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",n.UPDATE_SELECTED_NODE="updateSelectedNode",n.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",n.FOCUS_INPUT="focusInput",n),m=((i=m||{}).DEFAULT="left",i.RIGHT="right",i),h=((a=h||{})[a.DEFAULT=0]="DEFAULT",a[a.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",a[a.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",a),_=((o=_||{}).CREATE_FRAME="How to draw a frame",o.FORMAT_FRAME="How to use the design panel",o.CREATE_TEXT="Add words where needed",o.FORMAT_TEXT="How to format text",o),g=((l=g||{}).PLAYING="playing",l.AWAITING_PLAYBACK="awaitingPlayback",l),f=((s=f||{}).LEFT="left",s.CENTER="center",s.RIGHT="right",s),E=((c=E||{}).TOP="top",c.CENTER="center",c.BOTTOM="bottom",c),y=((d=y||{}).TEST="test",d.PRODUCT_FRAME="productFrame",d.PRODUCT_FRAME_GINGER_FRAME="productFrameGingerFrame",d.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",d.GINGER_FRAME_GINGER_IMAGE="gingerFrameGingerImage",d.GINGER_FRAME_GINGER_TEXT="gingerFrameGingerText",d.GINGER_FRAME_PRICE_TEXT="gingerFramePriceText",d.GINGER_FRAME_GROWN_TEXT="gingerFrameGrownText",d.NO_BASICS_FILE_FRAME="noBasicsFileFrame",d.NO_BASICS_FILE_TEXT="noBasicsFileText",d),v=((u=v||{}).ESC_KEY="esc key",u.STOP_BTN="stop button",u.NEXT_BTN="next tutorial button",u.PREV_BTN="previous tutorial button",u)},813673:(e,t,r)=>{r.d(t,{Bi:()=>m,LE:()=>h,Tx:()=>_,Wv:()=>c,ZT:()=>d,bq:()=>p,lF:()=>g,wu:()=>u});var n=r(286206),i=r(269075),a=r(103112),o=r(586294),l=r(849146),s=r(476534);let c="cursor_bot",d="#007BE5";function u(e,t){let r=t.width/(e.absoluteBoundingBox.w+300),n=t.height/(e.absoluteBoundingBox.h+300);return Math.min(r,n)*t.zoom}function p(e,t,r){let n;n=e instanceof HTMLElement?e.getBoundingClientRect():{h:e.absoluteBoundingBox.h,w:e.absoluteBoundingBox.w,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,left:e.absoluteBoundingBox.x,right:e.absoluteBoundingBox.x+e.absoluteBoundingBox.w,top:e.absoluteBoundingBox.y,bottom:e.absoluteBoundingBox.y+e.absoluteBoundingBox.h};let i=(null==r?void 0:r.x)||0,a=(null==r?void 0:r.y)||0,o=0;return{targetX:(null==t?void 0:t.x)===l.I3.LEFT?n.left+i:(null==t?void 0:t.x)===l.I3.RIGHT?n.right+i:(n.right+n.left)/2+i,targetY:(null==t?void 0:t.y)===l.Sq.TOP?n.top+a:(null==t?void 0:t.y)===l.Sq.BOTTOM?n.bottom+a:(n.top+n.bottom)/2+a}}async function m({imgSrc:e,desiredWidth:t,desiredHeight:r}){try{let n=(0,a.H)(),o=i.y2.onboarding("create-rectangle-for-image",()=>n.createRectangle()),l=await n.createImageAsync(e),{width:s,height:c}=await l.getSizeAsync(),d=void 0!==t?t:s,u=void 0!==r?r:c;return i.y2.onboarding("resize-rectangle-node-with-image-fill",()=>{o.resize(d,u)}),i.y2.onboarding("set-image-fill",()=>{o.fills=[{type:"IMAGE",imageHash:l.hash,scaleMode:"FILL"}]}),o.id}catch(t){return(0,n.YD)(c,"Failed to insert image",{imgUrl:e,err:t},{reportAsSentryError:!0}),null}}function h(e){let t=document.getElementById(o.n4);t.classList.add(s.ld),t.scrollTop=e,t.classList.remove(s.ld)}function _(e){return e===l.qR.PLAYING}function g(e,t){let r=t?"cursor_bot_v2__basics_file__":"cursor_bot_v2__no_basics_file__";switch(e){case"How to draw a frame":return{tutorialPlayedUserFlag:`${r}clicked_show_me_for_create_a_frame`,stepCompletedUserFlag:`${r}played_create_a_frame`};case"How to use the design panel":return{tutorialPlayedUserFlag:`${r}clicked_show_me_for_frame_formatting`,stepCompletedUserFlag:`${r}played_frame_formatting`};case"Add words where needed":return{tutorialPlayedUserFlag:`${r}clicked_show_me_for_create_text`,stepCompletedUserFlag:`${r}played_create_text`};case"How to format text":return{tutorialPlayedUserFlag:`${r}clicked_show_me_for_text_formatting`,stepCompletedUserFlag:`${r}played_text_formatting`};default:throw Error(`Unknown tutorial name: ${e}`)}}},186379:(e,t,r)=>{r.d(t,{R:()=>c,y:()=>s});var n=r(407908),i=r(269658),a=r(303498),o=r(669277),l=r(862610);function s(){var e,t,r;let i=(0,n.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),a=(0,o.mU)(l.FileFeaturesEnabled,{fileKey:i||""});return!!(null==(r=null==(t=null==(e=a.data)?void 0:e.file)?void 0:t.org)?void 0:r.cursorChatDisabledAt)}function c(){return new Promise((e,t)=>{var r;let n=null==(r=i.V.getState().openFile)?void 0:r.key;if(!n)return e(!1);(0,a.Yj)(l.FileFeaturesEnabled,{fileKey:n}).then(t=>{var r,n,i;let a=!!(null==(i=null==(n=null==(r=t.data)?void 0:r.file)?void 0:n.org)?void 0:i.cursorChatDisabledAt);return e(a)})})}},268357:(e,t,r)=>{r.d(t,{l:()=>y,s:()=>b});var n=r(652983),i=r(407908),a=r(172497),o=r(810373),l=r(204829),s=r(518484),c=r(970740),d=r(280251),u=r(909765),p=r(32483),m=r(784667),h=r(160905),_=r(303801),g=r(157607),f=r(332224),E=r(20320);let y="nudge-amount",v=(0,a.z)(f.qxW);function b(e){let t=(0,i.I0)(),r=(0,m.W$)(),a=(0,m.Xw)(),f=new p.uf({min:.1,smallNudgeAmount:u.lN,bigNudgeAmount:u.uy}),y=new p.uf({min:1,smallNudgeAmount:u.lN,bigNudgeAmount:u.uy}),b=()=>{t(d.le())},I=e=>{e.keyCode===o.sr.ENTER&&b()},T=new s.OW(window.innerWidth/2-v/2,window.innerHeight/3);return n.createElement(g.My,{title:(0,c.t)("fullscreen.nudge.nudge_amount"),headerSize:"small",initialPosition:T,onClose:b,dragHeaderOnly:!0,recordingKey:l.ar(e,"modal")},n.createElement("div",{className:E.OF}),n.createElement(_.X2,null,n.createElement("label",{className:E.PS},n.createElement(c.Tx,{id:"fullscreen.nudge.small_nudge"})),n.createElement("label",{className:E.PS},n.createElement(c.Tx,{id:"fullscreen.nudge.big_nudge"}))),n.createElement(_.X2,null,n.createElement(h.Y2,{className:E.qH,formatter:f,property:r,onChange:e=>{(0,m.tZ)().smallNudgeAmount.set(e)},onKeyDown:I,recordingKey:l.ar(e,"smallNudgeInput")}),n.createElement(h.Y2,{className:E.xW,formatter:y,property:a,onChange:e=>{(0,m.tZ)().bigNudgeAmount.set(e)},onKeyDown:I,recordingKey:l.ar(e,"bigNudgeInput"),autoFocus:!0})),n.createElement("div",{className:E.OF}))}b.displayName="NudgeAmountPicker"},187506:(e,t,r)=>{r.d(t,{Ef:()=>et,J9:()=>en,L:()=>X,aF:()=>q,eC:()=>eo,uB:()=>er});var n,i=r(652983),a=r(63730),o=r(407908),l=r(87608),s=r.n(l),c=r(46347),d=r(716250),u=r(810373),p=r(638237),m=r(615537),h=r(204829),_=r(435613),g=r(805992),f=r(970740),E=r(375463),y=r(295206),v=r(961215),b=r(393357),I=r(455694),T=r(641052),w=r(21616),S=r(424479),C=r(492459),O=r(271774),A=r(344668),N=r(225468),L=r(390902),P=r(303801),R=r(729312),k=r(621197),D=r(686854),M=r(206365);let F=r(790070),x=r(792668),U=r(338700),B=r(938772),V=r(39500),G=r(353211),H=r(146761),W=r(176048),K=r(877800),z=r(196884),Z=r(492285),Y=r(26335);function j(e){let t=e.stackMode;return"HORIZONTAL"===t||"VERTICAL"===t}function $(e){return void 0!==e.objectsPanelThumbnailId}function q(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return r(16102);case"CENTER":return r(948744);case"MAX":return r(911924);default:(0,c.vE)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return r(201371);case"CENTER":return r(896462);case"MAX":return r(779469);default:(0,c.vE)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return r(673911);case"CENTER":return r(631780);case"MAX":return r(266066);default:(0,c.vE)(e.stackCounterAlignItems)}}return r(491667)}class X extends h.Vx{render(){let e={transform:`translate3d(0px, ${this.props.top}px, 0)`,width:this.props.width,height:D.f},t=`${M.O7} ${M.tR}`;return this.props.isParentSelected&&(t+=" "+M.Bo),this.props.isDescendantOfSymbol&&(t+=" "+M.bk),this.props.isDescendantOfInstance&&(t+=" "+M.BS),i.createElement("div",{className:t,style:e},function(e){let t=[];for(let r=0;r<e+1;r++)t.push(i.createElement("span",{key:r,className:M.WY}));return i.createElement("span",{className:M.t4},t)}(this.props.level),this.props.sectionType===v.s2B.FIXED?(0,f.t)("fullscreen.properties_panel.constraints_resizing_panel.fixed"):(0,f.t)("fullscreen.properties_panel.scrolls"))}}X.displayName="SectionRow";class J extends h.Vx{constructor(e){super(e),this.onDoubleClickName=h.hO(this,"dblclick",()=>{this.props.startRenaming(this.props.guid)}),this.input=null,this.inputRef=e=>{var t;e&&(this.input=a.findDOMNode(e),null==(t=this.input)||t.select())},this.onInputChange=h.z5(this,"change",e=>{var t;this.setState({renamingValue:null==(t=e.currentTarget)?void 0:t.value})}),this.onKeyDown=h.v1(this,"keydown",e=>{var t,r;if(!this.state.isComposing){if(e.keyCode===u.sr.ESCAPE)this.props.stopRenaming(!1);else if(e.keyCode===u.sr.ENTER)this.props.stopRenaming(!0,null==(t=this.input)?void 0:t.value,this.getName());else{if(e.keyCode!==u.sr.TAB)return(0,b.pI)(e,b.jQ.NO),h.Ev;e.preventDefault(),this.props.stopRenaming(!0,null==(r=this.input)?void 0:r.value,this.getName()),e.shiftKey?this.props.prevNodeGuid&&this.props.startRenaming(this.props.prevNodeGuid):this.props.nextNodeGuid&&this.props.startRenaming(this.props.nextNodeGuid)}}}),this.onBlur=h.qT(this,"blur",()=>{var e;this.props.stopRenaming(!0,null==(e=this.input)?void 0:e.value,this.getName())}),this.onContextMenu=e=>{this.props.onContextMenu&&this.props.onContextMenu(this.props.guid,e)},this.onMouseEnter=e=>{(0,d.BZ)().ce_truncated_layer_name_tooltip&&this.setShowTooltip(),this.props.onMouseEnter&&this.props.onMouseEnter(this.props.guid,e)},this.onLockMouseDown=e=>{this.props.lockMouseDown&&this.props.lockMouseDown(this.props.guid,e)},this.onVisibleMouseDown=e=>{this.props.visibleMouseDown&&this.props.visibleMouseDown(this.props.guid,e)},this.setShowTooltip=()=>{let e=this.isLayerNameTruncated();this.setState({showTooltip:e})},this.onDragStart=e=>{e.dataTransfer.effectAllowed="none",null!=this.props.onDragStartCallback&&this.props.onDragStartCallback(this.props.guid,e)},this.onDragOver=e=>{null!=this.props.onDragOverCallback&&this.props.onDragOverCallback(this.props.guid,e)},this.onDragDrop=e=>{null!=this.props.onDragDropCallback&&this.props.onDragDropCallback(this.props.guid,e)},this.onDragEnter=e=>{null!=this.props.onDragEnterCallback&&this.props.onDragEnterCallback(this.props.guid,e)},this.onDragLeave=e=>{null!=this.props.onDragLeaveCallback&&this.props.onDragLeaveCallback(this.props.guid,e)},this.layerNameRef=i.createRef(),this.state={renamingValue:e.isRenaming?e.name:void 0,isComposing:!1,showTooltip:!1}}UNSAFE_componentWillReceiveProps(e){!this.props.isRenaming&&e.isRenaming&&this.setState({renamingValue:e.name})}componentDidMount(){super.componentDidMount(),(0,d.BZ)().ce_truncated_layer_name_tooltip&&this.setShowTooltip()}getName(){let e=(this.props.abbreviatedStateName||this.props.name).replace(/\n/," ");if(this.props.shouldShowGuids){let t=v.dCf.getOverridePathForNode(this.props.guid);return`${e} (${this.props.guid}): [${t}]`}return e}isLayerNameTruncated(){let e=this.layerNameRef.current;return!!e&&e.scrollWidth>e.offsetWidth}getMemoryPct(){return(0,A.aG)(this.props.nodeMemoryUsage,this.props.rootMemoryUsage,!0)}render(){var e;let t={transform:`translate3d(0px, ${this.props.top}px, 0)`,width:this.props.width,height:D.d},r=this.props.fixed&&0!==this.props.width;r&&(t.top=this.props.stickyOffset);let n="FRAME"===this.props.nodeType,a=s()({[M.O7]:!0,[M.aH]:0===this.props.level,[M.Wi]:n&&!j(this.props)&&!this.props.resizeToFit&&!this.props.isStateGroup,[M.ru]:n&&!j(this.props)&&this.props.resizeToFit,[M.kn]:n&&j(this.props),[M.x6]:this.props.isStateGroup,[M.Sb]:(0,T.Fr)(this.props.nodeType),[M.qi]:"SECTION"===this.props.nodeType,[M.NA]:"SYMBOL"===this.props.nodeType,[M.bA]:"MODULE"===this.props.nodeType,[M.eE]:"INSTANCE"===this.props.nodeType,[M.Rc]:this.props.isStamp,[M.CH]:"HIGHLIGHT"===this.props.nodeType,[M.Zg]:"WIDGET"===this.props.nodeType||this.props.isWidgetSublayer,[M.bk]:this.props.isDescendantOfSymbol,[M.BS]:this.props.isDescendantOfInstance,[M.rq]:this.props.isDescendantOfModule,[M.sS]:this.props.mask,[M.Bd]:!!r,[M.JQ]:!!this.props.layerAbove,[M.ch]:this.props.isHovered,[M.hv]:this.props.isSelected,[M.Bo]:this.props.isAncestorSelected,[M.JU]:!this.props.visible||this.props.isAncestorHidden,[M.KW]:this.props.locked||this.props.isAncestorLocked,[M.zh]:this.props.hasChildren&&this.props.isExpanded}),o=(null==(e=this.props.versionHistory)?void 0:e.activeId)&&"current_version"===this.props.versionHistory.activeId,l=this.props.showMemoryUsage&&this.props.showInFileMemoryPercentage,c=l&&!this.props.isRenaming&&o;return i.createElement("div",{className:a,style:t,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,draggable:!1,onDragOver:this.onDragOver,onDrop:this.onDragDrop,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,"data-testid":this.props.hasChildren?"layer-row-with-children":"layer-row","data-tooltip-type":(0,d.BZ)().ce_truncated_layer_name_tooltip?N.fR.TEXT:void 0,"data-tooltip":this.state.showTooltip?this.getName():null,"data-tooltip-max-lines":4,"data-tooltip-hide-immediately":!0,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0},i.createElement(Q,{guid:this.props.guid,mask:this.props.mask,level:this.props.level,hasChildren:this.props.hasChildren,isExpanded:this.props.isExpanded,displayOrder:this.props.displayOrder,isMaskedAtLevels:this.props.isMaskedAtLevels,isLastMaskedAtLevels:this.props.isLastMaskedAtLevels,dispatch:this.props.dispatch,expandMouseDown:this.props.expandMouseDown,currentPage:this.props.currentPage,recordingKey:h.ar(this.props,"indents")}),i.createElement(er,{guid:this.props.guid,navigateAndPanTo:this.props.navigateAndPanTo}),this.props.isThumbnail&&i.createElement(_.n,{"data-tooltip-type":N.fR.TEXT,"data-tooltip":(0,f.t)("fullscreen.object_row.file_thumbnail"),className:M.YI,svg:K}),this.props.isRenaming&&i.createElement(P.oi,{className:M.qH,ref:this.inputRef,value:this.state.renamingValue,onChange:this.onInputChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onCompositionStart:()=>this.setState({isComposing:!0}),onCompositionEnd:()=>this.setState({isComposing:!1}),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off"}),!this.props.isRenaming&&i.createElement("span",{className:M.$6,onDoubleClick:this.onDoubleClickName,dir:"auto"},i.createElement("div",{className:M.lQ,ref:this.layerNameRef},this.getName()),this.props.explicitVariableModeNames&&this.props.explicitVariableModeNames.length>0&&i.createElement("div",{className:M.jn},i.createElement(R.G,{modeNames:this.props.explicitVariableModeNames}))),c&&i.createElement("span",{className:M.lp,dir:"auto"},this.getMemoryPct()),!this.props.isRenaming&&!this.props.readonly&&!this.props.isDragging&&i.createElement("span",{className:M.zq},i.createElement(ei,{recordingKey:h.ar(this.props,"lockIcon"),locked:this.props.locked,isAncestorLocked:this.props.isAncestorLocked,onMouseDown:this.onLockMouseDown}),i.createElement(ea,{recordingKey:h.ar(this.props,"visibleIcon"),visible:this.props.visible,isAncestorHidden:this.props.isAncestorHidden,onMouseDown:this.onVisibleMouseDown})))}}J.displayName="ObjectRow";class Q extends i.PureComponent{constructor(){super(...arguments),this.expandMouseDown=e=>{this.props.expandMouseDown(this.props.guid,e)}}renderNodeIndents(){let e=[];for(let t=0;t<this.props.level+1;t++){let r=`[${t}]`,n=-1!==this.props.isLastMaskedAtLevels.indexOf(r),a=-1!==this.props.isMaskedAtLevels.indexOf(r),o=t===this.props.level&&this.props.mask,l=t===this.props.level&&this.props.hasChildren,s=M.sS;this.props.displayOrder===y.yW.DOM&&(s+=" "+M.Vx),o||a||n?n?e.push(i.createElement(_.n,{key:t,svg:l?W:H,className:s})):a?e.push(i.createElement(_.n,{key:t,svg:l?G:V,className:s})):o&&e.push(i.createElement(_.n,{key:t,svg:l?B:U,className:s})):e.push(i.createElement("span",{key:t,className:M.WY})),l&&e.push(i.createElement(_.n,{key:"expand-caret",className:this.props.isExpanded?M.mM:M.t2,svg:this.props.isExpanded?F:x,onMouseDown:this.expandMouseDown,recordingKey:h.ar(this.props,"expandCaret")}))}return e}render(){return i.createElement("span",{className:M.t4},this.renderNodeIndents())}}Q.displayName="Indents";let ee=new p.z(750);function et(e,t){let r=ee.get(e);return r&&r.thumbnailId===t||(r={thumbnailId:t,svg:w.HW(e)},ee.set(e,r)),r.svg}(e=>{function t(e,t){var n;let i=r(834956);if(!e)return i;let a=e.type;switch((0,T.XN)(e)&&(a="STAMP"),a){case"BOOLEAN_OPERATION":{let t=e.booleanOperation;switch(t){case"UNION":return r(722824);case"INTERSECT":return r(714785);case"SUBTRACT":return r(686454);case"XOR":return r(613507);default:return i}}case"VECTOR":return r(71247);case"STAR":return r(584906);case"LINE":return r(8821);case"ELLIPSE":return r(858731);case"RECTANGLE":return r(834956);case"REGULAR_POLYGON":return r(921048);case"ROUNDED_RECTANGLE":return 0===e.cornerRadius?i:r(259564);case"TEXT":return r(453110);case"SLICE":return r(740155);case"GROUP":case"FRAME":if($(e)&&e.isResponsiveSet)return r(178341);if($(e)&&(null==(n=e.parentNode)?void 0:n.isResponsiveSet))return(0,L.b)(e.size.x,e.size.y);if(e.isStateGroup)return r(283546);if(j(e))return q(e);else if(e.resizeToFit)return r(907691);else return r(491667);case"MODULE":return r(405576);case"SYMBOL":if((0,d.BZ)().dse_templates_proto&&$(e)&&e.isTemplate)return r(405576);if($(e)&&e.isState||(null==t?void 0:t.isStateGroup))return r(999290);return r(283546);case"INSTANCE":return r(305225);case"STICKY":return r(994537);case"SHAPE_WITH_TEXT":return r(964690);case"CONNECTOR":return r(222031);case"STAMP":return r(790492);case"SECTION":return r(375818);case"WIDGET":{let t=e.guid?S.TSSceneGraph.instance.get(e.guid.toString()):null;if(t&&"EMBED_WIDGET"===t.widgetId)return r(765393);if(t&&"LINK_PREVIEW_WIDGET"===t.widgetId)return r(543333);return r(694228)}case"CANVAS":return r(980234);case"TABLE":return r(647738)}return i}e.defaultIconSrcForNode=t;class n extends i.PureComponent{constructor(){super(...arguments),this.getThumbnailSrc=(0,m.ws)((e,t)=>et(e,t)),this.onDoubleClick=()=>{this.props.node&&(this.props.navigateAndPanTo?this.props.navigateAndPanTo(this.props.node.guid):v.iTB.panToNode(this.props.node.guid))}}render(){let{guid:e,node:t,isMenuIcon:r,isMenuIconPurple:n,className:a,editModeType:o,detachedInfo:l}=this.props,s=t?this.getThumbnailSrc(e,t.objectsPanelThumbnailId):"",d=null==t?void 0:t.hasEnabledAnimatedPaint,u=null==t?void 0:t.hasEnabledVideoPaint,p=null==t?void 0:t.isLiveObject;return i.createElement(c,{className:a,node:t,isMenuIcon:r,isMenuIconPurple:n,thumbnailSrc:s,onDoubleClick:this.onDoubleClick,animated:d||u,staticImage:null==t?void 0:t.hasEnabledStaticImagePaint,editModeType:o,detachedInfo:l,isLiveObject:p})}}n.displayName="LayerIcon",e.LayerIcon=n;let a=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let t=(0,o.v9)(a);return i.createElement(n,{...e,node:t.get(e.guid)||null})};class l extends i.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:t,isMenuIcon:r,isMenuIconPurple:n,className:a}=this.props;return i.createElement(c,{className:a,node:e,parentNode:t,isMenuIcon:r,isMenuIconPurple:n,animated:this.hasEnabledAnimatedPaintNodeChange(e),staticImage:this.hasEnabledStaticPaintNodeChange(e)})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():i.createElement(k.b,{type:e})}renderVariableCollectionIcon(){return i.createElement(_.n,{svg:r(85429),className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:t}=this.props;switch(e.styleType){case"GRID":let r=(0,E.d6)(e);return i.createElement(_.n,{svg:r,className:t,autosize:!0,width:"10px"});case"FILL":return i.createElement(_.n,{svg:z,className:t});case"EFFECT":return i.createElement(_.n,{svg:Y,className:t});case"TEXT":return i.createElement(_.n,{svg:Z,className:t});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){let t=this.getAllPaints(e);for(let e of t)if(e.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){let t=this.getAllPaints(e);for(let e of t)if(e.image)return!0;return!1}render(){let{node:e,className:t}=this.props;if(e.styleType)return this.renderStyleIcon();if("VARIABLE"===e.type)return this.renderVariableIcon();if("VARIABLE_SET"===e.type)return this.renderVariableCollectionIcon();{if("CANVAS"!==e.type)return this.renderBaseIcon();let n=r(960272);return i.createElement(_.n,{svg:n,className:t})}}}e.NodeChangeIcon=l;class c extends i.PureComponent{render(){let e,n;let{node:a,parentNode:o,animated:l,staticImage:c,thumbnailSrc:d,isMenuIcon:u,isMenuIconPurple:p,onDoubleClick:m,editModeType:h,detachedInfo:f,isLiveObject:E}=this.props;if(!a)return null;let y=M.YI;d&&(y=M.WW),u&&(y=p?M.PT:M.YA);let b=!1;a.mask?e=r(740041):(l||c)&&(0,T.fB)(a.type)&&!(0,T.XN)(a)?e=l?r(442429):r(286487):d?e=(0,_.x)(d):h===v.Nw4.DEV_HANDOFF&&(null==f?void 0:f.status)==="loaded"&&"SYMBOL"!==a.type&&"INSTANCE"!==a.type?(e=r(241629),b=!0):E?e=r(126909):(e=t(a,o),n=function(e){var t;if(e)switch(e.type){case"TEXT":return r(478868);case"STICKY":return r(992177);case"SHAPE_WITH_TEXT":return r(781925);case"FRAME":if($(e)&&e.isResponsiveSet)return r(178341);if($(e)&&(null==(t=e.parentNode)?void 0:t.isResponsiveSet))return(0,L.b)(e.size.x,e.size.y);if(j(e))return q(e);break;case"CANVAS":return r(125875)}}(a));let I=!b&&"ABSOLUTE"===a.stackPositioning&&i.createElement(_.n,{className:M._q,svg:r(225197)});return i.createElement("span",{className:s()(this.props.className||y,M.aW),onDoubleClick:m},i.createElement(g.f,{svg:e,fallbackSvg:n}),I)}}e.LayerIconBase=c})(n||(n={}));let er=n.ConnectedLayerIcon,en=n.NodeChangeIcon;class ei extends h.Vx{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=h.hO(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e,t;return this.props.locked?(e=r(40238),t=r(549709)):e=this.props.isAncestorLocked?r(880137):r(149074),i.createElement(g.f,{className:M.YG,svg:e,fallbackSvg:t,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation})}}ei.displayName="LockIcon";class ea extends h.Vx{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=h.hO(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e;return e=this.props.isAncestorHidden&&this.props.visible?r(880137):this.props.visible?r(606132):r(891916),i.createElement(_.n,{className:M.si,svg:e,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation})}}function eo(e){let t=(0,I.s)("prototype_sections_zoom"),r=i.useCallback(e=>{t((0,O.Yc)({nodeId:e,alwaysPan:!0}))},[t]),n=(0,C.EA)(e.guid);return i.createElement(J,{...e,explicitVariableModeNames:n,navigateAndPanTo:r})}ea.displayName="VisibleIcon"},274389:(e,t,r)=>{r.d(t,{$M:()=>u,A5:()=>_,Cl:()=>f,KR:()=>I,Tn:()=>b,hL:()=>h,js:()=>p,uX:()=>g,wK:()=>d});var n=r(46347),i=r(615537),a=r(295206),o=r(961215),l=r(641052),s=r(60908),c=r(686854);function d(e,t,r,n){return e.top+c.d>n-t&&e.top<n+r+t||!!e.fixed}function u(e,t,r){return d(e,t/2,t,r)}function p(e,t,r){if(!e.length)return[];let i=t=>{let r,i;let a=e.length,o=0,l=a-1;if(t<=0)return 0;if(t>=e[a-1].top+c.d)return a-1;for((0,n.q8)(o<=l,"binary search min <= max predicate failed");o<=l;)if((i=e[r=(o+l)/2|0]).top+c.d<t)o=r+1;else if(i.top>t)l=r-1;else break;return r},a=t/2,o=i(r-a),l=i(r+t+a);return e.slice(o,l+1)}function m(e,t){let r=e.get(t);(0,n.q8)(null!=r,"node not found in scenegraph");let i=r.isExpanded||r.isTemporarilyExpanded;if(!i||0===r.uiOrderedChildren.length)return c.d;let a=c.d;for(let t of(r.fixedChildrenCount>0&&(a+=2*c.f),r.uiOrderedChildren))a+=m(e,t);return a}function h(e,t){let r=[],i=t.get(e);for((0,n.q8)(null!=i,"node not found in scenegraph");i&&"CANVAS"!==i.type;){let e=i.guid;i=i.parentNode,(0,n.q8)(null!=i,"parent node not found in scenegraph");let t=i.uiOrderedChildren.indexOf(e);r.push(t)}return r.reverse(),r}function _(e,t,r){let i=e.reduce((e,r)=>t.get(e.uiOrderedChildren[r]),t.get(r));return(0,n.q8)(null!=i,"node from path is not found in scenegraph"),i.guid}function g(e,t,r,n,i=!1){let a=null,o=null,l=null;for(let e in r){let t=r[e],i=t+c.d;if(n>=t&&n<=i){a=e;break}(!o||r[e]<r[o])&&(o=e),(!l||r[e]>r[l])&&(l=e)}if(!a&&(o&&n<r[o]?a=o:l&&n>r[l]+c.d&&(a=l)),a&&i){let r=(0,s.dU)(e,t,a);if(r)return r.guid}return a}let f=16,E=(0,i.ws)((e,t)=>{let r=1/0;return(0,s.G$)(e,t,t=>{t&&(r=Math.min(r,(0,l.xl)(e,t.guid)))}),r===1/0&&(r=0),r});function y(e,t,r,i,a,s,d){let u=E(e,t)+(i>0?Math.floor(i/f):Math.ceil(i/f)),p=s<a.uiOrderedChildren.length?r[a.uiOrderedChildren[s]]+("before"===d?0:c.d):r[a.guid]+m(e,a.guid),h=s<a.fixedChildrenCount?o.s2B.FIXED:o.s2B.SCROLLS,_={parent:a,index:s+("before"===d?0:1),section:h},g=(0,l.xl)(e,a.guid)+1;for(;g>u;){let t=function(e,t){if("CANVAS"===t.parent.type||"DOCUMENT"===t.parent.type)return t;let r=t.index===t.parent.uiOrderedChildren.length;if(!r)return t;let i=t.section===o.s2B.FIXED;if(i)return t;let a=(0,l.G_)(e,t.parent.guid);(0,n.q8)(null!=a,"parent node not in scenegraph");let s=a.uiOrderedChildren.indexOf(t.parent.guid);return{parent:a,index:s+1,section:s<a.fixedChildrenCount?o.s2B.FIXED:o.s2B.SCROLLS}}(e,_);if(t!==_)_=t,g--;else break}for(;g<u;){let t=function(e,t){if(0===t.index)return t;let r=e.get(t.parent.uiOrderedChildren[t.index-1]);return((0,n.q8)(null!=r,"node not in scenegraph"),(0,l.qn)(r.type)&&t.index!==t.parent.fixedChildrenCount&&(r.isExpanded||r.isTemporarilyExpanded||!(r.uiOrderedChildren.length>0)))?{parent:r,index:r.uiOrderedChildren.length,section:o.s2B.SCROLLS}:t}(e,_);if(t!==_)_=t,g++;else break}let y=_.parent.guid;return{parentGuid:y,index:_.index,section:_.section,parentTop:r[y],lineTop:p,lineIndent:g*f}}function v(e,t,r,i,a,d){let u=e.get(i);if(!u)return null;let p=r[i],h=(0,l.G_)(e,i);(0,n.q8)(null!=h,"parent not found");let _=h.uiOrderedChildren.indexOf(i),g=(0,l.qn)(u.type),f=(n,i,o)=>y(e,t,r,a,n,i,o);if(g&&(0,s.Br)(t,i)){let t=m(e,i);return f(h,_,d>p+t/2?"after":"before")}if(g){if(d<p+c.d/3)return f(h,_,"before");if(!(d<p+2*c.d/3))return u.isExpanded||u.isTemporarilyExpanded?f(u,0,"before"):f(h,_,"after");{let t=e.get(i);return t?{parentGuid:i,index:t.fixedChildrenCount,section:o.s2B.SCROLLS,parentTop:p}:null}}if(d>p+c.d){let t=u;for(;"CANVAS"!==t.type;){let r=null!=t.parentGuid?e.get(t.parentGuid):null;(0,n.q8)(null!=r,"node not in scenegraph"),t=r}return f(t,t.uiOrderedChildren.length,"before")}{let e=d>p+c.d/2;return f(h,_,e?"after":"before")}}function b(e,t,r,i,a,l,c){if(c){let t=e.get(c);return t?{parentGuid:c,index:t.fixedChildrenCount,section:o.s2B.SCROLLS,parentTop:"sticky"}:null}{let c=function(e,t){let r=null;for(let n in e){let i=e[n],a=t>=i.top&&t<i.top+i.height;a&&(!r||i.top>r.top)&&(r=i)}return r}(i,l),d=g(e,t,r,l,!0),u=null;return!d&&c?u=function(e,t,r,i,a,l){let c=(0,s.dU)(e,t,i.parentGuid);if(c){let n=c.guid;return v(e,t,r,n,a,l)}{var d;let l=e.get(i.parentGuid);return(0,n.q8)(null!=l,"parent node not in scenegraph"),d=i.type===o.s2B.FIXED?0:l.fixedChildrenCount,y(e,t,r,a,l,d,"before")}}(e,t,r,c,a,l):d&&(u=v(e,t,r,d,a,l)),u&&c&&c.parentGuid===u.parentGuid&&(u.section=c.type),u}}function I(e,t){return e.childrenDisplayOrder===a.yW.DESIGN?e.uiOrderedChildren.length-t:t}},511093:(e,t,r)=>{r.d(t,{dr:()=>y,gj:()=>m,t4:()=>f});var n=r(46347),i=r(217810),a=r(204829),o=r(295206),l=r(961215),s=r(641052),c=r(138212),d=r(60908),u=r(231995),p=r(686854);class m{constructor(e,t){this.sceneGraph=e,this.sceneGraphSelection=t,this.nodes={},this.ancestorInfos={},this.maskInfos={}}getNode(e){if(!this.nodes[e]){let t=this.sceneGraph.get(e);t&&(this.nodes[e]=t)}return this.nodes[e]}getAncestorInfo(e){let t=this.ancestorInfos[e];if(t)return t;let r=this.getNode(e);if((0,n.q8)(null!=r,"getAncestorInfo called on invalid node"),r.parentGuid){let n=this.getAncestorInfo(r.parentGuid);t={isAncestorHidden:n.isAncestorHidden||!r.visible,isAncestorLocked:n.isAncestorLocked||r.locked,isAncestorSelected:n.isAncestorSelected||(0,d.Br)(this.sceneGraphSelection,e),childrenDisplayOrder:r.childrenDisplayOrder}}else t={isAncestorHidden:!1,isAncestorLocked:!1,isAncestorSelected:!1,childrenDisplayOrder:o.yW.DESIGN};return this.ancestorInfos[e]=t,t}getMaskInfo(e){let t=this.maskInfos[e];if(t)return t;let r=this.getNode(e);if((0,n.q8)(null!=r,"getMaskInfo called on invalid node"),"CANVAS"===r.type)this.maskInfos[e]={level:0,isMaskedAtLevels:"",isLastMaskedAtLevels:""};else{let e=r.parentGuid,t=e&&this.getNode(e),n=t?this.getMaskInfo(e):void 0;if(t&&n){let e=n.level,r=n.isMaskedAtLevels,i=t.fixedChildrenCount,a=t.reversedChildrenGuids,l=!1,s=!1;for(let t=0;t<a.length;t++){let n=a[a.length-t-1],c=this.getNode(n);if(!c)continue;let d=c.mask,u=l&&(d||(0,o.gy)(c.type)&&!c.resizeToFit&&!c.frameMaskDisabled||a.length-t===i);u&&(l=!1),d&&(l=c.visible),u&&!s&&(this.maskInfos[a[a.length-t]].isLastMaskedAtLevels+=`[${e}]`),this.maskInfos[n]={level:e+1,isMaskedAtLevels:r+(l&&!d?`[${e}]`:""),isLastMaskedAtLevels:""},s=d}l&&!s&&(this.maskInfos[a[0]].isLastMaskedAtLevels+=`[${e}]`)}}return this.maskInfos[e]}}function h(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if("object"===r.rowType)return r}return null}function _(e,t,r,n){let{indentLevel:i,opts:o,pathFromRoot:l}=r,s={nodeGuid:t[n],indentLevel:i+1,opts:{isDescendantOfSymbol:"SYMBOL"===e.type||o.isDescendantOfSymbol,isDescendantOfInstance:"INSTANCE"===e.type||o.isDescendantOfInstance,isDescendantOfModule:"MODULE"===e.type||o.isDescendantOfModule}};return a.yR()&&(s.pathFromRoot=[...l,n]),s}function g(e,t,r,n,i,a){let o=`${t}.${e.numSections}`,l={rowType:"section",top:e.top,level:r,sectionType:t,sectionId:o,isDescendantOfSymbol:n,isDescendantOfInstance:i,isDescendantOfModule:a};return e.allRowData.push(l),e.top+=p.f,e.numSections++,l}function f(e,t){return(0,s.Fr)(t.type)||"SECTION_OVERLAY"===t.type}function E(e,t){let r;let{nodeGuid:n,indentLevel:a,opts:o,pathFromRoot:s}=t,d=e.sceneGraph.get(n);if(!d||"SECTION_OVERLAY"===d.type&&!e.showImmutableFrameSublayers)return;d.mask&&e.maskGuids.push(d.guid);let m=null;if(e.allRowData.length>0){let t=h(e.allRowData);t.nextNodeGuid=d.guid,m=t.guid}let y="WIDGET"===d.type&&(d.widgetVersionId||d.widgetId&&(0,c.xg)(d.widgetId)),v=f(e.sceneGraph,d)&&!e.showImmutableFrameSublayers||y;if("SECTION"===d.type&&1===d.uiOrderedChildren.length){let t=e.sceneGraph.get(n);r=!(t&&"SECTION_OVERLAY"===t.type)}else r=d.uiOrderedChildren.length>0&&!v;let b={rowType:"object",guid:d.guid,isExpanded:d.isExpanded,isTemporarilyExpanded:d.isTemporarilyExpanded,hasChildren:r,top:e.top,level:a,prevNodeGuid:m,nextNodeGuid:null,isDescendantOfSymbol:o.isDescendantOfSymbol,isDescendantOfInstance:o.isDescendantOfInstance,isDescendantOfModule:o.isDescendantOfModule};s&&(b.recordingKey=`objectsPanel.row.${s.join(".")}`),e.allRowData.push(b),e.objectRowByGuid[d.guid]=b,e.topByGuid[n]=e.top,e.top+=p.d;let I=d.isExpanded||d.isTemporarilyExpanded;I&&d.uiOrderedChildren.length>0&&(v||(d.fixedChildrenCount>0?function(e,t,r){let n=t.uiOrderedChildren.map(t=>e.sceneGraph.get(t)).filter(i.lm),a=n.map((e,t)=>({node:e,index:t,scrollBehavior:e.scrollBehavior})),o=e.top,s="SYMBOL"===t.type||r.opts.isDescendantOfSymbol,c="INSTANCE"===t.type||r.opts.isDescendantOfInstance,d="MODULE"===t.type||r.opts.isDescendantOfModule,u=g(e,l.s2B.FIXED,r.indentLevel+1,s,c,d);a.filter(({scrollBehavior:e})=>"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e).forEach(({index:n})=>{E(e,_(t,a.map(e=>e.node.guid),r,n))});let p=e.top,m=g(e,l.s2B.SCROLLS,r.indentLevel+1,s,c,d);a.filter(({scrollBehavior:e})=>"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"!==e).forEach(({index:n})=>{E(e,_(t,a.map(e=>e.node.guid),r,n))});let h=e.top;e.sectionById[u.sectionId]={parentGuid:t.guid,top:o,height:p-o,type:u.sectionType},e.sectionById[m.sectionId]={parentGuid:t.guid,top:p,height:h-p,type:m.sectionType}}(e,d,t):function(e,t,r){let n=t.uiOrderedChildren;for(let i=0;i<n.length;i++)E(e,_(t,n,r,i))}(e,d,t))),I&&(0,u.TZ)(d,e.sceneGraph)&&!e.temporarilyExpandedInstanceLayers.includes(d.guid)&&function(e,t,r){let n={rowType:"layer-expansion",containingPrimaryInstanceGUID:t,top:e.top,level:r+1};e.allRowData.push(n),e.top+=p.d}(e,d.guid,a)}function y(e,t,r,n,i){let o={allRowData:[],numSections:0,top:0,topByGuid:Object.create(null),objectRowByGuid:Object.create(null),sectionById:Object.create(null),sceneGraph:e,maskGuids:[],showImmutableFrameSublayers:r,temporarilyExpandedInstanceLayers:n};if(!function(e,t,r){if(!t)return;let n={isAncestorHidden:!1,isAncestorLocked:!1,isDescendantOfSymbol:!1,isDescendantOfInstance:!1,isDescendantOfModule:!1};if(r){E(e,{nodeGuid:t.guid,indentLevel:0,opts:n,pathFromRoot:[0]});return}let i=t.children;if(i&&i.length)for(let t=0;t<i.length;t++){let r={nodeGuid:i[t],indentLevel:0,opts:n};a.yR()&&(r.pathFromRoot=[t]),E(e,r)}}(o,t,i),o.allRowData.length>1){let e=function(e){for(let t=0;t<e.length;t++){let r=e[t];if("object"===r.rowType)return r}return null}(o.allRowData),t=h(o.allRowData);e.prevNodeGuid=t.guid,t.nextNodeGuid=e.guid}return{rowData:o.allRowData,topByGuid:o.topByGuid,sectionById:o.sectionById,totalHeight:o.top}}},173068:(e,t,r)=>{r.d(t,{A:()=>f,O:()=>g});var n=r(652983),i=r(172497),a=r(301151),o=r(664644),l=r(518484),s=r(618723),c=r(970740),d=r(280251),u=r(125274),p=r(157607),m=r(332224),h=r(871439);let _=(0,i.z)(m.NoB);function g(e){let t=(0,u.Ni)(),r=n.useMemo(()=>new l.OW(window.innerWidth/2-_/2,window.innerHeight-(t>0?120+t:150)),[t]);return n.createElement(f,{initialPosition:r,...e})}class f extends n.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(d.v7()),(0,o.a)("never")},this.onClickOpenInApp=()=>{this.props.dispatch(d.v7()),(0,o.a)(this.state.alwaysChecked?"always":"never"),(0,a.tI)(location.href)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:"never"!==(0,o.qN)()}}static shouldShowOnce(){return(0,o.NH)()&&void 0===(0,o.qN)()}static shouldAutoOpen(){return(0,o.NH)()&&"always"===(0,o.qN)()}static toggleAutoOpen(){let e="always"===(0,o.qN)();(0,o.a)(e?"never":"always")}static isAutoOpenEnabled(){return"always"===(0,o.qN)()}static enableAutoOpen(){(0,o.a)("always")}static disableAutoOpenIfUnset(){void 0===(0,o.qN)()&&(0,o.a)("never")}render(){return n.createElement(p.My,{initialPosition:this.props.initialPosition,title:(0,c.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},n.createElement("div",{className:h.n},n.createElement("div",{className:h.a},n.createElement(s.v_,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),n.createElement(s.__,{htmlFor:"always-open-desktop-app"},n.createElement(c.Tx,{id:"desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"}))),n.createElement("div",{className:h.a},n.createElement(s.PL,{onClick:this.onClose},n.createElement(c.Tx,{id:"desktop_open_views.modal.dismiss_button"})),n.createElement(s.DF,{onClick:this.onClickOpenInApp},n.createElement(c.Tx,{id:"desktop_open_views.open_in_desktop_modal.open_in_app_button"})))))}}f.displayName="OpenDesktopAppModal"},947168:(e,t,r)=>{r.d(t,{F:()=>P,P:()=>M});var n,i=r(652983),a=r(407908),o=r(899063),l=r(327251),s=r(600486),c=r(9247),d=r(958189),u=r(594619),p=r(782051),m=r(623046),h=r(85808),_=r(654230),g=r(435613),f=r(970740),E=r(111120),y=r(961215),v=r(55500),b=r(809377),I=r(464368),T=r(458763),w=r(716215),S=r(433517),C=r(13155);let O="post_to_feed_view--caretIcon--akCZQ",A=r(790070),N=r(792668),L=r(964441);var P=((n=P||{}).LOADED="post-to-feed-view-loaded",n.SELECT_NODE="post-to-feed-select-node",n);function R(e){return i.createElement("div",{className:null!==e.isSelectedIdx?"post_to_feed_view--selectedTile--D6T9A post_to_feed_view--tile--9a4ta":"post_to_feed_view--tile--9a4ta",onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},i.createElement("div",{className:"post_to_feed_view--tileThumbnail--FkrR9",style:{backgroundColor:e.backgroundColor}},i.createElement(m.u,{isLoading:!e.thumbnailUrl},()=>i.createElement("img",{className:"post_to_feed_view--thumbnail--uAumv",src:e.thumbnailUrl,alt:"",draggable:!1}))),i.createElement("div",{className:"post_to_feed_view--tileDetails--FZrxQ"},i.createElement("div",{className:"post_to_feed_view--nodeName--jbJro"},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&i.createElement("div",{className:"post_to_feed_view--tileOverlay--iyl2x"},e.isSelectedIdx+1))}function k(e){let{toggleSelectNode:t}=e,r=(e.pageNode&&(0,o.colorToHex)(e.pageNode.backgroundColor))??"",[n,a]=i.useState(!1),l=i.useCallback(n=>{t(n,{pageId:e.pageNode.guid,pageBackgroundColor:r})},[t,e.pageNode.guid,r]);return i.createElement("div",{className:"post_to_feed_view--pageSection--85j7J"},e.showCollapsibleHeader&&i.createElement("div",{className:"post_to_feed_view--pageHeader--ZOfTF",onClick:()=>a(e=>!e),role:"button",tabIndex:0},n?i.createElement(g.n,{svg:N,className:O}):i.createElement(g.n,{svg:A,className:O}),e.pageNode.name,"\xa0",i.createElement("span",{className:"post_to_feed_view--pageHeaderFaint--p-zwO"},"\xb7 ",e.nodes.length)),!n&&i.createElement("div",{className:"post_to_feed_view--tilesGrid--Ft03l"},e.nodes.map(t=>{var n,a,o;let s=(null==(n=e.selectedNodeGuids)?void 0:n.indexOf(t.guid))??null;return i.createElement(R,{key:`node-${t.guid}`,node:t,thumbnailUrl:(null==(a=e.thumbnailByGuid[t.guid])?void 0:a.url)??"",backgroundColor:r,isSelectedIdx:-1===s?null:s,onClick:()=>l(t.guid),totalNumSelected:(null==(o=e.selectedNodeGuids)?void 0:o.length)??null,observe:e.observe})})))}let D="feed-post-page-selector-menu";function M(){let e=i.useCallback((e,t)=>{let r=window.parent;window.self.origin===r.origin&&r&&r.postMessage({type:e,data:t})},[]),t=i.useRef(new d.yN("feed_post_to_file_load",{}));i.useEffect(()=>{t.current.start()},[]);let r=(0,I.Yu)(),n=(0,I.at)(),o=(0,a.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.key});i.useEffect(()=>{if(!r){t.current.stop();let r=t.current.getElapsedTime();(0,s.L9)("team_feed.post_from_file.file_load",{elapsedMs:r,fileKey:o}),e("post-to-feed-view-loaded",!0)}},[r,e,o]);let m=(0,a.v9)(e=>e.mirror.appModel.pagesList),O=i.useMemo(()=>m.reduce((e,t)=>({...e,[t.nodeId]:n.get(t.nodeId)}),{}),[m,n]),A=(0,a.I0)(),N=i.useMemo(()=>Object.values(O).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let r=n.get(t);return r&&("FRAME"===r.type||"SECTION"===r.type)?{...r,pageId:e.guid,name:null==r?void 0:r.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[O,n]),P=i.useMemo(()=>{let e={};for(let t of N)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[N]),R=i.useMemo(()=>new T.Or(N,{keys:["name"]}),[N]),[M,F]=i.useState(""),[x,U]=i.useState(null),[B]=(0,l.Z)(M,200),V=i.useCallback(e=>{U(R.search(e))},[R]),G=i.useMemo(()=>{if(null===x)return null;let e={};for(let t of x)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[x]);i.useEffect(()=>{""!==B&&V(B)},[B,V]);let H=(0,b.L)(),W=i.useRef(null),[K,z]=i.useState(null);i.useEffect(()=>{if(K||!n||!P||0===Object.keys(P).length)return;let e=n.get(Object.keys(P)[0]);e&&z(e)},[K,P,n]);let[Z,Y]=i.useState({}),[j,$]=i.useState([]),q=(0,c.D)(j),X=i.useRef(null),[J,Q]=i.useState([]),ee=i.useCallback(e=>{let t=[];e.forEach(e=>{var r;if(e.isIntersecting&&e.target instanceof HTMLElement){let n=null==(r=e.target.dataset)?void 0:r.observerGuid;n&&t.push(n)}}),Q(t)},[]),et=i.useMemo(()=>new IntersectionObserver(ee,{threshold:[.25]}),[ee]),er=i.useCallback(e=>{et&&et.observe(e)},[et]),[en,ei]=i.useState({});i.useEffect(()=>{if(0===J.length)return;let e=J.filter(e=>!en[e]);0!==e.length&&(0,v.lH)().loadAllImagesUnder(e,y.bcd.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{ei(t=>{if(t[e])return t;let r=(0,S.wn)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([r])),data:r}}})},0)})})},[J,en]),i.useEffect(()=>{if(j===q)return;let t=j.map(e=>({guid:e,thumbnail:en[e].data,backgroundColor:Z[e]}));e("post-to-feed-select-node",t)},[q,j,e,en,Z]);let ea=i.useCallback((e,t)=>{en[e]&&(Y(r=>t.pageBackgroundColor?{...r,[e]:t.pageBackgroundColor}:r),$(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=w.H0?t:[...t,e]))},[en]);return P&&0===Object.keys(P).length?i.createElement("div",{className:"post_to_feed_view--noContentContainer--VE8Tm post_to_feed_view--container--BiDZs text--fontPos16--oMC-G text--_fontBase--QdLsd"},(0,f.t)("fig_feed.no_top_level_nodes")):K?i.createElement("div",{className:"post_to_feed_view--container--BiDZs"},i.createElement("div",{className:"post_to_feed_view--searchFilterContainer--lyX72"},i.createElement(_.E1,{query:M,className:"post_to_feed_view--searchBar--IwmvI",onChange:F,clearSearch:()=>{F(""),U(null)},focusOnMount:!1,iconClassName:"post_to_feed_view--searchIcon---WXsZ",placeholder:(0,f.t)("fig_feed.search_frames")}),""===M&&i.createElement(i.Fragment,null,i.createElement("div",{role:"button",ref:W,onClick:()=>{(null==H?void 0:H.type)===D?A(E.kp()):A(E.SP({type:D}))},tabIndex:0,className:"post_to_feed_view--pageMenuDropdown--bS4RV"},i.createElement("div",null,K.name),i.createElement(g.n,{svg:L,width:"8px",autosize:!0})),W.current&&(null==H?void 0:H.type)===D&&i.createElement(C.AQ,{showPoint:!1,targetRect:W.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(P).map(e=>i.createElement(u.j.CheckableOption,{key:e,onClick:()=>z(O[e]),checked:K.guid===e},O[e].name))))),i.createElement(h.l,{hideScrollbar:!0,className:"post_to_feed_view--scrollContainer--syalR",innerClassName:"post_to_feed_view--innerScrollContainer--aP8K2",scrollContainerRef:X},""===M&&i.createElement(k,{pageNode:K,nodes:P[K.guid]||[],thumbnailByGuid:en,selectedNodeGuids:j,toggleSelectNode:ea,observe:er}),""!==M&&(null===G?i.createElement("div",{className:"post_to_feed_view--loadingSpinnerContainer--E8n20"},i.createElement(p.TK,{size:"large"})):Object.entries(G).length>0?Object.entries(G).map(([e,t])=>i.createElement(k,{key:e,pageNode:O[e],nodes:t,thumbnailByGuid:en,selectedNodeGuids:j,toggleSelectNode:ea,showCollapsibleHeader:!0,observe:er})):i.createElement("div",{className:"post_to_feed_view--notFoundContainer--5cMl3 text--fontPos16--oMC-G text--_fontBase--QdLsd"},i.createElement("div",null,i.createElement(f.Tx,{id:"fig_feed.no_frames_matching",searchQuery:i.createElement(i.Fragment,null,i.createElement("span",{className:"post_to_feed_view--searchQuery--TIyhI"},M))})))))):null}},498146:(e,t,r)=>{r.d(t,{d_:()=>o,gf:()=>s,oF:()=>l});var n=r(716250);let i=r(225742),a=r(719377),o=(0,n.BZ)().ee_linear_dodge_burn?["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"]:["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"],l=["PASS_THROUGH"].concat(o),s=e=>"NORMAL"===e||"PASS_THROUGH"===e?a:i},353451:(e,t,r)=>{r.d(t,{$:()=>p,D9:()=>y,Gd:()=>n,Ol:()=>g,Sw:()=>m,Vf:()=>E,d_:()=>_,dl:()=>f,m9:()=>v});var n,i=r(652983),a=r(407908);r(5453);var o=r(512512),l=r(961215),s=r(784667),c=r(840568),d=r(671755),u=r(984792);let p=()=>{let e=(0,a.v9)(e=>e.mirror.selectionProperties),t=(0,a.v9)(e=>e.mirror.sceneGraphSelection);return e&&1===e.numSelected&&Object.keys(t).find(e=>e)||null},m=()=>{let e=(0,a.v9)(e=>e.mirror.sceneGraphSelection);return i.useMemo(()=>{let t=Object.keys(e);return 0===t.length?null:t},[e])},h=(e,t)=>e&&Number(e).toLocaleString("en",{maximumFractionDigits:t,useGrouping:!1}),_=()=>{let e=p(),t=(0,d.Mr)(e);if(null!=e&&null!=t)return t},g=()=>{let e=m(),t=(0,d.vl)(e??[]);if(e)return t},f=()=>{let e=(0,a.v9)(e=>e.mirror.objectsPanelRowRebuildCounter),t=(0,d.Ux)((e,t)=>e,e);return t},E=e=>(0,a.v9)(t=>{let r=e(t);if(null!=r&&(0,c.Wn)(r))return r}),y=(e,t)=>{let r=i.useMemo(()=>e?[{color:e,colorVar:t}]:[],[t,e]);return(0,u.hn)(r)},v=(e,t)=>{let r=(0,a.I0)(),n=i.useCallback(()=>{let n=window.getSelection();if(n&&n.toString().length>0||!e)return null;r(o.vQ({stringToCopy:e.toString(),ignoreLineBreaks:!1})),t&&t()},[t,e,r]);return e?n:void 0};(e=>{let t={prefix:"",suffix:"",delimiter:": ",quoted:!1};e.copyPairs=(e,r)=>{let n="",i={...t,...r};return e.forEach(e=>{if(e[1]){let t=e.length>2?{...i,...e[2]}:i,{prefix:r,suffix:a,delimiter:o,quoted:l}=t,s=l?`"${e[1]}"`:e[1];n+=`${r}${e[0]}${o}${s}${a}
`}}),n};let r=["true","false","nil","null"];e.unquoteEnumerableValues=function(e){return e.map(e=>{let[t,n]=e;return"string"==typeof n&&r.includes(n.toLowerCase())?[t,n,{quoted:!1}]:e})},e.useCopyAllProperties=t=>{let{height:r,width:a,left:o,top:l,cornerRadius:s,padding:c,justify:d}=t;return i.useCallback(()=>(0,e.copyPairs)([["height",`${r}px`],["width",`${a}px`],["left",`${o}px`],["top",`${l}px`],["border-radius",`${s}px`],["padding",n(c)],["justify",d]],{suffix:";"}),[r,a,o,l,s,c,d])};let n=e=>{if(!e)return;let t="single"===e.type?[e.value]:e.value,r=t.map(e=>h(e,0)).join("px ");return`${r}px`},o=e=>{if(e)switch(e.units){case"PERCENT":return`${h(e.value/100,4)}em`;case"PIXELS":return`${e.value}px`;default:return}},c={suffix:"px;"};e.useCopyAllTypography=t=>{let r=i.useCallback(()=>t?t.map(t=>{var r;let n=o(t.letterSpacing);return(0,e.copyPairs)([t.isStyleSoftDeleted?null:["//styleName",t.styleName],["font-family",t.fontFamily],["font-size",h(t.fontSize,0),c],["font-style",t.fontStyle],["font-weight",t.fontWeight],["line-height",h(t.lineHeight,0),c],["letter-spacing",n],["text-align",null==(r=t.textAlignHorizontal)?void 0:r.toLocaleLowerCase()],["font-variation-settings",t.fontVariationsCss]].filter(e=>!!e),{suffix:";"})}).join("\n"):"",[t]);return t?r:void 0};let d=(e,t,r)=>{let{paint:n}=e;switch(n.type){case"SOLID":if(1===r)return e.valueFormatter(e.colors[0],{hexCSSValue:!0});return l.hcX.convertGradientPaintToCSS(e.encodedPaint);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return l.hcX.convertGradientPaintToCSS(e.encodedPaint)}};e.copyColors=(e,t)=>{var r;return null==(r=null==e?void 0:e.map(r=>d(r,t,(null==e?void 0:e.length)||0)))?void 0:r.join(",\n")};let p={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},m="background";e.useCopyAllColors=(t,r)=>{let n=(0,a.v9)(e=>e.mirror.selectionProperties.numSelected)||0,o=i.useCallback(()=>{if(1===n&&t){let n=new Set;if(t.forEach(e=>{e.paint.blendMode&&n.add(e.paint.blendMode)}),n.size<=1){let i=(0,e.copyColors)(t,r),a=[];i&&a.push([m,i]);let o=[...n],l=o[0]?p[o[0]]:void 0;return l&&a.push(["background-blend-mode",l]),(0,e.copyPairs)(a,{suffix:";"})}}let i=t.reduce((e,t)=>{let n=t.paint.blendMode,i=n?p[n]:void 0;i&&e.push(["background-blend-mode",i]);let a=d(t,r,1),o=a?[m,a]:void 0;return o&&e.push(o),e},[]).filter(e=>e).map(e=>e);return(0,e.copyPairs)(i,{suffix:";"})},[t,n,r]);return t?o:void 0};let _=(t,r,n,i)=>{let a=r.includes(" "),o=n.length>1||1===n.length&&"SOLID"!==n[0].paint.type,l=e.copyColors(n,t);if(!o&&!a)return`${i??"border"}: ${r} solid ${l}`;let s=a?[["border-width",r],["border-style","solid"]]:[[`${i??"border"}`,`${r} solid`]];return l&&s.push(o?["border-image-source",l]:["border-color",l]),(0,e.copyPairs)(s,{suffix:";\n"})};e.useStrokeCopyValue=(e,t,r)=>{let n=(0,s.iD)();return i.useMemo(()=>_(n,e,t,r),[n,e,t,r])},e.useCopyAllStrokes=e=>{let t=(0,s.iD)();return i.useMemo(()=>e.map(e=>_(t,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[t,e])};let g=e=>e.map(e=>void 0===e?"":`${e}px`),f=(t,r,n)=>{var i,a;if("FOREGROUND_BLUR"===t.type||"BACKGROUND_BLUR"===t.type)return(0,e.copyPairs)([["backdrop-filter",`blur(${t.radius}px)`]]);let o=e.copyColors(r,n);if(!t.offset)return;let l=g([null==(i=t.offset)?void 0:i.x,null==(a=t.offset)?void 0:a.y,t.radius,t.spread]).join(" "),s=o?` ${o}`:"",c="INNER_SHADOW"===t.type?" inset":"",d=`${l}${s}${c}`;return(0,e.copyPairs)([["box-shadow",d]],{suffix:";"})};e.useCopyShadow=e=>{let t=(0,s.iD)(),r=y(e.color);return i.useMemo(()=>f(e,r,t),[e,r,t])},e.useCopyAllShadows=e=>{let t=(0,s.iD)(),r=(0,u.wR)(e,e=>e.color);return i.useCallback(()=>r.filter(e=>e.color).map(e=>f(e.value,[e.color],t)).join("\n"),[r,t])};let E=(e,t,r)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(t){if(r)return`{ mass: ${r[0]}, stiffness: ${r[1]}, damping: ${r[2]} }`;return e}return`cubic-bezier(${e})`}},v=e=>`${h(1e3*e,2)}ms`,b=t=>{let r=`// ${t.event}
`,n=t.action,i=[];return t.delay&&i.push(["animation-delay",v(t.delay)]),t.action&&(i.push([`// ${null==n?void 0:n.action}`,`"${(null==n?void 0:n.value)??""}"`]),(null==n?void 0:n.hasAnimation)&&(i.push(["// Animate",(null==n?void 0:n.animation)??""]),(null==n?void 0:n.isSpringTransition)?i.push(["// Spring",E(null==n?void 0:n.curve,null==n?void 0:n.isSpringTransition,null==n?void 0:n.curveFunction)]):(i.push(["animation-timing-function",E(null==n?void 0:n.curve)]),i.push(["animation-duration",v(n.duration??0)])))),r+e.copyPairs(i,{suffix:";"})};e.useCopyAllInteractions=e=>i.useCallback(()=>e.map(e=>b(e)).join("\n"),[e]);let I=t=>{var r;let n=t.image.name,i=`${n}.${t.animatedImage?"gif":"png"}`;return(0,e.copyPairs)([[`// ${t.animatedImage?"GIF":"Image"}`,n],["background",`url("${i}")`],["background-size","FILL"==(r=t.imageScaleMode)?"cover":"FIT"==r?"contain":void 0],["opacity",t.opacity<1?t.opacity.toFixed(2):void 0],["background-blend-mode",p[t.blendMode]]],{suffix:";"})};e.useCopyImages=e=>i.useCallback(()=>e.map(e=>I(e)).join("\n"),[e])})(n||(n={}))},10546:(e,t,r)=>{r.d(t,{BJ:()=>R,BV:()=>en,EM:()=>W,Fl:()=>er,GN:()=>x,HP:()=>j,J1:()=>O,K6:()=>ec,PF:()=>C,WB:()=>G,bM:()=>A,cR:()=>J,dq:()=>el,f$:()=>ea,gI:()=>ee,i4:()=>H,iA:()=>V,iQ:()=>q,iz:()=>ei,lY:()=>U,n7:()=>X,qA:()=>f,rF:()=>B,sJ:()=>Q,tv:()=>k,uW:()=>N,xs:()=>F,yZ:()=>et,yc:()=>P});var n=r(652983),i=r(716250),a=r(970740),o=r(824801),l=r(231690),s=r(257186),c=r(32483),d=r(954035),u=r(961215),p=r(840568),m=r(467373),h=r(872551),_=r(708353);class g extends n.PureComponent{onMouseDown(e){if(2===e.detail){let t=window.getSelection(),r=document.createRange();r.selectNodeContents(e.currentTarget),t&&(t.removeAllRanges(),t.addRange(r)),e.stopPropagation()}}render(){return n.createElement("span",{onMouseDown:this.onMouseDown},this.props.children)}}g.displayName="TextSelectionGroup";class f extends n.PureComponent{render(){return n.createElement("div",{className:_.NO},this.props.children)}}f.displayName="InspectionGroup";class E extends n.PureComponent{render(){return n.createElement("div",{className:_.Pf},this.props.name?`${this.props.name}: `:"",this.props.children)}}E.displayName="PropertyInspector";class y extends n.PureComponent{formatMixed(e){return(0,a.t)("inspect_panel.property.mixed")}render(){return n.createElement(E,{name:this.props.name},(0,p.Wn)(this.props.value)?this.format(this.props.value):this.formatMixed(this.props.value))}}y.displayName="SelectionPropertyInspector";class v extends y{format(e){return e}}class b extends n.PureComponent{formatMixed(e,t){return(0,a.t)("inspect_panel.property.mixed_value")}render(){return n.createElement(E,{name:this.props.name},(0,p.Wn)(this.props.value)?this.format(this.props.value,this.props.target):this.formatMixed(this.props.value,this.props.target))}}b.displayName="TargetDependentSelectionPropertyInspector";let I=e=>parseFloat((null==e?0:e).toFixed(2)).toString(),T=e=>{let t=I(e);return -1===t.indexOf(".")?t+".0":t},w=(e,t)=>{switch(t){case u.VmB.CSS:return n.createElement(g,null,`${I(e)}px`);case u.VmB.ANDROID:return n.createElement(g,null,`${I(e)}dp`);case u.VmB.IOS:return n.createElement("span",null,n.createElement(g,null,`${I(e)}`)," pt")}},S=e=>`${I(e)}%`;class C extends b{format(e,t){return w(e,t)}}class O extends b{format(e,t){return t===u.VmB.ANDROID?n.createElement(g,null,`${I(e)}sp`):w(e,t)}}class A extends y{format(e){return S(e)}}class N extends b{format(e,t){return"PIXELS"===(e=e||{units:"PERCENT",value:0}).units?w(e.value,t):S(e.value)}}let L=new c.Fz;class P extends y{format(e){return L.format(e)}}class R extends v{}class k extends v{}let D=new d.QB;class M extends y{format(e){return D.format(e)}}let F=M,x=M,U=M,B=M,V=M,G=M,H=M;class W extends y{format(e){return(0,i.BZ)().prototype_sticky_scrolling?d.zq.format(e):h.p.directionFormatter.format(e)}}class K extends n.PureComponent{render(){let{color:e,target:t}=this.props;switch(t){case u.VmB.CSS:return n.createElement(g,null,(e.a<1?o.Z:l.Co).format(e));case u.VmB.ANDROID:return n.createElement(g,null,l.Co.formatForAndroid(e));case u.VmB.IOS:{let t=T(e.r),r=T(e.g),i=T(e.b),a=T(e.a);return n.createElement("span",null,"rgba ",n.createElement(g,null,`${t}, ${r}, ${i}, ${a}`))}}}}K.displayName="PlatformFormattedColor";class z extends n.PureComponent{render(){let{target:e,stop:t}=this.props;switch(e){case u.VmB.CSS:return n.createElement("div",{className:_.Pf},n.createElement(K,{color:t.color,target:e})," @ ",n.createElement(g,null,S(100*t.position)));case u.VmB.ANDROID:case u.VmB.IOS:return n.createElement("div",{className:_.Pf},n.createElement(K,{color:t.color,target:e})," @ ",n.createElement(g,null,T(t.position)))}}}z.displayName="SelectableColorStop";class Z extends n.PureComponent{render(){let e=o.Z.format(this.props.color);return n.createElement("span",{className:_.Vm,style:{background:e}})}}Z.displayName="ColorSwatch";class Y extends n.PureComponent{render(){let e="linear-gradient(180deg, "+this.props.stops.map(e=>o.Z.format(e.color)).join(", ")+")";return n.createElement("span",{className:_.Vm,style:{background:e}})}}Y.displayName="GradientSwatch";class j extends n.Component{render(){let e=this.props.colorNameMap&&this.props.colorNameMap[o.Z.format(this.props.value)];return n.createElement("div",{className:_.E_},n.createElement(Z,{color:this.props.value}),n.createElement("div",{className:_.Pf},e&&`${e} (`,n.createElement(K,{color:this.props.value,target:this.props.target}),e&&")"))}}j.displayName="ColorInspector";let $=new d.RG,q=(e,t)=>`/file/${e}/image/${t}`,X=async({paint:e,fileKey:t})=>{let r;if(!t)return null;let n=e.animatedImage||e.image;"VIDEO"===e.type&&e.video?r=e.video.hash:n&&n.hash&&(r=n.hash);let i="";if(r&&(i=Array.from(r).map(e=>(e<16?"0":"")+e.toString(16)).join("")),!i)return null;if("VIDEO"!==e.type)return q(t,i);{let e=await m.h.getVideosDownload({hexHash:i,fileKey:t});return e.data.meta.signed_url}};function J(e){return"VIDEO"===e.type?"mp4":null!=e.animatedImage?"gif":"png"}function Q(e){let t=e.animatedImage||e.image,r="VIDEO"===e.type?"video":"image";return`${t&&t.name||r}`}class ee extends n.PureComponent{constructor(e){super(e),this.paintTypeFormatter=new d.c0(()=>this.props.paint),this.state={downloadUrl:""}}updateDownloadUrlForNewPaint(){let e=this.props.paint,t=this.props.openFileKey;X({paint:e,fileKey:t}).then(e=>{if(this.setState({downloadUrl:e}),null===e){console.error("No download args for paint type: "+this.props.paint.type);return}})}componentDidMount(){this.updateDownloadUrlForNewPaint()}componentDidUpdate(e,t,r){e.paint!==this.props.paint&&this.updateDownloadUrlForNewPaint()}downloadLinkFor(e){if(!this.props.openFileKey)return"";let t=J(e),r=`${Q(e)}.${t}`,i="IMAGE"===e.type||"VIDEO"===e.type;return this.state.downloadUrl&&i?n.createElement("a",{href:this.state.downloadUrl,target:"_blank",rel:"noopener"},r):r}render(){let{paint:e,name:t}=this.props;switch(e.type){case"SOLID":{let r={...e.color,a:e.color.a*e.opacity};return n.createElement("div",null,n.createElement(E,{name:t},n.createElement(a.Tx,{id:"inspect_panel.colors.solid"})),e.blendMode&&"NORMAL"!==e.blendMode&&n.createElement(U,{name:(0,a.t)("inspect_panel.colors.blend"),value:e.blendMode}),this.props.children,n.createElement(j,{value:r,target:this.props.target,colorNameMap:this.props.colorNameMap}))}case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":{let r=this.paintTypeFormatter.format(e.type);return n.createElement("div",null,n.createElement(E,{name:t},n.createElement(a.Tx,{id:"inspect_panel.colors.gradient",gradientType:r})),e.blendMode&&"NORMAL"!==e.blendMode&&n.createElement(U,{name:(0,a.t)("inspect_panel.colors.blend"),value:e.blendMode}),this.props.children,n.createElement("div",{className:_.E_},n.createElement(Y,{stops:e.stops}),n.createElement("div",null,e.stops.map((e,t)=>n.createElement(z,{key:t,stop:e,target:this.props.target})))))}case"IMAGE":case"VIDEO":return n.createElement("div",null,n.createElement(E,{name:t},"IMAGE"===e.type?n.createElement(a.Tx,{id:"inspect_panel.images.image_type"}):n.createElement(a.Tx,{id:"proto.prototype_panel.video"})),n.createElement(E,{name:(0,a.t)("inspect_panel.images.file_name")},this.downloadLinkFor(e)),e.blendMode&&"NORMAL"!==e.blendMode&&n.createElement(U,{name:(0,a.t)("inspect_panel.colors.blend"),value:e.blendMode}),n.createElement(E,{name:(0,a.t)("inspect_panel.images.scale_mode")},$.format(e.imageScaleMode)),e.opacity<1&&n.createElement(A,{name:(0,a.t)("inspect_panel.properties.opacity"),value:100*e.opacity}),this.props.children)}}}ee.displayName="PaintInspector";class et extends y{format(e){switch(e){case"NONE":return(0,a.t)("inspect_panel.strokes.cap_none");case"ROUND":return(0,a.t)("inspect_panel.strokes.cap_round");case"SQUARE":return(0,a.t)("inspect_panel.strokes.cap_square");case"ARROW_LINES":return(0,a.t)("inspect_panel.strokes.cap_line_arrow");case"ARROW_EQUILATERAL":return(0,a.t)("inspect_panel.strokes.cap_triangle_arrow")}}}class er extends y{format(e){return s._.format(e)}}class en{format(e){switch(e){case"INNER_SHADOW":return(0,a.t)("inspect_panel.property.effect_inner_shadow");case"DROP_SHADOW":return(0,a.t)("inspect_panel.property.effect_drop_shadow");case"FOREGROUND_BLUR":return(0,a.t)("inspect_panel.property.effect_layer_blur");case"BACKGROUND_BLUR":return(0,a.t)("inspect_panel.property.effect_background_blur");default:return}}}class ei extends y{constructor(){super(...arguments),this.formatter=new en}format(e){return this.formatter.format(e)}}class ea extends b{format(e,t){return n.createElement("span",null,w(e.x,t),", ",w(e.y,t))}}let eo=class extends y{format(e){return eo.formatter.format(e)}},el=eo;el.formatter=new d.XM;let es=class extends y{format(e){return es.formatter.format(e)}},ec=es;ec.formatter=new d.N1},143559:(e,t,r)=>{r.d(t,{Q$:()=>V,Yf:()=>H,bt:()=>W,i:()=>B,oc:()=>G,pm:()=>$});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(172497),c=r(810373),d=r(767310),u=r(571529),p=r(204829),m=r(970740),h=r(280251),_=r(824801),g=r(231690),f=r(32483),E=r(158774),y=r(527700),v=r(961215),b=r(784667),I=r(809340),T=r(321909),w=r(225468),S=r(471845),C=r(647180),O=r(160905),A=r(158314),N=r(303801),L=r(482919),P=r(535390),R=r(203378),k=r(734702),D=r(332224),M=r(251316);let F=(0,s.F)(D.K0J),x=r(884823);function U(e,t){return Object.keys(e).every(r=>e[r]===t[r])}class B extends L.Ph{}class V extends L.Wx{}let G={format:e=>e==v.qzo.HEX?"Hex":v.qzo[e]};var H=((n=H||{}).FULL="full",n.SIMPLE_WITH_OPACITY="simple_with_opacity",n.SIMPLE="simple",n);class W extends p.Vx{constructor(e){super(e),this.onHSLVAChange=(e,t)=>{let r=(0,y.RT)(e);this.setState({hslva:e,rgba:r}),this.props.onColorChange(r,t?T.P7.YES:T.P7.NO_BUT_TRACK_AS_EDIT),t&&this.props.analytics&&I.Tx.trackFromFullscreen(this.props.analytics.name,{source:"slider",color:g.Co.format(r),...this.props.analytics.properties})},this.onOpacityChange=(e,t)=>{if(!this.props.onOpacityChange){this.onHSLVAChange(e,t);return}let r=(0,y.RT)(e);this.setState({hslva:e,rgba:r}),this.props.onOpacityChange(r.a,t?T.P7.YES:T.P7.NO_BUT_TRACK_AS_EDIT),t&&this.props.analytics&&I.Tx.trackFromFullscreen(this.props.analytics.name,{source:"slider",color:g.Co.format(r),...this.props.analytics.properties})},this.onHexInputChange=(e,t)=>{this.props.onColorChange(e,t),this.props.analytics&&I.Tx.trackFromFullscreen(this.props.analytics.name,{source:"hex",color:g.Co.format(e),...this.props.analytics.properties})},this.toggleDropper=e=>{e.stopPropagation(),E.Gr.triggerAction("toggle-dropper")},this.onColorFormatChange=e=>{(0,b.tZ)().colorFormat.set(e)},this.renderSimpleColorControls=()=>{let e=this.props.currentTool===v.UAh.DROPPER_COLOR;return i.createElement("div",null,i.createElement("div",{className:M._i},!this.props.dropperDisabled&&i.createElement("div",{className:M.SP},i.createElement(A.I_,{svg:x,fill:"dark"===this.props.theme?"white":void 0,selected:e,onPointerDown:this.toggleDropper,recordingKey:p.ar(this.props,"dropperButton"),"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:l()({[M.HW]:!e&&"dark"===this.props.theme})})),i.createElement(z,{recordingKey:p.ar(this.props,"hexInput"),...this.props,onColorChange:this.onHexInputChange})),i.createElement("div",{className:l()({[M.bF]:!0,[M.cF]:"simple"===this.props.displayType,[M.oT]:"simple_with_opacity"===this.props.displayType})},i.createElement(P.f,{width:140,color:this.state.hslva,changeCallback:this.onHSLVAChange,containerClass:M.$i,recordingKey:p.ar(this.props,"hueControl")}),"simple_with_opacity"===this.props.displayType&&i.createElement(R.O,{width:140,color:this.state.hslva,changeCallback:this.onOpacityChange,containerClass:M.$i,recordingKey:p.ar(this.props,"opacityControl")})),i.createElement(k.g,{size:184,color:this.state.hslva,changeCallback:this.onHSLVAChange,ignoreWheelCallback:!0,recordingKey:p.ar(this.props,"slvControl")}))},this.state=this.stateFromProps(e)}UNSAFE_componentWillReceiveProps(e){var t;if((U(e.color,this.props.color)||U(e.color,this.state.rgba))&&this.props.colorFormat===e.colorFormat)return;let r=this.stateFromProps(e);("l"in r.hslva&&(0===r.hslva.l||1===r.hslva.l)||"v"in r.hslva&&0===r.hslva.v)&&(r.hslva={...r.hslva,s:this.state.hslva.s});let n=(0,d.C7)(this.state.hslva.h,0)&&(0,d.C7)(r.hslva.h,1),i=(0,d.C7)(this.state.hslva.h,1)&&(0,d.C7)(r.hslva.h,0);t=e.color,((0,d.C7)(t.r,t.g)&&(0,d.C7)(t.r,t.b)||n||i)&&(r.hslva={...r.hslva,h:this.state.hslva.h}),this.setState(r)}stateFromProps(e){let t=e.colorFormat===v.qzo.HSL?(0,y.pV)(e.color):(0,y.he)(e.color);return{hslva:t,rgba:e.color}}render(){let e={...this.props};return(delete e.recordingKey,"simple"===this.props.displayType||"simple_with_opacity"===this.props.displayType)?this.renderSimpleColorControls():i.createElement("div",null,i.createElement(k.g,{size:F,color:this.state.hslva,changeCallback:this.onHSLVAChange,recordingKey:p.ar(this.props,"slvControl"),containerClass:M.ZS}),i.createElement(N.lQ,null,i.createElement("div",{className:M.ai},i.createElement("div",{className:M.SP},i.createElement(A.I_,{svg:x,selected:this.props.currentTool===v.UAh.DROPPER_COLOR,onMouseDown:this.toggleDropper,recordingKey:p.ar(this.props,"dropperButton"),"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0})),i.createElement("div",{className:M.FR},i.createElement(P.f,{width:156,color:this.state.hslva,changeCallback:this.onHSLVAChange,containerClass:M.$i,recordingKey:p.ar(this.props,"hueControl")}),i.createElement(R.O,{width:156,color:this.state.hslva,changeCallback:this.onOpacityChange,containerClass:M.$i,recordingKey:p.ar(this.props,"opacityControl")}))),i.createElement(N.X2,null,i.createElement(B,{id:"color-input-type-select",className:M.aL,dropdownClassName:M.Sh,property:this.props.colorFormat,formatter:G,onChange:this.onColorFormatChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:p.ar(this.props,"colorFormatSelect")},i.createElement(V,{value:v.qzo.HEX,recordingKey:p.ar(this.props,"hexOption")}),i.createElement(V,{value:v.qzo.RGB,recordingKey:p.ar(this.props,"rgbOption")}),i.createElement(V,{value:v.qzo.CSS,recordingKey:p.ar(this.props,"cssOption")}),i.createElement(V,{value:v.qzo.HSL,recordingKey:p.ar(this.props,"hslOption")}),i.createElement(V,{value:v.qzo.HSB,recordingKey:p.ar(this.props,"hsvOption")})),this.props.colorFormat===v.qzo.HEX&&i.createElement(z,{recordingKey:p.ar(this.props,"hexInput"),...e}),this.props.colorFormat===v.qzo.RGB&&i.createElement(Z,{recordingKey:p.ar(this.props,"rgbInput"),...e}),this.props.colorFormat===v.qzo.CSS&&i.createElement(Y,{recordingKey:p.ar(this.props,"cssInput"),...e}),(this.props.colorFormat===v.qzo.HSL||this.props.colorFormat===v.qzo.HSB)&&i.createElement(j,{value:this.state.hslva,changeCallback:this.onHSLVAChange,recordingKey:p.ar(this.props,"hslvInput"),...e}))))}}W.displayName="ColorControls";let K=i.forwardRef((e,t)=>i.createElement("div",{ref:t,className:l()({[M.hY]:!e.isSimple,[M.N6]:e.isSimple})},e.children));function z(e){let t=(0,a.I0)(),r=(0,i.useRef)(null),n="simple"===e.displayType||"simple_with_opacity"===e.displayType;(0,i.useEffect)(()=>{n&&r.current&&(r.current.dataset.preferredTheme=e.theme)},[n,e.theme]);let o=(0,i.useMemo)(()=>n?g.Co:new g.jE({parseAlpha:!0}),[n]),s=e=>{e.keyCode===c.sr.ESCAPE&&t(h.le())};return i.createElement(K,{ref:r,isSimple:n},i.createElement(O.TC,{className:l()({[M.$v]:!n,[M.P8]:n}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:o,property:e.color,onChange:e.onColorChange,autoFocus:!u.ZP.isIpad,onKeyDown:s,recordingKey:p.ar(e,"color"),forwardedRef:e.hexInputRef}),!n&&i.createElement(S.q,{className:M.Oh,value:e.color.a,onValueChange:(t,r)=>{e.onColorChange({...e.color,a:t},r)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:t,onKeyDown:s,recordingKey:p.ar(e,"opacity")}))}class Z extends p.Vx{constructor(){super(...arguments),this.formatter=new f.QV({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,t)=>{this.props.onColorChange({...this.props.color,a:e},t)},this.onKeyDown=e=>{e.keyCode===c.sr.ESCAPE&&this.props.dispatch(h.le())}}render(){return i.createElement(K,null,i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.r,onValueChange:this.onRChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,autoFocus:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.red"),recordingKey:p.ar(this.props,"red")}),i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.g,onValueChange:this.onGChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noLeftBorder:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.green"),recordingKey:p.ar(this.props,"green")}),i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.b,onValueChange:this.onBChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noBorderOnFocus:!0,noLeftBorder:!0,squareRightBorder:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.blue"),recordingKey:p.ar(this.props,"blue")}),i.createElement(S.q,{className:M.Oh,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,onKeyDown:this.onKeyDown,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:p.ar(this.props,"opacity")}))}}Z.displayName="RgbInputs";class Y extends p.Vx{constructor(){super(...arguments),this.formatter=_.Z,this.onKeyDown=e=>{e.keyCode===c.sr.ESCAPE&&this.props.dispatch(h.le())}}render(){return i.createElement(K,null,i.createElement(O.TC,{className:M.iv,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:p.ar(this.props,"color"),autoFocus:!0,noBorderOnFocus:!0,onKeyDown:this.onKeyDown}))}}Y.displayName="CssInputs";class j extends p.Vx{constructor(){super(...arguments),this.formatter360=new f.QV({normalizeFactor:360,min:0,max:1}),this.formatter100=new f.QV({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,t)=>{this.props.onColorChange({...this.props.color,a:e},t)},this.onKeyDown=e=>{e.keyCode===c.sr.ESCAPE&&this.props.dispatch(h.le())}}render(){return i.createElement(K,null,i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,squareRightBorder:!0,formatter:this.formatter360,scrubMultiplier:1/360,value:this.props.value.h,onValueChange:this.onHChange,recordingKey:p.ar(this.props,"hue"),autoFocus:!0,noBorderOnFocus:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.hue"),onKeyDown:this.onKeyDown}),i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:this.props.value.s,onValueChange:this.onSChange,recordingKey:p.ar(this.props,"saturation"),noBorderOnFocus:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":(0,m.t)("fullscreen.color_controls.saturation"),onKeyDown:this.onKeyDown}),i.createElement(S.$c,{className:M.B8,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:"l"in this.props.value?this.props.value.l:this.props.value.v,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:p.ar(this.props,"value"),noBorderOnFocus:!0,"data-tooltip-type":w.fR.TEXT,"data-tooltip":"l"in this.props.value?(0,m.t)("fullscreen.color_controls.lightness"):(0,m.t)("fullscreen.color_controls.brightness"),onKeyDown:this.onKeyDown}),i.createElement(S.q,{className:M.Oh,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:p.ar(this.props,"opacity"),onKeyDown:this.onKeyDown}))}}function $(e){let t=(0,a.I0)(),r=(0,i.useRef)(null);(0,i.useEffect)(()=>{r.current&&(r.current.dataset.preferredTheme=e.theme)},[e.theme]);let n=(0,i.useMemo)(()=>new g.jE({parseAlpha:!0}),[]),o=e=>{e.keyCode===c.sr.ESCAPE&&t(h.le())};return i.createElement(K,{ref:r,isSimple:!1},i.createElement("div",{className:M.x3},i.createElement(C.o,{color:e.color,onMouseDown:e.onChitMouseDown}),i.createElement(O.TC,{className:M.$v,squareRightBorder:!0,noBorderOnFocus:!0,formatter:n,property:e.color,onChange:e.onColorChange,onKeyDown:o,recordingKey:p.ar(e,"color")})),i.createElement(S.q,{decimals:e.opacityDecimals,className:M.Oh,value:e.color.a,onValueChange:(t,r)=>{e.onColorChange({...e.color,a:t},r)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:t,onKeyDown:o,recordingKey:p.ar(e,"opacity")}))}j.displayName="HslvInputs"},705555:(e,t,r)=>{r.d(t,{OK:()=>$,_E:()=>X,sj:()=>ee});var n=r(652983),i=r(407908),a=r(399150),o=r(157446),l=r(226993),s=r(848080),c=r(46347);r(19516);var d=r(403273),u=r(9247);r(365653);var p=r(716250),m=r(381846),h=r(204829),_=r(564380);r(85808);var g=r(525699),f=r(970740);r(630201);var E=r(804089),y=r(916241),v=r(961215),b=r(784667),I=r(110044);r(72310);var T=r(809377),w=r(464368),S=r(321909),C=r(225468),O=r(516714);r(422827);var A=r(596085),N=r(916991),L=r(143559),P=r(857885),R=r(367250),k=r(831067);r(995948);var D=r(484662),M=r(733604);r(303801);var F=r(528017),x=r(838247),U=r(640634),B=r(725061),V=r(157607),G=r(236750),H=r(859105),W=r(465701),K=r(90870);let z=r(295799);function Z(e,t){let r=(0,I.wC)(e);if(r){let e=r.stops;return t.index<e.length?e[t.index].color:r.stops[0].color}{let t=(0,I.G$)(e);return(0,c.q8)(!!t,"paint is neither a gradient nor a solid"),{...t.color,a:t.opacity??1}}}function Y(e,t,r,i){let a=(0,u.D)(e);n.useEffect(()=>{e!==a&&e===v.UAh.DROPPER_COLOR&&(!t||t.includes("custom_color"))&&!i&&r("custom_color")},[e,r,i,t,a])}function j({initialView:e,isBoundToLibraryAsset:t,supportedViews:r}){let i;let[a,o]=n.useState((i=e||(t?"library":"custom_color"),r&&!r.includes(i))?r[0]:i);return{currentView:a,setCurrentView:o}}function $({label:e,isActive:t,recordingKey:r,onClick:i,isOnlyTab:a}){let{version:o}=(0,s.Fg)();return"ui3"===o&&a?n.createElement(G.gg,{title:e}):n.createElement(_.yh,{className:t?K.kE:K.n2,onClick:i,role:"button",tabIndex:0,"data-label":e,recordingKey:r},e)}function q({currentView:e,rightButtons:t,recordingKey:r,onViewChange:i,supportedViews:a=["custom_color","library"]}){let o=h.ar(r,"viewTabs");return n.createElement("div",{className:K.X3},n.createElement(_.yh,{className:K.ug,recordingKey:o},(null==a?void 0:a.includes("custom_color"))&&n.createElement($,{isOnlyTab:1===a.length,label:(0,f.t)("fullscreen.properties_panel.color_picker.custom"),isActive:"custom_color"===e,onClick:()=>i("custom_color"),recordingKey:h.ar(o,"customColor")}),(null==a?void 0:a.includes("library"))&&n.createElement($,{isOnlyTab:1===a.length,label:(0,f.t)("fullscreen.properties_panel.color_picker.libraries"),isActive:"library"===e,onClick:()=>i("library"),recordingKey:h.ar(o,"library")})),t&&n.createElement("div",{className:K.NS},t))}let X=n.forwardRef(function({paint:e,paintId:t,selectedStyle:r,inheritStyleKeyField:i,currentSelectedGradientStop:l,colorFormat:s,currentTool:c,initialPosition:d,initialView:u,supportedViews:_,initialCreationModalView:E,initialStyleCreationPaint:y,openFileKey:b,recordingKey:T,dropdownShown:w,onKeyDown:S,onChange:A,onColorChange:N,onBlendModeChange:L,onPaintTypeChange:P,onColorVariableChange:R,onApplyStyle:k,onClose:D,dropImageOnPaintThumbnail:M,updateStillImageAndSelectionPropertiesForGIF:B,disableImagePaints:G,variableScopes:W},$){let X=n.useRef(null),{currentView:ee,setCurrentView:et}=j({initialView:u,isBoundToLibraryAsset:!!e.colorVar||!!r}),er=(0,H.u)(),en=n.useCallback((e,t)=>{t&&e.type&&er(e.type),A(e,t)},[er,A]),{VariableAndStyleCreateModalRoot:ei,VARIABLE_CREATE_MODAL_WIDTH_PX:ea}=n.useContext(x.H)??{},[eo,el]=n.useState(!1),es=n.useRef();Y(c,_,et,eo);let ec=n.useMemo(()=>{var t,r;let n=(0,I.G$)(e),i=(0,I.wC)(e);if(n&&(null==(r=null==(t=n.colorVar)?void 0:t.value)?void 0:r.alias))return{type:v.M6J.ALIAS,resolvedType:v.QC$.COLOR,value:U.BB(n.colorVar.value.alias)};if(!n&&!i)return{type:v.M6J.COLOR,resolvedType:v.QC$.COLOR,value:{r:1,g:1,b:1,a:1}};{let e=Z(n||i,l);return{type:v.M6J.COLOR,resolvedType:v.QC$.COLOR,value:e}}},[e,l]),ed=n.useCallback(()=>{var e;let t=null==(e=X.current)?void 0:e.getEl();if(!t)return null;let r=(0,O.JJ)(t,ea);es.current=r,el(!0)},[el,ea]),eu=n.useCallback(()=>{el(!1)},[el]);return n.createElement(n.Fragment,null,n.createElement(V.My,{title:n.createElement(q,{currentView:ee,recordingKey:T,rightButtons:n.createElement(a.h,{"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,f.t)("variables.binding_ui.create_variable_button_tooltip"),"aria-label":(0,f.t)("variables.binding_ui.create_variable_button_tooltip"),recordingKey:h.ar(T,"createVariable"),onClick:ed},n.createElement(g.r,{svg:z,fallbackSvg:z},n.createElement(o.Z,null))),supportedViews:_,onViewChange:et}),headerSize:"small",initialPosition:d,recordingKey:h.ar(T,"modal"),onClose:D,ref:(0,m.Z)($,X),autoflowHeight:!0,useHeuristicBasedPositioning:(0,p.BZ)().ee_ui_draggable_modal},n.createElement("div",{className:K.oC},function(){switch(ee){case"custom_color":return n.createElement(J,{paint:e,paintId:t,currentSelectedGradientStop:l,colorFormat:s,currentTool:c,openFileKey:b,recordingKey:T,dropdownShown:w,onKeyDown:S,onChange:en,onColorChange:N,onBlendModeChange:L,onPaintTypeChange:P,dropImageOnPaintThumbnail:M,updateStillImageAndSelectionPropertiesForGIF:B,disableImagePaints:G});case"library":return n.createElement(Q,{disabledVariableIds:new Set,selectedItem:r||(0,F.M)(e),recordingKey:h.ar(T,"libraryColors"),onVariableSelected:R,onStyleSelected:k,onClose:D,variableScopes:W})}}())),eo&&(es.current&&ei?n.createElement(ei,{initialPosition:es.current,initialVariableValue:ec,initialView:E,resolvedType:v.QC$.COLOR,inheritStyleKeyField:i,initialStyleCreationPaint:y,onCreateVariable:R,onCreateStyle:k,onClose:eu}):null))});function J({paint:e,paintId:t,currentSelectedGradientStop:o,colorFormat:s,currentTool:c,openFileKey:u,recordingKey:m,dropdownShown:_,onKeyDown:v,onChange:b,onColorChange:T,onBlendModeChange:w,onPaintTypeChange:O,dropImageOnPaintThumbnail:F,updateStillImageAndSelectionPropertiesForGIF:x,disableImagePaints:U}){let B=(0,i.I0)(),V=(0,y.jo)(),G=(0,d.N)(),H=n.useRef(null),z=(0,I.G$)(e),Y=(0,I.wC)(e),j=(0,I.Ud)(e);function $(e){let t=Z(e,o);return n.createElement(n.Fragment,null,n.createElement(A.BQ,{name:"Color picker",ref:H,handleKeyDown:v,focusOnMount:!0,forceUpdate:G},function(){if(Y){let e=r(472878),t=n.createElement(M.B,{paint:Y,paintTypeOptions:["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"],onChange:O,dropdownShown:_,recordingKey:h.ar(m,"gradientTypeSelect")}),i=n.createElement(a.h,{as:"button",actionOnPointerDown:!0,onClick:q,onMouseDown:E.UW,disabled:Y.stops.length<2,"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,f.t)("fullscreen.properties_panel.flip_gradient"),"aria-label":(0,f.t)("fullscreen.properties_panel.flip_gradient")},n.createElement(g.r,{svg:e},n.createElement(l.R,null))),s=(0,p.BZ)().gradient_tool_improvements;return n.createElement(n.Fragment,null,s?n.createElement("div",{className:K.$m},n.createElement("div",{className:K.e3},t),i):n.createElement("div",{className:K.WY},t),n.createElement(P.l,{colorProfile:V,paint:Y,onChange:b,currentSelectedGradientStop:o,hasFocus:(H.current&&H.current.hasFocus())??!1,dispatch:B,recordingKey:h.ar(m,"gradient")}))}}(),n.createElement(L.bt,{dispatch:B,dropdownShown:_,color:t,onColorChange:T,currentTool:c,colorFormat:s,recordingKey:h.ar(m,"colorControls")})),n.createElement(D.n,{recordingKey:m,onChange:T}))}let q=()=>{if(!Y)return;let e=Y.stops.slice();for(let t of e.values())t.position=1-t.position;b({...Y,stops:e},S.P7.YES)};return n.createElement(n.Fragment,null,n.createElement("div",{className:K.HQ},n.createElement(k.k,{paint:e,paintId:t,onChange:O,disableImagePaints:U,recordingKey:h.ar(m,"paintTypeGroupTabs")}),n.createElement(N.K,{blendMode:e.blendMode||"NORMAL",onBlendModeChange:w,dispatch:B,dropdownShown:_,recordingKey:h.ar(m,"blendModeSelection"),key:`color-picker-blend-mode-selection-${t}`})),z&&$(z),Y&&(Y?(0,p.BZ)().ds_gradient_variables?n.createElement(W.i,{currentSelectedGradientStop:o,onChange:b,onKeyDown:v,onPaintTypeChange:O,paint:Y}):$(Y):null),j&&x&&F&&n.createElement(R.wJ,{paint:j,paintId:t,openFileKey:u,dropImageOnPaintThumbnail:F,updateStillImageAndSelectionPropertiesForGIF:x,onChange:b,dispatch:B,dropdownShown:_,recordingKey:h.ar(m,"imageSettings")}))}function Q({selectedItem:e,disabledVariableIds:t,recordingKey:r,onVariableSelected:i,onStyleSelected:a,onClose:o,variableScopes:l}){return n.createElement(B.Jg,{selectedItem:e,resolvedType:v.QC$.COLOR,disabledVariableIds:t,pickerType:"color-picker",recordingKey:r,onVariableSelected:i,onStyleSelected:a,onClose:o,variableScopes:l})}function ee({color:e,boundVariable:t,disabledVariableIds:r,initialPosition:l,initialView:s,recordingKey:c,onChange:d,onVariableChange:u,onClose:p,hideLibraryContainer:m,variableScopes:_,isVariableCreationEnabled:E=!1}){let y=(0,i.I0)(),I=(0,T.L)(),S=(0,b.iD)(),A=(0,w.ob)(),N=n.useMemo(()=>u?void 0:["custom_color"],[u]),{currentView:P,setCurrentView:R}=j({initialView:s,isBoundToLibraryAsset:!!t,supportedViews:N});n.useEffect(()=>{s&&s!==P&&R(s)},[s,R]);let k=n.useRef(null),{VariableCreateModalRoot:M,VARIABLE_CREATE_MODAL_WIDTH_PX:F}=n.useContext(x.H)??{},[U,B]=n.useState(!1),G=n.useRef(),H=v.QC$.COLOR,W=n.useMemo(()=>(null==t?void 0:t.node_id)?{type:v.M6J.ALIAS,resolvedType:H,value:t.node_id}:e?{type:v.M6J.COLOR,resolvedType:H,value:e}:void 0,[t,e,H]);function Z(){var e;let t=null==(e=k.current)?void 0:e.getEl();if(!t)return;let r=(0,O.JJ)(t,F);G.current=r,B(!0)}return Y(A,N,R,!1),n.createElement(n.Fragment,null,n.createElement(V.My,{ref:k,title:n.createElement(q,{currentView:P,supportedViews:N,rightButtons:function(){if(M&&E)return n.createElement(a.h,{"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,f.t)("variables.binding_ui.create_variable_button_tooltip"),"aria-label":(0,f.t)("variables.binding_ui.create_variable_button_tooltip"),recordingKey:h.ar(c,"createVariable"),onClick:Z},n.createElement(g.r,{svg:z},n.createElement(o.Z,null)))}(),recordingKey:c,onViewChange:R}),headerSize:"small",initialPosition:l,recordingKey:h.ar(c,"modal"),onClose:p},n.createElement("div",{className:K.oC},function(){switch(P){case"custom_color":return n.createElement(n.Fragment,null,n.createElement(L.bt,{dispatch:y,dropdownShown:I,color:e,onColorChange:d,currentTool:A,colorFormat:S,recordingKey:h.ar(c,"colorControls")}),!m&&n.createElement(D.n,{onChange:d,recordingKey:c}));case"library":return n.createElement(Q,{selectedItem:t,disabledVariableIds:r,recordingKey:h.ar(c,"libraryColors"),onVariableSelected:u,variableScopes:_,onClose:p})}}())),U&&(M&&G.current&&u?n.createElement(M,{initialPosition:G.current,initialValue:W,resolvedType:v.QC$.COLOR,onCreateVariable:u,onClose:function(){B(!1)}}):null))}},8733:(e,t,r)=>{r.d(t,{i:()=>_,t:()=>h});var n,i=r(652983),a=r(848080),o=r(810373),l=r(767310),s=r(571529),c=r(204829),d=r(804089),u=r(401960),p=r(393357),m=r(168295),h=((n=h||{})[n.DEFAULT=0]="DEFAULT",n[n.LIGHT=1]="LIGHT",n);function _(e){let{version:t}=(0,a.Fg)();return i.createElement(g,{...e,version:t})}class g extends c.Vx{constructor(e){super(e),this.sliderRef=i.createRef(),this.sKeyHeld=!1,this.onChange=c.Eb(this,"change",e=>{this.props.onChange(e)}),this.onPointerDown=e=>{this.props.disabled||e.button!==u.t.LEFT||(e.stopPropagation(),e.currentTarget.setPointerCapture(e.pointerId),this.onSliderPointerEvent(e),this.setState({dragging:!0}))},this.onPointerUp=e=>{if(!this.state.dragging)return;this.onSliderPointerEvent(e);let t=this.getRawSliderValueFromPointerEvent(e);this.props.onStopDragging(e,t),this.setState({dragging:!1}),this.sKeyHeld=!1},this.onPointerMove=e=>{this.state.dragging&&(e.stopPropagation(),this.onSliderPointerEvent(e))},this.onPointerEnter=()=>{var e,t;this.props.disabled||null==(t=(e=this.props).onHover)||t.call(e,"ENTER")},this.onPointerLeave=()=>{var e,t;this.props.disabled||null==(t=(e=this.props).onHover)||t.call(e,"LEAVE")},this.onKeyDown=e=>{if(this.props.disabled)return;let t=e.shiftKey?this.props.shiftScale||10:1;switch(e.keyCode){case o.sr.LEFT_ARROW:case o.sr.DOWN_ARROW:if(void 0!==this.props.shiftScale){let e=Math.ceil(this.state.value/t)*t;this.setSliderValue(this.percentFromValue(e-1*t,this.props))}else this.setSliderValue(this.state.localValuePercent-.02*t);break;case o.sr.RIGHT_ARROW:case o.sr.UP_ARROW:if(void 0!==this.props.shiftScale){let e=Math.floor(this.state.value/t)*t;this.setSliderValue(this.percentFromValue(e+1*t,this.props))}else this.setSliderValue(this.state.localValuePercent+.02*t);break;case o.sr.HOME:this.setSliderValue(0);break;case o.sr.END:this.setSliderValue(1);break;case o.sr.BACKSPACE:case o.sr.DELETE:void 0!==this.props.defaultValue&&this.setSliderValue(this.percentFromValue(this.props.defaultValue,this.props));break;case o.sr.ESCAPE:case o.sr.ENTER:case o.sr.SPACE:e.currentTarget.blur();break;case o.sr.S:if(!this.state.dragging)return(0,p.pI)(e,p.jQ.YES,p.JP.YES),c.Ev;this.sKeyHeld=!0;break;default:return(0,p.pI)(e,p.jQ.YES,p.JP.YES),c.Ev}e.stopPropagation(),e.preventDefault()},this.onKeyUp=e=>{e.keyCode===o.sr.S&&(this.sKeyHeld=!1)},this.getRawSliderValue=(e,t=!1)=>{var r;let n=this.valueFromPercent((0,l.uZ)(e,0,1)),i=null==(r=this.props.recommendedValues)?void 0:r.find(e=>e===n);if(null!=i)return i;let a=this.getResolution(t),o=1/(a||1);return(0,l.uZ)(a?Math.round(n*o)/o:n,this.props.min,this.props.max)},this.setSliderValue=(e,t=!1)=>{let r=this.getRawSliderValue(e,t);r!==this.state.value&&(this.setState({value:r,localValuePercent:this.percentFromValue(r,this.props)}),this.onChange(r))},this.state={value:this.props.value,localValuePercent:this.percentFromValue(this.props.value,this.props),dragging:!1}}getSliderInfo(){let e=this.sliderRef.current,t={bounds:e.getBoundingClientRect(),length:e.clientWidth,height:e.clientHeight};return t}valueFromPercent(e){return this.props.min+(this.props.max-this.props.min)*e}percentFromValue(e,t){return(e-t.min)/(t.max-t.min)}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.value,localValuePercent:this.percentFromValue(e.value,e)})}getSliderPercentFromPointerEvent(e){var t;let r=e.clientX,n=r-this.getSliderInfo().bounds.left,i=this.getSliderInfo().length,a=n/i,o=s.ZP.mac&&e.ctrlKey,l=!o&&!this.sKeyHeld,c=(null==(t=this.props.recommendedValues)?void 0:t.length)||this.props.showDefaultValue;if(l&&c){let e=void 0!==this.props.defaultValue?this.percentFromValue(this.props.defaultValue,this.props):.5,t=a,r=Number.POSITIVE_INFINITY,n=(this.props.recommendedValues??[]).concat(this.props.showDefaultValue?[this.valueFromPercent(e)]:[]);for(let e of n){let n=this.percentFromValue(e,this.props),i=Math.abs(n-a);i<r&&(t=n,r=i)}let i=r<.02||r<.05&&t===e;i&&(a=t)}return a}onSliderPointerEvent(e){let t=this.getSliderPercentFromPointerEvent(e);this.setSliderValue(t,e.shiftKey)}getRawSliderValueFromPointerEvent(e){let t=this.getSliderPercentFromPointerEvent(e);return this.getRawSliderValue(t,e.shiftKey)}getResolution(e){let t=e?this.props.shiftScale:void 0;return t||this.props.resolution}render(){var e,t;let r,n;let a=this.percentFromValue(this.props.defaultValue||0,this.props),o="ui3"===this.props.version?"left":"marginLeft",l={[o]:`${100*this.state.localValuePercent}%`},s={[o]:`${100*a}%`},c=m.$v;this.props.disabled?c=m.kQ:1===this.props.sliderType?c=m.N6:this.state.value===this.props.defaultValue&&(c=m.Ui),r=this.props.fullWidth?m.As:this.props.long?m.YM:m.FR,n=this.props.fullWidth?m.eE:this.props.long?m.PD:m.Gk;let u=this.props.showDefaultValue||this.props.disabled||this.props.fullWidth||1===this.props.sliderType?m.jT:m.by,p=void 0!==this.props.defaultValue&&void 0===this.props.recommendedValues||(null==(e=this.props.recommendedValues)?void 0:e.length)===1&&this.props.recommendedValues[0]===this.props.defaultValue,h=this.props.showDefaultValue||this.props.disabled||this.props.fullWidth?m.Io:m.ge,_="ui3"===this.props.version&&p?h:this.props.showDefaultValue||this.props.disabled||this.props.fullWidth?m.iB:m.DF,g=Math.min(this.state.localValuePercent,a),f=Math.abs(this.state.localValuePercent-a);return i.createElement("div",{className:r,tabIndex:this.props.disabled?-1:this.props.tabIndex,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onBlur:e=>this.props.onStopDragging(e.nativeEvent),onPointerEnter:this.onPointerEnter,onPointerLeave:this.onPointerLeave},i.createElement("div",{className:n,onMouseDown:d.UW,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,ref:this.sliderRef},i.createElement("div",{className:u}),"ui3"===this.props.version&&this.props.isDelta&&i.createElement("div",{className:m.KH,style:{width:`${100*f}%`,left:`${100*g}%`}}),null==(t=this.props.recommendedValues)?void 0:t.map((e,t)=>{if(this.props.showDefaultValue&&e===this.props.defaultValue)return;let r={[o]:`${100*this.percentFromValue(e,this.props)}%`};return i.createElement("div",{key:t,className:h,style:r})}),this.props.showDefaultValue&&!this.props.hideValue&&i.createElement("div",{className:_,style:s}),!this.props.hideValue&&i.createElement("div",{className:c,style:l})))}}g.displayName="SliderImpl"},585692:(e,t,r)=>{r.d(t,{C:()=>f,e:()=>g});var n,i=r(652983),a=r(87608),o=r.n(a),l=r(204829),s=r(111120),c=r(840568),d=r(321909),u=r(289476),p=r(160905),m=r(482919),h=r(964207),_=r(775545),g=((n=g||{})[n.Select=0]="Select",n[n.Input=1]="Input",n);class f extends i.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,isFocused:!1,previousPreviewValue:this.props.property},this.onMouseOver=e=>{var t,r;null==(r=(t=this.props).onMouseEnter)||r.call(t,e),this.setState({isMouseOver:!0})},this.onMouseLeave=e=>{var t,r;null==(r=(t=this.props).onMouseLeave)||r.call(t,e),this.setState({isMouseOver:!1})},this.onFocus=e=>{var t,r;this.setState({isFocused:!0}),null==(r=(t=this.props).onInputFocus)||r.call(t,e)},this.onBlur=e=>{var t,r;this.setState({isFocused:!1}),null==(r=(t=this.props).onInputBlur)||r.call(t,e)}}componentDidUpdate(e){var t;this.props.enablePreview&&!e.dropdownShown&&(null==(t=this.props.dropdownShown)?void 0:t.type)===this.props.id&&this.setState({previousPreviewValue:this.props.property})}areValuesEqual(e,t){return null==e||null==t?null==e==(null==t):this.props.formatter.isEqual?this.props.formatter.isEqual(e,t):e===t}render(){var e;let t=(0,c.qD)(this.state.previousPreviewValue??this.props.property),r=[],n=!0;i.Children.forEach(this.props.children,e=>{var r;this.areValuesEqual(null==(r=null==e?void 0:e.props)?void 0:r.value,t)&&(n=!1)}),n&&t&&!this.props.omitValueFromDropdown&&(r.push(i.createElement(m.Wx,{value:t,key:"custom-option",dataTestId:`custom-option-${t}`},this.props.formatter.format(t))),0!==i.Children.count(this.props.children)&&r.push(i.createElement(m.Hz,{key:"custom-option-divider"})));let a=_.U_;!this.props.disabled&&(this.state.isMouseOver||this.state.isFocused)&&(a=_.Ws);let g=_.nC;this.props.disabled&&(g=_.H);let f=this.props.isTokenizable?h.H:p.Q1,E=e=>{var t,r;this.props.disableSelectFocus&&"ArrowDown"===e.key&&e.metaKey?(e.preventDefault(),this.props.dispatch(s.SP({type:this.props.id}))):null==(r=(t=this.props).onKeyDown)||r.call(t,e)};return i.createElement("div",{className:`${g} ${this.props.className||""}`,onMouseDown:this.props.onMouseDown,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave,"data-onboarding-key":this.props.onboardingKey,onKeyDown:e=>{var t,r,n,i,a;this.props.disableSelectFocus&&(null==(t=this.props.dropdownShown)?void 0:t.type)===this.props.id&&"ArrowUp"===e.key&&e.metaKey&&(this.props.dispatch(s.kp()),null==(n=null==(r=this.props.forwardedRef)?void 0:r.current)||n.focus(),null==(a=null==(i=this.props.forwardedRef)?void 0:i.current)||a.select())}},i.createElement(m.Ph,{id:this.props.id,formatter:this.props.formatter,property:this.state.previousPreviewValue??this.props.property,className:this.props.disabled?_.Tk:_.Ys,inputClassName:o()(a,this.props.inputClassName,{[_.si]:this.props.disableSelectFocus&&(this.state.isFocused||(null==(e=this.props.dropdownShown)?void 0:e.type)===this.props.id)}),dropdownClassName:this.props.dropdownClassName,onChange:(e,t)=>{this.props.onChange(e,t,0)},dispatch:this.props.dispatch,disabled:this.props.disabled,dropdownShown:this.props.dropdownShown,recordingKey:l.ar(this.props,"select"),svg:this.props.svg,icon:this.props.icon,fallbackSvg:this.props.fallbackSvg,ui3Icon:this.props.ui3Icon,svgClassName:this.props.svgClassName,dropdownWidth:this.props.dropdownWidth,willShowDropdown:this.props.willShowDropdown,onOptionFocus:this.props.onOptionFocus,disableSelectFocus:this.props.disableSelectFocus,openBelowTarget:this.props.openBelowTarget,chevronClassName:this.props.chevronClassName,dropdownAlignment:this.props.dropdownAlignment,onDropdownHidden:e=>{var t,r;e&&(null==(r=null==(t=this.props.forwardedRef)?void 0:t.current)||r.focus()),this.setState({previousPreviewValue:void 0})},enablePreview:this.props.enablePreview&&!!this.props.dropdownShown,optionsWithDisabledPreviews:this.props.optionsWithDisabledPreviews},r,this.props.children),this.props.scrubbableControlProps?i.createElement(u.Y,{...this.props.scrubbableControlProps,className:o()(_.rm,{[_.$m]:!!this.props.svg,[_.G_]:this.props.disableSelectFocus})},i.createElement(f,{dataTestId:this.props.dataTestId,className:this.props.inputClassName,formatter:this.props.formatter,property:this.props.forceInputPlaceholder&&this.props.placeholder?"":this.props.property,onChange:(e,t=d.P7.YES)=>{this.props.onChange(e,t,1)},onKeyDown:E,onKeyUp:this.props.onKeyUp,mixedMathHandler:this.props.mixedMathHandler,disabled:this.props.disabled,autoFocus:this.props.autoFocus,recordingKey:this.props.unNamespacedInputRecordingKey?this.props.recordingKey:l.ar(this.props,"input"),onFocus:this.onFocus,onBlur:this.onBlur,noBorderOnFocus:!0,forwardedRef:this.props.forwardedRef,placeholder:this.props.placeholder&&(this.props.forceInputPlaceholder||!this.props.property)?this.props.placeholder:void 0,allowEmpty:this.props.allowEmpty,noPlaceholderLine:this.props.noPlaceholderLine})):i.createElement(f,{dataTestId:this.props.dataTestId,className:`${_.qH} ${this.props.svg?_.$m:""} ${this.props.inputClassName||""}`,formatter:this.props.formatter,property:this.props.forceInputPlaceholder&&this.props.placeholder?"":this.props.property,onChange:(e,t=d.P7.YES)=>{this.props.onChange(e,t,1)},onKeyDown:E,onKeyUp:this.props.onKeyUp,disabled:this.props.disabled,autoFocus:this.props.autoFocus,recordingKey:this.props.unNamespacedInputRecordingKey?this.props.recordingKey:l.ar(this.props,"input"),onFocus:this.onFocus,onBlur:this.onBlur,forwardedRef:this.props.forwardedRef,placeholder:this.props.forceInputPlaceholder&&this.props.placeholder?this.props.placeholder:void 0}))}}f.displayName="ComboBox",f.propTypes={children:(e,t,r)=>{let n=e[t],a=null;return i.Children.forEach(n,e=>{e.type&&e.type.__IS_VALID_SELECT_CHILD__||(a=Error(`${r} children should be of type 'Option' or 'SelectDivider'`))}),a}}},629305:(e,t,r)=>{r.d(t,{Xd:()=>es,sB:()=>en,xW:()=>el});var n=r(652983),i=r(63730),a=r(407908),o=r(399150),l=r(324424),s=r(157446),c=r(606423),d=r(5453),u=r(598271),p=r(571529),m=r(204829),h=r(564380),_=r(525699),g=r(970740),f=r(280251),E=r(954109),y=r(158774),v=r(368337),b=r(961215),I=r(269075),T=r(840568),w=r(656077),S=r(321909),C=r(225468),O=r(596085),A=r(988091),N=r(373158),L=r(317356),P=r(528017),R=r(471828),k=r(246997),D=r(158314),M=r(529978),F=r(303801),x=r(261604),U=r(709393),B=r(522112);let V=r(267837),G=r(295799),H=r(452262),W=r(12303),K=r(932200),z=r(758236),Z=r(730536),Y=r(25248),j=r(891916),$=r(606132),q=()=>n.useCallback(e=>e.stopPropagation(),[]);function X(e){let{onDeleteProperty:t,onChange:r}=e,{getSelectedIndices:i,propertyList:a,setSelectedIndices:s,getSelectedIndicesAsSet:c}=e.selection,d=n.useCallback(()=>{let e=(0,T.NA)(a,[]),n=t;if(n||(n=t=>r(e.filter((e,r)=>!t.has(r)))),i().length){let e=c();n(e),s([])}else n(new Set([e.length-1])),r(e.slice(0,e.length-1))},[c,i,a,t,s,r]),u=q(),p=Number((0,T.Wn)(a)&&(0,T.NA)(a,[]).length);return n.createElement(o.h,{as:"button",recordingKey:m.ar(e,"removeButton"),disabled:0===p,"aria-label":(0,g.t)("fullscreen.draggable_list.remove"),onClick:d,onMouseDown:u},n.createElement(_.r,{svg:W,fallbackSvg:K},n.createElement(l.Z,null)))}function J(e){let{parent:t,toggleShowingStyles:r}=e,{current:i}=t,a=n.useCallback(()=>{let e=null==i?void 0:i.getBoundingClientRect();e&&r(e)},[i,r]),o=q();return e.toggleShowingStyles?n.createElement(D.I_,{recordingKey:m.ar(e,"stylesButton"),className:B.xe,svg:z,fallbackSvg:Z,"data-tooltip-type":C.fR.LOOKUP,"data-tooltip":"style",selected:e.isStylesPickerShown,onClick:a,onMouseDown:o}):null}function Q(e){return n.createElement(o.h,{recordingKey:m.ar(e,"resetInteractionsButton"),"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,g.t)("proto.prototype_panel.reset_interactions"),"aria-label":(0,g.t)("proto.prototype_panel.reset_interactions"),onClick:e.onResetInteractions},n.createElement(_.r,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:Y,fallbackSvg:Y}))}function ee(e){return n.createElement(F.hU,{className:B.K0,onMouseDown:e.addProperty,recordingKey:m.ar(e,"addButton"),"data-tooltip":(0,g.t)("fullscreen.draggable_list.add"),"data-tooltip-type":C.fR.TEXT,tooltipForScreenReadersOnly:!0},n.createElement(_.r,{svg:G,fallbackSvg:H},n.createElement(s.Z,null)))}function et(e){let t=q();return n.createElement("span",{className:B.dN},n.createElement(o.h,{as:"button",recordingKey:m.ar(e,"scrollBehaviorButton"),"data-testid":"scroll-behavior-button","data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,g.t)("fullscreen.draggable_list.scroll_behavior"),"aria-label":(0,g.t)("fullscreen.draggable_list.scroll_behavior"),onClick:e.toggleScrollBehaviorPicker,onMouseDown:t},n.createElement(_.r,{svg:V,fallbackSvg:V},n.createElement(c.O,null))))}function er(e){let t=e.checked?$:j;return n.createElement(D.I_,{recordingKey:m.ar(e,"addButton"),className:B.K0,"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,g.t)("fullscreen.toolbar.prototyping-visibility"),"data-tooltip-shortcut-key":"toggle-prototyping-info","data-onboarding-key":"visible-flows-toggle",svg:t,fallbackSvg:t,onClick:e.toggleVisibleFlows,selected:e.checked,selectedClassName:B._R})}function en(e){let{propertyList:t}=e.selection,r=(0,T.Wn)(t)&&0===(0,T.NA)(t,[]).length;return n.createElement("div",{className:B.rG},e.children,n.createElement("div",{className:B.SI},!r&&e.showRemoveButton&&n.createElement(X,{recordingKey:e.recordingKey,selection:e.selection,onDeleteProperty:e.onDeleteProperty,onChange:e.onChange}),n.createElement(J,{recordingKey:e.recordingKey,isStylesPickerShown:e.isStylesPickerShown||!1,toggleShowingStyles:e.toggleShowingStyles,parent:e.parent}),e.showResetInteractionsButton&&n.createElement(Q,{recordingKey:e.recordingKey,onResetInteractions:e.onResetInteractions}),e.showScrollBehaviorButton&&n.createElement(et,{recordingKey:e.recordingKey,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker}),!e.hideAddButton&&n.createElement(ee,{recordingKey:e.recordingKey,addProperty:e.addProperty}),e.showVisibleFlowsButton&&n.createElement(er,{recordingKey:e.recordingKey,toggleVisibleFlows:e.toggleVisibleFlows,checked:e.visibleFlowsButtonChecked})))}let ei=(e,t,r)=>{let i=n.useCallback(n=>{var i;let a=n||{selectedPropertyType:e,propertyList:t,currentSelectedProperty:r},o=(0,T.NA)(a.propertyList,[]);return a.selectedPropertyType===(null==(i=a.currentSelectedProperty)?void 0:i.type)?a.currentSelectedProperty.indices.filter(e=>e>=0&&e<o.length):[]},[r,e,t]),o=n.useCallback(()=>new Set(i()),[i]),l=(0,a.I0)(),s=n.useCallback(t=>{(0,d.Vg)(t,i())||(0===t.length?y.Gr.deselectProperty():y.Gr.updateAppModel({currentSelectedProperty:{type:e,indices:t}}),l(f.le()),l(f.aV()))},[i,e,l]);return n.useMemo(()=>({propertyList:t,getSelectedIndices:i,getSelectedIndicesAsSet:o,setSelectedIndices:s}),[t,i,o,s])};function ea(e){let{addProperty:t,hideAddButton:r}=e,{propertyList:a}=e.selection,o=n.useCallback(e=>{let n=(0,T.Wn)(a)&&0===(0,T.NA)(a,[]).length;e.currentTarget===e.target&&n&&!r&&t(e)},[t,a,r]),l=n.useRef(),s=n.useCallback(e=>{e&&(l.current=i.findDOMNode(e))},[l]);if(!e.title)return null;let c=0===Number((0,T.NA)(a,[]).length),d=e.isMixed||(0,T.nK)(a),u=!d&&!e.boldHeaderRow&&c;return n.createElement(F.X2,{ref:s,onMouseDown:o,className:u?B.Ak:void 0},n.createElement(en,{recordingKey:e.recordingKey,showRemoveButton:!c&&e.showRemoveButton,showResetInteractionsButton:e.showResetInteractionsButton,showScrollBehaviorButton:e.showScrollBehaviorButton,hideAddButton:e.hideAddButton,selection:e.selection,onDeleteProperty:e.onDeleteProperty,onChange:e.onChange,isStylesPickerShown:e.isStylesPickerShown||!1,toggleShowingStyles:e.toggleShowingStyles,parent:l,addProperty:e.addProperty,onResetInteractions:e.onResetInteractions,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,showVisibleFlowsButton:e.showVisibleFlowsButton,toggleVisibleFlows:e.toggleVisibleFlows,visibleFlowsButtonChecked:e.visibleFlowsButtonChecked},n.createElement(F.pY,{faded:c,className:B.FS,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},n.createElement(h.yh,{className:B.xV,recordingKey:m.ar(e,"panelTitle"),onMouseDown:o},e.title))))}class eo extends m.wA{constructor(e){super(e),this.focusChange=()=>this.forceUpdate(),this.keyboardReceiverRef=e=>{e&&(this.keyboardReceiver=e)},this.onKeyDown=m.pl(this,"keydown",e=>{if(this.props.shouldIgnoreKeyboardEvents)return;let t=e.event;switch(t.keyCode){case 8:case 46:this.removeProperty(),e.accept();break;case 68:if(this.props.shouldIgnoreKeyboardEventDuplicateProperty)return;(t.metaKey&&p.ZP.mac||t.ctrlKey&&!p.ZP.mac)&&(this.duplicateProperty(),e.accept());break;case 27:this.props.selectionHandler.getSelectedIndices().length&&(this.props.selectionHandler.setSelectedIndices([]),e.accept())}}),this.clipboardDataType=()=>{switch(this.props.selectedPropertyType){case b.Rmy.FILL:return"fillPaints";case b.Rmy.STROKE:case b.Rmy.STROKE_PRESET:return"strokePaints";case b.Rmy.EXPORT:return"exportSettings";case b.Rmy.LAYOUT_GRID:return"layoutGrids";case b.Rmy.EFFECT:return"effects";case b.Rmy.PROTOTYPE_INTERACTION:return"prototypeInteractions";case b.Rmy.PROTOTYPE_INHERITED_INTERNAL_INTERACTION:return null;default:throw Error(`Unexpected: ${b.Rmy[this.props.selectedPropertyType]}`)}},this.liftInteractionsFromInteractionGroups=e=>{let t=e.map(e=>e.interactions);for(var r of t)for(var n of r)n&&n.actions&&(n.actions=(0,M.$)(n.actions));let i=[].concat.apply([],t);return i},this.onClipboard=(e,t)=>{var r;let n=this.clipboardDataType();if(!n)return;let i=e.event,a=i.clipboardData||window.clipboardData,o=this.props.selectionHandler.getSelectedIndices();switch(t){case w.bc.COPY:case w.bc.CUT:if(o.length){let i=(0,T.qD)(this.props.propertyList),l=i?o.map(e=>i[e]):[];"prototypeInteractions"===n&&(l=this.liftInteractionsFromInteractionGroups(l)),("fillPaints"===n||"strokePaints"===n)&&(l=l.map(e=>(0,P.c)(e)));let s=v.T8((null==(r=this.props.openFile)?void 0:r.key)||null,{[n]:l});v._R(a,s,""),t===w.bc.CUT&&this.removeProperty(),e.accept()}break;case w.bc.PASTE:if("prototypeInteractions"===n)break;if(o.length){let t=v.xp(a);if(t){let r=v.RM(t),i=r.nodeChanges&&r.nodeChanges[0]||{},a=this.getProperties(i,n);if(a&&a.length){let t=o[o.length-1],r=(0,T.NA)(this.props.propertyList,[]);r=r.slice(0,t+1).concat(a).concat(r.slice(t+1)),this.props.onChange(r);let n=a.map((e,r)=>t+r+1);this.props.selectionHandler.setSelectedIndices(n),e.accept()}}}}},this.onPropertyChange=(e,t,r)=>{let n=(0,T.NA)(this.props.propertyList,[]).slice(0);n[e]=t,this.props.onChange(n,r)},this.removeProperty=()=>{let e=(0,T.NA)(this.props.propertyList,[]),t=this.props.onDeleteProperty;if(t||(t=t=>this.props.onChange(e.filter((e,r)=>!t.has(r)))),this.props.selectionHandler.getSelectedIndices().length){let e=this.props.selectionHandler.getSelectedIndicesAsSet();t(e),this.props.selectionHandler.setSelectedIndices([])}},this.duplicateProperty=()=>{let e=(0,T.NA)(this.props.propertyList,[]).slice();if(this.props.selectionHandler.getSelectedIndices().length){let t=this.props.selectionHandler.getSelectedIndices().map(t=>e[t]);for(let r of t){let t={...r};e.splice(e.indexOf(r),0,t)}this.props.onChange(e);let r=[];for(let n of t)r.push(e.indexOf(n));this.props.selectionHandler.setSelectedIndices(r)}},this.renderListItem=(e,t,r,n,i,a,o)=>this.props.renderProperty(e,t,r,n,this.keyboardReceiver&&this.keyboardReceiver.hasFocus(),this.onPropertyChange.bind(this,t),i,a,o)}UNSAFE_componentWillReceiveProps(e){this.props.currentSelectedProperty!==e.currentSelectedProperty&&(this.props.selectionHandler.getSelectedIndices(e).length?this.keyboardReceiver.focus():this.keyboardReceiver.blur())}getProperties(e,t){let r=e[t]||null,n=["fillPaints","strokePaints","backgroundPaints"];return n.indexOf(t)>=0&&(r=r||(()=>{for(let t of n){let r=e[t]||null;if(r&&r.length)return r}return null})()),r}render(){let e=(0,T.NA)(this.props.propertyList,[]),t=this.props.propertyList===T.t1||this.props.isMixed,r=this.props.renderHeader;return n.createElement(O.BQ,{name:"Draggable property list",handleKeyDown:this.onKeyDown,handleClipboard:this.onClipboard,ref:this.keyboardReceiverRef,forceUpdate:this.focusChange},r?n.createElement(r,{selectionHandler:this.props.selectionHandler}):n.createElement(ea,{title:this.props.title,recordingKey:this.props.recordingKey,showRemoveButton:this.props.showRemoveButton,showResetInteractionsButton:this.props.showResetInteractionsButton,showScrollBehaviorButton:this.props.showScrollBehaviorButton,hideAddButton:this.props.hideAddButton,selection:this.props.selectionHandler,onDeleteProperty:this.props.onDeleteProperty,onChange:this.props.onChange,isStylesPickerShown:this.props.isStylesPickerShown||!1,toggleShowingStyles:this.props.toggleShowingStyles,addProperty:this.props.addProperty,boldHeaderRow:this.props.boldHeaderRow,onResetInteractions:this.props.onResetInteractions,toggleScrollBehaviorPicker:this.props.toggleScrollBehaviorPicker,isMixed:this.props.isMixed,showVisibleFlowsButton:this.props.showVisibleFlowsButton,toggleVisibleFlows:this.props.toggleVisibleFlows,visibleFlowsButtonChecked:this.props.visibleFlowsButtonChecked,isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom}),n.createElement(R.HJ,{isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom||null},t&&n.createElement(F.X2,null,n.createElement(F.o0,{className:B.PS},n.createElement(g.Tx,{id:"fullscreen.properties_panel.click_plus_to_replace_mixed_content"}))),!t&&n.createElement(U.X,{listItems:e,onChange:this.props.onChange,onReorder:this.props.onReorder,selectedIndices:this.props.selectionHandler.getSelectedIndices(),updateSelection:this.props.selectionHandler.setSelectedIndices,renderListItem:this.renderListItem,reversed:void 0===this.props.reversed||this.props.reversed})))}}function el(e){let t=ei(e.selectedPropertyType,e.propertyList,e.currentSelectedProperty);return n.createElement(eo,{...e,selectionHandler:t})}eo.displayName="DraggablePropertyList";class es extends m.wA{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.context=null,this.onApplyStyle=(e,t)=>{this.props.dispatch(E.bg({style:e,inheritStyleKeyField:this.props.inheritStyleKeyField,fromSearch:t}))},this.addProperty=e=>{this.props.addProperty(e),this.isInStyleModal()||this.props.dispatch(f.le()),this.props.dispatch(f.aV())},this.removeAllProperties=()=>{(0,L.Je)(this.props.inheritStyleKey)&&I.y2.user("remove-all-properties",()=>b.iTB.applyStyleToSelection(this.props.inheritStyleKeyField,u.A0,!1)),this.props.onChange([],S.P7.YES)},this.toggleShowingStyles=e=>{if(this.props.onPickerIconClick){let t=e.left+(e.width-x.L)/2,r=e.top+e.height;this.props.onPickerIconClick({initialX:t,initialY:r});return}if((0,L.L3)(this.props))this.props.dispatch(f.aV());else{let t=e.left+(e.width-x.L)/2,r=e.top+e.height;this.props.dispatch(f.nc({id:(0,L.hz)(this.props.inheritStyleKeyField),initialX:t,initialY:r,modal:!0}))}},this.onMouseOver=()=>{this.setState({hasEverHovered:!0})}}isInStyleModal(){return null!=this.context}isInCreateStyleModal(){return this.context===k.mL.CREATE_STYLE}isInCreateVariableStyleModal(){return this.context===k.mL.CREATE_VARIABLE_STYLE}render(){let e=this.props.propertyList===T.t1||this.props.inheritStyleKey===T.t1,t=!e&&0===(0,T.NA)(this.props.propertyList,[]).length&&!(0,T.qD)(this.props.inheritStyleKey);if(e){let e=(0,L.L3)(this.props);return n.createElement("div",{onMouseOver:this.onMouseOver},n.createElement(el,{...this.props,isMixed:!0,addProperty:this.addProperty,toggleShowingStyles:this.toggleShowingStyles,isStylesPickerShown:!!e}),this.state.hasEverHovered&&n.createElement(N.D,{inheritStyleKey:this.props.inheritStyleKey,inheritStyleID:this.props.inheritStyleID,styleType:this.props.styleType}),e&&n.createElement(N.P,{picker:e,styleType:this.props.styleType,inheritStyleKey:this.props.inheritStyleKey,inheritStyleID:this.props.inheritStyleID,stylePickerListLayout:this.props.stylePickerListLayout,onToggleListLayout:this.props.onToggleListLayout,onApplyStyle:this.onApplyStyle,initialPosition:(0,A.i2)(e),minBottomMargin:A.qZ,recordingKey:"stylePicker"}))}if(this.isInStyleModal()){let e=(0,u.BB)(this.props.selectedStyleProperties.guid),t=!!(e&&this.props.library.local.styles[e]);return n.createElement("div",{className:t||this.isInCreateStyleModal()||this.isInCreateVariableStyleModal()?B.E8:B.eB},n.createElement(el,{...this.props,title:(0,g.t)("design_systems.styles.properties"),addProperty:this.addProperty}))}return n.createElement(A.g4,{styleType:this.props.styleType,inheritStyleKey:this.props.inheritStyleKey,inheritStyleKeyField:this.props.inheritStyleKeyField,inheritStyleID:this.props.inheritStyleID,stylePickerListLayout:this.props.stylePickerListLayout,onToggleListLayout:this.props.onToggleListLayout,hasMixedProperties:this.props.hasMixedProperties,hasMissingFont:this.props.hasMissingFont,stylesButtonDataTag:this.props.stylesButtonDataTag,title:this.props.title,addProperty:this.addProperty,isEmpty:t,removeAllProperties:void 0!==this.props.removeAllProperties?this.props.removeAllProperties:this.removeAllProperties,styleVisibility:this.props.styleVisibility,recordingKey:this.props.recordingKey,onPickerIconClick:this.props.onPickerIconClick,onToggleAdvancedSettings:this.props.onToggleAdvancedSettings,advancedSettingsTooltip:this.props.advancedSettingsTooltip,isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom},n.createElement(el,{...this.props,title:""}))}}es.displayName="StyleAndPropertyList",es.contextType=k.DR},158314:(e,t,r)=>{r.d(t,{Cw:()=>y,Hz:()=>f,I_:()=>E,M8:()=>_,hU:()=>g});var n=r(652983),i=r(87608),a=r.n(i),o=r(691402),l=r(810373),s=r(564380),c=r(435613),d=r(805992),u=r(131826),p=r(442296),m=r(701671);let h=r(624336),_=n.forwardRef(function(e,t){let r=a()(e.className,m.EY,e.disabled?m.H:m.QF,{[m.f3]:e.selected,[e.selectedClassName??""]:e.selected,[m.tU]:e.isBackgroundTransparent});return n.createElement("button",{ref:t,className:r,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:e.onKeyDown,onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:e.onMouseUp,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave},n.createElement(g,{svg:e.svg,className:e.className,fallbackSvg:e.fallbackSvg,selected:e.selected,selectedClassName:e.selectedClassName,isBackgroundTransparent:e.isBackgroundTransparent,"data-onboarding-key":e["data-onboarding-key"],useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,fill:e.fill,dataTestId:e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],"data-tooltip-shortcut-key":e["data-tooltip-shortcut-key"]}),n.createElement(c.n,{className:m.Sf,svg:h}))}),g=n.forwardRef(function(e,t){let r=(0,o.l)(t);function i(){r.current.blur()}let c=a()(e.className,{[m.f3]:e.selected,[e.selectedClassName??""]:e.selected,[m.H]:!e.selected&&e.disabled,[m.QF]:!e.selected&&!e.disabled,[m.tU]:e.isBackgroundTransparent}),u=e.tooltipForScreenReadersOnly||e.selected,h=e.href?s.Q4:s.sq;return n.createElement(h,{forwardedRef:r,className:c,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:t=>{var r,n;switch(t.keyCode){case l.sr.ENTER:case l.sr.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&t.preventDefault(),null==(r=e.onMouseDown)||r.call(e,t),e.onKeyDown?e.onKeyDown(t):null==(n=e.onClick)||n.call(e,t);break;case l.sr.ESCAPE:i()}},onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:i,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onContextMenu:e.disabled?void 0:e.onContextMenu,href:e.disabled?void 0:e.href,type:e.type,target:e.target,"data-tooltip-type":u?null:e["data-tooltip-type"],"data-tooltip":u?null:e["data-tooltip"],"data-tooltip-show-immediately":u?null:e["data-tooltip-show-immediately"],"data-tooltip-max-width":u?null:e["data-tooltip-max-width"],"data-tooltip-show-above":u?null:e["data-tooltip-show-above"],"data-tooltip-shortcut-key":u?null:e["data-tooltip-shortcut-key"],"data-tooltip-offset-x":u?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":u?null:e["data-tooltip-offset-y"],"aria-label":e["aria-label"]??(0,p.Xw)(e),"aria-disabled":e.disabled,"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],recordingKey:e.recordingKey},e.children||n.createElement(d.f,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),f=(0,u.z7)(g),E=g,y=(0,u.z7)(E)},722507:(e,t,r)=>{r.d(t,{LJ:()=>p,_Z:()=>g,_j:()=>c,dW:()=>m,dn:()=>h,g_:()=>u,h0:()=>E,sS:()=>_,zE:()=>f});var n=r(382778),i=r(297296),a=r(961215),o=r(992750),l=r(112088),s=r(166885);function c(e,t){var r;let n=null==(r=t.get(e))?void 0:r.symbolId;if(n){let r,i;let a=t.get(n),o=null==a?void 0:a.containingStateGroupId;if((null==a?void 0:a.isState)&&o){let e=t.get(o);(null==e?void 0:e.isStateGroup)&&(r=null==e?void 0:e.stateGroupKey,i=null==e?void 0:e.sharedStateGroupVersion)}let{componentKey:s,sharedSymbolVersion:c}=a??{},d=(0,l.os)(a);return{instanceGUID:e,backingGUID:n,fileKey:d??void 0,componentKey:s??void 0,stateGroupKey:r??void 0,symbolVersion:c??void 0,stateGroupVersion:i??void 0}}return null}function d(e,t,r){let i=(0,l.bk)(t);if(!i)return;let a=n.R.fromGuid(e.instanceGUID);r[i]?r[i].instanceIdsToUpdate.push(a):r[i]={updateAsset:t,instanceIdsToUpdate:[a]}}function u(e,t,r){let n={},a={};for(let t of r)for(let r of e)r.component_key&&(t.componentKey&&t.componentKey===r.component_key?t.symbolVersion&&t.symbolVersion!==r.content_hash&&d(t,r,n):t.componentKey&&r.oldSubscribedKeysToUpdate.includes(t.componentKey)?d(t,r,n):r.localIdsToUpdate.includes(t.backingGUID)&&d(t,r,n));for(let e of r)for(let r of t)if(r.key){if(e.componentKey&&e.stateGroupKey&&e.stateGroupKey===r.key)e.stateGroupVersion&&e.stateGroupVersion!==r.version&&Object.keys(r.newStateKeyToOutdatedItems).includes(e.componentKey)&&d(e,r,a);else for(let t of Object.keys(r.newStateKeyToOutdatedItems))e.componentKey&&r.newStateKeyToOutdatedItems[(0,i.lG)(t)].oldSubscribedKeysToUpdate.includes(e.componentKey)?d(e,r,a):r.newStateKeyToOutdatedItems[(0,i.lG)(t)].localIdsToUpdate.includes(e.backingGUID)?d(e,r,a):e.componentKey&&e.componentKey===t&&d(e,r,a)}return{componentInstanceUpdateInfo:n,stateInstanceUpdateInfo:a}}function p(e,t,r){if(t&&r){let n=new Set([r,...e]);return{updateAsset:t,inheritStyleKeyFields:(0,o.EX)(t.style_type),styleGUIDs:[...n]}}return t?{updateAsset:t,inheritStyleKeyFields:(0,o.EX)(t.style_type),styleGUIDs:e}:null}function m(e,t){return e.find(e=>(null==t?void 0:t.isLocalStyle)?-1!==e.localIdsToUpdate.indexOf(t.GUID):null!=t&&!!t.key&&-1!==e.oldSubscribedKeysToUpdate.indexOf(t.key)||e.key===(null==t?void 0:t.key)&&t.version&&e.content_hash!==t.version)??null}function h(e,t){return e?t.filter(({key:t,version:r})=>e.oldSubscribedKeysToUpdate.includes(t)||t===e.key&&r!==e.content_hash).map(e=>e.nodeId).concat(e.localIdsToUpdate):[]}function _(e,t){let r=[...Object.values(e),...Object.values(t)];return r.reduce((e,t)=>e+=t.instanceIdsToUpdate.length,0)}function g(e,t){return e.component_key&&e.content_hash?a.iTB.getOutdatedComponentInstanceDevIds(e.component_key,e.content_hash,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,t||""):[]}function f(e,t){return a.iTB.getOutdatedStateInstanceDevIds(e.version,e.newStateKeyToOutdatedItems,t||"")}function E(e){return e.type===s.h3.COMPONENT?g(e,void 0).length:f(e,void 0).length}},976520:(e,t,r)=>{r.d(t,{A8:()=>ew,BI:()=>ey,VR:()=>eS,ZV:()=>e_,wU:()=>eC});var n=r(652983),i=r(63730),a=r(407908),o=r(399150),l=r(384602),s=r(198640),c=r(87608),d=r.n(c),u=r(600486),p=r(172497),m=r(768358),h=r(365653),_=r(810373),g=r(204829),f=r(518484),E=r(829526),y=r(765699),v=r(618723),b=r(435613),I=r(525699),T=r(970740),w=r(299482),S=r(111120),C=r(280251),O=r(206423),A=r(954109),N=r(28786),L=r(721127),P=r(222490),R=r(864974),k=r(804089),D=r(667981),M=r(983635),F=r(571713),x=r(615675),U=r(664937),B=r(999177),V=r(987923),G=r(200273),H=r(322186),W=r(112088),K=r(436649),z=r(801998),Z=r(405581),Y=r(166885),j=r(938110),$=r(225468),q=r(452064),X=r(791626),J=r(404977),Q=r(403199),ee=r(835409),et=r(157607),er=r(475042),en=r(646894),ei=r(248908),ea=r(482919),eo=r(667898),el=r(471822),es=r(272583),ec=r(332224),ed=r(377930);let eu=r(322342),ep=r(131077),em=r(306729),eh=(0,p.z)(ec.znO),e_=(0,p.z)(ec.ujm),eg=(0,p.z)(ec.y4P),ef=e=>{switch(e){case en.Wx.SMALL:return{height:22,width:22,gridClassName:""};case en.Wx.NORMAL:return{height:72,width:72,gridClassName:""};case en.Wx.WIDE:return{height:52,width:256,gridClassName:""}}},eE=(e,t)=>{let r=ef(t);return n.createElement(Q.OR,{key:`${e.node_id}-${e.file_key}`,item:e,height:null==r?void 0:r.height,width:null==r?void 0:r.width,showName:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,isFigJam:!0,noBackground:!1,displayType:null===t?"list-compact":"grid",isSearch:!1,className:null===t?ed.Wo:ed.Vf})},ey=(e,t)=>n.createElement(J.S,{item:e,shouldGenerateLocalThumbnail:!0,className:null===t?ed.Wo:ed.Vf,draggable:!1}),ev=e=>["drilldownItem-productComponent",e.node_id],eb=(e,t)=>{let r=1===e.length&&1===t.length&&e[0].node_id===t[0].node_id;return e.length>0&&!r},eI="ENABLED_LIBRARIES_LABEL";function eT(e){let{openFile:t,onSwapCallback:r,instanceSwapPickerShown:i,multiselect:o,onMultiselectCallback:l,selectedItems:s,scrollContainerHeight:c,isLoadingSubscribedLibraries:p,shouldPerformSwapOnClick:m,itemsToSwap:g,incrementNumSearchesForTracking:f,dropdownAccessory:I,pickerType:C,pickerToggleRef:k,preferredItems:G,overrideDefaultItem:$,showPreferredSectionByDefault:q,preferredValuesErrorComponent:J}=e,Q=C===y.u.INSTANCE_SWAP_PICKER||C===y.u.PREFERRED_VALUES_PICKER,{library:et,dropdownShown:ec,fileByKey:eu,hubFiles:ep,sceneGraphSelection:e_,isListView:eg,loadingState:ef}=(0,h.c)(e=>({library:e.library,dropdownShown:e.dropdownShown,fileByKey:e.fileByKey,hubFiles:e.hubFiles,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),eb=(0,a.v9)(e=>e.universalInsertModal.showing),eT=t.key,ew=(0,a.I0)(),eS=o?null:s[0]??null,eC=null==$?void 0:$.file_key,eO=n.useMemo(()=>eC??D.UH(s),[eC,s]),eA=n.useMemo(()=>(0,eo.s6)(et),[et]),eN=n.useMemo(()=>{let e=(0,eo.dX)(et,eT,eu,eO);return e},[et,eT,eu,eO]),eL=(0,V.HI)(j.xQ.Design).productComponents.map(eo.pW),eP=n.useMemo(()=>G?G.map(eo.pW):[],[G]),eR=n.useMemo(()=>(0,eo.q$)(eN,eu),[eN,eu]),[ek,eD,eM]=n.useMemo(()=>{var e;return eO&&(null==(e=eR[eO])?void 0:e.length)>0?[eO,eR[eO],eN[eO]]:eA.length>0?[eT,eA,(0,W.vB)(D.KW(et))]:Q&&Object.entries(eR).find(([e,t])=>t.length>0)||[null,[]]},[eO,eR,eA,Q,eN,eT,et]),[eF,ex]=n.useState(()=>q?{type:y.ob.PREFERRED}:ek&&(Q||ek!==eT)?{type:y.ob.FILE,key:ek}:{type:y.ob.RECENT}),[eU,eB]=n.useState(null),eV=n.useMemo(()=>{let e=[],r=(0,W.vB)(D.KW(et));e.push(...r);let n=[];return Object.values(eN).forEach(e=>{n.push(...e)}),e.push(...n),(e=>{let r=[];r=e.filter(e=>e.type===Y.h3.COMPONENT);let n=e.filter(e=>e.type===Y.h3.STATE_GROUP),i=(0,W.rs)(et.published.components),a=(0,W.zQ)(et,i,{key:t.key,team_id:t.teamId,editor_type:t.editorType,source_file_key:t.sourceFileKey},(0,B.eV)(t.project)),o=Object.values((0,W.iG)(et.local.components)),l=a.concat(o),s=(0,W.PZ)(n,l);return r.push(...s),r})(e)},[eN,et,t]),[eG,eH]=n.useState(!1),eW=n.useCallback(async e=>{let t=await (0,Z.W)(e,eV),r=(0,E.KA)(t.map(e=>e.item),e=>e.name,e=>e.file_key+e.node_id);return(0,u.L9)(`${Q?"Instance Swap Picker":"Component Insert"} Search`,{numResults:r.length}),f(),r},[eV,Q,f]),eK=n.useCallback(e=>eF.type===y.ob.FILE?eF.key===eT?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&e.item.file_key===eF.key&&(0,W.bk)(e.item)):eF.type===y.ob.PREFERRED?e.filter(e=>"LEAF"===e.type&&G&&!!G.find(t=>t.node_id===e.item.node_id)):e,[eF,eT,G]),ez=n.useCallback((e,t)=>{e.preventDefault(),e.stopPropagation(),ew(S.SP({type:X.V,data:{component:t.item,position:{top:e.clientY,left:e.clientX}}}))},[ew]),{validDropdownSelection:eZ,validRootDrilldownItems:eY}=n.useMemo(()=>{let e=[];if(eF.type===y.ob.PREFERRED&&eP.length>0?e=eP:eF.type===y.ob.RECENT&&eL.length>0?e=eL:eF.type===y.ob.FILE&&eR.hasOwnProperty(eF.key)?e=eR[eF.key]:eF.type===y.ob.FILE&&eT===eF.key&&(e=eA),0===e.length){let e,t;if(ek)e={type:y.ob.FILE,key:ek},t=eD;else if(eP.length>0)e={type:y.ob.PREFERRED},t=eP;else if(eL.length>0)e={type:y.ob.RECENT},t=eL;else if(Object.keys(eR).length>0){let r=Object.keys(eR)[0];e={type:y.ob.FILE,key:r},t=eR[r]}else e={type:y.ob.RECENT},t=eL;return{validDropdownSelection:e,validRootDrilldownItems:t}}return{validDropdownSelection:eF,validRootDrilldownItems:e}},[eF,eP,eL,eR,eT,eA,ek,eD]),ej=n.useMemo(()=>{if(o){if(eO&&eM)return $?{[$.file_key]:D.Ud($,eM)}:{[eO]:(0,eo.I$)(s,eM)}}else{let e=$||eS;if(e&&eM){let t=D.Ud(e,eM);return{[e.file_key]:t}}}return{}},[o,eO,eM,s,$,eS]),[e$,eq]=n.useState({}),eX=n.useMemo(()=>({...ej,...e$}),[ej,e$]),[eJ,eQ]=n.useState({index:-1,parentId:null}),e0=n.useCallback(()=>eQ({index:-1,parentId:null}),[]),e1=n.useCallback((e,t)=>{e0(),eZ&&eZ.type===y.ob.FILE&&eq({[eZ.key]:e})},[e0,eZ]),e2=n.useMemo(()=>eZ.type===y.ob.FILE&&eX[eZ.key]||[],[eZ,eX]),e3=(0,er.M)({hideTooltips:!0}),e4=n.useCallback(()=>{C!==y.u.PREFERRED_VALUES_PICKER&&(i.isShown&&i.modal?(i.returnFocusToToggle&&(null==k?void 0:k.current)&&k.current.focus(),ew(P.Cp()),ew((0,O.qe)())):C===y.u.RESOURCE_INSERT_MODAL&&eb&&(ew(R.v({seen_component_onboarding_modal:!0})),e3()))},[i,k,ew,C,e3,eb]),e6=n.useCallback(e=>{if(eg)return null;let t=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,en.RW)(t)},[eg]),e8=n.useCallback(t=>{var r;t===y.ob.PREFERRED?ex({type:y.ob.PREFERRED}):t===y.ob.RECENT?ex({type:y.ob.RECENT}):ex({type:y.ob.FILE,key:t}),(null==(r=e.searchBarRef)?void 0:r.current)&&e.searchBarRef.current.focus(),(0,u.L9)(`${Q?"Instance Swap Picker":"Component Insert"} Library Switch`,{isSearching:eG})},[e.searchBarRef,Q,eG]),e9=(0,H.Ng)(),e5=(0,z.TO)(e9),e7=eF.type===y.ob.FILE?eF.key:void 0,te=(0,M.Ew)(e7),tt=(0,M.RK)(),tr=n.useMemo(()=>({format:t=>{var r;return t===eI?(0,T.t)("design_systems.instance_swap_picker.enabled_libraries"):t===eT?(0,T.t)("design_systems.instance_swap_picker.local_components"):t===y.ob.RECENT?eG?(0,T.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===y.u.RESOURCE_INSERT_MODAL?(0,T.t)("universal_insert.recents"):(0,T.t)("design_systems.instance_swap_picker.recently_used"):t===y.ob.PREFERRED?(0,T.t)("design_systems.instance_swap_picker.preferred"):(null==(r=eu[t])?void 0:r.name)??""}}),[eT,eu,eG,e.pickerType]),tn=n.useMemo(()=>{switch(eF.type){case y.ob.FILE:if(eF.key===eT)return"Local components";return"Subscribed libraries";case y.ob.RECENT:return"Recently used";case y.ob.PREFERRED:return"Preferred values"}},[eF,eT]),ti=n.useCallback(()=>{ew(L.K4({type:ei.yT,data:{initialTab:Y.ZB.LIBRARIES}}))},[ew]),ta=n.useCallback(e=>{if("LEAF"!==e.type||0===s.length)return!1;let{item:t}=e;if(eU&&!o){let e=(0,es.tJ)(eU,Object.keys(e_));if(K.hg(ef,e))return t.node_id===eU.node_id&&t.file_key===eU.file_key}return s.some(e=>t.type===Y.h3.COMPONENT&&e.type===Y.h3.COMPONENT?!!t.component_key&&t.component_key===e.component_key||!t.component_key&&!e.component_key&&t.node_id===e.node_id:t.type===Y.h3.STATE_GROUP&&e.type===Y.h3.STATE_GROUP&&(!!t.key&&t.key===e.key||!t.key&&!e.key&&t.node_id===e.node_id))},[eU,e_,ef,o,s]),to=n.useCallback(e=>{let{currentDrilldownItems:t,index:r,parentId:n}=e,i=Math.max(Math.min(eJ.index,r),0),a=Math.min(Math.max(eJ.index,r),t.length-1),o=t.slice(i,a+1).filter(e=>"LEAF"===e.type);null==l||l(o.map(e=>e.item),ta(t[r])?eo.yF.DESELECT:eo.yF.SELECT),eQ({index:r,parentId:n})},[ta,l,eJ.index]),tl=(0,U.p)({alwaysSwap:Q,canSwap:m,itemsToSwap:g,openFileKey:eT,onSwap:r,sourceForTracking:"Instance Swap Picker"}),ts=n.useCallback((e,t,r,n)=>{if(!eT)return;if(o&&n){if(e.shiftKey&&-1!==eJ.index&&eJ.parentId===n.parentId){to(n);return}eQ({index:n.index,parentId:n.parentId})}let i=e.altKey;eU&&ew(N.IV({key:(0,es.tJ)(eU,Object.keys(e_))})),eB(t.item),tl(e,t.item),e4(),Q?(0,u.L9)("Instance Swap Picker Insert Instance",{type:t.item.type===Y.h3.COMPONENT?"component":"state_group",fromSearch:r,viewMode:eg?"list":"grid",dropdownType:(0,y.fN)(eF,eT)}):(0,u.L9)("Component Insert Panel Insert Instance",{type:t.item.type===Y.h3.COMPONENT?"component":"state_group",fromSearch:r,altKey:i,viewMode:eg?"list":"grid",dropdownType:(0,y.fN)(eF,eT)})},[eT,eF,o,eU,e_,tl,e4,Q,eJ.index,eJ.parentId,to,ew,eg]),tc=n.useRef(null),td=n.createElement("div",{className:C===y.u.RESOURCE_INSERT_MODAL?d()(ed.X_,ed.H5):ed.HH},n.createElement(el.q,{id:(0,y._N)(C),property:eZ.type===y.ob.FILE?eZ.key:eZ.type,formatter:tr,rightIcon:e5&&e7!==eT&&te?n.createElement(F.XG,{fileKey:e7}):void 0,onChange:e8,dispatch:ew,dropdownShown:ec,dropdownAlignment:"left",dropdownWidth:230,openOnKeyPressed:[_.sr.SPACE,_.sr.ENTER],inputClassName:C===y.u.RESOURCE_INSERT_MODAL?ed.mu:void 0,className:C===y.u.RESOURCE_INSERT_MODAL?ed.Z0:ed.NX,ref:tc},(()=>{function e(e){return n.createElement(el.r,{key:e,value:e})}function r(e){return n.createElement(el.r,{key:e,value:e,removeTextRightPadding:!0,rightSettingsIcon:n.createElement(F.sK,null)})}let i=Object.keys(eR),a=[];eP.length&&a.push(e(y.ob.PREFERRED));let o=(0,B.eV)(t.project);if(eO&&eO!==eT&&!q&&!(0,W.E)(et,{key:t.key,team_id:t.teamId,editor_type:t.editorType,source_file_key:t.sourceFileKey},{key:eO},o)&&eu[eO]&&(a.length>0&&a.push(n.createElement(ea.Hz,{key:"non-subscribed-divider"})),a.push(e(eO)),i=i.filter(e=>e!==eO)),eO&&eO!==eT&&(0,W.E)(et,{key:t.key,team_id:t.teamId,editor_type:t.editorType,source_file_key:t.sourceFileKey},{key:eO},o)&&ep[eO]&&(i=i.filter(e=>e!==eO)),e5&&(0,x.dD)(tt)){let e=i.map(e=>eu[e]).filter(e=>!!e).map(({key:e,name:t})=>({key:e,name:t}));(0,x.Vw)({libraries:e,approvedLibraryKeysByResourceType:tt}),i=e.map(({key:e})=>e)}let l=eG||eL.length>0;if(l&&(a.length>0&&a.push(n.createElement(ea.Hz,{key:"recent-divider"})),a.push(e(y.ob.RECENT))),Q){for(let t of(eA.length>0&&(a.length>0&&a.push(n.createElement(ea.Hz,{key:"local-divider"})),a.push(e(eT))),i.length>0&&(a.length>0&&a.push(n.createElement(ea.Hz,{key:"subscribed-divider"})),a.push(n.createElement(el.r,{key:eI,value:eI,disabled:!0}))),i))e5&&(0,x.v8)(t)?a.push(r(t)):a.push(e(t));return a}for(let t of(eA.length>0&&a.push(e(eT)),i.length>0&&a.push(n.createElement(ea.Hz,{key:"subscribed-divider"})),i))e5&&(0,x.v8)(t)?a.push(r(t)):a.push(e(t));return a})()),I),tu=n.createElement("div",null,eF.type===y.ob.RECENT&&null,eF.type!==y.ob.RECENT&&n.createElement(v.rU,{className:ed.p4,onClick:()=>ex({type:y.ob.RECENT}),canFocus:!0,trusted:!0},n.createElement(T.Tx,{id:"design_systems.instance_swap_picker.search_all_libraries"}))),tp=n.createElement("div",{className:Q?ed.EG:ed.Fn,style:{height:c+(e.pickerType===y.u.RESOURCE_INSERT_MODAL?ee.XD:0)}},n.createElement("div",{className:Q?ed.SK:void 0},n.createElement(T.Tx,{id:"design_systems.instance_swap_picker.no_components"})),n.createElement(v.PL,{className:Q?ed.PT:ed.E8,onClick:ti},n.createElement("div",null,n.createElement(b.n,{svg:em,style:w.sx.colorIcon.$})),n.createElement(T.Tx,{id:"design_systems.instance_swap_picker.browse_libraries"}))),tm=Object.keys(eR).length>0;return n.createElement(E.qF,{recordingKey:e.recordingKey,scrollContainerHeight:c,setSearching:eH,onSearch:eW,searchFilter:eK,onLeafItemContextMenu:ez,onLeafItemDrilldown:ts,onLeafItemDraggable:Q?void 0:{sourceForTracking:"component-insert-modal",clickToInsert:!1,afterSuccessfulInsert:e4,sectionNameForTracking:tn},rootDrilldownItems:eY,initialPath:e2,beforeItems:td,focusBeforeItems:()=>{var e;return null==(e=tc.current)?void 0:e.focus()},emptyState:tp,isSelectedItem:ta,multiselect:o,onMultiselectCallback:l,getBackgroundColorForLeafItemThumbnail:D.F3,getLeafItemTooltip:Q?eo.f4:void 0,getLeafItemThumbnail:Q||eg?ey:eE,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",drilldownItemsKeySupplement:eF.type===y.ob.FILE?eF.key:eF.type,getLeafItemRecordingKey:ev,getThumbnailGridLayoutForItems:e6,onDrilldownPathChange:e1,drilldownContainerSize:Q?en.Ji.NORMAL:en.Ji.LARGE,additionalRowBottomMargin:Q?E.W8:0,renderLeafItemNames:!!Q||eg,searchBarRef:e.searchBarRef,pickerToggleRef:k,extraHeightOnSearch:Q||e.pickerType===y.u.RESOURCE_INSERT_MODAL?0:eh,validLibrariesArePresent:tm,isLoading:p||(0,K.hg)(ef,A.os),searchDebounceTime:e.searchDebounceTime,emptySearchResultsFooter:tu,searchBarPlaceholderText:eF.type===y.ob.PREFERRED?(0,T.t)("design_systems.instance_swap_picker.search_preferred"):eF.type===y.ob.RECENT?(0,T.t)("design_systems.instance_swap_picker.search_all_libraries"):null!=eF.key&&eu[eF.key]?(0,T.t)("design_systems.instance_swap_picker.search_filename",{filename:eu[eF.key].name}):(0,T.t)("design_systems.instance_swap_picker.search"),pickerType:e.pickerType,errorComponent:eF.type===y.ob.PREFERRED?J:void 0,query:e.query,setQuery:e.setQuery,contextValue:e.drilldownPickerContextValue})}function ew(e){let{multiselect:t,onMultiselectCallback:r,selectedItems:i,searchDebounceTime:o,shouldPerformSwapOnClick:l=!0,itemsToSwap:s,onSwapCallback:c,searchBarRef:d,setNumSearchesForTracking:u,scrollContainerHeight:p,pickerToggleRef:m,toggleGridViewButton:_,preferredItems:g,overrideDefaultItem:f,preferredValuesErrorComponent:E}=e,v=n.useRef(f).current,{instanceSwapPickerShown:b,loadingState:I,fileVersion:T,library:w}=(0,h.c)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState,fileVersion:e.fileVersion,library:e.library})),S=(0,a.v9)(G.dh),C=n.useMemo(()=>!!g&&eb(g,i),[g,i]),O=(null==S?void 0:S.key)||null,A=n.useMemo(()=>(null==v?void 0:v.file_key)??D.UH(i),[null==v?void 0:v.file_key,i]),N=n.useMemo(()=>{if(null==S||null==O||null===T)return!0;let e=(0,B.eV)(null==S?void 0:S.project);if(A&&S&&(0,W.E)(w,{key:S.key,team_id:S.teamId,editor_type:S.editorType,source_file_key:S.sourceFileKey},{key:A},e)&&!(0,W.x9)(A)){let e=(0,W.Be)(A,T);return!K.B4(I,e)}if(C&&A&&A!==O)return K.hg(I,(0,q.C)(O));let t=(0,es.O1)(O);return!K.B4(I,t)},[S,O,T,C,A,w,I]),L=n.useCallback(()=>null==u?void 0:u(e=>e+1),[u]);return(b.isShown||e.pickerType!==y.u.INSTANCE_SWAP_PICKER)&&O&&S?n.createElement(eT,{openFile:S,instanceSwapPickerShown:b,multiselect:t,onMultiselectCallback:r,selectedItems:i,scrollContainerHeight:p,recordingKey:e.recordingKey,shouldPerformSwapOnClick:l,itemsToSwap:s,onSwapCallback:c,pickerToggleRef:m,searchBarRef:d,isLoadingSubscribedLibraries:N,searchDebounceTime:o,incrementNumSearchesForTracking:L,pickerType:e.pickerType,dropdownAccessory:e.pickerType===y.u.RESOURCE_INSERT_MODAL?_:null,preferredItems:g,preferredValuesErrorComponent:E,overrideDefaultItem:v,showPreferredSectionByDefault:C,query:e.query,setQuery:e.setQuery,drilldownPickerContextValue:e.drilldownPickerContextValue}):null}function eS(e){var t;let{pickerType:r,initialWidth:o,initialHeight:l,title:s,pickerToggleRef:c,query:d,setQuery:p}=e,_=r===y.u.INSTANCE_SWAP_PICKER||r===y.u.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:E,dropdownShown:v}=(0,h.c)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),b=(0,a.I0)(),I=n.useRef(null),T=E.isShown?new f.OW(E.initialX,E.initialY):new f.OW(0,0),w=n.useCallback(()=>{(null==v?void 0:v.type)===(0,y._N)(r)&&b(S.kp())},[b,v,r]),C=n.useCallback(()=>{var e;E.isShown&&E.modal&&b((0,O.eo)({...E,modal:!1,returnFocusToToggle:!1})),null==(e=I.current)||e.focus()},[b,E]),[A,N]=n.useState(0),L=n.useCallback(()=>{(0,u.L9)(`${_?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:A}),b((0,O.qe)())},[b,A,_]),P=n.useRef(null),R=_?320:428,k=_?e_:eg,D=n.useCallback(()=>E.isShown&&E.initialY?l||Math.min(window.innerHeight-E.initialY-20,R):R,[R,l,E]),[M,F]=n.useState(D),x=i.findDOMNode(null==(t=P.current)?void 0:t.getEl());n.useLayoutEffect(()=>{let e=(0,m.D)(()=>{if(!x)return;let e=x.getBoundingClientRect();if(e.bottom>window.innerHeight){let t=e.bottom-window.innerHeight;F(M-t-20)}},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[M,F,x]);let U=n.createElement(eC,{isSwapPicker:_,searchBarRef:I}),B=n.createElement("div",{className:ed.Oy},n.createElement("div",{className:ed.iU},s),U);return n.createElement(et.My,{title:_?B:s,initialPosition:T,initialHeight:M,initialWidth:o??k,isCloseHidden:_,dragHeaderOnly:!0,onDragStart:w,onDragEnd:C,onClose:L,ref:P,autoflowHeight:!0,recordingKey:g.ar(e.recordingKey,"modal")},n.createElement(ew,{...e,searchBarRef:I,toggleGridViewButton:U,setNumSearchesForTracking:N,scrollContainerHeight:M,pickerToggleRef:c,query:d,setQuery:p}))}function eC({isSwapPicker:e,isPreferredValues:t,searchBarRef:r}){let i=(0,a.I0)(),c=(0,a.v9)(e=>t?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),d=t?C.bG:C.fN,p=n.useCallback(n=>{n.stopPropagation(),i(d({isListLayout:!c})),(null==r?void 0:r.current)&&r.current.focus(),(0,u.L9)(`${t?"Preferred Values Picker":e?"Instance Swap Picker":"Component Insert"} View Toggle`,{viewMode:c?"grid":"list"})},[i,d,c,r,t,e]);return n.createElement(o.h,{as:"button","data-tooltip-type":$.fR.TEXT,"data-tooltip":c?(0,T.t)("design_systems.instance_swap_picker.show_as_grid"):(0,T.t)("design_systems.instance_swap_picker.show_as_list"),"aria-label":c?(0,T.t)("design_systems.instance_swap_picker.show_as_grid"):(0,T.t)("design_systems.instance_swap_picker.show_as_list"),onClick:p,onMouseDown:k.UW,recordingKey:g.ar("toggleGridViewButton",t?"preferredValues":"instanceSwapPicker")},n.createElement(I.r,{svg:c?ep:eu},c?n.createElement(l.D,null):n.createElement(s.D,null)))}},457932:(e,t,r)=>{r.d(t,{T:()=>u,b:()=>p});var n=r(981114),i=r(840568),a=r(584826),o=r(900710),l=r(994004),s=r(272583);let c=e=>e.fileByKey,d=e=>e.library,u=()=>{let e=(0,n.P1)([(e,t,r)=>t,(e,t,r)=>r,c,d],(e,t,r,n)=>{let i=t.get(e);if(!i)return null;let{selectedItem:o}=(0,a.u4)(e,r,n,t);return o});return e},p=(0,n.P1)([c,d,o.F1,l.dq],(e,t,r,n)=>{let o=null,{backingSymbolGUID:l,backingStateGroupGUID:c}=(0,s.Os)(new Set(n),r);if(c&&(0,i.Wn)(c)?o=c:l&&(0,i.Wn)(l)&&(o=l),!o)return null;let{selectedItem:d}=(0,a.u4)(o,e,t,r);return d})},984792:(e,t,r)=>{r.d(t,{Zo:()=>m,hn:()=>g,of:()=>p,wR:()=>h});var n=r(652983),i=r(824801),a=r(231690),o=r(32483),l=r(954035),s=r(527700),c=r(961215),d=r(784667),u=r(772769);let p=(()=>{let e=new o.QV({normalizeFactor:360,min:0,max:1}),t=new o.QV({normalizeFactor:100,min:0,max:1}),r=new o.E_({min:0,max:1}),l=new o.QV({normalizeFactor:255,min:0,max:1}),u={hsla:(r,n)=>`hsla(${e.format(r.h)}, ${t.format(r.s)}%, ${t.format(r.l)}%, ${n})`,hsba:(r,n)=>`hsba(${e.format(r.h)}, ${t.format(r.s)}%, ${t.format(r.v)}%, ${n})`,rgba:(e,t)=>`rgba(${l.format(e.r)}, ${l.format(e.g)}, ${l.format(e.b)}, ${t})`,uicolor:(e,t,n)=>n?`UIColor(${r.format(e.r)}, ${r.format(e.g)}, ${r.format(e.b)}, ${t})`:`UIColor(red: ${r.format(e.r)}, green: ${r.format(e.g)}, blue: ${r.format(e.b)}, alpha: ${t})`};return()=>{let e=(0,d.iD)();return n.useCallback((t,r)=>{let n=Number(t.a).toLocaleString("en",{maximumFractionDigits:2});switch(e){case c.qzo.HEX:let o=a.K9.format(t,(null==r?void 0:r.hexCSSValue)?{withAlpha:1!==t.a}:(null==r?void 0:r.alphaInPercent)?{withAlpha:1!==t.a,showDot:!0}:void 0);return`#${o}`;case c.qzo.RGB:return u.rgba(t,n);case c.qzo.CSS:return i.Z.format(t);case c.qzo.HSB:let l=(0,s.he)(t);return u.hsba(l,n);case c.qzo.HSL:let d=(0,s.pV)(t);return u.hsla(d,n);case c.qzo.UIColor:return u.uicolor(t,n,(null==r?void 0:r.shortform)??!1)}},[e])}})(),m=(e,t)=>{let r=p();return n.useMemo(()=>e.map(e=>{let n=e.paint,i=new l.c0(()=>n),a=n.opacity||1,o=n.color?[{...n.color,a:a*n.color.a}]:[],s=n.stops?n.stops.map(e=>({...e.color,a:a*e.color.a})):[],c=[...o,...s];return{...e,colors:c,typeFormatter:i.format,valueFormatter:r,variableScope:t}}),[e,r,t])},h=(e,t)=>{let r=p();return n.useMemo(()=>e.map(e=>{let n=t(e);if(!n)return{value:e,color:void 0};let i={color:n,opacity:n.a,type:"SOLID"},a={encodedPaint:(0,u.Qv)(i),paint:i,colors:[n],typeFormatter:_,valueFormatter:r};return{value:e,color:a}}),[t,e,r])},_=()=>"SOLID",g=e=>{let t=p();return n.useMemo(()=>e.map(({color:e,colorVar:r})=>{let n=[e],i={color:e,opacity:e.a,type:"SOLID"};return r&&(i.colorVar=r),{encodedPaint:(0,u.Qv)(i),paint:i,colors:n,typeFormatter:_,valueFormatter:t}}),[e,t])}},795027:(e,t,r)=>{r.d(t,{mQ:()=>ti,pV:()=>e3,ql:()=>e7,zk:()=>e8,xT:()=>tc,$g:()=>e4});var n,i=r(652983),a=r(63730),o=r(407908),l=r(399150),s=r(558922),c=r(324424),d=r(523028),u=r(291672),p=r(848080),m=r(87608),h=r.n(m),_=r(600486),g=r(768358),f=r(691402),E=r(365653),y=r(716250),v=r(337167),b=r(767310),I=r(615537),T=r(204829),w=r(564380),S=r(523495),C=r(297296),O=r(275835),A=r(618723),N=r(435613),L=r(525699),P=r(970740),R=r(280251),k=r(954109),D=r(671708),M=r(721127),F=r(170153),x=r(440392),U=r(630201),B=r(496417),V=r(241239),G=r(231690),H=r(954035),W=r(804089),K=r(118962),z=r(158774),Z=r(961215),Y=r(269075),j=r(784667),$=r(840568),q=r(110044),X=r(21616),J=r(424479),Q=r(598910),ee=r(492459),et=r(809377),er=r(200273),en=r(497868),ei=r(112088),ea=r(488160),eo=r(794609),el=r(375949),es=r(166885),ec=r(321909),ed=r(772769),eu=r(225468),ep=r(516714),em=r(471845),eh=r(305305),e_=r(821838),eg=r(528017),ef=r(435189),eE=r(640634),ey=r(689693),ev=r(678599),eb=r(708567),eI=r(55669),eT=r(957086),ew=r(826082),eS=r(628805),eC=r(545691),eO=r(647180),eA=r(471828),eN=r(246997),eL=r(477168),eP=r(709393),eR=r(629305),ek=r(160905),eD=r(390),eM=r(517755),eF=r(303801),ex=r(373158),eU=r(261604),eB=r(317356),eV=r(250914);let eG=new class{get pendingItem(){return this._pendingItem}set pendingItem(e){this._pendingItem=e,this.attemptAndRetry()}clearTask(){void 0!==this._activeTaskId&&cancelAnimationFrame(this._activeTaskId)}attemptAndRetry(){this.clearTask(),this.attemptFocus()?this._pendingItem=void 0:this._activeTaskId=requestAnimationFrame(()=>this.attemptAndRetry())}attemptFocus(){return!this._pendingItem||this._pendingItem.attemptImmediateFocus()}},eH=(0,i.createContext)(eG);function eW(e){let t=null,r=Object.assign(e=>{t=e},{focus(){e.pendingItem=r},attemptImmediateFocus(){if(t===document.activeElement)return!0;if(!t)return!1;{let e=!1,r=r=>{e||(e=r.target===t)};document.addEventListener("focus",r,!0);try{return t.focus(),e}finally{document.removeEventListener("focus",r,!0)}}}});return r}var eK=r(503784),ez=r(958838),eZ=r(101961),eY=r(701671),ej=r(17107);let e$=r(723818),eq=r(12303),eX=r(932200),eJ=r(455914),eQ=r(867975),e0=r(758236),e1=r(730536),e2=r(944246);class e3 extends i.PureComponent{constructor(){super(...arguments),this.onPaintsChange=(e,t,r)=>{(0,y.BZ)().ce_properties_panel_tracking&&(0,_.L9)("editor-paints-panel-fill-change"),z.Gr.updateSelectionProperties({fillPaints:e},{shouldCommit:t,overwrite:r??Z.Z$h.ONLY_WHEN_NOT_EMPTY}),(0,eI.tS)("fillPaints")},this.onApplyStyle=(e,{fromSearch:t}={})=>{this.props.dispatch(k.bg({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:t}))},this.onExportBackgroundDisabledChange=e=>{z.Gr.updateSelectionProperties({exportBackgroundDisabled:!e})}}videoFillSelected(){if((0,$.nK)(this.props.selectionProperties.fillPaints)||!this.props.selectionProperties.numVideosSelected)return!1;for(let e of this.props.selectionProperties.fillPaints??[])if(e.video)return!0;return!1}render(){let e=(0,eB.UF)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey"});return i.createElement(eF.s_,null,i.createElement(e5,{propertyList:this.props.fillPaints,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,selectedPropertyType:Z.Rmy.FILL,recordingKey:T.ar(this.props,"paintList"),pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,onPickerShown:()=>{(0,y.BZ)().ce_properties_panel_tracking&&(0,_.L9)("editor-paints-panel-fill-color-picker-show")},variableScopes:this.props.variableScopes,isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,isUI3:this.props.isUI3,CustomColorPicker:this.props.CustomColorPicker,...(0,eL.YA)(this.props),...e}),i.createElement(eA.HJ,{isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom},this.props.selectionContainsFrames&&this.props.hasExports&&i.createElement(eF.X2,null,i.createElement(eC.v,{className:ej.MJ,id:"frame-background-export-background-disabled",property:this.props.exportBackgroundDisabled===$.t1?$.t1:!this.props.exportBackgroundDisabled,onChange:this.onExportBackgroundDisabledChange,recordingKey:T.ar(this.props,"exportDisableCheckbox")}),i.createElement(eF.__,{className:ej.cy,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.show_in_exports"}))),(0,eo.vO)()&&this.videoFillSelected()&&i.createElement(eM.Z,{updateSelectionProperties:z.Gr.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:(0,eD.ZG)(this.props.selectionProperties)})))}}function e4(e){let{bigNudgeAmount:t,smallNudgeAmount:r}=(0,j.pb)();return i.createElement(e6,{...e,bigNudgeAmount:t,smallNudgeAmount:r})}e3.displayName="FillPanel";class e6 extends i.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:eS.ru.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,t,r)=>{(0,y.BZ)().ce_properties_panel_tracking&&(0,_.L9)("editor-paints-panel-stroke-change",{key:"color"}),z.Gr.updateSelectionProperties({strokePaints:e},{shouldCommit:t,overwrite:r??Z.Z$h.ONLY_WHEN_NOT_EMPTY}),(0,eI.tS)("strokePaints")},this.onNonPaintsChange=(e,t=ec.P7.YES)=>{let r=(0,$.NA)(this.props.strokePaints,[]);if(r.length>0&&!r.find(e=>e.visible)){let e=r.map(e=>({...e,visible:!0}));z.Gr.updateSelectionProperties({strokePaints:e},{shouldCommit:ec.P7.NO,overwrite:Z.Z$h.ONLY_WHEN_NOT_EMPTY})}z.Gr.updateSelectionProperties(e,{shouldCommit:t}),(0,eI.tS)("strokePaints")},this.onApplyStyle=(e,{fromSearch:t}={})=>{this.props.dispatch(k.bg({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:t}))},this.bordersAlignmentOnChange=(e,t=ec.P7.YES)=>{if(this.state.individualBorderOption!==eS.ru.ALL){let{strokeAlign:t}=e;(0,_.L9)("Individual Border Alignment Changed",{position:(0,$.Wn)(t)?t:"__mixed__"})}this.onNonPaintsChange(e,t)},this.forwardedRef=i.createRef(),this.toggleSettings=()=>{var e;if((null==(e=this.props.pickerShown)?void 0:e.id)===this.settingsId)this.props.dispatch(R.le());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,_.L9)("editor-paints-panel-advanced-stroke-show");let e=(0,ep.JJ)(this.forwardedRef.current);this.props.dispatch(R.bO({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(R.aV()),this.props.dispatch(U.pg())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.selectBorderSides=(e,t=ec.P7.YES)=>{if(this.setState({individualBorderOption:e}),e===eS.ru.CUSTOM)return;let r=e===eS.ru.ALL,n={borderTopVisible:r||e===eS.ru.TOP,borderRightVisible:r||e===eS.ru.RIGHT,borderBottomVisible:r||e===eS.ru.BOTTOM,borderLeftVisible:r||e===eS.ru.LEFT};z.Gr.updateSelectionProperties(n,{shouldCommit:t}),(0,eI.tS)("strokePaints")},this.nodesSupportIndividualBorders=(e,t)=>{let r=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let n of e){if(r.has(n.type)||"FRAME"===n.type&&!n.resizeToFit)return!0;if("FRAME"===n.type&&t<2){let e=this.nodesSupportIndividualBorders(n.childrenNodes,t+1);if(e)return!0}}return!1},this.supportsIndividualBorders=()=>{if(!this.props.numSelectedByType)return!1;if((0,K.dg)(this.props.numSelectedByType,"RECTANGLE")||(0,K.dg)(this.props.numSelectedByType,"ROUNDED_RECTANGLE")||(0,K.dg)(this.props.numSelectedByType,"SYMBOL")||(0,K.dg)(this.props.numSelectedByType,"INSTANCE"))return!0;if((0,K.dg)(this.props.numSelectedByType,"FRAME")){let e=Object.keys(this.props.sceneGraphSelection).map(J.TSSceneGraph.instance.get).filter(e=>!!e);return this.nodesSupportIndividualBorders(e,0)}return!1},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,$.Wn)(this.props.leftEndCap)&&(0,$.Wn)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:eS.ru.ALL})}}render(){var e;let t=(0,eB.UF)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,eB.Je)(t.inheritStyleKey),n=this.props.numSelectedByType&&(0,K.dg)(this.props.numSelectedByType,"TABLE"),a=!n&&(r||(0,$.NA)(this.props.strokePaints,[]).length>0||this.props.strokePaints===$.t1),o=(null==(e=this.props.pickerShown)?void 0:e.id)===this.settingsId,l=2===this.props.strokePanelTerminalPointCount&&this.props.strokePanelMode!==Z.aB6.WASHI_TAPE,s=this.props.strokePanelMode!==Z.aB6.WASHI_TAPE,c=this.supportsIndividualBorders();return i.createElement(eF.s_,{"data-testid":"stroke-panel-id"},i.createElement(e9,{propertyList:this.props.strokePaints,selectedPropertyType:Z.Rmy.STROKE,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:T.ar(this.props,"paintList"),onPickerShown:()=>{(0,y.BZ)().ce_properties_panel_tracking&&(0,_.L9)("editor-paints-panel-stroke-color-picker-show")},variableScopes:new Set([Z.xTW.STROKE]),...(0,eL.YA)(this.props),...t,onToggleListLayout:this.toggleSettings,onToggleAdvancedSettings:a&&s?this.toggleSettings:void 0,advancedSettingsTooltip:(0,P.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,CustomColorPicker:this.props.CustomColorPicker}),a&&i.createElement(ez.W,{forwardedRef:this.forwardedRef,borderSharedWeight:this.props.borderSharedWeight,maxStrokeWeight:this.props.maxStrokeWeight,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,terminalCap:this.props.terminalCap,strokeJoin:this.props.strokeJoin,arcRadius:this.props.arcRadius,arcSweep:this.props.arcSweep,connectorLineStyle:this.props.connectorLineStyle,miterLimitAngle:this.props.miterLimitAngle,onNonPaintsChange:this.onNonPaintsChange,numSelectedByType:this.props.numSelectedByType,updateSyncState:this.updateSyncState,hideSwapButton:this.hideSwapButton,syncState:this.state.syncState,showSwapButton:this.state.showSwapButton,selectBorderSides:this.selectBorderSides,setIndividualBorderOption:this.setIndividualBorderOption,onBordersAlignmentChange:this.bordersAlignmentOnChange,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,showAdvancedStrokeSettings:s,showIndividualBorderControls:c,showEndPointControls:l,showStrokePicker:o,strokePanelMode:this.props.strokePanelMode,individualBorderOption:this.state.individualBorderOption,toggleSettings:this.toggleSettings,stopPropagation:this.stopPropagation,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,leftEndCap:this.props.leftEndCap,rightEndCap:this.props.rightEndCap,dashPattern:this.props.dashPattern,dashCap:this.props.dashCap}))}}function e8({title:e,propertyList:t,onChange:r,onApplyStyle:n,addProperty:a,onReorder:l,renderProperty:s,onDeleteProperty:c,onToggleListLayout:d,styleType:u,inheritStyleKey:p,inheritStyleKeyField:m,inheritStyleID:h,stylePickerListLayout:_,removeAllProperties:g,library:f,defaultColor:E,openFile:y,stylePickerShown:v,currentSelectedProperty:b,selectedPropertyType:I,modalShown:w,sceneGraphSelection:S,selectedStyleProperties:C,recordingKey:O,onToggleAdvancedSettings:A,advancedSettingsTooltip:N,isPanelBodyCollapsedAtom:L}){let P=(0,o.I0)(),k=(0,en.A)(),D=(0,et.L)(),M=!!i.useContext(eN.DR),F=M?`style-modal-${(0,ey.iq)(m)}`:(0,ey.iq)(m),x=(0,eB.HZ)(p,h,u),U=(0,e_.eZ)((null==x?void 0:x.key)??null,(0,$.qD)(h)),B=(null==x?void 0:x.isLocal)?x:(null==U?void 0:U.status)==="loaded"?U.data:null,V=function(){let e=(0,ee.wu)(),t=(0,ee.Dd)(),r=e.length>0,n=Object.keys(t).length>0;return r||n}(),G=t&&(0,$.Wn)(t)&&(t.length>1||t.some(e=>!(0,q._t)(e.type)))?"create_style":V?"create_variable":"create_style",H=i.useCallback(()=>k&&k.id===F?k:null,[k,F]),W=i.useCallback(({initialX:e,initialY:t})=>{H()?P(R.le()):P(R.bO({id:F,initialX:e,initialY:t}))},[P,F,H]),K=i.useCallback(e=>{W(e)},[W]),z=i.useCallback((e,t)=>{r([e],t,Z.Z$h.ONLY_WHEN_NOT_DISABLED)},[r]),Y=(0,Q.A0)("numSelectedByType"),j=(0,eA.Ep)(L||null),X=i.useCallback(()=>{a(),j()},[a,j]),J=i.useMemo(()=>{if(Y)return(0,eT.RL)(I,Y)},[I,Y]);return i.createElement(i.Fragment,null,i.createElement(eR.Xd,{title:e,propertyList:t,onChange:r,addProperty:X,renderProperty:s,onDeleteProperty:c,onReorder:l,removeAllProperties:g,currentSelectedProperty:b,selectedPropertyType:I,recordingKey:O,dropdownShown:D,openFile:y,library:f,modalShown:w,pickerShown:k,sceneGraphSelection:S,selectedStyleProperties:C,stylePickerShown:v,inheritStyleKey:p,inheritStyleKeyField:m,inheritStyleID:h,stylePickerListLayout:_,styleType:u,onToggleListLayout:d,onPickerIconClick:K,dispatch:P,onToggleAdvancedSettings:A,advancedSettingsTooltip:N,isPanelBodyCollapsedAtom:L}),(()=>{let e=H();if(!e)return;let r=t&&(0,$.Wn)(t)&&1===t.length?t[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return i.createElement(eL.EL,{paint:r,paintId:(0,eB.hz)(m),selectedStyle:B,inheritStyleKeyField:m,onChange:z,onApplyStyle:M?void 0:n,pickerShown:e,defaultColor:E,dropdownShown:D,initialView:"library",supportedViews:["library"],initialCreationModalView:G,recordingKey:T.ar(O,"paintPicker"),variableScopes:J})})())}function e9(e){let{version:t}=(0,p.Fg)();return"ui3"!==t?i.createElement(e5,{...e,isUI3:!1}):i.createElement(e5,{...e,isUI3:!0})}e6.displayName="StrokePanel";class e5 extends i.PureComponent{constructor(){super(...arguments),this.context=null,this.addProperty=()=>{let e=(0,eB.Iq)(this.props.selectedStyleProperties);switch(this.props.selectedPropertyType){case Z.Rmy.STROKE:e||((0,eI.tS)("strokePaints"),z.Gr.triggerActionInUserEditScope("add-stroke-to-selection"));break;case Z.Rmy.FILL:e?z.Gr.triggerActionInUserEditScope("add-fill-to-style-selection"):z.Gr.triggerActionInUserEditScope("add-fill-to-selection"),(0,eI.tS)("fillPaints")}},this.removeProperty=e=>{this.isInStyleModal()||this.props.dispatch(R.le()),this.props.dispatch(R.aV());let t=(0,$.NA)(this.props.propertyList,[]),r=t.filter((t,r)=>r!==e);this.props.onChange(r),z.Gr.deselectProperty()},this.title=()=>{switch(this.props.selectedPropertyType){case Z.Rmy.STROKE:return(0,P.t)("fullscreen.properties_panel.fill.stroke");case Z.Rmy.FILL:return(0,P.t)("fullscreen.properties_panel.fill.fill");default:return""}},this.onChange=(e,t,r)=>{this.props.onChange(e,t,r),(0,$.NA)(this.props.propertyList,[]).length!==e.length&&q.wc.clearCache()},this.onReorder=()=>{q.wc.clearCache()},this.toggleListLayout=()=>{this.props.dispatch(R.Yc({isListLayout:!this.props.stylePickerListLayout})),this.props.dispatch(U.pg())},this.renderProperty=(e,t,r,n,a,o,l,s,c)=>{var d;let u=this.isInStyleModal()?"preview-paint":"paint",p=q.wc.getId(t,this.props.selectedPropertyType,u);return i.createElement(e7,{key:`paint-${t}`,id:p,inheritStyleKeyField:this.props.inheritStyleKeyField,index:t,singletonRow:(0,$.NA)(this.props.propertyList,[]).length<=1,selectedPropertyType:this.props.selectedPropertyType,paint:e,selected:this.props.stylePickerShown.isShown?(null==(d=this.props.pickerShown)?void 0:d.id)===p:r,isDragging:n,hasFocus:a,stylePickerShown:this.props.stylePickerShown,onPickerShown:this.props.onPickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,onChange:o,onMouseDown:l,onMouseMove:s,onMouseUp:c,onRemovePaint:this.removeProperty.bind(this,t),onApplyStyle:this.props.onApplyStyle,recordingKey:T.ar(this.props,t),variableScopes:this.props.variableScopes,isUI3:this.props.isUI3,CustomColorPicker:this.props.CustomColorPicker,...(0,eL.YA)(this.props)})}}isInStyleModal(){return null!=this.context}render(){return i.createElement(e8,{title:this.title(),propertyList:this.props.propertyList,onChange:this.onChange,currentSelectedProperty:this.props.currentSelectedProperty,selectedPropertyType:this.props.selectedPropertyType,addProperty:this.addProperty,renderProperty:this.renderProperty,pickerShown:this.props.pickerShown,onReorder:this.onReorder,recordingKey:this.props.recordingKey,...(0,eB.UF)(this.props),onToggleListLayout:this.toggleListLayout,library:this.props.library,defaultColor:this.props.defaultColor,onApplyStyle:this.props.onApplyStyle,onToggleAdvancedSettings:this.props.isUI3?this.props.onToggleAdvancedSettings:void 0,advancedSettingsTooltip:this.props.isUI3?this.props.advancedSettingsTooltip:void 0,isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom})}}e5.displayName="PaintList",e5.contextType=eN.DR;class e7 extends i.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=null,this.rowRef=e=>{e&&(this.row=a.findDOMNode(e))},this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,t)=>{e.visible=!0,this.props.onChange(e,t)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>{var e,t;return this.isInStyleModal()?(null==(e=this.props.pickerInStyleCreationShown)?void 0:e.id)===this.props.id?this.props.pickerInStyleCreationShown:null:(null==(t=this.props.pickerShown)?void 0:t.id)===this.props.id?this.props.pickerShown:null},this.showPicker=()=>{var e,t;if(!this.row)return;let r=(0,ep.JJ)(this.row);null==(t=(e=this.props).onPickerShown)||t.call(e),z.Gr.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,F.P)({id:this.props.id,initialX:r.x,initialY:r.y})):this.props.dispatch(R.bO({id:this.props.id,initialX:r.x,initialY:r.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(U.pg()),this.props.dispatch(R.aV()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,F.z)()):this.props.dispatch(R.le()),z.Gr.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,$.qD)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let t=(0,$.qD)(this.props.paint);if(!t)return;let r=z.Gr.fileArrayToString;if(r){let n=r(Array.from(e.files));Z.iTB.dropImageOnPaintThumbnail(t.blendMode||"NORMAL",t.opacity||1,n,this.props.index,this.props.selectedPropertyType)}},this.onDetachVariableClick=()=>{let e=(0,eg.c)(this.props.paint);this.onPaintPickerChange(e,ec.P7.YES)}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(z.Gr.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),z.Gr.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(z.Gr.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),z.Gr.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}dropImageOnPaintThumbnail(e,t,r){let n=z.Gr.fileArrayToString;if(n){let i=n(Array.from(r.files));Z.iTB.dropImageOnPaintThumbnail(e,t,i,this.props.index,this.props.selectedPropertyType)}}updateStillImageAndSelectionPropertiesForGIF(e,t){return(0,X.X3)(e,t,this.props.selectedPropertyType)}hasBoundColorVariable(){return!!this.props.paint.colorVar}render(){let e=this.renderButtons();return i.createElement("div",null,i.createElement(O.h,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:T.ar(this.props,"dropTarget")},i.createElement(w.yh,{recordingKey:T.ar(this.props,"dragTarget")},i.createElement(tt,{ref:this.rowRef,id:this.props.id,paint:this.props.paint,firstIconButton:e.length>0?e[0]:null,secondIconButton:e.length>1?e[1]:null,shownPickerMatchesThisPaint:!!this.pickerShown(),togglePicker:this.togglePicker.bind(this),isDragHover:this.state.isDragHover,onChange:this.props.onChange,selected:this.props.selected,singletonRow:this.props.singletonRow,isDragging:this.props.isDragging,hasFocus:this.props.hasFocus,noBorderOnFocus:this.props.noBorderOnFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,isUI3:this.props.isUI3,...(0,eL.YA)(this.props)}))),this.pickerShown()&&(this.props.CustomColorPicker?i.createElement(this.props.CustomColorPicker,{paint:this.props.paint,paintIndex:this.props.index,onChange:this.onPaintPickerChange,onClose:this.hidePicker,pickerShown:this.pickerShown()}):i.createElement(eL.EL,{paint:this.props.paint,paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:this.props.inheritStyleKeyField,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail.bind(this),updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF.bind(this),onChange:this.onPaintPickerChange,onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onClose:this.hidePicker,recordingKey:T.ar(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.pickerShown(),variableScopes:this.props.variableScopes})))}renderButtons(){let e=[];return this.props.hideVisibilityToggle||this.hasBoundColorVariable()||e.push({button:i.createElement(eK.z,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:T.ar(this.props,"visibleToggle")}),opensPicker:!1,key:"visibleToggle"}),this.hasBoundColorVariable()&&e.push({button:i.createElement("span",{className:ej.sy},i.createElement(l.h,{as:"button","data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.fill.detach_variable"),"aria-label":(0,P.t)("fullscreen.properties_panel.fill.detach_variable"),onMouseDown:W.UW,onClick:this.onDetachVariableClick,recordingKey:T.ar(this.props,"paint","detachVariableButton")},i.createElement(L.r,{svg:e$},i.createElement(s.m,null)))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint&&e.push({button:i.createElement(l.h,{as:"button",recordingKey:T.ar(this.props,"removeButton"),onMouseDown:W.UW,onClick:this.props.onRemovePaint,"aria-label":(0,P.t)("fullscreen.properties_panel.fill.remove")},i.createElement(L.r,{svg:eq,fallbackSvg:eX},i.createElement(c.Z,null))),opensPicker:!1,key:"removeButton"}),e}}function te({children:e}){return i.createElement("div",{onFocus:e=>e.stopPropagation()},e)}e7.displayName="PaintListItem",e7.contextType=eN.DR;class tt extends i.PureComponent{constructor(){super(...arguments),this.onChange=(e,t=!0)=>{e.visible=!0,this.props.onChange(e),t&&q.wc.clearCache(this.props.id)},this.onColorChange=e=>{let t={...this.props.paint,color:e};(0,b.C7)(e.a,this.props.paint.opacity??1)||(t.opacity=e.a,t.visible=!0),this.onChange(t)},this.onOpacityChange=(e,t)=>{this.props.onChange({...this.props.paint,opacity:e,visible:!0},t)},this.onChitOrTypeMouseDown=e=>{e.stopPropagation(),this.props.togglePicker()},this.onContainerMouseDown=e=>{if(e.shiftKey||2&e.buttons){this.props.togglePicker(),e.preventDefault(),e.stopPropagation();return}},this.onContainerContextMenu=e=>{e.preventDefault(),e.stopPropagation()},this.onRowFocus=()=>{var e,t;null==(t=(e=this.props).onFocus)||t.call(e),this.props.shownPickerMatchesThisPaint&&this.props.togglePicker()},this.boundColorVariableId=()=>{var e,t;let r=null==(t=null==(e=this.props.paint.colorVar)?void 0:e.value)?void 0:t.alias;return r?eE.BB(r):null},this.componentWillUnmount=()=>{this.props.onInputBlur&&this.props.onInputBlur()}}render(){let e=this.boundColorVariableId(),t=this.props.firstIconButton?this.wrapButton(this.props.firstIconButton):null,r=this.props.secondIconButton?this.wrapButton(this.props.secondIconButton):null,n=i.createElement(i.Fragment,null,i.createElement("div",{className:e?ej.jH:ej.wK,onMouseDown:this.onChitOrTypeMouseDown,onMouseDownCapture:this.onContainerMouseDown,onContextMenu:this.onContainerContextMenu},e?i.createElement(ew.k,{isSelected:this.props.selected&&this.props.hasFocus},i.createElement(tn,{selected:this.props.selected&&!this.props.hasFocus,variableId:e,paint:this.props.paint,onMouseDown:this.onChitOrTypeMouseDown,recordingKey:this.props.recordingKey})):this.renderPaint())),a=i.createElement("div",{className:ej.ms,"data-onboarding-key":(0,ea.FD)(ea.MF.PAINT_PANEL_ROW,this.props.id)},n,i.createElement("div",{className:ej.Oh},t,r));if(this.props.preventDragging)return this.props.isUI3?i.createElement(eV.KK,{appendedClassName:h()(ej.wP,{[ej.zf]:this.props.isDragHover,[eY.Yp]:this.props.selected,[eY.xo]:this.props.selected&&!this.props.hasFocus}),input:n,leftIcon:t,rightIcon:r,onFocus:this.onRowFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp}):i.createElement(eF.X2,{className:this.props.isDragHover?`${ej.zf} ${ej.wP}`:ej.wP,selected:this.props.selected,selectedSecondary:this.props.selected&&!this.props.hasFocus,onFocus:this.onRowFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp},a);if(this.props.isUI3){let e=h()(ej.wP,{[ej.zf]:this.props.isDragHover,[eY.Yp]:this.props.selected,[eY.xo]:this.props.selected&&!this.props.hasFocus});return i.createElement(eV.G1,{singletonRow:this.props.singletonRow,selected:this.props.selected,dragging:this.props.isDragging,onFocus:this.onRowFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp},null===t||null===r?i.createElement(eV.NP,{appendedClassName:e,input:n,icon:t||r,label:null}):i.createElement(eV.KK,{appendedClassName:e,input:n,leftIcon:t,rightIcon:r}))}return i.createElement(eP.t,{className:this.props.isDragHover?`${ej.zf} ${ej.wP}`:ej.wP,shiftGrabberOnInputFocus:!0,selected:this.props.selected,selectedSecondary:this.props.selected&&!this.props.hasFocus,singletonRow:this.props.singletonRow,dragging:this.props.isDragging,onFocus:this.onRowFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp},a)}wrapButton({button:e,opensPicker:t,key:r}){return t?i.createElement(te,{key:r},e):i.createElement(i.Fragment,{key:r},e)}renderPaint(){let e=h()({[ej.xb]:!this.props.paint.visible});return i.createElement(i.Fragment,null,i.createElement(te,null,i.createElement(eO.o,{paint:this.props.paint,onMouseDown:this.onChitOrTypeMouseDown,recordingKey:T.ar(this.props,"chit"),className:ej.Zs})),i.createElement(tr,{...this.props,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,visible:this.props.paint.visible,onTypeMouseDown:this.onChitOrTypeMouseDown,onMouseDown:W.UW,onColorChange:this.onColorChange,onOpacityChange:this.onOpacityChange,recordingKey:T.ar(this.props,"value"),noBorderOnFocus:!0}),i.createElement(em.q,{inputClassName:e,className:ej.U4,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,value:this.props.paint.opacity,onValueChange:this.onOpacityChange,dispatch:this.props.dispatch,noLeftBorder:!0,noBorderOnFocus:!0,onMouseDown:W.UW,recordingKey:T.ar(this.props,"opacity")}))}}function tr(e){let t=(0,i.useMemo)(()=>new G.jE({parseAlpha:!0}),[]),r=(0,i.useMemo)(()=>new H.c0(()=>e.paint),[e.paint]),n=T.Wn(e.recordingKey,"mousedown",t=>{var r,n;null==(r=e.onMouseDown)||r.call(e,t),null==(n=e.onTypeMouseDown)||n.call(e,t)});return"SOLID"===e.paint.type?i.createElement(ek.TC,{forwardedRef:e.focusableRef,className:e.visible?ej.UT:ej.kk,onFocus:e.onFocus,onBlur:e.onBlur,noLeftBorder:!1,squareRightBorder:!1,formatter:t,property:{...e.paint.color,a:e.paint.opacity??1},onChange:e.onColorChange,onMouseDown:e.onMouseDown,recordingKey:T.ar(e,"colorInput"),noBorderOnFocus:e.noBorderOnFocus}):i.createElement("div",{className:e.visible?ej.Z8:ej.Hu,onMouseDown:n},r.format(e.paint.type))}function tn({variableId:e,paint:t,onMouseDown:r,recordingKey:n,selected:a}){let o=(0,ee.SW)(e),l=(null==o?void 0:o.name)??"",s=!!o&&(0,ef.Eh)(o),{version:c}=(0,p.Fg)(),d=s?null:i.createElement(te,null,i.createElement(eO.o,{paint:t,onMouseDown:r,recordingKey:T.ar(n,"chit"),className:"ui3"===c?void 0:ej.Zs}));return"ui3"===c?i.createElement(to,{selected:a,styleIcon:d||i.createElement("div",{"data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("variables.variable_was_deleted")},i.createElement(N.n,{className:ej.Q6,svg:e2})),styleName:l}):i.createElement(i.Fragment,null,d,i.createElement("div",{className:ej.PR},i.createElement(ev.f,{isDeleted:s,text:l})))}function ti({variableId:e,color:t,opacity:r,onMouseDown:n,recordingKey:a}){let o=(0,ee.SW)(e),l=(null==o?void 0:o.name)??"",s=!!o&&(0,ef.Eh)(o);return i.createElement(i.Fragment,null,s?null:i.createElement(te,null,i.createElement(eO.o,{color:t,opacity:r,onMouseDown:n,recordingKey:T.ar(a,"chit"),className:ej.Zs})),i.createElement(w.yh,{role:"button",tabIndex:0,className:ej.PR,onMouseDown:n,recordingKey:T.ar(a,"pill")},i.createElement(ev.f,{isDeleted:s,text:l,tooltip:l})))}function ta({styleKey:e,count:t,uniqueNodesCount:r,styleGUIDs:n,id:a,variableScopes:c,recordingKey:u,rowRef:m}){let h=(0,er.uC)(),y=(0,et.L)(),v=(0,en.A)(),{version:b}=(0,p.Fg)(),{stateStylePickerShown:I,stylePreviewShown:w}=(0,E.c)(e=>({stateStylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown})),O=(0,o.I0)(),A=`${B.cv}-${a}`,N=(null==v?void 0:v.id)===A?v:null,M=I.isShown&&I.id===A?I:null,F=(0,f.l)(m),x=(0,ei.u$)(e,n),V=(0,ei.Gn)(e,n),G=(0,o.v9)(t=>(0,el.I)(t,e,null)),H=i.useCallback(()=>{O(R.le()),Z.iTB.selectStyleByGuid("")},[O]),W=i.useCallback(()=>{if(!F.current)return;x&&x.value&&Z.iTB.selectStyleByGuid(x.value.node_id);let{x:e,y:t}=(0,ep.JJ)(F.current);O(R.bO({id:A,initialX:e,initialY:t}))},[O,A,F,x]),K=i.useCallback(()=>{O(U.pg())},[O]),z=i.useCallback(e=>{e.stopPropagation(),N?H():W(),w.isShown&&K()},[H,K,W,w.isShown,N]),j=i.useCallback(e=>{let t=(0,ed.Qv)(e);Y.y2.user("apply-paint-to-style",()=>Z.i0b.updateStyleWithPaint(n,t))},[n]),$=i.useCallback(e=>{O(k.A5({style:e,callback:e=>{Y.y2.user("apply-style",()=>Z.i0b.updateStyle(n,e))}})),(0,_.L9)("Edit Selection Style",{fileKey:h,count:t}),H()},[t,O,h,H,n]),X=i.useCallback(e=>{e.stopPropagation(),Y.y2.user("detach-style",()=>Z.i0b.detachStyle(n)),Z.iTB.selectStyle(C.hx.INVALID,C.IT.INVALID)},[n]),J=i.useCallback(()=>{Z.i0b.selectOnlySameStyle(n),(0,_.L9)("Select Selection Style",{count:t})},[t,n]),Q=i.useMemo(()=>(0,g.D)(()=>{x&&x.value.node_id&&O(D.uZ({styleNodeId:x.value.node_id,styleKind:x.kind}))}),[O,x]);i.useEffect(Q);let[ee,ea]=i.useState(!1);if(!x)return null;let eo=x.kind===es.IW.DANGLING?i.createElement(eh.qG,{dsStyle:{...x.value,style_type:"FILL"},disableTooltip:!0}):i.createElement(eh.qG,{dsStyle:x.value,disableTooltip:!0}),ec=i.createElement(eF.hU,{className:`${eZ.E5} ${eZ.yp}`,onMouseDown:J,"data-tooltip-type":eu.fR.TEXT,"data-tooltip":`Select ${(0,S._6)(r,"item")} using this style`,"aria-label":`Select ${(0,S._6)(r,"item")} using this style`,recordingKey:T.ar(u,"selectSameStyleButton")},i.createElement(L.r,{svg:eQ},i.createElement(d.h,null))),em=i.createElement(l.h,{actionOnPointerDown:!0,recordingKey:T.ar(u,"detachButton"),"data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.fill.detach_style"),"aria-label":(0,P.t)("fullscreen.properties_panel.fill.detach_style"),onClick:X},i.createElement(L.r,{svg:e$},i.createElement(s.m,null)));return i.createElement(i.Fragment,null,"ui3"===b?i.createElement(eV.KK,{appendedClassName:ej.nT+" "+eZ.kP+(N||M?" "+eY.xo:""),ref:F,input:i.createElement(to,{recordingKey:T.ar(u,"row"),onMouseDown:z,styleIcon:eo,styleName:V,selected:!!N||!!M}),leftIcon:i.createElement("div",{className:eZ.E5},em),rightIcon:ec}):i.createElement(eF.X2,{className:eZ.kP,forwardedRef:F,onMouseOver:()=>ea(!0),selectedSecondary:!!N||!!M},i.createElement(eF.pY,{className:eZ.v2,recordingKey:T.ar(u,"row"),onMouseDown:z},i.createElement("div",{className:M?eZ.kR:eZ.h2},i.createElement("div",{className:eZ.KW},eo),i.createElement("div",{className:eZ.X2},V))),i.createElement("div",{className:eZ.E5},em),ec),ee&&i.createElement(ex.D,{inheritStyleKey:e,inheritStyleID:null,styleType:"FILL"}),N?i.createElement(eL.EL,{paint:{color:{r:1,g:1,b:1,a:1},opacity:1,type:"SOLID"},paintId:A,selectedStyle:(null==G?void 0:G.data)??(x&&x.kind!==es.IW.DANGLING?x.value:null),inheritStyleKeyField:"inheritFillStyleKey",defaultColor:q.JX,onChange:j,onApplyStyle:$,pickerShown:N,dropdownShown:y,initialView:"library",variableScopes:c,recordingKey:T.ar(u,"paintPicker")}):null)}function to(e){let{styleIcon:t,styleName:r,selected:n,...a}=e;return i.createElement(w.sq,{...a,className:h()(eZ.NC,{[eZ.hv]:n})},i.createElement("div",{className:eZ.KW},t),i.createElement("div",{className:eZ.X2},r))}function tl({styleKey:e,styleGUIDs:t,onClick:r}){let n=(0,ei.u$)(e,t);return n?i.createElement("span",{role:"presentation",onClick:r},i.createElement(eh.qG,{dsStyle:{...n.value,style_type:"FILL"},disableTooltip:!0})):i.createElement(i.Fragment,null)}tt.displayName="Paint",(e=>{class t extends i.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=null,this.rowRef=e=>{e?this.row=a.findDOMNode(e):this.row=null},this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(x.hf({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>{var e;return(null==(e=this.props.pickerShown)?void 0:e.id)===this.pickerID()},this.showPicker=()=>{if(!this.row)return;let e=(0,ep.JJ)(this.row);this.props.dispatch(R.bO({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(U.pg()),this.props.dispatch(R.aV()),this.props.dispatch(x.hf({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(R.le()),z.Gr.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row&&this.props.showPicker(this.stylePickerID(),this.row)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,ed.Qv)(this.props.paint),t=Z.i0b.paintDataNodesInPaint(e);this.props.dispatch(M.K4({type:eb.f,data:{originalPaint:this.props.paint,paintDataNodesInPaint:t,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let t=Z.i0b.paintDataNodesInPaint((0,ed.Qv)(this.props.paint));this.props.dispatch(k.A5({style:e,callback:e=>{if(t.length>1)this.props.dispatch(M.K4({type:eb.f,data:{originalPaint:this.props.paint,paintDataNodesInPaint:t,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let t=(0,ed.Qv)(this.props.paint);Y.y2.user("apply-style",()=>Z.i0b.applyStyleToPaintDatas(t,e)),(0,_.L9)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,g.D)(e=>{var t;(0,_.L9)("Edit Selection Paint",{fileKey:(null==(t=this.props.openFile)?void 0:t.key)||"",count:this.props.count})}),this.onChangeForPaint=(e,t)=>{let r=t==ec.P7.YES;Y.y2.user("change-paint",()=>Z.i0b.updatePaint((0,ed.Qv)(this.props.paint),(0,ed.Qv)(e),r)),this.setState({paintValueInPicker:e}),this.props.dispatch(x.hf({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,t)=>{this.onChangeForPaint(e,t),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,g.D)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{let e=(0,eg.c)(this.props.paint);this.onChangeForPaint(e,ec.P7.YES)},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,ed.Qv)(this.props.paint);Z.i0b.selectOnlySamePaint(e),(0,_.L9)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{var e,t;let r=null==(t=null==(e=this.props.paint.colorVar)?void 0:e.value)?void 0:t.alias;return r?eE.BB(r):null}}pickerID(){return`${B.KU}-${this.props.id}`}stylePickerID(){return`${B.cv}-${this.props.id}`}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let t=this.renderButtons();return i.createElement("div",{onMouseOver:this.onMouseOver},i.createElement(tt,{ref:this.rowRef,id:this.props.id,paint:this.currentPaintValue(),firstIconButton:t.length>0?t[0]:null,secondIconButton:t.length>1?t[1]:null,count:this.props.count,uniqueNodesCount:this.props.uniqueNodesCount,recordingKey:T.ar(this.props,"paint"),onFocus:this.onFocus,onChange:this.onChangeForPaint.bind(this),onInputFocus:this.props.onInputFocus,onInputBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,selected:this.pickerShown()||this.pickerShownIsStylePicker(),singletonRow:!1,isDragging:!1,hasFocus:!1,shownPickerMatchesThisPaint:this.pickerShown(),togglePicker:this.onPaintClick,isDragHover:!1,preventDragging:!0,isUI3:this.props.isUI3,focusableRef:this.props.focusableRef,...(0,eL.YA)(this.props)}),this.pickerShown()&&this.props.pickerShown&&i.createElement(eL.EL,{paint:this.currentPaintValue(),paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:"inheritFillStyleKey",onChange:this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,onApplyStyle:this.onApplyStyle,disableImagePaints:!0,recordingKey:T.ar(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,initialView:this.paintPickerInitialView,initialStyleCreationPaint:this.currentPaintValue(),variableScopes:this.props.variableScopes}),this.state.hasEverHovered&&i.createElement(ex.D,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&i.createElement(ex.P,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:T.ar(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];return this.boundColorVariableId()?e.push({button:i.createElement("span",{className:ej.sy},i.createElement(l.h,{as:"button","data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.fill.detach_variable"),"aria-label":(0,P.t)("fullscreen.properties_panel.fill.detach_variable"),onMouseDown:W.UW,onClick:this.onDetachVariableClick,recordingKey:T.ar(this.props,"paint","detachVariableButton")},i.createElement(L.r,{svg:e$},i.createElement(s.m,null)))),opensPicker:!1,key:"detatchVariableButton"}):e.push({button:i.createElement("span",{className:ej.sy},i.createElement(l.h,{"data-tooltip-type":eu.fR.LOOKUP,"data-tooltip":"style","aria-label":(0,V.K)("style"),onClick:this.onStyleClick,recordingKey:T.ar(this.props,"paint","styleButton")},i.createElement(L.r,{svg:e0,fallbackSvg:e1},i.createElement(u.l,null)))),opensPicker:!0,key:"styleButton"}),null!=this.props.uniqueNodesCount&&e.push({button:i.createElement("span",{className:ej.sy},i.createElement(l.h,{onClick:this.onSelectSamePaintMouseDown,"data-tooltip-type":eu.fR.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"aria-label":(0,P.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:T.ar(this.props,"paint","selectSamePaintButton")},i.createElement(L.r,{svg:eQ},i.createElement(d.h,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}t.displayName="SelectionPaintItem",e.SelectionPaintItem=t,e.ConnectedSelectionPaintItem=(0,o.$j)((e,t)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId==t.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(t,r)=>{let{top:n,left:i}=r.getBoundingClientRect(),[a,o]=[i-eU.L,n];e(R.nc({id:t,initialX:a,initialY:o,modal:!0})),e(U.pg()),e(R.le())},setPickerListLayout:t=>{e(R.Yc({isListLayout:t}))}}))(t)})(n||(n={}));let ts=n.ConnectedSelectionPaintItem;function tc(e){let{version:t}=(0,p.Fg)(),r=(0,i.useMemo)(()=>(0,v.cn)(!0),[]),[n,a]=(0,v.KO)(r),o=(0,i.useContext)(eH);return i.createElement(td,{...{...e,uiVersion:t,isCollapsedAtom:r,isCollapsed:n,setIsCollapsed:a,tracker:o}})}class td extends T.Vx{constructor(e){super(e),this.state={lastKnownSelection:{},selectionVersion:0,forceShowPaints:!1,forceShowLibraryColors:!1},this.selectionsAreEqual=(0,I.ws)((e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}),this.ignoreLimitWhenCollectingPaints=()=>{var e;(0,_.L9)("Show Selection Paints For Large Selection",{fileKey:(null==(e=this.props.openFile)?void 0:e.key)||""}),Z.i0b.ignoreLimitWhenCollectingPaints()},this.toggleShowPaints=e=>{var t;e.stopPropagation(),(0,_.L9)("Show All Selection Paints",{fileKey:(null==(t=this.props.openFile)?void 0:t.key)||""}),this.setState({forceShowPaints:!this.state.forceShowPaints})},this.toggleShowLibraryColors=e=>{var t;e.stopPropagation(),(0,_.L9)("Show All Selection Styles",{fileKey:(null==(t=this.props.openFile)?void 0:t.key)||""}),this.setState({forceShowLibraryColors:!this.state.forceShowLibraryColors})},this.onPaintFocus=()=>{Z.i0b.setIsPaintFocused(!0)},this.onPaintBlur=()=>{Z.i0b.setIsPaintFocused(!1)},this.onPaintScrubBegin=()=>{Z.i0b.setIsPaintOpacityScrubbing(!0)},this.onPaintScrubEnd=()=>{Z.i0b.setIsPaintOpacityScrubbing(!1)},this.ROW_LIMIT=4,this.componentWillUnmount=()=>{Z.i0b.setIsPaintFocused(!1)},this.state={lastKnownSelection:e.sceneGraphSelection,selectionVersion:0,forceShowPaints:!1,forceShowLibraryColors:!1},this.swatchFocusItems=[eW(e.tracker),eW(e.tracker),eW(e.tracker)]}UNSAFE_componentWillReceiveProps(e){(!this.selectionsAreEqual(this.state.lastKnownSelection,e.sceneGraphSelection)||e.selectionPaints.forceUpdateForUndo&&this.props.selectionPaints.forceUpdateForUndo!==e.selectionPaints.forceUpdateForUndo)&&(this.setState({lastKnownSelection:this.props.sceneGraphSelection,selectionVersion:this.state.selectionVersion+1,forceShowPaints:!1,forceShowLibraryColors:!1}),this.props.dispatch(x.I(!1)))}render(){let e;let t=this.state.forceShowLibraryColors,r=this.state.forceShowPaints,n=[...this.props.selectionPaints.paints.filter(e=>!!e.paint.colorVar),...this.props.selectionPaints.styles],a=[...this.props.selectionPaints.paints.filter(e=>!e.paint.colorVar)],o=n.length,l=a.length,s=t||o<=this.ROW_LIMIT?o:this.ROW_LIMIT-1,c=r||l<=this.ROW_LIMIT?l:this.ROW_LIMIT-1,d=o+l,u=i.createElement(eF.X2,null,i.createElement(eF.pY,{extended:!0},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.selection_colors"})));return"ui3"===this.props.uiVersion?this.props.selectionPaints.emptyDueToLimitExceeded?e=i.createElement(eF.X2,{className:ej.OE,onMouseDown:this.ignoreLimitWhenCollectingPaints,recordingKey:T.ar(this.props,"limitExceeded")},i.createElement(A.PL,{className:ej.pl,onClick:this.ignoreLimitWhenCollectingPaints},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.show_selection_colors"}))):d<4?e=[...n,...a].map((e,t)=>"paint"in e?this.renderPaint({selectionPaint:e,index:t}):this.renderStyle({selectionStyle:e,index:t})):this.props.isCollapsed?(u=i.createElement(eA.VM,{isPanelBodyCollapsedAtom:this.props.isCollapsedAtom},i.createElement(eF.X2,null,i.createElement(eF.pY,{extended:!0,isPanelBodyCollapsedAtom:this.props.isCollapsedAtom},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.selection_colors"})),i.createElement("span",{className:ej.sP},[...n,...a].slice(0,3).map((e,t)=>{let r=this.swatchFocusItems[t],n=()=>{this.props.setIsCollapsed(!1),r.focus()};return"paint"in e?i.createElement(eO.o,{onClick:n,paint:e.paint,key:t}):i.createElement(tl,{onClick:n,styleKey:e.styleKey,styleGUIDs:e.styleGUIDs,key:t})}),i.createElement("span",{className:ej.J_},`+${d-3}`)))),e=i.createElement(i.Fragment,null)):(u=i.createElement(eA.VM,{isPanelBodyCollapsedAtom:this.props.isCollapsedAtom},i.createElement(eF.X2,null,i.createElement(eF.pY,{extended:!0,isPanelBodyCollapsedAtom:this.props.isCollapsedAtom},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.selection_colors"})))),e=[...n,...a].map((e,t)=>"paint"in e?this.renderPaint({selectionPaint:e,index:t,ref:this.swatchFocusItems[t]}):this.renderStyle({selectionStyle:e,index:t,ref:this.swatchFocusItems[t]}))):e=i.createElement(i.Fragment,null,this.props.selectionPaints.emptyDueToLimitExceeded&&i.createElement(eF.X2,{className:ej.OE,onMouseDown:this.ignoreLimitWhenCollectingPaints,recordingKey:T.ar(this.props,"limitExceeded")},i.createElement(A.PL,{className:ej.pl,onClick:this.ignoreLimitWhenCollectingPaints},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.show_selection_colors"}))),!this.props.selectionPaints.emptyDueToLimitExceeded&&n.slice(0,s).map((e,t)=>"paint"in e?this.renderPaint({selectionPaint:e,index:t}):this.renderStyle({selectionStyle:e,index:t})),s<o&&i.createElement(eF.X2,{className:ej.s$,recordingKey:T.ar(this.props,"libraryColorsOverflow"),onMouseDown:this.toggleShowLibraryColors},i.createElement(N.n,{className:ej.xe,svg:eJ}),i.createElement(eF.o0,{className:ej.wI},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.see_all_x_library_colors",number:o}))),!this.props.selectionPaints.emptyDueToLimitExceeded&&a.slice(0,c).map((e,t)=>this.renderPaint({selectionPaint:e,index:t})),c<l&&i.createElement(eF.X2,{className:ej.s$,recordingKey:T.ar(this.props,"paintOverflow"),onMouseDown:this.toggleShowPaints},i.createElement(N.n,{className:ej.xe,svg:eJ}),i.createElement(eF.o0,{className:ej.wI},i.createElement(P.Tx,{id:"fullscreen.properties_panel.fill.see_all_x_colors",number:l})))),i.createElement(eF.s_,{className:ej.$F},u,e)}renderStyle({selectionStyle:e,index:t,ref:r}){return i.createElement(ta,{recordingKey:T.ar(this.props,"style",t),styleKey:e.styleKey,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleGUIDs:e.styleGUIDs,id:`${e.styleKey}/${e.version}`,key:`${e.styleKey}/${e.version}`,variableScopes:e.variableScopes,rowRef:r})}renderPaint({selectionPaint:e,index:t,ref:r}){return i.createElement(ts,{recordingKey:T.ar(this.props,"paint",t),paint:e.paint,count:e.count??0,uniqueNodesCount:e.uniqueNodesCount??0,conflictNodesCount:e.conflictNodesCount??0,variableScopes:e.variableScopes,debounce:!!e.count&&e.count>500,onInputFocus:this.onPaintFocus,onInputBlur:this.onPaintBlur,onScrubBegin:this.onPaintScrubBegin,onScrubEnd:this.onPaintScrubEnd,id:e.encodedPaint,key:`${e.encodedPaint}:${this.state.selectionVersion}`,isUI3:this.props.isUI3,focusableRef:r,...(0,eL.YA)(this.props)})}}},90055:(e,t,r)=>{r.d(t,{CI:()=>P,oc:()=>N,x9:()=>A});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(716250),s=r(204829),c=r(435613),d=r(970740),u=r(954109),p=r(961215),m=r(784667),h=r(840568),_=r(321909),g=r(225468),f=r(471845),E=r(140461),y=r(269783),v=r(357221),b=r(293145),I=r(628805),T=r(482919),w=r(17107);let S=r(187601);class C extends T.Ph{}class O extends T.Wx{}function A(e){return n.createElement(c.n,{svg:S,className:"ACTIVE"===e.iconState?void 0:w.Xn})}function N(e){let{bigNudgeAmount:t,smallNudgeAmount:r}=(0,m.pb)(),a=(0,i.I0)(),c=n.useRef(null),u=(0,i.v9)(e=>{let{borderTopWeight:t,borderBottomWeight:r,borderLeftWeight:n,borderRightWeight:i}=e.mirror.selectionProperties;return(0,h.$6)(t,r,n,i)}),_=e.borderOption===I.ru.CUSTOM?u:e.strokeWeight,E=e.borderOption===I.ru.MIXED?1:0,v=e.borderOption?(0,b.ge)(e.borderOption):void 0;return n.createElement(n.Fragment,null,n.createElement(R,{inputClassName:e.gridRight?w.GP:w.v7,isNotPencilTool:e.gridRight,inputRef:c,field:v||"STROKE_WEIGHT",recordingKey:s.ar(e,"strokeWeightInputWrapper")},n.createElement(f.wx,{isTokenizable:!!(0,l.BZ)().ds_variables_strokes,className:o()(w.Ny,{[w.Rq]:e.gridRight}),min:E,max:1e3,onValueChange:(t,r)=>{let n=e.borderOption?(0,I.G0)(e.borderOption):"strokeWeight";e.onChange({[n]:t},r)},value:_,dispatch:a,recordingKey:e.recordingKey,bigNudgeAmount:t,smallNudgeAmount:r,"data-tooltip-type":g.fR.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.fill.stroke_width"),tooltipForScreenReadersOnly:!0,inputClassName:w.t4,disabled:e.disabled,dataTestId:e.dataTestId,forwardedRef:c},n.createElement(A,null))),(0,l.BZ)().ds_variables_strokes&&n.createElement(y.no,{variableScope:p.xTW.STROKE_FLOAT}))}class L{format(e){switch(e){case"CENTER":return(0,d.t)("fullscreen.properties_panel.stroke.center");case"INSIDE":return(0,d.t)("fullscreen.properties_panel.stroke.inside");case"OUTSIDE":return(0,d.t)("fullscreen.properties_panel.stroke.outside")}}}class P extends n.PureComponent{constructor(){super(...arguments),this.sentenceCaseFormatter=new L,this.onStrokeAlignChange=(e,t=_.P7.YES)=>{this.props.onChange({strokeAlign:e},t)}}render(){return n.createElement(C,{id:"stroke-align-select",className:o()(w.Sf,{[w.j9]:this.props.gridLeft}),inputClassName:w.Yz,chevronClassName:w.GH,formatter:this.sentenceCaseFormatter,property:this.props.strokeAlign,onChange:this.onStrokeAlignChange,dispatch:this.props.dispatch,dropdownWidth:96,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey,disabled:this.props.disabled,enablePreview:!0},n.createElement(O,{value:"CENTER"}),n.createElement(O,{value:"INSIDE"}),n.createElement(O,{value:"OUTSIDE"}))}}function R({children:e,inputClassName:t,field:r,inputRef:a,isNotPencilTool:o,recordingKey:s}){let c=(0,i.I0)(),{updateVariableConsumption:d,consumedVariable:m}=(0,v.tN)([r]),{clearVariableConsumption:h,consumedVariable:_}=(0,v.tN)(["BORDER_BOTTOM_WEIGHT","BORDER_TOP_WEIGHT","BORDER_LEFT_WEIGHT","BORDER_RIGHT_WEIGHT"]),{clearVariableConsumption:g}=(0,v.tN)(["STROKE_WEIGHT"]),f=(0,y.al)(m)??(0,y.al)(_)??void 0,b=n.useCallback(async e=>{if(e){let t=await c((0,u.UP)(e));d((0,v.SZ)(p.QC$.FLOAT,t))}else h(),g()},[h,g,c,d]);return(0,l.BZ)().ds_variables_strokes&&o?n.createElement(y.eE,{boundVariableId:f,resolvedType:p.QC$.FLOAT,onVariableSelected:b},n.createElement(E.z9,{inputRef:a,inputClassName:t,currentFieldValue:f,hasBindingContextMenu:!0,hideIcon:!0,recordingKey:s},n.cloneElement(n.Children.only(e),{className:void 0,isTokenizable:!0,noBorderOnHover:!0}))):n.cloneElement(n.Children.only(e),{className:t})}P.displayName="StrokeAlignSelection"},586294:(e,t,r)=>{r.d(t,{Cg:()=>F,JD:()=>x,gI:()=>k,iF:()=>D,n4:()=>R,r:()=>B,vi:()=>V,wj:()=>U});var n,i,a,o,l,s=r(652983),c=r(407908),d=r(848080),u=r(46347),p=r(172497),m=r(615537),h=r(204829),_=r(961215),g=r(784667),f=r(639399),E=r(840568),y=r(110044),v=r(492459),b=r(572333),I=r(966041),T=r(317356),w=r(491273),S=r(357221),C=r(246997),O=r(896750),A=r(162469),N=r(795027),L=r(998291),P=r(332224);let R="properties-panel-scroll-container",k=()=>{let e=(0,c.v9)(I.vs);return s.useMemo(()=>Object.values(e).filter(e=>!e.deletedFromSceneGraph),[e])},D=(0,p.z)(P.XoY),M=(e,t)=>e?h.ar(e,t):t;var F=((n=F||{})[n.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",n[n.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",n[n.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",n);(i||(i={})).ConnectedFillPanel=(0,c.$j)(e=>({library:e.library,mirror:e.mirror,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let t=(0,g.iD)(),{version:r}=(0,d.Fg)();return s.createElement(N.pV,{key:e.key,selectionProperties:e.selectionProperties,fillPaints:e.selectionProperties.fillPaints,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,currentTool:e.mirror.appModel.currentTool,colorFormat:t,editModeType:e.mirror.appModel.activeCanvasEditModeType,defaultColor:y.JX,inheritStyleKey:e.selectionProperties.inheritFillStyleKey||null,inheritStyleID:e.selectionProperties.inheritFillStyleID||null,library:e.library,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,openFile:e.openFile,recordingKey:M(e.recordingKey,"fillPanel"),selectionContainsFrames:(0,f.Ee)(e.mirror),hasExports:!!e.selectionProperties.exportSettings&&(0,E.NA)(e.selectionProperties.exportSettings,[]).length>0,exportBackgroundDisabled:e.selectionProperties.exportBackgroundDisabled,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===r})});let x=i.ConnectedFillPanel;(a||(a={})).ConnectedEffectsPanel=(0,c.$j)(e=>({library:e.library,mirror:e.mirror,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let t=e.mirror.selectedStyleProperties&&!!e.mirror.selectedStyleProperties.guid,{smallNudgeAmount:r,bigNudgeAmount:n}=(0,g.pb)(),{version:i}=(0,d.Fg)();return s.createElement(O.O,{key:"effects",stylePickerShown:e.stylePickerShown,effects:e.selectionProperties.effects||[],inheritStyleKey:e.selectionProperties.inheritEffectStyleKey||null,inheritStyleID:e.selectionProperties.inheritEffectStyleID||null,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,smallNudgeAmount:r,bigNudgeAmount:n,library:e.library,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,openFile:e.openFile,recordingKey:M(e.recordingKey,"effectsPanel"),selectionContainsOnlySpreadEligibleNodes:!!e.selectionProperties.containsOnlySpreadEligibleNodes||t,selectionContainsAnyKnockoutShadowEligibleNodes:!!e.selectionProperties.containsAnyKnockoutShadowEligibleNodes||t,framelikeWithoutFills:!!e.selectionProperties.framelikeWithoutFills,framelikeWithoutClipping:!!e.selectionProperties.framelikeWithoutClipping,isUI3:"ui3"===i})});let U=a.ConnectedEffectsPanel;(o||(o={})).ConnectedGridsPanel=(0,c.$j)(e=>({library:e.library,mirror:e.mirror,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let t=(0,g.iD)(),{smallNudgeAmount:r,bigNudgeAmount:n}=(0,g.pb)(),i=(0,b.mA)(_.O$1.editorPreferences().showFrameGrids);return s.createElement(A.O,{key:"grids",stylePickerShown:e.stylePickerShown,layoutGrids:e.selectionProperties.layoutGrids,smallNudgeAmount:r,bigNudgeAmount:n,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentTool:e.mirror.appModel.currentTool,colorFormat:t,showFrameGrids:i,editModeType:e.mirror.appModel.activeCanvasEditModeType,inheritStyleKey:e.selectionProperties.inheritGridStyleKey||null,inheritStyleID:e.selectionProperties.inheritGridStyleID||null,library:e.library,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,openFile:e.openFile,recordingKey:M(e.recordingKey,"gridsPanel")})});let B=o.ConnectedGridsPanel;(e=>{let t=(0,m.ws)((e,t,r,n,i,a)=>({supported:t||{},applicable:e||{},on:r||[],off:n||[],mixed:i||[]}));e.ConnectedTypePanel=(0,c.$j)(e=>({library:e.library,mirror:e.mirror,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion,hasSeenTruncationOnboarding:!!e.userFlags.seen_text_truncation_onboarding}),null,(e,r,n)=>({...e,...n,...r,openTypeFeatures:t(n.selectionProperties.availableOTFeaturesForSelection,n.selectionProperties.availableOTFeaturesForFonts,n.selectionProperties.toggledOnOTFeaturesForSelection,n.selectionProperties.toggledOffOTFeaturesForSelection,n.selectionProperties.mixedStateOTFeaturesForSelection,e.mirror.selectedStyleProperties.guid)}))(function(e){let t=s.useContext(C.DR),r=(0,b.mA)(_.O$1.propertiesPanelState().enabledTypePanelControls),n=null!=t;(0,u.q8)(null!=e.selectionProperties.fontFamily,"TypePanel missing fontFamily"),(0,u.q8)(null!=e.selectionProperties.fontStyle,"TypePanel missing fontStyle"),(0,u.q8)(null!=e.selectionProperties.fontSize,"TypePanel missing fontSize"),(0,u.q8)(n||null!=e.selectionProperties.textLineType,"TypePanel missing textLineType"),(0,u.q8)(n||null!=e.selectionProperties.wholeNodeTextLineType,"TypePanel missing wholeNodeTextLineType"),(0,u.q8)(null!=e.selectionProperties.lineHeight,"TypePanel missing lineHeight"),(0,u.q8)(null!=e.selectionProperties.letterSpacing,"TypePanel missing letterSpacing"),(0,u.q8)(null!=e.selectionProperties.paragraphSpacing,"TypePanel missing paragraphSpacing"),(0,u.q8)(null!=e.selectionProperties.paragraphIndent,"TypePanel missing paragraphIndent"),(0,u.q8)(null!=e.selectionProperties.listSpacing,"TypePanel missing listSpacing"),(0,u.q8)(null!=e.selectionProperties.textCase,"TypePanel missing textCase"),(0,u.q8)(null!=e.selectionProperties.textDecoration,"TypePanel missing textDecoration"),(0,u.q8)(null!=e.selectionProperties.maxLines,"TypePanel missing maxLines");let{smallNudgeAmount:i,bigNudgeAmount:a}=(0,g.pb)(),o=(0,T.HZ)(e.selectionProperties.inheritTextStyleKey??null,e.selectionProperties.inheritTextStyleID??null,"TEXT"),l=(0,w.f)(),c=(0,v.$D)(["TEXT_DATA"]).data??[],p=(0,v.$D)(["FONT_STYLE"]).data??[],m=(0,S.FC)().variableConsumptionMap,h=(0,S.Cr)(),{version:f}=(0,d.Fg)();return s.createElement(L.kj,{key:"type",fonts:e.fonts,fontFamily:e.selectionProperties.fontFamily,fontStyle:e.selectionProperties.fontStyle,fontSize:e.selectionProperties.fontSize,lineHeight:e.selectionProperties.lineHeight,intrinsicLineHeight:e.selectionProperties.intrinsicLineHeight,letterSpacing:e.selectionProperties.letterSpacing,paragraphSpacing:e.selectionProperties.paragraphSpacing,paragraphIndent:e.selectionProperties.paragraphIndent,listSpacing:e.selectionProperties.listSpacing,textLineType:e.selectionProperties.textLineType,textDirectionality:e.selectionProperties.textDirectionality,hasHadRTLText:e.selectionProperties.hasHadRTLText,wholeNodeTextLineType:e.selectionProperties.wholeNodeTextLineType,isHangingPunctuationApplicableToSelection:e.selectionProperties.isHangingPunctuationApplicableToSelection,textCase:e.selectionProperties.textCase,textDecoration:e.selectionProperties.textDecoration,inheritStyleKey:e.selectionProperties.inheritTextStyleKey||null,inheritStyleID:e.selectionProperties.inheritTextStyleID||null,mainStyle:o,textContentBoundAsset:l,textAlignHorizontal:e.selectionProperties.textAlignHorizontal,textAlignVertical:e.selectionProperties.textAlignVertical,textAutoResize:e.selectionProperties.textAutoResize,missingFont:e.selectionProperties.missingFont,textUserLayoutVersion:e.selectionProperties.textUserLayoutVersion,textBidiVersion:e.selectionProperties.textBidiVersion,textTruncation:e.selectionProperties.textTruncation,leadingTrim:e.selectionProperties.leadingTrim,leadingTrimEnabled:e.selectionProperties.leadingTrimEnabled,hangingPunctuation:e.selectionProperties.hangingPunctuation,hangingList:e.selectionProperties.hangingList,fontVariantDiscretionaryLigatures:e.selectionProperties.fontVariantDiscretionaryLigatures||!1,fontVariantHistoricalLigatures:e.selectionProperties.fontVariantHistoricalLigatures||!1,fontVariantNumericFigure:e.selectionProperties.fontVariantNumericFigure||"NORMAL",fontVariantNumericSpacing:e.selectionProperties.fontVariantNumericSpacing||"NORMAL",fontVariantNumericFraction:e.selectionProperties.fontVariantNumericFraction||"NORMAL",fontVariantCaps:e.selectionProperties.fontVariantCaps||"NORMAL",fontVariantPosition:e.selectionProperties.fontVariantPosition||"NORMAL",fontVariations:e.selectionProperties.fontVariations||[],detachOpticalSize:e.selectionProperties.detachOpticalSizeFromFontSize||!1,openTypeFeatures:e.openTypeFeatures,shouldDirectlyWriteOTFeatures:void 0!==e.mirror.selectedStyleProperties.guid,editModeType:e.mirror.appModel.activeCanvasEditModeType,enabledTypePanelControls:r,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,smallNudgeAmount:i,bigNudgeAmount:a,library:e.library,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,openFile:e.openFile,localFontAgentVersion:e.localFontAgentVersion,recordingKey:M(e.recordingKey,"typePanel"),hasSeenTruncationOnboarding:e.hasSeenTruncationOnboarding,textVariablesExist:c.length>0,fontStyleVariablesExist:p.length>0,variableConsumptionMap:n?h:m,isSlides:e.isSlides,version:f})})})(l||(l={}));let V=l.ConnectedTypePanel},699483:(e,t,r)=>{r.d(t,{Bs:()=>J,I6:()=>H,z8:()=>er});var n=r(652983),i=r(407908),a=r(337167),o=r(204829),l=r(361763),s=r(618723),c=r(970740),d=r(954035),u=r(179110),p=r(784667),m=r(840568),h=r(809377),_=r(794609),g=r(321909),f=r(225468),E=r(471845),y=r(545691),v=r(197060),b=r(160905);let I=[0,0,0,0],T=n.createContext([I,()=>{}]);function w({easingFunction:e,children:t}){let[r,i]=n.useState(e||I);return n.useEffect(()=>{e&&i(e)},[e]),e?n.createElement(T.Provider,{value:[r,i]},t):n.createElement(n.Fragment,null,t)}var S=r(303801),C=r(639875),O=r(332284),A=r(129511),N=r(594423),L=r(352265),P=r(362526);function R(e){if(!(0,L.NY)(e)){let t=e[L.kl.STIFFNESS],r=e[L.kl.DAMPING],n=e[L.kl.MASS];n>0||(e[L.kl.MASS]=1),t>0||(e[L.kl.STIFFNESS]=N._I.MIN_STIFFNESS),r>0||(e[L.kl.DAMPING]=N._I.MIN_DAMPING)}return e}let k=n.memo(function(e){let t=(0,i.I0)(),r=t=>{e.updateSelectionProperties({easingFunction:t}),C.S2.trigger("activateBezierAnimation")},a=(r,n,i)=>{let a=(0,L.FY)(r);e.updateSelectionProperties({easingFunction:r,transitionDuration:a}),C.as.trigger("restartSpringAnimation"),i===g.P7.YES&&t((0,_.ie)({name:"Prototype Spring Animations Set Custom Value",params:{editedValue:n,...(0,N.Rj)(r)}}))};return n.createElement(T.Consumer,null,([i,l])=>n.createElement("div",null,"CUSTOM_BEZIER"===e.easingType?n.createElement(n.Fragment,null,n.createElement(O.O,{tempBezierValues:i,setTempBezierValues:l,updateSelectionProperties:e.updateSelectionProperties,recordingKey:o.ar(e,"cubicBezierCurve"),isNarrowPanel:e.isNarrowPanel}),n.createElement(S.X2,null,n.createElement(b.D7,{className:P.qH,formatter:v.W,property:i,onChange:r,recordingKey:o.ar(e,"cubicBezierFunctionInput")}))):"CUSTOM_SPRING"===e.easingType?n.createElement(n.Fragment,null,n.createElement("div",{className:P.F0},n.createElement(A.L,{value:i,onInput:l,onChange:(e,t)=>{a(e,t,g.P7.YES)},recordingKey:o.ar(e,"springCurve"),isNarrowPanel:e.isNarrowPanel})),n.createElement(S.X2,null,n.createElement(S.__,{className:P.V0,htmlFor:"easing-editor-spring-stiffness-input"},n.createElement(c.Tx,{id:"proto.easing_editor.spring_stiffness"})),n.createElement(E.wx,{id:"easing-editor-spring-stiffness-input",className:P.tD,"data-tooltip-type":f.fR.TEXT,min:N._I.MIN_STIFFNESS,max:N._I.MAX_STIFFNESS,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,c.t)("proto.easing_editor.spring_stiffness"),tooltipForScreenReadersOnly:!0,value:i[L.kl.STIFFNESS],onValueChange:(e,t)=>{let r=R(i.slice());r[L.kl.STIFFNESS]=e,a(r,"STIFFNESS",t)},recordingKey:o.ar(e,"springStiffnessInput"),dispatch:t})),n.createElement(S.X2,null,n.createElement(S.__,{className:P.V0,htmlFor:"easing-editor-spring-damping-input"},n.createElement(c.Tx,{id:"proto.easing_editor.spring_damping"})),n.createElement(E.wx,{id:"easing-editor-spring-damping-input",className:P.tD,"data-tooltip-type":f.fR.TEXT,min:N._I.MIN_DAMPING,max:N._I.MAX_DAMPING,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,c.t)("proto.easing_editor.spring_damping"),tooltipForScreenReadersOnly:!0,value:i[L.kl.DAMPING],onValueChange:(e,t)=>{let r=R(i.slice());r[L.kl.DAMPING]=e,a(r,"DAMPING",t)},recordingKey:o.ar(e,"springDampingInput"),dispatch:t})),n.createElement(S.X2,null,n.createElement(S.__,{className:P.V0,htmlFor:"easing-editor-spring-mass-input"},n.createElement(c.Tx,{id:"proto.easing_editor.spring_mass"})),n.createElement(E.wx,{id:"easing-editor-spring-mass-input",className:P.tD,"data-tooltip-type":f.fR.TEXT,min:N._I.MIN_MASS,max:N._I.MAX_MASS,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,c.t)("proto.easing_editor.spring_mass"),tooltipForScreenReadersOnly:!0,value:i[L.kl.MASS],onValueChange:(e,t)=>{let r=R(i.slice());r[L.kl.MASS]=e,a(r,"MASS",t)},recordingKey:o.ar(e,"springMassInput"),dispatch:t}))):null))});var D=r(198733),M=r(933889),F=r(482919),x=r(737942),U=r(332224);let B="prototype_animation_panel--transitionRightCol--3L083",V="prototype_animation_panel--input--p60KV",G="prototype_animation_panel--chevron--cje-0",H="transition_behavior_select_onboarding_key";var W=["LINEAR","SELECT_DIVIDER","EASE_IN","EASE_OUT","EASE_IN_AND_OUT","EASE_IN_BACK","EASE_OUT_BACK","EASE_IN_AND_OUT_BACK","CUSTOM_BEZIER","SELECT_DIVIDER","GENTLE","QUICK","BOUNCY","SLOW","CUSTOM_SPRING"];let K={scrollTo:["INSTANT","SCROLL_ANIMATE"],nonScrollTo:["INSTANT","DISSOLVE","SMART_ANIMATE","SELECT_DIVIDER","MOVE","MOVE_OUT","PUSH","SLIDE","SLIDE_OUT"]};function z(e,t,r){let n="DRAG"!==e||"INSTANT"!==r&&"DISSOLVE"!==r,i=!1;switch(t){case"NAVIGATE":i="SCROLL_ANIMATE"!==r;break;case"OVERLAY":i=["INSTANT","DISSOLVE","MOVE"].indexOf(r??"")>=0;break;case"SCROLL_TO":i=["INSTANT","SCROLL_ANIMATE"].indexOf(r??"")>=0;break;case"SWAP":i=["INSTANT","DISSOLVE","MOVE","SMART_ANIMATE"].indexOf(r??"")>=0;break;case"SWAP_STATE":i=["INSTANT","DISSOLVE","SMART_ANIMATE"].indexOf(r??"")>=0}return i&&n}let Z="RIGHT";function Y(e){switch(e.behavior){case"INSTANT":return{transitionType:"INSTANT_TRANSITION"};case"DISSOLVE":return{transitionType:"DISSOLVE"};case"FADE":return{transitionType:"FADE"};case"PUSH":case"SLIDE":case"MOVE":if(!e.direction)return{transitionType:`${e.behavior}_FROM_${Z}`};return{transitionType:`${e.behavior}_FROM_${e.direction}`};case"SLIDE_OUT":case"MOVE_OUT":if(!e.direction)return{transitionType:`${e.behavior}_TO_${Z}`};return{transitionType:`${e.behavior}_TO_${e.direction}`};case"SMART_ANIMATE":return{transitionType:"SMART_ANIMATE"};case"SCROLL_ANIMATE":return{transitionType:"SCROLL_ANIMATE"};default:return{}}}function j(e){switch(e.easing){case"EASE_IN":return{easingType:"IN_CUBIC"};case"EASE_OUT":return{easingType:"OUT_CUBIC"};case"EASE_IN_AND_OUT":return{easingType:"INOUT_CUBIC"};case"LINEAR":return{easingType:"LINEAR"};case"EASE_IN_BACK":return{easingType:"IN_BACK_CUBIC"};case"EASE_OUT_BACK":return{easingType:"OUT_BACK_CUBIC"};case"EASE_IN_AND_OUT_BACK":return{easingType:"INOUT_BACK_CUBIC"};case"CUSTOM_BEZIER":return{easingType:"CUSTOM_CUBIC"};case"GENTLE":return{easingType:"GENTLE_SPRING"};case"QUICK":return{easingType:"SPRING_PRESET_ONE"};case"BOUNCY":return{easingType:"SPRING_PRESET_TWO"};case"SLOW":return{easingType:"SPRING_PRESET_THREE"};case"CUSTOM_SPRING":return{easingType:"CUSTOM_SPRING"};default:return{}}}function $(e){return"GENTLE"===e||"QUICK"===e||"BOUNCY"===e||"SLOW"===e||"CUSTOM_SPRING"===e}function q(e,t){switch(e.easing){case"EASE_IN":return{easingFunction:[.42,0,1,1]};case"EASE_OUT":return{easingFunction:[0,0,.58,1]};case"EASE_IN_AND_OUT":return{easingFunction:[.42,0,.58,1]};case"LINEAR":return{easingFunction:[0,0,1,1]};case"EASE_IN_BACK":return{easingFunction:[.3,-.05,.7,-.5]};case"EASE_OUT_BACK":return{easingFunction:[.45,1.45,.8,1]};case"EASE_IN_AND_OUT_BACK":return{easingFunction:[.7,-.4,.4,1.4]};case"CUSTOM_BEZIER":return!(0,m.Wn)(e.easingFunction)||t?{easingFunction:[0,0,.58,1]}:{easingFunction:e.easingFunction};case"GENTLE":return{easingFunction:[1,100,15,0]};case"QUICK":return{easingFunction:[1,300,20,0]};case"BOUNCY":return{easingFunction:[1,600,15,0]};case"SLOW":return{easingFunction:[1,80,20,0]};case"CUSTOM_SPRING":return!(0,m.Wn)(e.easingFunction)||t?{easingFunction:[1,100,15,0]}:{easingFunction:(0,L.WC)(e.easingFunction)};default:return{}}}function X(e,t){if((0,m.Wn)(e.easing)){if($(e.easing)){let r=q(e,t).easingFunction;if(r&&(0,m.Wn)(r))return{transitionDuration:(0,L.FY)(r)}}else if(t)return{transitionDuration:.3}}if((0,m.Wn)(e.duration))return e.duration?{transitionDuration:e.duration}:{}}function J({transition:e,interactionType:t,navigationType:r,recordingKey:l,isNarrowPanel:d,stateManagementVersion:v,updateSelectionProperties:b}){let I=(0,i.I0)(),O=(0,h.L)(),A=(0,p.W$)(),P=(0,a.Dv)(D.R),R=(0,u.zQ)(),M=(t,r)=>{let n=e.easingFunction;if((0,m.Wn)(n)){let e=(0,N.T4)(t,(0,L.WC)(n)),i=(0,L.FY)(e);b({easingFunction:e,transitionDuration:i}),C.as.trigger("restartSpringAnimation"),r===g.P7.YES&&I((0,_.ie)({name:"Prototype Spring Animations Set Custom Value",params:{editedValue:"DURATION",...(0,N.Rj)(e)}}))}},F=(0,m.qD)(e.behavior),U=(0,m.qD)(r),V="NAVIGATE"===U,G="INSTANT"!==e.behavior&&"DISSOLVE"!==e.behavior&&"SMART_ANIMATE"!==e.behavior&&"SCROLL_ANIMATE"!==e.behavior,H="INSTANT"!==e.behavior&&z(t,U,(0,m.qD)(e.behavior)),W=H&&!P;H=z(t,U,(0,m.qD)(e.behavior));let K=!e.isSpringTransition||"INSTANT"===e.behavior,Z="INSTANT"===e.behavior,J=n.createElement(el,{className:"prototype_animation_panel--transitionLeftCol--33VAT",property:e.easing,dispatch:I,dropdownShown:O,onChange:t=>{I((0,_.ie)({name:"Prototype Transition Easing Changed",params:{newEasing:t}}));let r={...e,easing:t},n=e.easing,i=!(0,m.Wn)(n)||$(t)!==$(n);b({...j(r),...q(r,i),...X(r,i)}),setTimeout(()=>{$(t)?C.as.trigger("restartSpringAnimation"):C.S2.trigger("activateBezierAnimation")},0)},recordingKey:o.ar(l,"easingDropdown")}),Q=n.createElement(n.Fragment,null,K&&n.createElement(E.Py,{className:B,dispatch:I,value:e.duration,onValueChange:t=>{I((0,_.ie)({name:"Prototype Transition Duration Changed",params:{newDuration:t}}));let r={...e,duration:t};b({...X(r)})},wheelMultiplier:A/10,scrubMultiplier:.004166666666666667,"data-tooltip-type":f.fR.TEXT,"data-tooltip":(0,c.t)("proto.animation_panel.easing_duration_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:o.ar(l,"durationInput")}),!Z&&(0,m.Wn)(e.easing)&&$(e.easing)&&(0,m.Wn)(e.easingFunction)&&n.createElement(T.Consumer,null,([e])=>n.createElement(E.Py,{className:B,dispatch:I,value:(0,N.an)((0,L.WC)(e)),onValueChange:M,wheelMultiplier:A/10,scrubMultiplier:.004166666666666667,"data-tooltip-type":f.fR.TEXT,"data-tooltip":(0,c.t)("proto.animation_panel.easing_duration_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:o.ar(l,"springDurationInput")}))),ee=R?n.createElement(x.x,{left:J,right:Q}):n.createElement(S.X2,null,J,Q),et=n.createElement(ei,{className:R?void 0:G?"prototype_animation_panel--shortSelect--Hcoa7":"prototype_animation_panel--longSelect--JgkKH",interactionType:t,navigationType:U,property:e.behavior,dispatch:I,dropdownShown:O,onChange:t=>{I((0,_.ie)({name:"Prototype Transition Type Changed",params:{newType:t,oldType:(0,m.NA)(e.behavior,"MIXED"),smartAnimateMatchingLayers:(0,m.NA)(e.shouldSmartAnimate,null)}}));let r={...e,behavior:t};b({...Y(r),...j(r),...q(r),...X(r),...function(e,t){if((0,m.Wn)(e.preserveScroll)&&1!==t)return{transitionPreserveScroll:e.preserveScroll}}(r,v),...function(e){if((0,m.Wn)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}(r)})},recordingKey:o.ar(l,"behaviorDropdown")}),er=G?n.createElement(eE,{className:"prototype_animation_panel--transitionDirection--Nmb6Y",property:e.direction?e.direction:null,onChange:t=>{I((0,_.ie)({name:"Prototype Transition Direction Changed",params:{newDirection:t,oldDirection:(0,m.NA)(e.direction,"MIXED")}}));let r=e.direction?{...e,direction:t}:{...e,direction:t,behavior:"MOVE"};b({...Y(r)})},recordingKey:o.ar(l,"directionControl")}):null,en=R?G?n.createElement(x.x,{left:et,right:er}):n.createElement(x.T,null,et):n.createElement(S.X2,null,et,er);return n.createElement(S.s_,{className:"prototype_animation_panel--animationPanel--9dIh2"},en,H&&!Z&&V&&("MOVE"==F||"MOVE_OUT"==F||"PUSH"==F||"SLIDE"==F||"SLIDE_OUT"==F)&&n.createElement(n.Fragment,null,n.createElement(S.X2,{className:"prototype_animation_panel--checkboxRow----O-1 checkbox--_checkboxRow--oEhow","data-tooltip-type":f.fR.TEXT,"data-tooltip-show-above":!0,"data-tooltip":(0,c.t)("proto.animation_panel.smart_animate_matching_layers_tooltip")},n.createElement(y.v,{id:"transition-should-smart-animate",property:e.shouldSmartAnimate,onChange:t=>{let r=(0,m.qD)(e.behavior);I((0,_.ie)({name:"Smart Animate Changed",params:{newValue:t,transitionType:r}}));let n={...e,shouldSmartAnimate:t};b({...function(e){if((0,m.Wn)(e.shouldSmartAnimate))return{transitionShouldSmartAnimate:e.shouldSmartAnimate}}(n)})},recordingKey:o.ar(l,"transition-should-smart-animate"),className:"prototype_animation_panel--checkbox--s8QFk"}),n.createElement(s.__,{htmlFor:"transition-should-smart-animate",className:"prototype_animation_panel--label--i8ZCr checkbox--_checkboxLabelMultiline--kcM-C"},n.createElement(c.Tx,{id:"proto.animation_panel.animate_matching_layers"})))),n.createElement(w,{easingFunction:(0,m.Wn)(e.easingFunction)?e.easingFunction:null},H&&!Z&&ee,H&&!Z&&("CUSTOM_BEZIER"===e.easing||"CUSTOM_SPRING"===e.easing)&&(0,m.Wn)(e.easingFunction)&&n.createElement(k,{easingType:e.easing,easingFunction:e.easingFunction,duration:e.duration,updateSelectionProperties:b,recordingKey:o.ar(l,"easingEditor"),isNarrowPanel:d})),W&&n.createElement("div",{className:"prototype_animation_panel--previewPane--q9Wvl"},!K&&n.createElement(C.nN,{transition:e,isNarrowPanel:d}),K&&n.createElement(C.vv,{transition:e,isNarrowPanel:d})))}class Q extends F.Ph{}class ee extends F.Wx{}let et=new class{formatImpl(e,t){if(null==e)return"";switch(e){case"LINEAR":return(0,c.t)("proto.easing_behavior.linear");case"EASE_IN":return(0,c.t)("proto.easing_behavior.bezier_ease_in");case"EASE_OUT":return(0,c.t)("proto.easing_behavior.bezier_ease_out");case"EASE_IN_AND_OUT":return(0,c.t)("proto.easing_behavior.bezier_ease_in_and_out");case"EASE_IN_BACK":return(0,c.t)("proto.easing_behavior.bezier_ease_in_back");case"EASE_OUT_BACK":return(0,c.t)("proto.easing_behavior.bezier_ease_out_back");case"EASE_IN_AND_OUT_BACK":return(0,c.t)("proto.easing_behavior.bezier_ease_in_and_out_back");case"CUSTOM_BEZIER":return t?(0,c.t)("proto.easing_behavior.bezier_custom"):(0,c.t)("proto.easing_behavior.bezier_custom_short");case"GENTLE":return(0,c.t)("proto.easing_behavior.spring_gentle");case"QUICK":return(0,c.t)("proto.easing_behavior.spring_quick");case"BOUNCY":return(0,c.t)("proto.easing_behavior.spring_bouncy");case"SLOW":return(0,c.t)("proto.easing_behavior.spring_slow");case"CUSTOM_SPRING":return t?(0,c.t)("proto.easing_behavior.spring_custom"):(0,c.t)("proto.easing_behavior.spring_custom_short");default:{let t=new d.QB;return t.format(e)}}}format(e){return this.formatImpl(e,!1)}formatExtended(e){return{text:this.formatImpl(e,!0)}}};class er{constructor(){this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return(0,c.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,c.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,c.t)("proto.transition_behavior.push");case"MOVE":return(0,c.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,c.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,c.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,c.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,c.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,c.t)("proto.transition_behavior.animate")}return""}}}let en=new er;class ei extends n.PureComponent{render(){let e="SCROLL_TO"===this.props.navigationType?K.scrollTo:K.nonScrollTo;return n.createElement(Q,{id:`animation-behavior-select-${this.props.recordingKey}`,className:this.props.className,chevronClassName:G,inputClassName:V,dropdownWidth:U.e0f,property:this.props.property,formatter:en,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:o.ar(this.props,"select"),dataTestId:"transition-select",hideDropdownWhenContainerMoves:!(0,l.rm)(),dataOnboardingKey:H},e.map((e,t)=>"SELECT_DIVIDER"===e?n.createElement(F.Hz,{key:t}):n.createElement(ee,{key:e,value:e,disabled:!z(this.props.interactionType,this.props.navigationType,e),recordingKey:o.ar(this.props,e)})))}}ei.displayName="TransitionBehaviorDropdown";class ea extends F.Ph{}class eo extends F.Wx{}class el extends n.PureComponent{render(){return n.createElement(ea,{id:`easing-type-select-${this.props.recordingKey}`,className:this.props.className,chevronClassName:G,inputClassName:V,dropdownWidth:U.e0f,property:this.props.property,formatter:et,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:o.ar(this.props,"select"),dataOnboardingKey:"easing"},W.map((e,t)=>"SELECT_DIVIDER"===e?n.createElement(F.Hz,{key:t}):n.createElement(eo,{key:t,value:e,disabled:!1,recordingKey:o.ar(this.props,e)})))}}el.displayName="TransitionEasingDropdown";let es=r(812446),ec=r(762138),ed=r(712689),eu=r(328812),ep=r(652620),em=r(617143),eh=r(749851),e_=r(998942);class eg extends M.s{}class ef extends M.X{}class eE extends n.PureComponent{render(){return n.createElement(eg,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},n.createElement(ef,{value:"RIGHT",svg:ec,fallbackSvg:em,recordingKey:o.ar(this.props,"right")}),n.createElement(ef,{value:"LEFT",svg:es,fallbackSvg:ep,recordingKey:o.ar(this.props,"left")}),n.createElement(ef,{value:"TOP",svg:ed,fallbackSvg:eh,recordingKey:o.ar(this.props,"top")}),n.createElement(ef,{value:"BOTTOM",svg:eu,fallbackSvg:e_,recordingKey:o.ar(this.props,"bottom")}))}}eE.displayName="TransitionDirectionControl"},594423:(e,t,r)=>{r.d(t,{GX:()=>d,Id:()=>u,Rj:()=>f,SM:()=>p,T4:()=>g,_I:()=>a,an:()=>h,f0:()=>c});var n=r(767310),i=r(352265);class a{}a.MAX_W0=1e3,a.MIN_W0=.1,a.MAX_ZETA=1,a.MIN_ZETA=1e-4,a.MIN_MASS=.01,a.MIN_STIFFNESS=.01,a.MIN_DAMPING=.01,a.MAX_MASS=100,a.MAX_STIFFNESS=1e4,a.MAX_DAMPING=1e3;let o=Math.PI/a.MAX_W0;function l(e){let t=e[i.kl.STIFFNESS],r=e[i.kl.DAMPING],n=e[i.kl.MASS];return{frequency:Math.sqrt(t/n),zeta:r/(2*Math.sqrt(t*n))}}function s({frequency:e,zeta:t},r){let o=r[i.kl.MASS]>0?(0,n.uZ)(r[i.kl.MASS],a.MIN_MASS,a.MAX_MASS):1,l=e*e*o,s=2*t*Math.sqrt(l*o),c=r.slice();return c[i.kl.MASS]=o,c[i.kl.STIFFNESS]=l,c[i.kl.DAMPING]=s,c}function c(e){return function({frequency:e,zeta:t}){return{x:Math.max(Math.PI/e,0),y:2-2*Math.pow((0,n.uZ)(t,0,1),.87)}}(l(e))}function d(e,t){let r={frequency:(0,n.uZ)(Math.PI/Math.max(o,e.x),a.MIN_W0,a.MAX_W0),zeta:(0,n.uZ)(Math.pow((2-e.y)/2,1.1494252873563218),a.MIN_ZETA,a.MAX_ZETA)};return s(r,t)}let u=3;function p(e,t){return e[i.kl.STIFFNESS]=m(e[i.kl.STIFFNESS],t),e[i.kl.DAMPING]=m(e[i.kl.DAMPING],t),e}function m(e,t){return+e.toPrecision(t)}function h(e){let{frequency:t,zeta:r}=l(e);return _/(t*r)}let _=6;function g(e,t){let r=l(t).zeta;return p(s({frequency:_/e/r,zeta:r},t),4)}function f(e){let t=c(e),r=h(e);return{mass:e[i.kl.MASS],stiffness:e[i.kl.STIFFNESS],damping:e[i.kl.DAMPING],handleX:t.x,handleY:t.y,duration:r}}},352265:(e,t,r)=>{function n(e,t){return function(e,t,r,n,i){let a,o,l;let s=Math.sqrt(t/e),c=r/(2*Math.sqrt(t*e));return c<1?(a=s*Math.sqrt(1-c*c),o=1,l=(c*s+-n)/a):(a=0,o=1,l=-n+s),1-(i=c<1?Math.exp(-i*c*s)*(o*Math.cos(a*i)+l*Math.sin(a*i)):(o+l*i)*Math.exp(-i*s))}(e[0],e[1],e[2],e[3],t)}function i(e){return function(e,t){let r=e[1],n=e[2],i=e[0],a=e[3],o=Math.sqrt(r/i),l=Math.min(.9999,n/(2*Math.sqrt(r*i)));return(-Math.log(.001)+Math.log(1+(l*o+Math.abs(a))/(o*Math.sqrt(1-l*l))))/(l*o)}(e,0)}r.d(t,{CV:()=>n,FY:()=>i,NY:()=>l,WC:()=>s,kl:()=>o});var a,o=((a=o||{})[a.MASS=0]="MASS",a[a.STIFFNESS=1]="STIFFNESS",a[a.DAMPING=2]="DAMPING",a[a.INITIAL_VELOCITY=3]="INITIAL_VELOCITY",a);function l(e){let t=e[1],r=e[2],n=e[0];return t>0&&r>0&&n>0}function s(e){return l(e)?e:[1,100,10,0]}},561390:(e,t,r)=>{r.d(t,{_E:()=>D,kK:()=>F,pB:()=>U});var n=r(652983),i=r(947020),a=r.n(i),o=r(524261),l=r(217810),s=r(204829),c=r(564380),d=r(518484),u=r(854571),p=r(212984),m=r(970740),h=r(961215),_=r(785209),g=r(340643),f=r(21525),E=r(344931),y=r(408073),v=r(840568),b=r(492459),I=r(435189),T=r(640634),w=r(157607),S=r(550527),C=r(678599),O=r(716594),A=r(647180),N=r(831679),L=r(592386),P=r(162933),R=r(192911),k=r(488434);let D=n.createContext({autoCloseOnScroll:!0}),M=(0,o.kH)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>{let e=await Promise.all([r.e(704),r.e(9457)]).then(r.bind(r,329457));return{default:e.ExpressionBuilderSearch}}});function F({resolvedType:e,targetVariableData:t,autoOpenExpressionBuilder:i,setAutoOpenExpressionBuilder:a,updateSelectionProperties:o,recordingKey:c,updateConditionInConditionalAction:u,isNarrowPanel:p,showVariableThumbnails:m,setVariableValue:h,onClose:g}){let E=!1;(0,v.nK)(t)&&(t=void 0,E=!0);let[b,I]=n.useState(null),T=n.useCallback(e=>{null!==e&&I(e)},[]),[w,S]=n.useState(null),{shouldShowAdvancedPrototypingPaywall:C,showAdvancedPrototypingVariablesModal:O}=(0,N.v6)(),A=n.useCallback(()=>{if(C)O();else if(!w&&b){let e=b.getBoundingClientRect();S(new d.OW(e.left-34,e.top-6))}},[b,w,C,O]);n.useEffect(()=>{!0===i&&a&&b&&(A(),a(!1))},[i,b,A,a]);let L=n.useCallback(()=>{w&&(S(null),g&&g())},[w,g]),P=n.useCallback(e=>{if(void 0!==u)u(e);else if((0,l.lm)(h)){let t=h(e);if(!t)return!1}else void 0!==o&&o({targetVariableData:e});return L(),!0},[L,u,o,h]),R=n.createElement(n.Fragment,null,w&&n.createElement(x,{initialTokens:t?(0,_.w)((0,f.P)(t,new y.G(!0))):[],initialPosition:w,resolvedType:e,onCloseExpressionBuilder:L,onInputSubmitted:P,icon:u?r(737530):r(950725),isInConditional:void 0!==u,recordingKey:s.ar(c,"expressionBuilder")})),k=n.createElement(U,{targetVariableData:t,forwardRef:T,onClick:A,recordingKey:c,isNarrowPanel:p,isInCell:!!h,showVariableThumbnails:m,isInConditional:void 0!==u,isMixed:E});return n.createElement(n.Fragment,null,R," ",k)}function x({initialTokens:e,initialPosition:t,resolvedType:r,onCloseExpressionBuilder:i,onInputSubmitted:o,icon:l,isInConditional:d,recordingKey:p}){let{autoCloseOnScroll:h}=n.useContext(D),_=n.useMemo(()=>e.reduce((e,t)=>e+=t.stringValue,""),[e]),f=n.useRef(_),v=n.useRef(!1),[b,I]=n.useState(0),T=n.useCallback((e,t)=>{I(e),e>0&&!v.current&&(v.current=!0),t&&(0,P.pA)(f.current,t,r,d?"conditional":"set_variable")},[d,r]),[C,O]=n.useState((0,E.H)(f.current,r)),A=n.useCallback(()=>{if(f.current.trim().length>0){(0,P.pA)(f.current,"success",r,d?"conditional":"set_variable");let e=o((0,g.Q)(f.current,new y.G));if(!e)return O(!e),e}else(0,P.pA)(f.current,"submit_empty",r,d?"conditional":"set_variable"),i();return!0},[d,i,o,r]),N=n.useMemo(()=>a()(e=>{(0,P.pA)(f.current,e,r,d?"conditional":"set_variable"),i()}),[d,i,r]);return n.createElement("div",{className:k.hJ},n.createElement(w.My,{container:S.t,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:t,onClose:i,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},n.createElement(u.Sg,{recordingKey:p},n.createElement("div",null,n.createElement(M,{fallback:n.createElement("div",{className:k.ap}," Loading... "),errorFallback:null,initialTokens:e,expressionText:f,resolvedType:r,error:C,setError:O,onSubmit:A,onClose:N,icon:l,wiggleCount:b,setWiggleCount:T,hasWiggled:v.current,placeholderText:(0,m.t)(d?"proto.expression_builder_entry.placeholder":"proto.expression_builder.placeholder"),isInConditional:d,recordingKey:s.ar(p,"search")})))),n.createElement(c.yh,{className:R.l_,onMouseDown:e=>{let t=!C&&A();t||(b>=1?N("click_out_cancel"):0===b&&T(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{h&&f.current.trim()===_.trim()&&N("scroll_cancel")},recordingKey:s.ar(p,"closeBuilder")}))}function U({targetVariableData:e,forwardRef:t,onClick:r,recordingKey:i,showVariableThumbnails:a,isNarrowPanel:o,isInCell:l,isInConditional:d,isMixed:u}){if(e&&(0,v.Wn)(e)&&(null==e?void 0:e.resolvedType)===h.QC$.COLOR)return n.createElement(A.o,{color:e.value});let _=e?n.useMemo(()=>(0,f.P)(e,new y.G(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})/),[e]):[],g=0===_.length;return n.createElement(c.yh,{onClick:r,recordingKey:s.ar(i,"openExpressionBuilder"),className:p.cx.minW0.$},n.createElement("div",{className:l?k.Jo:o?k.xo:k.ap,ref:t},_.filter(e=>e.length>0).map((e,t)=>{if(e.startsWith("{")&&e.endsWith("}")){let r=e.replace(/[{}]/g,""),{variableId:i,modeId:o}=(0,P.tW)(r);return n.createElement(B,{variableId:i,modeId:o,showVariableThumbnails:a,key:t})}return T.mL(e)?n.createElement(B,{variableId:e,showVariableThumbnails:a,key:t}):P.B.test(e)?n.createElement("span",{key:t},e):P.AY.test(e)||P.I7.test(e)?n.createElement("span",{key:t},e):n.createElement(L.E,{text:e,key:t})}),g&&n.createElement("span",{className:k.qh},u?(0,m.t)("fullscreen.mixed"):d?(0,m.t)("proto.expression_builder_entry.placeholder"):(0,m.t)("proto.expression_builder.placeholder"))))}function B({variableId:e,modeId:t,showVariableThumbnails:r}){let i=(0,b.SW)(e),a=i?(0,O.yT)(i.name):(0,m.t)("proto.expression_builder_entry.missing"),o=(0,b.AS)(null==i?void 0:i.variableSetId),l=o&&t?o.modes.find(e=>e.id===t):null,s=null==l?void 0:l.name,c=i&&r?(0,P.P8)(i.resolvedType):null,d=s?`${a}: ${s}`:`${a}`;return n.createElement(C.f,{text:d,thumbnailValue:c,isDeleted:!!i&&(0,I.Eh)(i)})}},198733:(e,t,r)=>{r.d(t,{R:()=>i});var n=r(337167);let i=(0,n.cn)(!1)},856149:(e,t,r)=>{r.d(t,{V$:()=>eE,jh:()=>en});var n=r(652983),i=r(63730),a=r(407908),o=r(399150),l=r(324424),s=r(87608),c=r.n(s),d=r(172497),u=r(598271),p=r(807012),m=r(9247),h=r(716250),_=r(337167),g=r(31262),f=r(388899),E=r(204829),y=r(564380),v=r(518484),b=r(435613),I=r(525699),T=r(805992),w=r(970740),S=r(280251),C=r(496417),O=r(954035),A=r(158774),N=r(961215),L=r(269075),P=r(840568),R=r(167492),k=r(863797),D=r(200273),M=r(794609),F=r(321909),x=r(367938),U=r(225468),B=r(516714),V=r(709393),G=r(629305),H=r(598167),W=r(286886),K=r(434417),z=r(303801),Z=r(929714),Y=r(607168),j=r(729408),$=r(187451);let q=r(12303),X=r(932200),J=r(858901),Q=new O.rm,ee=new O.tC,et=new O.fS,er=new O.C_,en=n.memo(function(){let e=(0,a.I0)(),t=(0,a.v9)(eo),r=(0,a.v9)(el),o=(0,a.v9)(em),l=(0,a.v9)(ec),s=(0,a.v9)(ed),c=(0,a.v9)(eu),m=(0,W.s2)(),_=(0,W.Dz)(),f=(0,a.v9)(eh),E=(0,a.v9)(es),y=(0,a.v9)(e=>(0,M.vO)()&&!e.mirror.appModel.prototypeCanvasUiVisible),b=Object.keys(c).length>1,I=e_(),T=function(){let e=e_(),t=(0,a.v9)(ep);return!!e&&!!t&&t.selectionOverrides[N.AGs.PROTOTYPE_INTERACTIONS]}(),w=(0,D.CA)(),P=(0,p.Pe)(),R=n.useMemo(()=>new O.NT(s),[s]),k=n.useCallback(e=>R.format(e),[R]),U=n.useRef(null),[V,G]=(0,Z.pl)(),H=e=>{A.Gr.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:F.P7.NO_BUT_TRACK_AS_EDIT}),A.Gr.commit()};return n.createElement(Y.xp,{getNodeName:k},n.createElement(z.s_,{"data-onboarding-key":"prototypePanel",ref:U,"data-testid":"prototype-interaction-list"},n.createElement(ei,{interactionGroups:m,inheritedInternalInteractionGroups:_,mixed:b,isOrInInstance:I,openFile:w,dispatch:e,currentSelectedProperty:l,onChange:(e,n)=>{let i=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),a=new Set,o=[];for(let e of i){let t=u.BB(e.id);if(t&&!a.has(t))o.push(e);else{if(!(t=N.iTB.generateUniqueID()))continue;let r=u.mL(t);if(!r)continue;o.push({...e,id:r})}t&&a.add(t)}n===x.U.NORMAL?o=[...o,...r]:n===x.U.INHERITED_INTERNAL&&(o=[...t,...o]),H(o)},onAddProperty:e=>{e.stopPropagation();let n=[];for(let e of Object.keys(c)){let t=N.iTB.generateUniqueID();if(!t)return;let r=u.mL(t);if(!r)return;let i={id:r,sourceNodeID:u.mL(e)??u.AX,event:{interactionType:function(e){let t=new Set;for(let{event:r}of e)t.add(r.interactionType);let r=(0,h.BZ)().prototype_new_mouse_events?eg:ef;for(let e of r)if(!t.has(e))return e;return"ON_KEY_DOWN"}(m)}};i.stateManagementVersion=1,i.actions=[{connectionType:"NONE"}],n.push(i)}let a=n.map(e=>g.B({nodeID:e.sourceNodeID,interactionID:e.id}));if(a.length>0){N.iTB.setSelectedInteractions(a);let e=i.findDOMNode(U.current),t=(0,B.JJ)(e),r=new v.OW(t.x,t.y+(0,d.F)(j.LPt));eI(r)}let o=[...t,...n,...r];y&&A.Gr.triggerAction("toggle-prototyping-info"),P("prototype_interaction_added",{interactionCount:o.length}),H(o)},onDeleteProperty:(e,t)=>{let r=t===x.U.NORMAL?m:_,n=r.filter((t,r)=>e.has(r)),i=[];for(let e of n)i.push(...e.interactions);let a=eb(i);L.y2.user("delete-prototype-interactions",()=>N.iTB.deleteInteractions(a)),A.Gr.deselectProperty()},shouldIgnoreKeyboardEvents:o.length>0||l.type!==N.Rmy.PROTOTYPE_INTERACTION&&l.type!==N.Rmy.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:f,showScrollBehaviorButton:!!(0,M.vO)()&&!!(G||V),showResetInteractionsButton:T,toggleScrollBehaviorPicker:()=>{if((null==E?void 0:E.id)===C.Fh)e(S.le());else{let t=i.findDOMNode(U.current),r=(0,B.JJ)(t);e(S.bO({id:C.Fh,initialX:r.x,initialY:r.y}))}}}),(0,h.BZ)().prototype_ai_magic_link&&n.createElement(K.r,null)))});function ei(e){let t=n.useRef(!1);return n.createElement(n.Fragment,null,n.createElement(G.xW,{title:(0,w.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,showScrollBehaviorButton:e.showScrollBehaviorButton,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(r,i,a,o,l,s,c,d,u)=>n.createElement(ea,{interactionGroups:e.interactionGroups,interactionGroup:r,index:i,selected:a,hasFocus:l,isDragging:o,singletonRow:e.interactionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:u,dispatch:e.dispatch,category:x.U.NORMAL,autoOpenVariablePicker:t,recordingKey:E.ar("prototypeInteractionList",i),key:i}),openFile:e.openFile,onChange:t=>e.onChange(t,x.U.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:N.Rmy.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,x.U.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:L.UJ.user("reset-instance-interactions",()=>N.iTB.resetSymbolOverrides(N.AGs.PROTOTYPE_INTERACTIONS))}),e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0&&n.createElement(z.X2,null,n.createElement(z.o0,{className:$.PS},n.createElement(w.Tx,{id:"proto.interaction_list.variant_interactions"}))),e.isOrInInstance&&n.createElement(G.xW,{title:"",stylePickerShown:{isShown:!1},addProperty:f.ZT,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(r,i,a,o,l,s,c,d,u)=>n.createElement(ea,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:r,index:i,selected:a,hasFocus:l,isDragging:o,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:u,dispatch:e.dispatch,category:x.U.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:E.ar("prototypeInheritedInternalInteractionList",i)}),openFile:e.openFile,onChange:t=>e.onChange(t,x.U.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:N.Rmy.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,x.U.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:E.ar("prototypeInheritedInternalInteractionList")}))}function ea({interactionGroups:e,interactionGroup:t,index:r,hasFocus:s,isDragging:d,selected:h,singletonRow:f,onMouseDown:v,onMouseMove:O,onMouseUp:P,dispatch:D,category:M,recordingKey:F}){let{getNodeName:G}=(0,Y.Uc)(),K=(0,a.v9)(em),z=(0,W.s2)(),Z=(0,a.v9)(es),j=(null==Z?void 0:Z.id)===C.d8?Z:null,et=(0,a.v9)(ed),er=(0,_.Dv)(k.WH)?ee:Q,en=function(e,t){let r=new Set(t.map(e=>{let t=g.m(e);return t?u.BB(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=u.BB(t.id);if(e&&r.has(e))return!0}return!1}(t,K),ei=n.useRef(null),ea=n.useCallback(()=>{let e=i.findDOMNode(ei.current),t=(0,B.JJ)(e);eI(t)},[]),eo=n.useCallback(()=>{N.iTB.setSelectedInteractions([]),D(S.le()),A.Gr.deselectProperty()},[D]),el=!1,ec=null;for(let e of t.interactions)if(!ec&&e.actions&&e.actions.length>0)ec=e.actions[0];else if(ey(ec,G)!=ey((e.actions??[])[0],G)){el=!0;break}let eu=!1,ep=!1;if(M===x.U.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let r="";if(t.transitionNodeID){let e=et.get(u.BB(t.transitionNodeID));if(e){if(e.isState)r=e.parentGuid||"";else{eu=!0;break}}}let n=N.iTB.getContainingStateGroupOrSelf(u.BB(e.sourceNodeID??u.AX))||"";if(""===n||""!==r&&n!==r){eu=!0;break}}let r=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),n=e.some(e=>"ON_HOVER"===e.event.interactionType);ep=r&&n}eu=M!==x.U.INHERITED_INTERNAL&&eu;let eh=function(e,t,r){if(e!==x.U.INHERITED_INTERNAL)return null;let n=r.find(e=>{if(e.key!==t.key||!(e.interactions.length===t.interactions.length&&1===t.interactions.length))return!1;let r=e.interactions[0],n=t.interactions[0];return function(e,t){let r=void 0!==e.actions&&e.actions.length>=1,n=void 0!==t.actions&&t.actions.length>=1;if(!r||!n)return!1;let i=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),a=e.actions.every(e=>u.JY(e.transitionNodeID));var o=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){o=!0;break}return i&&a&&o}(r,n)});return(null==n?void 0:n.interactions[0])??null}(M,t,e),e_=(0,m.D)(eh),eg=(0,p.Pe)();n.useEffect(()=>{var e,r;null===e_&&eh&&eg("prototype_interaction_conflict_override_created",{interaction_type:null==(e=t.interactions[0].event)?void 0:e.interactionType,action_type:null==(r=eh.event)?void 0:r.interactionType})});let ef=M===x.U.INHERITED_INTERNAL&&z.some(e=>e.key===t.key)&&!eh,eT=h&&s,ew=en&&!h;return n.createElement("div",null,n.createElement(V.t,{ref:ei,"data-testid":`prototypeInteractionItem-${r}`,selected:eT,selectedSecondary:ew,singletonRow:f,dragging:d,onMouseDown:v,onMouseMove:O,onMouseUp:P,onMouseEnter:()=>{let e=eb(t.interactions);N.iTB.hoverInteractions(e)},onMouseLeave:()=>{N.iTB.hoverInteractions([])},recordingKey:E.ar(F,"draggableRow")},n.createElement(y.yh,{className:c()({[$.zP]:!0,[$._W]:eT,[$.gk]:ew}),onClick:r=>{if(!ei)return;let n=ev(t);if(r.metaKey||r.ctrlKey)en?n=K.filter(e=>!n.includes(e)):n.push(...K);else if(r.shiftKey){var i;let r,a;let o=(i=t.key,e.findIndex(({key:e})=>e===i));if(-1===o)return;let l=function(e,t){let r=new Set,n=new Set(t);for(let t=0;t<e.length;t++){let i=e[t];ev(i).some(e=>n.has(e))&&r.add(t)}return r}(e,K),s=function(e,t){let r=1/0,n=e;for(let i of t){let t=Math.abs(e-i);t<r&&(n=i,r=t)}return n}(o,l),c=(r=o,a=s,o>s&&(r=s,a=o),e.slice(r,a+1));for(let e of(n=[...K],c))n.push(...ev(e))}if(N.iTB.setSelectedInteractions(n),A.Gr.updateAppModel({currentSelectedProperty:{type:M===x.U.NORMAL?N.Rmy.PROTOTYPE_INTERACTION:N.Rmy.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),n.length){let e=j&&j.shouldPin;e||ea()}else eo()},onMouseDown:e=>{e.stopPropagation()},recordingKey:F},eu?n.createElement(b.n,{className:$.tO,svg:J,"data-tooltip-type":U.fR.SPECIAL,"data-tooltip":U._7.PROTOTYPE_INVALID_SWAP_STATE}):ep?n.createElement(b.n,{className:$.tO,svg:J,"data-tooltip-type":U.fR.SPECIAL,"data-tooltip":U._7.PROTOTYPE_MULTIPLE_INTERACTIONS_MOUSE_AND_HOVER}):ef&&n.createElement(b.n,{className:$.tO,svg:J,"data-tooltip-type":U.fR.SPECIAL,"data-tooltip":U._7.PROTOTYPE_CONFLICTING_STATE_INSTANCE_AND_BACKING_STATE_INTERACTION}),n.createElement("div",{className:ep||eu||ef?$.Go:$.Sg},function(e,t){let r=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,H.gM)(e.keyTrigger.keyCodes),n=(0,H.Re)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return r+" ("+(0,H.MA)(t)+")";if(n)return r+" ("+n+")"}return r}(t.event,er)),n.createElement(T.f,{className:$.c_,svg:el?(0,R.mR)("NONE"):(0,R.mR)(eE(ec))}),n.createElement("div",{className:$.nX,dir:"auto"},el?(0,w.t)("proto.variant_actions.mixed"):M===x.U.INHERITED_INTERNAL?(0,w.t)("proto.variant_actions.change_to"):ey(ec,G))),n.createElement("span",{className:$.D3},n.createElement(o.h,{as:"button",onClick:e=>{e.stopPropagation();let r=eb(t.interactions);L.y2.user("delete-prototype-interactions",()=>N.iTB.deleteInteractions(r)),A.Gr.deselectProperty(),A.Gr.commit()},onMouseDown:e=>{e.stopPropagation()},"aria-label":(0,w.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:E.ar(F,"removeButton")},n.createElement(I.r,{svg:q,fallbackSvg:X},n.createElement(l.Z,null))))))}function eo(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function el(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function es(e){return e.pickerShown}function ec(e){return e.mirror.appModel.currentSelectedProperty}function ed(e){return e.mirror.sceneGraph}function eu(e){return e.mirror.sceneGraphSelection}function ep(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function em(e){return e.mirror.appModel.selectedInteractions}function eh(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function e_(){let e=(0,a.v9)(eu),t=(0,a.v9)(ed);for(let r of Object.keys(e)){let e=t.get(r);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let eg=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"],ef=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_IN","MOUSE_OUT","MOUSE_DOWN","MOUSE_UP"];function eE(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}function ey(e,t){if(!e)return et.format("NONE");let r=eE(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return et.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,P.nK)(e.connectionURL))return(0,w.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return et.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return er.format(e)}if(e.transitionNodeID){if((0,P.nK)(e.transitionNodeID))return(0,w.t)("fullscreen.mixed");let r=u.BB(e.transitionNodeID);return t(r)}return et.format("NONE")}function ev(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>g.B({nodeID:e.sourceNodeID,interactionID:e.id}))}function eb(e){let t=[];for(let r of e){let{sourceNodeID:e,id:n}=r;e&&n&&t.push(g.B({nodeID:e,interactionID:n}))}return t}function eI(e){A.Gr.triggerAction("show-prototype-interaction-edit-modal",{args:{source:N.T_d.PROPERTIES_PANEL,x:e.x,y:e.y}})}},529978:(e,t,r)=>{r.d(t,{$:()=>s,r:()=>l});var n=r(961215),i=r(640634),a=r(716594);function o(e,t,r){var l,s;let c=(0,a.QC)(t,r),d=function(e){switch(e){case n.QC$.BOOLEAN:return"BOOLEAN";case n.QC$.FLOAT:return"FLOAT";case n.QC$.STRING:return"STRING";case n.QC$.COLOR:return"COLOR";case n.QC$.MAP:return"MAP";case n.QC$.SYMBOL_ID:return"SYMBOL_ID";default:throw Error(`Unexpected resolved type: ${e}`)}}(t);if(e===n.M6J.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:c.value}};if(e===n.M6J.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:c.value}};if(e===n.M6J.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:c.value}};if(e===n.M6J.ALIAS){var u=null;if("string"==typeof r){let e=i.mL(r);e&&(u={guid:{sessionID:null==(l=null==e?void 0:e.guid)?void 0:l.sessionID,localID:null==(s=null==e?void 0:e.guid)?void 0:s.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:u||c.value}}}if(e===n.M6J.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:c.value}};if(e===n.M6J.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(t){for(var r=t.expressionArguments,i=[],a=0;a<r.length;a++){var l=r[a],s=o(l.type,l.resolvedType,l.value);l.type===n.M6J.EXPRESSION&&(s.value={expressionValue:e(l.value)}),i.push(s)}return{expressionArguments:i,expressionFunction:n.XVA[t.expressionFunction]}}(r)}};if(e===n.M6J.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:c.value}};else if(e===n.M6J.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:c.value}}}function l(e){for(var t of e)t&&t.actions&&(t.actions=s(t.actions));let r=[].concat.apply([],e);return r}function s(e){var t,r,n=[];for(var a of e){if("SET_VARIABLE"===a.connectionType){if(a.targetVariable){let e=i.mL(a.targetVariable.id);a.targetVariable.id={guid:{sessionID:null==(t=null==e?void 0:e.guid)?void 0:t.sessionID,localID:null==(r=null==e?void 0:e.guid)?void 0:r.localID}}}a.targetVariableData&&(a.targetVariableData=o(a.targetVariableData.type,a.targetVariableData.resolvedType,a.targetVariableData.value))}else if("CONDITIONAL"===a.connectionType&&a.conditionalActions){var l=[];for(var c of a.conditionalActions){var d=[],u=null;c&&(c.condition&&(u=o(c.condition.type,c.condition.resolvedType,c.condition.value)),c.actions&&(d=s(c.actions))),l.push({condition:u,actions:d})}a.conditionalActions=l}n.push(a)}return n}},611099:(e,t,r)=>{r.d(t,{$P:()=>c,VH:()=>o,el:()=>s});var n=r(847945),i=r(840568);function a(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&JSON.stringify(e)===JSON.stringify(t)}class o{constructor(e){this.path=e}equals(e){return JSON.stringify(this.path)===JSON.stringify(e)}isConditional(){return 3===this.path.length}}function l(e,t){var r;if(0===t.path.length)return;let n=t.path[0];if(e.length>n){let i=e[n];if(3===t.path.length&&"CONDITIONAL"===i.connectionType&&i.conditionalActions){let e=t.path[1],n=t.path[2];if(i.conditionalActions.length>e){let t=i.conditionalActions[e];if(t.actions&&(null==(r=t.actions)?void 0:r.length)>n){let e=t.actions[n];return e}}}return i}}function s(e){return void 0!==e.ifStatement&&void 0!==e.action}function c(e,t,r,c,d){if(0===e.length||!c||!d)return{newActions:void 0,newExpandedRows:void 0};let u=s(c);if(u&&(0,i.nK)(c.action))return{newActions:void 0,newExpandedRows:void 0};let p=a(c,l(e,t));if(p)return{newActions:void 0,newExpandedRows:void 0};let m=l(e,t);if(!m)return{newActions:void 0,newExpandedRows:void 0};if(!u&&d===n.Pw.INSIDE&&"CONDITIONAL"===c.connectionType)return function(e,t,r,n){if(!t||!n||"CONDITIONAL"!==n.connectionType||"CONDITIONAL"===t.connectionType)return{newActions:void 0,newExpandedRows:void 0};var i=[],l=[],s=0,c=0;for(let u of e){if(a(n,u)&&"CONDITIONAL"===u.connectionType){if(u.conditionalActions){for(let e of u.conditionalActions)if(e.actions&&void 0!==e.actions.find(e=>e===t))return{newActions:void 0,newExpandedRows:void 0}}if(!u.conditionalActions){var d={actions:[]};u.conditionalActions=[d]}u.conditionalActions[0].actions?u.conditionalActions[0].actions.push(t):u.conditionalActions[0].actions=[t],l.push(new o([c])),c++}!a(t,u)&&(i.push(u),r.find(e=>e.equals([s]))&&l.push(new o([c])),c++),s++}return{newActions:i,newExpandedRows:l}}(e,m,r,c);for(var h,_,g=[],f=[],E=[],y=0,v=0,b=!1,I=0;I<e.length;I++){let i=e[I];var T=a(c,i)&&!b;u&&c.action&&(T=a(c.action,i)&&!b);let l=t.equals([I]);if(!l&&"CONDITIONAL"===i.connectionType){if(i.conditionalActions){for(var w=[],S=0;S<(null==(h=i.conditionalActions)?void 0:h.length);S++){var C={};let e=i.conditionalActions[S];if(e.actions&&e.actions.length>0){for(var O=[],A=0,N=0;N<(null==(_=e.actions)?void 0:_.length);N++){let r=e.actions[N];if(a(c,r)){if("CONDITIONAL"===m.connectionType)return{newActions:void 0,newExpandedRows:void 0};d===n.Pw.AFTER?(O.push(r),A++,O.push(m),f.push(new o([I,S,A+1]))):d===n.Pw.BEFORE&&(O.push(m),f.push(new o([I,S,A])),O.push(r),A++),b=!0}else{let e=t.equals([I,S,N]);!e&&(O.push(r),A++)}}C.actions=O,C.condition=e.condition}else if(u&&(c.ifStatement&&0===S||!c.ifStatement&&1===S)){if("CONDITIONAL"===m.connectionType)return{newActions:void 0,newExpandedRows:void 0};C.actions=[m],C.condition=c.ifStatement?e.condition:void 0,b=!0}else C=e;w.push(C)}if(u&&!c.ifStatement&&T&&w.length<=1){var L={actions:c.ifStatement?[]:[m]};w.push(L),b=!0}i.conditionalActions=w}else if(u){var P={actions:c.ifStatement?[m]:[]},L={actions:c.ifStatement?[]:[m]};i.conditionalActions=[P,L],b=!0}}T&&!b?(d===n.Pw.AFTER?(r.find(e=>e.equals([I]))&&E.push(new o([v])),g.push(i),v++,g.push(m),f.push(new o([y+1])),v++):d===n.Pw.BEFORE&&(g.push(m),f.push(new o([y])),v++,r.find(e=>e.equals([I]))&&E.push(new o([v])),g.push(i),v++),b=!0):!l&&(y++,r.find(e=>e.equals([I]))&&E.push(new o([v])),g.push(i),v++)}return{newActions:g,newExpandedRows:E}}},831679:(e,t,r)=>{r.d(t,{Es:()=>k,PP:()=>N,Ur:()=>L,Vf:()=>R,WZ:()=>P,YE:()=>w,cJ:()=>A,gM:()=>b,jr:()=>F,np:()=>O,pH:()=>C,pN:()=>B,v6:()=>G,we:()=>U});var n=r(652983),i=r(407908),a=r(600486),o=r(598271),l=r(365653),s=r(716250),c=r(337167),d=r(721127),u=r(706039),p=r(961215),m=r(840568),h=r(167492),_=r(200273),g=r(761767),f=r(614860),E=r(787618),y=r(644156),v=r(353451);function b(e,t,r,n,i,a,o,l,s,c){return{behavior:function(e){if(e){if(!(0,m.Wn)(e))return m.t1;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,m.Wn)(e)){for(let t of T)if(e.indexOf(t)>=0)return t}return null}(e),easing:function(e){if(e){if(!(0,m.Wn)(e))return m.t1;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(t),isSpringTransition:w(t),easingFunction:r?(0,m.Wn)(r)?r:m.t1:I,duration:n?(0,m.Wn)(n)?n:m.t1:.3,shouldSmartAnimate:S(i,!1),preserveScroll:S(a,!1),resetVideoPosition:S(o,!1),openUrlInNewTab:S(l,!1),resetScrollPosition:S(s,!1),resetInteractiveComponents:S(c,!1)}}let I=[0,0,.58,1],T=["LEFT","RIGHT","TOP","BOTTOM"];function w(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function S(e,t){return e?(0,m.Wn)(e)?e:m.t1:t}function C(e){return e.length?e.reduce((e,t)=>e&&e!==t.stateManagementVersion||!e&&1===t.stateManagementVersion?m.t1:void 0===e?0:e,e[0].stateManagementVersion):void 0}function O(e){return A(e)||e===m.t1}function A(e){return void 0===e||0===e}function N(e){return 1===e}function L(e,t,r){if(e===m.t1)return!0;let n=(0,m.qD)(t),i=(0,m.qD)(r);return!("CLOSE"===n||"URL"===n||"INTERNAL_NODE"===n&&"SCROLL_TO"===i||"SET_VARIABLE"===n||"CONDITIONAL"===n||"NONE"===n||"UPDATE_MEDIA_RUNTIME"===n)}function P(e){if("BACK"===e.connectionType)return!0;let t=(0,m.qD)(e.transitionNodeID);if(null==t||t===o.AX)return!0;let r=o.BB(t);return!!p.SS5.subtreeContainsVideoPaint(r)}function R(e){if("BACK"===e.connectionType)return!0;let t=(0,m.qD)(e.transitionNodeID);if(null==t||t===o.AX)return!0;let r=o.BB(t);return!!p.uHp.subtreeContainsInteractiveComponent(r)}function k(){let{selectionProperties:e}=(0,l.c)(e=>({selectionProperties:e.mirror.selectionProperties})),t=(0,v.$)(),r=[],n=[];if(t){let{viableIds:e,disabledIds:i}=p.fs0.getVideoNodesOnSameTlfAsNode(t);r=e,n=i}let i=(null==e?void 0:e.numSelected)===1&&(r.length>0||n.length>0),a=(0,h.qe)(e);return a||i}let D="SEPARATOR",M=D+"_MEDIA",F=e=>e.startsWith(D),x=["NAVIGATE_TO","SWAP_STATE_TO","GO_BACK",D,"SET_VARIABLE","CONDITIONAL","SCROLL_TO","OPEN_URL",D,"OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY",M,"UPDATE_MEDIA_PLAY","UPDATE_MEDIA_PAUSE","UPDATE_MEDIA_TOGGLE_PLAY_PAUSE","UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function U(e,t){let r=x.filter(r=>!!("SWAP_STATE_TO"!==r||p.iTB.isSelectionContainedInStateOrStateInstance())&&(r!==M||!!e)&&"UPDATE_MEDIA_PLAY"!==r&&"UPDATE_MEDIA_PAUSE"!==r&&"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE"!==r&&"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"!==r&&"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"!==r&&"UPDATE_MEDIA_SKIP_TO"!==r&&"UPDATE_MEDIA_SKIP_BY_OPTIONS"!==r&&("CONDITIONAL"!==r||!t));return r}function B(e){let t={connectionType:"NONE"};switch(e){case"NAVIGATE_TO":t.connectionType="INTERNAL_NODE",t.navigationType="NAVIGATE";break;case"OPEN_OVERLAY":t.connectionType="INTERNAL_NODE",t.navigationType="OVERLAY";break;case"SCROLL_TO":t.connectionType="INTERNAL_NODE",t.navigationType="SCROLL_TO";break;case"SWAP_WITH":t.connectionType="INTERNAL_NODE",t.navigationType="SWAP";break;case"SWAP_STATE_TO":t.connectionType="INTERNAL_NODE",t.navigationType="SWAP_STATE";break;case"GO_BACK":t.connectionType="BACK";break;case"CLOSE_OVERLAY":t.connectionType="CLOSE";break;case"OPEN_URL":t.connectionType="URL";break;case"SET_VARIABLE":t.connectionType="SET_VARIABLE";break;case"SET_VARIABLE_MODE":t.connectionType="SET_VARIABLE_MODE";break;case"UPDATE_MEDIA_PLAY":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="PLAY";break;case"UPDATE_MEDIA_PAUSE":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="PAUSE";break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="TOGGLE_PLAY_PAUSE";break;case"UPDATE_MEDIA_MUTE":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="MUTE";break;case"UPDATE_MEDIA_UNMUTE":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="UNMUTE";break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="TOGGLE_MUTE_UNMUTE";break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="SKIP_FORWARD";break;case"UPDATE_MEDIA_SKIP_BACKWARD":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="SKIP_BACKWARD";break;case"UPDATE_MEDIA_SKIP_TO":t.connectionType="UPDATE_MEDIA_RUNTIME",t.mediaAction="SKIP_TO";break;case"CONDITIONAL":t.connectionType="CONDITIONAL"}return t}function V(e,t){let r=(0,i.I0)();return(0,n.useCallback)(()=>{r(d.K4({type:E.yd,data:{team:t,resource:e,editorType:g.gg.DESIGN,currentPlan:u.V.Plan.STARTER,upsellPlan:u.V.Plan.PRO}})),(0,a.L9)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[r,e,t])}function G(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:t,showMoveToProTeam:r}=(0,y.us)(),n=(0,s.BZ)().prototype_multi_path_paywall&&!e,a=(0,i.v9)(e=>e.openFile),o=(0,i.v9)(e=>a&&a.teamId?e.teams[a.teamId]:null),l=(0,c.Dv)(_.xe),d=V(f.gx.PROTOTYPING_MULTIPLE_ACTIONS,o),u=V(f.gx.PROTOTYPING_CONDITIONAL_ACTIONS,o),p=V(f.gx.PROTOTYPING_VARIABLES,o),m=V(f.gx.VIDEOS_IN_PROTOTYPES,o);return{shouldShowAdvancedPrototypingPaywall:n,showAdvancedPrototypinglMultipleActionsModal:t?r:d,showAdvancedPrototypingConditionalActionsModal:t?r:u,showAdvancedPrototypingVariablesModal:t?r:p,showVideosModal:t&&!l?r:m}}},598167:(e,t,r)=>{r.d(t,{$c:()=>c,MA:()=>a,Re:()=>s,SJ:()=>l,aA:()=>d,gM:()=>o});var n=r(746213),i=r(465268);function a(e){let t=[],r=i.x.isApple();return r&&e.metaKey&&t.push("\u2318"),!r&&e.metaKey&&t.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&t.push(r?"\u2303":"Ctrl"),e.shiftKey&&t.push(r?"\u21E7":"Shift"),e.altKey&&t.push(r?"\u2325":"Alt"),t.push(d[e.keyCode]||String.fromCharCode(e.keyCode)),t.join(r?"":"+")}function o(e){if(!e)return null;let t={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let r of e)switch(r){case 16:t.shiftKey=!0;break;case 17:t.ctrlKey=!0;break;case 18:t.altKey=!0;break;case 91:case 92:case 93:case 224:t.metaKey=!0;break;default:t.keyCode=r}return t.keyCode?t:null}function l(e){return[e.keyCode,e.shiftKey?16:0,e.ctrlKey?17:0,e.altKey?18:0,e.metaKey?91:0].filter(Boolean)}function s(e,t=!1){var r;if(!e||(null==e?void 0:e.triggerDevice)==="KEYBOARD")return null;let i=h.get(null==e?void 0:e.triggerDevice),a=(null==(r=null==e?void 0:e.keyCodes)?void 0:r[0])??0,o=(null==i?void 0:i.get(a))??function(e){if(e>=n.J){let t=Math.floor((e-n.J)/2);return`Axis ${t} ${e%2==0?"-":"+"}`}return`Button ${e}`}(a);return o.length<=1&&!t&&(o+=" (Gamepad)"),o}let c=new Set([16,17,18,91,92,93,224]),d={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},u=new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]]),p=new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]]),m=new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]]),h=new Map([["SWITCH_PRO",u],["PS4",p],["XBOX_ONE",m]])},286886:(e,t,r)=>{r.d(t,{Dz:()=>g,ZP:()=>E,_8:()=>f,s2:()=>_});var n=r(407908),i=r(600486),a=r(5453),o=r(391320),l=r(598271),s=r(31262),c=r(158774),d=r(840568),u=r(900710),p=r(367938);function m(e){var t,r,n,i,a,o;if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+((null==(t=e.interactionMaintained)?void 0:t.toString())??"0");case"ON_KEY_DOWN":return e.interactionType+((null==(r=e.keyTrigger)?void 0:r.triggerDevice)??"")+((null==(i=null==(n=e.keyTrigger)?void 0:n.keyCodes)?void 0:i.sort().toString())??"");case"AFTER_TIMEOUT":return e.interactionType+((null==(a=e.transitionTimeout)?void 0:a.toString())??"0");case"ON_MEDIA_HIT":return e.interactionType+((null==(o=e.mediaHitTime)?void 0:o.toString())??"0");default:return e.interactionType}}function h(e,t){let r=Object.keys(e).length>1,n=r?function(e){let t=[],r=new Map;for(let t of e){let e=m(t.event);r.has(e)||r.set(e,[]);let n=r.get(e);n&&n.push(t)}for(let[e,n]of r)n&&n.length>0&&n[0].event&&t.push({key:e,event:n[0].event,interactions:n});return t}(t):function(e){let t=[];if(e.length>0&&e[0].event)for(let r of e)r.event&&t.push({key:m(r.event),event:r.event,interactions:[r]});return t}(t);return n}function _(){let e=(0,n.v9)(S),t=(0,n.v9)(u.LI);return h(t,e)}function g(){let e=(0,n.v9)(C),t=(0,n.v9)(u.LI);return h(t,e)}function f(){let e=(0,n.v9)(S),t=(0,n.v9)(O),r=new Set(t),i=e.some(e=>{let t=e.id&&e.sourceNodeID?s.B({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return t&&r.has(t)});return i?p.U.NORMAL:p.U.INHERITED_INTERNAL}function E(e){let t=(0,n.v9)(S),r=(0,n.v9)(C),a=e===p.U.INHERITED_INTERNAL?r:t,o=(0,n.v9)(O),u=new Set(o),m=new Set,h=[];a.forEach((e,t)=>{let r=e.id&&e.sourceNodeID?s.B({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;r&&u.has(r)&&(m.add(t),h.push(e))});let _=h.map(e=>{var t;return null==(t=e.actions)?void 0:t.length}).some(e=>{var t;return e!==(null==(t=h[0].actions)?void 0:t.length)}),f=(0===h.length?[]:h[0].actions||[]).map(e=>({...e}));if(!_)for(var E=0;E<h.length;E++){let e=h[E].actions||[];for(var b=0;b<e.length;b++){let t=f[b],r=e[b];for(let e in r)t[e]?v(r,t,e)||(t[e]=d.t1):t[e]=r[e]}}let A=n=>(function o(l){let s=function(o,s,u){let h=!1,_=[],g=[];for(let e in o)(0,d.nK)(k[e])?(h=!0,_.push(e)):g.push(e);let{changes:f,eventChanges:E,actionChanges:y,interactionChanges:v}=function(e){let t={},r={},n={},i={};for(let a in e)T.has(a)?n[a]=e[a]:I.has(a)?r[a]=e[a]:w.has(a)?i[a]=e[a]:t[a]=e[a];return{changes:t,eventChanges:r,actionChanges:n,interactionChanges:i}}(o),b=[];a.forEach((e,t)=>{if(m.has(t)){let t={...e.event,...E},r=[],i=e.actions||[];for(let e=0;e<i.length;e++)if(e===n){let t=l.length>1;if(t){let{newPrototypeAction:t}=function(e,t,r){if(t.length>2&&e.conditionalActions){let a=e.conditionalActions,o=e.conditionalActions,l=t[1],s=o[l];var n={condition:s.condition,actions:[]},i=[];let c=s.actions?s.actions:[];for(let e=0;e<c.length;e++)e===t[2]?i.push({...c[e],...r}):i.push({...c[e]});n.actions=i,a[l]=n,e.conditionalActions=a}return{newPrototypeAction:e}}(i[e],l,y);r[e]=t}else r.push({...i[e],...y})}else r.push({...i[e]});n>=r.length&&r.push({...y}),b.push({...e,...v,event:t,actions:r})}else b.push(e)}),(0,i.L9)("prototype_update_selection_properties",{mixedUpdate:h,mixedUpdatedProperties:_,nonMixedUpdatedProperties:g,num_connector:m.size,category:e}),e===p.U.NORMAL?b=[...b,...r]:e===p.U.INHERITED_INTERNAL&&(b=[...t,...b]),f.prototypeInteractions=b,c.Gr.updateSelectionProperties(f,{shouldCommit:s,overwrite:u})};return s.appendActionIndex=function(e){return o([...l,e])},s})([n]),N=e=>e&&null!=e.actions?e.actions[0]:null,L=e=>{let t=N(e);if(null==t)return l.BB(e.sourceNodeID);let r=l.BB(t.transitionNodeID);return r===l.A0||null===r?l.BB(e.sourceNodeID):r},P=(e,t)=>{var r;if(!e.actions||(null==(r=e.actions)?void 0:r.length)===0||0===t.length)return null;let n=t.length>2;if(!n)return e.actions[t[0]];{let r=e.actions.length>t[0]?e.actions[t[0]]:null;if(r&&r.conditionalActions){let e=r.conditionalActions.length>t[1]?r.conditionalActions[t[1]]:null;if(e&&e.actions){let r=e.actions.length>t[2]?e.actions[t[2]]:null;return r}}}},R=(e,t)=>{if(null==t||void 0===t)return l.BB(e.sourceNodeID);let r=l.BB(t.transitionNodeID);return r===l.A0||null===r?l.BB(e.sourceNodeID):r},k=function(e){let t={},r={};for(let n of e){if(!n||!n.event)continue;for(let e in n.event)t[e]?y(n.event,t,e)||(t[e]=d.t1):t[e]=n.event[e];let e=n.actions&&{...n.actions[0]};if(e)for(let t in e)r[t]?v(e,r,t)||(r[t]=d.t1):r[t]=e[t]}return{...t,...r}}(h),D=function(e){let t={},r=[{}];for(let i of e){if(!i||!i.event)continue;for(let e in i.event)t[e]?y(i.event,t,e)||(t[e]=d.t1):t[e]=i.event[e];if(!i.actions)continue;let e=i.actions;var n=0;for(let t of e){for(let e in t){n>r.length-1&&r.push({});let i=r[n];i[e]?v(t,i,e)||(i[e]=d.t1):i[e]=t[e]}n++}}return{interactionEvent:t,interactionActions:r}}(h),M=new Set(o.map(e=>{let t=s.m(e);return t?l.BB(t.nodeID):""}).filter(e=>""!==e)),F=a.filter(e=>e.sourceNodeID&&M.has(l.BB(e.sourceNodeID)));var x=[...F];let U=g();if(U.length>0)for(var E=0;E<U.length;E++){let e=U[E];for(var B=0;B<e.interactions.length;B++){let t=e.interactions[B];x.find(e=>e.id===t.id)||x.push(t)}}return{makeUpdateSelectionPropertiesForActionIndex:A,updateSelectionProperties:A(0),makeUpdateMultipleDestinationNodesForActionIndex:n=>(function n(i){let o=function(n,o,s){let d={},u=[];a.forEach(e=>{let t=P(e,i),r=R(e,t);if(t&&r&&-1!==Object.keys(n).indexOf(r)&&l.mL(n[r])){let c=l.mL(n[r]);if(c){if(!e.actions)return;var a=[];let r=i[0];if(t){if(i.length>2){let t=e.actions[r],n=i[1];if(t.conditionalActions){let r=t.conditionalActions[n],l=i[2],d=t.conditionalActions,u=t.conditionalActions,p=u[n];var o={condition:p.condition,actions:[]};if(r.actions){let u=r.actions[l],p={...u,transitionNodeID:c};var s=[...r.actions];s.splice(l,1,p),o.actions=s,d[n]=o,t.conditionalActions=d,(a=[...e.actions]).splice(i[0],1,t)}}}else{let t={...e.actions[i[0]],transitionNodeID:c};(a=[...e.actions]).splice(i[0],1,t)}u.push({...e,actions:a})}}}else u.push(e)}),e===p.U.NORMAL?u=[...u,...r]:e===p.U.INHERITED_INTERNAL&&(u=[...t,...u]),d.prototypeInteractions=u,c.Gr.updateSelectionProperties(d,{shouldCommit:o,overwrite:s})};return o.appendActionIndex=function(e){return n([...i,e])},o.updateMultipleDestinationNodes=function(e,t,r){return o},o})([n]),updateMultipleDestinationNodes:(n,i,o)=>{let s={},d=[];a.forEach(e=>{let t=L(e);if(t&&-1!==Object.keys(n).indexOf(t)&&l.mL(n[t])){let r=l.mL(n[t]);if(r){if(!e.actions)return;let t=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==t){let n={...e.actions[t],transitionNodeID:r},i=[...e.actions];i.splice(t,1,n),d.push({...e,actions:i})}}}else d.push(e)}),e===p.U.NORMAL?d=[...d,...r]:e===p.U.INHERITED_INTERNAL&&(d=[...t,...d]),s.prototypeInteractions=d,c.Gr.updateSelectionProperties(s,{shouldCommit:i,overwrite:o})},detailPropsMultipleActions:D,detailProps:k,interactionsOnSelectedNode:F,interactionsOnSelectedNodesAndComponents:x,selectedInteractions:h,mergedActions:f,differentLengthActions:_}}function y(e,t,r){if("keyTrigger"===r){let n=e[r],i=(0,d.NA)(t[r],void 0);return(0,a.Vg)((null==n?void 0:n.keyCodes)||[],(null==i?void 0:i.keyCodes)||[])&&(null==n?void 0:n.triggerDevice)===(null==i?void 0:i.triggerDevice)}return e[r]===t[r]}function v(e,t,r){switch(r){case"transitionNodeID":let n=e[r],i=(0,d.NA)(t[r],void 0);return l.fS(n,i);case"targetVariable":let a=e[r],s=(0,d.NA)(t[r],p.J);return(null==a?void 0:a.id)===(null==s?void 0:s.id);case"overlayRelativePosition":let c=e[r],u=(0,d.NA)(t[r],void 0);return(null==c?void 0:c.x)===(null==u?void 0:u.x)&&(null==c?void 0:c.y)===(null==u?void 0:u.y);case"easingType":let m=e[r],h=(0,d.NA)(t[r],void 0);if("CUSTOM_CUBIC"!==m||"CUSTOM_CUBIC"!==h)return m===h;let _=(0,d.NA)(e.easingFunction,void 0),g=(0,d.NA)(t.easingFunction,void 0);return b(_,g);case"easingFunction":let f=e[r],E=(0,d.NA)(t[r],void 0);return b(f,E);case"extraScrollOffset":let y=e[r],v=(0,d.NA)(t[r],void 0);return(null==y?void 0:y.x)===(null==v?void 0:v.x)&&(null==y?void 0:y.y)===(null==v?void 0:v.y);case"targetVariableData":case"conditionalActions":return(0,o.qt)(e[r],t[r]);default:return e[r]===t[r]}}function b(e,t){if(e===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}let I=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),T=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableModeID","targetVariableSetKey"]),w=new Set(["stateManagementVersion"]);function S(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function C(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function O(e){return e.mirror.appModel.selectedInteractions}},390:(e,t,r)=>{r.d(t,{ZG:()=>H,fA:()=>z});var n=r(652983),i=r(46347),a=r(598271),o=r(204829),l=r(518484),s=r(618723),c=r(970740),d=r(280251),u=r(496417),p=r(124040),m=r(11802),h=r(131826),_=r(158774),g=r(961215),f=r(784667),E=r(640723),y=r(840568),v=r(794609),b=r(532444),I=r(838224),T=r(157607),w=r(348165),S=r(641696),C=r(553760),O=r(21653),A=r(246020),N=r(856149),L=r(409195),P=r(517755),R=r(303801),k=r(929714),D=r(835143);let M=r(117119),F=r(149994),x=r(985485),U=r(836258),B=r(366084),V=r(685016),G=r(281615);function H(e){let{videoMediaLoop:t,videoAutoplay:r,videoMuted:n,numVideosSelected:a}=e;return(0,i.Eb)(t),(0,i.Eb)(r),(0,i.Eb)(n),(0,i.Eb)(a),{autoplay:r,muted:n,mediaLoop:t,numVideosSelected:a}}function W(e){let{bigNudgeAmount:t,smallNudgeAmount:r}=(0,f.pb)();return n.createElement(K,{...e,bigNudgeAmount:t,smallNudgeAmount:r})}class K extends n.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,v.ie)({name:"Show Prototype Settings Clicked"})),E.MO()}}renderCreateConnectionHint(){return n.createElement(S.$,{idForTests:"create-connection-hint",title:(0,c.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon:F,iconFallback:x,hintText:(0,c.t)("proto.onboarding.select_a_frame_or_object_hint")})}renderDeleteConnectionHint(){return n.createElement(S.$,{idForTests:"delete-connection-hint",title:(0,c.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon:U,iconFallback:B,hintText:(0,c.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}renderPlayButtonHint(){return n.createElement(S.$,{idForTests:"play-button-hint",title:(0,c.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon:M,hintText:(0,c.t)("proto.onboarding.use_the_play_button_hint")})}renderOnboardingPanel(){let e;let t=!!this.props.userFlags.dismissed_create_connection_hint,r=!!this.props.userFlags.dismissed_delete_connection_hint,i=!!this.props.userFlags.dismissed_play_button_hint,a=this.props.selectionProperties.numTransitionsOnCurrentPage,o=0===a&&!t,l=0!==a&&!r,s=!i;if(o)e=p.y.CREATING_A_CONNECTION;else if(l)e=p.y.REMOVING_A_CONNECTION;else{if(!s)return null;e=p.y.RUNNING_YOUR_PROTOTYPE}return(0,m.Ab)()?null:n.createElement(h.Ui,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:e}},n.createElement(R.s_,null,n.createElement("div",null,o&&this.renderCreateConnectionHint(),l&&this.renderDeleteConnectionHint(),s&&this.renderPlayButtonHint())))}renderOnboardingPanelForExpPrototypingInOnboardingV1(){let e,t,r,i,a,o;if(this.props.userFlags.dismissed_prototyping_in_onboarding_hint)return null;let l=!!this.props.userFlags.has_created_prototyping_noodle,d=!!this.props.userFlags.has_entered_presentation_mode,u=!!this.props.userFlags.has_removed_prototyping_noodle,_=g.fs0.currentPagePrototypeStatus()===g.Uqv.VALID,f=this.props.selectionProperties.numTransitionsOnCurrentPage;if(l){if(!d&&_)e=(0,c.t)("prototyping_in_onboarding.check_out_your_prototype"),r=(0,c.t)("prototyping_in_onboarding.click_play_and_then_go_through_all_your_hotspots_one_frame_at_a_time"),t=M,i=p.y.CHECK_OUT_YOUR_PROTOTYPE;else{if(u||!d||!f||!(f>0))return null;e=(0,c.t)("prototyping_in_onboarding.remove_connections"),r=(0,c.t)("prototyping_in_onboarding.to_remove_a_connection_click_and_drag_on_either_end"),t=U,i=p.y.REMOVE_CONNECTIONS}}else e=(0,c.t)("prototyping_in_onboarding.create_an_interactive_flow"),r=(0,c.t)("prototyping_in_onboarding.click_and_hold_to_create_a_hotspot_that_s_to_interact_with_your_prototype"),t=V,i=p.y.CLICK_HOLD_AND_DRAG,a=G,o=(0,c.t)("prototyping_in_onboarding.then_drag_the_arrow_to_the_frame_your_hotspot_will_lead_to");return(0,m.Ab)()?n.createElement(h.Ui,{name:"Prototyping Onboarding Hint Panel V2",properties:{trackingDescriptor:i}},n.createElement(R.s_,null,n.createElement(s.Ki,{multiple:1}),n.createElement(S.$,{title:e,icon:t,hintText:r,userFlag:"dismissed_prototyping_in_onboarding_hint",useProminentVersion:!0,secondaryIcon:a,secondaryHintText:o}))):null}renderPrototypeSettingsPanel(){return n.createElement(R.s_,null,n.createElement(I.V,{onClick:this.onClickShowPrototypeSettings,recordingKey:o.ar(this.props,"prototypeSettingsButton")},n.createElement(c.Tx,{id:"proto.menu.show_prototype_settings"})))}renderDevicePanel(){(0,i.q8)((0,y.Wn)(this.props.selectionProperties.prototypeDevice),"should not have mixed device selection");let e=(0,v.m1)(this.props.selectionProperties.prototypeDevice);return n.createElement(O.m,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel"})}render(){var e,t,r,i;let s=!(0,y.Wn)(this.props.selectionProperties.transitionNodeID)||a.JY((0,y.qD)(this.props.selectionProperties.transitionNodeID)),p=(null==(e=this.props.selectionProperties)?void 0:e.numSelected)??!1,m=!!this.props.selectionProperties.numVideosSelected,h=this.props.selectionProperties.isInstanceSelected||this.props.selectionProperties.isInstanceSublayerSelected,g=(0,v.vO)()||this.props.selectionProperties.prototypeStartingPointsInfo&&this.props.selectionProperties.prototypeStartingPointsInfo.length>0,f=!s&&!(0,v.vO)(),E=this.props.selectionProperties.isValidPrototypingSourceSelected??!0;if(!p)return n.createElement("div",{className:(0,v.vO)()?D.rX:void 0},this.renderOnboardingPanelForExpPrototypingInOnboardingV1(),(0,v.vO)()&&g&&n.createElement(A.Z,null),this.renderDevicePanel(),n.createElement(C.T,{recordingKey:o.ar(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),!(0,v.vO)()&&g&&n.createElement(A.Z,null),f&&this.renderOnboardingPanel(),n.createElement(w.a1,{panelName:w.WD.PROTOTYPE}));{let e=n.createElement(k.Zd,{dropdownShown:this.props.dropdownShown,scrollDirection:this.props.selectionProperties.scrollDirection??"NONE",showScrollWarning:this.props.selectionProperties.showWontScrollWarning??!1,disableOverflowBehaviorItem:!!h,recordingKey:o.ar(this.props,"scrollBehaviorPanel"),updateSelectionProperties:_.Gr.updateSelectionProperties});return n.createElement("div",{className:(0,v.vO)()?D.rX:void 0},this.renderOnboardingPanelForExpPrototypingInOnboardingV1(),this.props.selectionProperties.isTopLevelFrameAndValidPrototypeSourceSelected&&n.createElement(L.Z,{recordingKey:o.ar(this.props,"startingPointPanel")}),!(0,v.vO)()&&E&&n.createElement(N.jh,null),(0,v.vO)()?(null==(t=this.props.pickerShown)?void 0:t.id)===u.Fh&&n.createElement(T.My,{title:(0,c.t)("proto.scroll_panel.scroll_behavior_title"),headerSize:"small",initialPosition:new l.OW(null==(r=this.props.pickerShown)?void 0:r.initialX,null==(i=this.props.pickerShown)?void 0:i.initialY),recordingKey:"scroll-behavior-modal-panel",onClose:()=>{this.props.dispatch(d.le())},dataTestId:"scroll-behavior-modal-panel"},n.createElement(R.lQ,null,e)):e,m&&!(0,v.vO)()&&n.createElement(P.Z,{updateSelectionProperties:_.Gr.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:H(this.props.selectionProperties)}),!(0,v.vO)()&&this.renderPrototypeSettingsPanel(),f&&this.renderOnboardingPanel(),n.createElement(w.a1,{panelName:w.WD.PROTOTYPE}))}}}K.displayName="PrototypePanel";let z=(0,v.vO)()?W:(0,h.x1)(W,b.V4.PROTOTYPE_PANEL)},804107:(e,t,r)=>{let n;r.d(t,{WQ:()=>n,hV:()=>o,vw:()=>s});var i=r(598271),a=r(831679);let o=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return i.BB(e)??i.BB(i.AX)}recordInteractionUpgraded(e,t){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(t)}`)}hasInteractionBeenUpgraded(e,t){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(t)}`)}haveInteractionsBeenUpgraded(e){for(let t of e)if(!this.hasInteractionBeenUpgraded(t.id,t.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let t of e)if((0,a.PP)(t.stateManagementVersion)&&this.hasInteractionBeenUpgraded(t.id,t.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class l{recordInteractionUpgraded(e,t){o.recordInteractionUpgraded(i.mL(e),i.mL(t))}}let s=()=>{n=new l}},303801:(e,t,r)=>{r.d(t,{Hz:()=>p.Hz,I_:()=>p.I_,Jc:()=>T,X2:()=>f,__:()=>S,f5:()=>O,hU:()=>p.hU,lQ:()=>_,o0:()=>C,oi:()=>w,pY:()=>y,pt:()=>E,r3:()=>v,s_:()=>g,vg:()=>b});var n=r(652983),i=r(204829),a=r(564380),o=r(293351),l=r(435613),s=r(393357),c=r(225468),d=r(471828),u=r(701671),p=r(158314);let m=(e,t)=>({...e,className:`${t} ${e.className||""}`}),h=r(131282);function _(e){return n.createElement(a.yh,{...m(e,u.YM)})}class g extends i.Vx{render(){return n.createElement(a.yh,{...m(this.props,u.Bn)})}}g.displayName="Panel";class f extends i.Vx{render(){let e;let{selected:t,selectedSecondary:r,heightMultiplier:i,...o}=this.props,l=r?u.xo:t?u.Yp:null;return e=2===i?u.e1:1.5===i?u.QL:u.eA,l&&(e+=" "+l),n.createElement(a.yh,{...m(o,e)})}}function E(e){return n.createElement(a.yh,{...m(e,u.sm)})}function y(e){let{faded:t,extended:r,innerRef:i,isPanelBodyCollapsedAtom:o,...l}=e,s=u.FS;e.faded&&(s=u.VO),e.extended&&(s=u.GN),o&&(s=s+" "+u.ry);let c=m(l,s);return n.createElement(a.yh,{...c,forwardedRef:i},n.createElement(d.OL,{isPanelBodyCollapsedAtom:o||null}),e.children)}function v(e){let t=m(e,u.v6);return delete t.title,delete t.dataTooltipContentKey,delete t.dataTooltipTimeoutDelay,n.createElement(a.yh,{...e},n.createElement("div",{className:u.vN},e.title),n.createElement(l.n,{className:u.Xt,svg:h,"data-tooltip-type":c.fR.SPECIAL,"data-tooltip":e.dataTooltipContentKey,"data-tooltip-timeout-delay":e.dataTooltipTimeoutDelay}))}function b({...e}){return n.createElement("div",{...m(e,u.Qg),dir:"auto"})}function I(e){let t=u.Y2;return e.noLeftBorder&&(t+=` ${u.C}`),e.squareRightBorder&&(t+=` ${u.ux}`),e.noBorderOnFocus||(t+=` ${u.Cg}`),e.noPlaceholderLine&&(t+=` ${u.YD}`),t}f.displayName="Row";let T=n.forwardRef(function(e,t){let r=I(e),i=m(e,r);return delete i.noLeftBorder,delete i.squareRightBorder,delete i.noBorderOnFocus,delete i.noPlaceholderLine,n.createElement(a.i1,{autoComplete:"new-password",spellCheck:!1,forwardedRef:t,...i})});class w extends n.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,s.pI)(e,s.jQ.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=I(this.props),t=m(this.props,e);return delete t.noLeftBorder,delete t.squareRightBorder,delete t.noBorderOnFocus,delete t.noPlaceholderLine,t.onKeyDown=this.onKeyDown,n.createElement(o.Q,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...t,ref:t.innerRef})}}function S({disabled:e,...t}){return n.createElement("label",{...m(t,e?u.TH:u.PS),dir:"auto"})}function C(e){return n.createElement("label",{...m(e,u.TH)})}w.displayName="TextInput";let O=n.forwardRef((e,t)=>{let r=I(e)+" "+u.ct,{noLeftBorder:i,squareRightBorder:o,...l}=e;return n.createElement(a.yh,{...m(l,r),forwardedRef:t,tabIndex:0},l.children)})},872551:(e,t,r)=>{r.d(t,{Z:()=>h,p:()=>y});var n=r(652983),i=r(204829),a=r(435613),o=r(970740),l=r(840568),s=r(794609),c=r(225468),d=r(303801),u=r(482919),p=r(88853);let m=r(241652);class h extends n.PureComponent{constructor(){super(...arguments),this.onScrollDirectionChange=e=>{this.props.dispatch((0,s.ie)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,l.NA)(this.props.scrollDirection,"MIXED")}})),this.props.updateSelectionProperties({scrollDirection:e})}}render(){return n.createElement(d.s_,null,n.createElement(d.X2,null,n.createElement(d.pY,{className:p.FS},n.createElement(o.Tx,{id:"proto.overflow_panel.overflow_scrolling_title"}))),n.createElement(d.X2,null,this.props.showScrollWarning&&n.createElement(a.n,{className:p.DJ,svg:m,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":c.fR.SPECIAL,"data-tooltip":"HORIZONTAL"===this.props.scrollDirection?c._7.PROTOTYPE_SCROLL_HORIZONTAL_INFO:c._7.PROTOTYPE_SCROLL_VERTICAL_INFO}),n.createElement(y,{className:this.props.showScrollWarning?p.H6:p.nX,property:this.props.scrollDirection,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onChange:this.onScrollDirectionChange,disabled:this.props.disabled,recordingKey:i.ar(this.props,"scrollDirection")})))}}h.displayName="OverflowBehaviorPanel";class _ extends u.Wx{}class g extends u.Ph{}let f=["NONE","HORIZONTAL","VERTICAL","BOTH"],E=class extends n.PureComponent{render(){return n.createElement(g,{id:"scroll-direction-select",className:this.props.className,chevronClassName:p.PE,inputClassName:p.Mt,property:this.props.property||"NONE",formatter:E.directionFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey},f.map(e=>n.createElement(_,{key:e,value:e,recordingKey:i.ar(this.props,e)})))}},y=E;y.displayName="ScrollDirectionDropdown",y.directionFormatter={format:e=>{switch(e){case"NONE":return(0,o.t)("proto.overflow_panel.no_scrolling");case"HORIZONTAL":return(0,o.t)("proto.overflow_panel.horizontal_scrolling");case"VERTICAL":return(0,o.t)("proto.overflow_panel.vertical_scrolling");case"BOTH":return(0,o.t)("proto.overflow_panel.horizontal_and_vertical_scrolling")}return""}}},145622:(e,t,r)=>{r.d(t,{Q:()=>w,S:()=>C});var n=r(652983),i=r(19516),a=r(970740),o=r(702348),l=r(693693),s=r(37930),c=r(723259),d=r(598910),u=r(464368),p=r(312616),m=r(201248),h=r(736823),_=r(362568),g=r(157607),f=r(498266),E=r(389479);let y="seen_wrapping_min_max_onboarding",v="seen_text_truncation_onboarding",b="https://help.figma.com/hc/articles/360040451373-Explore-auto-layout-properties";function I(){return n.createElement("p",{className:E.Jt},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.wrapping_onboarding_body",wrap:n.createElement("strong",null,n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.wrap_icon"}))}))}function T(){return n.createElement(n.Fragment,null,n.createElement("p",{className:E.Jt},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.min_max_onboarding_body_1"})),n.createElement("p",{className:E.Jt},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.min_max_onboarding_body_2",width:n.createElement("strong",null,n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.width"})),height:n.createElement("strong",null,n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.height"}))})))}function w(){let e=(0,p.p)(y),t=(0,o.I)({id:c.G.WrappingMinMaxOnboarding,priority:m.b4.DEFAULT_MODAL}),{currentStep:r,next:i}=(0,s.Z)({numSteps:2,onComplete:t.complete});(0,l.J)(t.uniqueId,"action_stack_selection",()=>{e||t.show()}),(0,l.J)(t.uniqueId,"action_unstack_selection",()=>{t.isShowing&&t.complete()});let v=(0,d.A0)("stackMode");return(0,u.Y0)(()=>{(!v||"NONE"===v)&&t.isShowing&&t.complete()}),n.createElement(h.Y,{currentStep:r,isShowing:t.isShowing},n.createElement(_.a,{modalType:f.w8.ANNOUNCEMENT_POINTER,ctaText:n.createElement(a.Tx,{id:"general.next"}),onClickPrimaryCta:i,stepCounter:n.createElement("span",{className:E.qT},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.wrapping_onboarding_1of2"})),secondaryCtaText:n.createElement("a",{href:b,target:"_blank"},n.createElement(a.Tx,{id:"rcs.rcs_shared.learn_more"})),preventDismissOnClickSecondaryCta:!0,title:n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.wrapping_onboarding_title"}),onboardingKey:"stack-mode-control",userFlagOnShow:y,element:()=>n.createElement(I,null),isShowing:t.isShowing,onClose:t.complete,onManualDismiss:t.complete,trackingContextName:"alv5-wrapping-minmax-onboarding",arrowPosition:g.xI.LEFT_TITLE,width:300}),n.createElement(_.a,{modalType:f.w8.ANNOUNCEMENT_POINTER,ctaText:n.createElement(a.Tx,{id:"general.got_it"}),secondaryCtaText:n.createElement("a",{href:b,target:"_blank"},n.createElement(a.Tx,{id:"rcs.rcs_shared.learn_more"})),title:n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.min_max_onboarding_title"}),stepCounter:n.createElement("span",{className:E.qT},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.wrapping_onboarding_2of2"})),onboardingKey:"transform-width",userFlagOnShow:y,element:()=>n.createElement(T,null),isShowing:t.isShowing,onClickPrimaryCta:t.complete,onClose:t.complete,onManualDismiss:t.complete,trackingContextName:"alv5-wrapping-minmax-onboarding",arrowPosition:g.xI.LEFT_TITLE,width:300}))}function S(){return n.createElement("p",{className:E.Jt},n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.truncate_onboarding_body",maxLines:n.createElement("strong",null,n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.max_lines"})),truncateText:n.createElement("strong",null,n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.truncate_text"}))}))}function C(){let e=(0,d.A0)("textAutoResize"),t=(0,o.I)({id:c.G.TextTruncationOnboarding,priority:m.b4.DEFAULT_MODAL}),r=(0,p.p)(v);return(0,i.O)(()=>()=>{t.complete()}),(0,l.J)(t.uniqueId,"Type Details Panel Opened",()=>{!r&&e&&"NONE"!==e&&t.show()}),n.createElement(_.a,{modalType:f.w8.ANNOUNCEMENT_POINTER,ctaText:n.createElement(a.Tx,{id:"general.got_it"}),secondaryCtaText:n.createElement("a",{href:b,target:"_blank"},n.createElement(a.Tx,{id:"rcs.rcs_shared.learn_more"})),title:n.createElement(a.Tx,{id:"fullscreen.properties_panel.stack_panel.truncate_onboarding_title"}),onboardingKey:"truncate-text",userFlagOnShow:v,element:()=>n.createElement(S,null),isShowing:t.isShowing,onClickPrimaryCta:t.complete,onClose:t.complete,onManualDismiss:t.complete,trackingContextName:"alv5-text-truncate-onboarding",arrowPosition:g.xI.RIGHT_TITLE,width:272})}},521690:(e,t,r)=>{r.d(t,{GY:()=>m,Tv:()=>_,cb:()=>h,fL:()=>g});var n=r(652983),i=r(365653),a=r(618723),o=r(435613),l=r(970740),s=r(961215),c=r(640723),d=r(170926),u=r(162512),p=r(356668);let m=r(525441);function h({flushWithContainer:e}){let t=function(){let{allStates:e,selectedStates:t,stateGroupError:r,stateGroupSelectionMode:o}=(0,i.c)(e=>({allStates:(0,d.Un)(e)??[],selectedStates:(0,d.Kr)(e)??[],stateGroupError:(0,d.wQ)(e),stateGroupSelectionMode:(0,d.jh)(e)}));if(o===s.Xft.STATE_GROUP){let t=()=>{let t=(0,u.TH)(e,r).map(e=>e.symbol.node_id);c.MO(),c.cY(t)};switch(r){case s.zor.PARSE_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.some_layers_have_invalid_names"}),n.createElement("div",null,n.createElement("strong",null,n.createElement(l.Tx,{id:"design_systems.states_panel.prop_value_prop_value"}))),n.createElement(a.rU,{onClick:t,className:p.WK,trusted:!0},n.createElement(l.Tx,{id:"design_systems.states_panel.select_invalid_variants"})));case s.zor.DUPLICATE_STATE_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.some_variants_have_the_same_property_values_applied"}),n.createElement(a.rU,{onClick:t,className:p.WK,trusted:!0},n.createElement(l.Tx,{id:"design_systems.states_panel.select_conflicting_variants"})));case s.zor.MISSING_PROPERTIES_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.some_variants_are_missing_properties"}),n.createElement(a.rU,{onClick:t,className:p.WK,trusted:!0},n.createElement(l.Tx,{id:"design_systems.states_panel.select_invalid_variants"})));case s.zor.TOO_MANY_STATES_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.components_with_more_than_1000_variants_may_experience_performance_issues"}))}}else if(o===s.Xft.STATE||o===s.Xft.STATE_INSTANCE){let e=(0,u.r8)(t);switch(e){case s.zor.PARSE_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.layer_has_invalid_name",layers:t.length}),n.createElement("div",null,n.createElement("strong",null,n.createElement(l.Tx,{id:"design_systems.states_panel.prop_value_prop_value"}))));case s.zor.DUPLICATE_STATE_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.the_properties_and_values_of_variant_are_conflicting",variants:t.length}));case s.zor.MISSING_PROPERTIES_ERROR:return n.createElement("div",null,n.createElement(l.Tx,{id:"design_systems.states_panel.variants_are_missing_one_or_more_properties",variants:t.length}))}}return null}();return null===t?null:n.createElement(_,{flushWithContainer:e},t)}function _({title:e,children:t,flushWithContainer:r}){return n.createElement("div",{className:r?p.$o:p.Sl},n.createElement("div",{className:p.ko},n.createElement(o.n,{className:p.KJ,svg:m}),e),t)}function g({title:e,children:t,closeButton:r}){return n.createElement("div",{className:p.tA},n.createElement("div",{className:p.Vm},n.createElement("div",{className:p.ko},n.createElement(o.n,{className:p.KJ,svg:m}),e),r),t)}},170926:(e,t,r)=>{r.d(t,{$k:()=>p,Du:()=>g,Kr:()=>_,O1:()=>m,Un:()=>h,gA:()=>s,jh:()=>c,wQ:()=>u});var n=r(933858),i=r(961215),a=r(200273),o=r(162512);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function s(e){let t=l(e);return(null==t?void 0:t.mode)===i.Xft.NON_STATE_COMPONENTS?null==t?void 0:t.numSelectedNonStateComponents:0}function c(e){var t;return null==(t=l(e))?void 0:t.mode}function d(e){let t=l(e);return t&&t.mode!==i.Xft.NONE&&t.mode!==i.Xft.NON_STATE_COMPONENTS?t.stateGroupModel:null}let u=(0,n.Py)(function(e){var t;return null==(t=d(e))?void 0:t.stateGroupError});function p(e){let t=l(e);return t&&t.mode!==i.Xft.NONE&&t.mode!==i.Xft.NON_STATE_COMPONENTS?t.stateGroup:null}let m=(0,n.Py)(function(e){var t;return null==(t=d(e))?void 0:t.propertySortOrder}),h=(0,n.ue)([l,a.Oj],(e,t)=>e&&e.mode!==i.Xft.NONE&&e.mode!==i.Xft.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,o.jI)(e,t)):null),_=(0,n.ue)([l,a.Oj],(e,t)=>e&&(e.mode===i.Xft.STATE||e.mode===i.Xft.STATE_INSTANCE||e.mode===i.Xft.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,o.jI)(e,t)):null),g=(0,n.ue)([_,c,d],(e,t,r)=>e&&r&&(t===i.Xft.STATE||t===i.Xft.STATE_INSTANCE||t===i.Xft.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,o.v6)(e,r.propertySortOrder||[]):null)},162512:(e,t,r)=>{r.d(t,{$8:()=>m,Au:()=>y,Ou:()=>T,TH:()=>f,TM:()=>O,_R:()=>b,dK:()=>I,e0:()=>h,jI:()=>w,mh:()=>S,r8:()=>g,rZ:()=>A,u_:()=>C,v4:()=>E,v6:()=>_,yD:()=>v});var n=r(652983);r(407908);var i=r(981114),a=r(600486),o=r(239461),l=r(158774),s=r(961215),c=r(640723),d=r(840568),u=r(200273),p=r(112088);let m="\u2014";function h(e,t){return Object.keys(e).sort((e,r)=>t.indexOf(e)-t.indexOf(r)).map(t=>`${t}=${e[t]}`).join(", ")}function _(e,t,r){let n={};for(let i of e){if(void 0!==i.actionIndexPath&&void 0!==r&&i.actionIndexPath.some((e,t)=>e!==r[t]))continue;let{propertyValues:e}=i.stateInfo;if(e)for(let r of t)r in n&&n[r]!==e[r]?n[r]=n[r]&&e[r]?d.t1:"":n[r]=e[r]||""}return n}function g(e){let t=s.zor.NONE;for(let r of e)r.stateInfo.stateError&&r.stateInfo.stateError>t&&(t=r.stateInfo.stateError);return t}function f(e,t){return e.filter(e=>e.stateInfo.stateError===t)}function E(e,t,r){let n=[],i=0;for(let e of r){let r=e.propertyValues;if(!r)continue;let a=0;for(let e of t){if(e.value!==r[e.property])break;a++}a>i?(i=a,n=[e]):a===i&&n.push(e)}if(0===i)return null;let a=null,o=1/0;for(let t of n){let r=function(e,t){let r=0;for(let n in e)e[n]!==d.t1&&e[n]!==t[n]&&r++;return r}(e,t.propertyValues);r<o&&(o=r,a=t)}return a}function y(e,t,r){let n=[],i=0;for(let e of r){let r=e.stateInfo.propertyValues;if(!r)continue;let a=0;for(let e of t){if(e.value!==r[e.property])break;a++}a>i?(i=a,n=[e]):a===i&&n.push(e)}if(0===i)return null;let a=null,o=1/0;for(let t of n){let r=function(e,t){let r=0;for(let n in e)e[n]!==d.t1&&e[n]!==t[n]&&r++;return r}(e,t.stateInfo.propertyValues);r<o&&(o=r,a=t)}return a}function v(e){return e.replace(/[,=]/g,"").trim()}function b(e,t,r){let n=s.iTB.getStateGroupAnalyticsInfo(t);(0,a.L9)(e,{...n,...r||{}})}let I=(e,t,r,n)=>{if(""===(t=v(t))||e===t||-1===n.indexOf(e))return;let i=[...n];i[i.indexOf(e)]=t,r.forEach(r=>{let n=r.stateInfo.propertyValues;n&&(n={...n})[e]&&(n[t]=n[e],delete n[e],e!==t&&o.WT.reportEditAction("rename-property"),c.qC(r.symbol.node_id,h(n,i)))}),l.Gr.commit()},T=(e,t,r,n)=>{b("Deleting Property from Variant Component",n),t.forEach(t=>{let n=t.stateInfo.propertyValues;if(!n)return;for(let t of(n={...n},e))n[t]&&delete n[t];let i=h(n,r);""===i&&(i="Property 1=Default"),o.WT.reportEditAction("delete-prop"),c.qC(t.symbol.node_id,i)}),l.Gr.commit()},w=(e,t)=>({stateInfo:e.stateInfo,symbol:(0,p.wF)(null,null,e.symbol,t||""),actionIndexPath:function(e){if(!e)return[];let t=e.match(/\{(.*?)\}/);if(!t||t.length<2)return[];let r=t[1].trim(),n=r.split(",").map(e=>parseFloat(e.trim()));return n}(e.actionIndexPath)});function S(e,t,r){var n;if(!e)return null;let i=e.mode;if(i===s.Xft.NONE)return null;if(i===s.Xft.NON_STATE_COMPONENTS)return{mode:i,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let a=e.stateGroup,o=e.stateGroupModel,l=(null==(n=null==o?void 0:o.propertySortOrder)?void 0:n.length)===1,c=e.allStates.map(e=>w(e,t));if(i===s.Xft.STATE_GROUP)return{mode:i,stateGroup:a,stateGroupModel:o,allStates:c,modelIsOneDimensional:l};let d=e.selectedStates.map(e=>w(e,t)),u=_(d,o.propertySortOrder||[],r);return s.Xft.STATE,{mode:i,stateGroup:a,stateGroupModel:o,allStates:c,modelIsOneDimensional:l,selectedStates:d,selectedStatesPropertyValues:u}}n.createContext(null);let C=(0,i.P1)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,u.Oj],S),O=[["yes","no"],["true","false"],["on","off"]],A=O.reduce((e,t)=>e.concat(t),[])},760589:(e,t,r)=>{r.d(t,{AO:()=>eZ,HR:()=>ej,Mt:()=>e3,Ts:()=>eB,VX:()=>eH,Zy:()=>e$,ey:()=>eY,lQ:()=>eK,t7:()=>ez,uJ:()=>eq});var n=r(652983),i=r(407908),a=r(226574),o=r(787702),l=r(172497),s=r(204829),c=r(518484),d=r(805992),u=r(760932),p=r(970740),m=r(280251),h=r(257186),_=r(118962),g=r(158774),f=r(961215),E=r(840568),y=r(572333),v=r(321909),b=r(225468),I=r(471845),T=r(157607),w=r(160905),S=r(303801),C=r(933889),O=r(482919),A=r(332224),N=r(154773);let L=r(615305),P=r(563599),R=r(908903),k=r(712086),D=r(28870),M=r(362502),F=r(435842),x=r(668842),U=r(239398),B=r(194018),V=r(542681),G=r(346876),H=r(781089),W=r(679105),K=r(762117),z=r(516351),Z=r(757251),Y=r(553512),j=r(756650),$=r(199859),q=r(694009),X=r(597052),J=r(133622),Q=r(505909),ee=r(953971),et=r(924208),er=r(291735),en=r(514822),ei=r(831951),ea=r(869728),eo=r(617683),el=r(449765),es=r(109049),ec=r(900277),ed=r(291677),eu=r(289089),ep=r(93572),em=r(775833),eh=r(541863),e_=r(595181),eg=r(439987),ef=r(636507),eE=r(872825),ey=r(29936),ev=r(268576),eb=r(867161),eI=r(912793),eT=r(140934),ew=r(860612),eS=r(931189),eC=r(246801),eO=r(753795),eA=r(313167),eN=r(768678),eL=(0,l.z)(A.rAp);class eP extends C.s{}class eR extends C.X{}class ek extends O.Ph{}class eD extends O.Wx{}class eM{constructor(){this.format=e=>{switch(e){case"LINE":return(0,p.t)("fullscreen.properties_panel.stroke_settings.solid");case"SIMPLE_DASH":return(0,p.t)("fullscreen.properties_panel.stroke_settings.simple_dash");case"CUSTOM_DASH":return(0,p.t)("fullscreen.properties_panel.stroke_settings.custom");default:return""}}}}function eF(e,t){switch(e){case"LINE":return"default"===t?X:J;case"SIMPLE_DASH":return"default"===t?$:q;default:return}}class ex extends C.s{}class eU extends C.X{}function eB(e){return e.dashCap?n.createElement(ex,{className:e.className,property:e.dashCap,onChange:e.onChange,recordingKey:e.recordingKey},n.createElement(eU,{svg:L,fallbackSvg:P,value:"NONE",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.none"),recordingKey:s.ar(e,"NONE")}),n.createElement(eU,{svg:D,fallbackSvg:M,value:"SQUARE",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.square"),recordingKey:s.ar(e,"SQUARE")}),n.createElement(eU,{svg:R,fallbackSvg:k,value:"ROUND",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.round"),recordingKey:s.ar(e,"ROUND")})):null}function eV(e){return e?(0,E.nK)(e)?E.t1:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function eG(e){if(e){if((0,E.nK)(e))return E.t1;if(2===e.length)return e[0]}}function eH(e){if((0,E.nK)(e))return E.t1;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}function eW(e){let t=(0,i.I0)(),r=new eM,{strokePanelMode:l,maxStrokeWeight:c,dashPattern:m,connectorLineStyle:g}=e,[y,T]=n.useState(eV(m));n.useEffect(()=>{let e=eV(m);T(e)},[m]);let[C,A]=n.useState(!0),[L,P]=n.useState(),R=eG(m),k=function(e){if(e){if((0,E.nK)(e))return E.t1;if(2===e.length)return e[1]}}(m),D=()=>{if(!m||(0,E.nK)(m)||2!==m.length)return;A(!0);let t=m[0];e.onChange({dashPattern:[t,t]})},M=n.useRef("NONE"),F=n.createRef(),x=n.createRef(),U=n.createRef();n.useEffect(()=>{var e,t,r,n;if("NONE"!==M.current){if("FOCUS_CURRENT_EVENT"===M.current)switch(y){case"SIMPLE_DASH":null==(e=x.current)||e.focus(),null==(t=x.current)||t.select();break;case"CUSTOM_DASH":null==(r=F.current)||r.focus(),null==(n=F.current)||n.select()}"FOCUS_NEXT_EVENT"===M.current?M.current="FOCUS_CURRENT_EVENT":M.current="NONE"}},[m,y,x,F]);let B=eH(e.dashCap),V=l===f.aB6.VERTEX||l===f.aB6.ENDPOINT,G=(0,i.v9)(e=>e.mirror.selectionProperties.numSelectedByType),H=(0,_.dg)(G,"CONNECTOR"),W=L??y;return n.createElement(S.s_,null,H&&void 0!==g&&n.createElement(S.X2,null,n.createElement(S.__,{className:H?N.Wl:N.Ih},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.path_style"})),n.createElement(eP,{className:N.an,property:g,onChange:t=>{e.onChange({connectorLineStyle:t})},recordingKey:s.ar(e,"pathStyle")},n.createElement(eR,{svg:et,value:"STRAIGHT",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.straight"),recordingKey:s.ar(e,"STRAIGHT")}),n.createElement(eR,{svg:Q,fallbackSvg:ee,value:"ELBOWED",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.elbowed"),recordingKey:s.ar(e,"ELBOWED")}))),n.createElement(S.X2,null,n.createElement(S.__,{className:V?N.g3:N.md},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.stroke_style"})),n.createElement(ek,{id:"line-style-select",className:N.Jh,property:y,formatter:r,onChange:(t,r=v.P7.YES)=>{M.current="FOCUS_NEXT_EVENT";let n=2*(c??1);switch(t){case"LINE":e.onChange({dashPattern:[]},r);break;case"SIMPLE_DASH":e.onChange({dashPattern:[n,n]},r);break;case"CUSTOM_DASH":e.onChange({dashPattern:[n,2*n,3*n,4*n]},r)}},dispatch:t,dropdownShown:e.dropdownShown,dropdownWidth:120,recordingKey:s.ar(e,"strokeStyle"),svg:eF(y,"default"),fallbackSvg:eF(y,"fallback"),ui3Icon:"LINE"===y?n.createElement(a.J,null):"SIMPLE_DASH"===y?n.createElement(o.b,null):void 0,svgClassName:V?N.$K:N.sK,disabled:V,onPreview:e=>{P(e)},enablePreview:!0},n.createElement(eD,{additionalStylesClassName:N.Bb,value:"LINE",recordingKey:s.ar(e,"LINE")},n.createElement("span",{className:N.Bb},n.createElement(d.f,{className:N.jY,svg:X,fallbackSvg:J}),n.createElement(u.H,{text:r.format("LINE")}))),n.createElement(eD,{value:"SIMPLE_DASH",recordingKey:s.ar(e,"SIMPLE_DASH"),additionalStylesClassName:N.Bb},n.createElement("span",{className:N.Bb},n.createElement(d.f,{className:N.jY,svg:$,fallbackSvg:q}),n.createElement(u.H,{text:r.format("SIMPLE_DASH")}))),n.createElement(O.Hz,null),n.createElement(eD,{value:"CUSTOM_DASH",recordingKey:s.ar(e,"CUSTOM_DASH")}))),("SIMPLE_DASH"===W||W===E.t1)&&n.createElement(n.Fragment,null,n.createElement(S.X2,null,n.createElement(S.__,{className:V?N.NG:N.jy},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.dash"})),n.createElement(I.wx,{className:N.P2,min:0,value:eG(m),onValueChange:t=>{let r;if(M.current="NONE",!m||(0,E.nK)(m)||2!==m.length)r=[t,t];else{let e=m[0],n=m[1];r=C&&e===n?[t,t]:[t,n]}e.onChange({dashPattern:r})},dispatch:t,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:s.ar(e,"dash"),"data-tooltip-type":b.fR.TEXT,"data-tooltip":(0,p.t)("fullscreen.properties_panel.stroke_settings.dash"),tooltipForScreenReadersOnly:!0,forwardedRef:x,disabled:V})),n.createElement(S.X2,null,n.createElement(S.__,{className:V?N.xo:N.go},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.gap"})),n.createElement(I.wx,{className:N.SG,min:0,value:void 0!==k&&(0,E.Wn)(k)&&C&&R===k?void 0:k,placeholder:void 0!==k&&(0,E.Wn)(k)&&C&&R===k?String(parseFloat(k.toFixed(2))):void 0,onValueChange:t=>{let r;if(M.current="NONE",A(!1),!m||(0,E.nK)(m)||2!==m.length)r=[t,t];else{let e=m[0];r=[e,t]}e.onChange({dashPattern:r})},onBlur:e=>{var t;(null==(t=U.current)?void 0:t.value)===""&&D()},dispatch:t,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:s.ar(e,"gap"),"data-tooltip-type":b.fR.TEXT,"data-tooltip":(0,p.t)("fullscreen.properties_panel.stroke_settings.gap"),tooltipForScreenReadersOnly:!0,forwardedRef:U,disabled:V}))),"CUSTOM_DASH"===W&&n.createElement(S.X2,null,n.createElement(S.__,{className:V?N.m8:N.iu},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.dashes"})),n.createElement(w.D7,{className:N.MM,forwardedRef:F,formatter:h._,property:e.dashPattern,onChange:t=>{e.onChange({dashPattern:t})},placeholder:(0,p.t)("fullscreen.properties_panel.stroke_settings.dash_gap"),recordingKey:s.ar(e,"dashes"),disabled:V})),(l===f.aB6.VECTOR||l===f.aB6.LINE)&&("SIMPLE_DASH"===W||"CUSTOM_DASH"===W)&&void 0!==B&&n.createElement(S.X2,null,n.createElement(S.__,{className:N.vL},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.dash_cap"})),n.createElement(eB,{className:N.aD,dashCap:B,onChange:t=>{e.onChange({dashCap:t})},recordingKey:s.ar(e,"dashCap")})))}eW.displayName="StrokeLineStyleSettings";class eK extends O.Ph{}class ez extends O.Wx{}class eZ{constructor(){this.format=e=>{switch(e){case"NONE":return(0,p.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,p.t)("fullscreen.properties_panel.stroke_settings.line_arrow");case"ARROW_EQUILATERAL":return(0,p.t)("fullscreen.properties_panel.stroke_settings.triangle_arrow");case"TRIANGLE_FILLED":return(0,p.t)("fullscreen.properties_panel.stroke_settings.reversed_triangle");case"CIRCLE_FILLED":return(0,p.t)("fullscreen.properties_panel.stroke_settings.circle_arrow");case"DIAMOND_FILLED":return(0,p.t)("fullscreen.properties_panel.stroke_settings.diamond_arrow");case"ROUND":return(0,p.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,p.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}}}let eY={format(e){switch(e){case"NONE":return(0,p.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,p.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_line");case"ARROW_EQUILATERAL":return(0,p.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_triangle");case"TRIANGLE_FILLED":return(0,p.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_reversed");case"CIRCLE_FILLED":return(0,p.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_circle");case"DIAMOND_FILLED":return(0,p.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_diamond");case"ROUND":return(0,p.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,p.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}},ej=["NONE","ARROW_LINES","ARROW_EQUILATERAL","TRIANGLE_FILLED","CIRCLE_FILLED","DIAMOND_FILLED"],e$=["ROUND","SQUARE"],eq=["NONE","ROUND","SQUARE"];function eX(e,t,r){switch(e){case"NONE":default:return;case"ARROW_LINES":if(r)return t?G:V;return t?eT:eI;case"ARROW_EQUILATERAL":if(r)return t?z:K;return t?eS:ew;case"TRIANGLE_FILLED":if(r)return t?W:H;return t?eO:eC;case"DIAMOND_FILLED":if(r)return t?x:F;return t?ey:eE;case"CIRCLE_FILLED":if(r)return t?B:U;return t?eb:ev;case"ROUND":return r?eg:eA;case"SQUARE":return r?ef:eN}}function eJ(e,t){switch(e){case"NONE":return"default"===t?es:ec;case"ARROW_LINES":return"default"===t?eo:el;case"ARROW_EQUILATERAL":return"default"===t?ep:em;case"TRIANGLE_FILLED":return"default"===t?ed:eu;case"DIAMOND_FILLED":return"default"===t?er:en;case"CIRCLE_FILLED":return"default"===t?ei:ea;case"ROUND":return eh;default:return e_}}function eQ(e){let t=(0,i.I0)(),r=new eZ,a=e.strokePanelMode===f.aB6.ENDPOINT,o=1===e.strokePanelTerminalPointCount||a;return n.createElement(S.s_,null,n.createElement(S.X2,{"data-testid":"end-point-settings-row"},n.createElement(S.__,{disabled:e.disabled,className:e.disabled?N.hc:N.Y8},o?(0,p.t)("fullscreen.properties_panel.stroke_settings.end_point"):(0,p.t)("fullscreen.properties_panel.stroke_settings.end_points")),n.createElement(eK,{id:"end-point-select",className:N.SJ,property:e.endPoint,formatter:r,onChange:t=>{e.onChange({terminalCap:t}),e.onChange({strokeCap:t})},blurOnChange:!0,dispatch:t,dropdownShown:e.dropdownShown,dropdownWidth:200,recordingKey:e.recordingKey,svg:eX(e.endPoint,!1,o),fallbackSvg:eX(e.endPoint,!0,o),svgClassName:e.disabled?N.EK:N.Jr,dropdownOverride:(0,E.nK)(e.endPoint)?void 0:"NONE"===e.endPoint?(0,p.t)("fullscreen.properties_panel.stroke_settings.none"):" ",disabled:e.disabled},ej.map(t=>n.createElement(ez,{key:t,value:t,recordingKey:s.ar(e,t)},n.createElement("span",{className:N.AD},n.createElement(d.f,{className:N.jY,svg:eJ(t,"default"),fallbackSvg:eJ(t,"fallback")}),n.createElement(u.H,{text:r.format(t)})))),n.createElement(O.Hz,null),e$.map(t=>n.createElement(ez,{key:t,value:t,recordingKey:s.ar(e,t)},n.createElement("span",{className:N.AD},n.createElement(d.f,{className:N.jY,svg:eJ(t,"default"),fallbackSvg:eJ(t,"fallback")}),n.createElement(u.H,{text:r.format(t)})))))))}eQ.displayName="EndPointSettings";class e0 extends C.s{}class e1 extends C.X{}function e2(e){let t=(0,i.I0)();return n.createElement(S.s_,null,n.createElement(S.X2,null,n.createElement(S.__,{className:e.disabled?N.p$:N.gm},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.join"}))," ",n.createElement(e0,{className:N.v_,property:e.disabled?void 0:e.strokeJoin,onChange:t=>{e.onChange({strokeJoin:t})},disabled:e.disabled,recordingKey:e.recordingKey},n.createElement(e1,{svg:Y,value:"MITER",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.miter"),recordingKey:s.ar(e,"MITER")}),n.createElement(e1,{svg:Z,value:"BEVEL",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.bevel"),recordingKey:s.ar(e,"BEVEL")}),n.createElement(e1,{svg:j,value:"ROUND",tooltip:(0,p.t)("fullscreen.properties_panel.stroke_settings.round_join"),recordingKey:s.ar(e,"ROUND")}))),!e.disabled&&"MITER"===e.strokeJoin&&n.createElement(S.X2,null,n.createElement(S.__,{className:e.disabled?N.ut:N.cB},n.createElement(p.Tx,{id:"fullscreen.properties_panel.stroke_settings.miter_angle"})),n.createElement(I.sB,{className:N.mw,disabled:e.disabled||"MITER"!==e.strokeJoin,value:e.miterLimitAngle,onValueChange:t=>{e.onChange({miterLimitAngle:t})},recordingKey:s.ar(e,"miterAngle"),tooltipForScreenReadersOnly:!0,"data-tooltip-type":b.fR.TEXT,"data-tooltip":(0,p.t)("fullscreen.properties_panel.stroke_settings.miter_angle"),dispatch:t})))}function e3(e){let t=(0,i.I0)(),r=(0,y.mA)(f.O$1.propertiesPanelState().isVertexSelectionAndHasEndpoints);if(!e.pickerShown)return null;let a=new c.OW(e.pickerShown.initialX,e.pickerShown.initialY),{strokePanelMode:o,strokePanelTerminalPointCount:l,numSelectedByType:d,arcRadius:u,arcSweep:h}=e,_=o===f.aB6.ENDPOINT||o===f.aB6.VECTOR&&l>0||r,E=o!==f.aB6.PENCIL,v=o===f.aB6.VECTOR||o===f.aB6.VERTEX,b=o===f.aB6.VECTOR&&0===l,I=b&&d&&1===Object.keys(d).length&&d.ELLIPSE&&1===u&&0!==h,w=e.strokePanelMode===f.aB6.VECTOR&&"LINE"!==eV(e.dashPattern),S=w&&e.terminalCap?e.terminalCap:e.strokeCap;return n.createElement(T.My,{title:(0,p.t)("fullscreen.properties_panel.stroke_settings.advanced_stroke"),initialPosition:a,headerSize:"small",onClose:()=>{t(m.le()),g.Gr.deselectProperty()},recordingKey:s.ar(e,"modal"),initialWidth:eL},n.createElement(eW,{onChange:e.onChange,strokePanelMode:e.strokePanelMode,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,connectorLineStyle:e.connectorLineStyle,dashPattern:e.dashPattern,dashCap:e.dashCap,maxStrokeWeight:e.maxStrokeWeight,strokeCap:e.strokeCap,terminalCap:e.terminalCap,dropdownShown:e.dropdownShown,recordingKey:s.ar(e.recordingKey,"lineStyle")}),_&&n.createElement(eQ,{onChange:e.onChange,endPoint:S,dropdownShown:e.dropdownShown,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,disabled:b&&!I&&!r,recordingKey:s.ar(e.recordingKey,"endPoint"),strokePanelMode:o}),E&&n.createElement(e2,{onChange:e.onChange,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,disabled:!v,recordingKey:s.ar(e.recordingKey,"join")}))}e2.displayName="StrokeJoinAndMiterAngleSettings"},317356:(e,t,r)=>{r.d(t,{$6:()=>v,C8:()=>T,HZ:()=>b,Iq:()=>f,Je:()=>E,L3:()=>g,UF:()=>I,hz:()=>_});var n=r(652983),i=r(407908),a=r(598271),o=r(716250),l=r(297296),s=r(961215),c=r(840568),d=r(464368),u=r(200273),p=r(691236),m=r(375949),h=r(166885);function _(e){return`styles-picker-${e}`}function g(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===_(e.inheritStyleKeyField)?e.stylePickerShown:null}function f(e){return e&&(0,a.JY)(e.guid)}function E(e){let t=(0,c.qD)(e);return t&&t!==l.hx.INVALID}function y({library:e,sceneGraph:t,inheritStyleKey:r,inheritStyleID:n}){let i=(0,c.qD)(r);if(!i)return null;let o=(0,c.qD)(n);if(!o)return null;let l=(0,a.BB)(o),s=Object.values(e.local.styles).find(e=>e.node_id===l);if(s)return s.is_soft_deleted?null:s;let d=t.get(l);return d?{key:i,style_type:d.styleType,type:h.h3.STYLE,node_id:l,name:d.name,isLocal:!1,content_hash:d.styleVersionHash??void 0,file_key:""}:null}function v({library:e,sceneGraph:t,inheritStyleKey:r,inheritStyleID:n}){if((0,o.BZ)().ds_zombie_styles_fixes)return y({library:e,sceneGraph:t,inheritStyleID:n,inheritStyleKey:r});if(!E(r))return null;let i=(0,c.qD)(r);if(!i)return null;let a=Object.values(e.local.styles).find(e=>e.key===i);if(a&&!a.is_soft_deleted)return a;let l=(0,m.I)({library:e},i,(0,c.qD)(n));return(null==l?void 0:l.status)==="loaded"?l.data:null}function b(e,t,r){let a=(0,i.v9)(e=>e.library),l=(0,d.at)(),s=(0,p.Ks)(),c=(0,u.uC)(),m=y({library:a,sceneGraph:l,inheritStyleKey:e,inheritStyleID:t}),h=n.useMemo(()=>{if(!e)return null;let n=v({library:a,inheritStyleKey:e,inheritStyleID:t,sceneGraph:l});if(n)return n;for(let t of Object.values(s))if((null==t?void 0:t.status)==="loaded"&&t.data.fileKey!==c){for(let n of(0,p.PD)(t,r))if(n.key===e)return n}return null},[t,e,s,a,c,l,r]);return(0,o.BZ)().ds_zombie_styles_fixes?m:h}function I(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,dispatch:e.dispatch}}function T(e){if(!e)return;let t=e=>(0,a.JY)((0,a.mL)(e))?e:void 0;return t(s.iTB.getStyleNodeId(e.key,e.version))??t(s.iTB.getSoftDeletedStyleNodeId(e.key,e.version))}},66674:(e,t,r)=>{r.d(t,{E:()=>s,K:()=>l});var n=r(652983),i=r(407908),a=r(768358),o=r(671708);function l(e,t){let r=(0,i.I0)(),l=n.useMemo(()=>(0,a.D)(r,200),[r]);n.useEffect(()=>{(null==t?void 0:t.skip)||l(o.hR({styleType:e}))})}function s(e){let t=(0,i.I0)(),r=n.useMemo(()=>(0,a.D)(t,200),[t]);n.useEffect(()=>{r(o.hR({styleType:e}))},[r,e])}},639875:(e,t,r)=>{r.d(t,{nN:()=>O,vv:()=>L,S2:()=>S,as:()=>C});var n,i,a,o=r(652983),l=r(335863),s=r(816754),c=r(197060),d=r(840568),u=r(713518);function p(){return performance.now()}var m=r(352265),h=r(951261);let _="transition_preview--previewPanel--Gp-aI",g="transition_preview--belowInactive--DBGgj transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",f="transition_preview--belowActive--69cT1 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",E="transition_preview--blueHeaderShort--FqI0m transition_preview--_blueHeader--Xlxtt transition_preview--_previewItem--o2gce",y="transition_preview--blueHeaderTall--atMMg transition_preview--_blueHeader--Xlxtt transition_preview--_previewItem--o2gce",v="transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",b="transition_preview--screenBorderNarrow--EB6kk transition_preview--screenContainerNarrow--ugQN- transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",I="transition_preview--smartAnimateRowItem--aMXQ8";var T=((n=T||{})[n.BLANK=0]="BLANK",n[n.ACTIVE=1]="ACTIVE",n[n.INACTIVE=2]="INACTIVE",n[n.ACTIVE_RESETTABLE=3]="ACTIVE_RESETTABLE",n),w=((i=w||{})[i.STATIC=0]="STATIC",i[i.ANIMATING=1]="ANIMATING",i[i.RETURN_TO_START=2]="RETURN_TO_START",i);let S=new s.v("activateBezierCustomAnimationPreview"),C=new s.v("activateSpringCustomAnimationPreview");function O({transition:e,isNarrowPanel:t}){let r=(0,d.NA)(e.easingFunction,[1,100,10,0]),[n,i,a,l,s]=function(e,t={delayBeforeAnimation:0,delayAfterAnimation:0}){let{delayBeforeAnimation:r=0,delayAfterAnimation:n=0}=t,i=(0,m.WC)(e),a=(0,m.FY)(i),[l,s,c,d]=function(e){let[t,r]=(0,o.useState)(!1),[n,i]=(0,o.useState)(0),[a,l]=(0,o.useState)(0);(0,u.p)((0,o.useCallback)(()=>{let t=(p()-n)/1e3;t>e?(l(e),r(!1)):l(t)},[n,l,r,e]),t);let s=(0,o.useCallback)(()=>{r(!0),i(p()),l(0)},[i,r,l]),c=(0,o.useCallback)(()=>{r(!1),l(0)},[r,l]);return[a,t,s,c]}(r+a+n);return[l<r?0:(0,m.CV)(i,l-r),l,s,c,d]}(r,{delayBeforeAnimation:.1,delayAfterAnimation:1});o.useEffect(()=>{C.on("restartSpringAnimation",()=>{l()});let e=()=>{s()};return C.on("resetSpringAnimation",e),()=>{C.removeListener("resetSpringAnimation",e)}},[l,s]);let c=124;t&&(c=80);let h={transform:`translateX(${n*c}px)`,transition:"none"};0!==i&&a||(h={transform:"none",transition:"transform 0.2s ease-out"});let g=(0,o.useCallback)(()=>{a||l()},[a,l]);return o.createElement("div",{className:_,onMouseEnter:g,onMouseLeave:s},o.createElement("div",{className:"transition_preview--springBoxItem--Uej9X",style:h}))}var A=((a=A||{})[a.RESET_INSTANT=0]="RESET_INSTANT",a[a.RESET_WITH_EASE=1]="RESET_WITH_EASE",a[a.PLAY_TO_END=2]="PLAY_TO_END",a);let N=class extends o.PureComponent{constructor(e){super(e),this.executor=new l.S,this.cursorIsOverUs=!1,this.transitionToNextFrame=()=>{if(1===this.state.frameIndex&&!this.cursorIsOverUs){this.executor.scheduleOnce(()=>{this.setState({status:2})},2);return}let e=(this.state.frameIndex+1)%2;this.setState({status:1,frameIndex:e});let t=1e3*(0===this.state.frameIndex?(0,d.NA)(this.props.transition.duration,1):2);this.executor.scheduleOnce(this.transitionToNextFrame,t)},this.startAnimation=()=>{this.setState({status:1,frameIndex:0}),this.executor.reset(),this.executor.scheduleOnce(()=>{this.setState({status:1,frameIndex:1}),this.transitionToNextFrame()},0)},this.onMouseEnter=()=>{this.cursorIsOverUs=!0,this.startAnimation()},this.onMouseLeave=()=>{this.cursorIsOverUs=!1,this.executor.reset(),this.setState({status:2})},this.startAnimationNew=()=>{this.setAnimationStateNew(0),this.executor.scheduleOnce(()=>{this.setAnimationStateNew(2),this.executor.scheduleOnce(()=>{this.setAnimationStateNew(1)},1e3*(0,d.NA)(this.props.transition.duration,0)+N.BEZIER_RETURN_TO_START_WAIT_TIME)},N.BEZIER_BEFORE_ANIMATION_WAIT_TIME)},this.resetAnimationNew=()=>{this.setAnimationStateNew(1)},this.setAnimationStateNew=e=>{this.executor.reset(),this.setState({status:0===e?1:3,frameIndex:2===e?1:0})},this.isAnimationRunningNew=()=>!((3===this.state.status||1===this.state.status||2===this.state.status)&&0===this.state.frameIndex),this.onMouseEnterNew=()=>{this.isAnimationRunningNew()||this.startAnimationNew()},this.onMouseLeaveNew=()=>{this.resetAnimationNew()};let t=!this.isAnyTransitionInfoMixed(e.transition);t?this.state={status:3,frameIndex:0}:this.state={status:0,frameIndex:0},S.on("activateBezierAnimation",this.startAnimationNew),S.on("resetBezierAnimation",this.resetAnimationNew)}buildKeyFramesForNonSmartTransition(e){let t={top:0,left:0,opacity:1};switch(e.behavior){case"SMART_ANIMATE":throw Error(`Invalid transition behavior ${e.behavior}`);case"INSTANT":case"DISSOLVE":return[{below:t,above:{...t,opacity:0}},{below:{...t,opacity:0},above:t}];case"SCROLL_ANIMATE":return[{below:t,above:{...t,left:1}},{below:{...t,left:-.25,opacity:.25},above:t}];case"SLIDE":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:{...t,left:.25,opacity:.25},above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:{...t,left:-.25,opacity:.25},above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:{...t,top:.25,opacity:.25},above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:{...t,top:-.25,opacity:.25},above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"SLIDE_OUT":switch(e.direction){case"LEFT":return[{below:{...t,left:-.25,opacity:.25},above:t},{below:t,above:{...t,left:1}}];case"RIGHT":return[{below:{...t,left:.25,opacity:.25},above:t},{below:t,above:{...t,left:-1}}];case"TOP":return[{below:{...t,top:-.25,opacity:.25},above:t},{below:t,above:{...t,top:1}}];case"BOTTOM":return[{below:{...t,top:.25,opacity:.25},above:t},{below:t,above:{...t,top:-1}}];default:throw Error(`Invalid direction: ${e.direction}`)}case"PUSH":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:{...t,left:1},above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:{...t,left:-1},above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:{...t,top:1},above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:{...t,top:-1},above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"MOVE":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:t,above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:t,above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:t,above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:t,above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"MOVE_OUT":switch(e.direction){case"LEFT":return[{below:t,above:t},{below:t,above:{...t,left:1}}];case"RIGHT":return[{below:t,above:t},{below:t,above:{...t,left:-1}}];case"TOP":return[{below:t,above:t},{below:t,above:{...t,top:1}}];case"BOTTOM":return[{below:t,above:t},{below:t,above:{...t,top:-1}}];default:throw Error(`Invalid direction: ${e.direction}`)}default:throw Error(`Invalid behavior: ${e.behavior}`)}}cssEasingFunction(e){if("INSTANT"!==e.behavior)switch(e.easing){case"EASE_IN":return"ease-in";case"EASE_OUT":return"ease-out";case"EASE_IN_AND_OUT":return"ease-in-out";case"LINEAR":return"linear";case"EASE_IN_BACK":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"EASE_OUT_BACK":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"EASE_IN_AND_OUT_BACK":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";case"CUSTOM_BEZIER":let t=(0,d.qD)(e.easingFunction);if(t&&4===t.length)return"cubic-bezier("+c.W.format(t)+")"}return""}cssDuration(e){return"INSTANT"===e.behavior?0:(0,d.NA)(e.duration,.3)}rectangleStateToCSSStyle(e,t,r,n){let i=this.cssEasingFunction(e),a=this.cssDuration(e);return{transition:2===r?N.BEZIER_RETURN_TO_START_EASING:0===r?"unset":`all ${a}s ${i}`,top:18+60*t.top,left:(n?65:81)+54*t.left,opacity:t.opacity}}isAnyTransitionInfoMixed(e){let t=!(0,d.Wn)(e.behavior),r=!(0,d.Wn)(e.easing),n=!(0,d.Wn)(e.duration),i=!(0,d.Wn)(e.direction);return t||r||n||i}UNSAFE_componentWillReceiveProps(e){let t=!this.isAnyTransitionInfoMixed(e.transition);if(t){let t=!this.props.transition||this.props.transition.behavior!==e.transition.behavior||this.props.transition.easing!==e.transition.easing||this.props.transition.duration!==e.transition.duration||this.props.transition.direction!==e.transition.direction;t&&this.startAnimationNew()}else this.executor.reset(),this.setState({status:0})}componentWillUnmount(){S.removeListener("activateBezierAnimation",this.startAnimationNew),S.removeListener("resetBezierAnimation",this.resetAnimationNew),this.executor.reset()}renderSimpleScreenToScreenAnimationPreview(e,t,r,n,i,a,l){let s=E,c=y,d=this.props.transition.behavior;("MOVE_OUT"===d||"SLIDE_OUT"===d)&&(s=y,c=E);let u=o.createElement("div",{className:s}),p=o.createElement("div",{className:c}),m=null;if(this.props.transition.shouldSmartAnimate){u=null,p=null;let e=this.cssEasingFunction(i),t=this.cssDuration(i),r={transition:2===a?N.BEZIER_RETURN_TO_START_EASING:0===a?"unset":`all ${t}s ${e}`};m=o.createElement("div",{className:this.state.frameIndex?y:E,style:r})}return("DISSOLVE"===d||"INSTANT"===d)&&(p=u=m=null),o.createElement("div",{className:_,onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},o.createElement("div",{className:e,style:t},u),o.createElement("div",{className:r,style:n},p),o.createElement("div",{className:l?"transition_preview--screenContainerNarrow--ugQN- transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":"transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"},m),o.createElement("div",{className:l?b:v}))}renderSmartAnimateTransition(e){let t=1===this.state.frameIndex?1:3===this.state.status?2:0,r=this.cssDuration(this.props.transition),n=this.cssEasingFunction(this.props.transition),i=2===t?N.BEZIER_RETURN_TO_START_EASING:0===t?"unset":`all ${r}s ${n}`,a=e?"transition_preview--smartAnimateContainerNarrow--0x3xY transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":"transition_preview--smartAnimateContainer--SuYj0 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",l=e?b:v;if(0===this.state.frameIndex)return o.createElement("div",{className:_,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},o.createElement("div",{className:a},o.createElement("div",{className:I,style:{transition:i,height:12,background:"rgba(0, 0, 0, 0.06)"}}),o.createElement("div",{className:I}),o.createElement("div",{className:I})),o.createElement("div",{className:l}));if(1===this.state.frameIndex){let e={transition:i,height:20,background:h.Cny};return o.createElement("div",{className:_,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},o.createElement("div",{className:a},o.createElement("div",{className:I,style:e}),o.createElement("div",{className:I}),o.createElement("div",{className:I})),o.createElement("div",{className:l}))}throw Error("Invalid state.frameIndex")}render(){let e=0===this.state.status||2===this.state.status?g:f,t="PUSH"===this.props.transition.behavior,r=0===this.state.status||2===this.state.status?t?g:"transition_preview--aboveInactive--b8PZf transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":t?f:"transition_preview--aboveActive--Wbtj2 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce";if(0===this.state.status||(0,d.nK)(this.props.transition.behavior))return null;if("SMART_ANIMATE"===this.props.transition.behavior)return this.renderSmartAnimateTransition(this.props.isNarrowPanel);{let t=this.buildKeyFramesForNonSmartTransition(this.props.transition),n=t[this.state.frameIndex],i=1===this.state.frameIndex?1:3===this.state.status?2:0;return this.renderSimpleScreenToScreenAnimationPreview(e,this.rectangleStateToCSSStyle(this.props.transition,n.below,i,this.props.isNarrowPanel),r,this.rectangleStateToCSSStyle(this.props.transition,n.above,i,this.props.isNarrowPanel),this.props.transition,i,this.props.isNarrowPanel)}}},L=N;L.displayName="TransitionPreview",L.BEZIER_BEFORE_ANIMATION_WAIT_TIME=100,L.BEZIER_RETURN_TO_START_WAIT_TIME=1500,L.BEZIER_RETURN_TO_START_EASING="all ease-out 200ms"},737942:(e,t,r)=>{r.d(t,{T:()=>s,x:()=>l});var n=r(652983),i=r(87608),a=r.n(i),o=r(447151);let l=(0,n.forwardRef)(function({left:e,right:t,appendedClassName:r},i){let l=a()(o.kJ,r);return n.createElement("div",{className:l,ref:i},e?n.createElement("div",{className:o.t$},e):null,t?n.createElement("div",{className:o.F2},t):null)}),s=(0,n.forwardRef)(function({children:e,appendedClassName:t},r){let i=a()(o.fw,t);return n.createElement("div",{className:i,ref:r},e)})},250914:(e,t,r)=>{r.d(t,{AM:()=>I,AT:()=>T,G1:()=>v,KK:()=>g,NP:()=>h,OC:()=>_,YP:()=>S,Zt:()=>b,_8:()=>p,df:()=>w,hv:()=>f,sI:()=>m,wB:()=>E});var n=r(652983),i=r(87608),a=r.n(i),o=r(564380),l=r(435613),s=r(784667),c=r(572333),d=r(522112),u=r(523902);let p=(0,n.forwardRef)(function({leftLabel:e,leftInput:t,rightLabel:r,rightInput:i,appendedClassName:o,icon:l,...s},c){return n.createElement("div",{className:a()(u.ol,o),ref:c,...s,"data-non-interactive":!0},null!=e?n.createElement(C,null,e):null,n.createElement("div",{className:u.Qq,"data-non-interactive":!0},t),null!=r?n.createElement(O,null,r):null,n.createElement("div",{className:u.Oi,"data-non-interactive":!0},i),n.createElement(E,null,l))}),m=(0,n.forwardRef)(function({label:e,leftIcon:t,input:r,firstRightIcon:i,secondRightIcon:a,...o},l){return n.createElement("div",{className:u.NQ,ref:l,...o,"data-non-interactive":!0},null!=e?n.createElement(C,null,e):null,n.createElement("div",{className:u.st,"data-non-interactive":!0},t),n.createElement("div",{className:u.bH,"data-non-interactive":!0},r),n.createElement("div",{className:u.QH,"data-non-interactive":!0},i),n.createElement("div",{className:u.Oh,"data-non-interactive":!0},a))}),h=(0,n.forwardRef)(function({label:e,input:t,icon:r,appendedClassName:i,...o},l){let s=a()(u.kW,i);return n.createElement("div",{className:s,ref:l,...o,"data-non-interactive":!0},null!=e?n.createElement(C,null,e):null,n.createElement("div",{className:u.Qq,"data-non-interactive":!0},t),n.createElement(E,null,r))}),_=(0,n.forwardRef)(function({input:e,label:t,appendedClassName:r,...i},o){return n.createElement("div",{className:a()(u.$d,r),ref:o,...i,"data-non-interactive":!0},t?n.createElement(C,null,t):null,n.createElement("div",{className:u.Qq,"data-non-interactive":!0},e))}),g=(0,n.forwardRef)(function({input:e,leftIcon:t,rightIcon:r,appendedClassName:i,...l},s){let c=a()(u.ks,i);return n.createElement(o.yh,{className:c,forwardedRef:s,...l,"data-non-interactive":!0},n.createElement("div",{className:u.yB,"data-non-interactive":!0}," ",e," "),n.createElement("div",{className:u.uR,"data-non-interactive":!0}," ",t," "),n.createElement("div",{className:u.mW,"data-non-interactive":!0}," ",r," "))});function f({children:e}){return n.createElement("span",{"aria-hidden":"true"},e)}function E({children:e}){return e?n.createElement("div",{className:u.S5,"data-non-interactive":!0},e):null}let y=r(745048),v=(0,n.forwardRef)(function({selected:e,grabberClassName:t,hideGrabber:r,singletonRow:i,dragging:s,children:c,...p},m){let h=!r&&(!i||s),_=e&&s?d.vr:d.km;return n.createElement(o.yh,{...p,forwardedRef:m,"data-non-interactive":!0},h&&n.createElement("div",{className:a()(t,{[u.lb]:s,[u.uQ]:!s})},(!s||e)&&n.createElement(l.n,{className:_,svg:y})),c)});function b({variant:e="dual-input-single-icon",children:t}){let r={"dual-input-single-icon":u.Xz,"single-input-dual-icon":u.HP}[e];return n.createElement("div",{className:r,"data-non-interactive":!0},t)}function I({children:e}){return n.createElement("div",{className:u.QX,"data-non-interactive":!0},e)}function T({children:e}){return n.createElement("div",{className:u.ik,"data-non-interactive":!0},e)}function w({}){return n.createElement("div",{"data-non-interactive":!0})}function S({}){return n.createElement("div",{className:u.Cr,"data-non-interactive":!0})}function C({children:e}){let t=(0,c.mA)((0,s.tZ)().showPropertyLabels);return t?n.createElement("span",{"aria-hidden":"true",className:u.no,"data-non-interactive":!0},e):null}function O({children:e}){let t=(0,c.mA)((0,s.tZ)().showPropertyLabels);return t?n.createElement("span",{"aria-hidden":"true",className:u.UF,"data-non-interactive":!0},e):null}},40721:(e,t,r)=>{r.d(t,{C:()=>o,Q:()=>a});var n=r(652983),i=r(388899);function a({children:e}){let t=o();return n.createElement("div",{ref:t},e)}function o(e){let t=(0,n.useRef)(i.ZT),r=(0,n.useCallback)(r=>{var n,a;"function"==typeof e?e(r):e&&(e.current=r),t.current(),t.current=(n="mouseup",a=e=>{let{target:t}=e;t&&(t instanceof HTMLButtonElement||t instanceof HTMLInputElement&&t.hasAttribute("type")&&"text"!==t.getAttribute("type")||t instanceof HTMLElement&&"slider"===t.role)&&!t.hasAttribute("data-hold-focus")&&t.blur()},r?(r.addEventListener(n,a),()=>r.removeEventListener(n,a)):i.ZT)},[e]);return r}},761618:(e,t,r)=>{r.d(t,{U:()=>a});var n=r(242107);let i=new n.Z({name:"properties_panel",enforce:!1,dependencies:[],exports:["views"],friendFiles:[],routeHints:["fullscreen","design"]}),a=i.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(7353),r.e(1528),r.e(8449),r.e(5226)]).then(r.bind(r,418183)).then(e=>e.PropertiesPanel))},216970:(e,t,r)=>{r.d(t,{sG:()=>er,yX:()=>e_,Tk:()=>eu});var n,i,a=r(652983),o=r(407908),l=r(87608),s=r.n(l),c=r(559341),d=r(600486),u=r(46347),p=r(172497),m=r(19516),h=r(716250),_=r(337167),g=r(810373),f=r(381846),E=r(958189),y=r(571529),v=r(564380),b=r(680356),I=r(854571),T=r(782051),w=r(85808),S=r(435613),C=r(970740),O=r(111120),A=r(508887),N=r(334245),L=r(147744),P=r(664937),R=r(200273),k=r(286658),D=r(587649),M=r(57013),F=r(761767),x=r(108242),U=r(919726),B=r(166885),V=r(605508),G=r(459481),H=r(425285),W=r(900083),K=r(784209),z=r(646894),Z=r(554564),Y=r(687844),j=r(146198),$=r(12875),q=r(860577),X=r(229674),J=r(949925),Q=r(855550),ee=r(332224),et=r(729408);let er="insert",en=(0,p.F)(ee.pEj),ei="Quick Actions Component Search",ea=(0,p.F)(ee.kgN),eo=et.e99,el=eo+1,es=r(43785),ec=(0,_.cn)(!1),ed=(0,_.cn)({type:Z.u.ALL});var eu=((n=eu||{}).KEYBOARD_SHORTCUT="Keyboard Shortcut (Shift + I)",n.MENU_OPTION="Menu Option",n.INSERT_TAB="Insert [Tab]",n),ep=((i=ep||{}).KEYBOARD_OR_CLICK="Keyboard navigation or click",i.DRAG_AND_DROP="Drag and drop",i);let em=(0,_.cn)(""),eh=(0,_.cn)([]);function e_(){var e;let[t,r]=(0,_.KO)(em),[n,i]=(0,a.useState)(!1),[l,s]=(0,_.KO)(ec),[p,f]=(0,_.KO)(eh),[v,L]=(0,_.KO)(ed),[P,k]=(0,a.useState)({type:""}),[D,B]=(0,a.useState)(""),K=(0,a.useRef)(null);(0,m.O)(()=>{var e;null==(e=K.current)||e.select()});let $=(0,o.v9)(U.Ig),J=(0,o.v9)(x.kM),ee=(0,o.v9)(e=>e.currentUserOrgId),et=(0,o.v9)(R.dh),er=(0,o.v9)(U.tW),eo=(0,o.v9)(U.dM),el=(0,o.v9)(e=>e.dropdownShown),eu=(0,A.RI)(),ep=(0,h.ZP)().tracking_session_id,e_=(null==el?void 0:el.type)===V.JT?null==(e=el.data)?void 0:e.entryPoint:void 0,ey=(0,o.I0)();M.Nh.useInitSearch(),(0,m.O)(()=>{(0,d.L9)("quick_actions.search_opened",{tracking_session_id:ep,searchSessionId:D,entryPoint:e_}),eb()});let ev=(0,a.useCallback)(()=>{D&&(0,d.L9)("quick_actions.search_session_end",{tracking_session_id:ep,searchSessionId:D,entryPoint:e_})},[e_,D,ep]);a.useEffect(()=>ev,[e_,ev,D,ep]);let eb=(0,a.useCallback)(()=>{ev(),B((0,b.k)()),(0,d.L9)("quick_actions.search_session_start",{tracking_session_id:ep,searchSessionId:D,entryPoint:e_})},[e_,ev,D,ep]),eI=(0,a.useCallback)(()=>{ey(O.kp())},[ey]),eT=(0,a.useCallback)(()=>{ey(O.SP({type:V.JE,hasOwnEscKeyHandler:!0}))},[ey]),ew=(0,c.Z)(async e=>{let t=new E.yN("quick_actions.search_query_time",{});t.start();let r=await eC(e);f((0,M.WJ)(r.normalizedSearchResults)),i(!1);let n=t.stop();(0,d.L9)("quick_actions.search_query_time",{query:e,searchResultCount:r.normalizedSearchResults.length,searchType:v.type,searchElapsedTime:n,tracking_session_id:ep,searchSessionId:D,entryPoint:e_})},200),eS=(0,H.j3)(J)===F.gg.DESIGN,eC=a.useCallback(e=>{switch(v.type){case Z.u.LOCAL:return M.Nh.computeLocalResultsPromise(e,null==et?void 0:et.key);case Z.u.FILE:return M.Nh.computeFileResultsPromise(e,v.fileKey,eS,eu);case Z.u.RECENT:case void 0:case Z.u.ALL:return M.Nh.computeAllResultsPromise(e,eS,$,ee,et,er,eu);default:return(0,u.vE)(v,"unknown search type")}},[v,ee,er,$,eu,eS,et]),eO=a.useCallback(e=>{et&&(e?(r(e),i(!0),ew(e)):(r(""),i(!1),ew.cancel(),f([]),eb()))},[ew,et,eb,r,f]),eA=(0,a.useCallback)(e=>eO(e.currentTarget.value),[eO]),eN=(0,a.useCallback)(e=>{if(e.keyCode===g.sr.BACKSPACE&&0===e.currentTarget.value.length){e.preventDefault(),eT();return}let t=y.ZP.mac?(0,g.VG)(e,g.tx.META):(0,g.VG)(e,g.tx.CONTROL);if(t&&(e.keyCode===g.sr.P||e.keyCode===g.sr.FORWARD_SLASH)){e.preventDefault(),eT();return}},[eT]),eL=(0,a.useCallback)(()=>{if(0===p.length)return a.createElement("div",{className:"quick_actions_component_search--noResults--2jsYe"},a.createElement("p",{className:"quick_actions_component_search--noResultsText--8m7-y text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.createElement(C.Tx,{id:"fullscreen_actions.quick_actions_component_search.no-results",searchQuery:t})));let e=(0,z.RW)(p,!0),r={layout:e,isList:l,containerWidth:l?en:en-4*ea,maxSmallThumbSize:q.F1,maxWideColWidth:q.fV},n=(0,z.bs)(r),{width:i,height:o}=(0,z.iH)(r,n);return a.createElement(w.l,{hideScrollbar:!0,className:"quick_actions_component_search--results--jK5VZ"},a.createElement("div",{className:l?"quick_actions_component_search--list--oEVxX":"quick_actions_component_search--grid--ViFOI"},p.map((r,n)=>a.createElement(ef,{key:eE(r.node_id),afterSuccessfulInsert:eI,asset:r,fileNameByKey:eo,isList:l,thumbLayout:e,thumbHeight:o,thumbWidth:i,row:l?n+1:Math.floor(n/4)+1,column:l?0:n%4,assetTypeDropdownSelection:v.type,searchQuery:t,searchSessionId:D??"",entryPoint:e_,openFileKey:(null==et?void 0:et.key)??""}))))},[p,l,t,eI,eo,v.type,D,e_,null==et?void 0:et.key]),eP=(0,_.Dv)(W.s),eR=a.useMemo(()=>{if(eP.data)return eP.data.filter(e=>!(0,N.mY)(e.fileKey))},[eP.data]),ek=a.useMemo(()=>{let e={};return"loaded"!==eP.status||eR&&eR.forEach(t=>{e[t.fileKey]=t.name}),e},[eP.status,eR]),eD=(0,a.useCallback)(()=>{var e;s(e=>!e),null==(e=K.current)||e.focus()},[s]),eM=(0,a.useCallback)(e=>{var t;e.keyCode===g.sr.BACKSPACE&&(null==(t=K.current)||t.focus())},[]);return a.createElement(G.i,null,a.createElement(X.O,{onKeyDown:eM},a.createElement(I.Sg,null,a.createElement("div",{className:Q.yC},a.createElement(S.n,{svg:es,className:Q.RL}),a.createElement("div",{className:"quick_actions_component_search--insertSquare--SJWGe text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(C.Tx,{id:"fullscreen_actions.quick_actions_component_search.insert"})),a.createElement(eg,{onSearchInputChange:eA,searchQuery:t,searchSessionId:D,trackingSessionId:ep,entryPoint:e_,onKeyDown:eN,searchInputRef:K})),t&&a.createElement("div",null,a.createElement("div",{className:"quick_actions_component_search--header--vxsAF"},a.createElement(Y.m,{assetType:v,libraryNameByFileKey:ek,onSetAssetType:function(e){var r;L(e),eO(t),null==(r=K.current)||r.focus()},validAssetTypeOptions:Z.e,useLocalState:!0,onHideDropdownOverride:()=>{k({type:""})},onShowDropdownOverride:()=>{k({type:Y.I})},dropdownShown:P}),a.createElement(j.q,{recordingKey:ei,isList:l,onToggleViewMode:eD,disabled:0===p.length})),n?a.createElement("div",{className:"quick_actions_component_search--loading--3-dhs"},a.createElement(T.TK,{className:"quick_actions_component_search--loadingSpinner--IwExg"})):eL()))))}function eg({onSearchInputChange:e,searchQuery:t,searchSessionId:r,trackingSessionId:n,entryPoint:i,onKeyDown:o,searchInputRef:l}){let{setKeyboardNavigationElement:s}=(0,I.Jd)({path:[0],column:0});return a.createElement(v.i1,{onKeyDown:o,forwardedRef:(0,f.Z)(l,s),className:Q.eK,placeholder:(0,C.t)("fullscreen_actions.quick_actions_component_search.search-prompt"),onChange:e,value:t,maxLength:150,spellCheck:!1,onFocus:()=>{(0,d.L9)("quick_actions.search_focused",{tracking_session_id:n,searchSessionId:r,entryPoint:i})},onBlur:()=>{(0,d.L9)("quick_actions.search_unfocused",{tracking_session_id:n,searchSessionId:r,entryPoint:i})}})}function ef({asset:e,fileNameByKey:t,thumbLayout:r,thumbHeight:n,thumbWidth:i,isList:o,row:l,column:c,assetTypeDropdownSelection:d,searchQuery:u,searchSessionId:p,afterSuccessfulInsert:m,entryPoint:h,openFileKey:_}){let{setKeyboardNavigationElement:g}=(0,I.Jd)({path:[l],column:c}),f=(0,L.Ld)(e.file_key),E=(0,L.xD)(e.file_key,f),y=a.useMemo(()=>({assetKey:(0,L.vi)(e),assetFileKey:e.file_key,sectionPosition:4*l+c,assetTypeDropdownSelection:d,libraryType:f,viewMode:o?"LIST":"GRID",searchQuery:u,searchSessionId:p,source:ei,sourceSection:ei,type:e.type===B.h3.COMPONENT?"component":"state_group",subscriptionLevel:E}),[e,d,c,o,f,l,u,p,E]),b=(0,P.p)({canSwap:!1,openFileKey:_,sourceForTracking:ei,insertAsChildOfCanvas:!0,insertLogArgsOverride:{...y,entryPoint:h,insertionAction:"Keyboard navigation or click"}}),{onInsertableResourcePointerDown:T,dragState:w}=(0,D.$)({isList:o,sourceForTracking:ei,resource:e,clickToInsert:!1,insertLogArgsOverride:{...y,entryPoint:h,insertionAction:"Drag and drop"},afterSuccessfulInsert:m}),S=(0,a.useCallback)(t=>{b(t,e),m()},[m,e,b]);return a.createElement(v.sq,{key:eE(e.node_id),forwardedRef:g,className:o?"quick_actions_component_search--resultItemList--w8FKY":s()(J.hz,J.PE),onPointerDown:T,onClick:S},a.createElement(k.L,{dragState:w,isList:o,zIndexOverride:el}),a.createElement("div",{className:"quick_actions_component_search--noPointerEvents--1LzxQ"},a.createElement(K.t,{asset:e,fileName:e.file_key?null==t?void 0:t[e.file_key]:void 0,sourceForTracking:ei,thumbLayout:r,thumbHeight:n,thumbWidth:i,viewMode:o?$.ge.List:$.ge.Grid,noFlyout:!0,sectionNameForTracking:ei,preventDrag:!0,disableContextMenu:!0})))}function eE(e){return`quick-actions-tile-${e}`}},525826:(e,t,r)=>{r.d(t,{HJ:()=>s,U2:()=>i,dT:()=>a,jS:()=>o});var n=r(337167);let i=(0,n.cn)(null),a=(0,n.cn)(null),o=(0,n.cn)(null),l=(0,n.cn)([]);function s(){let[e,t]=(0,n.KO)(l),r=e[0];return{navigationStack:e,push:function(r){t([r,...e])},pop:function(){t(e.slice(1))},current:r}}},784282:(e,t,r)=>{r.d(t,{N:()=>l,V:()=>s});var n=r(652983),i=r(816754),a=r(596085);let o=n.createContext(new i.v("KeyboardContext"));function l(e){let t=n.useMemo(()=>new i.v("KeyboardContext"),[]),r=e=>{t.trigger("keydown",e)};return n.useEffect(()=>(document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)})),n.createElement(o.Provider,{value:t},n.createElement(a.BQ,{name:"test",handleKeyDown:e=>{e.accept(),r(e.event)}},e.children))}function s(e,t,r=!0){!function(e,t,r,i){let a=n.useContext(o),l=n.useCallback(e=>{t.includes(e.keyCode)&&r(e)},[r,t]);n.useEffect(()=>(i&&a.on(e,l),()=>{a.removeListener(e,l)}),[a,i,e,l])}("keydown",[e],t,r)}},229674:(e,t,r)=>{r.d(t,{B:()=>u,O:()=>d});var n=r(652983),i=r(204829),a=r(594619),o=r(85808),l=r(496417),s=r(596085),c=r(855550);class d extends i.Vx{constructor(e){super(e),this.onKeyDownFromFullscreen=e=>{e.accept(),this.props.onKeyDown(e.event)},this.onContainerClick=e=>{e.stopPropagation()}}componentDidMount(){super.componentDidMount(),document.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.props.onKeyDown)}render(){let e={left:window.innerWidth/2-200,top:window.innerHeight/8,width:400};return n.createElement(s.BQ,{name:this.props.recordingKey||"",handleKeyDown:this.onKeyDownFromFullscreen,focusOnMount:!0},n.createElement(a.j.Dropdown,{className:`${c.cV} ${l.Hy}`,style:e,"data-testid":this.props["data-testid"]},n.createElement("div",{onClick:this.onContainerClick},this.props.children)))}}class u extends i.Vx{constructor(e){super(e),this.scrollContainerRef=n.createRef()}scrollElementAtIndexIntoView(e){if(this.props.resultCount>=10){let t=this.scrollContainerRef.current.getScrollTop(),r=32*e,n=32*e+32;r<t?this.scrollContainerRef.current.scrollTo(r):n>t+304&&this.scrollContainerRef.current.scrollTo(n-304)}}render(){let e=this.props.resultCount;return n.createElement(o.l,{ref:this.scrollContainerRef,width:400,height:32*Math.min(Math.max(e,1),10)+(e>=10?-16:8),hideScrollbar:!0,role:this.props.role,contentId:this.props.id},this.props.children,n.createElement("div",{style:{height:8}}))}}},502849:(e,t,r)=>{r.d(t,{$O:()=>E,Rt:()=>f,vy:()=>w});var n=r(652983),i=r(848080),a=r(716250),o=r(204829),l=r(518484),s=r(824801),c=r(804089),d=r(257026),u=r(869539),p=r(92410),m=r(961215),h=r(327336);function _(e){let{version:t}=(0,i.Fg)();return n.createElement(g,{...e,uiVersion:t})}class g extends o.Vx{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,a.BZ)().ee_color_management_force_canvas?(0,d.qk)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let t=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,d.qk)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:t})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new l.OW(0,0),this.setOffset=e=>{if(null!=e){let t=e.target,r=t.getBoundingClientRect(),n=new l.OW(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new l.OW(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new l.OW(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let t=this.barElement.getBoundingClientRect(),r=e.x+this.offset.x,n=e.y+this.offset.y;return r-=t.left+(this.props.handlePadding?this.props.handle/2:0),n-=t.top+(this.props.handlePadding?this.props.handle/2:0),r/=this.props.width,n/=this.props.height,r=Math.max(Math.min(r,1),0),n=Math.max(Math.min(n,1),0),new l.OW(r,n)},this.valueToPosition=e=>{let t=e.x,r=e.y;return t*=this.props.width,r*=this.props.height,t-=this.props.handlePadding?0:this.props.handle/2,r-=this.props.handlePadding?0:this.props.handle/2,new l.OW(t,r)},this.onPointerDown=o.FS(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new l.OW(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let t=this.barElement.getBoundingClientRect(),r=(e.clientX-t.left)/t.width,n=(e.clientY-t.top)/t.height;return{left:r,top:n}},playbackMetadata:e=>{this.ensureInitialized();let t=this.barElement.getBoundingClientRect(),r=e.left*t.width+t.left,n=e.top*t.height+t.top;return{clientX:r,clientY:n}}}),this.onPointerUp=o.FS(this,"pointerup",e=>{if(!this.dragging)return o.Ev;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new l.OW(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let t=this.barElement.getBoundingClientRect(),r=(e.clientX-t.left)/t.width,n=(e.clientY-t.top)/t.height;return{left:r,top:n}},playbackMetadata:e=>{this.ensureInitialized();let t=this.barElement.getBoundingClientRect(),r=e.left*t.width+t.left,n=e.top*t.height+t.top;return{clientX:r,clientY:n}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new l.OW(e.clientX,e.clientY)),!1))},this.onWheel=o.KA(this,"wheel",e=>{e.stopPropagation();let t=e.ctrlKey;this.props.wheelCallback(new l.OW(e.deltaX,e.deltaY),e.altKey,t)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=o.v1(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},t="ui3"===this.props.uiVersion?I:b,r={position:"absolute",boxShadow:`inset ${t}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0},i=this.valueToPosition(this.props.value),a={position:"absolute",boxSizing:"border-box",boxShadow:t,left:i.x,top:i.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},o=this.props.hitBoxMargin;return n.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},n.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===m.qVx.SRGB?n.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===m.qVx.DISPLAY_P3?n.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,n.createElement("div",{style:r})),this.props.children,n.createElement("div",{ref:this.handleRef,onMouseDown:c.UW,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,onLostPointerCapture:this.onPointerUp,onWheel:this.onWheel,onKeyDown:this.onKeyDown,style:a,tabIndex:0,className:h.p}),n.createElement("div",{onMouseDown:c.UW,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-o,top:-o,right:-o,bottom:-o}}))}}function f(e){return"ui3"===e?v:y}function E(){let{version:e}=(0,i.Fg)();return f(e)}g.displayName="SliderControlInner";let y=12,v=16,b="0 0 0 .6px rgba(0, 0, 0, 0.2)",I="var(--elevation-200-canvas)",T=s.Z;function w({hitBoxMargin:e,width:t,height:r,handlePadding:a,value:o,offset:l,mouseCallback:s,wheelCallback:c,keyDownCallback:d,renderCanvas:h,containerClass:g,recordingKey:E,canvasWrapperStyles:y,colorProfile:v,colorHandle:b,children:I}){let{version:w}=(0,i.Fg)(),S=(0,n.useCallback)((e,t)=>{let r=f(w);if(t.style.borderRadius=`${r/2}px`,t.style.borderStyle="solid",t.style.borderWidth="0.5px",t.style.borderColor="var(--color-icon-tertiary, white)",t.style.background="var(--color-bg, white)",b){t.style.borderColor="white",t.style.borderWidth=`${"ui3"===w?4:2}px`;let r=b(e);v===m.qVx.DISPLAY_P3&&(0,p.KK)()?t.style.backgroundImage=`url(${(0,u.oR)(r,v||m.qVx.SRGB)})`:t.style.background=T.format(r,(0,p.gr)(v||m.qVx.SRGB))}},[b,v,w]),C=f(w),O="ui3"===w?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return n.createElement(_,{hitBoxMargin:e,width:t,height:r,handle:C,handlePadding:a,value:o,offset:l,mouseCallback:s,wheelCallback:c,keyDownCallback:d,renderCanvas:h,renderHandle:S,containerClass:g,recordingKey:E,canvasWrapperStyles:{...O,...y},colorProfile:v},I)}},356827:(e,t,r)=>{let n;r.d(t,{Ap:()=>em,If:()=>n,Jy:()=>eT,M8:()=>ep,VG:()=>ev,Zf:()=>eO,dJ:()=>eg});var i=r(652983),a=r(407908),o=r(848080),l=r(87608),s=r.n(l),c=r(686926),d=r(406393),u=r(716250),p=r(337167),m=r(669277),h=r(870077),_=r(615537),g=r(204829),f=r(286206),E=r(117986),y=r(418465),v=r(618723),b=r(435613),I=r(212984),T=r(970740),w=r(399503),S=r(721154),C=r(879692),O=r(280251),A=r(614261),N=r(211960),L=r(131826),P=r(189040),R=r(83894),k=r(609346),D=r(838903),M=r(278832),F=r(686096),x=r(121108),U=r(882562),B=r(343328);r(179438);var V=r(780959),G=r(200273),H=r(70918),W=r(862610),K=r(733609),z=r(257817),Z=r(827423);r(225468);var Y=r(532444),j=r(668849),$=r(45224),q=r(811327),X=r(206370),J=r(599900),Q=r(199344),ee=r(829206),et=r(198456),er=r(33105),en=r(201305),ei=r(334549),ea=r(207973),eo=r(672971),el=r(849038),es=r(727674),ec=r(576465);r(907225);let ed=r(792207),eu=(0,B.uB)(),ep="FULLSCREEN_FILENAME_CHEVRON",em="FULLSCREEN_FILENAME_DROPDOWN";class eh extends g.Vx{constructor(){super(...arguments),this.startRenaming=g.hO(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(O.N$())}),this.submitFileName=e=>{this.props.dispatch(O.NX()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(O.NX())}}render(){return this.props.isRenaming?i.createElement($.I,{className:s()(ec.jo,{[ec.uD]:this.props.isFullHeightSidebar}),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:g.ar(this.props,"input")}):i.createElement("span",{className:s()(this.props.user?ec.vH:ec.TN,{[ec.uD]:this.props.isFullHeightSidebar}),onClick:this.startRenaming,dir:"auto","data-testid":"filename",tabIndex:0,role:"textbox",onKeyDown:e=>(0,x.Ii)({e,onClickHandler:this.startRenaming}),"aria-label":(0,T.t)("fullscreen.filename_view.file_input_title")},this.props.name)}}function e_(e){let t=(0,R.b)();return i.createElement(eh,{...e,name:(0,D.MY)(e.repo),onRename:t=>{e.dispatch(A.NX({repo:e.repo,name:t}))},isFullHeightSidebar:t})}function eg(e){let t=(0,a.I0)(),r=(0,H.xJ)(),n=(0,G.CA)(),o=(0,a.v9)(e=>e.isRenaming),l=(0,a.v9)(e=>{var t,r,n;return(0,U.M)(e.progressBarState.mode)?!(null==(t=e.openFile)?void 0:t.canEdit):null==(n=null==(r=e.mirror)?void 0:r.appModel)?void 0:n.isReadOnly}),s=(0,p.Dv)(k.b_),c=!!n&&(0,en.wv)(n,r),d=!!r&&!!n&&!!l,u=null==n&&null!=s,m=u?{type:"new-autosave-file",newAutosaveFile:s}:{type:"open-file",openFile:n,canRename:c};return i.createElement(ef,{dispatch:t,user:r,renamableFile:m,isRenaming:o,viewOnly:d,recordingKey:e.recordingKey})}function ef(e){var t;let r,n,a;let o=(0,h.Db)(k.dr),l=(0,R.b)(),{renamableFile:s}=e;"open-file"===s.type?(r=s.canRename,n=null==(t=s.openFile)?void 0:t.name):(r=!0,n=s.newAutosaveFile.name,a=s.newAutosaveFile.editorType);let c="new-autosave-file"===s.type;return i.useEffect(()=>{c&&n&&a&&(0,M.EI)(n,(0,z.On)(a))},[c,n,a]),i.createElement(eh,{...e,name:n||(0,T.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:t=>{"new-autosave-file"===s.type?o({fileKey:s.newAutosaveFile.fileKey,name:t,source:k.YK.EDITOR}):s.openFile?e.dispatch(S.NX({file:s.openFile,name:t})):(0,f.Jz)(E.k.UNOWNED,Error("Tried renaming but file does not exist"))},isFullHeightSidebar:l})}function eE({file:e}){let t=(0,a.I0)(),r=(0,N.fV)();if(!e||!(0,D.vp)(e))return null;let n=Y.V4.EDITOR_TOOLBAR_ACTION;return i.createElement("div",{className:ec.M7},i.createElement(J.oA,{branchFileKey:e.key,size:y.OD.LARGE,onClick:e=>{t(C.UW({direction:Z.Lf.TO_SOURCE,trackingContextName:n,unreadCommentCount:r}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}eh.displayName="EditableName";let ey=e=>{var t;let r=(0,m.mU)(W.RepoFiles,{repoId:e});if("loaded"!==r.status)return;let n=null==(t=r.data.repo)?void 0:t.files;if(!n)return!1;let i=n.map(e=>(0,J.TJ)(e));return i.some(e=>e===J.ty.IN_REVIEW||e===J.ty.CHANGES_REQUESTED||e===J.ty.APPROVED)},ev="Filename chevron clicked";function eb({file:e,viewOnly:t}){let r=(0,m.mU)(W.OrgJoinRequestExistence,{orgId:e.parentOrgId}),n=(0,m.mU)(W.FileWithRoleRequests,{fileKey:e.key}),o=(0,j.A2)(),l=(0,w.ug)(),s=(0,P.PH)(),d="loading"===r.status||e.parentOrgId&&!e.org,u=(0,X.n3)(e.fileRepoId),p=e.fileRepoId?u:null,h=(0,a.I0)(),_=(0,es.JQ)({file:e,viewOnly:t}),g=t&&!_;if(!e||(null==p?void 0:p.status)==="loading"||d||"loading"===n.status||g)return null;let f=!!(e.repo&&(0,D.Cq)(e,e.repo)),E=!!(0,D.vp)(e),y=E&&!!e.trashedAt;if(o&&!l){let e=s&&!s.unpublishedAt;return i.createElement("div",{className:I.cx.flex.itemsCenter.wFitContent.$},i.createElement(ei.Z,null),!e&&i.createElement(v.Ki,{direction:"x",multiple:2}),!y&&i.createElement(eo.W,{viewPermission:_,recordingKey:"fileNamePermission"}))}return i.createElement(c.E.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},i.createElement("div",{className:I.cx.flex.itemsCenter.wFitContent.$},f&&e.fileRepoId&&i.createElement(eI,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:h,branchInfo:p}),i.createElement(i.Fragment,null,i.createElement(ei.Z,null),!y&&i.createElement(eo.W,{viewPermission:_,recordingKey:"fileNamePermission"}))))}function eI(e){let t=ey(e.repoId),{branchInfo:r}=e;if(!r||"loaded"!==r.status)return null;let n=r.data.activeBranches.length;return n<1?null:i.createElement(q.I,{text:(0,T.t)("fullscreen.filename_view.branch-count",{BRANCHES:n}),onClick:()=>e.dispatch(C.gc({trackingContextName:Y.V4.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&t,indicatorStyle:ec._y})}function eT({openFile:e,user:t}){let r=(0,el.A)(),n=function(e,t){if(!(null==e?void 0:e.project))return"";let r=e.project;return r.path?r.path:(0,u.BZ)().ps_benchmark&&r.id===(null==t?void 0:t.personal_drafts_folder_id)?(0,T.t)("fullscreen.filename_view.drafts_to_move"):(0,T.t)("fullscreen.filename_view.drafts")}(e,t),a=n.length>25?n:void 0,o=(0,R.b)();return i.createElement("div",{className:n?ec.so:ec.iz,title:a},i.createElement("div",{className:s()(ec.cQ,{[ec.Ab]:o}),onClick:r,role:"link",tabIndex:0},n),!o&&i.createElement(b.n,{ariaHidden:!0,svg:ed,className:ec.tx}))}class ew extends g.Vx{constructor(e){super(e),n=i.createRef()}renderDropdownMenu(){var e,t;let{dropdownShown:r,recordingKey:n,dispatch:a}=this.props,o=!!r&&r.type===em;return i.createElement(er.y,{trackEvent:(e,t)=>{this.context.trackEvent(e,t)},dropdownTargetRect:null==(e=null==r?void 0:r.data)?void 0:e.targetRect,recordingKey:n,dispatch:a,dropdownVisible:o,activatePathOnMount:null==(t=null==r?void 0:r.data)?void 0:t.activatePathOnMount})}renderChevronWithDropdown(e,t){let r=i.createElement(i.Fragment,null,i.createElement(Q.T,{divRef:n,className:e?ec.Sf:ec.g0,svgContainerClassName:ec.li,dispatch:this.props.dispatch,showingDropdown:!!t&&this.showingDropdown(),dropdownKey:em,recordingKey:g.ar(this.props,"chevron"),dataOnboardingKey:ep,rcsHandlerId:ev,tabIndex:0,ariaLabel:(0,T.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",isUI3:this.props.isUI3}),this.renderDropdownMenu());return i.createElement("div",{className:s()({[ec.P2]:!e}),onMouseDown:e=>{var t;let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});null==(t=null==n?void 0:n.current)||t.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},r)}showingDropdown(){var e;return(null==(e=this.props.dropdownShown)?void 0:e.type)===em}render(){let{user:e,openFile:t,isRenaming:r,isUI3:a}=this.props,o=null==t?void 0:t.repo,l=!!(t&&(0,D.vp)(t)),c=!!(t&&o&&(0,D.Cq)(t,o)),u=!!t&&(0,en.wv)(t,e),p=!!this.props.user&&!!t&&!!this.props.editorIsReadOnly,m=!!t&&(0,K.isCopyExportRestricted)(t),h=!r&&e&&t&&!m&&!this.props.isLimitedDevMode,_=!eu&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return i.createElement("div",{className:s()(ec.vB,{[ec.yD]:!e}),id:"fullscreen-filename","data-onboarding-key":et.F0,onContextMenu:e=>{if(n.current){let t=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});n.current.dispatchEvent(t),e.preventDefault()}}},i.createElement("div",{className:r?ec.z8:ec.tj},(null==t?void 0:t.fileRepoId)&&(null==e?void 0:e.id)&&i.createElement(i.Fragment,null,i.createElement(d.S,{openFile:t,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),i.createElement(V.RB,{repoId:t.fileRepoId,openFileKey:t.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,_&&!a&&i.createElement("div",{className:ec.oG},i.createElement(el._,{iconClassName:ec.h6})),i.createElement(eT,{user:e,openFile:t}),!r&&l&&o&&i.createElement(ee.X,{repo:o,dispatch:this.props.dispatch,trackingContextName:Y.V4.EDITOR_TOOLBAR_ACTION}),c&&o?i.createElement(e_,{dispatch:this.props.dispatch,user:e,repo:o,canRename:u,isRenaming:r,viewOnly:p}):i.createElement(eg,{recordingKey:g.ar(this.props,"fileName")}),!r&&t&&e&&i.createElement("div",{className:ec.ph},i.createElement(eE,{file:t})),!r&&(null==t?void 0:t.team)&&i.createElement(ea.I,{openFile:t,team:t.team}),h&&this.renderChevronWithDropdown(c,t),!r&&t&&i.createElement(eb,{file:t,viewOnly:p})))}}ew.displayName="FilenameView",ew.contextType=L.E9;let eS=(0,_.ws)(F.rW),eC=(0,a.$j)(function(e){var t,r,n;let i;let a=(0,K.getPermissionsState)(e),o=(0,u.BZ)().ps_benchmark;i=o?eS(a.user,a.currentUserOrgId,a.currentTeamId):eS(a.user,a.currentUserOrgId);let l=(0,U.M)(e.progressBarState.mode)?!(null==(t=e.openFile)?void 0:t.canEdit):null==(n=null==(r=e.mirror)?void 0:r.appModel)?void 0:n.isReadOnly,s=!1;if(o){let t=e.plans;s=t.length>1}else s=(0,F.z$)(e.authedUsers.orderedIds,a);return{canRequestToEdit:!!(0,K.canRequestToEdit)(e),editorIsReadOnly:l,isLimitedDevMode:(0,j.NE)(e.selectedView)&&!(0,w.ui)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:i,hasMultipleWorkspaces:s,workspaceName:(0,F.CV)(e,i),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...a}})(ew);function eO(e){let t=(0,p.Dv)(k.b_),r="ui3"===(0,o.Fg)().version,n=(0,G.CA)(),l=(0,H.xJ)(),s=(0,a.I0)(),c=(0,K.usePermissionsState)().repos;return i.useEffect(()=>{let e=window.FigmaMobile,t=window.FigmaMobile;if(null==e?void 0:e.updateFilePermission){let r=!!n&&(0,en.wv)(n,l),i=!!n&&(0,en.MX)(n,l);e.updateFilePermission(r,i),t&&(t._move_to_project=()=>{i&&(0,en.mR)(s,n,c)()})}},[s,n,c,l]),i.createElement(eC,{recordingKey:e.recordingKey,newAutosaveFile:t,isUI3:r})}},33105:(e,t,r)=>{r.d(t,{i:()=>ec,y:()=>ep});var n,i=r(652983),a=r(407908),o=r(848080),l=r(716250),s=r(669277),c=r(970740),d=r(275286),u=r(721154),p=r(111120),m=r(151518),h=r(280251),_=r(721127),g=r(211960),f=r(131826),E=r(189040),y=r(83894),v=r(24742),b=r(838903),I=r(371353),T=r(869343),w=r(961144),S=r(706039),C=r(960685),O=r(219160),A=r(659994),N=r(999177),L=r(158774),P=r(916241),R=r(467342),k=r(961215),D=r(343328),M=r(492459),F=r(200273),x=r(761767),U=r(862610),B=r(733609),V=r(966041),G=r(456326),H=r(614860),W=r(731436),K=r(465883),z=r(818709),Z=r(605508),Y=r(532444),j=r(923895),$=r(334079),q=r(155558),X=r(599900),J=r(402191),Q=r(837607),ee=r(512169),et=r(787618),er=r(84016),en=r(686950),ei=r(667740),ea=r(807054),eo=r(464820),el=r(566834),es=r(201305);let ec="FILENAME_VIEW_MOVE_TO_PROJECT",ed=(0,D.uB)();var eu=((n=eu||{}).DISABLED="disabled",n.PUBLISH="publish",n.SHOW_UPSELL_MODAL="show_upsell_modal",n);function ep({trackEvent:e,dropdownTargetRect:t,recordingKey:r,dispatch:n,dropdownVisible:eu,activatePathOnMount:ep}){var em,eh,e_,eg,ef,eE,ey,ev;let eb=(0,a.v9)(e=>e.mirror.appModel),eI=(0,a.v9)(e=>e.selectedView),eT=(0,a.v9)(e=>(0,B.getPermissionsStateMemoized)(e)),ew=(0,a.v9)(e=>e.userStateLoaded),eS=(0,a.v9)(e=>e.openFile),eC=(0,F.CV)({useSinatraType:!0}),eO=(0,a.v9)(e=>e.repos),eA=(0,a.v9)(e=>e.teams),eN=(0,a.v9)(e=>e.currentUserOrgId),eL=(0,j.E)({currentOrgId:eN,currentTeamId:null}),eP="ui3"===(0,o.Fg)().version,eR=(0,y.b)(),ek=(0,er.IU)(),eD=(0,s.mU)(U.FileManagePermission,{fileKey:(null==eS?void 0:eS.key)||""}),eM=(0,a.v9)(V.VL),eF=(0,a.v9)(V.eo);(0,M.GF)();let ex=(0,a.v9)(V.cm),eU=(0,s.mU)(U.BranchOpenMergeRequest,{branchFileKey:(null==eS?void 0:eS.key)||""}),eB=(0,E.PH)(),eV=ek&&(0,l.BZ)().piper_templates&&(0,l.BZ)().dse_editor_templates_v1,eG=i.useMemo(()=>{if(eS&&"loaded"===eL.status)return(0,O.W7)(eL.data,eS.key)},[eS,eL]),eH=(0,a.v9)(V.BR),eW=(0,a.v9)(e=>e.mirror.appModel.topLevelMode),eK=(0,eo.ZW)(eS,eH),ez=(0,T._k)(),eZ=(0,g.fV)(),eY=(0,v.WT)(),ej=(0,v.uh)()===v.Vb.CAN_PUBLISH,e$=k.O$1.uiState().isRecovery.getCopy(),eq=i.useMemo(()=>ew&&ex&&(null==eS?void 0:eS.canEdit)?eF?"publish":"show_upsell_modal":"disabled",[eF,ex,eS,ew]),eX=(0,P.uq)(),{colorProfilePreference:eJ}=(0,R.oQ)(),eQ=(0,R.WN)(eJ),e0=(0,$.f)();if(!eS||!eu)return null;let e1="loaded"===eD.status&&!!(null==(eh=null==(em=eD.data)?void 0:em.file)?void 0:eh.canDelete),e2="loaded"===eL.status&&(0,O.Mi)(eL.data,eN),e3=eI.editorType,e4="whiteboard"!==e3,e6=eT.user,e8=!!(e4&&(0,b.vp)(eS)),e9="loaded"===eU.status&&(null===eU.data.file||eU.data.file&&(0,X.TJ)(eU.data.file)===X.ty.MERGED),e5=e8&&("loaded"!==eU.status||e9),e7=(0,B.isFileFigjamDisabled)(eS,eT)||(0,B.isOrgUserExternallyRestrictedFromState)(eT),te=e6&&eS.canManage,tt=e6&&eS.canDelete,tr=!!(e8&&eS.trashedAt),tn=tr&&!e5,ti=eB&&eB.profile.entityType===K.Se.TEAM,ta=e6&&tt&&!ti,to=(0,es.wv)(eS,e6),tl=!!eG,ts=eS.project,tc=ts&&(0,B.canCreateFileLG)(ts,eT,eS.editorType),td=tc?e8?(0,c.t)("fullscreen.filename_view.duplicate-as-new"):(0,c.t)("fullscreen.filename_view.duplicate"):(0,c.t)("fullscreen.filename_view.duplicate-to-drafts"),tu=null,tp=(0,l.BZ)().ps_benchmark;tp?ts&&""!==ts.path&&(tu=ts):tu=eS.teamId?ts:null;let tm=tp&&eS.folderId===(null==e6?void 0:e6.personal_drafts_folder_id),th=eM&&!ex?(0,c.t)("fullscreen.filename_view.published-up-to-date"):(0,c.t)("fullscreen.filename_view.publish-styles-and-components"),t_=eS.canEdit&&!!eS.thumbnailGuid,tg=(null==(eE=null==(ef=null==(eg=null==(e_=eL.data)?void 0:e_.currentUser)?void 0:eg.baseOrgUser)?void 0:ef.fileBrowserPreferences)?void 0:eE.orderedSidebarSections)??[],tf=(0,O.zF)((null==(ev=null==(ey=eL.data)?void 0:ey.currentUser)?void 0:ev.userSidebarSections)??[],tg),tE=tf.find(e=>e.id===(null==eG?void 0:eG.resource.sidebarSectionId)),ty=()=>{eV?L.Gr.triggerAction("publish-slides-template"):n(_.K4({type:el.A}))},tv=()=>{let e=eS.teamId&&eA[eS.teamId];n(_.K4({type:Q.nU,data:{afterFileMove:ty,team:e||null}}))},tb=()=>{"show_upsell_modal"===eq?tv():"publish"===eq&&ty()},tI=(e,t)=>{if(!eC)return;let r={entrypoint:"editor",favoriteId:null==eG?void 0:eG.resource.id,sectionId:t,file:eC,fileBrowserEntryPoint:!1};e?n(d.u9(r)):n(d.$P(r))},tT=()=>{let e={name:"",newResourceForSection:{resourceId:eS.key,isFavorited:!0,resourceType:x.IK.FILE}};n(d.pv(e))},tw=!ed&&"design"===eI.editorType&&eS.canEdit,tS=(0,J.w7)((0,I.P)(ez,Y.V4.EDITOR_TOOLBAR,eW),{appModel:eb,selectedView:eI}),tC=(0,J.w7)((0,I.i)(ez,Y.V4.EDITOR_TOOLBAR,eW,eZ),{appModel:eb,selectedView:eI}),tO=(e,t)=>e?t:[],tA=[...tC,...tO(e8,tS),{separator:!0,displayText:""},...tO(!ed&&!e$,[{disabled:!(0,Z.jA)(eb,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,ei.UO)(eb.activeCanvasEditModeType)?(0,c.t)("fullscreen.filename_view.version-history-hide"):(0,c.t)("fullscreen.filename_view.version-history-show"),callback:()=>{n(p.kp()),(0,ei.UO)(eb.activeCanvasEditModeType)?n((0,G.SU)()):n((0,G.RS)({source:Y.V4.EDITOR_TOOLBAR}))}}]),...tO(!!eY,[(0,en.K)({dispatch:n,fileKey:(null==eY?void 0:eY.fileKey)||"",templateName:(null==eY?void 0:eY.name)||""})]),...tO(ej,[(0,en.l)({dispatch:n,fileKey:eS.key,isPublished:!!eY,source:"filename-context-menu"})]),...tO(!ed&&!(e4&&e8)&&"whiteboard"!==e3&&!ek,[{disabled:"disabled"===eq,recordingKey:"publishVersion",displayText:th,callback:tb}]),...tO(!!eV,[{recordingKey:"publishSlidesTemplate",displayText:(0,c.t)("fullscreen.filename_view.publish-template"),callback:tb}]),...tO(eK,[{recordingKey:"viewFileAnalytics",displayText:(0,c.t)("fullscreen.filename_view.file_analytics"),callback:()=>{n((0,_.K4)({type:ea.X,data:{fileKey:eS.key,entrypoint:C.i.FileView}}))}}]),...tO(e4&&!e$,[{disabled:!e6,recordingKey:"exportSelectedExportables",displayText:(0,c.t)("fullscreen.filename_view.export"),shortcut:eb.keyboardShortcuts&&(0,Z.bQ)(eb.keyboardShortcuts,"export-selected-exportables"),callback:()=>{L.Gr.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...tO(!ed&&!!e0&&(!e2||!!tl)&&!tm,[{separator:!0,displayText:""},{displayText:tl?(0,c.t)("favorited_resources.indicate_section_prefix")+": "+(tE&&""!==tE.name?tE.name:(0,c.t)("sidebar.starred")):(0,c.t)("favorited_resources.add_to_sidebar"),children:(()=>{let e=[];return 0===tf.length&&e.push({recordingKey:"favorite-custom",displayText:(0,c.t)("sidebar.starred"),isChecked:!1,callback:()=>tT()}),tf.map(t=>{e.push({recordingKey:"favorite-custom",displayText:""===t.name?(0,c.t)("sidebar.starred"):t.name,isChecked:!!tE&&tE.id===t.id,callback:()=>tI(!!tE&&tE.id===t.id,t.id)})}),e})()}]),...tO(!ed&&!!e0&&!!tl&&!tm,[{recordingKey:"favorite-custom-remove",displayText:(0,c.t)("favorited_resources.remove_from_sidebar"),callback:()=>tI(!0,null==tE?void 0:tE.id)}]),{separator:!0,displayText:""},...tO(!e8,tS),{separator:!0,displayText:""},...tO(tw,[(0,w.Q)(eX,eQ)]),{separator:!0,displayText:""},...tO(!ed&&!tm,[{disabled:!ew||e7,recordingKey:"duplicate",displayText:td,callback:()=>{n(p.kp());let e=(0,D.w9)(eS,eT);if(e){n(_.K4({type:et.yd,data:{team:e,resource:H.Q3.FILE,action:z.XH.DUPLICATE_FILES,editorType:eS.editorType||"design",currentPlan:S.V.Plan.STARTER,upsellPlan:S.V.Plan.PRO}}));return}L.Gr.dispatchIfSaved(u.OM({file:eS,checkOssSalesExperiment:eH}))}}]),...tO(!tr,[{disabled:!to,recordingKey:"rename",displayText:e8?(0,c.t)("fullscreen.filename_view.rename-branch"):(0,c.t)("fullscreen.filename_view.rename"),callback:()=>{n(p.kp()),n(h.N$())}}]),...tO(!ed&&tn,[{disabled:!te,displayText:"Restore",callback:()=>{n(p.kp()),eC&&n(u.V_({fileKeys:{[eS.key]:eC},userInitiated:!0}))}}]),...tO(!ed&&!!tu,[{disabled:!1,displayText:(0,c.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(tu){let e;e=(0,l.BZ)().ps_benchmark?(0,N.n3)(tu.id,tu.orgId??null,tu.teamId,eT):(0,W.DS)(tu.id,tu.orgId??null),n(p.YQ({url:e}))}}}]),...tO(!ed&&!e8,[{disabled:!ta,recordingKey:"moveToProject","data-onboarding-key":ec,displayText:(0,c.t)("fullscreen.filename_view.move-to-project"),callback:(0,es.mR)(n,eS,eO)}]),...tO(!e0&&(tl||!e2)&&!tm,[{recordingKey:"favorite",displayText:tl?(0,c.t)("fullscreen.filename_view.unfavorite_label"):(0,c.t)("fullscreen.filename_view.favorite_label"),callback:()=>tI(!!tl)}]),...tO(!ed&&!tr&&!tm&&e1,[{disabled:!ta,recordingKey:"delete",displayText:e8?(0,c.t)("fullscreen.filename_view.archive-branch"):(0,c.t)("fullscreen.filename_view.delete"),callback:e8?()=>{n(p.kp()),eC&&(n(u.c1({fileKeys:{[eS.key]:eC},userInitiated:!0})),e("Branch Archived",{fileKey:eS.key,fileRepoId:eS.fileRepoId}))}:()=>{n(p.kp());let e=(0,b.XB)(eS,eO);if(e&&(0,b.tj)(eS,e)){let t=(0,B.getDeleteReposPayload)({[e.id]:!0},eT,!0);n(m.di({filesByKey:{},reposById:t}))}else{let e=(0,A.l5)({[eS.key]:!0},eT,!0,{[eS.key]:e1});n(m.di({filesByKey:e}))}}}]),...tO(!ed&&tr,[{disabled:!te,displayText:(0,c.t)("fullscreen.filename_view.delete-branch"),callback:()=>{n(p.kp()),n(_.K4({type:q.M,data:{fileName:eS.name,onConfirm:()=>n(m.BI({fileKeys:{[eS.key]:!0},userInitiated:!0}))}}))}}]),...tO(!!t_,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,c.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{n(u.MS({file_key:eS.key,thumbnail_guid:null}))}}])];return i.createElement(f.Ui,{name:Y.V4.EDITOR_FILENAME_DROPDOWN},i.createElement(ee.z,{items:tA,parentRect:t,showPoint:!eP,recordingKey:r,dispatch:n,allowCodegenOptions:"design"===eI.editorType,onSelectItem:e=>{e.callback&&e.callback("",{},n)},activatePathOnMount:ep,lean:eR?"right":void 0}))}},727674:(e,t,r)=>{r.d(t,{EP:()=>F,JQ:()=>U,MJ:()=>G,Pz:()=>B,dF:()=>H,ig:()=>x,l5:()=>M});var n,i=r(652983),a=r(407908),o=r(600486),l=r(716250),s=r(669277),c=r(782051),d=r(970740),u=r(597837),p=r(131826),m=r(961215),h=r(187436),_=r(196532),g=r(648276),f=r(70918),E=r(761767),y=r(862610),v=r(436649),b=r(801998),I=r(898080),T=r(733609),w=r(211879),S=r(220958),C=r(225468),O=r(532444),A=r(668849),N=r(547002),L=r(63039),P=r(950601),R=r(201305),k=r(308657),D=r(513023);let M="edit-button-onboarding",F="edit_button_upgrading_to_edit";var x=((n=x||{}).EDIT_BUTTON_LOADING="editButtonLoading",n.EDIT_BUTTON="editButton",n.PRO_REQUEST_UPGRADE="proRequestUpgrade",n.ORG_REQUEST_UPGRADE="orgRequestUpgrade",n.REQUEST_EDIT_VIEW="requestEditView",n.VIEW_ONLY="viewOnly",n);function U(e){var t,r,n,c,u,p,m,C,O,N,L,P,k;let D=e.file,x=(0,a.v9)(e=>e.loadingState),U=(0,a.v9)(e=>e.orgUsersByOrgId),B=(0,a.v9)(e=>e.teamUserByTeamId),V=(0,a.v9)(e=>e.teams),G=(0,a.v9)(e=>e.showEditButton),H=(0,a.v9)(e=>(0,T.getPermissionsStateMemoized)(e)),W=H.user,K=(0,i.useMemo)(()=>!!D&&(0,T.isCopyExportRestricted)(D),[D]),z=(0,a.v9)(({openFile:e})=>{var t;return null==(t=null==e?void 0:e.org)?void 0:t.name}),Z=function(e,t){let r=(0,f.xJ)();return(0,i.useCallback)(n=>{let i={file_key:n.key,hasRoleAccess:(0,T.hasFileAccess)(n.key,S.V.VIEWER,e,!0),link_access:n.linkAccess},a=n.parentOrgId&&t.orgUsers[n.parentOrgId],l=r&&a&&a[r.id];n.parentOrgId?(i.account_type=l&&l.design_paid_status,i.parent_org_id=n.parentOrgId):n.teamId&&(i.team_id=n.teamId),(0,o.L9)("Edit Button Events",{edit_button_event:"click",...i})},[r,e,t])}(H,U),Y=(0,h.zM)(),j=(0,a.v9)(e=>{let t=e.responsiveContent.sequence;return!!(null==t?void 0:t.steps.length)&&"onboardingKey"in t.steps[0]&&t.steps[0].onboardingKey===M}),$=(0,s.mU)(y.FileWithRoleRequests,{fileKey:D.key}),q=(0,s.mU)(y.OrgJoinRequestExistence,{orgId:D.parentOrgId}),X=!1,J=(0,g.c)(),Q=D.canEdit,ee=(0,R.tX)(D),et=(0,_.KF)(D),er=(0,A.A2)(),en=D.canAccessFullDevMode,ei="loading"===q.status||D.parentOrgId&&!D.org;if(ei)return null;if("loaded"===q.status&&(X=(null==(r=null==(t=D.org)?void 0:t.inviteWhitelist)?void 0:r.guestInviteSetting)===w.lz.REQUIRE_APPROVAL&&!!q.data.orgJoinRequest),!X&&(0,v.hg)(x,F))return{type:"editButtonLoading"};if(!X&&G){let e=async()=>{await J(D,F),Z(D)};return{type:"editButton",upgrade:e,shouldSuppressHoverTooltip:j}}if(e.viewOnly){let t,r,i;let a=D.parentOrgId&&U.orgUsers[D.parentOrgId],o=W&&a&&a[W.id],s=D.teamId&&B[D.teamId],h=W&&s&&s[W.id],_=!!(o&&(0,T.isOrgUserRestricted)(o,D.editorType)),g=!!(h&&(0,T.isTeamUserRestricted)(h,D.editorType)),f=D.teamId&&V[D.teamId],y=g&&!D.parentOrgId;(0,l.BZ)().exp_pro_vr_migrate_org?(t=D.editorType===E.gg.DESIGN?null==(n=D.currentPartialOrgUser)?void 0:n.designAccountTypeRequest:null==(c=D.currentPartialOrgUser)?void 0:c.whiteboardAccountTypeRequest,r=D.editorType===E.gg.DESIGN?null==(u=D.currentTeamUser)?void 0:u.designAccountTypeRequest:null==(p=D.currentTeamUser)?void 0:p.whiteboardAccountTypeRequest):(t=D.editorType===E.gg.DESIGN?null==(m=D.currentPartialOrgUser)?void 0:m.designOrgAccountTypeRequest:null==(C=D.currentPartialOrgUser)?void 0:C.whiteboardOrgAccountTypeRequest,r=D.editorType===E.gg.DESIGN?null==(O=D.currentTeamUser)?void 0:O.designProAccountTypeRequest:null==(N=D.currentTeamUser)?void 0:N.whiteboardProAccountTypeRequest);let v=(null==t?void 0:t.status)==="pending",S=(null==r?void 0:r.status)==="pending",A=!1;if((null==Y?void 0:Y.updateHasPendingEditRequest)&&Y.updateHasPendingEditRequest(!1),W&&!(0,I.jj)({folder_id:D.folderId,team_id:D.teamId},H)){if(h&&f&&(0,b.Ho)(y,S,f,W))return{type:"proRequestUpgrade",file:e.file,teamUser:h};if(_&&!v&&!(0,T.isOrgUserExternallyRestricted)(W,o?o.org_id:"")&&!(er&&Q&&!en))return{type:"orgRequestUpgrade",editorType:D.editorType,fileKey:D.key,orgUser:o,orgId:D.parentOrgId};if("loading"===$.status)return null;if("loaded"===$.status){let e=W.id;(null==(L=$.data.file)?void 0:L.fileRoleRequests.find(t=>t.requesterUserId===e))&&(A=!0,(null==Y?void 0:Y.updateHasPendingEditRequest)&&Y.updateHasPendingEditRequest(!0))}if(!y&&!_&&!Q&&!A&&!X&&!(0,T.isOrgUserExternallyRestricted)(W,o?o.org_id:"")&&!((null==(k=null==(P=D.org)?void 0:P.inviteWhitelist)?void 0:k.guestInviteSetting)===w.lz.BANNED&&!D.currentPartialOrgUser)&&(!(0,R.ot)(D)||ee))return{type:"requestEditView",fileKey:D.key,userId:W.id}}return X?i=(0,d.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:z||""}):A&&(i=(0,d.t)("fullscreen.toolbar.pending-edit-request-tooltip")),{type:"viewOnly",isRestrictedView:K,isDisabledView:et,pendingToolTipMessage:i,pendingRequest:v||S||A||X}}return null}function B(e){let t=(0,a.v9)(e=>e.openFile);return t?i.createElement(V,{file:t,viewOnly:e.viewOnly,variant:e.variant,recordingKey:e.recordingKey,hideViewOnlyText:e.hideViewOnlyText}):null}function V(e){let t=U({file:e.file,viewOnly:e.viewOnly});return t?i.createElement(G,{viewPermission:t,variant:e.variant,recordingKey:e.recordingKey,hideViewOnlyText:e.hideViewOnlyText}):null}function G({viewPermission:e,variant:t,recordingKey:r,hideViewOnlyText:n}){switch(e.type){case"editButtonLoading":return i.createElement("div",{className:D.r$},i.createElement(u.z,{"aria-label":(0,d.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:t,recordingKey:r},i.createElement("span",{className:D.hd},i.createElement(d.Tx,{id:"fullscreen.toolbar.edit-file-button"})),i.createElement(c.TK,{className:D._W})));case"editButton":{let n={"data-tooltip":(0,d.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":C.fR.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return e.shouldSuppressHoverTooltip&&(n={"data-onboarding-key":M}),i.createElement(p.Ui,{name:O.V4.FILE_EDIT_BUTTON},i.createElement("div",{"data-onboarding-key":M},i.createElement(u.z,{variant:t,onClick:e.upgrade,recordingKey:r,...n},i.createElement(d.Tx,{id:"fullscreen.toolbar.edit-file-button"}))))}case"requestEditView":return i.createElement(N.t,{fig_file_key:e.fileKey,user_id:e.userId,variant:t,recordingKey:r});case"orgRequestUpgrade":return i.createElement(p.Ui,{name:O.V4.FILE_ORG_REQUEST_UPGRADE_BUTTON},i.createElement(L.Bp,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:t,recordingKey:r}));case"proRequestUpgrade":return i.createElement(p.Ui,{name:O.V4.FILE_PRO_REQUEST_UPGRADE_BUTTON},i.createElement(L.p$,{file:e.file,teamUser:e.teamUser,entryPoint:P.aT.EDIT_FILE,variant:t,recordingKey:r}));case"viewOnly":return i.createElement(k.W,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,pendingRequest:e.pendingRequest,variant:t,hideViewOnlyText:n})}}function H(){return(0,a.v9)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&m.O$1.uiState().isRecovery.getCopy())}},803905:(e,t,r)=>{r.d(t,{I8:()=>eg,N_:()=>ed,mT:()=>eu});var n=r(652983),i=r(407908),a=r(168562),o=r(959448),l=r(848080),s=r(87608),c=r.n(s),d=r(559341),u=r(172497),p=r(239299),m=r(448501),h=r(807012),_=r(9247),g=r(716250),f=r(337167),E=r(810373),y=r(362886),v=r(746443),b=r(546829),I=r(600802),T=r(618723),w=r(293351),S=r(85808),C=r(525699),O=r(970740),A=r(966285),N=r(111120),L=r(280251),P=r(864974),R=r(804089),k=r(493359),D=r(121108),M=r(961215),F=r(189796),x=r(102170),U=r(200273),B=r(941485),V=r(198486),G=r(794609),H=r(4818),W=r(154831),K=r(276537),z=r(225468),Z=r(289926),Y=r(432152),j=r(13155),$=r(527314),q=r(387209),X=r(199344),J=r(951123),Q=r(247057),ee=r(503656),et=r(842857),er=r(996448),en=r(332224),ei=r(300834);let ea="multiplayer-nickname-dropdown",eo=r(328630),el=r(244573),es=(0,F.uB)(),ec=(0,u.F)(en.mKx);function ed(e,t,r,n,i,a,o){if(!i)return;let l=e.sessionID,s=l===t,c=a&&a.sessionID===t;if(s&&c)o();else if(n){let t=i.observingSessionID===l||i.sessionID===l?-1:e.sessionID,n=-1!==i.observingSessionID,a=i.observingSessionID!==l&&i.sessionID!==l;n&&r((0,G.ie)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:i.observingSessionID,multiplayerSessionID:i.sessionID}})),a&&(r((0,G.ie)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:l,multiplayerSessionID:i.sessionID}})),r(P.v({aware_of_observation_mode:!0}))),r(L.SC({...i,observingSessionID:t}))}else{M.B9x.observeUser(l);let e=i.observingSessionID!==l&&i.sessionID!==l;e&&r(P.v({aware_of_observation_mode:!0}))}}function eu(e){let t=(0,U.CA)(),{user:r,multiplayer:a,dropdownShown:o}=e,l=(0,i.I0)(),s=(0,i.v9)(e=>"prototype"===e.selectedView.view),c=(0,B.n2)(),d=(0,B.SR)(),u=(0,y.pP)(),p=n.useCallback(e=>{ed(e,null==d?void 0:d.sessionID,l,s,a,c,u)},[null==d?void 0:d.sessionID,l,s,a,c,u]),m=s?null:t;return r?n.createElement(n.Fragment,null,!es&&m&&r&&n.createElement(q.T,{fileKey:m.key}),n.createElement(ep,{dropdownShown:o,multiplayer:a,user:r,editingFile:m,onUserClick:p})):n.createElement(n.Fragment,null,!es&&m&&r&&n.createElement(q.T,{fileKey:m.key}),n.createElement(ef,{dropdownShown:o,multiplayer:a,user:r,editingFile:m,onUserClick:p}))}function ep(e){let{multiplayer:t,user:r,onUserClick:i,dropdownShown:a,editingFile:o}=e,l=(0,n.useMemo)(()=>{let e=t.allUsers.find(e=>e.sessionID===t.sessionID);return e||null},[t.allUsers,t.sessionID]);(0,n.useEffect)(()=>{},[t,r]);let s=(0,k.bI)((null==o?void 0:o.key)||"").enabled;return n.createElement("div",{className:ei.i1},n.createElement(er.ij,null),l&&n.createElement(eg,{dropdownShown:a,multiplayer:t,currentUser:l,onUserClick:i}),o&&n.createElement(et.T,{user:r,editingFile:o,isFileInWorkshop:s}))}let em=(0,n.forwardRef)(function(e,t){let{query:r,setQuery:i}=e,l=(0,_.D)(r),s=n.useRef(null),[d,u]=n.useState(!1);return(n.useEffect(()=>{s.current&&r!==l&&(s.current.scrollWidth>s.current.clientWidth?u(!0):u(!1))},[l,r]),(0,g.BZ)().live_feedback_large_meetings)?n.createElement("div",{ref:t,className:ei.RE},n.createElement("div",{className:ei.RL},n.createElement(C.r,{svg:el,"aria-label":(0,O.t)("fullscreen.accessibility.search_icon")},n.createElement(a._,null))),n.createElement(w.Q,{ref:s,placeholder:(0,O.t)("collaboration.spotlight.menu.search.placeholder"),className:c()({[ei.eK]:!0,[ei.ON]:d}),value:r,onClick:R.UW,onChange:e=>{let t=e.target;i(t.value),(0,R.UW)(e)},onKeyDown:e=>{"Escape"===e.key&&(i(""),(0,R.UW)(e))},spellCheck:!1}),!!r&&n.createElement("button",{className:ei.zA,onClick:e=>{e.stopPropagation(),i("")},"aria-label":(0,O.t)("search.sidebar_search_clear")},n.createElement("div",{className:ei.FZ},n.createElement(C.r,{svg:eo},n.createElement(o.J,null))))):null});function eh(e){let{targetRect:t,arrowOffsetFromRectLeft:r,currentUser:a,peopleList:o,userListRenderer:s,onUserClick:c,onKeyDown:u}=e,p=(0,n.useRef)(null),m=(0,n.useRef)(null),[_,g]=(0,f.KO)(v.Bh),[E,w]=(0,f.KO)(v.bH),[C,L]=n.useState(200),P="ui3"===(0,l.Fg)().version,R=(0,i.I0)(),k=(0,b.Kp)(),D=Math.min(window.innerHeight-k-22,450);n.useLayoutEffect(()=>{if(p.current&&m.current){let e=P?8:0;L(D-p.current.offsetHeight-m.current.offsetHeight-2*e)}},[P,D]);let M=(0,n.useCallback)(()=>{g(!0)},[g]),{start:F,cancel:x}=(0,V.K)(M),U=(0,n.useCallback)(()=>{x(),g(!1)},[x,g]),G=(0,y.Qn)(),H=(0,n.useCallback)(()=>{G(),U(),w(!0),R(N.kp())},[U,R,w,G]),W=(0,y.pP)(),K=(0,n.useCallback)(()=>{W(),R(N.kp())},[R,W]),z=(0,B.n2)(),Y=z&&e.currentUser.sessionID===z.sessionID,$=Y?n.createElement(I.Us,{onClick:K,className:ei.lm},n.createElement(O.Tx,{id:"collaboration.spotlight.button.stop"})):n.createElement(T.DF,{onClick:H,className:ei.lm,onMouseOver:()=>{F(300)},onMouseLeave:U},n.createElement(O.Tx,{id:"collaboration.spotlight.tooltip.spotlight_me"})),[X,J]=n.useState(""),{searchResults:Q}=function(e){let{query:t,usersToSearch:r}=e,[i,a]=n.useState(r),o=n.useRef(!1),l=(0,h.zS)(),s=n.useRef(!1),c=s.current,u=n.useCallback(async e=>{if(""===e)a(r);else{o.current=!1;let t=await (0,ee._)(e,r),n=o.current;n||(a(t.map(e=>e.item)),c||(l("Multiplayer Tools User Search",{otherUserSessionsCount:r.length}),s.current=!0))}},[c,l,r]),p=(0,d.Z)(u,200);return n.useEffect(()=>(p(t),()=>{p.cancel(),o.current=!0}),[p,t,r]),{searchResults:i}}({query:X,usersToSearch:o});return n.createElement(j.AQ,{className:ei.sW,targetRect:t,maxHeight:D,maxWidth:ec,lean:"center",arrowOffsetFromRectLeft:r,onKeyDown:u,showPoint:!P,disableDropdownScrollContainer:!0,propagateCloseClick:!0},n.createElement("div",{ref:p,className:ei.Lu},n.createElement(Z.V,{user:a,isOverflow:!0}),n.createElement("div",{className:ei.hy},$,n.createElement(q.p,null))),o.length>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:ei.kr}),n.createElement(em,{ref:m,query:X,setQuery:J}),n.createElement(S.l,{width:ec-16,maxHeight:C},n.createElement(A.R,{autofocus:!0,label:(0,O.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:s,onSelect:e=>{e.length&&(c(e[0]),R(N.kp()))},initiallyNotSelected:!0,customClassName:ei.lh},Q))))}let e_="multiplayer-tools-dropdown";function eg(e){let{multiplayer:t,dropdownShown:r,currentUser:a,onUserClick:o}=e,l=(0,n.useRef)(null),s=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useRef)(null),_=(0,n.useRef)(null),g=(0,i.I0)(),[b,I]=n.useState(!1),T=null==r?void 0:r.type,w=T===e_,S=(0,n.useMemo)(()=>t.allUsers.filter(e=>e.sessionID!==(null==a?void 0:a.sessionID)),[t.allUsers,a]),[C,A]=(0,f.KO)(v.Bh);C&&!w&&A(!1);let L=(0,x.Py)(),{users:P,overflowUsers:k}=(0,x.TS)(S,null,!1,L),M=(0,n.useMemo)(()=>[...P,...k],[k,P]),F=(0,h.zS)(),U=(0,n.useCallback)(e=>{if((0,R.UW)(e),!s.current)return;d.current=s.current.getBoundingClientRect();let t=(null==r?void 0:r.type)===e_;g(N.jO({type:e_})),t||F("Multiplayer Tools Opened",{currentUserSessionID:a.sessionID,otherUserSessionsCount:M.length})},[a.sessionID,g,null==r?void 0:r.type,M.length,F]),V=(0,B.n2)(),G=V&&V.sessionID!==a.sessionID?V:null,W=(0,i.v9)(H.Q),K=(0,y.LG)(),Y=(0,y.H1)(),j=n.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(r,{hasCursor:i}){let a=(0,E.r2)(()=>{let e=`/files${W}/user/${r.userID}`;m.default.redirect(e,p.YO?void 0:"_blank")}),o=[],l=t.sessionNominatedByCurrentUser===r.sessionID,s=t.presenterSessionID===r.sessionID;return s||(l?o.push({text:n.createElement(O.Tx,{id:"collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"}),onClick:()=>{(0,x.PT)(r)&&Y(r.sessionID,t)},key:"cancel-ask-to-spotlight"}):o.push({text:n.createElement(O.Tx,{id:"collaboration.spotlight.tooltip.ask_to_spotlight"}),onClick:()=>{(0,x.PT)(r)&&K(r.sessionID,t)},key:"ask-to-spotlight"})),o.push({text:n.createElement(O.Tx,{id:"avatar.tooltip.view_profile"}),onClick:e=>{a(e)},key:"view-profile"}),n.createElement(Z.V,{key:r.sessionID,user:r,isOverflow:!0,isInListbox:!0,containsCursor:i,secondaryActions:o,fullHeightSidebarsEnabled:e.fullHeightSidebarsEnabled})}}),[t,W,K,Y,e.fullHeightSidebarsEnabled]),$=w||b,q=M.length+1,Q=e.fullHeightSidebarsEnabled?ei.fX:ei.u0;return n.createElement("span",{className:Q,ref:l},n.createElement(J.n,{featured:G,quickAccess:P,maxVisibleUsers:3,onUserClick:o,fullHeightSidebarsEnabled:e.fullHeightSidebarsEnabled}),n.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=d.current&&(null==r?void 0:r.type)===e_,"data-tooltip-type":z.fR.TEXT,"data-tooltip":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":s.current&&_.current?s.current.offsetWidth/2-_.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":s.current&&l.current?l.current.clientHeight/2-s.current.clientHeight/2:0,className:c()({[ei.yt]:!0,[ei.A4]:e.fullHeightSidebarsEnabled&&k.length>0,[ei.g3]:e.fullHeightSidebarsEnabled&&0===k.length,[ei.hv]:w,[ei.ch]:!w&&b}),ref:s,onMouseOverCapture:e=>{I(!0),(0,R.UW)(e)},onMouseDownCapture:U,onMouseLeave:()=>{I(!1)},onKeyDown:e=>{(0,D.Ii)({e,onClickHandler:e=>{U(e)},onEscapeHandler:()=>{var e;null==(e=null==s?void 0:s.current)||e.blur()}})},onClick:R.UW},n.createElement("span",{key:a.sessionID,ref:u,className:ei.JU},n.createElement(Z.V,{user:a,key:a.sessionID,isOverflow:!1,fullHeightSidebarsEnabled:e.fullHeightSidebarsEnabled})),n.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ei.FY},k.length>0&&n.createElement("span",{className:c()({[ei.j7]:!0,[ei.JU]:!0,[ei.hv]:w,[ei.ch]:!w&&b}),style:{minWidth:q<10?8:q<100?15:22}},`${q}`),n.createElement(X.B,{divRef:_,className:c()({[ei.Sf]:!0,[ei.JU]:!0,[ei.hv]:w,[ei.ch]:!w&&b}),showingDropdown:$}))),(null==r?void 0:r.type)===e_&&_.current&&n.createElement(eh,{targetRect:_.current.getBoundingClientRect(),arrowOffsetFromRectLeft:_.current?_.current.offsetWidth/2+1:0,currentUser:a,onUserClick:o,userListRenderer:j,peopleList:M,onKeyDown:e=>{"Tab"===e.key&&g(N.kp())}}))}function ef(e){let{multiplayer:t,user:r,onUserClick:i,dropdownShown:a,editingFile:o}=e,l=(0,n.useMemo)(()=>{let e=t.allUsers.find(e=>e.sessionID===t.sessionID);return e||null},[t.allUsers,t.sessionID]);(0,n.useEffect)(()=>{},[t,r]);let s=(0,k.bI)((null==o?void 0:o.key)||"").enabled;return n.createElement("div",{className:ei.i1},n.createElement(er.ij,null),n.createElement(ey,{dropdownShown:a,multiplayer:t,currentUser:l,onUserClick:i,editingFile:o}),o&&n.createElement(et.T,{user:r,editingFile:o,isFileInWorkshop:s}))}let eE="multiplayer-users-dropdown";function ey(e){let{editingFile:t,multiplayer:r,dropdownShown:a,currentUser:o,onUserClick:l}=e,s=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,i.I0)(),h=(0,n.useCallback)(e=>{(0,R.UW)(e),s.current&&(c.current=s.current.getBoundingClientRect(),u(N.jO({type:eE})))},[u]),_=null==a?void 0:a.type,g=(0,n.useMemo)(()=>_===ea&&d.current?d.current.getBoundingClientRect():null,[_]),f=(0,$.LD)(),v=(0,i.v9)(H.Q),b=(0,K.oo)(),I=(null==t?void 0:t.key)??null,{usersNotInCall:T}=(0,W.OP)(I,!0),w=r.allUsers,S=(0,x.Py)(),C=(0,i.v9)(e=>I&&e.voice.activeCall[I])||!1,{users:L,overflowUsers:P}=(0,x.TS)(b?T:w,o,C,S),k=n.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),M=(0,y.LG)(),F=(0,y.H1)(),U=n.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:t}){let i=(0,E.r2)(()=>{let t=`/files${v}/user/${e.userID}`;m.default.redirect(t,p.YO?void 0:"_blank")}),a=[],o=r.sessionNominatedByCurrentUser===e.sessionID,l=r.presenterSessionID===e.sessionID;return l||(o?a.push({text:n.createElement(O.Tx,{id:"collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"}),onClick:()=>{(0,x.PT)(e)&&F(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):a.push({text:n.createElement(O.Tx,{id:"collaboration.spotlight.tooltip.ask_to_spotlight"}),onClick:()=>{(0,x.PT)(e)&&M(e.sessionID,r)},key:"ask-to-spotlight"})),a.push({text:n.createElement(O.Tx,{id:"avatar.tooltip.view_profile"}),onClick:e=>{i(e)},key:"view-profile"}),n.createElement(Z.V,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:t,secondaryActions:a})}}),[r,v,M,F]);return n.createElement("span",{className:ei.rC,"data-onboarding-key":"multiplayer-avatars"},L.map((e,t)=>{let r=n.createElement(Z.V,{user:e,onboardingKey:k(t),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===(null==o?void 0:o.sessionID)?n.createElement("span",{key:e.sessionID,ref:d},r):r}),P.length>0&&n.createElement(n.Fragment,null,n.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=c.current&&(null==a?void 0:a.type)===eE,className:ei.qg,ref:s,onMouseDown:h,onKeyDown:e=>{(0,D.Ii)({e,onClickHandler:e=>{h(e)},onEscapeHandler:()=>{var e;null==(e=null==s?void 0:s.current)||e.blur()}})},onClick:R.UW},n.createElement(Y.h,{className:ei.OP,text:`${P.length}`})),(null==a?void 0:a.type)===eE&&s.current&&n.createElement($.SY,{targetRect:s.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&u(N.kp())}},n.createElement(A.R,{autofocus:!0,label:"More multiplayer users",renderer:U,onSelect:e=>{e.length&&(l(e[0]),u(N.kp()))},customClassName:ei.lh},P))),(null==a?void 0:a.type)===ea&&g&&n.createElement(j.AQ,{targetRect:g,maxHeight:f,className:ei.SZ,propagateCloseClick:!0},n.createElement(Q.t,null)))}},93213:(e,t,r)=>{r.d(t,{Dy:()=>s,E8:()=>w,Eu:()=>k,FS:()=>A,Fd:()=>I,NC:()=>R,TC:()=>L,W9:()=>b,XM:()=>S,a8:()=>c,ee:()=>P,gv:()=>y,jq:()=>C,nY:()=>v,oG:()=>N,q0:()=>O,rd:()=>T,x0:()=>d});var n,i=r(716250),a=r(764850),o=r(752784),l=r(321336);r(402828);var s=((n=s||{})[n.TOOL=0]="TOOL",n[n.ACTION=1]="ACTION",n[n.FLYOUT=2]="FLYOUT",n[n.LABEL=3]="LABEL",n[n.TEXT_BUTTON=4]="TEXT_BUTTON",n);function c(e){return"action"in e}function d(e){return"divider"in e}let u=[a.Nw4.LAYOUT,a.Nw4.WHITEBOARD_LAYOUT,a.Nw4.SLIDE_DECK,a.Nw4.RASTER,a.Nw4.GRADIENT,a.Nw4.TEXT,a.Nw4.COMMENTS],p=u.concat([a.Nw4.VECTOR]),m=u.concat([a.Nw4.VECTOR,a.Nw4.PLACE_IMAGE]),h=[a.Nw4.VECTOR],_=[a.Nw4.PLACE_IMAGE],g=[a.Nw4.PREVIEW,a.Nw4.BRANCHING,a.Nw4.COMPARE_CHANGES,a.Nw4.HISTORY],f=[a.Nw4.LAYOUT,a.Nw4.TEXT,a.Nw4.RASTER,a.Nw4.GRADIENT,a.Nw4.PREVIEW,a.Nw4.COMMENTS,a.Nw4.BRANCHING,a.Nw4.HISTORY,a.Nw4.COMPARE_CHANGES],E={type:2,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:a.UAh.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:a.UAh.SCALE,recordingKey:"toolScale"}],editModes:m,recordingKey:"moveFlyout"},y={type:2,name:"shape-flyout",editModes:u,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:a.UAh.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:a.UAh.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:a.UAh.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:a.UAh.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:a.UAh.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:a.UAh.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},v={type:0,tool:a.UAh.COMMENTS,action:"set-tool-comments",editModes:u.concat([a.Nw4.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},b="insert",I={type:1,action:"component-insert",editModes:u,recordingKey:"toolResourceInsert",onboardingKey:b,isActive:o.Hf},T=[{type:0,tool:a.UAh.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:g,recordingKey:"toolDefault"},E,{type:2,name:"region-flyout",editModes:u,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:a.UAh.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:a.UAh.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:a.UAh.SLICE,recordingKey:"toolSlice"}]},y,{type:2,name:"pen-flyout",editModes:p,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:a.UAh.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:a.UAh.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:0,tool:a.UAh.VECTOR_BEND,action:"set-tool-bend",editModes:h,recordingKey:"toolBend"},{type:0,tool:a.UAh.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:h,recordingKey:"toolPaintBucket"},{type:0,tool:a.UAh.TYPE,action:"set-tool-type",editModes:u,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},I,{type:0,tool:a.UAh.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:f,recordingKey:"toolHand"},v,{type:3,label:"toolbar-place-image",editModes:_,recordingKey:"toolPlaceOneImage"},{type:4,action:"place-all-images",editModes:_,recordingKey:"toolPlaceAllImages"},{type:4,action:"discard-all-images",editModes:_,recordingKey:"toolDiscardAllImages"},{type:4,action:"leave-edit-mode",editModes:h,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}],w=T.filter(e=>e!==I).concat([I]),S={type:1,action:"focus-mode-component-set-toggle",editModes:[a.Nw4.LAYOUT],recordingKey:"focusModeVariantsToggle",featureFlags:["ce_multi_edit"],isActive:()=>a.O$1.uiState().focusModeState.getCopy()===a.zrQ.COMPONENT_SET},C=[S,{type:1,action:"create-section-from-selection",editModes:u,recordingKey:"toolCreateSection"},{type:1,action:"request-edit-mode-via-toolbar",editModes:u,recordingKey:"toolEditMode"},{type:1,action:"reset-symbol",editModes:u,recordingKey:"toolResetSymbol"},{type:2,name:"symbol-flyout",editModes:u,recordingKey:"createSymbolFlyout",flyoutHideOptionsIfSingleEnabledAction:!0,flyoutShowItemIcons:!1,onboardingKey:"create-symbol",children:[{action:"create-symbol",recordingKey:"toolCreateSymbol",onboardingKey:"create-symbol"},{action:"create-multiple-symbols",recordingKey:"toolCreateMultipleSymbols",onboardingKey:"create-symbol"},{action:"create-multiple-symbols-and-state-group",recordingKey:"toolCreateMultipleSymbolsAndStateGroup",onboardingKey:"create-symbol"}]},{type:1,action:"add-variant",editModes:u,recordingKey:"addVariant"},{type:1,action:"mask-selection",isActive:()=>a.O$1.editorState().selectionIsMask.getCopy()===a.XMT.ON,editModes:u,recordingKey:"toolMaskSelection"},{type:2,name:"boolean-flyout",editModes:u,children:[{action:"live-boolean-union",recordingKey:"toolBooleanUnion"},{action:"live-boolean-subtract",recordingKey:"toolBooleanSubtract"},{action:"live-boolean-intersect",recordingKey:"toolBooleanIntersect"},{action:"live-boolean-xor",recordingKey:"toolBooleanXor"},{divider:!0},{action:"flatten-selection",recordingKey:"toolFlatten"}],recordingKey:"booleanFlyout"},{type:1,action:"crop-image",editModes:u,recordingKey:"toolCropImage",isAvailable:()=>!(0,i.BZ)().eai_image_tools},{type:2,name:"editor-ai-image-tools",editModes:u,recordingKey:"editorAiTools",children:[{action:"crop-image",recordingKey:"toolCropImage",featureFlags:["eai_image_tools"]},{action:"expand-image",recordingKey:"toolExpandImage",featureFlags:["eai_image_tools"]},{action:"upscale-image",recordingKey:"toolUpscaleImage",featureFlags:["eai_image_tools"]},{action:"remove-background",recordingKey:"toolRemoveBackground",featureFlags:["eai_image_tools"]}]},{type:1,action:"text-edit-hyperlink",isActive:()=>a.O$1.editorState().selectionIsHyperlink.getCopy(),editModes:[a.Nw4.LAYOUT,a.Nw4.TEXT],recordingKey:"editHyperlink"},{type:1,action:"add-image-description",propertyValue:!0,editModes:u,recordingKey:"addImageDescription"},{type:1,action:"add-selection-ready-status",editModes:[...u,a.Nw4.DEV_HANDOFF],recordingKey:"toolAddReadyStatus"},{type:1,action:"remove-selection-ready-status",editModes:[...u,a.Nw4.DEV_HANDOFF],isActive:()=>!0,recordingKey:"toolRemoveReadyStatus"}],O=[{type:0,tool:a.UAh.SELECT,action:"set-tool-default-figjam",nonEditorsAllowed:!0,onlyShowInReadOnly:!0,editModes:[...u,a.Nw4.PREVIEW,a.Nw4.HISTORY],recordingKey:"toolDefault"},{type:0,tool:a.UAh.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,onlyShowInReadOnly:!0,editModes:[...u,a.Nw4.PREVIEW,a.Nw4.HISTORY],recordingKey:"toolHand",onboardingKey:l.kd}],A=[{type:0,tool:a.UAh.SELECT,action:"set-tool-default-dev-handoff",editModes:[a.Nw4.DEV_HANDOFF,a.Nw4.DEV_HANDOFF_HISTORY],recordingKey:"toolDefault",nonEditorsAllowed:!0,onlyShowInReadOnly:!1,newFileDisabled:!0,iconOverride:r(371109),isWideForEditors:!0},{type:0,tool:a.UAh.MEASURE,action:"set-tool-measure",editModes:[a.Nw4.DEV_HANDOFF],recordingKey:"toolMeasure",nonEditorsAllowed:!1,newFileDisabled:!1,onlyShowInReadOnly:!1,hideInExtension:!0,onboardingKey:"tool-measurements-onboarding",featureFlags:["dt_lego_annotations"]},{type:0,tool:a.UAh.ANNOTATE,action:"set-tool-annotate",editModes:[a.Nw4.DEV_HANDOFF],recordingKey:"toolAnnotate",nonEditorsAllowed:!1,newFileDisabled:!1,onlyShowInReadOnly:!1,hideInExtension:!0,onboardingKey:"tool-annotations-onboarding",featureFlags:["dt_lego_annotations"]},{type:0,tool:a.UAh.COMMENTS,action:"set-tool-comments",editModes:[a.Nw4.DEV_HANDOFF],recordingKey:"toolComment",nonEditorsAllowed:!0,newFileDisabled:!0,onlyShowInReadOnly:!1}],N="prototype-view-flyout",L="prototype-view-present-dropdown-option",P={type:2,name:"prototype-view-flyout",editModes:u.concat([a.Nw4.DEV_HANDOFF,a.Nw4.PREVIEW]),nonEditorsAllowed:!0,loggedOutAllowed:!0,recordingKey:"prototypeViewFlyout",flyoutDoNotStyleActiveItem:!0,children:[{action:"present-as-prototype",actionOnFlyoutItemClick:"set-prototype-view-present",isActive:()=>a.O$1.prototypingEditorState().prototypeViewMode.getCopy()===a.X9P.PRESENT,recordingKey:"prototypeViewPresent",onboardingKey:L},{action:"toggle-inline-preview",actionOnFlyoutItemClick:"set-prototype-view-preview",isActive:()=>a.O$1.prototypingEditorState().prototypeViewMode.getCopy()===a.X9P.PREVIEW,recordingKey:"prototypeViewPreview"}],onboardingKey:N},R={type:1,action:"toggle-inline-html-preview",iconOverride:r(240382),recordingKey:"prototypeViewSitesPreview"},k={type:2,name:"slides-presentation-flyout",editModes:u.concat([a.Nw4.SLIDE_DECK,a.Nw4.PREVIEW]),nonEditorsAllowed:!0,loggedOutAllowed:!0,recordingKey:"slidesPresentationFlyout",flyoutDoNotStyleActiveItem:!0,children:[{action:"present-slides-audience-view",actionOnFlyoutItemClick:"set-slides-audience-view",recordingKey:"audienceViewPresent",isActive:()=>a.O$1.prototypingEditorState().prototypeViewMode.getCopy()===a.X9P.PRESENT},{action:"toggle-inline-preview",actionOnFlyoutItemClick:"set-prototype-view-preview",recordingKey:"prototypeViewPreview",featureFlags:["piper_presents","piper_inline_preview"]},{action:"present-slides-presenter-view",actionOnFlyoutItemClick:"set-slides-presenter-view",recordingKey:"presenterViewPresent",featureFlags:["piper_presents"]}]}},86429:(e,t,r)=>{r.d(t,{mc:()=>j,rB:()=>$,so:()=>Y});var n=r(652983),i=r(407908),a=r(848080),o=r(87608),l=r.n(o),s=r(766034),c=r(807012),d=r(365653),u=r(716250),p=r(810373),m=r(388899),h=r(204829),_=r(564380),g=r(594619),f=r(970740),E=r(111120),y=r(83894),v=r(574620),b=r(158774),I=r(441678),T=r(961215),w=r(784667),S=r(638082),C=r(809377),O=r(572333),A=r(794609),N=r(257817),L=r(225468),P=r(605508),R=r(668849),k=r(45224),D=r(811327),M=r(199344),F=r(512169),x=r(158314),U=r(321336),B=r(425285),V=r(906334);let G=r(446845),H=r(833781),W=r(845441),K=r(148476),z="zoom-input-dropdown";function Z({targetRect:e,showingZoomDropdown:t,toggleZoomMenu:r,recordingKey:o}){let l=(0,c.zS)();n.useEffect(()=>{l("View Menu Opened")},[l]);let s=(0,B.yD)(),p="ui3"===(0,a.Fg)().version,m=(0,O.mA)((0,I.Y)().activeCanvasCurrentZoom),h=(0,O.mA)((0,w.tZ)().activeCanvasPixelPreview),_=(0,O.mA)((0,I.Y)().activeCanvasRetinaMode),g=(0,d.c)(e=>e.mirror.appModel.keyboardShortcuts),f=(0,i.v9)(e=>!e.mirror.appModel.isReadOnly),E=(0,i.v9)(e=>!!e.user),y=(0,i.v9)(e=>(0,R.NE)(e.selectedView)),C=e=>(0,i.v9)(t=>!!t.mirror.appModel[e]),L="design"===s,k="design"===(0,N.On)(s),D=(0,i.v9)(e=>e.mirror.appModel.prototypeCanvasUiVisible),M=(0,O.mA)(T.O$1.editorPreferences().showPropertyLabels),F=(0,O.mA)(T.O$1.editorPreferences().showFrameGrids),x=(0,O.mA)((0,I.Y)().showFrameGridsViewOnly),U=f?"showFrameGrids":"showFrameGridsViewOnly",V=(0,O.mA)((0,w.tZ)().snapToDotGrid),G=(0,O.mA)((0,w.tZ)().snapToPixelGrid),H=(0,O.mA)((0,w.tZ)().showDotGrid),W=(0,O.mA)((0,w.tZ)().renderGrid),K=[{type:"ZOOM_IN",shortcut:(0,P.bQ)(g,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,S.xF)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,P.bQ)(g,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,S.xF)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,P.bQ)(g,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,P.bQ)(g,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:h,recordingKey:"activeCanvasPixelPreview",hidden:!L&&!y,disabled:(0,S.xF)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,P.bQ)(g,"toggle-pixel-preview"),isChecked:!h,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:h&&!_,shortcut:_?void 0:(0,P.bQ)(g,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:h&&_,shortcut:_?(0,P.bQ)(g,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:k?"PIXEL_GRID":"DOT_GRID",shortcut:(0,P.bQ)(g,k?"toggle-grid":"toggle-show-dot-grid"),recordingKey:k?"renderGrid":"showDotGrid",isChecked:k?W:H,disabled:!(0,S.xF)("toggle-grid")},{type:k?"SNAP_TO_PIXEL_GRID":"SNAP_TO_DOT_GRID",shortcut:(0,P.bQ)(g,k?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:L?"snapToPixelGrid":"snapToDotGrid",isChecked:k?G:V,disabled:!(0,S.xF)(L?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:y},{type:"LAYOUT_GRIDS",shortcut:(0,P.bQ)(g,"toggle-shown-layout-grids"),recordingKey:U,hidden:!k||!E,isChecked:f?F:x,disabled:(0,S.xF)(U)},{type:"RULERS",shortcut:(0,P.bQ)(g,"toggle-rulers"),recordingKey:"renderRulers",hidden:!k,isChecked:(0,O.mA)((0,w.tZ)().renderRulers),disabled:(0,S.xF)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!k||!E,disabled:(0,S.xF)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,P.bQ)(g,"toggle-outlines"),isChecked:(0,O.mA)((0,I.Y)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,O.mA)((0,I.Y)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,O.mA)((0,I.Y)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,P.bQ)(g,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!C("hideMultiplayerCursors"),disabled:(0,S.xF)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:M,hidden:!p},{type:"separator"},{type:"COMMENTS",shortcut:(0,P.bQ)(g,"toggle-show-comments"),recordingKey:"showComments",isChecked:C("showComments"),disabled:(0,S.xF)("showComments")},{type:"ANNOTATIONS",recordingKey:"showAnnotations",isChecked:(0,O.mA)(T.O$1.uiState().showAnnotations),disabled:!(0,S.xF)("toggle-show-annotations"),hidden:!y||!(0,u.BZ)().dt_lego_annotations},{type:"PROTOTYPING",shortcut:(0,P.bQ)(g,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!L||f&&!(0,A.vO)(),isChecked:D},{type:"SINGLE_PROPERTIES_PANEL",recordingKey:"singlePropertiesPanel",hidden:!(0,u.BZ)().prototype_modality,isChecked:(0,A.vO)()}],z=n.useCallback(e=>{T.iTB.setCanvasZoomScale(e/100)},[]);return n.createElement(Y,{targetRect:e,showingZoomDropdown:t,toggleZoomMenu:r,recordingKey:o,allowCodegenOptions:k,currentZoom:100*m,dropdownItems:K,onSelectDropdownItem:(e,t)=>{switch(e){case"ZOOM_IN":b.Gr.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":b.Gr.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":b.Gr.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":T.iTB.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":T.iTB.setCanvasZoomScale(1);break;case"ZOOM_TO_200":T.iTB.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":v.Ml.get("toggle-pixel-preview","toolbar")(t);break;case"PIXEL_GRID":v.Ml.get("toggle-grid","toolbar")(t);break;case"SNAP_TO_PIXEL_GRID":v.Ml.get("toggle-snapping-to-pixels","toolbar")(t);break;case"SNAP_TO_DOT_GRID":v.Ml.get("toggle-snapping-to-dots","toolbar")(t);break;case"DOT_GRID":v.Ml.get("toggle-show-dot-grid","toolbar")(t);break;case"LAYOUT_GRIDS":v.Ml.get("toggle-shown-layout-grids","toolbar")(t);break;case"MULTIPLAYER_CURSORS":v.Ml.get("toggle-multiplayer-cursors","toolbar")(t);break;case"PROPERTY_LABELS":v.Ml.get("toggle-show-property-labels","toolbar")(t);break;case"PROTOTYPING":v.Ml.get("toggle-prototyping-info","toolbar")(t);break;case"SINGLE_PROPERTIES_PANEL":b.Gr.triggerAction("toggle-prototyping-tab-merge");break;case"RULERS":v.Ml.get("toggle-rulers","toolbar")(t);break;case"SLICES":v.Ml.get("toggle-show-slices","toolbar")(t);break;case"COMMENTS":{let e=v.Ml.get("toggle-show-comments","toolbar");e(t);break}case"ANNOTATIONS":{let e=v.Ml.get("toggle-show-annotations","toolbar");e(t);break}case"OUTLINES":b.Gr.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":b.Gr.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":b.Gr.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":h&&b.Gr.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":h||b.Gr.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),_&&b.Gr.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":h||b.Gr.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),_||b.Gr.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}r()},onSubmitCustomZoom:z})}function Y({targetRect:e,showingZoomDropdown:t,recordingKey:r,allowCodegenOptions:o,currentZoom:l,dropdownItems:s,displayAboveTarget:c,onSelectDropdownItem:d,onSubmitCustomZoom:u}){let m=(0,i.I0)(),_="ui3"===(0,a.Fg)().version,y=n.useMemo(()=>({ZOOM_IN:(0,f.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,f.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,f.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,f.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,f.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,f.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,f.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,f.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,f.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,f.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,f.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,f.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,f.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,f.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,f.t)("fullscreen_actions.toggle-show-property-labels"),RULERS:(0,f.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,f.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,f.t)("fullscreen_actions.toggle-show-comments"),ANNOTATIONS:(0,f.t)("fullscreen_actions.toggle-show-annotations"),OUTLINES:(0,f.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,f.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,f.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,f.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,f.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,f.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,f.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,f.t)("fullscreen_actions.single-properties-panel")}),[]),v=n.useMemo(()=>{let e=t=>{if("separator"===t.type)return{displayText:"",disabled:!0,separator:!0};let{children:r,...n}=t,i={displayText:y[t.type]};switch(t.type){case"ZOOM_TO_50":i.isChecked=50===l;break;case"ZOOM_TO_100":i.isChecked=100===l;break;case"ZOOM_TO_200":i.isChecked=200===l}return r&&(i.children=r.map(e)),{...n,...i}};return s.map(e)},[l,s,y]),b=n.useCallback((e,t)=>{d(e.type,t)},[d]);return n.createElement(F.z,{items:v,onSelectItem:b,parentRect:e,showPoint:!_,dispatch:m,recordingKey:h.ar(r,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:o,displayAboveTarget:c},n.createElement("div",{style:{height:2}}),n.createElement("div",{className:V.a3,onKeyDown:e=>{(e.keyCode===p.sr.ENTER||e.keyCode===p.sr.ESCAPE)&&t&&m(E.kp())}},n.createElement(k.I,{className:V.qH,placeholderValue:`${Math.round(l)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let t=-1;try{t=parseInt(e,10)}catch(e){}t>0&&u(t)},recordingKey:h.ar(r,"dropdown","zoomInput")})),n.createElement(g.j.Separator,null))}let j=n.memo(function({recordingKey:e}){let t=(0,B.yD)(),r=(0,S.xF)("zoom-out"),i=(0,S.xF)("zoom-in"),a=(0,O.mA)((0,I.Y)().activeCanvasCurrentZoom),o=100*a;return"whiteboard"===t?n.createElement($,{type:"FULL",recordingKey:e,currentZoom:o,Dropdown:Z,dropdownId:z,canZoomIn:i,canZoomOut:r,onZoomIn:()=>b.Gr.triggerAction("zoom-in"),onZoomOut:()=>b.Gr.triggerAction("zoom-out")}):n.createElement($,{type:"DROPDOWN_ONLY",recordingKey:e,currentZoom:o,Dropdown:Z,dropdownId:z})});function $({type:e,recordingKey:t,currentZoom:r,Dropdown:a,...o}){let c=(0,i.I0)(),d=n.useRef(null),u=(0,C.x)(o.dropdownId),[p,g]=(0,n.useState)(null),E=(0,y.b)(),v=n.useCallback(()=>{var e;g((null==(e=null==d?void 0:d.current)?void 0:e.getBoundingClientRect())||null)},[d]);n.useEffect(()=>(v(),s.i.addListener(v),window.addEventListener("resize",v),()=>{s.i.removeListener(v),window.removeEventListener("resize",v)}),[v]);let b=n.useCallback(()=>{v(),u.toggle({hasOwnEscKeyHandler:!1})},[u,v]),I=u.showing&&p&&n.createElement(a,{targetRect:p,showingZoomDropdown:u.showing,toggleZoomMenu:u.toggle,recordingKey:t});switch(e){case"FULL":{let e=!("canZoomIn"in o)||o.canZoomIn,i=!("canZoomOut"in o)||o.canZoomOut,a="onZoomIn"in o?o.onZoomIn:m.ZT,s="onZoomOut"in o?o.onZoomOut:m.ZT;return n.createElement("div",{role:"none",className:l()(V.Rg,V.Rr),onClick:e=>e.stopPropagation()},n.createElement(x.hU,{recordingKey:h.ar(t,"zoomOutButton"),className:l()({[V.WO]:!0,[V.am]:i}),svg:H,fallbackSvg:K,disabled:!i,onClick:s,"data-tooltip-type":L.fR.LOOKUP,"data-tooltip":"zoom-out"}),n.createElement(D.I,{ariaLabel:(0,f.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:b,recordingKey:h.ar(t,"zoomButton"),selected:u.showing,className:l()(V.c,u.showing&&V.bB),onboardingKey:U.cy,"data-tooltip-type":L.fR.TEXT,"data-tooltip":(0,f.t)("fullscreen.zoom_menu.zoom_view_options")},n.createElement("div",{className:V.o0,"data-testid":"zoom-amount",ref:d},Math.round(r),"%"),n.createElement("div",{className:V.CM,ref:d},n.createElement(M.T,{dispatch:c,dropdownKey:z,showingDropdown:u.showing,dataTestId:"zoom-menu-chevron",className:u.showing?V.O3:V.xx,svgContainerClassName:V.eP,toggleOnClick:!0}))),I,n.createElement(x.hU,{recordingKey:h.ar(t,"zoomInButton"),className:l()({[V.m6]:!0,[V.am]:e}),svg:G,fallbackSvg:W,disabled:!e,onClick:a,"data-tooltip-type":L.fR.LOOKUP,"data-tooltip":"zoom-in"}))}case"DROPDOWN_ONLY":{let e=E?V.sL:V.Dl,i=E?u.showing?V.Bp:V.tF:u.showing?V.O4:V.Og,a=E?u.showing?V.My:V.sN:V.o0,o=n.createElement(_.sq,{className:i,onClick:b,recordingKey:h.ar(t,"zoomButton"),forwardedRef:E?d:void 0},n.createElement("div",{className:a,"data-testid":"zoom-amount"},Math.round(r),"%"),n.createElement("div",{className:l()(V.CM,{[V.Oi]:E&&u.showing}),ref:d},n.createElement(M.T,{dispatch:c,dropdownKey:z,showingDropdown:u.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:E})));return n.createElement("div",{className:V.Rg,role:"none",onClick:e=>e.stopPropagation()},n.createElement(D.I,{selected:u.showing,className:e,onboardingKey:U.cy,"data-tooltip-type":L.fR.TEXT,"data-tooltip":(0,f.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:b,onClickForKeyDownOnly:!0,fullHeightSidebarsEnabled:E},o),I)}default:return null}}},868277:(e,t,r)=>{r.d(t,{C:()=>m,h:()=>p});var n=r(652983),i=r(407908),a=r(19516),o=r(970740),l=r(864974),s=r(455694),c=r(157607),d=r(318649),u=r(912754);let p="text-panel-container";function m(e){let[t,r]=n.useState(!1),m=(0,s.s)(),h=(0,i.I0)();return((0,a.O)(()=>{async function t(){var t;let n=null==(t=e.getNodeForViewportFocus)?void 0:t.call(e),i=e.getNodeToSelect();i?(await (0,u.vl)({navigate:m,guidToFocus:null==n?void 0:n.guid,guidToSelect:i.guid}),r(!0),h(l.v({format_text_step_shown:!0}))):e.skip()}queueMicrotask(t)}),t)?n.createElement(d.AY,{dismissModal:e.onClose,disableHighlight:!0,targetKey:p,title:e.title||n.createElement(o.Tx,{id:"tooltips_plus_onboarding.text_formatting.title"}),trackingContextName:"Tooltips+ Text Formatting Step",lowerLeftText:e.lowerLeftText,onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,arrowPosition:c.xI.RIGHT_BODY,shouldCenterArrow:c.Ht.FALLBACK,pointsTo:"designPanel",secondaryCtaText:e.secondaryCtaText},e.bodyText||n.createElement(o.Tx,{id:"tooltips_plus_onboarding.text_formatting.description"})):null}},912754:(e,t,r)=>{r.d(t,{Mp:()=>g,Q3:()=>v,bv:()=>c,ev:()=>y,pt:()=>E,vl:()=>b});var n,i=r(158774),a=r(640723),o=r(641052),l=r(271774),s=r(673541),c=((n=c||{})[n.FORWARD=0]="FORWARD",n[n.BACKWARD=1]="BACKWARD",n);let d="product page",u=e=>e?"add your own":"heirloom tomato",p=e=>e?["browse our shop","we\u2019re farmers","sustainability is"]:["organic ginger","sweet onion","order summary","we\u2019re farmers","grown in"],m=e=>e?"browse our shop":"heirloom tomato",h=e=>e?["basket"]:["organic ginger","sweet onion","order summary","we\u2019re farmers","grown in"];function _(e,t){return t.some(t=>e.toLowerCase().startsWith(t.toLowerCase()))}function g(e,t,r){let n;if((null==r?void 0:r.type)===t)return r;let i=null;try{i=e.getCurrentPage()}catch(e){if(e.message!==s.j)throw e}return i&&(0,o.fw)(e,i,e=>{if(e.type===t)return n=e,"stop"}),n}function f({nodeType:e,sceneGraph:t,preferredName:r,backupNames:n,ancestorName:i}){let a;let l=null;try{l=t.getCurrentPage()}catch(e){if(e.message!==s.j)throw e}if(!l)return a;let c=[];return((0,o.fw)(t,l,t=>{if(t.type===e&&_(t.name,[r])&&(!i||i&&function(e,t){let r=e.parentNode;for(;r&&!r.name.toLowerCase().startsWith(t.toLowerCase());)r=r.parentNode;return!!(null==r?void 0:r.name.toLowerCase().startsWith(t.toLowerCase()))}(t,i)))return a=t,"stop";n&&t.type===e&&_(t.name,n)&&c.push(t)}),a)?a:c.length>0?c[0]:void 0}function E(e,t){let r=f({nodeType:"TEXT",sceneGraph:e,preferredName:u(t),backupNames:p(t),ancestorName:t?void 0:d});return r||g(e,"TEXT")}function y(e,t){let r=f({nodeType:"TEXT",sceneGraph:e,preferredName:m(t),backupNames:h(t),ancestorName:t?void 0:d});if(r&&"TEXT"===r.type){let t=(0,o.G_)(e,r.guid);if((null==t?void 0:t.type)==="FRAME")return t}return g(e,"FRAME")}function v(e,t){let r;if(!t)return;let n=f({nodeType:"FRAME",sceneGraph:e,preferredName:"landing page"});return n&&(0,o.im)(e,t.guid,e=>{if(e.guid===n.guid)return r=n,"stop"}),r}async function b({navigate:e,guidToFocus:t,guidToSelect:r}){a.MO(),await e((0,l.Yc)({nodeId:t||r,alwaysPan:!1,minSizePx:t?200:32})),a.cY([r]),i.Gr.commit()}},269783:(e,t,r)=>{r.d(t,{D5:()=>U,IJ:()=>M,Jn:()=>K,Kt:()=>W,L0:()=>z,XZ:()=>k,al:()=>F,eE:()=>V,mn:()=>D,no:()=>G,yd:()=>R,z8:()=>B});var n=r(652983),i=r(407908),a=r(391320),o=r(204829),l=r(518484),s=r(970740),c=r(954109),d=r(918445),u=r(158774),p=r(961215),m=r(269075),h=r(840568),_=r(492459),g=r(321909),f=r(225468),E=r(516714),y=r(477168),v=r(158314),b=r(509982),I=r(838247),T=r(435189),w=r(640634),S=r(689693),C=r(725061),O=r(157607),A=r(271931),N=r(357221),L=r(957086);let P=r(295799);function R(e,t){return{type:p.M6J.EXPRESSION,resolvedType:p.QC$.BOOLEAN,value:{expressionFunction:p.XVA.IS_TRUTHY,expressionArguments:[(0,N.SZ)(e.resolvedType,t)]}}}function k(e,t,r,o){let{mapVariableIdToTypedValue:s}=o??{},u=(0,i.I0)(),p=(0,i.v9)(e=>e.variablePickerShown),{updateVariableConsumption:m,clearVariableConsumption:h}=(0,N.tN)(e),_=(0,n.useCallback)(e=>{r?r(e):e?u((0,c.Pz)({item:e,callback:r=>{s?m(s(e,r)):m((0,N.SZ)(t,r))}})):h()},[r,u,m,t,h,s]);return[p.isShown&&"variable-picker-fields"===p.type&&(0,a.qt)(p.fields,e)&&(null==o?void 0:o.metadata)===p.metadata,(0,n.useCallback)((r,n)=>{let i=r.getBoundingClientRect(),a=window.innerWidth+-228,s=(null==n?void 0:n.initialPosition)??new l.OW(a,i.bottom);u((0,d.V)({type:"variable-picker-fields",isShown:!0,initialPosition:s,fields:e,resolvedType:t,requestedTypes:null==o?void 0:o.requestedTypes,currentFieldValue:null==n?void 0:n.currentFieldValue,onVariableSelected:_,metadata:null==o?void 0:o.metadata,variableFilters:null==o?void 0:o.variableFilters}))},[e,t,null==o?void 0:o.metadata,null==o?void 0:o.requestedTypes,null==o?void 0:o.variableFilters,u,_]),_]}function D(e,t,r){let a=(0,i.I0)(),o=(0,i.v9)(e=>e.variablePickerShown),s=(0,n.useCallback)(n=>{if(n)a((0,c.Pz)({item:n,callback:n=>{let i=(0,N.SZ)(r,n),a=m.y2.user("alias-variable",()=>p.pZy.setVariableValueForMode(e,t,i));a&&u.Gr.triggerAction("commit")}}));else{let r=m.y2.user("unalias-variable",()=>p.pZy.detachVariableValueForMode(e,t));r&&u.Gr.triggerAction("commit")}},[a,e,t,r]);return[o.isShown&&"variable-picker-alias"===o.type&&o.variableID===e&&o.modeID===t,(0,n.useCallback)((n,i)=>{let o=n.getBoundingClientRect();a((0,d.V)({type:"variable-picker-alias",isShown:!0,initialPosition:new l.OW(o.left,o.bottom),initialView:null==i?void 0:i.initialView,variableID:e,modeID:t,resolvedType:r,onVariableSelected:s}))},[e,t,r,a,s]),s]}function M({children:e,...t}){return n.createElement(x,{...t,children:e})}function F(e){var t,r;let n=(0,h.qD)(e);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&(null==(t=n.value)?void 0:t.alias))return w.BB(null==(r=n.value)?void 0:r.alias);if("type"in n){if(n.type===p.M6J.ALIAS)return n.value;if(n.type===p.M6J.FONT_STYLE){let e=n.value.asFloat??n.value.asString??null;return F(e)}if((null==n?void 0:n.type)===p.M6J.EXPRESSION&&n.value.expressionFunction===p.XVA.STRINGIFY&&1===n.value.expressionArguments.length)return F(n.value.expressionArguments[0])}}return null}function x({fields:e,children:t,resolvedType:r,requestedTypes:i,onVariableSelected:a}){let{consumedVariable:o}=(0,N.tN)(e),l=F(o),s=(0,_.SW)(l??void 0),c=!!s&&(0,T.Eh)(s),[d,u,p]=k(e,r,a,{requestedTypes:i}),m=(0,n.useMemo)(()=>({showBindingUI:u,isShowingBindingUI:d,onVariableSelected:p,boundVariableId:l,isBoundVariableDeleted:c}),[u,d,p,l,c]);return n.createElement(b.e.Provider,{value:m},t)}function U({variableID:e,modeID:t,children:r,resolvedType:i}){let[a,o,l]=D(e,t,i),s=(0,_.Zx)(e,t),c=F(s??null),d=(0,_.SW)(c??void 0),u=!!d&&(0,T.Eh)(d),p=(0,n.useMemo)(()=>({showBindingUI:o,isShowingBindingUI:a,onVariableSelected:l,boundVariableId:c,isBoundVariableDeleted:u}),[o,a,l,c,u]);return n.createElement(b.e.Provider,{value:p},r)}function B({children:e,resolvedType:t,variableValue:r,onVariableValueChange:i,onVariableSelected:a}){let o=n.useRef(),[s,c]=n.useState(!1),d=(0,n.useCallback)(()=>{c(!1)},[]),u=(0,n.useCallback)(e=>{let t=e.getBoundingClientRect();o.current=new l.OW(t.left,t.bottom),c(!0)},[]),m=r.type===p.M6J.ALIAS?r.value:void 0,h=(0,_.SW)(m),g=!!h&&(0,T.Eh)(h),f=(0,n.useMemo)(()=>({showBindingUI:u,isShowingBindingUI:s,boundVariableId:m??null,isBoundVariableDeleted:g}),[u,s,m,g]),E=(0,_.ut)(m);return n.createElement(b.e.Provider,{value:f},e,s?r.resolvedType!==p.QC$.COLOR?n.createElement(Y,{disabledVariableIds:new Set,boundVariable:null,initialPosition:o.current,resolvedType:t,onVariableSelected:a,onClose:d,pickerType:"create-modal",recordingKey:"variableBindingsDropdown"}):r.type===p.M6J.COLOR?n.createElement(y.zH,{disabledVariableIds:new Set,title:"",color:r.value,boundVariable:null,initialPosition:o.current,recordingKey:"variableBindingsDropdown",onChange:e=>i({type:p.M6J.COLOR,resolvedType:p.QC$.COLOR,value:{...e,a:1}}),onVariableChange:a,onClose:d}):r.type===p.M6J.ALIAS?n.createElement(y.zH,{disabledVariableIds:new Set,title:"",color:E.value,boundVariable:h,initialPosition:o.current,recordingKey:"variableBindingsDropdown",onChange:e=>i({type:p.M6J.COLOR,resolvedType:p.QC$.COLOR,value:{...e,a:1}}),onVariableChange:a,onClose:d}):void 0:null)}function V({boundVariableId:e,resolvedType:t,requestedTypes:r,onVariableSelected:a,children:o}){let s=(0,_.SW)(e??void 0),c=!!s&&(0,T.Eh)(s),[u,p]=function({resolvedType:e,requestedTypes:t,boundVariableId:r,onVariableSelected:a}){let o=(0,n.useId)(),s=(0,i.I0)(),c=(0,i.v9)(e=>e.variablePickerShown);return[c.isShown&&"variable-picker-controlled"===c.type&&c.key===o,(0,n.useCallback)((n,i)=>{let c=n.getBoundingClientRect();s((0,d.V)({type:"variable-picker-controlled",isShown:!0,initialPosition:new l.OW(c.left,c.bottom),initialView:null==i?void 0:i.initialView,variableID:r,key:o,resolvedType:e,requestedTypes:t,onVariableSelected:a}))},[s,r,o,e,t,a])]}({resolvedType:t,requestedTypes:r,boundVariableId:e,onVariableSelected:a});return n.createElement(b.e.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:c,isShowingBindingUI:u,showBindingUI:p,onVariableSelected:a}},o)}function G({variableScope:e}){let t=(0,i.I0)(),r=(0,n.useCallback)(()=>{t((0,d.h)())},[t]),a=(0,i.v9)(e=>e.variablePickerShown);if(!a.isShown||"variable-picker-controlled"!==a.type)return null;let{resolvedType:o,initialPosition:l,requestedTypes:s,variableID:c,onVariableSelected:u,variableFilters:p}=a;return n.createElement(H,{variableID:c,resolvedType:o,requestedTypes:s,initialPosition:l,onVariableSelected:u,onClose:r,variableScopes:e?new Set([e]):void 0,variableFilters:p})}function H({resolvedType:e,requestedTypes:t,initialPosition:r,variableID:i,onVariableSelected:a,onClose:o,variableScopes:l,variableFilters:s}){let c=(0,_.SW)(i),d=(0,n.useMemo)(()=>{if(i&&c)return{type:p.M6J.ALIAS,resolvedType:e,value:i}},[e,i,c]);return n.createElement(Y,{disabledVariableIds:new Set,initialPosition:r,resolvedType:e,requestedTypes:t,boundVariable:c,newVariableInitialValue:d,onVariableSelected:a,onClose:o,variableScopes:l,variableFilters:s,pickerType:"fields",recordingKey:"variableBindingsDropdown"})}function W(){let e=(0,i.I0)(),t=(0,n.useCallback)(()=>{e((0,d.h)())},[e]),r=(0,i.v9)(e=>e.variablePickerShown);if(!r.isShown||"variable-picker-fields"!==r.type)return null;let{fields:a,resolvedType:o,initialPosition:l,onVariableSelected:s,currentFieldValue:c,requestedTypes:u,variableFilters:p}=r;return n.createElement(K,{fields:a,resolvedType:o,requestedTypes:u,variableFilters:p,initialPosition:l,currentFieldValue:c,onVariableSelected:s,onClose:t})}function K({fields:e,resolvedType:t,requestedTypes:r,variableFilters:i,initialPosition:a,currentFieldValue:o,onVariableSelected:l,onClose:s}){let{consumedVariable:c}=(0,N.tN)(e),d=c&&(0,h.Wn)(c)&&c.type===p.M6J.ALIAS?c.value:void 0,u=(0,_.SW)(d),m=(0,n.useMemo)(()=>d&&u?{type:p.M6J.ALIAS,resolvedType:t,value:d}:o?{type:(0,T.Qo)(t),resolvedType:t,value:o}:void 0,[o,t,d,u]),g=n.useMemo(()=>{if((0,L.$V)(t,r))return(0,L.Hr)(e)},[r,e,t]);return n.createElement(Y,{disabledVariableIds:new Set,initialPosition:a,resolvedType:t,requestedTypes:r,boundVariable:u,newVariableInitialValue:m,onVariableSelected:l,onClose:s,pickerType:"fields",recordingKey:"variableBindingsDropdown",variableScopes:g,variableFilters:i})}function z(){let e=(0,i.v9)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?n.createElement(Z,{pickerShownState:e}):null}function Z({pickerShownState:e}){let t=(0,i.I0)(),{variableID:r,modeID:a,resolvedType:l,initialPosition:s,initialView:c,onVariableSelected:h,variableFilters:f}=e,E=(0,_.Zx)(r,a),y=(0,_.SW)((null==E?void 0:E.type)===p.M6J.ALIAS?null==E?void 0:E.value:void 0),v=(0,n.useCallback)(()=>{t((0,d.h)())},[t]),b=(0,n.useCallback)((e,t)=>{let n={type:p.M6J.COLOR,resolvedType:p.QC$.COLOR,value:e},i=m.y2.user("set-color-variable-value",()=>p.pZy.setVariableValueForMode(r,a,n));i&&t===g.P7.YES&&u.Gr.triggerAction("commit")},[r,a]);return(null==E?void 0:E.resolvedType)===p.QC$.COLOR?n.createElement(A.H,null,n.createElement(j,{disabledVariableIds:new Set([r]),boundVariable:y,variableValue:E,initialPosition:s,initialView:c,onColorChange:b,onVariableSelected:h,onClose:v,recordingKey:"variableBindingsDropdown"}),n.createElement(C.kK,{recordingKey:o.ar("variableBindingsDropdown","closer"),onClose:v})):n.createElement(n.Fragment,null,n.createElement(A.H,null,n.createElement(Y,{disabledVariableIds:new Set([r]),initialPosition:s,resolvedType:l,variableFilters:f,boundVariable:y,onVariableSelected:h,onClose:v,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),n.createElement(C.kK,{recordingKey:o.ar("variableBindingsDropdown","closer"),onClose:v}))}function Y({disabledVariableIds:e,initialPosition:t,boundVariable:r,newVariableInitialValue:i,resolvedType:a,requestedTypes:l,variableFilters:c,pickerType:d,variableScopes:u,recordingKey:p,onVariableSelected:m,onClose:h}){let _=n.useRef(null),{VariableCreateModalRoot:g,VARIABLE_CREATE_MODAL_WIDTH_PX:y}=(0,n.useContext)(I.H)??{},[b,T]=(0,n.useState)(!1),w=n.useRef();function A(){var e;let t=null==(e=_.current)?void 0:e.getEl();if(!t)return;let r=(0,E.JJ)(t,y);w.current=r,T(!0)}return n.createElement(n.Fragment,null,n.createElement(O.My,{ref:_,title:"",headerSize:"hidden",initialPosition:t,onClose:h,dragHeaderOnly:!1,initialWidth:S.Lf,autoflowHeight:!0},n.createElement(C.Jg,{selectedItem:r,disabledVariableIds:e,resolvedType:a,pickerType:d,recordingKey:p,setControlRightButtons:function(){if(g&&void 0!==a&&"fields"===d)return n.createElement(v.hU,{"data-tooltip-type":f.fR.TEXT,"data-tooltip":(0,s.t)("variables.binding_ui.create_variable_button_tooltip"),recordingKey:o.ar(p,"createVariable"),svg:P,onClick:A})}(),onVariableSelected:m,onClose:h,requestedTypes:l,variableScopes:u,variableFilters:c})),n.createElement(C.kK,{recordingKey:o.ar(p,"closer"),onClose:h}),b&&(g&&void 0!==a&&w.current?n.createElement(g,{initialPosition:w.current,initialValue:i,resolvedType:a,onCreateVariable:m,onClose:function(){T(!1)}}):null))}function j({disabledVariableIds:e,boundVariable:t,variableValue:r,initialPosition:i,initialView:a,recordingKey:o,onColorChange:l,onVariableSelected:s,onClose:c}){let d=r.type===p.M6J.COLOR?r.value:{r:1,g:1,b:1,a:1};return n.createElement(y.zH,{title:"",color:d,disabledVariableIds:e,initialPosition:i,initialView:a,boundVariable:t,recordingKey:o,onChange:l,onVariableChange:s,onClose:c})}},357221:(e,t,r)=>{r.d(t,{Bk:()=>Q,Bp:()=>eo,Cr:()=>Y,F3:()=>et,FC:()=>Z,FW:()=>el,Ju:()=>B,OP:()=>j,QR:()=>$,R3:()=>X,SZ:()=>K,Uf:()=>H,VC:()=>U,Vb:()=>ec,Wp:()=>es,XN:()=>V,bI:()=>ee,c8:()=>G,cs:()=>en,iI:()=>q,ov:()=>z,p2:()=>W,pS:()=>er,tN:()=>ei,zk:()=>J});var n,i=r(652983),a=r(407908),o=r(864038),l=r.n(o),s=r(528102),c=r.n(s),d=r(600486),u=r(391320),p=r(598271),m=r(626650),h=r(716250),_=r(337167),g=r(970740),f=r(644383),E=r(160296),y=r(855579),v=r(724747),b=r(721127),I=r(961215),T=r(269075),w=r(840568),S=r(670224),C=r(598910),O=r(492459);r(112088);var A=r(843104),N=r(900710),L=r(218927),P=r(166885),R=r(321909),k=r(668849),D=r(640634),M=r(957086),F=r(248908);r(95239);var x=r(708283);let U="INHERIT",B="DEFAULT",V="MIXED",G="DELETED",H="https://help.figma.com/hc/articles/15343816063383#conflicts";var W=((n=W||{})[n.LEARN_MORE=0]="LEARN_MORE",n[n.REVIEW_UPDATES=1]="REVIEW_UPDATES",n);function K(e,t){return{type:I.M6J.ALIAS,resolvedType:e,value:t}}function z(e){if(0===e.length)return null;if(e.length>=2){for(let t=1;t<e.length;t++)if(!(0,u.qt)(e[t],e[0]))return w.t1}let t=e[0];return(null==t?void 0:t.isMixed)?w.t1:t}function Z(){var e;let[t,r]=(0,C.C1)("variableConsumptionInfo");return{variableConsumptionMap:(null==(e=(0,w.qD)(t))?void 0:e.variableConsumptionMap)||{},setVariableConsumptionMap:(0,i.useCallback)((e,t=R.P7.YES)=>{r({variableConsumptionMap:e},t)},[r])}}function Y(){let e=(0,w.qD)((0,S.a)("variableConsumptionMap"))||{};return e}function j(){let e=(0,C.A0)("variableConsumptionInfo"),t=(0,m.vE)(()=>{var t;return(null==(t=(0,w.qD)(e))?void 0:t.variableSetKeyToModeData)||{}},[e]),r=q(),n=ee();return(0,m.O4)(()=>{var e,i;for(let[a,o]of Object.entries(r))if(!t[a]&&n[a]){let r=n[a];if(!(null==(e=r.modes)?void 0:e.find(e=>e.id===o)))continue;t[a]={collectionName:r.name,modeOptions:(null==(i=r.modes)?void 0:i.map(e=>({modeId:{guid:e.id,collectionKey:r.key},name:e.name,isCompatible:!0})))||[],explicitMode:{guid:o,collectionKey:r.key},inheritMode:null,fileKey:r.file_key}}return t},[n,r,t])}function $(){let e=(0,C.A0)("variableConsumptionInfo");return(0,m.vE)(()=>{var t;return(null==(t=(0,w.qD)(e))?void 0:t.variableSetKeyToMode)||{}},[e])}function q(){let e=(0,C.A0)("variableConsumptionInfo");return(0,m.vE)(()=>{var t;return(null==(t=(0,w.qD)(e))?void 0:t.variableSetKeyToPageLevelPresetMode)||{}},[e])}function X(){let e=(0,a.I0)(),t=(0,C.C1)("numSelectedByType")[0],r=j(),n=ed();return(0,i.useCallback)((i,a,o)=>{if(a===V||a===G)return;if(t&&(0,w.Wn)(t)){let e=c()(Object.values(t));d.RQ.trackDefinedEvent("variables.explicit_mode_changed",{numSelected:e,numSelectedFrames:t.FRAME??0,numSelectedInstances:t.INSTANCE??0,numSelectedRectangles:t.ROUNDED_RECTANGLE??0,numSelectedSymbols:t.SYMBOL??0})}T.y2.user("set-explicit-variable-mode",()=>{I.pZy.setExplicitVariableModeForSelection(i,a===U||a===B?null:a,!0)});let l=Object.values(r).some(e=>e.modeOptions.some(e=>(0,u.qt)(e.modeId,a)&&!e.isCompatible));l&&(0,h.BZ)().ds_variables_relax_modes&&a!==U&&a!==B&&o&&(n?e(f.R.enqueue({message:(0,g.t)("variables.visual_bell.variables_incompatible_modes_needs_updates",{modeName:o}),button:{text:(0,g.t)("variables.modes.option.review_updates"),action:()=>{e(b.K4({type:F.yT,data:{initialTab:P.ZB.UPDATES}}))}}})):e(f.R.enqueue({message:(0,g.t)("variables.visual_bell.variables_incompatible_modes_no_updates",{modeName:o})})))},[e,n,r,t])}function J(){let e=j();return(0,m.O4)(()=>{let t=Object.entries(e).filter(([e,t])=>!t.fileKey&&t.modeOptions.length>1);return Object.fromEntries(t)},[e])}function Q(){let e=j();return(0,m.O4)(()=>{let t=Object.entries(e).filter(([e,t])=>!!t.fileKey&&t.modeOptions.length>1);return Object.fromEntries(t)},[e])}function ee(){let e=(0,O.dG)();return(0,m.O4)(()=>{var t;if("loaded"===e.status){let r=null==(t=e.data)?void 0:t.items.filter(e=>e.modes&&e.modes.length>1);return l()(r,e=>e.key)}return{}},[e])}function et(e){let t=J(),r=Q(),n=ee();return Object.values(t).length>0||Object.values(r).length>0||e&&Object.values(n).length>0}function er(){let e=j();return(0,m.O4)(()=>Object.values(e).some(e=>e.modeOptions.some(e=>!e.isCompatible)),[e])}function en(){let e=ed(),t=(0,_.Dv)(A.r2),r=(0,a.v9)(e=>(0,N.St)(e));return r&&e?1:!r&&t?1:0}function ei(e,t){let{variableConsumptionMap:r,setVariableConsumptionMap:n}=Z(),a=(0,S.a)("guid"),o=Y(),l=r;return t&&(0,w.Wn)(a)&&p.fS(t,a)&&(l=o),{consumedVariable:l&&z(e.map(e=>l[e])),updateVariableConsumption:(0,i.useCallback)(t=>{let r={};e.forEach(e=>{r[e]=t,(0,x.nm)(e,t)}),n(r)},[n,e]),clearVariableConsumption:(0,i.useCallback)((t=R.P7.YES)=>{let r={};e.forEach(e=>{r[e]=null}),n(r,t)},[n,e])}}function ea(e){let{consumedVariable:t}=ei([e]);if(t&&(0,w.Wn)(t)){if(t.type===I.M6J.EXPRESSION&&1===t.value.expressionArguments.length){let e=t.value.expressionArguments[0];if(e.type===I.M6J.ALIAS)return e.value}if(t.type===I.M6J.ALIAS)return t.value}}function eo(e,t){return function(e,t){let r=(0,y.$)(),n=ea(e),i=(0,v.E)(),a=(0,k.A2)(),o=(0,E.U2)(),l=M.mb[e]??I.xTW.ALL_SCOPES,s=!n&&a&&t?(0,O.Mt)(r,[l],t):void 0,c=(0,O.SW)(n??s);if(!c)return{};let d=(0,E.hf)(c,o.id),u=a&&"code"===i.inspectionMode,p=u&&d?d:null==c?void 0:c.name;return{variable:c,variableDisplayName:p,isSuggested:!n}}(e,function(e){if(!(!e||(0,w.nK)(e)))return{type:I.M6J.FLOAT,resolvedType:I.QC$.FLOAT,value:e}}(t))}function el(e,t){let r=(0,y.$)(),n=(0,k.A2)(),i=(0,v.E)(),a=(0,E.U2)(),o=(0,k.A2)(),{id:l,isSuggested:s}=function(e,t,r){var n;if(!e)return{id:void 0};let{colorVar:i,color:a,opacity:o}=t;if(null==(n=null==i?void 0:i.value)?void 0:n.alias)return{id:D.BB(i.value.alias)};if(!a||!r)return{id:void 0};let l=(0,O.Mt)(e,Array.from(r),{type:I.M6J.COLOR,resolvedType:I.QC$.COLOR,value:{...a,a:a.a*(o??1)}});return{id:l,isSuggested:!0}}(r,e,t),c=(0,O.SW)(l);if(s&&!n)return{variable:null};let d=(0,E.hf)(c,a.id),u=o&&"code"===i.inspectionMode,p=u&&d?d:null==c?void 0:c.name;return{variable:c,variableDisplayName:p,isSuggested:s}}function es(e){let t=ea(e);return(0,O.SW)(t)}function ec(e){return(0,a.v9)(t=>{var r;let n=(null==(r=(0,w.qD)(t.mirror.selectionProperties.variableConsumptionInfo))?void 0:r.variableNotMatchingSetValue)||{},i=n[e]??void 0;return(0,L.s)(i)&&"isMixed"in i?w.t1:i})}function ed(){let{componentUpdatesForSelection:e,stateGroupUpdatesForSelection:t,styleUpdatesForSelection:r,variableSetUpdatesForSelection:n}=function(){let{componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:t,styleUpdatesForCurrentPage:r,variableSetUpdatesForCurrentPage:n}=(0,_.Dv)(A.Lj),i=(0,C.A0)("directlySubscribedAssetKeys"),a=[],o=[],l=[],s=[];if(i&&!(0,w.nK)(i)){let c=new Set(i);a=e.filter(e=>c.has(e.component_key??"")),o=t.filter(e=>c.has(e.key)),l=r.filter(e=>c.has(e.key)),s=n.filter(e=>c.has(e.key))}return{componentUpdatesForSelection:a,stateGroupUpdatesForSelection:o,styleUpdatesForSelection:l,variableSetUpdatesForSelection:s}}();return e.length>0||t.length>0||r.length>0||n.length>0}},435189:(e,t,r)=>{r.d(t,{AJ:()=>c,Eh:()=>p,Qo:()=>u,hC:()=>function e(t){return({*[Symbol.iterator](){if(yield t,t.type===s.M6J.EXPRESSION)for(let r of t.value.expressionArguments)yield*e(r);else if(t.type===s.M6J.MAP)for(let r of Object.values(t.value))yield*e(r)}})[Symbol.iterator]()},xx:()=>d,xy:()=>m});var n=r(46347),i=r(141757),a=r(391320),o=r(970740),l=r(231690),s=r(961215);function c(e){if("MIXED"===e)return(0,o.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case s.QC$.FLOAT:return String(parseFloat(e.value.toFixed(2)));case s.QC$.BOOLEAN:return e.value?(0,o.t)("variables.values.boolean.true"):(0,o.t)("variables.values.boolean.false");case s.QC$.COLOR:return l.K9.format(e.value);case s.QC$.STRING:return e.value;default:return JSON.stringify(e.value)}}function d(e,t){if(e===t)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!t||!t.dataType||!t.resolvedDataType||!t.value||e.dataType!==t.dataType||e.resolvedDataType!==t.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===t.value.boolValue;case"FLOAT":return e.value.floatValue===t.value.floatValue;case"STRING":return e.value.textValue===t.value.textValue;case"COLOR":return(0,n.Eb)(e.value.colorValue),(0,n.Eb)(t.value.colorValue),(0,i.Vr)(e.value.colorValue)===(0,i.Vr)(t.value.colorValue);default:return(0,a.qt)(e,t)}}function u(e){switch(e){case s.QC$.BOOLEAN:return s.M6J.BOOLEAN;case s.QC$.FLOAT:return s.M6J.FLOAT;case s.QC$.STRING:return s.M6J.STRING;case s.QC$.COLOR:return s.M6J.COLOR;case s.QC$.MAP:return s.M6J.MAP;case s.QC$.SYMBOL_ID:return s.M6J.SYMBOL_ID}}function p(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let m={CORNER_RADIUS:[s.QC$.FLOAT],STACK_SPACING:[s.QC$.FLOAT],STACK_PADDING_LEFT:[s.QC$.FLOAT],STACK_PADDING_TOP:[s.QC$.FLOAT],STACK_PADDING_RIGHT:[s.QC$.FLOAT],STACK_PADDING_BOTTOM:[s.QC$.FLOAT],TEXT_DATA:[s.QC$.STRING,s.QC$.FLOAT],WIDTH:[s.QC$.FLOAT],HEIGHT:[s.QC$.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[s.QC$.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[s.QC$.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[s.QC$.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[s.QC$.FLOAT],STACK_COUNTER_SPACING:[s.QC$.FLOAT],MIN_WIDTH:[s.QC$.FLOAT],MAX_WIDTH:[s.QC$.FLOAT],MIN_HEIGHT:[s.QC$.FLOAT],MAX_HEIGHT:[s.QC$.FLOAT],STROKE_WEIGHT:[s.QC$.FLOAT],OPACITY:[s.QC$.FLOAT],MISSING:[],PARAGRAPH_SPACING:[s.QC$.FLOAT],PARAGRAPH_INDENT:[s.QC$.FLOAT],VISIBLE:[s.QC$.BOOLEAN],BORDER_TOP_WEIGHT:[s.QC$.FLOAT],BORDER_BOTTOM_WEIGHT:[s.QC$.FLOAT],BORDER_LEFT_WEIGHT:[s.QC$.FLOAT],BORDER_RIGHT_WEIGHT:[s.QC$.FLOAT],VARIANT_PROPERTIES:[s.QC$.SYMBOL_ID],FONT_FAMILY:[s.QC$.STRING],FONT_STYLE:[s.QC$.STRING,s.QC$.FLOAT],FONT_VARIATIONS:[s.QC$.FLOAT],FONT_SIZE:[s.QC$.FLOAT],LETTER_SPACING:[s.QC$.FLOAT],LINE_HEIGHT:[s.QC$.FLOAT]}},725061:(e,t,r)=>{r.d(t,{Jg:()=>$,Lc:()=>J,cD:()=>ec,kK:()=>en});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(46347),s=r(19516),c=r(716250),d=r(810373),u=r(381846),p=r(204829),m=r(270174),h=r(854571),_=r(782051),g=r(435613),f=r(970740),E=r(983635),y=r(571713),v=r(615675),b=r(961215),I=r(992750),T=r(492459),w=r(809377),S=r(464368),C=r(200273),O=r(322186),A=r(801998),N=r(166885),L=r(108202),P=r(225468),R=r(303801),k=r(482919),D=r(821838),M=r(609149),F=r(632472),x=r(303724),U=r(336352),B=r(814651),V=r(76144),G=r(722264),H=r(708283),W=r(957086),K=r(192911);let z=r(311366),Z=r(322342),Y=r(131077);function j({resolvedType:e,requestedTypes:t}){return t||(e?[e]:null)}function $({selectedItem:e,resolvedType:t,requestedTypes:r,variableFilters:i,pickerType:a,disabledVariableIds:o,setControlRightButtons:s,variableScopes:c,recordingKey:d,onVariableSelected:u,onStyleSelected:p,onClose:m}){let{currentView:h,setCurrentView:_,toggleLayout:g}=(0,x.f)({selectedItem:e,resolvedType:t}),f=function(e){switch(e.type){case"ALL_LIBRARIES":return Q;case"LOCAL_VARIABLES":return J;case"SUBSCRIBED_VARIABLES":return q;default:(0,l.vE)(e,"Unhandled view for picker body")}}(h),E=(0,n.useMemo)(()=>j({requestedTypes:r,resolvedType:t??null}),[r,t]),[y,v]=(0,n.useState)("");return n.createElement(n.Fragment,null,n.createElement(f,{selectedItem:e,currentView:h,setCurrentView:_,toggleLayout:g,resolvedType:t,disabledVariableIds:o,pickerType:a,setControlRightButtons:s,recordingKey:d,onVariableSelected:u,onStyleSelected:p,onClose:m,requestedTypes:r,searchQuery:y,onSearchInputChange:v,variableScopes:c,variableFilters:i}),n.createElement(F.m,{resolvedTypes:E,selectedItem:e}))}function q({selectedItem:e,currentView:t,setCurrentView:r,toggleLayout:i,resolvedType:a,pickerType:o,setControlRightButtons:l,recordingKey:s,onVariableSelected:c,onStyleSelected:d,onClose:u,requestedTypes:p,searchQuery:m,onSearchInputChange:h,variableScopes:_,variableFilters:g}){let f=t.fileKey,E=(0,T.MQ)(f),y=(0,T.VH)(f),v=(null==e?void 0:e.type)===N.h3.VARIABLE?e:null,I=(0,T.AS)((null==v?void 0:v.variableSetId)||""),w="loading"===y.status||"loading"===E.status,[S,C]=(0,n.useMemo)(()=>{let e=E.data??[],t=y.data??[];return(null==v?void 0:v.subscriptionStatus)==="SUBSCRIBED"&&(null==v?void 0:v.file_key)===f&&!e.find(e=>e.key===(null==v?void 0:v.key))&&I?[[...e,v],[...t,I]]:[e,t]},[f,E,y,v,I]);return a===b.QC$.COLOR&&"color-picker"===o&&d?n.createElement(X,{fileKey:f,render:({isLoading:f,dsStyles:E})=>n.createElement(er,{variables:S,variableSets:C,dsStyles:E,currentView:t,setCurrentView:r,toggleLayout:i,selectedItem:e,disabledVariableIds:new Set,resolvedType:a,pickerType:o,setControlRightButtons:l,recordingKey:s,isLoading:f||w,onVariableSelected:c,onStyleSelected:d,onClose:u,requestedTypes:p,searchQuery:m,onSearchInputChange:h,variableScopes:_,variableFilters:g})}):n.createElement(er,{variables:S,variableSets:C,dsStyles:[],currentView:t,setCurrentView:r,toggleLayout:i,selectedItem:e,disabledVariableIds:new Set,resolvedType:a,pickerType:o,setControlRightButtons:l,recordingKey:s,onVariableSelected:c,onClose:u,requestedTypes:p,searchQuery:m,onSearchInputChange:h,variableScopes:_})}function X({fileKey:e,render:t}){var r;let{status:i,stylesByFileKey:a}=(0,D.z8)({styleType:I.lS.FILL,initialSelectedSubscribedStyle:null}),o=(null==(r=a[e])?void 0:r.styles)??[];return n.createElement(M.M,null,t({isLoading:"loaded"!==i,dsStyles:o}))}function J({selectedItem:e,disabledVariableIds:t,currentView:r,setCurrentView:i,toggleLayout:a,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f}){let E=(0,T.wu)(),y=(0,T.EH)();return o===b.QC$.COLOR&&"color-picker"===l&&u?n.createElement(ee,{styleType:I.lS.FILL,render:v=>n.createElement(er,{variables:E,variableSets:y,dsStyles:v,currentView:r,setCurrentView:i,toggleLayout:a,selectedItem:e,disabledVariableIds:t,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f})}):n.createElement(er,{variables:E,variableSets:y,dsStyles:[],currentView:r,setCurrentView:i,toggleLayout:a,selectedItem:e,disabledVariableIds:t,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f})}function Q({selectedItem:e,disabledVariableIds:t,currentView:r,setCurrentView:i,toggleLayout:a,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f}){var E,y;let v=(0,T.wu)(),w=(0,T.EH)(),S=(0,T.tz)(),C="loaded"!==S.status,O=null==(E=S.data)?void 0:E.libraryVariables,A=null==(y=S.data)?void 0:y.libraryVariableSets,N=(0,n.useMemo)(()=>[...v,...O??[]],[v,O]),L=(0,n.useMemo)(()=>[...w,...A??[]],[w,A]);return o===b.QC$.COLOR&&"color-picker"===l&&u?n.createElement(et,{styleType:I.lS.FILL,render:({dsStyles:E,isLoading:y})=>n.createElement(er,{variables:N,variableSets:L,dsStyles:E,isLoading:y||C,currentView:r,setCurrentView:i,toggleLayout:a,selectedItem:e,disabledVariableIds:t,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f})}):n.createElement(er,{variables:N,variableSets:L,dsStyles:[],isLoading:C,currentView:r,setCurrentView:i,toggleLayout:a,selectedItem:e,disabledVariableIds:t,resolvedType:o,pickerType:l,setControlRightButtons:s,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f})}function ee({styleType:e,render:t}){let r=(0,D.Nc)(e);return t(r)}function et({styleType:e,render:t}){let r=(0,D.Nc)(e),{status:i,stylesByFileKey:a}=(0,D.z8)({styleType:I.lS.FILL,initialSelectedSubscribedStyle:null}),o=(0,n.useMemo)(()=>Object.values(a).reduce((e,{styles:t})=>(e.push(...t),e),[]),[a]),l=(0,n.useMemo)(()=>r.concat(o),[r,o]);return n.createElement(M.M,null,t({isLoading:"loaded"!==i,dsStyles:l}))}function er({variables:e,variableSets:t,dsStyles:r,currentView:i,setCurrentView:a,toggleLayout:l,selectedItem:s,disabledVariableIds:u,resolvedType:m,pickerType:g,setControlRightButtons:y,recordingKey:I,isLoading:T,onVariableSelected:S,onStyleSelected:P,onClose:k,requestedTypes:D,searchQuery:M,onSearchInputChange:x,variableScopes:z,variableFilters:Z}){(0,H._8)({isLoading:T??!1,eventName:"variables.variable_picker_load_time"});let Y=(0,C.uC)(),$=(0,w.L)(),q=s?(0,B.$h)(s):null,[X,J]=n.useState(null),Q=n.useRef(null);Q.current=X;let ee=n.useRef(null),{canToggleLayout:et,layout:er}=M.length>0?{canToggleLayout:!1,layout:"list"}:{canToggleLayout:!0,layout:i.layout},en=(0,n.useCallback)(()=>{ee.current&&ee.current.focus(),l()},[l]),ea=(0,n.useMemo)(()=>j({requestedTypes:D,resolvedType:m??null}),[D,m]),eo=P?[N.ef.VARIABLE,N.ef.STYLE]:[N.ef.VARIABLE],el=(0,F.o)(ea,s,eo),es=(0,O.Ng)(),ed=(0,E.RK)(),eu=(0,A.TO)(es)&&(0,v.dD)(ed),ep=(0,n.useMemo)(()=>{if(eu){let e=el.map(({fileKey:e,fileName:t})=>({key:e,name:t}));return(0,v.Vw)({libraries:e,approvedLibraryKeysByResourceType:ed}),e.map(({key:e,name:t})=>({fileKey:e,fileName:t}))}return el.sort((e,t)=>e.fileName.localeCompare(t.fileName))},[el,eu,ed]),em=(0,n.useMemo)(()=>{let e={},t=eu?ep:el;return t.forEach(t=>{e[t.fileKey]=t.fileName}),e},[el,ep,eu]),eh=(0,n.useMemo)(()=>D?e.filter(e=>D.includes(e.resolvedType)):e.filter(e=>void 0===m||e.resolvedType===m),[e,m,D]),e_=(0,n.useMemo)(()=>z?eh.filter(e=>(0,B.$h)(e)===q||(0,W.RZ)(e,z)):eh,[eh,z,q]),eg=(0,V.G)(e_,M),ef=(0,n.useMemo)(()=>!(0,c.BZ)().prototype_bind_visiblity_to_strs||M.length>0?eg:eg.filter(e=>{if(!("SUBSCRIBED"===e.subscriptionStatus||"LOCAL"===e.subscriptionStatus))return!0;if((null==Z?void 0:Z[L.L.MUST_INCLUDE_ONE_OF])!==void 0&&e.resolvedType===b.QC$.STRING){let t=null==Z?void 0:Z[L.L.MUST_INCLUDE_ONE_OF][e.resolvedType];if(t&&!Object.values(e.modeValues).some(e=>{if("string"==typeof e.value){let r=e.value.trim().toLocaleLowerCase();return null==t?void 0:t.some(e=>e===r)}}))return!1}return!0}),[eg,M,Z]),eE=(0,V.t)(r,M),ey=(0,n.useMemo)(()=>"ALL_LIBRARIES"===i.type?(0,B.jH)({variables:ef,variableSets:t,styles:eE,layout:er,fileNamesByKey:em,openFileKey:Y}):m===b.QC$.COLOR?(0,B.Yr)({variables:ef,variableSets:t,styles:eE,layout:er}):(0,B.Qh)({variables:ef,variableSets:t,layout:er}),[ef,t,i,eE,m,em,Y,er]),ev=n.useRef([]);ev.current=ey;let eb=n.useRef(null),eI=(0,n.useCallback)(()=>{var e;null==(e=eb.current)||e.scrollToTop();let t=function(e){let t=null;for(let r of e)if("items"in r){t=r.items[0];break}return t}(ev.current);J(t?(0,B.$h)(t):null)},[]),eT=(0,n.useCallback)((e,t)=>{var r;let n=(0,B.d5)(ev.current,e);n>=0&&(null==(r=eb.current)||r.scrollToIndex(n,t)),J(e)},[]);(0,n.useLayoutEffect)(()=>{!T&&(M.length>0||!q?eI():M||eT(q,{align:"center"}))},[M,q,T,eI,eT]);let{showStyleContextMenu:ew,hideStyleContextMenu:eS}=(0,G.ET)(),eC=(0,n.useCallback)((e,t)=>{e.type===N.h3.STYLE&&ew({dsStyle:e,position:t})},[ew]),eO=(0,n.useCallback)(e=>{J((0,B.$h)(e))},[J]),eA=(0,n.useCallback)(e=>{X===(0,B.$h)(e)&&J(null)},[X,J]),eN=(0,n.useCallback)(e=>{e.type===N.h3.VARIABLE?S(e):null==P||P(e,{fromSearch:M.length>0}),k()},[M,S,P,k]),eL=(0,n.useCallback)(e=>{x(e.currentTarget.value)},[x]),eP=(0,n.useCallback)(t=>{var n;if(t.keyCode===d.sr.ENTER){let t=function({highlightedItemID:e,variables:t,dsStyles:r}){if(!e)return null;let n=[...t,...r];return n.find(t=>(0,B.$h)(t)===e)??null}({variables:e,dsStyles:r,highlightedItemID:X});t?eN(t):s&&S(),k()}else if(t.keyCode===d.sr.ESCAPE)k();else if((0,h.g5)(t.code,!1)||(0,h.qB)(t.code,!1)||(0,h.mQ)(t.code,!1)||(0,h.pT)(t.code,!1)){if(X){let e=(null==(n=eb.current)?void 0:n.getVirtualItems())??[],t=e.some(e=>{let t=ev.current[e.index];return"items"in t&&t.items.some(e=>(0,B.$h)(e)===X)});t||eT(X,{align:"center"})}else q?eT(q,{align:"center"}):eI()}},[k,S,eN,s,X,q,e,r,eT,eI]);return n.createElement(h.Sg,{recordingKey:I,onClick:eS},n.createElement("div",{className:K.I0},n.createElement(ei,{inputRef:ee,value:M,onChange:eL,onKeyDown:eP,recordingKey:p.ar(I,"input")})),n.createElement(ec,{recordingKey:I,currentView:i,resolvedType:m,subscribedLibraries:ep,setControlRightButtons:y,onSetSelect:a,onToggleLayoutIconClick:et?en:void 0}),n.createElement(R.lQ,{className:o()({[K.n9]:m!==b.QC$.COLOR,[K.YM]:!0})},T?n.createElement("div",{className:K.M8,style:{height:(0,B.u7)({layout:er})}},n.createElement(_.TK,null)):0===eE.length&&0===ef.length?n.createElement("div",{className:K.Zu,style:{height:(0,B.u7)({layout:er})}},M.length>0?(0,f.t)("variables.binding_ui.no_search_results"):m===b.QC$.COLOR?(0,f.t)("variables.binding_ui.no_colors_empty_state"):(0,f.t)("variables.binding_ui.no_variables_empty_state")):"list"===er?n.createElement(U.b,{ref:eb,className:K.Lw,listItems:ey,selectedItemID:q,disabledVariableIds:u,highlightedItemID:X,pickerType:g,recordingKey:I,onItemHighlight:eO,onItemSelect:eN,onItemContextMenu:eC,onItemMouseLeave:eA}):n.createElement(U.R,{ref:eb,className:K.Lw,listItems:ey,selectedItemID:q,highlightedItemID:X,recordingKey:I,onItemHighlight:eO,onItemSelect:eN,onItemContextMenu:eC,onItemMouseLeave:eA})),(null==$?void 0:$.type)===G.YU&&n.createElement(G.qW,{dsStyle:$.data.dsStyle,position:$.data.position,recordingKey:p.ar(I,"contextMenu")}))}function en({recordingKey:e,onClose:t}){let r=p.Wn(e,"mousedown",n.useCallback(e=>{t(),e.stopPropagation()},[t])),i=(0,S.ob)();return i===b.UAh.DROPPER_COLOR?null:n.createElement("div",{tabIndex:0,role:"button",className:K.l_,onMouseDown:r})}function ei({inputRef:e,value:t,onChange:r,onKeyDown:i,recordingKey:a}){let o=n.useRef(null);return(0,s.O)(()=>{o.current&&o.current.focus()}),n.createElement("div",{className:K.X6},n.createElement(g.n,{className:K.RL,svg:z}),n.createElement(R.Jc,{ref:(0,u.Z)(e,o),className:K.eK,value:t,onChange:r,noBorderOnFocus:!0,placeholder:(0,f.t)("variables.binding_ui.search_placeholder"),onKeyDown:i,recordingKey:a}))}class ea extends k.Ph{}class eo extends k.Wx{}function el({recordingKey:e,currentView:t,subscribedLibraries:r,onSetSelect:a,resolvedType:o}){let l=(0,i.I0)(),s=(0,w.L)(),c=(0,n.useRef)(`variable-binding-set-select-${(0,m.E)()}`),d=(0,n.useMemo)(()=>({format(e){switch(e.type){case"LOCAL_VARIABLES":return o===b.QC$.COLOR?(0,f.t)("variables.binding_ui.set_labels.local_colors"):(0,f.t)("variables.binding_ui.set_labels.local_variables");case"SUBSCRIBED_VARIABLES":return e.fileName;case"ALL_LIBRARIES":return(0,f.t)("variables.binding_ui.set_labels.all_libraries")}},isEqual:(e,t)=>e.type===t.type&&("SUBSCRIBED_VARIABLES"!==e.type||e.fileKey===t.fileKey)}),[o]),u=r.length>0?n.createElement(eo,{value:{type:"LOCAL_VARIABLES",layout:t.layout},formattedValue:o===b.QC$.COLOR?(0,f.t)("variables.binding_ui.set_labels.local_colors"):(0,f.t)("variables.binding_ui.set_labels.local_variables"),recordingKey:p.ar(e,"localVariables")}):null,h=(0,O.Ng)(),_=(0,A.TO)(h),g="SUBSCRIBED_VARIABLES"===t.type?t.fileKey:void 0,I=(0,E.Ew)(g);return n.createElement(ea,{id:c.current,dispatch:l,dropdownShown:s,dropdownWidth:200,className:K.kY,chevronClassName:K.oz,inputClassName:K.Z3,property:t,formatter:d,rightIcon:_&&I?n.createElement(y.XG,{fileKey:g}):void 0,onChange:a,recordingKey:e},n.createElement(eo,{value:{type:"ALL_LIBRARIES",layout:t.layout},formattedValue:(0,f.t)("variables.binding_ui.set_labels.all_libraries"),recordingKey:p.ar(e,"allLibraries")}),u&&n.createElement(k.Hz,null),u,u&&n.createElement(k.Hz,null),r.map((r,i)=>{let a=_&&(0,v.v8)(r.fileKey);return n.createElement(eo,{key:r.fileKey,value:{type:"SUBSCRIBED_VARIABLES",layout:t.layout,fileKey:r.fileKey,fileName:r.fileName},formattedValue:r.fileName,recordingKey:p.ar(e,"subscribedLibrary",i),removeTextRightPadding:a,rightSettingsIcon:a&&n.createElement(y.sK,null)})}))}function es({recordingKey:e,currentView:t,resolvedType:r,onToggleLayoutIconClick:i}){if(r!==b.QC$.COLOR)return null;{let{tooltip:r,layoutSvg:a}=function(e){switch(e){case"list":return{tooltip:(0,f.t)("variables.binding_ui.show_as_grid_tooltip"),layoutSvg:Y};case"grid":return{tooltip:(0,f.t)("variables.binding_ui.show_as_list_tooltip"),layoutSvg:Z}}}(t.layout);return n.createElement(R.hU,{"data-tooltip-type":P.fR.TEXT,"data-tooltip":r,recordingKey:e,svg:a,onClick:i})}}function ec({recordingKey:e,currentView:t,subscribedLibraries:r,setControlRightButtons:i,resolvedType:a,onSetSelect:o,onToggleLayoutIconClick:l}){return n.createElement(R.X2,{className:K.zI},o?n.createElement(el,{currentView:t,subscribedLibraries:r,recordingKey:p.ar(e,"setSelector"),onSetSelect:o,resolvedType:a}):n.createElement("div",{className:K.eI},(0,f.t)("variables.binding_ui.set_labels.local_variables")),(l||i)&&n.createElement("div",{className:K.Vz},l&&n.createElement(es,{currentView:t,resolvedType:a,onToggleLayoutIconClick:l,recordingKey:p.ar(e,"toggleLayout")}),i))}},957086:(e,t,r)=>{r.d(t,{$V:()=>C,Hr:()=>T,KW:()=>I,RL:()=>O,RZ:()=>w,lr:()=>S,mb:()=>v});var n=r(652983),i=r(366050),a=r(716250),o=r(435613),l=r(970740),s=r(961215);let c=r(425570),d=r(720884),u=r(407461),p=r(17774),m=r(187601),h=r(552702),_=new Set([s.QC$.FLOAT,s.QC$.COLOR]),g=new Set([s.Rmy.FILL,s.Rmy.STROKE,s.Rmy.EFFECT]),f=new Set([s.xTW.FRAME_FILL,s.xTW.SHAPE_FILL,s.xTW.TEXT_FILL]),E=new Map([[s.xTW.ALL_SCOPES,{name:n.createElement(l.Tx,{id:"variables.scopes.all_properties"})}],[s.xTW.CORNER_RADIUS,{name:n.createElement(l.Tx,{id:"variables.scopes.corner_radius"}),iconElement:n.createElement(o.n,{svg:d,key:0})}],[s.xTW.WIDTH_HEIGHT,{name:n.createElement(l.Tx,{id:"variables.scopes.width_height"}),iconElement:n.createElement(o.n,{svg:u,key:1})}],[s.xTW.GAP,{name:n.createElement(l.Tx,{id:"variables.scopes.gap"}),iconElement:n.createElement(o.n,{svg:c,key:2}),subLabel:n.createElement(l.Tx,{id:"variables.scopes.auto_layout"})}],[s.xTW.TEXT_CONTENT,{name:n.createElement(l.Tx,{id:"variables.scopes.text_content"}),iconElement:n.createElement(o.n,{svg:p,key:3})}],[s.xTW.STROKE_FLOAT,{name:n.createElement(l.Tx,{id:"variables.scopes.stroke"}),iconElement:n.createElement(o.n,{svg:m,key:4})}],[s.xTW.OPACITY,{name:n.createElement(l.Tx,{id:"variables.scopes.layer_opacity"}),iconElement:n.createElement(i.u,{key:5})}],[s.xTW.EFFECT_FLOAT,{name:n.createElement(l.Tx,{id:"variables.scopes.effects"}),iconElement:n.createElement(o.n,{svg:h,key:6})}]]),y=new Map([[s.xTW.ALL_SCOPES,{name:n.createElement(l.Tx,{id:"variables.scopes.all_properties"})}],[s.xTW.ALL_FILLS,{name:n.createElement(l.Tx,{id:"variables.scopes.all_fills"})}],[s.xTW.FRAME_FILL,{name:n.createElement(l.Tx,{id:"variables.scopes.frame_fill"}),indented:!0}],[s.xTW.SHAPE_FILL,{name:n.createElement(l.Tx,{id:"variables.scopes.shape_fill"}),indented:!0}],[s.xTW.TEXT_FILL,{name:n.createElement(l.Tx,{id:"variables.scopes.text_fill"}),indented:!0}],[s.xTW.STROKE,{name:n.createElement(l.Tx,{id:"variables.scopes.stroke"})}],[s.xTW.EFFECT_COLOR,{name:n.createElement(l.Tx,{id:"variables.scopes.effects"})}]]),v={CORNER_RADIUS:s.xTW.CORNER_RADIUS,STACK_SPACING:s.xTW.GAP,STACK_PADDING_LEFT:s.xTW.GAP,STACK_PADDING_TOP:s.xTW.GAP,STACK_PADDING_RIGHT:s.xTW.GAP,STACK_PADDING_BOTTOM:s.xTW.GAP,TEXT_DATA:s.xTW.TEXT_CONTENT,WIDTH:s.xTW.WIDTH_HEIGHT,HEIGHT:s.xTW.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:s.xTW.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:s.xTW.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:s.xTW.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:s.xTW.CORNER_RADIUS,STACK_COUNTER_SPACING:s.xTW.GAP,MIN_WIDTH:s.xTW.WIDTH_HEIGHT,MAX_WIDTH:s.xTW.WIDTH_HEIGHT,MIN_HEIGHT:s.xTW.WIDTH_HEIGHT,MAX_HEIGHT:s.xTW.WIDTH_HEIGHT,STROKE_WEIGHT:s.xTW.STROKE_FLOAT,BORDER_TOP_WEIGHT:s.xTW.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:s.xTW.STROKE_FLOAT,BORDER_LEFT_WEIGHT:s.xTW.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:s.xTW.STROKE_FLOAT,OPACITY:s.xTW.OPACITY,MISSING:null,PARAGRAPH_SPACING:null,PARAGRAPH_INDENT:null,VISIBLE:null,VARIANT_PROPERTIES:null,FONT_FAMILY:null,FONT_STYLE:null,FONT_VARIATIONS:null,FONT_SIZE:null,LETTER_SPACING:null,LINE_HEIGHT:null};Object.keys(s.Jqs).filter(e=>isNaN(Number(e)));let b={FRAME:s.xTW.FRAME_FILL,SYMBOL:s.xTW.FRAME_FILL,INSTANCE:s.xTW.FRAME_FILL,VECTOR:s.xTW.SHAPE_FILL,STAR:s.xTW.SHAPE_FILL,LINE:s.xTW.SHAPE_FILL,ELLIPSE:s.xTW.SHAPE_FILL,RECTANGLE:s.xTW.SHAPE_FILL,REGULAR_POLYGON:s.xTW.SHAPE_FILL,ROUNDED_RECTANGLE:s.xTW.SHAPE_FILL,TEXT:s.xTW.TEXT_FILL,VECTOR_OPERATION:s.xTW.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,SLIDE_ROW:null,SLIDE_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null};function I(e){return e===s.QC$.FLOAT?((0,a.BZ)().ds_variables_strokes||(E.delete(s.xTW.STROKE_FLOAT),E.delete(s.xTW.OPACITY),E.delete(s.xTW.EFFECT_FLOAT)),E):e===s.QC$.COLOR?((0,a.BZ)().ds_variables_strokes||y.delete(s.xTW.EFFECT_COLOR),y):new Map}function T(e){let t=new Set;for(let r of e)v[r]&&t.add(v[r]);return t}function w(e,t){if(!_.has(e.resolvedType))return!0;let r=!1;for(let e of t)if(f.has(e)){r=!0;break}for(let n of e.scopes)if(t.has(n)||n===s.xTW.ALL_SCOPES||n===s.xTW.ALL_FILLS&&r)return!0;return!1}function S(){return[s.QC$.FLOAT,s.QC$.COLOR]}function C(e,t){if(t){for(let e of t)if(_.has(e))return!0}return _.has(e)}function O(e,t){if(!e||!t||!g.has(e))return;let r=new Set;switch(e){case s.Rmy.STROKE:case s.Rmy.STROKE_PRESET:r.add(s.xTW.STROKE);break;case s.Rmy.FILL:for(let e in t){let t=b[e];t&&r.add(t)}break;case s.Rmy.EFFECT:r.add(s.xTW.EFFECT_COLOR)}return r.size?r:void 0}},33468:(e,t,r)=>{r.d(t,{EG:()=>T,Im:()=>C,Md:()=>H,N0:()=>x,Nt:()=>F,Pg:()=>A,Pk:()=>B,Ru:()=>V,TO:()=>L,V3:()=>Z,WD:()=>D,ZT:()=>W,_7:()=>R,fw:()=>N,gL:()=>G,jU:()=>K,kG:()=>O,wD:()=>U,x8:()=>M,ym:()=>S});var n=r(239907),i=r.n(n),a=r(864038),o=r.n(a),l=r(757383),s=r.n(l),c=r(5453),d=r(337167),u=r(769865),p=r(915721),m=r(388899),h=r(217810),_=r(142891),g=r(297296),f=r(158774),E=r(961215),y=r(714419),v=r(451573),b=r(862610),I=r(166885);let T=(()=>{let e=(0,v.Pz)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),t=(0,d.oH)(e,(e,t)=>{if(t){if("added"in t){let r=o()(t.added.map(I.be),e=>e.node_id);return{...e,...r}}if("deleted"in t){let r={...e};return delete r[t.deleted],r}}return{}});return t.onMount=e=>{f.Gr.onReady().then(()=>{let t=E.pZy.getLocalVariableSetsInfo();e({added:t})});let t=(0,y.eG)(t=>{e(t)});return()=>{t(),e(null)}},(0,v.Xu)(t,e.reducer)})(),w=(0,d.cn)(e=>({...e(T),...e(F)})),S=(0,d.xu)(e=>(0,d.cn)(t=>t(T)[e]));(0,d.xu)(e=>(0,d.cn)(t=>t(F)[e]));let C=(0,d.xu)(e=>(0,d.cn)(t=>t(w)[e]));(0,d.xu)(e=>u.mP.LibraryVariableCollectionData(t=>r=>r(t({fileKey:e}))));let O=(0,d.xu)(e=>(0,d.cn)(t=>{let r={};for(let n of e)r[n]=t((0,b.LibraryVariableCollectionData)({fileKey:n}));return r}),c.Vg),A=(0,d.xu)(e=>u.mP.LibraryVariableCollectionDataWithVariables(t=>r=>r(t({fileKey:e})))),N=(0,d.xu)(e=>(0,d.cn)(t=>{let r={};for(let n of e)r[n]=t((0,p.Do)(b.VariablesByVariableCollectionKey)({variableCollectionKey:n}));return r}),c.Vg),L=(0,d.xu)(e=>(0,d.cn)(t=>{let r={};for(let n of e)r[n]=t((0,b.LibraryVariableCollectionDataWithVariables)({fileKey:n}));return r}),c.Vg),P=(0,d.cn)(e=>{let t=e(G),r=Object.values(t).map(e=>e.key),n=r.sort(),i=e(u.Ch.VariableByKey(n.map(e=>({key:e})))),a=i.reduce((e,t)=>{let r=(0,g.c5)(t.args.key);return e[r]=t.result,e},{});return a},m.ZT),R=(0,v.ow)(P,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),k=(0,d.cn)(e=>{let t=Object.values(e(P)),r=[...new Set(t.map(e=>{var t,r;return null==(r=null==(t=e.data)?void 0:t.variable)?void 0:r.variableCollection.key}).filter(h.lm))],n=r.sort(),i=e(u.Ch.VariableCollectionByKey(n.map(e=>({key:e})))),a=i.reduce((e,t)=>{let r=(0,g.tb)(t.args.key);return e[r]=t.result,e},{});return a},m.ZT),D=(0,v.ow)(k,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,d.cn)(e=>{let t=Object.keys(e(T));if(0!==t.length)return t[0]});let M=(0,d.cn)(e=>Object.values(e(T))),F=(()=>{let e=(0,v.Pz)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),t=(0,d.oH)(e,(e,t)=>{if(t){if("added"in t){let r=o()(t.added.map(I.yN),e=>e.node_id);return{...e,...r}}{let r={...e};return delete r[t.deleted],r}}return{}});return t.onMount=e=>{f.Gr.onReady().then(()=>{let t=E.pZy.getSubscribedVariableSetsInfo();e({added:t})});let t=(0,y.dv)(t=>{e(t)});return()=>{t(),e(null)}},(0,v.Xu)(t,e.reducer)})(),x=(()=>{let e=(0,v.Pz)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),t=(0,d.oH)(e,(e,t)=>{if(t){if("added"in t)return{...e,...o()(t.added.map(I.f7),e=>e.node_id)};if("deleted"in t){let r=new Set(t.deleted);return s()(e,e=>e.node_id&&!r.has(e.node_id))}if("setDeleted"in t)return s()(e,e=>e.variableSetId!==t.setDeleted)}return{}});return t.onMount=e=>{f.Gr.onReady().then(()=>{let t=E.pZy.getLocalVariablesInfo();e({added:t})});let t=(0,y.Cq)(t=>{e(t)});return()=>{t(),e(null)}},(0,v.Xu)(t,e.reducer)})(),U=(0,d.xu)(e=>(0,d.cn)(t=>t(x)[e]??null)),B=(0,d.cn)(e=>{let t=Object.keys(e(x));return t.map(t=>e(U(t))).sort((e,t)=>-(0,_.WQ)(e.sortPosition,null==t?void 0:t.sortPosition))}),V=(0,d.cn)(e=>i()(e(B),e=>e.variableSetId)),G=(()=>{let e=(0,v.Pz)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),t=(0,d.oH)(e,(e,t)=>{if(t){if("added"in t)return{...e,...o()(t.added.map(I.sq),e=>e.node_id)};if("deleted"in t)return s()(e,e=>e.id!==t.deleted);if("setDeleted"in t)return s()(e,e=>e.variableSetId!==t.setDeleted)}return{}});return t.onMount=e=>{f.Gr.onReady().then(()=>{let t=E.pZy.getSubscribedVariablesInfo();e({added:t})});let t=(0,y.D)(t=>{e(t)});return()=>{t(),e(null)}},(0,v.Xu)(t,e.reducer)})();(0,d.xu)(e=>(0,d.cn)(t=>t(G)[e]??null));let H=(0,d.xu)(e=>(0,d.cn)(t=>t(x)[e]??t(G)[e]??null)),W=(e,t)=>{let r=f.Gr.isReady(),n=r&&e?E.pZy.getVariableResolvedValue(e,t):null,i=(0,d.cn)(n);return e&&(i.onMount=n=>{r||f.Gr.onReady().then(()=>{n(E.pZy.getVariableResolvedValue(e,t))});let i=(0,y.Eo)(e,t,e=>{n(e[t]??null)});return()=>{i(),n(null)}}),i},K=e=>{let t=f.Gr.isReady(),r=t&&e?E.pZy.getExplicitModeNames(e):null,n=(0,d.cn)(r);return e&&(n.onMount=r=>{t||f.Gr.onReady().then(()=>{r(E.pZy.getExplicitModeNames(e))});let n=(0,y.Kc)(e,e=>{r(e)});return()=>{n(),r(null)}}),n},z=(()=>{let e=(0,d.cn)({}),t=(0,d.oH)(e,(e,t)=>{if(t){if("added"in t)return{...e,...o()(t.added.map(I.G6),e=>e.node_id)};if("deleted"in t){let r=new Set(t.deleted);return s()(e,e=>e.node_id&&!r.has(e.node_id))}return{}}return e});return t.onMount=e=>{f.Gr.onReady().then(()=>{let t=E.pZy.getLocalVariableOverridesInfo();e({added:t})});let t=(0,y.oN)(t=>{e(t)});return()=>{t(),e(null)}},t})(),Z=(0,d.xu)(e=>(0,d.cn)(t=>{let r=t(z),n=Object.values(r).filter(t=>t.variableSetId===e);return o()(n,e=>e.rootVariableKey)}))},708283:(e,t,r)=>{r.d(t,{_8:()=>f,c5:()=>E,jE:()=>b,nm:()=>v});var n=r(652983),i=r(600486),a=r(269658),o=r(19516),l=r(9247),s=r(337167),c=r(286206),d=r(448694),u=r(961215),p=r(200273),m=r(70918),h=r(640634),_=r(33468);function g(e){switch(e){case u.QC$.BOOLEAN:return"boolean";case u.QC$.FLOAT:return"float";case u.QC$.STRING:return"string";case u.QC$.COLOR:return"color";case u.QC$.MAP:return"map";case u.QC$.SYMBOL_ID:return"symbol_id";case u.QC$.FONT_STYLE:return"font_style";case u.QC$.TEXT_DATA:return"text_data"}}function f({isLoading:e,eventName:t}){let r=(0,l.D)(e),a=(0,n.useRef)();(0,o.O)(()=>{a.current=performance.now()});let s=function(e){let t=(0,n.useRef)(!1);return function(){t.current||(e(),t.current=!0)}}(function(){if(a.current){let e=performance.now()-a.current;i.RQ.trackDefinedEvent(t,{loadTimeMs:e})}});r&&!e&&s()}function E({resolvedType:e}){let t=(0,p.uC)(),r=(0,m.dO)();(0,o.O)(()=>{t&&r&&i.RQ.trackDefinedEvent("variables.inline_creation_dialog_opened",{fileKey:t,userId:r,resolvedType:g(e)})})}function y(e){return"type"in e}function v(e,t){var r,n,i;try{let o=y(t)?t.type===u.M6J.ALIAS:"ALIAS"===t.dataType;if(o){let o=y(t)?t.value:(0,h.BB)(null==(r=t.value)?void 0:r.alias),l=y(t)?g(t.resolvedType):t.resolvedDataType,c=a.V.getState(),u=Object.keys(c.mirror.sceneGraphSelection),p=null==(n=c.openFile)?void 0:n.key,m=c.user&&c.user.id,f=s.n_.get((0,_.Md)(o)),E=(null==f?void 0:f.variableSetId)?null==(i=s.n_.get((0,_.Im)(null==f?void 0:f.variableSetId)))?void 0:i.node_id:null;for(let t of u)(0,d.hp)("ds_variable_reference_set",p,c,{userId:m,variable_id:o,collection_id:E,value_type:l,node_id:t,variable_field_id:e})}}catch(e){(0,c.YD)("variables","Could not log variable consumption",{exception:e},{reportAsSentryError:!0})}}function b(e){var t;try{let r=a.V.getState(),n=Object.keys(r.mirror.sceneGraphSelection),i=null==(t=r.openFile)?void 0:t.key,o=r.user&&r.user.id;for(let t of n)(0,d.hp)("ds_variable_reference_set",i,r,{userId:o,variable_id:e,value_type:u.QC$.SYMBOL_ID,node_id:t,variable_field_id:"VARIANT_PROPERTIES"})}catch(e){(0,c.YD)("variables","Could not log variant binding variable consumption",{exception:e},{reportAsSentryError:!0})}}},173083:(e,t,r)=>{r.d(t,{_:()=>ea,o:()=>ei});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(327251),s=r(600486),c=r(5453),d=r(172497),u=r(391320),p=r(847945),m=r(170435),h=r(716250),_=r(388899),g=r(217810),f=r(204829),E=r(122342),y=r(518484),v=r(212984),b=r(970740),I=r(918445),T=r(961215),w=r(269075),S=r(784667),C=r(492459),O=r(809377),A=r(564621),N=r(572333),L=r(809340),P=r(166885),R=r(225468),k=r(291904),D=r(157607),M=r(596085),F=r(158314),x=r(682821),U=r(289293),B=r(269783),V=r(673596),G=r(993642),H=r(896333),W=r(629899),K=r(750060),z=r(97510),Z=r(712050),Y=r(627801),j=r(220335),$=r(157326),q=r(266143),X=r(275718);let J="variables-modal-width",Q="variables-modal-height",ee="variables-modal-position",et=(0,d.F)(X.EO),er=(0,d.F)(X.RH),en=(0,d.F)(X.pU),ei=(0,k.Y3)(function(){let e=(0,A.x)({type:ei}),t=(0,i.I0)(),a=(0,N.mA)((0,S.tZ)().showGuids),T=(0,i.v9)(e=>e.variablePickerShown),w=(0,i.v9)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===U.p9.type}),{state:{currentVariableSet:C,renamingVariableID:k,selectedGroupNames:ea,selectedVariableIDs:eo,variableGroupList:el,variableList:es,variableOverrides:ec,isSidebarOpen:ed},actions:eu}=(0,H.C)(H.c.WRITEABLE),{showing:ep,show:em,hide:eh,data:e_}=(0,O.x)("variables-modal-context-menu"),eg=(0,n.useCallback)((e,t,r,n)=>{w&&eu.toggleEditVariableModal(null);let i=eo;eo.includes(e)||(eu.setSelectedVariableIDs([e]),i=[e]),em({data:{position:{left:r.clientX,top:r.clientY},modeID:t,variables:(0,c.qz)(i,e=>es.find(t=>t.node_id===e)),cellElement:r.currentTarget,groupNames:[],onCreateExpression:n}}),r.preventDefault()},[w,eo,em,eu,es]),ef=(0,n.useCallback)((e,t)=>{em({data:{position:{left:t.clientX,top:t.clientY},groupNames:ea,variables:[],cellElement:t.currentTarget}}),t.preventDefault()},[ea,em]),eE=(0,i.v9)(L.y_);(0,n.useEffect)(()=>(0,s.L9)("ds_variables_modal_opened",eE),[eE]);let ey=e=>{var t;return eo.length>0&&(null==e?void 0:e.key)==="Enter"&&!!e.shiftKey&&(null==(t=eu.duplicateVariables)||t.call(eu),!0)},ev=f.xE("variablesModal","keydown",e=>{ey(e.event)&&(e.accept(),ey(e))}),eb=n.useRef(null),eI=(0,n.useRef)(null),eT=function(){let e=(0,E.p5)(),t=(0,x.C)(),r=(0,n.useMemo)(()=>new y.OW(t+(0,d.F)(X.EO),(0,d.F)(X.RH)+(0,d.F)(X.EO)),[t]),[i]=(0,n.useState)(()=>{let t=null==e?void 0:e.getItem(ee);if(!t)return null;let r=JSON.parse(t);return new y.OW(r.x,r.y)}),[a]=(0,n.useState)(()=>{let t=Number(null==e?void 0:e.getItem(J));return t&&Number.isFinite(t)?t:642}),[o]=(0,n.useState)(()=>{let t=Number(null==e?void 0:e.getItem(Q));return t&&Number.isFinite(t)?t:380}),[{windowInnerHeight:s,windowInnerWidth:c}]=(0,l.Z)((0,m.i)(),300);return{initialConstraints:i?{x:"left",y:"top"}:{x:"right",y:"top"},initialPosition:i??r,maxWidth:c-2*et,maxHeight:s-er-2*et,minWidth:642,minHeight:380,initialWidth:a,initialHeight:o}}(),ew=(0,x.C)(),eS=(0,E.p5)(),eC=(0,n.useCallback)(({width:e,height:t})=>{(0,h.BZ)().ds_variables_authoring_resize&&(null==eS||eS.setItem(J,String(e)),null==eS||eS.setItem(Q,String(t-en)))},[eS]),eO=(0,n.useCallback)(e=>{null==eS||eS.setItem(ee,JSON.stringify(e))},[eS]),[eA,eN]=(0,n.useState)(null),eL=(0,n.useCallback)(()=>{if(!(0,h.BZ)().ds_variables_authoring_resize)return;let e=eI.current;e&&e.setTransform(e=>{let t={...e,position:new y.OW(et,et+er),width:window.innerWidth-2*et,height:window.innerHeight-2*et-er};return(0,u.qt)(t,e)?(eN(null),eA):(eN(e),t)})},[eA]),eP=(0,n.useCallback)(e=>{e.target===e.currentTarget&&eL()},[eL]),eR=(0,g.lm)(C),ek=(0,V.$O)();return n.createElement(M.BQ,{handleKeyDown:ev,ref:eb,name:"variables-authoring-modal",focusOnMount:!0},n.createElement(D.My,{...(0,h.BZ)().ds_variables_authoring_resize?{allowAutoExpanding:!1,allowResizeHeight:!0,allowResizeWidth:!0,fullFrame:!0,initialConstraints:eT.initialConstraints,initialHeight:eT.initialHeight,initialPosition:eT.initialPosition,initialWidth:eT.initialWidth,maxHeight:eT.maxHeight,maxWidth:eT.maxWidth,minHeight:eT.minHeight,minWidth:eT.minWidth,onDragEnd:eO,onEdgeDoubleClick:eL,onResize:eC}:{allowAutoExpanding:!0,initialConstraints:{x:"right",y:"top"},initialPosition:eT.initialPosition},ref:eI,contentContainerClassName:q.oC,dragHeaderOnly:!0,onClick:()=>{var e;T.isShown&&t((0,I.h)()),w&&eu.toggleEditVariableModal(null),null==(e=eb.current)||e.focus()},onKeyDown:ev,onClose:e,recordingKey:"variablesModal",title:n.createElement("div",{className:q.TN,onDoubleClick:eP},!eR&&n.createElement("div",{className:v.cx.ml8.fontSemiBold.font11.fontUi.$},n.createElement(b.Tx,{id:"variables.authoring_modal.title"})),eR&&n.createElement("div",{className:o()({[q.eI]:!0,[q.bA]:ed})},n.createElement(F.hU,{recordingKey:f.ar("variablesModal","toggleSidebar"),svg:r(629170),"data-tooltip-type":R.fR.TEXT,"data-tooltip":(0,b.t)("variables.authoring_modal.toggle_sidebar"),onClick:()=>eu.setIsSidebarOpen(e=>!e)})),ek&&n.createElement("div",{className:q.c4},n.createElement(W.K,null)),n.createElement("div",{className:q.wg},n.createElement(G.w,null)))},n.createElement(p.Ap,null,eR?n.createElement("div",{className:o()({[q.nC]:!0,[q.$G]:!(0,h.BZ)().ds_variables_authoring_resize}),style:{"--propertiesPanelWidth":`${ew}px`},"data-testid":"variables-modal-container"},ed&&n.createElement(Y.O,{groups:el,onChangeVariableSet:eu.setCurrentVariableSetID,onContextMenu:ef,onCreateVariableSet:eu.createVariableSet,onCreateVariableSetExtension:eu.createVariableSetExtension,onDeleteVariableSet:eu.deleteVariableSet,onMoveSelectedGroupsToGroup:eu.moveSelectedGroupsToGroup,onMoveVariableToGroup:eu.moveVariableToGroup,onRenameGroup:eu.renameGroup,onRenameVariableSet:eu.renameVariableSet,onReorderGroups:eu.reorderGroups,onMoveGroups:eu.moveGroups,recordingKey:"variablesModal",selectedGroupNames:ea,selectedVariableIDs:eo,setSelectedGroupNames:eu.setSelectedGroupNames,variableSet:C,isShowingGuids:a}),n.createElement("div",{className:o()({[q.PZ]:!0,[q.YC]:!(0,h.BZ)().ds_variables_authoring_resize})},0===es.length?n.createElement($.j,{recordingKey:"variablesModal",groups:el,selectedGroup:ea[0],setRenamingVariableID:eu.setRenamingVariableID,setSelectedVariableID:eu.setSelectedVariableIDs,variableSetID:C.node_id}):n.createElement(n.Fragment,null,n.createElement(j.a,{groups:el,key:ea.join("-"),onCreateMode:eu.createMode,onDeleteMode:eu.deleteMode,onDuplicateMode:eu.duplicateMode,onMoveVariableToGroup:eu.moveVariableToGroup,onRenameGroup:eu.renameGroup,onRenameMode:eu.renameMode,onRenameVariable:eu.renameVariable,onReorderVariables:eu.reorderVariables,onVariableContextMenu:eg,recordingKey:"variablesModal",renamingVariableID:k,selectedGroupNames:ea,selectedVariableIDs:eo,setRenamingVariableID:eu.setRenamingVariableID,setSelectedVariableIDs:eu.setSelectedVariableIDs,variableSet:C,isShowingGuids:a,toggleEditVariableModal:eu.toggleEditVariableModal,setVariableValueForMode:eu.setVariableValueForMode}),eu.setRenamingVariableID&&n.createElement("div",{className:q.Mv},n.createElement(z.sx,{recordingKey:"variablesModal",groups:el,selectedGroup:ea[0],setRenamingVariableID:eu.setRenamingVariableID,variableSetID:C.node_id,setSelectedVariableID:eu.setSelectedVariableIDs}))),(0,h.BZ)().ds_variables_extended_sets&&(0,P.z4)(C)?n.createElement("pre",{className:v.cx.maxH200.overflowAuto.$},JSON.stringify(ec,void 0,2)):null)):n.createElement(Z.T,{recordingKey:"variablesModalNullState"})),ep&&e_&&n.createElement(K.Y,{allVariables:es,contextMenuData:e_,hasGroups:el.length>1,hideContextMenu:eh,onCreateGroup:eu.createGroup,onUngroup:eu.ungroup,onDuplicateVariables:eu.duplicateVariables,onDeleteEmptyGroup:_.ZT,onDeleteVariables:eu.deleteVariables,onSetAllVariablesSelected:_.ZT,toggleEditVariableModal:eu.toggleEditVariableModal,recordingKey:f.ar("variablesModal","contextMenuDropdown")}),n.createElement(B.L0,null)))},"VariablesModal",k.Et.YES);function ea(){let e=(0,A.x)({type:ei}),t=(0,C.EH)();return(0,n.useCallback)(()=>{0===t.length&&w.y2.system("create-default-variable-set",()=>T.pZy.createVariableSet((0,b.t)("variables.authoring_modal.default_collection_name"),T.x1N.AUTOMATIC_FIRST_COLLECTION)),e()},[t.length,e])}},516877:(e,t,r)=>{r.d(t,{T:()=>C});var n,i=r(652983),a=r(63730),o=r(600486),l=r(618723),s=r(623046),c=r(313653),d=r(970740),u=r(820311),p=r(721127),m=r(124040),h=r(5119),_=r(352297),g=r(892061),f=r(505468),E=r(291904),y=r(951261),v=r(102677),b=((n=b||{})[n.IMAGE=0]="IMAGE",n[n.SLIDER=1]="SLIDER",n);let I=(e,t)=>{e.fillStyle=(null==t?void 0:t.colorBg)||y.Lfe,e.beginPath(),e.moveTo(0,0),e.lineTo(200,0),e.lineTo(200,200),e.lineTo(0,200),e.lineTo(0,0),e.moveTo(0,100),e.arc(100,100,100,0,2*Math.PI,!0),e.fill(),e.restore()},T={CIRCLE:I,SQUARE:e=>{e.fillStyle=y.Lfe;let t=Math.floor(20),r=new Path2D;r.moveTo(10+t,10),r.lineTo(190-t,10),r.arcTo(190,10,190,10+t,t),r.lineTo(190,190-t),r.arcTo(190,190,190-t,190,t),r.lineTo(10+t,190),r.arcTo(10,190,10,190-t,t),r.lineTo(10,10+t),r.arcTo(10,10,10+t,10,t),r.moveTo(0,0),r.lineTo(200,0),r.lineTo(200,200),r.lineTo(0,200),r.lineTo(0,0),r.closePath(),e.fill(r,"evenodd"),e.restore()}};class w extends i.Component{constructor(){super(...arguments),this.mask=(this.props.avatarEditorState.shape?T[this.props.avatarEditorState.shape]:null)||I,this.sliderPosition=73.33333333333333,this.previewOffset={x:100,y:100},this.canvasStyle={background:`url('${(0,h.Z)()}')`,width:200,height:244,display:"block",margin:"20px auto 10px auto",cursor:"move"},this.state={hasImageLoaded:!1},this.componentDidMount=async()=>{try{this.image=await this.loadImageFile(this.props.avatarEditorState.file)}catch{this.props.dispatch(c.l.error((0,d.t)("avatar_editor.an_error_occurred_while_loading_the_image"))),this.props.dispatch(p.eI());return}if(this.image.width<g.DZ.LARGE||this.image.height<g.DZ.LARGE){this.props.dispatch(c.l.error((0,d.t)("avatar_editor.your_profile_image_must_be_at_least_500_x500_px"))),this.props.dispatch(p.eI());return}this.setState({hasImageLoaded:!0})},this.startUpload=()=>{this.props.dispatch(p.eI());let e=this.props.avatarEditorState.entityType===g.py.WORKSPACE?"image/png":"image/jpeg";this.props.dispatch(u.IE({entity:this.props.avatarEditorState.entity,entityType:this.props.avatarEditorState.entityType,small:(0,u.pq)((0,u.YE)(this.image,g.DZ.SMALL,this.computeImagePosition(g.DZ.SMALL),e)),large:(0,u.pq)((0,u.YE)(this.image,g.DZ.LARGE,this.computeImagePosition(g.DZ.LARGE),e)),contentType:e})),this.props.onAvatarSet&&this.props.dispatch(this.props.onAvatarSet()),(0,o.L9)("Change Profile Picture")},this.loadImageFile=e=>{let t=new Image;return new Promise((r,n)=>{t.onerror=e=>{n(e)},t.onload=()=>{URL.revokeObjectURL(i),r(t)};let i=URL.createObjectURL(e);t.src=i})},this.hasAlpha=e=>{this.ctx.clearRect(0,0,200,200),this.ctx.drawImage(e,0,0,200,200);let t=this.ctx.getImageData(0,0,1,1).data;return t[3]<255},this.mountCanvas=e=>{if(e){this.canvas=e,this.ctx=e.getContext("2d");let t=window.devicePixelRatio||1;e.width=200*t,e.height=244*t,this.ctx.scale(t,t);let r=this.hasAlpha(this.image)?Math.max(this.image.width,this.image.height)*Math.SQRT2:Math.min(this.image.width,this.image.height);this.previewScale=200/r,this.renderCanvasContent()}},this.onCanvasDown=e=>{let t=e.nativeEvent;if(0!==t.button)return;e.preventDefault(),document.addEventListener("mousemove",this.onCanvasMove),document.addEventListener("mouseup",this.onCanvasUp);let r=this.canvas.getBoundingClientRect();this.dragState={target:t.pageY-r.top<200?0:1,dragStart:{x:t.pageX,y:t.pageY}},1===this.dragState.target&&(this.updateSliderPosition(t.pageX-r.left),this.renderCanvasContent())},this.onCanvasMove=e=>{if(e.preventDefault(),null!=this.dragState){let t=this.dragState.dragStart;switch(this.dragState.target){case 0:this.previewOffset.x+=e.pageX-t.x,this.previewOffset.y+=e.pageY-t.y;break;case 1:{let r=this.computeImageScaleFactor();this.updateSliderPosition(this.sliderPosition+e.pageX-t.x);let n=this.computeImageScaleFactor();this.previewOffset.x+=(100-this.previewOffset.x)*(1-n/r),this.previewOffset.y+=(100-this.previewOffset.y)*(1-n/r)}}this.renderCanvasContent(),this.dragState.dragStart={x:e.pageX,y:e.pageY}}},this.onCanvasUp=e=>{e.preventDefault(),document.removeEventListener("mousemove",this.onCanvasMove),document.removeEventListener("mouseup",this.onCanvasMove),this.dragState=null},this.buttonRef=e=>{e&&a.findDOMNode(e).focus()}}updateSliderPosition(e){this.sliderPosition=e,this.sliderPosition=Math.max(20,Math.min(this.sliderPosition,180))}computeImageScaleFactor(){let e=(this.sliderPosition-20)/160;return e=1.5*e+-.5,this.previewScale*Math.pow(100,e)}computeImagePosition(e){let t=e/200,r=this.computeImageScaleFactor()*t,n=this.image.width*r,i=this.image.height*r,a=this.previewOffset.x*t-n/2,o=this.previewOffset.y*t-i/2;return{x:a,y:o,width:n,height:i}}renderCanvasContent(){var e,t,r,n,i;let a=this.ctx;a.clearRect(0,0,200,244);let o=this.computeImagePosition(200);a.drawImage(this.image,o.x,o.y,o.width,o.height),a.save(),this.mask(a,this.props.designTokens),a.fillStyle=(null==(e=this.props.designTokens)?void 0:e.colorBg)||y.Lfe,a.fillRect(0,200,200,44);a.strokeStyle=(null==(t=this.props.designTokens)?void 0:t.colorIcon)||y._4i,a.beginPath(),a.moveTo(20,234),a.lineTo(180,234),a.closePath(),a.lineWidth=1,a.stroke();a.fillStyle=(null==(r=this.props.designTokens)?void 0:r.colorIcon)||"#333",a.strokeStyle=(null==(n=this.props.designTokens)?void 0:n.colorBorder)||"#777",a.beginPath(),a.moveTo(this.sliderPosition-4,226),a.lineTo(this.sliderPosition+4,226),a.lineTo(this.sliderPosition+4,238),a.lineTo(this.sliderPosition,242),a.lineTo(this.sliderPosition-4,238),a.closePath(),a.fill(),a.stroke(),a.fillStyle=(null==(i=this.props.designTokens)?void 0:i.colorIcon)||y.zNr,a.font="20px Arial",a.textBaseline="top";let l=a.measureText("+");a.fillText("-",0,222),a.fillText("+",200-l.width,222)}render(){return this.state.hasImageLoaded?i.createElement(f.u_,{size:296,className:v.oC,...this.props},i.createElement(s.u,{isLoading:this.props.avatarEditorState.status!==g.kh.POSITIONING},()=>i.createElement("div",{className:v.Tr,style:{textAlign:"center"}},i.createElement("div",{style:{width:"100%"}},i.createElement("canvas",{ref:this.mountCanvas,style:this.canvasStyle,onMouseDown:this.onCanvasDown})),i.createElement("div",{style:{marginTop:24,textAlign:"center"}},i.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",display:"inline-block"}},i.createElement(l.RS,{onClick:this.startUpload,className:v.iY,ref:this.buttonRef,trackingProperties:{trackingDescriptor:m.y.SAVE_PROFILE_PICTURE}},i.createElement(d.Tx,{id:"avatar_editor.save_image"}))))))):null}}w.displayName="AvatarEditorModal";let S=function(e){return i.createElement(s.u,{isLoading:e.avatarEditorState.status!==g.kh.POSITIONING},()=>i.createElement(w,{...e,avatarEditorState:e.avatarEditorState,onAvatarSet:e.onAvatarSet,designTokens:e.designTokens}))},C="AVATAR_EDITOR_MODAL";(0,E.QR)(C,e=>i.createElement(_.fd.Consumer,null,t=>i.createElement(S,{designTokens:t,avatarEditorState:e.avatarEditorState,onAvatarSet:e.modalShown.data.onAvatarSet,dispatch:e.dispatch})))},470787:(e,t,r)=>{r.d(t,{LJ:()=>g,Lo:()=>f,bg:()=>E,rm:()=>y});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(618723),c=r(435613),d=r(970740),u=r(494029),p=r(225468),m=r(661829);let h=r(382814);var _=((n=_||{}).AUTO="auto",n.CONSTRAINED="constrained",n);function g(e){let t=(0,a.I0)(),r=i.useCallback(()=>{t(u.p({}))},[t]),n=e.width||"constrained",o=l()(m.LI,{[m.TE]:"constrained"===n});return i.createElement("div",{"data-not-draggable":!0},i.createElement(s.PL,{onClick:r,className:o},e.children))}function f(){let e=(0,a.I0)(),t=i.useCallback(t=>{t.stopPropagation(),e(u.p({}))},[e]);return i.createElement("button",{className:m.R0,onClick:t},i.createElement(d.Tx,{id:"community.buyer.update_payment"}))}function E(){return i.createElement("div",{className:m.tO,"data-tooltip-type":p.fR.TEXT,"data-tooltip":(0,d.t)("community.buyer.update_payment_info_to_retain_access")},i.createElement(c.n,{svg:h}))}function y(){return i.createElement("div",{className:m.Cg,"data-not-draggable":!0},i.createElement("div",{className:m.tO},i.createElement(c.n,{svg:h})),i.createElement("div",{className:m.z$},i.createElement(d.Tx,{id:"community.buyer.update_payment_info"})),i.createElement("div",{className:m.LV},i.createElement(g,{width:"auto"},i.createElement(d.Tx,{id:"community.buyer.go_to_stripe"}))))}},60525:(e,t,r)=>{r.d(t,{$e:()=>i,AN:()=>o,MM:()=>a,Ub:()=>d,XB:()=>l,Zo:()=>c,xP:()=>s});var n=r(652983);function i(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6C7.79086 6 6 7.79086 6 10V30C6 32.2091 7.79086 34 10 34H30C32.2091 34 34 32.2091 34 30V10C34 7.79086 32.2091 6 30 6H10ZM8 10C8 8.89543 8.89543 8 10 8H14V15H8V10ZM14 17H8V23H14V17ZM16 23V17H32V23H16ZM14 25H8V30C8 31.1046 8.89543 32 10 32H14V25ZM16 32V25H32V30C32 31.1046 31.1046 32 30 32H16ZM16 15V8H30C31.1046 8 32 8.89543 32 10V15H16Z",fill:"black",fillOpacity:"0.9"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function a(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),n.createElement("path",{d:"M12 15L6 20L12 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("path",{d:"M28 15L34 20L28 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("rect",{x:"22.2002",y:"10",width:"2",height:"20",transform:"rotate(18 22.2002 10)",fill:"black",fillOpacity:"0.9"}))}function o(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 8H15V6H25V8ZM31 22C31 28.0751 26.0751 33 20 33C13.9249 33 9 28.0751 9 22C9 15.9249 13.9249 11 20 11C26.0751 11 31 15.9249 31 22ZM33 22C33 29.1797 27.1797 35 20 35C12.8203 35 7 29.1797 7 22C7 14.8203 12.8203 9 20 9C23.0804 9 25.9105 10.0714 28.1382 11.8618L31 9L34.5355 12.5355L31.3731 15.698C32.4097 17.5647 33 19.7134 33 22ZM21 22V14H19V22C19 22.5523 19.4477 23 20 23C20.5523 23 21 22.5523 21 22Z",fill:"black",fillOpacity:"0.9"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function l(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C6 7.79086 7.79086 6 10 6H30C32.2091 6 34 7.79086 34 10V21.1632V30C34 32.2091 32.2091 34 30 34H14.3864H10C7.79086 34 6 32.2091 6 30V10ZM10 8C8.89543 8 8 8.89543 8 10V23.1195L13.7151 15.8804L14.4948 14.8927L15.2809 15.8753L20.7081 22.6594L25.9453 19.1679L26.6001 18.7314L27.1783 19.2652L32 23.716V21.1632V10C32 8.89543 31.1046 8 30 8H10ZM8 30V26.3472L14.5052 18.1073L19.7191 24.6247L20.2919 25.3406L21.0547 24.8321L26.3999 21.2686L32 26.4378V30C32 31.1046 31.1046 32 30 32H14.3864H10C8.89543 32 8 31.1046 8 30ZM24 17C25.6569 17 27 15.6569 27 14C27 12.3431 25.6569 11 24 11C22.3431 11 21 12.3431 21 14C21 15.6569 22.3431 17 24 17Z",fill:"black",fillOpacity:"0.9"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function s(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6C7.79086 6 6 7.79086 6 10V30C6 32.2091 7.79086 34 10 34H14.3864H30C32.2091 34 34 32.2091 34 30V21.1632V10C34 7.79086 32.2091 6 30 6H10ZM8 10C8 8.89543 8.89543 8 10 8H30C31.1046 8 32 8.89543 32 10V14H8V10ZM8 16V30C8 31.1046 8.89543 32 10 32H14.3864H30C31.1046 32 32 31.1046 32 30V21.1632V16H8ZM13 11C13 12.1046 12.1046 13 11 13C9.89543 13 9 12.1046 9 11C9 9.89543 9.89543 9 11 9C12.1046 9 13 9.89543 13 11ZM17 19.9207V27.0793C17 27.4911 17.4435 27.7505 17.8024 27.5486L24.1657 23.9693C24.5316 23.7635 24.5316 23.2365 24.1657 23.0307L17.8024 19.4514C17.4435 19.2495 17 19.5088 17 19.9207Z",fill:"black",fillOpacity:"0.9"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function c(){return n.createElement("svg",{width:40,height:40,fill:"none"},n.createElement("rect",{width:40,height:40,rx:8,fill:"#fff"}),n.createElement("rect",{x:.5,y:.5,width:39,height:39,rx:7.5,stroke:"#000",strokeOpacity:.2}),n.createElement("circle",{cx:16.5,cy:16.5,r:1.5,fill:"#000"}),n.createElement("circle",{cx:23.5,cy:16.5,r:1.5,fill:"#000"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.549 20H14.074C13.5 20 13 20.424 13 21a7.002 7.002 0 005.97 6.925c.218-.667.484-1.312.796-1.93A5.002 5.002 0 0115.1 22h7.674a14.038 14.038 0 012.775-2z",fill:"#000"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.28 19.28c-7.18 0-13 5.82-13 13 0 .241.006.481.019.72L33 19.299a13.15 13.15 0 00-.72-.02z",fill:"#000"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.34 30.92c-.439.052-.886.08-1.34.08-6.075 0-11-4.925-11-11S13.925 9 20 9s11 4.925 11 11c0 .454-.027.901-.08 1.34l2.06-2.06C32.606 12.434 26.938 7 20 7 12.82 7 7 12.82 7 20c0 6.938 5.435 12.606 12.28 12.98l2.06-2.06z",fill:"#000"}))}function d(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),n.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),n.createElement("rect",{x:"5",y:"17",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),n.createElement("rect",{x:"24",y:"9",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),n.createElement("rect",{x:"24",y:"25",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),n.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 18.2091 19.5 16V16C19.5 13.7909 21.2909 12 23.5 12H24",stroke:"black",strokeWidth:"2"}),n.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 21.7909 19.5 24V24C19.5 26.2091 21.2909 28 23.5 28H24",stroke:"black",strokeWidth:"2"}))}},59293:(e,t,r)=>{r.d(t,{AT:()=>K,Gj:()=>V,Jw:()=>L,LJ:()=>H,UF:()=>N,Zt:()=>M,_N:()=>D,_o:()=>S,eC:()=>W,eO:()=>P,f:()=>k,i1:()=>z,n2:()=>x,oF:()=>F,pp:()=>G,sb:()=>R,tU:()=>B});var n=r(652983),i=r(407908),a=r(172497),o=r(365653),l=r(716250),s=r(217810),c=r(518484),d=r(970740),u=r(289629),p=r(249683),m=r(298715),h=r(999177),_=r(322186),g=r(70918),f=r(436649),E=r(948150),y=r(597694),v=r(661539),b=r(358156),I=r(12875),T=r(272583),w=r(332224);let S=e=>{let t=[(0,d.t)("whiteboard.inserts.search_placeholder_1"),(0,d.t)("whiteboard.inserts.search_placeholder_2"),(0,d.t)("whiteboard.inserts.search_placeholder_3"),(0,d.t)("whiteboard.inserts.search_placeholder_4"),(0,d.t)("whiteboard.inserts.search_placeholder_5"),(0,d.t)("whiteboard.inserts.search_placeholder_6"),(0,d.t)("whiteboard.inserts.search_placeholder_7"),(0,d.t)("whiteboard.inserts.search_placeholder_8")];return"en"===e&&(t=t.concat([(0,d.t)("whiteboard.inserts.search_placeholder_9"),(0,d.t)("whiteboard.inserts.search_placeholder_10"),(0,d.t)("whiteboard.inserts.search_placeholder_11"),(0,d.t)("whiteboard.inserts.search_placeholder_12")])),t[Math.floor(Math.random()*t.length)]},C=(0,a.z)(w.JZB),O=(0,a.z)(w.XYt),A=(0,a.z)(w.yWh),N=(0,a.z)(w.hwz),L=(0,a.z)(w.o6Q)+(0,a.z)(w.IQ7)+5,P=(0,a.z)(w.APC),R=(0,a.z)(w.bM1),k=62,D=new c.OW(N,N+C),M=(e,t,r)=>{let n=e===b.e.PINNED_AND_DOCKED_LEFT&&window.innerWidth>=A?0:2*N+O,i=window.innerHeight-r-C-2*N-n;return e===b.e.PINNED_AND_DOCKED_LEFT?i:Math.min(t,i)};function F(e,t,r,n){let a=(0,i.v9)(e=>e.figjamDefaultInserts),o=a[t],l=[];for(let n of o)r(n,e)&&("templates"===t?l.push({type:E.W.HubFile,template:n}):l.push(n));return e.push(...l),e.slice(0,n)}function x(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(!1);return t.every(e=>!!e)&&!i.current&&(r.current=e,i.current=!0),null!==r.current?r.current:e}function U(e,t){let r=new Map(e.map(e=>{var r;return[e.key,(r=1e4*Math.sin(t++))-Math.floor(r)]}));return e.sort((e,t)=>{let n=r.get(e.key)||0,i=r.get(t.key)||0;return n>i?1:n<i?-1:0})}let B=()=>{let e=(0,i.I0)(),{openFile:t,fileVersion:r,fileByKey:a,loadingState:s,library:c}=(0,o.c)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,fileByKey:e.fileByKey,sceneGraphSelection:e.mirror.sceneGraphSelection,loadingState:e.loadingState,library:e.library})),d=(0,g.dO)()||"";n.useEffect(()=>{e(p.Gv({shouldSearchDefaultLibraries:!0}))},[e]);let u=t&&r&&(0,f.d4)(s,(0,T.O1)(t.key));n.useEffect(()=>{u&&e(p.Il({}))},[e,u]);let m=(null==t?void 0:t.key)||null,_=(0,h.eV)(null==t?void 0:t.project),E=n.useMemo(()=>{let e;let t=(0,I.m1)(c,m,a,_),r=(0,I.Wp)(c,m,a,_),n=new Set(r.subscribedFiles.map(e=>e.key)),i=t.subscribedFiles.filter(e=>!n.has(e.key));e=window.location.origin.includes("staging.figma.com")?"3oeQNbicdVK70ytqmfZJhR":"AglYtWdfaNikShoD8HZ8pJ";let o=r.subscribedFiles.find(t=>t.key===e);if(o&&(0,l.BZ)().figjam_ngima_stickers){let t=r.subscribedFiles.filter(t=>t.key!==e),n=U(t,parseInt(d)%1e3);n.unshift(o),r.subscribedFiles=n}else r.subscribedFiles=U(r.subscribedFiles,parseInt(d)%1e3);return{subscribedFiles:[...i,...r.subscribedFiles],fileKeyToSubscribedItems:{...t.fileKeyToSubscribedItems,...r.fileKeyToSubscribedItems}}},[c,m,a,d,_]);return E},V=()=>{let e=(0,_.Ng)(),t=!!(e&&e.plugins_whitelist_enforced),r=!!(e&&e.widgets_whitelist_enforced);return!t&&!r},G=n.createContext(null),H=()=>(0,s.LG)(n.useContext(G),"Must be wrapped within <FigJamBrowseResourceModalContext.Provider>");function W(e){return e.filter(e=>e.editor_type===v.yA.UNIVERSAL||e.editor_type===v.yA.FIGJAM)}function K(){let e=(0,m.dZ)(),t=(0,i.v9)(e=>e.communityPayments);return Z(e,t)}function z(){let e=(0,m.DG)(),t=(0,i.v9)(e=>e.communityPayments);return Z(e,t)}function Z(e,t){return function(r){let n=r.plugin_id,i=e[n];if(!i||!i.monetized_resource_metadata)return!0;let a=t[i.monetized_resource_metadata.id]||i.community_resource_payment;return!a||!(0,u.z2)(a,y.Cy.PENDING)}}},448816:(e,t,r)=>{r.d(t,{R:()=>h});var n=r(652983),i=r(87608),a=r.n(i),o=r(571529),l=r(204829),s=r(564380),c=r(435613),d=r(212984),u=r(970740),p=r(225468);let m=r(689742);function h(e){return n.createElement(s.yh,{className:a()("pin_button--pinButton--FRpn1",{[d.cx.ml8.$]:!e.noMargin}),onClick:o.ZP.isIpad?void 0:e.setPinned,onPointerDown:t=>o.ZP.isIpad?e.setPinned():void 0,"data-tooltip-type":p.fR.TEXT,"data-tooltip":(0,u.t)("whiteboard.inserts.dock_to_side"),recordingKey:l.ar("universalInsert","pin"),dataTestId:"universal-insert-modal-popout-button","data-not-draggable":!0},n.createElement(c.n,{svg:m}))}},111631:(e,t,r)=>{r.d(t,{F:()=>k,N:()=>R});var n=r(652983),i=r(63730),a=r(407908),o=r(87608),l=r.n(o),s=r(564380),c=r(518484),d=r(307425),u=r(158774),p=r(961215),m=r(466371),h=r(177610),_=r(607907),g=r(255267),f=r(425285),E=r(238695),y=r(70918),v=r(938110),b=r(225468),I=r(415850),T=r(264505),w=r(475042),S=r(707041),C=r(511978);let O="face_stamps--stamp--W89mK",A="face_stamps--miniStampContainer--SDVwN",N="face_stamps--stampContainer--pSzJJ",L="face_stamps--faceLabel--L-WBK ellipsis--ellipsis--Tjyfa";function P({children:e,mini:t,user:r,figjamIaRedesignVersion:i}){return t?"v2"!==i?n.createElement("div",{"data-tooltip-type":b.fR.TEXT,"data-tooltip":r.name||r.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-above":!0,className:l()(N,A)},e):n.createElement("div",{className:l()(N,A)},e):n.createElement("div",{"data-tooltip-type":b.fR.TEXT,"data-tooltip":r.name||r.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:l()(N)},e)}function R({user:e,hideName:t,mini:r,searchQuery:i,triggeredFrom:o}){let l=e.hi_res_img_url||e.img_url,s=`${l}?c=1`,b=(0,I.hx)(e.id,I.dn),C=(0,T.mM)(s,e.name||e.handle||"",b),A=(0,y.dO)(),N=(0,S._s)(A),L=(0,w.M)(),R=(0,a.I0)(),x=n.useCallback(()=>{R(d.ho({currentUserId:A??void 0,storeInRecentsKey:v.xQ.FigJam,item:{id:e.id,user:e,type:v._g.FaceStamp}}))},[A,R,e]),{dragState:U,onInsertableResourcePointerDown:B}=function(e){let t="whiteboard"===(0,f.fg)(),r=(0,E.hH)(),n=async n=>(e.insertAction(n),t&&(0,E.FL)({type:g.E.ORG_FACE_STAMPS,source:e.triggeredFrom,options:{...r,query:e.searchQuery}}),await Promise.resolve());return(0,h.V)(e,{insertAction:n,dragPreviewPointerPosition:_.q.RELATIVE,getDragPreviewSrc:()=>{let t=(0,m.Dq)(e.icon);return t.replace('<img src="',"").substring(0,t.replace('<img src="',"").indexOf('" '))},recordingKey:`insertable-facestamp-${e.resource.id}-${e.mini?"mini":"full"}`})}({icon:n.createElement("img",{src:C,className:O,alt:`profile stamp for ${e.name}`}),insertAction:t=>{let{dropPosition:r,isClick:n,type:i}=t;if(n||"click"===i){let t=u.Gr.getViewportInfo();(0,T.kx)(C,t.offsetX,t.offsetY,e.id,"click",p.Od1.USER),x()}else{let n=t.pointerPercentageOffset?t.pointerPercentageOffset.x:0,i=t.pointerPercentageOffset?t.pointerPercentageOffset.y:0,a=new c.OW(50,50),o=r.subtract(new c.OW(n*a.x,i*a.y)).subtract(new c.OW(5,5));(0,T.kx)(C,o.x,o.y,e.id,"drag",p.Od1.USER),x()}},clickToInsert:"v2"!==N||!r,afterSuccessfulInsert:L,resource:{id:e.id,name:e.name||"",img:C},triggeredFrom:o,searchQuery:i,mini:r});return r&&!C?null:n.createElement(P,{mini:r,user:e,figjamIaRedesignVersion:N},C?n.createElement(n.Fragment,null,n.createElement(M,{stampImageUrl:C,username:e.name||"",onPointerDown:B,dragging:null!==U,mini:r}),n.createElement(F,{dragState:U,imageUrl:C}),!t&&n.createElement(D,{username:e.name||e.handle||""})):n.createElement(n.Fragment,null,n.createElement(k,{mini:r}),!t&&n.createElement(D,{username:""})))}function k({mini:e}={}){return n.createElement("div",{className:l()(N,{[A]:e,"face_stamps--nonMiniStampPlaceholderContainer--QGaUd":!e})},n.createElement("div",{className:l()("face_stamps--stampImagePlaceholder--pXueE",O)}),!e&&n.createElement("div",{className:l()("face_stamps--faceLabelPlaceholder--E9aYz",L)}))}function D({username:e}){return n.createElement("div",{title:e,className:L},e)}function M(e){return n.createElement(s.sq,{recordingKey:"facestamp",dataTestId:`facestamp-${e.username}${e.mini?"-mini":""}`,onPointerDown:e.onPointerDown},n.createElement("img",{draggable:!1,src:e.stampImageUrl,className:l()(O,{"face_stamps--draggingCopy--iNJaR":e.dragging,"face_stamps--miniStamp--8eY9E":e.mini}),alt:`profile stamp for ${e.username}`}))}function F(e){var t;if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=u.Gr.getViewportInfo();return new c.OW(50,50).scale(e)}(),a=e.dragState.dragPosition.subtract(new c.OW(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,i.createPortal)(n.createElement("img",{alt:"",className:l()(C.q3,{[C.SC]:e.dragState.isDraggingOverCanvas}),style:{left:a.x,top:a.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},96965:(e,t,r)=>{r.d(t,{bE:()=>s,hi:()=>c,n5:()=>p,st:()=>u});var n=r(652983),i=r(407908),a=r(363400),o=r(413810),l=r(938110);function s(){let e=!!(0,i.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.org}),t=(0,i.v9)(e=>(0,o.Ij)(e.selectedView)&&!e.user);return!!(e&&!t)}let c=(e,t=20)=>{let r=u(e),a=(0,i.v9)(e=>e.faceStamps);return n.useMemo(()=>{let e=new Map;return r.forEach(t=>{e.set(t.id,t)}),a.forEach(t=>{e.set(t.id,t)}),Array.from(e.values()).slice(0,t)},[t,r,a])},d=(e,t)=>(e.name||"").toLowerCase().includes(t.toLowerCase())||(e.handle||"").toLowerCase().includes(t.toLowerCase())||(e.email||"").toLowerCase().split("@")[0].includes(t.toLowerCase()),u=e=>{let t=(0,i.v9)(e=>e.recentlyUsed.faceStamps[l.xQ.FigJam]);return n.useMemo(()=>t.map(e=>e.user).filter(t=>!e||d(t,e)),[t,e])};function p(){let e=(0,i.v9)(e=>e.recentlyUsed.faceStamps),t=s(),r=(0,a.W)();return n.useMemo(()=>r&&t?e.figjam.map(e=>e.user):[],[r,e,t])}},180579:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(652983),i=r(564380);function a({text:e,description:t,onClick:r,onPointerDown:a,iconComponent:o,recordingKey:l,rightCaret:s}){return n.createElement(i.sq,{recordingKey:l,dataTestId:l,onClick:r,onPointerDown:a,className:"native_figjam_action_block--optionContainer--PAZPH"},n.createElement("div",{className:"native_figjam_action_block--actionBlockLeftSide--lGAtd native_figjam_action_block--actionBlockRightSide--lUQRE"},n.createElement("div",{className:"native_figjam_action_block--iconComponent--nQLDP"},o)),n.createElement("div",{className:"native_figjam_action_block--actionBlockRightSide--lUQRE"},n.createElement("div",{className:"native_figjam_action_block--textRow--yGuij"},n.createElement("div",{className:"native_figjam_action_block--text--S9XDd text--fontPos13--xW8hS text--_fontBase--QdLsd"},e)),n.createElement("div",{className:"native_figjam_action_block--description--FdkF2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},t)),s&&n.createElement("svg",{className:"native_figjam_action_block--rightCaret--mk9xP",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.46967 2.46967L0.96967 6.96967L2.03033 8.03033L6 4.06066L9.96967 8.03033L11.0303 6.96967L6.53033 2.46967L6 1.93934L5.46967 2.46967Z",fill:"black"})))}},39677:(e,t,r)=>{r.d(t,{AK:()=>W,HL:()=>Z,NQ:()=>Y,hA:()=>K,p9:()=>H,To:()=>z,eZ:()=>G});var n=r(652983),i=r(407908),a=r(204829),o=r(970740),l=r(513289),s=r(721127),c=r(307425),d=r(961215),u=r(269075),p=r(187436),m=r(63730),h=r(87608),_=r.n(h),g=r(511978);function f(e){var t,r;if(!(null==(t=e.dragState)?void 0:t.dragPosition)||!(null==(r=e.dragState)?void 0:r.dragOffset))return null;let i=e.dragState.dragPosition.subtract(e.dragState.dragOffset);return(0,m.createPortal)(n.createElement("div",{className:_()(g.mc,{[g.SC]:e.dragState.isDraggingOverCanvas}),style:{left:i.x,top:i.y,width:e.dragState.draggingThumbSize.x,height:e.dragState.draggingThumbSize.y}},e.icon),document.getElementById("fullscreen-root"))}var E=r(509382),y=r(466371),v=r(177610),b=r(607907),I=r(255267),T=r(425285),w=r(238695);function S(e){let t="whiteboard"===(0,T.fg)(),r=(0,w.hH)(),n=async n=>(e.insertAction(n),t&&(0,w.FL)({type:I.E.MORE,id:e.resource,source:e.triggeredFrom,options:{...r,query:e.searchQuery}}),await Promise.resolve());return(0,v.V)(e,{insertAction:n,dragPreviewPointerPosition:b.q.CENTERED,getDragPreviewSrc:()=>"data:image/svg+xml;utf8,"+(0,y.Dq)(e.icon),recordingKey:a.ar("more",e.resource.toLowerCase())})}var C=r(936126),O=r(3342),A=r(938110),N=r(60525),L=r(180579),P=r(475042),R=r(689254),k=r(614543),D=r(59293);let M=N.$e(),F=N.MM(),x=N.AN(),U=N.XB(),B=N.xP(),V=N.Ub();function G(e){let t=function(e){switch(e){case"Table":return d.UAh.TABLE;case"CodeBlock":return d.UAh.CODE_BLOCK;case"MindMap":return d.UAh.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;default:throw Error(`Unknown tool: ${e}`)}}(e);return e=>{let{dropPosition:r,isClick:n}=e;n?d.iTB.createNodeAtViewportCenterFromTool(t):d.iTB.createNodeFromTool(t,r.x,r.y)}}function H(){let e=(0,P.M)(),t=(0,i.I0)(),r=(0,i.v9)(e=>{var t;return null==(t=e.user)?void 0:t.id}),{currentTab:l,searchQuery:s}=(0,D.LJ)(),d=()=>{t(c.no({currentUserId:r,storeInRecentsKey:A.xQ.FigJam,item:{id:"Table",type:A._g.WhiteboardTool}})),e()},{dragState:u,onInsertableResourcePointerDown:p}=(0,C.sQ)({resource:"Table",insertAction:e=>{let t=G("Table");t(e),d()},clickToInsert:!0,afterSuccessfulInsert:d,triggeredFrom:(0,O.s)(l),searchQuery:s});return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.table_title"),description:(0,o.t)("whiteboard.inserts.table_description"),onPointerDown:p,iconComponent:M,recordingKey:a.ar("inserts","more","table")}),n.createElement(E.h,{dragState:u}))}function W(){let e=(0,P.M)(),t=(0,i.I0)(),r=(0,i.v9)(e=>{var t;return null==(t=e.user)?void 0:t.id}),{currentTab:l,searchQuery:s}=(0,D.LJ)(),d=()=>{t(c.no({currentUserId:r,storeInRecentsKey:A.xQ.FigJam,item:{id:"CodeBlock",type:A._g.WhiteboardTool}})),e()},{dragState:u,onInsertableResourcePointerDown:p}=(0,C.sQ)({resource:"CodeBlock",insertAction:e=>{let t=G("CodeBlock");t(e),d()},clickToInsert:!0,afterSuccessfulInsert:d,triggeredFrom:(0,O.s)(l),searchQuery:s});return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.code_block_title"),description:(0,o.t)("whiteboard.inserts.code_block_description"),onPointerDown:p,iconComponent:F,recordingKey:a.ar("inserts","more","codeBlock")}),n.createElement(E.h,{dragState:u}))}function K(){let e=(0,P.M)(),t=(0,i.I0)(),r=(0,i.v9)(e=>{var t;return null==(t=e.user)?void 0:t.id}),{currentTab:l,searchQuery:s}=(0,D.LJ)(),d=()=>{t(c.no({currentUserId:r,storeInRecentsKey:A.xQ.FigJam,item:{id:"MindMap",type:A._g.WhiteboardTool}})),e()},p=u.UJ.user("insert-mindmap",e=>{let t=G("MindMap");t(e),d()}),{dragState:m,onInsertableResourcePointerDown:h}=(0,C.sQ)({resource:"MindMap",insertAction:p,clickToInsert:!0,afterSuccessfulInsert:d,triggeredFrom:(0,O.s)(l),searchQuery:s});return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.mind_map_title"),description:(0,o.t)("whiteboard.inserts.mind_map_description"),onPointerDown:h,iconComponent:V,recordingKey:a.ar("inserts","more","mindMap")}),n.createElement(E.h,{dragState:m}))}function z(){let e=(0,P.M)(),{currentTab:t,searchQuery:r}=(0,D.LJ)(),i=(0,k.OC)(),{dragState:l,onInsertableResourcePointerDown:s}=S({resource:"Timer",icon:x,insertAction:()=>{i({source:k._i.INSERTS_MENU}),e()},clickToInsert:!0,afterSuccessfulInsert:e,triggeredFrom:(0,O.s)(t),searchQuery:r});return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.timer_title"),description:(0,o.t)("whiteboard.inserts.timer_description"),onPointerDown:s,iconComponent:x,recordingKey:a.ar("inserts","more","timer")}),n.createElement(f,{icon:x,dragState:l}))}function Z(){var e;let t=(0,i.I0)(),r=(0,P.M)(),{currentTab:s,searchQuery:c}=(0,D.LJ)(),u=()=>{d.iTB.triggerAction("set-tool-default",null),d.iTB.triggerAction("place",{source:"MEDIA_MODAL"}),t(l.pe({open:!0})),r()},{dragState:m,onInsertableResourcePointerDown:h}=S({resource:"Image",icon:U,insertAction:u,clickToInsert:!0,afterSuccessfulInsert:r,triggeredFrom:(0,O.s)(s),searchQuery:c}),_=!(null==(e=(0,p.zM)())?void 0:e.shouldOptimizeForIpadApp);return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.media_title"),description:(0,o.t)("whiteboard.inserts.media_description"),onPointerDown:_?h:void 0,onClick:_?void 0:u,iconComponent:U,recordingKey:a.ar("inserts","more","images")}),n.createElement(f,{icon:U,dragState:m}))}function Y(){let e=(0,i.I0)(),t=(0,P.M)(),{currentTab:r,searchQuery:l}=(0,D.LJ)(),{dragState:c,onInsertableResourcePointerDown:u}=S({resource:"Link",icon:B,insertAction:()=>{d.iTB.triggerAction("set-tool-default",null),e(s.bF({type:R.Ih.type,data:{shouldMountCenter:!0}})),t()},clickToInsert:!0,afterSuccessfulInsert:t,triggeredFrom:(0,O.s)(r),searchQuery:l});return n.createElement(n.Fragment,null,n.createElement(L.G,{text:(0,o.t)("whiteboard.inserts.links_title"),description:(0,o.t)("whiteboard.inserts.links_description"),onPointerDown:u,iconComponent:B,recordingKey:a.ar("inserts","more","links")}),n.createElement(f,{icon:B,dragState:c}))}},327732:(e,t,r)=>{r.d(t,{Y:()=>n});let n=`data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M15 23L18 9L17.0222 8.79047L14.0222 22.7905L15 23ZM12.304 12.2072L8.414 16.0962L12.303 19.9852L11.596 20.6922L7 16.0962L7.354 15.7432L11.596 11.5002L12.304 12.2072ZM24.546 15.7432L20.304 11.5002H20.303L19.596 12.2072L23.486 16.0962L19.596 19.9852L20.303 20.6922L24.9 16.0962L24.546 15.7432Z" fill="black" fill-opacity="0.3"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.92869 31.7293L6.18693 30.7632C6.7641 30.9175 7.37164 31 8 31H9.77778V32H8C7.28368 32 6.58934 31.9059 5.92869 31.7293ZM22.2222 32V31H24C24.6284 31 25.2359 30.9175 25.8131 30.7632L26.0713 31.7293C25.4107 31.9059 24.7163 32 24 32H22.2222ZM28.0006 30.9294L27.4998 30.0638C28.5625 29.449 29.449 28.5625 30.0638 27.4998L30.9294 28.0006C30.227 29.2147 29.2147 30.227 28.0006 30.9294ZM32 9.77778H31V8C31 7.37164 30.9175 6.7641 30.7632 6.18693L31.7293 5.9287C31.9059 6.58934 32 7.28368 32 8V9.77778ZM30.9294 3.99936L30.0638 4.50017C29.449 3.43754 28.5625 2.55101 27.4998 1.93619L28.0006 1.07063C29.2147 1.77305 30.227 2.78535 30.9294 3.99936ZM9.77778 0H8C7.28368 0 6.58934 0.0941465 5.9287 0.270741L6.18693 1.23682C6.7641 1.08254 7.37164 1 8 1H9.77778V0ZM3.99936 1.07063L4.50017 1.93619C3.43754 2.55101 2.55101 3.43754 1.93619 4.50017L1.07063 3.99936C1.77305 2.78535 2.78535 1.77305 3.99936 1.07063ZM0 22.2222H1V24C1 24.6284 1.08254 25.2359 1.23682 25.8131L0.270741 26.0713C0.0941465 25.4107 0 24.7163 0 24V22.2222ZM1.07063 28.0006L1.93619 27.4998C2.55101 28.5625 3.43754 29.449 4.50017 30.0638L3.99936 30.9294C2.78535 30.227 1.77305 29.2147 1.07063 28.0006ZM0 20.4444H1V16.8889H0V20.4444ZM0 15.1111H1V11.5556H0V15.1111ZM0 9.77778H1V8C1 7.37164 1.08254 6.7641 1.23682 6.18693L0.270741 5.92869C0.0941466 6.58934 0 7.28368 0 8V9.77778ZM11.5556 0V1H15.1111V0H11.5556ZM16.8889 0V1H20.4444V0H16.8889ZM22.2222 0V1H24C24.6284 1 25.2359 1.08254 25.8131 1.23682L26.0713 0.270741C25.4107 0.0941466 24.7163 0 24 0H22.2222ZM32 11.5556H31V15.1111H32V11.5556ZM32 16.8889H31V20.4444H32V16.8889ZM32 22.2222H31V24C31 24.6284 30.9175 25.2359 30.7632 25.8131L31.7293 26.0713C31.9059 25.4107 32 24.7163 32 24V22.2222ZM20.4444 32V31H16.8889V32H20.4444ZM15.1111 32V31H11.5556V32H15.1111Z" fill="black" fill-opacity="0.3"/>
</svg>
`},835409:(e,t,r)=>{r.d(t,{BZ:()=>N,EF:()=>G,Ei:()=>V,Fx:()=>W,Hq:()=>K,On:()=>j,PE:()=>ee,Ty:()=>B,UF:()=>D,Ub:()=>H,Uj:()=>ei,Wp:()=>$,XD:()=>R,XT:()=>J,_s:()=>x,_t:()=>z,eh:()=>U,fQ:()=>en,fi:()=>k,gA:()=>X,g_:()=>q,ie:()=>F,nI:()=>er,ox:()=>Z,q7:()=>Y,r_:()=>ea,vT:()=>P,wU:()=>Q});var n,i,a=r(652983),o=r(407908),l=r(172497),s=r(269658),c=r(716250),d=r(337167),u=r(217810),p=r(523495),m=r(518484),h=r(519781),_=r(212984),g=r(970740),f=r(325558),E=r(955687),y=r(468211),v=r(271774),b=r(801998),I=r(358156),T=r(82873),w=r(668849),S=r(159774),C=r(448816),O=r(332224),A=r(943275);let N=(0,l.z)(O.A1f),L=(0,l.z)(O.jZh),P=(0,l.z)(O.nS_),R=44,k=(0,l.z)(O.Wb1),D=(0,l.z)(O.eCF),M=(0,l.z)(O.RHn),F=(0,l.z)(O._ve),x="#toolbar-action-component-insert",U="#toolbelt-action-component-insert",B=6,V=10,G=0,H=G+1,W=H+1,K=e=>{let t=$(),r=(0,w.A2)(),n=(0,o.v9)(e=>e.universalInsertModal.pinned),i=(0,d.Dv)(f.E),a=y.bd.getIsExtension();if(a)return i-D-e;if(r)return window.innerHeight-D-e;let l=window.innerHeight-t.y-D-e;return n===I.e.PINNED_AND_DOCKED_LEFT?l:Math.min(L-e,l)},z=a.createContext(null),Z=()=>(0,u.LG)(a.useContext(z),"Must be wrapped within <FdBrowseResourceModalContext.Provider>"),Y=e=>{var t;if(!e)return{x:D,y:D};let r=document.querySelector(U);if(r){let e=r.getBoundingClientRect(),t=e?(null==e?void 0:e.top)-L-6:M;return{x:(null==e?void 0:e.x)||284,y:t}}{let e=null==(t=document.querySelector(x))?void 0:t.getBoundingClientRect();return{x:(null==e?void 0:e.x)||284,y:(null==e?void 0:e.bottom)||M}}},j=()=>{let e=(0,o.v9)(e=>e.mirror.appModel.showUi),t=$(),[r,n]=a.useState(e?new m.OW(284,M):t);return a.useLayoutEffect(()=>{let t=()=>{if(!e)return;let{x:t,y:i}=Y(!0);(t&&r.x!==t||i&&r.y!==i)&&n(new m.OW(t,i))};return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[e,r.x,r.y]),a.useEffect(()=>{e||n(t)},[t,e]),r},$=()=>{let e=(0,v.QF)();return a.useMemo(()=>new m.OW(e.x+D,e.y+D),[e.x,e.y])};function q({containerClassName:e}){let t=(0,o.v9)(e=>e.universalInsertModal.pinned),{closeModal:r,pinModal:n}=Z(),i=t===I.e.NOT_PINNED?a.createElement(C.R,{setPinned:n}):a.createElement(h.PZ,{onClick:r});return a.createElement("div",{className:e},i)}function X(e){var t;if(!(null==(t=e.community_publishers)?void 0:t.accepted)||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,g.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,g.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,g.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}function J(e){let t="community_publishers"in e?e.community_publishers??[]:[],r=t.map(({profile:e})=>e).filter(e=>null!=e).map(e=>{var t,r,n;return(null==(t=e.user)?void 0:t.name)??(null==(r=e.team)?void 0:r.name)??(null==(n=e.org)?void 0:n.name)??""}),n=(0,S.aO)(e.plugin_id,r),i=n.length;if(0===i)return"";let a=n[0];return 1===i?(0,g.t)("community.resource.by_creator",{spaceChar:" ",creator:a}):(0,g.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:a,others:(0,g.t)("community.resource.by_x_others",{numPublishers:i-1})})}function Q(e,t){let r=X(e);if((0,c.BZ)().hide_lego_plugin_run_counts&&t)return r;let n=e.unique_run_count,i=(0,g.t)("community.try.people_use_this",{numPeople:n,numPeopleStr:(0,p.K2)(n)});return`${r}${n>0?` \xb7 ${i}`:""}`}function ee(e,t,r){var n,i;let o;return(0,c.BZ)().hide_lego_plugin_run_counts&&t||(o=a.createElement("div",{className:_.cx.flex.alignCenter.$},!!(null==(n=e.community_rating_stats)?void 0:n.avg_rating)&&a.createElement(a.Fragment,null,a.createElement("div",{className:A.E6},"|"),a.createElement("div",{className:A.nH},a.createElement(T.aj,{metric:null==(i=e.community_rating_stats)?void 0:i.avg_rating}))),a.createElement("div",{className:A.E6},"|"),a.createElement("div",{className:A.nH},a.createElement(T.Pn,{metric:e.unique_run_count})))),a.createElement("div",{className:A.nH},a.createElement("div",{className:_.cx.mr8.$},r||X(e)),o)}var et=((n=et||{}).CONTROL="control",n.ICON="icon",n.LOCATION="location",n.ICON_AND_LOCATION="icon_and_location",n);let er=()=>(0,E.E)("exp_figma_inserts_entry_icon_loc").defaultValue(!1).treatment("icon",!0).treatment("icon_and_location",!0).get(),en=()=>(0,E.E)("exp_figma_inserts_entry_icon_loc").defaultValue(!1).treatment("location",!0).treatment("icon_and_location",!0).get();var ei=((i=ei||{}).CONTROL="control",i.VARIANT_A="variant_a",i.VARIANT_B="variant_b",i);let ea=(e=["variant_a","variant_b"])=>{if(s.V){let e=s.V.getState(),t=(0,b._H)(e);if(t&&(t.plugins_whitelist_enforced||t.widgets_whitelist_enforced||!t.public_plugins_allowed))return!1}let t=(0,E.E)("exp_figma_inserts_nux").defaultValue(!1);return e.forEach(e=>{t.treatment(e,!0)}),t.get()}},592035:(e,t,r)=>{r.d(t,{P:()=>a,x:()=>o});var n,i,a=((n=a||{}).COMPONENT="component",n.PLUGIN="plugin",n.WIDGET="widget",n),o=((i=o||{})[i.MAIN=0]="MAIN",i[i.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",i[i.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",i)},887751:(e,t,r)=>{r.d(t,{jz:()=>M,wZ:()=>B,x5:()=>V,xp:()=>U});var n=r(652983),i=r(407908),a=r(46347),o=r(172497),l=r(76085),s=r(970740),c=r(721127),d=r(864974),u=r(11802),p=r(131826),m=r(754738),h=r(75388),_=r(448694),g=r(70918),f=r(179640),E=r(761767),y=r(948150),v=r(646472),b=r(938110),I=r(291904),T=r(505468),w=r(498266),S=r(358954),C=r(675654),O=r(749951),A=r(860556),N=r(975338),L=r(939263),P=r(916120),R=r(979469),k=r(332224),D=r(594434);function M(e,t){t.editorType=t.editorType||E.gg.WHITEBOARD,e(c.bF({type:B.type,data:t}))}function F(e){let t;let r=e.hideModal,o=e.onTemplateInsertedCurrentFile,p=(0,i.I0)(),_=n.useRef(null),E=(0,g.dO)(),{templates:I,categoryTitles:T,duplicateFile:w,fileKey:S,searchQuery:k,searchTemplatesResult:M,setSearchQuery:F,categoryIds:x,subcategories:U}=(0,R.zE)({source:"browse-templates-modal"}),V=I,{templates:G,categoryIds:H}=(0,R.zE)({templatesShelfType:v.sq.FIGJAM_SIMPLE_TEMPLATES_PICKER}),W={};H.reduce((e,t)=>(e[t]=(0,s.t)("browse_templates_modal_sidebar.get_started"),e),W);let K={...T,...W},z=1===H.length&&(0,u.V3)(E);z&&(V={...G,...V});let[Z,Y]=n.useState(),[j,$]=n.useState(),q=(0,l.xb)(V),X=Z&&Object.values(V).find(e=>e.includes(Z))||[],{insertTemplate:J,isInsertingTemplate:Q}=(0,h.u8)(),ee=(0,i.v9)(e=>Z?e.hubFiles[Z]:null),et=n.useCallback(()=>{"newFile"===e.triggeredFrom&&p(d.v({figjam_templates_picker_new_file_closed:!0})),r?r():p(c.h0(B))},[e.triggeredFrom,p,r]),er=n.useCallback(()=>{o?o():et()},[o,et]);n.useEffect(()=>{let t=x.filter(t=>T[t]===e.initiallySelectedCategoryTitle);1===t.length&&$(t[0])},[x,T,e.initiallySelectedCategoryTitle]),n.useEffect(()=>{var e;null==(e=_.current)||e.scrollTo(0,0),Z&&ee&&(0,m.v)("resource_previewed",{fileKey:S,resourceType:"template",resourceName:(0,f.D3)(ee).name,resourceId:Z,triggeredFrom:"browse-templates-modal",templateType:y.W.HubFile})},[Z,S,ee]);let en=!k,ei=(0,h.Kq)(),ea=(0,h.sA)(),eo=e=>Q(e)||ea(e),el=t=>{if(e.templateInsertionLocation===f.TC.CURRENT_FILE)J({template:t,onSuccess:er,triggeredFrom:"browse-templates-modal"});else switch(t.type){case y.W.HubFile:w(t.template.id);break;case y.W.TeamTemplate:ei({templateIdentifier:{type:b._g.TeamTemplate,file_key:t.template.file_key},templateName:t.template.name,openInNewTab:!0});break;default:(0,a.vE)(t)}};return Z?(t=n.createElement(O.U,{templateId:Z,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:el,isInsertingTemplate:eo(Z),moreTemplateIds:X,selectTemplate:Y}),en=!1):t=k?n.createElement(A.n,{searchQuery:k,hubFileResultIds:M,isInsertingTemplate:eo,onInsertTemplate:el,onPreviewHubFileTemplate:Y}):j===N.x?n.createElement(P.KC,{insertTemplate:el,isInsertingTemplate:eo,templateInsertionLocation:e.templateInsertionLocation}):q?n.createElement(n.Fragment,null):n.createElement(C.r,{templates:V,categoryIds:x,categoryTitles:K,selectedCategory:j,selectCategory:$,enterCommunityUrl:"/community/figjam",templateInsertionLocation:e.templateInsertionLocation,previewHubFile:Y,onInsertTemplate:el,isInsertingTemplate:eo}),n.createElement(n.Fragment,null,n.createElement(L.C,{editorType:e.editorType,triggeredFrom:e.triggeredFrom,searchQuery:k,setSearchQuery:F,previewTemplateId:Z,goBack:()=>Y(void 0),hideModal:et}),n.createElement("div",{className:D.Tr,ref:_},en&&n.createElement(N.G,{categoryIds:x,categoryTitles:K,selectedCategory:j,selectCategory:$,shouldShowMakeSomethingV2:z,makeSomethingCategoryId:z?H[0]:"",triggeredFrom:e.triggeredFrom,subcategories:U}),t))}function x(e){let t=(0,i.I0)(),{hideModal:r,hideTintedModalBackground:a}=e,l=n.useCallback(()=>{r?r():t(c.h0(B))},[t,r]),s="newFile"===e.triggeredFrom,d="whiteboard"===e.editorType?s?D.ri:D.SV:s?D.rD:D.oC,{properties:u,name:m}=(0,p.gx)();return n.createElement(T.u_,{dispatch:t,className:d,backgroundClassName:s?D.N0:void 0,size:(0,o.z)(k.f5x),onHide:()=>{(0,_.T6)({...u,trackingContext:m,text:S.D}),l()},tintedModalBackground:!a},n.createElement(F,{...e}))}function U(e){let t=(0,i.v9)(e=>e.openFile?e.openFile.key:null);return n.createElement(p.Ui,{name:"template_modal_shown",properties:{fileKey:t,source:e.triggeredFrom}},n.createElement(x,{...e}))}let B=(0,I.Y3)(U,"BrowseTemplatesModal"),V="Browse Templates Modal",G=(e=!0,t)=>({modalType:w.w8.WELCOME,trackingContextName:V,element:r=>n.createElement(U,{editorType:E.gg.WHITEBOARD,templateInsertionLocation:f.TC.CURRENT_FILE,triggeredFrom:"newFile",hideModal:t?r.onClickPrimaryCta:r.dismissModal,hideTintedModalBackground:e})});G(),G(!0,!0),G(!1)},513812:(e,t,r)=>{r.d(t,{$t:()=>x,Ie:()=>z,XS:()=>K,db:()=>D,hT:()=>F,iU:()=>W,pz:()=>k,zG:()=>U});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(483243),s=r(46347),c=r(448501),d=r(669277),u=r(767310),p=r(388899),m=r(600802),h=r(594619),_=r(782051),g=r(212984),f=r(970740),E=r(512512),y=r(111120),v=r(448694),b=r(852601),I=r(659994),T=r(809377),w=r(179640),S=r(862610),C=r(948150),O=r(433834),A=r(364404),N=r(167817),L=r(478155),P=r(979469),R=r(594434);function k(e){return n.createElement("div",{className:R.tr},e.children)}function D({template:e}){var t,r;let i=(0,T.L)(),{primaryKey:a}=(0,b.Bs)()(e),o=(null==i?void 0:i.type)===P.Lw&&(null==(t=null==i?void 0:i.data)?void 0:t.templatePrimaryKey)===a;return o&&(null==(r=i.data)?void 0:r.position)?n.createElement(M,{template:e,position:i.data.position}):null}function M({template:e,position:t}){var r,a;let o=(0,i.I0)(),{viewSourceFileUrl:s,duplicateLink:u,primaryKey:p}=(0,b.Bs)()(e),m=e.type===C.W.TeamTemplate,v=(0,d.mU)(S.FileCanView,{key:p},{enabled:m});return n.createElement(h.j.Dropdown,{style:{...t,position:"fixed"}},n.createElement(h.j.Option,{onClick:()=>{o(y.kp()),o(E.fB({url:u}))}},n.createElement(f.Tx,{id:"browse_templates_modal.context_menu.copy_link"})),s&&m&&n.createElement(h.j.Option,{onClick:()=>{o(y.kp()),c.default.redirect(s,"_blank")},disabled:"loading"===v.status||"disabled"===v.status||!(null==(a=null==(r=v.data)?void 0:r.file)?void 0:a.hasPermission)},n.createElement(l.jX,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8},n.createElement("span",null,n.createElement(f.Tx,{id:"browse_templates_modal.context_menu.view_original_file"})),n.createElement(_.TK,{className:g.cx.if("loading"!==v.status,g.cx.invisible).$}))))}function F(e){let{clientMeta:t,imageUrl:r,thumbnailIsSet:i,isWhiteboard:a,name:o,publishers:l,hubFileId:s,resizedThumbnailUrls:c}=(0,b.Bs)()(e.template),d=(0,P.nd)(e.template),u=(0,A.L)();return n.createElement(n.Fragment,null,n.createElement(O.iT,{onContextMenu:d,image:n.createElement(O.fb,{backgroundColor:(0,I.YI)(t)},n.createElement(O.$.Cover,null,n.createElement("button",{className:R.Ir,onClick:e.onInsert,disabled:e.isInsertingTemplate||u})),n.createElement(O.$.Center,null,n.createElement(L.v,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,w.Z4)(e.templateInsertionLocation))),n.createElement(N.Pk,{image:r,isSet:i,isWhiteboard:a,hubFileId:s,alt:o,resizedThumbnailUrls:c})),bottomRow:n.createElement(O.VM.FullMetadata,{name:o,publishers:l,hoverText:e.onPreview?(0,f.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview||p.ZT})}),n.createElement(D,{template:e.template}))}function x(e){let t=(0,i.v9)(t=>t.hubFiles[e.hubFileId]);return n.createElement(F,{template:{template:t,type:C.W.HubFile},onInsert:()=>e.onInsert({template:t,type:C.W.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function U({url:e,fileKey:t}){return n.createElement("a",{href:e,target:"_blank"},n.createElement(m.PL,{className:R.uw,onClick:()=>{(0,v.T6)({fileKey:t,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")}},n.createElement(f.Tx,{id:"browse_templates_modal_content.see_more_in_community"})))}function B(){return n.createElement("div",{className:g.cx.flex.itemsCenter.h40.my8.wFull.$},n.createElement(V,null))}function V(){return n.createElement("div",{className:o()(g.cx.w100.h16.bRadius3.$,R.jE)})}function G({lightness:e="normal"}){let t=function(e){switch(e){case"normal":return R.jE;case"light":return R.Uh;case"lightest":return R.Rc;default:(0,s.vE)(e)}}(e);return n.createElement(O.iT,{image:n.createElement(O.fb,{removeBorder:!0},n.createElement("div",{className:o()(t,g.cx.wFull.hFull.$)})),bottomRow:n.createElement("div",{className:o()(t,g.cx.h16.w100.bRadius3.$)})})}function H({shouldFade:e}){return n.createElement(n.Fragment,null,(0,u.w6)(3).map(t=>{let r="normal";return e&&(r=2===t?"lightest":1===t?"light":"normal"),n.createElement(G,{key:t,lightness:r})}))}function W(){return n.createElement("div",{className:g.cx.px24.$},n.createElement(B,null),n.createElement(k,null,n.createElement(H,null),n.createElement(H,null),n.createElement(H,{shouldFade:!0})))}function K({shouldFade:e}){return n.createElement("div",{className:g.cx.pb20.$},n.createElement("div",{className:g.cx.h24.mb16.$},n.createElement(V,null)),n.createElement(k,null,n.createElement(H,{shouldFade:e})))}function z(){return n.createElement(l.jX,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center"},n.createElement(_.TK,{size:"large"}))}},916120:(e,t,r)=>{r.d(t,{KC:()=>C,Vo:()=>S,fJ:()=>w});var n=r(652983),i=r(87608),a=r.n(i),o=r(5453),l=r(594619),s=r(177944),c=r(435613),d=r(212984),u=r(970740),p=r(367674),m=r(24742),h=r(322186),_=r(801998),g=r(948150),f=r(97049),E=r(532444),y=r(37548),v=r(513812),b=r(594434);let I=r(790070),T=r(792668);function w({filterOptions:e,selectedIds:t,isMyTeamsOnly:r,onFilterChange:i,userTeamOrWorkspaceOrLicenseGroupIds:a,showWorkspaces:s,rightAlignOptions:c=!0}){let h=new Set(t||e.map(e=>e.id)),_=[],g=[],y=[],v=!1;for(let t of e)h.has(t.id)&&y.push(t),(0,m.Qq)(t)?v=!0:a.has(t.id)?_.push(t):g.push(t);(0,o.aV)(_,"name"),(0,o.aV)(g,"name");let b=_.filter(e=>h.has(e.id)),I=g.filter(e=>h.has(e.id)),T=function({filterOptionsCount:e,userMemberFilterOptionsSelected:t,userNonMemberFilterOptionsSelected:r,isMyTeamsOnly:n,showWorkspaces:i,unassignedTeamsSelected:a}){let o=[...t,...r],l=o.length+(a?1:0);return 0===l?(0,u.t)("browse_templates_modal.none_selected"):l===e?i?n?(0,u.t)("browse_templates_modal.my_teams_only"):(0,u.t)("browse_templates_modal.all_workspaces"):(0,u.t)("browse_templates_modal.all_teams"):1===l?a?(0,u.t)("browse_templates_modal.other_teams"):o[0].name:(0,u.t)("browse_templates_modal.first_name_count_more",{count:l-1,firstName:o[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:b,userNonMemberFilterOptionsSelected:I,showWorkspaces:s,isMyTeamsOnly:r,unassignedTeamsSelected:h.has(f.u)}),w=(e,t)=>{i({ids:e?y.reduce((e,r)=>r.id===t.id?e:[...e,r.id],[]):[...y.map(e=>e.id),t.id],myTeamsOnly:r})},S=(e,t)=>{let n=new Set(h);e.forEach(e=>{t?n.add(e.id):n.delete(e.id)}),i({ids:Array.from(n),myTeamsOnly:r})},C=[];if(s){if(C.push(...[..._,...g].filter(e=>!!e.id).map(e=>{let t=h.has(e.id);return n.createElement(l.j.CheckableOptionTrackable,{key:e.id||e.name,checked:t,onClick:()=>{w(t,e)},displayType:l.j.CheckableDisplayType.Checkbox},e.name)})),C.length&&C.unshift(n.createElement(l.j.Separator,{key:"my-teams-only-separator"})),C.unshift(n.createElement(l.j.CheckableOptionTrackable,{key:"my-teams-only",checked:r,onClick:()=>i({ids:t,myTeamsOnly:!r}),displayType:l.j.CheckableDisplayType.Checkmark},n.createElement(u.Tx,{id:"browse_templates_modal.my_teams_only"}))),v){let e=h.has(f.u);C.push(...[n.createElement(l.j.Separator,{key:"unassigned-teams-separator"}),n.createElement(l.j.CheckableOptionTrackable,{key:"unassigned-teams",checked:e,onClick:()=>{w(e,{id:f.u})},displayType:l.j.CheckableDisplayType.Checkbox},n.createElement(u.Tx,{id:"browse_templates_modal.other_teams"}))])}}else _.length>0&&C.push(n.createElement(l.j.CheckableOptionTrackable,{displayType:l.j.CheckableDisplayType.Checkbox,key:"my-teams",checked:_.length===b.length,mixed:_.length>b.length&&b.length>0,onClick:()=>{S(_,b.length<_.length)}},n.createElement(u.Tx,{id:"browse_templates_modal.my_teams"}))),C.push(..._.map(e=>{let t=h.has(e.id);return n.createElement(l.j.CheckableOptionTrackable,{key:e.id||e.name,checked:t,onClick:()=>{w(t,e)},displayType:l.j.CheckableDisplayType.Checkbox,nested:!0},e.name)})),_.length>0&&g.length>0&&C.push(n.createElement(l.j.Separator,{key:"other-teams-separator"})),g.length>0&&C.push(n.createElement(l.j.CheckableOptionTrackable,{key:"other-teams",displayType:l.j.CheckableDisplayType.Checkbox,checked:g.length===I.length,mixed:g.length>I.length&&I.length>0,onClick:()=>{S(g,I.length<g.length)}},n.createElement(u.Tx,{id:"browse_templates_modal.all_others"}))),C.push(...g.map(e=>{let t=h.has(e.id);return n.createElement(l.j.CheckableOptionTrackable,{key:e.id||e.name,checked:t,onClick:()=>{w(t,e)},displayType:l.j.CheckableDisplayType.Checkbox,nested:!0},e.name)}));return C.length?n.createElement(p.j,{spacing:0,width:"hug-contents"},n.createElement("span",{className:d.cx.colorTextSecondary.$},n.createElement(u.Tx,{id:"browse_templates_modal.published_from"})),n.createElement(l.j.DropdownSelector,{label:T,noBorder:!0,rightAlignOptions:c,stayOpenOnSelect:!0,optionsBelowSelector:!0,options:C,notDraggable:!0,noRightPadding:!0,menuTrackingContextName:E.V4.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:s}})):null}function S(e){let[t,r]=(0,n.useState)(!0),i=(0,n.useRef)(null),o=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{var e;!0!==o.current||t||null==(e=i.current)||e.scrollIntoView()},[t]),n.createElement("section",null,n.createElement("button",{className:a()(d.cx.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,b.FR),onClick:()=>r(!t),ref:i},n.createElement("h2",null,n.createElement(c.n,{className:d.cx.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:t?I:T}),e.workspaceName&&n.createElement("span",{className:d.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName)),t&&n.createElement(n.Fragment,null,n.createElement("div",{className:d.cx.if(e.minimalSpacing,d.cx.px0.mb0,d.cx.px24.mb20).$},e.children),n.createElement(s.X,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:t})=>{t&&e.onRequestLoadMoreForTeam(e.teamId)}})),n.createElement(s.X,{onIntersectionChange:({isIntersecting:e})=>{o.current=e}}))}function C(e){let t=(0,n.useRef)(null),r=(0,h.Ng)(),i=(0,_.vS)(r),{filterOptions:a,selectedTeamOrWorkspaceOrLicenseGroupIds:o,isMyTeamsOnly:l,onFilterChange:c,requestLoadMore:f,requestLoadMoreForTeam:E,templatesByTeam:b,userTeamOrWorkspaceOrLicenseGroupIds:I,isLoadingTeamTemplates:T}=(0,m.W0)(r);return n.createElement("div",{className:d.cx.wFull.$},n.createElement(p.j,{horizontalAlignItems:"space-between",height:56,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default"},n.createElement("div",{className:d.cx.font13.fontMedium.$},n.createElement(u.Tx,{id:"browse_templates_modal.published_by_current_org_name",orgName:r.name})),n.createElement(w,{filterOptions:a,selectedIds:o,isMyTeamsOnly:l,onFilterChange:e=>{var r;"function"==typeof(null==(r=t.current)?void 0:r.scroll)&&t.current.scroll({top:0,behavior:"smooth"}),c(e)},userTeamOrWorkspaceOrLicenseGroupIds:new Set(I),showWorkspaces:i})),0===b.length?T?n.createElement(v.iU,null):n.createElement(y.Hn,null):n.createElement("section",{className:d.cx.overflowYScroll.$,ref:t,style:{height:"calc(100% - 56px)"}},b.map(({team_id:t,team_name:r,workspace_name:a,templates:o})=>n.createElement(S,{key:t,teamName:r,workspaceName:i?a:null,teamId:t,onRequestLoadMoreForTeam:E},n.createElement(v.pz,null,o.map(t=>n.createElement(v.hT,{templateInsertionLocation:e.templateInsertionLocation,key:t.file_key,template:{template:t,type:g.W.TeamTemplate},onInsert:()=>e.insertTemplate({template:t,type:g.W.TeamTemplate}),isInsertingTemplate:e.isInsertingTemplate(t.file_key)}))))),n.createElement(s.X,{"data-testid":"load-more-teams",className:d.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&f()}})))}},979469:(e,t,r)=>{r.d(t,{Lw:()=>T,Rk:()=>S,nd:()=>w,zE:()=>I});var n=r(652983),i=r(407908),a=r(768358),o=r(716250),l=r(810373),s=r(970740),c=r(331945),d=r(215698),u=r(111120),p=r(754738),m=r(448694),h=r(852601),_=r(179640),g=r(761767),f=r(436649),E=r(458763),y=r(948150),v=r(646472),b=r(119419);function I(e){var t;let{templatesShelfType:r,source:l}=e,u=(0,i.I0)(),[p]=n.useState(()=>new E.Or([],{keys:["name"]})),h=r||v.sq.FIGJAM_TEMPLATES_PICKER,g=c.R.loadingKeyForPayload({shelfType:h}),y=(0,f.nR)(g),b=(0,f.Dm)(g),I=(0,i.v9)(e=>e.hubFiles),T=(0,i.v9)(e=>e.communityHub.shelves[h]),w=(0,i.v9)(e=>e.openFile?e.openFile.key:null),S=null==(t=(0,o.ZP)().user_data)?void 0:t.id,[C,O]=n.useState(""),[A,N]=n.useState([]),L=n.useMemo(()=>(T||[]).reduce((e,t)=>({...e,[t.id]:t.shelf_content.map(e=>e.id)}),{}),[T]),P=n.useMemo(()=>(T||[]).reduce((e,t)=>({...e,[t.id]:(0,s.mz)(t.i18n_meta.title,t.title)}),{}),[T]),R=n.useMemo(()=>(T||[]).map(({id:e})=>e),[T]),k=n.useCallback(e=>{let t=I[e],r=(0,_.D3)(t);u(d.fN({hubFileId:e,hubFileName:r.name||"this file",openInNewTab:!0,source:l}))},[u,I,l]);n.useEffect(()=>{y||b||u(c.R({shelfType:h}))},[u,b,y,h]),n.useEffect(()=>{let e=Object.keys(L).reduce((e,t)=>[...e,...L[t]],[]),t=e.map(e=>(0,_.D3)(I[e]));p.set(t)},[L,I,p]),n.useEffect(()=>{let e;if(C){e=p.search(C).map(e=>e.hub_file_id);let t=new Set(e);e=[...t],(0,m.T6)({userId:S,fileKey:w,entry_point:"templates_modal",scope:"Templates Modal"},"search_query_result")}else e=[];N(e)},[C,S,w,p]);let D=n.useCallback((0,a.D)(O,300),[]),M=n.useMemo(()=>{if(!T)return[];let e={activity:(0,s.t)("browse_templates_modal.subcategory.activity"),role:(0,s.t)("browse_templates_modal.subcategory.role")},t=[];return T.forEach(r=>{if(!r.shelf_meta.category)return;let n=r.shelf_meta.category,i=t.find(e=>e.id===n);i?i.categoryIds.push(r.id):t.push({id:n,title:e[n]||n,categoryIds:[r.id]})}),t},[T]);return{templates:L,categoryTitles:P,hubFiles:I,isLoading:y,duplicateFile:k,fileKey:w,userId:S,setSearchQuery:D,searchQuery:C,searchTemplatesResult:A,categoryIds:R,subcategories:M}}let T="templates_context_menu";function w(e){let t=(0,i.I0)(),{primaryKey:r}=(0,h.Bs)()(e);return n.useCallback(e=>{e.preventDefault();let n={templatePrimaryKey:r,position:{top:e.clientY,left:e.clientX}};t(u.SP({type:T,data:n}))},[t,r])}function S(e){let{additionalCtaLoggingProps:t,templateId:r,source:a,forceOpenNewTab:o=!1}=e,s=(0,i.I0)(),[c]=(0,n.useState)(()=>(0,b.k)(r));return async(e,n)=>{let i=await c,u=(0,_.D3)(i);s(d.fN({hubFileId:r,hubFileName:(null==u?void 0:u.name)||"this file",openInNewTab:!!o||(0,l.v8)(e),folderId:void 0,source:a,callback:e=>{(0,m.T6)({fileKey:e,templateId:r,productType:i.viewer_mode===g.Zs.WHITEBOARD?"figjam":"design",...t}),(0,p.v)("resource_inserted",{fileKey:e,resourceId:r,resourceName:null==u?void 0:u.name,resourceType:"template",templateType:y.W.HubFile,triggeredFrom:a}),null==n||n(e)}}))}}},216885:(e,t,r)=>{r.d(t,{GG:()=>z,vn:()=>ec});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(19516),s=r(170435),c=r(716250),d=r(337167),u=r(613898),p=r(204829),m=r(546829),h=r(518484),_=r(31642),g=r(275835),f=r(618723),E=r(487712),y=r(85808),v=r(435613),b=r(970740),I=r(644383),T=r(299370),w=r(177026),S=r(512512),C=r(721127),O=r(864974),A=r(809377),N=r(435804),L=r(312616),P=r(470972),R=r(291904),k=r(303801),D=r(482919),M=r(157607),F=r(881477),x=r(702538),U=r(16249);let B=r(315859),V=r(384912),G=r(855969),H=r(493850),W=r(665229),K=r(794924),z=(0,d.cn)(!1),Z=e=>{let t=e.map(e=>{let t=e.name.match(/((.*)\s+-\s+)?(.*)/),r=t&&t[2]||"Other",n=t&&t[3]||e.name;return{optionCategoryName:r,optionSubareaName:n,gid:e.gid}}).reduce((e,t)=>{let r=e.get(t.optionCategoryName);return r||(r=[],e.set(t.optionCategoryName,r)),r.push({name:t.optionSubareaName,gid:t.gid}),e},new Map);return t},Y=e=>{let t=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!t||t.length<2)throw Error((0,b.t)("bug_reporter.error_invalid_asana_url"));return t[1]};function j(e){return!$(e)}function $(e){return"error"in e}let q={gid:"",name:"Pick an option"},X="bugReporter",J=(0,d.cn)(!0),Q=(0,d.cn)(""),ee=(0,d.cn)(""),et=(0,d.cn)(""),er=(0,d.cn)(q),en=(0,d.cn)(q),ei=(0,d.cn)(!1),ea=n.createElement("div",{className:U.VX},"WARNING: because the title begins with TEST: your bug will be routed to the ",n.createElement("a",{className:U.vb,href:"https://app.asana.com/0/1203643376438098/list",target:"_blank"},n.createElement(b.Tx,{id:"bug_reporter.warning_asana_board"}))," and the Slack channel ",n.createElement("a",{className:U.vb,href:"https://figma.slack.com/archives/C04C0EWEWSD",target:"_blank"},n.createElement(b.Tx,{id:"bug_reporter.slack_testing_channel"})));function eo(e){let t=(0,A.L)(),r=(0,i.I0)(),a=(0,m.Kp)(),{windowInnerHeight:u}=(0,s.i)(),[h,_]=(0,d.KO)(Q),[T,S]=(0,d.KO)(ee),[C,O]=(0,d.KO)(et),[N,L]=(0,d.KO)(er),[P,R]=(0,d.KO)(en),[F,B]=(0,d.KO)(ei),[V,G]=n.useState(!0),[H,z]=n.useState(!1),[Z,j]=n.useState([]),[$,q]=n.useState(void 0),J=u-(a+M.Mz+E.mj)-E.tP;(0,l.O)(()=>{!0===F&&(eo(),B(!1))});let eo=()=>{G(!0),j([]),e.clearForm()},es=()=>!!(!e.isSubmitting&&T.trim()&&C.trim())&&(!e.isNewReport||!!N.gid&&!!P.gid),ec=t=>{if(t)try{let r=Y(t);e.attachFromTask(r)}catch(e){r(I.R.enqueue({message:`${e}`,error:!0}))}},ed=p.ax(p.ar(X,"link-input"),"change",e=>{let t=e.target.value;_(t),""===t&&eo()}),eu=p.ax(p.ar(X,"title-input"),"change",e=>{S(e.target.value)}),ep=p.ax(p.ar(X,"description-input"),"change",e=>{O(e.target.value)}),em=p.C3(p.ar(X,"severity-input")??"","change",e=>{L(e)}),eh=p.C3(p.ar(X,"product-area-input")??"","change",e=>{R(e)}),e_=n.useCallback(e=>{let t=[],n=[];for(let r of e)if(r.size>52428800)n.push(r.name);else{let e=URL.createObjectURL(r);t.push({fileContent:r,url:e,name:r.name,type:r.type})}if(n.length>0){let e=`Error: files could not be attached (over 50MB limit): [${n.join(", ")}].`;console.error(e),r(I.R.enqueue({error:!0,message:e}))}return t},[r]),eg=e=>{if(e.files.length>0){let t=e_([...e.files]);j(e=>[...e,...t])}z(!1)},ef=p.ax(p.ar(X,"include-filekey-input"),"change",e=>{G(e.currentTarget.checked)}),eE=p.qd(X,"submit",t=>{t.preventDefault(),es()&&e.submitBugReport(T,C,N,P,V,Z,$)}),ey=(e,t)=>{let r=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eE(e):("description"!==t&&e.preventDefault(),"asanaInput"===t&&ec(h))),"Escape"===e.key&&r&&r.blur()},ev=p.vU(p.ar(X,"asanaInput"),"keydown",e=>{ey(e,"asanaInput")});return n.createElement(g.h,{className:o()(H&&U.Fn),isDragTarget:()=>!0,onTargetDragEnter:()=>{z(!0)},onTargetDragLeave:()=>{z(!1)},onTargetDrop:e=>eg(e)},H&&n.createElement("div",{className:U.Wj},n.createElement(v.n,{svg:K}),n.createElement(b.Tx,{id:"bug_reporter.drop_attachments"})),n.createElement(y.l,{maxHeight:J,hideScrollbar:H},n.createElement("form",{onSubmit:eE,onPaste:e=>{if(e.clipboardData.files.length>0){let t=e_([...e.clipboardData.files]);j(e=>[...e,...t])}},className:o()(U.oC,H&&U.Es)},n.createElement("div",{className:U.Wg},n.createElement(k.__,{className:U.r7},n.createElement(b.Tx,{id:"bug_reporter.asana_hint"})),n.createElement(f.Sc,{className:U.Y2,placeholder:(0,b.t)("bug_reporter.modal.asana_link_placeholder"),value:h,onChange:ed,onPaste:e=>{let t=e.clipboardData.getData("text");try{Y(t),ec(t)}catch{}},onKeyDown:ev,maxLength:150})),n.createElement("div",null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.modal.title"})),n.createElement(f.Sc,{className:U.Y2,placeholder:(0,b.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>ey(e,"title"),value:T,onChange:eu,maxLength:150})),n.createElement("div",null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.modal.severity"})),n.createElement(D.Ph,{id:"bug_reporter_select_severity",dispatch:r,property:N,onChange:em,dropdownShown:t,formatter:{format:e=>e.name,isEqual:(e,t)=>e.gid===t.gid}},0===e.severityOptions.length&&n.createElement(D.Wx,{key:"loading",disabled:!0},n.createElement(b.Tx,{id:"bug_reporter.modal.loading"})),e.severityOptions.map(e=>n.createElement(D.Wx,{value:e,key:e.gid},e.name)))),n.createElement("div",null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.modal.product_area"})),n.createElement(D.Ph,{id:"bug_reporter_select_product_area",dispatch:r,property:P,onChange:eh,dropdownShown:t,formatter:{format:e=>e.name,isEqual:(e,t)=>e.gid===t.gid}},(()=>{if(0===e.productAreaGroups.size)return n.createElement(D.Wx,{value:null,key:"loading",disabled:!0},n.createElement(b.Tx,{id:"bug_reporter.modal.loading"}));let t=[];return e.productAreaGroups.forEach((e,r)=>{t.push(n.createElement(D.Wx,{value:null,key:r,disabled:!0},r)),e.forEach(e=>t.push(n.createElement(D.Wx,{value:e,key:e.gid},e.name))),t.push(n.createElement(D.Hz,{key:`${r}.divider`}))}),t.pop(),t})())),n.createElement("div",null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.modal.description"})),n.createElement(f.Sc,{className:[U.Y2,U.eL].join(" "),placeholder:(0,b.t)("bug_reporter.modal.description_placeholder"),type:"textarea",value:C,onChange:ep,onKeyDown:e=>ey(e,"description"),maxLength:1e3})),n.createElement("div",null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.modal.images_and_videos"})),n.createElement(el,{attachmentFiles:Z,setAttachmentFiles:j,validateInputFiles:e_})),n.createElement("div",null,(0,c.BZ)().in_app_performance_profiling&&n.createElement(n.Fragment,null,n.createElement(k.__,{className:U.PS},n.createElement(b.Tx,{id:"bug_reporter.profiler.title"})),n.createElement(x.A,{onProfilingFinish:e=>{q(e)}}),$&&n.createElement(b.Tx,{id:"bug_reporter.profiler.profile_attached"}))),"fullscreen"===e.selectedView.view&&n.createElement("div",{className:U.Ti},n.createElement(w.X,{checked:V,onChange:ef,label:(0,b.t)("bug_reporter.modal.include_filekey")}),n.createElement("div",{className:U.KZ},n.createElement(v.n,{svg:W}),n.createElement("div",{className:U.fP},n.createElement(b.Tx,{id:"bug_reporter.modal.include_filekey_info"})))),T.startsWith("TEST:")&&ea,n.createElement(f.hE,{className:U.DN},n.createElement(f.PL,{onClick:e.onClose,type:"button"},n.createElement(b.Tx,{id:"bug_reporter.modal.cancel"})),n.createElement(f.DF,{type:"submit",disabled:!es()},(0,b.t)("bug_reporter.modal.submit"))))))}function el(e){let{attachmentFiles:t,setAttachmentFiles:r,validateInputFiles:i}=e,a=n.useRef(null),o=n.useCallback(()=>{a.current&&(a.current.value="")},[]),l=n.useCallback(()=>{var e;let t=(null==(e=a.current)?void 0:e.files)||null;if(null===t||0===t.length)return;let n=i([...t]);r(e=>[...e,...n]),o()},[o,i,r]),s=(e,t,n)=>{e.preventDefault(),r(e=>(e.splice(t,1),[...e])),URL.revokeObjectURL(n)};return n.createElement("div",{className:U.df},t.length>0&&t.map((e,t)=>n.createElement("div",{className:U.rZ,key:t},n.createElement("div",null,e.type.startsWith("image")?n.createElement("img",{className:U.r8,alt:e.name,key:t,src:e.url}):n.createElement("video",{className:U.r8,key:t,src:e.url}),n.createElement("div",{className:U.IJ})),n.createElement("button",{onClick:r=>s(r,t,e.url)},n.createElement(v.n,{className:U.O4,svg:H})))),n.createElement("label",{className:U.Wi,htmlFor:"file-upload"},n.createElement(v.n,{svg:G})),n.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:a,onChange:l,multiple:!0,hidden:!0}))}function es(e){let t=(0,i.I0)(),[r,a]=n.useState(!0),o=e.title.startsWith("TEST:")?(0,b.t)("bug_reporter.slack_testing_channel"):(0,b.t)("bug_reporter.slack_bugs_channel"),l=p.Wn(p.ar(X,"asana-link"),"click",()=>{}),s=async r=>{r.preventDefault(),a(!1);try{await _.ZP.post("/api/bug_reports/slack_channel_message",{title:e.title,description:e.description,task_url:e.taskUrl,task_gid:e.taskGid}),t(I.R.enqueue({message:`Message sent to ${o} with details.`}))}catch(e){t(I.R.enqueue({message:`Couldn't send Slack message: ${e}`,error:!0})),a(!0)}};return n.createElement("div",{className:U.oC},n.createElement("div",{className:U.Gr},n.createElement(b.Tx,{id:"bug_reporter.success_message"})),n.createElement("div",{className:U.$m},n.createElement("div",{className:U.ZE},n.createElement(v.n,{svg:V}),n.createElement(f.UU,{onClick:l,href:e.taskUrl,target:"_blank",trusted:!0},n.createElement(b.Tx,{id:"bug_reporter.asana_link"}))),n.createElement("div",{className:U.ZE},n.createElement(v.n,{svg:B}),n.createElement(f.UU,{onClick:()=>{t(S.vQ({stringToCopy:e.taskUrl}))},trusted:!0},n.createElement(b.Tx,{id:"bug_reporter.copy_link"})))),e.isNewReport&&n.createElement("div",null,n.createElement("div",{className:U.UA},n.createElement(b.Tx,{id:"bug_reporter.share_to_slack_info"})),n.createElement(f.DF,{onClick:s,type:"button",disabled:!r},`Share in ${o}`)),e.slackUrl&&n.createElement("div",null,n.createElement(f.ZP,{className:U.uu,href:e.slackUrl,target:"blank",type:"button"},n.createElement(b.Tx,{id:"bug_reporter.open_slack_discussion"}))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>n.createElement("p",{key:e},e.toString())))}let ec=(0,R.Y3)(function(){let e=(0,i.v9)(e=>e.multiplayer.allUsers.length),t=(0,i.v9)(e=>{var t;return null==(t=e.user)?void 0:t.id}),r=(0,N.A6)(),a=(0,i.I0)(),{windowInnerHeight:o}=(0,s.i)(),p=(0,F.f)(),[m,g]=n.useState([]),[f,y]=(0,d.KO)(Q),v=(0,d.b9)(ee),w=(0,d.b9)(et),S=(0,d.b9)(er),A=(0,d.b9)(en),[R,k]=n.useState(new Map),D=(0,d.b9)(ei),[x,B]=(0,d.KO)(J),[V,G]=n.useState(!1),[H,W]=n.useState(!1),K=n.useRef(""),ea=n.useRef(""),el=n.useRef(""),ec=n.useRef(""),ed=n.useRef(""),eu=n.useRef([]),ep=n.useRef(null),em=n.useRef(0),eh=(0,d.b9)(z),e_=()=>{a(C.hV())},eg=(0,L.p)("seen_bug_reporter_modal");(0,l.O)(()=>{eg||a(O.v({seen_bug_reporter_modal:!0})),eh(!0)}),n.useEffect(()=>{let e=async()=>{try{let{data:e}=await P.u.getMeta();g(e.meta.severity),k(Z(e.meta.product_area))}catch(e){a(I.R.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}};e()},[a]);let ef=()=>P.u.getGetTask({taskGid:K.current}).then(({data:e})=>e).catch(e=>{var t;let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof _.F7&&(null==(t=e.data)?void 0:t.message)&&(r=e.data.message),a(I.R.enqueue({message:r,error:!0}))}),eE=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let t=e.map(async e=>{try{let t=await ev(e.fileContent,e.type);return{uuid:t,name:e.name}}catch(t){return{error:`Please add attachment ${e.name} directly in Asana instead. ${t}`}}}),r=await Promise.all(t);return eu.current=r.filter($).map(({error:e})=>e),{attachments:r.filter(j),errorMessages:r.filter($).map(({error:e})=>e)}},ey=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{let t=await ev(JSON.stringify(e),"application/json");return{attachments:[{uuid:t,name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},ev=async(e,t)=>{let r=await P.u.getAttachmentUploadUrl({fileType:t});if(200!==r.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:n,fields:i,uuid:a}=r.data.meta,o=new FormData;for(let e in i)o.append(e,i[e]);o.append("content-type",t),o.append("file",e);let l=await fetch(n,{method:"post",body:o});if(204!==l.status)throw Error("Failed to upload attachment to S3");return a},eb=async(n,i,o,l,s,d,p)=>{var m,h,g;W(!0),ec.current=n,ed.current=i,a(I.R.enqueue({type:"bug-reporter-submitting",message:(0,b.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:T.B4.SPINNER})),a(I.R.enqueue({type:"bug-reporter-submitting-long",message:(0,b.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:T.B4.SPINNER}));let E={env:(0,c.Gm)().cluster_name,user_agent:navigator.userAgent,view:r.view,user_id:t,org_id:(0,c.Gm)().org_id,tracking_session_id:(0,c.Gm)().tracking_session_id,release_commit:(0,c.Gm)().release_manifest_git_commit,device_info:(0,u.d)(),num_people_in_file:e};"fullscreen"===r.view?(E.editor_type=r.editorType,s&&(E.file_key=r.fileKey,E.url=window.location.href)):E.url=window.location.href;let y={title:n,severity:o.gid,product_area:l.gid,description:i,metadata:E},v=[eE(d),ey(p)],[w,S]=await Promise.all(v);w.attachments.length>0&&(y.attachments=w.attachments),S.attachments.length>0&&(y.profileUuid=S.attachments[0].uuid),(w.errorMessages.length||S.errorMessages.length)&&(eu.current=[...w.errorMessages,...S.errorMessages]);try{let e=x?await _.ZP.post("/api/bug_reports",y):await _.ZP.put("/api/bug_reports/update_task",{...y,task_gid:K.current=Y(f)});if(e.status>=200&&e.status<300)a(I.R.dequeue({matchType:"bug-reporter-submitting"})),a(I.R.dequeue({matchType:"bug-reporter-submitting-long"})),ea.current=e.data.meta.task_url,K.current=e.data.meta.task_gid,x||(el.current=e.data.meta.slack_url),em.current=(null==(h=null==(m=ep.current)?void 0:m.getCurrentContentSize())?void 0:h.y)||0,G(!0),D(!0),W(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(t){a(I.R.dequeue({matchType:"bug-reporter-submitting"})),a(I.R.dequeue({matchType:"bug-reporter-submitting-long"}));let e=t.message;t instanceof _.F7&&(null==(g=t.data)?void 0:g.message)&&"string"==typeof t.data.message&&(e=t.data.message),a(I.R.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0})),W(!1)}},eI=async e=>{K.current=e,B(!1);let t=await ef();t&&(v(t.meta.title),w(t.meta.description),S(t.meta.severity??q),A(t.meta.product_area??q))};return n.createElement(M.My,{ref:ep,title:(0,b.t)("help_widget.menu.report_issue"),initialPosition:(()=>{let e=p?E.tP:E.mj,t=E.tP;return V&&(t=o-(em.current+M.Mz)-E.tP),new h.OW(e,t)})(),initialConstraints:{x:"right",y:V?"top":"bottom"},onClose:e_,recordingKey:X,headerClassName:U.Ry,dragHeaderOnly:!0},V?n.createElement(es,{isNewReport:x,taskUrl:ea.current,taskGid:K.current,slackUrl:el.current,title:ec.current,description:ed.current,submissionErrorMessages:eu.current}):n.createElement(eo,{isNewReport:x,selectedView:r,severityOptions:m,productAreaGroups:R,attachFromTask:eI,submitBugReport:eb,onClose:e_,clearForm:()=>{B(!0),v(""),w(""),A(q),S(q),K.current="",y("")},isSubmitting:H}))},"BugReporterModal")},983996:(e,t,r)=>{r.d(t,{Bh:()=>S,E_:()=>T});var n,i=r(652983),a=r(407908),o=r(31642),l=r(618723),s=r(773190),c=r(970740),d=r(84315),u=r(111120),p=r(721127),m=r(692379),h=r(131826),_=r(436649),g=r(532444),f=r(505468),E=r(291904),y=r(295386),v=r(335583),b=((n=b||{})[n.SET_PROFILE_HANDLE=0]="SET_PROFILE_HANDLE",n[n.SUCCESS=1]="SUCCESS",n);let I=class extends i.Component{constructor(e){super(e),this.saveHandle=e=>{this.setState({newProfileHandle:e})},this.onProfileHandleValidationSuccess=()=>{this.setState({submitDisabled:!1})},this.onProfileHandleValidationFailure=()=>{this.setState({submitDisabled:!0})},this.sendValidateEmail=async()=>{let{status:e}=await o.ZP.post("/api/validation/email/send");200===e&&this.setState({validateEmailSent:!0,submitDisabled:!0})},this.onSubmit=e=>{if(e.preventDefault(),!this.props.emailValidatedAt){this.sendValidateEmail();return}this.setState({submitDisabled:!0});let t=this.props.profileId;if(t){let e={profileHandle:this.state.newProfileHandle,profileId:t,onSuccess:this.props.onFinish};this.props.dispatch(d.aX(e)),this.setState({loadingKey:d.aX.loadingKeyForPayload(e)})}else if(1==[this.props.userId,this.props.teamId,this.props.orgId].filter(e=>e).length){let e={profileHandle:this.state.newProfileHandle,teamId:this.props.teamId,orgId:this.props.orgId,userId:this.props.userId,onSuccess:this.props.onFinish};this.props.dispatch(d.Se(e)),this.setState({loadingKey:d.Se.loadingKeyForPayload(e)})}},this.onChangeSubmit=e=>{e.preventDefault(),this.setState({submitDisabled:!0}),this.props.profileId&&this.props.dispatch(d.aX({profileHandle:this.state.newProfileHandle,profileId:this.props.profileId})),this.props.dispatch(p.eI())},this.navigateToProfileWithHandle=e=>{this.props.dispatch(u.fv({view:"communityHub",subView:"handle",handle:this.state.newProfileHandle})),this.props.dispatch(p.hV())},this.state={newProfileHandle:e.existingProfileHandle||"",submitDisabled:!!e.emailValidatedAt,step:0,validateEmailSent:!1,emailAddressForValidation:void 0}}componentDidUpdate(){this.state.loadingKey&&((0,_.W_)(this.props.loadingState,this.state.loadingKey)?this.setState({step:1,loadingKey:void 0}):(0,_.OZ)(this.props.loadingState,this.state.loadingKey)&&this.setState({loadingKey:void 0}))}renderHeaderImage(){return 0===this.state.step?this.props.emailValidatedAt?i.createElement(y.XB,null):i.createElement(y.ni,null):i.createElement(y.QP,null)}renderUnvalidatedAccount(e,t){return i.createElement("div",null,i.createElement("div",{className:v.Vl},e?i.createElement(c.Tx,{id:"community.change_profile_handle_modal.new_verification_email_sent"}):i.createElement(c.Tx,{id:"community.change_profile_handle_modal.check_your_email"})),i.createElement("div",{className:v.$y},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.verify_email_prompt"})),i.createElement("div",{className:v.$y},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.sent_email",email:i.createElement("strong",null,i.createElement(c.Tx,{id:"community.profiles.email"}))})),i.createElement("div",{className:v.$y},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.no_email_check_spam_or_click_resend_email_below"})))}renderTitle(){return 0===this.state.step?i.createElement("div",{className:v.Vl},this.props.profileId?i.createElement(c.Tx,{id:"community.change_profile_handle_modal.change_your_unique_profile_handle"}):this.props.userId?i.createElement(c.Tx,{id:"community.change_profile_handle_modal.to_like_comment_follow_or_publish_please_create_a_community_profile"}):i.createElement(c.Tx,{id:"community.change_profile_handle_modal.create_a_community_profile_to_publish_publicly_as_your_org_or_team"})):i.createElement("div",{className:v.Vl},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.welcome_to_figma_community"}))}renderContent(){return 0===this.state.step?i.createElement("form",{id:I.id,onSubmit:this.onSubmit},i.createElement(s.P,{saveHandle:this.saveHandle,onProfileHandleValidationSuccess:this.onProfileHandleValidationSuccess,onProfileHandleValidationFailure:this.onProfileHandleValidationFailure})):i.createElement("div",{className:v.tn},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.new_profile_link",url:i.createElement("div",{className:v.Ag},i.createElement("span",{className:v.VK},"figma.com/@",this.state.newProfileHandle))}))}renderFooterCTAs(){return 0!==this.state.step?i.createElement(i.Fragment,null,i.createElement(l.PL,{onClick:this.navigateToProfileWithHandle},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.view_profile"})),i.createElement(l.DF,{type:"submit",onClick:()=>this.props.dispatch(p.eI()),className:v.iY},i.createElement(c.Tx,{id:"general.done"}))):this.props.profileId?i.createElement(i.Fragment,null,i.createElement(l.PL,{onClick:()=>this.props.dispatch(p.eI())},i.createElement(c.Tx,{id:"general.cancel"})),i.createElement(l.RS,{type:"submit",onClick:this.onChangeSubmit,className:v.iY,disabled:this.state.submitDisabled,trackingProperties:{action:m.N0.UPDATE_PROFILE_HANDLE,communityHubEntity:m.Ru.PROFILES,communityHubEntityId:this.props.profileId}},i.createElement(c.Tx,{id:"community.change_profile_handle_modal.change_handle"}))):i.createElement(i.Fragment,null,i.createElement(l.PL,{onClick:()=>this.props.dispatch(p.eI())},i.createElement(c.Tx,{id:"general.cancel"})),i.createElement(l.RS,{type:"submit",onClick:this.onSubmit,className:v.iY,disabled:this.state.submitDisabled||this.props.communityBlockedAt,trackingProperties:{action:m.N0.CREATE_PROFILE,communityHubEntity:this.props.userId?m.Ru.USERS:this.props.teamId?m.Ru.TEAMS:m.Ru.ORGS,communityHubEntityId:this.props.userId??this.props.teamId??this.props.orgId}},this.props.emailValidatedAt?i.createElement(c.Tx,{id:"community.change_profile_handle_modal.create_profile"}):i.createElement(c.Tx,{id:"community.change_profile_handle_modal.resend_email"})))}render(){let e={};e.type=this.props.profileId?m.N0.UPDATE_PROFILE_HANDLE:m.N0.CREATE_PROFILE,this.props.profileId?(e.communityHubEntity=m.Ru.PROFILES,e.communityHubEntityId=this.props.profileId):(e.communityHubEntity=this.props.userId?m.Ru.USERS:this.props.teamId?m.Ru.TEAMS:m.Ru.ORGS,e.communityHubEntityId=this.props.userId??this.props.teamId??this.props.orgId);let t=this.props.emailValidatedAt?i.createElement(i.Fragment,null,this.renderTitle(),this.renderContent()):this.renderUnvalidatedAccount(this.state.validateEmailSent,this.props.userEmail);return i.createElement(f.u_,{size:"medium",className:v.jf,dispatch:this.props.dispatch,popStack:!0},i.createElement(h.Ui,{name:g.V4.PROFILE_CREATE_MODAL,properties:e},i.createElement("div",{className:v.tM},this.renderHeaderImage()),i.createElement("div",{className:v.Wn},t),i.createElement("div",{className:v.Mv},i.createElement("div",{className:v.ez},this.renderFooterCTAs()))))}};function T(e){let t=e.getState();t.modalShown&&t.modalShown.type===S&&e.dispatch(p.eI())}I.displayName="ChangeProfileHandle",I.id="profile-change-handle";let w=(0,a.$j)((e,t)=>{var r,n;return{loadingState:e.loadingState,emailValidatedAt:!!(null==(r=e.user)?void 0:r.email_validated_at),communityBlockedAt:!!e.user&&!!e.authedUsers.byId[e.user.id].community_blocked_at,userEmail:null==(n=e.user)?void 0:n.email}})(I),S="CHANGE_PROFILE_HANDLE";(0,E.QR)(S,e=>{let t=e.modalShown;return i.createElement(w,{profileId:t.data.profileId,existingProfileHandle:t.data.profileHandle,teamId:t.data.teamId,orgId:t.data.orgId,userId:t.data.userId,onFinish:t.data.onFinish})})},312795:(e,t,r)=>{r.d(t,{H:()=>d,N:()=>u});var n=r(652983),i=r(618723),a=r(970740),o=r(721127),l=r(236750),s=r(130676);function c(e){return n.createElement("div",{style:{height:e.height}})}function d(e){let t=e.onHide||(()=>{e.dispatch(o.eI())});return n.createElement(l.ge,{...e,isCloseHidden:!0},n.createElement(c,{height:18}),e.children&&n.createElement("div",{className:s.Hn},e.children,n.createElement(c,{height:18})),n.createElement(u,{onConfirm:e.onConfirm,onCancel:t,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class u extends n.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return n.createElement("div",{className:this.props.className},n.createElement(i.__,{className:s.PS},n.createElement(i.v_,{checked:this.state.checked,onChange:this.onCheck,className:s.MJ}),this.props.children),n.createElement("div",{className:s.QE},!this.props.hideCancelButton&&n.createElement(i.pJ,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,a.t)("modal.cancel")),this.props.makeButtonAppearNegative?n.createElement(i.VG,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,a.t)("modal.confirm")):n.createElement(i.RS,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,a.t)("modal.confirm"))))}}u.displayName="CheckboxConfirmButtons"},37594:(e,t,r)=>{r.d(t,{GB:()=>A,LH:()=>C,Xc:()=>S});var n=r(652983),i=r(407908),a=r(337167),o=r(519781),l=r(618723),s=r(407598),c=r(970740),d=r(456496),u=r(65249),p=r(721127),m=r(131826),h=r(92410),_=r(467342),g=r(980924),f=r(220949),E=r(291904),y=r(970831),v=r(505468),b=r(261128);let I=(e,t)=>{switch(e){case g.J.SRGB:return{text:(0,c.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case g.J.DISPLAY_P3:switch(t.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,c.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let r=t.diagnostics&&"client"in t.diagnostics&&"desktop-app"===t.diagnostics.client?(0,c.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,c.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(t.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in t.diagnostics&&t.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,c.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,c.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:r}),type:"warning"};case"MonitorNotSupported":if(t.diagnostics&&"alternativeMonitorName"in t.diagnostics&&t.diagnostics.alternativeMonitorName)return{text:(0,c.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:t.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,c.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},T="user-color-profile",w={srgbOption:`${T}-srgb-option`,p3Option:`${T}-p3-option`,supportDetailsWarningIcon:`${T}-warning-icon`,supportDetailsInfoIcon:`${T}-info-icon`},S=(0,a.cn)(!1),C="user_color_profile_modal_closed",O=(0,E.Y3)(function(){let e=(0,i.I0)(),t=(0,_.oQ)(),r=function(e){switch(e){case g.J.DEFAULT:case g.J.SRGB:return g.J.SRGB;case g.J.DISPLAY_P3:return g.J.DISPLAY_P3}}(t.colorProfilePreference),p=(0,h.Ln)(),E=I(r,p),T=function(e){switch(e){case g.J.SRGB:return(0,c.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case g.J.DISPLAY_P3:return(0,c.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(r),[O,A]=(0,a.KO)(S);return n.useEffect(()=>(O||A(!0),()=>{O&&((0,f.m_)({id:C}),A(!1))}),[A,O]),n.createElement(m.Ui,{name:"color_management_user_color_profile_modal"},n.createElement(v.u_,{className:b.oC,title:n.createElement(n.Fragment,null,n.createElement(c.Tx,{id:"fullscreen.color_management.user_color_profile_modal.title"})),titleClassName:b.d$,dispatch:e,size:320},n.createElement(o.ol,{className:b.xv,dispatch:e}),n.createElement("div",{className:b.qE}),n.createElement("label",{className:b.Oc},n.createElement(u.x,null,n.createElement(c.Tx,{id:"fullscreen.color_management.user_color_profile_modal.options.label"}))),n.createElement(s.E,{isHorizontal:!0,className:b.Oq,value:r,onChange:e=>{(0,_.NT)({colorProfilePreference:e,id:t.id})}},n.createElement(s._,{className:b.LQ,value:g.J.SRGB,dataTestId:w.srgbOption},(0,c.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),n.createElement(s._,{className:b.LQ,value:g.J.DISPLAY_P3,dataTestId:w.p3Option},(0,c.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),n.createElement(u.x,{color:"secondary"},T),n.createElement("div",{className:b.OF}),n.createElement(u.x,{color:"secondary"},n.createElement(c.Tx,{id:"fullscreen.color_management.user_color_profile_modal.descriptions.affected_files"})),n.createElement("span",{style:{whiteSpace:"pre"}}," "),n.createElement(l.Cr,{trusted:!0,href:y.g,target:"_blank",className:b.p4},n.createElement(c.Tx,{id:"rcs.rcs_shared.learn_more"})),n.createElement("div",{className:b.OF}),n.createElement("div",{className:b.qE}),n.createElement("div",{className:b.em},n.createElement(d.JO,{icon:"warning"===E.type?"warning-32":"info-32",dataTestId:"warning"===E.type?w.supportDetailsWarningIcon:w.supportDetailsInfoIcon}),n.createElement("span",null,E.text,"warning"===E.type&&n.createElement(n.Fragment,null,n.createElement("span",{style:{whiteSpace:"pre"}}," "),n.createElement(l.Cr,{trusted:!0,href:y.g,target:"_blank",className:b.p4},n.createElement(c.Tx,{id:"rcs.rcs_shared.learn_more"})))))))},"user_color_profile_modal");function A(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,t,r)=>{r((0,p.K4)({type:O}))}}}},933644:(e,t,r)=>{r.d(t,{Ft:()=>H,fn:()=>K,gA:()=>j,sL:()=>Z});var n=r(652983),i=r(407908),a=r(46347),o=r(736521),l=r(716250),s=r(669277),c=r(618723),d=r(212984),u=r(970740),p=r(299482),m=r(644383),h=r(721127),_=r(133419),g=r(131826),f=r(987004),E=r(761767),y=r(862610),v=r(521384),b=r(617406),I=r(134765),T=r(625893),w=r(753874),S=r(291904),C=r(656145),O=r(505468),A=r(312795),N=r(269658),L=r(31642),P=r(435613),R=r(436649),k=r(801998),D=r(966922),M=r(220958),F=r(312938),x=r(653684),U=r(476361);let B=r(376833),V=r(436535);class G extends n.PureComponent{constructor(){super(...arguments),this.onHide=()=>{if(this.props.onHide){this.props.onHide();return}this.props.dispatch(h.eI())},this.deleteOrgUsers=()=>{this.props.dispatch(_.jf({orgId:this.props.org.id,params:{org_user_ids:this.props.orgUserIds},userInitiated:!0})),this.props.dispatch(h.hV())}}render(){let e,t,r;let i=this.props.orgUserIds.length;this.props.orgUsers&&(e=(0,b.Eu)(this.props.orgUsers,this.props.orgUserIds[0]),t=this.props.orgUserIds.filter(e=>{var t;return(null==(t=(0,b.Eu)(this.props.orgUsers,e))?void 0:t.permission)===E.Gu.GUEST}));let a=(0,u.t)("org_settings.remove_user_modal.title",{userCount:i});void 0!==t&&t.length>0&&t.length===i?a=(0,u.t)("org_settings.remove_user_modal.title.guests_only",{userCount:i}):void 0!==t&&0===t.length&&(a=(0,u.t)("org_settings.remove_user_modal.title.members_only",{userCount:i}));let o=(0,u.t)("org_settings.remove_user_modal.button");r=(null==e?void 0:e.user.handle)?(0,u.t)("org_settings.remove_user_modal.warning",{userCount:i,userName:e.user.handle,orgName:this.props.org.name}):(0,u.t)("org_settings.remove_user_modal.warning_no_username",{userCount:i,orgName:this.props.org.name});let l=(0,u.t)("org_settings.remove_user_modal.info",{userCount:i});return n.createElement(g.Ui,{name:"Confirm Remove Modal",properties:{orgId:this.props.org.id,numUsers:i}},n.createElement(A.H,{dispatch:this.props.dispatch,onConfirm:this.deleteOrgUsers,onHide:this.onHide,disableClickOutsideToHide:!0,buttonText:o,title:a,checkboxText:(0,u.t)("org_settings.remove_user_modal.confirmation_text"),makeButtonAppearNegative:!0},n.createElement("div",null,n.createElement("p",{className:U.Se},r),n.createElement("p",{className:U.W0},l))))}}G.displayName="OrgConfirmDeleteModal";let H=(0,S.Y3)(G,"OrgConfirmDeleteModal");function W(e){let t;let r=(0,o.GZ)(e.org.id);function i(){let t=(0,f.Q7)(e.licenseType),n={org_user_ids:e.orgUserIds,paid_statuses:{[t]:e.accountType}};e.dispatch(_.qV({orgId:e.org.id,lastUpdateTimestampOverride:e.lastUpdateTimestampIfUsingUnloadedOrgUsers,params:n,successCallback:()=>{if(e.dispatch(m.R.enqueue({message:(0,u.t)("confirm_account_change.account_type_successfully_updated.seat_rename",{numUsers:e.orgUserIds.length}),type:"paid-status-changed"})),r(),e.updateAccountTypeFilterCounts(),e.orgUsers){let t=e.orgUserIds.map(t=>{let r=(0,b.Eu)(e.orgUsers,t);return r});e.updateNewEditorBuffer(t,e.accountType,e.licenseType,e.orgUserIds)}}})),function(){if(e.onHide){e.onHide();return}e.dispatch(h.eI())}()}function s(e,t){return 1===e?t?n.createElement(u.Tx,{id:"confirm_account_change.upgrade.all_licenses.description_p1.singular",userName:t,seatType:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.full_seat"}))}):n.createElement(u.Tx,{id:"confirm_account_change.upgrade.all_licenses.description_p1.singular.no_username",seatType:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.full_seat"}))}):n.createElement(u.Tx,{id:"confirm_account_change.upgrade.all_licenses.description_p1.plural",numUsers:e,seatType:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.full_seat"}))})}function y(e,t){return 1===e?t?n.createElement(u.Tx,{id:"confirm_account_change.downgrade.all_licenses.description_p1.singular",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},t),viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.viewer_restricted"}))}):n.createElement(u.Tx,{id:"confirm_account_change.downgrade.all_licenses.description_p1.singular.no_username",viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.viewer_restricted"}))}):n.createElement(u.Tx,{id:"confirm_account_change.downgrade.all_licenses.description_p1.plural",numUsers:e,viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.seat_type.viewer_restricted"}))})}function v(e,t){return 1===e?t?n.createElement(u.Tx,{id:"confirm_account_change.remove_edit_access_description_single.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},t),viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.viewer_restricted"}))}):n.createElement(u.Tx,{id:"confirm_account_change.remove_edit_access_description_single_no_username.seat_rename",viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.viewer_restricted"}))}):n.createElement(u.Tx,{id:"confirm_account_change.remove_edit_access_description.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},t),numUsers:e,viewerRestricted:n.createElement("span",{className:d.cx.fontSemiBold.$},n.createElement(u.Tx,{id:"confirm_account_change.viewer_restricted"}))})}let I=e.orgUserIds.length;e.orgUsers&&(t=(0,b.Eu)(e.orgUsers,e.orgUserIds[0]).user.handle);let w=e.accountType===E.oz.FULL,S=function(e,t,r,i){var o,m,h,_;if(e)switch(t){case f.z9.DESIGN:return o=r,m=i,(0,l.BZ)().billing_dev_mode_customer_ui?n.createElement(n.Fragment,null,s(o,m),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.upgrade.design.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.edit_share_or_create"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.give_access_to_drafts"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.access_all_templates_and_libraries"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement("span",{className:d.cx.mr4.$},n.createElement(u.Tx,{id:"confirm_account_change.generic.design.free_dev_mode_access"})),n.createElement("a",{className:U.LT,target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/en-us/articles/19813618057623"},n.createElement(u.Tx,{id:"confirm_account_change.generic.design.free_dev_mode_access.learn_more"}))))):n.createElement(n.Fragment,null,1===o?m?n.createElement(u.Tx,{id:"confirm_account_change.grant_figma_design_access_description_single.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},m)}):n.createElement(u.Tx,{id:"confirm_account_change.grant_figma_design_access_description_single_no_username.seat_rename"}):n.createElement(u.Tx,{id:"confirm_account_change.grant_figma_design_access_description.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},m),numUsers:o}),n.createElement("p",{className:U.W0},n.createElement(c.rU,{className:U.p4,target:"_blank",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,u.t)("confirm_account_change.grant_edit_access_link.seat_rename"))));case f.z9.FIGJAM:return h=r,_=i,(0,l.BZ)().billing_dev_mode_customer_ui?n.createElement(n.Fragment,null,s(h,_),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.upgrade.design.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.edit_share_or_create"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.give_access_to_drafts"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.access_all_templates_and_libraries"})))):n.createElement(n.Fragment,null,1===h?_?n.createElement(u.Tx,{id:"confirm_account_change.grant_figjam_access_description_single.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},_)}):n.createElement(u.Tx,{id:"confirm_account_change.grant_figjam_access_description_single_no_username.seat_rename"}):n.createElement(u.Tx,{id:"confirm_account_change.grant_figjam_access_description.seat_rename",userName:n.createElement("span",{className:d.cx.fontSemiBold.$},_),numUsers:h}),n.createElement("p",{className:U.W0},n.createElement(c.rU,{className:U.p4,target:"_blank",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,u.t)("confirm_account_change.grant_edit_access_link.seat_rename"))));case f.z9.DEV_MODE:let g;return g=1===r?i?n.createElement(u.Tx,{id:"confirm_account_change.upgrade.dev_mode.another_option.singular",userName:i}):n.createElement(u.Tx,{id:"confirm_account_change.upgrade.dev_mode.another_option.singular.no_username"}):n.createElement(u.Tx,{id:"confirm_account_change.upgrade.dev_mode.another_option.plural"}),n.createElement(n.Fragment,null,s(r,i),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.upgrade.dev_mode.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.advanced_inspect"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.integrations"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIcon.mr8.$,svg:B}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.annotations"}))),n.createElement("div",{className:d.cx.flex.mt32.mb8.py8.px4.colorBgSecondary.$},n.createElement("div",{className:d.cx.w48.mr8.$},n.createElement(C.aA,{type:C.I1.DESIGN_AND_DEV_MODE,size:C.Sj.SMALL})),n.createElement("div",{className:d.cx.flexGrow1.$},g,n.createElement("br",null),n.createElement("a",{className:U.LT,target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/en-us/articles/19813618057623"},n.createElement(u.Tx,{id:"confirm_account_change.generic.design.free_dev_mode_access.learn_more"})))));default:(0,a.vE)(t)}else switch(t){case f.z9.DESIGN:return function(e,t){if((0,l.BZ)().billing_dev_mode_customer_ui)return n.createElement(n.Fragment,null,y(e,t),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.downgrade.design.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.edit_share_or_create"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.give_access_to_drafts"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.design.access_all_templates_and_libraries"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.downgrade.design.give_access_to_drafts"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement("span",{className:d.cx.mr4.$},n.createElement(u.Tx,{id:"confirm_account_change.generic.design.free_dev_mode_access"})),n.createElement("a",{className:U.LT,target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/en-us/articles/19813618057623"},n.createElement(u.Tx,{id:"confirm_account_change.generic.design.free_dev_mode_access.learn_more"})))));{let r=p.sx.ml16.mt4.add({listStyle:"disc"}).$;return n.createElement(n.Fragment,null,v(e,t),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figma_design_access_description_cant_edit_outside_drafts"})),n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figma_design_access_description_cant_share_new_draft_files"})),n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figma_design_access_description_shared_draft_files_no_longer_accessible"}))))}}(r,i);case f.z9.FIGJAM:return function(e,t){if((0,l.BZ)().billing_dev_mode_customer_ui)return n.createElement(n.Fragment,null,y(e,t),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.downgrade.design.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.edit_share_or_create"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.give_access_to_drafts"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.figjam.access_all_templates_and_libraries"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.downgrade.design.give_access_to_drafts"}))));{let r=p.sx.ml16.mt4.add({listStyle:"disc"}).$;return n.createElement(n.Fragment,null,v(e,t),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figjam_access_description_cant_edit_outside_drafts"})),n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figjam_access_description_cant_share_new_draft_files"})),n.createElement("li",{style:r},n.createElement(u.Tx,{id:"confirm_account_change.remove_figjam_access_description_shared_draft_files_no_longer_accessible"}))))}}(r,i);case f.z9.DEV_MODE:return n.createElement(n.Fragment,null,y(r,i),n.createElement("span",{className:d.cx.ml2.$},n.createElement(u.Tx,{id:"confirm_account_change.downgrade.dev_mode.description_p2"})),n.createElement("ul",{className:d.cx.mt8.$},n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.advanced_inspect"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.integrations"})),n.createElement("li",{className:d.cx.flex.ml2.mt8.$},n.createElement(P.n,{className:d.cx.colorIconDanger.mr8.$,svg:V}),n.createElement(u.Tx,{id:"confirm_account_change.generic.dev_mode.annotations"}))));default:(0,a.vE)(t)}}(w,e.licenseType,I,t),A=(0,l.BZ)().dev_mode_opt_in&&!e.isDevModeOptInLoaded;return n.createElement(g.Ui,{name:"Confirm Account Change Modal",properties:{targetRole:e.accountType,orgId:e.org.id,licenseType:e.licenseType,numUsers:I}},n.createElement(O.cV,{confirmationTitle:function(e,t,r){if(e)switch(t){case f.z9.DESIGN:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.grant_figma_design_access_title.seat_rename",numUsers:r}));case f.z9.FIGJAM:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.grant_figjam_access_title.seat_rename",numUsers:r}));case f.z9.DEV_MODE:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.upgrade.dev_mode.title",numUsers:r}));default:(0,a.vE)(t)}else switch(t){case f.z9.DESIGN:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.remove_figma_design_access_title.seat_rename",numUsers:r}));case f.z9.FIGJAM:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.remove_figjam_access_title.seat_rename",numUsers:r}));case f.z9.DEV_MODE:return n.createElement("span",{className:U.Se},n.createElement(u.Tx,{id:"confirm_account_change.remove_dev_mode_access_title",numUsers:r}));default:(0,a.vE)(t)}}(w,e.licenseType,I),confirmText:w?(0,u.t)("confirm_account_change.grant_edit_access_confirm_text"):(0,u.t)("confirm_account_change.remove_edit_access_confirm_text"),isLoading:A,onConfirm:()=>(function(t,r){let n=!!(t===f.z9.DEV_MODE&&r&&(0,l.BZ)().dev_mode_opt_in&&e.isDevModeOptInRequired);if(!n)return i();e.dispatch(h.K4({type:x.d1,data:{onOptInUpgrade:()=>{i()},source:T.rN.MEMBERS}}))})(e.licenseType,w),onCancel:e.onHide,onHide:e.onHide,destructive:!w,disableClickOutsideToHide:!0,dispatch:e.dispatch,popStack:!0,trackedConfirmationProperties:{productType:e.licenseType}},S))}let K=(0,S.Y3)(function(e){var t,r;let i=(0,s.mU)(y.DevModeOptIn,{orgId:e.org.id}),a="loaded"===i.status,o=(0,v.gD)((null==(r=null==(t=i.data)?void 0:t.org)?void 0:r.devModeOptInPlanProperty)||null);return n.createElement(W,{...e,isDevModeOptInLoaded:a,isDevModeOptInRequired:o})},"OrgConfirmAccountChangeModal");class z extends n.PureComponent{constructor(){super(...arguments),this.onHide=()=>{if(this.props.onHide){this.props.onHide();return}this.props.dispatch(h.eI())},this.updateLicenseGroup=()=>{var e;let t;let r=(0,k.uH)(null==(e=this.props.org)?void 0:e.id);t=this.props.newLicenseGroup?{org_user_ids:this.props.orgUserIds,license_group_id:this.props.newLicenseGroup.id}:{org_user_ids:this.props.orgUserIds,license_group_id:null},this.props.dispatch(_.qV({orgId:this.props.org.id,lastUpdateTimestampOverride:this.props.lastUpdateTimestampIfUsingUnloadedOrgUsers,params:t,successCallback:()=>{let e=this.props.orgUserIds.length;this.props.dispatch(m.R.enqueue({message:r?(0,u.t)("confirm_billing_group_change.success_message",{numUsers:e}):(0,u.t)("confirm_workspace_change.success_message",{numUsers:e}),type:"license-group-changed"})),this.props.updateLicenseGroupFilterCounts()}})),this.onHide()}}renderModalContent(e){var t,r,i;let a;let o=this.props.orgUserIds.length;this.props.orgUsers&&(a=null==(t=(0,b.Eu)(this.props.orgUsers,this.props.orgUserIds[0]))?void 0:t.user.handle);let l=(0,I.H)(null==(r=this.props.newLicenseGroup)?void 0:r.admin_users_metadata),s=!!(null==(i=this.props.newLicenseGroup)?void 0:i.is_orphaned);return!this.props.isCurrentUserOrgAdmin&&this.props.newLicenseGroup?a?n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description",userName:a,numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name)}):n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description_no_username",numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name)}):!this.props.newLicenseGroup||s?a?n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description_with_organization_admin_warning",userName:a,numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup?this.props.newLicenseGroup.name:(0,u.t)("confirm_workspace_change.unassigned"))}):n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description_with_organization_admin_warning_no_username",numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup?this.props.newLicenseGroup.name:(0,u.t)("confirm_workspace_change.unassigned"))}):e?a?n.createElement(u.Tx,{id:"confirm_billing_group_change.confirmation_description_with_billing_group_admin_warning",userName:a,numUsers:o,billingGroupName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name),listOfBillingGroupAdmins:n.createElement("span",{className:U.Se},l)}):n.createElement(u.Tx,{id:"confirm_billing_group_change.confirmation_description_with_billing_group_admin_warning_no_username",numUsers:o,billingGroupName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name),listOfBillingGroupAdmins:n.createElement("span",{className:U.Se},l)}):a?n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description_with_workspace_admin_warning",userName:a,numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name),listOfWorkspaceAdmins:n.createElement("span",{className:U.Se},l)}):n.createElement(u.Tx,{id:"confirm_workspace_change.confirmation_description_with_workspace_admin_warning_no_username",numUsers:o,workspaceName:n.createElement("span",{className:U.Se},this.props.newLicenseGroup.name),listOfWorkspaceAdmins:n.createElement("span",{className:U.Se},l)})}render(){var e;let t=(0,k.uH)(null==(e=this.props.org)?void 0:e.id);return n.createElement(O.cV,{confirmationTitle:t?(0,u.t)("confirm_billing_group_change.title"):(0,u.t)("confirm_workspace_change.title"),confirmText:t?(0,u.t)("confirm_billing_group_change.confirm_button"):(0,u.t)("confirm_workspace_change.confirm_button"),onConfirm:this.updateLicenseGroup,onCancel:this.props.onHide,onHide:this.props.onHide,disableClickOutsideToHide:!0,dispatch:this.props.dispatch,popStack:!0},this.renderModalContent(t))}}z.displayName="ConfirmLicenseGroupChangeModal";let Z=(0,S.Y3)(z,"OrgConfirmLicenseGroupChangeModal"),Y=r(858901),j=(0,S.Y3)(function(e){let t=e.selectedOrgJoinRequest,r=(0,i.v9)(e=>e.orgById[e.currentUserOrgId]),a=(0,i.v9)(e=>e.orgSamlConfig),o=(0,i.I0)(),[l,s]=n.useState(),c=`ORG_JOIN_REQUEST_APPROVE_${t}`,d=l&&l.requester_user.handle,p=l&&l.invite_level&&l.invite_level<=M.V.VIEWER,_=!!(l&&l.deprovisioned_user);n.useEffect(()=>{w.G.getOrgJoinRequest({selectedOrgJoinRequest:t}).then(({data:e})=>{s(e.meta)}).catch(e=>{var t;let r=(null==(t=null==e?void 0:e.data)?void 0:t.message)||(0,u.t)("org_join_request.generic_fetch_error");o(m.R.enqueue({message:r,type:"org-join-request-get-error",error:!0}))})},[t,o]);let f=()=>{o(h.eI())};if(!l)return null;let E=null;if(l.inviter_user)switch(l.resource_type){case"file":case"file_repo":E=p?n.createElement(u.Tx,{id:"org_join_request.description_view_file",inviterName:l.inviter_user.handle,resourceName:l.resource_name}):n.createElement(u.Tx,{id:"org_join_request.description_edit_file",inviterName:l.inviter_user.handle,resourceName:l.resource_name});break;case"folder":E=p?n.createElement(u.Tx,{id:"org_join_request.description_view_folder",inviterName:l.inviter_user.handle,resourceName:l.resource_name}):n.createElement(u.Tx,{id:"org_join_request.description_edit_folder",inviterName:l.inviter_user.handle,resourceName:l.resource_name});break;case"team":E=p?n.createElement(u.Tx,{id:"org_join_request.description_view_team",inviterName:l.inviter_user.handle,resourceName:l.resource_name}):n.createElement(u.Tx,{id:"org_join_request.description_edit_team",inviterName:l.inviter_user.handle,resourceName:l.resource_name});break;default:console.error("Unhandled orgJoinRequest.resource_type")}return n.createElement("div",null,n.createElement(g.Ui,{name:"Handle Org Join Request Modal",properties:{deprovisionedUser:_}},n.createElement(O.cV,{confirmationTitle:(0,u.t)("org_join_request.modal_title",{requesterName:d??""}),confirmText:_?(0,u.t)("org_join_request.deprovisioned_confirmation_button_text"):(0,u.t)("org_join_request.add_to_org_confirmation_button_text"),onConfirm:_?f:()=>{let e=L.ZP.put(`/api/org_join_request/${t}/approve`,{source:"email"});(0,D.m)(e,{dispatch:o},c),e.then(()=>{f(),o(m.R.enqueue({message:(0,u.t)("org_join_request.request_approved_message",{requesterName:d??""}),type:"org-join-request-approve-success"}))},e=>{var t;let r=e.message||(null==(t=null==e?void 0:e.data)?void 0:t.message)||(0,u.t)("org_join_request.approve_error");o(m.R.enqueue({message:r,type:"org-join-request-approve-failure",error:!0}))})},cancelText:(0,u.t)("org_join_request.cancel_text"),hideCancel:_,disableClickOutsideToHide:!0,dispatch:o,hideOnConfirm:!1,isLoading:(0,R.hg)(N.V.getState().loadingState,c),loadingText:(0,u.t)("org_join_request.loading_confirmation_button_text")},_&&n.createElement("div",{className:U.tJ},n.createElement(P.n,{width:"16px",height:"16px",useOriginalSrcFills_DEPRECATED:!1,svg:Y,style:{marginRight:14}}),n.createElement(u.Tx,{id:"org_join_request.user_deprovisioned_warning"})),n.createElement("div",{className:U.fU},l.file&&n.createElement(F.mB,{editor_type:null,client_meta:l.file.client_meta,thumbnail_url:l.file.thumbnail_url,additionalClassName:U.Z_,isLocked:!!l.file.has_file_link_password,fullWidth:!1}),n.createElement("div",null,n.createElement(u.Tx,{id:"org_join_request.description_would_like_to_join",requesterNameAndEmail:n.createElement("span",{className:U.Se},d," (",l.requester_user.email,")"),orgName:r.name})," ",E)),!_&&(0,k.v1)(a)&&n.createElement("div",{className:U.K_},n.createElement(u.Tx,{id:"org_join_request.scim_enabled_banner"})))))},"HandleOrgJoinRequestModal")},525726:(e,t,r)=>{r.d(t,{p:()=>u});var n=r(652983),i=r(970740),a=r(84315),o=r(310975),l=r(505468),s=r(268509),c=r(291904);class d extends n.Component{constructor(){super(...arguments),this.deleteProfile=()=>{this.props.dispatch(a.QB({profileId:this.props.profileId,handle:this.props.handle}))}}render(){let e=n.createElement(n.Fragment,null,n.createElement("p",null,n.createElement(i.Tx,{id:"community.delete_profile_modal.delete_profile_info"})),n.createElement("br",null),this.props.stripe_account_status&&this.props.stripe_account_status!==o.Sc.NONE&&n.createElement(n.Fragment,null,n.createElement("p",null,n.createElement(i.Tx,{id:"settings.any_resources_you_have_marked_for_sale",creatorAgreement:s.De})),n.createElement("br",null)),n.createElement("p",null,n.createElement(i.Tx,{id:"settings.delete_user_account.for_more_information_about_how_we_treat_your_data",privacyPolicyLink:s.MW})));return n.createElement(l.cV,{destructive:!0,confirmationTitle:(0,i.t)("community.delete_profile_modal.delete_profile_title"),content:e,onConfirm:this.deleteProfile,confirmText:(0,i.t)("general.delete"),popStack:!0,...this.props})}}let u=(0,c.Y3)(d,"DeleteProfileModal")},653684:(e,t,r)=>{r.d(t,{PS:()=>N,d1:()=>k,wY:()=>R}),r(294521);var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(559341),s=r(736521),c=r(600802),d=r(519781),u=r(229845),p=r(212984),m=r(970740),h=r(644383),_=r(367674),g=r(456496),f=r(721127),E=r(131826),y=r(322186),v=r(687496),b=r(211879),I=r(220949),T=r(481354),w=r(163853),S=r(291904),C=r(937275),O=r(505468),A=r(897277);let N="dev_mode_opt_in_success_event";function L(e,t){return t(f.eI()),w.uU.postDevModeOptInTermsAccepted({orgId:e}).catch(e=>(t(h.R.enqueue({message:(0,m.t)("dev_mode_opt_in.modal.failed_to_agree_to_opt_in"),error:!0})),Promise.reject(e))).then(()=>(0,I.m_)({id:N}))}function P(){let e=(0,i.I0)();return n.createElement(d.PZ,{onClick:()=>e(f.eI()),innerText:"Close"})}let R=(0,S.Y3)(function(e){let t=(0,i.I0)(),r=(0,y.Ng)(),a=parseInt(e.emailRequestId??""),o=!Number.isNaN(a);return n.createElement(E.Ui,{name:"DevMode Opt-in Page",properties:{org_id:r.id,source:o?"email":"notif"}},n.createElement("div",{className:A.DB},n.createElement(D,{org:r,onAccept:()=>{let e=L(r.id,t);return o&&e.then(()=>{T.e.approveRequests({plan_id:r.id,plan_type:C.YH.ORG,included_request_ids:[a.toString()],selection_method:C.Fg.EMAIL}).catch(e=>(t(h.R.enqueue({message:(0,m.t)("dev_mode_opt_in.modal.upgrade_seats_error",{seatCount:1}),error:!0})),Promise.reject(e))).then(()=>t(h.R.enqueue({message:(0,m.t)("dev_mode_opt_in.modal.upgraded_seats",{seatCount:1}),type:"requests-approved"})))}),e},showNotNow:!1,hasAssociatedSeats:o})),n.createElement("div",{className:A.O7,style:{position:"absolute",top:24,right:24}},n.createElement(P,null)))},"DEV_MODE_OPT_IN_FULL_SCREEN_MODAL"),k=(0,S.Y3)(function(e){let t=(0,i.I0)(),r=(0,y.Ng)();return n.createElement(E.Ui,{name:"DevMode Opt-in Modal",properties:{org_id:r.id,source:e.source?e.source:"dashboard"}},n.createElement(O.u_,{className:p.cx.overflowHidden.$,padding:40,size:520,dispatch:t},n.createElement(D,{org:r,onAccept:()=>{let n=L(r.id,t);e.onOptInUpgrade&&n.then(()=>e.onOptInUpgrade()),e.onOptInShowModal&&n.then(()=>e.onOptInShowModal())},showNotNow:!0,hasAssociatedSeats:!!e.onOptInUpgrade}),n.createElement("div",{style:{position:"absolute",top:4,right:4}},n.createElement(P,null))))},"DEV_MODE_OPT_IN_PARTIAL_MODAL");function D(e){var t;let r=(0,i.I0)(),a=(0,s.A9)(e.org.id),d=(0,l.Z)(e.onAccept,750,{leading:!0,trailing:!1}),h=n.createElement("a",{className:p.cx.cursorPointer.fontMedium.$,href:"https://help.figma.com/hc/articles/19813618057623",target:"_blank",rel:"noopener noreferrer"},(0,m.t)("dev_mode_opt_in.modal.guide_to_dev_mode_billing")),y=n.createElement("a",{className:p.cx.cursorPointer.fontMedium.$,href:"https://www.figma.com/pricing",target:"_blank",rel:"noopener noreferrer"},"figma.com/pricing"),I=new v.Lr((null==(t=a.data)?void 0:t.currency)??"usd"),T=e.org.plan??b.On.ORGANIZATION,w=I.getPricesForOrgPlan(T),S="loaded"===a.status?n.createElement(n.Fragment,null,I.formatMoney(w.dev_mode)):n.createElement(u.g4,{className:p.cx.h8.w20.inlineBlock.$});return n.createElement("div",{className:A.er},n.createElement("div",{className:A.d1},n.createElement("div",{className:A.Fs},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.header"})),n.createElement("div",{className:o()(A.fg,p.cx.mb24.$)},e.hasAssociatedSeats?n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.subheader_with_seats"}):n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.subheader"})),n.createElement("div",{className:A.OH},n.createElement("div",{className:p.cx.mt16.ml16.mr16.$},n.createElement(_.j,{width:"fill-parent",spacing:8},n.createElement(g.JO,{icon:"file-design-with-devmode-32-file-type"}),n.createElement("span",null,n.createElement("div",{className:A.fg},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.pricing.with_design.main_text"})),n.createElement("div",{className:A.wz},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.pricing.with_design.sub_text"}))))),n.createElement("div",{className:A.IA}),n.createElement("div",{className:p.cx.ml16.mr16.mb16.$},n.createElement(_.j,{width:"fill-parent",spacing:8},n.createElement(g.JO,{icon:"file-devmode-32-file-type"}),n.createElement("span",null,n.createElement("div",{className:A.fg},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.pricing.dev_mode_only.main_text"})),n.createElement("div",{className:A.wz},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.pricing.dev_mode_only.sub_text"})))))),n.createElement("div",{className:A.wz},n.createElement("div",{className:p.cx.mt24.fontMedium.$},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.description_question"})),n.createElement("div",{className:p.cx.mt8.$},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.description_provision",pricingLink:y,plan:T===b.On.ORGANIZATION?(0,m.t)("dev_mode_opt_in.modal.org"):(0,m.t)("dev_mode_opt_in.modal.ent"),price:S,billingLink:h}))),n.createElement(c.RS,{className:o()(A.LI,p.cx.mt24.$),type:"button",onClick:d},e.hasAssociatedSeats?n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.agree_with_seats"}):n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.agree"})),e.showNotNow&&n.createElement(E.UE,{role:"button",className:o()(p.cx.mt8.flex.justifyCenter.$,A.vb),onClick:()=>r(f.eI())},n.createElement(m.Tx,{id:"dev_mode_opt_in.modal.not_now"}))))}},157607:(e,t,r)=>{r.d(t,{Ht:()=>u.Ht,My:()=>g,Mz:()=>h,QH:()=>E,vw:()=>f,xI:()=>u.xI});var n=r(652983),i=r(985417),a=r(46347),o=r(172497),l=r(9247),s=r(518484),c=r(496417),d=r(845412),u=r(852046),p=r(332224),m=r(513070);let h=(0,o.z)(p.U8I)+1,_={x:"left",y:"top"},g=n.forwardRef(function(e,t){let r=n.createRef(),[i,o]=n.useState(e.initialWidth),[c,d]=n.useState(null!=e.initialHeight?e.initialHeight+h:void 0),[u,p]=n.useState(e.initialPosition);n.useImperativeHandle(t,()=>({ensureModalOnScreen:()=>{var e;return null==(e=r.current)?void 0:e.ensureModalOnScreen()},getCurrentContentSize:()=>{var e;return null==(e=r.current)?void 0:e.getCurrentContentSize()},getEl:()=>{var e;return null==(e=r.current)?void 0:e.getEl()},setTransform:e=>{var t;return null==(t=r.current)?void 0:t.setTransform(e)}}));let m=(0,l.D)(e);n.useEffect(()=>{let t=(null==m?void 0:m.initialWidth)!==e.initialWidth,r=(null==m?void 0:m.initialHeight)!==e.initialHeight;e.resetBothDimensionsIfEitherChanged&&(r||t)?((0,a.hu)(!!e.initialHeight,"initialHeight must be set in order to reset size"),o(e.initialWidth),d(e.initialHeight+h)):(t&&o(e.initialWidth),r&&d(null!=e.initialHeight?e.initialHeight+h:void 0))},[null==m?void 0:m.initialHeight,null==m?void 0:m.initialWidth,e.initialHeight,e.initialWidth,e.resetBothDimensionsIfEitherChanged]),n.useEffect(()=>{var t;e.initialHeight||e.allowAutoExpanding||null==(t=r.current)||t.resizeModalHeight()},[r,e.allowAutoExpanding,e.initialHeight,m]);let _=n.useCallback(()=>{if(!r.current)return;let t=!r.current.state.shouldCallEnsureModalIsOnScreen;(e.alwaysEnsureModalOnScreen||e.alwaysEnsureHeaderModalOnScreen)&&t&&r.current.setState({shouldCallEnsureModalIsOnScreen:!0})},[r,e.alwaysEnsureHeaderModalOnScreen,e.alwaysEnsureModalOnScreen]),g=n.useCallback(()=>{p(e.initialPosition),_()},[e.initialPosition,_]);return n.useLayoutEffect(()=>{var t;let n=!(null==m?void 0:m.initialPosition.equals(e.initialPosition)),i=(null==(t=r.current)?void 0:t.state.hasCustomPosition)??!1;if(n&&!i){if(e.useOnScreenInitialPosition){let t=(null==m?void 0:m.initialPosition)??e.initialPosition,r=s.OW.subtract(t,e.initialPosition);p(u.subtract(r))}else p(e.initialPosition);_()}},[e.initialPosition,e.useOnScreenInitialPosition,null==m?void 0:m.initialPosition,u,e.alwaysEnsureModalOnScreen,e.alwaysEnsureHeaderModalOnScreen,r,_]),n.createElement(f,{...e,width:i,height:c,position:u,setWidth:o,setHeight:d,setPosition:p,ref:r,resetPositionToInitial:g})});class f extends n.Component{constructor(e){super(e),this.el=void 0,this.getEl=()=>this.el,this.frameEl=void 0,this.resizeTimer=void 0,this.resizeHeuristicPosition=void 0,this.inBounds=!1,this.getHeight=e=>Math.min(e,this.props.maxHeight||e),this.getWidth=e=>Math.min(e,this.props.maxWidth||e),this.minBottomMargin=()=>this.props.minBottomMargin??d.S1,this.minTopMargin=()=>this.props.minTopMargin??d.h2,this.minLeftMargin=()=>this.props.minLeftMargin??d.F$,this.minRightMargin=()=>this.props.minRightMargin??d.co,this.resizeModalHeight=()=>{if(!this.el)return;let e=this.el.style.height;this.el.style.height="";let t=this.el.getBoundingClientRect();this.el.style.height=e,this.props.height!==t.height&&(this.props.setHeight(this.getHeight(t.height)),this.props.acceptHeight&&this.props.acceptHeight(t.height))},this.lastInnerWidth=window.innerWidth,this.lastInnerHeight=window.innerHeight,this.getOnScreenPositionOfHeader=e=>{let{top:t,width:r,left:n}=e.getBoundingClientRect(),i=new DOMRect(n,t,r,h);return this.getOnScreenPositionOfBoundingRect(i)},this.getOnScreenPositionOfElement=e=>this.getOnScreenPositionOfBoundingRect(e.getBoundingClientRect()),this.getOnScreenBucketOfElementHeuristic=e=>{let t=e.getBoundingClientRect(),r="right",n="bottom";for(let e=0;e<3;e++){let n=window.innerWidth/3*e,i=window.innerWidth/3*(e+1),a=t.x+t.width/2;if(a>=n&&a<=i){r=0===e?"left":1===e?"mid":"right";break}}for(let e=0;e<3;e++){let r=window.innerHeight/3*e,i=window.innerHeight/3*(e+1),a=t.y+t.height/2;if(a>=r&&a<=i){n=0===e?"top":1===e?"mid":"bottom";break}}return{horizontal:r,vertical:n}},this.getOnScreenPositionOfElementHeuristic=e=>{if(this.state.shouldCallEnsureModalIsOnScreen)return this.getOnScreenPositionOfElement(e);let t=e.getBoundingClientRect(),{top:r,bottom:n,width:i,height:a,left:o,right:l}=t,{horizontal:c,vertical:d}=this.resizeHeuristicPosition??this.getOnScreenBucketOfElementHeuristic(e);this.state.hasCustomPosition||(d="top");let u=window.innerWidth-this.lastInnerWidth,p=window.innerHeight-this.lastInnerHeight,m=o,h=r,_="left"===this.state.constraints.x?this.minLeftMargin():this.minLeftMargin()+i;m="left"===c?Math.max(_,m):"mid"===c?Math.max(_,m+u/2):Math.max(_,l+u-i);let g="top"===this.state.constraints.y?this.minTopMargin():this.minTopMargin()+a;return h="top"===d?Math.max(g,h):"mid"===d?Math.max(g,h+p/2):Math.max(g,n+p-a),new s.OW(m,h)},this.getOnScreenPositionOfBoundingRect=e=>{let{top:t,bottom:r,width:n,height:i,right:a,left:o}=e,l=this.props.position.y;t<this.minTopMargin()?l="top"===this.state.constraints.y?this.minTopMargin():this.minBottomMargin():!this.props.canRenderBelowViewport&&r+this.minBottomMargin()>window.innerHeight&&(l="top"===this.state.constraints.y?Math.max(this.minTopMargin(),window.innerHeight-(i+this.minBottomMargin())):this.minBottomMargin());let c=this.props.position.x,d=this.lastInnerWidth-c,u=window.innerWidth-o;return a>window.innerWidth-this.minRightMargin()&&u<d&&(c=window.innerWidth-d),this.props.allowPartialHeaderOnScreen?a<this.minLeftMargin()+40?c="left"===this.state.constraints.x?40-n:40:o>window.innerWidth-this.minRightMargin()-40&&(c="left"===this.state.constraints.x?window.innerWidth-this.minRightMargin()-40:window.innerWidth-this.minRightMargin()-n-40):o<this.minLeftMargin()?c="left"===this.state.constraints.x?this.minLeftMargin():this.minLeftMargin()+n:a>window.innerWidth-this.minRightMargin()&&(c="left"===this.state.constraints.x?window.innerWidth-this.minRightMargin()-n:window.innerWidth-this.minRightMargin()),new s.OW(c,l)},this.ensureModalOnScreen=(0,i.P)(100,()=>{let e;if(!this.el)return;let t=this.props.useHeuristicBasedPositioning;t&&(void 0!==this.resizeTimer?clearTimeout(this.resizeTimer):this.resizeHeuristicPosition=this.getOnScreenBucketOfElementHeuristic(this.el),this.resizeTimer=setTimeout(()=>{this.resizeHeuristicPosition=void 0,this.resizeTimer=void 0},2e3)),(e=this.props.alwaysEnsureHeaderModalOnScreen&&!this.props.alwaysEnsureModalOnScreen?this.getOnScreenPositionOfHeader(this.el):t?this.getOnScreenPositionOfElementHeuristic(this.el):this.getOnScreenPositionOfElement(this.el)).equals(this.props.position)||this.props.setPosition(e),this.lastInnerWidth=window.innerWidth,this.lastInnerHeight=window.innerHeight}),this.containerRef=e=>{this.el=e},this.frameRef=e=>{this.frameEl=e},this.observer=new ResizeObserver(e=>{for(let t of e)this.frameEl===t.target&&this.ensureModalOnScreen()}),this.onDragStateChange=(e,t)=>{var r,n,i,o;switch(e){case u.h7.Active:{let e=new s.OW(this.el.offsetLeft,this.el.offsetTop),r=new s.OW(t.pageX,t.pageY);this.setState({constraints:_,startingDragPosition:{elementPosition:e,mousePosition:r}}),this.props.setPosition(e);break}case u.h7.Dragging:null==(n=(r=this.props).onDragStart)||n.call(r,t);break;case u.h7.None:null==(o=(i=this.props).onDragEnd)||o.call(i,this.props.position),this.setState({startingDragPosition:null}),this.props.useHeuristicBasedPositioning&&this.el&&(this.resizeHeuristicPosition=this.getOnScreenBucketOfElementHeuristic(this.el),this.setState({hasCustomPosition:!0})),(this.props.alwaysEnsureModalOnScreen||this.props.alwaysEnsureHeaderModalOnScreen)&&this.ensureModalOnScreen();break;default:(0,a.vE)(e)}},this.onDrag=e=>{if(!this.state.startingDragPosition)return;let t=this.props.width||0,r=(0,d.jz)(e,this.state.startingDragPosition);if(this.props.allowPartialHeaderOnScreen||(r=r.clampX({x:-(t/2),width:window.innerWidth})),this.setState({hasCustomPosition:!0}),this.props.setPosition(r),this.props.bounds){let e=(0,s.r3)(this.props.bounds,r);e&&!this.inBounds?(this.props.onEnterBound(),this.inBounds=!0):this.inBounds&&!e&&(this.props.onLeaveBound(),this.inBounds=!1)}},this.onResize=(e,t)=>{var r,n;let i=(0,d.Ho)(e,{...t,maxHeight:this.props.maxHeight,maxWidth:this.props.maxWidth,minHeight:this.props.minHeight,minWidth:this.props.minWidth});i&&(this.setState({hasCustomPosition:!0,constraints:{x:"left",y:"top"}}),this.props.setWidth(i.width),this.props.setHeight(i.height),this.props.setPosition(i.position),null==(n=(r=this.props).onResize)||n.call(r,{width:i.width,height:i.height}))},this.state={hidden:e.hidden,constraints:e.initialConstraints||_,startingDragPosition:null,hasCustomPosition:!1,showArrow:!0,shouldCallEnsureModalIsOnScreen:!1}}componentDidMount(){if(this.props.width&&this.props.height||this.props.allowAutoExpanding)this.ensureModalOnScreen();else{let{width:e,height:t}=this.el.getBoundingClientRect();this.props.width?this.props.setHeight(this.getHeight(t)):this.props.height?this.props.setWidth(this.getWidth(e)):(this.props.setWidth(this.getWidth(e)),this.props.setHeight(this.getHeight(t)))}window.addEventListener("resize",this.ensureModalOnScreen);let e=this.props.allowResizeHeight||this.props.allowResizeWidth;this.frameEl&&!e&&this.observer.observe(this.frameEl),this.el&&this.props.acceptHeight&&this.props.acceptHeight(this.el.getBoundingClientRect().height)}componentWillUnmount(){window.removeEventListener("resize",this.ensureModalOnScreen),this.observer.disconnect()}componentDidUpdate(e,t,r){var n,i,a,o,l,s;let c=!1;this.state.hasCustomPosition?this.state.showArrow&&this.setState({showArrow:!1}):((null==(n=e.initialConstraints)?void 0:n.x)!==(null==(i=this.props.initialConstraints)?void 0:i.x)||(null==(a=e.initialConstraints)?void 0:a.y)!==(null==(o=this.props.initialConstraints)?void 0:o.y))&&(c=!0,this.setState({constraints:this.props.initialConstraints||_})),this.props.canResetPosition&&!e.canResetPosition&&(this.setState({constraints:this.props.initialConstraints||_,startingDragPosition:null,hasCustomPosition:!1,showArrow:!0}),null==(s=(l=this.props).resetPositionToInitial)||s.call(l)),this.props.width===e.width&&this.props.height===e.height||this.props.allowResizeHeight||this.props.allowResizeWidth||this.setState({shouldCallEnsureModalIsOnScreen:!0}),(this.props.alwaysEnsureModalOnScreen||this.props.alwaysEnsureHeaderModalOnScreen)&&c&&!this.state.shouldCallEnsureModalIsOnScreen&&this.setState({shouldCallEnsureModalIsOnScreen:!0}),this.state.shouldCallEnsureModalIsOnScreen&&!c&&(this.ensureModalOnScreen(),this.setState({shouldCallEnsureModalIsOnScreen:!1})),this.frameEl.scrollTop=r.scrollTop,this.props.shouldScrollToBottom&&this.props.shouldScrollToBottom()&&(this.frameEl.scrollTop=this.frameEl.scrollHeight)}getSnapshotBeforeUpdate(e,t){return{scrollTop:this.frameEl.scrollTop}}getCurrentContentSize(){return(0,a.hu)(!!this.props.height),(0,a.hu)(!!this.props.width),{x:this.props.width,y:this.props.height-h}}static getDerivedStateFromProps(e,t){return e.hidden!==t.hidden?e.hidden?{hidden:!0,hasCustomPosition:!1}:{hidden:t.shouldCallEnsureModalIsOnScreen}:null}setTransform(e){var t,r,n,i;let a=e({constraints:this.state.constraints,width:this.props.width,height:this.props.height,position:this.props.position});a&&(this.props.setWidth(a.width),this.props.setHeight(a.height),this.props.setPosition(a.position),null==(r=(t=this.props).onResize)||r.call(t,{width:a.width,height:a.height}),null==(i=(n=this.props).onDragEnd)||i.call(n,a.position))}render(){let e;let{acceptHeight:t,allowAutoExpanding:r,allowPartialHeaderOnScreen:i,alwaysEnsureHeaderModalOnScreen:a,alwaysEnsureModalOnScreen:o,autoflowHeight:l,canRenderBelowViewport:s,initialConstraints:c,width:d,height:p,position:m,maxHeight:h,maxWidth:_,minBottomMargin:g,minHeight:f,minLeftMargin:E,minRightMargin:y,minTopMargin:v,minWidth:b,useHeuristicBasedPositioning:I,useOnScreenInitialPosition:T,onDragStart:w,onDragEnd:S,onResize:C,shouldScrollToBottom:O,bounds:A,onEnterBound:N,onLeaveBound:L,showArrow:P,...R}=this.props,{showArrow:k,constraints:D,hidden:M}=this.state;return p&&(e=this.props.autoflowHeight||h&&h<p?void 0:p),n.createElement(u.IJ,{...R,showArrow:k,constraints:D,width:d,height:e,hidden:M,position:m,onDrag:this.onDrag,onDragStateChange:this.onDragStateChange,onResize:this.onResize,frameRef:this.frameRef,containerRef:this.containerRef})}}f.displayName="DraggableModal";class E extends n.Component{render(){return n.createElement("div",{className:`${m.KE} ${c.Hy}`,onMouseDown:this.props.clickOutsideToHide?this.props.onClose:void 0},n.createElement(g,{...this.props}))}}E.displayName="DraggableModalBgDisabled"},588692:(e,t,r)=>{r.d(t,{A_:()=>d,ST:()=>h,mN:()=>u});var n=r(652983),i=r(172497),a=r(204829),o=r(845412),l=r(332224),s=r(577063);let c=(0,i.F)(l.RHn),d=({resizeTo:e,getCurrentContainerBounds:t,isResizing:r,setIsResizing:i,setResizeDirections:l,onResizeEnd:s,lockAspectRatio:d,recordingKey:u,hidden:p})=>{let h=n.useRef(),_=n.useRef(),g=n.useRef([]),f=n.useRef({x:0,y:0}),[E,y]=n.useState(!1),v=n.useCallback(({x:t,y:n},i)=>{if(!r||!_.current||!e){y(!1);return}let a=d||i,l={x:t-f.current.x,y:n-f.current.y};l.y=Math.max(l.y,c);let{left:s,top:u,right:p,bottom:h}=m(l,_.current,r,a),g={[o.Nm.TOP]:u!==_.current.top,[o.Nm.BOTTOM]:h!==_.current.bottom,[o.Nm.LEFT]:s!==_.current.left,[o.Nm.RIGHT]:p!==_.current.right};e(g,{left:s,top:u,right:p,bottom:h,lockAspectRatio:a})},[r,d,e,y]),b=n.useCallback(()=>{y(!1),i(void 0),g.current=[],null==s||s()},[y,i,s]),I=n.useRef(b);I.current=b,(0,n.useEffect)(()=>()=>{I.current()},[]);let T=a.Wn(u,"mouseup",b),w=a.Wn(u,"mousemove",n.useCallback(e=>{if(p)return a.Ev;e.stopPropagation(),e.preventDefault();let t={x:e.clientX,y:e.clientY};h.current=t;let n=!r;if(n){let e=Object.create(null);g.current.forEach(t=>{e[t]=!0}),l(g.current),i(e)}else v(t,e.shiftKey)},[p,r,v,i,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),S=a.vU(u,"keydown",n.useCallback(e=>{e.shiftKey&&h.current&&v(h.current,!0)},[v])),C=a.vU(u,"keyup",n.useCallback(e=>{h.current&&v(h.current,e.shiftKey)},[v]));(0,n.useEffect)(()=>{if(E)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",T),document.addEventListener("keydown",S),document.addEventListener("keyup",C),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",T),document.removeEventListener("keydown",S),document.removeEventListener("keyup",C)}},[E,w,T,S,C]);let O=n.useCallback((e,r)=>{g.current=e;let n=t();_.current=n;let i={x:e.includes(o.Nm.LEFT)?n.left:e.includes(o.Nm.RIGHT)?n.right:r.x,y:e.includes(o.Nm.TOP)?n.top:e.includes(o.Nm.BOTTOM)?n.bottom:r.y};f.current={x:r.x-i.x,y:r.y-i.y},y(!0)},[t,y]);return{startResizing:O,stopResizing:b}};function u({allowedResizeDirections:e,onEdgeDoubleClick:t,resizeTo:r,onResizeEnd:i,getCurrentContainerBounds:l,lockAspectRatio:s,isResizing:c,setIsResizing:u,setResizeDirections:m,hidden:h,recordingKey:_}){let{startResizing:g}=d({resizeTo:r,getCurrentContainerBounds:l,onResizeEnd:i,isResizing:c,setIsResizing:u,setResizeDirections:m,lockAspectRatio:s,hidden:h,recordingKey:_});return h?null:n.createElement("div",null,Object.values(o.Nm).map((r,i)=>{let o=e.includes(r);return o?n.createElement(p,{key:i,directions:[r],startResizing:g,onDoubleClick:t,recordingKey:a.ar(_,r)}):null}),[o.Nm.TOP,o.Nm.BOTTOM].map(r=>[o.Nm.LEFT,o.Nm.RIGHT].map((i,o)=>{let l=e.includes(r)&&e.includes(i);return l?n.createElement(p,{key:o,directions:[r,i],startResizing:g,onDoubleClick:t,recordingKey:a.ar(_,r,i)}):null})))}class p extends a.Vx{constructor(){super(...arguments),this.onMouseDown=e=>a.hO(this,"mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.props.startResizing(e,{x:t.clientX,y:t.clientY})}),this.onDoubleClick=a.hO(this,"dblclick",()=>{var e,t;if(!this.props.onDoubleClick)return a.Ev;null==(t=(e=this.props).onDoubleClick)||t.call(e)}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case o.Nm.TOP:return s.Lz;case o.Nm.BOTTOM:return s.w$;case o.Nm.LEFT:return s.pp;case o.Nm.RIGHT:return s.R3}else if(2===e.length){if(e[0]===o.Nm.TOP&&e[1]===o.Nm.RIGHT)return s.aL;if(e[0]===o.Nm.TOP&&e[1]===o.Nm.LEFT)return s.mU;if(e[0]===o.Nm.BOTTOM&&e[1]===o.Nm.RIGHT)return s.q8;if(e[0]===o.Nm.BOTTOM&&e[1]===o.Nm.LEFT)return s.L}}}render(){return n.createElement("div",{role:"presentation",className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let m=(e,t,r,n)=>{let{x:i,y:a}=e,l=r[o.Nm.LEFT]?i:t.left,s=r[o.Nm.RIGHT]?i:t.right,c=r[o.Nm.TOP]?a:t.top,d=r[o.Nm.BOTTOM]?a:t.bottom;if(n){let e=(t.right-t.left)/(t.bottom-t.top-o.Mz),n=r[o.Nm.LEFT]?t.left-i:i-t.right,u=r[o.Nm.TOP]?t.top-a:a-t.bottom,p=r[o.Nm.LEFT]||r[o.Nm.RIGHT],m=r[o.Nm.TOP]||r[o.Nm.BOTTOM];if(p&&m){let i,a;let p=n/e;p<u?(i=n,a=p,r[o.Nm.TOP]?c=t.top-a:d=t.bottom+a):(i=u*e,a=u,r[o.Nm.LEFT]?l=t.left-i:s=t.right+i)}else if(p){let n=r[o.Nm.LEFT]?t.left-i:i-t.right;d=t.bottom+n/e}else if(m){let n=r[o.Nm.TOP]?t.top-a:a-t.bottom;s=t.right+n*e}}return{left:l,top:c,right:s,bottom:d}};class h extends a.Vx{constructor(e){super(e),this.directions=[],this.mouseOffsetFromResizedCornerOrEdge={x:0,y:0},this.startResizing=(e,t)=>{this.directions=e;let r=this.props.getCurrentContainerBounds();this.lastPosition=r;let n={x:e.includes(o.Nm.LEFT)?r.left:e.includes(o.Nm.RIGHT)?r.right:t.x,y:e.includes(o.Nm.TOP)?r.top:e.includes(o.Nm.BOTTOM)?r.bottom:t.y},i={x:t.x-n.x,y:t.y-n.y};this.mouseOffsetFromResizedCornerOrEdge=i,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},this.onMouseMove=a.hO(this,"mousemove",e=>{if(this.props.hidden)return a.Ev;e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:r}=e;this.lastMousePosition={x:t,y:r};let n=!this.props.isResizing;if(n){let e=Object.create(null);this.directions.forEach(t=>{e[t]=!0}),this.props.setResizeDirections(this.directions),this.props.setIsResizing(e)}else this.resizeToPosition(this.lastMousePosition,e.shiftKey)},{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),this.resizeToPosition=({x:e,y:t},r)=>{if(!this.props.isResizing||!this.lastPosition||!this.props.resizeTo){this.unbindDocumentListeners();return}let n=this.props.lockAspectRatio||r,{lastPosition:i}=this,{isResizing:a}=this.props,l={x:e-this.mouseOffsetFromResizedCornerOrEdge.x,y:t-this.mouseOffsetFromResizedCornerOrEdge.y};l.y=Math.max(l.y,c);let{left:s,top:d,right:u,bottom:p}=m(l,i,a,n),h={[o.Nm.TOP]:d!==i.top,[o.Nm.BOTTOM]:p!==i.bottom,[o.Nm.LEFT]:s!==i.left,[o.Nm.RIGHT]:u!==i.right};this.props.resizeTo(h,{left:s,top:d,right:u,bottom:p,lockAspectRatio:n})},this.onMouseUp=a.hO(this,"mouseup",()=>{var e,t;this.unbindDocumentListeners(),this.props.setIsResizing(void 0),this.directions=[],null==(t=(e=this.props).onResizeEnd)||t.call(e)}),this.onKeyDown=a.v1(this,"keydown",e=>{e.shiftKey&&this.lastMousePosition&&this.resizeToPosition(this.lastMousePosition,!0)}),this.onKeyUp=a.v1(this,"keyup",e=>{this.lastMousePosition&&this.resizeToPosition(this.lastMousePosition,e.shiftKey)}),this.unbindDocumentListeners=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}}render(){return n.createElement("div",null,Object.values(o.Nm).map((e,t)=>{let r=this.props.allowedResizeDirections.includes(e);return r?n.createElement(p,{key:t,directions:[e],startResizing:this.startResizing.bind(this),onDoubleClick:this.props.onEdgeDoubleClick,recordingKey:a.ar(this.props,e)}):null}),[o.Nm.TOP,o.Nm.BOTTOM].map(e=>[o.Nm.LEFT,o.Nm.RIGHT].map((t,r)=>{let i=this.props.allowedResizeDirections.includes(e)&&this.props.allowedResizeDirections.includes(t);return i?n.createElement(p,{key:r,directions:[e,t],startResizing:this.startResizing.bind(this),onDoubleClick:this.props.onEdgeDoubleClick,recordingKey:a.ar(this.props,e,t)}):null})))}}h.displayName="ResizeTarget"},689254:(e,t,r)=>{r.d(t,{Ih:()=>f,gB:()=>g});var n=r(652983),i=r(63730),a=r(407908),o=r(970740),l=r(721127),s=r(317907),c=r(961215),d=r(752784),u=r(291904),p=r(157607),m=r(258448),h=r(437495);let _="delightful-toolbar-media-button",g="InsertMediaModal",f=(0,u.Y3)(function(){let e=(0,a.I0)(),t=(0,a.v9)(e=>{var t,r;return!!(null==(r=null==(t=e.modalShown)?void 0:t.data)?void 0:r.shouldMountCenter)}),r=n.useRef(null),u=t?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:_},{initialModalPosition:f,modalPosition:E,setModalPosition:y}=(0,d.w5)(u,157,320),v=n.useCallback(()=>{c.iTB.triggerAction("set-tool-default",null),e(l.h0({type:g}))},[e]),b=n.useCallback(e=>{y(e)},[y]),I=!E||!!(null==f?void 0:f.equals(E));return(n.useEffect(()=>{let e=e=>{var t;let n=i.findDOMNode(null==(t=r.current)?void 0:t.getEl()),a=(0,s.e5)(_);if(!n||!a)return;let o=n.contains(e.target),l=a.contains(e.target);!I||o||l||v()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[v,I]),f)?n.createElement(p.My,{ref:r,initialPosition:f,initialWidth:320,title:(0,o.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:v,onDragStart:()=>c.iTB.triggerAction("set-tool-default",null),onDragEnd:b,dragHeaderOnly:!0,arrowRelativeX:t?void 0:160,arrowPosition:p.xI.BOTTOM,smallArrow:!0,containerClassName:h.Xg,headerClassName:h.Sl,isFigJam:!0},n.createElement("div",{className:h.er,"data-testid":"insert-media-modal"},n.createElement(m.H,{onSuccess:v}))):null},g)},587487:(e,t,r)=>{r.d(t,{Dl:()=>C,Qm:()=>L,bD:()=>k,fv:()=>R,gb:()=>N,mD:()=>P,x5:()=>D,zN:()=>S});var n=r(652983),i=r(87608),a=r.n(i),o=r(172497),l=r(598271),s=r(311078),c=r(337167),d=r(388899),u=r(519781),p=r(618723),m=r(131826),h=r(125274),_=r(246905),g=r(292977),f=r(271774),E=r(157607),y=r(76433),v=r(217422),b=r(332224),I=r(578627);let T=r(670955),w=r(328630),S=(0,o.z)(b.dEd);function C(e){let t=(0,h.W5)(),r=(0,h.Ni)(),i=(0,f.Mz)({subscribeToUpdates_expensive:!0}),a=n.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:l.A0}),[o,s]=n.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=n.useMemo(()=>(0,y.Jc)(e.pointerType||y.Vj.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=n.useCallback(()=>{if(!a.current){s(null);return}let n=(0,f.Un)(i,a.current.absoluteBounds),o={x:n.x+i.x,y:n.y+t,height:n.height,width:n.width};s((0,y.Eq)({width:e.width,height:e.height,targetRect:o,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:t,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,t,r,e.arrowPosition,i]);return n.useEffect(()=>{var t;let r=(0,g.u8)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{a.current=e.position,u()});return a.current=(null==(t=r.currentNodePosition[e.targetKey])?void 0:t.position)||null,u(),()=>{(0,g.Ao)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,t,u,i]),(0,v.ee)({location:o,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),o}function O(e,t){switch(e){case E.xI.TOP:case E.xI.BOTTOM:return{left:t};case E.xI.LEFT_TITLE:case E.xI.RIGHT_TITLE:case E.xI.RIGHT_BODY:return{}}}let A={[E.xI.TOP]:{foregroundStyle:I.j$,backgroundStyle:I.Jg},[E.xI.BOTTOM]:{foregroundStyle:I.Yr,backgroundStyle:I.K8},[E.xI.LEFT_TITLE]:{foregroundStyle:I.tX,backgroundStyle:I.i5},[E.xI.RIGHT_TITLE]:{foregroundStyle:I.WO,backgroundStyle:I.kt},[E.xI.RIGHT_BODY]:{foregroundStyle:I.WO,backgroundStyle:I.kt}};function N(e){let{foregroundStyle:t,backgroundStyle:r}=A[e.arrowPosition],i={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?O(e.arrowPosition,e.arrowOffset):{}},a={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?O(e.arrowPosition,e.arrowOffset):{}};return n.createElement(n.Fragment,null,n.createElement("div",{"aria-hidden":!0,className:r,style:a}),n.createElement("div",{"aria-hidden":!0,className:t,style:i}))}function L(e){let t=(0,y.Jc)(y.Vj.arrow),r=e.width||t.defaultModalWidth,i=e.backgroundColor,a=e.onVisibilityChange,[o,l]=n.useState(0),s=n.useCallback(e=>{null!==e&&l(e.getBoundingClientRect().height)},[]),c=e.isCanvasNode?C:v.P2,d=c({targetKey:e.targetKey,height:o,width:r+2*S,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost}),p=!!d;if(n.useEffect(()=>{a&&a(p)},[p,a]),!d)return null;let m={left:d.left,top:d.top,width:r};e.topOffset&&(m.marginTop=e.topOffset),e.leftOffset&&(m.marginLeft=e.leftOffset);let h=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return n.createElement("div",{className:`${e.className||I.gk} ${e.noAnimation?I.Hd:""}`,style:{...m,...h},ref:s,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,role:"none"},n.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&n.createElement(N,{arrowPosition:d.pointerPosition,arrowOffset:d.pointerOffset,modalColor:i}),e.shouldNotWrapInParagraphTag?e.children:n.createElement("p",null,e.children),e.dismissModal&&n.createElement(u.PZ,{useOriginalSrcFills_DEPRECATED:!0,className:I.Ah,onClick:e.dismissModal,innerText:"close",svg:T})))}function P(e){let{arrowPosition:t}=e,r=(0,y.Jc)(y.Vj.arrow),i=e.width||r.defaultModalWidth,a=e.backgroundColor,o="dark"===(0,_.Fg)(),l="light"===e.background,[s,c]=n.useState(0),d=n.useCallback(e=>{null!==e&&c(e.getBoundingClientRect().height)},[]),h=(0,v.P2)({targetKey:e.targetKey,height:s,width:i+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...t&&{arrowPosition:t}});if(!h&&!e.shouldCenterModal)return null;let g=n.createElement(u.PZ,{useOriginalSrcFills_DEPRECATED:!0,className:I.FI,onClick:e.dismissModal,innerText:"close",svg:l&&!o?w:T}),f=n.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&n.createElement("div",{className:I._J},e.bottomLeftText&&n.createElement("b",null,e.bottomLeftText),n.createElement("div",{className:I.kj},e.secondaryCtaText&&e.onClickSecondaryCta&&n.createElement(m.XT,{className:l?I.HX:I.l5,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&n.createElement(p.RS,{className:l?I.wX:I.Bw,onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),E={backgroundColor:a,width:i,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},b=h?{left:h.left,top:h.top}:{left:0,right:0,top:0,bottom:0};return n.createElement("div",{className:l?I.kg:I.V4,ref:d,style:{...E,...b}},n.createElement("div",null,h&&n.createElement(N,{arrowPosition:h.pointerPosition,arrowOffset:h.pointerOffset,modalColor:l?"var(--color-bg)":void 0}),n.createElement("h1",null,e.title),e.children,g),f)}function R(e){let[t,r]=n.useState(0),i=n.useCallback(e=>{null!==e&&r(e.getBoundingClientRect().height)},[]),a=n.useRef(null),o=e.disableClickOutsideToHide?d.ZT:e.dismissModal;(0,s.X)(a,o);let l=n.useRef(null),c=(0,v.P2)({targetKey:e.targetKey,height:t,width:e.width+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});n.useEffect(()=>{c&&(l.current=c)},[c]);let p=c||l.current,m=e.hideIfTargetLost&&null==c;if(!p||m||e.shouldDismissWhenLostDOMTarget&&!c)return null;let h=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",_=e.pointerForegroundColor||"var(--color-bg, white)",g={left:p.left,top:p.top,width:e.width};e.height&&(g.height=e.height);let f=e.animateQuickly?I.sH:I.lv;return n.createElement("div",{ref:a},n.createElement("div",{className:e.className?`${e.className}`:f,style:g,ref:i,"data-testid":"walkThroughModal"},!e.hidePointer&&n.createElement(N,{arrowPosition:p.pointerPosition,arrowOffset:p.pointerOffset,modalColor:_,pointerBorderColor:h,pointerBorder:!0}),e.children,!e.hideCloseButton&&n.createElement(u.PZ,{className:`${I.Ah} ${e.closeButtonClassName||""}`,onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close",svg:w})))}function k({skipConnectorModal:e,shouldSkipConnectorModalAtom:t}){let[r,n]=(0,c.KO)(t);return r&&e&&e(),{handleTargetLost:function(t,r){t&&("canvas"===r&&n(!0),e&&e())}}}function D(e){return n.createElement(M,{useRepositioning:"canvas"===e.targetType?C:v.P2,targetType:e.targetType,targetKey:e.targetKey,topPadding:e.topPadding,isBold:e.isBold,hasShadow:e.hasShadow,arrowPosition:e.arrowPosition,children:e.children,autoWidth:e.autoWidth,fixedWidth:e.fixedWidth,shouldHideArrow:e.shouldHideArrow,shouldCenterArrow:e.shouldCenterArrow,onTargetLost:e.onTargetLost})}function M(e){let t=(0,y.Jc)(y.Vj.connector),[r,i]=n.useState(0),[o,l]=n.useState(0),s=n.useRef(null),c=e.useRepositioning({targetKey:e.targetKey,height:r,width:e.autoWidth?o:e.fixedWidth?e.fixedWidth:t.defaultModalWidth,topPadding:e.topPadding,pointerType:y.Vj.connector,arrowPosition:e.arrowPosition,shouldCenterArrow:e.shouldCenterArrow});return(n.useLayoutEffect(()=>{let e=s.current;if(!e)return;let t=new ResizeObserver(()=>{let t=e.getBoundingClientRect();i(t.height),l(t.width)});return t.observe(e),()=>t.disconnect()},[c]),c)?n.createElement("div",{className:a()({[I.VE]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold,[I.AF]:!!e.hasShadow,[I.tB]:"dom"===e.targetType,[I.pt]:"canvas"===e.targetType}),style:{left:c.left,top:c.top,width:e.autoWidth?"auto":e.fixedWidth?e.fixedWidth:t.defaultModalWidth},ref:s},!e.shouldHideArrow&&n.createElement(F,{connectorPosition:c.pointerPosition,connectorOffset:c.pointerOffset,isBold:e.isBold}),e.children):null}function F(e){let t=n.createElement("div",{className:a()({[I.bx]:!0,[I.we]:!0}),style:{left:e.connectorOffset}},n.createElement("div",{className:a()({[I.Ti]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})}),n.createElement("div",{className:a()({[I.hG]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})})),r=n.createElement("div",{className:a()({[I.bx]:!0,[I.I]:!0}),style:{left:e.connectorOffset}},n.createElement("div",{className:a()({[I.hG]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})}),n.createElement("div",{className:a()({[I.Ti]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})})),i=n.createElement("div",{className:a()({[I.bx]:!0,[I.t$]:!0}),style:{top:e.connectorOffset}},n.createElement("div",{className:a()({[I.Ti]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})}),n.createElement("div",{className:a()({[I.G2]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})})),o=n.createElement("div",{className:a()({[I.bx]:!0,[I.F2]:!0}),style:{top:e.connectorOffset}},n.createElement("div",{className:a()({[I.G2]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})}),n.createElement("div",{className:a()({[I.Ti]:!0,[I.mJ]:!e.isBold,[I.Se]:!!e.isBold})}));return n.createElement(n.Fragment,null,e.connectorPosition===E.xI.TOP&&t,e.connectorPosition===E.xI.BOTTOM&&r,e.connectorPosition===E.xI.LEFT_TITLE&&i,e.connectorPosition===E.xI.RIGHT_TITLE&&o,e.connectorPosition===E.xI.RIGHT_BODY&&o)}},509175:(e,t,r)=>{r.d(t,{DC:()=>w,Im:()=>O,Y7:()=>P,_W:()=>L,bk:()=>R,g7:()=>C,gF:()=>A,ij:()=>k,kp:()=>I,qH:()=>T,qh:()=>N,w2:()=>S});var n=r(652983),i=r(407908),a=r(418465),o=r(435613),l=r(212984),s=r(970740),c=r(280251),d=r(961215),u=r(898080),p=r(201248),m=r(605508),h=r(157607),_=r(219143),g=r(198456),f=r(23346);let E=r(538408),y=r(284182),v=r(306729);function b(){return n.createElement(a.Ct,{color:a.JV.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:l.cx.colorTextBrand.colorBgSelectedSecondary.font11.$})}function I({dismissModal:e}){return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:"create-new-project-permission-dropdown",arrowPosition:h.xI.RIGHT_BODY,title:(0,s.t)("pro_onboarding.protect_your_projects"),subtitle:(0,s.t)("pro_onboarding.change_who_can_edit_and_view_your_files_on_your_professional_plan"),width:320,badge:n.createElement(b,null)})}function T({dismissModal:e}){let t="team-view-new-project-cta";return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:h.xI.TOP,title:(0,s.t)("pro_onboarding.hello_organized_files"),subtitle:(0,s.t)("pro_onboarding.now_that_you_re_on_a_professional_team_move_your_files_into_project"),width:320,shouldCenterArrow:h.Ht.FALLBACK,badge:n.createElement(b,null)})}function w({dismissModal:e,canCreateFigjamBoard:t}){let r="folder-page-view-new-file-cta";return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:h.xI.TOP,title:t?(0,s.t)("pro_onboaridng.so_many_files_and_boards"):(0,s.t)("pro_onboaridng.so_many_files"),subtitle:t?(0,s.t)("pro_onboaridng.you_now_get_unlimited_design_files_pages_and_figjam_boards"):(0,s.t)("pro_onboaridng.you_now_get_unlimited_design_files"),width:320,shouldCenterArrow:h.Ht.FALLBACK,badge:n.createElement(b,null)})}function S({dismissModal:e}){let t="share-prototype";return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:h.xI.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:n.createElement(b,null)})}function C({dismissModal:e}){let t="meeting-panel-button";return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:h.xI.TOP,title:(0,s.t)("pro_onboarding.start_a_voting_session"),subtitle:(0,s.t)("pro_onboarding.if_you_want_to_reach_a_decision_keep_things_simple_with_a_figjam_vote"),width:320,badge:n.createElement(b,null)})}function O({dismissModal:e}){return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:"pages-panel-toggle",calloutTargetKey:"pages-panel-toggle",arrowPosition:h.xI.LEFT_TITLE,title:(0,s.t)("rcs.pro_trials_onboarding.unlimited_pages_title"),subtitle:n.createElement(s.Tx,{id:"rcs.pro_trials_onboarding.unlimited_pages_subtitle",maxFreePages:u.UV}),width:320,badge:n.createElement(b,null)})}function A({dismissModal:e}){let t=(0,i.v9)(e=>e.multiplayer.allUsers.length>1),r=t?"audio-nux-key":g.kQ,a=t?(0,s.t)("pro_onboarding.if_other_people_are_in_your_file_select_the_headphones"):(0,s.t)("rcs.pro_trials_onboarding.audio_subtitle_without_multiple_users");return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:h.xI.TOP,title:(0,s.t)("rcs.pro_trials_onboarding.audio_title"),subtitle:a,width:320,badge:n.createElement(b,null)})}function N({dismissModal:e}){return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:"file-workshop-row",calloutTargetKey:"file-workshop-button",arrowPosition:h.xI.RIGHT_TITLE,title:(0,s.t)("rcs.pro_trials_onboarding.open_sessions_title"),subtitle:(0,s.t)("rcs.pro_trials_onboarding.open_sessions_subtitle"),width:300,badge:n.createElement(b,null)})}function L({dismissModal:e}){let t=[(0,s.t)("rcs.pro_trials_onboarding.password_protection_first_instruction",{linkAccessOptionText:(0,s.t)("file_access_row.anyone_with_the_link_and_password")}),(0,s.t)("rcs.pro_trials_onboarding.password_protection_second_instruction")];return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:"file-access-row",calloutTargetKey:_.L3,arrowPosition:h.xI.RIGHT_TITLE,title:(0,s.t)("rcs.pro_trials_onboarding.password_protection_title"),width:320,instructions:t,disableClickOutsideToHide:!0,badge:n.createElement(b,null)})}function P({dismissModal:e}){let t=(0,i.I0)(),r=(0,i.v9)(e=>Object.keys(e.library.local.components).length>0),a=(0,i.v9)(e=>e.mirror.appModel.keyboardShortcuts),l=(0,m.bQ)(a,"create-symbol");n.useEffect(()=>{t(c.W5({tab:d.caZ.ASSETS}))},[]);let u=n.createElement(o.n,{svg:v,title:(0,s.t)("rcs.pro_trials_onboarding.component_publishing_team_library_icon"),role:"img",ariaLabel:(0,s.t)("rcs.pro_trials_onboarding.component_publishing_team_library_icon"),autosize:!0}),_=n.createElement(o.n,{svg:y,title:(0,s.t)("rcs.pro_trials_onboarding.component_publishing_create_component_icon"),role:"img",ariaLabel:(0,s.t)("rcs.pro_trials_onboarding.component_publishing_create_component_icon"),autosize:!0}),g=[n.createElement(n.Fragment,null,n.createElement(s.Tx,{id:"rcs.pro_trials_onboarding.component_publishing_second_instruction_with_components",teamLibraryIcon:u})),(0,s.t)("rcs.pro_trials_onboarding.component_publishing_third_instruction_with_components",{publishButtonText:(0,s.t)("design_systems.libraries_modal.publish")})],E=[(0,s.t)("rcs.pro_trials_onboarding.component_publishing_first_instruction_without_components"),n.createElement(n.Fragment,null,n.createElement(s.Tx,{id:"rcs.pro_trials_onboarding.component_publishing_second_instruction_without_components",createComponentIcon:_,createComponentShortcut:l}))],I=r?(0,s.t)("rcs.pro_trials_onboarding.component_publishing_title_with_components"):(0,s.t)("rcs.pro_trials_onboarding.component_publishing_title_without_components"),T=r?void 0:(0,s.t)("rcs.pro_trials_onboarding.component_publishing_subtitle_without_components");return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:p.UB,calloutTargetKey:p.UB,arrowPosition:h.xI.LEFT_TITLE,title:I,subtitle:T,width:320,instructions:r?g:E,badge:n.createElement(b,null)})}function R({dismissModal:e}){let t=n.createElement(o.n,{svg:E,title:(0,s.t)("rcs.pro_trials_onboarding.video_icon"),role:"img",ariaLabel:(0,s.t)("rcs.pro_trials_onboarding.video_icon"),autosize:!0}),r=n.createElement(s.Tx,{id:"rcs.pro_trials_onboarding.video_subtitle",imageOrVideoIcon:t});return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:"tool-place-image",calloutTargetKey:"tool-place-image",arrowPosition:h.xI.LEFT_TITLE,title:(0,s.t)("rcs.pro_trials_onboarding.video_title"),subtitle:r,width:320,badge:n.createElement(b,null)})}function k({dismissModal:e}){let t="local-variables-panel-title";return n.createElement(f.$o,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:h.xI.LEFT_TITLE,title:(0,s.t)("pro_onboarding.variables_save_you_time"),subtitle:n.createElement(s.Tx,{id:"pro_onboarding.use_variables_in_components_and_prototypes"}),width:320,badge:n.createElement(b,null)})}},87794:(e,t,r)=>{r.d(t,{d:()=>y});var n=r(652983),i=r(407908),a=r(810373),o=r(618723),l=r(293351),s=r(970740),c=r(721127),d=r(62514),u=r(329660),p=r(131826),m=r(225468),h=r(291904),_=r(110283),g=r(236750),f=r(181602),E=r(102677);let y=(0,h.Y3)(function(e){let[t,r]=n.useState(""),h=(0,i.I0)(),y=(0,i.v9)(e=>e.teams),v=Object.values(y),b=1===v.length,I=e=>{e.preventDefault(),h(c.hV())},T=n.useCallback(()=>{h(c.hV()),h((0,c.K4)({type:_.R,data:{teamId:e.team.id}}))},[h,e.team.id]);if(!e.team.org_id&&e.subscriptionStatus)return n.createElement(p.Ui,{name:"Blocked Pro Team Delete Modal"},n.createElement(g.sv,{title:(0,s.t)("team_delete_modal.pro_plan_cancel_modal_header"),confirmText:(0,s.t)("team_delete_modal.proceed_to_cancel"),onConfirm:()=>{(0,u.KU)()?h((0,c.K4)({type:f.B,data:{teamId:e.team.id,onContinue:T}})):T()},cancelText:(0,s.t)("team_delete_modal.dismiss"),trackedConfirmationProperties:{teamId:e.team.id}},n.createElement(s.Tx,{id:"team_delete_modal.cancel_to_delete_team",teamName:e.team.name})));let w=e.team.name!==t;return n.createElement(p.Ui,{name:"Team Delete Modal",properties:{teamid:e.team.id}},n.createElement(g.ge,{maxWidth:344,minWidth:344,fixedTop:!0,onClose:I,title:(0,s.t)("team_delete_modal.delete_this_props_team_name",{teamName:e.team.name})},n.createElement("div",{className:E.nC},n.createElement(s.Tx,{id:"team_delete_modal.warning_confirmation_text",teamName:n.createElement("span",{className:E.ef},e.team.name)}),n.createElement("div",null,n.createElement("div",null,"\xa0"),n.createElement(s.Tx,{id:"team_delete_modal.days_to_undo_deletion",numDays:n.createElement("span",{className:E.ef},n.createElement(s.Tx,{id:"team_delete_modal.days_for_team_deletion_undo",numDays:28}))})),n.createElement("div",null,"\xa0"),n.createElement(s.Tx,{id:"team_delete_modal.to_confirm_please_enter_the_name_of_the_team"}),n.createElement("form",{onSubmit:t=>{t.preventDefault(),h(d.IV({team:e.team,userInitiated:!0,teamDelete:!0})),h(c.eI()),r("")}},n.createElement("div",null,n.createElement(l.Q,{className:E.Y2,type:"text",value:t,onKeyDown:e=>{e.keyCode===a.sr.ENTER&&e.preventDefault()},onChange:e=>{r(e.currentTarget.value)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})),b&&n.createElement(n.Fragment,null,n.createElement("div",null,"\xa0"),n.createElement(s.Tx,{id:"team_delete_modal.deleting_last_team_notice",notice:n.createElement("span",{className:E.ef},n.createElement(s.Tx,{id:"team_delete_modal.warning_note"}))})),n.createElement("div",{className:E.UN},n.createElement(o.PL,{onClick:I},n.createElement(s.Tx,{id:"general.cancel"})),n.createElement(o.VG,{type:"submit",className:E.iY,disabled:w},n.createElement("span",{"data-tooltip":(0,s.t)("team_delete_modal.to_confirm_please_enter_the_name_of_the_team"),"data-tooltip-type":w?m.fR.TEXT:null},n.createElement(s.Tx,{id:"team_delete_modal.delete_team"}))))))))},"TeamConfirmDeleteModal")},92035:(e,t,r)=>{r.d(t,{I:()=>f,k:()=>h});var n=r(652983),i=r(600486),a=r(365653),o=r(618723),l=r(782051),s=r(970740),c=r(961215),d=r(572333),u=r(505468),p=r(291904),m=r(102677);let h="upgrading-modal";(0,p.QR)(h,e=>n.createElement(_,{upgradingState:e.modalShown.data.upgradingState,dispatch:e.dispatch}));class _ extends n.Component{render(){let e=this.props.upgradingState===c.hKT.UPGRADING?(0,s.t)("multiplayer_upgrade_modal.content_saving"):(0,s.t)("multiplayer_upgrade_modal.content_reloading");return n.createElement(u.u_,{size:"small",className:m.oC,disableClickOutsideToHide:!0,dispatch:this.props.dispatch},n.createElement("div",{className:m.TN},n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.title"})),n.createElement("div",{className:m.Tr},e),n.createElement("div",{className:m.UN},n.createElement(l.TK,null)))}}_.displayName="UpgradingModal";class g extends n.Component{constructor(){super(...arguments),this.noOp=e=>e,this.onUpdateClicked=()=>{(0,i.L9)("Upgrade Modal Clicked"),c.B9x.startUpgrade()}}render(){let{multiplayerSessionState:e,isReadOnly:t}=this.props,r=e!==c.hKT.UNJOINED;return e===c.hKT.UPGRADING||e===c.hKT.WAITING_FOR_RELOAD?null:n.createElement(u.u_,{size:"small",className:m.oC,disableClickOutsideToHide:!0,dispatch:this.noOp},n.createElement("div",{className:m.TN},n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.title"})),n.createElement("div",{className:m.Tr},n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.content"}),!r&&n.createElement("span",null,n.createElement("br",null),"\xa0",n.createElement("br",null),n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.content_offline"}))),r&&n.createElement("div",{className:m.UN},n.createElement(o.DF,{onClick:this.onUpdateClicked},t?n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.reload_button"}):n.createElement(s.Tx,{id:"multiplayer_upgrade_modal.save_and_reload_button"}))))}}function f(){var e,t;let{multiplayerSessionState:r,isReadOnly:i}=(0,a.c)(e=>({multiplayerSessionState:e.mirror.appModel.multiplayerSessionState,isReadOnly:e.mirror.appModel.isReadOnly})),o=(0,d.YO)(null==(t=null==(e=c.O$1)?void 0:e.uiState())?void 0:t.showOutOfDateWall,!1);return o?n.createElement(g,{multiplayerSessionState:r,isReadOnly:i}):null}g.displayName="OutOfDateWall"},809283:(e,t,r)=>{r.d(t,{Xk:()=>g,hn:()=>m,lK:()=>f});var n=r(652983),i=r(407908),a=r(256768),o=r(31642),l=r(721127),s=r(470035),c=r(70918),d=r(220949),u=r(147786),p=r(534383);let m="link_expired_event",h=e=>{o.ZP.put(`/api/files/${e}/expire_public_link`)},_=(e,t)=>{let r=n.useRef(null);n.useEffect(()=>{let n=e?(0,a.Z)(e).diff((0,a.Z)()):void 0;return void 0!==n&&n<2147483647?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{r.current=null,t()},n)):r.current&&(clearTimeout(r.current),r.current=null),()=>{r.current&&clearTimeout(r.current)}},[e,t])},g=e=>{let t=(0,c.xJ)(),r=(0,i.I0)(),{file:a,onCanvasExpired:o}=e,p=null==a?void 0:a.key,g=(0,s.x)(e.file),f=n.useRef(void 0),E=null==g?void 0:g.activeExpiration,y=null==g?void 0:g.file,v=null==y?void 0:y.hasViewPrototypeRole,b=null==g?void 0:g.accessReverted;n.useEffect(()=>{var e,t;v&&b&&!(null==(e=f.current)?void 0:e.accessReverted)&&g.expiresAt&&g.expiresAt===(null==(t=f.current)?void 0:t.expiresAt)&&(0,d.m_)({id:m}),f.current=g},[g,b,v]);let I=n.useCallback(()=>{p&&(v&&t||(r(l.K4({type:u._})),null==o||o()),h(p))},[r,o,p,t,v]);_(E,I)},f=(e,t)=>{var r;let i=null==(r=(0,p.im)(t))?void 0:r.toISOString(),a=n.useCallback(()=>{h(e)},[e]);_(i,a)}},219143:(e,t,r)=>{r.d(t,{L3:()=>q,u5:()=>X});var n=r(652983),i=r(401128),a=r(845976),o=r(125719),l=r(785466),s=r.n(l),c=r(388899),d=r(286206),u=r(523495),p=r(117986),m=r(618723),h=r(809988),_=r(435613),g=r(970740),f=r(721127),E=r(329660),y=r(706039),v=r(659994),b=r(761767),I=r(898080),T=r(590708),w=r(614860),S=r(257817),C=r(211879),O=r(716215),A=r(225468),N=r(787618),L=r(850556),P=r(805228),R=r(57448),k=r(132156),D=r(534383),M=r(944075),F=r(785937),x=r(545058);let U=r(58795),B=r(405777),V=r(275169),G=r(672418),H=r(916671),W=r(333012),K=r(582746),z=r(790346),Z=r(834923),Y=r(427033),j=r(368140),$=r(250215),q="file-share-audience-select-key";class X extends n.PureComponent{constructor(){super(...arguments),this.state={descriptionModeExpanded:!1,unsavedDropdownValues:null,isLinkExpirationInputDisplayed:!!this.getExpiration()||(0,T.Cs)(this.props.sharedOrgLicenseGroupSetting),publicLinkDisplayState:F.II.VIEW},this.onCollapseDescription=()=>{this.setState({descriptionModeExpanded:!1})},this.onExpandDescription=()=>{this.setState({descriptionModeExpanded:!0})},this.onUpdateUnsavedDropdownValues=e=>{this.setState({unsavedDropdownValues:e})},this.onUpdatePublicLinkDisplayStatus=e=>{this.setState({publicLinkDisplayState:e})},this.onResetProperties=()=>{this.setState({unsavedDropdownValues:null,publicLinkDisplayState:F.II.VIEW})},this.onDropdownValuesChange=e=>{var t,r;let n={},i=this.state.unsavedDropdownValues||(0,R.RO)(this.props.permissions),{filePayload:a,transformedValues:o}=(0,R.mn)(i,e,this.props.team,this.props.org,this.props.isFreeUserOnly,this.props.isInDraftsFolder,(0,S.On)(this.props.editorType)),l=(0,R.bs)(o),s=(0,T.Cs)(this.props.sharedOrgLicenseGroupSetting),c=(0,R.cV)(this.props.mainFileLinkExpirationConfig),u=s&&l&&!this.props.isBranch&&!c||s&&l&&!this.props.isBranch&&c&&i.audience!==e.audience||(0,F.jK)(this.state.publicLinkDisplayState)&&i.audience===o.audience&&l;if("public-password"!==i.audience&&"public-password"===o.audience){if(this.props.team&&!this.props.org&&!(0,I.e3)(this.props.team)){let e=(0,E.E4)();if(e){if(!(0,S.of)(this.props.editorType)){(0,d.Jz)(p.k.MONETIZATION,Error("ExpStandardizeProEntrypoints: Wrong editor type for pro feature"),{extra:{editorType:this.props.editorType,teamId:null==(t=this.props.team)?void 0:t.id}});return}this.props.dispatch((0,f.K4)({type:N.yd,data:{team:this.props.team,editorType:this.props.editorType,resource:w.gx.PASSWORD_PROTECTION,currentPlan:y.V.Plan.STARTER,upsellPlan:y.V.Plan.PRO}}));return}(0,d.Jz)(p.k.MONETIZATION,Error("ExpStandardizeProEntrypoints: Starter users in control should not be able to access handler"),{extra:{editorType:this.props.editorType,teamId:null==(r=this.props.team)?void 0:r.id}});return}(()=>{this.setState({unsavedDropdownValues:o,publicLinkDisplayState:s?F.II.EDIT_PWD_AND_EXP:F.II.EDIT_PWD,isLinkExpirationInputDisplayed:!1})})();return}if("public-password"===i.audience&&"public-password"!==o.audience&&Object.assign(n,{publicLinkDisplayState:F.II.VIEW,unsavedDropdownValues:null}),l&&(!(0,R.bs)(i)||i.audience!==e.audience)&&(s&&!this.props.isBranch||this.props.isBranch&&this.getExpiration())&&Object.assign(n,{isLinkExpirationInputDisplayed:!0,publicLinkDisplayState:this.props.isBranch?F.II.VIEW:F.II.EDIT_EXP}),"edit"===i.level&&"edit"!==o.level&&!this.props.hasEditRole&&!this.props.isOwner){let e=this.props.modalShown;this.props.dispatch(f.K4({type:L.h,data:{onConfirm:()=>{e&&this.props.dispatch(f.K4(e)),u?this.onUpdateUnsavedDropdownValues(o):this.props.onUpdate(a)},onCancel:()=>{e&&this.props.dispatch(f.K4(e))}}}));return}if(!this.props.isBranch&&this.props.containingRepo&&function(e,t){if(!t.has_active_branches)return!1;switch(e){case"inherit":return!0;case"org":case"org-browsable":if(t.link_access===b.I1.VIEW||t.link_access===b.I1.EDIT)return!0;return!1;default:return!1}}(e.audience,this.props.containingRepo)){this.props.dispatch(f.K4({type:P.K,data:{repoId:this.props.containingRepo.id,onConfirm:()=>{this.props.onUpdate(a)}}}));return}l||u||Object.assign(n,{publicLinkDisplayState:F.II.VIEW,unsavedDropdownValues:null}),u?Object.assign(n,{unsavedDropdownValues:o}):(this.props.onUpdate(a),Object.assign(n,{unsavedDropdownValues:null})),this.setState(n)}}componentDidUpdate(e){let t={};s()(this.getAccessPermissions(this.props.permissions),this.getAccessPermissions(e.permissions))||(0,R._s)(this.props.permissions)||Object.assign(t,{unsavedDropdownValues:null}),s()(this.getExpiration(),(0,D.im)(e.mainFileLinkExpirationConfig))||Object.assign(t,{isLinkExpirationInputDisplayed:!!this.getExpiration()||(0,T.Cs)(this.props.sharedOrgLicenseGroupSetting)}),this.setState(t)}getAccessPermissions(e){return{has_file_link_password:e.has_file_link_password,has_proto_link_password:e.has_proto_link_password,link_access:e.link_access,proto_link_access:e.proto_link_access,org_browsable:e.org_browsable}}getExpiration(){return(0,D.im)(this.props.mainFileLinkExpirationConfig)}shouldShowDescription(){var e;if((0,O.mz)())return!1;let t=this.props.org,r=this.state.unsavedDropdownValues||(0,R.RO)(this.props.permissions);return t&&!t.domain_capture&&(0,R.lR)(r)&&(null==(e=this.props.orgUser)?void 0:e.permission)!==b.Gu.GUEST}renderDescription(){if(!this.props.permissions||!this.props.org||!this.props.orgDomains||this.props.orgDomains.domains.length<=0)return n.createElement("div",null);let e=this.props.orgDomains.domains.map(e=>e.domain),t=this.props.org.name;if(this.state.descriptionModeExpanded)return n.createElement("div",null,n.createElement("p",{className:x.Hv},n.createElement(g.Tx,{id:"file_access_row.org_name_members_have_emails_at_emails_list_show_less",orgName:t,emailsList:n.createElement(h.x,null,e.map(e=>n.createElement("span",{key:e},e))),showLess:n.createElement(m.UU,{onClick:this.onCollapseDescription,trusted:!0},n.createElement(g.Tx,{id:"file_access_row.show_less"}))})));{let r=e[0],i=e.length-1;return n.createElement("p",{className:x.Hv},n.createElement(g.Tx,{id:"file_access_row.orgname_members_have_emails_at_first_domain_plus_others",domainCount:e.length,orgName:t,firstDomain:r,remainingDomainCountLink:n.createElement(m.UU,{onClick:this.onExpandDescription,trusted:!0},n.createElement(g.Tx,{id:"file_access_row.remaining_domain_count_more",remainingDomainCount:i}))}))}}render(){let e;let t=this.state.unsavedDropdownValues||(0,R.RO)(this.props.permissions),{passwordSetAt:r,passwordSetByUser:l,hideLinkAccessInfo:s,mainFileLinkExpirationConfig:c}=this.props,d="inherit"===t.audience,u=j;if(d?u=Z:"public-password"===t.audience?u=V:"public"===t.audience?u=U:"org"===t.audience?u=H:"org-browsable"===t.audience&&(u=K),this.props.inWorkshop&&"public-password"!==t.audience&&(u=U),this.props.isUI3)switch(t.audience){case"inherit":e=n.createElement(i.g,null);break;case"public":case"public-password":case"org":case"org-browsable":e=n.createElement(a.c,null);break;default:e=n.createElement(o.H,null)}let p=!!t.publicProto||!this.shouldShowDescription();return n.createElement(n.Fragment,null,n.createElement("div",{"data-onboarding-key":"file-access-row"},n.createElement("div",{className:x.M6},!this.props.isUI3&&n.createElement(_.n,{className:x.j3,svg:u}),n.createElement("div",{className:x.xR},!s&&n.createElement(er,{...this.props,ui3Icon:this.props.isUI3?e:void 0,dropdownValues:t,onDropdownValuesChange:this.onDropdownValuesChange}),s&&n.createElement(n.Fragment,null,n.createElement(g.Tx,{id:"file_access_row.only_editors_can_invite_people_to_this_file.seat_rename"})))),n.createElement(k.r,{isPasswordProtected:(0,R._s)(this.props.permissions),passwordSetAt:r,passwordSetByUser:l||null,expirationSetByUser:c?c.setByUser:null,onResetProperties:this.onResetProperties,dropdownValues:t,displayState:this.state.publicLinkDisplayState,currentExpiration:this.getExpiration(),shouldShowDescription:this.shouldShowDescription(),renderDescription:this.renderDescription.bind(this),onDropdownValuesChange:this.onDropdownValuesChange,onUpdateDisplayStatus:this.onUpdatePublicLinkDisplayStatus,...this.props}),p&&n.createElement("div",null)))}}function J(e){let{has_file_link_password:t,has_proto_link_password:r}=e;return!!t||!!r}function Q(e,t){switch(e){case"public":if(t.link_access!==b.I1.VIEW&&t.link_access!==b.I1.EDIT||J(t))return!0;return!1;case"org":case"org-browsable":if(t.link_access===b.I1.INHERIT||J(t))return!0;return!1;default:return!1}}class ee extends n.PureComponent{constructor(){super(...arguments),this.FILE_LINK_AUDIENCE_DROPDOWN="file-link-audience-dropdown",this.onAudienceChange=e=>{let t={...this.props.dropdownValues,audience:e};(0,R.lR)(t)||(t.publicProto=null),this.props.onDropdownValuesChange(t)},this.isBranchOfPwdProtectedRepo=()=>!!(this.props.containingRepo&&this.props.isBranch&&J(this.props.containingRepo)),this.getInviteOnlyText=e=>this.isBranchOfPwdProtectedRepo()?(0,g.t)("file_access_row.anyone_with_the_link_and_password"):(0,g.t)("file_access_row.only_people_invited_to_this_noun",{noun:e}),this.orgOptions=()=>{let e=(0,T.Zy)(this.props.sharedOrgLicenseGroupSetting),t=(0,T.nT)(this.props.sharedOrgLicenseGroupSetting),r=this.props.fileKey&&this.props.editorType===b.gg.WHITEBOARD&&(0,T.Cs)(this.props.sharedOrgLicenseGroupSetting),n=!!this.props.containingRepo&&this.props.isBranch,i=(0,g.t)("file_access_row.anyone_with_the_link");!this.props.inWorkshop&&(e||t||r)&&(i=(0,g.t)("file_access_row.anyone_with_the_link_disabled_by_admin"));let a=this.props.org.name,o=this.props.noun,l=[{type:"option",key:"public",text:i,icon:B,disabled:e||t||r||!!n&&Q("public",this.props.containingRepo)}],s=(0,g.t)("file_access_row.anyone_with_the_link_and_password");return!this.props.inWorkshop&&(e||r)&&(s=(0,g.t)("file_access_row.anyone_with_the_link_and_password_disabled_by_admin")),l.push({type:"option",key:"public-password",text:s,icon:G,disabled:e||r||!!this.props.isBranch||!!this.props.isPublishedHubFile}),l.push({type:"separator"}),l.push({type:"option",key:"org",text:(0,g.t)("file_access_row.anyone_at_org_name_with_the_link",{orgName:(0,u.aF)(a,37)}),icon:W,disabled:!!n&&Q("org",this.props.containingRepo)}),this.showOrgBrowsable()&&l.push({type:"option",key:"org-browsable",text:(0,g.t)("file_access_row.anyone_at_org_name",{orgName:(0,u.aF)(a,37)}),icon:z,disabled:!!n&&Q("org-browsable",this.props.containingRepo)}),l.push({type:"separator"}),l.push({type:"option",key:"inherit",text:this.getInviteOnlyText(o),icon:Y}),l},this.nonOrgOptions=()=>{let e=this.props.noun,t=this.props.team,r=!!t&&!(0,I.e3)(t)&&(0,E.E4)(),n=t&&((0,I.e3)(t)||r)||(0,R._s)(this.props.permissions),i=[{type:"option",key:"public",text:(0,g.t)("file_access_row.anyone_with_the_link")}];return n&&i.push({type:"option",key:"public-password",text:(0,g.t)("file_access_row.anyone_with_the_link_and_password")}),i.push({type:"option",key:"inherit",text:this.getInviteOnlyText(e)}),i}}showOrgBrowsable(){let{dropdownValues:e,isBranch:t}=this.props;return!("proto-view-only"===e.level||t)}render(){let e=this.props.hasEditRole,t=this.props.dropdownValues.audience;return this.props.inWorkshop&&"public-password"!==t&&(t="public"),n.createElement(M.Q,{dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:t,options:this.props.org?this.orgOptions():this.nonOrgOptions(),onChange:this.onAudienceChange,id:this.FILE_LINK_AUDIENCE_DROPDOWN,dataOnboardingKey:q,placeholder:(0,g.t)("file_access_row.only_people_invited_to_this_noun",{noun:this.props.noun}),disabled:!e&&!this.props.isOwner||this.props.inWorkshop||this.isBranchOfPwdProtectedRepo(),trackingProperties:{canUserAccessProFeature:(0,I.e3)(this.props.team)},ui3Icon:this.props.ui3Icon})}}ee.displayName="FileLinkAudience";class et extends n.PureComponent{constructor(){super(...arguments),this.LINK_LEVEL_DROPDOWN="link-level-dropdown",this.onLevelChange=e=>{this.props.onDropdownValuesChange({...this.props.dropdownValues,level:e})}}showEditOption(){let{dropdownValues:e,team:t,isFreeUserOnly:r,org:n,isInDraftsFolder:i}=this.props;return"edit"===e.level||(n?"inherit"!==e.audience&&!(n.invite_whitelist_guest_invite_setting===C.lz.BANNED&&"public"===e.audience):!!(0,v.O0)(t,r,i))}showEditWarning(){let{dropdownValues:e,org:t,inWorkshop:r}=this.props;return!!t&&!r&&"edit"===e.level&&"public"===e.audience&&t.invite_whitelist_guest_invite_setting===C.lz.REQUIRE_APPROVAL}showPrototypeOnlyOption(){let{dropdownValues:e}=this.props;return"org-browsable"!==e.audience}render(){let{dropdownValues:e,team:t,hasEditRole:r,editorType:i}=this.props,a="inherit"===e.audience&&"proto-view-only"!==e.level,o=[];if(a){let e=[{type:"option",key:"edit",text:(0,g.t)("file_access_row.can_edit")}],t=[{type:"option",key:"access",text:(0,g.t)("file_access_row.can_access")}];return n.createElement(M.Q,{dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:this.props.inWorkshop?"edit":"access",options:this.props.inWorkshop?e:t,onChange:c.ZT,id:this.LINK_LEVEL_DROPDOWN,disabled:!0})}return(this.showEditOption()||this.props.inWorkshop)&&o.push({type:"option",key:"edit",text:(0,g.t)("file_access_row.can_edit")}),o.push({type:"option",key:"view",text:(0,g.t)("file_access_row.can_view")}),(0,I.e3)(t)&&"design"===i&&this.showPrototypeOnlyOption()&&o.push({type:"option",key:"proto-view-only",text:(0,g.t)("file_access_row.can_view_prototypes")}),n.createElement("div",{className:this.showEditWarning()?x.t:""},this.showEditWarning()&&n.createElement(_.n,{className:x.DJ,svg:$,"data-tooltip-max-width":201,"data-tooltip-timeout-delay":50,"data-tooltip-type":A.fR.TEXT,"data-tooltip":(0,g.t)("file_access_row.external_users_can_view_this_file_but_need_admin_approval_to_edit")}),n.createElement(M.Q,{dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:this.props.inWorkshop?"edit":e.level,options:o,onChange:this.onLevelChange,id:this.LINK_LEVEL_DROPDOWN,disabled:!r&&!this.props.isOwner||1===o.length||this.props.inWorkshop}))}}function er(e){return n.createElement(n.Fragment,null,n.createElement(ee,{...e}),n.createElement(et,{...e}))}et.displayName="FileLinkLevel"},944075:(e,t,r)=>{r.d(t,{Q:()=>O,m:()=>C});var n=r(652983),i=r(471903),a=r(87608),o=r.n(a),l=r(172497),s=r(594619),c=r(435613),d=r(525699),u=r(367674),p=r(65249),m=r(111120),h=r(131826),_=r(220949),g=r(13155),f=r(268819),E=r(660107),y=r(545058);let v=(0,l.z)(E.Ik),b=(0,l.z)(f.FT),I=(0,l.z)(f.bC),T=(0,l.z)(f.E8),w=v-b/2,S=r(137817);function C({dispatch:e,dropdownClassName:t,dropdownShown:r,options:i,value:a,onChange:l,trackingProperties:d={}}){var h;let[_,f]=(0,n.useState)(0),[E,S]=(0,n.useState)(window.innerWidth),C=()=>{S(window.innerWidth)};(0,n.useEffect)(()=>(window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)),[]);let O=n.useRef(null),A=n.useRef(null);(0,n.useEffect)(()=>{var e;if(O.current&&A.current){let t=O.current.getBoundingClientRect(),r=null==(e=O.current.offsetParent)?void 0:e.getBoundingClientRect(),n=!t||!r||t.top>=r.top&&t.bottom<=r.bottom;n||(O.current.scrollIntoView(!1),A.current.scrollBy(8)),f(t.width)}},[]);let N={...(null==(h=null==r?void 0:r.data)?void 0:h.position)||{top:0,left:0}},L=0,P=0,R=!1,k=-1,D=i.map((t,r)=>{var o;if("separator"===t.type)return R||(L+=T),P+=T,n.createElement(s.j.Separator,{key:t.key?String(t.key):r,dataTestId:`dropdown-separator-${r}`});let h=t.key===a;h&&(k=r),R=R||h;let _=t.subtext?I:b;R||(L+=_),P+=_;let g={};return t.subtext&&(null==(o=i[r+1])?void 0:o.type)!=="separator"&&(g.paddingBottom=8,P+=8),n.createElement("div",{key:String(t.key),ref:h?O:null,style:g,"data-testid":`dropdown-option-${r}`},n.createElement(s.j.CheckableOptionTrackable,{checked:h,onClick:r=>{r.stopPropagation(),h||l(t.key),e(m.kp())},trackingProperties:{...d,key:String(t.key)},disabled:t.disabled,"data-testid":`dropdown-option-checkable-${r}`},n.createElement("div",{style:{display:"flex",alignItems:"center"}},!!t.icon&&n.createElement(c.n,{className:y.$d,svg:t.icon}),n.createElement(u.j,{direction:"vertical",spacing:4,height:_,verticalAlignItems:"center"},n.createElement(p.x,{fontSize:12},t.text),t.subtext&&n.createElement(p.x,{fontSize:11,color:"menu-disabled"},t.subtext)))))});_+N.left+4>E&&(N.left="auto",N.right=4);let M=16;k===i.length-1&&(M=8),"auto"!==N.top&&void 0!==N.top&&(N.top-=Math.min(L,w-M),N.top=Math.max(16,N.top));let F=n.createElement(g.YB,{maxDropdownHeight:e=>{if("auto"===N.top||void 0===N.top)return v;let t=e-N.top-8-16;return Math.min(v,Math.round(t))},dropdownChildrenHeight:P,ref:A},D);return n.createElement(s.j.DropdownWithScrim,{stopScrollPropagation:!0,dispatch:e,className:o()(y.oR,t),style:N},F)}function O({dispatch:e,dropdownShown:t,value:r,options:a,onChange:l,id:s,placeholder:c,disabled:u=!1,dropdownData:p={},isOpen:g,trackingProperties:f={},dataOnboardingKey:E,onOpenRcsEvent:v,ui3Icon:b}){let I=(0,n.useRef)(null),T=a.findIndex(e=>"option"===e.type&&e.key===r),w=a[T],O=(null==w?void 0:w.type)==="option"?w.selectedLabel||w.text:c,A=(null==w?void 0:w.type)==="option"&&w.selectedLabelClass||"";return g=g??(null==t?void 0:t.type)===s,n.createElement("div",{ref:I},n.createElement(h.UE,{trackingProperties:f,className:o()({[y.Ys]:!u,[y.D$]:b}),onClick:u?void 0:r=>{r.stopPropagation(),r.preventDefault(),t&&t.type===s?e(m.kp()):a.length&&!u&&(e(m.SP({type:s,data:{...p,...function(e){var t;let r=null==(t=e.current)?void 0:t.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(I)}})),v&&(0,_.m_)({id:v}))}},b,n.createElement("div",{className:`${y.DG} ${A}`,"data-testid":"dropdown-label"},O),!u&&n.createElement("div",{className:y.Ur},n.createElement(d.r,{"data-onboarding-key":!u&&E?E:"",svg:S},n.createElement(i.K,null)))),g&&n.createElement(C,{dispatch:e,dropdownShown:t,dropdownClassName:y.jE,value:r,options:a,onChange:l,trackingProperties:f}))}},870490:(e,t,r)=>{r.d(t,{uZ:()=>P,vg:()=>N});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(9247),s=r(716250),c=r(669277),d=r(435613),u=r(970740),p=r(721154),m=r(721127),h=r(448694),_=r(237253),g=r(659994),f=r(464368),E=r(88568),y=r(147033),v=r(862610),b=r(413810),I=r(225468),T=r(220949),w=r(15002),S=r(347634),C=r(358838),O=r(580324);let A=r(315859),N="simple-sharing-copy-link-button",L=!1;function P(e){let{fileKey:t,selectedView:r,startingPointsData:a,isFigJamTry:o,userId:d}=e,[I,w]=n.useState(!1),O=(0,i.I0)(),A=(0,f.Yu)(),N=(0,f.at)(),P=(0,i.v9)(e=>e.mirror.appModel.pagesList.length),k=(0,i.v9)(e=>e.mirror.appModel.isReadOnly),D=(0,E.N)(),M=n.useRef(),F=(0,c.mU)(v.CopyLinkFileData,{fileKey:t}),x="loaded"===F.status?F.data.file:null,U=(0,l.D)(F.status),B="prototype"===r.view,V="fullscreen"===r.view,G=V&&A,H=n.useCallback(()=>{o?O((0,m.K4)({type:C.n,data:{fileKey:t}})):O((0,m.K4)({type:S.az,data:{fileKey:t,source:B?_.ot.prototypeCopyLinkButtonVisualBell:_.ot.fullscreenCopyLinkButtonVisualBell}}))},[O,o,t,B]),W=(0,_.eQ)(x,B),K=n.useCallback(e=>{let n=(0,b.Z$)(r),i=n?N.get(n):null;O(p.fB({fileKey:t,source:y.I.SIMPLE_SHARING_COPY_LINK_BUTTON,url:(0,g.pV)({selectedView:r,file:e,repo:e.repo,attributionContext:(0,s.BZ)().sharing_attribution_context_key?(0,y.R)(D,y.I.SIMPLE_SHARING_COPY_LINK_BUTTON):null,isReadOnly:k,isFigJam:"fullscreen"===r.view&&"whiteboard"===r.editorType}),visualBellMessageOverride:(0,_.Wq)({nodeType:null==i?void 0:i.type,selectedView:r,startingPointsData:a,numPages:P}),visualBellButton:{text:(0,u.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>H()},trackingProperties:{access:null==W?void 0:W.access,isPrototype:B}}))},[D,O,t,B,P,N,r,a,W,H,k]),z=n.useCallback(()=>{!G&&("loading"===F.status?w(!0):x&&K(x))},[x,K,G,F.status]);return n.useEffect(()=>{"loaded"===F.status&&"loading"===U&&I&&x&&(K(x),w(!1))},[I,x,K,U,F.status]),n.createElement(R,{onClick:z,tooltip:(null==W?void 0:W.tooltipText)||"",onMouseEnter:()=>{x&&W&&((0,T.m_)({id:"Copy link button interacted"}),L||(M.current=setTimeout(()=>{var e;L=!0,(0,h.EB)({name:"Simple Sharing: Permission Tooltip",userId:d,fileKey:x.key,fileTeamId:x.teamId,fileParentOrgId:null==(e=x.org)?void 0:e.id,access:W.access,productType:(0,h.tx)(x),isPrototype:B})},2e3)))},onMouseLeave:()=>{clearTimeout(M.current)},isFigJam:V&&"whiteboard"===r.editorType})}function R(e){let t=n.createElement(d.n,{svg:A,title:(0,u.t)("permissions.copy_link_button.title"),role:"img"}),r=o()((0,w.Z)(!0,!1),{[O.ct]:!e.isFigJam,[O.XK]:e.isFigJam});return n.createElement("button",{onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,className:r,"data-tooltip-type":I.fR.TEXT,"data-tooltip":e.tooltip,"data-tooltip-max-width":300,"data-onboarding-key":N},t)}},830774:(e,t,r)=>{r.d(t,{CO:()=>b,K6:()=>I,Lh:()=>S,Rn:()=>T,to:()=>v});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(435613),s=r(970740),c=r(987004),d=r(761767),u=r(898080),p=r(733609),m=r(854622),h=r(220958),_=r(225468),g=r(944075),f=r(545058);let E=r(681283),y=r(239722);function v(e){let t="level-change-dropdown",r=(0,i.I0)(),a=()=>e.dropdownShown&&e.dropdownShown.type===t&&e.dropdownShown.data.dropdownId===e.id;return n.createElement("div",{className:f.M6},n.createElement("div",{className:f.AP},n.createElement(b,{user:e.user,contacts:e.contacts,id:e.id,pending:e.pending})),n.createElement("div",{className:f.xR},n.createElement("div",{key:`name-${e.id}`,className:e.pending?f.Mr:f.u2},e.userName),e.warningMessage&&n.createElement(l.n,{className:f.tO,svg:E,"data-tooltip-timeout-delay":50,"data-tooltip-type":_.fR.TEXT,"data-tooltip":e.warningMessage}),e.warningTooltipId&&n.createElement(l.n,{className:f.tO,svg:E,"data-tooltip-type":_.fR.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0}),(()=>{let i=e.getRoleOptions();return i?n.createElement(g.Q,{dispatch:r,onChange:e.onChangeLevel,options:i,id:t,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!a()}):n.createElement("span",null,(0,p.levelName)(e.level))})()))}function b(e){let{user:t,pending:r,contacts:i}=e,a=!1===r?t.img_url:t.email&&t.email in i&&i.usersByEmail[t.email].img_url;return a?n.createElement("img",{"data-tooltip-type":_.fR.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:a,className:o()(e.pending?f.o4:f.ri,e.small&&f.h7),alt:""}):n.createElement("div",{className:o()(f.LO,e.small&&f.h7),"data-tooltip-type":_.fR.TEXT,"data-tooltip":e.user.email},n.createElement(l.n,{key:`avatar-${e.id}`,svg:y,className:o()(f.Eu,e.small&&f.h7)}))}function I(e,t){let r=!1===e.pending?e.user.handle:e.user.email in t?t.usersByEmail[e.user.email].handle:e.user.email;return r}let T=(e,t,r,n,i,a,o,l)=>{let c=[],p=!1;if(!r)return null;t?c.push(w(a)):(e&&!i&&c.push(w(h.V.OWNER)),n&&c.push(w(h.V.ADMIN)),c.push(w(h.V.EDITOR)),c.push(w(h.V.VIEWER)),(o===d._g.FILE||o===d._g.FILE_REPO)&&(0,u.e3)(l)&&c.push(w(h.V.VIEW_PROTOTYPES)),p=i);let m=t&&!e?(0,s.t)("confirm_remove_role.leave"):(0,s.t)("confirm_remove_role.remove");return c.push({type:"separator"}),p&&c.push({type:"option",key:"resend",text:(0,s.t)("role_row.resend_invite")}),c.push({type:"option",key:h.V.NONE,text:m}),c};function w(e){return{type:"option",key:e,text:(0,p.levelName)(e)}}let S=(e,t)=>{let r="";return e&&!t?r=(0,m.s)(c.xi.DESIGN):!e&&t&&(r=(0,m.s)(c.xi.WHITEBOARD)),r}},159774:(e,t,r)=>{r.d(t,{I6:()=>S,Mn:()=>C,aO:()=>w,db:()=>T});var n=r(716250),i=r(467815),a=r(465883),o=r(587804),l=r(500946);let s={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:a.Se.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[i.n.FIGMA_PARTNER]},c={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:a.Se.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[i.n.FIGMA_PARTNER]},d={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:a.Se.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[i.n.FIGMA_PARTNER]},u={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:a.Se.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},p={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:a.Se.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},m="1098405969270214551",h="1094001923188252679",_="1101944648482192724",g="1151936790942917527",f={[s.id]:m,[d.id]:_,[c.id]:h,[u.id]:g},E="1220512233196109878",y="1220802563996996107",v={[d.id]:E,[c.id]:y};function b(){return(!!(0,n.BZ)().widgets_hardcode_cocreators||!!(0,n.BZ)().cmty_hardcode_cocreators)&&"prod"===(0,n.Gm)().cluster_name}function I(e){if(!b())return[];switch(e){case m:return[p,s];case y:case h:return[p,c];case E:case _:return[p,d];case g:return[p,u];default:return[]}}function T(e){var t;if(!b())return e;let r=I(e.id);if(0===r.length)return e;let n=((null==(t=e.community_publishers)?void 0:t.accepted)??[]).filter(e=>!r.find(t=>t.id===e.id)),i=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:i}}}function w(e,t){let r=I(e).map(e=>e.name);if(0===r.length)return t;let n=t.filter(e=>!r.includes(e));return r.concat(n)}async function S(e){if(!b())return[];try{let t=f[e];if(t){let e=await l.J.getVersions({widgetId:t}),r=e.data.meta.plugin;return[T(r)]}}catch(e){console.error(e)}return[]}async function C(e){if(!b())return[];try{let t=v[e];if(t){let e=await o.K.getVersions({pluginId:t}),r=e.data.meta.plugin;return[T(r)]}}catch(e){console.error(e)}return[]}},167817:(e,t,r)=>{r.d(t,{CL:()=>ef,Hx:()=>ev,J9:()=>eg,Pk:()=>es,SR:()=>ey,Ur:()=>eE,gl:()=>em,j_:()=>ec});var n,i,a,o,l,s=r(652983),c=r(407908),d=r(87608),u=r.n(d),p=r(46347),m=r(448501),h=r(810373),_=r(571529),g=r(297891),f=r(36940),E=r(418465),y=r(76313),v=r(435613),b=r(805992),I=r(970740),T=r(644383),w=r(728140),S=r(793196),C=r(573196),O=r(369874),A=r(24591),N=r(83779),L=r(111120),P=r(721127),R=r(131826),k=r(54055),D=r(659994),M=r(727803),F=r(179640),x=r(339531),U=r(646472),B=r(661539),V=r(225468),G=r(110077),H=r(828867),W=r(432152),K=r(770329),z=r(13155),Z=r(289629),Y=r(266280),j=r(801068),$=r(751609),q=r(401649),X=r(482070),J=r(82873),Q=r(206279),ee=r(878954),et=r(921396),er=r(361311);let en=r(647945),ei=r(853693),ea=r(317454),eo=r(673111),el=r(221909);function es(e){let t;let[r,n]=s.useState(!1),i=!r&&e.isSet?er.HW:e.isWhiteboard?er.T8:er.Ip,a=e.showNewBadge?s.createElement(em,null):e.showFigPickBadge?s.createElement(ep,null):s.createElement(s.Fragment,null),o=u()(e.isSet?er.vZ:er.EV,{[er.kt]:e.includeChromiumDownscalingFix&&_.ZP.chrome},e.imageClassName);return t=e.image?e.showOriginalThumbnail?s.createElement("img",{className:o,src:e.image,loading:"lazy",onLoad:()=>n(!0),alt:e.alt,draggable:!1}):s.createElement(w.ck,{className:o,image:e.image,onLoad:()=>n(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls}):s.createElement(X.hY,null),s.createElement("div",{className:i,style:{backgroundColor:e.backgroundColor}},t,a,e.showPrototypeIcon&&s.createElement("div",{className:er.mB},s.createElement(b.f,{svg:ei,className:er.xo,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ei})),e.showWhiteboardIcon&&s.createElement(eh,null))}function ec(e){let t=(0,c.v9)(e=>e.orgById),r=(0,c.v9)(({selectedView:e})=>e),n="search"===r.view,i=e.plugin.org_id&&(null==t?void 0:t[e.plugin.org_id]),a=(0,x.hb)(e.plugin),{tagline:o,description:l,name:d}=a,u=(0,O.Gx)({description:e.isPublishing?"":l??"",tagline:o??""},g.ju);return s.createElement("div",{className:er.Rb},s.createElement("div",{className:er.WY},s.createElement("img",{src:a.redirect_icon_url,loading:"lazy",alt:""})),s.createElement("div",{className:er._D},s.createElement(G.d,{plugin:a,className:er.Id,loading:"lazy",alt:""})),d&&s.createElement("div",{className:er.EX},d),u&&s.createElement("div",{className:d?er.LP:er.Mk},u),n&&i&&s.createElement("div",{className:er.R6},s.createElement(Q.E,{entityId:i.id,entityName:i.name,imgUrl:i.img_url,hideTooltip:!0}),i.name),e.showNewBadge?s.createElement(em,null):e.showInstalledIcon&&s.createElement("span",{className:er.MI},s.createElement(I.Tx,{id:"community.plugins.saved"})),e.children)}s.memo(function(e){function t(){return e.name?s.createElement("div",{className:er.b7},e.name):s.createElement("div",{className:er.Kf},e.placeholderName)}function r(){return s.createElement("div",null,e.author?e.author:s.createElement("div",{className:er.g6}))}return s.createElement(s.Fragment,null,s.createElement("div",{className:e.showFileNameAsPrimary?er.fi:er.H2,onClick:e.onClick},s.createElement("div",{className:er.xy},s.createElement("a",{className:er.Rd,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:_.ZP.safari?"padding-box":""}},s.createElement(es,{image:e.backgroundImage,isWhiteboard:e.isWhiteboard,isSet:!!e.thumbnailIsSet,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard,showOriginalThumbnail:e.showOriginalThumbnail,hubFileId:e.hubFileId,alt:e.name}))),s.createElement("div",{className:er.RU},s.createElement("div",{className:er.Re},e.showFileNameAsPrimary?s.createElement(r,null):s.createElement(t,null)),s.createElement("div",{className:er.ht},s.createElement("div",{className:er.FU},ed(e.commentsSetting)&&s.createElement(eu,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?s.createElement(t,null):s.createElement(r,null)))))});let ed=e=>e!==M.Br.ALL_DISABLED;function eu(e){return s.createElement("div",{className:er.WZ},s.createElement(v.n,{className:er.CN,svg:en})," ",e.count)}function ep(){return s.createElement("div",{className:er.qh,"data-tooltip-type":V.fR.TEXT,"data-tooltip":(0,I.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},s.createElement(E.Ct,{text:(0,I.t)("community.profiles.fig_pick"),color:E.JV.BRAND,className:er.gK}))}function em(){return s.createElement("div",{className:er.qh},s.createElement(E.Ct,{text:(0,I.t)("community.profiles.new"),color:E.JV.SUCCESS,className:er.gK}))}function eh(){return s.createElement("div",{className:er.Cb,"data-tooltip-type":V.fR.TEXT,"data-tooltip":(0,I.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},s.createElement(b.f,{svg:ea,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ea}))}function e_(e){let{AuthorsJSX:t,CreatorsOverlay:r,creatorsOverlayProps:i}=n.useCreatorsHoverOverlay({resource:e.plugin}),a=s.createElement("div",{className:er.I1},s.createElement("div",{className:er.P4},t)),o=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,Z.kb)(e.price),is_subscription:!1}}:null;return s.createElement("div",{className:_.ZP.mobile?er.ci:e.showAuthorByDefault?er.ib:er.p$,onClick:e.onClick},o&&s.createElement(S.MF,{resource:o||e.plugin}),s.createElement(r,{...i},s.createElement("div",{className:er.pi},s.createElement("div",{className:er.ll},s.createElement(ec,{showInstalledIcon:e.isSaved,showNewBadge:e.showNewBadge,isPublishing:e.isPublishing,plugin:e.plugin},s.createElement("div",{className:er.nn},s.createElement(K.l,{...e})))),s.createElement("div",{className:er.tU},e.showInstallCount&&s.createElement("div",{className:er.Wq},e.isPublic&&(e.author||a),!e.isPublic&&s.createElement("div",{className:er.O_},s.createElement(v.n,{className:er.YG,svg:eo}),s.createElement(I.Tx,{id:"community.cards.private"})),s.createElement("div",{className:er.X7},e.isPublic&&ed(e.commentsSetting)&&s.createElement(eu,{count:e.commentCount}),e.isPaid?s.createElement(J.Pn,{metric:e.uniqueRunCount||0}):s.createElement("div",{className:_.ZP.mobile?er.ev:er.PO},s.createElement(y.i,{className:_.ZP.mobile||e.isBrowsingAsTeamOrOrgProfile?er.xp:e.isSaved?er.N6:er.Ks,count:e.installCount,prefix:s.createElement("div",{className:er.E},e.isSaved?"\u2713 ":"\u2193 "),onClick:_.ZP.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick}),e.isSaved&&s.createElement("div",{className:er.Gf,onClick:_.ZP.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick},s.createElement(I.Tx,{id:"community.profiles.remove_from_saved_plugins"}))),e.dropdown)),!e.showInstallCount&&s.createElement(H.Kn,{entity:e.entity,size:24})))))}(e=>{function t(e){var t;return s.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&(null==(t=e.dropdownRef)?void 0:t.current)&&s.createElement(z.AQ,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:z.eg.LIGHT,className:er._3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},s.createElement("div",{className:er.Uj},e.dropdownContent)),e.children)}function r(e){let{setDropdownContent:t,setDropdownRef:r}=e,n=[s.useRef(null),s.useRef(null),s.useRef(null),s.useRef(null),s.useRef(null)],i=s.useRef(null),a=({profile:n,ref:i})=>s.createElement("span",{onMouseEnter:()=>{r(i),t(s.createElement(j.EZ,{publisher:n,className:er._1}))},ref:i,className:e.avatarContainerClassName,key:`author-link-${n.id}`},s.createElement(j.EZ,{publisher:n,className:er.RG,avatarClassName:er.Rj,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),o=({profile:t,stylesOverride:r})=>s.createElement(j.EZ,{key:`author-link-${t.id}`,publisher:t,className:r||er.RG,avatarClassName:er.ri,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:n})=>{let i=s.createElement(j.EZ,{publisher:e[0],className:er.RG});return s.createElement("div",{className:er.Uk},1===e.length&&s.createElement(I.Tx,{id:"community.by_publisher",publisher:i}),e.length>1&&s.createElement(I.Tx,{id:"community.by_publisher_with_suffix",publisherName:i,publishersSuffix:s.createElement(s.Fragment,null,s.createElement("span",{ref:n,className:er.wc,onMouseLeave:()=>{r(null)},onMouseEnter:()=>{r(n),t(s.createElement(s.Fragment,null,e.slice(1).map(e=>o({profile:e,stylesOverride:er._1}))))}},s.createElement(I.Tx,{id:"community.cards.pluralize_num_other_publishers",numOtherPublishers:e.length-1})))}))},{resource:c}=e;if(!c)return null;let d=c.community_publishers.accepted;return 1===d.length?e.showAuthorAndOthersTextLabel?s.createElement(s.Fragment,null,a({profile:d[0],ref:n[0]}),l({profiles:d,ref:i})):s.createElement(s.Fragment,null,o({profile:d[0]})):d.length<=4?s.createElement(s.Fragment,null,d.map((e,t)=>a({profile:e,ref:n[t]})),e.showAuthorAndOthersTextLabel&&l({profiles:d,ref:i})):s.createElement(s.Fragment,null,...d.slice(0,4).map((e,t)=>a({profile:e,ref:n[t]})),(({profiles:n,ref:i})=>s.createElement("span",{ref:i,onMouseEnter:()=>{r(i),t(s.createElement(s.Fragment,null,n.map(e=>o({profile:e,stylesOverride:er._1}))))},onMouseLeave:()=>{r(null)}},s.createElement(W.h,{size:e.avatarSize,className:er.OP,text:`${n.length}`})))({profiles:d.slice(4),ref:n[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:d,ref:i}))}e.useCreatorsHoverOverlay=({resource:e,avatarStyleOverrides:n={size:24,containerClassName:er.AP,showAuthorAndOthersTextLabel:!1}})=>{let[i,a]=s.useState(null),[o,l]=s.useState(null),c=s.useMemo(()=>({setDropdownRef:l,setDropdownContent:a,dropdownRef:o,dropdownContent:i,avatarStyleOverrides:n}),[l,a,o,i,n]),d=s.useMemo(()=>s.createElement(r,{resource:e,showAuthorAndOthersTextLabel:n.showAuthorAndOthersTextLabel,avatarSize:n.size,avatarContainerClassName:n.containerClassName,setDropdownContent:a,setDropdownRef:l}),[e,a,l,n]);return{AuthorsJSX:d,CreatorsOverlay:t,creatorsOverlayProps:c}},e.Authors=r})(n||(n={})),(e=>{class t extends s.PureComponent{constructor(){super(...arguments),this.onClick=e=>{var t;if((0,h.v8)(e)){m.default.redirect((0,q.BZ)(null==(t=this.props.plugin)?void 0:t.id),"_blank");return}this.props.onClick()},this.loggedOutAction=(e,t,r)=>{if(_.K1){window.location.href="/login";return}this.props.onLoggedOutAction(e,t,r)},this.onUnsave=e=>{null==e||e.stopPropagation(),null==e||e.preventDefault(),this.props.currentUser&&this.props.onUnsave()},this.onSave=e=>{if(null==e||e.stopPropagation(),null==e||e.preventDefault(),!this.props.currentUser){let e=(0,I.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost");this.loggedOutAction(e,"plugin_install_signed_out",el);return}this.props.onSave()}}isSaved(){if(this.props.isPublic)return this.props.authedActiveCommunityProfile?(0,$.k)(this.props.authedActiveCommunityProfile,this.props.plugin):this.props.plugin.profile_install_status===B.vF.PLUGIN_INSTALLED_FOR_USER;{let e=[B.vF.PLUGIN_INSTALLED_FOR_USER];return this.props.orgEntity&&e.push(B.vF.PLUGIN_INSTALLED_FOR_ORG),!!this.props.plugin.install_status&&e.includes(this.props.plugin.install_status)}}render(){let e=(0,x.hb)(this.props.plugin),t=e.description;return s.createElement(e_,{...this.props,onClick:this.onClick,href:(0,q.BZ)(this.props.plugin.id),isPublic:this.props.isPublic,onSaveClick:this.isSaved()?this.onUnsave:this.onSave,description:t,tagline:e.tagline,name:e.name,showInstallCount:!0,isSaved:this.isSaved(),isLiked:this.props.currentUserLiked,installCount:this.props.plugin.install_count,likeCount:this.props.plugin.like_count,commentCount:this.props.plugin.comment_count,entity:this.props.plugin.publisher||this.props.plugin.creator,commentsSetting:this.props.plugin.comments_setting,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),isBrowsingAsTeamOrOrgProfile:this.props.isBrowsingAsTeamOrOrgProfile,dropdown:this.props.dropdown,plugin:this.props.plugin})}}e.ConnectedPluginTile=(0,c.$j)(e=>({currentUser:e.user||null,orgEntity:(0,k.bX)(e),isBrowsingAsTeamOrOrgProfile:(0,k.Kk)(e.authedActiveCommunityProfile),authedActiveCommunityProfile:e.authedActiveCommunityProfile}),(e,t)=>({onClick:()=>{var r;null==(r=t.onClick)||r.call(t),e(L.fv({view:"communityHub",subView:"plugin",publishedPluginId:t.pluginId}))},onProfileCreate:r=>{e(P.K4({type:et.WV,data:{variations:[et.u_.OPT_IN],userId:r.id,onFinish:()=>e(A.o({id:t.pluginId,resourceType:U._g.PLUGIN}))}}))},onSave:()=>{e(N.xL({id:t.pluginId,resourceType:U._g.PLUGIN,orgId:void 0}))},onUnsave:()=>{e(N.Ci({id:t.pluginId,resourceType:U._g.PLUGIN,source:N.Fj.COMMUNITY_HUB})),e(T.R.enqueue({message:(0,I.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,I.t)("community.comments.undo"),action:()=>{e(N.xL({id:t.pluginId,resourceType:U._g.PLUGIN,orgId:void 0}))}}}))},onLoggedOutAction:(t,r,n)=>{e(f.Y.init({origin:r})),e((0,P.K4)({type:ee.I,data:{headerText:t,icon:n,dispatch:e}}))}}))(t),e.PluginTile=function(t){var r;let n=(0,c.v9)(e=>e.publishedPlugins),i=t.plugin||(0,x.rw)(t.pluginId,n),a=!!(null==(r=(0,C.Cd)(i.id,U._g.PLUGIN).data)?void 0:r[0]);return s.createElement(e.ConnectedPluginTile,{...t,plugin:i,currentUserLiked:a})}})(i||(i={}));let eg=i.PluginTile,ef=(0,R.z7)(eg);class eE extends s.Component{render(){let{numResources:e,maxResources:t,className:r}=this.props;return s.createElement(s.Fragment,null,e<t?Array(t-e).fill(null).map((e,t)=>s.createElement("div",{key:t,className:r})):null)}}eE.defaultProps={maxResources:4},(e=>{class t extends s.Component{constructor(){super(...arguments),this.onHubFileClick=(0,h.r2)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,F.D3)(this.props.hubFile);return s.createElement("div",{className:er.Kh},s.createElement("div",{className:er.r7},s.createElement("a",{className:er.Nu,style:{backgroundColor:(0,D.YI)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,q.hw)(this.props.hubFile.id)},s.createElement("div",{className:er.s$},s.createElement("div",{className:er.xG},e.name)))))}}t.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,c.$j)(null,(e,t)=>({onHubFileClick:()=>{e(L.fv({view:"communityHub",subView:"hubFile",hubFileId:t.hubFile.id}))}}))(t)})(a||(a={})),(e=>{class t extends s.Component{constructor(){super(...arguments),this.onPluginClick=(0,h.r2)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,x.hb)(this.props.resource),t=(0,U._4)(this.props.resource);return s.createElement("div",{className:er.Kh},s.createElement("div",{className:er.r7},s.createElement("a",{className:er._j,onClick:this.onPluginClick,href:t?(0,q.Xh)(this.props.resource.id):(0,q.BZ)(this.props.resource.id)},s.createElement(G.d,{className:er.Fg,plugin:e,loading:"lazy",alt:""}),s.createElement("div",{className:er.vo},e.name))))}}t.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,c.$j)(null,(e,t)=>({onResourceClick:()=>{(0,U._4)(t.resource)?e(L.fv({view:"communityHub",subView:"widget",widgetId:t.resource.id})):e(L.fv({view:"communityHub",subView:"plugin",publishedPluginId:t.resource.id}))}}))(t)})(o||(o={})),(e=>{class t extends s.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,h.v8)(e)){let e=this.props.publicProfile;if(!e)return;m.default.redirect((0,q.J$)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let t={id:e.id,name:e.name,img_url:e.img_url};return s.createElement("div",{className:`${er.te} ${this.props.notTabletSidebarOptimized?er.bb:""}`},s.createElement("div",{className:er.x$},s.createElement("div",{onClick:this.onPublicProfileClick},s.createElement(H.Kn,{entity:t,size:96,className:er.tn})),s.createElement("div",{className:er.NC},s.createElement("div",{className:er.MF,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&s.createElement("div",{className:er.sP},s.createElement("div",{className:er.F5,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&s.createElement(ev,null)),e.location&&s.createElement("div",{className:er.vj},e.location),s.createElement("div",{className:er.PG},!this.props.isOwnProfile&&s.createElement(Y.e,{profile:e,followClassName:er.tG,followingClassName:er.tG,unfollowClassName:er.tG,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),s.createElement("div",null,s.createElement("div",{className:er.Qb},s.createElement(I.Tx,{id:"community.follow.followers"})),s.createElement("div",{className:er._o},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&s.createElement("div",{className:er.y1},this.props.resources.map(e=>{let t=(0,C.yA)(e);switch(t){case U._g.HUB_FILE:return s.createElement(a.PublicProfileHubFileTile,{hubFile:e,key:e.id});case U._g.PLUGIN:case U._g.WIDGET:return s.createElement(o.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,p.vE)(t)}}),s.createElement(eE,{numResources:this.props.resources.length,maxResources:6,className:er.Kh})),0===this.props.resources.length&&s.createElement("div",{className:er.ic},s.createElement(I.Tx,{id:"community.profiles.no_resources_published_yet"})))}}t.displayName="PublicProfileTile";let r=(e,t)=>{var r;return{isOwnProfile:(null==(r=e.authedActiveCommunityProfile)?void 0:r.id)===t.publicProfile.id}},n=(e,t)=>({onPublicProfileClick:()=>{t.onClick&&t.onClick(),e(L.fv({view:"communityHub",subView:"handle",handle:t.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,c.$j)(r,n)(t),e.ConnectedPublicProfileTileTracked=(0,c.$j)(r,n)((0,R.z7)(t))})(l||(l={}));let ey=l.ConnectedPublicProfileTile;function ev(){return s.createElement(E.Ct,{text:(0,I.t)("community.profiles.follows_you"),color:E.JV.DEFAULT,className:er.bk})}l.ConnectedPublicProfileTileTracked},143816:(e,t,r)=>{r.d(t,{B4:()=>s,G3:()=>o,YC:()=>l,sR:()=>d,sh:()=>u});var n=r(46347),i=r(998518),a=r(961215);let o=e=>{let t=e.getCurrentPage();(0,n.hu)(!!t,"expected currentPage to exist");let r=t.prototypeDevice;return r?r.presetIdentifier:null},l=(e,t,r)=>{let i=t.x/t.y,a=e.x/e.y;(0,n.hu)(.01>Math.abs(i-a),`Expected ${i} \u2248 ${a}`);let o=e.x/t.x,l={x:r.x*o,y:r.y*o};return l},s=(e,t,r)=>{let n=e.x/r.x,i={x:t.x*n,y:t.y*n};return i},c=e=>{let t=i.bk[e];return(0,n.Eb)(t,"getDeviceImageIdealSize must take in a valid presetIdentifier"),{x:t.imageSize.x/t.scaleFactor,y:t.imageSize.y/t.scaleFactor}},d=(e,t)=>{let r=e=>({x:e.y,y:e.x}),{framePresetSize:n,offset:o}=i.bk[e],l=c(e),s=t===a.zl6.CCW_90,d={x:l.x-n.x-o.x,y:o.y};return s?{idealDeviceSize:r(l),framePresetSize:r(n),offset:r(d)}:{idealDeviceSize:l,framePresetSize:n,offset:o}},u=(e,t)=>{let r=i.bk[e],a=i.bk[t];return(0,n.Eb)(r,"expected device1 to exist"),(0,n.Eb)(a,"expected device2 to exist"),r.deviceName===a.deviceName&&r.imageSize.x===a.imageSize.x&&r.imageSize.y===a.imageSize.y}},314298:(e,t,r)=>{r.d(t,{Du:()=>S,OY:()=>f,Ps:()=>y,RU:()=>T,UF:()=>h,Z0:()=>E,bR:()=>g,d7:()=>N,hu:()=>A,ih:()=>_,mA:()=>L,nr:()=>v,wD:()=>w});var n,i=r(407908),a=r(46347),o=r(716250),l=r(970740),s=r(644383),c=r(998518),d=r(158774),u=r(961215),p=r(157607),m=r(143816);let h=16,_=216,g=152,f=104,E=20;var y=((n=y||{})[n.DEVICE=0]="DEVICE",n[n.WEBSITE=1]="WEBSITE",n[n.SMALL=2]="SMALL",n);let v=e=>"fullscreen"===e.selectedView.view&&("design"===e.selectedView.editorType||"dev_handoff"===e.selectedView.editorType||"slides"===e.selectedView.editorType),b=16/9,I=(e,t)=>{let r=t.getCurrentPage();if(!r)throw Error("Expected currentPage to exist");let{prototypeDevice:n}=r;return n?n.type===u.AWX.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:n.type===u.AWX.NONE?null:n.rotation===u.zl6.NONE?n.size:{x:n.size.y,y:n.size.x}:null},T=(e,t)=>{let r=I(t,e);return r?{type:0,...r}:t.absoluteBoundingBox.w>=1280?{type:1}:{type:2}},w=(e,t)=>{switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:t.absoluteBoundingBox.w,y:t.absoluteBoundingBox.w/b};case 2:return{x:t.absoluteBoundingBox.w,y:t.absoluteBoundingBox.h};default:(0,a.vE)(e)}},S=(e,t)=>{var r,n;let i=(null==(n=null==(r=e.getCurrentPage())?void 0:r.prototypeDevice)?void 0:n.rotation)??u.zl6.NONE;return i===u.zl6.NONE?{x:f,y:E+(t?p.Mz:0)}:{x:f,y:f}},C=(e,{x:t,y:r},n)=>{let i=r/e.y,a=t/e.x,o=Math.min(i,a),{x:l,y:s}=S(n);if(o<1){if(o===i){let t=Math.max(e.x*o,l);if(t!==l)return{x:e.x*o,y:e.y*o};{let t=l/e.x;return{x:l,y:e.y*t}}}{let t=Math.max(e.y*o,s);if(t!==s)return{x:e.x*o,y:e.y*o};{let t=s/e.y;return{x:e.x*t,y:s}}}}return e},O=(e,{x:t,y:r},n)=>{let{x:i,y:a}=S(n),o=a/e.y,l=i/e.x,s=Math.max(o,l);if(s>1){if(s===o){let r=Math.min(e.x*s,t);if(r!==t)return{x:e.x*s,y:e.y*s};{let r=t/e.x;return{x:t,y:e.y*r}}}{let t=Math.min(e.y*s,r);if(t!==r)return{x:e.x*s,y:e.y*s};{let t=r/e.y;return{x:e.x*t,y:r}}}}return e};function A(e,t,r,n,l){var s,u;let _=l.get(n);(0,a.hu)(!!_,"expected node to exist");let g=T(l,_),E=e&&(0,i.wU)(e.breakpoint,g);if(E&&!t)return e;let y=d.Gr.getViewportInfo(),v=y.height-p.Mz-2*h,b=Math.max(.5*y.width,f),I=(0,m.G3)(l),S=!!I&&(0,c.wK)(I),A=!!(0,o.BZ)().prototype_preview_device_frames&&0===g.type&&r&&S;if(!A){let e=w(g,_),t=C(e,{x:b,y:v},l);return{initialViewerSize:t=O(t,{x:b,y:v},l),breakpoint:g}}let N=null==(u=null==(s=l.getCurrentPage())?void 0:s.prototypeDevice)?void 0:u.rotation;(0,a.Eb)(N,"expected device rotation to exist");let{idealDeviceSize:L,framePresetSize:P}=(0,m.sR)(I,N),R=C(L,{x:b,y:v},l);R=O(R,{x:b,y:v},l);let k=(0,m.B4)(R,P,L);return{initialViewerSize:k,breakpoint:g}}function N(e,t,r,n){(0,a.hu)(0!==r.type,"Can't fit to aspect ratio for devices");let i=w(r,t);if(e.x<i.x)switch(r.type){case 1:i={x:e.x,y:e.x/b};break;case 2:{let r=t.absoluteBoundingBox.w/t.absoluteBoundingBox.h;i={x:e.x,y:e.x/r};break}default:(0,a.vE)(r)}return{initialViewerSize:i=O(i,{x:1/0,y:1/0},n),breakpoint:r}}let L=(e,t,r)=>{let n=d.Gr.getViewportInfo();e.x>.9*n.width&&t(s.R.enqueue({type:"inline-preview-resize-to-actual-size",message:(0,l.t)("inline_preview.resize_to_actual_size_visual_bell"),button:{text:(0,l.t)("bindings.revert"),action:r},error:!1}))}},767831:(e,t,r)=>{r.d(t,{BT:()=>n,Cv:()=>y,MI:()=>h,R9:()=>b,cn:()=>m,dt:()=>v,k6:()=>g,oF:()=>f,qs:()=>p,rz:()=>_,wj:()=>E});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(435613);r(970740);var c=r(131826),d=r(726422),u=r(248578);r(579941),r(373260);let p=i.createContext(void 0);function m(e){return i.createElement("div",{className:l()(d.kQ,e.className)},e.children)}function h(e){return i.createElement("div",{className:d.k3},e.children)}function _(e){return i.createElement("div",{className:d.$j},e.children)}function g(e){let t={width:"300px"};return e.width&&("number"==typeof e.width?t.width=`${e.width}px`:t.width=e.width),e.height&&(t.height=e.height),e.margin&&(t.margin=e.margin),i.createElement(p.Consumer,null,r=>i.createElement("div",{className:l()(d.us,e.containerClassName)},i.createElement("img",{src:e.src,style:t,onLoad:r,alt:e.alt})))}function f(e){let t=void 0===e.width?{width:"300px"}:{width:`${e.width}px`};return e.height&&(t.height=e.height),e.margin&&(t.margin=e.margin),i.createElement(p.Consumer,null,r=>i.createElement("div",{className:d.us},i.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial",style:t,onLoad:r,"aria-hidden":"true"},i.createElement("source",{src:e.src,type:"video/mp4"}))))}function E(e){return i.createElement("div",{className:e.className?e.className:d.Mv},e.children)}(e=>{e.Content=function(e){return i.createElement("div",{className:e.className||d.G3,style:e.style},e.children)},e.ContentV2=function(e){return i.createElement("div",{className:e.className||d.o5},e.children)},e.Left=function(e){return i.createElement("div",{className:d.t$},e.children)},e.Right=function(e){return i.createElement("div",{className:d.F2,style:e.style},e.children)},e.Separator=function(e){return i.createElement("div",{className:d.kr,style:e.style},e.children)},e.Buttons=function(e){return i.createElement("div",{className:d.ZY},e.children)}})(n||(n={}));let y=(0,c.z7)(e=>i.createElement("a",{className:u.W,href:e.href,target:"_blank",rel:"noopener",onClick:e.onClick},e.children)),v=(0,a.$j)(e=>({shouldHide:e.notifications.length>0}))(e=>e.shouldHide?null:i.createElement("div",{className:d.L4},e.children)),b=(0,a.$j)(e=>({shouldHide:e.notifications.length>0}))(e=>e.shouldHide?null:i.createElement("div",{className:d.UI},i.createElement("div",{className:d.mP},e.children)));(0,c.z7)(e=>i.createElement("div",{className:`${e.hidden?d.JW:""} ${e.primary?d.yC:d.yj}`,onClick:e.onClick,tabIndex:0},i.createElement(s.n,{svg:e.svg})))},321336:(e,t,r)=>{r.d(t,{B6:()=>N,cy:()=>O,ek:()=>C,kd:()=>A,ms:()=>L,ss:()=>P,x4:()=>R});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(571529),s=r(519781),c=r(618723),d=r(782051),u=r(970740),p=r(111120),m=r(866359),h=r(961215),_=r(436649),g=r(488160),f=r(733609),E=r(298423),y=r(587487),v=r(498266),b=r(198456),I=r(808190);let T=r(328630),w="FigJam Editor Onboarding",S={zoom:`${w} - Zoom`,handTool:`${w} - Hand Tool`,share:`${w} - Share`,openTutorial:`${w} - Open Tutorial`},C="https://static.figma.com/uploads/8f3066fc3906f11f2601a390725f2b7af58e01a1",O="zoom-menu",A="tool-hand";class N extends n.PureComponent{render(){return n.createElement("div",{className:I.er},n.createElement("div",{className:I.Bj},n.createElement("span",{className:I.uh,"aria-hidden":"true"}),n.createElement("img",{className:I.BH,src:this.props.imgSrc,alt:""})),n.createElement("div",{className:o()({[I.Mr]:!0,[I.mJ]:!this.props.isBold,[I.Se]:!!this.props.isBold})},this.props.titleText&&n.createElement("div",{className:I.TN},this.props.titleText),n.createElement("div",{className:I.fL},this.props.bodyText),n.createElement("div",{className:I.c8},n.createElement("div",{className:o()({[I.wz]:!0,[I.mJ]:!this.props.isBold,[I.Se]:!!this.props.isBold})},this.props.steps?n.createElement(u.Tx,{id:"rcs.rcs_shared.step_counter",currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):n.createElement(n.Fragment,null)),n.createElement(c.RS,{className:o()({[I.Aj]:!0,[I.Se]:!!this.props.isBold}),onClick:this.props.onNext},this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&n.createElement(u.Tx,{id:"rcs.rcs_shared.done"}),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&n.createElement(u.Tx,{id:"rcs.figjam_onboarding.next"})))),n.createElement(s.PZ,{className:o()({[I.Ah]:!0,[I.mJ]:!this.props.isBold,[I.Se]:!!this.props.isBold}),onClick:this.props.onDismiss,innerText:"close",svg:T}))}}N.displayName="FigJamOnboardingModal";let L={trackingContextName:S.zoom,element:function(e){let t=l.ZP.mac?(0,u.t)("rcs.figjam_onboarding.cmd"):(0,u.t)("rcs.figjam_onboarding.ctrl");return n.createElement(y.x5,{targetType:"dom",topPadding:-3,targetKey:O,hasShadow:e.hasShadow},n.createElement(N,{bodyText:n.createElement("span",null,n.createElement(u.Tx,{id:"rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",commandKey:n.createElement("b",null,t),plusOrMinusKeys:n.createElement("b",null,n.createElement(u.Tx,{id:"rcs.figjam_onboarding.plus_or_minus"}))})),onNext:e.onClickPrimaryCta,steps:{current:1,total:3},onDismiss:e.dismissModal,imgSrc:"https://static.figma.com/uploads/4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a"}))},modalType:v.w8.SELF_CONTAINED},P={trackingContextName:S.handTool,element:function(e){return n.useEffect(()=>(h.iTB.triggerAction("set-tool-hand",null),()=>h.iTB.triggerAction("set-tool-default",null)),[]),n.createElement(y.x5,{targetType:"dom",targetKey:A,topPadding:-6,hasShadow:e.hasShadow},n.createElement(N,{bodyText:n.createElement("span",null,n.createElement(u.Tx,{id:"rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",spaceKey:n.createElement("b",null,n.createElement(u.Tx,{id:"rcs.figjam_onboarding.space"}))})),onNext:e.onClickPrimaryCta,steps:{current:2,total:3},onDismiss:e.dismissModal,imgSrc:"https://static.figma.com/uploads/07ff49c75c8933ea70ff2e4776503291c31a35ef"}))},modalType:v.w8.SELF_CONTAINED},R={trackingContextName:S.share,element:e=>n.createElement(y.x5,{targetType:"dom",targetKey:b.kQ,topPadding:-6},n.createElement(N,{bodyText:n.createElement("span",null,n.createElement(u.Tx,{id:"rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team"})),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:C})),modalType:v.w8.SELF_CONTAINED};S.share,v.w8.SELF_CONTAINED;let k=e=>{e(m.N_())},D=(e,t)=>{t(p.YQ({url:e}))};(0,i.$j)(e=>{let t=(0,g.U3)(e.fileByKey,(0,f.getPermissionsState)(e)),r=m.N_.loadingKeyForPayload();return{tutorialFileUrl:t,isLoading:(0,_.hg)(e.loadingState,r),shouldShowLoadingState:!t,didFail:(0,_.OZ)(e.loadingState,r)}},e=>({dispatch:e}),(e,t,r)=>({fetchTutorialFileIfNecessary:()=>{e.tutorialFileUrl||e.isLoading||k(t.dispatch)},openTutorialFile:()=>{e.tutorialFileUrl&&D(e.tutorialFileUrl,t.dispatch),r.dismissModal()},...r,shouldShowLoadingState:e.shouldShowLoadingState,didFail:e.didFail}))(function(e){n.useEffect(()=>{e.fetchTutorialFileIfNecessary()},[]);let{didFail:t,dismissModal:r}=e;return n.useEffect(()=>{t&&(r(),(0,E.nN)("failure","rcs"))},[t,r]),n.useEffect(()=>{let t=setTimeout(()=>{e.shouldShowLoadingState&&(0,E.nN)("timeout","rcs")},5e3);return()=>clearTimeout(t)},[e.shouldShowLoadingState]),n.createElement("div",{className:I._5},n.createElement("div",{className:I.ef},n.createElement("div",{className:I.cH},n.createElement("div",{className:I.er},n.createElement("div",{className:I.Bj},n.createElement("img",{className:I.BH,src:"https://static.figma.com/uploads/964c3ddf18b0f2712b664efde991dfc4f2c58eb8",alt:""})),n.createElement("div",{className:o()({[I.Mr]:!0,[I.mJ]:!0})},n.createElement("div",{className:I.h6},n.createElement(u.Tx,{id:"rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial"})),n.createElement("div",{className:I.Me},n.createElement("div",{className:I.eB,onClick:r},n.createElement(u.Tx,{id:"rcs.figjam_onboarding.maybe_later"})),n.createElement(c.RS,{className:e.shouldShowLoadingState?I.rB:I.sp,onClick:e.openTutorialFile,disabled:e.shouldShowLoadingState},e.shouldShowLoadingState?n.createElement(d.TK,{className:I.aU}):n.createElement(u.Tx,{id:"rcs.figjam_onboarding.open_tutorial"}))))))))}),S.openTutorial,v.w8.SELF_CONTAINED},731113:(e,t,r)=>{r.d(t,{g:()=>i});var n=r(337167);let i=(0,n.cn)(!1)},961721:(e,t,r)=>{r.d(t,{X:()=>d,p:()=>u});var n=r(652983),i=r(87608),a=r.n(i),o=r(618723),l=r(496417),s=r(726422);let c="mobile_shelf--rowCta--BUbfa text--fontPos13--xW8hS text--_fontBase--QdLsd";function d(e){return n.createElement("div",{tabIndex:0,className:a()("mobile_shelf--background--Msmrp modal--modalBackground--OE8MH",l.Hy)},n.createElement("div",{className:a()("mobile_shelf--shelf--XNQ2O",s.yn)},e.children))}function u(e){let{icon:t,title:r,description:i,ctaType:a,ctaText:l}=e,s="ctaOnClick"in e?e.ctaOnClick:void 0,d="ctaHref"in e?e.ctaHref:void 0,u="primary"===a?n.createElement(o.RS,{onClick:s,className:c},l):n.createElement(o.pJ,{onClick:s,className:c},l);return n.createElement("div",{className:"mobile_shelf--rowContainer--9Vsrx"},n.createElement("div",{className:"mobile_shelf--rowIconAndText--2So5-"},n.createElement("img",{src:t,alt:"icon",className:"mobile_shelf--rowIcon--jAN5E"}),n.createElement("div",{className:"mobile_shelf--rowText--qUPio"},n.createElement("div",{className:"mobile_shelf--rowTitle--QI3ZU text--fontPos13--xW8hS text--_fontBase--QdLsd"},r),i&&n.createElement("div",{className:"mobile_shelf--rowDescription--2jdzt text--fontPos11--2LvXf text--_fontBase--QdLsd"},i))),d&&n.createElement("a",{href:d},u),!d&&u)}},237122:(e,t,r)=>{r.d(t,{pc:()=>X,aA:()=>q,um:()=>J});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(439252),s=r(9247),c=r(365653),d=r(669277),u=r(217810),p=r(286206),m=r(117986),h=r(594619),_=r(618723),g=r(44667),f=r(435613),E=r(212984),y=r(970740),v=r(644383),b=r(547699),I=r(20245),T=r(111120),w=r(43120),S=r(721127),C=r(864974),O=r(706039),A=r(809377),N=r(200273),L=r(70918),P=r(761767),R=r(862610),k=r(733609),D=r(614860),M=r(818709),F=r(225468),x=r(291904),U=r(787618),B=r(425285),V=r(356827),G=r(33105),H=r(201305),W=r(157607),K=r(587487),z=r(198456);let Z="move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik",Y="move_drafts_nudge_rcs_steps--infoText--dIEdg",j=r(665229),$=r(215996);function q(e){let t=(0,c.c)(e=>(0,k.getPermissionsState)(e)),r=(0,L.dO)(),a=(0,i.I0)(),o=(0,A.L)(),l=(0,i.v9)(e=>e.openFile),s=(0,i.v9)(e=>e.repos),d=(0,i.v9)(e=>e.userFlags.seen_move_drafts_nudge),[u,p]=n.useState(!1),m=(0,k.hasProTeamPaidStatus)(t,null==l?void 0:l.editorType,r),{dismissModal:h}=e;setTimeout(()=>{p(!0)},3e3);let _=()=>a(C.v({dismissed_move_drafts_nudge:!0}));n.useEffect(()=>()=>{d||a(C.v({seen_move_drafts_nudge:!0}))},[a,d]);let g=()=>{d?(_(),h()):e.onClickPrimaryCta()};n.useEffect(()=>{(null==o?void 0:o.type)===V.Ap&&h()},[null==o?void 0:o.type,h]);let f=d?(0,y.t)("rcs.move_drafts_nudge.dismiss"):(0,y.t)("rcs.move_drafts_nudge.not_now"),E=m?(0,y.t)("rcs.move_drafts_nudge.when_to_draft_when_to_file_pro_user"):(0,y.t)("rcs.move_drafts_nudge.when_to_draft_when_to_file"),v=m?n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.edit_with_professional_tools"}):n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.you_re_currently_working_solo_on_a_draft"});return u?n.createElement(K.mD,{targetKey:V.M8,dismissModal:g,title:E,ctaText:(0,y.t)("rcs.move_drafts_nudge.move_file"),onClickPrimaryCta:()=>{_(),(0,H.mR)(a,l,s)()},secondaryCtaText:f,onClickSecondaryCta:g,width:268},n.createElement("p",null,v)):null}function X(e){let t=(0,i.I0)(),r=(0,A.L)(),{dismissModal:a}=e,o=(null==r?void 0:r.type)===V.Ap,l=(0,s.D)(o);return n.useEffect(()=>{l&&!o&&a()},[o,l,a]),n.useEffect(()=>{var e,r;if(!(null==(e=V.If)?void 0:e.current)){a();return}return t(T.SP({type:V.Ap,data:{targetRect:null==(r=V.If.current)?void 0:r.getBoundingClientRect(),activatePathOnMount:[(0,y.t)("fullscreen.filename_view.move-to-project")]}})),()=>{t(T.kp())}},[t,a]),n.createElement("div",{onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation()}},n.createElement(K.mD,{targetKey:G.i,title:"",shouldCenterArrow:W.Ht.FALLBACK,dismissModal:a,ctaText:(0,y.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:e.onClickPrimaryCta,width:268},n.createElement("p",{className:Z},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.okay_you_can_move_drafts_and_files_into_team_projects_here_any_time"}))))}function J({dismissModal:e,onClickPrimaryCta:t}){var r;let a=(0,i.I0)(),s=(0,A.L)(),c=(0,B.fg)(),T=(0,N.CA)(),C=(0,l.AA)(null),[L,k]=n.useState(void 0);n.useEffect(()=>{(null==s?void 0:s.type)===V.Ap&&e()},[null==s?void 0:s.type,e]);let x=(0,d.mU)(R.MoveDraftsTeamData,{orgId:null});if("loaded"!==x.status||0===x.data.currentUser.teamEditRoles.length)return null;let G=x.data.currentUser.teamEditRoles.map(e=>e.team),H=G.filter(e=>e&&e.projects&&!e.deletedAt&&e.projects.length>0),z=0===H.length;if(z)return(0,p.Jz)(m.k.MONETIZATION,Error("exp_move_drafts_v2 nudge rendered with noTeamWithProjects")),null;let Z=1===H.length;if(!L){let e=Z?H[0]:function(e,t){if(null===t)return e[0];let r=new Map;for(let t=0;t<e.length;t++){let n=e[t];r.set(n?n.id:null,{count:0,index:t})}let n=0,i=0;for(let e of t)if(e.team_id&&r.has(e.team_id)){let t=r.get(e.team_id);t.count++,t.count>n&&(n=t.count,i=t.index)}return e[i]}(H,null==C?void 0:C.data);null!==e&&k(e)}if(!L||!T)return null;let q={key:T.key,name:T.name,folder_id:T.folderId,editor_type:T.editorType,is_team_template:T.isTeamTemplate},X=e=>{a(v.R.enqueue({type:"file-moved",i18n:{id:"visual_bell.file_move_folder",params:{folderName:e||""}}})),a(S.K4({type:Q}))};function J(e){return(null==T?void 0:T.editorType)===P.gg.WHITEBOARD?[P.ZG.WHITEBOARD_FILES_LIMITED,P.ZG.WHITEBOARD_FILES_LIMITED_BETA].some(t=>{var r;return!!(null==(r=e.restrictionsList)?void 0:r.includes(t))}):[P.ZG.FILES_LIMITED,P.ZG.FILES_LIMITED_LEGACY].some(t=>{var r;return!!(null==(r=e.restrictionsList)?void 0:r.includes(t))})}return n.createElement(K.fv,{targetKey:V.M8,dismissModal:e,width:268,shouldCenterArrow:W.Ht.FALLBACK},function(e,t){let r=e.roles.filter(e=>!!e.user&&e.user.id!==t),i=r.sort(()=>Math.random()-Math.random()).slice(0,Math.min(r.length,3)).map(e=>(0,u.LG)(e.user)),a=n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.ready_to_bring_in_your_team"});if(0===i.length)a=n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.want_to_get_ideas_from_teammates"});else if(1===i.length){let e=i[0];a=n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.want_to_get_ideas_from_user_name",userName:e.name?e.name.split(" ")[0]:e.email||e.handle})}return n.createElement(n.Fragment,null,n.createElement("div",{className:"move_drafts_nudge_rcs_steps--avatarRow--cUnRs"},i.map(e=>n.createElement("div",{key:e.id,className:E.cx.relative.$},n.createElement(b.Yt,{user:{name:e.name||e.email||"",img_url:e.imgUrl},size:b.DZ.LARGE})))),n.createElement("h1",{className:"move_drafts_nudge_rcs_steps--modalTitle--Rk7Jg"},a))}(L,x.data.currentUser.id),(r=Z?L:null)?n.createElement("p",{className:Y},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.drafts_are_great_for_solo_work_but_teammates_can_t_find_or_contribute_to_this_file_move_it_to_team_name_to_let_others_edit",teamName:n.createElement("b",null,r.name)})):n.createElement("p",{className:Y},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.drafts_are_great_for_solo_work_but_teammates_can_t_find_or_contribute_to_this_file_move_it_to_your_team_to_let_others_edit"})),!Z&&n.createElement("div",{className:"move_drafts_nudge_rcs_steps--moveFileSelector--bUHWg"},n.createElement("h2",null,n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.move_file_to"})),n.createElement(h.j.DropdownSelector,{className:"move_drafts_nudge_rcs_steps--dropdownSelector--vE83U",optionsBelowSelector:!0,shouldRenderAutocompleteStyles:!0,label:(0,y.t)("rcs.move_drafts_nudge.team_project",{teamName:L.name,projectName:L.projects[0].path}),iconLabel:n.createElement(b.Ir,{size:b.DZ.XSMALL,fallbackDisplay:I.D.HIDDEN,team:{id:L.id,imgUrl:L.imgUrl||void 0}}),options:H.map((e,t)=>!!e&&!!e.projects&&n.createElement(h.j.Option,{key:t,id:String(t),onClick:e=>k(H[parseInt(e.currentTarget.id)]),className:"move_drafts_nudge_rcs_steps--projectRow--4JZde"},n.createElement("div",{className:"move_drafts_nudge_rcs_steps--teamAvatarIcon--vjnRi"},n.createElement(b.Ir,{size:b.DZ.XSMALL,fallbackDisplay:I.D.HIDDEN,team:{id:e.id,imgUrl:e.imgUrl||void 0}})),n.createElement("div",{className:o()("move_drafts_nudge_rcs_steps--optionText----TA7",{"move_drafts_nudge_rcs_steps--optionTextWithWarning--ENYe0":J(e)})},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.team_project",teamName:e.name,projectName:e.projects[0].path})),J(e)&&n.createElement("div",{className:"move_drafts_nudge_rcs_steps--warningIcon--KHIj5"},n.createElement(f.n,{svg:$,"data-tooltip-type":F.fR.TEXT,"data-tooltip":(0,y.t)("file_browser.file_move.paywall_team_tooltip")}))))})),J(L)&&n.createElement("div",{className:"move_drafts_nudge_rcs_steps--banner--S35O-"},n.createElement(g.X,{orientation:"vertical",variant:"warning",iconSrc:j,action:{label:(0,y.t)("rcs.move_drafts_nudge.upgrade_to_continue"),onClick:()=>{a(S.K4({type:U.yd,data:{team:L,resource:D.Q3.FILE,action:M.XH.MOVE_FILES,currentPlan:O.V.Plan.STARTER,upsellPlan:O.V.Plan.PRO,editorType:c,multipleResources:!1}}))}}},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.team_team_name_reached_the_starter_plan_file_limit_of_3_files",teamName:L.name}))),n.createElement("div",{className:"move_drafts_nudge_rcs_steps--ctaContainer--VD-a6"},n.createElement(_.pJ,{className:"move_drafts_nudge_rcs_steps--secondaryCtaButton--yOPJx",onClick:t},(0,y.t)("rcs.move_drafts_nudge.cancel")),n.createElement(_.RS,{onClick:()=>{a(w.M({files:[q],team:L,folder:L.projects[0],fromFileModal:!0,onFinishCallback:X})),t()},disabled:J(L)},(0,y.t)("rcs.move_drafts_nudge.move_file"))))}let Q=(0,x.Y3)(function(){let e=(0,i.I0)();return n.createElement(K.mD,{targetKey:z.kQ,title:"",dismissModal:()=>{e(S.VG())},ctaText:(0,y.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(S.VG())},width:268},n.createElement("p",{className:Z},n.createElement(y.Tx,{id:"rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you"})))},"MoveDraftsFeedbackModal")},198456:(e,t,r)=>{r.d(t,{F0:()=>o,MF:()=>d,S8:()=>i,Tj:()=>m,dW:()=>c,ip:()=>h,kQ:()=>n,mD:()=>s,nn:()=>l,x0:()=>a,yH:()=>_,z4:()=>p});let n="share",i="show onboarding template connector after share or dismiss",a={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER",l="FULLSCREEN_TOGGLE_MENU",s="center_button_group",c="ASSETS_PANEL_ONBOARDING_KEY",d="ACCOUNT_SWITCHING_NOTIFICATION_ONBOARDING_KEY";var u,p=((u=p||{}).PAN="PAN_PREFERENCE_ONBOARDING_KEY",u.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",u);let m="shared_with_you_tab",h="account_profile_switching_onboarding_key",_="dev_mode_mode_switcher_onboarding_key"},498266:(e,t,r)=>{r.d(t,{AZ:()=>d,Kh:()=>f,L$:()=>u,bL:()=>_,fe:()=>E,w8:()=>h,wh:()=>g});var n,i,a,o,l,s,c,d=((n=d||{}).TOP_RIGHT="top-right",n.CENTER="center",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n),u=((i=u||{}).LEFT_TITLE="left_title",i.RIGHT_TITLE="right_title",i),p=((a=p||{})[a.TOP=0]="TOP",a[a.BOTTOM=1]="BOTTOM",a[a.RIGHT_TITLE=2]="RIGHT_TITLE",a[a.RIGHT_BODY=3]="RIGHT_BODY",a[a.LEFT_TITLE=4]="LEFT_TITLE",a),m=((o=m||{}).FALLBACK="fallback",o.BEST_EFFORT="best_effort",o),h=((l=h||{}).DRAGGABLE="draggable",l.FEATURE_UPDATE="feature_update",l.WELCOME="welcome",l.SELF_CONTAINED="self_contained",l.WALK_THROUGH="walk_through",l.ANNOUNCEMENT_POINTER="announcement_pointer",l.POINTER="pointer",l.MOBILE="mobile",l),_=((s=_||{}).MODAL="modal",s.SHELF="shelf",s);let g=740,f=580;var E=((c=E||{}).ON_DARK="on_dark",c.ON_LIGHT="on_light",c.HIGH_CONTRAST="high_contrast",c.HIDDEN="hidden",c)},82409:(e,t,r)=>{r.d(t,{K:()=>D,g:()=>M});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(172497),s=r(768358),c=r(388899),d=r(518484),u=r(519781),p=r(618723),m=r(487712),h=r(623046),_=r(617984),g=r(970740),f=r(672055),E=r(864974),y=r(131826),v=r(133282),b=r(505468),I=r(157607),T=r(587487),w=r(767831),S=r(675207),C=r(498266),O=r(961721),A=r(726422),N=r(332224);let L=(0,l.z)(N.JZB),P=(0,l.z)(N.Xxu),R=e=>null!==e?e:void 0;class k extends n.Component{constructor(e){super(e),this.isOnLastStep=()=>this.state.currentStep===this.props.steps.length-1,this.showedLastStep=()=>this.state.currentStep===this.props.steps.length-2,this.advanceStepOrComplete=()=>{var e,t,r;this.showedLastStep()&&this.setUserFlagsOnComplete();let n=this.props.steps[this.state.currentStep];if(n.modalType===C.w8.DRAGGABLE&&(null==(e=n.customOnPrimaryCTAClick)||e.call(n,this.props.dispatch)),this.isOnLastStep())null==(r=(t=this.props).onComplete)||r.call(t),this.hideRCSSequence();else{let e=this.props.steps[this.state.currentStep].userFlag;e&&this.props.dispatch(E.v({[e]:!0})),this.setState({currentStep:this.state.currentStep+1})}},this.onClose=()=>{!this.props.preventUserFlagSetOnUnmount&&(this.setUserFlagsOnComplete(),this.props.additionalOnClose&&this.props.additionalOnClose())},this.setUserFlagsOnComplete=(0,s.D)(()=>{let e={};for(let t=0;t<this.props.steps.length;t++){let{userFlag:r}=this.props.steps[t];r&&(e[r]=!0)}if(this.props.userFlagsOnComplete)for(let t of this.props.userFlagsOnComplete)e[t]=!0;Object.keys(e).length>0&&this.props.dispatch(E.v(e))},200),this.dismissModal=()=>{this.props.preventUserFlagSetOnUnmount&&this.setUserFlagsOnComplete(),this.hideRCSSequence()},this.setUserFlagOnExplicitDismiss=()=>{let e={};if(this.props.userFlagsOnExplicitDismiss)for(let t of this.props.userFlagsOnExplicitDismiss)e[t]=!0;Object.keys(e).length>0&&this.props.dispatch(E.v(e))},this.hideRCSSequence=()=>{this.props.dispatch(f.DH())},this.state={currentStep:0,steps:e.steps}}static getDerivedStateFromProps(e,t){for(let r=0;r<Math.max(t.steps.length,e.steps.length);r++)if(e.steps[r]!==t.steps[r])return{steps:e.steps,currentStep:0};return null}attachButtonText(e){if(e.modalType===C.w8.DRAGGABLE){let t=this.props.steps.filter(e=>e.modalType!==C.w8.SELF_CONTAINED).length,r=0;for(let n=0;n<this.props.steps.length;n++)if(this.props.steps[n].modalType!==C.w8.SELF_CONTAINED&&r++,e===this.props.steps[n])return{...e,ctaText:e.ctaText||(this.isOnLastStep()?(0,g.t)("rcs.rcs_shared.done"):(0,g.t)("rcs.rcs_shared.next")),stepCounter:t>1?(0,g.t)("rcs.rcs_shared.step_counter",{currentStepNum:r,totalNumSteps:t}):void 0}}return e}componentDidUpdate(e,t){1===this.props.steps.length&&this.state.steps[0]!==t.steps[0]&&this.setUserFlagsOnComplete()}componentDidMount(){1===this.props.steps.length&&this.setUserFlagsOnComplete()}render(){if(0===this.props.steps.length)return n.createElement("div",null);let e=this.attachButtonText(this.props.steps[this.state.currentStep]);return n.createElement("div",{"data-does-not-dismiss-modal":!0},n.createElement(M,{onClose:this.onClose,dismissModal:this.dismissModal,step:e,onClickPrimaryCta:this.advanceStepOrComplete,dispatch:this.props.dispatch,additionalOnExplicitDismiss:this.setUserFlagOnExplicitDismiss}))}}let D=(0,v.K)(k);class M extends n.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===C.w8.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let t=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==t.top||this.state.rcsKeyLocation.left!==t.left)&&this.setState({rcsKeyLocation:t})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.nextButtonRef=e=>{e&&(this.button=i.findDOMNode(e),this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let t=this.props.step;if(t.modalType!==C.w8.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(t.pointDirection===C.L$.LEFT_TITLE){let t=e.top+e.height/2,r=e.left+e.width+16,n=I.Mz/2-9;return{left:r,top:t-20,arrowRelativeX:-18,arrowRelativeY:n,arrowPosition:I.xI.LEFT_TITLE}}if(t.pointDirection===C.L$.RIGHT_TITLE){let t=e.top+e.height/2,r=e.left-this.width-16,n=I.Mz/2-9,i=this.width;return{left:r,top:t-20,arrowRelativeX:i,arrowRelativeY:n,arrowPosition:I.xI.RIGHT_TITLE}}let r=e.left+e.width/2,n=e.bottom+18,i=r-this.width/2;i=Math.min(i=Math.max(i,10),window.innerWidth-10-this.width);let a=r-i,o=I.xI.TOP;return null!=this.state.modalHeight&&window.innerHeight-n<this.state.modalHeight+12&&(n=e.top-this.state.modalHeight-12,o=I.xI.BOTTOM),{left:i,top:n,arrowRelativeX:a,arrowRelativeY:null,arrowPosition:o}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;if(e.modalType!==C.w8.DRAGGABLE)return null;let t=document.querySelector(`[data-onboarding-key=${e.onboardingKey}]`);if(!t)return null;let r=t.getBoundingClientRect();return 0===r.left&&0===r.right&&0===r.height&&0===r.width?null:t},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,t)=>{let r=this.getFramePosition();if(r.top&&r.left)return{initialPosition:new d.OW(r.left,r.top)};switch(e){case C.AZ.BOTTOM_LEFT:return{initialPosition:t||new d.OW(P,P),initialConstraints:{x:"left",y:"bottom"}};case C.AZ.BOTTOM_RIGHT:return{initialPosition:t||new d.OW(m.tP,16),initialConstraints:{x:"right",y:"bottom"}};case C.AZ.TOP_RIGHT:return{initialPosition:t||new d.OW(P,L+P),initialConstraints:{x:"right",y:"top"}};case C.AZ.CENTER:default:return{initialPosition:t||new d.OW(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,t){this.focusButton();let r=this.props.step;if(r.modalType!==C.w8.DRAGGABLE)return;let n=e.step;(n.modalType!==C.w8.DRAGGABLE||r.onboardingKey&&r.onboardingKey!==n.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case C.w8.FEATURE_UPDATE:return e.width||C.wh;case C.w8.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,t){return e.step!==t.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,t=this.getFramePosition(),r={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},i=n.createElement(w.qs.Provider,{value:this.forceRender},n.createElement(e.element,{...r}));return(0,y.bC)((()=>{switch(e.modalType){case C.w8.DRAGGABLE:let{initialPosition:r,initialConstraints:a}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,s=this.state.title||l,d=e.onboardingKey||e.highlightOnlyKey;return n.createElement(n.Fragment,null,d&&!e.disableHighlight&&n.createElement(S.t,{target:d}),n.createElement(I.My,{initialWidth:this.width,acceptHeight:this.acceptHeight,title:s,initialPosition:r,initialConstraints:a,arrowRelativeX:e.hideArrow?void 0:R(t.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:R(t.arrowRelativeY),arrowPosition:e.hideArrow?void 0:R(t.arrowPosition),animatedIn:!0,dragHeaderOnly:!!s,onClose:this.props.dismissModal,headerClassName:e.headerClassName,zIndex:e.zIndex,disableDragging:e.disableDragging},i,e.disableFooter?null:n.createElement(w.wj,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&n.createElement("div",{className:A.rM},e.stepCounter),n.createElement("div",{className:A.UN},e.additionalButton&&n.createElement(p.fE,{className:A.Aj,href:"link"===e.additionalButton.onClickBehavior?e.additionalButton.href:void 0,target:"link"===e.additionalButton.onClickBehavior?"_blank":void 0,onClick:"function"===e.additionalButton.onClickBehavior?()=>{e.additionalButton.onClick(this.props.dispatch),this.props.dismissModal()}:void 0,trackingProperties:e.additionalButton.textForTracking?{text:e.additionalButton.textForTracking()}:{}},e.additionalButton.label),n.createElement(p.RS,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,className:A.Aj,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},n.createElement(h.u,{isLoading:!!e.ctaIsLoading,className:A.M8},()=>n.createElement("div",null,e.ctaText)))))));case C.w8.FEATURE_UPDATE:{let t=e.closeButtonStyle===C.fe.ON_DARK?A.Dv:e.closeButtonStyle===C.fe.HIGH_CONTRAST?A.pr:e.closeButtonStyle===C.fe.ON_LIGHT?A.P0:A.No;return n.createElement(b.Rj,{className:`${A.oC} ${A.yn}`,size:this.width,height:e.height,hide:this.props.dismissModal,disableClickOutsideToHide:e.disableClickOutsideToHide},i,e.closeButtonStyle!==C.fe.HIDDEN&&n.createElement(u.PZ,{innerText:"Close",className:t,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}))}case C.w8.MOBILE:if(e.type===C.bL.SHELF)return n.createElement(O.X,null,i);return n.createElement(b.Rj,{className:`${A.oC} ${A.yn} ${A.zO}`,hide:this.props.dismissModal,disableClickOutsideToHide:!0,size:"mobile"},i,n.createElement(u.PZ,{innerText:"Close",className:A.b$,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}));case C.w8.WALK_THROUGH:return n.createElement(n.Fragment,null,!e.disableHighlight&&n.createElement(S.t,{target:e.onboardingKey}),n.createElement(T.fv,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,height:e.height,width:e.width,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,topPadding:e.topPadding,className:e.className,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,hideCloseButton:e.hideCloseButton,disableClickOutsideToHide:e.disableClickOutsideToHide},i));case C.w8.WELCOME:return n.createElement(n.Fragment,null,e.fullscreen&&n.createElement("div",{className:A.ax}),n.createElement(b.Rj,{className:o()(void 0!==e.fullscreen&&e.fullscreen?A.bt:A.ND,e.className),size:"fitContent",hide:this.props.dismissModal,disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,tintedModalBackground:void 0===e.tintedModalBackground||e.tintedModalBackground},n.createElement(_.L,null,i)));case C.w8.SELF_CONTAINED:return i;case C.w8.POINTER:return n.createElement(n.Fragment,null,e.showHighlight&&n.createElement(S.t,{target:e.onboardingKey}),n.createElement(T.Qm,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},i));case C.w8.ANNOUNCEMENT_POINTER:let m=e.title instanceof Function?e.title():e.title;return n.createElement(T.mD,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,title:m,bottomLeftText:e.stepCounter,ctaText:e.ctaText,onClickPrimaryCta:this.props.onClickPrimaryCta,secondaryCtaText:e.secondaryCtaText,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?c.ZT:this.props.dismissModal,width:e.width,topPadding:e.topPadding,shouldCenterModal:e.shouldCenterModal,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition},i)}})(),e.trackingContextName,e.trackingProperties)}}M.displayName="RcsFrame"},827611:(e,t,r)=>{r.d(t,{m:()=>i,k:()=>n});var n,i,a=r(652983),o=r(63730),l=r(388899),s=r(418465),c=r(519781),d=r(618723),u=r(407598),p=r(293351),m=r(435613),h=r(970740),_=r(124040),g=r(767831);let f="survey_view--progressText--CLyN0",E="survey_view--footer--29H7u",y="survey_view--submitButton--XM2mL",v="survey_view--grid--8PjFO",b="survey_view--question--tlccL",I="survey_view--choice--qImxP",T="survey_view--choiceLabel--NJ5QK",w="survey_view--surveyButton--7ULK8",S="survey_view--ratingSubtext--4eSXc",C=r(825989);(e=>{e.DEFAULT_WIDTH=340,e.useSurveyState=function(t){let{completeStates:r,dismissModal:n,heightProvider:i,initialState:o,autoDismissTime:l,widthProvider:s}=t,[c,d]=a.useState(o),[u,p]=a.useState(""),[m,h]=a.useState(!1),[_,g]=a.useState(i(c)),[f,E]=a.useState(s?s(c):e.DEFAULT_WIDTH),y=t=>{h(!0),setTimeout(()=>{g(i(t)),E(s?s(t):e.DEFAULT_WIDTH)},300),setTimeout(()=>{d(t),h(!1)},600),r.some(e=>e===t)&&setTimeout(n,l??2e3)};return{state:c,mostRecentAnswer:u,setNextState:y,clickAnswer:e=>{var t;p(e.answer),y(e.nextState),null==(t=e.onSubmit)||t.call(e)},fadingOut:m,height:_,width:f}},e.useAutosizedSurveyState=function(e){let{completeStates:t,dismissModal:r,initialState:n,autoDismissTime:i,offscreenBoundsRef:o}=e,[l,s]=a.useState(void 0),[c,d]=a.useState(n),[u,p]=a.useState(""),[m,h]=a.useState(!1),[_,g]=a.useState(void 0),[f,E]=a.useState(void 0);a.useEffect(()=>{var e,t;g(null==(e=o.current)?void 0:e.offsetHeight),E(null==(t=o.current)?void 0:t.offsetWidth),s(n)},[n,o]);let y=e=>{h(!0),d(e),setTimeout(()=>{var e,t;g(null==(e=o.current)?void 0:e.offsetHeight),E(null==(t=o.current)?void 0:t.offsetWidth)},300),setTimeout(()=>{s(e),d(void 0),h(!1)},600),t.some(t=>t===e)&&setTimeout(r,i??2e3)};return{state:l,upcomingState:c,mostRecentAnswer:u,setNextState:y,clickAnswer:e=>{var t;p(e.answer),y(e.nextState),null==(t=e.onSubmit)||t.call(e)},fadingOut:m,height:_,width:f}}})(n||(n={})),(e=>{function t(e){return a.createElement("div",{className:"survey_view--surveyContent--tFdrC text--fontPos11--2LvXf text--_fontBase--QdLsd",style:e.style},e.children)}function r(e){return a.createElement(d.pJ,{className:w,onClick:()=>e.onClickAnswer(e.answer)},e.answer.answer)}function i(e){return a.createElement(d.Z6,{className:w,onClick:()=>e.onClickAnswer(e.answer),trusted:!0},e.answer.answer)}function O(e){return a.createElement("div",{className:v},a.createElement("div",{className:b}),e.choices.map((e,t)=>a.createElement("p",{key:t,className:I},e)))}function A(e){return a.createElement(u.E,{value:e.currentChoice,onChange:e.onClickChoice,className:v},a.createElement("legend",{className:b},e.question),e.choices.map((e,t)=>a.createElement(u._,{key:t,className:I,labelClassName:T,value:e})))}function N(e){return a.createElement(a.Fragment,null,a.createElement("legend",{className:b},e.question),a.createElement(d.Ki,{multiple:2}),a.createElement(u.E,{value:e.currentChoice,onChange:e.onClickChoice,className:"survey_view--choicesRow--K8vz1"},e.choices.map((e,t)=>a.createElement(u._,{key:t,className:I,labelClassName:T,value:e},e))))}function L(e){let r=e.height&&e.height-32,i=(e.width||n.DEFAULT_WIDTH)-32,o=a.createElement(t,{style:{height:r,width:i}},e.children);return a.createElement("div",{className:"survey_view--surveyModal--XsAuZ"},e.fadingOut?a.createElement("div",{className:"survey_view--fadeOut--8YBM0"},o):a.createElement("div",{className:"survey_view--fadeIn--CPaie"},o),!e.hideCloseButton&&a.createElement(c.PZ,{className:"survey_view--closeButton--Z6aRE",onMouseDown:e=>e.stopPropagation(),onClick:e.dismissModal,innerText:(0,h.t)("rcs.surveys.close"),trackingProperties:e.trackingPropertiesOnClose}))}e.SurveyContent=t,e.SurveyButton=r,e.SurveyLink=i,e.QuestionView=function(e){let t=e.surveyAnswers.length>2?i:r;return a.createElement(a.Fragment,null,a.createElement("p",{className:b},e.question),a.createElement(d.Ki,{multiple:2}),e.surveyAnswers.map((r,n)=>a.createElement(a.Fragment,{key:r.answer},a.createElement(t,{answer:r,onClickAnswer:()=>e.onClickAnswer(r)}),n!==e.surveyAnswers.length-1&&a.createElement(d.Ki,{multiple:2}))))},e.RatingView=function(e){let[t,r]=a.useState(null),[n,i]=a.useState(null),[l,s]=a.useState(!1);a.useEffect(()=>{n&&(null!==t||l)&&n.focus()},[t,l,n]);let c=(e,t)=>{l||r(e),t.stopPropagation()},u=(e,r,n)=>{let i="";return t===e?i+="survey_view--selectedRatingOption--ily33 survey_view--ratingOption--qOtfq":t===e-1?e!==n?i+="survey_view--ratingOptionAfterSelectionBeforeLast--25sYi survey_view--ratingOptionAfterSelection--iQdLt survey_view--ratingOption--qOtfq":i+="survey_view--ratingOptionAfterSelection--iQdLt survey_view--ratingOption--qOtfq":l?e!==n?i+="survey_view--disabledRatingOptionBeforeLast--1NC2q survey_view--disabledRatingOption--yKpRA survey_view--ratingOption--qOtfq":i+="survey_view--disabledRatingOption--yKpRA survey_view--ratingOption--qOtfq":e!==n?i+="survey_view--ratingOptionBeforeLast--MsodE survey_view--ratingOption--qOtfq":i+="survey_view--ratingOption--qOtfq",e===n&&(i+=" survey_view--borderRadiusRight--YoJzw"),e===r&&(i+=" survey_view--borderRadiusLeft--nfaRl"),i},p=e.nps?[0,1,2,3,4,5,6,7,8,9,10]:[1,2,3,4,5],m=p[p.length-1],_=p[0],g=e.surveyName||"rating_survey",v=e.lowRatingSubtext||a.createElement(h.Tx,{id:"rcs.surveys.very_dissatisfied"}),I=e.highRatingSubtext||a.createElement(h.Tx,{id:"rcs.surveys.very_satisfied"});return a.createElement("div",{className:"survey_view--ratingQuestionView--IXPnE",onClick:()=>r(null)},a.createElement("p",{className:b},e.question),a.createElement(d.Ki,{multiple:2}),a.createElement("div",{className:e.nps?"survey_view--ratingsNps--xMXsE survey_view--ratings--K-V5y":"survey_view--ratings--K-V5y"},p.map(t=>a.createElement("span",{key:t},a.createElement("div",{onClick:e=>c(t,e),className:u(t,_,m)},t),a.createElement(d.Ki,{multiple:1}),!e.ratingSubtextInline&&1===t&&a.createElement("p",{className:S},v),!e.ratingSubtextInline&&t===m&&a.createElement("p",{className:S},I)))),e.ratingSubtextInline&&a.createElement(a.Fragment,null,a.createElement("div",{className:"survey_view--ratingSubtexts--rk-0c"},a.createElement("p",null,v),a.createElement("p",null,I))),!e.optOutText&&a.createElement(d.Ki,{multiple:3}),e.optOutText&&a.createElement(a.Fragment,null,a.createElement(d.Ki,{multiple:2}),a.createElement("div",{className:"survey_view--optOutSection--4xm2R",onClick:()=>{s(!l),r(null)}},a.createElement(d.v_,{checked:l,readOnly:!0}),e.optOutText),a.createElement(d.Ki,{multiple:2})),a.createElement("div",{className:"survey_view--divider--dxUiy"}),a.createElement(d.Ki,{multiple:2}),a.createElement("div",{className:E},e.progress&&a.createElement("p",{className:f},a.createElement(h.Tx,{id:"rcs.surveys.question_counter",currentStep:e.progress.currentStep,totalSteps:e.progress.totalSteps})),a.createElement(d.RS,{onClick:()=>{(!e.required||null!==t||l)&&e.onSubmit(t)},className:y,disabled:e.required&&null===t&&!l,ref:e=>{e&&i(o.findDOMNode(e))},autoFocus:null!==t||l,trackingProperties:{[g]:JSON.stringify({...e.trackingProperties,rating:t})}},e.buttonText||a.createElement(h.Tx,{id:"rcs.surveys.submit"}))))},e.MultipleChoiceQuestionsView=function(e){let t=Array(e.questions.length).fill(e.defaultChoice.displayValue),r={};for(let t of e.questions)r[t.trackingValue]=e.defaultChoice.trackingValue;let[n,i]=a.useState(t),[o,l]=a.useState(r),s=(t,r)=>{i(e=>{let n=[...e];return n[t]=r,n}),l(n=>{let i={...n},a=e.choices.find(e=>e.displayValue==r)||e.defaultChoice;return i[e.questions[t].trackingValue]=a.trackingValue,i})};return a.createElement("div",{className:"survey_view--multipleChoiceQuestionsView--YVIbT"},a.createElement("h1",null,e.header),a.createElement(d.Ki,{multiple:1}),e.subHeader&&a.createElement("p",null,e.subHeader),a.createElement("div",{className:"survey_view--questionContainer--ySWAr"},a.createElement(O,{choices:e.choices.map(e=>e.displayValue)}),e.questions.map((t,r)=>a.createElement(A,{key:r,question:t.displayValue,choices:e.choices.map(e=>e.displayValue),currentChoice:n[r],onClickChoice:e=>s(r,e)}))),a.createElement(d.Ki,{multiple:2}),a.createElement("div",{className:E},e.progress&&a.createElement("p",{className:f},a.createElement(h.Tx,{id:"rcs.surveys.question_counter",currentStep:e.progress.currentStep,totalSteps:e.progress.totalSteps})),a.createElement(d.pJ,{onClick:e.onSubmit,trackingProperties:{...e.trackingProperties,...o},innerText:(0,h.t)("rcs.surveys.submit_opinions")},a.createElement(h.Tx,{id:"rcs.surveys.next"}))))},e.EnterFreeFormView=function(e){var t;let[r,n]=a.useState(""),[i,o]=a.useState(void 0),[l,c]=a.useState(null==(t=e.followUpQuestion)?void 0:t.defaultChoice),u=a.useRef(null);a.useEffect(()=>{u.current&&u.current.focus()},[]);let m=e=>{n(e.target.value),o(void 0)},g=e.usePrimaryButton?d.RS:d.pJ,v={freeFormInput:r,initialAnswer:e.subtext};l&&(v.followUpQuestionResponse=l);let I=e.customResponseFieldName?{[e.customResponseFieldName]:JSON.stringify(v)}:v;return a.createElement(a.Fragment,null,e.badge_text&&a.createElement(a.Fragment,null,a.createElement(s.Ct,{color:s.JV.DEFAULT,text:e.badge_text}),a.createElement(d.Ki,{multiple:1.5})),a.createElement("div",{className:"survey_view--surveyOtherInput--68kbm"},a.createElement("p",{className:b},e.question),a.createElement(d.Ki,{multiple:2}),e.subtext&&a.createElement(a.Fragment,null,a.createElement("p",null,e.subtext),a.createElement(d.Ki,{multiple:1.5})),e.label&&a.createElement(d.hI,{type:"textarea",htmlName:"enter-free-form",placeholder:e.placeholder_text||(0,h.t)("rcs.surveys.would_love_to_know"),label:e.label,className:"survey_view--labeledTextInput--GJSJP",value:r,onChange:m,maxLength:1e3}),!e.label&&a.createElement(p.Q,{type:"textarea",placeholder:e.placeholder_text||(0,h.t)("rcs.surveys.would_love_to_know"),ref:u,rows:5,className:`${i&&"survey_view--inputError---xPSn"||""}`,value:r,onChange:m,maxLength:1e3}),i&&a.createElement("p",{className:"survey_view--errorMessage--mkVJV"},i),e.followUpQuestion&&a.createElement(a.Fragment,null,a.createElement(d.Ki,{multiple:2}),a.createElement(N,{question:e.followUpQuestion.question,choices:e.followUpQuestion.choices.map(e=>e.displayValue),currentChoice:l??null,onClickChoice:e=>{c(e)}})),a.createElement(d.Ki,{multiple:2}),a.createElement("div",{className:E},e.progress&&a.createElement("p",{className:f},a.createElement(h.Tx,{id:"rcs.surveys.question_counter",currentStep:e.progress.currentStep,totalSteps:e.progress.totalSteps})),a.createElement(g,{onClick:()=>{!e.required||r?e.onSubmit():o((0,h.t)("rcs.surveys.this_field_is_required"))},trackingProperties:{...e.trackingProperties,...I,trackingDescriptor:_.y.SUBMIT_FREE_FORM},innerText:(0,h.t)("rcs.surveys.submit_free_form"),className:y,autoFocus:!e.required},a.createElement(h.Tx,{id:"rcs.surveys.submit"})))))},e.CompleteView=function({customSuccessMessage:e}){return a.createElement(a.Fragment,null,a.createElement("div",{className:"survey_view--surveyComplete--5LM73"},a.createElement(m.n,{className:"survey_view--successIcon---l6LH",svg:C}),a.createElement(d.Ki,{direction:"x",multiple:1.5}),a.createElement("p",{className:"survey_view--completeViewText--hOTK2"},e||a.createElement(h.Tx,{id:"rcs.surveys.thanks_for_your_feedback"}))))},e.ModalView=function(e){let t=a.createElement(L,{...e});return"center"===e.position?a.createElement(g.R9,null,t," "):a.createElement(g.dt,null,t)},e.OffscreenModalView=a.forwardRef((e,t)=>a.createElement("div",{ref:t,"aria-hidden":!0,className:"survey_view--offscreenSurveyBoundsMeasurer--4y6x0"},a.createElement(L,{...e}))),e.AutosizedModalView=a.forwardRef((t,r)=>a.createElement(a.Fragment,null,void 0!==t.upcomingState&&a.createElement(e.OffscreenModalView,{fadingOut:!1,ref:r,dismissModal:l.ZT,hideCloseButton:t.shouldHideCloseButton(t.upcomingState),width:t.getDefaultWidth?t.getDefaultWidth(t.upcomingState):void 0,height:t.getDefaultHeight?t.getDefaultHeight(t.upcomingState):void 0},t.view(t.upcomingState)),void 0!==t.state&&a.createElement(e.ModalView,{position:t.position,width:t.width,height:t.height,fadingOut:t.fadingOut,dismissModal:t.dismissModal,hideCloseButton:t.shouldHideCloseButton(t.state),trackingPropertiesOnClose:t.trackingPropertiesOnClose},t.view(t.state))))})(i||(i={}))},998547:(e,t,r)=>{r.d(t,{Ch:()=>C,s$:()=>w});var n=r(652983),i=r(644735),a=r(87608),o=r.n(a),l=r(172497),s=r(615537),c=r(388899),d=r(618723),u=r(242683),p=r(229845),m=r(85808),h=r(212984),_=r(299482),g=r(131826),f=r(366533),E=r(375397),y=r(45578),v=r(948042),b=r(332224);let I=r(250973);class T extends n.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return n.createElement("div",{className:`${y.mZ} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.name,this.props.isSelected&&n.createElement("div",{className:v.x7},e),this.props.extraContent)}}T.displayName="MultiSelectHeader";let w="msl_header_toggle_select_all_onboarding_key",S=(0,l.z)(b.y0z);class C extends n.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,s.ws)((e,t)=>e.map(e=>t(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>{var t;return!(null==(t=this.props.unselectableItemKeys)?void 0:t.has(e))}):e},this.toggleSelectMultiple=(e,t,r=!1)=>{this.rangeSelectAnchorRowKey=null;let n=this.props.onSelectedItemsChange??c.ZT;if(t){if(r)this.setState({selectedItemKeys:new Set,selectedAll:!1}),n([]);else{let t=new Set(this.state.selectedItemKeys);e.forEach(e=>t.delete(e)),this.setState(e=>({selectedItemKeys:t,selectedAll:e.selectedAll})),n(this.filterToSelected(this.props.items,t,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let t=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:t,selectedAll:e.selectedAll||r})),n(this.filterToSelected(this.props.items,t,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{var t;let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!(null==(t=this.props.unselectableItemKeys)?void 0:t.has(r))},this.toggleSelect=e=>{var t;let r=this.props.getItemKey(e);if(null==(t=this.props.unselectableItemKeys)?void 0:t.has(r))return;let n=new Set(this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,t,r)=>{if(e===t)return;let n=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>{var t;return!(null==(t=this.props.unselectableItemKeys)?void 0:t.has(e))}),i=n.indexOf(e),a=n.indexOf(t);if(-1===i||-1===a)return;let o=Math.max(i,a),l=n.slice(Math.min(i,a),o+1);r?this.toggleSelectMultiple(l,!0):this.toggleSelectMultiple(l,!1)},this.onRowClick=(e,t)=>{var r;let n=this.props.getItemKey(t);if(null==(r=this.props.unselectableItemKeys)||!r.has(n)){if(e.shiftKey){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let t=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,t),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(t)}},this.isFirstInSelectedGroup=e=>{let t=this.props.items[e],r=this.props.getItemKey(t),n=this.state.selectedItemKeys.has(r);if(!n)return!1;let i=this.props.items[e-1];if(!i)return!0;let a=this.props.getItemKey(i),o=this.state.selectedItemKeys.has(a);return!o},this.isLastInSelectedGroup=e=>{let t=this.props.items[e],r=this.props.getItemKey(t),n=this.state.selectedItemKeys.has(r);if(!n)return!1;let i=this.props.items[e+1];if(!i)return!0;let a=this.props.getItemKey(i),o=this.state.selectedItemKeys.has(a);return!o},this.rowWithCheckbox=(e,t,r)=>{var i,a,l,s,c,d;let p=this.isItemSelected(e),m=this.props.getItemKey(e),h=o()(v.TS,null==(i=this.props.styleOverrideClassNames)?void 0:i.unselectedCheckbox),_=(null==(a=this.props.unselectableItemKeys)?void 0:a.has(m))?null:n.createElement(u.a,{className:p?void 0:h,allChecked:p,someChecked:!1,"data-onboarding-key":p?"msl_selected_row_onboarding_key":void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>{}}),g=e.tooltipText,f=[];return this.props.shouldRoundBordersForSelectedRows&&(f.push(v.Ic),p&&!this.isFirstInSelectedGroup(r)&&f.push(v.Zp),p&&!this.isLastInSelectedGroup(r)&&f.push(v.aw)),n.createElement(E.LV,{className:o()(v.O7,null==(l=this.props.styleOverrideClassNames)?void 0:l.row,p&&(null==(s=this.props.styleOverrideClassNames)?void 0:s.selectedRow)?null==(c=this.props.styleOverrideClassNames)?void 0:c.selectedRow:void 0,...f),selected:p,key:m,onClick:t=>this.onRowClick(t,e),tooltipText:g,useAdminTableStyles:!0,dataTestId:"multi-select-list-table-trackable-row"},n.createElement("div",{className:o()(v.HP,null==(d=this.props.styleOverrideClassNames)?void 0:d.checkboxColumn)},_),this.props.columns.map(i=>n.createElement("div",{className:i.className,key:i.name},i.cellComponent(e,t,r))))},this.renderLoadingRow=e=>{var t,r;let i=0;return e<2?i=1:e<10&&(i=1-(e-2+1)/9),n.createElement("div",{key:e,style:{opacity:i},"data-testid":"multi-select-list-loading-row"},n.createElement(E.LV,{className:o()(v.O7,null==(t=this.props.styleOverrideClassNames)?void 0:t.row),useAdminTableStyles:!0,dataTestId:"multi-select-list-table-loading-row"},n.createElement("div",{className:o()(v.HP,null==(r=this.props.styleOverrideClassNames)?void 0:r.checkboxColumn)}),this.props.columns.map((t,r)=>t.name?n.createElement("div",{className:t.className,key:t.name},n.createElement("div",{style:_.sx.add({width:`${50*Math.abs(Math.sin(e+r+1))+30}%`}).$},n.createElement(p.g4,{className:h.cx.h12.$,animationType:p.F4.SHIMMER}))):n.createElement("div",{key:t.name,className:o()(h.cx.wFull.$,t.className)}))))},this.filterToSelected=(0,s.ws)((e,t,r,n)=>e.filter(e=>t.has(n(e))&&!(null==r?void 0:r.has(n(e))))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=n.createRef(),this.scrollContainerRef=n.createRef()}componentDidUpdate(e,t){if((e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length)&&(this.rangeSelectAnchorRowKey=null,e.isLoading&&e.items.length<this.props.items.length&&this.state.selectedAll)){let t=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...t])}))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){var t,r;let i=e.length===this.selectableItemKeys().length,a=e.length>0,l=0===e.length;return n.createElement(E.SC,{header:!0,useAdminTableStyles:!0,className:o()(this.props.disabled?v.bB:v.rG,null==(t=this.props.styleOverrideClassNames)?void 0:t.header),dataTestId:"multi-select-list-table-header-row"},n.createElement("div",{className:o()(v.HP,null==(r=this.props.styleOverrideClassNames)?void 0:r.checkboxColumn)},this.selectableItemKeys().length>0&&!this.props.selectAllDisabled&&n.createElement(u.a,{allChecked:i,"data-onboarding-key":w,someChecked:a,onChange:()=>{l?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},"data-testid":"multi-select-list-select-all-checkbox"})),this.props.columns.map(e=>n.createElement("div",{className:e.className,key:e.name},n.createElement(T,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))))}render(){var e,t,r,i,a;let s=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),c=this.props.isBannerHeightDynamic?{top:(null==(r=null==(t=null==(e=this.stickBannerRef)?void 0:e.current)?void 0:t.getBoundingClientRect())?void 0:r.height)||0}:void 0,u=this.props.isLoading&&0===this.props.items.length,p=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return n.createElement(n.Fragment,null,n.createElement("div",{className:o()(v.X_,{[v.sL]:this.props.hasNewScrollContext},null==(i=this.props.styleOverrideClassNames)?void 0:i.tableWrapper)},n.createElement(m.l,{className:v.Lw,innerClassName:o()(v.ge,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,l.z)(b.PWe),scrollContainerRef:this.scrollContainerRef,scrollingDisabled:u,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},n.createElement(n.Fragment,null,n.createElement("div",{ref:this.stickBannerRef,className:v._A},this.props.stickyBanner),n.createElement("div",null,this.props.scrollAwayContent),n.createElement("div",{className:void 0!==this.props.stickyBanner?v.Tc:v._A,style:c},n.createElement(g.Ui,{name:"MultiSelectList Header",trackingTargets:f.p.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),this.renderColumnHeaders(s)),0===this.props.items.length&&!this.props.isLoading&&n.createElement("div",{className:v.Zu},this.props.emptyContent),n.createElement(g.Ui,{name:"MultiSelectList - Row",trackingTargets:f.p.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},n.createElement(O,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:e=>this.rowWithCheckbox(this.props.items[e],s.length>0,e),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??S,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&n.createElement(g.Ui,{name:"MultiSelectList BatchAction",trackingTargets:f.p.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:s.length,...p}},n.createElement("div",{className:s.length>0?v.ub:v.Q4,"data-testid":"multi-select-list-action-bar"},n.createElement("div",{className:o()(s.length>0?v.w8:v.Iu,this.props.actionBarClassName)},n.createElement("div",{className:v.VJ},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(s,this.selectableItemKeys()):s.length)),this.props.actionBar(s),n.createElement(d.xZ,{className:o()(v.zi,null==(a=this.props.styleOverrideClassNames)?void 0:a.batchActionClearButton),svg:I,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(s))}}function O({totalLoaded:e,isLoading:t,disabled:r,renderItem:a,renderLoadingRow:o,scrollContainerRef:l,onFetchMore:s,rowHeight:c,paddingEnd:d}){let u=n.useCallback(()=>c,[c]),p=t||!!s,{virtualItems:m,totalSize:h}=(0,i.o)({size:p?e+10:e,parentRef:l,overscan:15,estimateSize:u,paddingEnd:d||32});return n.useEffect(()=>{let t=m[m.length-1];e&&s&&(null==t?void 0:t.index)>=e-1&&s()},[s,e,m]),n.createElement("div",{className:`${r?v.LP:v.XS}`,style:{height:h}},m.map(t=>n.createElement("div",{key:t.index,style:{position:"absolute",top:t.start,left:0,width:"100%",height:t.size}},t.index>=e?o(t.index-e):a(t.index))))}C.displayName="MultiSelectList"},796096:(e,t,r)=>{r.d(t,{q:()=>m});var n=r(652983),i=r(407908),a=r(523495),o=r(970740),l=r(493359),s=r(70918),c=r(4818),d=r(220958),u=r(225468);function p(e,t,r){let n=(0,a.aF)(e,25),i=r?function(e){switch(e){case d.V.OWNER:return" (owner)";case d.V.ADMIN:return" (admin)";default:return""}}(r):"";return t?(0,o.t)("avatar.tooltip.current_user_handle",{handle:n,roleName:i}):(0,o.t)("avatar.tooltip.other_user_handle",{handle:n,roleName:i})}function m(e){let t=(0,s.xJ)(),r=(0,i.v9)(e=>e.multiplayer),a=(0,i.v9)(c.Q),o="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,d="user"in e?e.user:e.role.user,m=!1,h="sessionId"in d&&d.sessionId===r.sessionID;t?m=d.id===t.id:"sessionId"in d&&(m=h);let _="role"in e?p(d.handle,m,e.role.level):p(d.handle,m),g=function(e){let t=(0,s.xJ)(),r=(0,i.v9)(e=>e.multiplayer),n=(0,l.GU)();return function(e){var t;let{localUser:r,tooltipUser:n,multiplayer:i,isInWorkshop:a}=e,o=(null==(t=n.id)?void 0:t.includes("VISITOR-"))||!n.id,l=-1!==i.sessionID,s="sessionId"in n&&n.sessionId===i.sessionID,c="sessionId"in n&&n.sessionId===i.presenterSessionID,d="sessionId"in n&&i.observingSessionID===n.sessionId;return l?s?o||!r?a?"edit-name":"none":c?"stop-presenting":"none":c&&!d?"follow-presenter":d?"stop-observe":"start-observe":o?"none":"view-profile"}({localUser:t,tooltipUser:e,multiplayer:r,isInWorkshop:n})}(d),f=`/files${a}/user/${d.id}`;return n.createElement("div",{id:e.id,key:`avatar-${o}`,"data-tooltip-type":u.fR.SPECIAL,"data-tooltip":u._7.VIEW_USER_PROFILE,"data-tooltip-user-handle":_,"data-tooltip-user-session-id":"sessionId"in d?d.sessionId:void 0,"data-tooltip-timeout-delay":150,"data-tooltip-user-profile-url":f,"data-tooltip-click-action":g,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-interactive":!0,style:{display:"inherit"}},e.children)}},213104:(e,t,r)=>{r.d(t,{A2:()=>u,Zs:()=>o.Z,fB:()=>s.ContactSalesModalSource,gg:()=>_,mg:()=>b,n2:()=>y,nB:()=>p,nY:()=>f,sR:()=>c.UpgradePlan,xi:()=>l.x});var n=r(291904),i=r(650264),a=r(932122),o=r(642241),l=r(924119),s=r(706787),c=r(610282);let d=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,237952)).then(e=>e.TeamRenameModal),a.e),u=(0,n.Y3)(d),p="team-permissions-modal",m=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,428150)).then(e=>e.TeamPermissionsModal),a.e);(0,n.QR)(p,m);let h=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,706787)).then(e=>e.UpgradeContactSalesModal),a.e),_=(0,n.Y3)(h,"UpgradeContactSalesModal"),g=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,984967)).then(e=>e.UpgradeChoosePlanModal),a.e),f=(0,n.Y3)(g,"UpgradeChoosePlanModal"),E=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,610282)).then(e=>e.UniversalUpgradeSequence),a.e),y=(0,n.Y3)(E,"UniversalUpgradeSequence"),v=i.Z.createLazyComponent(()=>Promise.all([r.e(4736),r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(3729),r.e(9717),r.e(1528),r.e(7588),r.e(7234),r.e(3339)]).then(r.bind(r,868269)).then(e=>e.EduUpgradeModal),a.e),b=(0,n.Y3)(v,"EDU_UPGRADE_MODAL")},802810:(e,t,r)=>{r.d(t,{F:()=>p});var n=r(652983),i=r(618723),a=r(85808),o=r(970740),l=r(124040),s=r(131826),c=r(898080),d=r(828867),u=r(271119);function p({customUpgradeText:e,eligibleTeams:t,selectTeam:r,numDesignFilesPerTeam:p,showEditorCount:m=!0}){let[h,_]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1);n.useEffect(()=>{_(t.length>=5)},[t]);let E=`${u.Lw}`;h&&(E+=` ${u.Fl}`),g&&(E+=` ${u.eG}`);let y=t[t.length-1],v=p&&p.length===t.length;return n.createElement(a.l,{onScroll:(e,r)=>{let n=t.length>=5,i=n&&0!==e,a=n&&e+r.trackHeight!==r.scrollHeight;a!==h&&_(a),i!==g&&f(i)},className:E,scrollingDisabled:!1},n.createElement("div",{className:u.ib},t.map((t,a)=>n.createElement(s.UE,{key:t.id,className:t===y?u.Os:u.SC,onClick:()=>r(t),trackingProperties:{teamId:t.id,trackingDescriptor:l.y.UPGRADE},innerText:"Upgrade"},n.createElement("div",{className:"org_self_serve--teamInfo--NZwPd"},n.createElement(d.Kn,{className:"org_self_serve--teamIcon--pyVIW",entity:t,size:40,shape:"SQUARE"}),n.createElement("div",{className:"org_self_serve--teamText--LOruA"},n.createElement("p",{className:"org_self_serve--teamName--H89GM text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.name),n.createElement("p",{className:"org_self_serve--teamEditors--MBtOb text--fontPos11--2LvXf text--_fontBase--QdLsd"},!v&&m&&n.createElement(o.Tx,{id:"universal_upgrade.select_team.editor_count.seat_rename",editors:t.editors}),v&&p&&n.createElement(o.Tx,{id:"universal_upgrade.select_team.files_per_team_figma_files_used",numFilesUsed:p[a],numFreeFilesAllowed:c.Hf})))),n.createElement(i.PL,{className:u.AF},e??n.createElement(o.Tx,{id:"universal_upgrade.select_team.upgrade"}))))))}},210831:(e,t,r)=>{r.d(t,{B:()=>o,Q:()=>a});var n=r(337167),i=r(370455);let a=(0,i.h)(n.n_,"FileBrowser",(0,i.m)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")})),o=a.useIsLoading},324906:(e,t,r)=>{r.d(t,{K:()=>l,Q:()=>s});var n=r(652983),i=r(600486),a=r(9247),o=r(204829);let l=(e,t)=>n.useCallback(r=>{let{event:n,...a}=r||{},l=n&&o.ar(e,n)||e;(0,i.L9)(l,{...t,...a})},[e,t]);function s(e,t,r){let[o,l]=n.useState(e),s=(0,a.D)(o);return n.useEffect(()=>{t&&o!==s&&(0,i.L9)(t,{previousState:s,newState:o,...r})},[o]),[o,l]}},5453:(e,t,r)=>{r.d(t,{DD:()=>_,ES:()=>A,MR:()=>T,NI:()=>s,Or:()=>O,TV:()=>u,Te:()=>o,Tk:()=>g,Vg:()=>c,We:()=>w,Wk:()=>y,aV:()=>f,bL:()=>h,bk:()=>d,df:()=>b,eG:()=>N,h6:()=>l,hS:()=>m,ih:()=>I,kS:()=>C,kd:()=>p,po:()=>E,qz:()=>L,tL:()=>v,uh:()=>P,uo:()=>a,uq:()=>S,xH:()=>function e(t,r=[]){for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?e(i,r):r.push(i)}return r}});var n=r(767310),i=r(217810);function a(e,t,r,n){let i=e.indexOf(t,0);if(i<0)return e;let a=null==r?-1:e.indexOf(r);a<0?a=n?0:e.length:n&&i<a?a-=1:!n&&i>a&&(a+=1);let o=e.slice();return i>-1&&a!==i&&(o.splice(i,1),o.splice(a,0,t)),o}function o(e,t){let r=e.indexOf(t);-1===r&&e.push(t)}function l(e,t){let r=e.indexOf(t);-1===r&&e.unshift(t)}function s(e,t){let r=e.indexOf(t);-1!==r&&e.splice(r,1)}function c(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function d(e){for(let t=1;t<e.length;t++)if(void 0===e[t]||e[t]!==e[t-1])return!1;return!0}function u(e,t){let r=e.length,n,i;for(;0!==r;){let a=t?function(e=Date.now()){return(9301*e+49297)%233280/233280}(t):Math.random();i=Math.floor(a*r),r-=1,n=e[r],e[r]=e[i],e[i]=n}return e}function p(e){return e[Math.floor(Math.random()*e.length)]}function m(e,t,r=!1){return h(e,e=>e[t],r)}function h(e,t,r=!1,n,i=!1){e.sort((e,a)=>{let o=t(e)===t(a);if(o&&n){let t=i?-1:1;return n(e)<n(a)?-t:t}let l=r?-1:1;return t(e)<t(a)?-l:l})}let _=200,g=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function f(e,t,r={}){E(e,e=>e[t],r)}function E(e,t,r={},n){let i=e=>{let r=t(e);return r&&r.toLowerCase?r.toLowerCase():""},a=e=>{if(!n)return"";let t=n(e);return t&&t.toLowerCase?t.toLowerCase():""},o=r.isDescending?-1:1;r.useExpensiveNaturalComparison?e.sort((e,t)=>g.compare(i(e),i(t))*o):e.sort((e,t)=>{let l=i(e)===i(t);if(l&&n){let n=r.isSecondaryDescending?-1:1;return a(e)<a(t)?-n:n}return i(e)<i(t)?-o:o})}function y(e,t,r=!1,n,i=!1){let a=(e,t)=>{let r=e(t);return"string"==typeof r?r.toLowerCase():"number"==typeof r?r:""},o=r?-1:1;e.sort((e,r)=>{let l=a(t,e)===a(t,r);if(l&&n){let t=i?-1:1;return a(n,e)<a(n,r)?-t:t}return a(t,e)<a(t,r)?-o:o})}function v(e,t,r=!1){return e.sort((e,n)=>{let i=new Date(t(e)).getTime(),a=new Date(t(n)).getTime(),o=i<a?1:-1;return r?-o:o})}function b(e,t,r=!1){return v(e,e=>e[t],r)}function I(e){return v(e,e=>e.created_at)}function T(e,...t){return e.sort((e,r)=>{for(let n of t){let t=n(e,r);if(0!==t)return t}return 0})}function w(e){return e.filter(i.lm)}function S(e,t,r=i.lm){for(let n=t+1;n<e.length;n++){let t=e[n];if(r(t,n))return t}}function C(e,t,r=i.lm){for(let n=t-1;n>=0;n--){let t=e[n];if(r(t,n))return t}}function O(e,t,r="left",a=i.lm){t=(0,n.uZ)(t,0,e.length-1);for(let n=0;t-n>=0||t+n<e.length;n++){let[i,o]="left"===r?[t-n,t+n]:[t+n,t-n];if(i>=0&&i<e.length){let t=e[i];if(a(t,i))return t}if(o>=0&&o<e.length){let t=e[o];if(a(t,o))return t}}}function A(e){let t=[...e],r=(0,i.LG)(t.pop(),"input must be non-empty");return[t,r]}function N(e,t,r=String){let n={};t.forEach((e,t)=>{n[r(e)]=t});let i=0,a=0,o=[];for(;;){let l=e[i],s=t[a];if(void 0===l||void 0===s){if(void 0===l&&void 0===s)return o;void 0!==l&&void 0===s?(o.push({hasBoth:!1,left:l,right:void 0}),i++):void 0===l&&void 0!==s&&(o.push({hasBoth:!1,left:void 0,right:s}),a++)}else{let e=n[r(l)];void 0===e||e<a?(o.push({hasBoth:!1,left:l,right:void 0}),i++):(e===a?(o.push({hasBoth:!0,left:l,right:s}),i++):o.push({hasBoth:!1,left:void 0,right:s}),a++)}}}function L(e,t){let r=[];for(let n of e){let e=t(n);null!=e&&r.push(e)}return r}function P(e,t){return e.includes(t)?e.filter(e=>e!==t):e.concat(t)}},288223:(e,t,r)=>{r.d(t,{AW:()=>o,RN:()=>l,SA:()=>c,hC:()=>m,i3:()=>u,lu:()=>h,qA:()=>d,r7:()=>s,zY:()=>p});var n=r(792808);let i={status:n.Q.INIT},a={status:n.Q.LOADING};function o(){return i}function l(){return a}function s(e){return{status:n.Q.SUCCESS,value:e}}function c(e){return{status:n.Q.FAILURE,error:e}}function d(e){return e.status===n.Q.INIT}function u(e){return e.status===n.Q.LOADING}function p(e){return e.status===n.Q.SUCCESS}function m(e){return e.status===n.Q.FAILURE}function h(e){return p(e)?e.value:void 0}},196401:(e,t,r)=>{r.d(t,{Gu:()=>s,Jx:()=>a,YW:()=>l,cv:()=>o});let n=new Int32Array(127);for(var i=0;i<127;i++)n[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(i));function a(e){for(var t=0,r=e.length>>>2,i=new Uint8Array(3*r),a=0;t<r<<2;){var o=n[127&e.charCodeAt(t++)],l=n[127&e.charCodeAt(t++)],s=n[127&e.charCodeAt(t++)],c=n[127&e.charCodeAt(t++)];i[a++]=o<<2|l>>>4,s>=0&&(i[a++]=l<<4|s>>>2),c>=0&&(i[a++]=s<<6|c)}return a===i.length?i:i.subarray(0,a)}function o(e){for(var t="",r=e.length,n=0;n<r;n+=1024)t+=String.fromCharCode.apply(String,e.subarray(n,n+1024));return btoa(t)}function l(e){return o(new TextEncoder().encode(e))}function s(e){let t=e.length;if((3&t)!=0)return!1;if(0===t)return!0;"="===e[t-1]&&t--,"="===e[t-1]&&t--;for(let r=0;r<t;++r){let t=e.charCodeAt(r);if(t>=127||n[t]<0)return!1}return!0}},764150:(e,t,r)=>{r.d(t,{AK:()=>y,BT:()=>m,Dl:()=>C,I9:()=>D,Ne:()=>I,Rw:()=>w,__:()=>_,cy:()=>R,km:()=>g,me:()=>b,mx:()=>h,qx:()=>T,uY:()=>N,wD:()=>E,x_:()=>k,xq:()=>v,zd:()=>S});var n=r(448501),i=r(810373),a=r(571529),o=r(286206),l=r(117986),s=r(278287),c=r(112602),d=r(600486),u=r(461490),p=r(716250);function m(e,t){let r,n;try{r=new URL(e,p.fh),n=new URLSearchParams(r.search)}catch(r){throw(0,o.Jz)(l.k.EXPLORE,r,{extra:{...t,url:e}}),r}Object.entries(t).forEach(e=>{let[t,r]=e;n.set(t,r)});let i=n.toString();i&&(r.search=`?${i}`);let a=r.href;return a.startsWith(p.fh)?a.substr(p.fh.length):a}function h(e,t,r){let n=new URL(e,p.fh),i=new URLSearchParams(n.search);i.has(t)||i.set(t,r);let a=i.toString();a&&(n.search=`?${a}`);let o=n.href;return o.startsWith(p.fh)?o.substr(p.fh.length):o}function _(e){var t=e.url;if(null!=t){if(t.startsWith("mailto:")){n.default.unsafeRedirect(t,e.openInNewWindow?"_blank":"");return}t.startsWith("http://")||t.startsWith("https://")||(t="http://"+t),n.default.postRedirect(`/exit?url=${encodeURIComponent(t)}`,e.openInNewWindow?"_blank":"")}}let g=(e,t,r,n)=>(0,p.BZ)().ps_benchmark?e?e!==t:r!==n:e!==t,f="external-teams",E=(e,t,r,i,a,o="file")=>{let l=v(`/${o}/${e}`,t),c=(0,p.BZ)().ps_benchmark;c?(l=b(l,r,i,a),function(e,t,r,n="file"){(0,d.L9)("file_browser_fresh_external_file_load",{fileKey:e,entryPlanId:t||r,planType:t?s.k.ORG:s.k.TEAM,urlType:n})}(e,r,i,o)):(l=b(l,r,null,a),y(e,r,o)),n.default.redirect(l)};function y(e,t,r="file"){(0,d.L9)("file_browser_fresh_external_file_load",{fileKey:e,entryPlanId:t||f,urlType:r})}let v=(e,t)=>t?h(e,"fuid",t.id):e,b=(e,t,r,n)=>{let i=(0,p.BZ)().ps_benchmark,a="";if(i){let n=t||r;n&&(a=h(e,"prev-plan-id",n),a=h(a,"prev-plan-type",t?s.k.ORG:s.k.TEAM))}else a=h(e,"prev-org-id",t||f);return n&&(a=h(a,"prev-selected-view",n.view),a="folder"===n.view?h(a,"prev-folder-id",n.folderId):a,a="recentsAndSharing"===n.view?h(a,"prev-tab",n.tab||c.D.RECENTLY_VIEWED):a),a};function I(e,t,r){return window.open(e,t,r)}function T(e){return{top:e?e.top:0,right:e?e.right:0,bottom:e?e.bottom:0,left:e?e.left:0,width:e?e.width:0,height:e?e.height:0}}function w(e,t){return e&&t?JSON.stringify(T(e))===JSON.stringify(T(t)):e===t}function S(){return self!==top}let C={},O=document&&document.documentElement;function A(e,t){Object.defineProperty(C,e,{enumerable:!0,configurable:!0,get(){let r=t();return Object.defineProperty(C,e,{enumerable:!0,value:r}),r}})}A("pointerLock",()=>!!(O&&O.requestPointerLock)),A("fullscreenChangeEventName",()=>"onfullscreenchange"in document?"fullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onMSFullscreenChange"in document?"MSFullscreenChange":"onmsfullscreenchange"in document?"msfullscreenchange":null),A("fullscreenErrorEventName",()=>"onfullscreenerror"in document?"fullscreenerror":"onmozfullscreenerror"in document?"mozfullscreenerror":"onwebkitfullscreenerror"in document?"webkitfullscreenerror":"onMSFullscreenError"in document?"MSFullscreenError":"onmsfullscreenerror"in document?"msfullscreenerror":null),A("requestFullscreenFunc",()=>O&&(O.requestFullscreen||O.mozRequestFullScreen||O.webkitRequestFullscreen||O.msRequestFullscreen||null)),A("exitFullscreenFunc",()=>{let e=document.exitFullscreen||document.mozExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen||null;return e?e.bind(document):null}),A("getFullscreenElement",()=>{let e=document.fullscreenElement?()=>document.fullscreenElement:document.mozFullScreenElement?()=>document.mozFullScreenElement:document.webkitFullscreenElement?()=>document.webkitFullscreenElement:document.msFullscreenElement?()=>document.msFullscreenElement:()=>null;return e}),A("fullscreen",()=>null!=C.requestFullscreenFunc&&null!=C.exitFullscreenFunc&&(document.fullscreenEnabled||document.webkitFullscreenEnabled));let N=()=>null==document.visibilityState||"visible"===document.visibilityState?Promise.resolve():new Promise(e=>{document.addEventListener("visibilitychange",function t(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())})}),L="hidden"===document.visibilityState?Date.now():null,P=new Set;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?L=Date.now():"visible"===document.visibilityState&&(L=null,P.forEach(e=>e()),P.clear())});let R=()=>{if(null===L||Date.now()-L<3e4)return Promise.resolve();let{promise:e,resolve:t}=(0,u.P)();return P.add(t),e};function k(){let e=RegExp(`${a.ZP.name}\\/${a.ZP.version}[0-9.]*`),t=navigator.userAgent.match(e);if(t)return t[0]}function D(e){let t=(0,p.ZP)().user_data,r=t&&t.id,n=function(e){if(!r||e instanceof KeyboardEvent&&e.keyCode!==i.sr.ENTER)return;let t=e.target;if(!(t instanceof Element))return;let n=t.closest("a");if(!n||n.hostname!==window.location.hostname)return;let a=window.location.href,o=n.href.substr(0,n.href.indexOf("#")),l=a.indexOf("#"),s=a.substr(0,l),c=a.substr(l+1);o&&o===(s||c)||(n.href=h(n.href,"fuid",r))},a=e??document;a.addEventListener("click",n),a.addEventListener("keydown",n)}},141757:(e,t,r)=>{r.d(t,{B5:()=>R,B6:()=>c,Cj:()=>s,E5:()=>l,Hr:()=>j,NI:()=>f,Nd:()=>d,OO:()=>A,Qm:()=>C,TV:()=>L,Vr:()=>D,X9:()=>T,ZM:()=>P,_7:()=>N,_T:()=>q,_g:()=>x,c$:()=>m,eG:()=>w,fj:()=>F,ft:()=>M,l7:()=>$,lu:()=>g,m5:()=>u,qn:()=>O,ss:()=>h,uK:()=>_,vG:()=>E,vq:()=>S,wC:()=>v,zo:()=>p});var n,i=r(931086),a=r(767310),o=r(527700);let l={r:0,g:0,b:0,a:1},s={r:1,g:1,b:1,a:1};var c=((n=c||{}).MULTIPLAYER_GRAY="#667799",n.MULTIPLAYER_BLUE="#007BE5",n.MULTIPLAYER_PURPLE="#9747FF",n.MULTIPLAYER_PINK="#FF24BD",n.MULTIPLAYER_RED="#F24822",n.MULTIPLAYER_YELLOW="#FFCD29",n.MULTIPLAYER_GREEN="#14AE5C",n);let d="var(--color-textondarkcanvas, #ffffff)",u="var(--color-textonlightcanvas, #000000)",p="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",m="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",h={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function _(e,t){return{...e,a:t}}function g(e,t){if(!e)return null;if("string"!=typeof e)return e;let r=null!=t,n=t??1;return function(e,t=1){let r=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(r&&r.groups&&"red"in r.groups&&"green"in r.groups&&"blue"in r.groups){let{red:e,green:n,blue:i,alpha:a}=r.groups;return{r:parseFloat(e),g:parseFloat(n),b:parseFloat(i),a:a?parseFloat(a):t}}return null}(e,n)??T(e,n)??E(e,n)??f(e,r,n)??null}function f(e,t=!1,r=1){let n=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!n)return null;let i=n[1];if(i.length>=8&&t)return k(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),V(i.substring(6,8)));if(7===i.length&&t)return k(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),B(i[6]));if(i.length>=6)return k(V(i.substring(0,2)),V(i.substring(2,4)),V(i.substring(4,6)),r);if(5===i.length&&t)return k(B(i[0]),B(i[1]),B(i[2]),V(i.substring(3,5)));if(4===i.length&&t)return k(B(i[0]),B(i[1]),B(i[2]),B(i[3]));if(i.length>=3)return k(B(i[0]),B(i[1]),B(i[2]),r);if(2===i.length){let e=V(i);return k(e,e,e,r)}else if(1===i.length){let e=B(i);return k(e,e,e,r)}return null}function E(e,t=1){let r;return(r=X.exec(e=e.trim()))?k(H(r[1]),H(r[2]),H(r[3]),null==r[4]?t:K(r[4])):(r=J.exec(e))?k(G(r[1]),G(r[2]),G(r[3]),null==r[4]?t:K(r[4])):(r=Q.exec(e))?function(e,t,r,n){if(0===t)return k(r,r,r,n);let i=r<.5?r*(1+t):r+t-r*t,a=2*r-i,o=[0,0,0];for(let t=0;t<3;++t){let r=e+-(1/3*(t-1));r<0&&++r,r>1&&--r,6*r<1?o[t]=a+(i-a)*6*r:2*r<1?o[t]=i:3*r<2?o[t]=a+(i-a)*(2/3-r)*6:o[t]=a}return k(o[0],o[1],o[2],n)}(z(r[1]),H(r[2]),H(r[3]),null==r[4]?t:K(r[4])):(r=ee.exec(e))?function(e,t,r,n){let i=(100*e+16)/116,a=t/500+i,o=i-r/200,l=e=>{let t=e**3;return t>y?t:(e-16/116)/7.787};i=l(i),a=95.047*l(a)/100,o=108.883*l(o)/100;let s=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,c=s(3.2404542*a+-1.5371385*i+-.4985314*o),d=s(-.969266*a+1.8760108*i+.041556*o),u=s(.0556434*a+-.2040259*i+1.0572252*o);return k(Y(c),Y(d),Y(u),n)}(H(r[1]),parseFloat(r[2]),parseFloat(r[3]),null==r[4]?t:K(r[4])):(r=et.exec(e))?(0,o.z9)({l:W(r[1],.01),c:W(r[2],.004),h:z(r[3]),a:null==r[4]?t:K(r[4])}):(r=er.exec(e))?(0,o.$F)({l:W(r[1],.01),ax:W(r[2],.01),bx:parseFloat(r[3]),a:null==r[4]?t:K(r[4])}):null}let y=(6/29)**3;function v(e,t){let r=b(e),n=b(t);return I(r,n)/.002741735}let b=e=>{let t=1-(1-e.r/255)*e.a,r=1-(1-e.g/255)*e.a,n=1-(1-e.b/255)*e.a,i,a,o;return i=(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92))/.95047,a=(.2126*t+.7152*r+.0722*n)/1,o=(.0193*t+.1192*r+.9505*n)/1.08883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,{l:116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,a:500*(i-a),b:200*(a-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))}},I=(e,t)=>{let r=e.l-t.l,n=e.a-t.a,i=e.b-t.b,a=Math.sqrt(e.a*e.a+e.b*e.b),o=Math.sqrt(t.a*t.a+t.b*t.b),l=a-o,s=n*n+i*i-l*l;s=s<0?0:Math.sqrt(s);let c=r/1,d=l/(1+.045*a),u=s/(1+.015*a),p=c*c+d*d+u*u;return p<0?0:Math.sqrt(p)};function T(e,t=1){let r=h[e.toLowerCase()];return r?f(r,!1,t):null}function w(e){return{r:Z(e.r),g:Z(e.g),b:Z(e.b),a:Z(e.a)}}function S(e){let t=g(e);return!!t&&.627>U(t)}function C(e){if(!e)return!0;let t=g(e);return!t||(null==t?void 0:t.a)===0}function O(e){return S(e)?d:u}function A(e){return S(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function N(e,t,r){let n=g(e),i=g(t);if(!n||!i)return;let a=R(n,i),o=U(n),l=U(a);return r?"inset 0px 0px 0px 2px var(--color-bordertranslucent)":o<.2&&l<o+.1?p:o>.8&&.1>Math.abs(l-o)?m:void 0}function L(e,t){let r="dark"===t,n=g(e);if(!n||(null==n?void 0:n.a)===0)return!1;let i=U(n),a=function(e){let t=Math.max(e.r,e.g,e.b),r=Math.min(e.r,e.g,e.b),n=t-r;return t===r?0:(t+r)/2<=.5?n/(t+r):n/(2-t-r)}(n);return S(e)&&r?!(a>.5)||i<.427:!S(e)&&!r&&(!(a>.5)||i>.827)}function P(e=[]){function t(e){return null!=e}let r=e.map(e=>{if("SOLID"===e.type)return e.color;let r=(e.stops??[]).map(e=>e.color).filter(t);if(r.length)return R(...r)}).filter(t);return r.length?R(...r):void 0}function R(...e){return e.reduceRight((e,t)=>{let r=t.a,n=e.a,i=r*(1-n),a=i+n,o=i/a,l=n/a;return{r:t.r*o+e.r*l,g:t.g*o+e.g*l,b:t.b*o+e.b*l,a:a}})}function k(e,t,r,n=1){return isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)?null:{r:e,g:t,b:r,a:n}}function D({r:e,g:t,b:r,a:n}){return`rgba(${Math.round(255*e)}, ${Math.round(255*t)}, ${Math.round(255*r)}, ${n})`}function M({r:e,g:t,b:r,a:n}){let i=Math.min(Math.max(0,n),255),a=Math.min(Math.max(0,e),255).toString(16).padStart(2,"0"),o=Math.min(Math.max(0,t),255).toString(16).padStart(2,"0"),l=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),s=i.toString(16).padStart(2,"0"),c=255===i?`#${a}${o}${l}`:`#${a}${o}${l}${s}`;return c}function F(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function x(e,t){let r=[255*e.r,255*e.g,255*e.b],n=[255*t.r,255*t.g,255*t.b],a=(0,i.qq)((0,i.zH)(r),(0,i.zH)(n));if("number"!=typeof a||isNaN(a))throw Error(`APCAcontrast returned an invalid value: ${a}`);return a}function U(e){return .299*e.r+.587*e.g+.114*e.b}function B(e){return V(`${e}${e}`)}function V(e){return Z(parseInt(e,16))}function G(e){return Z(parseFloat(e))}function H(e){return Y(.01*parseFloat(e))}function W(e,t){return e.endsWith("%")?Y(parseFloat(e)*t):parseFloat(e)}function K(e){return e?e.includes("%")?H(e):Y(parseFloat(e)):1}function z(e){let t=parseFloat(e),r=0;return r=e.includes("grad")?.9*t:e.includes("rad")?180*t/Math.PI:e.includes("turn")?360*t:t,(r=(0,a.D5)(r,360))/360}function Z(e){return Y(e/255)}function Y(e){return(0,a.uZ)(e,0,1)}function j(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function $(e,t){let{r:r,g:n,b:i,a:o}=e,{r:l,g:s,b:c,a:d}=t;return(0,a.C7)(r,l)&&(0,a.C7)(n,s)&&(0,a.C7)(i,c)&&(0,a.C7)(o,d)}function q(e,t){return!!e&&!!t&&e.length===t.length&&e.every((e,r)=>$(e,t[r]))}let X=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,J=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Q=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,et=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,er=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},542881:(e,t,r)=>{r.d(t,{Bm:()=>u,VO:()=>d,dP:()=>R,iq:()=>p,nU:()=>c});var n=r(899063),i=r(183290),a=r(231690),o=r(614659),l=r(141757),s=r(767310);function c(e,t,r="IGNORE",n){if(!e||!(0,l.Hr)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(t<0||t>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",t),null;let i=E(e),a=I(i),o=T(i.hsluv_l,a);if(n){let{LESS_THAN:t,GREATER_THAN:r}=n;if(t&&100*o<t||r&&100*o>r)return e}return b(i,t/1e3,a,o),"IGNORE"!==r&&O(i,"BLACK"===r||"BLACK_AND_WHITE"===r,"WHITE"===r||"BLACK_AND_WHITE"===r),f(i)}function d(e){if(!e||!(0,l.Hr)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let t=E(e),r=I(t),n=T(t.hsluv_l,r);return Math.floor(100*n)}function u(e,t,r="IGNORE"){if(!e||!(0,l.Hr)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(t<-1||t>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",t),null;let n=E(e),i=I(n),a=n.hsluv_l,o=a;o=t>0?a+(100-a)*t:a*(1- -1*t);let s=T(a,i),c=T(o,i);return b(n,c/10,i,s),"IGNORE"!==r&&O(n,"BLACK"===r||"BLACK_AND_WHITE"===r,"WHITE"===r||"BLACK_AND_WHITE"===r),f(n)}function p(e,t,r){let i=(0,l.lu)(e),a=E(i);return O(a,t,r),(0,n.colorToHex)(f(a))}let m=["red","orange","yellow","green","blue","purple"],h={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},_={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},g={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},f=e=>(e.hsluvToRgb(),{r:(0,s.uZ)(e.rgb_r,0,1),g:(0,s.uZ)(e.rgb_g,0,1),b:(0,s.uZ)(e.rgb_b,0,1),a:1}),E=e=>{let t=new i.n;return t.rgb_r=e.r,t.rgb_g=e.g,t.rgb_b=e.b,t.rgbToHsluv(),t},y={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function v(e){let t=(0,l._g)(e,l.Cj);if(t<=w){let t=A(e);return t}let r=E(e),n=new i.n;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,f(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),L(n)}function b(e,t,r,n=5){t*=10;let i=h[r].a*n+h[r].b,a=i-e.hsluv_h;e.hsluv_h=h[r].a*t+h[r].b-a;let o=e.hsluv_s,l=_[r].a*n*n*n+_[r].b*n*n+_[r].c*n+_[r].d;e.hsluv_s=_[r].a*t*t*t+_[r].b*t*t+_[r].c*t+_[r].d,e.hsluv_s*=o/l,e.hsluv_l=g[r].a*t*t*t+g[r].b*t*t+g[r].c*t+g[r].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function I(e){let t={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},r=e.hsluv_l/100;e.hsluvToRgb(),m.forEach(n=>{let a=new i.n;a.rgb_r=o.Y[n].r,a.rgb_g=o.Y[n].g,a.rgb_b=o.Y[n].b,a.rgbToHsluv(),b(a,r,n,5),a.hsluvToRgb();let s=(0,l.wC)(f(e),f(a));t[n]=s/y[n]});let n="yellow",a=t[n];for(let e in t)t[e]<a&&(a=t[e],n=e);return e.rgbToHsluv(),n}function T(e,t){let r=(0,s.a8)(g[t].a,g[t].b,g[t].c,g[t].d-e),n=r.filter(e=>0<e&&e<10);return 1===n.length?n[0]:r.length>1?(r.sort(),r[Math.floor(r.length/2)]):e<50?11:-1}let w=10,S={BLACK:l.E5,WHITE:l.Cj},C=e=>{let{customColorHsluv:t,colorTypeForContrastCheck:r,isCustomColorForeground:n,contrastMinimum:i}=e,a=S[r],o=()=>n?Math.abs((0,l._g)(c,a)):Math.abs((0,l._g)(a,c)),s=a===l.E5?.1:-.1,c=f(t);for(;o()<i+.2;)t.hsluv_l+=s,c=f(t);t.rgbToHsluv()},O=(e,t,r)=>{let n;let i=f(e),a=Math.abs((0,l._g)(l.Cj,i)),o=Math.abs((0,l._g)(l.E5,i));if(t&&r)n=o>=a?"BLACK":"WHITE";else{if(!t&&!r)return;n=t?"BLACK":"WHITE"}("BLACK"!==n||!(o>=60))&&("WHITE"===n&&a>=60||C({customColorHsluv:e,contrastMinimum:60,colorTypeForContrastCheck:n,isCustomColorForeground:!1}))},A=e=>({r:(0,s.uZ)((e.r-1)/.55+1,0,1),g:(0,s.uZ)((e.g-1)/.55+1,0,1),b:(0,s.uZ)((e.b-1)/.55+1,0,1),a:1}),N=e=>{e.hsluvToRgb();let t=new i.n;return t.rgb_r=1-.55*(1-e.rgb_r),t.rgb_g=1-.55*(1-e.rgb_g),t.rgb_b=1-.55*(1-e.rgb_b),t.rgbToHsluv(),t},L=e=>{let t=N(e);return C({customColorHsluv:t,contrastMinimum:w,colorTypeForContrastCheck:"WHITE",isCustomColorForeground:!1}),A(f(t))};function P(e){let t=[],r=new Set;return e.forEach(e=>{let n=a.Co.format(e);r.has(n)||(r.add(n),t.push(e))}),t}function R(e){if(e)return{base:e,widget:e,baseLight:P(e.map(e=>u(e,.6,"BLACK_AND_WHITE")||l.E5)),sticky:P(e.map(e=>c(e,400,"BLACK",{LESS_THAN:400})||l.E5)),highlight:P(e.map(v))}}},969709:(e,t,r)=>{r.d(t,{At:()=>b,Cm:()=>I,Di:()=>f,HY:()=>g,Jf:()=>T,Nj:()=>O,OB:()=>m,RG:()=>w,Ru:()=>v,Ty:()=>A,hR:()=>E,lR:()=>C,nV:()=>y,wY:()=>S});var n,i=r(87608),a=r.n(i),o=r(642045),l=r(391320),s=r(217810),c=r(635723),d=r(523495),u=r(518484),p=r(598643);let m=5,h=(e,t)=>{var r;if((0,s.Rw)(e.styles)&&(0,s.Rw)(t.styles))return!0;if((0,s.Rw)(e.styles)!==(0,s.Rw)(e.styles))return!1;let n=null==(r=e.styles)?void 0:r.filter(e=>{var r;return!(null==(r=t.styles)?void 0:r.includes(e))});return(null==n?void 0:n.length)===0},_=(e,t)=>!!((0,s.Rw)(e.user_annotated)&&(0,s.Rw)(t.user_annotated))||(0,s.Rw)(e.user_annotated)===(0,s.Rw)(e.user_annotated)&&(0,l.qt)(e.user_annotated,t.user_annotated),g=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.t!==i.t||n.user_id!==i.user_id)return!1;if(!_(n,i))return!1;if(n.profile_id!==i.profile_id)return!1;else if(n.link!==i.link)return!1;else if(!h(n,i))return!1;else if(!g(n.children??[],i.children??[]))return!1}return!0};var f=((n=f||{}).EDITOR_MENTION="editor_mention",n.COMMUNITY_MENTION="community_mention",n.PLAIN_TEXT="plain_text",n.EMOJI="emoji",n.NONE="none",n);let E=e=>2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,o.tt)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none",y=(e=[],t)=>{if(!e)return"";let r=e.reduce((e,t)=>{var r,n,i;let a=t.t||"";return t.user_annotated?a=t.user_annotated.handle:t.profile_id||null===t.profile_id?a="@"+t.t:(null==(r=t.children)?void 0:r.length)&&(null==(n=t.styles)?void 0:n.length)?t.children.forEach((r,n)=>{(e||a)&&(a+="\n"),a+=(t.styles.includes("ol")?`${n+1}. `:"* ")+y(r.children)}):(null==(i=t.styles)?void 0:i.length)&&t.styles.includes("s")&&(a=""),e+a},"");return(null==t?void 0:t.includeTrailingWhitespace)||(r=r.replace(/\s+$/g,"")),(0,c.A)(r)||""},v=(e=[])=>{if(!e)return"";let t=e.reduce((e,t)=>{var r;let n=t.t||"",i=t.styles||[];if(t.user_annotated)n=t.user_annotated.handle,i=["lightbold"];else if(t.profile_id||null===t.profile_id)n="@"+t.t,i=["lightbold"];else if(null==(r=t.children)?void 0:r.length)t.children.forEach((t,r)=>{(e||n)&&(n+="\n"),n+=(i.includes("ol")?`${r+1}. `:"* ")+v(t.children)});else{let e=(0,o.mB)(n);n=e.map(e=>"string"==typeof e?(0,d.s2)(e):`<span class="${p.VH}">${e.props["data-text"]}</span>`).join("\n"),t.link&&(i=["lightbold"])}let l=[];return i.forEach(e=>{"b"===e?l.push(p.rJ):"lightbold"===e?l.push(p.wG):"i"===e?l.push(p.p):"s"===e&&l.push(p.Cd)}),l.length&&(n=`<span class='${a()(...l)}'>`+n+"</span>"),e+n},"");return(0,c.A)(t)||""},b=(e=[],t=!0)=>{var r;let n=Array.isArray(e)?e:[{t:e}],i=n.map(e=>{var t;let r={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(e.user_annotated&&e.user_id)return{...r,userId:e.user_id,user:{...e.user_annotated,name:e.user_annotated.name??null,imgUrl:e.user_annotated.img_url}};if(e.profile_id||null===e.profile_id)return{...r,t:"@"+e.t,styles:["lightbold"]};let n={...r,t:e.t||r.t,styles:e.styles||r.styles,link:e.link||r.link};return(null==(t=e.children)?void 0:t.length)&&(n.children=e.children.map(e=>({...r,children:b(e.children,!1)}))),n});if(t&&i.length){let e=i[i.length-1];e.t=(null==(r=e.t)?void 0:r.replace(/\s+$/g,""))??null}return i},I=e=>0===e.length||/^\s*$/.test(y(e)),T=e=>I(e)||y(e).length<=5,w=e=>y(e).length>=17500;function S(e){if(!Array.isArray(e))return[];let t=function e(t){let r=[];return t.forEach(t=>{var n;(null==(n=t.user_id)?void 0:n.includes("invite-"))?t.t&&r.push(t.t):t.children&&r.push(...e(t.children))}),r}(e);return!function e(t){return t.forEach(t=>{var r;(null==(r=t.user_id)?void 0:r.includes("invite-"))?delete t.user_id:t.children&&e(t.children)}),t}(e),t}function C(e){var t;return e.length>0&&(e[e.length-1].t=null==(t=e[e.length-1].t)?void 0:t.trimEnd()),e}function O(e,t){let r=Math.min(Math.max(e.x,t.x),t.x+t.width),n=Math.min(Math.max(e.y,t.y),t.y+t.height);return new u.OW(r,n)}function A(e){return e.includes("-")}},50029:(e,t,r)=>{r.d(t,{Jc:()=>c,Lh:()=>m,f8:()=>_,tH:()=>p});var n=r(961215),i=r(465268),a=r(716250),o=r(873349),l=r(122342);let s="customKeyboardShortcuts",c=new Map(Object.entries(n.JTH).map(([e,t])=>[e,t])),d=new Map(Object.entries(n.JTH).map(([e,t])=>[t,e]));function u(e,t,r){let n=d.get(t),i=Object.entries(e).find(([e,t])=>t.type===n&&t.action===r);return null==i?void 0:i[0]}function p(e,t,r){var c,p;if(!(0,a.BZ)().ce_custom_keyboard_shortcuts)return;let m=h(),_=o.m5.get((0,o.tp)())||"UNKNOWN",g=i.x.isApple()?"mac":"!mac",f=d.get(e),E=(null==(c=m[_])?void 0:c[g])??{},y=u(E,e,t);y&&delete E[y],m[_]={...m[_],[g]:{...E,[r]:{type:f,action:t}}},console.log("[CustomKeyboardShortcuts] saving shortcuts to local storage",{typeString:f,action:t,shortcutStr:r,shortcuts:m}),null==(p=l.D5)||p.setItem(s,JSON.stringify(m)),n.iTB.reloadKeyboardShortcuts()}function m(e,t){var r,c;if(!(0,a.BZ)().ce_custom_keyboard_shortcuts)return;let p=h(),m=o.m5.get((0,o.tp)())||"UNKNOWN",_=i.x.isApple()?"mac":"!mac",g=d.get(e),f=(null==(r=p[m])?void 0:r[_])??{},E=u(f,e,t);if(E)delete f[E];else{console.error("[CustomKeyboardShortcuts] could not find existing shortcut",{typeString:g,action:t,shortcuts:p});return}p[m]={...p[m],[_]:{...f}},null==(c=l.D5)||c.setItem(s,JSON.stringify(p)),n.iTB.reloadKeyboardShortcuts()}function h(){let e;if(!l.D5)return{};let t=l.D5.getItem(s);if(!t)return{};try{e=JSON.parse(t)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}function _(){var e;let t=o.m5.get((0,o.tp)())||"UNKNOWN",r=i.x.isApple()?"mac":"!mac",n=h()??{};return(null==(e=n[t])?void 0:e[r])??{}}},439252:(e,t,r)=>{r.d(t,{zn:()=>P,e3:()=>L,AA:()=>R,w4:()=>D,Y8:()=>k});var n=r(652983),i=r(407908),a=r(950663),o=r.n(a),l=r(538265),s=r.n(l),c=r(269658),d=r(669277),u=r(870077),p=r(925705),m=r(721154),h=r(266377),_=r(133419),g=r(326394),f=r(614261),E=r(448694),y=r(862610),v=r(795153),b=r(514438),I=r(716250),T=r(198348),w=r(606536);let S=new class{constructor(){this.RecentPrototypesSchemaValidator=(0,T._p)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:e.ignore(),recent_prototype_repos:e.ignore(),org_drafts_owners:e.array(w.Nz)}),"xrv:org_user")}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:t})=>{var r;let n=await t.get("/api/recent_prototypes",T.yA.toAPIParameters({...e,fuid:null==(r=(0,I.ZP)().user_data)?void 0:r.id}));return n})}};var C=r(817028),O=r(65961),A=r(54548);let N=v.t1.Query({fetch:async e=>{let t=(await b.L.getRecentFiles({orgId:e||void 0,isGlobal:!0})).data.meta,r=t.recent_repos.map(e=>e.files).reduce((e,t)=>e.concat(t),[]);return c.V.dispatch(m.qV({files:t.recent_files.concat(r),subscribeToRealtime:!1})),c.V.dispatch(f.ID({recent_repos:t.recent_repos})),c.V.dispatch(_.R0({orgDraftsOwners:t.org_drafts_owners})),c.V.dispatch(h.CL({folderId:`recents-${e||"no-org"}`,state:"loaded"})),t},schema:b.u,sync:(e,{realtimeClient:t,mutate:r})=>t.subscribe("recent_file",(e,t)=>{r(r=>{"post"===t||"put"===t?(s()(r.recent_files,t=>t.key===e.key),r.recent_files.unshift(e)):"delete"===t&&s()(r.recent_files,t=>t.key===e.key)})}),output:({data:e})=>({...e,recent_files:e.recent_files.filter(e=>!e.trashed_at&&!e.file_repo_id)}),key:"recentFiles"}),L=v.t1.Mutation(async(e,{query:t,xr:r})=>{t.mutate(N(e.orgId),t=>{let[r,n]=o()(t.recent_files,t=>e.removeKeys.includes(t.key));(0,E.V7)("File RecentFiles Removed",r),t.recent_files=n}),await r.del("/api/files_batch/view",{file_keys:e.removeKeys})}),P=v.t1.Mutation((e,{query:t})=>{let{orgId:r,newFile:n}=e;t.mutate(N(r),e=>{let t=e.recent_files,r=t.findIndex(e=>e.key===n.key);-1!==r&&e.recent_files.splice(r,1),e.recent_files.unshift(n)})});function R(e,t,r,i){var a;let[o]=(0,u.aM)(N(e),{revalidateOnMount:r}),l=n.useMemo(()=>o.transform(e=>e.recent_files),[o]),s=(0,A.e)(l),c=i?(0,O.zER)(l,t):s,{trackPerformanceEvent:d}=(0,C.z)("recent_files_fetch_performance","legacy");return((0,n.useEffect)(()=>{d("fetch_end")},[d,null==(a=c.data)?void 0:a.length]),(0,n.useEffect)(()=>{c.status===p.Gq.ERRORS&&d("fetch_error",{errors:JSON.stringify(c.errors??{})})},[d,c.status,c.errors]),(0,n.useEffect)(()=>(d("fetch_start"),()=>{d("fetch_cancel")}),[d]),c.status===p.Gq.LOADING||c.status===p.Gq.DISABLED)?p.IE.loading():c.status===p.Gq.ERRORS?p.IE.error(c.errors):c}let k=function(e,t){let r=(0,i.I0)();n.useEffect(()=>(function(e,t){S.getRecentPrototypes({orgId:t||void 0,isGlobal:!0,includeRepo:!0}).then(({data:t})=>{e(g.hP());let{recent_prototypes:r,recent_prototype_repos:n,org_drafts_owners:i}=t.meta;for(let t of r)e(g.qk({prototype:t}));e(_.R0({orgDraftsOwners:i})),e(f.qV({repos:n}))}).catch(e=>{})})(r,e),[r,e]);let a=(0,i.v9)(e=>e.recentPrototypes);return{status:"loaded",data:a,errors:[]}};function D(e,t,r){var i,a;let o=(0,d.mU)(y.GlobalRecentFilesView,{},{enabled:r}),l=function(e){var t,r,n,i,a,o,l,s,c,d,u,p,m;if(!e)return[];let h=[];for(let _ of e){let e=_.file;if(e&&!e.trashedAt&&!e.deletedAt){let g=M(e.org),f=M(e.project),E={accessed_at:_.actionAt.toISOString(),branch_checkpoint_id:e.branchCheckpointId,can_access_full_dev_mode:!!M(e.canAccessFullDevMode),can_delete:!!M(e.canDelete),can_edit:!!M(e.canEdit),can_edit_canvas:!!M(e.canEditCanvas),can_favorite:!!M(e.canFavorite),can_manage:!!M(e.canManage),can_rename:!!M(e.canRename),can_view:!!M(e.canView),checkpoint_client_meta:e.clientMeta,checkpoint_id:M(e.checkpointId)||void 0,checkpoint_key:M(e.checkpointKey),client_meta:e.clientMeta,created_at:e.createdAt.toISOString(),creator_id:e.creatorId,deleted_at:null,description:e.description,edit_url:e.editUrl,editor_type:e.editorType,edu_grace_period:null,file_repo_id:e.fileRepoId,folder:f?{id:f.id,name:f.name,org_id:f.orgId,is_invite_only:f.isInviteOnly,is_view_only:f.isViewOnly,team_id:f.teamId,description:f.description,deleted_at:null==(t=f.deletedAt)?void 0:t.toISOString(),path:f.path,created_at:null==(r=f.createdAt)?void 0:r.toISOString(),team_access:f.teamAccess,scheme:f.scheme,sharing_audience_control:f.sharingAudienceControl,updated_at:null==(n=f.updatedAt)?void 0:n.toISOString(),view_only_at:null==(i=M(null==f?void 0:f.viewOnlyAt))?void 0:i.toISOString()}:null,folder_access_enabled:M(e.folderAccessEnabled),folder_id:e.folderId,handoff_url:e.handoffUrl,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,id:M(e._id),is_new_user_playground_library:"variant"===M(null==(a=e.trackTags)?void 0:a.defaultLibraryFileTreatmentId)||void 0,is_favorited:e.isFavorited,is_team_template:e.isTeamTemplate,is_template:!!(null==(o=e.trackTags)?void 0:o.isTemplate),is_try_file:e.isTryFile,key:e.key,last_published_at:e.lastPublishedAt||null,license:e.license,link_access:e.linkAccess,name:e.name,org_audience:!!e.orgAudience,parent_org:g?{id:g.id,name:g.name,imgUrl:g.imgUrl}:null,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,prototype_url:e.prototypeUrl,resource_type:"file",scheme:e.scheme,source_checkpoint_id:e.sourceCheckpointId,source_file_key:e.sourceFileKey,starter_library_src_file_key:(null==(l=e.trackTags)?void 0:l.starterLibrarySrcFileKey)||void 0,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,touched_at:e.touchedAt,track_tags:e.trackTags?{is_template:(null==(s=e.trackTags)?void 0:s.isTemplate)||null,source:M(null==(c=e.trackTags)?void 0:c.source),starter_library_src_file_key:(null==(d=e.trackTags)?void 0:d.starterLibrarySrcFileKey)||null,figma_basics_experiment:(null==(u=e.trackTags)?void 0:u.figmaBasicsExperiment)||null,default_library_file_treatment_id:M(null==(p=e.trackTags)?void 0:p.defaultLibraryFileTreatmentId)}:null,trashed_at:null,trashed_user_id:e.trashedUserId,updated_at:null==(m=e.updatedAt)?void 0:m.toISOString(),url:e.url,viewer_export_restricted:e.viewerExportRestricted};h.push(E)}}return h}(null==(a=null==(i=o.data)?void 0:i.currentUser)?void 0:a.recentFiles),{trackPerformanceEvent:s}=(0,C.z)("recent_files_fetch_performance","livegraph");return((0,n.useEffect)(()=>{r&&s("fetch_end")},[r,s,l.length]),(0,n.useEffect)(()=>{o.status===p.Gq.ERRORS&&r&&s("fetch_error",{errors:JSON.stringify(o.errors??{})})},[r,s,o.status,o.errors]),(0,n.useEffect)(()=>(r&&s("fetch_start"),()=>{r&&s("fetch_cancel")}),[r,s]),o.status===p.Gq.LOADING||o.status===p.Gq.DISABLED)?p.IE.loading():o.status===p.Gq.ERRORS?p.IE.error(o.errors):p.IE.loaded(l)}function M(e){return(null==e?void 0:e.status)==="loaded"?e.data:null}},736521:(e,t,r)=>{r.d(t,{A9:()=>f,Ao:()=>h,GZ:()=>g,oG:()=>_});var n,i=r(652983),a=r(9247),o=r(870077),l=r(31642),s=r(970740),c=r(133660),d=r(761767),u=r(795153),p=r(710298),m=r(163853);(n||(n={})).orgBillingDataQuery=u.t1.Query({fetch:async e=>(await m.uU.getBillingData({orgId:e})).data.meta,enabled:e=>!!e});let h=u.t1.Mutation(async(e,{query:t})=>{let{orgId:r,billingContacts:i}=e,a=await l.ZP.put(`/api/orgs/${r}/billing_data`,{admin_email:i});t.mutate(n.orgBillingDataQuery(r),e=>{e&&(e.admin_email=a.data.meta.admin_email)})}),_=u.t1.Mutation(async(e,{query:t})=>{let r=await l.ZP.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}),i=n.orgBillingDataQuery(e.orgId);return t.mutate(i,e=>{e&&(e.invoices=r.data.meta.invoices)}),await t.refetch(i),r.data.meta});function g(e){let[t,{refetch:r}]=(0,o.aM)(n.orgBillingDataQuery(e));return r}function f(e){let t=(0,c.V_)(),r=!!(t&&t.permission===d.Gu.ADMIN),[l,u]=(0,o.aM)(n.orgBillingDataQuery(e));(0,p.J)(l,(0,s.t)("org_billing_error_default"));let m=(0,a.D)(e),h=i.useMemo(()=>m!==e&&!!m,[e,m]),_=(0,a.D)(r),g=i.useMemo(()=>!1===_&&r&&l.data&&0===Object.keys(l.data).length,[r,l.data,_]),f=i.useMemo(()=>g||h,[g,h]);return(0,i.useEffect)(()=>{"loading"!==l.status&&f&&u.refetch()},[u,f,l.status]),l}},65961:(e,t,r)=>{r.d(t,{Plq:()=>Permissions,zER:()=>c});var n=r(652983),i=r(407908),a=r(200344),o=r(925705),l=r(496478),s=r(733609);let Permissions={CAN_VIEW_PROTOTYPE:a.rM$.CAN_VIEW_PROTOTYPE,CAN_PUBLISH_TO_COMMUNITY:"community:canPublish",CAN_EDIT:a.rM$.CAN_EDIT};function c(e,t){let r=Array.isArray(t)?t:[t],a="loaded"===e.status,c=function(e,t=!1){let r=(0,s.usePermissionsState)(),a=(0,i.v9)(e=>e.authedProfilesById),c=(0,i.v9)(e=>e.figFileDuplicatedFromHubFile);return n.useMemo(()=>{if(!t)return e;let n=e.data||[],i={...r,authedProfilesById:a,figFileDuplicatedFromHubFile:c};return o.IE.loaded(n.filter(e=>(0,l.zY)(e,i,null)))},[a,t,e,r,c])}(e,a&&(null==r?void 0:r.some(e=>e===Permissions.CAN_PUBLISH_TO_COMMUNITY)));return function(e,t=!1){let r=(0,s.usePermissionsState)();return n.useMemo(()=>{if(!t)return e;let n=e.data||[];return o.IE.loaded(n.filter(e=>(0,s.canEditFile)(e.key,r)))},[t,e,r])}(c=function(e,t=!1){let r=(0,s.usePermissionsState)();return n.useMemo(()=>{if(!t)return e;let n=e.data||[];return o.IE.loaded(n.filter(e=>e.link_access&&(0,s.canViewFileMetadata)(e.key,r,!1)||(0,s.canViewFileMetadata)(e.key,r,!0)))},[t,e,r])}(c,a&&(null==r?void 0:r.some(e=>e===Permissions.CAN_VIEW_PROTOTYPE))),a&&(null==r?void 0:r.some(e=>e===Permissions.CAN_EDIT)))}},54548:(e,t,r)=>{r.d(t,{$:()=>_,e:()=>h});var n=r(652983),i=r(407908),a=r(200344),o=r(669277),l=r(925705),s=r(761767),c=r(862610),d=r(733609),u=r(420727),p=r(233327),m=r(406547);function h(e,t=!0){let r=(0,n.useMemo)(()=>{var t;return(null==(t=e.data)?void 0:t.map(e=>({key:e.key})))??[]},[e]),i=(0,o.YW)(c.FileCanView,r,{enabled:r.length>0});return function(e,t,r=!0){if("loaded"!==e.status)return e;let n={},i=!1,a=null;return(t.forEach(e=>{var t;if("loading"===e.result.status||"disabled"===e.result.status){i=!0;return}if("errors"===e.result.status){a=e.result.errors;return}n[e.args.key]=(null==(t=e.result.data.file)?void 0:t.hasPermission)??!1}),null!=a)?r?e:l.IE.error(a):i?r?e:l.IE.loading():l.IE.loaded(e.data.filter(e=>n[e.key]))}(e,i,t)}function _(e){let t=(0,d.usePermissionsState)(),r=(0,i.I0)(),l=(0,m.tT)(),h=null;return(0,u.bo)()&&(h=(0,o.mU)(c.FileCanView,{key:e})),(0,n.useMemo)(()=>{let n=(0,d.canViewFile)(e,t),i=(0,m.Fs)(s._g.FILE,e,a.rM$.CAN_VIEW,t,r,l,n);if((0,u.bo)()&&null!==h){var c;let t="loaded"===(c=h).status?{status:"loaded",data:{result:!!c.data.file.canView},errors:c.errors}:c;return"loaded"===t.status&&(0,p.G)(e,a.rM$.CAN_VIEW,null,i,t.data.result,[],null,r,l,n),t}return(0,o.wl)({result:(0,u.H0)()&&null!==i?i:n})},[e,t,r,l,h])}},508964:(e,t,r)=>{r.d(t,{$g:()=>p,CB:()=>o,Hz:()=>d,NV:()=>s,XB:()=>c,dt:()=>u});var n=r(652983),i=r(669277),a=r(862610);let o=e=>{var t,r;let n=e.canEdit,i=e.canEdit,a=e.canRename,o=e.canManage,l=!!(null==(t=e.project)?void 0:t.canView),s=!!(null==(r=e.project)?void 0:r.canEdit),c=e.canDelete&&!e.isTrashed,d=e.canEdit||e.viewerExportRestricted,u=e.canEdit&&e.isTrashed,p=e.canFavorite,m=e.isFavorited,h=e.canDelete&&e.isTrashed||!e.folderId&&e.canEdit,_=e.isTeamTemplate;return{canEdit:n,canRename:a,canMove:o,canShowInProject:l,canPin:s,canDelete:c,canDuplicate:d,canRestore:u,canFavorite:p,isFavorited:m,canDeleteForever:h,canUseInNewFile:_,canRestoreFromVersion:i}},l=e=>(t,r)=>{if(!r)return[];let n=t.filter(t=>{let n=r[t];return!!(null==n?void 0:n[e])});return n},s=l("canDelete"),c=l("canDuplicate"),d=l("canRestore"),u=l("canDeleteForever"),p=e=>{let t=(0,n.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),r=(0,i.YW)(a.FileTilePermissions,t,{enabled:t.length>0}),l=!0,s=null,c={};return r.forEach(e=>{var t;if("loaded"!==e.result.status&&(l=!1),"errors"===e.result.status){s=e.result.errors;return}let r=null==(t=e.result.data)?void 0:t.file;if(!r)return;let n=e.args.fileKey;c[n]=o(r)}),{isLoaded:l,error:s,permsByFileKey:c}}},334001:(e,t,r)=>{r.d(t,{B3:()=>s,EV:()=>d,U8:()=>u,ZO:()=>p,au:()=>o,gE:()=>c});var n=r(652983),i=r(669277),a=r(862610);let o=e=>{var t,r;let n=e.canEdit,i=e.canEdit,a=!!(null==(t=e.project)?void 0:t.canView),o=e.canEdit&&!e.isTrashed,l=e.canEdit&&e.isTrashed,s=e.canEdit&&e.isTrashed,c=!!(null==(r=e.sourceFile)?void 0:r.isFavorited),d=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,u=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,p=!!e.project&&e.canEdit;return{canDelete:o,canRename:n,canShowInProject:a,isFavorited:c,canRestore:s,canForeverDelete:l,canFavorite:d,canUnfavorite:u,isMainBranch:t=>{var r;return t===(null==(r=e.sourceFile)?void 0:r.key)},canMove:i,canEditBranch:t=>{var r,n;return!!(null==(n=null==(r=e.branches)?void 0:r.find(e=>e.key===t))?void 0:n.canEdit)},canPin:p}},l=e=>(t,r)=>{if(!r)return[];let n=t.filter(t=>{let n=r[t];return!!(null==n?void 0:n[e])});return n},s=l("canDelete"),c=l("canRestore"),d=l("canForeverDelete"),u=(e,t,r)=>r?e.filter(e=>{let n=t[e],i=r[e];return null==i?void 0:i.isMainBranch(n)}):[],p=e=>{let t=(0,n.useMemo)(()=>e.map(e=>({repoId:e})),[e]),r=(0,i.YW)(a.RepoTilePermissions,t,{enabled:t.length>0}),l=!0,s=null,c={};return r.forEach(e=>{var t;if("loaded"!==e.result.status&&(l=!1),"errors"===e.result.status){s=e.result.errors;return}let r=null==(t=e.result.data)?void 0:t.repo;if(!r)return;let n=e.args.repoId;c[n]=o(r)}),{isLoaded:l,error:s,permsByRepoId:c}}},768358:(e,t,r)=>{function n(e,t=200,r=!1){let n=0,i=null,a=function(){if(clearTimeout(n),n=0,!i)return;let t=i;i=null,e.apply(void 0,t)},o=function(...o){r&&!n?(r=!1,e.apply(void 0,o),r=!0):i=o,clearTimeout(n),n=setTimeout(a,t)};return o.cancel=()=>{clearTimeout(n),i=null,n=0},o.flush=a,o}function i(e){let t=!1,r=null,n=function(){if(t=!1,!r)return;let n=r;r=null,e.apply(void 0,n)},i=function(...e){r=e,t||(t=!0,queueMicrotask(n))};return i.cancel=()=>{t=!1,r=null},i.flush=n,i}r.d(t,{D:()=>n,P:()=>i})},239299:(e,t,r)=>{r.d(t,{A4:()=>u,Gu:()=>c,P:()=>h,VF:()=>p,YO:()=>s,ih:()=>n.ih,p5:()=>d,wC:()=>m});var n=r(870065),i=r(540157),a=r(571529),o=r(286206),l=r(834657);let s=(0,n.sY)(),c=window.bellFeedAPI?window.bellFeedAPI:null;function d(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}function u(){let e=!!window.__figmaContent;return!!(e||s&&(96>s.getVersion()||!window.trustedTypes))}function p(){if(s&&a.ZP.mac){let[e,t]=`${a.ZP.osversion}`.split(".");return 10>+e||10==+e&&12>+t}return!1}function m(e){e?document.body.classList.add(l.LT):document.body.classList.remove(l.LT)}function h(){return!!s}s&&((0,i.r)({browser_name:"Figma Desktop",desktop_channel:s.beta?"beta":"stable",desktop_version:s.getInformationalVersion(),desktop_client_id:s.getClientID()}),(0,o.$p)("browser",{name:"Desktop",version:s.getInformationalVersion()})),delete window.__figmaDesktop},808556:(e,t,r)=>{function n(e,t){return null!=e&&"function"==typeof e.closest&&null!=e.closest(`[${t}]`)}function i(e,t,r){let n=e;for(;n;){let e=r(n);if(e)return n;if(n===t)break;n=n.parentElement}return null}function a(e){for(;;){var t;if(null==e)return null;if(null!=(t=e)&&t instanceof HTMLElement)return e;if(!("parentNode"in e))return null;e=e.parentNode}}function o(e){return!!e&&!!(d(e)||s(e)||p(e)||e.isContentEditable||e.hasAttribute("tabindex"))}function l(e){return!!e&&"INPUT"===e.tagName}function s(e){return!!e&&!!("A"===e.tagName&&e.hasAttribute("href"))}function c(e){return"button"===e.type||"submit"===e.type}function d(e){return!!e&&!!("BUTTON"===e.tagName||l(e)&&c(e))}function u(e){return s(e)||!!e&&!!(d(e)||function(e,...t){let r=e.getAttribute("role");return null!==r&&t.includes(r)}(e,"button"))}function p(e){return!!e&&(!!l(e)&&!c(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName)}r.d(t,{O_:()=>a,PY:()=>i,Qu:()=>o,iM:()=>p,r:()=>n,r2:()=>u})},220518:(e,t,r)=>{r.d(t,{$Z:()=>u,B:()=>l,Gd:()=>p,JE:()=>g,Jh:()=>o,Jo:()=>f,Rn:()=>m,_E:()=>h,aG:()=>_});var n=r(716250),i=r(788274),a=r(370952);function o(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let t=[],r=e.split(/[;,\n]/g);for(let e of r){let r=e.match(/^.*<(.*)>$/);r&&(e=r[1]),(e=e.trim())&&t.push(e)}return t}let s=a.z,c={};s.forEach(e=>c[e]=!0);let d=["ge.com"];function u(e){if(e in c||d.includes(e))return null;for(let t of s)if(1===(0,i.Z)(e,t))return t;return null}function p(e){return e.toLowerCase().split("@")[1]||null}function m(e){return!!e&&e.endsWith((0,n.Gm)().figma_email_suffix)}function h(e){let t=p(e);return!!t&&t in c}function _(e){let t=e.meta?e.meta.email_domain_type:void 0;return"work"===t}function g(e){return!!e&&o(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function f(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}},556979:(e,t,r)=>{r.d(t,{BJ:()=>m,F5:()=>h,K7:()=>d,Xr:()=>c,w1:()=>p});var n=r(261104),i=r(716250),a=r(199184);let o=new Set(["airtable.com","asana.com","calendly.com","chorus.ai","coda.io","codepen.io","docs.google.com","drive.google.com","paper.dropbox.com","figma.com","framer.com","github.com","gmail.com","atlassian.com","loom.com","lottiefiles.com","lucidchart.com","maze.co","office.com","miro.com","mode.com","mural.co","notion.so","quip.com","rollbar.com","sentry.io","slab.com","slideshare.net","surveymonkey.com","tableau.com","trello.com","typeform.com","usertesting.com","whimsical.com","behance.net","dribbble.com","facebook.com","google.com","maps.google.com ","instagram.com","linkedin.com","medium.com","pinterest.com","soundcloud.com","spotify.com","open.spotify.com","tiktok.com","twitter.com","vimeo.com","youtu.be","youtube.com"]),l=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function c(e){let t=new URL(e).hostname;return 0===t.indexOf("www.")&&(t=t.slice(4)),t}let d=e=>{if(!(0,i.BZ)().figjam_embeds_allowlist)return!0;try{let t=c(e);return o.has(t)}catch(e){return console.error("Invalid URL in embed"),!1}},u=e=>{if(!e.startsWith("<iframe"))return"";let t=n.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),r=l.exec(t);return r&&r.length>1?r[1]:""},p=e=>{let t=u(e),r=t||e,n=r.startsWith("http://")||r.startsWith("https://")?r:`https://${r}`,i=s.test(n);return i?{isFromIFrame:!!t,url:n}:null},m=(e,t,r)=>{let n=t.trim(),i=p(n);return i?(e(a.n1({clipboardText:t,url:i.url,isTextIframe:i.isFromIFrame,entrypoint:r})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}};function h(e="",t){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let r=n.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}),i=r.split("<a"),a=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of i){let t=e.match(a);t&&t[1]&&o.push({url:t[1],isFromIFrame:!1})}return o.length!==t.split("\n").length?null:o}},961074:(e,t,r)=>{r.d(t,{F:()=>i,J:()=>n});class n{constructor(){this.type="Entity",this.id=Math.random().toString(),this.position={x:0,y:0},this.rotation=0,this.scale=1,this.age=0,this.lifetime=1,this.sortOrder=0,this.customData={}}update(e){return this.age+=e,this.age<=this.lifetime}}class i{constructor(){this._entities=[],this._entitiesToAdd=[],this.lastUpdateTime=0,this.addEntity=e=>{this._entitiesToAdd.push(e)}}getDeltaTime(){let e=performance.now(),t=e-this.lastUpdateTime;return this.lastUpdateTime=e,t/1e3}update(e){let t="number"==typeof e?e:this.getDeltaTime();this._entities=this._entities.filter(e=>e.update(t)),this._entitiesToAdd.length&&(this._entities=this._entities.concat(this._entitiesToAdd).sort((e,t)=>e.sortOrder-t.sortOrder),this._entitiesToAdd=[])}getEntities(){return this._entities}}},728148:(e,t,r)=>{r.d(t,{Vo:()=>a,hp:()=>i,pc:()=>o});var n=r(961074);class i extends n.J{constructor(){super(),this.type="Particle",this.velocity={x:0,y:0},this.kick={x:0,y:0},this.kickDecay=1,this.gravity={x:0,y:0}}static fastVectorAddScaled(e,t,r){e.x+=t.x*r,e.y+=t.y*r}update(e){return i.fastVectorAddScaled(this.position,this.velocity,e),i.fastVectorAddScaled(this.position,this.kick,e),i.fastVectorAddScaled(this.kick,this.kick,Math.pow(this.kickDecay,e/.016)-1),i.fastVectorAddScaled(this.velocity,this.gravity,e),super.update(e)}}class a extends n.J{constructor(){super(...arguments),this.emissionProfile=()=>1,this.emitParticle=()=>{},this.alreadyEmitted=0}update(e){for(;this.alreadyEmitted<this.emissionProfile(this.age);)this.emitParticle(),this.alreadyEmitted++;return super.update(e)}}class o extends n.F{constructor(){super(...arguments),this.MAX_PARTICLES=512,this.addParticle=e=>{this.getParticles().length<this.MAX_PARTICLES&&this.addEntity(e)}}getParticles(){return this.getEntities().filter(e=>e instanceof i)}}},697016:(e,t,r)=>{r.d(t,{Ac:()=>c,Ly:()=>d,Qh:()=>i,Tg:()=>a,Yo:()=>s,iX:()=>m,lm:()=>u,uN:()=>p,y:()=>o,yN:()=>l});var n=r(600486);let i="sidebar favorited row",a=(e,t,r,i,a,o)=>{(0,n.L9)("resource_removed_from_favorites",{resource_id:e,selectedView:t,entrypoint:r,resource_type:i,editor_type:a,fileBrowserUnfavorite:o})},o=(e,t,r,i,a,o)=>{(0,n.L9)("resource_added_to_favorites",{resourceId:e,editor_type:a,selectedView:t,resource_type:i,entrypoint:r,fileBrowserFavorite:o})},l=(e,t,r,i,a)=>{(0,n.L9)("favorited_resource_clicked",{resource_id:e,resource_type:t,editor_type:a,section_id:r,entrypoint:i})},s=e=>{(0,n.L9)("sidebar_section_collapsed",{is_collapse:e,section:"favorites"})},c=()=>{(0,n.L9)("favorites_reordered",{})},d=e=>{(0,n.L9)("favorites_context_menu_action_clicked",{action:e})},u=(e,t)=>{(0,n.L9)("File Browser Sidebar Custom Section Created",{new_custom_section_name:t,new_custom_section_id:e})},p=e=>{(0,n.L9)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})},m=(e,t)=>{(0,n.L9)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:t,new_custom_section_id:e})}},303190:(e,t,r)=>{r.d(t,{q:()=>n});let n=(e,t)=>{let r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t+".txt"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},346887:(e,t,r)=>{r.d(t,{E4:()=>N,Io:()=>L,OS:()=>R,Um:()=>O,YW:()=>S,bp:()=>A,cW:()=>w,xx:()=>b,yg:()=>I});var n,i,a=r(600486),o=r(764150),l=r(448501),s=r(122342),c=r(31642),d=r(36940),u=r(161719),p=r(869949),m=r(818110),h=r(313653),_=r(970740),g=r(721127),f=r(220518),E=r(716250),y=r(286206);let v="google_sso_temp";var b=((n=b||{}).COMMUNITY_FASTMA="google_one_tap_logged_out_community_fastma",n.COMMUNITY="google_one_tap_logged_out_community",n.LOGGED_OUT_FILE="google_one_tap_logged_out_file",n),I=((i=I||{}).LOGGED_OUT_FOOTER_ORIGIN="logged_out_footer",i.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",i);let T=Object.values(b).concat(Object.values(I)),w="/api/session/google_auth/signin",S="google_one_tap_login",C=()=>new Promise((e,t)=>{document.cookie=v+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let r=(0,o.Ne)("/start_google_sso","","width=600,height=600");if(null===r){(0,a.L9)("GoogleSSOError",{step:"window-not-found"}),t(Error((0,_.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function n(){let i=(0,s.QA)(document.cookie,v);if(null!==i){let r=JSON.parse(i);document.cookie=v+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",r.token?e(r):((0,a.L9)("GoogleSSOError",{step:"token-not-found"}),t(Error((0,_.t)("auth.google-sso.unable-to-get-info"))))}else r.closed?((0,a.L9)("GoogleSSOError",{step:"cookie-not-found"}),t(Error((0,_.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(n,250)},250)});async function O(e){let t=await C();return await R(t,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup"})}async function A({dispatch:e,shouldDelayExtraInfoStep:t}){let r=await C();return await R(r,{dispatch:e,apiUrl:w,shouldDelayExtraInfoStep:!!t})}let N=(e,t,r)=>{(0,u.Tl)("google_sso_login_redirect_attempt",r,{fromMsTeams:t}),document.cookie=v+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=JSON.stringify({apiUrl:w,redirectPath:e});document.cookie=`${v}=${encodeURIComponent(n)}; path=/`;let i=t?l.default.unsafeRedirectMsTeams:l.default.redirect,a="/start_google_sso?should_use_redirect_instead=1";t&&(a+="&from_ms_teams=1"),i(a)};async function L(e,t,r){let n=await C();return await R(n,{dispatch:e,apiUrl:w,origin:t,showExtraInfoModalCb:r})}function P(e,t){t(d.Y.setGoogleIdToken({googleIdToken:e.token})),t(d.Y.setGoogleTokenType({googleTokenType:e.tokenType})),t(d.Y.changeName({value:e.name}))}function R(e,{dispatch:t,apiUrl:r,origin:n,showExtraInfoModalCb:i,shouldDelayExtraInfoStep:o,__TEST_ONLY_markDone:s}){return new Promise(async(v,I)=>{var w,S;try{let{data:i}=await function(e,t){let r={name:t.name,token:t.token,token_type:t.tokenType};return c.ZP.post(e,r)}(r,e);t(h.l.flash((0,_.t)("auth.sign-in-success",{email:i.meta.email}))),i.meta&&i.meta.email_domain_type?((0,a.L9)("Sign Up (GTM)",{isWorkEmail:(0,f.aG)(i)}),await (0,m.O)("sign_up_google_sso")):((0,a.L9)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:null==(w=null==i?void 0:i.meta)?void 0:w.id,origin:n}),await (0,m.O)("sign_in_google_sso")),v(i.meta)}catch({data:m}){let r=(0,_.it)({data:m},null==m?void 0:m.message),c=!!n&&Object.values(b).includes(n);if(c&&(0,u.Tl)("google_one_tap_login_error",n,{error:r}),r===(0,_.t)("auth.error.account-not-found")){if((0,E.BZ)().antispam_arkose_google_signup&&(0,E.Gm)().do_arkose){let r;(r=o?d.Y.googleSignupSkipExtraInfo:d.Y.signUpExtraInfoGoogle,null!=n&&T.includes(n))?(t(d.Y.init({origin:n,formState:p.zd.SIGN_UP,redirectUrl:l.default.location.pathname})),t(g.K4({type:"auth-modal",data:{}}))):["/login","/signup","/login_iframe"].includes(l.default.location.pathname)||(0,y.Cp)("authenticate_google_user","Skipped launching auth modal before arkose verification",{origin:n}),P(e,t),t(d.Y.showForm({formState:p.zd.VERIFY_HUMAN,prevState:p.zd.SIGN_UP,postVerificationAction:r}))}else o?o?(P(e,t),t(d.Y.googleSignupSkipExtraInfo())):(0,a.L9)("google_sso",{eventSubtype:"google_sso_unexpected_state_no_callback",user_id:null==(S=null==m?void 0:m.meta)?void 0:S.id,origin:n}):(i?i():t(d.Y.showForm({formState:p.zd.SIGN_UP_EXTRA_INFO})),P(e,t));null==s||s()}else I(Error(r||(0,_.t)("auth.google-sso.unable-to-auth")))}})}},598271:(e,t,r)=>{r.d(t,{A0:()=>i,AX:()=>n,BB:()=>d,JY:()=>s,P9:()=>a,X:()=>l,cl:()=>o,fS:()=>c,mL:()=>u});let n={sessionID:-1,localID:-1},i="-1:-1",a="[-1:-1]",o=["-1:-1"],l="0:0";function s(e){return!!e&&(0|e.localID)>=0&&(0|e.sessionID)>=0}function c(e,t){return e&&t?e.sessionID===t.sessionID&&e.localID===t.localID:e===t}function d(e){return e?`${0|e.sessionID}:${0|e.localID}`:null}function u(e){if(!e)return null;let t=e.split(":");if(!t||2!==t.length)return null;let r=-1,n=-1;try{r=parseInt(t[0]),n=parseInt(t[1])}catch(e){return null}return isFinite(r)&&isFinite(n)?{sessionID:r,localID:n}:null}},383900:(e,t,r)=>{r.d(t,{j:()=>a,s:()=>i});var n=r(652983);function i(){let e=new Set;return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),emit(t){for(let r of e)r(t)}}}function a(e,t){(0,n.useEffect)(()=>e.subscribe(t),[t,e])}},807012:(e,t,r)=>{r.d(t,{EA:()=>d,Fh:()=>c,N6:()=>u,Pe:()=>l,zS:()=>s});var n=r(652983),i=r(407908),a=r(559341),o=r(448694);function l(){let e=(0,i.oR)();return n.useCallback((t,r,n)=>{var i;let a=e.getState();(0,o.hp)(t,null==(i=a.openFile)?void 0:i.key,a,r,n)},[e])}function s(){let e=(0,i.oR)();return n.useCallback((t,r)=>{var n;let i=e.getState(),a=null==(n=i.openFile)?void 0:n.key,l=i.user&&i.user.id;(0,o.hp)(t,a,i,{userId:l,...r})},[e])}function c(){let e=(0,i.oR)();return n.useCallback((t,r)=>{var n;let i=e.getState(),a=null==(n=i.openFile)?void 0:n.key,l=i.mirror.appModel.currentPage;(0,o.hp)(t,a,i,{pageId:l,...r})},[e])}function d(){let e=(0,i.oR)();return n.useCallback((t,r)=>{let n=e.getState(),i=n.currentUserOrgId??"";(0,o.VQ)(t,i,n,{...r})},[e])}function u(e){let t=d();return(0,a.Z)(t,e,{leading:!0,trailing:!1})}},626650:(e,t,r)=>{r.d(t,{O4:()=>c,SH:()=>p,cj:()=>d,sp:()=>u,vE:()=>s});var n=r(652983),i=r(407908),a=r(785466),o=r.n(a),l=r(9247);function s(e,t){return p(n.useMemo(e,t))}function c(e,t){return p(n.useMemo(e,t),i.wU)}function d(e,t,r){return p(n.useMemo(e,t),r)}function u(e,t,r){return d(e,t,(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0})}function p(e,t=o()){let r=(0,l.D)(e),i=n.useRef(e);return null!=r&&(e===r||t(e,i.current))?i.current:(i.current=e,e)}},51550:(e,t,r)=>{r.d(t,{C:()=>a});var n=r(652983),i=r(9247);function a(e){let[t,r]=(0,n.useState)(e?1:0),a=(0,i.D)(e);return(0,n.useEffect)(()=>{!1===a&&e&&r(e=>e+1)},[a,e]),t}},490875:(e,t,r)=>{r.d(t,{w:()=>i});var n=r(9247);function i(e){let t=(0,n.D)(e);return e!==t}},311078:(e,t,r)=>{r.d(t,{N:()=>i,X:()=>a});var n=r(652983);function i(e,t,r){return n.useEffect(()=>{function n(t){e.current&&!e.current.contains(t.target)&&r(t)}return document.addEventListener(t,n),()=>{document.removeEventListener(t,n)}},[e,t,r]),e}function a(e,t){return i(e,"mousedown",t)}},151163:(e,t,r)=>{r.d(t,{v:()=>o});var n=r(337167);let i=(0,n.cn)(window.scrollY);window.addEventListener("scroll",()=>{n.n_.set(i,window.scrollY)});let a=(0,n.cn)(e=>0===e(i));function o(){return(0,n.Dv)(a)}},170435:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(652983);let i=()=>{let[e,t]=n.useState(window.innerWidth),[r,i]=n.useState(window.innerHeight);return n.useEffect(()=>{let e=()=>{t(window.innerWidth),i(window.innerHeight)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{windowInnerWidth:e,windowInnerHeight:r}}},105665:(e,t,r)=>{r.d(t,{T:()=>a,k:()=>l});var n=r(261104),i=r.n(n);let a=e=>{var t;if(!e)return"";try{let r=e.replace(/<br>|<\/p>|<\/h2>|<\/li>/g,"$&\n"),n=o(r);return(null==(t=new DOMParser().parseFromString(n,"text/html").documentElement.textContent)?void 0:t.trim())??""}catch(e){return console.error(e),""}},o=(()=>{let e;return t=>(e||(e=i()()),e.sanitize(t))})(),l=e=>e?e.replace("&","&amp;").replace('"',"&quot;").replace("'","&#39;").replace("<","&lt;").replace(">","&gt;"):""},357768:(e,t,r)=>{r.d(t,{v:()=>i});var n=r(337167);let i=(0,n.cn)(!1)},486972:(e,t,r)=>{r.d(t,{Jk:()=>o,RP:()=>l,Tl:()=>i,bT:()=>s,fs:()=>c,ks:()=>a});var n,i=((n=i||{}).MINUTES="minutes",n.HOURS="hours",n.DAYS="days",n);let a=60,o=60*a,l=24*o,s="on-idle-timeout-logged-in-ipc-key";function c(e){return e<o?[e/60,"minutes"]:e<l?[e/3600,"hours"]:e%l==0?[e/86400,"days"]:[e/3600,"hours"]}},716250:(e,t,r)=>{r.d(t,{BZ:()=>p,D0:()=>b,Dl:()=>w,Gm:()=>v,JD:()=>f,Me:()=>h,Rm:()=>g,TT:()=>n,WD:()=>l,Y7:()=>O,YV:()=>m,ZP:()=>S,_F:()=>y,fh:()=>C,g6:()=>_,k2:()=>T,nW:()=>E,rz:()=>I});var n,i=r(939370),a=r(698393),o=r(600470);let l={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},s=(()=>{let e=JSON.parse(JSON.stringify(v().feature_flags||{}));return{...e}})(),c=(()=>{let e=JSON.parse(JSON.stringify(v().launchdarkly_client_flags||{}));return e})(),{zoom_client_user_agent:d}=v();d&&function(e,t){if(e.navigator.userAgent!==t){let r={get:function(){return t}};try{Object.defineProperty(e.navigator,"userAgent",r)}catch(t){e.navigator=Object.create(navigator,{userAgent:r})}}}(window,d),Object.freeze(s),Object.freeze(c);let u=JSON.parse(JSON.stringify(v().experiments||{}));Object.freeze(u);let p=()=>s,m=()=>c;function h(e,t,r){return p()[e]?t:r}let _=()=>u,g=e=>u[e];(n||(n={})).withFeatureFlag=(e,t)=>{if(p()[e])return t;let r=e=>null;return r.displayName="",r};let f=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}},E=()=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,payment_flow_data:null}},y=()=>v().payment_flow_data;function v(){return window.INITIAL_OPTIONS||{}}function b(){return"local"===v().cluster_name}function I(){return b()||"staging"===v().cluster_name}function T(){return v().consent_region}let w=function(e){switch(e){case"staging":return e;case"prod":return"production";default:return"development"}}(v().cluster_name||""),S=v,C="http://fakepath.figma.com";function O(){let e=[(0,a.W2)(),(0,a.PV)()];for(let t=0;t<e.length;t++){let r=e[t];if(r){let e=(0,o.Qc)(r);if(e.locale)return(0,a.r$)(e.locale)}}let t=(0,a.d2)();if(t){let e=t.split("/")[1];if(e&&i.Qv.includes(e))return(0,a.r$)(e)}let{user_data:r}=v();return(null==r?void 0:r.locale)&&(null==r?void 0:r.locale)!==i.ZW?[null==r?void 0:r.locale,i.ZW]:[i.ZW]}},337167:(e,t,r)=>{r.d(t,{Od:()=>S,td:()=>o.td,cn:()=>i.cn,xu:()=>w,gf:()=>T,n_:()=>p,qs:()=>o.qs,q_:()=>I,v$:()=>b,w0:()=>o.w0,mQ:()=>v,n7:()=>o.n7,kv:()=>o.kv,KO:()=>h,Dv:()=>m,oC:()=>u.oC,b9:()=>a.b9,Di:()=>y,ks:()=>E,nF:()=>g,eX:()=>_,oH:()=>f});var n=r(652983),i=r(472753),a=r(207941),o=r(957842),l=r(785466),s=r.n(l),c=r(768358),d=r(122342),u=r(689655);let p=new class{constructor(){this.jotaiAtomStore=(0,i.MT)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders=new Set}get(e){return this.jotaiAtomStore.get(e)}set(e,...t){return this.jotaiAtomStore.set(e,...t)}sub(e,t,r={}){let n=!1,i=()=>{n||(n=!0,Promise.resolve().then(()=>{n=!1,t()}))},a=this.jotaiAtomStore.sub(e,()=>{try{r.batchMicrotask?i():t()}catch(e){throw console.error(e),e}});return this.unsubscribeCallbacks.add(a),()=>{a(),this.unsubscribeCallbacks.delete(a)}}resetForTests(){for(let e of this.unsubscribeCallbacks)e();for(let e of(this.jotaiAtomStore=(0,i.MT)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders))e();this.rerenderAtomsProviders=new Set}};function m(e,t){let r=(0,a.oR)(),[[i,o,l],s]=n.useReducer(t=>{let n=r.get(e);return Object.is(t[0],n)&&t[1]===r&&t[2]===e?t:[n,r,e]},void 0,()=>[r.get(e),r,e]),c=r.get(e);(o!==r||l!==e)&&(s(),c=r.get(e));let d=(null==t?void 0:t.deferToFrame)??!1;return n.useEffect(()=>{let t;let n=r.sub(e,()=>{d?(void 0!==t&&cancelAnimationFrame(t),t=requestAnimationFrame(s)):s()});return s(),()=>{void 0!==t&&cancelAnimationFrame(t),n()}},[r,e,d]),n.useDebugValue(c),c instanceof Promise?function(e){if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}(c):c}function h(e,t){return[m(e,t),(0,a.b9)(e)]}function _(e,t){return(0,i.cn)(e=>t(e),(t,r,...n)=>r(e,...n))}function g(e,t=s()){return(0,i.cn)(t=>t(e),(r,n,i)=>{let a=r(e),o="function"==typeof i?i(a):i;t(a,o)||n(e,o)})}function f(e,t){return(0,i.cn)(t=>t(e),(r,n,i)=>{let a=t(r(e),i,r);n(e,a)})}function E(e,t){let r=null,n="write"in e?(0,i.cn)(t=>t(e),(t,r,...n)=>r(e,...n)):(0,i.cn)(t=>t(e));return n.onMount=n=>{let i;try{i=t({target:e,setSelf:n,onSet:e=>{r=e}})}catch(e){throw console.error(e),e}null==r||r(p.get(e));let a=p.sub(e,()=>{null==r||r(p.get(e))});return()=>{null==i||i(),a()}},n}function y(e,t){return E(e,({onSet:e})=>{e(t)})}function v(e){let t={past:[],present:e,future:[]},r=(0,i.cn)(t),n=(0,i.cn)(e=>e(r).present,(e,t,n)=>{let i=e(r),{past:a,present:o}=i;n!==o&&t(r,{past:a.concat(o),present:n,future:[]})}),a=(0,i.cn)(e=>e(r).past.length>0,(e,t)=>{let n=e(r),{past:i,present:a,future:o}=n;i.length>0&&t(r,{past:i.slice(0,i.length-1),present:i[i.length-1],future:[a].concat(o)})}),o=(0,i.cn)(e=>e(r).future.length>0,(e,t)=>{let n=e(r),{past:i,present:a,future:o}=n;o.length>0&&t(r,{past:i.concat(a),present:o[0],future:o.slice(1)})}),l=(0,i.cn)(e=>{let{past:t,present:n,future:i}=e(r);return t.concat(n).concat(i)},(e,n)=>n(r,t));return{valueAtom:n,undoAtom:a,redoAtom:o,historyAtom:l}}function b(e,t,{debounceTime:r,stringify:n=JSON.stringify,parse:a=JSON.parse}={}){let l=(0,o.qs)(()=>{let r=(0,d.Rz)();if(r){let t=r.getItem(e);if(null!=t)try{let e=a(t);if(void 0!==e)return e}catch(e){}}return t}),s=(()=>{let t=t=>{let r=(0,d.Rz)();r&&r.setItem(e,n(t))};return null==r?t:(0,c.D)(t,r)})();return(0,i.cn)(e=>e(l),(e,t,r)=>{t(l,r),s(e(l))})}function I({get:e,subscribe:t}){let r=(0,i.cn)(0),n=()=>p.set(r,e=>e+1),a=()=>Promise.resolve().then(n),o=!1;return r.onMount=()=>{o=!0;let e=t(n);return()=>{o=!1,e(),a()}},(0,i.cn)(t=>(t(r),o||a(),e()))}function T(e,t){var r;return r=(0,i.cn)(r=>{let n=[];for(let t=0;t<e.length;t++)n[t]=r(e[t]);return t(...n)}),(0,o.kv)(r,e=>e,s())}function w(e,t){let r=(0,o.xu)(e,t);return r.removeAll=()=>{r.setShouldRemove(()=>!0),r.setShouldRemove(null)},r}function S(e){let[t,r]=n.useState(0);return n.useEffect(()=>{let e=()=>r(t+1);return p.rerenderAtomsProviders.add(e),()=>{p.rerenderAtomsProviders.delete(e)}}),n.createElement(a.zt,{store:p.jotaiAtomStore},e.children)}},873349:(e,t,r)=>{r.d(t,{G$:()=>y,I1:()=>m,LK:()=>h,Wr:()=>I,bc:()=>T,m5:()=>g,oA:()=>E,tG:()=>v,tp:()=>b});var n=r(122342),i=r(970740),a=r(983824),o=r(448694),l=r(158774),s=r(961215),c=r(269658),d=r(558011),u=r(31642);let p="keyboardLayoutPreference",m="keyboardLayoutPreference";function h(e){switch(e){case s.UMq.US_QWERTY:return(0,i.t)("keyboard_settings.us_qwerty");case s.UMq.DVORAK:return(0,i.t)("keyboard_settings.us_dvorak");case s.UMq.GERMAN:return(0,i.t)("keyboard_settings.german_qwertz");case s.UMq.FRENCH_AZERTY:return(0,i.t)("keyboard_settings.french_azerty");case s.UMq.HIRAGANA_KANA:return(0,i.t)("keyboard_settings.japanese_kana");case s.UMq.UK_MAC:return(0,i.t)("keyboard_settings.uk_mac");case s.UMq.UK_PC:return(0,i.t)("keyboard_settings.uk_pc");case s.UMq.SWEDISH:return(0,i.t)("keyboard_settings.swedish");case s.UMq.DANISH:return(0,i.t)("keyboard_settings.danish");case s.UMq.NORWEGIAN:return(0,i.t)("keyboard_settings.norwegian");case s.UMq.ITALIAN:return(0,i.t)("keyboard_settings.italian");case s.UMq.SPANISH:return(0,i.t)("keyboard_settings.spanish");case s.UMq.FINNISH:return(0,i.t)("keyboard_settings.finnish");case s.UMq.SPANISH_LATAM:return(0,i.t)("keyboard_settings.spanish_latin_america");case s.UMq.CHINESE:return(0,i.t)("keyboard_settings.chinese");case s.UMq.PORTUGUESE:return(0,i.t)("keyboard_settings.portuguese");case s.UMq.KOREAN:return(0,i.t)("keyboard_settings.korean");case s.UMq.UNKNOWN:return(0,i.t)("keyboard_settings.default_unknown")}}let _=new Map(Object.entries(s.UMq).map(([e,t])=>[e,t])),g=new Map(Object.entries(s.UMq).map(([e,t])=>[t,e]));function f(e){let[t]=e.split(":"),r=_.get(t);return t&&r?{layout:r}:{layout:s.UMq.UNKNOWN}}function E(e){try{let t=c.V.getState();(0,o.iP)("keyboard_layout_preference",t,{layout:s.UMq[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}function y({layout:e}){if(!n.D5)return;let t=s.UMq[e];n.D5.setItem(p,t);let r=new d.W;r.sendToOtherTabs(m,t),E({layout:e,eventName:"user_manual_change"}),s.iTB.reloadShortcuts(e),u.ZP.put("/api/user",{keyboard_preference:s.UMq[e],keyboard_preference_method:"manual"})}function v(e){if(!n.D5)return;n.D5.setItem(p,e);let{layout:t}=f(e);l.Gr&&l.Gr.isReady()&&s.iTB.reloadShortcuts(t)}function b(){return function(){var e;if(n.D5){let e=n.D5.getItem(p);if(null!=e)return f(e)}if(!c.V)return{layout:s.UMq.UNKNOWN};let t=null==(e=c.V.getState().user)?void 0:e.keyboard_layout,r=_.get(t);if(!t||!r)return{layout:s.UMq.UNKNOWN};let i=t?r:s.UMq.UNKNOWN;return v(s.UMq[i]),{layout:i}}().layout}function I(){return Object.keys(s.UMq)}function T(){let e=I();return 0===e.length?[]:[{name:"keyboard-layout-menu-option",callback:(e,t,r)=>{r(a.cZ({tab:"layout"})),l.Gr.triggerAction("toggle-keyboard-shortcuts")}}]}},303498:(e,t,r)=>{r.d(t,{$J:()=>N,Nh:()=>M,Vf:()=>S,Yj:()=>k,fJ:()=>D,i0:()=>C,n_:()=>R,qn:()=>O,uL:()=>P});var n=r(652983),i=r(323108),a=r(209411),o=r(600486);r(476165);var l=r(669277),s=r(815091),c=r(562007),d=r(361357),u=r(621733),p=r(862610),m=r(571194),h=r(493866),_=r(239299),g=r(716250),f=r(476101),E=r(925705),y=r(286206),v=r(361763),b=r(680356);let I=null,T=new s.u,w=new d.Q;function S(e){let t=l.tX.get();if(t){if(e===I||(0,v.rm)()||(0,v.KF)())return t;(0,y.YD)("livegraph","userId changed after livegraph client creation. userId == null",{before:null==I,after:null==e}),t.close()}I=e;let r=window.LGEarlyWS;return delete window.LGEarlyWS,l.tX.set(function(e,t){let r=!!(0,g.BZ)().livegraph_connect_next,n=_.YO?"desktop":"web",o=new URLSearchParams((0,g.ZP)().page_load_token);o.append("userId",e||""),o.append("clientType",n),o.append("clientUrl",document.URL),(0,g.ZP)().org_id&&o.append("orgId",(0,g.ZP)().org_id??""),(0,g.ZP)().team_id&&o.append("teamId",(0,g.ZP)().team_id??"");let l=(0,c._)(r,o.toString()),s={tags:{commitHash:(0,g.ZP)().release_manifest_git_commit||"missing",clientType:n},document,enableCrossViewIncompleteInstanceCheck:(0,g.BZ)().livegraph_check_incomplete_view,enableSendingSubscriptionRequestBeforeAuthMsg:(0,g.BZ)().livegraph_sub_before_auth},d=new a.V_(i.Z),p=new a.sG(i.Z.views,d),m=t||null,h=new a.np({userId:e},d,p,l,t?function(e){if(!m||m.readyState===WebSocket.CLOSED||m.readyState===WebSocket.CLOSING)return new WebSocket(e);let t=m;return t.url!==e?(console.warn(`Expecting to use an early socket for livegraph, urls don't match. Expected: ${t.url} Found: ${e}`),new WebSocket(e)):(m=null,t)}:e=>new WebSocket(e),s),E=new u.ut(h,{connect_next:r?"true":"false"}),{livegraph_update_slo_client_frequency:y,livegraph_sessions_capturing_update_slo_percent:v,livegraph_update_slo_failure_threshold:b}=(0,g.YV)(),I=new f.I(h,y,b);return Math.random()<v&&setTimeout(()=>I.startMeasureLoop(),6e4*Math.random()+5e3),h.addEventListener(e=>{T.logEvent(e),w.logEvent(e),E.onEvent(e)}),h}(e,r)),window.LIVEGRAPH={client:l.tX.get(),logger:T,viewBindings:p},(0,m.CG)("LiveGraph connection",async()=>{await l.tX.get().connect()}),l.tX.get()}function C(){let e=l.tX.get();return e}function O(){return l.tX.use()}let A=!1;function N({userId:e=null,children:t}){n.useEffect(()=>{if(A&&!(0,v.KF)()&&!(0,v.rm)())throw Error("Only a single LivegraphProvider should exist at a time");return A=!0,()=>{A=!1}},[]),S(e);let r=l.tX.use();return n.createElement(l.HQ,{value:{client:r}},t)}class L{constructor(e,t,r){this.viewArgs=e,this.traceId=(0,b.k)(),this.errors=null,this._isLoading=!0,this.timer=new u.B7({onTimeout:()=>t(this),timeoutMs:r})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function P(e,t,r){var i;let o=n.useRef(null),s=!1!==r.enabled,c=r.subscriptionLogger,d=n.useRef(t),u=o.current;!o.current&&s&&(o.current=new L(t,e=>c.onEvent("stuck",m,e),c.stuckMs));let p=s?o.current.traceId:void 0,m=(0,l.mU)(e,t,{enabled:s,traceId:p});if(null===u&&s&&c.onEvent("initiated",m,o.current),!(0,a.wh)(t,d.current)){let e=new L(t,e=>c.onEvent("stuck",m,e),c.stuckMs);(null==(i=o.current)?void 0:i.isLoading)&&(o.current.finish(),c.onEvent("canceled",m,o.current,{nextTraceId:e.traceId})),o.current=e,c.onEvent("initiated",m,o.current),d.current=t}return n.useEffect(()=>{var e,t;"loaded"===m.status?(null==(e=o.current)?void 0:e.isLoading)&&(o.current.finish(),c.onEvent("loaded",m,o.current)):"errors"===m.status&&(null==(t=o.current)?void 0:t.isLoading)&&(o.current.finish(),o.current.errors=m.errors,c.onEvent("error",m,o.current))},[m,m.errors,m.status,c]),n.useEffect(()=>()=>{var e;(null==(e=o.current)?void 0:e.isLoading)&&(o.current.finish(),c.onEvent("canceled",m,o.current))},[]),m}function R(e,t,r={}){let i=n.useRef(window.performance.now()),a=n.useRef(!1);n.useEffect(()=>{if(!a.current&&"loading"!==e.status&&"disabled"!==e.status){let n=window.performance.now();(0,o.L9)(t,{...r,durationMs:n-i.current,status:e.status}),a.current=!0}},[r,t,e.status])}function k(e,t){return new Promise((r,n)=>{let i=l.tX.get(),a=null==i?void 0:i.subscribe(e,t,e=>{"loaded"===e.status?(r(E.IE.from(e)),null==a||a()):e.errors&&(n(e.errors),null==a||a())})})}let D=(0,h.t)((e,t)=>new Promise(r=>{let n=l.tX.get(),i=null==n?void 0:n.subscribe(e,t,e=>{r(e.status),null==i||i()})}));function M(){let e=T.startRecording();return()=>e?T.stopRecording(e):[]}},669277:(e,t,r)=>{r.d(t,{AC:()=>b,HQ:()=>h,Pt:()=>I,SN:()=>l.S,Wg:()=>p.Wg,YW:()=>f,ZT:()=>p.ZT,mU:()=>g,q3:()=>E,tX:()=>n,vE:()=>p.vE,wh:()=>a.wh,wl:()=>T,wy:()=>c.wy});var n,i=r(652983),a=r(209411),o=r(84057),l=r(844784),s=r(395409),c=r(924620),d=r(925705),u=r(307188),p=r(230596);let m=i.createContext(null),h=m.Provider;function _(){let e=i.useContext(m);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function g(e,t,r={}){let n=!1!==r.enabled,[o,l]=i.useState(n?v:s.rr),c=_(),[u,p]=i.useState(t),m=r.traceId,h=o;return c.mock&&(h=c.mock.useSubscription(e,t)),(0,a.wh)(t,u)||(p(t),l(h=n?v:s.rr)),i.useEffect(()=>{var t;if(c.mock)return;if(!1===n){l(s.rr);return}let r=null==(t=c.client)?void 0:t.subscribe(e,u,e=>{l(e)},m);return()=>{null==r||r()}},[n,u,c.client,c.mock,e,m]),i.useMemo(()=>d.IE.from(h),[h])}function f(e,t,r={}){let n=_(),a=!1!==r.enabled,[l]=i.useState(()=>new o.Z(n.client)),[c,u]=i.useState(()=>t.map(e=>({args:e,result:a?v:s.rr})));return i.useEffect(()=>{var r;if(!1===a){u(e=>e.map(({args:e})=>({args:e,result:s.rr})));return}null==(r=n.client)||r.subscribeAndUnsubscribeInBatches(e,t,l,e=>{u(e)})},[a,t,l,n.client,e]),i.useEffect(()=>()=>{l.clearSubscriptions()},[l]),i.useMemo(()=>c.map(({args:e,result:t})=>({result:d.IE.from(t),args:e})),[c])}function E(){let e=_(),[t,r]=i.useState(e.client?e.client.getHealthStatus():l.S.DISCONNECTED),n=e=>r(e);return i.useEffect(()=>{if(null===e.client)return;let t=e.client.addHealthListener(n);return t},[e]),t}let y=new u.g(null);(e=>{e.get=function(){return y.get()},e.use=function(){return y.use()},e.set=function(e){return y.set(e)}})(n||(n={}));let v={status:"loading",data:null,errors:null};function b(){return v}function I(e){return{status:"errors",data:null,errors:e}}function T(e,t=[]){return{status:"loaded",data:e,errors:t}}},127816:(e,t,r)=>{r.d(t,{$c:()=>o,WK:()=>p,YO:()=>c,b1:()=>m,fw:()=>u,iE:()=>d,nO:()=>s,qQ:()=>a});var n=r(520578),i=r(761767);let a=e=>{var t;return(null==e?void 0:e.file)?{key:e.fileKey,name:e.file.name,editor_type:e.file.editorType,folder_id:e.file.folderId,team_id:e.file.teamId,parent_org_id:e.file.parentOrgId,file_repo_id:e.file.fileRepoId,source_file_key:e.fileKey,has_proto_link_password:e.file.hasProtoLinkPassword,proto_link_access:e.file.protoLinkAccess,created_at:e.file.createdAt.toString(),trashed_at:(null==(t=e.file.trashedAt)?void 0:t.toString())||null,prototype_url:(0,n.unwrap)(e.file.prototypeUrl)||""}:null},o=e=>e.file&&e.file.repo?{id:e.file.fileRepoId??"",name:e.file.name,folder_id:e.file.folderId??"",default_file_key:e.file.key,deleted_at:e.file.repo.deletedAt&&e.file.repo.deletedAt.toString(),trashed_at:e.file.repo.trashedAt&&e.file.repo.trashedAt.toString(),created_at:e.file.repo.createdAt.toString(),updated_at:e.file.repo.updatedAt.toString(),team_id:e.file.teamId,link_access:e.file.repo.linkAccess,proto_link_access:e.file.repo.protoLinkAccess,has_file_link_password:e.file.repo.hasFileLinkPassword,has_proto_link_password:e.file.repo.hasProtoLinkPassword,org_audience:e.file.repo.orgAudience,org_browsable:e.file.repo.orgBrowsable,parent_org_id:e.orgId,has_active_branches:e.file.repo.hasActiveBranches}:null,l=e=>({id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,url:e.url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:n.OptionalStatus.Loaded,data:e.fig_file.prototype_url}}}),s=e=>({id:e.key,key:e.key,name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url,thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,canView:!0,library:{numComponents:e.last_published_at?1:0,numStyles:0,numStateGroups:0,numVariableSets:0},repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1,checkpointClientMeta:""}),c=(e,t,r,n)=>({userId:t,resourceType:i.IK.FOLDER,orgId:r??null,teamId:e.team_id??null,sidebarSectionId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:r,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:r,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:i.Qe.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}),d=(e,t,r,n)=>{var a;return{userId:t,orgId:r??null,teamId:(null==(a=e.fig_file)?void 0:a.team_id)??null,sidebarSectionId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:i.IK.PROTOTYPE,prototype:l(e)}},u=(e,t,r,n)=>({userId:t,orgId:r??null,sidebarSectionId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:i.IK.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}),p=(e,t,r,n)=>({userId:t,orgId:r??null,teamId:e.team_id??null,sidebarSectionId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:i.IK.FILE,file:s(e)}),m=(e,t,r,n)=>({userId:t,orgId:r??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:n??null,resourceType:i.IK.WORKSPACE,licenseGroup:null,workspace:e})},615537:(e,t,r)=>{r.d(t,{Hf:()=>a,Xe:()=>o,ws:()=>i});var n=r(638237);function i(e){let t=null;return function(...r){if(null!=t&&t.args.length===r.length){let e=!0;for(let n=0,i=r.length;n<i;n++)if(r[n]!=t.args[n]){e=!1;break}if(e)return t.result}return(t={args:r,result:e(...r)}).result}}function a(e){let t=new WeakMap;return r=>{let n=t.get(r);if(n)return n;let i=e(r);return t.set(r,i),i}}function o(e,t){let r=new n.z(t);return t=>{if(r.has(t))return r.get(t);let n=e(t);return r.set(t,n),n}}},888967:(e,t,r)=>{r.d(t,{Bz:()=>f,GJ:()=>u,ML:()=>m,Mb:()=>_,O9:()=>c,Vh:()=>o,Zj:()=>y,cL:()=>h,sc:()=>d,sw:()=>p,vm:()=>g,wb:()=>E});var n=r(31642),i=r(382019),a=r(849722);let o=["memory.fullscreen.","performance.fullscreen."],l=!0;function s(e,t){let r=-1/0;return()=>{let n=Date.now()/1e3,i=n-r;i>e&&(r=n,t())}}window.addEventListener("error",e=>{if(!l)return;l=!1;let{message:t,filename:r}=e,i=(0,a.U)(),o=/abort/i.test(t),s=/\/compiled_/.test(r);n.ZP.post("/api/web_logger/metrics/unhandled_error",{tags:i.concat(`abort:${o}`,`fullscreen:${s}`).join(",")})});let c=s(30,()=>{n.ZP.post("/api/web_logger/metrics/context_lost",{tags:(0,a.U)().join(",")})}),d=s(30,()=>{n.ZP.post("/api/web_logger/metrics/context_restored",{tags:(0,a.U)().join(",")})});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function p(){n.ZP.post("/api/web_logger/metrics/dirty_after_load",{tags:(0,a.U)().join(",")})}function m(){n.ZP.post("/api/web_logger/metrics/consecutive_flushes",{tags:(0,a.U)().join(",")})}function h(){n.ZP.post("/api/web_logger/metrics/consecutive_image_change_skips",{tags:(0,a.U)().join(",")})}let _=()=>{n.ZP.post("/api/web_logger/metrics/image_paste_error",{tags:(0,a.U)().join(",")})},g=e=>{n.ZP.post("/api/web_logger/metrics/unsaved_changes_bell",{file_key:e,tags:(0,a.U)().join(",")})},f=()=>{n.ZP.post("/api/web_logger/metrics/unsaved_changes_notification",{tags:(0,a.U)().join(",")})};function E(e){n.ZP.post("/api/web_logger/metrics/reconnecting_banner",{tags:[...(0,a.U)(),`client:${e}`].join(",")})}function y(e){return(0,i.F)(e,!0)}},31262:(e,t,r)=>{r.d(t,{B:()=>i,m:()=>a});var n=r(598271);function i(e){return`${n.BB(e.nodeID)}~${n.BB(e.interactionID)}`}function a(e){let[t,r]=e.split("~").map(e=>n.mL(e));return t&&r?{nodeID:t,interactionID:r}:null}},76085:(e,t,r)=>{function n(e){for(let t in e)return!1;return!0}function i(e){for(let t in e)return t;return null}function a(e){let t=null;for(let r in e){if(null!==t)return null;t=r}return t}function o(e,t){let r={...e};for(let[e,n]of Object.entries(t))null!=n&&(r[e]=n);return r}r.d(t,{Jg:()=>a,LR:()=>function e(t,r,n){for(let i in t){let a=""===n?i:n+"."+i;Array.isArray(t[i])?r[a]=JSON.stringify(t[i]):"object"==typeof t[i]&&null!==t[i]?e(t[i],r,a):r[a]=t[i]}},m:()=>o,s2:()=>i,xH:()=>function e(t,r=""){return Object.fromEntries(Object.entries(t).flatMap(([t,n])=>{let i=""===r?t:`${r}.${t}`;return n&&"object"==typeof n?Object.entries(e(n,i)):[[i,n]]}))},xb:()=>n})},187232:(e,t,r)=>{r.d(t,{BZ:()=>O,Gi:()=>v,aL:()=>R,l4:()=>A,lC:()=>P,pF:()=>L,qm:()=>C});var n,i=r(652983),a=r(558011),o=r(337167),l=r(303498),s=r(669277),c=r(637635),d=r(111120),u=r(600486),p=r(239299),m=r(269658),h=r(716250),_=r(286206);let g=!1,f=null,E=new a.W,y="tab-entered-offline-mode";function v(){var e;window.addEventListener("online",N),null==(e=(0,l.i0)())||e.addHealthListener(S),E.register(y,()=>A("TAB_IPC"))}function b(){return o.n_.get(c.b)||g}function I(e){let t=o.n_.get(c.b);e!==t&&(o.n_.set(c.b,e),m.V.dispatch(d.fv(m.V.getState().selectedView)),(0,_.YK)("Offline mode",e?"entered offline mode":"exited offline mode"))}let T=!1,w=null;function S(e){e===s.SN.CONNECTED?(w&&(clearTimeout(w),w=null),T=!1,N()):e!==s.SN.DISCONNECTED||w||(w=setTimeout(()=>T=!0,3e4))}function C(){return!navigator.onLine||T}var O=((n=O||{}).BACK_TO_FILES="BACK_TO_FILES",n.CREATE_FILE="CREATE_FILE",n.TAB_IPC="TAB_IPC",n);function A(e){C()&&!b()&&(R()?I(!0):(0,h.BZ)().offline_detection_shadow_logging&&(g=!0),(R()||(0,h.BZ)().offline_detection_shadow_logging)&&(f={startTime:Date.now(),entrypoint:e,viewedOfflineFileBrowser:!1},(0,u.L9)("Entered Offline Mode",{entrypoint:e,isNavigatorOnline:navigator.onLine,isLivegraphDisconnected:T})),E.sendToOtherTabs(y))}function N(){!C()&&b()&&(I(!1),g=!1,(0,u.L9)("Exited Offline Mode",{duration:f?Date.now()-f.startTime:null,entrypoint:null==f?void 0:f.entrypoint,isNavigatorOnline:navigator.onLine,isLivegraphDisconnected:T,viewedOfflineFileBrowser:null==f?void 0:f.viewedOfflineFileBrowser}),f=null)}function L(){f&&(f.viewedOfflineFileBrowser=!0)}function P(){let[e,t]=i.useState(navigator.onLine);return i.useEffect(()=>{let e=()=>t(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}function R(){return p.YO?(0,h.BZ)().offline_file_browser_desktop:(0,h.BZ)().offline_file_browser_entrypoints}},51610:(e,t,r)=>{r.d(t,{F1:()=>p,Ld:()=>u,Mx:()=>o,up:()=>a});var n=r(239299),i=r(383900);let a=(0,i.s)();function o(){return n.YO&&n.YO.getVersion()>=100}let l=(document.addEventListener("visibilitychange",d),o()&&a.subscribe(e=>{l=e,d()}),null),s=document.visibilityState,c=(0,i.s)();function d(){let e="hidden"===document.visibilityState||"hidden"===l?"hidden":"visible";e!==s&&(s=e,c.emit(e))}function u(e){return c.subscribe(e)}function p(){return s}},993394:(e,t,r)=>{r.d(t,{K6:()=>o,V$:()=>s,V6:()=>c,h0:()=>a,p$:()=>d,rM:()=>u,wt:()=>l});var n=r(652983),i=r(31642);let a=25;function o(e,t,r){let[i,o]=n.useState({});n.useEffect(()=>{o({})},[e]);let s=n.useCallback((n=!1)=>d(i)||n?c(e,r||a,n?{}:i,l).then(e=>{var t,r;return o({pagination:{next_page:null==(t=e.pagination)?void 0:t.next_page,prev_page:null==(r=e.pagination)?void 0:r.prev_page}}),delete e.pagination,e}).catch(e=>(null==t||t(e),Promise.resolve({}))):Promise.resolve({}),[e,t,i,r]);return{fetchNext:s,hasMore:d(i)}}let l="next",s="prev";function c(e,t,r,n=l){return new Promise((a,o)=>{let l=r&&r.pagination,c=l&&(n===s?l.prev_page:l.next_page);(null==l||c)&&(c=c||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${t}`,(0,i.b$)(c).then(({data:e})=>{let t=e.pagination;null==l?l=t:n===s?t.prev_page&&(l.prev_page=t.prev_page):l.next_page=t.next_page,e.meta.pagination=l,a(e.meta)},o))})}function d(e){return!!(!(null==e?void 0:e.pagination)||e.pagination.next_page)}function u(e,t,r=a){let n=[],i=e.map(e=>e.sort(t));for(let e=0;e<r;e++){let e=null;for(let r=0;r<i.length;++r){let n=i[r];0!==n.length&&(null===e||0>t(n[0],i[e][0]))&&(e=r)}null!==e&&n.push(i[e].shift())}return{mergedResults:n,unmergedResultsList:i}}},571529:(e,t,r)=>{r.d(t,{Dt:()=>p,Dv:()=>s,GF:()=>E,GJ:()=>A,K1:()=>c,Ku:()=>u,Pc:()=>T,ZP:()=>L,_k:()=>w,dB:()=>d,hS:()=>b,k:()=>S,s:()=>h,s2:()=>C,tC:()=>O,tS:()=>y,tg:()=>m,wn:()=>v,wq:()=>I,xU:()=>g,ys:()=>l});var n=r(736607),i=r(189796),a=r(493866),o=r(716250);let l=/iPad/.test(navigator.userAgent)||/Mac/.test(navigator.userAgent)&&!/iPhone/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||!1,s=(0,a.t)(()=>l),c=/Mobi/.test(navigator.userAgent),d=()=>c,u=()=>/FigmaMirror-Android/.test(navigator.userAgent),p=/Android/.test(navigator.userAgent),m=()=>!!window.FigmaMobile,h=/iPhone|iPad|iPod/.test(navigator.userAgent),_=/iPhone|iPod/.test(navigator.userAgent),g=()=>h,f=p||h,E=f&&!S(),y=(p||_)&&!S(),v=p&&!S(),b=_&&!S(),I=()=>f;function T(){return!!window.FigmaMobile&&!window.FigmaMobile.handleTripleTaps}function w(){return u()||T()}function S(){return/FigmaMobile/.test(navigator.userAgent)}let C=c||p||l||S()||w(),O=()=>!!(0,o.BZ)().figjam_3p_hardware_integration&&(0,i.Nl)(),A=(0,a.t)(()=>!C),N={},L={...n,get is64BitBrowser(){if(this.windows&&!this.firefox)return/(?:Win64|x64)/.test(window.navigator.userAgent);return/(?:MacIntel|Win64|x86_64)/.test(window.navigator.platform)},get isWasm4gbSupported(){if(this.chrome)return Number(this.version)>=83;if(this.firefox)return Number(this.version)>=89;if(this.safari)return Number(this.version)>=15.2;if(this.msedge)return Number(this.version)>=89;return!1},get browserType(){if(this.chrome)return"chrome";if(this.firefox)return"firefox";if(this.safari)return"safari";if(this.msedge)return"msedge"},get isMobileBrowser(){return/Mobi/.test(window.navigator.userAgent)},get isInNativeApp(){return m()},get isIpad(){return s()},get isIpadNative(){return s()&&window.FigmaMobile&&window.FigmaMobile.shouldOptimizeForIpadApp},get isMeetDevice(){return O()},override(e){for(let t in e)t in N||(N[t]=this[t]),this[t]=e[t]},resetOverrides(){for(let e in N)this[e]=N[e]}}},733449:(e,t,r)=>{function n(e){return new Promise((t,r)=>{let n=Array(e.length),i=e.length,a=()=>{0===i&&t(n)};for(let t=0;t<e.length;t++)e[t].then(e=>{n[t]={type:"resolve",resolve:e,reject:void 0},i--,a()},e=>{n[t]={type:"reject",resolve:void 0,reject:e},i--,a()});a()})}function i(e){let t=null;return()=>(null===t&&(t=e()).catch(()=>t=null),t)}async function a(e,t,r){let n=await new Promise((n,i)=>{let a;let o=function(){0===t?i(a):e().then(n).catch(e=>{t--,a=e,setTimeout(function(){o()},null==r?0:r)})};o()});return n}r.d(t,{Mf:()=>n,Y8:()=>a,a3:()=>i})},580002:(e,t,r)=>{r.d(t,{_x:()=>n,h8:()=>a,iZ:()=>i});let n="figma.pc_modal";function i(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}function a(){let e=`${n}=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},488054:(e,t,r)=>{r.d(t,{Gj:()=>s,HD:()=>o,YN:()=>d,to:()=>c});var n=r(754986);let i=[],a=0;function o(e){let t=e.split(":");return{channel:t[0],timestamp:parseInt(t[1]),generation:parseInt(t[2]),signature:t[3]}}let l=(0,n.g7)(),s=l,c=l.v2;function d(){s.disconnect();let e=(0,n.g7)();s=e,c=e.v2,s.connect()}window.realtimeClient=l,[].push(function(){a>0||i.forEach(e=>{a+=1,setTimeout(()=>{try{e()}finally{a-=1}},6e4+24e4*Math.random())})})},754986:(e,t,r)=>{r.d(t,{HD:()=>p,g7:()=>h});var n=r(600486),i=r(716250),a=r(548755),o=r(947185),l=r(361763);let s=!1,c=[],d=[],u=0;function p(e){let t=e.split(":");return{channel:t[0],timestamp:parseInt(t[1]),generation:parseInt(t[2]),signature:t[3]}}let m=-1;function h(){let e=null,t=null,r=null,c=null,u=null,h={},_=!0,g=Date.now(),f=0,E=null,y=!0,v=!1,b=null,I=new a.M("prototype.realtime_socket_connection_attempt","prototype.realtime_socket_disconnect"),T=()=>{null!=u&&clearInterval(u),null!=c&&c.close(),u=null,c=null,_=!0},w=()=>{E&&(clearTimeout(E),E=null),b&&(window.removeEventListener("online",b),b=null),N()},S=()=>{if(T(),!y||null!=E)return;let e=Math.min(128,4*Math.pow(2,f)),t=4+(e-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${t.toFixed(0)} seconds.`),E=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${t.toFixed(0)} seconds.`),w()},1e3*t),f++,b=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&w()},window.addEventListener("online",b)},C=e=>{c&&c.readyState===c.OPEN&&c.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},O=e=>{let t=(0,i.Gm)().user_data;if(!(null==t?void 0:t.id)){console.warn("Can't post to me channel without user id available"),(0,n.L9)("Me Channel UserId Missing");return}let r=`/me-${null==t?void 0:t.id}`;if(!(r in h)){if(console.warn("We're not subscribed to the me channel"),(0,n.L9)("Me Channel Subscription Missing"),null==t?void 0:t.realtime_token){(0,n.L9)("Me Channel Resubscribe");let e=p(t.realtime_token);h[r]=e,C(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,n.L9)("Me Channel No Token");return}}if(!c||c.readyState!==c.OPEN){(0,l.rm)()||console.warn("Sending to me without open websocket"),(0,n.L9)("Me Channel Websocket Missing");return}let a=JSON.stringify([{channel:r,data:e}]);c.send(`pme:${a}`)},A=e=>{delete h[e],c&&c.readyState===c.OPEN&&c.send(`uns:${e}`)},N=()=>{var t,r;T();let n="";n=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let i=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";n+=`?release_git_tag=${i}&user_id=${(null==(r=null==(t=window.INITIAL_OPTIONS)?void 0:t.user_data)?void 0:r.id)||""}`,(c=new WebSocket(n)).onopen=e=>{for(let e in I.handleSocketConnectionAttempt(!0,f,!s,!document.hidden),f=0,console.log(`[Realtime] Connected to ${n}.`),v=!0,u=setInterval(()=>{c.send("ping")},3e4+5e3*Math.random()-2500),s&&Date.now()-g>6e4&&d.forEach(e=>{setTimeout(e,0)}),s=!0,h)C(h[e])},c.onmessage=t=>{if("pong"===t.data){g=Date.now();return}let r=t.data.substr(0,4);if("tok:"===r){let e=p(t.data.substr(4));h[e.channel]=e;return}let n={};if("ouc:"===r){let e=t.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let t=0;t<e.length;t++)"null"===e[t]&&(e[t]=null);n={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===r||"uns:"===r){let e=t.data.split(":"),r=e[e.length-1];if("ok"===r)return;if(delete h[e[1]],"expired"===r){if(!_)return;_=!1,n={type:"token_expired"}}else{console.warn(t.data);return}}else{try{n=JSON.parse(t.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${t.data}`);return}null!=n.err&&(console.warn("encountered error message from realtime",n.err),S())}e&&e(n)},c.onclose=e=>{v?I.handleSocketDisconnect(!0):I.handleSocketConnectionAttempt(!1,f,!s,!document.hidden),v=!1,c=null,S()}},L={},P=new Set,R=new Map,k={connect:N,disconnect:()=>{y=!1,T(),h={}},setCallback:t=>{e=e=>{let r=e.method,n=Object.keys(e).filter(e=>o.m.has(e)).map(t=>({type:t,value:e[t]})),i=!1;t(e),n.forEach(t=>{let n=L[t.type];n&&Object.keys(n).map(e=>n[e]).filter(e=>e.methods[r]).forEach(r=>{r.callback(t.value,e.method)})})}},setOnSubscribeCallback:e=>{t=e},setOnUnsubscribeCallback:e=>{r=e},subscribe:(e,r)=>{let n=h[e.channel];h[e.channel]=e,n||C(e),!1!==r&&P.add(e.channel),t&&t(e.channel)},unsubscribe:(e,t)=>{if(!1!==t&&P.delete(e),!1===t&&P.has(e))return;let n=R.get(e);n&&n.size>0||(delete h[e],A(e),r&&r(e))},postToMeChannel:e=>{O(e)}},D=()=>{let e=(0,i.Gm)().user_data;return(null==e?void 0:e.realtime_token)?p(e.realtime_token):null},M=["post","put","delete"],F=e=>"string"==typeof e?{type:e,token:D(),methods:M}:e,x={subscriptions:h,subscribe:function(e,t){let r=F(e),n=r.token||D();if(!n)return()=>{};let i=(m+=1,`${m}:${performance.now()}`),a=L[r.type]||{},o=r.methods||M,l={};o.forEach(e=>{l[e]=!0}),a[i]={methods:l,callback:t},L[r.type]=a;let s=R.get(n.channel)||new Set;return s.add(i),k.subscribe(n,!1),()=>{let{channel:e}=n,t=R.get(e);null==t||t.delete(i);let a=L[r.type];if(a&&(delete a[i],0===Object.keys(a).length)){let e=r.type;delete L[e]}k.unsubscribe(e,!1)}}};return{...k,v2:x}}d.push(function(){u>0||c.forEach(e=>{u+=1,setTimeout(()=>{try{e()}finally{u-=1}},6e4+24e4*Math.random())})})},204829:(e,t,r)=>{r.d(t,{$D:()=>h,$v:()=>E,C3:()=>I,ET:()=>m,Eb:()=>b,Ev:()=>y,FS:()=>W,KA:()=>R,KK:()=>H,MJ:()=>c,Vx:()=>g,Wn:()=>L,X_:()=>B,YX:()=>P,ar:()=>_,ax:()=>U,hO:()=>N,ir:()=>v,kH:()=>d,m:()=>K,pl:()=>M,qT:()=>G,qd:()=>V,v1:()=>k,vU:()=>D,wA:()=>f,xE:()=>F,yR:()=>u,z2:()=>p,z5:()=>x});var n=r(652983),i=r(361763),a=r(196401),o=r(716250),l=r(312829);let s=new Set;function c(e){(0,i.rm)()&&s.add(e)}function d(e){(0,i.rm)()&&s.delete(e)}function u(){return!!i.vf||(0,i.Es)()||(0,o.BZ)()&&(0,o.BZ)().interaction_recorder}function p(e){u()&&(0,l.sp)(e)}function m(e){u()&&(0,l.LM)(e)}let h=e=>{let t;t="string"==typeof e?e:null==e?void 0:e.recordingKey;let r=n.useMemo(()=>({recordingKey:t}),[t]);return n.useCallback((...e)=>_(r,...e),[r])};function _(e,...t){let r;return(r="string"==typeof e?e:null==e?void 0:e.recordingKey)?r+"."+t.join("."):r}class g extends n.PureComponent{recordingKey(){return this.props.recordingKey}componentDidMount(){p(this)}componentDidUpdate(e,t){p(this)}componentWillUnmount(){m(this)}}class f extends n.Component{recordingKey(){return this.props.recordingKey}componentDidMount(){p(this)}componentDidUpdate(e,t,r){p(this)}componentWillUnmount(){m(this)}}let E=e=>{let t=n.useMemo(()=>({recordingKey:()=>e}),[e]);return n.useLayoutEffect(()=>(p(t),()=>m(t)),[t]),t},y=l.Ev;function v(e,t,r){if(!u())return r;let n=[];return(0,l.E0)(e,t,e=>{if(!(0,l.JI)())return r(e);let t=[];return(Array.isArray(e)?e:[e]).forEach((e,r)=>{e&&"object"==typeof e&&!Array.isArray(e)?(n[r]={},t[r]=new Proxy(e,{get(e,t){let i=e[t];return Reflect.has(w,t)||(n[r][t]=i),i}})):(n[r]=e,t[r]=e)}),r(Array.isArray(e)?t:t[0])},{record:e=>e?n:void 0,playback:e=>e?"object"!=typeof e||Array.isArray(e)?e:{...e,...w}:e})}function b(e,t,r,n={}){return u()?(0,l.E0)(e,t,r,n):r}let I=(e,t,r,i)=>{let a=E(e);return n.useMemo(()=>b(a,t,r,i),[a,t,r,i])};function T(e){let t={};return e.altKey&&(t.altKey=!0),e.shiftKey&&(t.shiftKey=!0),e.metaKey&&(t.metaKey=!0),e.ctrlKey&&(t.ctrlKey=!0),t}let w={preventDefault(){},stopPropagation(){}};function S(e){let t={};return t.altKey=!!e.altKey,t.ctrlKey=!!e.ctrlKey,t.metaKey=!!e.metaKey,t.shiftKey=!!e.shiftKey,t}function C(e){var t,r;let n=null==(r=null==(t=e.currentTarget)?void 0:t.dataset)?void 0:r.testid;return n?{currentTarget:n}:{}}let O={value:"",blur(){},setPointerCapture(){},releasePointerCapture(){}};function A(e){if(e.currentTarget){let t=document.querySelector(`[data-testid="${e.currentTarget}"]`);if(!t)throw Error(`Expected to find element with data-testid="${e.currentTarget}" for currentTarget`);return{currentTarget:new Proxy(t,{get(e,t){switch(t){case"setPointerCapture":case"releasePointerCapture":return()=>{};default:let r=e[t];if("function"==typeof r)return r.bind(e);return r}}})}}return{currentTarget:O}}function N(e,t,r,n){return b(e,t,r,{record(e){e||(e={});let t={buttons:e.buttons,...T(e),...n&&n.recordMetadata?n.recordMetadata(e):{},...C(e)};return n&&n.includeTarget&&(t.target={tagName:e.target.tagName}),t},playback:e=>({clientX:0,clientY:0,button:0,buttons:e.buttons,target:(null==n?void 0:n.includeTarget)?e.target:O,...S(e),...w,...A(e),...n&&n.playbackMetadata?n.playbackMetadata(e):{}})})}let L=(e,t,r,i)=>{let a=E(e);return n.useMemo(()=>N(a,t,r,i),[a,t,r,i])};function P(e,t,r){return b(e,t,r,{record(e){let t=e.dataTransfer.files,r={};if(t){let e=[];for(let r of t){let t=e.length;e.push("(failed to read file)"),(function(e){return new Promise((t,r)=>{let n=new FileReader;n.onload=()=>t(new Uint8Array(n.result)),n.onerror=e=>r(e),n.readAsArrayBuffer(e)})})(r).then(r=>{let n=(0,a.cv)(r);n.length>1e3&&(console.warn("Recording of drop events is only supported for small files"),n="(file too large)"),e[t]=n})}r.files=e}return{buttons:e.buttons,...T(e),dataTransfer:r}},playback(e){let t={};return e.dataTransfer.files&&(t.files=e.dataTransfer.files.map(e=>new Blob([(0,a.Jx)(e)]))),{clientX:0,clientY:0,button:0,buttons:e.buttons,...S(e),...w,dataTransfer:t}}})}function R(e,t,r,n){return b(e,t,r,{record:e=>(e||(e={}),{buttons:e.buttons,...T(e),...n&&n.recordMetadata?n.recordMetadata(e):{}}),playback:e=>({deltaX:0,deltaY:0,deltaMode:WheelEvent.DOM_DELTA_PIXEL,clientX:0,clientY:0,button:0,buttons:e.buttons,...S(e),...w,...n&&n.playbackMetadata?n.playbackMetadata(e):{}})})}function k(e,t,r,n){return b(e,t,r,{record:e=>({key:e.key,keyCode:e.keyCode,which:e.keyCode,type:t,...T(e),...n&&n.recordMetadata?n.recordMetadata(e):{},...C(e)}),playback:e=>({key:e.key,keyCode:e.keyCode,which:e.keyCode,type:t,...S(e),...w,...A(e),...n&&n.playbackMetadata?n.playbackMetadata(e):{}})})}let D=(e,t,r,i)=>{let a=E(e);return n.useMemo(()=>k(a,t,r,i),[a,t,r,i])};function M(e,t,r){return b(e,t,r,{record(e){let r=e.event;return{key:r.key,keyCode:r.keyCode,which:r.keyCode,type:t,...T(r)}},playback:e=>({event:{key:e.key,keyCode:e.keyCode,...S(e),...w},accept:()=>{}})})}let F=(e,t,r)=>{let i=E(e);return n.useMemo(()=>M(i,t,r),[i,t,r])};function x(e,t,r){return b(e,t,r,{record:e=>e.currentTarget instanceof HTMLInputElement&&"checkbox"===e.currentTarget.type?{checked:e.currentTarget.checked}:{value:e.currentTarget.value},playback(e){let t={value:e.value,checked:e.checked};return{target:t,currentTarget:t,...w}}})}let U=(e,t,r)=>{let i=E(e);return n.useMemo(()=>x(i,t,r),[i,t,r])};function B(e,t,r){return b(e,t,r,{record:e=>({}),playback:e=>({...w})})}let V=(e,t,r)=>{let i=E(e);return n.useMemo(()=>B(i,t,r),[i,t,r])};function G(e,t,r){return b(e,t,r,{record:e=>({}),playback:e=>({})})}let H=(e,t,r)=>{let i=E(e);return n.useMemo(()=>G(i,t,r),[i,t,r])};function W(e,t,r,n){return b(e,t,r,{record(e){e||(e={});let t={buttons:e.buttons,...T(e),...n&&n.recordMetadata?n.recordMetadata(e):{},...C(e)};return n&&n.includeTarget&&(t.target={tagName:e.target.tagName}),t},playback(e){let t=n&&n.includeTarget?{target:e.target}:{};return{clientX:0,clientY:0,button:0,buttons:e.buttons,pointerId:0,pointerType:"mouse",...S(e),...t,...w,...A(e),...n&&n.playbackMetadata?n.playbackMetadata(e):{}}}})}let K=(e,t,r,i)=>{let a=E(e);return n.useMemo(()=>W(a,t,r,i),[a,t,r,i])}},564380:(e,t,r)=>{r.d(t,{Q4:()=>p,i1:()=>m,mZ:()=>_,mu:()=>h,n0:()=>c,sq:()=>u,vE:()=>d,yh:()=>s});var n=r(652983),i=r(359711),a=r(131826),o=r(204829);class l extends o.Vx{constructor(){super(...arguments),this.onClick=o.hO(this,"click",e=>this.props.onClick?this.props.onClick(e):o.Ev),this.onContextClick=o.hO(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):o.Ev),this.onDoubleClick=o.hO(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):o.Ev),this.onMouseDown=o.hO(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):o.Ev),this.onMouseUp=o.hO(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):o.Ev),this.onMouseMove=o.hO(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):o.Ev),this.onMouseEnter=o.hO(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):o.Ev),this.onMouseLeave=o.hO(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):o.Ev),this.onPointerDown=o.FS(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):o.Ev),this.onPointerUp=o.FS(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):o.Ev),this.onPointerMove=o.FS(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):o.Ev),this.onKeyUp=o.v1(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):o.Ev),this.onKeyDown=o.v1(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):o.Ev),this.onFocus=o.qT(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):o.Ev),this.onBlur=o.qT(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):o.Ev)}render(){let{recordingKey:e,forwardedRef:t,dataTestId:r,...n}=this.props;return this.recordingKey()&&(this.props.onClick&&(n.onClick=this.onClick),this.props.onDoubleClick&&(n.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(n.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(n.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(n.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(n.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(n.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(n.onContextMenu=this.onContextClick),this.props.onKeyUp&&(n.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(n.onKeyDown=this.onKeyDown),this.props.onFocus&&(n.onFocus=this.onFocus),this.props.onBlur&&(n.onBlur=this.onBlur),this.props.onPointerDown&&(n.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(n.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(n.onPointerMove=this.onPointerMove)),r&&(n["data-testid"]=r),this.node(n,t)}}class s extends l{node(e,t){return n.createElement("div",{...e,ref:t})}}s.displayName="RecordableDiv";let c=(0,a.z7)(s);class d extends l{node(e,t){return n.createElement("span",{...e,ref:t})}}d.displayName="RecordableSpan";class u extends l{node(e,t){return n.createElement("button",{...e,ref:t})}}u.displayName="RecordableButton";class p extends l{node(e,t){return n.createElement("a",{...e,ref:t})}}p.displayName="RecordableA";class m extends l{constructor(){super(...arguments),this.onChange=o.z5(this,"change",e=>this.props.onChange?this.props.onChange(e):o.Ev)}node(e,t){return n.createElement("input",{...e,onChange:this.onChange,ref:t,dir:"auto"})}}m.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=o.z5(this,"change",e=>this.props.onChange?this.props.onChange(e):o.Ev)}node(e,t){return n.createElement("textarea",{...e,onChange:this.onChange,ref:t,dir:"auto"})}}function _({children:e}){let t=(0,n.useMemo)(()=>o.yR()?(e,t)=>{let r=o.$v(t.recordingKey);return(0,n.useMemo)(()=>{if(!e||!t.recordingKey)return e;let n=o.ir(r,t.eventName,t=>Array.isArray(t)?e(...t):e(t));return(...e)=>n(e)},[r,t.eventName,e,t.recordingKey])}:g,[]);return n.createElement(i.i.Provider,{value:{useInteraction:t}},e)}function g(e){return e}h.displayName="RecordableTextarea"},635723:(e,t,r)=>{r.d(t,{A:()=>o,Z:()=>l});var n=r(261104),i=r.n(n);let a=/[\u202A-\u202E\u2060-\u206F]/g,o=e=>e?e.replace(a,"").normalize():e,l=e=>i().sanitize(e)},344650:(e,t,r)=>{r.d(t,{Bk:()=>i,FQ:()=>a,Fq:()=>o});var n=r(196401);async function i(e){let t=new TextEncoder,r=t.encode(e),n=await crypto.subtle.digest("SHA-256",r),i=Array.from(new Uint8Array(n)),a=i.map(e=>e.toString(16).padStart(2,"0")).join("");return a}function a(e,t){return l(e,t)}function o(e){return window.crypto.subtle.importKey("raw",(0,n.Jx)(e),"AES-GCM",!0,["encrypt","decrypt"])}async function l(e,t){let r=t.split(".");if(2!==r.length)throw Error("Could not parse message and nonce.");let i=r[0],a=r[1],o=(0,n.Jx)(i),l=(0,n.Jx)(a),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},e,l),c=new TextDecoder;return c.decode(s)}},668683:(e,t,r)=>{function n(e,t){return e.size===t.size&&i(e,t)}function i(e,t){return[...e].every(e=>t.has(e))}function a(e,t){let r=new Set,n=new Set;return null==t||t.forEach(t=>{e.has(t)||n.add(t)}),e.forEach(e=>{(null==t?void 0:t.has(e))||r.add(e)}),{added:r,removed:n}}r.d(t,{TT:()=>i,X7:()=>n,qP:()=>a})},122342:(e,t,r)=>{r.d(t,{Aq:()=>v,D5:()=>s,EQ:()=>f,Ew:()=>l,QA:()=>u,Rr:()=>y,Rz:()=>c,WC:()=>g,gm:()=>_,i2:()=>b,p5:()=>d,sE:()=>o});var n=r(652983),i=r(571529),a=r(768358);let o="ajs_anonymous_id",l=null,s=null;try{l=window.sessionStorage}catch(e){}try{s=window.localStorage}catch(e){}let c=()=>s;function d(){return l}function u(e,t){for(let r of(t+="=",e.split(";"))){let e=/^\s*(.*)$/.exec(r);if(e&&(r=e[1]).slice(0,t.length)===t)return decodeURIComponent(r.slice(t.length))}return null}class p{get(e){let t=u(document.cookie,e);if(null===t)return null;try{return JSON.parse(t)}catch{return t}}set(e,t,r){let n=encodeURI(JSON.stringify(t)),a=new Date(Date.now()+2592e6).toUTCString(),l=`${e}=${n}; path=/;`;if((null==r?void 0:r.maxAge)?l+=` max-age=${null==r?void 0:r.maxAge};`:l+=` expires=${a};`,e===o){let e=location.hostname.split(".");l+=` domain=.${e.slice(e.length-2,e.length).join(".")};`}let s="https:"===location.protocol,[c,d]=`${i.ZP.osversion}`.split(".");if(!((null==r?void 0:r.sameSite)==="none"&&i.ZP.safari&&13>+i.ZP.version&&i.ZP.mac&&11>+c&&15>+d)){let e=(null==r?void 0:r.sameSite)||"lax";s||"none"!==e||(e="lax"),l+=` samesite=${e};`}(null==r?void 0:r.path)&&(l+=` path=${r.path};`),s&&(l+=" secure;"),document.cookie=l}delete(e,{includeDotDomainPrefix:t=!1}={}){let r=`${e}=; Max-Age=0; path=/;`;t&&(r+=`domain=.${window.location.hostname}`),document.cookie=r}}class m{get(e){if(null==s)return null;let t=window.localStorage.getItem(e);return null===t?null:JSON.parse(t)}set(e,t){null!=s&&window.localStorage.setItem(e,JSON.stringify(t))}delete(e){null!=s&&window.localStorage.removeItem(e)}}let h=new Map;function _(){return s?new m:h}let g=()=>f()||_(),f=()=>{if(navigator.cookieEnabled)try{return document.cookie,new p}catch(e){}return null};function E(e,t,r,{debounceTime:i,stringify:o=JSON.stringify,parse:l=JSON.parse}={}){let[s,c]=n.useState(()=>{if(t){let r=t.getItem(e);if(null!=r){let e=l(r);if(void 0!==e)return e}}return"function"==typeof r?r():r}),d=n.useMemo(()=>{let r=r=>{t&&t.setItem(e,o(r))};return null==i?r:(0,a.D)(r,i)},[i,t,o,e]);return n.useEffect(()=>{d(s)},[d,s]),[s,c]}function y(e,t,r={}){let n=c();return E(e,n,t,r)}function v(e,t,r={}){let n=l;return E(e,n,t,r)}function b({onSync:e,shouldSyncValue:t}){n.useEffect(()=>{function r(r){t(r)&&e(r.newValue)}return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},[e,t])}},523495:(e,t,r)=>{r.d(t,{Az:()=>o,CB:()=>w,CY:()=>O,CZ:()=>p,DI:()=>c,JN:()=>g,K2:()=>b,W0:()=>I,WH:()=>E,Wj:()=>u,ZW:()=>h,_6:()=>v,aF:()=>m,aK:()=>T,eG:()=>y,fm:()=>i,iP:()=>s,oS:()=>C,qR:()=>N,s2:()=>d,sG:()=>l,vA:()=>S,vu:()=>A,zW:()=>a});var n=r(484188);function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function o(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function s(e){return e.replace(/(_[a-zA-Z])/g,e=>e.substring(1).toUpperCase())}function c(e){return i(e.split("_").join(" ").toLocaleLowerCase())}let d=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function u(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(var n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function p(e){let t="",r=e.length;for(var n=0;n<r;n+=1024)t+=String.fromCharCode.apply(String,e.subarray(n,n+1024));return"\x00"===t.slice(-1)&&(t=t.slice(0,-1)),decodeURIComponent(escape(t))}function m(e,t){return e.length>t?e.slice(0,t-1).trimEnd()+"\u2026":e}function h(e){let t=[];for(let r=0;r<e.length;r++){let n=function(e,t){let r=e.charCodeAt(t);if(Number.isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)throw Error("High surrogate without following low surrogate");let r=e.charCodeAt(t+1);if(56320>r||r>57343)throw Error("High surrogate without following low surrogate");return e.charAt(t)+e.charAt(t+1)}throw Error("Not the start of a single- or multibyte-character")}(e,r);r+=n.length-1,t.push(n)}return t}let _={numeric:!0,sensitivity:"base"};function g(e,t,r=_){let i=(0,n.Kd)().getPrimaryLocale(!1),a=new Intl.Collator(i,r);return e.sort((e,r)=>a.compare(t(e),t(r)))}let f={};function E(e,t="conjunction"){let r=(0,n.Kd)().getPrimaryLocale(!1);return f[t]||(f[t]=new Intl.ListFormat(r,{type:t})),f[t].format(e)}function y(e,t,r){return r=r||`${t}s`,1===e?t:r}function v(e,t,r){return null==e&&(e=0),`${e} ${y(e,t,r)}`}function b(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}function I(e){return encodeURIComponent(e.replace(/ /g,"-"))}function T(e){var t=e.toLowerCase();return I(t=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(t=(t=(t=(t=(t=(t=(t=(t=t.normalize("NFD")).replace(/[\u0300-\u036f]/g,"")).replace(/[ .\-_\/\\:;|,&+=*]/g,"-")).replace(/[^a-z0-9\-]/g,"")).replace(/\-+/g,"-")).replace(/^\-+/,"")).substring(0,100)).replace(/\-+$/,""))?"":t)}let w=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function S(e){for(var t=0,r=e.length>>>2,n=new Uint8Array(3*r),i=0,a=[],o=0;o<127;o++)a[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(o));for(;t<r<<2;){var l=a[e.charCodeAt(t++)],s=a[e.charCodeAt(t++)],c=a[e.charCodeAt(t++)],d=a[e.charCodeAt(t++)];n[i++]=l<<2|s>>>4,c>=0&&(n[i++]=s<<4|c>>>2),d>=0&&(n[i++]=c<<6|d)}return i===n.length?n:n.subarray(0,i)}function C(e){for(var t="",r=e.length,n=0;n<r;n+=1024)t+=String.fromCharCode.apply(String,e.subarray(n,n+1024));return btoa(t)}function O(e){return e.replace(/\s+/g,"")}function A(e,t){return O(e)===O(t)}function N(e){return/^\s*$/.test(e)}},846999:(e,t,r)=>{r.d(t,{FD:()=>c,Km:()=>p,M5:()=>h,QS:()=>u,TW:()=>E,XW:()=>_,dE:()=>o,di:()=>l,eM:()=>m,oL:()=>g,rv:()=>y,xq:()=>f});var n=r(256768),i=r(220958),a=r(716250);let o=e=>!!e.student_validated_at,l=(e,t)=>{if(!e)return 1/0;let r=Math.ceil((0,n.Z)(e).diff((0,n.Z)(),"days",!0));return r>12?1/0:r<=0?t?1:0:r},s=e=>{let t=e&&Object.keys(e).length>0,r=!1;for(let t in e)0>=d(e,t)&&(r=!0);return{hasGracePeriod:!!t,isInValidGracePeriod:m(e)>0,isInExpiredGracePeriod:r}},c=(e,t)=>{let r=e&&t in e;return{hasGracePeriod:!!r,isInValidGracePeriod:p(e,t)>0}},d=(e,t)=>Math.ceil((0,n.Z)(e[t].createdAt).add(7,"days").diff((0,n.Z)(),"days",!0)),u=(e,t)=>{var r,n,i;if(!e||!(null==(r=e[t])?void 0:r.createdAt))return new Date;let a=new Date;return a.setDate((null==(i=null==(n=e[t])?void 0:n.createdAt)?void 0:i.getDate())+7),a},p=(e,t)=>e&&e[t]?d(e,t):0,m=e=>{if(!e)return 0;let t=1/0;for(let r in e){let n=d(e,r);n>0&&n<t&&(t=n)}return t===1/0?0:t},h=(e,t)=>{let r=s(e);if(!(0,a.BZ)().edu_onboarding_grace_period||t||!r.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let n=!!r.isInExpiredGracePeriod,i=r.isInValidGracePeriod&&!n;return{showReminder:i,showAccessRestricted:n}},_=(e,t,r,n)=>{let i=c(e,r);if(!(0,a.BZ)().edu_onboarding_grace_period||t||!n||!i.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let o=i.isInValidGracePeriod;return{showReminder:o,showAccessRestricted:!o}},g=(e,t,r)=>{for(let n in t){let a=t[n][e];if((null==r?void 0:r.student_team)&&(null==a?void 0:a.level)===i.V.OWNER)return!0}return!1},f=(e,t,r)=>{for(let n in t){let a=t[n][e];if((null==r?void 0:r.student_team)&&(null==a?void 0:a.level)>=i.V.EDITOR)return!0}return!1},E=(e,t,r)=>{for(let n in t){let a=t[n][e],o=r[n];if((null==o?void 0:o.student_team)&&(null==a?void 0:a.level)>=i.V.EDITOR)return!0}return!1},y=(e,t,r)=>{var n,a;return null!=r&&!!r.student_team&&(null==(a=null==(n=t[r.id])?void 0:n[e])?void 0:a.level)>=i.V.EDITOR}},361763:(e,t,r)=>{r.d(t,{Es:()=>l,KF:()=>d,hQ:()=>s,ou:()=>c,pY:()=>n.JI,rm:()=>o,vf:()=>i});var n=r(312829);let i=!1,a="/test/interactions"===window.location.pathname;function o(){return a}function l(){return a}function s(){return a||(0,n.JI)()}function c(){return null}function d(){try{return!1}catch{return!1}}},506862:(e,t,r)=>{function n(e){return i(24*e)}function i(e){return 300*Math.round(Date.now()/3e5)-3600*e}function a(e){return{seconds:Math.floor(e%60),minutes:Math.floor(e/60)}}r.d(t,{GN:()=>a,XE:()=>n,sj:()=>i})},561528:(e,t,r)=>{r.d(t,{UM:()=>a,UP:()=>n,f9:()=>i});let n={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"},i={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages",filterBy:"hidden_sections"},a={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"}},206155:(e,t,r)=>{r.d(t,{Nx:()=>s,QU:()=>o,iS:()=>l});var n,i,a,o=((n=o||{})[n.SAVED=0]="SAVED",n[n.SAVING=1]="SAVING",n[n.PAUSED=2]="PAUSED",n),l=((i=l||{})[i.REQUESTED=0]="REQUESTED",i[i.SAVED=1]="SAVED",i),s=((a=s||{})[a.PNG=0]="PNG",a[a.JPEG=1]="JPEG",a[a.PDF=2]="PDF",a)},590594:(e,t,r)=>{r.d(t,{A5:()=>w,Im:()=>C,Jt:()=>L,Jw:()=>S,PM:()=>y,V0:()=>b,WK:()=>A,Zd:()=>N,iQ:()=>f,jj:()=>I,o$:()=>v,qn:()=>T,rC:()=>O,tQ:()=>E});var n,i,a,o,l,s,c,d,u,p,m,h,_,g,f=((n=f||{})[n.V1=1]="V1",n[n.V2=2]="V2",n[n.V3=3]="V3",n[n.MIN=1]="MIN",n[n.MAX=3]="MAX",n),E=((i=E||{})[i.V1=1]="V1",i[i.V2=2]="V2",i[i.V3=3]="V3",i[i.V4=4]="V4",i[i.V5=5]="V5",i[i.MIN=1]="MIN",i[i.MAX=5]="MAX",i),y=((a=y||{})[a.action=0]="action",a[a.tool=1]="tool",a[a.drawingToolGroup=2]="drawingToolGroup",a[a.overflowingToolGroup=3]="overflowingToolGroup",a[a.stack=4]="stack",a[a.divider=5]="divider",a[a.paletteSelector=6]="paletteSelector",a[a.menu=7]="menu",a[a.imageSelector=8]="imageSelector",a[a.actionSelector=9]="actionSelector",a[a.itemGroupWithFallbacks=10]="itemGroupWithFallbacks",a),v=((o=v||{})[o.default=0]="default",o[o.last=1]="last",o),b=((l=b||{})[l.none=0]="none",l[l.leading=1]="leading",l[l.trailing=2]="trailing",l[l.both=3]="both",l),I=((s=I||{})[s.horizontal=0]="horizontal",s[s.vertical=1]="vertical",s),T=((c=T||{})[c.horizontal=0]="horizontal",c[c.vertical=1]="vertical",c),w=((d=w||{})[d.utility=0]="utility",d[d.drawing=1]="drawing",d),S=((u=S||{})[u.automatic=0]="automatic",u[u.persistent=1]="persistent",u),C=((p=C||{})[p.iconAction=0]="iconAction",p[p.divider=1]="divider",p[p.palette=2]="palette",p[p.textAction=3]="textAction",p[p.slider=4]="slider",p[p.itemGroupWithFallbacks=5]="itemGroupWithFallbacks",p[p.required=6]="required",p[p.actionSelector=7]="actionSelector",p),O=((m=O||{})[m.hoveringAboveBar=0]="hoveringAboveBar",m[m.sideEdge=1]="sideEdge",m[m.secondarySideEdge=2]="secondarySideEdge",m[m.pinnedToFloatingBar=3]="pinnedToFloatingBar",m),A=((h=A||{})[h.presetColor=0]="presetColor",h[h.presetImage=1]="presetImage",h[h.colorPicker=2]="colorPicker",h[h.imagePicker=3]="imagePicker",h),N=((_=N||{})[_.normal=0]="normal",_[_.destructive=1]="destructive",_),L=((g=L||{})[g.presetColor=0]="presetColor",g[g.customColor=1]="customColor",g[g.presetImage=2]="presetImage",g[g.customImage=3]="customImage",g)},919686:(e,t,r)=>{r.d(t,{BH:()=>l,GN:()=>o,nL:()=>s});var n=r(716250),i=r(590594);let a=!1,o=e=>{a=e},l=()=>{let e=window.FigmaMobile;return a||((null==e?void 0:e.shouldAllowSimulatedRightClick)??!0)},s=e=>{switch(e){case i.tQ.V1:return{includeSubmenuDividers:!1,includeImageControls:!1,includeDrawingControls:!1,includesAiQuickControls:!1};case i.tQ.V2:return{includeSubmenuDividers:!0,includeImageControls:!1,includeDrawingControls:!1,includesAiQuickControls:!1};case i.tQ.V3:case i.tQ.V4:return{includeSubmenuDividers:!0,includeImageControls:!1,includeDrawingControls:!0,includesAiQuickControls:!1};case i.tQ.V5:return{includeSubmenuDividers:!0,includeImageControls:(0,n.BZ)().nct_image_controls??!1,includeDrawingControls:!0,includesAiQuickControls:((0,n.BZ)().nct_ai_quick_actions&&!(0,n.BZ)().figjam_synthesize_handbrake)??!1};default:return{includeSubmenuDividers:!1,includeImageControls:!1,includeDrawingControls:!1,includesAiQuickControls:!1}}}},524244:(e,t,r)=>{r.d(t,{Dq:()=>ep,uv:()=>ee,wB:()=>J,wi:()=>Q,YG:()=>et,_l:()=>es,nh:()=>ec});var n=r(652983),i=r(466371),a=r(407908),o=r(79875),l=r.n(o),s=r(559341),c=r(5453),d=r(46347),u=r(19516),p=r(9247),m=r(716250),h=r(337167),_=r(286206),g=r(1057),f=r(523495),E=r(117986),y=r(701635),v=r(238809),b=r(824801),I=r(125274),T=r(961215),w=r(269075),S=r(474935),C=r(420353),O=r(764850),A=r(598910),N=r(464368),L=r(187436),P=r(685798),R=r(572333),k=r(358156),D=r(605508),M=r(475042),F=r(590594),x=r(398081),U=r(707041),B=r(934060),V=r(680726),G=r(380811),H=r(951261);let W=window.devicePixelRatio;function K({color:e=H.EFq}){return n.createElement("svg",{width:88*W,height:128*W,viewBox:"-5 1 88 128",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_3625_33331)"},n.createElement("g",{filter:"url(#filter0_ddd_3625_33331)"},n.createElement("mask",{id:"mask0_3625_33331",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"18",y:"29",width:"40",height:"100"},n.createElement("path",{d:"M31 29H46L57.5 129H18.5L31 29Z",fill:"#C4C4C4"})),n.createElement("g",{mask:"url(#mask0_3625_33331)"},n.createElement("g",{filter:"url(#filter1_f_3625_33331)"},n.createElement("rect",{x:"32.5",y:"31",width:"12",height:"102",fill:e}))),n.createElement("g",{filter:"url(#filter2_i_3625_33331)"},n.createElement("path",{d:"M34.4415 27C32.5094 27 30.8177 28.3242 30.3156 30.2296L16.7858 79.4873C15.9325 82.5938 15.5001 85.8008 15.5001 89.0223L15.5 130H62.5V89.039C62.5 85.8066 62.0647 82.589 61.2058 79.4729L47.6498 30.2922C47.1697 28.356 45.4636 27 43.5079 27H34.4415Z",fill:"white",fillOpacity:"0.66"}),n.createElement("path",{d:"M34.4415 27C32.5094 27 30.8177 28.3242 30.3156 30.2296L16.7858 79.4873C15.9325 82.5938 15.5001 85.8008 15.5001 89.0223L15.5 130H62.5V89.039C62.5 85.8066 62.0647 82.589 61.2058 79.4729L47.6498 30.2922C47.1697 28.356 45.4636 27 43.5079 27H34.4415Z",fill:"url(#paint0_linear_3625_33331)"})),n.createElement("g",{filter:"url(#filter3_i_3625_33331)"},n.createElement("path",{d:"M34.3445 27C32.3713 27 30.6436 28.3242 30.1308 30.2296L16.338 79.3986C15.4502 82.5634 15.0001 85.8349 15.0001 89.1218L15 130H63V89.1388C63 85.8408 62.5468 82.5585 61.6532 79.384L47.8339 30.2922C47.3435 28.356 45.6011 27 43.6038 27H34.3445Z",fill:"white",fillOpacity:"0.3"}),n.createElement("path",{d:"M34.3445 27C32.3713 27 30.6436 28.3242 30.1308 30.2296L16.338 79.3986C15.4502 82.5634 15.0001 85.8349 15.0001 89.1218L15 130H63V89.1388C63 85.8408 62.5468 82.5585 61.6532 79.384L47.8339 30.2922C47.3435 28.356 45.6011 27 43.6038 27H34.3445Z",fill:"url(#paint1_linear_3625_33331)"})),n.createElement("path",{d:"M30.3715 30.2972L30.3716 30.2972L30.3722 30.2946C30.8557 28.4983 32.4844 27.25 34.3445 27.25H43.6038C45.4867 27.25 47.1292 28.5284 47.5915 30.3536L47.5915 30.3536L47.5932 30.3599L61.4125 79.4517C62.3 82.6042 62.75 85.8638 62.75 89.1388V129.75H15.25L15.2501 89.1218C15.2501 85.8577 15.6971 82.6089 16.5787 79.4661L30.3715 30.2972Z",stroke:"#989898",strokeWidth:"0.5"}),n.createElement("path",{d:"M37.5019 11.1184C37.6985 10.4549 38.308 9.99976 39 9.99976V9.99976C39.692 9.99976 40.3015 10.4549 40.4981 11.1184L45.5 27.9998H32.5L37.5019 11.1184Z",fill:e}),n.createElement("path",{d:"M40.2584 11.1894L45.1652 27.7498H32.8348L37.7416 11.1894C37.9067 10.6321 38.4187 10.2498 39 10.2498C39.5813 10.2498 40.0933 10.6321 40.2584 11.1894Z",stroke:"#B8B8B8",strokeWidth:"0.5"}))),n.createElement("defs",null,n.createElement("filter",{id:"filter0_ddd_3625_33331",x:"-9",y:"-19.0002",width:"96",height:"168",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-1"}),n.createElement("feGaussianBlur",{stdDeviation:"2"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3625_33331"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-2"}),n.createElement("feGaussianBlur",{stdDeviation:"5"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_3625_33331",result:"effect2_dropShadow_3625_33331"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-5"}),n.createElement("feGaussianBlur",{stdDeviation:"12"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect2_dropShadow_3625_33331",result:"effect3_dropShadow_3625_33331"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect3_dropShadow_3625_33331",result:"shape"})),n.createElement("filter",{id:"filter1_f_3625_33331",x:"26.5",y:"25",width:"24",height:"114",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"3",result:"effect1_foregroundBlur_3625_33331"})),n.createElement("filter",{id:"filter2_i_3625_33331",x:"15.5",y:"27",width:"47",height:"104.091",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"3.27273"}),n.createElement("feGaussianBlur",{stdDeviation:"0.545455"}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.54 0"}),n.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3625_33331"})),n.createElement("filter",{id:"filter3_i_3625_33331",x:"15",y:"27",width:"48",height:"105.182",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"4.36364"}),n.createElement("feGaussianBlur",{stdDeviation:"1.09091"}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.67 0"}),n.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3625_33331"})),n.createElement("linearGradient",{id:"paint0_linear_3625_33331",x1:"15.5",y1:"145",x2:"62.4948",y2:"144.504",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopOpacity:"0.18"}),n.createElement("stop",{offset:"0.314097",stopColor:"white",stopOpacity:"0"}),n.createElement("stop",{offset:"0.705075",stopColor:"white",stopOpacity:"0"}),n.createElement("stop",{offset:"1",stopOpacity:"0.18"})),n.createElement("linearGradient",{id:"paint1_linear_3625_33331",x1:"15",y1:"144.857",x2:"63.0021",y2:"145.054",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"white",stopOpacity:"0"}),n.createElement("stop",{offset:"0.188089",stopColor:"white"}),n.createElement("stop",{offset:"0.410617",stopColor:"white",stopOpacity:"0.2"}),n.createElement("stop",{offset:"0.596847",stopColor:"white",stopOpacity:"0.2"}),n.createElement("stop",{offset:"0.814202",stopColor:"white"}),n.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),n.createElement("clipPath",{id:"clip0_3625_33331"},n.createElement("rect",{width:"78",height:"130",fill:"white",transform:"translate(0 -0.000244141)"}))))}function z({color:e=H.U8U}){return n.createElement("svg",{width:88*W,height:128*W,viewBox:"-5 -4 88 128",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_3625_33342)"},n.createElement("g",{filter:"url(#filter0_dddd_3625_33342)"},n.createElement("mask",{id:"mask0_3625_33342",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"13",y:"24",width:"52",height:"102"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39 24.8572H32.21C30.3188 24.8572 28.7857 26.3903 28.7857 28.2815V34.8427C28.7857 46.9138 23.9794 58.4883 15.4286 67.0087C13.8739 68.5578 13 70.6623 13 72.857V78.6925V126H39L65 126V78.6927V72.8572C65 70.6625 64.1261 68.558 62.5714 67.0089C54.0206 58.4885 49.2143 46.914 49.2143 34.8429V28.2817C49.2143 26.3905 47.6812 24.8574 45.79 24.8574H39V24.8572Z",fill:"white"})),n.createElement("g",{mask:"url(#mask0_3625_33342)"},n.createElement("mask",{id:"path-2-inside-1_3625_33342",fill:"white"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39 24.8572H32.21C30.3188 24.8572 28.7857 26.3903 28.7857 28.2815V34.8427C28.7857 46.9138 23.9794 58.4883 15.4286 67.0087C13.8739 68.5578 13 70.6623 13 72.857V78.6925V121.429H39V121.429H65V78.6927V72.8572C65 70.6625 64.1261 68.558 62.5714 67.0089C54.0206 58.4885 49.2143 46.914 49.2143 34.8429V28.2817C49.2143 26.3905 47.6812 24.8574 45.79 24.8574H39V24.8572Z"})),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39 24.8572H32.21C30.3188 24.8572 28.7857 26.3903 28.7857 28.2815V34.8427C28.7857 46.9138 23.9794 58.4883 15.4286 67.0087C13.8739 68.5578 13 70.6623 13 72.857V78.6925V121.429H39V121.429H65V78.6927V72.8572C65 70.6625 64.1261 68.558 62.5714 67.0089C54.0206 58.4885 49.2143 46.914 49.2143 34.8429V28.2817C49.2143 26.3905 47.6812 24.8574 45.79 24.8574H39V24.8572Z",fill:"#FDFDFD"}),n.createElement("path",{d:"M39 24.8572H39.5V24.3572H39V24.8572ZM15.4286 67.0087L15.7815 67.3628H15.7815L15.4286 67.0087ZM13 121.429H12.5V121.929H13V121.429ZM39 121.429H39.5V120.929H39V121.429ZM39 121.429H38.5V121.929H39V121.429ZM65 121.429V121.929H65.5V121.429H65ZM62.5714 67.0089L62.9244 66.6547L62.5714 67.0089ZM39 24.8574H38.5V25.3574H39V24.8574ZM32.21 25.3572H39V24.3572H32.21V25.3572ZM29.2857 28.2815C29.2857 26.6664 30.595 25.3572 32.21 25.3572V24.3572C30.0427 24.3572 28.2857 26.1141 28.2857 28.2815H29.2857ZM29.2857 34.8427V28.2815H28.2857V34.8427H29.2857ZM15.7815 67.3628C24.4264 58.7486 29.2857 47.0468 29.2857 34.8427H28.2857C28.2857 46.7809 23.5323 58.2279 15.0756 66.6545L15.7815 67.3628ZM13.5 72.857C13.5 70.7952 14.321 68.8182 15.7815 67.3628L15.0756 66.6545C13.4268 68.2975 12.5 70.5294 12.5 72.857H13.5ZM13.5 78.6925V72.857H12.5V78.6925H13.5ZM13.5 121.429V78.6925H12.5V121.429H13.5ZM39 120.929H13V121.929H39V120.929ZM38.5 121.429V121.429H39.5V121.429H38.5ZM39 121.929H65V120.929H39V121.929ZM65.5 121.429V78.6927H64.5V121.429H65.5ZM65.5 78.6927V72.8572H64.5V78.6927H65.5ZM65.5 72.8572C65.5 70.5296 64.5732 68.2977 62.9244 66.6547L62.2185 67.363C63.679 68.8184 64.5 70.7954 64.5 72.8572H65.5ZM62.9244 66.6547C54.4677 58.2281 49.7143 46.7811 49.7143 34.8429H48.7143C48.7143 47.047 53.5736 58.7488 62.2185 67.363L62.9244 66.6547ZM49.7143 34.8429V28.2817H48.7143V34.8429H49.7143ZM49.7143 28.2817C49.7143 26.1143 47.9573 24.3574 45.79 24.3574V25.3574C47.405 25.3574 48.7143 26.6666 48.7143 28.2817H49.7143ZM45.79 24.3574H39V25.3574H45.79V24.3574ZM38.5 24.8572V24.8574H39.5V24.8572H38.5Z",fill:"#B2B2B2",mask:"url(#path-2-inside-1_3625_33342)"}),n.createElement("g",{filter:"url(#filter1_f_3625_33342)"},n.createElement("mask",{id:"path-4-inside-2_3625_33342",fill:"white"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39 24.8572H32.21C30.3188 24.8572 28.7857 26.3903 28.7857 28.2815V34.8427C28.7857 46.9138 23.9794 58.4883 15.4286 67.0087C13.8739 68.5578 13 70.6623 13 72.857V78.6925V121.429H39V121.429H65V78.6927V72.8572C65 70.6625 64.1261 68.558 62.5714 67.0089C54.0206 58.4885 49.2143 46.914 49.2143 34.8429V28.2817C49.2143 26.3905 47.6812 24.8574 45.79 24.8574H39V24.8572Z"})),n.createElement("path",{d:"M39 24.8572H41.1429V22.7143H39V24.8572ZM15.4286 67.0087L16.9411 68.5266L16.9411 68.5266L15.4286 67.0087ZM13 121.429H10.8571V123.571H13V121.429ZM39 121.429H41.1429V119.286H39V121.429ZM39 121.429H36.8571V123.572H39V121.429ZM65 121.429V123.572H67.1429V121.429H65ZM62.5714 67.0089L64.084 65.4909L62.5714 67.0089ZM39 24.8574H36.8571V27.0002H39V24.8574ZM32.21 27H39V22.7143H32.21V27ZM30.9286 28.2815C30.9286 27.5738 31.5023 27 32.21 27V22.7143C29.1354 22.7143 26.6429 25.2068 26.6429 28.2815H30.9286ZM30.9286 34.8427V28.2815H26.6429V34.8427H30.9286ZM16.9411 68.5266C25.8954 59.6041 30.9286 47.4835 30.9286 34.8427H26.6429C26.6429 46.3442 22.0633 57.3724 13.916 65.4907L16.9411 68.5266ZM15.1429 72.857C15.1429 71.2319 15.7899 69.6737 16.9411 68.5266L13.916 65.4907C11.9578 67.442 10.8571 70.0926 10.8571 72.857H15.1429ZM15.1429 78.6925V72.857H10.8571V78.6925H15.1429ZM15.1429 121.429V78.6925H10.8571V121.429H15.1429ZM39 119.286H13V123.571H39V119.286ZM36.8571 121.429V121.429H41.1429V121.429H36.8571ZM39 123.572H65V119.286H39V123.572ZM67.1429 121.429V78.6927H62.8571V121.429H67.1429ZM67.1429 78.6927V72.8572H62.8571V78.6927H67.1429ZM67.1429 72.8572C67.1429 70.0928 66.0422 67.4422 64.084 65.4909L61.0589 68.5268C62.2101 69.6739 62.8571 71.2321 62.8571 72.8572H67.1429ZM64.084 65.4909C55.9367 57.3726 51.3571 46.3444 51.3571 34.8429H47.0714C47.0714 47.4837 52.1046 59.6043 61.0589 68.5268L64.084 65.4909ZM51.3571 34.8429V28.2817H47.0714V34.8429H51.3571ZM51.3571 28.2817C51.3571 25.207 48.8647 22.7145 45.79 22.7145V27.0002C46.4977 27.0002 47.0714 27.574 47.0714 28.2817H51.3571ZM45.79 22.7145H39V27.0002H45.79V22.7145ZM36.8571 24.8572V24.8574H41.1429V24.8572H36.8571Z",fill:"#BFBFBF",mask:"url(#path-4-inside-2_3625_33342)"})),n.createElement("g",{filter:"url(#filter2_f_3625_33342)"},n.createElement("mask",{id:"path-6-inside-3_3625_33342",fill:"white"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39 24.8572H32.21C30.3188 24.8572 28.7857 26.3903 28.7857 28.2815V34.8427C28.7857 46.9138 23.9794 58.4883 15.4286 67.0087C13.8739 68.5578 13 70.6623 13 72.857V78.6925V121.429H39V121.429H65V78.6927V72.8572C65 70.6625 64.1261 68.558 62.5714 67.0089C54.0206 58.4885 49.2143 46.914 49.2143 34.8429V28.2817C49.2143 26.3905 47.6812 24.8574 45.79 24.8574H39V24.8572Z"})),n.createElement("path",{d:"M39 24.8572H39.71V24.1472H39V24.8572ZM15.4286 67.0087L15.9297 67.5116H15.9297L15.4286 67.0087ZM13 121.429H12.29V122.139H13V121.429ZM39 121.429H39.71V120.719H39V121.429ZM39 121.429H38.29V122.139H39V121.429ZM65 121.429V122.139H65.71V121.429H65ZM62.5714 67.0089L63.0726 66.5059L62.5714 67.0089ZM39 24.8574H38.29V25.5674H39V24.8574ZM32.21 25.5672H39V24.1472H32.21V25.5672ZM29.4957 28.2815C29.4957 26.7824 30.7109 25.5672 32.21 25.5672V24.1472C29.9267 24.1472 28.0757 25.9982 28.0757 28.2815H29.4957ZM29.4957 34.8427V28.2815H28.0757V34.8427H29.4957ZM15.9297 67.5116C24.6142 58.858 29.4957 47.1026 29.4957 34.8427H28.0757C28.0757 46.7251 23.3445 58.1185 14.9274 66.5057L15.9297 67.5116ZM13.71 72.857C13.71 70.851 14.5087 68.9275 15.9297 67.5116L14.9274 66.5057C13.239 68.1881 12.29 70.4735 12.29 72.857H13.71ZM13.71 78.6925V72.857H12.29V78.6925H13.71ZM13.71 121.429V78.6925H12.29V121.429H13.71ZM39 120.719H13V122.139H39V120.719ZM38.29 121.429V121.429H39.71V121.429H38.29ZM39 122.139H65V120.719H39V122.139ZM65.71 121.429V78.6927H64.29V121.429H65.71ZM65.71 78.6927V72.8572H64.29V78.6927H65.71ZM65.71 72.8572C65.71 70.4737 64.761 68.1883 63.0726 66.5059L62.0703 67.5118C63.4913 68.9277 64.29 70.8512 64.29 72.8572H65.71ZM63.0726 66.5059C54.6555 58.1187 49.9243 46.7253 49.9243 34.8429H48.5043C48.5043 47.1028 53.3858 58.8582 62.0703 67.5118L63.0726 66.5059ZM49.9243 34.8429V28.2817H48.5043V34.8429H49.9243ZM49.9243 28.2817C49.9243 25.9984 48.0733 24.1474 45.79 24.1474V25.5674C47.2891 25.5674 48.5043 26.7826 48.5043 28.2817H49.9243ZM45.79 24.1474H39V25.5674H45.79V24.1474ZM38.29 24.8572V24.8574H39.71V24.8572H38.29Z",fill:"#999999",mask:"url(#path-6-inside-3_3625_33342)"})),n.createElement("g",{filter:"url(#filter3_f_3625_33342)"},n.createElement("path",{d:"M38.7094 24.8574C36.8183 24.8574 34.3566 26.3905 34.3566 28.2817V34.8429C34.3566 46.9141 33.2645 58.4885 24.7137 67.0089C23.159 68.5581 22.2852 70.6625 22.2852 72.8573V121.429H55.7137V72.8573C55.7137 70.6625 54.8398 68.5581 53.2852 67.0089C44.7344 58.4885 43.6423 46.9141 43.6423 34.8429V28.2817C43.6423 26.3905 41.1806 24.8574 39.2894 24.8574H38.7094Z",fill:"white"})),n.createElement("path",{d:"M13 76.2996H65V126.143H13V76.2996Z",fill:e}),n.createElement("path",{d:"M13 76H65V125.7H13V76Z",fill:"url(#paint0_linear_3625_33342)"}),n.createElement("path",{d:"M13 76H65V125.7H13V76Z",fill:"url(#paint1_linear_3625_33342)"}),n.createElement("path",{d:"M13.25 76.25H64.75V125.45H13.25V76.25Z",stroke:"#9B9B9B",strokeWidth:"0.5"})),n.createElement("path",{d:"M31.5713 16.0664C31.5713 15.7687 31.756 15.5022 32.0348 15.3976L45.4633 10.3619C45.9303 10.1868 46.4284 10.532 46.4284 11.0307V25.6H31.5713V16.0664Z",fill:e}),n.createElement("path",{d:"M31.8213 16.0664C31.8213 15.8729 31.9413 15.6997 32.1226 15.6317L45.5511 10.596C45.8546 10.4822 46.1784 10.7065 46.1784 11.0307V25.35H31.8213V16.0664Z",stroke:"#989898",strokeWidth:"0.5"}))),n.createElement("defs",null,n.createElement("filter",{id:"filter0_dddd_3625_33342",x:"0.142858",y:"-8.25575",width:"77.7143",height:"141.399",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-0.714286"}),n.createElement("feGaussianBlur",{stdDeviation:"0.371652"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.026 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3625_33342"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",null),n.createElement("feGaussianBlur",{stdDeviation:"1.04464"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_3625_33342",result:"effect2_dropShadow_3625_33342"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-0.714286"}),n.createElement("feGaussianBlur",{stdDeviation:"2.80246"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.054 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect2_dropShadow_3625_33342",result:"effect3_dropShadow_3625_33342"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-5.71429"}),n.createElement("feGaussianBlur",{stdDeviation:"6.42857"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect3_dropShadow_3625_33342",result:"effect4_dropShadow_3625_33342"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect4_dropShadow_3625_33342",result:"shape"})),n.createElement("filter",{id:"filter1_f_3625_33342",x:"5.85714",y:"17.7143",width:"66.2857",height:"110.857",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"3.57143",result:"effect1_foregroundBlur_3625_33342"})),n.createElement("filter",{id:"filter2_f_3625_33342",x:"8.71429",y:"20.5715",width:"60.5714",height:"105.143",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"2.14286",result:"effect1_foregroundBlur_3625_33342"})),n.createElement("filter",{id:"filter3_f_3625_33342",x:"17.9994",y:"20.5717",width:"42.0001",height:"105.143",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"2.14286",result:"effect1_foregroundBlur_3625_33342"})),n.createElement("linearGradient",{id:"paint0_linear_3625_33342",x1:"65",y1:"101.844",x2:"13",y2:"101.844",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopOpacity:"0"}),n.createElement("stop",{offset:"0.166394",stopColor:"white",stopOpacity:"0.08"}),n.createElement("stop",{offset:"0.516647",stopColor:"white",stopOpacity:"0.16"}),n.createElement("stop",{offset:"0.824577",stopColor:"white",stopOpacity:"0.08"}),n.createElement("stop",{offset:"1",stopOpacity:"0"})),n.createElement("linearGradient",{id:"paint1_linear_3625_33342",x1:"13",y1:"98.9387",x2:"65",y2:"98.9387",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopOpacity:"0.12"}),n.createElement("stop",{offset:"0.173337",stopOpacity:"0"}),n.createElement("stop",{offset:"0.831435",stopOpacity:"0"}),n.createElement("stop",{offset:"1",stopOpacity:"0.12"})),n.createElement("clipPath",{id:"clip0_3625_33342"},n.createElement("rect",{width:"78",height:"126",fill:"white"}))))}function Z(e){return n.createElement("svg",{width:88*W,height:128*W,viewBox:"-5 -3 88 128",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.createElement("g",{clipPath:"url(#clip0_3625_33376)"},n.createElement("g",{filter:"url(#filter0_ddd_3625_33376)"},n.createElement("path",{d:"M11 21.6311C11 18.3174 13.6863 15.6311 17 15.6311H61C64.3137 15.6311 67 18.3174 67 21.6311V65.1068V123C67 124.657 65.6569 126 64 126H14C12.3431 126 11 124.657 11 123V65.1068V21.6311Z",fill:"white"})),n.createElement("mask",{id:"mask0_3625_33376",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"11",y:"15",width:"56",height:"111"},n.createElement("path",{d:"M11 20.6311C11 17.8697 13.2386 15.6311 16 15.6311H62C64.7614 15.6311 67 17.8697 67 20.6311V65.1068V126H11V65.1068V20.6311Z",fill:"#C4C4C4"})),n.createElement("g",{mask:"url(#mask0_3625_33376)"},n.createElement("g",{filter:"url(#filter1_i_3625_33376)"},n.createElement("path",{d:"M11 20.6311C11 17.8697 13.2386 15.6311 16 15.6311H62C64.7614 15.6311 67 17.8697 67 20.6311V65.1068V126H11V65.1068V20.6311Z",fill:"white"})),n.createElement("path",{d:"M11.25 20.6311C11.25 18.0078 13.3766 15.8811 16 15.8811H62C64.6233 15.8811 66.75 18.0078 66.75 20.6311V65.1068V125.75H11.25V65.1068V20.6311Z",stroke:"#989898",strokeWidth:"0.5"}),n.createElement("g",{filter:"url(#filter2_f_3625_33376)"},n.createElement("rect",{x:"7",y:"29.1458",width:"64",height:"18.0194",fill:"#E0E0E0"})),n.createElement("rect",{x:"17",y:"51.6699",width:"44",height:"66.4466",rx:"6",fill:"#666666"})),n.createElement("g",{filter:"url(#filter3_f_3625_33376)"},n.createElement("path",{d:"M61 83.2039C61 101.242 57.436 115.864 39 115.864C20.564 115.864 17 101.242 17 83.2039C17 65.1662 20.564 50.5437 39 50.5437C57.436 50.5437 61 65.1662 61 83.2039Z",fill:"#969696"})),n.createElement("mask",{id:"path-8-inside-1_3625_33376",fill:"white"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 10V15.6311V15.8494V111.739V111.864C19 114.073 20.7909 115.864 23 115.864H55C57.2091 115.864 59 114.073 59 111.864V111.739V15.8494V15.6311V10L54 15.6311L49 10L44 15.6311L39 10L34 15.6311L29 10L24 15.6311L19 10Z"})),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 10V15.6311V15.8494V111.739V111.864C19 114.073 20.7909 115.864 23 115.864H55C57.2091 115.864 59 114.073 59 111.864V111.739V15.8494V15.6311V10L54 15.6311L49 10L44 15.6311L39 10L34 15.6311L29 10L24 15.6311L19 10Z",fill:"url(#pattern0)"}),n.createElement("path",{d:"M19 10L19.3739 9.66802L18.5 8.68384V10H19ZM59 10H59.5V8.68384L58.6261 9.66802L59 10ZM54 15.6311L53.6261 15.963L54 16.3841L54.3739 15.963L54 15.6311ZM49 10L49.3739 9.66802L49 9.24695L48.6261 9.66802L49 10ZM44 15.6311L43.6261 15.963L44 16.3841L44.3739 15.963L44 15.6311ZM39 10L39.3739 9.66802L39 9.24695L38.6261 9.66802L39 10ZM34 15.6311L33.6261 15.963L34 16.3841L34.3739 15.963L34 15.6311ZM29 10L29.3739 9.66802L29 9.24695L28.6261 9.66802L29 10ZM24 15.6311L23.6261 15.963L24 16.3841L24.3739 15.963L24 15.6311ZM19.5 15.6311V10H18.5V15.6311H19.5ZM19.5 15.8494V15.6311H18.5V15.8494H19.5ZM19.5 111.739V15.8494H18.5V111.739H19.5ZM19.5 111.864V111.739H18.5V111.864H19.5ZM23 115.364C21.067 115.364 19.5 113.797 19.5 111.864H18.5C18.5 114.349 20.5147 116.364 23 116.364V115.364ZM55 115.364H23V116.364H55V115.364ZM58.5 111.864C58.5 113.797 56.933 115.364 55 115.364V116.364C57.4853 116.364 59.5 114.349 59.5 111.864H58.5ZM58.5 111.739V111.864H59.5V111.739H58.5ZM58.5 15.8494V111.739H59.5V15.8494H58.5ZM58.5 15.6311V15.8494H59.5V15.6311H58.5ZM58.5 10V15.6311H59.5V10H58.5ZM54.3739 15.963L59.3739 10.332L58.6261 9.66802L53.6261 15.2991L54.3739 15.963ZM48.6261 10.332L53.6261 15.963L54.3739 15.2991L49.3739 9.66802L48.6261 10.332ZM44.3739 15.963L49.3739 10.332L48.6261 9.66802L43.6261 15.2991L44.3739 15.963ZM38.6261 10.332L43.6261 15.963L44.3739 15.2991L39.3739 9.66802L38.6261 10.332ZM34.3739 15.963L39.3739 10.332L38.6261 9.66802L33.6261 15.2991L34.3739 15.963ZM28.6261 10.332L33.6261 15.963L34.3739 15.2991L29.3739 9.66802L28.6261 10.332ZM24.3739 15.963L29.3739 10.332L28.6261 9.66802L23.6261 15.2991L24.3739 15.963ZM18.6261 10.332L23.6261 15.963L24.3739 15.2991L19.3739 9.66802L18.6261 10.332Z",fill:"#B2B2B2",mask:"url(#path-8-inside-1_3625_33376)"}),n.createElement("path",{d:"M19 55.6699C19 53.4608 20.7909 51.6699 23 51.6699H55C57.2091 51.6699 59 53.4608 59 55.6699V113.864C59 114.969 58.1046 115.864 57 115.864H21C19.8954 115.864 19 114.969 19 113.864V55.6699Z",fill:"url(#paint0_linear_3625_33376)"})),n.createElement("defs",null,n.createElement("filter",{id:"filter0_ddd_3625_33376",x:"-6.1875",y:"-5.13713",width:"90.375",height:"144.744",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-0.716146"}),n.createElement("feGaussianBlur",{stdDeviation:"1.43229"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3625_33376"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-1.43229"}),n.createElement("feGaussianBlur",{stdDeviation:"3.58073"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_3625_33376",result:"effect2_dropShadow_3625_33376"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"-3.58073"}),n.createElement("feGaussianBlur",{stdDeviation:"8.59375"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),n.createElement("feBlend",{mode:"normal",in2:"effect2_dropShadow_3625_33376",result:"effect3_dropShadow_3625_33376"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect3_dropShadow_3625_33376",result:"shape"})),n.createElement("filter",{id:"filter1_i_3625_33376",x:"11",y:"15.6311",width:"56",height:"111.744",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dy:"4.125"}),n.createElement("feGaussianBlur",{stdDeviation:"0.6875"}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),n.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3625_33376"})),n.createElement("filter",{id:"filter2_f_3625_33376",x:"1",y:"23.1458",width:"76",height:"30.0195",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"3",result:"effect1_foregroundBlur_3625_33376"})),n.createElement("filter",{id:"filter3_f_3625_33376",x:"11",y:"44.5437",width:"56",height:"77.3203",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"3",result:"effect1_foregroundBlur_3625_33376"})),n.createElement("pattern",{id:"pattern0",x:"19",y:"19",width:e.imageWidth/e.imageHeight*40,height:40,patternUnits:"userSpaceOnUse",patternTransform:"rotate(-90) translate(40)"},n.createElement("image",{id:"image0_2799_15249",width:e.imageWidth/e.imageHeight*40,height:40,xlinkHref:e.imageURL})),n.createElement("linearGradient",{id:"paint0_linear_3625_33376",x1:"39",y1:"51.6699",x2:"39",y2:"115.864",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"white",stopOpacity:"0"}),n.createElement("stop",{offset:"0.350624",stopColor:"white",stopOpacity:"0.7"}),n.createElement("stop",{offset:"0.442982",stopColor:"white",stopOpacity:"0.8"}),n.createElement("stop",{offset:"0.543827",stopColor:"white",stopOpacity:"0.7"}),n.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),n.createElement("clipPath",{id:"clip0_3625_33376"},n.createElement("rect",{width:"78",height:"126",fill:"white"}))))}var Y=r(149614),j=r(744183),$=r(970740);function q(){return{version:F.iQ.V1,fileType:"design",leadingBarItems:[],centerBarItems:[{itemType:F.PM.stack,itemStringType:"stack",items:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"SELECT",iconImageURL:"https://static.figma.com/uploads/6c6e8ee7412f5dc67005c8bda2a9194066b71c9f",buttonType:F.A5.utility},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HAND",iconImageURL:"https://static.figma.com/uploads/6e190d10839664611d56d9ea255759e19b981d55",buttonType:F.A5.utility}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_1",padding:F.V0.both},{itemType:F.PM.drawingToolGroup,itemStringType:"drawingToolGroup",identifier:"DRAWING",tools:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"PENCIL",iconImageURL:"https://static.figma.com/uploads/95407cf40a9b4e6961940a82ce9f58fd2da90e1f",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"palettePencil",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("PENCIL"),!0,"base")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"pencilThin",iconImageURL:"https://static.figma.com/uploads/0db399ca12fc8fb8892e1089ef99057f79767ffe",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"pencilThick",iconImageURL:"https://static.figma.com/uploads/c00afa5f8a9850b961592d291d35f0e24d61f528",flashesOnPress:!1},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HIGHLIGHTER",iconImageURL:"https://static.figma.com/uploads/3d3b3635536c8b5134ab706267f05276bd93c8f3",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteHighlighter",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("HIGHLIGHTER"),!1,"highlight")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterThin",iconImageURL:"https://static.figma.com/uploads/0db399ca12fc8fb8892e1089ef99057f79767ffe",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterThick",iconImageURL:"https://static.figma.com/uploads/c00afa5f8a9850b961592d291d35f0e24d61f528",flashesOnPress:!1},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"ERASER",iconImageURL:"https://static.figma.com/uploads/76cba36d23a5bc4ca181a3f9485e12e1fa9835f1",buttonType:F.A5.drawing}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_2",padding:F.V0.both},{itemType:F.PM.overflowingToolGroup,itemStringType:"overflowingToolGroup",iconImageURL:"https://static.figma.com/uploads/6deaa95dc38b36ee8f961dde17bf26e5b793eb18",tools:[{identifier:"FRAME",iconImageURL:"https://static.figma.com/uploads/0fc469764d468093174527130461cf6f8a06bb86",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-frame"),overflowIconImageURL:"https://static.figma.com/uploads/1783e78a46a102b7623934086a33536ecc04fa93",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"RECTANGLE",iconImageURL:"https://static.figma.com/uploads/620c43e6a8e0e873f37de44619d64782116ca223",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-rectangle"),overflowIconImageURL:"https://static.figma.com/uploads/637a804a738704ff4b860b5a790ca8851da65125",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"PEN",iconImageURL:"https://static.figma.com/uploads/665c5c92d29f356d7d09be210f71aee22869aaea",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-pen"),overflowIconImageURL:"https://static.figma.com/uploads/d5c62fcd58b76c5699a271f7dac490214a233a63",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TEXT",iconImageURL:"https://static.figma.com/uploads/8a0b78df8273b72df6522ac88b9e79cb4a7581eb",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-type"),overflowIconImageURL:"https://static.figma.com/uploads/078efe01903423cb2fa4a3d77f5d8873f44917a3",webWantsSourceRect:!1,flashesOnPress:!1}]}],trailingBarItems:[]}}let X=()=>{let e=(0,L.Nn)();if(e&&e.nativeToolbarSupportedVersions){let t=e.nativeToolbarSupportedVersions.min,r=e.nativeToolbarSupportedVersions.max,n=F.iQ.MIN,i=F.iQ.MAX;if(n<=r&&t<=i)return Math.min(r,i)}};function J(e){if(e===T.UAh.CONNECTOR_ELBOWED||e===T.UAh.CONNECTOR_STRAIGHT)return"CONNECTOR";if((0,U.bs)(e))return"SHAPE";if(e===T.UAh.VECTOR_PENCIL)return"PENCIL";if(e===T.UAh.WASHI_TAPE)return"TAPE";if(e===T.UAh.SHAPE_RECTANGLE)return"RECTANGLE";if(e===T.UAh.VECTOR_PEN)return"PEN";if(e===T.UAh.TYPE)return"TEXT";else if(e===T.UAh.HAND_SELECT)return"HANDSELECT";else if(e===T.UAh.MULTISELECT)return"MULTISELECT";else return T.UAh[e]}let Q=new Map([["SELECT",(0,m.BZ)().ipad_combined_hand_select?"set-tool-old-select":"set-tool-default"],["HAND","set-tool-hand"],["HANDSELECT","set-tool-default"],["MULTISELECT","set-tool-multiselect"],["PENCIL","set-tool-pencil"],["HIGHLIGHTER","set-tool-highlighter"],["ERASER","set-tool-eraser"],["TAPE","set-tool-washi-tape"],["FRAME","set-tool-frame"],["RECTANGLE","set-tool-rectangle"],["PEN","set-tool-pen"],["TEXT","set-tool-type"]]);function ee(e){return["PENCIL","HIGHLIGHTER","TAPE","ERASER"].includes(e)}function et(e){w.y2.user(e,()=>T.iTB.triggerAction(e,{source:"figma_mobile"}))}let er=w.UJ.user("ios-native-toolbar",e=>{T.iTB.nativeToolbarInsertItemOntoCanvas(e)});function en(e,t){if(void 0!==e)switch(e){case F.iQ.V1:switch(t){case"design":return q();case"whiteboard":return{version:F.iQ.V1,fileType:"whiteboard",leadingBarItems:[],centerBarItems:[{itemType:F.PM.stack,itemStringType:"stack",items:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"SELECT",iconImageURL:"https://static.figma.com/uploads/9cd5627bc7c9002caec32417933fb336962c7e00",buttonType:F.A5.utility},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HAND",iconImageURL:"https://static.figma.com/uploads/b999f3725564d8196d79083d0d01437932f4f88a",buttonType:F.A5.utility}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_1",padding:F.V0.trailing},{itemType:F.PM.drawingToolGroup,itemStringType:"drawingToolGroup",identifier:"DRAWING",tools:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"PENCIL",iconImageURL:"https://static.figma.com/uploads/95407cf40a9b4e6961940a82ce9f58fd2da90e1f",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"palettePencil",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("PENCIL"),!0,"base")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"pencilThin",iconImageURL:"https://static.figma.com/uploads/0db399ca12fc8fb8892e1089ef99057f79767ffe",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"pencilThick",iconImageURL:"https://static.figma.com/uploads/c00afa5f8a9850b961592d291d35f0e24d61f528",flashesOnPress:!1},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HIGHLIGHTER",iconImageURL:"https://static.figma.com/uploads/3d3b3635536c8b5134ab706267f05276bd93c8f3",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteHighlighter",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("HIGHLIGHTER"),!1,"highlight")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterThin",iconImageURL:"https://static.figma.com/uploads/0db399ca12fc8fb8892e1089ef99057f79767ffe",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterThick",iconImageURL:"https://static.figma.com/uploads/c00afa5f8a9850b961592d291d35f0e24d61f528",flashesOnPress:!1},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"TAPE",iconImageURL:"https://static.figma.com/uploads/afcc32e60935f3760c53ac2165c6d9b60bb16b29",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteTape",rowMaxSize:0,swatches:(0,Y.Fr)(Y.Rl,!0)}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"ERASER",iconImageURL:"https://static.figma.com/uploads/76cba36d23a5bc4ca181a3f9485e12e1fa9835f1",buttonType:F.A5.drawing}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_2",padding:F.V0.both},{itemType:F.PM.overflowingToolGroup,itemStringType:"overflowingToolGroup",iconImageURL:"https://static.figma.com/uploads/6deaa95dc38b36ee8f961dde17bf26e5b793eb18",tools:[{identifier:"SHAPE",iconImageURL:"https://static.figma.com/uploads/a2733e2faaf29eb36c4295c338335913b175633c",submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:4,items:Y.lH},overflowTitle:(0,$.t)("mobile_toolbars.shape"),overflowIconImageURL:"https://static.figma.com/uploads/0be9510a23488137a678f01ac5cd896772a80296",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STICKY",iconImageURL:"https://static.figma.com/uploads/b6b1bc0a50bc77eb596d759b04f361f562e728c7",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-sticky"),overflowIconImageURL:"https://static.figma.com/uploads/7a2d4171ef94d6eaea103c1c9bffdb06b8ec8287",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TYPE",iconImageURL:"https://static.figma.com/uploads/51937510898a125b0ca175f5d7d02c605c48ed2d",renderIconInColor:!0,overflowTitle:(0,$.t)("fullscreen_actions.set-tool-type"),overflowIconImageURL:"https://static.figma.com/uploads/c074b4868bc9231628c7b9e6a1614a754143175c",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TABLE",iconImageURL:"https://static.figma.com/uploads/22b12dc561adb16ad97d99c02d49345f9def11ee",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-table"),overflowIconImageURL:"https://static.figma.com/uploads/eca2a1f86871da1c1d3cdb81c1a8b23c47aea144",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"SECTION",iconImageURL:"https://static.figma.com/uploads/24fff4c1aaa1d8b2a6770272e9125f6eb3a3beba",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-section"),overflowIconImageURL:"https://static.figma.com/uploads/a78ea67aa20314d68d6d39ac98cec99151cd7be1",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STAMP",iconImageURL:"https://static.figma.com/uploads/3616f0c148716b9d60607811623d629f4305e662",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-stamp"),overflowIconImageURL:"https://static.figma.com/uploads/8529d36b4879c096a333662e64ea2ea1bab4613f",webWantsSourceRect:!0,flashesOnPress:!1},{identifier:"CONNECTOR",iconImageURL:"https://static.figma.com/uploads/cc0f6a01d9436a685b384d3a71382ebf5162131a",selectedIconImageURL:"https://static.figma.com/uploads/3a3405ca06b1ae40f4e7e35c950e602c8c19b016",renderIconInColor:!0,submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:0,items:[{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"ELBOWED",iconImageURL:"https://static.figma.com/uploads/b2ed461201ea92ddea96eec7dbd2581472b90982",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"STRAIGHT",iconImageURL:"https://static.figma.com/uploads/24fdae52d3a619a1f057011d4cc78d70b1d6134e",flashesOnPress:!1}]},overflowTitle:(0,$.t)("mobile_toolbars.connector"),overflowIconImageURL:"https://static.figma.com/uploads/a85d1067323794696bcb38964add37587a0f3518",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"INSERT",iconImageURL:"https://static.figma.com/uploads/e2bdbb0b1823d382e51f72211ac291757a6b5c7d",highlightedIconImageURL:"https://static.figma.com/uploads/5b71e7229996334b6afb133d26f10b4f3bc3279e",selectedIconImageURL:"https://static.figma.com/uploads/ca5002d6c2b8fb319fa945819ebaf3a5eb703900",overflowTitle:(0,$.t)("mobile_toolbars.universal_insert"),overflowIconImageURL:"https://static.figma.com/uploads/d8e8e439b0de3f0790a248cf1de5c58dd1e7eab0",webWantsSourceRect:!0,flashesOnPress:!1}]}],trailingBarItems:[]};default:return}case F.iQ.V2:switch(t){case"design":return q();case"whiteboard":return function(){let e=[{itemType:F.PM.stack,itemStringType:"stack",items:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"SELECT",iconImageURL:"https://static.figma.com/uploads/9cd5627bc7c9002caec32417933fb336962c7e00",buttonType:F.A5.utility},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HAND",iconImageURL:"https://static.figma.com/uploads/b999f3725564d8196d79083d0d01437932f4f88a",buttonType:F.A5.utility}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_1",padding:F.V0.trailing},{itemType:F.PM.drawingToolGroup,itemStringType:"drawingToolGroup",identifier:"DRAWING",tools:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"PENCIL",iconImageURL:"https://static.figma.com/uploads/95407cf40a9b4e6961940a82ce9f58fd2da90e1f",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"palettePencil",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("PENCIL"),!0,"base")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"markerDrawingOptions",iconImageURL:"https://static.figma.com/uploads/e138358eb8b3a07efda73c406e4c61cc3d9fe6d3",flashesOnPress:!1,submenu:{position:F.rC.secondarySideEdge,rowMaxSize:0,items:Y.Zs}},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HIGHLIGHTER",iconImageURL:"https://static.figma.com/uploads/3d3b3635536c8b5134ab706267f05276bd93c8f3",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteHighlighter",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("HIGHLIGHTER"),!1,"highlight")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterDrawingOptions",iconImageURL:"https://static.figma.com/uploads/c1837ca930ad93b0f6cc7e262e425757c34bca44",flashesOnPress:!1,submenu:{position:F.rC.secondarySideEdge,rowMaxSize:0,items:Y.Gl}},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"TAPE",iconImageURL:"https://static.figma.com/uploads/afcc32e60935f3760c53ac2165c6d9b60bb16b29",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteTape",rowMaxSize:0,swatches:(0,Y.Fr)(Y.Rl,!0)}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"ERASER",iconImageURL:"https://static.figma.com/uploads/76cba36d23a5bc4ca181a3f9485e12e1fa9835f1",buttonType:F.A5.drawing}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_2",padding:F.V0.both},{itemType:F.PM.overflowingToolGroup,itemStringType:"overflowingToolGroup",iconImageURL:"https://static.figma.com/uploads/6deaa95dc38b36ee8f961dde17bf26e5b793eb18",tools:[{identifier:"SHAPE",iconImageURL:"https://static.figma.com/uploads/a2733e2faaf29eb36c4295c338335913b175633c",submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:4,items:Y.lH},overflowTitle:(0,$.t)("mobile_toolbars.shape"),overflowIconImageURL:"https://static.figma.com/uploads/0be9510a23488137a678f01ac5cd896772a80296",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STICKY",iconImageURL:"https://static.figma.com/uploads/b6b1bc0a50bc77eb596d759b04f361f562e728c7",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-sticky"),overflowIconImageURL:"https://static.figma.com/uploads/7a2d4171ef94d6eaea103c1c9bffdb06b8ec8287",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TYPE",iconImageURL:"https://static.figma.com/uploads/51937510898a125b0ca175f5d7d02c605c48ed2d",renderIconInColor:!0,overflowTitle:(0,$.t)("fullscreen_actions.set-tool-type"),overflowIconImageURL:"https://static.figma.com/uploads/c074b4868bc9231628c7b9e6a1614a754143175c",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TABLE",iconImageURL:"https://static.figma.com/uploads/22b12dc561adb16ad97d99c02d49345f9def11ee",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-table"),overflowIconImageURL:"https://static.figma.com/uploads/eca2a1f86871da1c1d3cdb81c1a8b23c47aea144",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"SECTION",iconImageURL:"https://static.figma.com/uploads/24fff4c1aaa1d8b2a6770272e9125f6eb3a3beba",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-section"),overflowIconImageURL:"https://static.figma.com/uploads/a78ea67aa20314d68d6d39ac98cec99151cd7be1",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STAMP",iconImageURL:"https://static.figma.com/uploads/3616f0c148716b9d60607811623d629f4305e662",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-stamp"),overflowIconImageURL:"https://static.figma.com/uploads/8529d36b4879c096a333662e64ea2ea1bab4613f",webWantsSourceRect:!0,flashesOnPress:!1},{identifier:"CONNECTOR",iconImageURL:"https://static.figma.com/uploads/cc0f6a01d9436a685b384d3a71382ebf5162131a",selectedIconImageURL:"https://static.figma.com/uploads/3a3405ca06b1ae40f4e7e35c950e602c8c19b016",renderIconInColor:!0,submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:0,items:[{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"ELBOWED",iconImageURL:"https://static.figma.com/uploads/b2ed461201ea92ddea96eec7dbd2581472b90982",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"STRAIGHT",iconImageURL:"https://static.figma.com/uploads/24fdae52d3a619a1f057011d4cc78d70b1d6134e",flashesOnPress:!1}]},overflowTitle:(0,$.t)("mobile_toolbars.connector"),overflowIconImageURL:"https://static.figma.com/uploads/a85d1067323794696bcb38964add37587a0f3518",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"INSERT",iconImageURL:"https://static.figma.com/uploads/e2bdbb0b1823d382e51f72211ac291757a6b5c7d",highlightedIconImageURL:"https://static.figma.com/uploads/5b71e7229996334b6afb133d26f10b4f3bc3279e",selectedIconImageURL:"https://static.figma.com/uploads/ca5002d6c2b8fb319fa945819ebaf3a5eb703900",overflowTitle:(0,$.t)("mobile_toolbars.universal_insert"),overflowIconImageURL:"https://static.figma.com/uploads/d8e8e439b0de3f0790a248cf1de5c58dd1e7eab0",webWantsSourceRect:!0,flashesOnPress:!1}]}];if((0,m.BZ)().ipad_combined_hand_select){let t={itemType:F.PM.tool,itemStringType:"tool",identifier:"HANDSELECT",iconImageURL:"https://static.figma.com/uploads/4dafadfe17947e647b328747b416482febc48bfd",buttonType:F.A5.utility};e.unshift(t)}return{version:F.iQ.V2,fileType:"whiteboard",items:e}}();default:return}case F.iQ.V3:switch(t){case"design":return q();case"whiteboard":return function(){let e=[{itemType:F.PM.stack,itemStringType:"stack",items:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"SELECT",iconImageURL:"https://static.figma.com/uploads/9cd5627bc7c9002caec32417933fb336962c7e00",buttonType:F.A5.utility},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HAND",iconImageURL:"https://static.figma.com/uploads/b999f3725564d8196d79083d0d01437932f4f88a",buttonType:F.A5.utility}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_1",padding:F.V0.trailing},{itemType:F.PM.drawingToolGroup,itemStringType:"drawingToolGroup",identifier:"DRAWING",tools:[{itemType:F.PM.tool,itemStringType:"tool",identifier:"PENCIL",iconImageURL:"https://static.figma.com/uploads/95407cf40a9b4e6961940a82ce9f58fd2da90e1f",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"palettePencil",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("PENCIL"),!0,"base")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"markerDrawingOptions",iconImageURL:"https://static.figma.com/uploads/e138358eb8b3a07efda73c406e4c61cc3d9fe6d3",flashesOnPress:!1,submenu:{position:F.rC.secondarySideEdge,rowMaxSize:0,items:Y.Zs}},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_PENCIL_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"HIGHLIGHTER",iconImageURL:"https://static.figma.com/uploads/3d3b3635536c8b5134ab706267f05276bd93c8f3",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteHighlighter",rowMaxSize:0,swatches:(0,Y.Wz)((0,Y.AK)("HIGHLIGHTER"),!1,"highlight")},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_1",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterDrawingOptions",iconImageURL:"https://static.figma.com/uploads/c1837ca930ad93b0f6cc7e262e425757c34bca44",flashesOnPress:!1,submenu:{position:F.rC.secondarySideEdge,rowMaxSize:0,items:Y.Gl}},{itemType:F.Im.divider,itemStringType:"divider",identifier:"DIVIDER_HIGHLIGHTER_2",padding:F.V0.none,axis:F.jj.vertical},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"straightLine",iconImageURL:"https://static.figma.com/uploads/15f58390d8f4345f1414b57ebd81d11cc95d114d",flashesOnPress:!1}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"TAPE",iconImageURL:"https://static.figma.com/uploads/afcc32e60935f3760c53ac2165c6d9b60bb16b29",submenu:{position:F.rC.sideEdge,rowMaxSize:0,items:[{itemType:F.Im.palette,itemStringType:"palette",identifier:"paletteTape",rowMaxSize:0,swatches:(0,Y.Fr)(Y.Rl,!0)}]},buttonType:F.A5.drawing},{itemType:F.PM.tool,itemStringType:"tool",identifier:"ERASER",iconImageURL:"https://static.figma.com/uploads/76cba36d23a5bc4ca181a3f9485e12e1fa9835f1",buttonType:F.A5.drawing}]},{itemType:F.PM.divider,itemStringType:"divider",identifier:"DIVIDER_2",padding:F.V0.both},{itemType:F.PM.overflowingToolGroup,itemStringType:"overflowingToolGroup",iconImageURL:"https://static.figma.com/uploads/6deaa95dc38b36ee8f961dde17bf26e5b793eb18",tools:[{identifier:"SHAPE",iconImageURL:"https://static.figma.com/uploads/a2733e2faaf29eb36c4295c338335913b175633c",submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:4,items:Y.lH},overflowTitle:(0,$.t)("mobile_toolbars.shape"),overflowIconImageURL:"https://static.figma.com/uploads/0be9510a23488137a678f01ac5cd896772a80296",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STICKY",iconImageURL:"https://static.figma.com/uploads/b6b1bc0a50bc77eb596d759b04f361f562e728c7",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-sticky"),overflowIconImageURL:"https://static.figma.com/uploads/7a2d4171ef94d6eaea103c1c9bffdb06b8ec8287",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TYPE",iconImageURL:"https://static.figma.com/uploads/51937510898a125b0ca175f5d7d02c605c48ed2d",renderIconInColor:!0,overflowTitle:(0,$.t)("fullscreen_actions.set-tool-type"),overflowIconImageURL:"https://static.figma.com/uploads/c074b4868bc9231628c7b9e6a1614a754143175c",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"TABLE",iconImageURL:"https://static.figma.com/uploads/22b12dc561adb16ad97d99c02d49345f9def11ee",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-table"),overflowIconImageURL:"https://static.figma.com/uploads/eca2a1f86871da1c1d3cdb81c1a8b23c47aea144",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"SECTION",iconImageURL:"https://static.figma.com/uploads/24fff4c1aaa1d8b2a6770272e9125f6eb3a3beba",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-section"),overflowIconImageURL:"https://static.figma.com/uploads/a78ea67aa20314d68d6d39ac98cec99151cd7be1",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"STAMP",iconImageURL:"https://static.figma.com/uploads/3616f0c148716b9d60607811623d629f4305e662",overflowTitle:(0,$.t)("fullscreen_actions.set-tool-stamp"),overflowIconImageURL:"https://static.figma.com/uploads/8529d36b4879c096a333662e64ea2ea1bab4613f",webWantsSourceRect:!0,flashesOnPress:!1},{identifier:"CONNECTOR",iconImageURL:"https://static.figma.com/uploads/cc0f6a01d9436a685b384d3a71382ebf5162131a",selectedIconImageURL:"https://static.figma.com/uploads/3a3405ca06b1ae40f4e7e35c950e602c8c19b016",renderIconInColor:!0,submenu:{position:F.rC.hoveringAboveBar,rowMaxSize:0,items:[{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"ELBOWED",iconImageURL:"https://static.figma.com/uploads/b2ed461201ea92ddea96eec7dbd2581472b90982",flashesOnPress:!1},{itemType:F.Im.iconAction,itemStringType:"iconAction",identifier:"STRAIGHT",iconImageURL:"https://static.figma.com/uploads/24fdae52d3a619a1f057011d4cc78d70b1d6134e",flashesOnPress:!1}]},overflowTitle:(0,$.t)("mobile_toolbars.connector"),overflowIconImageURL:"https://static.figma.com/uploads/a85d1067323794696bcb38964add37587a0f3518",webWantsSourceRect:!1,flashesOnPress:!1},{identifier:"INSERT",iconImageURL:"https://static.figma.com/uploads/e2bdbb0b1823d382e51f72211ac291757a6b5c7d",highlightedIconImageURL:"https://static.figma.com/uploads/5b71e7229996334b6afb133d26f10b4f3bc3279e",selectedIconImageURL:"https://static.figma.com/uploads/ca5002d6c2b8fb319fa945819ebaf3a5eb703900",overflowTitle:(0,$.t)("mobile_toolbars.universal_insert"),overflowIconImageURL:"https://static.figma.com/uploads/d8e8e439b0de3f0790a248cf1de5c58dd1e7eab0",webWantsSourceRect:!0,flashesOnPress:!1,menuPosition:F.o$.last}]}];if((0,m.BZ)().ipad_combined_hand_select){let t={itemType:F.PM.tool,itemStringType:"tool",identifier:"HANDSELECT",iconImageURL:"https://static.figma.com/uploads/4dafadfe17947e647b328747b416482febc48bfd",buttonType:F.A5.utility},r={itemType:F.PM.tool,itemStringType:"tool",identifier:"MULTISELECT",iconImageURL:"https://static.figma.com/uploads/5142f326fd3191c3bd589944cd9b9f89e70d53b5",buttonType:F.A5.utility},n={itemType:F.PM.stack,itemStringType:"stack",items:[t,r]};e.unshift(n)}return{version:F.iQ.V3,fileType:"whiteboard",items:e}}();default:return}default:(0,d.vE)(e)}}function ei(e){switch(e.itemType){case F.PM.action:case F.PM.tool:case F.PM.divider:case F.PM.overflowingToolGroup:case F.PM.paletteSelector:case F.PM.menu:case F.PM.imageSelector:case F.PM.actionSelector:return[e];case F.PM.drawingToolGroup:return[e].concat(l()(e.tools,e=>ei(e)));case F.PM.stack:return[e].concat(l()(e.items,e=>ei(e)));case F.PM.itemGroupWithFallbacks:let t=l()(e.options,e=>e);return[e].concat(l()(t,e=>ei(e)))}}function ea(e,t){let r=e=>{let r=[{type:"SOLID",color:t}];return e===y.gC?h.n_.set(y.gC,e=>({...e,paints:r})):h.n_.set(y.wK,e=>({...e,paints:r}))};switch(e){case"PENCIL":r(y.gC);break;case"HIGHLIGHTER":r(y.wK)}}function eo(e,t,r){let n=e.find(([e,r])=>b.Z.format(t)===b.Z.format(e));return n?{settingsType:F.Jt.presetColor,presetIdentifier:n[1],color:t,toolImageURL:r}:{settingsType:F.Jt.customColor,color:t,toolImageURL:r}}let el=()=>{var e,t;n.useEffect(()=>{(0,V.PO)(G.X)},[]);let r=(0,a.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.isReadOnly}),{washiTapePaint:i}=(0,h.Dv)(y.Y),o=(null==(e=null==i?void 0:i.image)?void 0:e.hash)&&(0,g.NC)(null==(t=null==i?void 0:i.image)?void 0:t.hash);n.useEffect(()=>{r||o||(0,V.IA)((0,V.XB)(G.X[0]))},[o,r])},es=()=>{let e=X();return void 0!==e},ec=e=>{let t=X(),r=(0,L.Nn)(),i=void 0!==t,a=(0,L.wA)(),o=(0,L.U0)(),l=(0,A.Ip)("opacity"),[s,c]=n.useState(!1);n.useEffect(()=>{var n,i;let o=en(t,e);if(o){if(a){let e=setTimeout(()=>{window.FigmaMobile.nativeToolbarSupportedVersions=void 0,(0,_.Jz)(E.k.MOBILE_EDITOR,Error(`Native toolbar did not confirm configuration before timeout, version ${t}`))},2e3);a._native_toolbar_confirm_configuration=()=>{var t;clearTimeout(e),c(!0),(0,m.BZ)().ipad_combined_hand_select&&(null==(t=T.O$1)||t.makeDefaultToolHandSelect())}}null==(n=null==r?void 0:r.nativeToolbarAcceptConfiguration)||n.call(r,o)}else null==(i=null==r?void 0:r.nativeToolbarRejected)||i.call(r)},[t,r,a,e]);let d=(0,M.M)();return n.useEffect(()=>{i&&a&&(a._native_toolbar_perform_action=e=>{d(),et(e)})},[i,a,d]),n.useEffect(()=>{i&&a&&((0,j.x)(o),a._native_toolbar_set_tool_color=ea,a._native_toolbar_set_tool_preset=(e,t)=>{switch(e){case"PENCIL":case"HIGHLIGHTER":let r=(0,Y.AK)(e).find(([e,r])=>r===t);r&&ea(e,r[0]);break;case"TAPE":let n=Y.Rl.find(e=>e.name===t);n&&(0,V.IA)((0,V.XB)(n))}},a._native_toolbar_set_slider_value=(e,t)=>{switch(t){case"PRIMARY_PENCIL_OPACITY":h.n_.set(y.gC,t=>({...t,strokeOpacity:e}));break;case"CONTEXTUAL_PENCIL_OPACITY":l(e);break;default:console.error(`_native_toolbar_set_slider_value: tool ${t} not recognized`)}},a._native_toolbar_set_tool_image_data=(e,t,r)=>{if("TAPE"===e){let e=(0,f.vA)(r);T.iTB.setCustomWashiTapeImageFromFile(e)}},a._native_toolbar_activate_submenu_item=e=>{var t=e;switch(Y.fS.includes(e)?t="SHAPE_NAME":Y.s3.includes(e)?t="STROKE_WIDTH":Y.U6.includes(e)&&(t="HIGHLIGHTER_WIDTH"),t){case"pencilThin":h.n_.set(y.gC,e=>({...e,strokeWeight:x.k0}));break;case"pencilThick":h.n_.set(y.gC,e=>({...e,strokeWeight:x.UZ}));break;case"highlighterThin":h.n_.set(y.wK,e=>({...e,strokeWeight:x.GT}));break;case"highlighterThick":h.n_.set(y.wK,e=>({...e,strokeWeight:x.fV}));break;case"STROKE_WIDTH":let r=Y.sq.get(e);r&&h.n_.set(y.gC,e=>({...e,strokeWeight:r}));break;case"HIGHLIGHTER_WIDTH":let n=Y.oU.get(e);n&&h.n_.set(y.wK,e=>({...e,strokeWeight:n}));break;case"straightLine":et("toggle-straight-pencil");break;case"ELBOWED":er(O.UAh.CONNECTOR_ELBOWED);break;case"STRAIGHT":er(O.UAh.CONNECTOR_STRAIGHT);break;case"SHAPE_NAME":let i=U.zu.get(e);i&&er(i)}})},[i,a,o,l]),[i,s]},ed=(e,t=0)=>{try{let r=(0,i.Dq)(e),n=`data:image/svg+xml,${encodeURIComponent(r)}`,a=new Image;return a.decoding="sync",a.src=n,new Promise((e,r)=>{a.onload=()=>{setTimeout(()=>{let t=document.createElement("canvas");t.width=a.width,t.height=a.height;let r=t.getContext("2d");r?r.drawImage(a,0,0):e(void 0);let n=t.toDataURL();e(n)},t),a.onerror=()=>r()}})}catch(e){return console.error(e),Promise.resolve(void 0)}},eu=async e=>{let t;let r=G.X.find(t=>t.image===e);if(!(t=r?await (0,V.RC)(r):T.Uv3.getCompressedImage(e)))return Promise.resolve(null);{let e="data:image/png;base64,"+(0,f.oS)(t),r=new Image;return r.src=e,await r.decode(),Promise.resolve({washiTapeImageURL:e,imageWidth:r.width,imageHeight:r.height})}};function ep(e){var t,r,i;let o=(0,L.Nn)(),{editorType:_}=e,f=(0,s.Z)(e=>{var t;null==(t=null==o?void 0:o.nativeToolbarUpdateVisible)||t.call(o,e)},250),E=!(0,P.Qs)();n.useEffect(()=>{f(E),E||f.flush()},[f,E]),n.useEffect(()=>()=>{f(!1),f.flush()},[f]),el();let w=(0,N.Yu)();n.useEffect(()=>{var e;null==(e=null==o?void 0:o.nativeToolbarUpdateEnabled)||e.call(o,!w)},[w,o]);let A=X(),U=n.useMemo(()=>{let e=en(A,_);return e?function(e){switch(e.version){case F.iQ.V1:{let t=e.leadingBarItems.concat(e.centerBarItems,e.trailingBarItems),r=l()(t,e=>ei(e));return l()(r,e=>e.itemType===F.PM.action?e.identifier:[])}case F.iQ.V2:case F.iQ.V3:{let t=l()(e.items,e=>ei(e));return l()(t,e=>e.itemType===F.PM.action?e.identifier:[])}default:(0,d.vE)(e)}}(e):[]},[A,_]),V=(0,a.v9)(e=>{let t=e.mirror.appModel;return U.filter(e=>(0,D.jA)(t,e))}),G=(0,p.D)(V);n.useEffect(()=>{var e;!V||G&&(0,c.Vg)(G,V)||null==(e=null==o?void 0:o.nativeToolbarUpdateEnabledActions)||e.call(o,V)},[o,V,G]);let H=(0,N.ob)(),W=J(H);(0,u.O)(()=>{var e;W&&(null==(e=null==o?void 0:o.nativeToolbarUpdateActiveTool)||e.call(o,W))});let j=n.useMemo(()=>(0,Y.AK)("PENCIL"),[]),$=(0,h.Dv)(y.gC);n.useEffect(()=>{var e,t;let r=null==(t=null==(e=$.paints)?void 0:e[0])?void 0:t.color;if(r){let e=n.createElement(K,{color:b.Z.format(r)});ed(e).then(e=>{var t,n;e&&(null==(t=null==o?void 0:o.nativeToolbarUpdateToolSettings)||t.call(o,"PENCIL",eo(j,r,e)),null==(n=null==o?void 0:o.nativeToolbarUpdateToolSettings)||n.call(o,"PRIMARY_PENCIL_OPACITY",eo(j,r,e)))}).catch(console.error)}},[o,$,j]);let q=n.useMemo(()=>(0,Y.AK)("HIGHLIGHTER"),[]),ea=(0,h.Dv)(y.wK);n.useEffect(()=>{var e,t;let r=null==(t=null==(e=ea.paints)?void 0:e[0])?void 0:t.color;if(r){let e=n.createElement(z,{color:b.Z.format(r)});ed(e).then(e=>{var t;e&&(null==(t=null==o?void 0:o.nativeToolbarUpdateToolSettings)||t.call(o,"HIGHLIGHTER",eo(q,r,e)))}).catch(console.error)}},[o,ea,q]);let es=(0,h.Dv)(y.Y),ec=null==(t=es.washiTapePaint)?void 0:t.image;n.useEffect(()=>{let e=null==ec?void 0:ec.hash;if(e){let t=(0,g.NC)(e),r=Y.Rl.find(e=>e.image===t);eu(t).then(e=>{if(e){let i=n.createElement(Z,{imageURL:e.washiTapeImageURL,imageWidth:e.imageWidth,imageHeight:e.imageHeight});ed(i,50).then(e=>{var n;if(e){let i;i=r?{settingsType:F.Jt.presetImage,presetIdentifier:r.name,toolImageURL:e,color:{r:0,g:0,b:0,a:0}}:{settingsType:F.Jt.customImage,imageIdentifier:t,toolImageURL:e,color:{r:0,g:0,b:0,a:0}},null==(n=null==o?void 0:o.nativeToolbarUpdateToolSettings)||n.call(o,"TAPE",i)}})}})}},[o,ec]);let ep=(0,R.YO)(null==(r=T.O$1)?void 0:r.editorState().pencilStraightLine,!1),em=(0,R.YO)(null==(i=T.O$1)?void 0:i.editorState().shiftStraightLine,!1),eh=n.useMemo(()=>{let e=[];return $.strokeWeight===x.k0?e.push("pencilThin"):$.strokeWeight===x.UZ&&e.push("pencilThick"),ea.strokeWeight===x.GT?e.push("highlighterThin"):ea.strokeWeight===x.fV&&e.push("highlighterThick"),Y.sq.forEach((t,r)=>{t===$.strokeWeight&&e.push(r)}),Y.oU.forEach((t,r)=>{t===ea.strokeWeight&&e.push(r)}),(ep||em)&&e.push("straightLine"),e},[$.strokeWeight,ea.strokeWeight,ep,em]);function e_(e){let t=e.x+e.width/2,r=e.y,n=r-(C.q+2+20);return{viewportX:t,viewportY:n}}n.useEffect(()=>{var e;null==(e=null==o?void 0:o.nativeToolbarUpdateSelectedSubmenuItems)||e.call(o,eh)},[o,eh]);let eg=(0,P.L2)(),ef=(0,a.v9)(e=>{let t=e.multiplayerEmoji;return"REACTING_OR_CHATTING"===t.type&&!!t.imageUrl}),eE=(0,n.useCallback)(e=>{if(eg)S.J8.closeWheel();else{let{viewportX:t,viewportY:r}=e_(e);S.J8.handleShortcutPressWithType({viewportX:t,viewportY:r,source:"figma_mobile",openedViaHover:!1,wheelType:"STAMP"}),S.J8.handleShortcutRelease(t,r)}},[eg]),ey=(0,n.useCallback)(e=>{if(eg){let{viewportX:t,viewportY:r}=e_(e);S.J8.updateEmojiWheelPosition(t,r)}},[eg]),ev=(0,P.Ri)(),eb=(0,a.I0)(),eI=(0,a.oR)(),eT=(0,n.useCallback)(e=>{if(ev)eb(v.ko());else{e.y=e.y-30;let t=(0,B._E)(eI.getState());et("clear-tool"),eb(v.KD({initialX:0,initialY:0,sourceRect:e,...t}))}},[eb,eI,ev]),ew=(0,a.v9)(e=>!!e.universalInsertModal.sourceRect),eS=(0,n.useCallback)(e=>{ew&&(e.y=e.y-30,eb(v.Lb({sourceRect:e})))},[eb,ew]);n.useEffect(()=>{var e;let t=[];(eg||ef)&&t.push("STAMP"),ev&&t.push("INSERT"),null==(e=null==o?void 0:o.nativeToolbarUpdateToolsShowingSubmenus)||e.call(o,t)},[o,eg,ef,ev]);let eC=(0,L.wA)(),eO=(0,I.W5)(),eA=(0,M.M)(),eN=(0,a.v9)(e=>e.universalInsertModal);return n.useEffect(()=>{eC&&(eC._native_toolbar_activate_tool=e=>{let t;eA(),(t=e===W&&ee(W)?(0,m.BZ)().ipad_combined_hand_select?"set-tool-default":"set-tool-hand":Q.get(e))&&et(t)},eC._native_toolbar_activate_overflowing_tool=(e,t)=>{switch(t.y=t.y-eO,"INSERT"!==e&&eN.pinned===k.e.NOT_PINNED&&eb(v.ko()),"STAMP"!==e&&eg&&S.J8.closeWheel(),e){case"SHAPE":case"CONNECTOR":break;case"STICKY":er(O.UAh.STICKY);break;case"TYPE":er(O.UAh.TYPE);break;case"SECTION":er(O.UAh.SECTION);break;case"TABLE":er(O.UAh.TABLE);break;case"STAMP":eE(t);break;case"INSERT":eT(t);break;case"FRAME":case"RECTANGLE":case"PEN":case"TEXT":let r;(r=e===W?"set-tool-hand":Q.get(e))&&et(r)}},eC._native_toolbar_update_tool_source_rect=(e,t)=>{setTimeout(()=>{switch(t.y=t.y-eO,e){case"STAMP":ey(t);break;case"INSERT":eS(t)}},200)})},[eC,eO,eA,eE,eT,ey,eS,eg,W,eN.pinned,eb]),null}},149614:(e,t,r)=>{r.d(t,{AK:()=>_,FA:()=>T,Fr:()=>f,Gl:()=>w,Rl:()=>h,U6:()=>O,Wz:()=>g,Zs:()=>I,fS:()=>S,lH:()=>E,oU:()=>m,s3:()=>C,sq:()=>p});var n=r(824801),i=r(961215),a=r(590594),o=r(616466),l=r(380811);let s=[i.I7V.BLACK,i.I7V.RED,i.I7V.ORANGE,i.I7V.YELLOW,i.I7V.GREEN,i.I7V.BLUE,i.I7V.VIOLET,i.I7V.WHITE],c=[{color:i.I7V.RED,palette:"base"},{color:i.I7V.ORANGE,palette:"base"},{color:i.I7V.YELLOW,palette:"base"},{color:i.I7V.GREEN,palette:"base"},{color:i.I7V.BLUE,palette:"base"},{color:i.I7V.VIOLET,palette:"base"},{color:i.I7V.RED_LIGHT,palette:"baseLight"},{color:i.I7V.ORANGE_LIGHT,palette:"baseLight"},{color:i.I7V.YELLOW_LIGHT,palette:"baseLight"},{color:i.I7V.GREEN_LIGHT,palette:"baseLight"},{color:i.I7V.BLUE_LIGHT,palette:"baseLight"},{color:i.I7V.VIOLET_LIGHT,palette:"baseLight"},{color:i.I7V.BLACK,palette:"base"},{color:i.I7V.GRAY_DARK,palette:"base"},{color:i.I7V.GRAY,palette:"baseLight"},{color:i.I7V.GRAY_LIGHT,palette:"baseLight"},{color:i.I7V.WHITE,palette:"base"}],d=[i.I7V.HIGHLIGHT_GRAY,i.I7V.HIGHLIGHT_RED,i.I7V.HIGHLIGHT_ORANGE,i.I7V.HIGHLIGHT_YELLOW,i.I7V.HIGHLIGHT_GREEN,i.I7V.HIGHLIGHT_BLUE,i.I7V.HIGHLIGHT_VIOLET],u=[i.I7V.STICKY_GRAY,i.I7V.STICKY_RED,i.I7V.STICKY_ORANGE,i.I7V.STICKY_YELLOW,i.I7V.STICKY_GREEN,i.I7V.STICKY_BLUE,i.I7V.STICKY_VIOLET,i.I7V.STICKY_PINK,i.I7V.STICKY_GRAY_LIGHT],p=new Map([["pencilStrokeWidth1",16],["pencilStrokeWidth2",12],["pencilStrokeWidth3",8],["pencilStrokeWidth4",6],["pencilStrokeWidth5",3]]),m=new Map([["highlighterStrokeWidth1",56],["highlighterStrokeWidth2",40],["highlighterStrokeWidth3",32],["highlighterStrokeWidth4",24],["highlighterStrokeWidth5",16]]),h=l.X;function _(e){switch(e){case"PENCIL":return s.map(e=>[(0,o.Ol)(e,"base"),o.Dg.get(e)]);case"WHITEBOARD_COLOR":return c.map(({color:e,palette:t})=>[(0,o.Ol)(e,t),o.Dg.get(e)]);case"HIGHLIGHTER":return d.map(e=>[(0,o.Ol)(e,"highlight"),o.Dg.get(e)]);case"STICKY":return u.map(e=>[(0,o.Ol)(e,"sticky"),o.Dg.get(e)]);default:return[]}}function g(e,t,r){let i=e.map(e=>({type:a.WK.presetColor,color:function(e,t){let r=(0,o.yZ)(e,t,"light");return n.Z.parse(r)}(e[0],r),presetIdentifier:e[1]}));return t&&i.push({type:a.WK.colorPicker}),i}function f(e,t){let r=e.map(e=>({type:a.WK.presetImage,presetIdentifier:e.name,imageIdentifier:e.image}));return t&&r.push({type:a.WK.imagePicker}),r}let E=[{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"SQUARE",iconImageURL:"https://static.figma.com/uploads/f79598e8524ca4f2fbc9a962a5d7215fca02e159",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ELLIPSE",iconImageURL:"https://static.figma.com/uploads/23396f7f2f6eef50a1e368b2f0f1cd241d23d3af",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"DIAMOND",iconImageURL:"https://static.figma.com/uploads/6230a108b0c86154a1b0c1080d3e09b5cec4e613",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"TRIANGLE_UP",iconImageURL:"https://static.figma.com/uploads/c9cc7ce416ca0ec4f70dc3b225f09d31615da5b8",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"TRIANGLE_DOWN",iconImageURL:"https://static.figma.com/uploads/d4bda7bcec3cad2d69741a18cbdf63b8da82a99e",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ROUNDED_RECTANGLE",iconImageURL:"https://static.figma.com/uploads/89d2895e6eb7b40fba803d4f672819c003cfb630",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"PARALLELOGRAM_RIGHT",iconImageURL:"https://static.figma.com/uploads/b55ccaf54dec26402c19d2d568c2a59256018d93",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"PARALLELOGRAM_LEFT",iconImageURL:"https://static.figma.com/uploads/42f42dcfa824b4e32e24969b933dffa9bf10084b",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ENG_DATABASE",iconImageURL:"https://static.figma.com/uploads/9e251dc52c5cff0da404e87e08ccce028119432d",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ENG_QUEUE",iconImageURL:"https://static.figma.com/uploads/af1de841856f01e74ad2920744377c0b2432fc97",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ENG_FILE",iconImageURL:"https://static.figma.com/uploads/3aefd3083060dc3d1f8610d9ec5d9294d92395ec",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"ENG_FOLDER",iconImageURL:"https://static.figma.com/uploads/15a91df8c3e46310b0ecf10f8d9de1564fbc0e1b",flashesOnPress:!1}],y=[{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"pencilStrokeWidth1",iconImageURL:"https://static.figma.com/uploads/14c3a9f0a217ea9b2352087f4fa9941f7633e354",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"pencilStrokeWidth2",iconImageURL:"https://static.figma.com/uploads/78a20ca3c78da46c777767a5c2e48b8f08e34f6e",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"pencilStrokeWidth3",iconImageURL:"https://static.figma.com/uploads/e138358eb8b3a07efda73c406e4c61cc3d9fe6d3",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"pencilStrokeWidth4",iconImageURL:"https://static.figma.com/uploads/86d9302f61c6ae08fd157ee9f809410bbc9943a0",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"pencilStrokeWidth5",iconImageURL:"https://static.figma.com/uploads/5501e15bcfa02ecf2a362c7ce4bf7de6af44e268",flashesOnPress:!1}],v=[{itemType:a.Im.divider,itemStringType:"divider",identifier:"VERTICAL_PENCIL_STROKE_DIVIDER",padding:a.V0.none,axis:a.jj.horizontal},{itemType:a.Im.slider,itemStringType:"slider",identifier:"PRIMARY_PENCIL_OPACITY",start:.2,numIntervals:5,step:.2,axis:a.qn.vertical}],b=[{itemType:a.Im.slider,itemStringType:"slider",identifier:"CONTEXTUAL_PENCIL_OPACITY",start:.2,numIntervals:5,step:.2,axis:a.qn.horizontal},{itemType:a.Im.divider,itemStringType:"divider",identifier:"HORIZONTAL_PENCIL_STROKE_DIVIDER",padding:a.V0.none,axis:a.jj.vertical}],I=[...y,...v],T=[...b,...y.slice().reverse()],w=[{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterStrokeWidth1",iconImageURL:"https://static.figma.com/uploads/c147f32cfbda91123406824c6d820ddce58f165a",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterStrokeWidth2",iconImageURL:"https://static.figma.com/uploads/71078416a9e9151bf83f6db32d26955f77a66080",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterStrokeWidth3",iconImageURL:"https://static.figma.com/uploads/c1837ca930ad93b0f6cc7e262e425757c34bca44",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterStrokeWidth4",iconImageURL:"https://static.figma.com/uploads/67c151255ecd8c362abfe8fcfbb20e783c2bbab7",flashesOnPress:!1},{itemType:a.Im.iconAction,itemStringType:"iconAction",identifier:"highlighterStrokeWidth5",iconImageURL:"https://static.figma.com/uploads/14e77850a70a88a5099d521df0e485d2662fdc03",flashesOnPress:!1}],S=E.map(e=>e.identifier),C=y.map(e=>e.identifier),O=w.map(e=>e.identifier)},744183:(e,t,r)=>{r.d(t,{x:()=>l});var n=r(523495),i=r(961215),a=r(680726),o=r(380811);let l=e=>{e&&!e._native_toolbar_get_image_data&&(e._native_toolbar_get_image_data=async e=>{let t=o.X.find(t=>t.image===e);if(t){let e=await (0,a.RC)(t),r=(0,n.oS)(e);return Promise.resolve(r)}{let t=i.Uv3.getCompressedImage(e);if(t){let e=(0,n.oS)(t);return Promise.resolve(e)}}return Promise.resolve(null)})}},65373:(e,t,r)=>{r.d(t,{Uc:()=>e1.U,Nu:()=>ep,dV:()=>i.dV,Ml:()=>e4.M,ii:()=>eL.i,kS:()=>ez,Uo:()=>i.Uo,QZ:()=>U,du:()=>$,z1:()=>z.z,vs:()=>e2.vs,rS:()=>i.rS,kP:()=>i.kP,is:()=>i.is,ny:()=>i.ny,UC:()=>i.UC,$B:()=>i.$B,VP:()=>i.VP,GM:()=>i.GM,ov:()=>e0,xS:()=>i.xS,Nb:()=>e1.N,nY:()=>e3.n,mG:()=>eI.mG,G2:()=>M.G2,Io:()=>ex.I});var n,i=r(939782),a=r(652983),o=r(407908),l=r(87608),s=r.n(l),c=r(337167),d=r(571529),u=r(212984),p=r(970740),m=r(111120),h=r(225592),_=r(54055),g=r(801998),f=r(225468),E=r(172497),y=r(19516);r(365653);var v=r(716250);r(669277),r(618723);var b=r(456496);r(124040),r(131826),r(702348),r(723259),r(686096);var I=r(465268);r(135348);var T=r(733609);r(201248),r(892826),r(852046),r(587487),r(279588);var w=r(332224);let S=(0,E.F)(w.dEd),C="file-retrieval-onboarding",O=I.x.isApple();var A=((n=A||{}).WORKSPACES="workspaces",n.TEAMS="teams",n.PROJECTS="projects",n.EMPTY="empty",n);function N({children:e}){return React.createElement("span",{className:classNames(keyboardShortcut,cx.borderBox.minW20.h20.p4.inlineFlex.itemsCenter.justifyCenter.colorBgSecondary.bRadius2.font12.fontNormal.colorIcon.$)},e)}function L({title:e,description:t,icon:r}){return React.createElement("div",{className:cx.flex.itemsCenter.gap16.$},React.createElement("div",{className:cx.hFitContent.colorBgSecondary.bRadius6.$},r),React.createElement("div",{className:cx.colorText.$},React.createElement(Tx,{id:"onboarding.file_retrieval.section_title_and_description",title:React.createElement("span",{className:cx.textBodyLargeStrong.$},e),description:React.createElement("span",{className:cx.textBodyLarge.$},t)})))}var P=r(363402),R=r(811327),k=r(643826);let D=()=>{let e=(0,o.I0)(),t=(0,_.hC)(),r=(0,o.v9)(e=>(0,T.getPermissionsStateMemoized)(e)),n=a.useCallback(()=>{e(h.sF({searchScope:t?k.$0.COMMUNITY:r.currentUserOrgId?(0,T.canMemberOrg)(r.currentUserOrgId,r)?k.$0.ORG:k.$0.ORG_GUEST:k.$0.PERSONAL}))},[e,t,r]);return n};var M=r(692581),F=r(475045);let x=r(244573);function U(e){let t=e.isMobile??d.ZP.mobile,r=(0,o.I0)(),n=(0,_.hC)(),i=(0,c.Dv)(M.Rq),l=(0,o.v9)(e=>"search"===e.selectedView.view),E=(0,o.v9)(e=>(0,g.kL)(e)),[y,v,b]=function(){let[e,t]=a.useState(i||""),n=a.useCallback(()=>{t(""),r(h.nr({}))},[]);return[e,t,n]}(),I=(0,o.v9)(e=>e.search.parameters.searchScope),T=D(),w=(0,o.v9)(e=>e.selectedView),[S,O]=a.useState(w);a.useEffect(()=>{let e=(0,_.OA)(S)&&(0,_.Qe)(w)||(0,_.Qe)(S)&&(0,_.OA)(w),t=(0,_.Qe)(S)&&(0,_.Qe)(w);e||t||!(y.length>0)||"search"===w.view||b(),O(w),T()},[w]),a.useEffect(()=>{v(i)},[i,v]);let A=e=>{e.preventDefault(),i||T()},N=e=>{A(e)},L=t?e=>{l?history.go(-1):(r(m.fv({view:"search",entryPoint:n?"community":"file_browser",previousView:w&&((0,P.nr)(w)||(0,P.tr)(w))?w:void 0})),A(e))}:N,k=!t&&!e.inSidebar;return a.createElement("div",{className:u.cx.flexGrow1.relative.minW0.$,"data-tooltip-type":f.fR.TEXT,"data-tooltip":E?"Search temporarily disabled":void 0,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":300,"data-onboarding-key":C},t?a.createElement(R.I,{className:E?"search_button--disabledSearchActionMobile--EHTVy search_button--searchActionMobile--zxOlo search_button--searchAction--yuE1s":l?"search_button--searchActionActiveMobile--45U-P search_button--searchActionMobile--zxOlo search_button--searchAction--yuE1s":"search_button--searchActionMobile--zxOlo search_button--searchAction--yuE1s",svg:x,enabled:!0,onClick:L}):a.createElement("div",{className:s()({"search_button--disabledSearchAction--y0SbT search_button--searchAction--yuE1s":E,"search_button--searchAction--yuE1s":!e.inSidebar&&!E,"search_button--searchActionSidebar--C2cj5 search_button--searchAction--yuE1s":e.inSidebar&&!E})},a.createElement("div",{onClick:N,className:u.cx.wFull.$},a.createElement(F.C,{query:y,onQueryChanged:e=>v(e),searchScope:I,entryPoint:n?"community":"file_browser",placeholder:n?(0,p.t)("navbar.navbar.community_search_placeholder"):(0,p.t)("navbar.navbar.file_browser_search_placeholder"),useSidebarStyles:e.inSidebar,useBrowseIANavBarStyles:k,enableResultsPreview:!n}))))}var B=r(391320),V=r(11802),G=r(436649),H=r(916903),W=r(568157),K=r(275540),z=r(640984),Z=r(760794);class Y extends a.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>h.yC.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>G.hg(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>G.W_(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>G.OZ(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>G.k4(this.props.loadingStateFailureReasons,this.getLoadingKey());let t=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:t}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===k.c.FILES){let t=e.searchResults??j,r=this.props.searchResults??j,n=t.length!==r.length;if(!n)for(let e=0;e<t.length;e++)(0,B.qt)(t[e],r[e])||(n=!0);if(n){let e=this.getFilteredResults(r,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,t){return this.props.searchModelType===k.c.FILES?e.filter(e=>{let r=e.model;switch(t.filters.fileType){case H.$Q.ANY:return!0;case H.$Q.DESIGN:return"design"===r.editor_type;case H.$Q.FIGJAM:return"whiteboard"===r.editor_type;case H.$Q.PROTOTYPE:default:return!1}}):e}render(){let e=this.props.searchResults??j,t=this.getFilteredResults(e,this.props.sortFilterConfig);return a.createElement(W.S,{key:"unified-search",toolbar:d.ZP.mobile?a.createElement(K.l,null):void 0,viewbar:a.createElement(Z.c,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:a.createElement(z.K,{searchResults:t,searchScope:this.props.parameters.searchScope,searchModelType:this.props.searchModelType,sortState:this.props.parameters.sortState,onChangeSortState:this.props.onChangeSortState,isLoading:this.isLoading(),didSucceed:this.didSucceed(),didFail:this.didFail(),failureMessage:this.getFailedReason(),query:this.props.completedQuery,planFilter:this.props.parameters.planFilter})})}}Y.displayName="SearchPageView";let j=[],$=(0,o.$j)(e=>{var t;let r=e.search.parameters,n=(0,v.BZ)().search_facets&&"control"!==(0,V.NL)()?(null==(t=r.facetFilters)?void 0:t.searchModelType)?r.facetFilters.searchModelType:k.c.FILES:r.searchModelType,i=e.search.responses[n],a=e.search.completedQueries[n];return{parameters:r,completedQuery:a,searchResults:(null==i?void 0:i.results)||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search,searchModelType:n}},e=>({onChangeSortState:t=>{e(h.ou({sortState:t}))},setScrollTop:t=>{e(h.o1({top:t}))}}))(Y);var q=r(925960),X=r(293351),J=r(654230),Q=r(435613),ee=r(255049),et=r(721154),er=r(295202),en=r(421765),ei=r(249203),ea=r(654653),eo=r(656145),el=r(2440);let es="search_bar--selectedSearchResult--k9j9t",ec="search_bar--searchResultsSeparator--3qkZN",ed=r(328630),eu=r(244573);function ep(e){let{searchBarRef:t,selectedSearchResultIndex:r,onFocusSearchBar:n}=e,i=(0,o.I0)(),l=(0,o.v9)(e=>e.desktopNewTab.isSearchBarFocused),s=(0,o.v9)(e=>e.desktopNewTab.searchQuery),c=(0,o.v9)(e=>e.search.completedQueries[k.c.FILES]),d=(0,er.j)(),{isLoading:u,searchResults:p}=(0,er.q)(),m=(0,o.v9)(e=>(0,ee.ES)(e)),_=(0,a.useCallback)(e=>{""===s&&""!==e&&i(h.Ft({entryPoint:"desktop_new_tab"})),i(ee.ql(e)),i(h.Qf({query:e,searchModelType:k.c.FILES,searchScope:m,debounce:!0,searchTypeBehavior:k.ye.ONE_TYPE,precacheInactiveTypes:!1}))},[i,s,m]),g=(0,a.useCallback)(()=>{i(ee.ql("")),i(h.nr({}))},[i]),f=(0,a.useCallback)(e=>{n(),i(ee.LB(!0)),""===s||e||i(h.Ft({entryPoint:"desktop_new_tab"}))},[i,n,s]),E=(0,a.useCallback)(()=>{i(ee.LB(!1)),i(h.TM())},[i]);return a.createElement("div",{className:"search_bar--root--q5m-I"},a.createElement(em,{ref:t,query:s,onChange:_,onSubmitInput:e=>{e.preventDefault()},clearSearch:g,focusOnMount:!1,isFocused:l,onBlur:E,onFocus:f}),d&&a.createElement(eh,{results:p,completedQuery:c,hasLoaded:!u,selectedIndex:r}))}let em=a.forwardRef((e,t)=>{let{onFocus:r,clearSearch:n}=e,{searchInputRef:i,onMouseDown:o,onMouseUp:l,onClearSearchClick:s,onBlur:c,onSearchKeyDown:d,onSearchChange:u}=(0,J.Hz)(e,t),m=(0,a.useCallback)(()=>{i.current&&(i.current.focus({preventScroll:!0}),r&&r(!0))},[i,r]);return(0,y.O)(m),(0,a.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&(n(),m())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[n,m]),a.createElement("form",{onSubmit:e.onSubmitInput},a.createElement("div",{className:"search_bar--searchContainer--Nkv1c",onMouseDown:e=>{o(e),e.stopPropagation(),e.target.matches("input")||e.preventDefault()},onMouseUp:l,role:"presentation"},a.createElement(Q.n,{className:"search_bar--searchIcon--9j3rS",svg:eu}),a.createElement(X.Q,{ref:i,placeholder:(0,p.t)("desktop_new_tab.search.search_files_placeholder"),className:"search_bar--searchInput--2g9g5 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:e.query,onBlur:c,onChange:u,onKeyDown:d,spellCheck:!1}),!!e.query&&a.createElement(Q.n,{className:"search_bar--xIcon--8Zu2r",svg:ed,onClick:s})))});function eh(e){let t=(0,o.I0)(),r=(0,o.v9)(e=>e.search),n=(0,o.v9)(e=>e.selectedView);return e.hasLoaded&&e.completedQuery&&r.queryId!==r.lastAckedQueryId&&(t(h.TV({lastAckedQueryId:r.queryId})),t(h.uV({sessionId:r.sessionId,query:r.parameters.query,queryId:r.queryId})),ea.ol.Session.trackClientResult(r,n)),a.createElement("div",{className:"search_bar--searchResults--lOjfN",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},role:"presentation"},e.hasLoaded&&e.completedQuery?0!==e.results.length?a.createElement(a.Fragment,null,e.results.map((t,r)=>a.createElement(e_,{key:t.model.key,result:t,isSelected:r===e.selectedIndex,index:r})),a.createElement("div",{className:ec}),a.createElement(eg,{isSelected:"see-all"===e.selectedIndex})):a.createElement("div",{className:"search_bar--emptySearchResults--QcQlN"},a.createElement("p",{className:"search_bar--emptySearchResultsMessage--V5jIc"},a.createElement(p.Tx,{id:"desktop_new_tab.search.no_file_results_matching",searchQuery:a.createElement("span",{className:"search_bar--searchResultsHighlightedQuery--KSBko"},e.completedQuery)}))):a.createElement("div",null,a.createElement(ef,null),a.createElement(ef,null),a.createElement(ef,null),a.createElement(ef,null),a.createElement(ef,null),a.createElement("div",{className:ec}),a.createElement(eE,null)))}function e_(e){var t;let r=(0,o.I0)(),n=(0,o.v9)(e=>e.folders),{result:i,index:l}=e,c=i.model,d=(0,a.useCallback)(e=>{e.preventDefault(),r(et.gz({file:i.model})),r(ee.WN({result:i,index:l,clickAction:ea.ol.Query.ClickAction.CLICK}))},[i,l,r]),u=(0,en.F)(),m=u(c),h=c.folder_id&&(null==(t=n[c.folder_id])?void 0:t.name),_=a.createElement(p.Tx,{id:"desktop_new_tab.edited_at_time_stamp",relativeTime:a.createElement(q.Lt,{date:c.touched_at})}),g=h?a.createElement(a.Fragment,null,h," \xb7 ",_):_;return a.createElement("a",{className:s()({"search_bar--searchResult--LMkun":!0,[es]:e.isSelected}),href:(0,ei.qF)(c),onClick:d},a.createElement(eo.aA,{className:"search_bar--searchResultIcon--KAdHK",type:m}),a.createElement("div",{className:"search_bar--searchResultMetadata--xc09U ellipsis--ellipsis--Tjyfa"},a.createElement("div",{className:"search_bar--searchResultTitle--xIZR1 ellipsis--ellipsis--Tjyfa"},c.name),a.createElement("div",{className:"search_bar--searchResultSubtitle--6GiAE text--fontPos11--2LvXf text--_fontBase--QdLsd"},g)))}function eg(e){let t=(0,o.I0)(),r=(0,o.v9)(e=>e.desktopNewTab.searchQuery),n=(0,o.v9)(e=>e.currentUserOrgId),i=(0,el.BC)(r,n,k.c.FILES);return a.createElement("a",{className:s()({"search_bar--seeAllItem--pYyua":!0,[es]:e.isSelected}),href:i,onClick:()=>t(ee.GV())},a.createElement("p",null,a.createElement(p.Tx,{id:"search.preview_item.see_all_search_results"})))}function ef(){return a.createElement("div",{className:"search_bar--searchResultLoadingItem--Oyq04"},a.createElement("div",{className:"search_bar--loadingIcon--2ojWE search_bar--loadingBox--xITSt"}),a.createElement("div",null,a.createElement("div",{className:"search_bar--loadingTitle--H79rQ search_bar--loadingBox--xITSt"}),a.createElement("div",{className:"search_bar--loadingSubtitle---xiB- search_bar--loadingBox--xITSt"})))}function eE(){return a.createElement("div",{className:"search_bar--seeAllLoadingItem--AOCy6"},a.createElement("div",{className:"search_bar--loadingSeeAll--swZiX search_bar--loadingBox--xITSt"}))}var ey=r(854571),ev=r(721127),eb=r(435804),eI=r(516940),eT=r(182876),ew=r(793200),eS=r(85808),eC=r(290686),eO=r(291904),eA=r(505468),eN=r(276469),eL=r(218323),eP=r(231430),eR=r(339901),ek=r(273562),eD=r(970303),eM=r(370235),eF=r(696026),ex=r(51138),eU=r(633793),eB=r(994399),eV=r(228457);let eG=(0,E.F)(w.InK),eH=(0,E.F)(w.nTI),eW=(0,eO.Y3)(function(){let e=(0,o.I0)(),t=(0,ex.I)(),r=(0,o.v9)(e=>e.modalShown),n=(0,o.v9)(e=>e.search.sessionId),i=(0,c.Dv)(M.B8),l=(0,eU.E)("file_browser",i,!0),s=(0,o.v9)(e=>"search"===e.selectedView.view),d=(0,c.Dv)(M.Rq),[u,p]=(0,c.KO)(eI.cN),m=(0,c.Dv)(eI.xo),h=(0,eF.x)();a.useEffect(()=>()=>{n&&ea.ol.Session.searchModalExit(n)},[n]);let _=a.useCallback(()=>{e(eC.C.endSession()),u&&(p(null),h(k.ce.DROPDOWN,u))},[e,p,u,h]);return r&&"control"!==t?a.createElement(eA.u_,{dispatch:e,absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${eG}px 0`,size:eH,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:_},a.createElement(ey.Sg,null,a.createElement(eL.i.Provider,{value:{setFacetValue:(e,t)=>{l(e,k.c.FILES,t,s,!1,!1)}}},a.createElement(ek.Rt.Provider,{value:ek.Nc.PREVIEW},a.createElement("div",{className:eV.I0},a.createElement(ew.W,null)),"dropdown"===t?a.createElement(eM.j,{id:"facet-toolbar",path:[2]}):null,a.createElement(eS.l,{className:eV.eF},u&&a.createElement("div",{className:eV.kL},a.createElement(eN.u,{facetType:u,id:"facet-panel",path:[3]})),"autocomplete"===t&&a.createElement(eD.e,{id:"suggestions",path:[4]}),d||m.length>0?a.createElement(eR.k,{id:"search-results",path:[5]}):a.createElement(eP.H,{id:"recents",path:[5]})))))):null},eB.U),eK=(0,E.F)(w.InK);function ez(){let e=(0,o.I0)(),t=(0,o.v9)(e=>e.modalShown),r=(0,eb.A6)(),n=D(),[i,l]=(0,c.KO)(M.G2),s=(0,c.Dv)(eI.xo),d=a.useRef(null),u=(0,c.b9)(eI.b6),m=a.useCallback(()=>{if(!d.current||(null==t?void 0:t.type)===eB.U)return;let r=d.current.getBoundingClientRect();e(ev.K4({type:eW,data:{top:r.top-eK,left:r.left-eK}}))},[e,t]);return((0,y.O)(()=>{n()}),a.useEffect(()=>{let t=e=>{e.metaKey&&"/"===e.key&&m()},r=t=>{"Tab"===t.key&&e(ev.VG())};return document.addEventListener("keydown",t),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",t),document.removeEventListener("keydown",r)}},[e,m]),a.useEffect(()=>{"search"!==r.view&&(e(h.nr({})),l(""),u())},[e,r,l,u]),"search"===r.view)?a.createElement("div",{className:"faceted_search_entrypoint--fullResultsSearchWrapper--MXIrX"},a.createElement(ey.Sg,null,a.createElement(ew.W,null))):a.createElement("span",{"data-onboarding-key":C},a.createElement("div",{className:"faceted_search_entrypoint--inputWrapper--uu1FO search--searchContainerSidebarWithSelection--I54MO search--_expandingSearchBoxSidebarContainerBase--Mj7Ol search--searchContainerSidebar--JLCAb",onClick:m,onFocus:m,ref:d,role:"button",tabIndex:0},a.createElement(b.JO,{icon:"search-32"}),a.createElement("div",{className:"faceted_search_entrypoint--contentContainer--4YZBT"},a.createElement(eT.I,null),a.createElement(X.Q,{className:"faceted_search_entrypoint--input--YsWej faceted_search_bar--input--fyJRw",placeholder:0===s.length?(0,p.t)("search.search_bar.placeholder"):"",value:i})),a.createElement("div",{className:"faceted_search_entrypoint--leftFadeContainer--JwJoM faceted_search_bar--leftFadeContainer--qufK3"})))}var eZ=r(594619),eY=r(534187),ej=r(70918),e$=r(761767),eq=r(13155);let eX=r(43185),eJ=r(305257),eQ=r(428179);function e0(e){var t,r,n,l,c,d,h,_,g;let f=(0,o.I0)(),E=a.useRef(null),y=(0,o.v9)(({dropdownShown:e})=>e),v=(0,o.v9)(e=>e.selectedView),b=(0,i.Ae)().valuesToDisplayText,I=(0,ej.dO)(),T=(0,o.v9)(e=>e.orgUsersByOrgId.orgUsers),w=a.useMemo(()=>null!==I&&Object.values(T).some(e=>{var t;return(null==(t=e[I])?void 0:t.permission)===e$.Gu.ADMIN}),[I,T]),S=e.dropdownKey,C=S&&y&&y.type===e.dropdownKey&&y.data&&y.data.targetRect,O=!!S&&!!y&&(y.type===e.dropdownKey||y.type===(0,i.Ae)().dropdownId||y.type===i.Rx||y.type===i.q6.dropdownId||y.type===i.d_||y.type===i.aL),A=E.current,N=[a.createElement(eZ.j.Option,{key:"tile-sort",children:a.createElement("div",{className:u.cx.flex.justifyBetween.itemsCenter.w150.pl16.$},b[e.sortFilterOptions.tileSortFilterConfig.sort.key],a.createElement(Q.n,{svg:eQ})),onClick:e=>{f(eY.LA()),f(m.SP({type:(0,i.Ae)().dropdownId,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}})),e.stopPropagation()}}),a.createElement(eZ.j.Separator,{key:""}),a.createElement(eZ.j.CheckableOption,{key:"grid-view-toggle",checked:e.sortFilterOptions.tileSortFilterConfig.viewMode===H.H6.GRID,onClick:()=>{e.onViewModeChange(H.H6.GRID)},children:(0,p.t)("file_browser.view_mode_toggle.show_as_grid")}),a.createElement(eZ.j.CheckableOption,{key:"list-view-toggle",checked:e.sortFilterOptions.tileSortFilterConfig.viewMode===H.H6.LIST,onClick:()=>{e.onViewModeChange(H.H6.LIST)},children:(0,p.t)("file_browser.view_mode_toggle.show_as_list")})];if((null==(t=e.filters)?void 0:t.orgDeletedDrafts)&&w&&N.unshift(a.createElement(eZ.j.Option,{key:"tile-org-deleted-drafts-filter",children:a.createElement("div",{className:u.cx.flex.justifyBetween.itemsCenter.w150.pl16.$},e.filters.orgDeletedDrafts[e.sortFilterOptions.tileSortFilterConfig.filters.orgDeletedDrafts??""],a.createElement(Q.n,{svg:eQ})),onClick:e=>{f(eY.LA()),f(m.SP({type:i.Rx,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}})),e.stopPropagation()}})),(null==(r=e.filters)?void 0:r.fileType)||e.sortFilterOptions.tileSortFilterConfig.filters.fileType){let t=i.q6.valuesToDisplayText;N.unshift(a.createElement(eZ.j.Option,{key:"tile-file-filter",children:a.createElement("div",{className:u.cx.flex.justifyBetween.itemsCenter.w150.pl16.$},t[e.sortFilterOptions.tileSortFilterConfig.filters.fileType],a.createElement(Q.n,{svg:eQ})),onClick:e=>{f(eY.LA()),f(m.SP({type:i.q6.dropdownId,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}})),e.stopPropagation()}}))}return(null==(n=e.filters)?void 0:n.plan)&&N.unshift(a.createElement(eZ.j.Option,{key:"tile-plan-filter",children:a.createElement("div",{className:u.cx.flex.justifyBetween.itemsCenter.w150.pl16.$},null==(c=e.filters.plan[(null==(l=e.sortFilterOptions.tileSortFilterConfig.filters.plan)?void 0:l.planId)??""])?void 0:c.label,a.createElement(Q.n,{svg:eQ})),onClick:e=>{f(eY.LA()),f(m.SP({type:i.d_,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}})),e.stopPropagation()}})),(null==(d=e.filters)?void 0:d.sharer)&&N.unshift(a.createElement(eZ.j.Option,{key:"tile-sharer-filter",children:a.createElement("div",{className:u.cx.flex.justifyBetween.itemsCenter.w150.pl16.$},e.filters.sharer[e.sortFilterOptions.tileSortFilterConfig.filters.sharedBy??""],a.createElement(Q.n,{svg:eQ})),onClick:e=>{f(eY.LA()),f(m.SP({type:i.aL,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}})),e.stopPropagation()}})),a.createElement("button",{ref:E,onClick:t=>{e.dropdownKey&&A&&f(m.SP({type:e.dropdownKey,data:{targetRect:null==A?void 0:A.getBoundingClientRect()}}))},onMouseDown:e=>e.stopPropagation()},a.createElement("div",{className:s()(u.cx.flex.itemsCenter.bRadius4.pr6.colorIcon.$,{"tile_sort_filter_mobile_dropdown--dropdownSelected--uimRw":O})},a.createElement(Q.n,{svg:eJ}),a.createElement(Q.n,{svg:eX})),C&&a.createElement(eq.AQ,{targetRect:y.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},N),a.createElement(i.VP,{options:e.sortFilterOptions,selectedView:v,dispatch:f,tab:e.tab,isMobile:!0}),a.createElement(i.kP,{config:e.sortFilterOptions.tileSortFilterConfig,tab:e.tab,isMobile:!0}),(null==(h=e.filters)?void 0:h.orgDeletedDrafts)&&a.createElement(i.is,{config:e.sortFilterOptions.tileSortFilterConfig,filterOptions:e.filters.orgDeletedDrafts,tab:e.tab,isMobile:!0}),(null==(_=e.filters)?void 0:_.plan)&&a.createElement(i.ny,{config:e.sortFilterOptions.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab,isMobile:!0}),(null==(g=e.filters)?void 0:g.sharer)&&a.createElement(i.UC,{config:e.sortFilterOptions.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab,isMobile:!0}))}var e1=r(542885),e2=r(917017),e3=r(155986),e4=r(173284)},939782:(e,t,r)=>{r.d(t,{dV:()=>Z,Rx:()=>ea,d_:()=>en,Uo:()=>Y,aL:()=>et,rS:()=>J,kP:()=>ee,is:()=>eo,ny:()=>ei,UC:()=>er,$B:()=>j,VP:()=>es,GM:()=>B,MP:()=>q,xS:()=>z,Ae:()=>el,q6:()=>Q,eE:()=>$});var n=r(652983),i=r(407908),a=r(600486),o=r(46347),l=r(716250),s=r(337167),c=r(594619),d=r(435613),u=r(212984),p=r(970740),m=r(547699),h=r(111120),_=r(225592),g=r(534187),f=r(448694),E=r(847061),y=r(70918),v=r(761767),b=r(112602),I=r(643826),T=r(916903),w=r(13155),S=r(84554);r(375397);var C=r(206279),O=r(173284),A=r(218323),N=r(51138),L=r(633793),P=r(692581),R=r(80148),k=r(885543),D=r(561064);let M="tile_sort_filter--dropdownCollectionContainer--QGtvr",F="tile_sort_filter--sortFilterLabel--PJrQ2 text--fontPos11--2LvXf text--_fontBase--QdLsd",x=c.j.Separator,U=r(527925);class B extends n.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,t=this.props.options.tileSortFilterConfig.viewMode===T.H6.LIST;return n.createElement("div",{className:M},e&&n.createElement(J,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),n.createElement(ee,{config:this.props.options.tileSortFilterConfig}),!t&&!this.props.hideSortMenu&&n.createElement(es,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),t&&n.createElement(S.z,{query:"(max-width: 1120px)"},n.createElement(es,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function V(){return n.createElement("div",{className:F},n.createElement(p.Tx,{id:"tile.sort_filter.sort_label"}))}function G(){return n.createElement("div",{className:F},n.createElement(p.Tx,{id:"tile.sort_filter.filter_label"}))}function H(){return n.createElement("div",{className:F},n.createElement(p.Tx,{id:"tile.sort_filter.from"}))}function W(){return n.createElement("div",{className:F},n.createElement(p.Tx,{id:"tile.sort_filter.plan"}))}function K(){return n.createElement("div",{className:F},n.createElement(p.Tx,{id:"tile.sort_filter.org_deleted_drafts"}))}function z(e){let t=(0,i.I0)();return n.createElement(n.Fragment,null,!e.hideSortMenu&&n.createElement("div",{className:u.cx.flex.$},n.createElement(V,null),n.createElement(es,{dispatch:t,options:e.options,selectedView:e.selectedView,hideSortMenu:e.hideSortMenu})))}function Z(e){let t=(0,E.xJ)(e.userId).user;return n.createElement("div",{className:u.cx.mr4.flex.itemsCenter.$},t&&n.createElement(m.Yt,{user:t,size:14}))}function Y(e){var t,r,a;let o=(0,i.v9)(e=>e.teams),l=(0,i.v9)(e=>e.orgById);if(!(null==(t=e.planOption)?void 0:t.plan_id))return null;let s="org"===e.planOption.plan_type&&e.planOption.plan_id?null==(r=l[e.planOption.plan_id])?void 0:r.img_url:null==(a=o[e.planOption.plan_id])?void 0:a.img_url;return n.createElement("div",{className:u.cx.flex.itemsCenter.$},n.createElement(C.E,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:s}))}function j(e){var t,r,a,o;let l="deletedFiles"===e.selectedView.view,s=(0,i.I0)(),c=(0,y.dO)(),d=(0,i.v9)(e=>e.orgUsersByOrgId.orgUsers),u=n.useMemo(()=>null!==c&&Object.values(d).some(e=>{var t;return(null==(t=e[c])?void 0:t.permission)===v.Gu.ADMIN}),[c,d]),p="sharedWithYou"===e.selectedView.view&&null!=e.sharedWithYouFilters;return n.createElement("div",{className:M},p?n.createElement(n.Fragment,null,(null==(t=e.sharedWithYouFilters)?void 0:t.sharer)&&n.createElement(n.Fragment,null,n.createElement(H,null),n.createElement(er,{config:e.options.tileSortFilterConfig,filterOptions:e.sharedWithYouFilters.sharer})),(null==(r=e.sharedWithYouFilters)?void 0:r.plan)&&n.createElement(n.Fragment,null,n.createElement(W,null),n.createElement(ei,{config:e.options.tileSortFilterConfig,filterOptions:e.sharedWithYouFilters.plan})),(null==(a=e.sharedWithYouFilters)?void 0:a.fileType)&&n.createElement(n.Fragment,null,n.createElement(G,null),n.createElement(ee,{config:e.options.tileSortFilterConfig})),(null==(o=e.sharedWithYouFilters)?void 0:o.orgDeletedDrafts)&&u&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(eo,{config:e.options.tileSortFilterConfig,filterOptions:e.sharedWithYouFilters.orgDeletedDrafts}))):n.createElement(n.Fragment,null,n.createElement(G,null),l&&n.createElement(J,{dispatch:s,options:e.options,selectedView:e.selectedView,hideSortMenu:e.hideSortMenu}),n.createElement(ee,{config:e.options.tileSortFilterConfig})))}B.displayName="TileSortFilter";let $={values:[T.qP.ASC,T.qP.DESC],valuesToDisplayText:(e,t)=>{switch(e){case T.qP.ASC:switch(t){case T.$j.TIME:return(0,p.t)("tile.sort_filter.sort_direction_oldest_first");case T.$j.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,p.t)("tile.sort_filter.sort_direction_ascending")}case T.qP.DESC:switch(t){case T.$j.TIME:return(0,p.t)("tile.sort_filter.sort_direction_newest_first");case T.$j.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,p.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.vE)(e)}}};function q(e){let t=(0,i.I0)(),r=(0,n.useRef)(null),o=(0,i.v9)(e=>e.dropdownShown),s=(null==o?void 0:o.type)===e.dropdownId,u=(0,i.v9)(e=>e.selectedView),m=(0,N.I)(),_=e=>{e.stopPropagation()},f=n=>{t(g.LA()),s?t(h.kp()):r.current&&t(h.SP({type:e.dropdownId,data:{targetRect:r.current.getBoundingClientRect()}})),_(n)},E=()=>{s&&t(h.kp())},y=t=>e.includeSortDirection,v=e.disabled?"tile_sort_filter--dropdownContainerDisabled--gWdUU tile_sort_filter--dropdownContainer--3JW6G text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--3JW6G text--fontPos11--2LvXf text--_fontBase--QdLsd",b=(t,r)=>{(0,a.L9)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${t}`,model:`${e.searchModelType}`,dir:r===T.qP.ASC?"asc":r===T.qP.DESC?"desc":void 0}),e.onChange(t,r)},I=n.createElement(k.E,{dropdownId:e.dropdownId,dropdownChild:n.createElement(R.Z,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:$.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),S=s?n.createElement(w.AQ,{targetRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile,lean:"right",leanPadding:0,maxHeight:e.maxHeight},!e.hideSortOptionLabel&&n.createElement(c.j.CheckableOption,{checked:!1,disabled:!0},n.createElement(p.Tx,{id:"tile.sort_filter.sort_by_label"})),e.values.map(t=>n.createElement(c.j.CheckableOptionTrackable,{key:t,checked:t===e.checkedValue,onClick:()=>{E(),b(t)},children:e.valuesToDisplayText[t]})),e.includeSortDirection&&n.createElement(n.Fragment,null,n.createElement(x,null),n.createElement(c.j.CheckableOption,{checked:!1,disabled:!0},n.createElement(p.Tx,{id:"tile.sort_filter.order_label"})),e.tileSortValues.map(t=>y(e.checkedValue)&&n.createElement(c.j.CheckableOptionTrackable,{key:$.valuesToDisplayText(t,(0,D.f)(e.checkedValue)),checked:e.currentDirection===t,onClick:()=>{E(),b(e.checkedValue,t)},children:$.valuesToDisplayText(t,(0,D.f)(e.checkedValue))})))):null;return e.isMobile?S:n.createElement("div",{className:`${v} ${e.className||""}`,onClick:e=>{_(e),f(e)}},n.createElement("span",{ref:r},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),n.createElement("div",{className:"tile_sort_filter--caretContainer--xvqYJ"},n.createElement(d.n,{svg:U,className:`tile_sort_filter--caret--4uvoG ${s?"tile_sort_filter--caretDown--EPNSS":""}`})),s?(0,l.BZ)().search_facets&&"control"!==m&&"search"===u.view?I:S:null)}let X={dropdownId:"tile-filter-creator-dropdown",values:[T.FN.ANY,T.FN.SELF,T.FN.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[T.FN.ANY]:n.createElement(p.Tx,{id:"tile.sort_filter.created_by_anyone"}),[T.FN.SELF]:n.createElement(p.Tx,{id:"tile.sort_filter.created_by_you"}),[T.FN.OTHER]:n.createElement(p.Tx,{id:"tile.sort_filter.created_by_others"})}};class J extends n.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let t=this.props.options.tileSortFilterConfig,r={...t,filters:{...t.filters,creator:e}};this.props.dispatch(h.lh({selectedView:this.props.selectedView,config:r}))}}render(){return n.createElement(q,{dropdownId:X.dropdownId,values:X.values,textWhenClosedPrefix:X.textWhenClosedPrefix,valuesToDisplayText:X.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}J.displayName="TileFilterCreatorDropdown";let Q={dropdownId:"tile-filter-file-type-dropdown",values:[T.$Q.ANY,T.$Q.DESIGN,T.$Q.FIGJAM],valuesToDisplayText:{[T.$Q.ANY]:n.createElement(p.Tx,{id:"tile.sort_filter.filter_by_all_files"}),[T.$Q.DESIGN]:n.createElement(p.Tx,{id:"tile.sort_filter.filter_by_design_files"}),[T.$Q.FIGJAM]:n.createElement(p.Tx,{id:"tile.sort_filter.filter_by_figjam_files"}),[T.$Q.PROTOTYPE]:n.createElement(p.Tx,{id:"tile.sort_filter.filter_by_prototype_files"})}};function ee(e){let t=(0,i.I0)(),r=(0,N.I)(),a=(0,i.v9)(e=>e.selectedView),o=(0,s.Dv)(P.B8),c=(0,L.E)("file_browser",o,!0),d="search"===a.view,u="recentFiles"===a.view||"sharedWithYou"===a.view||"recentsAndSharing"===a.view,p=u?Q.values.concat([T.$Q.PROTOTYPE]):Q.values;return"search"===a.view&&(0,l.BZ)().search_facets&&"control"!==r?n.createElement(A.i.Provider,{value:{setFacetValue:(e,t)=>{c(e,I.c.FILES,t,d,!1,!1)}}},n.createElement(O.M,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:I.JD.RESOURCE})):n.createElement(q,{dropdownId:Q.dropdownId,values:p,valuesToDisplayText:Q.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:r=>{let n={...e.config,filters:{...e.config.filters,fileType:r}};d&&t(_.dR({fileTypeFilter:r})),t(h.lh({selectedView:a,config:n,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile})}let et="tile-filter-sharer-dropdown";function er(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.selectedView);return n.createElement(q,{dropdownId:et,values:Object.keys(e.filterOptions),valuesToDisplayText:e.filterOptions,includeSortDirection:!1,checkedValue:e.config.filters.sharedBy??"",onChange:n=>{let i={...e.config,filters:{...e.config.filters,sharedBy:n}},a="recentsAndSharing"===r.view?r.tab||b.D.RECENTLY_VIEWED:r.view;(0,f.Ks)(n,a),t(h.lh({selectedView:r,config:i,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile,maxHeight:172})}let en="tile-filter-plan-dropdown";function ei(e){var t,r,a;let o=(0,i.I0)(),l=(0,i.v9)(e=>e.selectedView),s=n.useMemo(()=>{let t={};return Object.entries(e.filterOptions).forEach(([e,r])=>{t[e]=r.label}),t},[e.filterOptions]);if((null==(t=e.config.filters.plan)?void 0:t.planId)&&!s[null==(r=e.config.filters.plan)?void 0:r.planId]){let t={...e.config,filters:{...e.config.filters,plan:{planId:void 0,planType:void 0}}};o(h.lh({selectedView:l,config:t,tab:e.tab}))}return n.createElement(q,{dropdownId:en,values:Object.keys(e.filterOptions),valuesToDisplayText:s,includeSortDirection:!1,checkedValue:(null==(a=e.config.filters.plan)?void 0:a.planId)??"",onChange:t=>{let{plan_id:r,plan_type:n}=e.filterOptions[t],i={...e.config,filters:{...e.config.filters,plan:{planId:r,planType:n}}},a="recentsAndSharing"===l.view?l.tab||b.D.RECENTLY_VIEWED:l.view;(0,f.U6)(r,a,n),o(h.lh({selectedView:l,config:i,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile,maxHeight:500})}let ea="tile-filter-org_deleted_drafts-dropdown";function eo(e){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.selectedView);return n.createElement(q,{dropdownId:ea,values:Object.keys(e.filterOptions),valuesToDisplayText:e.filterOptions,includeSortDirection:!1,checkedValue:e.config.filters.orgDeletedDrafts??"",onChange:n=>{let i={...e.config,filters:{...e.config.filters,orgDeletedDrafts:n}};t(h.lh({selectedView:r,config:i,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile})}let el=(e={})=>({dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[T.BO.CREATED_AT]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_date_created"}),[T.BO.TOUCHED_AT]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_last_modified"}),[T.BO.ACCESSED_AT]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_last_viewed"}),[T.BO.NAME]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_alphabetical"}),[T.BO.TRASHED_AT]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_date_deleted"}),[T.BO.SEARCH_RELEVANCE]:n.createElement(p.Tx,{id:"tile.sort_filter.sort_relevance"}),[T.BO.SHARED_AT]:n.createElement(p.Tx,{id:"tile.sort_filter.date_shared"}),...e}});class es extends n.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>{let t={[T.BO.NAME]:T.qP.ASC,[T.BO.CREATED_AT]:T.qP.DESC,[T.BO.TOUCHED_AT]:T.qP.DESC,[T.BO.TRASHED_AT]:T.qP.DESC,[T.BO.SEARCH_RELEVANCE]:T.qP.DESC,[T.BO.PROJECT_NAME]:T.qP.ASC,[T.BO.ACCESSED_AT]:T.qP.DESC,[T.BO.SHARED_AT]:T.qP.DESC,[T.BO.OWNER]:T.qP.DESC};return t[e]||T.qP.ASC},this.onChange=(e,t)=>{let r=this.props.options.tileSortFilterConfig,n=void 0===t?this.getDefaultSortOrder(e):t,i={...r,sort:{key:e,dir:n}};this.props.dispatch(h.lh({selectedView:this.props.selectedView,config:i,tab:this.props.tab}))}}componentDidMount(){let e=this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key);e||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return n.createElement(q,{...el(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:$.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile})}}es.displayName="TileSortDropdown"},542885:(e,t,r)=>{r.d(t,{N:()=>d,U:()=>s});var n=r(652983),i=r(916903),a=r(939782),o=r(917017),l=r(694658);class s extends n.PureComponent{render(){return n.createElement("div",{className:`${l.nC} ${this.props.className||""}`},n.createElement("div",{className:l.hk},this.props.leftSide),!!this.props.center&&n.createElement("div",{className:l.be},this.props.center),n.createElement("div",{className:l.PZ},this.props.rightSide))}}s.displayName="BasicViewBar";let c=0;class d extends n.PureComponent{constructor(){super(...arguments),this.dropdownId=`view-bar-${c++}`,this.setViewMode=e=>{this.props.onChangeViewModeOption&&this.props.onChangeViewModeOption(e)},this.setSortKey=e=>{if(this.props.onChangeSortOptions){let r;let n=this.props.options;if(n.sortMode.sortKey===e)r=this.props.defaultSortKey&&n.viewMode===i.H6.LIST&&n.sortMode.sortDesc?{sortKey:this.props.defaultSortKey,sortDesc:!1}:{...n.sortMode,sortDesc:!n.sortMode.sortDesc};else{var t=n.sortMode.sortDesc;this.props.initialSortOrders&&void 0!==this.props.initialSortOrders[e]&&(t=this.props.initialSortOrders[e]===i.qP.DESC),r={...n.sortMode,sortDesc:t,sortKey:e}}this.props.onChangeSortOptions(r)}}}render(){let e=this.props.options;return n.createElement(n.Fragment,null,n.createElement(s,{leftSide:n.createElement(a.MP,{dropdownId:this.dropdownId,values:this.props.sortKeys,valuesToDisplayText:this.props.sortKeyDescriptions[e.viewMode],checkedValue:this.props.options.sortMode.sortKey,onChange:this.setSortKey,includeSortDirection:!0,tileSortValues:a.eE.values,currentDirection:e.sortMode.sortDesc?i.qP.DESC:i.qP.ASC}),rightSide:this.props.hideViewModeToggle?null:this.renderViewModeToggle()}))}renderViewModeToggle(){return n.createElement(o.vs,{initialViewMode:this.props.options.viewMode,onViewModeChange:this.setViewMode})}}},869949:(e,t,r)=>{r.d(t,{Dh:()=>g,G8:()=>E,KF:()=>m,NI:()=>u,OF:()=>p,XJ:()=>f,bZ:()=>h,p8:()=>_,zd:()=>d});var n,i,a,o,l,s,c,d=((n=d||{}).SIGN_IN="sign_in",n.CHECK_EMAIL_MAGIC_LINK_SIGN_IN_AFTER_PASSWORD="check_email_magic_link_sign_in_after_password",n.SAML_START="saml_start",n.SIGN_UP="sign_up",n.SIGN_UP_EXTRA_INFO="sign_up_extra_info",n.FORGOT_PASSWORD="forgot_password",n.SENT_PASSWORD_RESET="sent_password_reset",n.RESET_PASSWORD="reset_password",n.VALIDATE_EMAIL="validate_email",n.VALIDATE_CODE="validate_code",n.APP_AUTH_GRANT="app_auth_grant",n.APP_AUTH_REDEEM="app_auth_redeem",n.SSO_GATE="sso_gate",n.EMAIL_ONLY="email_only",n.ACCOUNT_PICKER="account_picker",n.JOIN_ORG="join_org",n.VERIFY_HUMAN="verify_human",n),u=((i=u||{})[i.UNAUTHORIZED=0]="UNAUTHORIZED",i[i.BAD_REQUEST=1]="BAD_REQUEST",i[i.NO_SAML=2]="NO_SAML",i[i.SAML_REQUIRED=3]="SAML_REQUIRED",i[i.MAGIC_LINK_LOGIN_NO_ACCOUNT=4]="MAGIC_LINK_LOGIN_NO_ACCOUNT",i),p=((a=p||{}).EMAIL="email",a.PASSWORD="password",a.VERIFICATION_CODE="verification_code",a.TOTP_KEY="totp_key",a.JOB_TITLE="job_title",a.USAGE_PURPOSE="usage_purpose",a),m=((o=m||{}).WORK="For work",o.PERSONAL="For personal use",o.EDU="For teaching or taking a class",o),h=((l=h||{}).GOOGLE="google",l.SAML="saml",l),_=((s=_||{}).DESKTOP="desktop",s.MIRROR="mirror",s.MOBILE="mobile",s.VSCODE="vscode",s.VSCODE_INSIDERS="vscode-insiders",s.FIGJAM_MOBILE="figjam_mobile",s),g=((c=g||{}).ACCESS_TOKEN="access_token",c.ID_TOKEN="id_token",c);let f="signed_up_from_open_sessions",E="auth_iframe_external_options"},600802:(e,t,r)=>{r.d(t,{DF:()=>o,PL:()=>s,RS:()=>l,Us:()=>c});var n=r(652983),i=r(131826),a=r(319753);function o(e){let{className:t,...r}=e;return n.createElement("button",{className:`${a.MY} ${t}`,type:"button",...r},e.children)}let l=(0,i.z7)(o);function s(e){let{className:t,...r}=e;return n.createElement("button",{className:`${a.yY} ${t}`,type:"button",...r},e.children)}function c(e){let{className:t,...r}=e;return n.createElement("button",{className:`${a.vc} ${t}`,type:"button",...r},e.children)}(0,i.z7)(s)},751548:(e,t,r)=>{r.d(t,{Kv:()=>S,bA:()=>R,bv:()=>N,xe:()=>P,xp:()=>O});var n=r(652983),i=r(63730),a=r(87608),o=r.n(a),l=r(814754),s=r(19516),c=r(337167),d=r(810373),u=r(767310),p=r(217810),m=r(518484),h=r(782051),_=r(435613),g=r(970740),f=r(482979),E=r(21616),y=r(697364),v=r(185137);let b=r(295799),I=r(12303),T=e=>(0,p.LG)(n.useContext(w),`Cannot use ${e} component outside of a ZoomPanContext!`),w=n.createContext(null),S=(0,c.cn)(void 0);function C(e,t){let r=Number.MAX_VALUE;for(let n of e){let{containerDimensions:e,paddingPixels:i,imageWidth:a,imageHeight:o}=n,l=t?t.width:a,s=t?t.height:o;if(l<=0||s<=0)continue;let c=e.width-2*i,d=e.height-2*i;if(c<=0||d<=0)continue;let u=Math.min(c/l,d/s);r=Math.min(r,100*u)}return r}function O(e){let{zoomOnMousePointer:t}=e,r=n.useMemo(()=>e.zoomPercentageOptions.sort((e,t)=>e-t),[e.zoomPercentageOptions]),i=e.initialZoomPercentage??100,a={x:e.initialX??0,y:e.initialY??0},[o,l]=n.useState(!0),[d,p]=n.useState(!0),[m,h]=n.useState({zoomPercentage:i,position:a}),{zoomPercentage:_,position:g}=m,f=n.useCallback(e=>{h(t=>({...t,zoomPercentage:e}))},[]),E=n.useCallback(e=>{h(t=>({...t,position:e}))},[]),v=(0,c.Dv)(S),[b,I]=n.useState(!1),[T,O]=n.useState(null),[A,N]=n.useState(new Set),[L,P]=n.useState(!1);n.useEffect(()=>{if(L&&(!o||0===A.size||v)){p(!1);return}let e=C(A);e<Number.MAX_VALUE&&(f(Math.min(e,100)),P(!0),p(!1))},[o,A,L,v,f]),n.useEffect(()=>{if(!v)return;let e=C(A,v);E({x:-(v.x+v.width/2),y:-(v.y+v.height/2)}),l(!1),f(Math.min(e,100))},[v,A,f,E]),n.useLayoutEffect(()=>{p(!0),v||(l(!0),f(i),E(a))},[e.resetStateOnChangeValue,f]);let R=n.useCallback(e=>{let r,n,i,a;for(let{containerDimensions:o,imageWidth:l,imageHeight:s}of(r=n=Number.MIN_SAFE_INTEGER,i=a=Number.MAX_SAFE_INTEGER,A)){if(l<=0&&s<=0)continue;let c=(o.width+l*e/100-10)/2,d=(o.height+s*e/100-10)/2;t?(r=Math.max(Number.MIN_SAFE_INTEGER,r!==Number.MIN_SAFE_INTEGER?Math.min(r,-c):-c),n=Math.max(Number.MIN_SAFE_INTEGER,n!==Number.MIN_SAFE_INTEGER?Math.min(n,-d):-d),i=Math.min(Number.MAX_SAFE_INTEGER,i!==Number.MAX_SAFE_INTEGER?Math.max(i,c):c),a=Math.min(Number.MAX_SAFE_INTEGER,a!==Number.MAX_SAFE_INTEGER?Math.max(a,d):d)):(r=Math.max(r,-c),n=Math.max(n,-d),i=Math.min(i,c),a=Math.min(a,d))}return{xmin:r,ymin:n,xmax:i,ymax:a}},[A,t]);n.useEffect(()=>{let{xmin:e,ymin:t,xmax:r,ymax:n}=R(_);h(i=>({...i,position:{x:(0,u.uZ)(i.position.x,e,r),y:(0,u.uZ)(i.position.y,t,n)}}))},[_,R]);let[k,D]=n.useState(!1),M=e=>{D(e.ctrlKey)};(0,s.O)(()=>(document.addEventListener("keydown",M),document.addEventListener("keyup",M),()=>{document.removeEventListener("keyup",M),document.removeEventListener("keydown",M)}));let F=e=>{e.preventDefault(),I(!1),O(null)},x=n.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),e.ctrlKey||e.metaKey){let n=e=>(0,u.uZ)(e,r[0]||10,r[r.length-1]||400);return l(!1),h(({position:r,zoomPercentage:i})=>{let a=(0,y.h)(e,k),o=n(100*(i/100*a));if(t){let t=Array.from(A).find(t=>t.containerPosition.x<e.clientX&&t.containerPosition.y<e.clientY&&t.containerPosition.x+t.containerDimensions.width>e.clientX&&t.containerPosition.y+t.containerDimensions.height>e.clientY);if(t){let n=e.clientX-t.containerPosition.x-t.containerDimensions.width/2,a=e.clientY-t.containerPosition.y-t.containerDimensions.height/2,l=(n-r.x)*(1-o/i),s=(a-r.y)*(1-o/i),{xmin:c,ymin:d,xmax:p,ymax:m}=R(o);return{zoomPercentage:o,position:{x:(0,u.uZ)(r.x+l,c,p),y:(0,u.uZ)(r.y+s,d,m)}}}}return{zoomPercentage:o,position:r}}),!1}h(({position:t,zoomPercentage:r})=>{let{xmin:n,ymin:i,xmax:a,ymax:o}=R(r);return{zoomPercentage:r,position:{x:(0,u.uZ)(t.x-e.deltaX,n,a),y:(0,u.uZ)(t.y-e.deltaY,i,o)}}})},[A,r,R,k,t]);n.useEffect(()=>(document.addEventListener("mouseup",F),()=>{document.removeEventListener("mouseup",F)}));let U=n.useRef(null);return n.useEffect(()=>{let e=U.current;if(e)return e.addEventListener("wheel",x,{capture:!0,passive:!1}),()=>e.removeEventListener("wheel",x,{capture:!0})},[x]),n.createElement("div",{ref:U,onMouseUp:F,className:e.className},n.createElement(w.Provider,{value:{zoomPercentageOptions:r,zoomPercentage:_,position:g,containers:A,isFitZoom:o,isLoading:d,setZoomPercentage:f,setPosition:E,setContainers:N,setIsFitZoom:l,setIsLoading:p,initialZoomPercentage:i,handleMouseDown:e=>{e.preventDefault(),I(!0),O({x:e.clientX-g.x,y:e.clientY-g.y})},handleMouseUp:F,handleMouseMove:e=>{if(b&&null!==T){e.stopPropagation();let{xmin:t,ymin:r,xmax:n,ymax:i}=R(_);E({x:(0,u.uZ)(e.clientX-T.x,t,n),y:(0,u.uZ)(e.clientY-T.y,r,i)})}}}},e.children))}function A({canvasRef:e,containerRef:t,containerStyle:r,containerClassName:i,handleMouseMove:a,handleMouseDown:l,isDrawn:s,children:c}){return n.createElement("div",{className:o()(i,v.bv),style:r,ref:t,onMouseDown:l,onMouseMove:a},!s&&n.createElement(h.TK,{className:v.V_}),n.createElement("canvas",{ref:e,className:v.AG}),c&&n.createElement("div",{style:{zIndex:1,width:"100%",height:"100%",overflow:"clip"}},c))}function N(e){let{selectionBoxes:t,Overlay:r}=e,{data:a,width:o,height:s,scale:c}=e.image,d=n.useRef(null),u=(0,l.y)(d)??l.Q,p=n.useRef(null),h=24*c,{zoomPercentage:_,position:y,setContainers:v,handleMouseDown:b,handleMouseMove:I,isLoading:w}=T("ZoomPanCanvasContainer"),[S,C]=n.useState(!1);n.useEffect(()=>{var t;let r=(null==(t=d.current)?void 0:t.getBoundingClientRect())??{x:0,y:0},n={containerPosition:{x:r.x,y:r.y},containerDimensions:u,imageNode:i.findDOMNode(p.current),imageHeight:s/c,imageWidth:o/c,paddingPixels:e.paddingPixels??10};return v(e=>new Set([...e,n])),()=>{v(e=>(e.delete(n),e))}},[v,s,o,c,u,e.paddingPixels]);let O=n.useMemo(()=>a instanceof HTMLImageElement?(0,E.Bz)(a):(0,E.dk)(a,new m.OW(o,s)),[a,o,s]),N=n.useMemo(()=>{let e=document.createElement("canvas");return e.width=o+2*h,e.height=s+2*h,e},[o,s,h]),L=Math.floor(o*_/100),P=Math.floor(s*_/100);n.useEffect(()=>{let e=N.getContext("2d");if(_<=25?e.imageSmoothingQuality="medium":_<=50&&(e.imageSmoothingQuality="low"),e.clearRect(0,0,N.width,N.height),e.drawImage(O,h,h,L,P),t){let r=function(t,r){for(let a of(e.strokeStyle=n[r],e.lineWidth=2*c,t))a&&e.strokeRect(a.x*i+h,a.y*i+h,a.width*i,a.height*i)},n={added:"#14ae5c",changed:"#ffcd29",removed:"#f24822"},i=c*_/100;if(r(t.added,"added"),r(t.changed,"changed"),r(t.removed,"removed"),t.active){r([t.active],t.state),e.font=`400 ${11*c}px Inter`;let a="changed"===t.state?(0,g.t)("collaboration.branching_chunk.phase_updated"):"removed"===t.state?(0,g.t)("collaboration.branching_chunk.phase_removed"):(0,g.t)("collaboration.branching_chunk.phase_created"),o=e.measureText(a).width,l=Math.floor(t.active.x*i-c+h),s=Math.floor(t.active.y*i-22*c+h);e.fillStyle=n[t.state],e.beginPath(),e.roundRect(l,s,o+8*c,18*c,2*c),e.fill(),e.fillStyle="changed"===t.state?"#000000":"#ffffff",e.fillText(a,l+4*c,s+13*c)}}},[O,_,t,h,c,N,o,s,L,P]);let R=n.useCallback((e,t)=>[e/2-o/2*_/100,t/2-s/2*_/100],[o,s,_]),[k,D]=n.useState(void 0);return n.useEffect(()=>{if(!d.current||0===N.width||0===N.height||!u||w)return;let e=u.width,t=u.height,n=i.findDOMNode(p.current),a=n.getContext("2d"),l=window.devicePixelRatio||1,m=l*c,_=e*m,g=t*m;n.width!==_||n.height!==g?(n.width=_,n.height=g,n.style.width=e+"px",n.style.height=t+"px",a.scale(l,l)):a.clearRect(0,0,_,g);let[E,v]=R(e*c,t*c),b=Math.floor(E+y.x*c)-h,I=Math.floor(v+y.y*c)-h;if(a.drawImage(N,b,I),r){let e=L/o,t=P/s,r=f.o.identity();r.translate((b+h)/c,(I+h)/c),r.scale(e,t),D(r)}S||C(!0)},[y.x,y.y,N,R,d,h,c,w,t,u,S,_,L,P,o,s,r]),n.createElement(A,{canvasRef:p,containerRef:d,containerStyle:e.style,containerClassName:e.className,handleMouseDown:b,handleMouseMove:I,isDrawn:S},r&&k&&n.createElement(r,{transform:k}))}let L=(e,{sx:t,sy:r,sw:n,sh:i,dh:a,dw:o,dx:l,dy:s,scale:c,canvas:d})=>{e.drawImage(d,t*c,r*c,n*c,i*c,l,s,o,a)};function P(e){let{image:t,Overlay:r}=e,a=n.useRef(null),o=(0,l.y)(a)??l.Q,s=n.useRef(null),c=window.devicePixelRatio||0,d=n.useMemo(()=>o!==l.Q?function(e,t,r=1){let{width:n,height:i}=e.nodeBounds,a=Math.min(t.width/n,t.height/i)*r;return e.getImage({scale:a})}(t,o,c):void 0,[t,o,c]);n.useEffect(()=>{null===d&&t.showError()},[d,t]);let[u,p]=n.useState(null),{zoomPercentage:h,position:_,setContainers:g,handleMouseDown:y,handleMouseMove:v,isLoading:b}=T("ZoomPanCanvasContainer"),[I,w]=n.useState(!1);n.useEffect(()=>{var r;let n=(null==(r=a.current)?void 0:r.getBoundingClientRect())??{x:0,y:0},l={containerPosition:{x:n.x,y:n.y},containerDimensions:o,imageNode:i.findDOMNode(s.current),imageWidth:t.nodeBounds.width,imageHeight:t.nodeBounds.height,paddingPixels:e.paddingPixels??10};return g(e=>new Set([...e,l])),()=>{g(e=>(e.delete(l),e))}},[g,t,o,e.paddingPixels]);let S=n.useMemo(()=>d&&d.data.length>0?{canvasSpaceBounds:d.canvasSpaceBounds,scale:d.scale,canvas:(0,E.dk)(d.data,new m.OW(d.width,d.height))}:null,[d]),C=n.useMemo(()=>u&&u.data.length>0?{canvasSpaceBounds:u.canvasSpaceBounds,scale:u.scale,canvas:(0,E.dk)(u.data,new m.OW(u.width,u.height))}:null,[u]),O=n.useMemo(()=>{if(!a.current||b||!o)return null;let e=o.width,r=o.height,n=h/100,i=t.nodeBounds;return{canvasWidth:e,canvasHeight:r,zoomFactor:n,createImageSpec:({canvasSpaceBounds:t,canvas:a,scale:o},l)=>{let s=e/2-i.width*n/2+(t.x-i.x)*n,c=r/2-i.height*n/2+(t.y-i.y)*n,d=Math.floor(s+l.x),u=Math.floor(c+l.y),p=Math.max(-d/n,0),m=Math.max(-u/n,0),h=Math.min(t.width-p,e/n),_=Math.min(t.height-m,r/n);return{x:d,y:u,scale:o,sx:p,sy:m,sw:h,sh:_,dx:Math.max(0,d),dy:Math.max(0,u),dw:h*n,dh:_*n,canvas:a}}}},[b,o,h,t.nodeBounds]),N=n.useMemo(()=>O&&S&&O.createImageSpec(S,_),[O,S,_]),P=n.useMemo(()=>O&&C&&O.createImageSpec(C,_),[O,C,_]);n.useEffect(()=>{if(!N||!(null==O?void 0:O.canvasHeight)||!(null==O?void 0:O.canvasWidth))return;let{canvasHeight:e,canvasWidth:t}=O,r=requestAnimationFrame(()=>{let r=i.findDOMNode(s.current),n=r.getContext("2d");r.width!==t||r.height!==e?(r.width=t*c,r.height=e*c,r.style.width=t+"px",r.style.height=e+"px",n.scale(c,c)):n.clearRect(0,0,t,e),L(n,N),P&&L(n,P),I||w(!0)});return()=>cancelAnimationFrame(r)},[a,b,o,I,O,d,r,N,P,h,c]);let R=n.useMemo(()=>{if(!r||!(null==N?void 0:N.x)||!(null==N?void 0:N.y)||!(null==O?void 0:O.zoomFactor))return;let e=f.o.identity();return e.translate(N.x,N.y),e.scale(O.zoomFactor,O.zoomFactor),e},[null==N?void 0:N.x,null==N?void 0:N.y,null==O?void 0:O.zoomFactor,r]);return n.useEffect(()=>{if(!N||(null==O?void 0:O.zoomFactor)===void 0)return;let e={x:N.sx,y:N.sy,width:N.sw,height:N.sh},r=setTimeout(()=>{let r=t.getImage({scale:O.zoomFactor*c,clipRect:e});p(r)},200);return()=>clearTimeout(r)},[N,null==O?void 0:O.zoomFactor,t,c]),n.createElement(A,{canvasRef:s,containerRef:a,containerStyle:e.style,containerClassName:e.className,handleMouseDown:y,handleMouseMove:v,isDrawn:I},r&&R&&n.createElement(r,{transform:R}))}function R(e){let{zoomPercentage:t,setZoomPercentage:r,isFitZoom:i,setIsFitZoom:a,setPosition:o,zoomPercentageOptions:l}=T("ZoomSelectorToolbar"),s=(0,c.KO)(S)[1];n.useEffect(()=>{if(!e.keyboardShortcutsEnabled)return;let t=e=>{if(!e.metaKey&&!e.ctrlKey)return;let t=!0;switch(e.keyCode){case d.sr.DASH:f();break;case d.sr.EQUALS:h();break;default:t=!1}t&&(e.preventDefault(),e.stopPropagation())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)});let u=e=>{let r=0,n=l.length-1;for(;r<=n;){let e=Math.floor((r+n)/2);if(l[e]===t)return e;l[e]>t?n=e-1:r=e+1}return e?n:r},p=t>=l[l.length-1],m=t<=l[0],h=()=>{p||(a(!1),r(l[u(!0)+1]))},f=()=>{m||(a(!1),r(l[u(!1)-1]))},E=(e,t,r,i)=>n.createElement("button",{"aria-label":"ZOOM_IN"===t?(0,g.t)("collaboration.branching.zoom_in"):(0,g.t)("collaboration.branching.zoom_out"),className:i?v.Cd:v.bY,onClick:r},n.createElement(_.n,{svg:e,useOriginalSrcFills_DEPRECATED:!0}));return n.createElement("div",{className:e.className},n.createElement("div",{className:v.a$},E(I,"ZOOM_OUT",f,m),n.createElement("button",{onClick:()=>{s(void 0),i?r(100):o({x:0,y:0}),a(!i)},className:v.sG},i?(0,g.t)("collaboration.branching.fit"):`${Math.round(t)}%`),E(b,"ZOOM_IN",h,p)))}},618723:(e,t,r)=>{r.d(t,{$c:()=>z,BN:()=>V,Bd:()=>b,Cr:()=>el,Cx:()=>C,DF:()=>w,E0:()=>k,Ev:()=>ee,F7:()=>L,G2:()=>P,GA:()=>G,HG:()=>x,Ki:()=>eu,MM:()=>$,OK:()=>O,Ok:()=>Y,PL:()=>A,RS:()=>S,Sc:()=>Q,U9:()=>H,UA:()=>e_,UU:()=>es,VG:()=>D,VM:()=>F,Xd:()=>T,Z6:()=>ec,ZP:()=>Z,ZU:()=>ed,__:()=>ea,fE:()=>X,hE:()=>I,hI:()=>en,hS:()=>R,lW:()=>U,oD:()=>eh,oi:()=>W,pE:()=>q,pJ:()=>N,rU:()=>eo,v_:()=>ei,xZ:()=>ep,yi:()=>em});var n=r(652983),i=r(422876),a=r(87608),o=r.n(a),l=r(372871),s=r(810373),c=r(510666),d=r(204829),u=r(293351),p=r(435613),m=r(525699),h=r(225468),_=r(131826),g=r(448694),f=r(825028),E=r(319753);let y=r(103757),v=null;function b(e){v=e}function I(e){return n.createElement("div",{className:o()(E.DN,e.reversed&&E.Eb,e.className)},e.children)}class T extends d.wA{constructor(){super(...arguments),this.onKeyDown=e=>{v&&v(e)||(this.props.onKeyDown&&this.props.onKeyDown(e),e.keyCode===s.sr.ESCAPE&&e.target.blur())},this.onClick=d.hO(this,"click",e=>{this.props.onClick&&this.props.onClick(e)}),this.onPointerDown=d.FS(this,"pointerdown",e=>{this.props.onPointerDown&&this.props.onPointerDown(e)})}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.recordingKey,delete e.dataTestId,this.props.onClick&&this.props.recordingKey&&(e.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(e.onPointerDown=this.onPointerDown),n.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}T.displayName="ButtonBase";class w extends n.Component{render(){let{fullWidth:e,...t}=this.props;return n.createElement(T,{defaultClass:o()(E.MY,e&&E.yD),...t})}}w.displayName="ButtonPrimary";let S=(0,_.z7)(w);class C extends n.Component{render(){let{fullWidth:e,...t}=this.props;return n.createElement(T,{defaultClass:o()(E.wI,e&&E.yD),...t})}}C.displayName="BigButtonPrimary";let O=(0,_.z7)(C);class A extends n.Component{render(){return n.createElement(T,{defaultClass:E.yY,type:"button",...this.props})}}A.displayName="ButtonSecondary";let N=(0,_.z7)(A);class L extends n.Component{render(){let{fullWidth:e,...t}=this.props;return n.createElement(T,{defaultClass:o()(E.y8,e&&E.yD),type:"button",...t})}}L.displayName="BigButtonSecondary";let P=(0,_.z7)(L);class R extends n.Component{render(){return n.createElement(T,{defaultClass:E.pA,type:"button",...this.props})}}R.displayName="ButtonSecondaryNegative",(0,_.z7)(R);class k extends n.Component{render(){return n.createElement(T,{defaultClass:E.R2,type:"button",...this.props})}}k.displayName="ButtonNegative";let D=(0,_.z7)(k);class M extends n.Component{render(){return n.createElement(T,{defaultClass:E.oK,type:"button",...this.props})}}M.displayName="BigButtonNegative";class F extends n.Component{render(){return n.createElement(T,{defaultClass:E.uo,...this.props})}}F.displayName="ButtonWhite";let x=(0,_.z7)(F);class U extends n.Component{render(){return n.createElement(T,{defaultClass:E.$8,...this.props})}}U.displayName="ButtonInverse";class B extends n.Component{render(){let{fullWidth:e,...t}=this.props;return n.createElement(T,{defaultClass:o()(E.gr,e&&E.yD),...t})}}B.displayName="BigButtonInverse";let V=(0,_.z7)(B);class G extends n.Component{render(){return n.createElement(T,{defaultClass:E.qF,...this.props})}}G.displayName="ButtonGreen";class H extends n.Component{render(){let{customClassName:e,...t}=this.props;return n.createElement(T,{defaultClass:E.Wy,className:e,...t})}}H.displayName="ButtonGrey";let W=(0,_.z7)(G);class K extends n.Component{render(){return n.createElement(T,{defaultClass:this.props.solidWhenDisabled?E.kB:E.rk,...this.props})}}K.displayName="BigButtonGreen",(0,_.z7)(K);class z extends n.Component{render(){return n.createElement(T,{defaultClass:E.ZE,...this.props})}}z.displayName="BigButtonBlack",(0,_.z7)(z);class Z extends n.Component{render(){let e=`${E.MY} ${this.props.className||""}`,t={...this.props,className:e,rel:"noopener"};return n.createElement("a",{...t},this.props.children)}}Z.displayName="ButtonLink";let Y=(0,_.z7)(Z);class j extends n.Component{render(){let{fullWidth:e,...t}=this.props,r=o()(E.wI,this.props.fullWidth&&E.yD),i=`${r} ${this.props.className||""}`;return t={...t,className:i,rel:"noopener"},n.createElement("a",{...t},this.props.children)}}j.displayName="ButtonLink";let $=(0,_.z7)(j);class q extends n.Component{render(){let e=`${E.yY} ${this.props.className||""}`,t={...this.props,className:e,rel:"noopener"};return n.createElement("a",{...t},this.props.children)}}q.displayName="ButtonSecondaryLink";let X=(0,_.z7)(q);class J extends n.Component{render(){let e=`${E.VJ} ${this.props.className||""}`,t={...this.props,className:e,rel:"noopener"};return n.createElement("a",{...t},this.props.children)}}J.displayName="BigButtonSecondaryLink",(0,_.z7)(J);let Q=n.forwardRef(function({className:e,...t},r){return n.createElement(u.Q,{className:o()(E.Y2,e),...(0,c.R)(t),ref:r})});(0,_.v8)(Q);class ee extends n.Component{render(){let e=`${E.px} ${this.props.className||""}`,t={...this.props,className:e};return n.createElement(u.Q,{...t})}}ee.displayName="BigTextInput";let et=(0,_.v8)(u.Q),er=r(174341);class en extends n.Component{render(){return n.createElement("div",{className:this.props.className||(this.props.disabled?E.yq:E._1)},n.createElement("label",{htmlFor:this.props.htmlName,className:o()(E.yd,{[E.XX]:this.props.value,[E.vU]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&n.createElement(et,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onBlur:this.props.onBlur,onFocus:this.props.onFocus,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?g.r4.POPULATED_COMPLETE:g.r4.NOT_POPULATED,dataTestId:this.props.dataTestId,required:this.props.required}),!this.props.trackingFieldName&&n.createElement(u.Q,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,dataTestId:this.props.dataTestId,required:this.props.required}),this.props.tooltip&&n.createElement(p.n,{className:E.DJ,svg:er,"data-tooltip-type":h.fR.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class ei extends n.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===s.sr.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${E.MJ} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${E.Sc}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:t,checked:r,...a}=this.props;return n.createElement("div",{className:E.Ti},n.createElement("input",{...a,type:"checkbox",onFocus:this.onFocus,className:t||this.classNameForInput(),checked:r}),r?n.createElement("div",{className:E.RS},n.createElement(m.r,{svg:e??y},n.createElement(i.x,null))):null)}}function ea(e){let t=`${E.PS} ${e.className||""}`;return n.createElement("label",{...e,className:t})}ei.displayName="Checkbox";let eo=f.r,el=(0,_.z7)(eo);class es extends n.Component{render(){let{trusted:e,className:t,...r}=this.props,i=`${E.sx} ${t||""}`,a={...r,className:i,rel:e?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.E)(this.props.href)}};return n.createElement("a",{...a},this.props.children)}}es.displayName="Link";let ec=(0,_.z7)(es);class ed extends n.Component{render(){let e=`${E.Q0} ${this.props.className||""}`,t={...this.props,className:e};return n.createElement("select",{...t})}}function eu(e){return"x"===e.direction?n.createElement("div",{style:{width:8*e.multiple},"aria-hidden":"true"}):n.createElement("div",{style:{height:8*e.multiple},"aria-hidden":"true"})}ed.displayName="BigSelect",eu.displayName="Spacing";let ep=(0,_.z7)(p.n),em=(0,_.z7)(e=>n.createElement("a",{...e},e.children));function eh(e){return n.createElement(T,{defaultClass:o()(E.q5,e.className),...e})}let e_=(0,_.z7)(eh)},987786:(e,t,r)=>{r.d(t,{vb:()=>t_,oT:()=>tu});var n,i=r(652983),a=r(407908),o=r(483243),l=r(600486),s=r(256768),c=r(19516),d=r(716250),u=r(337167),p=r(810373),m=r(669277),h=r(204829),_=r(680356),g=r(594619),f=r(313653),E=r(970740),y=r(303980);let v=class extends i.PureComponent{constructor(e){super(e),this.state={loaded:!1,error:null,isOpen:!1}}componentDidMount(){v.singleton=this}componentWillUnmount(){v.singleton=null}init(){return(0,y.C8)().then(()=>{this.state.loaded||(window.zE("webWidget","hide"),window.zE("webWidget:on","open",()=>{this.setState({isOpen:!0})}),window.zE("webWidget:on","close",()=>{this.setState({isOpen:!1}),this.close(!0)})),this.setState({loaded:!0,error:null})}).catch(e=>{throw e&&console.error("Unable to load Zendesk Web Widget:",e),this.setState({loaded:!1,error:e}),e})}open(e,t){this.init().then(()=>(0,y.LZ)({name:this.props.userName,email:this.props.userEmail},e)).then(()=>{this.state.isOpen||(0,y.PC)()}).catch(()=>{this.props.dispatch(f.l.flash((0,E.t)("help_widget.zendesk.unavailable_error_message",{supportEmail:"support@figma.com"})))})}close(e=!1){this.state.loaded&&(this.state.isOpen||e)&&(window.zE("webWidget","hide"),window.zE("webWidget","close"))}isError(){return!!this.state.error}render(){return i.createElement("div",{className:"zendesk-web-widget"})}};v.singleton=null;var b=r(333222),I=r(435613),T=r(212984),w=r(983824),S=r(721127),C=r(864974),O=r(329660),A=r(121108),N=r(158774),L=r(200273),P=r(312616),R=r(217421),k=r(862610),D=r(488160),M=r(898080),F=r(733609),x=r(605508),U=r(220949),B=r(833426),V=r(702348),G=r(693693),H=r(536562),W=r(723259),K=r(201248),z=r(498266),Z=r(82409),Y=r(216885),j=r(16249);let $="seen_bug_reporter_modal",q=(0,H.n_)($);function X(){let e=(0,a.I0)(),t=(0,u.Dv)(q),r=(0,V.I)({id:W.G.BugReporterMachine,priority:K.b4.SECONDARY_MODAL},[t]),n=(0,a.v9)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),o=!!n&&(0,s.Z)().diff((0,s.Z)(n),"days")>=14,l=(0,u.Dv)(Y.GG);return((0,G.J)(r.uniqueId,"Fullscreen Loaded",()=>{o&&r.show({canShow:e=>!e,onShow:()=>e(C.v({[$]:!0}))})}),i.useEffect(()=>{l&&r.complete()},[r,l]),r.isShowing&&(0,d.BZ)().bug_reporter)?i.createElement(Z.g,{step:{modalType:z.w8.POINTER,element:J,trackingContextName:"bug_reporter_modal",onboardingKey:"bug-reporter-modal-key",width:250,topPadding:8,shouldNotWrapInParagraphTag:!0},onClickPrimaryCta:r.complete,onClose:r.complete,dismissModal:r.complete,dispatch:e}):null}function J(){return i.createElement("div",{className:j.kW},i.createElement("div",{className:j.$l},i.createElement(E.Tx,{id:"bug_reporter.announcement.title"})),i.createElement("div",{className:j.dV},i.createElement(E.Tx,{id:"bug_reporter.announcement.content"})))}var Q=r(731113),ee=r(953195),et=r(692647),er=r(418465),en=r(618723),ei=r(686926),ea=r(935086),eo=r(229273),el=r(437651),es=r(900294);function ec(...e){let t=(0,a.I0)(),r=(0,a.v9)(e=>e.userFlags),n=e.reduceRight((e,t)=>(e<<1)+(r[t]?1:0),0),i=r=>{let n=r,i=e.reduce((e,t)=>{let r=!!(1&n);return n>>=1,{...e,[t]:r}},{});t(C.v(i))};return{flagNumberVal:n,incrementFlag:()=>{n+1>=Math.pow(2,e.length)||i(n+1)},decrementFlag:()=>{n<=0||i(n-1)},setFlagVal:t=>{let r=Math.max(0,t);i(r=Math.min(r,Math.pow(2,e.length)-1))}}}var ed=r(131826),eu=r(413110),ep=r(687496),em=r(787449),eh=r(326714),e_=r(291904),eg=r(213104),ef=r(887522),eE=r(835994);let ey=(0,e_.Y3)(function({teamId:e,dismissModal:t,maxSeenCount:r=1/0}){let n=(0,i.useMemo)(()=>(0,eE.l6)(),[]),o=(0,a.I0)(),{flagNumberVal:l,incrementFlag:s}=ec(...eo.jF);return((0,c.O)(()=>{r!==1/0&&l<=r&&s()}),l>r)?null:i.createElement(ed.Ui,{name:"CollectiveUpsellsFullscreenModal"},i.createElement(ef.V,{...n,dismissModal:()=>{t?t():o(S.hV())},clickSecondaryBtn:()=>{o(S.K4({type:eg.nY,data:{teamId:e??void 0,upsellSource:em.V.COLLECTIVE_UPSELLS_MODAL,openCheckoutInNewTab:!0}}))},clickPrimaryBtn:()=>{e?o(eu.F2({teamId:e,openInNewTab:!0,currency:(0,ep.x_)(),billingPeriod:eh.tv.ANNUAL})):o(S.K4({type:eg.n2,data:{plan:eg.sR.PRO,upsellSource:em.V.COLLECTIVE_UPSELLS_MODAL}}))}}))},"CollectiveUpsellsFullscreenModal");var ev=r(519781),eb=r(299482),eI=r(367674),eT=r(597837),ew=r(65249);function eS({dismissModal:e,descriptionText:t,headerText:r,ctaPrimaryText:n,ctaSecondaryText:a,imgSrc:o,clickSecondaryBtn:l=e,clickPrimaryBtn:s}){return i.createElement(ed.Ui,{name:"help_card_widget_base"},i.createElement(ei.E.div,{className:"help_card_widget_base--modal--w6-oq",initial:{translateY:500},animate:{translateY:0},transition:{duration:.6,ease:"easeInOut",translateY:{duration:1}}},i.createElement(eI.j,{verticalAlignItems:"center",padding:12},i.createElement(ew.x,{fontWeight:"medium",fontSize:13},r),i.createElement(eI.m,null),i.createElement(ev.PZ,{onClick:e})),i.createElement(i.Suspense,{fallback:i.createElement("div",{className:T.cx.w300.h150.colorBgSecondary.$})},i.createElement("img",{style:eb.sx.colorBorder.b1.colorBorder.bl0.br0.$,src:o,alt:"professional features animation"})),i.createElement("div",{style:eb.sx.p16.pb0.$},i.createElement(ew.x,{fontSize:11},t)),i.createElement(eI.j,{horizontalAlignItems:"end",spacing:8,padding:16},i.createElement(eT.J,{onClick:l},a),i.createElement(eT.J,{variant:"primary",onClick:s},n))))}function eC({shouldHide:e,dismissModal:t,maxSeenCount:r=1/0,teamId:n,editorType:o}){let{flagNumberVal:l,incrementFlag:s}=ec(...eo.Wx),d=(0,a.I0)(),[u,p]=i.useState(e||l>r);return((0,c.O)(()=>{!u&&r!==1/0&&l<=r&&s()}),u)?null:i.createElement(ed.Ui,{name:"CollectiveUpsellsWidget",properties:{value:l}},i.createElement(eS,{dismissModal:t,descriptionText:(0,E.t)("help_widget.collective_upsells_widget.description_text"),headerText:(0,E.t)("help_widget.collective_upsells_widget.header_text"),ctaSecondaryText:(0,E.t)("help_widget.collective_upsells_widget.cta_dismiss"),ctaPrimaryText:(0,E.t)("help_widget.collective_upsells_widget.cta_see_how"),imgSrc:"https://static.figma.com/uploads/14cf876ff6f8f44e32ebb92587d7d0b7a1c2704a",clickPrimaryBtn:()=>{d(S.K4({type:ey,data:{teamId:n,editorType:o,dismissModal:()=>{t(),d(S.hV())}}})),p(!0)}}))}var eO=r(587487);function eA({targetKey:e,dismissModal:t}){return i.createElement(ed.Ui,{name:"collective_upsells_widget_tooltip"},i.createElement(eO.Qm,{width:302,topOffset:-10,targetKey:e,dismissModal:t,shouldNotWrapInParagraphTag:!0},i.createElement(eI.j,{direction:"vertical"},i.createElement(ew.x,{i18nId:"help_widget.collective_upsells_widget_tooltip.header_text",fontWeight:"semi-bold",fontSize:13,color:"onbrand"}),i.createElement(ew.x,{i18nId:"help_widget.collective_upsells_widget_tooltip.description_text",fontSize:11,fontWeight:"medium",color:"onbrand"}))))}let eN="collective_upsell_widget_dismissed",eL="collective_upsell_first_file_created",eP=[eN,eL,...eo.Wx,...eo.jF],eR=(0,H.OD)(eL),ek=(0,ea.xM)(H.PW,e=>{let t=[...eo.Wx,...eo.jF].map(t=>{var r;return null==(r=e[t])?void 0:r.updatedAt}).filter(e=>null!=e);return Math.max(...t.map(Number))});function eD({dropdownOpen:e}){let[t,r]=i.useState(!1),n=(0,u.Dv)(eR),o=(0,u.Dv)(ek),l=(0,a.I0)(),s=(0,L.CA)(),d=(0,u.Dv)(el.p),{flagNumberVal:p}=ec(...eo.Wx),m=(0,V.I)({id:W.G.CollectiveUpsellOverlay,priority:K.b4.SECONDARY_MODAL},[n,o]);(0,c.O)(()=>{m.show({canShow:(e,t)=>{let r=Date.now()-864e5>t;return!!e&&r}})}),(0,G.J)(m.uniqueId,"Reset Onboarding",()=>{let e=eP.reduce((e,t)=>({...e,[t]:!1}),{});l(C.v({...e}))});let h=(0,i.useCallback)((e=!0)=>{p<=1&&r(e),m.isShowing&&l(C.v({[eN]:!0})),m.complete()},[l,m,p]);if((0,i.useEffect)(()=>{e&&h(!1)},[e,h]),d!==es.sI.FALSE);else if(t&&!m.isShowing&&!e)return i.createElement(ei.E.div,{initial:{opacity:1},animate:{opacity:0},transition:{delay:2.8,duration:.8},onAnimationComplete:()=>r(!1)},i.createElement(eA,{dismissModal:()=>r(!1),targetKey:"help-widget-zendesk"}));else if(m.isShowing)return i.createElement(eC,{shouldHide:e,dismissModal:h,maxSeenCount:3,teamId:null==s?void 0:s.teamId,editorType:null==s?void 0:s.editorType});return null}var eM=r(103112),eF=r(961215);let ex=/rgb\((\d+),\s*(\d+),\s*(\d+)\)/,eU=/rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*\.?\d+)\)/,eB=/color\(display-p3 ([0-9.]+) ([0-9.]+) ([0-9.]+)\)/,eV=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eG=(e,t)=>{if(!e)return null;let r=e.match(eB);if(r)return function(e,t){let r=e.match(eB);if(!r)throw Error("Invalid P3 color string");let[n,i,a]=r.slice(1).map(Number),{red:o,green:l,blue:s}=eF.iTB.applyConversionToColor({red:n,green:i,blue:a,alpha:t},eF.yMe.DISPLAY_P3_TO_SRGB);return{r:o,g:l,b:s,opacity:t}}(e,t);let n=e.match(ex);if(n)return{r:parseFloat(n[1])/255,g:parseFloat(n[2])/255,b:parseFloat(n[3])/255,opacity:t};let i=e.match(eU);if(i)return{r:parseFloat(i[1])/255,g:parseFloat(i[2])/255,b:parseFloat(i[3])/255,opacity:parseFloat(i[4])*t};let a=e.match(eV);return a?{r:parseInt(a[1],16)/255,g:parseInt(a[2],16)/255,b:parseInt(a[3],16)/255,opacity:t}:null};function eH(e){let t={width:"0",color:null};return e.style.borderTopColor&&e.style.borderTopWidth&&(t.width=`${parseFloat(e.style.borderTopWidth)}`,t.color=eG(e.style.borderTopColor,1)),t}function eW(e,t){var r;e.strokes=[{type:"SOLID",color:(r=t.color)?{r:r.r,g:r.g,b:r.b}:{r:0,g:0,b:0},opacity:r?r.opacity:1}],e.strokeWeight=parseFloat(t.width),e.strokeAlign="INSIDE"}function eK(e){switch(e.textTransform){case"uppercase":return"UPPER";case"lowercase":return"LOWER";case"capitalize":return"TITLE"}return null}function ez(e){switch(e.textDecorationLine){case"underline":return"UNDERLINE";case"line-through":return"STRIKETHROUGH"}return null}function eZ(e,t){let r=eK(t);r&&(e.textCase=r);let n=ez(t);n&&(e.textDecoration=n);let i=function(e){switch(e.textAlign){case"left":return"LEFT";case"center":return"CENTER";case"right":return"RIGHT";case"justify":return"JUSTIFIED"}return null}(t);i&&(e.textAlignHorizontal=i)}async function eY(e,t,r,n,i){let a=await eX(e,i);t.setRangeFontSize(r,n,parseFloat(i.fontSize)),t.setRangeFontName(r,n,a);let o=eK(i);o&&t.setRangeTextCase(r,n,o);let l=ez(i);l&&t.setRangeTextDecoration(r,n,l);let s=eG(i.color,1),{r:c,g:d,b:u,opacity:p}=s||{r:1,g:1,b:1,opacity:0};t.setRangeFills(r,n,[{type:"SOLID",color:{r:c,g:d,b:u},opacity:p}])}let ej=[],e$={family:"Inter",style:"Regular"};async function eq(e,t,r){let n=`${e} ${t}`;if(ej.includes(n))return{family:e,style:t};try{return await r.loadFontAsync({family:e,style:t}),ej.push(n),{family:e,style:t}}catch(e){return ej.includes(`${e$.family} ${e$.style}`)||await r.loadFontAsync(e$),e$}}async function eX(e,t){let r=t.fontWeight||"normal",n=t.fontStyle||"normal",i={400:"Regular",normal:"Regular",500:"Medium",600:"SemiBold",700:"Bold",bold:"Bold",800:"ExtraBold",900:"Black"}[r];("italic"===n||"oblique"===n)&&("Regular"===i?i="Italic":i+="Italic");let a=t.fontFamily.replace(/"/g,"").trim(),o=a.split(",").map(e=>e.trim()),l=[];for(;o.length>0;){let t=o.shift()||"Inter",r=i,n=await eq(t,r,e);n&&l.push(n)}return l[0]||e$}async function eJ(e,t,r){var n,i,a;let o;if(!t)return null;let l=eG((null==(n=t.style)?void 0:n.backgroundColor)||"",(null==(i=t.style)?void 0:i.hidden)?0:parseFloat(null==(a=t.style)?void 0:a.opacity)||1),{r:s,g:c,b:d,opacity:u}=l||{r:1,g:1,b:1,opacity:0};try{switch(t.type){case"RECTANGLE":(o=e.createRectangle()).x=t.position.x,o.y=t.position.y,o.name=t.tagName,o.resize(t.size.width,t.size.height),t.style.borderRadius&&(o.cornerRadius=parseFloat(t.style.borderRadius)),o.fills=[{type:"SOLID",color:{r:s,g:c,b:d},opacity:u}],eW(o,eH(t));break;case"VECTOR":(o=e.createNodeFromSvg(t.svg)).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height);break;case"VECTOR_AS_IMAGE":(o=e.createNodeFromSvg(t.svg)).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height);let n=o.findAll(e=>"VECTOR"===e.type&&Array.isArray(e.fills)&&0===e.fills.length);n.forEach(e=>{e.fills=[{type:"SOLID",color:{r:0,g:0,b:0},opacity:1}]});break;case"IMAGE":(o=e.createRectangle()).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height);let i="FILL"===t.style.scaleMode?"FILL":"FIT";if(t.base64){let r=Uint8Array.from(atob(t.base64),e=>e.charCodeAt(0)),n=e.createImage(r).hash;o.resize(t.size.width,t.size.height),o.fills=[{type:"IMAGE",scaleMode:i,imageHash:n}]}else{let r=await e.createImageAsync(t.url);o.resize(t.size.width,t.size.height),o.fills=[{type:"IMAGE",imageHash:r.hash,scaleMode:i}]}break;case"TEXT":(o=e.createText()).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height);let a=await eX(e,t.style);o.fontName=a,o.characters=t.value,o.fontSize=parseFloat(t.style.fontSize);let l=eG(t.style.color,1),{r:p,g:m,b:h,opacity:_}=l||{r:1,g:1,b:1,opacity:0};o.fills=[{type:"SOLID",color:{r:p,g:m,b:h},opacity:_}],eZ(o,t.style),o.textAutoResize="HEIGHT";let g=1;for(;o.height>t.size.height||o.width>t.size.width;){let e=parseFloat(t.style.fontSize);if(g>.3*e){console.warn("Exceeded max font size adjustments");break}g++;try{o.fontSize=o.fontSize-1}catch(e){console.warn("Error adjusting font size",e)}}break;case"TEXT_RANGE":(o=e.createText()).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height);let f=await eX(e,t.style);o.fontName=f;let E=t.ranges.reduce((e,t)=>e+t.value,"");o.characters=E,o.fontSize=parseFloat(t.style.fontSize);let y=eG(t.style.color,1);eZ(o,t.style);let{r:v,g:b,b:I,opacity:T}=y||{r:1,g:1,b:1,opacity:0};o.fills=[{type:"SOLID",color:{r:v,g:b,b:I},opacity:T}];let w=0;for(let r of t.ranges){let t=r.value.length;await eY(e,o,w,w+t,r.style),w+=t}o.textAutoResize="HEIGHT";let S=1;for(;o.height>t.size.height||o.width>t.size.width;){let e=parseFloat(t.style.fontSize);if(S>.3*e){console.warn("Exceeded max font size adjustments");break}S++;try{o.fontSize=o.fontSize-1}catch(e){console.warn("Error adjusting font size",e)}}break;case"FRAME":(o=e.createFrame()).x=t.position.x,o.y=t.position.y,o.resize(t.size.width,t.size.height),o.name=t.tagName,o.layoutMode="NONE",t.style.borderRadius&&(o.cornerRadius=parseFloat(t.style.borderRadius)),o.fills=[{type:"SOLID",color:{r:s,g:c,b:d},opacity:u}],eW(o,eH(t)),o.clipsContent="HTML"!==t.tagName&&["hidden"].includes(t.style.overflow);break;default:return console.warn(`Unsupported node type: ${t.type}`),null}if(t.children&&Array.isArray(t.children))for(let n of t.children.sort((e,t)=>e.order-t.order))if("FRAME"===o.type){let t=await eJ(e,n,o);t&&(o.appendChild(t),o.resize(o.width,o.height))}else{let t=await eJ(e,n,r);t&&(null==r||r.appendChild(t))}return o}catch(e){return console.error(`Error creating node ${t.type}`,e,{nodeData:t}),o&&o.remove(),null}}let eQ=async(e,t)=>{let r=await eJ(e,t,null);return r};async function e0(e){let t=(0,eM.H)(),r=await eQ(t,e);return t.currentPage.appendChild(r),r}var e1=r(87608),e2=r.n(e1);function e3({cardContents:e,onBackCardsHovered:t,onBackCardsUnhovered:r,onClick:n,swapping:a}){let[o,l]=(0,i.useState)(!1),[s,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(0),[p,m]=(0,i.useState)([...e]);if((0,i.useEffect)(()=>{a&&h((d+1)%e.length)},[a]),(0,i.useEffect)(()=>{e.length<=3&&e.push(...e),m(e)},[e]),e.length<2)return null;let h=t=>{s||0===t||(c(!0),n&&n(d),setTimeout(()=>{l(!1),c(!1),u(t=>(t+1)%e.length)},1290))},_={0:{normal:"stack_of_cards--card0--bU9iy",fannedOutBig:"",swapping:"stack_of_cards--swappingCard0--U0eFK"},1:{normal:"stack_of_cards--card1--W1y63",fannedOutBig:"stack_of_cards--fannedOutBigCard1--9r-Kj",swapping:"stack_of_cards--swappingCard1--Wq2Yu"},2:{normal:"stack_of_cards--card2--i7TU7",fannedOutBig:"stack_of_cards--fannedOutBigCard2--amtxA",swapping:"stack_of_cards--swappingCard2--2Yscs"},3:{normal:"stack_of_cards--card3--enZkQ",fannedOutBig:"",swapping:"stack_of_cards--swappingCard3--hpYRP"}};return i.createElement("div",{className:"stack_of_cards--container--Rp8Rm"},p.map((e,n)=>{let a=(n-d+p.length)%p.length;return a>3?null:i.createElement("div",{role:"button",tabIndex:0,key:n,className:e2()("stack_of_cards--card--MD18O",_[a].normal,{[_[a].fannedOutBig]:o,[_[a].swapping]:s}),onMouseEnter:()=>{0!==a&&(l(!0),t&&t(d))},onMouseLeave:()=>{0!==a&&(l(!1),r&&r(d))},onClick:()=>h(a)},e)}))}var e4=r(456496),e6=r(175965),e8=r(9715),e9=r(761767),e5=r(881835),e7=r(453268),te=r(276537),tt=r(996068),tr=r(88323),tn=r(487712);let ti="stack_of_cards_widget--animated--YDWrQ",ta="stack_of_cards_widget--card--LDokR",to="stack_of_cards_widget--hide--X1NzP";var tl=((n=tl||{})[n.IS_COLLAPSING=0]="IS_COLLAPSING",n[n.JUST_COLLAPSED=1]="JUST_COLLAPSED",n[n.COLLAPSED=2]="COLLAPSED",n[n.EXPANDED=3]="EXPANDED",n[n.IS_EXPANDING=4]="IS_EXPANDING",n);function ts({shouldHide:e,editorType:t,teamId:r}){let n=(0,a.I0)(),o=!!(0,P.p)("dismissed_pro_trials_v3_stack_of_cards_onboarding"),l=(0,a.v9)(e=>e.universalInsertModal),s=(0,a.v9)(e=>e.multiplayerEmoji.type),c=(0,a.v9)(e=>e.responsiveContent.sequence),d=!(0,e8.n)(r)||e||l.showing||(null==c?void 0:c.steps)&&c.steps.length>0||"WHEEL"===s,u=(0,te.oo)(),p=(0,a.v9)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),m=(0,e6.dQ)()||null,h=(0,a.v9)(e=>e.teams[r])||null,_=(0,tr.H)(),g=(0,tt.ow)({team:h,org:m,editorType:t}),f=(0,i.useCallback)(e=>{let t=e.slice(1,-1);return[e[e.length-1],...t]},[]),E=(0,i.useCallback)(()=>{T(!0),setTimeout(()=>{b(e=>f(e)),T(!1)},1400)},[f]),y=(0,i.useCallback)(e=>{let t=e7.iF.getOnboardingCardsStackContentProps({editorType:e,isVoiceEnabled:u,isWorkshopModeEnabled:g});return 3===t.length&&t[0].onboardingKey===e7.u&&t.push(...t.slice(1)),t.map(e=>e.onboardingKey===e7.u?{...e,showCta:!0,onCtaClicked:E}:{...e,showCta:!1,onCtaClicked:()=>{let t=e7.iF.getOnboardingStepTriggerEventId(e.onboardingKey);(0,U.m_)({id:t})}})},[E,u,g]),[v,b]=(0,i.useState)(y(t)),[I,T]=(0,i.useState)(!1),[w,S]=(0,i.useState)(o?2:3),[O,A]=(0,i.useState)(!1),[N,L]=(0,i.useState)(0),R=(0,i.createRef)(),k=t===e9.gg.WHITEBOARD&&_.right&&_.right<tn.tP,D=(0,i.useMemo)(()=>{let e=t===e9.gg.WHITEBOARD&&_.right&&_.right<N+40+tn.mj+20;return e?{bottom:_.bottom?_.bottom-tn.mj+12:0,right:_.right?_.right-tn.mj-90:0}:{bottom:0,right:40}},[_.bottom,_.right,t,N]);return((0,i.useEffect)(()=>{b(y(t))},[t,o,y]),(0,i.useEffect)(()=>{R&&R.current?L(R.current.clientWidth):L(0)},[R]),(0,i.useEffect)(()=>{let e=!!o;e?0===w?S(1):S(2):S(3)},[o]),v.length<3||d)?null:i.createElement(ed.Ui,{name:"Pro trials cards stack",properties:{fileTeamId:r,fileKey:p,productType:t,...e5.pl.getTrackingProperties()}},3!==w&&i.createElement("div",{className:"stack_of_cards_widget--iconWidgetContainer--pamNv"},O&&4!==w&&0!==w&&i.createElement(td,null),i.createElement(ed.XT,{className:e2()("stack_of_cards_widget--iconWidget--p49i8 help_widget--helpWidget--tXRGh text--_negText--j9g-L",{"stack_of_cards_widget--justCollapsed--7uRkw":1===w,"stack_of_cards_widget--isShowingUp--jjvWG":0===w,"stack_of_cards_widget--isDisappearing--USLnq":4===w,[to]:k}),onClick:()=>{S(4),A(!1),setTimeout(()=>{n(C.v({dismissed_pro_trials_v3_stack_of_cards_onboarding:!1}))},300)},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),disabled:0===w,trackingProperties:e5.pl.getTrackingProperties("expand card stack")},i.createElement(e4.JO,{icon:"gift-white-32-colored"}))),2!==w&&1!==w&&i.createElement("div",{ref:R,className:e2()("stack_of_cards_widget--container--ArQBE",{"stack_of_cards_widget--figjamContainer--4AD9T":t===e9.gg.WHITEBOARD,[to]:k,"stack_of_cards_widget--collapsing--Omc10":0===w,"stack_of_cards_widget--expanding--Q74qE":4===w}),style:{...D}},i.createElement("div",{className:"stack_of_cards_widget--contentContainer--ECgFZ"},i.createElement(e3,{cardContents:v.map(e=>i.createElement(tc,{key:e.onboardingKey,onboardingKey:e.onboardingKey,header:e.header,imgSrc:e.imgSrc,showCta:e.showCta,description:e.description,hoverTitle:e.hoverTitle,hovered:e.hovered,onCtaClicked:e.onCtaClicked})),onClick:e=>{let t=v.map((t,r)=>r===(e+1)%v.length?{...t,showCta:!0}:{...t,showCta:!1});setTimeout(()=>{b(t)},1300/3),v[0].onboardingKey===e7.u&&setTimeout(()=>{b(f(t))},1400)},onBackCardsHovered:e=>{let t=v.map((t,r)=>r===(e+1)%v.length?{...t,hovered:!0}:{...t,hovered:!1});b(t)},onBackCardsUnhovered:()=>{let e=v.map(e=>({...e,hovered:!1}));b(e)},swapping:I}),i.createElement(ev.PZ,{trackingProperties:e5.pl.getTrackingProperties("collapse card stack"),className:"stack_of_cards_widget--closeButton--7dWaQ",onClick:()=>{S(0),A(!1),setTimeout(()=>{n(C.v({dismissed_pro_trials_v3_stack_of_cards_onboarding:!0}))},300)}}))))}function tc({onboardingKey:e,imgSrc:t,showCta:r,header:n,description:a,hovered:o,hoverTitle:l,onCtaClicked:s}){return r?i.createElement(ed.Ui,{name:e},i.createElement("div",{className:ta},i.createElement("div",{className:e2()("stack_of_cards_widget--imgContainer--l4pVk",{[ti]:e!==e7.u&&e!==e7._Z.COMPONENT_PUBLISHING})},i.createElement("img",{src:t,width:"100%",alt:e})),i.createElement("div",{className:e2()("stack_of_cards_widget--frontCardContentContainer--14WHK",{[ti]:e!==e7.u})},i.createElement("div",null,i.createElement("div",null,n),i.createElement("div",null,a)),i.createElement(eT.J,{variant:"primary",onClick:s},e===e7.u?i.createElement(E.Tx,{id:"help_widget.pro_trials.stack_of_cards_widget.cover_card_cta_text"}):i.createElement(E.Tx,{id:"help_widget.pro_trials.stack_of_cards_widget.cta_text"}))))):i.createElement("div",{className:ta},i.createElement("img",{src:t,width:"100%",alt:e}),o&&i.createElement("div",{className:"stack_of_cards_widget--hoverTextContainer--n048y"},l))}function td(){return i.createElement("div",{className:"stack_of_cards_widget--tooltip--zMh2d help_widget--tooltip--ScNXy help_widget--tooltipPosition--XygMP"},i.createElement(E.Tx,{id:"help_widget.pro_trials.stack_of_cards_widget.tooltip"}))}let tu="reset-onboarding",tp=r(405369),tm=r(151288),th=(0,d.Gm)();function t_(e){let[t,r]=i.useState(!1),n=function(){var e,t,r,n;let o=(0,a.v9)(e=>(0,F.getPermissionsStateMemoized)(e)),l=!(0,a.v9)(e=>!!(e.openFile&&e.figFileDuplicatedFromHubFile[e.openFile.key])),d=(0,m.mU)(k.UserWithTeams,{}),u=function(){let e=(0,P.p)("dismissed_move_drafts_nudge"),t=(0,P.p)("ran_move_drafts_nudge_v2_num_3");return!!e&&!!t&&Date.now()-t.updatedAt.getTime()>864e5}(),p=function(e){let t="collective_upsell_first_file_created",r=(0,i.useRef)((0,P.p)(t)),n=(0,a.I0)();return(0,c.O)(()=>{!r.current&&e&&n(C.v({[t]:!0}))}),!!r.current&&Date.now()-r.current.updatedAt.getTime()>864e5}((null==(e=o.openFile)?void 0:e.creatorId)===(null==(t=o.user)?void 0:t.id));if("loaded"!==d.status)return!1;let h=d.data.currentUser.teamRoles;if(!(null==h?void 0:h.length))return!1;let _=!!o.user&&(0,s.Z)().diff((0,s.Z)(o.user.created_at),"days")>=7,g=!!(null==(r=o.openFile)?void 0:r.teamId)&&(0,F.canEditTeam)(null==(n=o.openFile)?void 0:n.teamId,o),f=!!o.openFile&&!o.openFile.teamId,E=h.some(e=>e.team&&!e.team.subscription&&e.team.canEdit),y=!h.some(e=>{var t;return(null==(t=e.team)?void 0:t.subscription)&&e.team.canEdit});return _&&p&&u&&(g||f&&E)&&l&&y&&E&&!!o.user&&(0,O.Tq)()}(),o=!!(0,P.p)("collective_upsell_first_file_created"),l=n&&o,d=(0,u.b9)(Q.g),p=(0,R.Oq)(R.Sw.ui3),h=(0,a.v9)(e=>e.userFlags),_=(0,L.CV)({useSinatraType:!0}),g=!!(0,P.p)("has_tooltips_plus_onboarding_file_no_nav"),f=!!(0,P.p)("has_tooltips_plus_onboarding_file_with_nav"),E=!!(0,P.p)("has_cursor_bot_onboarding"),y=(0,L.CA)();return(0,et.FG)(t,r),i.createElement("div",{className:T.cx.if(e.showFigjamZoomControlRedesign&&e.hide,T.cx.hidden,T.cx.flexColumn.gap12.justifyCenter.itemsEnd).$},n&&i.createElement(eD,{dropdownOpen:t}),y&&y.teamId&&y.editorType&&i.createElement(ts,{teamId:y.teamId,editorType:y.editorType,shouldHide:t||e.hide}),i.createElement(tf,{dispatch:e.dispatch,hide:e.hide,keyboardShortcuts:e.keyboardShortcuts,isEditingFile:e.isEditingFile,isUI3Enabled:p,editorType:(null==y?void 0:y.editorType)||null,selectedView:e.selectedView,modalShown:e.modalShown,orgUser:e.orgUser,user:e.user,userFlags:h,unsortedTeams:e.unsortedTeams,recordingKey:"helpWidget",dropDownOpen:t,setDropDownOpen:r,showDiscoverMoreOption:l,setSkipMakeSomethingOnboarding:d,showResetOnboardingOption:()=>(function({openFile:e,user:t,isInTooltipsPlusWithNav:r,isInTooltipsPlusWithNoNav:n,isInCursorBotOnboarding:i}){return null===e||null==t||!t.id||"design"!==e.editor_type||(r||n?(0,D.t2)(t.id,e,["exp_tooltips_plus_onboarding"]):!i||(0,D.t2)(t.id,e,["exp_cursor_bot_onboarding"]))})({openFile:_,user:e.user,isInTooltipsPlusWithNav:f,isInTooltipsPlusWithNoNav:g,isInCursorBotOnboarding:E}),teamId:null==y?void 0:y.teamId}))}let tg=class extends h.Vx{constructor(e){super(e),this.rootRef=i.createRef(),this.zendeskRef=i.createRef(),this.dropdownID=(0,_.k)(),this.onKeyDown=e=>{switch(e.key){case"Divide":(0,p.VG)(e,p.tx.CONTROL|p.tx.SHIFT)&&(e.preventDefault(),e.stopPropagation());break;case"Tab":this.closeDropdownAndLogEvent("help_widget_close_on_tab")}},this.documentMouseUp=e=>{var t,r;!this.props.dropDownOpen||(null==(t=this.rootRef.current)?void 0:t.contains(e.target))||this.props.setDropDownOpen(!1),null==(r=this.zendeskRef.current)||r.close()},this.logEvent=e=>{(0,l.L9)(e,{isEditingFile:this.props.isEditingFile,editorType:this.props.editorType,source:"help-widget-button"})},this.closeDropdownAndLogEvent=e=>{this.setState({discoverMoreOptionHovered:!1}),this.props.setDropDownOpen(!1),this.logEvent(e)},this.onClickKeyboardShortcuts=()=>{this.closeDropdownAndLogEvent("showing_keyboard_shortcuts_modal"),N.Gr.isReady()&&N.Gr.triggerAction("toggle-keyboard-shortcuts")},this.onClickLanguageSelector=()=>{this.logEvent("help_widget_change_languages"),this.props.dispatch((0,S.K4)({type:B.gp,data:{source:B.kk.HELP}}))},this.onClickKeyboardLayoutSelector=()=>{N.Gr.isReady()&&(this.props.dispatch(w.cZ({tab:"layout"})),this.onClickKeyboardShortcuts())},this.onClickResetOnboarding=()=>{th.user_data&&(this.props.setSkipMakeSomethingOnboarding(!1),this.closeDropdownAndLogEvent("Reset Onboarding"),(0,U.Ps)().reset(th.user_data.id))},this.onClickGetHelp=()=>{var e,t,r,n;this.closeDropdownAndLogEvent("help_widget_get_help"),0===this.props.unsortedTeams.filter(e=>(0,M.e3)(e)).length?null==(t=this.zendeskRef.current)||t.open({ticketForms:y.yz.FREE,locale:null==(e=this.props.user)?void 0:e.locale}):null==(n=this.zendeskRef.current)||n.open({ticketForms:y.yz.PAID,locale:null==(r=this.props.user)?void 0:r.locale})},this.onClickBugReport=h.Eb(this,h.ar("bugReporter","click")||"",()=>{this.closeDropdownAndLogEvent("help_widget_bug_report"),this.props.dispatch((0,S.K4)({type:Y.vn,data:{},showModalsBeneath:!0}))}),this.onClickHtmlToFigma=()=>{let e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=()=>{var t;let r=null==(t=null==e?void 0:e.files)?void 0:t[0],n=new FileReader;n.onload=async function(e){var t;let r=null;try{console.log("starting import..."),r=JSON.parse(null==(t=e.target)?void 0:t.result),await e0(r),console.log("import complete!")}catch(e){console.error("Error parsing JSON file:",e)}},n.onerror=function(){console.error("Error reading file")},r&&n.readAsText(r)},e.click(),e.onclose=()=>{this.closeDropdownAndLogEvent("import_html_to_figma")}},this.onClickSetCommitSHA=h.Eb(this,h.ar("setCommitSHA","click")||"",()=>{this.closeDropdownAndLogEvent("help_widget_set_commit_sha"),this.props.dispatch((0,S.K4)({type:ee.oY,data:{},showModalsBeneath:!0}))}),this.onClick=h.hO(this,"click",()=>{this.props.setDropDownOpen(!this.props.dropDownOpen),u.n_.set(Y.GG,!0)}),this.getDropdownOptions=()=>[{type:"option",onClick:this.onClickHtmlToFigma,label:i.createElement(E.Tx,{id:"help_widget.menu.import_html"}),shouldShow:()=>!!(0,d.BZ)().babel_design_widget_entrypoint},{type:"option",onClick:this.onClickBugReport,label:i.createElement(E.Tx,{id:"help_widget.menu.report_issue"}),shouldShow:()=>!!(0,d.BZ)().bug_reporter},{type:"option",onClick:this.onClickSetCommitSHA,label:i.createElement(E.Tx,{id:"help_widget.menu.set_commit_sha"}),shouldShow:()=>!!(0,d.BZ)().set_frontend_commit_sha},{type:"option",target:"_blank",href:`https://deploys.figma.com/bisect?repro_url=${encodeURIComponent(window.location.href)}`,onClick:()=>this.closeDropdownAndLogEvent("help_widget_web_bisect"),label:i.createElement(E.Tx,{id:"help_widget.menu.web_bisect"}),shouldShow:()=>!!(0,d.BZ)().web_bisect},{type:"separator",shouldShow:()=>!!(0,d.BZ)().bug_reporter},{type:"option",target:"_blank",href:"https://help.figma.com/",onClick:()=>this.closeDropdownAndLogEvent("help_widget_help"),label:i.createElement(E.Tx,{id:"help_widget.menu.help_center"})},{type:"option",target:"_blank",href:"https://forum.figma.com/",onClick:()=>this.closeDropdownAndLogEvent("help_widget_forum"),label:i.createElement(E.Tx,{id:"help_widget.menu.support_forum"})},{type:"option",target:"_blank",href:"https://www.youtube.com/figmadesign",onClick:()=>this.closeDropdownAndLogEvent("help_widget_tutorials"),label:i.createElement(E.Tx,{id:"help_widget.menu.youtube_videos"})},{type:"option",target:"_blank",href:"https://releases.figma.com/",onClick:()=>this.closeDropdownAndLogEvent("help_widget_releases"),label:i.createElement(E.Tx,{id:"help_widget.menu.release_notes"})},{type:"option",target:"_blank",href:"/summary-of-policy",label:i.createElement(E.Tx,{id:"help_widget.menu.legal_summary"})},{type:"separator"},{type:"option",target:"_blank",href:"https://forum.figma.com/submit-feedback",onClick:()=>this.closeDropdownAndLogEvent("help_widget_forum_feedback"),label:i.createElement(E.Tx,{id:"help_widget.menu.submit_feedback"})},{type:"option",target:"_blank",href:"https://forum.figma.com/ask-community",onClick:()=>this.closeDropdownAndLogEvent("help_widget_forum_ask"),label:i.createElement(E.Tx,{id:"help_widget.menu.ask_the_community"})},{type:"option",onClick:this.onClickGetHelp,label:i.createElement(E.Tx,{id:"help_widget.menu.contact_support"})},{type:"separator"},{type:"option",shouldShow:()=>N.Gr.isReady(),onClick:this.onClickKeyboardShortcuts,label:i.createElement(i.Fragment,null,i.createElement(E.Tx,{id:"help_widget.menu.keyboard_shortcuts"}),i.createElement(b.e,{shortcut:(0,x.bQ)(this.props.keyboardShortcuts,"open-shortcuts"),className:"help_widget--shortcut--H4xrS"}))},{type:"option",onClick:this.onClickResetOnboarding,label:i.createElement("div",{"data-onboarding-key":tu},i.createElement(E.Tx,{id:"help_widget.menu.reset_onboarding"})),shouldShow:this.props.showResetOnboardingOption},{type:"option",shouldShow:()=>this.props.showDiscoverMoreOption,onClick:()=>{this.props.dispatch(S.K4({type:ey,data:{teamId:this.props.teamId,editorType:this.props.editorType}})),this.closeDropdownAndLogEvent("help_widget_discover_more_features")},onHover:e=>{this.setState({discoverMoreOptionHovered:e})},label:i.createElement(i.Fragment,null,i.createElement(E.Tx,{id:"help_widget.menu.discover_more_features"}),i.createElement(er.Ct,{className:`help_widget--proBadge--9d3JS ${this.state.discoverMoreOptionHovered?"help_widget--proBadgeHovered--KoXjg":""}`,text:(0,E.t)("help_widget.menu.discover_more_features.pro"),color:er.JV.INVERT,subtle:!0}))},{type:"separator",shouldShow:()=>N.Gr.isReady()||!!(0,d.BZ)().i18n_web_locales},{type:"option",onClick:()=>{R.Sw.ui3.toggleValue({user:this.props.user,userFlags:this.props.userFlags},this.props.dispatch,"help_menu"),this.props.setDropDownOpen(!1)},shouldShow:()=>!!R.Sw.ui3.canToggle(),label:this.props.isUI3Enabled?i.createElement(E.Tx,{id:"lab.ui3_disable"}):i.createElement(E.Tx,{id:"lab.ui3_enable"})},{type:"option",onClick:this.onClickKeyboardLayoutSelector,shouldShow:()=>N.Gr.isReady(),label:i.createElement(E.Tx,{id:"help_widget.menu.change_keyboard_layout"})},{type:"option",onClick:this.onClickLanguageSelector,shouldShow:()=>!!(0,d.BZ)().i18n_web_locales,hasIcon:(0,d.BZ)().icon_for_change_languages,label:i.createElement(o.jX,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"center"},(0,d.BZ)().icon_for_change_languages&&i.createElement(I.n,{svg:tm}),i.createElement("div",null,i.createElement(E.Tx,{id:"help_widget.menu.change_languages"})))}],this.renderDropdownOptions=()=>this.getDropdownOptions().filter(e=>null==e.shouldShow||e.shouldShow&&e.shouldShow()).map((e,t)=>{if("option"===e.type){let{target:r,href:n,onClick:a,onHover:o,hasIcon:l,simulateHover:s}=e;return i.createElement(g.j.Option,{key:t,target:r,href:n,onClick:a,onHover:o,hasIcon:l,simulateHover:s,"data-fullscreen-intercept":!0},i.createElement("div",{className:"help_widget--optionItem---2-vY"},e.label))}return"separator"===e.type&&i.createElement(g.j.Separator,{key:t})}),this.state={discoverMoreOptionHovered:!1}}componentDidMount(){var e;super.componentDidMount(),document.addEventListener("mouseup",this.documentMouseUp),document.addEventListener("keydown",this.onKeyDown),(0,A.UA)("help_widget",null==(e=this.rootRef)?void 0:e.current)}componentWillUnmount(){super.componentWillUnmount(),(0,A.UA)("help_widget",null),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("mouseup",this.documentMouseUp)}componentDidUpdate(e,t){var r;super.componentDidUpdate(e,t),e.hide!=this.props.hide&&this.props.hide&&(null==(r=this.zendeskRef.current)||r.close())}render(){var e,t;let r=th.user_data&&!this.props.hide;return i.createElement(i.Fragment,null,i.createElement("section",{className:r?"help_widget--helpWidget--tXRGh text--_negText--j9g-L":"help_widget--helpWidgetHidden--7myyk help_widget--helpWidget--tXRGh text--_negText--j9g-L",ref:this.rootRef,onFocusCapture:()=>{var e;null==(e=this.rootRef.current)||e.setAttribute("aria-hidden","false")},"data-onboarding-key":"bug-reporter-modal-key"},i.createElement(en.xZ,{"aria-haspopup":!0,"aria-controls":this.dropdownID,"aria-expanded":this.props.dropDownOpen,className:"help_widget--clickableSvg--hcIHQ",svg:tp,onClick:this.onClick,innerText:tg.displayName,"data-onboarding-key":"help-widget-zendesk","aria-label":(0,E.t)("fullscreen.menu.help_menu"),role:"button",tabIndex:0,onKeyDown:e=>(0,A.Ii)({e,onClickHandler:this.onClick}),"data-fullscreen-intercept":!0}),i.createElement(v,{ref:this.zendeskRef,dispatch:this.props.dispatch,userName:(null==(e=this.props.user)?void 0:e.name)||null,userEmail:(null==(t=this.props.user)?void 0:t.email)||null}),!this.props.dropDownOpen&&i.createElement(tE,null),this.props.dropDownOpen&&i.createElement("div",{className:"help_widget--dropdown--3SXN1 help_widget--tooltipPosition--XygMP"},i.createElement(g.j.DropdownWithAutofocus,{hideDropdown:()=>{this.props.setDropDownOpen(!1)},id:this.dropdownID,options:this.renderDropdownOptions()})),i.createElement("div",{onFocus:A.KC,tabIndex:0})),!!(0,d.BZ)().bug_reporter&&r&&i.createElement(X,null))}},tf=tg;function tE(){return i.createElement("div",{"aria-hidden":!0,className:"help_widget--tooltip--ScNXy help_widget--tooltipPosition--XygMP"},i.createElement(E.Tx,{id:"help_widget.tooltip"}))}tf.displayName="HelpWidget"},487712:(e,t,r)=>{r.d(t,{PF:()=>a,mj:()=>o,tP:()=>l});var n=r(172497),i=r(332224);let a=(0,n.F)(i.veD),o=(0,n.F)(i.vOb),l=(0,n.F)(i.p87)},303980:(e,t,r)=>{r.d(t,{C8:()=>u,LZ:()=>p,PC:()=>m,w3:()=>h,yz:()=>l});var n=r(600486),i=r(850724),a=r(716250);let o=(0,a.Gm)().zendesk_web_key_public,l={FREE:["account","billing","bugReport","community","events"],PAID:["account","billing","bugReport","community","events","productQuestion"]},s={productQuestion:{id:360001731233},bugReport:{id:360001744374},featureRequest:{id:360001746113},account:{id:360005944714},community:{id:7767730653079},billing:{id:9707134248215},events:{id:19669189307671},other:{id:360001758534}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(s).map(e=>s[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){if(d)return d;let e=async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!o)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,i.ve)("https://static.zdassets.com/ekr/snippet.js?key="+o,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}};return d=e()}let p=(e,t)=>{d&&window.zE&&(window.zESettings=c(),(null==t?void 0:t.ticketForms)&&(window.zESettings.webWidget.contactForm={ticketForms:t.ticketForms.map(e=>s[e]),fields:(t.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),(null==t?void 0:t.suppressAnswerBot)&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),(null==t?void 0:t.locale)&&window.zE("webWidget","setLocale",t.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))},m=()=>{window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{var t,r,i;let a={action:e.action,relatedZendeskId:null==(t=e.properties)?void 0:t.id,relatedZendeskName:null==(r=e.properties)?void 0:r.name,searchTerm:null==(i=e.properties)?void 0:i.term};(0,n.L9)("zendesk_help_widget",a)}))},h=(e,t,r)=>{u().then(()=>p(e,t)).then(m).catch(()=>console.error("Our support center is not currently available. You can email us at support@figma.com."))}},714288:(e,t,r)=>{r.d(t,{Z:()=>u,f:()=>p});var n,i=r(652983),a=r(87608),o=r.n(a),l=r(435613),s=r(299482),c=r(11431);let d=r(250215);var u=((n=u||{})[n.INFORMATION=0]="INFORMATION",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.FIGJAM=3]="FIGJAM",n[n.PLAIN=4]="PLAIN",n);function p({color:e,icon:t,rounded:r=!0,text:n,dataTestId:a}){return i.createElement("div",{"data-testid":a,style:s.sx.if(!r,{borderRadius:"0px"}).$,className:o()({[c.GD]:0===e,[c.vU]:1===e,[c.Kp]:2===e,[c.rd]:3===e,[c.Oh]:4===e})},i.createElement(l.n,{autosize:!0,className:c.DJ,width:"16px",height:"12px",svg:t??d}),i.createElement("p",null,n))}},809988:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(652983),i=r(484188);let a=n.memo(function(e){let t=e.locale||(0,i.Kd)().getPrimaryLocale(!1),r=n.useMemo(()=>new Intl.ListFormat(t,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[t,e.formatStyle,e.formatType]),a=n.Children.toArray(e.children),o=r.formatToParts(a.map((e,t)=>`${t}`)),l=o.map((e,t)=>"element"===e.type?a[Number(e.value)]:"literal"===e.type?n.createElement("span",{key:`${t}_literal`},e.value):null);return n.createElement("span",{className:e.className||""},l)})},854571:(e,t,r)=>{r.d(t,{Jd:()=>m,Jr:()=>h,Sg:()=>p,g5:()=>g,mQ:()=>f,pT:()=>E,qB:()=>_});var n=r(652983),i=r(5453),a=r(626650),o=r(388899),l=r(217810),s=r(564380);let c={preventScroll:!1,block:"nearest"};class d{constructor({id:e,path:t,column:r,element:n,defaultFocusOptions:i=c,setIsFauxFocused:a,fauxClick:o}){this.id=e,this.path=t,this.column=r,this.element=n,this.defaultFocusOptions=i,this.setIsFauxFocused=a,this.fauxClick=o}addToTree(e,t){this.tree=e,function(e,t){let{path:r,column:n}=t,i=S(e,r,!0);i.items[n||0]=t}(e,this),t&&this.id&&t.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,t){let{path:r,column:n}=t,a=S(e,r),o=a.items[n||0];if(o&&o===t&&(a.items[n||0]=void 0,a.items.every(l.Rw))){let t=w(e,r.slice(0,-1));t.children[r[r.length-1]]=void 0;for(let t=r.length-1;t>=1;t--){let n=r.slice(0,t),[a,o]=(0,i.ES)(n),s=w(e,a),c=w(e,n);if(c.children.every(l.Rw))s.children[o]=void 0;else break}e.children.every(l.Rw)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&T(this.tree,this,"up")}getItemBelow(){return this.tree&&T(this.tree,this,"down")}getItemToTheLeft(){return this.tree&&I(this.tree,this,"left")}getItemToTheRight(){return this.tree&&I(this.tree,this,"right")}}let u=n.createContext(null),p=n.forwardRef(function({onKeyDown:e,allowVim:t=!1,disabled:r,overrideDown:i,overrideUp:a,...l},c){let d=n.useRef({type:"parent",children:[]}),p=n.useRef(new Map),m=n.useRef(null),h=n.useCallback(e=>{m.current===e&&(m.current=null)},[]),y=n.useCallback(e=>{m.current=e},[]),v=n.useRef(null),b=n.useRef(o.ZT),I=n.useCallback(e=>{e===v.current&&(v.current=null,b.current(),b.current=o.ZT)},[]),T=n.useCallback((e,t)=>{v.current&&I(v.current),v.current=e,b.current=t},[I]),w=n.useCallback(r=>{var n,o,l,s,c,u,p,h;let y=m.current,b=v.current,I=r.code??r.key;if(_(I,t)){if(b){r.preventDefault();let e=C(d.current,b,a);e?null==e||e.fauxFocus():null==(n=b.getItemAbove())||n.fauxFocus()}else if(y){r.preventDefault();let e=C(d.current,y,a);e?null==e||e.focus():null==(o=y.getItemAbove())||o.focus()}}else if(g(I,t)){if(b){r.preventDefault();let e=C(d.current,b,i);e?null==e||e.fauxFocus():null==(l=b.getItemBelow())||l.fauxFocus()}else if(y){r.preventDefault();let e=C(d.current,y,i);e?null==e||e.focus():null==(s=y.getItemBelow())||s.focus()}}else f(I,t)?b?(r.preventDefault(),null==(c=b.getItemToTheLeft())||c.fauxFocus()):y&&(r.preventDefault(),null==(u=y.getItemToTheLeft())||u.focus()):E(I,t)?b?(r.preventDefault(),null==(p=b.getItemToTheRight())||p.fauxFocus()):y&&(r.preventDefault(),null==(h=y.getItemToTheRight())||h.focus()):"Enter"===I?b&&(r.preventDefault(),b.simulateClick()):"Escape"===I&&(y||b)&&(r.preventDefault(),y&&y.blur(),b&&b.fauxBlur());null==e||e(r)},[e,t,a,i]),S=n.useMemo(()=>({tree:d.current,lookupMap:p.current,onFocusItem:y,onBlurItem:h,onFauxFocusItem:T,onFauxBlurItem:I}),[y,h,T,I]);return n.createElement(u.Provider,{value:S},n.createElement(s.yh,{onKeyDown:r?e:w,forwardedRef:c,...l}))});function m({path:e,column:t=null,id:r,defaultFocusOptions:i,onFocus:o,onBlur:s,onFauxFocus:c,onFauxBlur:p,fauxClick:m}){let h=(0,a.SH)(e),_=(0,a.SH)(i);if(0===h.length)throw Error("Path must be non-empty");if(h.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=t&&t<0)throw Error("Column must be non-negative");let[g,f]=n.useState(void 0),[E,y]=n.useState(!1),[v,b]=n.useState(!1),{tree:I,lookupMap:T,onFocusItem:w,onBlurItem:S,onFauxFocusItem:C,onFauxBlurItem:O}=(0,l.LG)(n.useContext(u),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");n.useEffect(()=>{if(g){let e=()=>y(!0),t=()=>y(!1);return g.addEventListener("focus",e),g.addEventListener("blur",t),g===document.activeElement&&e(),()=>{g.removeEventListener("focus",e),g.removeEventListener("blur",t),g===document.activeElement&&t()}}},[g]);let A=n.useMemo(()=>null==g?null:new d({id:r,path:h,column:t,element:g,defaultFocusOptions:_,setIsFauxFocused:b,fauxClick:m}),[g,r,h,t,_,m]);return n.useEffect(()=>{if(A)return A.addToTree(I,T),()=>{A.removeFromTree(T)}},[A,T,I]),n.useEffect(()=>{if(A&&E)return null==o||o(),w(A),()=>{null==s||s(),S(A)}},[A,E,o,s,w,S]),n.useEffect(()=>{if(A&&v)return null==c||c(),C(A,()=>{b(!1)}),()=>{null==p||p(),O(A)}},[A,v,c,p,C,O]),{setKeyboardNavigationElement:f,keyboardNavigationItem:A,isFocused:E,isFauxFocused:v}}function h(){let{lookupMap:e}=(0,l.LG)(n.useContext(u),"Must use `useKeyboardNavigationLookupMap` inside `<KeyboardNavigationProvider>");return n.useCallback(t=>e.get(t),[e])}function _(e,t){return"ArrowUp"===e||"KeyK"===e&&t&&y()}function g(e,t){return"ArrowDown"===e||"KeyJ"===e&&t&&y()}function f(e,t){return"ArrowLeft"===e&&v()||"KeyH"===e&&t&&y()}function E(e,t){return"ArrowRight"===e&&v()||"KeyL"===e&&t&&y()}function y(){return!b(document.activeElement)}function v(){let e=document.activeElement;return!b(e)||(e instanceof HTMLDivElement?""===e.textContent:""===e.value)}function b(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function I(e,{path:t,column:r},n){if(null==r)return;let a=S(e,t),o=("left"===n?i.kS:i.uq)(a.items,r);return o||T(e,{path:t,column:"left"===n?1/0:-1},"left"===n?"up":"down")}function T(e,{path:t,column:r},n){for(let a=t.length-1;a>=0;a--){let o=t.slice(0,a),l=t[a],s=w(e,o),c=("up"===n?i.kS:i.uq)(s.children,l);if(c){let e=("up"===n?function e(t){if("leaf"===t.type)return t;let r=(0,i.kS)(t.children,t.children.length);if(r)return e(r);throw Error("Expected a node but got nothing")}:function e(t){if("leaf"===t.type)return t;let r=(0,i.uq)(t.children,-1);if(r)return e(r);throw Error("Expected a node but got nothing")})(c);return(0,i.Or)(e.items,r||0)}}}function w(e,t,r=!1){for(let n of t){let t=e.children[n];if(t){if("leaf"===t.type)throw Error("Expected a parent but got a leaf");e=t}else if(r){let t={type:"parent",children:[]};e.children[n]=t,e=t}else throw Error("Expected a parent but got nothing")}return e}function S(e,t,r=!1){let[n,a]=(0,i.ES)(t),o=w(e,n,r),l=o.children[a];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(r){let e={type:"leaf",items:[]};return o.children[a]=e,e}throw Error("Expected a leaf but got nothing")}function C(e,t,r){try{let n=null==r?void 0:r(t);return n&&function(e,t,r){let n=S(e,t);return n.items[r??0]}(e,n.path,n.column)}catch(e){}}},333222:(e,t,r)=>{r.d(t,{e:()=>a});var n=r(652983),i=r(279588);class a extends n.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return n.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((t,r)=>{let a=-1!=e.indexOf(t)?i.y:i.q;return n.createElement("span",{key:r,className:a},t)}))}}a.displayName="KeyboardShortcut"},258531:(e,t,r)=>{r.d(t,{J:()=>d,a:()=>n.V});var n=r(815459),i=r(652983),a=r(172497),o=r(782051),l=r(125274),s=r(332224);function c({children:e}){let t=(0,l.Ni)();return i.createElement("div",{className:"blocked_ui_loading_indicator--base--XVkv0",style:{bottom:0===t?(0,a.F)(s.elp):(0,a.F)(s.Faq)+t}},e)}function d({blockedUILoadingIndicator:e,dispatch:t}){i.useEffect(()=>{let r=null==e?void 0:e.callback;setTimeout(()=>{t(n.V.remove({})),null==r||r()},0)},[e,t]);let r=e?"blocked_ui_loading_indicator--shown--XJCOo":"",a=(null==e?void 0:e.showLoadingSpinner)?i.createElement("div",{className:"blocked_ui_loading_indicator--icon--wujoz"},i.createElement(o.TK,null)):i.createElement(i.Fragment,null);return i.createElement(c,null,i.createElement("div",{className:`blocked_ui_loading_indicator--messageContainer--Xdio4 _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L ${r}`},e&&e.message&&i.createElement(i.Fragment,null,a,i.createElement("span",{className:"blocked_ui_loading_indicator--message--AM16c"},e.message))))}},815459:(e,t,r)=>{r.d(t,{V:()=>n});var n,i=r(237863);(e=>{e.set=(0,i.e)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,i.e)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(n||(n={}))},623046:(e,t,r)=>{r.d(t,{u:()=>s});var n=r(652983),i=r(792808),a=r(782051);function o(e){return e.isLoading?n.createElement("div",{className:e.className},n.createElement(a.TK,null)):e.children()}function l(e){switch(e.state.status){case i.Q.FAILURE:if(e.failure)return n.createElement(e.failure,null);return n.createElement("div",{className:e.className},n.createElement(a.TK,null));case i.Q.LOADING:return n.createElement("div",{className:e.className},n.createElement(a.TK,null));case i.Q.SUCCESS:return e.children(e.state.value)}}function s(e){return"isLoading"in e?n.createElement(o,{...e}):n.createElement(l,{...e})}},241166:(e,t,r)=>{r.d(t,{$_:()=>_,Ji:()=>E,PS:()=>y,Tz:()=>v,iP:()=>f,wX:()=>I});var n=r(652983),i=r(571529),a=r(204829),o=r(564380),l=r(435613),s=r(970740),c=r(326394),d=r(692133);let u=r(470156),p=r(44800),m=r(507946),h=r(798642);function _(e){var t;let{dispatch:r,shouldShowUI:i}=e;return n.useEffect(()=>{r(c.L1({isFooterVisible:i}))},[r,i]),n.createElement("div",{className:i?d.Mv:d.le,role:"navigation","aria-label":(0,s.t)("viewer.footer.accessible_label")},n.createElement("div",{className:d.M6},(null==(t=e.renderDebugTools)?void 0:t.call(e))||""),n.createElement("div",{className:d.uC},n.createElement(v,{navigateForwardEnabled:e.navigateForwardEnabled,navigateBackwardEnabled:e.navigateBackwardEnabled,shouldShowFrameCounter:e.shouldShowFrameCounter,frameCount:e.frameCount,currentFrameIndex:e.currentFrameIndex,showPreviousFrame:e.showPreviousFrame,showNextFrame:e.showNextFrame,backIcon:h,nextIcon:m,recordingKey:e.recordingKey})),n.createElement("div",{className:d.G$},n.createElement(b,{onClick:e.restartPrototype,recordingKey:a.ar(e,"replayButton")})))}let g=null;function f(){return g}function E(e){let t=(0,n.useRef)(null),r=(0,n.useRef)(null);n.useEffect(()=>{let e={duration:200};function n(e){return[{transform:"translate3D(0px, 0, 0)"},{transform:`translate3D(${e}px, 0, 0)`},{transform:"translate3D(0px, 0, 0)"}]}return g={animateBack:()=>{null!==t.current&&t.current.animate(n(-4),e)},animateNext:()=>{null!==r.current&&r.current.animate(n(4),e)}},()=>{g=null}},[r,t]);let o=e.navigateBackwardEnabled?d.eP:d.qO,c=e.navigateForwardEnabled?d.mr:d.l5,u=e.navigateForwardEnabled||e.navigateBackwardEnabled,p=!i.K1&&u,m=n.createElement(y,{forwardedRef:t,onClick:e.showPreviousFrame,recordingKey:a.ar(e,"backButton"),label:(0,s.t)("viewer.footer.previous_frame"),disabled:!e.navigateBackwardEnabled,tabIndex:0,svg:n.createElement(l.n,{className:o,svg:e.backIcon})}),h=n.createElement(y,{forwardedRef:r,onClick:e.showNextFrame,recordingKey:a.ar(e,"nextButton"),label:(0,s.t)("viewer.footer.next_frame"),disabled:!e.navigateForwardEnabled,tabIndex:0,svg:n.createElement(l.n,{className:c,svg:e.nextIcon})});return n.createElement("div",{className:e.containerClassName},p&&m,!!e.shouldShowFrameCounter&&n.createElement("div",{role:"status","aria-live":"polite","aria-label":(0,s.t)("viewer.footer.readable_frame_progress",{currentFrameIndex:e.currentFrameIndex+1,frameCount:e.frameCount}),className:e.frameCounterTextClassName},n.createElement(s.Tx,{id:"viewer.footer.frame_progress",currentFrameIndex:e.currentFrameIndex+1,frameCount:e.frameCount})),p&&h)}function y({onClick:e,recordingKey:t,label:r,svg:i,variant:a,tabIndex:l,forwardedRef:s,disabled:c=!1}){let u="padded-focus-halo"===a?d.Cb:d.po;return n.createElement(o.sq,{className:u,disabled:c,onClick:e,"aria-label":r,recordingKey:t,tabIndex:l,forwardedRef:s,"data-fullscreen-intercept":!0},i)}function v(e){return n.createElement(E,{navigateBackwardEnabled:e.navigateBackwardEnabled,navigateForwardEnabled:e.navigateForwardEnabled,shouldShowFrameCounter:e.shouldShowFrameCounter,frameCount:e.frameCount,currentFrameIndex:e.currentFrameIndex,showPreviousFrame:e.showPreviousFrame,showNextFrame:e.showNextFrame,backIcon:e.backIcon,nextIcon:e.nextIcon,containerClassName:e.containerClassName||d.Wc,frameCounterTextClassName:d.un,recordingKey:e.recordingKey})}function b(e){return n.createElement(o.sq,{className:d.ZA,onClick:e.onClick,recordingKey:e.recordingKey},n.createElement(l.n,{svg:u}),n.createElement("div",null,n.createElement(s.Tx,{id:"viewer.footer.restart"})," ",n.createElement("span",{className:d.bQ},n.createElement(s.Tx,{id:"viewer.footer.r"}))))}function I(e){return n.createElement(o.yh,{className:e.className,onClick:e.onClick,recordingKey:e.recordingKey},n.createElement(l.n,{svg:p,className:d.Xf}),n.createElement("div",null,n.createElement(s.Tx,{id:"viewer.footer.restart"})," ",n.createElement("span",{className:d.bQ}," ",n.createElement(s.Tx,{id:"viewer.footer.r"}))))}},654230:(e,t,r)=>{r.d(t,{E1:()=>R,H9:()=>B,Hz:()=>P,MU:()=>x,Pl:()=>V,gO:()=>M,h2:()=>U,h8:()=>D,np:()=>F,rs:()=>k});var n=r(652983),i=r(87608),a=r.n(i),o=r(172497),l=r(19516),s=r(9247),c=r(810373),d=r(204829),u=r(564380),p=r(293351),m=r(435613),h=r(212984),_=r(970740),g=r(299482),f=r(456496),E=r(393357),y=r(225468),v=r(668849),b=r(158314),I=r(84554),T=r(332224),w=r(909655);let S=r(328630),C=r(273590),O=r(280910),A=r(936837),N=r(743334),L=r(311366),P=(e,t)=>{let r=n.useCallback(e=>{setTimeout(()=>{v.current&&(v.current.focus(),e&&v.current.select())},0)},[]),i=n.useCallback(()=>{v.current&&v.current.blur()},[]);n.useImperativeHandle(t,()=>({focus:r,blur:i,searchInput:v.current}));let[a,o]=n.useState(!1),[u,p]=n.useState(!1),[m,h]=n.useState(void 0),{onFocus:_,onClick:g}=e,f=n.useCallback(()=>{_&&_(),p(!0)},[_]),y=n.useRef(!1),v=n.useRef(null),b=n.useCallback(e=>{y.current=document.activeElement!==e.target},[]),I=n.useCallback(()=>{var e;y.current&&(null==(e=v.current)||e.select(),f())},[f]),T=n.useCallback(()=>{e.onBlur&&e.onBlur(),p(!1)},[e]),w=d.ax(e.recordingKey,"change",t=>{let r=t.target;e.onChange(r.value)}),S=n.useCallback(t=>{var r;if(!(e.isKeyDownHandled&&e.isKeyDownHandled(t))){if(" "===t.key&&t.stopPropagation(),t.keyCode===c.sr.ESCAPE){null==(r=v.current)||r.blur();return}(0,E.pI)(t,E.jQ.NO)}},[e]),C=n.useCallback((e=!1)=>{e&&o(!0),r(),g&&g()},[r,g]),O=d.Wn(e.recordingKey,"click",t=>{t.stopPropagation(),e.clearSearch(),o(!1),r()}),A=d.vU(e.recordingKey,"keydown",t=>{t.stopPropagation(),e.clearSearch(),o(!1),r()}),N=(0,s.D)(e.isFocused);return n.useEffect(()=>{N||!0!==e.isFocused?!0===N&&!1===e.isFocused&&i():r()},[i,r,N,e.isFocused]),(0,l.O)(()=>{e.focusOnMount&&v.current&&(v.current.focus(),f()),e.selectTextOnMount&&v.current&&v.current.select()}),{loggedOutSearchBarActivated:a,inputFocused:u,placeholderWidth:m,setPlaceholderWidth:h,searchInputRef:v,onMouseDown:b,onMouseUp:I,onSearchClick:C,onClearSearchClick:O,onClearSearchKeyDown:A,onFocus:_,onBlur:T,onClick:g,onSearchKeyDown:S,onSearchChange:w}},R=n.forwardRef((e,t)=>{let{searchInputRef:r,onMouseDown:i,onMouseUp:a,onClearSearchClick:o,onFocus:l,onBlur:s,onClick:c,onSearchKeyDown:d,onSearchChange:u}=P(e,t),h=(0,v.A2)(),f=h?w.s$:w.il;return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${f} ${e.className||""}`},n.createElement(m.n,{className:e.iconClassName??w.nt,svg:A}),n.createElement(p.Q,{ref:r,placeholder:e.placeholder||(0,_.t)("general.search"),className:w.Fc,value:e.query,onMouseDown:i,onMouseUp:a,onFocus:l,onBlur:s,onClick:c,onChange:u,onKeyDown:d,spellCheck:!1,style:g.sx.if(e.hasTransparentBackground,g.sx.add({background:"transparent"})).if(h||e.smallFont,g.sx.font11.$).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),!!e.query&&!e.hideXIcon&&n.createElement(m.n,{dataTestId:"search-x-icon",className:w.FZ,svg:S,onClick:o}))});n.forwardRef((e,t)=>{let{inputFocused:r,placeholderWidth:i,setPlaceholderWidth:a,searchInputRef:o,onMouseDown:l,onMouseUp:s,onSearchClick:c,onClearSearchClick:d,onFocus:u,onBlur:h,onClick:g,onSearchKeyDown:f,onSearchChange:E}=P(e,t),y=e.placeholder||(0,_.t)("general.search"),v=`${e.className||""} ${r?w.Gx:w.Mg}`;return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v},n.createElement(m.n,{className:w.ex,svg:A,onClick:()=>c()}),n.createElement(p.Q,{ref:o,placeholder:y,className:w.Fc,value:e.query,onMouseDown:l,onMouseUp:s,onFocus:u,onBlur:h,onClick:g,onChange:E,onKeyDown:f,style:{width:r?void 0:i},spellCheck:!1}),n.createElement("div",{className:w.cB,ref:e=>a(null==e?void 0:e.getBoundingClientRect().width)},y),!!e.query&&!e.hideXIcon&&n.createElement(m.n,{className:w.FZ,svg:S,onClick:d}))});let k=n.forwardRef((e,t)=>{let r=n.createRef();return n.useImperativeHandle(t,()=>r.current),n.createElement("div",{className:w.Go,onMouseDown:()=>{var e;return null==(e=r.current)?void 0:e.focus()},role:"presentation"},n.createElement(R,{...e,smallFont:!0,hasTransparentBackground:!0,className:a()(h.cx.wFull.$,e.className),ref:r}))}),D=n.forwardRef((e,t)=>{let{inputFocused:r,placeholderWidth:i,searchInputRef:a,onMouseDown:o,onMouseUp:l,onClearSearchClick:s,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:h,onSearchChange:g}=P(e,t),f=e.placeholder||(0,_.t)("general.search"),E=`${e.className||""} ${w.KL}`,y=e.query.length>0?w.nh:w.eK;return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:E,onMouseDown:e=>{o(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l,role:"presentation"},n.createElement(m.n,{className:w.$c,svg:A}),n.createElement(p.Q,{ref:a,placeholder:f,className:y,value:e.query,onFocus:c,onBlur:d,onClick:u,onChange:g,onKeyDown:h,style:{width:r?void 0:i},spellCheck:!1}),!!e.query&&!e.hideXIcon&&n.createElement(m.n,{className:w.FZ,svg:S,onClick:s}))}),M=n.forwardRef((e,t)=>{let{inputFocused:r,placeholderWidth:i,setPlaceholderWidth:a,searchInputRef:o,onMouseDown:l,onMouseUp:s,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:h,onSearchKeyDown:g,onSearchChange:E}=P(e,t),y=e.placeholder||(0,_.t)("general.search"),v=`${e.className||""} ${w.HU}`,b=e.query.length>0?w.rr:w.so;return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:s,role:"presentation"},n.createElement(f.JO,{icon:"search-32"}),n.createElement(p.Q,{ref:o,placeholder:y,className:b,value:e.query,onFocus:d,onBlur:u,onClick:h,onChange:E,onKeyDown:g,style:{width:r?void 0:i},spellCheck:!1}),n.createElement("div",{className:w.iS,ref:e=>a(Math.max(50,null==e?void 0:e.getBoundingClientRect().width))},y),!!e.query&&!e.hideXIcon&&n.createElement(m.n,{className:w.FZ,svg:S,onClick:c}))}),F=n.forwardRef((e,t)=>{let{searchInputRef:r,onMouseDown:i,onMouseUp:a,onFocus:o,onBlur:l,onClick:s,onSearchKeyDown:c,onSearchChange:d}=P(e,t);return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:w.rF},n.createElement(p.Q,{ref:r,placeholder:e.placeholder||(0,_.t)("general.search"),className:w.K2,value:e.query,onMouseDown:i,onMouseUp:a,onFocus:o,onBlur:l,onChange:d,onClick:s,onKeyDown:c,spellCheck:!1}),n.createElement(m.n,{className:w.wH,svg:N,onClick:e.onSubmit}))}),x=n.forwardRef((e,t)=>{let{searchInputRef:r,onMouseDown:i,onMouseUp:o,onClearSearchClick:l,onFocus:s,onBlur:c,onClick:u,onSearchKeyDown:h,onSearchChange:g}=P(e,t);return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:a()(e.className||w.m2,{[w.Lr]:!e.extraSpacing,[w.fh]:e.extraSpacing,[w.j6]:e.hideSearchIcon})},!e.hideSearchIcon&&n.createElement(m.n,{svg:L,className:w.t4}),n.createElement(p.Q,{ref:r,placeholder:e.placeholder||(0,_.t)("design_systems.publishing_modal.search_placeholder"),className:e.query?w.YZ:w.Xv,value:e.query,onMouseDown:i,onMouseUp:o,onFocus:s,onBlur:c,onClick:u,onChange:g,onKeyDown:h,spellCheck:!1}),!!e.query&&!e.hideXIcon&&n.createElement(b.Hz,{recordingKey:d.ar(e,"closeX"),svg:S,onClick:l,"data-tooltip-type":y.fR.TEXT,"data-tooltip":(0,_.t)("search.search_bar.clear")}))}),U=n.forwardRef((e,t)=>{let{searchInputRef:r,onMouseDown:i,onMouseUp:a,onClearSearchClick:o,onFocus:l,onBlur:s,onClick:c,onSearchKeyDown:h,onSearchChange:g}=P(e,t);return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${w.RL} ${e.className||""}`},n.createElement(m.n,{svg:L,className:w.ex}),n.createElement(p.Q,{ref:r,placeholder:e.placeholder||(0,_.t)("general.search"),className:w.$p,value:e.query,onMouseDown:i,onMouseUp:a,onFocus:l,onBlur:s,onClick:c,onChange:g,onKeyDown:h,spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0}),n.createElement(u.yh,{className:w.NQ,onClick:o,recordingKey:d.ar(e,"clearSearch")},!!e.query&&n.createElement(_.Tx,{id:"collaboration.branching_to_source.clear"})),!e.hideXIcon&&n.createElement("div",{className:w.Q},n.createElement(m.n,{className:w.FZ,svg:S,onClick:e.onClose})))}),B=n.forwardRef((e,t)=>{let{loggedOutSearchBarActivated:r,searchInputRef:i,onMouseDown:a,onMouseUp:l,onSearchClick:s,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:h,onSearchKeyDown:g,onSearchChange:f}=P(e,t);return n.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${w.OR} ${e.className||""}`},!r&&!e.query&&n.createElement("div",{className:w.l7,onClick:()=>s(!0)},n.createElement(m.n,{className:w.bx,svg:N})),(r||!!e.query)&&n.createElement("div",{className:w.be},n.createElement(p.Q,{ref:i,placeholder:e.placeholder||(0,_.t)("general.search"),className:w.II,value:e.query,onMouseDown:a,onMouseUp:l,onFocus:d,onBlur:u,onClick:h,onChange:f,onKeyDown:g,autoFocus:!0,spellCheck:!1}),n.createElement(I.z,{query:`(min-width: ${(0,o.z)(T.Jbu)}px)`},n.createElement(m.n,{className:w.FZ,svg:C,onClick:c})),n.createElement(I.z,{query:`(max-width: ${(0,o.z)(T.Jbu)-1}px)`},n.createElement(m.n,{className:w.FZ,svg:O,onClick:c}))))}),V=n.forwardRef((e,t)=>{let r=n.createRef();return n.useImperativeHandle(t,()=>r.current),n.createElement("div",{className:w.pG,style:e.styleOverrides,onMouseDown:()=>{var e;return null==(e=r.current)?void 0:e.focus()},role:"presentation"},n.createElement(R,{...e,smallFont:!0,className:a()(h.cx.wFull.$,e.className),ref:r}))})},12759:(e,t,r)=>{r.d(t,{T:()=>s,k:()=>c});var n=r(652983),i=r(407908),a=r(337167),o=r(78597),l=r(792099);function s({items:e,getShowMoreLabel:t,pageSize:r=4,shouldResetOnSelectionChange:n,dataTestId:i}){let{visibleItems:a,button:o}=d({items:e,getShowMoreLabel:t,getShowLessLabel:null,pageSize:r,shouldResetOnSelectionChange:n,dataTestId:i});return{visibleItems:a,showMoreButton:o}}function c({items:e,getShowMoreLabel:t,getShowLessLabel:r,pageSize:n=4,shouldResetOnSelectionChange:i,stateStorageAtom:a,dataTestId:o}){let{visibleItems:l,button:s}=d({items:e,getShowMoreLabel:t,getShowLessLabel:r,pageSize:n,shouldResetOnSelectionChange:i,stateStorageAtom:a,dataTestId:o});return{visibleItems:l,showMoreOrLessButton:s}}function d({items:e,getShowMoreLabel:t,getShowLessLabel:r,pageSize:s=4,shouldResetOnSelectionChange:c,stateStorageAtom:d,dataTestId:u}){let p=(0,i.v9)(e=>e.mirror.sceneGraphSelection),m=n.useMemo(()=>(0,a.cn)(!1),[]),[h,_]=(0,a.KO)(d||m),g=Math.max(e.length,s),f=Math.min(s,e.length),[E,y]=n.useState(h?g:f),v=e.length,b=n.useMemo(()=>e.slice(0,Math.min(v,E)),[E,e,v]),I=n.useMemo(()=>h&&!0,[h,!0]);n.useEffect(()=>{c&&y(I?v:s)},[s,v,p,y,c,I,!0]);let T=n.useCallback(()=>{_(!0),y(v)},[y,v,_]),w=n.useCallback(()=>{_(!1),y(s)},[y,s,_]),S=v-b.length,C=b.length-s,O=n.useMemo(()=>{if(I){let e=n.createElement("div",{className:l.E},n.createElement(o.o,{label:r?r(C):"",onClick:w,dataTestId:u}));return C>0?e:null}{let e=n.createElement("div",{className:l.E},n.createElement(o.K,{label:t(S),onClick:T,dataTestId:u}));return S>0?e:null}},[I,!0,t,r,C,S,w,T,u]);return{visibleItems:b,button:O}}},919325:(e,t,r)=>{r.d(t,{hX:()=>c,rQ:()=>s,ut:()=>o});var n=r(652983),i=r(46347),a=r(107763);class o extends n.PureComponent{render(){(0,i.q8)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,i.q8)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+=a.SL,this.props.lightText&&(e+=" "+a.YZ)):(e+=a.Nb,this.props.lightText&&(e+=" "+a.dE)),this.props.canClick&&(this.props.lightText?e+=" "+a.V0:e+=" "+a.w4),n.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},n.createElement("span",{className:a.lx},String.fromCharCode(9311+this.props.number)),this.props.text)}}o.displayName="StepBreadcrumb";class l extends n.PureComponent{render(){return n.createElement("div",{className:a.UB})}}l.displayName="StepBreadcrumbSpacer";class s extends n.PureComponent{render(){return n.createElement("div",{className:`${a.nx} ${this.props.className||""}`},this.props.children)}}s.displayName="StepTitle";class c extends n.PureComponent{render(){return n.createElement("div",{className:a.GM,...this.props})}}c.displayName="StepInstructions"},525699:(e,t,r)=>{r.d(t,{r:()=>s});var n=r(652983),i=r(845976),a=r(848080),o=r(435613),l=r(805992);function s({svg:e,fallbackSvg:t,recordingKey:r,children:s,fix_me_removeThisPropAndProvideUI3Icon:c,...d}){let{version:u}=(0,a.Fg)();return"ui3"===u?s||n.createElement(i.c,null):t?n.createElement(l.f,{svg:e,fallbackSvg:t,...d}):n.createElement(o.n,{svg:e,recordingKey:r,...d})}},927681:(e,t,r)=>{r.d(t,{b:()=>h,V:()=>p});var n=r(652983),i=r(735300);function a(e){if(null==e)return"";let t=new URL(e);return t.hostname}var o=r(970740),l=r(795153),s=r(438907),c=r(435613);let d="link_favicon--favicon--jk134",u=r(315859);function p({url:e}){let[t]=(0,l.aM)(m(e)),[r,s]=n.useState(null);if(n.useEffect(()=>{if("loaded"===t.status&&t.data){let e=URL.createObjectURL(new Blob([new Uint8Array(t.data)],{type:"image/png"}));s(e)}},[t.data,t.status]),e&&"github"===(0,i.V9)(e))return h();let p=e&&(0,i.ge)(e);return(null==p?void 0:p.toLowerCase())==="jira.com"||(null==p?void 0:p.toLowerCase())==="atlassian.net"?n.createElement("img",{alt:(0,o.t)("design_systems.component_panel.favicon_alt",{hostName:a(e)}),className:d,src:"https://static.figma.com/uploads/aae0db2814117595e45cc509d52e79e7cc31333c"}):(null==p?void 0:p.toLowerCase())==="chromatic.com"?n.createElement("img",{alt:(0,o.t)("design_systems.component_panel.favicon_alt",{hostName:a(e)}),className:d,src:"https://static.figma.com/uploads/ae3807b6d650b52da20879078b85a0df23ee056a"}):"loading"===t.status?n.createElement("div",{className:"link_favicon--faviconLoadingPlaceholder--uJ-Kf"}):r?n.createElement("img",{alt:(0,o.t)("design_systems.component_panel.favicon_alt",{hostName:a(e)}),className:d,src:r}):n.createElement(c.n,{svg:u,className:"link_favicon--faviconPlaceholder--CFVEV"})}let m=l.t1.Query({fetch:async e=>{if(!e)return null;let t=await s.F.getFaviconForUrlProxy({url:function(e){if(null==e)return"";let t=new URL(e);return t.origin}(e)});return t.data.meta??null}});function h(){return n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}},103481:(e,t,r)=>{r.d(t,{d:()=>s});var n=r(652983),i=r(256768),a=r(484188),o=r(225468);let l=(e,t=(0,a.Kd)().getPrimaryLocale(!1))=>new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(i.Z.utc(e).toDate());function s(e){let t=l(e.date,e.locale);return n.createElement("span",{"data-tooltip-type":o.fR.TEXT,"data-tooltip":t},e.children)}},926212:(e,t,r)=>{r.d(t,{kd:()=>T,u:()=>b,zg:()=>I});var n=r(652983),i=r(87608),a=r.n(i),o=r(814754),l=r(716250),s=r(337167),c=r(571529),d=r(618723),u=r(435613),p=r(970740),m=r(124040),h=r(131826),_=r(448694),g=r(50235),f=r(622139),E=r(675620),y=r(330458);function v(e){let[t,r]=n.useState(e.showBanner),{trackEvent:i}=(0,h.gx)(),l=n.useRef(null),c=(0,s.b9)(g.G9),f=(0,o.y)(l)??o.Q,v=t?f.height+(e.verticalPadding||0):0;n.useEffect(()=>{c(v)},[v,c]);let b=async()=>{r(!1),await (0,g.th)({consentRegion:"explicit",cookiesEnabled:!1}),i(_.BX,{trackingDescriptor:m.y.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},I=async()=>{r(!1),await (0,g.th)({consentRegion:"explicit",cookiesEnabled:!0}),i(_.BX,{trackingDescriptor:m.y.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},w=async()=>{r(!1),await (0,g.th)({consentRegion:"explicit",cookiesEnabled:!1}),i(_.BX,{trackingDescriptor:m.y.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return t?n.createElement("div",{className:a()(y.nC,e.variant===E.I.COMMUNITY&&[y.O,y.jA],e.variant===E.I.FILE_VIEWER&&y.KC,e.variant===E.I.PROTOTYPE&&y.P1,e.variant===E.I.AUTH&&[y.O,y.Xd]),role:"region",ref:l,"aria-label":(0,p.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},n.createElement("div",{className:y.d1},n.createElement(p.Tx,{id:"cookies.explicit_consent_body"})," ",n.createElement(d.yi,{href:T(),target:"_blank",rel:"noreferrer"},n.createElement(p.Tx,{id:"cookies.cookies_settings"}))),n.createElement("div",{className:y.Nw},n.createElement(e.SecondaryButton,{onClick:b,"data-testid":"cookie-opt-out-button"},n.createElement(p.Tx,{id:"cookies.do_not_allow_cookies"})),n.createElement(e.PrimaryButton,{onClick:I,"data-testid":"cookie-opt-in-button"},n.createElement(p.Tx,{id:"cookies.allow_all_cookies"}))),n.createElement("div",{className:y.ZB},n.createElement("button",{onClick:w,type:"button","data-testid":"cookie-dismiss-button"},n.createElement(u.n,{className:y.e1,svg:e.dismissIcon})))):e.persistentMessage&&n.createElement(h.Ui,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function b(e){var t;let r=(0,s.Dv)(g.H9),i=!1;return(r===g.q$.UNLOADED&&(i=!0),r!==g.q$.YES||e.persistentMessage||(i=!0),(0,f.a)()&&(i=!0),(null==(t=(0,l.ZP)().user_data)?void 0:t.id)&&(i=!0),(0,l.ZP)().is_embed&&(i=!0),n.useEffect(()=>{!i&&c.ZP.isIpadNative&&(0,g.th)({consentRegion:"explicit",cookiesEnabled:!1})},[i]),i||c.ZP.isIpadNative)?null:n.createElement(h.Ui,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},n.createElement(v,{...e,showBanner:r===g.q$.NO}))}function I(){return(0,p.t)("cookies.manage_cookies_opt_out")}function T(){return(0,p.Re)("/consent-preferences/")}},288432:(e,t,r)=>{r.d(t,{MF:()=>v,Z5:()=>I,pK:()=>b});var n=r(652983),i=r(87608),a=r.n(i),o=r(814754),l=r(716250),s=r(337167),c=r(571529),d=r(618723),u=r(435613),p=r(124040),m=r(131826),h=r(448694),_=r(50235),g=r(622139),f=r(675620),E=r(330458);function y(e){let[t,r]=n.useState(e.showBanner),[i,l]=n.useState(!1),c=n.useRef(null),g=n.useRef(),y=(0,s.b9)(_.G9),v=(0,o.y)(c)??o.Q,b=t?v.height+(e.verticalPadding||0):0;n.useEffect(()=>{y(b)},[b,y]);let{trackEvent:I}=(0,m.gx)(),T=n.useRef(I);T.current=I,n.useEffect(()=>()=>{clearTimeout(g.current)},[]);let w=n.useCallback(e=>{var n;let i=null==(n=c.current)?void 0:n.contains(e.target);i||(l(!0),window.removeEventListener("click",w),g.current=setTimeout(async()=>{if(!t)return null;r(!1),await (0,_.th)({consentRegion:"implicit",cookiesEnabled:!0}),T.current(h.BX,{trackingDescriptor:p.y.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[t]),S=n.useCallback(async()=>{clearTimeout(g.current),i&&(await (0,_.th)({consentRegion:"implicit",cookiesEnabled:!0}),T.current(h.BX,{trackingDescriptor:p.y.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[i]);n.useEffect(()=>{if(t)return window.addEventListener("click",w),window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S),window.removeEventListener("click",w)}},[t,w,S]);let C=async()=>{r(!1),window.removeEventListener("click",w),await (0,_.th)({consentRegion:"implicit",cookiesEnabled:!1}),T.current(h.BX,{trackingDescriptor:p.y.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},O=async()=>{r(!1),window.removeEventListener("click",w),await (0,_.th)({consentRegion:"implicit",cookiesEnabled:!0}),T.current(h.BX,{trackingDescriptor:p.y.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return t?n.createElement("div",{className:a()(E.nC,e.variant===f.I.COMMUNITY&&[E.O,E.jA],e.variant===f.I.FILE_VIEWER&&E.KC,e.variant===f.I.PROTOTYPE&&E.P1,e.variant===f.I.AUTH&&[E.O,E.Xd]),role:"region","aria-label":"Consent Manager",ref:c,"data-testid":"cookie-banner"},n.createElement("div",{className:E.d1},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",n.createElement(d.yi,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",n.createElement("b",null,"California Residents")," can learn how personal information is"," ",n.createElement(d.yi,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",n.createElement(d.yi,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",n.createElement(d.yi,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",n.createElement(d.yi,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),n.createElement("div",{className:E.Nw},n.createElement(e.SecondaryButton,{onClick:C,"data-testid":"cookie-opt-out-button"},"Opt out")),n.createElement("div",{className:E.ZB},n.createElement("button",{onClick:O,type:"button","data-testid":"cookie-dismiss-button"},n.createElement(u.n,{className:E.e1,svg:e.dismissIcon})))):e.persistentMessage&&n.createElement(m.Ui,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function v(e){var t;let r=(0,s.Dv)(_.H9),i=!1;return(r===_.q$.UNLOADED&&(i=!0),r!==_.q$.YES||e.persistentMessage||(i=!0),(0,g.a)()&&(i=!0),(null==(t=(0,l.ZP)().user_data)?void 0:t.id)&&(i=!0),(0,l.ZP)().is_embed&&(i=!0),n.useEffect(()=>{!i&&c.ZP.isIpadNative&&(0,_.th)({consentRegion:"explicit",cookiesEnabled:!1})},[i]),i||c.ZP.isIpadNative)?null:n.createElement(m.Ui,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},n.createElement(y,{...e,showBanner:r===_.q$.NO}))}let b="Do not sell or share my personal info",I="/opt-out/"},450688:(e,t,r)=>{r.d(t,{q:()=>a});var n=r(652983),i=r(158774);let a=n.createContext(new class{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,t){let r,n;this.tapCallback=t;let i=e=>{n=Date.now(),r=e},a=()=>{n=void 0,r=void 0},o=()=>{var e;r&&n&&Date.now()-n<500&&(null==(e=this.tapCallback)||e.call(this,r),a())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&i({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&r){let t=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:t.screenX,screenY:t.screenY}],{0:{screenX:r.x,screenY:r.y}},10)&&a()}else a()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",o,this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{i({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",o,this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,t){this.tapCallback?this.tapCallback=t:this.installTapGestureRecognizer(e,t)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,t){let r=Date.now(),n=0;for(let i=e.length-1;i>=0;i--)if(Math.abs(e[i]-r)<t)n++;else break;return n}installMultiTapGestureRecognizer(e,t,r){this.multiTapCallbacks[t.numTaps]=r;let n=[],i=!1,a=()=>{let e=Date.now();if(n.push(e),i=this.numTapsInRecencyThreshold(n,500)===t.numTaps)n=[];else for(;n.length>t.numTaps;)n.shift()},o=()=>{var e,r;i&&(null==(r=(e=this.multiTapCallbacks)[t.numTaps])||r.call(e),i=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&a()},this.multiTapTouchStartListeners,t.numTaps),this.replaceEventListener(e,"touchend",o,this.multiTapTouchEndListeners,t.numTaps),this.replaceEventListener(e,"mousedown",a,this.multiTapMouseDownListeners,t.numTaps),this.replaceEventListener(e,"mouseup",o,this.multiTapMouseUpListeners,t.numTaps)}updateMultiTapGestureRecognizer(e,t,r){this.multiTapCallbacks[t.numTaps]?this.multiTapCallbacks[t.numTaps]=r:this.installMultiTapGestureRecognizer(e,t,r)}installMultiTouchLongPressGestureRecognizer(e,t,r){this.multiTouchLongPressCallbacks.set(r,t);let n=null,a=null,o=e=>{if(null==a){for(let t of(a={},e))a[t.identifier]={screenX:t.screenX,screenY:t.screenY};n=setTimeout(()=>{var t;let n;1===e.length&&(n={x:e[0].screenX,y:e[0].screenY}),null==(t=this.multiTouchLongPressCallbacks.get(r))||t(n),i.Gr&&i.Gr.cancelPendingGestures&&i.Gr.cancelPendingGestures()},500)}},l=()=>{null!=n&&(clearTimeout(n),n=null,a=null)},s=e=>{e.length===r&&a?this.didMoveTooMuch(e,a,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===r?o(e.touches):l()},this.multiTouchLongPressTouchStartListeners,r),this.replaceEventListener(e,"touchmove",e=>s(e.touches),this.multiTouchLongPressTouchMoveListeners,r),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,r),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,r),this.replaceEventListener(e,"pointerdown",e=>{1===r&&"touch"!==e.pointerType?o([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,r),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,r),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,r),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,r)}updateMultiTouchLongPressGestureRecognizer(e,t,r){this.multiTouchLongPressCallbacks.has(r)?this.multiTouchLongPressCallbacks.set(r,t):this.installMultiTouchLongPressGestureRecognizer(e,t,r)}uninstallMultiTouchLongPressGestureRecognizer(e,t){this.multiTouchLongPressCallbacks.has(t)&&(this.multiTouchLongPressCallbacks.delete(t),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[t],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[t],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[t],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[t],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[t],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[t],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[t],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[t],!0))}replaceEventListener(e,t,r,n,i){n[i]&&e.removeEventListener(t,n[i],!0),n[i]=r,e.addEventListener(t,n[i],!0)}didMoveTooMuch(e,t,r){for(let n of e){let e=t[n.identifier];if(void 0===e||Math.hypot(e.screenX-n.screenX,e.screenY-n.screenY)>r)return!0}return!1}})},402828:(e,t,r)=>{r.d(t,{Tn:()=>n,hd:()=>i});let n=function(){return!1},i=function(){return!1}},84016:(e,t,r)=>{r.d(t,{IU:()=>n,_6:()=>i,h1:()=>a});let n=function(){return!1},i=function(){return!1},a=function(){return 0}},247949:(e,t,r)=>{r.d(t,{AW:()=>M,NL:()=>j,RE:()=>k,Re:()=>O,SA:()=>$,Sn:()=>B,UG:()=>L,VB:()=>q,Vl:()=>J,Y:()=>P,_0:()=>W,bo:()=>K,dq:()=>z,jV:()=>x,mB:()=>U,mP:()=>C,mw:()=>Y,t9:()=>Z,uD:()=>N});var n,i=r(269658),a=r(716250),o=r(337167),l=r(286206),s=r(117986),c=r(864974),d=r(536982),u=r(754738),p=r(964886),m=r(536562),h=r(961215),_=r(269075),g=r(200273),f=r(666751),E=r(437651),y=r(900294),v=r(486772),b=r(134158),I=r(40162),T=r(91909),w=r(656266),S=r(504721),C=((n=C||{}).NONE="none",n.TOP_BAR="top-bar",n.NEW_FILE="new-file",n);let O="used_figjam_ai_generate",A=(0,o.cn)(!1),N=(0,o.cn)(null,(e,t)=>t(A,!0)),L=(0,o.cn)(null,(e,t)=>{t(D),t(A,!1)}),P=(0,o.cn)(!1),R=(0,o.cn)(null,(e,t)=>{t(D),t(P,!0)}),k=(0,o.cn)(e=>e(A)?"top-bar":(e(E.p)===y.sI.TRUE||e(G))&&!e(P)?"new-file":"none"),D=(0,o.cn)(null,(e,t)=>{t(U),t(G,!1)}),M=(0,o.cn)(null,(e,t)=>{let r=e(k);"top-bar"===r?t(L):"new-file"===r&&t(R)}),F=(0,o.cn)(null,(e,t)=>{e(X).abort(),t(X,new AbortController),t(j,{status:I.L.NONE})}),x=(0,o.cn)(null,(e,t)=>{t(D),t(P,!1),t(A,!1)}),U=(0,o.cn)(null,(e,t)=>{t(F),t(H,v.Rj.ENTRY),t(z,void 0),t(Z,(0,w.ib)()),t(Y,h.G3C.BASIC)}),B=(0,o.cn)(null,(e,t)=>{t(H,v.Rj.PROMPT_BUILDER)}),V=(0,o.cn)(v.Rj.ENTRY),G=(0,o.cn)(!1),H=(0,o.cn)(null,(e,t,r)=>{r===v.Rj.PROMPT_BUILDER&&t(G,!0),t(V,r)}),W=(0,o.cn)(e=>e(V)),K=(0,o.cn)(""),z=(0,o.cn)(void 0),Z=(0,o.cn)((0,w.ib)()),Y=(0,o.cn)(h.G3C.BASIC),j=(0,o.cn)({status:I.L.NONE}),$=(0,f.g)(()=>(0,o.cn)(!1)),q=(0,o.cn)(null,(e,t,r)=>{t($,r)}),X=(0,o.cn)(new AbortController),J=(0,o.cn)(null,async(e,t,{fileKey:r,prompt:n,stage:o,useCaseCategory:h,useCase:f,subtitle:E,entrypoint:y,jumpToNewLine:C})=>{let A;if(!n)return{status:I.L.NONE};t(b.hu,e=>e+1);let N=e((0,m.n_)(O)).data;N||i.V.dispatch(c.v({[O]:!0})),t(F);let L=e(X).signal,P={orgId:e(p.dd),teamId:e(g.Ow)||null};t(j,{status:I.L.LOADING}),t(z,h),t(H,v.Rj.PROMPT_BUILDER);let R="board";try{globalThis.AI_DEBUG_XML&&(0,a.BZ)().figjam_text_to_template_debug?R="board":(R=await (0,v.zj)({prompt:n,signal:L,userInfo:P})||"board",(0,a.BZ)().figjam_text_to_visual_timeline||"timeline"!==R||(R="gantt"),(0,v.Qf)()||"mindmap"!==R||(R="board"))}catch(i){let e=(0,S.W)(i,S.AM.GENERATE);return A={status:I.L.ERROR,type:R,errorMessage:e.message,trace:i.trace},(0,b.ks)(r,0,1,n,"inappropriate",o,y,h,f,E),(0,b.Iz)(r,e.message),e.reportToSentry&&(0,l.Jz)("board"===R?s.k.FIGJAM_ENGAGEMENT:s.k.FIGJAM_CORE,i),t(j,A),A}h&&(h===v.IA.FLOW_CHART?R="diagram":h===v.IA.GANTT_CHART?R="gantt":h===v.IA.ORG_CHART&&(R="orgchart")),(0,b.ks)(r,0,1,n,R,o,y,h,f,E);try{A=await (0,d.E)(()=>e(b.zh)||"null",r,u.n.AI,async()=>{let t;if("board"===R){let i=C||null,a=e(p.dd);await _.y2.user("create-ai-template",async()=>{t=await (0,T.E)({prompt:n,signal:L,fileKey:r,userInfo:P,shouldJumpToNewLine:i,orgId:a})})}else{let t=e(Y),r=e(Z),i=R;await _.y2.user("create-visual",async()=>{await (0,w.DM)({prompt:n,signal:L,visualType:i,userInfo:P,ganttColor:r,ganttType:t})})}let i=e(b.zh);return(0,b.XY)(r,0,n,R,i),{status:I.L.SUCCESS,type:R,trace:t}})}catch(e){if((null==e?void 0:e.name)==="AbortError")A={status:I.L.NONE};else{let t=(0,S.W)(e,S.AM.GENERATE);A={status:I.L.ERROR,type:R,errorMessage:t.message,trace:e.trace},t.reportToSentry&&(0,l.Jz)("board"===R?s.k.FIGJAM_ENGAGEMENT:s.k.FIGJAM_CORE,e),(0,b.Iz)(r,t.message)}}return t(j,A),A})},486772:(e,t,r)=>{r.d(t,{wW:()=>Z,T:()=>Y,Rj:()=>W,IY:()=>J,xG:()=>Q,GA:()=>$,UT:()=>q,RB:()=>j,T$:()=>X,Gc:()=>H,IA:()=>z,Qf:()=>eE,gZ:()=>eh,zj:()=>ef,Eb:()=>ed,eh:()=>eu,D$:()=>ec,Fd:()=>en,sH:()=>ei,jB:()=>es,U0:()=>et,q2:()=>ep,FG:()=>em,xu:()=>e_,vZ:()=>ee,bc:()=>eg});var n,i,a,o,l,s,c=r(652983),d=r(5453),u=r(716250),p=r(970740),m=r(161895);function h(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.83999,fill:"#E9FAFF"}),c.createElement("g",{filter:"url(#filter0_d_2612_73757)"},c.createElement("rect",{width:13.1624,height:6.07498,transform:"translate(28.8417 20.3584)",fill:"#5551FF"})),c.createElement("path",{d:"M26.7158 21.4743L25.4747 15.0205L30.9356 18.2474L28.2052 18.9921L26.7158 21.4743Z",fill:"#5551FF"}),c.createElement("g",{filter:"url(#filter1_d_2612_73757)"},c.createElement("rect",{width:12.3882,height:5.71762,transform:"matrix(-1 0 0 1 19.5897 28.5029)",fill:"#80C9FF"})),c.createElement("path",{d:"M21.5109 29.6175L22.6864 23.5049L17.5142 26.5612L20.1003 27.2665L21.5109 29.6175Z",fill:"#80C9FF"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.33999,stroke:"black",strokeOpacity:.05}),c.createElement("defs",null,c.createElement("filter",{id:"filter0_d_2612_73757",x:27.4917,y:19.3459,width:15.8625,height:8.77494,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.337499}),c.createElement("feGaussianBlur",{stdDeviation:.674997}),c.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"}),c.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2612_73757"}),c.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2612_73757",result:"shape"})),c.createElement("filter",{id:"filter1_d_2612_73757",x:5.93095,y:27.55,width:14.9294,height:8.2587,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.317646}),c.createElement("feGaussianBlur",{stdDeviation:.635292}),c.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"}),c.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2612_73757"}),c.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2612_73757",result:"shape"}))))}function _(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.84,fill:"#FFF8DF"}),c.createElement("g",{filter:"url(#a)"},c.createElement("path",{fill:"#FFC700",d:"M6.604 14.347h13.737V28.15H6.604z"})),c.createElement("g",{filter:"url(#b)"},c.createElement("path",{fill:"#FFC470",d:"M27.662 16.175h13.737v13.803H27.662z"})),c.createElement("g",{filter:"url(#c)"},c.createElement("path",{fill:"#DA8167",d:"M15.764 19.849h13.737v13.803H15.764z"})),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}),c.createElement("defs",null,c.createElement("filter",{id:"a",x:6.032,y:14.232,width:14.881,height:15.089,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.143}),c.createElement("feGaussianBlur",{stdDeviation:.057}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.02 0"}),c.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.172}),c.createElement("feGaussianBlur",{stdDeviation:.143}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),c.createElement("feBlend",{in2:"effect1_dropShadow_2612_73754",result:"effect2_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.6}),c.createElement("feGaussianBlur",{stdDeviation:.286}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),c.createElement("feBlend",{in2:"effect2_dropShadow_2612_73754",result:"effect3_dropShadow_2612_73754"}),c.createElement("feBlend",{in:"SourceGraphic",in2:"effect3_dropShadow_2612_73754",result:"shape"})),c.createElement("filter",{id:"b",x:27.089,y:16.06,width:14.881,height:15.089,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.143}),c.createElement("feGaussianBlur",{stdDeviation:.057}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.02 0"}),c.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.172}),c.createElement("feGaussianBlur",{stdDeviation:.143}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),c.createElement("feBlend",{in2:"effect1_dropShadow_2612_73754",result:"effect2_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.6}),c.createElement("feGaussianBlur",{stdDeviation:.286}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),c.createElement("feBlend",{in2:"effect2_dropShadow_2612_73754",result:"effect3_dropShadow_2612_73754"}),c.createElement("feBlend",{in:"SourceGraphic",in2:"effect3_dropShadow_2612_73754",result:"shape"})),c.createElement("filter",{id:"c",x:15.191,y:19.734,width:14.881,height:15.089,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.143}),c.createElement("feGaussianBlur",{stdDeviation:.057}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.02 0"}),c.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.172}),c.createElement("feGaussianBlur",{stdDeviation:.143}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),c.createElement("feBlend",{in2:"effect1_dropShadow_2612_73754",result:"effect2_dropShadow_2612_73754"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:.6}),c.createElement("feGaussianBlur",{stdDeviation:.286}),c.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),c.createElement("feBlend",{in2:"effect2_dropShadow_2612_73754",result:"effect3_dropShadow_2612_73754"}),c.createElement("feBlend",{in:"SourceGraphic",in2:"effect3_dropShadow_2612_73754",result:"shape"}))))}function g(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.84,fill:"#F1F9D8"}),c.createElement("rect",{x:28.2,y:17.391,width:13.2,height:13.2,rx:6.6,fill:"#BAD66D"}),c.createElement("path",{d:"M28.277 24.348a.5.5 0 0 0 0-.707l-3.182-3.182a.5.5 0 1 0-.707.707l2.828 2.828-2.828 2.829a.5.5 0 0 0 .707.707l3.182-3.182Zm-9.7.146h9.346v-1h-9.347v1Z",fill:"#000"}),c.createElement("rect",{x:6.598,y:17.994,width:12,height:12,rx:.45,fill:"#6D8E35"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}))}function f(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.84,fill:"#FFE3F9"}),c.createElement("path",{fill:"#F697F9",d:"M7.205 15.955h22.29v7.2H7.205z"}),c.createElement("path",{fill:"#FFBDF2",d:"M14.654 25.084h27.35v7.2h-27.35z"}),c.createElement("path",{fill:"#000",d:"M22.5 13.884h1V34.12h-1z"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}))}function E(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.84,fill:"#F0E3FF"}),c.createElement("path",{d:"M24.422 20.16v3.884h-9.545v4.127",stroke:"#000"}),c.createElement("path",{d:"M24.291 24.036h9.544v4.135",stroke:"#000"}),c.createElement("rect",{x:28.171,y:28.171,width:11.183,height:11.183,rx:.45,fill:"#DA9DFF"}),c.createElement("rect",{x:9,y:28.171,width:11.183,height:11.183,rx:.45,fill:"#DA9DFF"}),c.createElement("rect",{x:18.586,y:9,width:11.183,height:11.183,rx:.45,fill:"#A259FF"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}))}function y(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.84,fill:"#E5EAF1"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.84 15h-7.218v5h7.216v.006l4.392-2.513-4.39-2.49V15Z",fill:"#fff"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.224 15h-7.22v5h7.216v.006l4.392-2.513-4.388-2.489V15Zm23.219 0h-7.219v5h7.184v.006L36.42 20h.023v-.013l4.357-2.493-4.357-2.471V15Z",fill:"#AFBCCF"}),c.createElement("path",{fill:"#AFBCCF",d:"M6 21.192h11.619v11.223H6z"}),c.createElement("path",{fill:"#fff",d:"M17.619 21.192h11.602v11.223H17.619z"}),c.createElement("path",{fill:"#AFBCCF",d:"M29.221 21.192h11.515v11.223H29.221z"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}))}function v(){return c.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.createElement("rect",{width:48,height:48,rx:3.2,fill:"#F1E5FF"}),c.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"2.7",stroke:"black",strokeOpacity:"0.05"}),c.createElement("path",{d:"M20 24C23.6128 24 23.6128 18 28 18",stroke:"black",strokeWidth:"0.689655",strokeLinecap:"round"}),c.createElement("path",{d:"M20 24C23.6128 24 23.6128 30 28 30",stroke:"black",strokeWidth:"0.689655",strokeLinecap:"round"}),c.createElement("rect",{x:"6",y:"20",width:"14",height:"8",rx:"4",fill:"#9747FF"}),c.createElement("rect",{x:"28",y:"14",width:"14",height:"8",rx:"4",fill:"#D9B8FF"}),c.createElement("rect",{x:"28",y:"26",width:"14",height:"8",rx:"4",fill:"#D9B8FF"}),c.createElement("rect",{x:.5,y:.5,width:47,height:47,rx:3.34,stroke:"#000",strokeOpacity:.05}))}function b(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},c.createElement("rect",{width:"48",height:"48",rx:"3.2",fill:"#FAEDEB"}),c.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"2.7",stroke:"black",strokeOpacity:"0.05"}),c.createElement("path",{d:"M8 24L40 24",stroke:"#D4583B",strokeWidth:"0.5",strokeLinecap:"round"}),c.createElement("path",{d:"M16.6667 24C16.6667 24.7364 17.2636 25.3333 18 25.3333C18.7364 25.3333 19.3333 24.7364 19.3333 24C19.3333 23.2636 18.7364 22.6667 18 22.6667C17.2636 22.6667 16.6667 23.2636 16.6667 24ZM18.25 24V18H17.75V24H18.25Z",fill:"#A55440"}),c.createElement("path",{d:"M31.3333 24C31.3333 23.2636 30.7364 22.6667 30 22.6667C29.2636 22.6667 28.6667 23.2636 28.6667 24C28.6667 24.7364 29.2636 25.3333 30 25.3333C30.7364 25.3333 31.3333 24.7364 31.3333 24ZM29.75 24L29.75 30L30.25 30L30.25 24L29.75 24Z",fill:"#A55440"}),c.createElement("rect",{x:"10",y:"8",width:"16",height:"10",rx:"1",fill:"#D4583B"}),c.createElement("rect",{x:"22",y:"30",width:"16",height:"10",rx:"1",fill:"#D4583B"}))}function I(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("rect",{width:"6.714",height:"6.714",x:"7.5",y:"7.5",fill:"#FFBDF2",stroke:"#F697F9",rx:".786"}),c.createElement("path",{fill:"#D5EB97",stroke:"#9CB74F",d:"M16.5 20.5a4 4 0 1 1 8 0 4 4 0 0 1-8 0Z"}),c.createElement("path",{stroke:"#AFBCCF",strokeLinecap:"round",strokeLinejoin:"round",d:"M18.572 10.857h5.142m0 0-2.571-2.571m2.571 2.571-2.571 2.572M10.857 23.714v-5.142m0 0 2.571 2.57m-2.571-2.57-2.572 2.57"}))}function T(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("rect",{width:"14",height:"6.5",x:"7.75",y:"9",fill:"#FFBDF2",stroke:"#F697F9",rx:".75"}),c.createElement("rect",{width:"11.5",height:"6.5",x:"12.75",y:"16.5",fill:"#E9FAFF",stroke:"#80CAFF",rx:".75"}))}function w(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"m14.45 21.758.976 2.277a.625.625 0 0 0 1.148 0l.976-2.277A1.25 1.25 0 0 1 18.7 21h4.175c.69 0 1.25-.56 1.25-1.25V9.125c0-.69-.56-1.25-1.25-1.25H9.125c-.69 0-1.25.56-1.25 1.25V19.75c0 .69.56 1.25 1.25 1.25H13.3c.5 0 .952.298 1.15.758Z"}),c.createElement("path",{fill:"#A259FF",d:"M13.5 12.25a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0Z"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M12.25 17.25h7.5"}))}function S(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("rect",{width:"14",height:"9",x:"9",y:"7.75",fill:"#FFBDF2",stroke:"#F697F9",rx:"2"}),c.createElement("path",{stroke:"#F697F9",d:"M16 17.25v5"}),c.createElement("path",{stroke:"#AFBCCF",d:"M23.5 22.25h-15"}),c.createElement("circle",{cx:"16",cy:"22.25",r:"2.5",fill:"#F697F9"}))}function C(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("path",{stroke:"#AFBCCF",strokeLinecap:"round",d:"M6 16h1.25c.69 0 1.25-.56 1.25-1.25v-2.5c0-.69.56-1.25 1.25-1.25H11M6 16h1.25c.69 0 1.25.56 1.25 1.25v2.5c0 .69.56 1.25 1.25 1.25H11"}),c.createElement("rect",{width:"12.75",height:"6.5",x:"11.5",y:"7.75",fill:"#FFF2DF",stroke:"#FFC470",rx:"2"}),c.createElement("rect",{width:"12.75",height:"6.5",x:"11.5",y:"17.75",fill:"#E9FAFF",stroke:"#80CAFF",rx:"2"}))}function O(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("path",{fill:"#D5EB97",stroke:"#9CB74F",strokeLinecap:"round",strokeLinejoin:"round",d:"M17.875 8h-8.75C8.504 8 8 8.504 8 9.125v7.615c0 .607.641 1 1.182.723l2.295-1.171h6.398c.621 0 1.125-.504 1.125-1.125V9.125C19 8.504 18.496 8 17.875 8Z"}),c.createElement("path",{fill:"#fff",stroke:"#9CB74F",strokeLinecap:"round",strokeLinejoin:"round",d:"M14.126 14.27h8.809c.621 0 1.125.504 1.125 1.126v7.769a.813.813 0 0 1-1.186.722l-2.31-1.194h-6.438A1.125 1.125 0 0 1 13 21.569v-6.173c0-.62.503-1.124 1.125-1.124Z"}))}function A(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("path",{fill:"#fff",stroke:"#AFBCCF",d:"M7.75 12.75h16.5v9.517a1.983 1.983 0 0 1-1.983 1.983H9.733a1.983 1.983 0 0 1-1.983-1.983V12.75Z"}),c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"M7.75 10.983C7.75 9.888 8.638 9 9.733 9h12.534c1.095 0 1.983.888 1.983 1.983v3.267H7.75v-3.267Z"}),c.createElement("rect",{width:"1",height:"3.75",x:"11",y:"7.539",fill:"#A259FF",rx:".5"}),c.createElement("rect",{width:"1",height:"3.75",x:"19.75",y:"7.539",fill:"#A259FF",rx:".5"}))}function N(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("mask",{id:"a",fill:"#fff"},c.createElement("path",{fillRule:"evenodd",d:"M19.75 19.125c0-.393.19-.758.48-1.024a6.25 6.25 0 1 0-8.46 0c.29.266.48.63.48 1.024v3.125a2.5 2.5 0 0 0 2.5 2.5h2.5a2.5 2.5 0 0 0 2.5-2.5v-3.125Z",clipRule:"evenodd"})),c.createElement("path",{fill:"#FFF2DF",fillRule:"evenodd",d:"M19.75 19.125c0-.393.19-.758.48-1.024a6.25 6.25 0 1 0-8.46 0c.29.266.48.63.48 1.024v3.125a2.5 2.5 0 0 0 2.5 2.5h2.5a2.5 2.5 0 0 0 2.5-2.5v-3.125Z",clipRule:"evenodd"}),c.createElement("path",{fill:"#FFC470",d:"M21.139 13.5a5.123 5.123 0 0 1-1.661 3.783l1.504 1.636a7.344 7.344 0 0 0 2.38-5.419h-2.223ZM16 8.361c2.838 0 5.139 2.3 5.139 5.139h2.222A7.361 7.361 0 0 0 16 6.139V8.36ZM10.861 13.5c0-2.838 2.3-5.139 5.139-5.139V6.14A7.361 7.361 0 0 0 8.639 13.5h2.222Zm1.661 3.783a5.123 5.123 0 0 1-1.66-3.783H8.638c0 2.144.918 4.075 2.379 5.419l1.504-1.636Zm.84 4.967v-3.125h-2.223v3.125h2.222Zm1.388 1.389a1.389 1.389 0 0 1-1.389-1.389H11.14a3.611 3.611 0 0 0 3.611 3.611V23.64Zm2.5 0h-2.5v2.222h2.5V23.64Zm1.389-1.389c0 .767-.622 1.389-1.389 1.389v2.222a3.611 3.611 0 0 0 3.611-3.611H18.64Zm0-3.125v3.125h2.222v-3.125H18.64Zm-7.621-.206c.106.097.12.18.12.206h2.223c0-.76-.366-1.406-.839-1.842l-1.504 1.636Zm8.46-1.636c-.473.436-.84 1.082-.84 1.842h2.223c0-.026.015-.109.121-.206l-1.504-1.636Z",mask:"url(#a)"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.111",d:"M16 20.375V17.25m0 0-2.5-2.5m2.5 2.5 2.5-2.5"}),c.createElement("path",{fill:"#fff",stroke:"#FFC470",strokeWidth:"1.111",d:"M12.806 20.306h6.388v1.944c0 1.074-.87 1.944-1.944 1.944h-2.5a1.944 1.944 0 0 1-1.944-1.944v-1.944Z"}))}function L(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("circle",{cx:"21",cy:"21",r:"3.25",fill:"#fff",stroke:"#AFBCCF"}),c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"M21.833 13.781h-.5v1.777a.75.75 0 0 1-1.27.54l-2.258-2.177-.145-.14h-3.32l-.145.14-2.258 2.177a.75.75 0 0 1-1.27-.54v-1.777H8.5a.75.75 0 0 1-.75-.75V8.5a.75.75 0 0 1 .75-.75h15a.75.75 0 0 1 .75.75v4.531a.75.75 0 0 1-.75.75h-1.667Z"}),c.createElement("circle",{cx:"11",cy:"21",r:"3.25",fill:"#fff",stroke:"#AFBCCF"}))}function P(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},c.createElement("path",{fill:"#D5EB97",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Z"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M16 12.25v3.906l2.5 2.344"}),c.createElement("path",{fill:"#9CB74F",fillRule:"evenodd",d:"M10.256 11.146A7.52 7.52 0 1 1 8.479 16a.5.5 0 0 0-1 0A8.52 8.52 0 1 0 9.5 10.49V8a.5.5 0 0 0-1 0v3.646a.5.5 0 0 0 .5.5h3.646a.5.5 0 1 0 0-1h-2.39Z",clipRule:"evenodd"}))}function R(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("rect",{width:"5",height:"5",x:"1.5",y:"1.5",fill:"#FFBDF2",stroke:"#F697F9",rx:".5"}),c.createElement("path",{fill:"#D5EB97",stroke:"#9CB74F",d:"M8.5 11.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Z"}),c.createElement("path",{stroke:"#AFBCCF",strokeLinecap:"round",strokeLinejoin:"round",d:"M10 4h4m0 0-2-2m2 2-2 2M4 14v-4m0 0 2 2m-2-2-2 2"}))}function k(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("rect",{width:"11",height:"5",x:"1.5",y:"2.5",fill:"#FFBDF2",stroke:"#F697F9",rx:".5"}),c.createElement("rect",{width:"9",height:"5",x:"5.5",y:"8.5",fill:"#E9FAFF",stroke:"#80CAFF",rx:".5"}))}function D(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"m6.76 12.606.78 1.822a.5.5 0 0 0 .92 0l.78-1.822a1 1 0 0 1 .92-.606h3.34a1 1 0 0 0 1-1V2.5a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1V11a1 1 0 0 0 1 1h3.34a1 1 0 0 1 .92.606Z"}),c.createElement("path",{fill:"#A259FF",d:"M6 5a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M5 9h6"}))}function M(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("rect",{width:"11",height:"7",x:"2.5",y:"1.5",fill:"#FFBDF2",stroke:"#F697F9",rx:"1.5"}),c.createElement("path",{stroke:"#F697F9",d:"M8 9v4"}),c.createElement("path",{stroke:"#AFBCCF",d:"M14 13H2"}),c.createElement("circle",{cx:"8",cy:"13",r:"2",fill:"#F697F9"}))}function F(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none"},c.createElement("path",{stroke:"#AFBCCF",strokeLinecap:"round",d:"M1 8h1a1 1 0 0 0 1-1V5a1 1 0 0 1 1-1h1M1 8h1a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h1"}),c.createElement("rect",{width:"10",height:"5",x:"5.5",y:"1.5",fill:"#FFF2DF",stroke:"#FFC470",rx:"1.5"}),c.createElement("rect",{width:"10",height:"5",x:"5.5",y:"9.5",fill:"#E9FAFF",stroke:"#80CAFF",rx:"1.5"}))}function x(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("path",{fill:"#D5EB97",stroke:"#9CB74F",strokeLinecap:"round",strokeLinejoin:"round",d:"M9.5 1.5h-7a1 1 0 0 0-1 1v6.092a.75.75 0 0 0 1.091.668l1.815-.927H9.5a1 1 0 0 0 1-1V2.5a1 1 0 0 0-1-1Z"}),c.createElement("path",{fill:"#fff",stroke:"#9CB74F",strokeLinecap:"round",strokeLinejoin:"round",d:"M6.5 6.517h7.048a1 1 0 0 1 1 1v6.215a.75.75 0 0 1-1.094.667l-1.827-.944H6.5a1 1 0 0 1-1-1V7.517a1 1 0 0 1 1-1Z"}))}function U(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("path",{fill:"#fff",stroke:"#AFBCCF",d:"M1.5 5.5h13v7.513c0 .821-.666 1.487-1.487 1.487H2.987A1.487 1.487 0 0 1 1.5 13.013V5.5Z"}),c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"M1.5 3.987c0-.821.666-1.487 1.487-1.487h10.026c.821 0 1.487.666 1.487 1.487V6.5h-13V3.987Z"}),c.createElement("rect",{width:"1",height:"3",x:"4",y:"1",fill:"#A259FF",rx:".5"}),c.createElement("rect",{width:"1",height:"3",x:"11",y:"1",fill:"#A259FF",rx:".5"}))}function B(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("mask",{id:"a",fill:"#fff"},c.createElement("path",{fillRule:"evenodd",d:"M11 10.5c0-.315.152-.606.384-.819a5 5 0 1 0-6.768 0c.232.213.384.504.384.819V13a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2.5Z",clipRule:"evenodd"})),c.createElement("path",{fill:"#FFF2DF",fillRule:"evenodd",d:"M11 10.5c0-.315.152-.606.384-.819a5 5 0 1 0-6.768 0c.232.213.384.504.384.819V13a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2.5Z",clipRule:"evenodd"}),c.createElement("path",{fill:"#FFC470",d:"m4.616 9.681-.677.736.677-.736Zm6.768 0-.677-.736.677.736ZM12 6a3.987 3.987 0 0 1-1.293 2.945l1.354 1.472A5.987 5.987 0 0 0 14 6h-2ZM8 2a4 4 0 0 1 4 4h2a6 6 0 0 0-6-6v2ZM4 6a4 4 0 0 1 4-4V0a6 6 0 0 0-6 6h2Zm1.293 2.945A3.987 3.987 0 0 1 4 6H2c0 1.748.748 3.322 1.94 4.417l1.353-1.472ZM6 13v-2.5H4V13h2Zm1 1a1 1 0 0 1-1-1H4a3 3 0 0 0 3 3v-2Zm2 0H7v2h2v-2Zm1-1a1 1 0 0 1-1 1v2a3 3 0 0 0 3-3h-2Zm0-2.5V13h2v-2.5h-2Zm-6.06-.083c.03.028.046.053.054.07.008.016.006.02.006.013h2c0-.645-.31-1.19-.707-1.555L3.94 10.417Zm6.767-1.472C10.31 9.31 10 9.855 10 10.5h2c0 .006-.002.003.006-.013a.247.247 0 0 1 .055-.07l-1.354-1.472Z",mask:"url(#a)"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M8 11.5V9m0 0L6 7m2 2 2-2"}),c.createElement("path",{fill:"#fff",stroke:"#FFC470",d:"M5.5 11.5h5V13A1.5 1.5 0 0 1 9 14.5H7A1.5 1.5 0 0 1 5.5 13v-1.5Z"}))}function V(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("circle",{cx:"12",cy:"12",r:"2.5",fill:"#fff",stroke:"#AFBCCF"}),c.createElement("path",{fill:"#DA9DFF",stroke:"#A259FF",d:"M12.667 6.125h-.5v1.522a.5.5 0 0 1-.847.36L9.514 6.264l-.146-.14H6.632l-.146.14L4.68 8.006a.5.5 0 0 1-.847-.36V6.126H2a.5.5 0 0 1-.5-.5V2a.5.5 0 0 1 .5-.5h12a.5.5 0 0 1 .5.5v3.625a.5.5 0 0 1-.5.5h-1.333Z"}),c.createElement("circle",{cx:"4",cy:"12",r:"2.5",fill:"#fff",stroke:"#AFBCCF"}))}function G(){return c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},c.createElement("path",{fill:"#D5EB97",d:"M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Z"}),c.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5v3.125L10 10"}),c.createElement("path",{fill:"#9CB74F",fillRule:"evenodd",d:"M3.266 4.45A5.917 5.917 0 1 1 2.083 8a.5.5 0 0 0-1 0 6.917 6.917 0 1 0 1.584-4.404V2.168a.5.5 0 0 0-1 0v2.917a.5.5 0 0 0 .5.5h2.916a.5.5 0 0 0 0-1H3.114a.498.498 0 0 0 .152-.135Z",clipRule:"evenodd"}))}let H=200;var W=((n=W||{})[n.ENTRY=0]="ENTRY",n[n.PROMPT_BUILDER=1]="PROMPT_BUILDER",n),K=((i=K||{}).MEETING="meeting",i.GANTT_CHART="gantt_chart",i.BRAINSTORM="brainstorm",i.FLOW_CHART="flow_chart",i.ORG_CHART="org_chart",i.PLAN="plan",i.MIND_MAP="mind_map",i.TIMELINE="timeline",i),z=((a=z||{}).WEEKLY_SYNC="weekly_sync",a.PLAN="plan",a.BRAINSTORM="brainstorm",a.TEAM_RETRO="team_retro",a.ONEONONE="1:1",a.GANTT_CHART="gantt_chart",a.FLOW_CHART="flow_chart",a.ORG_CHART="org_chart",a.MIND_MAP="mind_map",a.TIMELINE="timeline",a),Z=((o=Z||{}).IN_EDITOR="in_editor",o.TEMPLATE_SHELF="template_shelf",o),Y=((l=Y||{}).GENERATE_MODE="generate_stage",l.REFINEMENT_MODE="refinement_stage",l);let j="figjam_ai_summarization",$="figjam_ai_clustering",q="figjam_ai_diagram",X="figjam_ai_template",J="https://help.figma.com/hc/articles/16822138920343";var Q=((s=Q||{}).TEMPLATE="template",s.VISUAL="visual",s);function ee(e){return"categoryKey"in e}function et(e){switch(e){case"weekly_sync":return[{icon:"\u{1F9CA}",title:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker.prompt")},{icon:"\u{1F4CB}",title:(0,p.t)("whiteboard.ai_modal.suggestion.agenda"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.agenda.prompt")},{icon:"\u{1F5E3}",title:(0,p.t)("whiteboard.ai_modal.suggestion.updates"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.updates.prompt")},{icon:"\u27A1\uFE0F",title:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps.prompt")}];case"plan":return[{icon:"\u{1F945}",title:(0,p.t)("whiteboard.ai_modal.suggestion.goals"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.goals.prompt")},{icon:"\u{1F4D1}",title:(0,p.t)("whiteboard.ai_modal.suggestion.project_list"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.plan_project_list.prompt")},{icon:"\u27A1\uFE0F",title:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps.prompt")}];case"brainstorm":return[{icon:"\u{1F9CA}",title:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker.prompt")},{icon:"\u{1F945}",title:(0,p.t)("whiteboard.ai_modal.suggestion.goals"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.goals.prompt")},{icon:"\u{1F4C8}",title:(0,p.t)("whiteboard.ai_modal.suggestion.research"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.research.prompt")},{icon:"\u27A1\uFE0F",title:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps.prompt")}];case"team_retro":return[{icon:"\u{1F4CB}",title:(0,p.t)("whiteboard.ai_modal.suggestion.agenda"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.agenda.prompt")},{icon:"\u{1F9CA}",title:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.icebreaker.prompt")},{icon:"\u27A1\uFE0F",title:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.next_steps.prompt")}];case"1:1":return[{icon:"\u{1F4CB}",title:(0,p.t)("whiteboard.ai_modal.suggestion.agenda"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.agenda.prompt")},{icon:"\u{1F5E3}",title:(0,p.t)("whiteboard.ai_modal.suggestion.updates"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.updates.prompt")},{icon:"\u{1F4C6}",title:(0,p.t)("whiteboard.ai_modal.suggestion.calendar"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.calendar.prompt")}];case"gantt_chart":return[{icon:"\u{1F4C6}",title:(0,p.t)("whiteboard.ai_modal.suggestion.date_range"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.date_range.prompt")},{icon:"\u{1F4D1}",title:(0,p.t)("whiteboard.ai_modal.suggestion.project_list"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.project_list.prompt")},{icon:"\u{1F3C1}",title:(0,p.t)("whiteboard.ai_modal.suggestion.milestones"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.milestones.prompt")}];case"flow_chart":return[{icon:"\u{1F522}",title:(0,p.t)("whiteboard.ai_modal.suggestion.decision_tree"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.decision_tree.prompt")}];case"org_chart":return[{icon:"\u{1FA9C}",title:(0,p.t)("whiteboard.ai_modal.suggestion.levels"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.levels.prompt")},{icon:"\u{1F9D1}",title:(0,p.t)("whiteboard.ai_modal.suggestion.people"),prompt:(0,p.t)("whiteboard.ai_modal.suggestion.people.prompt")}];case"mind_map":case"timeline":return[]}}let er=(e,t)=>e?t:[];function en(e,t){if(t){let r=et(t);return r.filter(t=>!e.includes(t.prompt))}let r=[{icon:"\u{1F324}",title:(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.weekly"),(0,p.t)("whiteboard.ai_modal.pill.keyword.sync"),(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync")],categoryKey:"weekly_sync"},{icon:"\u270D\uFE0F",title:(0,p.t)("whiteboard.ai_modal.usecase.plan"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.plan.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.plan")],categoryKey:"plan"},{icon:"\u{1F9E0}",title:(0,p.t)("whiteboard.ai_modal.usecase.brainstorm"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.brainstorm.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.brainstorm")],categoryKey:"brainstorm"},{icon:"\u{1F538}",title:(0,p.t)("whiteboard.ai_modal.usecase.flow_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.flow_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.flow"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.pill.keyword.flowchart"),(0,p.t)("whiteboard.ai_modal.usecase.flow_chart")],categoryKey:"flow_chart"},{icon:"\u{1F4C6}",title:(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.gantt"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart")],categoryKey:"gantt_chart"},{icon:"\u{1F4BC}",title:(0,p.t)("whiteboard.ai_modal.usecase.org_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.org_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.org"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.usecase.org_chart")],categoryKey:"org_chart"},{icon:"\u{1F331}",title:(0,p.t)("whiteboard.ai_modal.usecase.team_retro"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.team_retro.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.team"),(0,p.t)("whiteboard.ai_modal.pill.keyword.retro"),(0,p.t)("whiteboard.ai_modal.pill.keyword.retrospective"),(0,p.t)("whiteboard.ai_modal.pill.keyword.team_retro"),(0,p.t)("whiteboard.ai_modal.usecase.team_retro")],categoryKey:"team_retro"},{icon:"\u{1F5E3}",title:(0,p.t)("whiteboard.ai_modal.usecase.1:1"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.1:1.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.1:1s"),(0,p.t)("whiteboard.ai_modal.usecase.1:1")],categoryKey:"1:1"},...er(eE(),[{icon:"\u{1F4AD}",title:(0,p.t)("whiteboard.ai_modal.usecase.mind_map"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.mind_map.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.mind_map")],categoryKey:"mind_map"}]),...er(!!(0,u.BZ)().figjam_text_to_visual_timeline,[{icon:"\u23F1\uFE0F",title:(0,p.t)("whiteboard.ai_modal.usecase.timeline"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.timeline.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.timeline")],categoryKey:"timeline"}])];if(0===e.length)return r;let n=[],i=e.toLocaleLowerCase();return r.forEach(e=>{e.keywords.some(e=>e.toLocaleLowerCase().startsWith(i))&&n.push(e)}),n}function ei(e,t){if(t){let r=et(t);return r.filter(t=>!e.includes(t.prompt))}let r=[{title:(0,p.t)("whiteboard.ai_modal.usecase.flow_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.flow_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.flow"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.pill.keyword.flowchart"),(0,p.t)("whiteboard.ai_modal.usecase.flow_chart")],categoryKey:"flow_chart"},{title:(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.gantt"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart")],categoryKey:"gantt_chart"},{title:(0,p.t)("whiteboard.ai_modal.usecase.org_chart"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.org_chart.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.diagram"),(0,p.t)("whiteboard.ai_modal.pill.keyword.diagrams"),(0,p.t)("whiteboard.ai_modal.pill.keyword.org"),(0,p.t)("whiteboard.ai_modal.pill.keyword.chart"),(0,p.t)("whiteboard.ai_modal.usecase.org_chart")],categoryKey:"org_chart"},...er(!!(0,u.BZ)().figjam_text_to_visual_timeline,[{title:(0,p.t)("whiteboard.ai_modal.usecase.timeline"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.timeline.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.timeline")],categoryKey:"timeline"}]),...er(eE(),[{title:(0,p.t)("whiteboard.ai_modal.usecase.mind_map"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.mind_map.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.mind_map")],categoryKey:"mind_map"}]),{title:(0,p.t)("whiteboard.ai_modal.usecase.1:1"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.1:1.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.1:1s"),(0,p.t)("whiteboard.ai_modal.usecase.1:1")],categoryKey:"1:1"},{title:(0,p.t)("whiteboard.ai_modal.usecase.plan"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.plan.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.plan")],categoryKey:"plan"},{title:(0,p.t)("whiteboard.ai_modal.usecase.brainstorm"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.brainstorm.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.usecase.brainstorm")],categoryKey:"brainstorm"},{title:(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.weekly"),(0,p.t)("whiteboard.ai_modal.pill.keyword.sync"),(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync")],categoryKey:"weekly_sync"},{title:(0,p.t)("whiteboard.ai_modal.usecase.team_retro"),prompt:(0,p.t)("whiteboard.ai_modal.usecase.team_retro.prompt"),keywords:[(0,p.t)("whiteboard.ai_modal.pill.keyword.meeting"),(0,p.t)("whiteboard.ai_modal.pill.keyword.meetings"),(0,p.t)("whiteboard.ai_modal.pill.keyword.team"),(0,p.t)("whiteboard.ai_modal.pill.keyword.retro"),(0,p.t)("whiteboard.ai_modal.pill.keyword.retrospective"),(0,p.t)("whiteboard.ai_modal.pill.keyword.team_retro"),(0,p.t)("whiteboard.ai_modal.usecase.team_retro")],categoryKey:"team_retro"}];if(0===e.length)return r;let n=[],i=e.toLocaleLowerCase();return r.forEach(e=>{e.keywords.some(e=>e.toLocaleLowerCase().startsWith(i))&&n.push(e)}),n}function ea(e){let t=Object.keys(e),r=t[Math.floor(Math.random()*t.length)],n=e[r],i=n[Math.floor(Math.random()*n.length)];return{chosenUseCaseKey:r,suggestion:i}}function eo(){let e={meeting:[{type:"meeting",title:(0,p.t)("whiteboard.ai_modal.suggestion.weekly_sync"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.weekly_sync.subtitle_1"),useCaseCategory:"weekly_sync"},{type:"meeting",title:(0,p.t)("whiteboard.ai_modal.suggestion.team_retro"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.team_retro.subtitle_1"),useCaseCategory:"team_retro"},{type:"meeting",title:(0,p.t)("whiteboard.ai_modal.suggestion.1:1"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.1:1.subtitle_1"),useCaseCategory:"1:1"}],brainstorm:[{type:"brainstorm",title:(0,p.t)("whiteboard.ai_modal.suggestion.brainstorm"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.brainstorm.subtitle_1"),useCaseCategory:"brainstorm"}],plan:[{type:"plan",title:(0,p.t)("whiteboard.ai_modal.suggestion.plan"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_1"),useCaseCategory:"plan"},{type:"plan",title:(0,p.t)("whiteboard.ai_modal.suggestion.plan"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_2"),useCaseCategory:"plan"},{type:"plan",title:(0,p.t)("whiteboard.ai_modal.suggestion.plan"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_3"),useCaseCategory:"plan"}]};return e}function el(){let e={gantt:[{type:"gantt_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.gantt"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.gantt.subtitle_1"),useCaseCategory:"gantt_chart"},{type:"gantt_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.gantt"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.gantt.subtitle_2"),useCaseCategory:"gantt_chart"}],flowchart:[{type:"flow_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.flowchart"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.flowchart.subtitle_1"),useCaseCategory:"flow_chart"},{type:"flow_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.flowchart"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.flowchart.subtitle_2"),useCaseCategory:"flow_chart"}],orgchart:[{type:"org_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.orgchart"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.orgchart.subtitle_1"),useCaseCategory:"org_chart"},{type:"org_chart",title:(0,p.t)("whiteboard.ai_modal.suggestion.orgchart"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.orgchart.subtitle_2"),useCaseCategory:"org_chart"}],...er(eE(),{mindmap:[{type:"mind_map",title:(0,p.t)("whiteboard.ai_modal.suggestion.mind_map"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.mind_map.subtitle_1"),useCaseCategory:"mind_map"}]}),...er(!!(0,u.BZ)().figjam_text_to_visual_timeline,{timeline:[{type:"timeline",title:(0,p.t)("whiteboard.ai_modal.suggestion.timeline"),subtitle:(0,p.t)("whiteboard.ai_modal.suggestion.timeline.subtitle_1"),useCaseCategory:"timeline"}]})};return e}function es(e){let t="template"===e?eo():el(),r=ea(t);return r.suggestion}function ec(e){let t=eo(),r=el(),n=[],i=ea(t);n.push(i.suggestion);let a=ea(r);n.push(a.suggestion);let o={...t,...r};delete o[a.chosenUseCaseKey],delete o[i.chosenUseCaseKey];for(let t=0;t<e;t++){let e=ea(o);n.push(e.suggestion),delete o[e.chosenUseCaseKey]}return(0,d.TV)(n)}function ed(e){switch(e){case"meeting":return c.createElement(h,null);case"gantt_chart":return c.createElement(f,null);case"brainstorm":return c.createElement(_,null);case"flow_chart":return c.createElement(g,null);case"org_chart":return c.createElement(E,null);case"plan":return c.createElement(y,null);case"mind_map":return c.createElement(v,null);case"timeline":return c.createElement(b,null)}}function eu(e){switch(e){case"weekly_sync":return c.createElement(L,null);case"brainstorm":return c.createElement(N,null);case"flow_chart":return c.createElement(I,null);case"gantt_chart":return c.createElement(T,null);case"org_chart":return c.createElement(w,null);case"1:1":return c.createElement(O,null);case"plan":return c.createElement(A,null);case"team_retro":return c.createElement(P,null);case"mind_map":return c.createElement(C,null);case"timeline":return c.createElement(S,null)}}function ep(e){switch(e){case"weekly_sync":return c.createElement(V,null);case"brainstorm":return c.createElement(B,null);case"flow_chart":return c.createElement(R,null);case"gantt_chart":return c.createElement(k,null);case"org_chart":return c.createElement(D,null);case"1:1":return c.createElement(x,null);case"plan":return c.createElement(U,null);case"team_retro":return c.createElement(G,null);case"mind_map":return c.createElement(F,null);case"timeline":return c.createElement(M,null)}}function em(e,t){return void 0!==t&&e===function(e){switch(e){case"weekly_sync":return(0,p.t)("whiteboard.ai_modal.usecase.weekly_sync.prompt");case"brainstorm":return(0,p.t)("whiteboard.ai_modal.usecase.brainstorm.prompt");case"flow_chart":return(0,p.t)("whiteboard.ai_modal.usecase.flow_chart.prompt");case"gantt_chart":return(0,p.t)("whiteboard.ai_modal.usecase.gantt_chart.prompt");case"org_chart":return(0,p.t)("whiteboard.ai_modal.usecase.org_chart.prompt");case"1:1":return(0,p.t)("whiteboard.ai_modal.usecase.1:1.prompt");case"plan":return(0,p.t)("whiteboard.ai_modal.usecase.plan.prompt");case"team_retro":return(0,p.t)("whiteboard.ai_modal.usecase.team_retro.prompt");case"mind_map":return(0,p.t)("whiteboard.ai_modal.usecase.mind_map.prompt");case"timeline":return(0,p.t)("whiteboard.ai_modal.usecase.timeline.prompt")}}(t)}function eh(e,t){return`${e} ${t}`}function e_(e){let t=[eh((0,p.t)("whiteboard.ai_modal.suggestion.weekly_sync"),(0,p.t)("whiteboard.ai_modal.suggestion.weekly_sync.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.team_retro"),(0,p.t)("whiteboard.ai_modal.suggestion.team_retro.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.1:1"),(0,p.t)("whiteboard.ai_modal.suggestion.1:1.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.brainstorm"),(0,p.t)("whiteboard.ai_modal.suggestion.brainstorm.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.plan"),(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.plan"),(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_2")),eh((0,p.t)("whiteboard.ai_modal.suggestion.plan"),(0,p.t)("whiteboard.ai_modal.suggestion.plan.subtitle_3")),eh((0,p.t)("whiteboard.ai_modal.suggestion.gantt"),(0,p.t)("whiteboard.ai_modal.suggestion.gantt.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.gantt"),(0,p.t)("whiteboard.ai_modal.suggestion.gantt.subtitle_2")),eh((0,p.t)("whiteboard.ai_modal.suggestion.flowchart"),(0,p.t)("whiteboard.ai_modal.suggestion.flowchart.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.flowchart"),(0,p.t)("whiteboard.ai_modal.suggestion.flowchart.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.flowchart"),(0,p.t)("whiteboard.ai_modal.suggestion.flowchart.subtitle_2")),eh((0,p.t)("whiteboard.ai_modal.suggestion.orgchart"),(0,p.t)("whiteboard.ai_modal.suggestion.orgchart.subtitle_1")),eh((0,p.t)("whiteboard.ai_modal.suggestion.orgchart"),(0,p.t)("whiteboard.ai_modal.suggestion.orgchart.subtitle_2")),...er(eE(),[eh((0,p.t)("whiteboard.ai_modal.suggestion.mind_map"),(0,p.t)("whiteboard.ai_modal.suggestion.mind_map.subtitle_1"))]),...er(!!(0,u.BZ)().figjam_text_to_visual_timeline,[eh((0,p.t)("whiteboard.ai_modal.suggestion.timeline"),(0,p.t)("whiteboard.ai_modal.suggestion.timeline.subtitle_1"))])];return t.includes(e)}function eg(){return!!(0,u.BZ)().figjam_text_to_visual}async function ef({prompt:e,signal:t,userInfo:r}){let n=await m.ZP.figjam.classifyCreate({prompt:e},r);return t.aborted?null:n.type}function eE(){return!!(0,u.BZ)().figjam_text_to_visual_mindmap&&!!(0,u.BZ)().figjam_mindmaps_entry_enable}},247694:(e,t,r)=>{r.d(t,{Fl:()=>_,RK:()=>f,So:()=>g,bN:()=>m,iA:()=>h});var n=r(407908),i=r(716250),a=r(571529),o=r(322186),l=r(196532),s=r(761767),c=r(356268),d=r(413810),u=r(841017),p=r(364404);let m=new Set([c.QM,c.Z]);function h(e,t,r){if(!e&&!t)return!1;let n=e?null==e?void 0:e.ai_features_disabled:null==t?void 0:t.ai_features_disabled;return!!n||r}function _(){let e=(0,o.Ng)()||null,t=(0,u.Rs)()||null,r=(0,p.L)(),i=(0,n.v9)(e=>(0,d.Ij)(e.selectedView)||!e.user);return!!i||h(e,t,r)}function g(e){let t=e.openFile,r=t?t.teamId:null,n=e.currentUserOrgId;return{teamId:r,orgId:n}}let f=()=>{let e=(0,o.Ng)(),t=(0,l.Hw)(null,s.gg.WHITEBOARD),r=_(),n=(0,i.BZ)().figjam_generate_handbrake;return!(n||(0,a.k)())&&!r&&(null==e||!e.k12_google_org)&&t}},134158:(e,t,r)=>{r.d(t,{FJ:()=>h,Iz:()=>g,XY:()=>m,ac:()=>p,dS:()=>f,hu:()=>y,ks:()=>u,mU:()=>_,zh:()=>E});var n,i,a=r(600486),o=r(337167),l=r(344650),s=((n=s||{}).FREEFORM="freeform",n.SUGGESTION="suggestion",n.AUTOCOMPLETE="autocomplete",n),c=((i=c||{}).AI_PROMPT_EDITED="ai_prompt_edited",i.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",i.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",i.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",i.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",i.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",i);let d=e=>"board"===e?"template":"visual";function u(e,t,r,n,i,s,c,u,p,m){let h="inappropriate"===i?i:d(i);(0,l.Bk)(n).then(i=>{(0,a.L9)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:t,numVariants:r,promptId:i,outputType:h,oneClickPromptUseCase:p,oneClickPromptUseCaseCategory:u,oneClickPromptUseCaseSubCategory:m,numCharactersInput:n.length,localOutputId:o.n_.get(y),stage:s,uiTriggeredFrom:c},{forwardToDatadog:!0})})}function p(e,t,r,n,i){(0,l.Bk)(r).then(r=>{(0,a.L9)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:t,promptId:r,outputType:d(n),cortexRequestId:i,localOutputId:o.n_.get(y)},{forwardToDatadog:!0})})}function m(e,t,r,n,i){(0,l.Bk)(r).then(r=>{(0,a.L9)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:t,promptId:r,outputType:d(n),cortexRequestId:i,localOutputId:o.n_.get(y)},{forwardToDatadog:!0})})}function h(){(0,a.L9)("ai_prompt_edited",{promptEditType:"freeform"},{forwardToDatadog:!0})}function _(e,t){(0,a.L9)("ai_prompt_edited",{promptEditType:"suggestion",promptSuggestionIndex:e,promptSuggestionText:t},{forwardToDatadog:!0})}function g(e,t){(0,a.L9)("ai_prompt_request_error",{fileKey:e,errorMessage:t},{forwardToDatadog:!0})}function f(e){let t=e.map(e=>e.title);(0,a.L9)("ai_prompt_suggestions_viewed",{prompt_suggestions:t},{forwardToDatadog:!0})}let E=(0,o.cn)(null),y=(0,o.cn)(0)},591:(e,t,r)=>{r.d(t,{H_:()=>s,l8:()=>d,mn:()=>c,uw:()=>u});var n,i,a=r(269658),o=r(448694),l=r(837728),s=((n=s||{}).REQUEST="ai_summary_requested",n.CREATE="ai_summary_created",n.DELETE="ai_summary_deleted",n.LINK_COPED="ai_summary_link_copied",n.TEXT_COPIED="ai_summary_text_copied",n.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",n),c=((i=c||{}).TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",i);let d=e=>JSON.stringify(e).length;function u(e,t){var r;let n=a.V.getState(),i=(null==(r=(0,l.bC)(n))?void 0:r.key)??"";(0,o.hp)(e,i,n,{...t})}},504721:(e,t,r)=>{r.d(t,{AM:()=>m,M9:()=>_,W:()=>f,c9:()=>h,x6:()=>g});var n,i,a=r(652983),o=r(407908),l=r(593441),s=r(303190),c=r(448501),d=r(716250),u=r(970740),p=r(644383),m=((n=m||{}).SUMMARIZE="sticky-summarization-error",n.CLUSTER="sticky-cluster-error",n.GENERATE="generate-error",n);let h={"sticky-summarization-error":"Error summarizing sticky selection: ","sticky-cluster-error":"Error sorting sticky selection: ","generate-error":"Error generating: "};var _=((i=_||{}).Reload="reload",i.Trace="trace",i);let g=()=>{let e=(0,o.I0)();return a.useCallback((t,r,n)=>{let i;if(n)switch(n.type){case"reload":i={text:(0,u.t)("whiteboard.ai.reload"),action:()=>c.default.reload("Resolving an error encountered in FigJam AI")};break;case"trace":(0,d.BZ)().cortex_execution_tracing&&(i={text:(0,u.t)("whiteboard.ai_modal.share_trace"),action(){(0,s.q)(JSON.stringify(n.trace,null,2),"trace.json")}})}e(p.R.enqueue({type:r,message:t,error:!!i,button:i}))},[e])},f=(e,t)=>{let r={"sticky-summarization-error":{content_length_limit_exceeded:(0,u.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,u.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,u.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,u.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,u.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,u.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,u.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,u.t)("whiteboard.ai.offline_error"),unauthorized:(0,u.t)("whiteboard.ai_summary.generic_error")},"sticky-cluster-error":{content_length_limit_exceeded:(0,u.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),figjam_cluster_out_of_date:(0,u.t)("whiteboard.ai_cluster.out_of_date_error"),rate_limit_exceeded:(0,u.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,u.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,u.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,u.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,u.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,u.t)("whiteboard.ai.offline_error"),unauthorized:(0,u.t)("whiteboard.ai_cluster.generic_error")},"generate-error":{content_length_limit_exceeded:(0,u.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,u.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,u.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,u.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,u.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,u.t)("whiteboard.ai.inappropriate_input_error"),figjam_templates_out_of_date:(0,u.t)("whiteboard.ai_generate.out_of_date_error"),offline:(0,u.t)("whiteboard.ai.offline_error"),unauthorized:(0,u.t)("whiteboard.ai_generate.unknown_error")}},n="generic",i=!0;if(e instanceof l.dC)switch(e.type){case"content_length_limit_exceeded":n="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":n="figjam_summarize_out_of_date";break;case"figjam_cluster_out_of_date":n="figjam_cluster_out_of_date";break;case"figjam_templates_out_of_date":n="figjam_templates_out_of_date";break;case"rate_limit_exceeded":n="rate_limit_exceeded";break;case"service_issue":n="service_issue";break;case"offline":n="offline",i=!1;break;case"unsafe_or_harmful_content":n="unsafe_or_harmful_content",i=!1;break;case"unauthorized":n="unauthorized",i=!1;break;case"figjam_visual_parsing_error":n="generic",i=!1;break;case"generic":if(429===e.data.status){n="rate_limit_exceeded";break}403===e.data.status&&(n="ai_opt_out_error")}let a=r[t],o=a[n]??a.generic;return{type:n,message:o,reportToSentry:i}}},382476:(e,t,r)=>{r.d(t,{$D:()=>D,DM:()=>R,F1:()=>C,I:()=>M,IB:()=>O,Lj:()=>k,gf:()=>P,mi:()=>F,tw:()=>N});var n=r(652983),i=r(407908),a=r(141757),o=r(542881),l=r(9247),s=r(337167),c=r(303498),d=r(870077),u=r(701635),p=r(970740),m=r(644383),h=r(527700),_=r(961215),g=r(200273),f=r(862610),E=r(733609),y=r(305086),v=r(841017),b=r(336980),I=r(985103),T=r(809335),w=r(616466),S=r(840253);let C=()=>{let e=(0,g.uC)(),t=(0,i.I0)(),r=(0,s.b9)(S.Bp);return(n,i,a)=>{e&&(r(i),(0,c.i0)().optimisticallyUpdate({},I.U.setUserColorPaletteOverrideForFile(e,n)).catch(e=>{console.error(e),a||t(m.R.enqueue({message:(0,p.t)("fullscreen.color_palette.apply_palette_failure")}))}).finally(()=>{r(0)}))}};function O(){var e,t;let r=(0,g.uC)()||"",[n]=(0,d.aM)((0,f.AppliedColorPaletteForFile)({fileKey:r}),{enabled:!!r}),i=null==(e=n.data)?void 0:e.file;if("loaded"===n.status&&i&&(null==(t=i.defaultColorPaletteData)?void 0:t.colorPalette))return i.defaultColorPaletteData.colorPalette}let A=e=>{let t=(0,n.useRef)(),{uuid:r,palette:i}=function(e){var t,r;let n={uuid:b.TX,palette:void 0},i=null==(t=e.data)?void 0:t.file;if("loaded"!==e.status||!i)return n;if(i.userColorPaletteOverrideData){let e=i.userColorPaletteOverrideData.colorPaletteUuid;if(e===b.TX)return n;if(i.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:i.userColorPaletteOverrideData.colorPalette}}return(null==(r=i.defaultColorPaletteData)?void 0:r.colorPalette)?{uuid:i.defaultColorPaletteData.colorPaletteUuid,palette:i.defaultColorPaletteData.colorPalette}:n}(e);t.current=i;let a=(null==i?void 0:i.baseColors.join(":"))||"";return(0,n.useMemo)(()=>{let n,i;let l=t.current;return"loaded"===e.status&&l&&r!==b.TX&&(n=P(a.split(":")),i=(0,o.dP)(n)),{loadedPaletteVariations:i,loadedColorPalette:l}},[r,a,e.status])},N=()=>{let e=(0,g.uC)(),[t]=(0,d.aM)((0,f.AppliedColorPaletteForFile)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:r,loadedColorPalette:i}=A(t),a=(0,s.b9)(S.cv);return((0,n.useEffect)(()=>{a(r)},[r,a]),i&&r)?{type:b.Fo.CUSTOM,variations:r,uuid:i.uuid,name:i.name,isTeamDefault:i.isTeamDefault}:{type:b.Fo.DEFAULT,uuid:b.TX}};function L(e){return null!==e}function P(e){return e.map(e=>(0,a.NI)(e)).filter(L)}function R(e,t){let r=N();return!!e&&(r.type===b.Fo.CUSTOM?0>r.variations[t].findIndex(t=>(0,a.l7)(e,t)):(0,w.oW)(e,t)===_.I7V.CUSTOM)}let k=()=>{let e=(0,v.V7)(),t=(0,i.v9)(t=>(0,y.m)(e,t)),r=(0,i.v9)(t=>e&&(0,E.canEditTeam)(e,t));return!!((null==t?void 0:t.org_id)&&r)},D=()=>{let e=(0,v.V7)(),t=(0,i.v9)(t=>(0,y.m)(e,t)),r=(0,i.v9)(t=>e&&(0,E.canViewTeam)(e,t));return!!((null==t?void 0:t.org_id)&&r)};function M(){let e=N(),t=(0,l.D)(e.uuid),r=e.type===b.Fo.CUSTOM?(0,S.HL)(e):null,i=(0,s.b9)(u.gC),a=(0,s.b9)(u.wK),o=(0,s.b9)(u.kj),c=(0,s.b9)(u.Hp);(0,n.useEffect)(()=>{if(e.uuid!==t){if(e.type===b.Fo.DEFAULT){let e=void 0===t;e||(i({paints:T.H7}),a({paints:T.OQ}),o(T.uh),c(function(){let e=Math.floor(Math.random()*w.$0.length);return(0,w.Ol)(w.$0[e],"sticky")||T.PQ}()),_.qjD.setSectionToolColor((0,h.E0)(function(){let e=Math.floor(Math.random()*w.z7.length);return(0,w.Ol)(w.z7[e],"baseLight")||(0,w.Ol)(_.I7V.BLUE_LIGHT,"baseLight")}())))}else r&&(i({paints:[{type:"SOLID",color:r.pencilColor}]}),a({paints:[{type:"SOLID",color:r.highlighterColor}]}),o(r.shapeColor),c(r.stickyColor),_.qjD.setSectionToolColor((0,h.E0)(r.sectionColor)))}},[e,t,r,i,a,o,c])}function F(e){let t=(0,s.b9)(S.MO),r=(0,n.useCallback)((r=!1)=>{r?t(!0):e(!1)},[t,e]),i=(0,n.useCallback)(()=>{e(!0)},[e]);return{closeColorPalettePicker:r,openColorPalettePicker:i}}},840253:(e,t,r)=>{r.d(t,{B0:()=>I,Bp:()=>h,HL:()=>v,MO:()=>p,UJ:()=>g,Ur:()=>u,cv:()=>m,fX:()=>_,hR:()=>y,jc:()=>d,s5:()=>f,tR:()=>E,wc:()=>b});var n=r(337167),i=r(303498),a=r(970740),o=r(644383),l=r(961215),s=r(109032),c=r(985103);let d=(0,n.cn)(-1),u=(0,n.cn)([]),p=(0,n.cn)(!1),m=(0,n.cn)(void 0),h=(0,n.cn)(0),_=(e,t)=>{(0,i.i0)().optimisticallyDeleteWithUUID({ColorPalette:{[e]:null}},c.U.deleteColorPalette(e)).then(()=>t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.delete_success")}))).catch(()=>t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.delete_failure")})))},g=(e,t,r)=>{let{uuid:n}=e;(0,i.i0)().optimisticallyCreateWithUUID({ColorPalette:{[n]:e}},c.U.createColorPalette(e)).then(()=>{t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.saved_success")}))}).catch(()=>{t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.saved_failure")})),r()})},f=(e,t,r)=>{let{uuid:n}=e;(0,i.i0)().optimisticallyUpdateWithUUID({ColorPalette:{[n]:e}},c.U.updateColorPalette(e)).then(()=>t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.saved_success")}))).catch(()=>{t(o.R.enqueue({message:(0,a.t)("fullscreen.color_palette.saved_failure")})),r()})};function E(e,t,r){(0,i.i0)().optimisticallyUpdate({Team:{[e]:{defaultColorPaletteUuid:t}}},c.U.setTeamDefaultPalette(e,t)).catch(()=>{r(o.R.enqueue({message:(0,a.t)("whiteboard.color_palettes.visual_bell.failed_to_set_team_default")}))})}function y(e,t){(0,i.i0)().optimisticallyUpdate({Team:{[e]:{defaultColorPaletteUuid:null}}},c.U.clearTeamDefaultPalette(e)).catch(()=>{t(o.R.enqueue({message:(0,a.t)("whiteboard.color_palettes.visual_bell.failed_to_clear_team_default")}))})}function v(e){let{base:t,sticky:r,highlight:n}=e.variations;return 0===t.length||0===r.length||0===n.length?null:{pencilColor:t[0],highlighterColor:n[0],shapeColor:t.length>1?t[1]:t[0],stickyColor:r[Math.floor(Math.random()*r.length)],sectionColor:t[Math.floor(Math.random()*t.length)]}}function b(e){switch(e){case l.Jqs.STICKY:return["sticky"];case l.Jqs.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function I(){let e=n.n_.get(m);if(!e)return;let t=e.base;if(!t)return;let r=(0,s.vV)().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),i=new Map;r.forEach(e=>{let t=e.fills.length>0?e.fills[0].color:void 0,r=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,n=t||r;n&&(i.has(n)?i.set(n,i.get(n)+1):i.set(n,1))});let a=Array.from(i.entries()).sort((e,t)=>t[1]-e[1]),o=new Map,l=t.sort(()=>Math.random()-.5);a.forEach((e,t)=>{o.set(e[0],l[t%l.length])}),r.forEach(e=>{if(e.fills.length>0){let t=e.fills[0].color,r=t?o.get(t):void 0;r&&(e.fills=[{type:"SOLID",color:r}])}else if(e.strokePaints.data.length>0){let t=e.strokePaints.data[0].color,r=t?o.get(t):void 0;r&&(e.strokePaints={data:[{type:"SOLID",color:r}],blobs:[]})}})}},199867:(e,t,r)=>{r.d(t,{H:()=>x});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(870077),s=r(204829),c=r(970740),d=r(222490),u=r(862610),p=r(733609),m=r(841017),h=r(225468),_=r(414413),g=r(318343),f=r(382476),E=r(337167),y=r(85808),v=r(721127),b=r(131826),I=r(824801),T=r(231690),w=r(305086),S=r(336980),C=r(532444),O=r(158314),A=r(616466),N=r(406446),L=r(840253),P=r(225769),R=r(436970);let k="color_palette_picker--header__iconButton--rFfgT";function D({customColorPalettes:e,closeColorPalettePicker:t,defaultColorPaletteLength:r}){let a=(0,m.V7)(),l=(0,i.v9)(e=>(0,w.m)(a,e)),[s,d]=(0,E.KO)(L.MO),[u,p]=n.useState(!1),h=(0,f.tw)(),_=n.useRef(null),g={uuid:S.TX,name:(0,c.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,A.Mo)("base").map(e=>T.Co.format(e))};if(!e)return n.createElement("div",null);let v=[g].concat(e).map((e,i)=>n.createElement(M,{index:i,key:e.uuid,palette:e,isSelected:h.uuid===e.uuid,containerRef:_,defaultColorPaletteLength:r,closeColorPalettePicker:t}));return n.createElement(b.Ui,{name:C.V4.COLOR_PALETTE_PICKER},n.createElement("div",{className:o()({"color_palette_picker--wrapper--DVGTu":!0,"color_palette_picker--wrapper_onClose--zERit":s})},n.createElement("div",{ref:_,className:o()({"color_palette_picker--container--2HK33 modal--modalShadowFigJam--lkEJ2":!0,"color_palette_picker--container_onClose--NlCEf":s}),onAnimationEnd:()=>{s&&(d(!1),t())}},n.createElement(F,{teamName:(null==l?void 0:l.name)||"",showBottomBorder:u}),n.createElement("div",{className:"color_palette_picker--paletteList--jdLIl"},n.createElement(y.l,{maxHeight:290,innerClassName:"color_palette_picker--scrollContainer__inner--GF0-Z",onScroll:e=>{e>0?p(!0):p(!1)}},v)))))}function M({palette:e,isSelected:t,index:r,containerRef:i,defaultColorPaletteLength:a,closeColorPalettePicker:l}){var s;let c=(0,f.gf)(e.baseColors),d=(0,f.F1)(),u=n.useRef(0===r?0:2*Math.random()*(r%2?1:-1)),p=(null==(s=null==i?void 0:i.current)?void 0:s.offsetHeight)||0,m={"--rowRotation":`rotate(${t?0:u.current}deg)`,"--translatePaletteRow":`${Math.max(p-80-32*r,0)}px`};return n.createElement("button",{className:o()({"color_palette_picker--paletteRow--9Pdbd":!0,"color_palette_picker--paletteRow_selected--um2Cd":t}),style:m,onClick:()=>{if(!t){let t=e.uuid===S.TX?a:e.baseColors.length;d(e.uuid,t)}l(!0)},type:"button","data-tooltip-type":h.fR.TEXT,"data-tooltip":e.name,"data-tooltip-max-width":200,"data-tooltip-show-above":!0,"data-testid":`color-palette-row-${e.uuid}`},c.map((t,r)=>n.createElement(N.gl,{key:e.uuid+I.Z.format(t)+"-"+r,size:"medium",value:t,paletteType:"base",background:"light"})))}function F(e){let t=r(446845),a=r(641366),l=(0,i.I0)(),s=(0,f.Lj)();return n.createElement("div",{className:o()({"color_palette_picker--header--m9FBq":!0,"color_palette_picker--header_bottomBorder--PRGsS":e.showBottomBorder})},e.teamName?n.createElement(c.Tx,{id:"whiteboard.color_palettes.color_palette_picker.team_palettes",teamName:e.teamName}):(0,c.t)("whiteboard.color_palettes.color_palette_picker.team_palettes_no_name"),s&&n.createElement("div",{className:"color_palette_picker--header__rightHand--z-7ux"},n.createElement(O.hU,{className:k,onClick:()=>{l(v.bF({type:P.Tp.type}))},svg:t,"data-tooltip-type":h.fR.TEXT,"data-tooltip":(0,c.t)("whiteboard.color_palettes.dropdown.new_palette"),"data-tooltip-show-above":!0,dataTestId:"create-color-palette-button"}),n.createElement(O.hU,{className:k,onClick:()=>{l(v.bF({type:R.P.type,data:{entryPoint:"whiteboard"}}))},svg:a,"data-tooltip-type":h.fR.TEXT,"data-tooltip":(0,c.t)("whiteboard.color_palettes.dropdown.manage_palettes"),"data-tooltip-show-above":!0,dataTestId:"manage-color-palettes-button"})))}function x(e){var t;let r=(0,m.V7)(),a=(0,i.v9)(e=>!!e.user),o=(0,f.$D)(),s=(0,f.IB)(),[c]=(0,l.aM)((0,u.ColorPalettesForTeam)({teamId:r}),{enabled:!!r}),d=o?(null==(t=c.data)?void 0:t.colorPalettesForTeam)||[]:s?[s]:[],h=(0,i.v9)(e=>!!(e.openFile&&!r&&(0,p.canManageFile)(e.openFile.key,e)&&e.currentUserOrgId)),_=a&&(h||o||r&&!!s),E="v2"===e.iaRedesign?16:2,{closeColorPalettePicker:y,isColorPalettePickerOpen:v}=e.colorPalettePickerState;return _?n.createElement(g.J,{isOpen:v,onClose:y,positionY:(e,t)=>e.y-E-t.height,target:n.createElement(U,{shouldShowMoveToTeamTooltip:h,colorPalettePickerState:e.colorPalettePickerState,disabled:e.disabled,recordingKey:e.recordingKey,iaRedesign:e.iaRedesign}),renderPopoverContents:()=>n.createElement(D,{customColorPalettes:d,closeColorPalettePicker:y,defaultColorPaletteLength:e.defaultColorPaletteLength})}):null}function U({recordingKey:e,colorPalettePickerState:t,shouldShowMoveToTeamTooltip:r,disabled:a,iaRedesign:l}){let u=(0,i.I0)();return n.createElement("div",{key:"caret-",className:o()("color_palettes_submenu_picker--submenuPickerContainer--GTTBT",{"color_palettes_submenu_picker--submenuPickerContainerIaV3--bPsw7":"v2"===l,"color_palettes_submenu_picker--disabled--scEBs":a})},n.createElement(_.zx,{buttonStyle:{height:"100%",backgroundColor:"inherit"},caret:"up",animateCaret:"v2"!==l,isNewSubmenu:"v2"!==l,tabIndex:-1,active:"NONE",onClick:r?e=>{let t=e.target.closest("button");t&&u(d.CJ({target:{kind:h.I7.TEXT,text:(0,c.t)("whiteboard.color_palettes.tooltip.move_to_team")},targetRect:t.getBoundingClientRect(),position:h.DU.ABOVE}))}:()=>{if(!t)return;let{openColorPalettePicker:e,closeColorPalettePicker:r,isColorPalettePickerOpen:n}=t;n?r(!0):e()},testId:"color-palettes-picker-caret",recordingKey:(0,s.ar)(e,"colorPalettesPickerCaret"),tooltip:r?(0,c.t)("whiteboard.color_palettes.tooltip.move_to_team"):void 0}))}},836227:(e,t,r)=>{r.d(t,{$e:()=>E,AS:()=>O,Bw:()=>X,CJ:()=>ec,CS:()=>eu,DV:()=>eh,D_:()=>eA,Do:()=>ed,EX:()=>A,Et:()=>b,FZ:()=>eS,Fm:()=>I,GB:()=>f,GC:()=>Y,GV:()=>d,Gp:()=>P,Hm:()=>ey,Hr:()=>eg,Ir:()=>H,Iv:()=>eb,J5:()=>w,JX:()=>er,K_:()=>ea,Lq:()=>V,Mu:()=>ev,N2:()=>en,O1:()=>F,QZ:()=>C,Qk:()=>D,Ro:()=>U,SA:()=>es,TA:()=>eI,U$:()=>el,UE:()=>h,VZ:()=>p,Vk:()=>y,WW:()=>S,Xz:()=>ef,Z0:()=>R,_O:()=>Z,_V:()=>k,_l:()=>G,_u:()=>eo,a5:()=>M,aW:()=>B,cv:()=>eE,dE:()=>$,d_:()=>N,de:()=>q,fs:()=>eN,g9:()=>j,hL:()=>g,i4:()=>L,jA:()=>e_,js:()=>K,kI:()=>ee,kR:()=>eT,lx:()=>x,m$:()=>ep,od:()=>ei,q$:()=>u,tF:()=>ew,tW:()=>eO,tv:()=>v,uK:()=>J,us:()=>W,v7:()=>m,vK:()=>em,vp:()=>eC,vu:()=>z,wx:()=>et,z:()=>Q,zG:()=>_});var n,i=r(652983),a=r(87608),o=r.n(a),l=r(571529),s=r(212984),c=r(458803);function d(){return i.createElement("svg",{width:"44",height:"40",viewBox:"0 0 44 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2793 13.98L29.4852 21.9631L23.1384 23.6856L19.4364 29.2787L16.2793 13.98ZM17.7214 16.0203L19.9298 26.7215L22.5126 22.8193L26.9682 21.6101L17.7214 16.0203Z",fill:"rgba(0,0,0,0.8)"}))}function u(){return i.createElement("svg",{width:"44",height:"40",viewBox:"0 0 44 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3953 11C20.3953 9.89543 21.2907 9 22.3953 9C23.2677 9 24.0096 9.55857 24.283 10.3376C24.601 10.1244 24.9836 10 25.3953 10C26.4998 10 27.3953 10.8954 27.3953 12V13.2676C27.6894 13.0974 28.031 13 28.3953 13C29.4998 13 30.3953 13.8954 30.3953 15L30.3953 23C30.3953 26.3137 27.709 29 24.3953 29H23.3953C21.5653 29 19.9262 28.1797 18.8271 26.8902C18.7996 26.8662 18.7724 26.8416 18.7455 26.8164L13.7406 22.1104C12.839 21.2628 12.7481 19.8444 13.5367 18.8895C14.309 17.9542 15.6644 17.7838 16.6422 18.5062L17.3953 19.0626V13C17.3953 11.8954 18.2907 11 19.3953 11C19.7596 11 20.1011 11.0974 20.3953 11.2676V11ZM21.3953 11C21.3953 10.4477 21.843 10 22.3953 10C22.9476 10 23.3953 10.4477 23.3953 11V18H24.3953V12C24.3953 11.9993 24.3953 11.9987 24.3953 11.998C24.3963 11.4466 24.8436 11 25.3953 11C25.9475 11 26.3953 11.4477 26.3953 12V18H27.3953V15C27.3953 14.4477 27.843 14 28.3953 14C28.9475 14 29.3953 14.4477 29.3953 15L29.3953 23C29.3953 25.7614 27.1567 28 24.3953 28H23.3953C21.842 28 20.4541 27.2917 19.5371 26.1805C19.5009 26.1514 19.4653 26.1205 19.4305 26.0878L14.4256 21.3819C13.9076 20.8949 13.8555 20.0739 14.3077 19.5262C14.7432 18.9989 15.4993 18.9052 16.0479 19.3105L18.3953 21.0448V13C18.3953 12.4477 18.843 12 19.3953 12C19.9475 12 20.3953 12.4477 20.3953 13V18H21.3953V11Z",fill:"rgba(0,0,0,0.8)"}))}function p(){return i.createElement("svg",{width:"40",height:"80",viewBox:"0 0 40 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 40C15.5 40.8284 14.8284 41.5 14 41.5C13.1716 41.5 12.5 40.8284 12.5 40C12.5 39.1716 13.1716 38.5 14 38.5C14.8284 38.5 15.5 39.1716 15.5 40ZM21.5 40C21.5 40.8284 20.8284 41.5 20 41.5C19.1716 41.5 18.5 40.8284 18.5 40C18.5 39.1716 19.1716 38.5 20 38.5C20.8284 38.5 21.5 39.1716 21.5 40ZM26 41.5C26.8284 41.5 27.5 40.8284 27.5 40C27.5 39.1716 26.8284 38.5 26 38.5C25.1716 38.5 24.5 39.1716 24.5 40C24.5 40.8284 25.1716 41.5 26 41.5Z",fill:"rgba(0,0,0,0.8)"}))}function m(){return i.createElement("svg",{width:"40",height:"80",viewBox:"0 0 40 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 40C15.5 40.8284 14.8284 41.5 14 41.5C13.1716 41.5 12.5 40.8284 12.5 40C12.5 39.1716 13.1716 38.5 14 38.5C14.8284 38.5 15.5 39.1716 15.5 40ZM21.5 40C21.5 40.8284 20.8284 41.5 20 41.5C19.1716 41.5 18.5 40.8284 18.5 40C18.5 39.1716 19.1716 38.5 20 38.5C20.8284 38.5 21.5 39.1716 21.5 40ZM26 41.5C26.8284 41.5 27.5 40.8284 27.5 40C27.5 39.1716 26.8284 38.5 26 38.5C25.1716 38.5 24.5 39.1716 24.5 40C24.5 40.8284 25.1716 41.5 26 41.5Z",fill:"black"}))}function h(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4464 18.1536C12.3526 18.0598 12.3 17.9326 12.3 17.8C12.3 17.6674 12.3526 17.5402 12.4464 17.4465L18.0464 11.8465L18.4 11.4929L19.1071 12.2L18.7535 12.5536L14.0071 17.3H21.2C24.7898 17.3 27.7 20.2102 27.7 23.8V27.4H26.7V23.8C26.7 20.7625 24.2375 18.3 21.2 18.3H14.0071L18.7535 23.0465L19.1071 23.4L18.4 24.1071L18.0464 23.7536L12.4464 18.1536ZM13.6 17.7071V17.8929L13.5071 17.8L13.6 17.7071Z",fill:"rgba(0,0,0,0.8)"}))}function _(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.5536 18.085C27.6474 17.9912 27.7001 17.864 27.7001 17.7314C27.7001 17.5988 27.6474 17.4716 27.5536 17.3779L21.9536 11.7779L21.6001 11.4243L20.8929 12.1314L21.2465 12.485L25.9929 17.2314H18.8C15.2102 17.2314 12.3 20.1415 12.3 23.7314V27.3314H13.3V23.7314C13.3 20.6938 15.7625 18.2314 18.8 18.2314H25.993L21.2465 22.9779L20.8929 23.3314L21.6001 24.0385L21.9536 23.685L27.5536 18.085ZM26.4 17.6385V17.8243L26.4929 17.7314L26.4 17.6385Z",fill:"rgba(0,0,0,0.8)"}))}function g(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.117 8.1464C25.3123 7.9512 25.6289 7.9512 25.8242 8.1464L31.481 13.8033C31.6763 13.9986 31.6763 14.3151 31.481 14.5104L14.5104 31.481C14.3152 31.6762 13.9986 31.6762 13.8033 31.481L8.14645 25.8241C7.95119 25.6289 7.95119 25.3123 8.14645 25.117L25.117 8.1464ZM25.4706 9.2071L9.2071 25.4706L14.1569 30.4203L30.4203 14.1569L25.4706 9.2071Z",fill:"rgba(0,0,0,0.8)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1171 14.5103L27.9455 17.3387L27.2384 18.0459L24.41 15.2174L25.1171 14.5103Z",fill:"rgba(0,0,0,0.8)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7532 20.8743L21.5816 23.7027L20.8745 24.4098L18.0461 21.5814L18.7532 20.8743Z",fill:"rgba(0,0,0,0.8)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9954 18.7529L25.1167 20.8743L24.4096 21.5814L22.2883 19.46L22.9954 18.7529Z",fill:"rgba(0,0,0,0.8)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.6317 25.1169L18.7531 27.2382L18.0459 27.9453L15.9246 25.824L16.6317 25.1169Z",fill:"rgba(0,0,0,0.8)"}))}let f=i.forwardRef(({color:e,toolOrder:t=1,shouldAnimate:r=!0},n)=>i.createElement("div",{className:o()({[c.Tff]:!0,[c.Ble]:2===t,[c.TzM]:3===t})},i.createElement("div",{className:o()({[c.WVf]:!0,[c.sqJ]:!0,[c.zRr]:1===t,[c.UAR]:2===t,[c.SKz]:3===t,[c.jtH]:r&&!l.ZP.safari}),style:{backgroundColor:e},ref:n},i.createElement("svg",{width:"48",height:"41",viewBox:"0 0 48 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:c.bhC},i.createElement("path",{d:"M48 0C48 14.0001 9.5 8.00008 9.5 8.00008C9.5 8.00008 14 41.0001 0.000976562 41.0001H48V0Z",fill:"black",fillOpacity:"0.16"}))))),E=i.forwardRef(({color:e,toolbarIconScale:t=1,toolOrder:r=1,shouldAnimate:n=!0,isReversing:a=!1},s)=>{let d=1===r||2===r&&n&&!a;return i.createElement("div",{className:o()({[c.gHs]:!0,[c.A5]:2===r,[c.B5A]:3===r,[c._EO]:4===r}),style:{width:152*t,height:152*t}},i.createElement("div",{className:o()({[c.sqJ]:!0,[c.nXz]:!0,[c.UiP]:d,[c.$7z]:1===r,[c.Re$]:2===r,[c.nP6]:3===r,[c.kwT]:4===r,[c.jtH]:n&&!l.ZP.safari,[c.UaK]:l.ZP.safari,[c.GYS]:a&&!l.ZP.safari,[c.Gho]:!a}),style:{backgroundColor:e,top:16*t,left:39*t,width:104*t,height:104*t},ref:s},d?i.createElement("div",{className:c.zl5},i.createElement("svg",{width:"104",height:"104",viewBox:"0 0 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute"}},i.createElement("g",{filter:"url(#filter0_f_2512_16752)"},i.createElement("path",{d:"M40.5001 48.5C7.70012 42.1 4.83347 56.8333 7.50014 65L104 65L104 1L55.5 1C33.5 1.4 36.3334 32.8334 40.5001 48.5Z",fill:e,className:c.uvK})),i.createElement("defs",null,i.createElement("filter",{id:"filter0_f_2512_16752",x:"-6.26074",y:"-12",width:"123.261",height:"90",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feGaussianBlur",{stdDeviation:"6.5",result:"effect1_foregroundBlur_2512_16752"})))),i.createElement("svg",{width:"104",height:"104",viewBox:"0 0 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M104 104L104 0.000486374C104 0.000486374 75.9586 0.000485148 41.0006 0.00048362C27.0005 0.000483008 33.0005 38.5005 33.0005 38.5005C33.0005 38.5005 0.000489434 34.0005 0.000488822 47.9995C0.000487681 74.1074 0.000486374 104 0.000486374 104C0.000486374 104 22.0677 104 44.1349 104C66.2022 104 104 104 104 104Z",fill:e,className:c.uvK}),i.createElement("path",{d:"M104 104L104 0.000486374C104 0.000486374 75.9586 0.000485148 41.0006 0.00048362C27.0005 0.000483008 33.0005 38.5005 33.0005 38.5005C33.0005 38.5005 0.000489434 34.0005 0.000488822 47.9995C0.000487681 74.1074 0.000486374 104 0.000486374 104C0.000486374 104 22.0677 104 44.1349 104C66.2022 104 104 104 104 104Z",fill:"url(#paint0_linear_2512_16751)"}),i.createElement("path",{d:"M104 104L104 0.000486374C104 0.000486374 75.9586 0.000485148 41.0006 0.00048362C27.0005 0.000483008 33.0005 38.5005 33.0005 38.5005C33.0005 38.5005 0.000489434 34.0005 0.000488822 47.9995C0.000487681 74.1074 0.000486374 104 0.000486374 104C0.000486374 104 22.0677 104 44.1349 104C66.2022 104 104 104 104 104Z",fill:"url(#paint1_linear_2512_16751)",fillOpacity:"0.16"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_2512_16751",x1:"0.000488251",y1:"52.0005",x2:"88.6172",y2:"52.0005",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"white",stopOpacity:"0"}),i.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.18"})),i.createElement("linearGradient",{id:"paint1_linear_2512_16751",x1:"260",y1:"234.5",x2:"6",y2:"18.5",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0.718538",stopOpacity:"0"}),i.createElement("stop",{offset:"1"}))))):null))});var y=((n=y||{})[n.DEFAULT=1]="DEFAULT",n[n.INITIAL_DRAG_ON_DLT=2]="INITIAL_DRAG_ON_DLT",n[n.DRAG_ON_CANVAS=3]="DRAG_ON_CANVAS",n[n.DRAG_RETURN_TO_DLT=4]="DRAG_RETURN_TO_DLT",n);let v=104,b=84,I=i.forwardRef(({color:e,toolbarIconScale:t=1,toolOrder:r=1,shouldAnimate:n=!0,stickyAnimationState:a=1,shouldShowFigjamIaRedesign:l=!1},s)=>{let d=4===r,u=4===a,p=l?104:144,m=l?b:v,h=l?116:152,_=16,g=l?25:39;t<1&&(d?l?(_=24,g=32):(_=25,g=47):_=19);let f=l?{[c.zW8]:1===r,[c.GY3]:2===r,[c.Klw]:3===r,[c.aXA]:d}:{[c.$7z]:1===r,[c.Re$]:2===r,[c.nP6]:3===r,[c.kXH]:1===r,[c.Lwi]:2===r,[c.hFD]:3===r,[c.kEu]:d};return i.createElement("div",{className:o()({[c.A5]:2===r,[c.B5A]:3===r,[c._EO]:d}),style:{width:h*t,height:h*t}},i.createElement("div",{className:o()({...f,[c.pdv]:!0,[c.kU4]:(!n||4===a)&&1===r||3===a&&2===r,[c.kwT]:d,[c.jtH]:3===a,[c.GYS]:u,[c.ifR]:!u&&!n&&2===r}),style:{top:_*t,left:g*t,width:p*t,height:p*t},ref:s},i.createElement("div",{className:o()({[c.E3E]:!0,[c.gNo]:!0})},i.createElement("svg",{className:c.f2V,width:p*t,height:p*t,viewBox:l?"-20 -20 104 104":"-20 -20 144 144",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",null,i.createElement("path",{className:o()({[c.w2U]:!l,[c.YYM]:!!l,[c.uvK]:!0}),style:{clipPath:`url(#stickyMaskV3-${r})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),i.createElement("g",{className:c.BZC},i.createElement("mask",{id:`stickyCurlMaskV3-${r}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:m,height:m},i.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),i.createElement("g",{mask:`url(#stickyCurlMaskV3-${r})`},i.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:c.uvK}),i.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},i.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:c.uvK}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),i.createElement("defs",null,i.createElement("clipPath",{id:`stickyMaskV3-${r}`},i.createElement("path",{className:c.CAk,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),i.createElement("path",{className:c.hjp,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),i.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),i.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${r}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"1.5"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"4"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),i.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),i.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),i.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),i.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),i.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});function T({toolbarIconScale:e,children:t,shouldShowFigjamIaRedesign:r}){return i.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:o()({[c.cSP]:r,[c.gNo]:!r,[c.bQ_]:!0})},t)}let w=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{ref:r,fill:e,className:c.uvK,d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z"}))),S=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{ref:r,fill:e,className:c.uvK,d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z"}))),C=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{ref:r,fill:e,className:c.uvK,d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z"}))),O=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1,shouldDrawStroke:r,shouldShowFigjamIaRedesign:n=!1},a)=>i.createElement(T,{toolbarIconScale:t,shouldShowFigjamIaRedesign:n},i.createElement("path",{ref:a,fill:e,className:c.uvK,d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z"}),i.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",stroke:"black",strokeOpacity:"0.13",strokeWidth:"2",className:s.cx.if(!r,s.cx.hidden).$}))),A=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1,shouldDrawStroke:r,shouldShowFigjamIaRedesign:n=!1},a)=>i.createElement(T,{toolbarIconScale:t,shouldShowFigjamIaRedesign:n},i.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:c.uvK,ref:a}),i.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",stroke:"#000000",strokeOpacity:"0.13",strokeWidth:"2",className:s.cx.if(!r,s.cx.hidden).$}))),N=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:c.uvK,ref:r}))),L=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("g",{clipPath:"url(#clip0)"},i.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",fill:e,className:c.uvK,ref:r,rx:"3.175",transform:"rotate(-45 15.874 71.874)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0"},i.createElement("path",{fill:"#fff",d:"M0 0H112V112H0z",transform:"translate(16 16)"}))))),P=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1,shouldDrawStroke:r,shouldShowFigjamIaRedesign:n=!1},a)=>i.createElement(T,{toolbarIconScale:t,shouldShowFigjamIaRedesign:n},i.createElement("rect",{x:"16",y:"16",width:"112",height:"112",fill:e,className:c.uvK,ref:a,rx:"3.23077"}),i.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",stroke:"#000000",strokeOpacity:"0.13",strokeWidth:"2",rx:"3.23077",className:s.cx.if(!r,s.cx.hidden).$}))),R=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("rect",{x:"16",y:"28",width:"112",height:"24",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 28.923V28.9231V30.1138C16.0601 30.1856 16.1242 30.2584 16.1926 30.3322C16.8824 31.076 17.9455 31.8465 19.3911 32.6163C22.2796 34.1545 26.5043 35.5903 31.753 36.8181C42.2352 39.2703 56.595 40.8462 72.0002 40.8462C87.4054 40.8462 101.765 39.2703 112.247 36.8181C117.496 35.5903 121.721 34.1545 124.609 32.6163C126.055 31.8465 127.118 31.076 127.808 30.3322C127.876 30.2586 127.94 30.1859 128 30.1141V28.9231C128 21.7859 102.928 16 72 16C41.0721 16 16.0001 21.7858 16 28.923ZM128 32.8361C127.295 33.376 126.471 33.8907 125.549 34.3816C122.441 36.0366 118.027 37.5202 112.703 38.7656C102.04 41.2599 87.523 42.8462 72.0002 42.8462C56.4774 42.8462 41.9602 41.2599 31.2975 38.7656C25.9738 37.5202 21.559 36.0366 18.4511 34.3816C17.5291 33.8907 16.7052 33.3758 16 32.8358V115.077C16 122.214 41.0721 128 72 128C102.928 128 128 122.214 128 115.077V32.8361Z",fill:e,className:c.uvK,ref:r}))),k=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("rect",{x:"92",y:"16",width:"30",height:"98",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M110.734 64.6922C110.734 78.1641 112.117 90.7123 114.261 99.8663C115.334 104.451 116.587 108.133 117.923 110.644C118.592 111.901 119.257 112.817 119.891 113.407C120.188 113.683 120.463 113.874 120.717 114H120.75H120.75C126.963 114 132 92.062 132 65C132 37.938 126.963 16 120.75 16H120.75H119.867C119.24 16.5906 118.584 17.4993 117.923 18.7405C116.587 21.252 115.334 24.9336 114.261 29.5182C112.117 38.6721 110.734 51.2203 110.734 64.6922ZM117.254 16C116.874 16.5381 116.508 17.142 116.158 17.8012C114.705 20.5314 113.405 24.4026 112.314 29.0621C110.128 38.3965 108.734 51.1021 108.734 64.6922C108.734 78.2822 110.128 90.9879 112.314 100.322C113.405 104.982 114.705 108.853 116.158 111.583C116.649 112.507 117.169 113.322 117.72 114H23.25H22.7811V113.958C16.7854 112.888 12 91.3779 12 65C12 38.6221 16.7854 17.1124 22.7811 16.0418V16H23.25H117.254Z",fill:e,className:c.uvK,ref:r}))),D=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M108 16H102V40V44H119.5H132V40H117.857L108 16Z",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M106 16V37.5C106 39.9853 108.015 42 110.5 42L132 42V40H132V117C132 118.657 130.657 120 129 120H15C13.3432 120 12 118.657 12 117V40H12V19C12 17.3432 13.3431 16 15 16L106 16Z M132 40H111C109.343 40 108 38.6569 108 37V16L132 40Z",fill:e,className:c.uvK,ref:r}))),M=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M12.1764 37H78V39H12L12.1764 37Z",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2735 17.9549C19.7103 16.7797 20.8319 16 22.0856 16H67.9146C69.1683 16 70.2898 16.7797 70.7266 17.9549L77.805 37H78.0001H12.1953L19.2735 17.9549Z M12 39H129C130.657 39 132 40.3431 132 42V117C132 118.657 130.657 120 129 120H15C13.3431 120 12 118.657 12 117V39Z",fill:e,className:c.uvK,ref:r}))),F=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:c.uvK,ref:r}))),x=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:c.uvK,ref:r}))),U=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:c.uvK,ref:r}))),B=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M122.802 26H21.1977C19.7551 26 18.4531 26.8662 17.8933 28.1982L0.280966 70.1061C-0.0936546 70.9975 -0.0936559 72.0025 0.280965 72.8939L17.8933 114.802C18.4531 116.134 19.7551 117 21.1977 117H122.802C124.245 117 125.547 116.134 126.107 114.802L143.719 72.8939C144.094 72.0025 144.094 70.9975 143.719 70.1061L126.107 28.1982C125.547 26.8662 124.245 26 122.802 26Z",fill:e,className:c.uvK,ref:r}))),V=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:c.uvK,ref:r}))),G=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:c.uvK,ref:r}))),H=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:c.uvK,ref:r}))),W=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("rect",{x:"15.3628",y:"29.8053",width:"113.274",height:"84.3894",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.84961 32.354C8.84961 30.9462 9.99052 29.8053 11.3983 29.8053H17.062V114.195H11.3983C9.99052 114.195 8.84961 113.054 8.84961 111.646V32.354Z M18.7611 114.195V29.8053H125.239V114.195H18.7611Z M126.938 114.195V29.8053H132.602C134.01 29.8053 135.15 30.9462 135.15 32.354V111.646C135.15 113.054 134.01 114.195 132.602 114.195H126.938Z",fill:e,className:c.uvK,ref:r}))),K=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:c.uvK,ref:r}))),z=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:c.uvK,ref:r}))),Z=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:c.uvK,ref:r}))),Y=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M8 24.2588C8 23.0112 9.01116 22 10.2588 22H124.706C125.954 22 126.965 23.0112 126.965 24.2588V28.5255H18.2902C16.214 28.5255 14.5255 30.2092 14.5255 32.2897V106.223L9.51678 104.587L9.49722 104.581C8.60912 104.317 8 103.501 8 102.574V24.2588Z",fill:e,className:c.uvK,ref:r}),i.createElement("path",{d:"M18.2902 30.0314H133.741C134.989 30.0314 136 31.0426 136 32.2897V111.827C136 113.272 134.608 114.309 133.223 113.894L119.014 109.64C104.079 105.168 87.9508 107.19 74.5823 115.209C60.7075 123.532 43.8282 125.188 28.5994 119.72L17.2803 115.655C16.531 115.386 16.0314 114.676 16.0314 113.88V32.2897C16.0314 31.0422 17.0444 30.0314 18.2902 30.0314Z",fill:e,className:c.uvK}))),j=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:c.uvK,ref:r}))),$=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:c.uvK,ref:r}))),q=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("circle",{cx:"72",cy:"72",r:"48.5",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{d:"M23.5 72C23.5 59.2726 28.4024 47.6903 36.422 39.0383L69.8739 72.4902L36.9016 105.472C28.5983 96.7676 23.5 84.9792 23.5 72Z M71.9949 70.3686L38.5281 36.9017C47.2323 28.5984 59.0207 23.5 72 23.5C84.9743 23.5 96.7586 28.5945 105.462 36.8921L71.9949 70.3686Z M74.1162 72.4899L107.569 39.0281C115.594 47.6811 120.5 59.2676 120.5 72C120.5 84.9793 115.402 96.7677 107.098 105.472L74.1162 72.4899Z M71.9952 74.6115L104.962 107.578C96.3097 115.598 84.7274 120.5 72 120.5C59.2725 120.5 47.6901 115.598 39.0381 107.578L71.9952 74.6115Z",fill:e,className:c.uvK,ref:r}))),X=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("circle",{cx:"71.9978",cy:"71.9978",r:"48.475",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{d:"M70.5 70.5H23.5228C24.3003 44.9064 44.9064 24.3003 70.5 23.5228V70.5Z M73.5 70.5V23.5228C99.0937 24.3003 119.7 44.9064 120.477 70.5H73.5Z M73.5 73.5H120.477C119.7 99.0937 99.0937 119.7 73.5 120.477V73.5Z M70.5 73.5V120.477C44.9064 119.7 24.3003 99.0937 23.5228 73.5H70.5Z",fill:e,className:c.uvK,ref:r}))),J=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:c.uvK,ref:r}))),Q=i.forwardRef(({color:e="#699BF7",toolbarIconScale:t=1},r)=>i.createElement(T,{toolbarIconScale:t},i.createElement("path",{d:"M8 31.8206C8 30.3939 9.15626 29.2377 10.583 29.2377H133.417C134.844 29.2377 136 30.3939 136 31.8206V112.179C136 113.606 134.844 114.762 133.417 114.762H10.583C9.15626 114.762 8 113.606 8 112.179V31.8206Z",fill:"white",fillOpacity:"0.8"}),i.createElement("path",{d:"M8 31.8206C8 30.3939 9.15626 29.2377 10.583 29.2377H15.4619V36.6996H8V31.8206Z M17.1839 36.6996V29.2377H133.417C134.844 29.2377 136 30.3939 136 31.8206V36.6996H17.1839Z M17.1839 38.4215H136V112.179C136 113.606 134.844 114.762 133.417 114.762H17.1839V38.4215Z M15.4619 38.4215V114.762H10.583C9.15626 114.762 8 113.606 8 112.179V38.4215H15.4619Z",fill:e,className:c.uvK,ref:r}))),ee=i.forwardRef(({color:e="#B3B3B3",toolbarIconScale:t=1},r)=>i.createElement("svg",{width:31*t,height:34*t,viewBox:"0 0 31 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:r})));function et(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"5",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("rect",{x:"45",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M8.5 24V16.5C8.5 12.0817 11.4922 8.5 15.8 8.5H40.2C44.5078 8.5 47.5 12.0817 47.5 16.5V24",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M8.5 32V39.5C8.5 43.9183 11.4922 47.5 15.8 47.5H40.2C44.5078 47.5 47.5 43.9183 47.5 39.5V32",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 17H19V19H27V39H29V19H37V17Z",fill:"black",fillOpacity:"0.9"}))}function er(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"5",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("rect",{x:"45",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 17H19V19H27V39H29V19H37V17Z",fill:"black",fillOpacity:"0.9"}))}function en(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C8 11.5817 11.5817 8 16 8H40C44.4183 8 48 11.5817 48 16V24H44V32H48V40C48 44.4183 44.4183 48 40 48H16C11.5817 48 8 44.4183 8 40V32H12V24H8V16Z",fill:"#F5F5F5"}),i.createElement("rect",{x:"5",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("rect",{x:"45",y:"25",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M8.5 24V16.5C8.5 12.0817 11.4922 8.5 15.8 8.5H40.2C44.5078 8.5 47.5 12.0817 47.5 16.5V24",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M8.5 32V39.5C8.5 43.9183 11.4922 47.5 15.8 47.5H40.2C44.5078 47.5 47.5 43.9183 47.5 39.5V32",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 17H19V19H27V39H29V19H37V17Z",fill:"black",fillOpacity:"0.9"}))}function ei(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9978 38.0022C15.9978 39.1067 16.8933 40.0022 17.9978 40.0022L27.9989 40.0022C28.0141 40.0022 28.0293 40.0018 28.0444 40.0011L26.9999 40.0011L26.9999 28.0011L26.9999 27.0011L27.9999 27.0011L39.9999 27.0011L39.9999 27.5858C40 27.5808 40 27.5759 40 27.571L40 18C40 16.8954 39.1046 16 38 16L17.9978 16C16.8933 16 15.9978 16.8954 15.9978 18L15.9978 38.0022ZM39.3983 29.0011L28.9999 29.0011L28.9999 39.3995L39.3983 29.0011ZM17.9978 42.0022C15.7887 42.0022 13.9978 40.2113 13.9978 38.0022L13.9978 18C13.9978 15.7909 15.7887 14 17.9978 14L38 14C40.2091 14 42 15.7909 42 18L42 27.571C42 28.6319 41.5786 29.6493 40.8284 30.3994L30.0932 41.1347C29.5377 41.6901 28.7844 42.0022 27.9989 42.0022L17.9978 42.0022Z",fill:"black",fillOpacity:"0.9"}))}function ea(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9978 38.0022C15.9978 39.1067 16.8933 40.0022 17.9978 40.0022L27.9989 40.0022C28.0141 40.0022 28.0293 40.0018 28.0444 40.0011L26.9999 40.0011L26.9999 28.0011L26.9999 27.0011L27.9999 27.0011L39.9999 27.0011L39.9999 27.5858C40 27.5808 40 27.5759 40 27.571L40 18C40 16.8954 39.1046 16 38 16L17.9978 16C16.8933 16 15.9978 16.8954 15.9978 18L15.9978 38.0022ZM39.3983 29.0011L28.9999 29.0011L28.9999 39.3995L39.3983 29.0011ZM17.9978 42.0022C15.7887 42.0022 13.9978 40.2113 13.9978 38.0022L13.9978 18C13.9978 15.7909 15.7887 14 17.9978 14L38 14C40.2091 14 42 15.7909 42 18L42 27.571C42 28.6319 41.5786 29.6493 40.8284 30.3994L30.0932 41.1347C29.5377 41.6901 28.7844 42.0022 27.9989 42.0022L17.9978 42.0022Z",fill:"black",fillOpacity:"0.9"}))}function eo(){return i.createElement("svg",{width:"48",height:"44",viewBox:"0 0 48 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 32.0022C11.9998 33.1067 12.8952 34.0022 13.9998 34.0022L24.0009 34.0022C24.0161 34.0022 24.0312 34.0018 24.0463 34.0011L23.0019 34.0011L23.0019 22.0011L23.0019 21.0011L24.0019 21.0011L36.0019 21.0011L36.0019 21.5858C36.0019 21.5808 36.002 21.5759 36.002 21.571L36.002 12C36.002 10.8954 35.1065 10 34.002 10L13.9998 10C12.8952 10 11.9998 10.8954 11.9998 12L11.9998 32.0022ZM35.4003 23.0011L25.0019 23.0011L25.0019 33.3995L35.4003 23.0011ZM13.9998 36.0022C11.7907 36.0022 9.99979 34.2113 9.99979 32.0022L9.99979 12C9.99979 9.79086 11.7907 8 13.9998 8L34.002 8C36.2111 8 38.002 9.79086 38.002 12L38.002 21.571C38.002 22.6319 37.5805 23.6493 36.8304 24.3994L26.0951 35.1347C25.5397 35.6901 24.7864 36.0022 24.0009 36.0022L13.9998 36.0022Z",fill:"black",fillOpacity:"0.9"}))}function el(){return i.createElement("svg",{width:"48",height:"44",viewBox:"0 0 48 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 32.0022C11.9998 33.1067 12.8952 34.0022 13.9998 34.0022L24.0009 34.0022C24.0161 34.0022 24.0312 34.0018 24.0463 34.0011L23.0019 34.0011L23.0019 22.0011L23.0019 21.0011L24.0019 21.0011L36.0019 21.0011L36.0019 21.5858C36.0019 21.5808 36.002 21.5759 36.002 21.571L36.002 12C36.002 10.8954 35.1065 10 34.002 10L13.9998 10C12.8952 10 11.9998 10.8954 11.9998 12L11.9998 32.0022ZM35.4003 23.0011L25.0019 23.0011L25.0019 33.3995L35.4003 23.0011ZM13.9998 36.0022C11.7907 36.0022 9.99979 34.2113 9.99979 32.0022L9.99979 12C9.99979 9.79086 11.7907 8 13.9998 8L34.002 8C36.2111 8 38.002 9.79086 38.002 12L38.002 21.571C38.002 22.6319 37.5805 23.6493 36.8304 24.3994L26.0951 35.1347C25.5397 35.6901 24.7864 36.0022 24.0009 36.0022L13.9998 36.0022Z",fill:"black",fillOpacity:"0.9"}))}function es(){return i.createElement("svg",{width:"48",height:"44",viewBox:"0 0 48 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 32.0022C11.9998 33.1067 12.8952 34.0022 13.9998 34.0022L24.0009 34.0022C24.0161 34.0022 24.0312 34.0018 24.0463 34.0011L23.0019 34.0011L23.0019 22.0011L23.0019 21.0011L24.0019 21.0011L36.0019 21.0011L36.0019 21.5858C36.0019 21.5808 36.002 21.5759 36.002 21.571L36.002 12C36.002 10.8954 35.1065 10 34.002 10L13.9998 10C12.8952 10 11.9998 10.8954 11.9998 12L11.9998 32.0022ZM35.4003 23.0011L25.0019 23.0011L25.0019 33.3995L35.4003 23.0011ZM13.9998 36.0022C11.7907 36.0022 9.99979 34.2113 9.99979 32.0022L9.99979 12C9.99979 9.79086 11.7907 8 13.9998 8L34.002 8C36.2111 8 38.002 9.79086 38.002 12L38.002 21.571C38.002 22.6319 37.5805 23.6493 36.8304 24.3994L26.0951 35.1347C25.5397 35.6901 24.7864 36.0022 24.0009 36.0022L13.9998 36.0022Z",fill:"white"}))}function ec(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"5",y:"25",width:"6",height:"6",fill:"#9747FF",stroke:"white",strokeWidth:"2"}),i.createElement("rect",{x:"45",y:"25",width:"6",height:"6",fill:"#9747FF",stroke:"white",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C8 11.5817 11.5817 8 16 8H40C44.4183 8 48 11.5817 48 16V24H44V32H48V40C48 44.4183 44.4183 48 40 48H16C11.5817 48 8 44.4183 8 40V32H12V24H8V16Z",fill:"#9747FF"}),i.createElement("mask",{id:"path-4-inside-1_1014310_50945",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 17H19V19H27V39H29V19H37V17Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 17H19V19H27V39H29V19H37V17Z",fill:"white"}),i.createElement("path",{d:"M19 17V16H18V17H19ZM37 17H38V16H37V17ZM19 19H18V20H19V19ZM27 19H28V18H27V19ZM27 39H26V40H27V39ZM29 39V40H30V39H29ZM29 19V18H28V19H29ZM37 19V20H38V19H37ZM19 18H37V16H19V18ZM20 19V17H18V19H20ZM27 18H19V20H27V18ZM28 39V19H26V39H28ZM29 38H27V40H29V38ZM28 19V39H30V19H28ZM37 18H29V20H37V18ZM36 17V19H38V17H36Z",fill:"white",mask:"url(#path-4-inside-1_1014310_50945)"}))}function ed(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 20C32 21.8382 30.7125 23.3937 29.0234 23.862L29.0844 24.1232L30.2429 29.1436H25.7571L26.5638 25.6477L26.9817 23.862C25.2926 23.3937 24 21.8382 24 20C24 17.7909 25.7909 16 28 16C30.2091 16 32 17.7909 32 20ZM24.6622 24.9936C23.0544 23.9178 22 22.0828 22 20C22 16.6863 24.6863 14 28 14C31.3137 14 34 16.6863 34 20C34 22.0841 32.9465 23.92 31.3383 24.9955L32.3326 29.3042L36.2169 30.1674L37 30.3414V31.1436V36.1436V37.1436H36H20H19V36.1436V31.1436V30.3414L19.7831 30.1674L23.6674 29.3042L24.6622 24.9936ZM35 31.9457L31.3902 31.1436H24.6098L21 31.9457V35.1436H35V31.9457ZM20 42.1436V40.1436H36V42.1436H20Z",fill:"black",fillOpacity:"0.9"}))}function eu(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 20C32 21.8382 30.7125 23.3937 29.0234 23.862L29.0844 24.1232L30.2429 29.1436H25.7571L26.5638 25.6477L26.9817 23.862C25.2926 23.3937 24 21.8382 24 20C24 17.7909 25.7909 16 28 16C30.2091 16 32 17.7909 32 20ZM24.6622 24.9936C23.0544 23.9178 22 22.0828 22 20C22 16.6863 24.6863 14 28 14C31.3137 14 34 16.6863 34 20C34 22.0841 32.9465 23.92 31.3383 24.9955L32.3326 29.3042L36.2169 30.1674L37 30.3414V31.1436V36.1436V37.1436H36H20H19V36.1436V31.1436V30.3414L19.7831 30.1674L23.6674 29.3042L24.6622 24.9936ZM35 31.9457L31.3902 31.1436H24.6098L21 31.9457V35.1436H35V31.9457ZM20 42.1436V40.1436H36V42.1436H20Z",fill:"black",fillOpacity:"0.9"}))}function ep(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 20C32 21.8382 30.7125 23.3937 29.0234 23.862L29.0844 24.1232L30.2429 29.1436H25.7571L26.5638 25.6477L26.9817 23.862C25.2926 23.3937 24 21.8382 24 20C24 17.7909 25.7909 16 28 16C30.2091 16 32 17.7909 32 20ZM24.6622 24.9936C23.0544 23.9178 22 22.0828 22 20C22 16.6863 24.6863 14 28 14C31.3137 14 34 16.6863 34 20C34 22.0841 32.9465 23.92 31.3383 24.9955L32.3326 29.3042L36.2169 30.1674L37 30.3414V31.1436V36.1436V37.1436H36H20H19V36.1436V31.1436V30.3414L19.7831 30.1674L23.6674 29.3042L24.6622 24.9936ZM35 31.9457L31.3902 31.1436H24.6098L21 31.9457V35.1436H35V31.9457ZM20 42.1436V40.1436H36V42.1436H20Z",fill:"black",fillOpacity:"0.9"}))}function em(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 20C32 21.8382 30.7125 23.3937 29.0234 23.862L29.0844 24.1232L30.2429 29.1436H25.7571L26.5638 25.6477L26.9817 23.862C25.2926 23.3937 24 21.8382 24 20C24 17.7909 25.7909 16 28 16C30.2091 16 32 17.7909 32 20ZM24.6622 24.9936C23.0544 23.9178 22 22.0828 22 20C22 16.6863 24.6863 14 28 14C31.3137 14 34 16.6863 34 20C34 22.0841 32.9465 23.92 31.3383 24.9955L32.3326 29.3042L36.2169 30.1674L37 30.3414V31.1436V36.1436V37.1436H36H20H19V36.1436V31.1436V30.3414L19.7831 30.1674L23.6674 29.3042L24.6622 24.9936ZM35 31.9457L31.3902 31.1436H24.6098L21 31.9457V35.1436H35V31.9457ZM20 42.1436V40.1436H36V42.1436H20Z",fill:"#fff",fillOpacity:"0.9"}))}function eh({fill:e}){return i.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.46967 2.46967L0.96967 6.96967L2.03033 8.03033L6 4.06066L9.96967 8.03033L11.0303 6.96967L6.53033 2.46967L6 1.93934L5.46967 2.46967Z",fill:e||"black"}))}function e_(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),i.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function eg(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),i.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),i.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),i.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function ef(){return i.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),i.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),i.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),i.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function eE(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("mask",{id:"path-2-inside-1_1042350_178059",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),i.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L19.6407 12.953V12.953L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044V19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-2-inside-1_1042350_178059)"}))}function ey(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{d:"M15 26V38C15 39.6569 16.3431 41 18 41H38C39.6569 41 41 39.6569 41 38V18C41 16.3431 39.6569 15 38 15H34",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"15",y:"15",width:"14",height:"6",rx:"1",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function ev(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("path",{d:"M15 26V38C15 39.6569 16.3431 41 18 41H38C39.6569 41 41 39.6569 41 38V18C41 16.3431 39.6569 15 38 15H34",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"15",y:"15",width:"14",height:"6",rx:"1",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function eb(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{d:"M15 26V38C15 39.6569 16.3431 41 18 41H38C39.6569 41 41 39.6569 41 38V18C41 16.3431 39.6569 15 38 15H34",stroke:"white",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"15",y:"15",width:"14",height:"6",rx:"1",stroke:"white",strokeWidth:"2"}))}function eI(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{d:"M15 26V38C15 39.6569 16.3431 41 18 41H38C39.6569 41 41 39.6569 41 38V18C41 16.3431 39.6569 15 38 15H34",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"15",y:"15",width:"14",height:"6",rx:"1",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}))}function eT(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 14C15.7909 14 14 15.7909 14 18V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V18C42 15.7909 40.2091 14 38 14H18ZM16 18C16 16.8954 16.8954 16 18 16H22V23H16V18ZM22 25H16V31H22V25ZM24 31V25H40V31H24ZM22 33H16V38C16 39.1046 16.8954 40 18 40H22V33ZM24 40V33H40V38C40 39.1046 39.1046 40 38 40H24ZM24 23V16H38C39.1046 16 40 16.8954 40 18V23H24Z",fill:"black",fillOpacity:"0.9"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function ew(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 14C15.7909 14 14 15.7909 14 18V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V18C42 15.7909 40.2091 14 38 14H18ZM16 18C16 16.8954 16.8954 16 18 16H22V23H16V18ZM22 25H16V31H22V25ZM24 31V25H40V31H24ZM22 33H16V38C16 39.1046 16.8954 40 18 40H22V33ZM24 40V33H40V38C40 39.1046 39.1046 40 38 40H24ZM24 23V16H38C39.1046 16 40 16.8954 40 18V23H24Z",fill:"black",fillOpacity:"0.9"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function eS(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 14C15.7909 14 14 15.7909 14 18V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V18C42 15.7909 40.2091 14 38 14H18ZM16 18C16 16.8954 16.8954 16 18 16H22V23H16V18ZM22 25H16V31H22V25ZM24 31V25H40V31H24ZM22 33H16V38C16 39.1046 16.8954 40 18 40H22V33ZM24 40V33H40V38C40 39.1046 39.1046 40 38 40H24ZM24 23V16H38C39.1046 16 40 16.8954 40 18V23H24Z",fill:"white"}))}function eC({size:e=56,fill:t="black"}={}){return i.createElement("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 14C15.7909 14 14 15.7909 14 18V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V18C42 15.7909 40.2091 14 38 14H18ZM16 18C16 16.8954 16.8954 16 18 16H22V23H16V18ZM22 25H16V31H22V25ZM24 31V25H40V31H24ZM22 33H16V38C16 39.1046 16.8954 40 18 40H22V33ZM24 40V33H40V38C40 39.1046 39.1046 40 38 40H24ZM24 23V16H38C39.1046 16 40 16.8954 40 18V23H24Z",fill:t,fillOpacity:"0.9"}))}function eO(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function eA(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function eN(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}},933610:(e,t,r)=>{r.d(t,{L:()=>l,p:()=>o});var n=r(652983);let i={ELBOWED:function({fillColor:e,fillOpacity:t}){return n.createElement(n.Fragment,null,n.createElement("rect",{x:"41",y:"12",width:"6",height:"6",rx:"3",fill:e,fillOpacity:t,stroke:"white",strokeWidth:"2"}),n.createElement("rect",{x:"1",y:"29",width:"6",height:"6",rx:"3",fill:e,fillOpacity:t,stroke:"white",strokeWidth:"2"}))},STRAIGHT:function({fillColor:e,fillOpacity:t}){return n.createElement(n.Fragment,null,n.createElement("rect",{x:"39",y:"1",width:"6",height:"6",rx:"3",fill:e,fillOpacity:t,stroke:"white",strokeWidth:"2"}),n.createElement("rect",{x:"3",y:"37",width:"6",height:"6",rx:"3",fill:e,fillOpacity:t,stroke:"white",strokeWidth:"2"}))}},a={ROUND:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 16C25.2386 16 23 18.2386 23 21V26C23 29.866 19.866 33 16 33H10H9V31H10H16C18.7614 31 21 28.7614 21 26V21C21 17.134 24.134 14 28 14H38H39V16H38H28Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{d:"M36 10L12 34",strokeWidth:"2",strokeLinecap:"square",stroke:e,strokeOpacity:t})}},ARROW_EQUILATERAL:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 14.1493L38.0617 15.0713L30.1225 22.0698L30.0695 16.0005H28C25.2386 16.0005 23 18.2391 23 21.0005V26.0005C23 29.8665 19.866 33.0005 16 33.0005H10H9V31.0005H10H16C18.7614 31.0005 21 28.7619 21 26.0005V21.0005C21 17.1345 24.134 14.0005 28 14.0005H30.0521L30.0003 8.07031L36.8287 14.0005H37V14.1493Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.6464 9.23223L37 9L36.7565 10.3423L36.9142 10.5L36.6866 10.7276L34.8284 20.9706L30.636 16.7782L12.7071 34.7071L12 35.4142L10.5858 34L11.2929 33.2929L29.2218 15.364L24.9289 11.0711L35.2929 9.29289L35.5 9.08579L35.6464 9.23223Z",fill:e,fillOpacity:t})}},ARROW_LINES:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.7071 15.7071L38.4142 15L37.7071 14.2929L30.7071 7.29289L30 6.58579L28.5858 8L29.2929 8.70711L34.5858 14H28C24.134 14 21 17.134 21 21V26C21 28.7614 18.7614 31 16 31H10H9V33H10H16C19.866 33 23 29.866 23 26V21C23 18.2386 25.2386 16 28 16H34.5858L29.2929 21.2929L28.5858 22L30 23.4142L30.7071 22.7071L37.7071 15.7071Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.9497 9.94922V8.94922H35.9497H26.0503H25.0503L25.0503 10.9492L26.0503 10.9492L33.636 10.9492L11.2929 33.2924L10.5858 33.9995L12 35.4137L12.7071 34.7066L34.9497 12.4639V19.8487V20.8487L36.9497 20.8487V19.8487V9.94922Z",fill:e,fillOpacity:t})}},DIAMOND_FILLED:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.5483 14L33.002 9.5L32.9937 14H32.9938L33.0021 9.50049L38.6496 15.1657L32.9814 20.7377L32.9901 16H32.99L32.9812 20.7372L28.1966 16H28C25.2386 16 23 18.2386 23 21V26C23 29.866 19.866 33 16 33H10H9V31H10H16C18.7614 31 21 28.7614 21 26V21C21 17.134 24.134 14 28 14H28.5483Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 9H27V17.5858L11.2929 33.2929L10.5858 34L12 35.4142L12.7071 34.7071L28.4142 19H37V9Z",fill:e,fillOpacity:t})}},CIRCLE_FILLED:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33 20C35.7614 20 38 17.7614 38 15C38 12.2386 35.7614 10 33 10C30.581 10 28.5633 11.7178 28.1 14H28C24.134 14 21 17.134 21 21V26C21 28.7614 18.7614 31 16 31H10H9V33H10H16C19.866 33 23 29.866 23 26V21C23 18.2386 25.2386 16 28 16H28.1C28.5633 18.2822 30.581 20 33 20Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 20C35.3137 20 38 17.3137 38 14C38 10.6863 35.3137 8 32 8C28.6863 8 26 10.6863 26 14C26 15.2958 26.4108 16.4957 27.1093 17.4765L11.2929 33.2929L10.5858 34L12 35.4142L12.7071 34.7071L28.5235 18.8907C29.5043 19.5892 30.7042 20 32 20Z",fill:e,fillOpacity:t})}},TRIANGLE_FILLED:{ELBOWED:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.265 16H28C25.2386 16 23 18.2386 23 21V26C23 29.866 19.866 33 16 33H10H9V31H10H16C18.7614 31 21 28.7614 21 26V21C21 17.134 24.134 14 28 14H31.4003L38 9V21L31.265 16Z",fill:e,fillOpacity:t})},STRAIGHT:function({color:e,opacity:t}){return n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.4572 17.9571L12.7071 34.7072L12 35.4143L10.5858 34.0001L11.2929 33.293L28.1382 16.4477L30.4484 7.05176L33.9913 10.5946L34 10.5859L35.4142 12.0001L35.4055 12.0089L38.9337 15.537L29.4572 17.9571Z",fill:e,fillOpacity:t})}},NONE:null,SQUARE:null,HIGHLIGHT:null,WASHI_TAPE_1:null,WASHI_TAPE_2:null,WASHI_TAPE_3:null,WASHI_TAPE_4:null,WASHI_TAPE_5:null,WASHI_TAPE_6:null};function o({isActive:e,lineStyle:t,endCap:r}){let o=a[r];if(!o||"CURVED"===t)return null;let l=o[t],s=i[t];return n.createElement("svg",{width:"48",height:"44",viewBox:"0 0 48 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement(l,{color:e?"white":"black",opacity:e?1:.8}),n.createElement(s,{fillColor:e?"#9747FF":"black",fillOpacity:e?1:.8}))}function l({shouldUseBorder:e}){return n.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),e?n.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}):null,n.createElement("rect",{x:"45",y:"18",width:"6",height:"6",rx:"3",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M41.7071 21.7073L42.4142 21.0002L41.7071 20.293L34.7071 13.293L34 12.5859L32.5858 14.0002L33.2929 14.7073L38.5858 20.0002H32C28.134 20.0002 25 23.1342 25 27.0002V32.0002C25 34.7616 22.7614 37.0002 20 37.0002H14H13V39.0002H14H20C23.866 39.0002 27 35.8661 27 32.0002V27.0002C27 24.2387 29.2386 22.0002 32 22.0002H38.5858L33.2929 27.293L32.5858 28.0001L34 29.4144L34.7071 28.7073L41.7071 21.7073Z",fill:"black",fillOpacity:"0.9"}),n.createElement("rect",{x:"5",y:"35",width:"6",height:"6",rx:"3",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}))}},386987:(e,t,r)=>{r.d(t,{qF:()=>s,kA:()=>d,k9:()=>c});var n=r(652983),i=r(87608),a=r.n(i),o=r(204829),l=r(435613);let s="dlt_banner_shortcut_button",c=(0,n.memo)((0,n.forwardRef)(function(e,t){let{shortcut:r,onClick:i,isActive:l,recordingKey:s,dataElementTarget:c,isPressed:d}=e,u=(0,o.Wn)((0,o.ar)("dltBannerShortcutButton",s),"click",i),p=a()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":d});return n.createElement("button",{ref:t,className:p,onClick:u,"data-element-target":c},r)}));function d({icon:e}){return n.createElement("div",{className:"dlt_banner_inline_elements--iconInline--0YsSs"},n.createElement(l.n,{svg:e}))}},761090:(e,t,r)=>{r.d(t,{D5:()=>c,Jz:()=>m,Nk:()=>u,bO:()=>d,rm:()=>p});var n=r(652983),i=r(407908),a=r(546829),o=r(961215),l=r(474935),s=r(386987);let c="dlt-banner-chat-shortcut",d="dlt-banner-emote-shortcut",u=(0,n.memo)(function(e){let t=(0,i.v9)(e=>e.mirror.appModel.currentTool===o.UAh.COMMENTS),r=(0,n.useCallback)(()=>{t?o.iTB.triggerAction("set-tool-default",{source:s.qF}):o.iTB.triggerAction("set-tool-comments",{source:s.qF})},[t]);return n.createElement(s.k9,{shortcut:"C",onClick:r,isActive:t,recordingKey:"comment",isPressed:e.isPressed})}),p=(0,n.memo)(function(e){let t=(0,a.Kp)(),r=(0,i.v9)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),o=(0,n.useCallback)(e=>{if(r){l.J8.closeWheel();return}let n=e.clientY-t;l.J8.startChat(e.clientX,n,s.qF)},[r,t]);return n.createElement(s.k9,{shortcut:"/",onClick:o,isActive:r,recordingKey:"cursorChat",dataElementTarget:c,isPressed:e.isPressed})}),m=(0,n.memo)(function(e){let t=(0,n.useRef)(null),r=(0,i.v9)(e=>{let t="WHEEL"===e.multiplayerEmoji.type,r="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return t||r}),a=(0,n.useCallback)(()=>{var e;if(r){l.J8.closeWheel();return}let n=(null==(e=t.current)?void 0:e.getBoundingClientRect())??{x:0,y:0},i=n.x+100,a=n.y-200;l.J8.handleShortcutPressWithType({viewportX:i,viewportY:a,source:s.qF,wheelType:"REACTION"}),l.J8.handleShortcutRelease(i,a)},[r]);return n.createElement(s.k9,{ref:t,shortcut:"E",onClick:a,isActive:r,recordingKey:"emote",dataElementTarget:d,isPressed:e.isPressed})})},398081:(e,t,r)=>{r.d(t,{$0:()=>S,FV:()=>h,Fw:()=>C,GT:()=>b,Iy:()=>g,J9:()=>p,Nr:()=>T,US:()=>f,UZ:()=>v,Wb:()=>m,fV:()=>I,iz:()=>w,k0:()=>y,nl:()=>_,pI:()=>E});var n=r(652983),i=r(87608),a=r.n(i),o=r(600486),l=r(204829),s=r(961215),c=r(840568),d=r(665955),u=r(458803);let p=1500,m="delightful-toolbar",h="delightful_toolbar",_="delightful-toolbar-submenu",g="dlt-portal-target-centered",f="mindmaps_onboarding";function E(e){return l.ar("delightfulToolbar",e)}let y=3,v=8,b=24,I=40;function T(e){return(0,c.nK)(e)?e:e===v||e===I?"THICK":"THIN"}function w({className:e}){return n.createElement("div",{className:a()(u.qEB,e)})}function S({children:e,shouldShowFigjamIaRedesign:t}){return n.createElement("div",{className:t?u.bpu:u.f_N},e)}function C({toolType:e,isToolSubmenuOpen:t,dispatch:r,lastUsedDrawingAction:n,disableSubmenuCloseOnClickOut:i}){if(t){r({type:"close submenu",source:d.u_.ChevronClicked}),s.iTB.triggerAction("set-tool-default",{source:h});return}"pencil"===e?s.iTB.triggerAction(n||"",{source:h}):s.iTB.triggerAction("set-tool-default",{source:h}),r({type:"open submenu",submenu:e,shouldCloseOnClickOut:!i}),(0,o.L9)("delightful toolbar submenu",{tool:e})}},809335:(e,t,r)=>{r.d(t,{H7:()=>o,OQ:()=>s,PQ:()=>c,RT:()=>l,uh:()=>d});var n=r(824801),i=r(961215),a=r(616466);let o=[{type:"SOLID",color:(0,a.Ol)(i.I7V.BLACK,"base")}],l=3,s=[{type:"SOLID",color:(0,a.Ol)(i.I7V.HIGHLIGHT_YELLOW,"highlight")}],c=(0,a.Ol)(i.I7V.STICKY_GRAY_LIGHT,"sticky"),d=n.Z.parse((0,a.g)(i.I7V.VIOLET_LIGHT))},665955:(e,t,r)=>{r.d(t,{MY:()=>s,RX:()=>o,u_:()=>a,zg:()=>l});var n,i=r(652983),a=((n=a||{}).ClickOut="clickOut",n.KeyboardEsc="keyboardEsc",n.ToolSelected="toolSelected",n.ChevronClicked="chevronClicked",n.PropertyChanged="propertyChanged",n.CloseButton="closeButton",n.ClickDemotedDlt="clickDemotedDlt",n);function o(e,t){switch(t.type){case"start click":return{...e,shouldFinishClick:!0};case"start drag":return{...e,draggedTool:t.tool};case"end drag":return{...e,draggedTool:void 0};case"toggle drag cancellable":return{...e,draggedToolCanCancel:!e.draggedToolCanCancel};case"cancel drag":return{...e,draggedTool:void 0,shouldFinishClick:!1};case"open submenu":return{...e,submenu:{tool:t.submenu,shouldCloseOnClickOut:!!t.shouldCloseOnClickOut},shouldDemoteDlt:!1};case"close submenu":if(!e.submenu.tool||!e.submenu.shouldCloseOnClickOut&&"clickOut"===t.source)return e;return{...e,submenu:l.submenu,shouldDemoteDlt:!1};case"demote dlt":return{...e,shouldDemoteDlt:!0};default:return e}}let l={draggedTool:void 0,submenu:{tool:void 0,shouldCloseOnClickOut:!0},draggedToolCanCancel:!0,shouldFinishClick:!0,shouldDemoteDlt:!1},s=i.createContext({state:l,dispatch:()=>null})},88323:(e,t,r)=>{r.d(t,{$u:()=>O,H:()=>b,Hc:()=>C,Kb:()=>v,SZ:()=>E,UY:()=>y,nE:()=>w,pA:()=>T,tc:()=>S,x0:()=>f});var n=r(652983),i=r(407908),a=r(571529),o=r(133660),l=r(24742),s=r(498806),c=r(764850),d=r(464368),u=r(70918),p=r(456211),m=r(364404),h=r(665955),_=r(707041),g=r(113390);function f(){let e=(0,d.Yu)(),t=(0,g.U)(),r=(0,m.L)(),n=(0,i.v9)(e=>!!e.user);return!e&&t&&r&&!a.ZP.isIpadNative&&n}function E(){let e=(0,d.Yu)(),t=(0,g.U)(),r=(0,s.r)(),n=(0,i.v9)(e=>!!e.user);return!e&&t&&r&&!a.ZP.isIpadNative&&n}let y=()=>{let e=(0,i.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),t=(0,g.U)(),r=(0,i.v9)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.isReadOnly}),n=f(),a=E();return t&&e&&(!r||n||a)};function v(){let e=y(),t=T(),r=t&&t.right?t.right:null;return n.useMemo(()=>e&&"number"==typeof r?window.innerWidth-r:0,[r,e])}function b(){let e=w(),t=e&&e.top?window.innerHeight-e.top:null,r=e&&e.right?window.innerWidth-e.right:null;return{bottom:t,right:r}}function I(e){let t=y(),[r,i]=(0,n.useState)(null);return(0,n.useLayoutEffect)(()=>{if(!e)return;let t=new ResizeObserver(t=>{for(let r of t)e===r.target&&i(e.getBoundingClientRect())});return i(e.getBoundingClientRect()),t.observe(e),()=>t.disconnect()},[e,i]),(0,n.useLayoutEffect)(()=>{if(!e)return;let t=()=>{i(e.getBoundingClientRect())};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e]),t&&r}let T=()=>{var e;return I(null==(e=(0,p.j)())?void 0:e.dltNode)},w=()=>{var e;return I(null==(e=(0,p.j)())?void 0:e.dltContainerNode)};function S(e={}){let{isEnabledForViewers:t}=e,r=(0,d.Yu)(),n=(0,m.L)(),i=(0,s.r)();return r||n&&!t||i&&!t}function C(){let e=(0,l.WT)(),t=(0,o.oj)(),r=(0,m.L)();return!!e&&t&&r}function O(){let{state:e}=n.useContext(h.MY),t=e.submenu.tool,r=(0,u.dO)(),i=(0,_._s)(r),a=(0,d.ob)(),o=a===c.UAh.STICKY;return!!t||("none"!==i?o:"sticky"===t)}},477365:(e,t,r)=>{r.d(t,{Gg:()=>p,bB:()=>d,sq:()=>u});var n=r(652983),i=r(225468),a=r(836227),o=r(398081),l=r(39949),s=r(419099),c=r(458803);let d="action_open_universal_insert_modal",u="delightful-toolbar-universal-insert";function p({isSelected:e,onClick:t}){return n.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:c.oAQ},n.createElement(s.hA,{toolType:"universal-insert",recordingKey:(0,o.pI)("universal-insert"),isSelected:e,className:c.xG6,onClick:t,"data-tooltip-type":i.fR.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:e,onboardingKey:u},t=>n.createElement(l.pi,{toolType:"universal-insert",inactiveIcon:n.createElement(a.jA,null),hoveredIcon:n.createElement(a.Hr,null),activeIcon:n.createElement(a.Xz,null),isSelected:e,isHovered:t})))}},4428:(e,t,r)=>{r.d(t,{RL:()=>eB,Ve:()=>eX,uE:()=>eY});var n,i=r(652983),a=r(407908),o=r(87608),l=r.n(o),s=r(132630),c=r(970740),d=r(902153),u=r(222490),p=r(238809),m=r(448694),h=r(852601),_=r(961215),g=r(322186),f=r(70918),E=r(436649),y=r(938110),v=r(225468),b=r(852904),I=r(220949),T=r(836227),w=r(398081),S=r(239907),C=r.n(S),O=r(864038),A=r.n(O),N=r(950663),L=r.n(N),P=r(716250),R=r(298715),k=r(75388),D=r(987923),M=r(795153),F=r(339531),x=r(356268),U=r(537765),B=r(948150),V=r(59293),G=r(96965),H=r(363400),W=r(707041),K=r(247694),z=r(779429);let Z=M.t1.Query({fetch:async e=>{let t=await z.R.getDefaultCollageItems({orgId:e});return t.data.meta}});var Y=((n=Y||{})[n.LIBRARY_ITEM=0]="LIBRARY_ITEM",n[n.WIDGET=1]="WIDGET",n[n.PLUGIN=2]="PLUGIN",n[n.TEMPLATE=3]="TEMPLATE",n[n.FACE_STAMP=4]="FACE_STAMP",n[n.WHITEBOARD_TOOL=5]="WHITEBOARD_TOOL",n);let j=new Set([x.QM,x.Z]);var $=r(477365),q=r(764150),X=r(172497),J=r(728140),Q=r(307425),ee=r(659994),et=r(435738),er=r(504799),en=r(509382),ei=r(212271),ea=r(465913),eo=r(936126),el=r(761767),es=r(3342),ec=r(394970),ed=r(714531),eu=r(403199),ep=r(255267),em=r(111631),eh=r(39677),e_=r(327732),eg=r(816980),ef=r(167817),eE=r(229949),ey=r(332224);let ev="dlt_universal_insert_item--recentItem--Jci7m",eb="dlt_universal_insert_item--recentItemImage--vvIrT",eI=(0,X.F)(ey.qek);function eT(e){return`data:image/svg+xml;utf8,${encodeURIComponent(e)}`}let ew=eT(`<svg width="68" height="41" viewBox="0 0 68 41" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.858643" y="0.297363" width="66.9565" height="40" fill="#F5F5F5"/>
<path d="M6.24878 6.57568L61.5614 35.8461" stroke="#E6E6E6" stroke-width="2"/>
</svg>`),eS=eT(`<svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.795898" y="0.795898" width="46" height="46" rx="4" fill="#F5F5F5"/>
<path d="M6.05078 6.43506L42.0168 41.4843" stroke="#E6E6E6" stroke-width="2"/>
</svg>`);function eC(e,t){let[r,n]=(0,i.useState)(0),[a,o]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(e){let t=new Image;t.addEventListener("load",function(){n(t.naturalWidth),o(t.naturalHeight)}),t.src=e}},[e]),!e||r*a>25e5?t:e}function eO(e,t,r){let{item:n,type:i}=e;if(!n)return null;switch(i){case Y.LIBRARY_ITEM:return(r&&n.thumbnail_url?(0,q.mx)(n.thumbnail_url,"fuid",r):n.thumbnail_url)||null;case Y.WIDGET:return n.redirect_snapshot_url||eg.$;case Y.PLUGIN:return n.redirect_icon_url||e_.Y;case Y.TEMPLATE:return t(n).imageUrl||null;case Y.FACE_STAMP:return n.img_url||null;case Y.WHITEBOARD_TOOL:return(0,eo.Q4)(n)}}function eA({item:e,width:t,height:r,clickToInsert:n,disableTooltips:a}){let o=(0,h.Bs)(),l=(0,i.useCallback)(e=>eO(e,o),[o]);if(!e.item)return null;let s="boolean"!=typeof n||n;switch(e.type){case Y.LIBRARY_ITEM:return i.createElement(eu.OR,{item:e.item,width:t||eI,height:r||eI,showName:!1,shouldHideDescription:!0,isFigJam:!0,noBackground:!0,isDragged:a,draggable:{sourceForTracking:"universal-insert-figjam-collage",clickToInsert:s},tooltipShownAbove:!0});case Y.WIDGET:return i.createElement(eN,{widget:e.item,clickToInsert:s,disableTooltips:a,imgSrc:l(e)});case Y.PLUGIN:return i.createElement(eL,{plugin:e.item,clickToInsert:s,disableTooltips:a,imgSrc:l(e)});case Y.TEMPLATE:return i.createElement(eP,{template:e.item,clickToInsert:s,disableTooltips:a,width:t||eI,imgSrc:l(e)});case Y.FACE_STAMP:return i.createElement(em.N,{mini:!0,hideName:!0,user:e.item,triggeredFrom:(0,es.s)(ep.E.RECENTS_COLLAGE)});case Y.WHITEBOARD_TOOL:return i.createElement(eR,{tool:e.item,onInsertableResourcePointerDown:(0,eh.eZ)(e.item),clickToInsert:n,disableTooltips:a});default:return null}}function eN({widget:e,clickToInsert:t,disableTooltips:r,imgSrc:n}){let a=e.redirect_icon_url||eS,o=eC(n,a);return i.createElement("div",{className:ev,"data-tooltip-type":r?void 0:v.fR.TEXT,"data-tooltip":r?void 0:e.name,"data-tooltip-timeout-delay":r?void 0:500,"data-tooltip-show-above":!r||void 0},i.createElement(ed.H,{src:o,widget:e,analytics:{triggeredFrom:"universal-insert-figjam-collage"},fillContainer:!0,clickToInsert:t,context:el.gg.WHITEBOARD}))}function eL({plugin:e,clickToInsert:t,disableTooltips:r,imgSrc:n}){let{dragState:a,onInsertableResourcePointerDown:o}=(0,ei.k)({clickToInsert:t,triggeredFrom:(0,es.s)(ep.E.RECENTS_COLLAGE),resource:e}),l=eC(n,eS);return i.createElement(i.Fragment,null,i.createElement("div",{className:ev,"data-tooltip-type":r?void 0:v.fR.TEXT,"data-tooltip":r?void 0:e.name,"data-tooltip-timeout-delay":r?void 0:500,"data-tooltip-show-above":!r||void 0,onPointerDown:o,role:"button",tabIndex:0},i.createElement("div",{className:"dlt_universal_insert_item--recentPluginImageContainer--j2z08"},i.createElement("img",{src:l,alt:e.name,className:eb,draggable:!1}))),i.createElement(et.E,{dragState:a}))}function eP({template:e,clickToInsert:t,disableTooltips:r,width:n,imgSrc:a}){let o;let{dragState:s,onInsertableResourcePointerDown:c}=(0,ea.Z)({resource:e,clickToInsert:t,triggeredFrom:"universal-insert-figjam-collage"}),{name:d,clientMeta:u,thumbnailIsSet:p,hubFileId:m,resizedThumbnailUrls:_}=(0,h.Bs)()(e);if(_){let e=Object.keys(_).map(e=>Number(e)).sort()[0];e&&(o=_[e])}let g=eC(o||a,ew);return i.createElement(i.Fragment,null,i.createElement("div",{className:l()(ev,{[eE.Z]:!!s}),"data-tooltip-type":r?void 0:v.fR.TEXT,"data-tooltip":r?void 0:d,"data-tooltip-timeout-delay":r?void 0:500,"data-tooltip-show-above":!r||void 0,onPointerDown:c,role:"button",tabIndex:0,style:{width:n,height:.6*n}},i.createElement(ec.Jr,{backgroundColor:(0,ee.YI)(u),removeBorder:!0,className:l()("dlt_universal_insert_item--recentTemplateCommunityCard--0w4xu",{"dlt_universal_insert_item--recentTemplateCommunityCardInnerImage--nDAlH":!p})},i.createElement(ef.Pk,{image:g,isSet:!!p,isWhiteboard:!0,hubFileId:m,alt:d,resizedThumbnailUrls:_,thumbnailContext:J.iw.UNIVERSAL_INSERT}))),i.createElement(er.i,{dragState:s}))}function eR({tool:e,onInsertableResourcePointerDown:t,clickToInsert:r,disableTooltips:n}){let o=(0,a.I0)(),l=(0,a.v9)(e=>{var t;return null==(t=e.user)?void 0:t.id}),s=i.useCallback(()=>{o(Q.no({currentUserId:l,storeInRecentsKey:y.xQ.FigJam,item:{id:e,type:y._g.WhiteboardTool}}))},[l,o,e]),{dragState:c,onInsertableResourcePointerDown:d}=(0,eo.sQ)({resource:e,insertAction:t,clickToInsert:!!r,triggeredFrom:(0,es.s)(ep.E.RECENTS_COLLAGE),afterSuccessfulInsert:s}),u=(0,eo.Q4)(e);return i.createElement(i.Fragment,null,i.createElement("div",{className:ev,"data-tooltip-type":n?void 0:v.fR.TEXT,"data-tooltip":n?void 0:(0,eo.oY)(e),"data-tooltip-timeout-delay":n?void 0:500,"data-tooltip-show-above":!n||void 0,onPointerDown:d,role:"button",tabIndex:0},i.createElement("div",{className:"dlt_universal_insert_item--recentTool--fZfmo"},i.createElement("img",{src:u,alt:(0,eo.oY)(e),className:eb,draggable:!1}))),i.createElement(en.h,{dragState:c}))}var ek=r(288549),eD=r(419099),eM=r(39949),eF=r(458803);let ex="dlt_universal_insert_collage--collageIconContainer--Mkqay",eU="dlt_universal_insert_collage--universalInsertCollageIconContainer--yExun",eB="delightful-toolbar-universal-insert-button-icon",eV=[{src:"https://static.figma.com/uploads/276fdbb8f6edbcb958f84235ebfc58b63eab0fc2",zIndex:3,width:50,height:50,translateStart:{x:70,y:50},rotateStart:12,translateEnd:{x:74,y:-30},rotateEnd:12},{src:"https://static.figma.com/uploads/34f2d174fa5911839b4afeb0d75ca86283b569c2",zIndex:2,width:50,height:50,translateStart:{x:26,y:44},rotateStart:0,translateEnd:{x:-34,y:-30},rotateEnd:-15},{src:"https://static.figma.com/uploads/00f1f2e35d9083936e5b268fd0139ec6653465fd",zIndex:1,width:50,height:50,translateStart:{x:73,y:20},rotateStart:0,translateEnd:{x:128,y:-30},rotateEnd:9},{src:"https://static.figma.com/uploads/dce8fa7289b3ee7937e976fcb909134d59e374d8",zIndex:0,width:50,height:50,translateStart:{x:19,y:18},rotateStart:-3,translateEnd:{x:20,y:-30},rotateEnd:-8}],eG=[{src:"https://static.figma.com/uploads/9cd2eb2ff31cb221dce81ca1e67aa51e12b24166",zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:"https://static.figma.com/uploads/276fdbb8f6edbcb958f84235ebfc58b63eab0fc2",zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:"https://static.figma.com/uploads/94db9cf93e2a26f927d5f1a7f066f8b045985011",zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:"https://static.figma.com/uploads/004b50b1460d47029608e9aaa66c09c1c94c6741",zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function eH({recentItems:e,shouldFanOut:t,toolbarIconScale:r,isModalOpen:n}){let a=function(e){let t=(0,V.n2)(e,[]);return t}(e),o=(0,f.dO)(),s=(0,W._s)(o),c="v2"===s;return i.createElement("div",{"data-element-target":eB,"data-cancel-insertable-resource-drag-and-drop":!0,className:l()(eF.w3J,eF.dQG,"dlt_universal_insert_collage--universalInsertCollageIcon--1oKSL"),style:{width:("none"!==s?192:136)*r}},("v2"===s?eG:eV).map((e,o)=>{let l=a[o];return i.createElement(ez,{key:(null==l?void 0:l.id)||e.src,zIndex:5+e.zIndex,width:e.width*r,height:e.height*r,shouldFanOut:t,isModalOpen:n,transformStart:eZ({x:e.translateStart.x*r,y:e.translateStart.y*r},e.rotateStart,c),transformEnd:eZ({x:e.translateEnd.x*r,y:e.translateEnd.y*r},e.rotateEnd,c)},l?i.createElement(eA,{item:l,width:e.width*r,height:e.height*r,clickToInsert:"v2"!==s,disableTooltips:"v2"===s}):i.createElement("img",{src:e.src,alt:"",className:"dlt_universal_insert_collage--collageImage--LdlFw"}))}))}function eW({isVisible:e}){return i.createElement("button",{"data-does-not-dismiss-modal":!0,"data-test-visibility":e?"true":"false",className:l()(eF.o0E,"dlt_universal_insert_collage--moreButton--WnLaC",{"dlt_universal_insert_collage--isMoreButtonVisible--9lvGf":e}),tabIndex:-1},i.createElement(c.Tx,{id:"whiteboard.inserts.more"}))}function eK({onClick:e,isSelected:t,isHovered:r}){return i.createElement("div",{className:"dlt_universal_insert_collage--plusIconButton--KFs3Y"},i.createElement(eD.hA,{toolType:"universal-insert-collage",recordingKey:(0,w.pI)("section"),isSelected:t,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":v.fR.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},i.createElement(eM.pi,{toolType:"universal-insert-collage",inactiveIcon:i.createElement(T.tW,null),hoveredIcon:i.createElement(T.D_,null),activeIcon:i.createElement(T.fs,null),isSelected:t,isHovered:r})))}function ez({zIndex:e,width:t,height:r,transformStart:n,transformEnd:a,shouldFanOut:o,isModalOpen:s,children:c}){let[d,u]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{u(!0);let e=setTimeout(()=>{u(!1)},150);return()=>{clearTimeout(e)}},[o]),i.createElement("div",{className:l()(ex,{"dlt_universal_insert_collage--ignorePointerEvents--G4rRr":d||s}),style:{zIndex:e,width:t,height:r,transform:o?a:n}},i.createElement("div",{className:"dlt_universal_insert_collage--collageScaleContainer--uLvqK"},c))}function eZ(e,t,r){return r?`translate(calc(-50% + ${e.x}px), calc(-50% + ${e.y}px)) rotate(${t}deg)`:`translate(${e.x}px, ${e.y}px) rotate(${t}deg)`}function eY(e,t){let[r,n]=(0,i.useState)(!1),a=(0,i.useRef)(!1),o=(0,i.useRef)([]);return o.current=t,(0,i.useEffect)(()=>{e||a.current||(a.current=!0,async function(){let e=[];for(let t of o.current)t&&e.push(new Promise(e=>{let r=new Image;r.src=t,r.addEventListener("load",()=>e()),r.addEventListener("error",()=>e())}));await Promise.all(e),n(!0)}())},[e]),r}function ej(e){let t=(0,a.I0)(),r=(0,f.dO)(),n=(0,W._s)(r),o=(0,i.useCallback)(r=>{var i,a;(0,I.m_)({id:"figjam-saves"}),"v2"!==n&&(null==(a=null==(i=r.target)?void 0:i.closest)?void 0:a.call(i,`.${ex}`))||(e?(t(p.ko()),_.iTB.triggerAction("set-tool-default",{source:w.FV})):(_.iTB.triggerAction("clear-tool",{source:w.FV}),t(u.Cp()),t(p.KD({initialX:0,initialY:0})),(0,m.T6)({source:w.FV},"action_open_universal_insert_collage_modal")))},[e,t,n]);return o}function e$({toolbarIconScale:e}){let t=(0,f.dO)(),r=(0,W._s)(t),[n,o]=(0,i.useState)(!1),l=(0,a.I0)(),s=function(){let e=function(){let{productComponents:e}=(0,D.HI)(y.xQ.FigJam),t=(0,R.mE)(),r=(0,k.n3)(y.xQ.FigJam),n=(0,R.Co)(),o=(0,G.n5)(),l=function(){let e=(0,a.v9)(e=>e.recentlyUsed.whiteboardTools),t=(0,f.dO)(),r=(0,W._s)(t),n="none"!==r,o=(0,H.W)(),l=(0,P.BZ)().figjam_mindmaps_entry_enable;return i.useMemo(()=>o&&n?l?e.figjam.map(e=>e.id):e.figjam.filter(e=>"MindMap"!==e.id).map(e=>e.id):[],[o,e,n,l])}(),s=(0,a.v9)(f.nm),c=(0,a.v9)(e=>e.recentlyUsed);return(0,i.useMemo)(()=>(function(e,t,r,n,i,a,o,l){var s;let c=t.templates.figjam.reduce((e,t)=>(e[(0,U.Wi)(t)]=t,e),{}),d={...A()(t.libraryItems.figjam,"key"),...A()(t.plugins.figjam,"id"),...c,...A()(t.widgets.figjam,"id"),...A()(t.faceStamps.figjam,"user.id"),...A()(null==(s=t.whiteboardTools)?void 0:s.figjam,"id")},u=[...r.map(t=>{var r,n;return{type:0,item:t,id:t.id,lastAddedAt:null==(n=null==(r=d["component"===t.type?t.component_key:t.key])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}}),...n.map(t=>{var r,n;return{type:2,item:t,id:t.plugin_id,lastAddedAt:null==(n=null==(r=d[t.plugin_id])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}}),...i.map(t=>{var r,n;let i=(0,h.hT)(t);return{type:3,item:t,id:t.template.id,lastAddedAt:null==(n=null==(r=d[i])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}}),...a.map(t=>{var r,n;return{type:1,item:t,id:t.plugin_id,lastAddedAt:null==(n=null==(r=d[t.plugin_id])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}}),...o.map(t=>{var r,n;return{type:4,item:t,id:t.id,lastAddedAt:null==(n=null==(r=d[t.id])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}}),...l.map(t=>{var r,n;return{type:5,item:t,lastAddedAt:null==(n=null==(r=d[t])?void 0:r.last_added_at_by_user_id)?void 0:n[e]}})],[p,m]=L()(u,e=>!!e.lastAddedAt);return[...p.sort((e,t)=>(t.lastAddedAt||0)-(e.lastAddedAt||0)),...function(e){let t={1:0,0:1,3:2,2:3,4:4,5:5},r=Object.entries(C()(e,"type")).sort(([e],[r])=>{let n=t[e]??100,i=t[r]??100;return n-i}).map(([,e])=>e);return function(e){let t=[],r=Math.max(...e.map(e=>e.length));for(let n=0;n<r;n++)e.forEach(e=>{n<e.length&&t.push(e[n])});return t}(r)}(m)].slice(0,4)})(s,c,e,t,r,n,o,l),[s,c,e,t,r,n,o,l])}(),t=function(){let e=(0,K.Fl)(),t=(0,a.v9)(e=>e.currentUserOrgId),[r]=(0,M.aM)(Z(t)),n=(0,i.useMemo)(()=>"loaded"!==r.status?[]:function(e){let t=[];return e.plugins.forEach(e=>{let r=(0,F.hb)(e);t.push({type:2,item:r,id:r.plugin_id})}),e.widgets.forEach(e=>{let r=(0,F.hb)(e);t.push({type:1,item:r,id:r.plugin_id})}),e.components.forEach(e=>{t.push({type:0,item:e,id:e.id})}),e.templates.forEach(e=>{t.push({type:3,item:{type:B.W.HubFile,template:e},id:e.id})}),t}(r.data),[r]).filter(t=>!!(0,P.BZ)().jamgpt_recents_pin&&!e||t.id&&!j.has(t.id));return n}(),r=function(e){let t=(0,K.Fl)();if(!(0,P.BZ)().jamgpt_recents_pin||t)return null;for(let t of e)if(t.id&&j.has(t.id))return t;return null}(t),n=(0,K.Fl)();return(0,i.useMemo)(()=>{let i=[];if(r?(i.push(r),e.forEach(e=>{e.id!==r.id&&i.push(e)})):i=e,n&&(i=i.filter(e=>{let t=n&&j.has(e.id||"");return!t})),4===i.length)return i;let a=t.filter(e=>!i.find(t=>t.id&&e.id&&t.id===e.id));return[...i,...a].slice(0,4)},[t,r,e,n])}(),c=(0,g.Ng)(),u=(0,a.v9)(e=>e.universalInsertModal.showing),p=(0,h.Bs)(),m=ej(u);(0,i.useEffect)(()=>{l(b.fd.fetchTemplatesMetadata({key:y.xQ.FigJam,orgId:null==c?void 0:c.id})),l(b.fd.fetchWidgetsMetadata({key:y.xQ.FigJam})),o(!0)},[l,null==c?void 0:c.id]);let _=(0,E.nR)(d.IS),v=(0,E.nR)(b.fd.fetchTemplatesMetadata.loadingKeyForPayload({key:y.xQ.FigJam})),I=(0,E.nR)(b.fd.fetchWidgetsMetadata.loadingKeyForPayload({key:y.xQ.FigJam})),T=eY(!n||_||v||I,s.map(e=>eO(e,p,t??void 0))),S=T?s.map(e=>e.id||"").sort((e,t)=>e.localeCompare(t)).join(""):"loading";return i.createElement(ek.k8,{alignment:"CENTER"},i.createElement(eD.hA,{toolType:"universal-insert-collage",recordingKey:(0,w.pI)("universal-insert-collage"),isSelected:u,className:"none"!==r?eF.JPj:eF.XJs,onClick:m,ariaLabel:"browse-all-resources-dlt",onboardingKey:$.sq,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:u},t=>{let n="v2"!==r&&t&&!u;switch(r){case"v2":return i.createElement(ek.LO,{isSelected:t,fullSizeHighlight:!0,noScaleAnimation:!0,isRightEdge:!0},i.createElement("div",{className:eU,"data-onboarding-key":"figjam-saves"},i.createElement(eH,{key:S,recentItems:s,shouldFanOut:n,toolbarIconScale:e,isModalOpen:u}),i.createElement(eK,{onClick:m,isSelected:u,isHovered:t})));case"none":return i.createElement(ek.LO,{isSelected:t},i.createElement("div",{className:eU,"data-onboarding-key":"figjam-saves"},i.createElement(eW,{isVisible:n}),i.createElement(eH,{key:S,recentItems:s,shouldFanOut:n,toolbarIconScale:e,isModalOpen:u})))}}))}function eq(){let e=(0,a.v9)(e=>e.universalInsertModal.showing),t=ej(e);return i.createElement(ek.k8,{alignment:"CENTER"},i.createElement("div",{"data-element-target":eB,className:"dlt_universal_insert_collage--errorBoundaryFallback--6P7SR"},i.createElement($.Gg,{isSelected:e,onClick:t})))}function eX({toolbarIconScale:e}){return i.createElement(s.SV,{fallback:i.createElement(eq,null),boundaryKey:"UniversalInsertCollage"},i.createElement(e$,{toolbarIconScale:e}))}},220868:(e,t,r)=>{r.d(t,{E:()=>u,x:()=>p});var n=r(652983),i=r(87608),a=r.n(i),o=r(519781),l=r(933244),s=r(596124),c=r(137206);let d="bubble--hideBubble---1zJf";function u(e){let{shouldAnimate:t,parentRect:r,size:i,hidePointer:o,onClose:l}=e,s=r.left+r.width/2;return n.createElement("div",{className:a()("bubble--bubbleVerticallyCentered--AKpcw",{[d]:e.hideBubble}),style:{left:s}},n.createElement(p,{size:i,textContent:e.textContent,hidePointer:o,onClose:l,hideBubble:e.hideBubble,shouldAnimate:t}))}function p(e){let t=n.useRef(null),r=n.useRef(null),i=n.useRef(null),u=n.useRef(null),p=n.useRef(null),m=n.useRef(null),[h,_]=n.useState(!1),{playAnimations:g}=(0,c.L)(e.size,{positionContainerRef:t,bubbleRef:r,bubbleShadowRef:i,textRef:u,checkmarkRef:p,closeButtonRef:m}),f=(0,l.TI)();return n.useEffect(()=>{e.shouldAnimate&&f&&!h&&(g(),_(!0))},[e.shouldAnimate,e.hideBubble,f,h,g]),n.createElement("div",{ref:t,className:a()({[d]:e.hideBubble})},n.createElement("div",{className:"bubble--bubbleShadow--eA35B",ref:i}),n.createElement("div",{className:a()("bubble--bubble--wAXmZ",{"bubble--pointer--gruAw":!e.hidePointer}),ref:r},n.createElement("div",{className:"bubble--checkmark--8-vvX"},e.size===c.M.SMALL?n.createElement(s.K,{checkmarkRef:p}):n.createElement(s.p,{checkmarkRef:p})),n.createElement("span",{className:"bubble--textContent--dFa2u",ref:u},e.textContent),n.createElement("div",{ref:m},n.createElement(o.PZ,{className:a()("bubble--closeButton--cS8xW",{"bubble--hide--ylxwm":h}),onClick:e.onClose}))))}},596124:(e,t,r)=>{r.d(t,{K:()=>i,p:()=>a});var n=r(652983);function i(e){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"8",viewBox:"0 0 11 8",fill:"none"},n.createElement("path",{d:"M1 3.5L4 6.5L9.5 1",stroke:"white",strokeWidth:"2",strokeDasharray:"12",strokeDashoffset:"12",ref:e.checkmarkRef}))}function a(e){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"13",viewBox:"0 0 11 8",fill:"none"},n.createElement("path",{d:"M1 3.5L4 6.5L9.5 1",stroke:"white",strokeWidth:"2",strokeDasharray:"13",strokeDashoffset:"13",ref:e.checkmarkRef}))}},137206:(e,t,r)=>{r.d(t,{L:()=>l,M:()=>a});var n,i=r(652983),a=((n=a||{}).SMALL="small",n.MEDIUM="medium",n);let o={small:{borderRadius:"32px",bubbleEndSize:"25px",bubbleShadowSize:"43px",bubbleShadowEndSize:"55px",bounceBottom:"7px",bounceTop:"-18px",bounceEnd:"0px",strokeDashoffset:12,strokeDashoffsetMiddle:7},medium:{borderRadius:"27px",bubbleEndSize:"41px",bubbleShadowSize:"74px",bubbleShadowEndSize:"95px",bounceBottom:"16px",bounceTop:"0px",bounceEnd:"8px",strokeDashoffset:13,strokeDashoffsetMiddle:7}};function l(e,t){var r;let[n,a]=i.useState([]),[l,s]=i.useState(!1),{positionContainerRef:c,bubbleRef:d,bubbleShadowRef:u,textRef:p,checkmarkRef:m,closeButtonRef:h}=t,_=(null==(r=d.current)?void 0:r.getBoundingClientRect().width)||0;i.useLayoutEffect(()=>{let t=new KeyframeEffect(p.current,[{offset:0,opacity:1},{offset:1,opacity:0}],{duration:150,fill:"forwards"}),r=new KeyframeEffect(h.current,[{offset:0,opacity:1},{offset:1,opacity:0}],{duration:150,fill:"forwards"}),n=new KeyframeEffect(d.current,[{offset:0,opacity:1},{offset:1,opacity:0}],{delay:150,duration:50,pseudoElement:"::before",easing:"ease-out",fill:"forwards"}),i=new KeyframeEffect(d.current,[{offset:0,opacity:1},{offset:1,opacity:0}],{delay:150,duration:50,pseudoElement:"::after",easing:"ease-out",fill:"forwards"}),l=new KeyframeEffect(d.current,[{offset:0,width:_+"px",borderRadius:"3px",backgroundColor:"var(--color-bg-figjam-tertiary)"},{offset:.2,borderRadius:o[e].borderRadius,backgroundColor:"var(--color-bg-figjam-tertiary)"},{offset:.9,borderRadius:o[e].borderRadius,height:o[e].bubbleEndSize,backgroundColor:"var(--color-bg-figjam-tertiary)"},{offset:1,width:o[e].bubbleEndSize,height:o[e].bubbleEndSize,borderRadius:o[e].borderRadius,backgroundColor:"var(--color-text-figjam)"}],{delay:150,duration:350,easing:"cubic-bezier(0,0,.57,1.30)",fill:"forwards"}),s=new KeyframeEffect(d.current,[{offset:0,backgroundColor:"var(--color-bg-figjam-tertiary)"},{offset:.9,backgroundColor:"var(--color-bg-figjam-tertiary)"},{offset:1,backgroundColor:"var(--color-text-figjam)"}],{delay:150,duration:350,fill:"forwards"}),g=new KeyframeEffect(c.current,[{offset:0,transform:"translateY(0)",easing:"ease-out"},{offset:.4,transform:`translateY(${o[e].bounceBottom})`},{offset:.45,transform:`translateY(${o[e].bounceBottom})`,easing:"cubic-bezier(0,0,.3,1.1)"},{offset:.7,transform:`translateY(${o[e].bounceTop})`},{offset:.75,transform:`translateY(${o[e].bounceTop})`,easing:"ease-in"},{offset:1,transform:`translateY(${o[e].bounceEnd})`}],{delay:500,duration:1e3,fill:"forwards"}),f=new KeyframeEffect(u.current,[{offset:0,opacity:0,width:o[e].bubbleEndSize,height:o[e].bubbleEndSize},{offset:.5,opacity:0,width:o[e].bubbleEndSize,height:o[e].bubbleEndSize},{offset:.7,width:o[e].bubbleShadowSize,height:o[e].bubbleShadowSize,opacity:"50%",easing:"ease-in"},{offset:1,width:o[e].bubbleShadowEndSize,height:o[e].bubbleShadowEndSize,opacity:0}],{delay:500,duration:1e3,fill:"forwards"}),E=new KeyframeEffect(m.current,[{offset:0,strokeDashoffset:o[e].strokeDashoffset},{offset:.1,strokeDashoffset:o[e].strokeDashoffset,easing:"ease-in"},{offset:.4,strokeDashoffset:o[e].strokeDashoffsetMiddle,easing:"ease-out"},{offset:.5,strokeDashoffset:0},{offset:1,strokeDashoffset:0}],{delay:500,duration:1e3,fill:"forwards"}),y=new KeyframeEffect(d.current,[{offset:0,opacity:1},{offset:1,opacity:0}],{delay:2250,duration:300,fill:"forwards"});a([t,r,n,i,l,s,g,f,E,y].map(e=>new Animation(e,document.timeline)))},[e,_,c,d,u,p,m,h]),i.useEffect(()=>{l&&Promise.all(n.map(e=>e.finished)).then(()=>{var e;null==(e=c.current)||e.remove()})},[l,n,c]);let g=i.useCallback(()=>{n.forEach(e=>{e.playbackRate=1,e.play()}),s(!0)},[n]),f=i.useCallback(()=>{n.forEach(e=>{e.playbackRate=-1,e.play()})},[n]);return{playAnimations:g,reverseAnimations:f}}},520056:(e,t,r)=>{r.d(t,{PV:()=>T,Tz:()=>b,w0:()=>y,nQ:()=>f});var n=r(652983),i=r(407908),a=r(9247),o=r(337167),l=r(212984),s=r(970740),c=r(131826),d=r(448694),u=r(200273),p=r(933244),m=r(88323),h=r(220868),_=r(137206);let g="tooltips--text--uzK7B text--fontPos13--xW8hS text--_fontBase--QdLsd",f=()=>{let e=(0,m.$u)(),t=(0,p.TI)();return t&&!e},E=e=>{let t=(0,p.Nm)(e),r=(0,a.D)(t),n=!t&&r;return n},y=(e,t)=>{let r=(0,p.Nm)(e),n=(0,p.Nm)(t),i=r||n,o=(0,a.D)(i),l=!i&&o;return l},v="participant_onboarding_sticky_tooltip";function b(e){let t=(0,o.b9)(p.t8),r=f(),a=E(p.pp.STICKY),m=(0,i.v9)(u.Oj);return n.createElement(c.Ui,{name:v,enabled:r,properties:{file_key:m,product_type:"figjam"}},n.createElement(h.E,{size:_.M.SMALL,parentRect:e.parentRect,textContent:n.createElement("span",{className:g},n.createElement(s.Tx,{id:"whiteboard.delightful_toolbar.participant_onboarding.sticky_note_tooltip",boldText:n.createElement("span",{className:l.cx.fontBold.$},n.createElement(s.Tx,{id:"whiteboard.delightful_toolbar.participant_onboarding.sticky_notes_bolded"}))})),onClose:()=>{t({type:"DISMISS_TOOLTIP",tooltip:p.pp.STICKY}),(0,d.T6)({context:v,text:"dismiss",file_key:m,product_type:"figjam"})},shouldAnimate:a,hideBubble:!r}))}let I="participant_onboarding_stamp_tooltip";function T(e){let t=(0,o.b9)(p.t8),r=f(),a=E(p.pp.STAMP),m=(0,i.v9)(u.Oj);return n.createElement(c.Ui,{name:I,enabled:r,properties:{file_key:m,product_type:"figjam"}},n.createElement(h.E,{size:_.M.SMALL,parentRect:e.parentRect,textContent:n.createElement("span",{className:g},n.createElement(s.Tx,{id:"whiteboard.delightful_toolbar.participant_onboarding.react_with_stamps",boldText:n.createElement("span",{className:l.cx.fontBold.$},n.createElement(s.Tx,{id:"whiteboard.delightful_toolbar.participant_onboarding.stamps_bolded"}))})),onClose:()=>{t({type:"DISMISS_TOOLTIP",tooltip:p.pp.STAMP}),(0,d.T6)({context:I,text:"dismiss",file_key:m,product_type:"figjam"})},shouldAnimate:a,hideBubble:!r}))}},711971:(e,t,r)=>{r.d(t,{g:()=>i,w:()=>a});var n=r(764850);function i(e){return e===n.UAh.VECTOR_PENCIL||e===n.UAh.ERASER||e===n.UAh.HIGHLIGHTER||e===n.UAh.WASHI_TAPE}function a(e){return!!i(e)&&(e===n.UAh.VECTOR_PENCIL||e===n.UAh.HIGHLIGHTER)}},63113:(e,t,r)=>{r.d(t,{x:()=>w});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(29953),s=r(115664),c=r(686926),d=r(46347),u=r(204829),p=r(564380),m=r(222490),h=r(158774),_=r(961215),g=r(366721),f=r(271774),E=r(70918),y=r(398081),v=r(665955),b=r(485218),I=r(707041),T=r(458803);let w=n.memo(function({toolType:e,color:t,isSelected:r,onTap:a,onDragEnd:w,onDragStart:S,Icon:C,IconNoRef:O,toolbarIconScale:A,canvasToSvgScale:N,isDrawingSubmenuTool:L,isDragReversing:P,stickyAnimationState:R,isHovered:k,hoverOffsetAmount:D="DEFAULT"}){let{state:M,dispatch:F}=n.useContext(v.MY),x=(0,E.dO)(),U=(0,I._s)(x),B="none"!==U,V=(0,i.I0)(),G=M.draggedTool===e,H=M.draggedToolCanCancel,[W,K]=n.useState(!1),[z,Z]=n.useState(!1),[Y,j]=n.useState(0);n.useEffect(()=>{let e=e=>{"Escape"===e.key&&G&&(F({type:"end drag"}),K(!1),j(Y+1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[Y,G,e,F]),n.useEffect(()=>{let e=()=>{K(!1)};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e)}},[K]),n.useEffect(()=>(G?document.body.classList.add(T.rpO):document.body.classList.remove(T.rpO),()=>{document.body.classList.remove(T.rpO)}),[G]);let $=n.useRef(null),q=(0,f.wD)({subscribeToUpdates_expensive:G}),X=function(e,t){if(t)switch(e){case"NONE":return 0;case"STICKY":return -20;case"DRAWING":return -22;case"DRAWING_SUBMENU":case"DEFAULT":return -24}else switch(e){case"NONE":return 0;case"STICKY":return -20;case"DRAWING_SUBMENU":return -24;case"DRAWING":case"DEFAULT":return -32}}(D,B),J=n.useRef(null),Q=(0,l.c)(.5),ee=(0,l.c)(.5),[et,er]=n.useState(),en=G?H?"whileDragShouldCancel":"whileDrag":"pencil"===e&&r?"hiddenPencil":W?"whileTap":L&&r?"selectedSubmenuTool":k?"whileHovering":"initial";return n.createElement(p.yh,{recordingKey:(0,y.pI)(`${e}.animatedIcon`),className:o()(T._Uw,{[T.Ig9]:r,[T.gDp]:k}),onPointerDown:()=>{if(K(!0),!b.k.RECORD_DETAILED_EVENTS)return u.Ev},onPointerUp:()=>{if(K(!1),!b.k.RECORD_DETAILED_EVENTS)return u.Ev},onTouchStart:e=>{e.preventDefault()},onTouchEnd:e=>{e.preventDefault(),!z&&M.shouldFinishClick&&a(),Z(!1)},onContextMenu:e=>{e.preventDefault()}},n.createElement(s.M,{key:String(Y)},n.createElement(c.E.div,{"data-test-id":b.k.getMotionDivId(e),"data-test-animate-state":en,style:{originX:Q,originY:ee},variants:{initial:{scale:1,y:0},selectedSubmenuTool:{y:X},whileTap:{y:X,scale:.93},whileDragShouldCancel:{y:X,scale:.93},whileDrag:{y:X,scale:q*(N||1)},whileHovering:{y:X},hiddenPencil:{y:72}},className:o()({[T._CX]:!H}),animate:en,transition:{duration:.1,ease:[.12,.23,.5,1]},transformTemplate:(e,t)=>"translate3d(0px, 0px, 0) scale(1, 1)"===t?"none":t,drag:!!w,dragConstraints:{top:0,bottom:0,right:0,left:0},ref:J,onDragStart:(t,r)=>{F({type:"start drag",tool:e}),_.iTB.triggerAction("set-tool-default",{source:y.FV}),g.k3.trigger("action",_.Bch.CLEAR),V(m.Cp());let n=J.current;if(n){let e=n.getBoundingClientRect();Q.set((r.point.x-e.x)/e.width),ee.set((r.point.y-e.y)/e.height)}let i=$.current;if(i){let e=i.closest("."+T.fIr);(0,d.q8)(e,"Delightful tool can't find containing toolbar!");let t=e.getBoundingClientRect();er(t),S&&S()}},onDrag:(e,t)=>{var r;et&&((r=t.point).x>=et.x&&r.x<=et.x+et.width&&r.y>=et.y||r.y>et.y+et.height)!==H&&F({type:"toggle drag cancellable"})},onDragEnd:(e,t)=>{if(Z(!0),Q.set(.5),ee.set(.5),H){F({type:"cancel drag"}),K(!1);return}let r=$.current;if(r){let t=r.getBoundingClientRect(),n=h.Gr.getViewportInfo(),i={x:t.left-n.x,y:t.top-n.y},a=(0,f.NL)(n,i),o=(0,f.NL)(n,{x:e.x-n.x,y:e.y-n.y});w&&w(a,o),F({type:"end drag"}),K(!1),j(Y+1)}else(0,d.q8)(!1,"Delightful tool is missing the toolref!")},dragElastic:1},C?n.createElement(C,{color:t,toolbarIconScale:A,ref:$,shouldAnimate:G,isReversing:P,stickyAnimationState:R,shouldShowFigjamIaRedesign:B,shouldDrawStroke:!G}):O)))})},707041:(e,t,r)=>{r.d(t,{Df:()=>z,Gh:()=>X,JS:()=>W,Tm:()=>V,Uq:()=>K,VY:()=>$,_s:()=>J,br:()=>H,bs:()=>q,hn:()=>Z,mZ:()=>G,tn:()=>Y,zu:()=>j});var n=r(652983),i=r(571529),a=r(11802),o=r(961215),l=r(836227);let s=r(834956),c=r(858731),d=r(621590),u=r(740478),p=r(552200),m=r(980122),h=r(884219),_=r(860123),g=r(446677),f=r(394116),E=r(903988),y=r(367500),v=r(980849),b=r(557811),I=r(283964),T=r(694384),w=r(51737),S=r(303637),C=r(774453),O=r(863833),A=r(850857),N=r(888538),L=r(101912),P=r(630152),R=r(324628),k=r(406180),D=r(92315),M=r(73709),F=r(756821),x=r(144494),U=r(959199),B=r(544246),V=r(590667),G=["SQUARE","ELLIPSE","ROUNDED_RECTANGLE","DIAMOND","TRIANGLE_UP","TRIANGLE_DOWN","PARALLELOGRAM_RIGHT","PARALLELOGRAM_LEFT","ENG_DATABASE","ENG_QUEUE","ENG_FILE","ENG_FOLDER"];function H(e){switch(e){case"SQUARE":return s;case"ELLIPSE":return c;case"ROUNDED_RECTANGLE":return m;case"DIAMOND":return d;case"TRIANGLE_UP":return u;case"TRIANGLE_DOWN":return p;case"PARALLELOGRAM_RIGHT":return h;case"PARALLELOGRAM_LEFT":return _;case"ENG_DATABASE":return f;case"ENG_QUEUE":return E;case"ENG_FILE":return y;case"ENG_FOLDER":return v;case"TRAPEZOID":return b;case"STAR":return I;case"SHIELD":return T;case"HEXAGON":return w;case"PENTAGON":return S;case"OCTAGON":return C;case"PLUS":return O;case"PREDEFINED_PROCESS":return A;case"MANUAL_INPUT":return N;case"CHEVRON":return L;case"DOCUMENT_SINGLE":return P;case"DOCUMENT_MULTIPLE":return R;case"ARROW_LEFT":return k;case"ARROW_RIGHT":return D;case"SUMMING_JUNCTION":return M;case"OR":return F;case"SPEECH_BUBBLE":return x;case"INTERNAL_STORAGE":return U;case"MINDMAP_TREE_NUCLEUS":return B;default:return g}}let W=["SQUARE","ELLIPSE","DIAMOND","TRIANGLE_UP"],K=[["TRIANGLE_DOWN","ROUNDED_RECTANGLE","CHEVRON"],["PARALLELOGRAM_RIGHT","PARALLELOGRAM_LEFT","ENG_DATABASE","ENG_QUEUE","ENG_FILE","ENG_FOLDER","DOCUMENT_SINGLE","DOCUMENT_MULTIPLE","PREDEFINED_PROCESS","SHIELD","TRAPEZOID","MANUAL_INPUT","HEXAGON","INTERNAL_STORAGE","SUMMING_JUNCTION","OR"],["PENTAGON","OCTAGON","PLUS","ARROW_LEFT","ARROW_RIGHT","STAR","SPEECH_BUBBLE"]],z=["SQUARE","ELLIPSE","DIAMOND","TRIANGLE_UP","TRIANGLE_DOWN","ROUNDED_RECTANGLE","PARALLELOGRAM_RIGHT","PARALLELOGRAM_LEFT"],Z=["BASIC","DIAGRAMMING","MISC"],Y=new Map([["BASIC",["SQUARE","ELLIPSE","DIAMOND","TRIANGLE_UP","TRIANGLE_DOWN","ROUNDED_RECTANGLE","CHEVRON"]],["DIAGRAMMING",["PREDEFINED_PROCESS","DOCUMENT_SINGLE","DOCUMENT_MULTIPLE","MANUAL_INPUT","HEXAGON","PARALLELOGRAM_RIGHT","PARALLELOGRAM_LEFT","ENG_DATABASE","ENG_QUEUE","INTERNAL_STORAGE","TRAPEZOID","SUMMING_JUNCTION","OR","SHIELD","ENG_FOLDER","ENG_FILE"]],["MISC",["PENTAGON","OCTAGON","PLUS","ARROW_LEFT","ARROW_RIGHT","STAR","SPEECH_BUBBLE"]]]);o.I7V.BLACK,o.I7V.GRAY_DARK,o.I7V.GRAY_LIGHT,o.I7V.RED,o.I7V.ORANGE,o.I7V.YELLOW,o.I7V.GREEN,o.I7V.BLUE,o.I7V.VIOLET,o.I7V.WHITE;let j=new Map([["SQUARE",o.UAh.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",o.UAh.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",o.UAh.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",o.UAh.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",o.UAh.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",o.UAh.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",o.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",o.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",o.UAh.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",o.UAh.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",o.UAh.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",o.UAh.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",o.UAh.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",o.UAh.SHAPE_WHITEBOARD_STAR],["SHIELD",o.UAh.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",o.UAh.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",o.UAh.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",o.UAh.SHAPE_WHITEBOARD_OCTAGON],["PLUS",o.UAh.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",o.UAh.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",o.UAh.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",o.UAh.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",o.UAh.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",o.UAh.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",o.UAh.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",o.UAh.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",o.UAh.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",o.UAh.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",o.UAh.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",o.UAh.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",o.UAh.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),$=new Map(Array.from(j,([e,t])=>[t,e]));function q(e){return $.has(e)}let X=new Map([[o.UAh.SHAPE_WHITEBOARD_SQUARE,{action:"set-tool-shape-whiteboard-square",Icon:l.Gp,canvasToSvgScale:176/112}],[o.UAh.SHAPE_WHITEBOARD_ELLIPSE,{action:"set-tool-shape-whiteboard-ellipse",Icon:l.EX,canvasToSvgScale:1.375}],[o.UAh.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE,{action:"set-tool-shape-whiteboard-rounded-rectangle",Icon:l.d_,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_DIAMOND,{action:"set-tool-shape-whiteboard-diamond",Icon:l.i4,canvasToSvgScale:176/112}],[o.UAh.SHAPE_WHITEBOARD_TRIANGLE_UP,{action:"set-tool-shape-whiteboard-triangle-up",Icon:l.AS,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_TRIANGLE_DOWN,{action:"set-tool-shape-whiteboard-triangle-down",Icon:l.QZ,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT,{action:"set-tool-shape-whiteboard-parallelogram-right",Icon:l.WW,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT,{action:"set-tool-shape-whiteboard-parallelogram-left",Icon:l.J5,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_ENG_DATABASE,{action:"set-tool-shape-whiteboard-eng-database",Icon:l.Z0,canvasToSvgScale:176/112}],[o.UAh.SHAPE_WHITEBOARD_ENG_QUEUE,{action:"set-tool-shape-whiteboard-eng-queue",Icon:l._V,canvasToSvgScale:176/98}],[o.UAh.SHAPE_WHITEBOARD_ENG_FILE,{action:"set-tool-shape-whiteboard-eng-file",Icon:l.Qk,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_ENG_FOLDER,{action:"set-tool-shape-whiteboard-eng-folder",Icon:l.a5,canvasToSvgScale:176/104}],[o.UAh.SHAPE_WHITEBOARD_TRAPEZOID,{action:"set-tool-shape-whiteboard-trapezoid",Icon:l.O1,canvasToSvgScale:152/81.92}],[o.UAh.SHAPE_WHITEBOARD_STAR,{action:"set-tool-shape-whiteboard-star",Icon:l.lx,canvasToSvgScale:240/112}],[o.UAh.SHAPE_WHITEBOARD_SHIELD,{action:"set-tool-shape-whiteboard-shield",Icon:l.Ro,canvasToSvgScale:212/90}],[o.UAh.SHAPE_WHITEBOARD_HEXAGON,{action:"set-tool-shape-whiteboard-hexagon",Icon:l.aW,canvasToSvgScale:152/91}],[o.UAh.SHAPE_WHITEBOARD_PENTAGON,{action:"set-tool-shape-whiteboard-pentagon",Icon:l.Lq,canvasToSvgScale:190/111}],[o.UAh.SHAPE_WHITEBOARD_OCTAGON,{action:"set-tool-shape-whiteboard-octagon",Icon:l._l,canvasToSvgScale:218/112}],[o.UAh.SHAPE_WHITEBOARD_PLUS,{action:"set-tool-shape-whiteboard-plus",Icon:l.Ir,canvasToSvgScale:234/112}],[o.UAh.SHAPE_WHITEBOARD_PREDEFINED_PROCESS,{action:"set-tool-shape-whiteboard-predefined-process",Icon:l.us,canvasToSvgScale:152/86.09}],[o.UAh.SHAPE_WHITEBOARD_MANUAL_INPUT,{action:"set-tool-shape-whiteboard-manual-input",Icon:l.js,canvasToSvgScale:152/93}],[o.UAh.SHAPE_WHITEBOARD_CHEVRON,{action:"set-tool-shape-whiteboard-chevron",Icon:l.vu,canvasToSvgScale:168/77}],[o.UAh.SHAPE_WHITEBOARD_DOCUMENT_SINGLE,{action:"set-tool-shape-whiteboard-document-single",Icon:l._O,canvasToSvgScale:188/99.08}],[o.UAh.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE,{action:"set-tool-shape-whiteboard-document-multiple",Icon:l.GC,canvasToSvgScale:204/100.89}],[o.UAh.SHAPE_WHITEBOARD_ARROW_LEFT,{action:"set-tool-shape-whiteboard-arrow-left",Icon:l.g9,canvasToSvgScale:212/88.97}],[o.UAh.SHAPE_WHITEBOARD_ARROW_RIGHT,{action:"set-tool-shape-whiteboard-arrow-right",Icon:l.dE,canvasToSvgScale:212/88.97}],[o.UAh.SHAPE_WHITEBOARD_SUMMING_JUNCTION,{action:"set-tool-shape-whiteboard-summing-junction",Icon:l.de,canvasToSvgScale:100/97}],[o.UAh.SHAPE_WHITEBOARD_OR,{action:"set-tool-shape-whiteboard-or",Icon:l.Bw,canvasToSvgScale:100/96.95}],[o.UAh.SHAPE_WHITEBOARD_SPEECH_BUBBLE,{action:"set-tool-shape-whiteboard-speech-bubble",Icon:l.uK,canvasToSvgScale:2}],[o.UAh.SHAPE_WHITEBOARD_INTERNAL_STORAGE,{action:"set-tool-shape-whiteboard-internal-storage",Icon:l.z,canvasToSvgScale:152/85.52}],[o.UAh.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS,{action:"set-tool-mindmap-tree-nucleus",Icon:l.Gp,canvasToSvgScale:176/112}]]);function J(e){return(0,n.useMemo)(()=>i.s2||!e?"none":(0,a.Jh)(e)?"v2":"none",[e])}},430437:(e,t,r)=>{r.d(t,{Jv:()=>B,Le:()=>V,T3:()=>G});var n=r(652983),i=r(87608),a=r.n(i),o=r(716250),l=r(337167),s=r(701635),c=r(970740),d=r(824801),u=r(961215),p=r(269075),m=r(764850),h=r(464368),_=r(70918),g=r(225468),f=r(836227),E=r(398081),y=r(665955),v=r(141209),b=r(520056),I=r(63113),T=r(39949),w=r(288549),S=r(419099),C=r(616466),O=r(711971),A=r(707041),N=r(204829),L=r(336980),P=r(382476),R=r(840253),k=r(199867),D=r(406446),M=r(660477),F=r(458803);function x({recordingKey:e,showStickyAsRightHandTool:t,isOpen:r}){let[i,a]=(0,l.KO)(s.Hp),[o,c]=n.useState(!1),{openColorPalettePicker:p,closeColorPalettePicker:m}=(0,P.mi)(c),{dispatch:h}=n.useContext(y.MY),g=d.Z.format(i);n.useEffect(()=>{m()},[r,m]);let f=e=>{a(e),u.iTB.triggerAction("set-tool-sticky",{source:E.FV})},v=(0,_.dO)(),b=(0,A._s)(v),I=e=>{f(e),t||("none"===b&&h({type:"close submenu",source:y.u_.PropertyChanged}),U("none"!==b))},T=(0,P.tw)(),S=T.type===L.Fo.CUSTOM,O=(0,C.Mo)("sticky"),F=S?T.variations.sticky:O,x=(0,l.Dv)(R.Bp),B=!!x;return n.createElement(n.Fragment,null,n.createElement(w.RB,{paddingRight:8,paddingLeft:8},n.createElement(M.t,{loadingPaletteCircleCount:x}),!B&&F.map((t,r)=>{let i=d.Z.format(t),a=S?(0,C.sK)(r,"sticky"):(0,C.l2)(t,"sticky");return n.createElement(D.gl,{key:d.Z.format(t)+"-"+r,size:"medium",value:t,selectionState:i===g?"selected":"unselected",paletteType:"sticky",background:"light",onClick:()=>I(t),tooltip:a,recordingKey:N.ar(e,a)})}),n.createElement(k.H,{colorPalettePickerState:{openColorPalettePicker:p,closeColorPalettePicker:m,isColorPalettePickerOpen:o},defaultColorPaletteLength:O.length,recordingKey:N.ar(e||"color-palettes","sticky")||"sticky",disabled:B})))}let U=e=>{let t={duration:800,easing:"ease-out"},r={transform:"rotate(0) translate(0, 0)"},n=[r,{transform:"translate(32px, 32px) rotate(5deg) translate(0, -8px) translate(-32px, -32px)",offset:.1},{transform:"translate(32px, 32px) rotate(5deg) translate(0, -10px) translate(-32px, -32px)",offset:.35},r,{transform:"translate(-32px, 32px) rotate(-3deg) translate(32px, -32px) "},r,{transform:"translate(32px, 32px) rotate(1deg) translate(-32px, -32px) "},r],i=(0,o.BZ)().figjam_differentiate_stickies||(0,o.BZ)().figjam_differentiate_stickies_v3,a=e?[F.Klw,F.GY3,F.zW8]:i?[F.nP6,F.Re$,F.$7z]:[F.SKz,F.UAR,F.zRr];a.forEach((e,r)=>{var i;null==(i=document.getElementsByClassName(e)[0].parentElement)||i.animate(n,{...t,delay:70*r})})},B="sticky";function V({toolbarIconScale:e}){let t;let r=(0,_.dO)(),i=(0,A._s)(r),T="none"!==i,N=(0,h.ob)(),L=N===m.UAh.STICKY,P=(0,l.Dv)(s.Hp),R=(0,h.Yu)(),k=(0,o.BZ)().figjam_differentiate_stickies,D=(0,o.BZ)().figjam_differentiate_stickies_v3,M=k||D,[U,V]=n.useState(!1),[G,H]=n.useState(!1),[W,K]=n.useState(!1),[z,Z]=n.useState(f.Vk.DEFAULT);n.useEffect(()=>{if(!M&&U){let e=setTimeout(()=>V(!1),300);return()=>clearTimeout(e)}},[U]);let Y=240/(T?f.Et:f.tv),j=(0,C.oW)(P,"sticky"),$=d.Z.format(P),q=R||!j?(0,C.xw)(u.I7V.STICKY_GRAY_LIGHT):(0,C.xw)(j,$),{state:X,dispatch:J}=n.useContext(y.MY),Q="sticky"===X.submenu.tool,ee=n.useCallback(()=>{(0,E.Fw)({toolType:"sticky",isToolSubmenuOpen:Q,dispatch:J})},[Q,J]),et=n.useCallback(()=>{L?u.iTB.triggerAction("set-tool-default",{source:E.FV}):(u.iTB.triggerAction("set-tool-sticky",{source:E.FV}),J({type:"open submenu",submenu:"sticky"}))},[L,J]),er=Q||(0,O.g)(N)||"shape"===X.submenu.tool,{isHovered:en,onMouseEnter:ei,onMouseMove:ea,onMouseLeave:eo,onTouchStart:el,onTouchEnd:es}=(0,v.H)(et,er,!1),ec=n.useCallback((e,t)=>{p.y2.user("drop-sticky-on-canvas",()=>u.iTB.delightfulToolbarDropItemOntoCanvas(m.UAh.STICKY,Math.round(e.x),Math.round(e.y),Math.round(t.x),Math.round(t.y))),M?(H(!1),K(!1),Z(f.Vk.DEFAULT)):V(!0)},[]),ed=n.useCallback(()=>{M&&H(!0),D&&z===f.Vk.DEFAULT&&Z(f.Vk.INITIAL_DRAG_ON_DLT)},[]);n.useEffect(()=>{k&&"sticky"===X.draggedTool&&K(e=>{let t=X.draggedToolCanCancel;return!e&&t&&G})},[X,G]),n.useEffect(()=>{if(D){if("sticky"===X.draggedTool){let e=!X.draggedToolCanCancel;z===f.Vk.INITIAL_DRAG_ON_DLT?e&&Z(f.Vk.DRAG_ON_CANVAS):z===f.Vk.DRAG_ON_CANVAS?e||Z(f.Vk.DRAG_RETURN_TO_DLT):z===f.Vk.DRAG_RETURN_TO_DLT&&e&&Z(f.Vk.DRAG_ON_CANVAS)}else X.draggedTool||Z(f.Vk.DEFAULT)}},[X,G,D,Z,z]),t=D?f.Fm:k?f.$e:f.GB;let eu=M?G:U,ep=n.useRef(null);return n.createElement(w.k8,{alignment:"CENTER",innerRef:ep},n.createElement(w.LO,{isSelected:T&&en||L||Q,fullSizeHighlight:T,noScaleAnimation:T},ep.current&&n.createElement(b.Tz,{parentRect:ep.current.getBoundingClientRect()}),n.createElement(S.OU,{toolType:"sticky",recordingKey:(0,E.pI)("sticky"),isSelected:L,className:T?F.zVh:F.CAZ,onClick:et,"data-tooltip-type":g.fR.LOOKUP,"data-tooltip":"set-tool-sticky",tooltipOffset:{offsetY:-26,offsetX:10},onboardingKey:B,isHovered:en,onMouseEnter:ei,onMouseMove:ea,onMouseLeave:eo,onTouchStart:el,onTouchEnd:es,hasOpenSubmenu:Q},n.createElement("div",{className:a()(F.w3J,F.dQG)},n.createElement(I.x,{toolType:"sticky",color:q,isSelected:L,onTap:et,onDragStart:ed,onDragEnd:ec,Icon:t,toolbarIconScale:e,canvasToSvgScale:Y,isDragReversing:W,isHovered:en,stickyAnimationState:z,hoverOffsetAmount:"STICKY"}),n.createElement(t,{toolOrder:2,color:q,toolbarIconScale:e,shouldAnimate:eu,isReversing:W,stickyAnimationState:z,shouldShowFigjamIaRedesign:T}),n.createElement(t,{toolOrder:3,color:q,toolbarIconScale:e,shouldAnimate:eu,isReversing:W,stickyAnimationState:z,shouldShowFigjamIaRedesign:T}),M?n.createElement(t,{toolOrder:4,color:q,toolbarIconScale:e,shouldAnimate:eu,isReversing:W,stickyAnimationState:z,shouldShowFigjamIaRedesign:T}):null)),!T&&n.createElement(w.Ap,{ariaLabel:(0,c.t)("whiteboard.delightful_toolbar.sticky_menu_label"),onClick:ee,isActive:Q,className:F.$0K,recordingKey:(0,E.pI)("stickyChevron")})),n.createElement(w.rS,{isOpen:T?L:Q,fadedOut:en},n.createElement(x,{isOpen:T?L:Q,recordingKey:(0,E.pI)("stickySubmenu")})))}function G({isSelected:e,onClick:t}){let{state:r,dispatch:i}=n.useContext(y.MY),{isHovered:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:s,onTouchStart:c,onTouchEnd:d}=(0,v.H)(t),u="sticky"===r.submenu.tool,p=n.useCallback(()=>{u?i({type:"close submenu",source:y.u_.ChevronClicked}):i({type:"open submenu",submenu:"sticky"})},[u,i]),m=n.createElement(T.Hk,{toolType:"sticky",className:F.CAZ,isIconHovered:a,isActive:e,submenuOpen:u,onChevronClick:p,recordingKey:(0,E.pI)("sticky")},n.createElement(S.OU,{toolType:"sticky",recordingKey:(0,E.pI)("sticky"),isSelected:e,onClick:t,"data-tooltip-type":g.fR.LOOKUP,"data-tooltip":"set-tool-sticky",tooltipOffset:{offsetX:4,offsetY:12},onboardingKey:"sticky",isHovered:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:s,onTouchStart:c,onTouchEnd:d,hasOpenSubmenu:u},n.createElement(T.pi,{toolType:"sticky",inactiveIcon:n.createElement(f._u,null),hoveredIcon:n.createElement(f.U$,null),activeIcon:n.createElement(f.SA,null),isSelected:e,isHovered:a})));return n.createElement(w.k8,{alignment:"CENTER"},m,n.createElement(w.rS,{isOpen:u,optimizeForCompactSize:!0},n.createElement(x,{isOpen:u,recordingKey:(0,E.pI)("stickySubmenu"),showStickyAsRightHandTool:!0})))}},660477:(e,t,r)=>{r.d(t,{t:()=>l});var n=r(652983),i=r(87608),a=r.n(i),o=r(9247);let l=n.memo(function({loadingPaletteCircleCount:e}){let t=(0,o.D)(e),r=t&&!e,i=r?t:e;return n.createElement("div",{className:a()("dlt_submenu_palette_skeleton--skeletonCircleContainer--zJP5v",{"dlt_submenu_palette_skeleton--isFadingOut--X7mcE":r})},[...Array(i)].map((e,t)=>n.createElement("div",{className:"dlt_submenu_palette_skeleton--skeletonCircleWrapper--jqySu",key:"skeleton-palette-"+t},n.createElement("div",{className:a()("dlt_submenu_palette_skeleton--skeletonCircle--S16JP",{"dlt_submenu_palette_skeleton--loading--NXGYD":!r}),style:{animationDelay:`${.1*t}s`}}))))})},980730:(e,t,r)=>{r.d(t,{hU:()=>T,wR:()=>w,w0:()=>I});var n=r(652983),i=r(337167),a=r(701635),o=r(961215),l=r(225468),s=r(933610),c=r(398081),d=r(665955),u=r(141209),p=r(204829),m=r(970740),h=r(414413);let _=r(205244),g=r(716219);function f({value:e,onChange:t,recordingKey:r}){return n.createElement(n.Fragment,null,["ELBOWED","STRAIGHT"].map(i=>n.createElement(h.hU,{recordingKey:r&&p.ar(r,i),key:i,svg:"ELBOWED"===i?_:g,tooltip:"ELBOWED"===i?(0,m.t)("whiteboard.delightful_toolbar.connector"):(0,m.t)("whiteboard.delightful_toolbar.straight_line"),onClick:()=>t(i),active:i===e?"LOUD":"NONE",isNewSubmenu:!0,buttonStyle:"ELBOWED"===i?{padding:"4px 2px",borderTopLeftRadius:"14px"}:{padding:"4px 2px",borderTopRightRadius:"14px"},tabIndex:-1})))}var E=r(39949),y=r(288549),v=r(419099),b=r(458803);let I=e=>"ELBOWED"===e?"set-tool-connector-elbowed":"set-tool-connector-straight",T="connectors";function w({isSelected:e,onClick:t}){let{state:r,dispatch:p}=(0,n.useContext)(d.MY),[m,h]=(0,i.KO)(a.Y),{isHovered:_,onMouseEnter:g,onMouseMove:w,onMouseLeave:S,onTouchStart:C,onTouchEnd:O}=(0,u.H)(t),{connectorToolLineStyle:A,connectorToolEndCap:N}=m,L="connector"===r.submenu.tool,P=(0,n.useCallback)(()=>{L?p({type:"close submenu",source:d.u_.ChevronClicked}):p({type:"open submenu",submenu:"connector"})},[L,p]);return n.createElement(y.k8,{alignment:"CENTER"},n.createElement(E.Hk,{toolType:"connector",className:b.bxZ,isIconHovered:_,isActive:e,submenuOpen:L,onChevronClick:P,recordingKey:(0,c.pI)("connector")},n.createElement(v.OU,{toolType:"connector",recordingKey:(0,c.pI)("connector"),isSelected:e,onClick:t,"data-tooltip-type":l.fR.LOOKUP,"data-tooltip":I(A),tooltipOffset:{offsetX:4,offsetY:12},onboardingKey:T,isHovered:_,onMouseEnter:g,onMouseMove:w,onMouseLeave:S,onTouchStart:C,onTouchEnd:O,hasOpenSubmenu:L},n.createElement("div",{className:b.uTg},n.createElement(s.p,{isActive:e,lineStyle:A,endCap:N})))),n.createElement(y.rS,{isOpen:L,testId:"dlt-connector-submenu"},n.createElement(f,{recordingKey:(0,c.pI)("connectorMenu"),onChange:e=>{h({...m,connectorToolLineStyle:e}),o.iTB.triggerAction(I(e),{source:c.FV})},value:e?A:void 0})))}},934060:(e,t,r)=>{r.d(t,{um:()=>ee,Yw:()=>Q,JR:()=>er,gA:()=>et,uc:()=>J,_E:()=>j,Uu:()=>en});var n=r(652983),i=r(204829),a=r(594619),o=r(333222),l=r(513289),s=r(721127),c=r(238809),d=r(540094),u=r(241239),p=r(448694),m=r(961215),h=r(474935),_=r(764850),g=r(605508),f=r(255267),E=r(488495),y=r(836227),v=r(398081),b=r(477365),I=r(980730),T=r(70918),w=r(225468),S=r(474987),C=r(39949),O=r(419099),A=r(707041),N=r(458803),L=r(130939),P=r(933610),R=r(430437),k=r(314139);let D=y.od(),M=y.wx(),F=n.createElement(P.L,{shouldUseBorder:!0}),x=y.Hm(),U=y.kR(),B=y.Do(),V=y.jA(),G=y.K_(),H=y.JX(),W=n.createElement(P.L,{shouldUseBorder:!1}),K=y.TA(),z=y.vp(),Z=y.CS(),Y=y.cv();function j(e){let{responsiveContent:{sequence:t}}=e;if(!t)return null;for(let e of t.steps)switch(e.trackingContextName){case E.JI.trackingContextName:return{initialTab:f.E.WIDGETS,initialSearch:void 0};case E.do.trackingContextName:return{initialTab:f.E.WIDGETS,initialSearch:"Project management"};case E.Dm.trackingContextName:return{initialTab:f.E.WIDGETS,initialSearch:"Voting"};case E.Ed.trackingContextName:return{initialTab:f.E.WIDGETS,initialSearch:"Games"}}return null}let $=new Map([["sticky",{toolType:"sticky",Component:R.T3,action:"set-tool-sticky",iconComponent:D,noBorderIconComponent:G,isSelectedWithContext:({tool:e})=>e===_.UAh.STICKY,onClickWithContext:({currentlySelectedTool:e})=>{m.iTB.triggerAction("sticky"===e?"set-tool-default":"set-tool-sticky",{source:v.FV})}}],["text",{toolType:"text",Component:function({isSelected:e,onClick:t}){return n.createElement(O.hA,{toolType:"text",recordingKey:(0,v.pI)("text"),isSelected:e,className:N.fLW,onClick:t,"data-tooltip-type":w.fR.LOOKUP,"data-tooltip":"set-tool-type",hasOpenSubmenu:!1},t=>n.createElement(C.pi,{toolType:"text",inactiveIcon:n.createElement(y.wx,null),hoveredIcon:n.createElement(y.N2,null),activeIcon:n.createElement(y.CJ,null),isSelected:e,isHovered:t}))},action:"set-tool-type",iconComponent:M,noBorderIconComponent:H,isSelectedWithContext:({tool:e})=>e===_.UAh.TYPE,onClickWithContext:({currentlySelectedTool:e})=>{m.iTB.triggerAction("text"===e?"set-tool-default":"set-tool-type",{source:v.FV})}}],["connector",{toolType:"connector",Component:I.wR,action:"set-tool-connector-elbowed",iconComponent:F,noBorderIconComponent:W,isSelectedWithContext:({tool:e})=>e===_.UAh.CONNECTOR_ELBOWED||e===_.UAh.CONNECTOR_STRAIGHT,onClickWithContext:({currentlySelectedTool:e,connectorToolLineStyle:t})=>{m.iTB.triggerAction("connector"===e?"set-tool-default":(0,I.w0)(t),{source:v.FV})}}],["stamp",{toolType:"stamp",Component:L.Ok,action:"set-tool-stamp",iconComponent:B,noBorderIconComponent:Z,isSelectedWithContext:({tool:e,stampWheelOpen:t})=>e===_.UAh.STAMP||t,onClickWithContext:({stampWheelOpen:e})=>{e?h.J8.closeWheel():(0,L.pk)({source:v.FV})}}],["section",{toolType:"section",Component:function({isSelected:e,onClick:t}){let r=(0,T.dO)(),i=(0,A._s)(r);return n.createElement(O.hA,{toolType:"section",recordingKey:(0,v.pI)("section"),isSelected:e,className:"none"!==i?N.Rnt:N.qi3,onClick:t,"data-tooltip-type":w.fR.LOOKUP,"data-tooltip":"set-tool-section",hasOpenSubmenu:!1,onboardingKey:S.yn},t=>n.createElement(C.pi,{toolType:"section",inactiveIcon:n.createElement(y.Hm,null),hoveredIcon:n.createElement(y.Mu,null),activeIcon:n.createElement(y.Iv,null),isSelected:e,isHovered:t}))},action:"set-tool-section",iconComponent:x,noBorderIconComponent:K,isSelectedWithContext:({tool:e})=>e===_.UAh.SECTION,onClickWithContext:({currentlySelectedTool:e})=>{m.iTB.triggerAction("section"===e?"set-tool-default":"set-tool-section",{source:v.FV})}}],["table",{toolType:"table",Component:function({isSelected:e,onClick:t}){let r=(0,T.dO)(),i=(0,A._s)(r);return n.createElement(O.hA,{toolType:"table",recordingKey:(0,v.pI)("table"),isSelected:e,className:"none"!==i?N.cVQ:N.Kzj,onClick:t,"data-tooltip-type":w.fR.LOOKUP,"data-tooltip":"set-tool-table",hasOpenSubmenu:!1},t=>n.createElement(C.pi,{toolType:"table",inactiveIcon:n.createElement(y.kR,null),hoveredIcon:n.createElement(y.tF,null),activeIcon:n.createElement(y.FZ,null),isSelected:e,isHovered:t}))},action:"set-tool-table",iconComponent:U,noBorderIconComponent:z,isSelectedWithContext:({tool:e})=>e===_.UAh.TABLE,onClickWithContext:({currentlySelectedTool:e})=>{m.iTB.triggerAction("table"===e?"set-tool-default":"set-tool-table",{source:v.FV})}}],["universal-insert",{toolType:"universal-insert",Component:b.Gg,action:"browse-all-resources-dlt-overflow",iconComponent:V,noBorderIconComponent:Y,isSelectedWithContext:({browseAllResourcesModalShowing:e,tool:t})=>e&&t===_.UAh.NONE,onClickWithContext:({currentlySelectedTool:e,dispatch:t,store:r})=>{if("universal-insert"===e)t(c.ko()),m.iTB.triggerAction("set-tool-default",{source:v.FV});else{let e=j(r.getState());m.iTB.triggerAction("clear-tool",{source:v.FV}),t(c.KD({initialX:0,initialY:0,...e})),(0,p.T6)({source:v.FV},b.bB)}}}]]),q=e=>"v2"===e?["sticky","text","section","table","stamp"]:["sticky","text","connector","stamp","section","table"],X=e=>"v2"===e?["sticky","text","section","table","stamp"]:["stamp","sticky","text","connector","section","table","divider"];function J(e,t){let r=new Map,n=new Set(["text","connector","stamp","section","table"]);for(let i of("v2"===e&&n.delete("connector"),t&&n.add("sticky"),n))$.has(i)&&r.set(i,$.get(i));return r}function Q(e,t){let r="v2"===e?4:5,n=[];return n=[{stage:"FULL",thresholdWidth:1e3,numPrimaryTools:r},{stage:"MINIMIZED_FULL",thresholdWidth:882,numPrimaryTools:4},{stage:"MINIMIZED_THREE",thresholdWidth:826,numPrimaryTools:3},{stage:"MINIMIZED_TWO",thresholdWidth:770,numPrimaryTools:2},{stage:"MINIMIZED_ONE",thresholdWidth:714,numPrimaryTools:1},{stage:"MINIMIZED",thresholdWidth:634,numPrimaryTools:0},{stage:"CUT_OFF",thresholdWidth:0,numPrimaryTools:0}],J(e,t).size===r&&n.forEach(function(e,t){e.numPrimaryTools===r-1&&(e.numPrimaryTools=r)}),n}let ee=[d.ht,d.S];function et(e,t){let r=[],n=q(e);for(let i of n){let n=J(e,t).get(i);n&&(r=r.concat(n))}return r}function er(e,t,r,c,d,p,h,_){let f=[],E=n.createElement("div",{key:"divider",className:k.ko}),y=X(h);for(let p of y){if(e&&e.includes(p))continue;if("divider"===p&&f.length>0){f=f.concat(E);continue}let y=J(h,_).get(p);if(y){let e=(0,g.bQ)(c,y.action);f.push(n.createElement(a.j.Option,{key:y.toolType,className:k.L8,disabled:!1,recordingKey:i.ar((0,v.pI)("overflowMenu"),y.toolType),onClick:()=>{d&&!ee.includes(d)&&t.dispatch(s.hV()),m.iTB.triggerAction("set-tool-default",{source:v.FV}),t.dispatch(l.SO({toolType:y.toolType})),m.iTB.triggerAction("leave-edit-mode",{source:v.FV}),y.onClickWithContext(t),r(!1)}},n.createElement("div",{className:k.db},y.iconComponent),n.createElement("div",{className:k.xY},y.noBorderIconComponent),n.createElement("div",null,n.createElement("div",{className:k.fL},(0,u.K)(y.action)),n.createElement("div",{className:k.WL},(0,u.K)(`${y.action}-description`))),e?n.createElement(o.e,{shortcut:e,className:k.Xl}):null))}}return f[f.length-1]===E&&(f=f.slice(0,-1)),f.reverse()}let en=(e,t,r)=>et(t,r).slice(0,e).map(e=>e.toolType)},130939:(e,t,r)=>{r.d(t,{Ok:()=>V,X6:()=>D,pO:()=>k,pk:()=>Z,rk:()=>z,rt:()=>K});var n=r(652983),i=r(407908),a=r(87608),o=r.n(a),l=r(172497),s=r(571529),c=r(435613),d=r(970740),u=r(740794),p=r(404330),m=r(317907),h=r(961215),_=r(474935),g=r(420353),f=r(457753),E=r(464368),y=r(70918),v=r(225468),b=r(836227),I=r(398081),T=r(520056),w=r(711971),S=r(39949),C=r(419099),O=r(404518),A=r(707041),N=r(332224),L=r(458803);let P=r(284987),R="delightful-toolbar-stamp-button",k="delightful-toolbar-quick-access-icon",D="stamp",M=(0,l.F)(N.JZB),F={padBottom:30,height:512},x=100*F.padBottom/F.height,U=`calc(${x}% + -14px)`,B=`translateY(${U})`;function V({isSelected:e,onClick:t,dispatch:r}){let a=(0,f.EK)(),l=(0,O.yU)(),s=l>0,c=(0,i.v9)(e=>e.universalInsertModal.showing),d=(0,y.dO)(),m=(0,A._s)(d),_=(0,w.g)((0,E.ob)()),g=n.useRef(null),N=(0,n.useCallback)(()=>{a&&r(p.wx({votingStage:h.Kb2.NOT_JOINED})),r(u.Jo())},[r,a]);return n.createElement("div",{"data-element-target":R,className:o()(L.oAQ,L.Tby),ref:g},(null==g?void 0:g.current)&&n.createElement(T.PV,{parentRect:g.current.getBoundingClientRect()}),n.createElement(C.hA,{toolType:"stamp",recordingKey:(0,I.pI)("stamp"),isSelected:e,className:"none"!==m?L.Tap:L.RcB,onClick:t,"data-tooltip-type":v.fR.LOOKUP,"data-tooltip":"set-tool-stamp",onboardingKey:D,tooltipLocation:a?"below":"above",tooltipOffset:a?{offsetX:0,offsetY:-14}:void 0,"data-tooltip-bottom-flip-margin":a?0:void 0,hasOpenSubmenu:!1},t=>n.createElement(S.pi,{toolType:"stamp",inactiveIcon:n.createElement(b.Do,null),hoveredIcon:n.createElement(b.m$,null),activeIcon:n.createElement(b.vK,null),isSelected:e,isHovered:t})),a&&!c&&!_&&n.createElement(n.Fragment,null,n.createElement(G,{leaveVotingSessionAndCloseWheel:N,onClickToOpenWheel:t,numVotesRemaining:l,hasRemainingVotes:s}),n.createElement(W,{onClickToOpenWheel:t,isStampToolSelected:e,hasRemainingVotes:s})))}function G({onClickToOpenWheel:e,leaveVotingSessionAndCloseWheel:t,numVotesRemaining:r,hasRemainingVotes:i}){let[a,l]=(0,n.useState)(!1),u=i&&!s.ZP.isIpad;H({shouldOpenWheelOnHover:u,isHovered:a});let p=i?L.nFc:L.zEZ;return n.createElement("button",{className:o()(L.Zt,p),onMouseEnter:()=>!s.ZP.isIpad&&l(!0),onMouseLeave:()=>!s.ZP.isIpad&&l(!1),onClick:()=>{u||(i?e():t())},tabIndex:-1},i?n.createElement("span",{className:L.shQ},n.createElement(d.Tx,{id:"voting.delightful_toolbar.votes_remaining",numVotes:r})):n.createElement(n.Fragment,null,n.createElement(c.n,{className:L.eQZ,svg:P}),n.createElement("span",{className:L.shQ},n.createElement(d.Tx,{id:"voting.delightful_toolbar.no_votes_remaining"}))))}function H({shouldOpenWheelOnHover:e,isHovered:t}){let r=e&&t;(0,n.useEffect)(()=>{if(!r)return;let e=setTimeout(()=>Z({source:"peeking_vote_wheel_hover",openedViaHover:!0}),100);return()=>clearTimeout(e)},[r])}function W({onClickToOpenWheel:e,isStampToolSelected:t,hasRemainingVotes:r}){let[i,a]=(0,n.useState)(!1),l=n.useRef(null),c=K(),d=function({isHidden:e,wheelRef:t}){let[r,i]=n.useState(!1);return n.useEffect(()=>{if(e){i(!0);return}let r=t.current;if(!r){i(!1);return}let n=()=>{i(!1),r.removeEventListener("transitionend",n)};return r.addEventListener("transitionend",n),()=>{r.removeEventListener("transitionend",n)}},[e,t]),e||r}({isHidden:c,wheelRef:l}),u=r&&!s.ZP.isIpad;H({shouldOpenWheelOnHover:u,isHovered:i}),(0,n.useEffect)(()=>{let e=l.current;if(!e)return;let t={transform:`${B} scale(1.05)`},r={transform:`${B} scale(1)`},n=new Animation(new KeyframeEffect(e,[{transform:"translateY(100%) scale(0.1)"},t],{duration:450,easing:"ease-out"})),i=new Animation(new KeyframeEffect(e,[t,r],{duration:200,easing:"ease-in-out"})),a=new Animation(new KeyframeEffect(e,[r,r],{duration:400})),o=new Animation(new KeyframeEffect(e,[r,{}],{duration:300,easing:"cubic-bezier(0.37, 0, 0.48, 1.33)"}));return n.play(),n.finished.then(()=>i.play()).catch(()=>{}),i.finished.then(()=>a.play()).catch(()=>{}),a.finished.then(()=>o.play()).catch(()=>{}),()=>{n.cancel(),a.cancel(),o.cancel()}},[l]);let p=!(t||r);return n.createElement("div",{className:L.lcZ},n.createElement("button",{ref:l,tabIndex:-1,className:o()({[L.IEc]:!0,[L.R3G]:p,[L.bbn]:c,[L.NJp]:d,[L.RRf]:!r}),onMouseEnter:()=>!s.ZP.isIpad&&a(!0),onMouseLeave:()=>!s.ZP.isIpad&&a(!1),onClick:()=>!u&&e()}))}let K=()=>(0,i.v9)(e=>"WHEEL"===e.multiplayerEmoji.type&&["STAMP1","STAMP2"].includes(e.multiplayerEmoji.wheelType));function z(){return(0,m.e5)(R)}let Z=({source:e,openedViaHover:t=!1})=>{let r=z(),n=(0,m.e5)(k);if(r||n){let i=r?r.getBoundingClientRect():n.getBoundingClientRect(),a=i.x+i.width/2,o=i.y-(g.q+2)-14-M;_.J8.handleShortcutPressWithType({viewportX:a,viewportY:o,source:e,openedViaHover:t,wheelType:"STAMP"}),_.J8.handleShortcutRelease(a,o)}}},865048:(e,t,r)=>{r.d(t,{S:()=>s,p:()=>c});var n=r(652983),i=r(87608),a=r.n(i),o=r(571529),l=r(458803);function s({className:e,disabled:t,isDragging:r,children:i,"aria-hidden":s}){return n.createElement("div",{"aria-disabled":t,"aria-hidden":s,className:a()(l.KT$,{[e||""]:!!e,[l._mw]:t,[l.rnD]:r,[l.Le8]:!o.ZP.safari}),"data-fullscreen-intercept":!0},i)}function c({className:e,isHovering:t,isSelected:r,disabled:i,children:o,"aria-hidden":s}){return n.createElement("div",{"aria-disabled":i,"aria-hidden":s,className:a()({[e||""]:!!e,[l.KKp]:!0,[l.dE1]:t,[l.qJR]:r,[l.Mqw]:i}),"data-fullscreen-intercept":!0},o)}},39949:(e,t,r)=>{r.d(t,{pi:()=>p,Hk:()=>m});var n=r(652983),i=r(87608),a=r.n(i),o=r(204829),l=r(564380),s=r(970740),c=r(836227),d=r(88323);let u="dlt_hoverable_icon--active--Ao1OG";function p({toolType:e,inactiveIcon:t,hoveredIcon:r,activeIcon:i,isHovered:a,isSelected:o}){return n.createElement(_,{toolType:e},n.createElement("div",{className:"dlt_hoverable_icon--centeredIcon--clLyK"},o?i:a?r:t))}function m({className:e,toolType:t,children:r,isIconHovered:i,isActive:p,submenuOpen:m,onChevronClick:h,recordingKey:g}){let f=(0,d.tc)();return n.createElement(_,{toolType:t},n.createElement("div",{className:a()("dlt_hoverable_icon--container--7EGpT",e,{"dlt_hoverable_icon--disabled--KxNMa":f})},n.createElement("div",{className:a()("dlt_hoverable_icon--iconSection--I5Lht",{[u]:p,"dlt_hoverable_icon--hover--AKh9w":!p&&i})},r),n.createElement(l.sq,{className:a()("dlt_hoverable_icon--chevronSection--wxiRz",{[u]:p}),onClick:h,recordingKey:(0,o.ar)(g,"chevron"),disabled:f,"aria-disabled":f,"data-fullscreen-intercept":!0,"aria-label":(0,s.t)("whiteboard.delightful_toolbar.connector_menu_label")},n.createElement("div",{className:a()("dlt_hoverable_icon--chevron--z5Ekk",{"dlt_hoverable_icon--submenuOpen--x0wmv":m})},n.createElement(c.DV,{fill:p?"white":"black"})))))}let h=n.createContext({enableHiding:!1,visibleTool:"text"});function _({toolType:e,children:t}){let r=n.useContext(h);return n.createElement(n.Fragment,null,r.enableHiding&&r.visibleTool!==e?null:t)}},288549:(e,t,r)=>{r.d(t,{Ap:()=>y,MD:()=>b,rS:()=>g,k8:()=>_,vU:()=>E,RB:()=>f,LO:()=>v});var n=r(652983),i=r(87608),a=r.n(i),o=r(564380),l=r(970740),s=r(70918),c=r(382476),d=r(836227),u=r(88323),p=r(414413),m=r(406446),h=r(707041);function _({alignment:e,children:t,onMouseEnter:r,onMouseLeave:i,innerRef:o}){return n.createElement("div",{className:a()({"dlt_submenu--submenuContainer--M4ufs delightful_toolbar--passthruLayout--gz5r2":!0,"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:r,onMouseLeave:i,ref:o},t)}function g({isOpen:e,children:t,fadedOut:r,id:i,testId:o,optimizeForCompactSize:l,overflowChildren:c}){let d=(0,s.dO)(),u=(0,h._s)(d),p=n.createElement("div",{className:"dlt_submenu--submenuItems--FJHkH"},t);return n.createElement("div",{className:a()({"dlt_submenu--submenu--EmU1-":!0,"dlt_submenu--submenuIA--pTZdx":"none"!==u,"dlt_submenu--compactSize--yJCzh":!!l,"dlt_submenu--isOpen--sH4-4":e,"dlt_submenu--fadedOut--rHzEu":r}),"data-testid":o,"aria-hidden":!0,id:i},c?p:n.createElement("div",{className:"dlt_submenu--submenuCornerClipping--rhbch"},p))}function f({children:e,disabled:t,paddingLeft:r,paddingRight:i,height:o,shouldVerticallyCenter:l,shouldClipAndRoundTopRightCorner:s}){return n.createElement("div",{className:a()("dlt_submenu--submenuGroup--KSxIU",{"dlt_submenu--submenuGroupDisabled--BPix8":t,"dlt_submenu--submenuGroupVerticallyCentered---T24I":l,"dlt_submenu--submenuRightCornerClipping--ccFVw":s}),style:{paddingLeft:r,paddingRight:i,height:o}},e)}function E(){return n.createElement("div",{className:"dlt_submenu--submenuDivider--IwlsI"})}function y({onClick:e,isActive:t,className:r,ariaLabel:i,recordingKey:l,testId:s,onboardingKey:c,...p}){let m=(0,u.tc)();return n.createElement(o.sq,{className:a()({"dlt_submenu--chevronButton--9FZPC":!0,"dlt_submenu--chevronDisabled--XeO8B":m,"dlt_submenu--chevronActive--MCvaz":t,...r?{[r]:!0}:{}}),disabled:m,"aria-disabled":m,"aria-label":i,onClick:e,"data-fullscreen-intercept":!0,"data-tooltip-type":p["data-tooltip-type"],"data-tooltip":p["data-tooltip"],"data-tooltip-offset-y":p["data-tooltip-offset-y"],"data-tooltip-submenu-open":p["data-tooltip-submenu-open"],recordingKey:l,"data-testid":s,"data-onboarding-key":c},n.createElement("div",{className:"dlt_submenu--chevronButtonIcon--3aQnG"},n.createElement(d.DV,null)))}function v({isSelected:e,fullSizeHighlight:t,children:r,explicitWidth:i,shouldCenterContent:o,noScaleAnimation:l,isRightEdge:s}){return n.createElement("div",{style:{width:i},className:a()("dlt_submenu--toolBackground--St0Y2 delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!l,"dlt_submenu--toolBackgroundDefaultHighlight--DDeEb":!t,"dlt_submenu--toolBackgroundFullSizeHighlight--UvR5b":!!t,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":o,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!s})},r)}function b({currentColor:e,paletteType:t,showPopover:r,setShowPopover:i,alwaysUseCurrentColorInSwatch:a,recordingKey:o}){let s=(0,c.DM)(e,t),d=e&&(s||r||a);return n.createElement(p.zx,{onClick:()=>{i(!r)},active:r?"LOUD":"NONE",recordingKey:o,buttonStyle:{"--menu-padding-right":"4px",marginLeft:"4px",padding:"4px 4px 4px 0px"},isNewSubmenu:!0,tabIndex:-1},d?n.createElement(m.gl,{key:"custom-color",size:"medium",value:e,selectionState:r?"unselected":"selected_custom",background:"light",paletteType:"base",tooltip:(0,l.t)("whiteboard.colors.custom")}):n.createElement(m.BP,{swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"}}))}},419099:(e,t,r)=>{r.d(t,{OU:()=>f,hA:()=>E,pp:()=>y});var n=r(652983),i=r(87608),a=r.n(i),o=r(810373),l=r(204829),s=r(564380),c=r(241239),d=r(131826),u=r(665955),p=r(141209),m=r(88323),h=r(485218),_=r(865048),g=r(458803);let f=(0,n.forwardRef)(({toolType:e,isSelected:t,onClick:r,children:i,tooltipOffset:d={offsetX:0,offsetY:12},tooltipLocation:p="above",className:f,recordingKey:E,onboardingKey:y,ButtonLayout:v=_.S,isDisabled:b=!1,clickOnMouseDown:I=!1,inTabOrder:T=!0,ariaLabel:w,isHovered:S,isEnabledForViewers:C=!1,onMouseEnter:O,onMouseMove:A,onMouseLeave:N,onTouchStart:L,onTouchEnd:P,hasOpenSubmenu:R,testId:k,...D},M)=>{let{state:F,dispatch:x}=(0,n.useContext)(u.MY),U=(0,m.tc)({isEnabledForViewers:C})||b,B=F.draggedTool===e,V=w||D["data-tooltip"],G=e=>{e.preventDefault(),e.stopPropagation(),F.shouldFinishClick&&!I&&r(e)};return n.createElement(s.yh,{className:a()({[g.oAQ]:!0,[g.ZRh]:U,[g.D61]:!0}),recordingKey:E,onMouseEnter:O,onMouseMove:A,onMouseLeave:N,onTouchStart:L,onTouchEnd:P,onPointerDown:U?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),I?(r(e),x({type:"cancel drag"})):x({type:"start click"}),!h.k.RECORD_DETAILED_EVENTS)return l.Ev},onClick:U?void 0:G,"data-tooltip-type":B?null:D["data-tooltip-type"],"data-tooltip-submenu-open":R,"data-tooltip":D["data-tooltip"],"data-tooltip-offset-x":D["data-tooltip-offset-x"]??d.offsetX,"data-tooltip-offset-y":D["data-tooltip-offset-y"]??d.offsetY,"data-tooltip-show-above":"above"===p||void 0,"data-tooltip-show-below":"below"===p||void 0,"data-tooltip-show-left":"left"===p||void 0,"data-tooltip-interactive":!1,"data-tooltip-bottom-flip-margin":D["data-tooltip-bottom-flip-margin"],"data-onboarding-key":y,"data-fullscreen-intercept":!0,"data-testid":k},n.createElement(v,{className:f,isHovering:S,isSelected:t,disabled:U,isDragging:B,"aria-hidden":!0},i),n.createElement(s.yh,{className:a()(g.XFR,{[g.ZRh]:U,[g.HQC]:!0,[g.bBs]:t,[g.Ys]:"select"===e,[g.V1D]:"hand"===e}),onClick:U?void 0:G,onKeyDown:U?void 0:e=>{e.keyCode===o.sr.ENTER&&F.shouldFinishClick&&!I&&r(e)},forwardedRef:M,role:function(e,t){let r;return e.shouldDemoteDlt?r="presentation":t&&(r="button"),r}(F,T),tabIndex:T&&!U?0:-1,"aria-hidden":!T,"aria-label":V?function(e){try{let t=(0,c.K)(e);return t||e}catch(t){return e}}(V):void 0,"aria-disabled":U,"data-fullscreen-intercept":!0}))}),E=(0,n.forwardRef)(({children:e,hasExtraLongHoverTime:t,...r},i)=>{let{isHovered:a,hoverTarget:o,onMouseEnter:l,onMouseMove:s,onMouseLeave:c,onTouchStart:d,onTouchEnd:u}=(0,p.H)(r.onClick,t),m="function"==typeof e?e(a,o):e;return n.createElement(f,{...r,ref:i,isHovered:a,onMouseEnter:l,onMouseLeave:c,onMouseMove:s,onTouchStart:d,onTouchEnd:u},m)}),y=(0,d.z7)(E)},209006:(e,t,r)=>{r.d(t,{C:()=>a,U:()=>i});var n=r(652983);function i(e,t){let r=e;for(;null!==r;){if(r===t)return!0;r=r.parentElement}return!1}function a(e,t={}){let{closeOnEsc:r,ignore:a=[]}=t;(0,n.useEffect)(()=>{let t=t=>{if(e&&"allClicks"!==a){if(Array.isArray(a)){for(let e of a)if(e&&"current"in e&&(e=e.current),e&&i(t.target,e))return}else if(a(t.target))return;e()}},n=t=>{"Escape"===t.key&&e&&e()};return document.addEventListener("pointerdown",t),r&&document.addEventListener("keydown",n),()=>{document.removeEventListener("pointerdown",t),r&&document.removeEventListener("keydown",n)}},[e,r,a])}},517654:(e,t,r)=>{r.d(t,{A$:()=>o,KP:()=>u,Vm:()=>s,_9:()=>a,gE:()=>c,w8:()=>d,xg:()=>l});var n=r(448694);let i=(e,t,r,i)=>{var a;(0,n.hp)(e,null==(a=t.openFile)?void 0:a.key,t,{...r,multiplayer_count:t.multiplayer.allUsers.length},i)},a=e=>i("opens_music_dropdown",e),o=(e,t,r)=>i("changes_song",e,{song_id:t,isPlaying:r}),l=(e,t)=>i("removes_song",e,{song_id:t}),s=(e,t)=>i("toggles_mute",e,{isMuted:t}),c=(e,t)=>i("changes_volume",e,{volume:t}),d=(e,t)=>i("plays_song",e,{song_id:t},{forwardToDatadog:!0}),u=(e,t)=>i("stops_song",e,{song_id:t})},33635:(e,t,r)=>{r.d(t,{Ki:()=>s,LV:()=>i,Xq:()=>u,mM:()=>a,s4:()=>m,uP:()=>p,v:()=>o,v2:()=>l,zx:()=>d});var n=r(393677);function i(e,t){let r=new Date().getTime()-e;return t>=2&&r>=5e3}let a=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r].song_id!==t[r].song_id)return!1;return!0},o=(e,t)=>!e&&!t||(null==e?void 0:e.song_id)===(null==t?void 0:t.song_id),l=e=>{let t=[];return e.forEach(e=>{let r=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[r].start_time,t.push(e)}),t},s=async({songID:e,onSuccess:t,onNotFound:r})=>{try{await n.F.getActive({songID:e}),t()}catch(t){if(404===t.status){r();return}throw console.warn(`Failed to fetch active song with id ${e}: ${t}`),r(),t}},c=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"],d=()=>"mediaSession"in navigator&&!!navigator.mediaSession.metadata,u=(e,t)=>{if(!e)return;let{title:r,album_art:n}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:r,artist:"FigJam Music",artwork:[{src:n||""}]}),c))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(t){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}t&&navigator.mediaSession.setActionHandler("stop",()=>{t()})}},p=()=>{if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,c))try{navigator.mediaSession.setActionHandler(e,null)}catch(t){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}},m=()=>{navigator.mediaSession.setActionHandler("play",null)}},228488:(e,t,r)=>{r.d(t,{L7:()=>m,Lj:()=>f,Rm:()=>_,To:()=>p,ZY:()=>u,ZZ:()=>a,jL:()=>s,kN:()=>o,p_:()=>h,sz:()=>d,u7:()=>c,xw:()=>i,yQ:()=>l,z1:()=>g});var n=r(187436);let i="timer-start-onboarding",a=5999e3,o=1250,l=1;function s(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function c(e){let t=s(e);return!e||0===e.totalTimeMs||t<=-o}function d(e){let t=s(e);return t<=0&&(null==e?void 0:e.totalTimeMs)>0}function u(e){return!!(null==e?void 0:e.isPaused)&&e.totalTimeMs>0&&e.timeRemainingMs>0&&e.totalTimeMs!==e.timeRemainingMs}function p(e){return Math.floor(60*Number(e.minutes)+Number(e.seconds))}function m(e,t){let r=c(e),n=s(e),i=parseInt(t.minutes);return r?(i||0)+l<=99:n+6e4*l<=a}function h(e,t){let r=s(e),n=e.totalTimeMs-r;return t>=2&&n>=5e3}function _(e){return e<10?`0${e}`:`${e}`}function g(e,t){e.volume=t/100,e.currentTime=0,e.play().catch(e=>{if("NotAllowedError"!==e.name)throw Error(`Failed to play FigJam timer chimes: ${e}`)})}let f=()=>{let e=(0,n.zD)();return!(null==e?void 0:e.shouldOptimizeForIpadApp)||null!=e&&!!e.shouldShowTimerOnTheLeft}},315997:(e,t,r)=>{r.d(t,{MU:()=>u,iX:()=>c,y_:()=>s});var n=r(337167),i=r(122342),a=r(451573),o=r(228488);let l=()=>{let e=(0,i.gm)().get("last-timer-set-time")||180,t={seconds:(0,o.Rm)(e%60),minutes:(0,o.Rm)(Math.floor(e/60))};return{...t,lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}},s=(0,n.w0)(l(),(e,t)=>{let r={...e,lastAction:t};switch(t.type){case"set-seconds":return{...r,seconds:t.seconds};case"set-minutes":return{...r,minutes:t.minutes};case"set-time":return{...r,minutes:t.minutes,seconds:t.seconds};case"add-minutes":let n=Math.min(Math.max(0,parseInt(r.minutes)+t.minutes),99).toString(),i=1===n.length?"0"+n:n;return{...r,minutes:i};case"start-timer":let a=60*parseInt(r.minutes)+parseInt(r.seconds);if(1e3*a<=0)return r;return{...r,lastUsedTime:a};case"reset-state":return l();default:return r}}),c=(0,a.cg)(e=>e.timer),d=(0,n.cn)({}),u=(0,n.ks)((0,n.cn)(e=>(e(d),Math.max(0,Math.ceil((0,o.jL)(e(c).time)/1e3))),(e,t,r)=>{t(d,{})}),({setSelf:e})=>{let t=setInterval(()=>{var t;let r=n.n_.get(c);r&&r.time&&(null==(t=null==r?void 0:r.time)||!t.isPaused)&&e("RECOMPUTE")},200);return()=>clearInterval(t)})},465898:(e,t,r)=>{r.r(t),r.d(t,{MAX_NUM_VOTERS_SHOWN_IN_VOTERS_LIST:()=>k,VOTER_LIST_ITEM_HEIGHT:()=>R,VOTE_PIN_EXPANDED_WIDTH:()=>P,VOTE_PIN_EXPANDED_WIDTH_WITH_PADDING:()=>D,VotePinsOverlay:()=>Y});var n,i,a=r(652983),o=r(407908),l=r(46965),s=r(686926),c=r(115664),d=r(204829),u=r(519781),p=r(85808),m=r(970740),h=r(299482),_=r(404330),g=r(317907),f=r(961215),E=r(764850),y=r(847061),v=r(70918),b=r(671755),I=r(853915),T=r(264505),w=r(336752),S=r(733029),C=r(646259),O=r(404518),A=r(526238),N=r(332224),L=r(207022);let P=240,R=32,k=7.5,D=P+16;var M=((n=M||{}).DEFAULT="default",n.HOVERED="hovered",n.SELECTED="selected",n.DIMMED="dimmed",n),F=((i=F||{}).LARGE="large",i.MEDIUM="medium",i.SMALL="small",i.X_SMALL="xSmall",i);function x({clientHeight:e,scrollHeight:t,scrollTop:r}){return 1>Math.abs(t-e-r)}function U({nodeVoteInfo:e,isMostVoted:t,isSelected:r,isHoveredInModal:n,isOtherPinSelected:i,selectPin:o,deselectPin:l,nodePosition:s,currentUserId:c}){let[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(d),[h,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!d){m(!1);return}let e=setTimeout(()=>m(!0),100);return()=>clearTimeout(e)},[d]);let g=(0,a.useCallback)(()=>o(e.guid),[o,e.guid]),E=(0,a.useCallback)(()=>l(e.guid),[l,e.guid]),y=r?"selected":p||n?"hovered":i?"dimmed":"default",v="selected"===y||"hovered"===y;return(0,a.useEffect)(()=>{v&&!h?(f.iVe.setVoteStampsHiddenOnVotedNode(e.guid,!0),_(!0)):!v&&h&&(f.iVe.setVoteStampsHiddenOnVotedNode(e.guid,!1),_(!1))},[v,h,e.guid]),a.createElement(A.y,{nodePosition:s,isExpanded:["selected","hovered"].includes(y)},({viewportZoom:r})=>a.createElement(B,{recordingKey:`votePin-nodeId${e.guid}`,nodeVoteInfo:e,isMostVoted:t,pinState:y,setIsHovered:u,selectPin:g,deselectPin:E,viewportSize:r>.75?"large":r>.5?"medium":r>.25?"small":"xSmall",currentUserId:c}))}let B=a.memo(function({nodeVoteInfo:e,isMostVoted:t,pinState:r,setIsHovered:n,selectPin:i,deselectPin:o,viewportSize:m,currentUserId:_,recordingKey:f}){let E=(0,a.useRef)(null),y=(0,a.useRef)(null),[v,b]=(0,a.useState)(0),[I,T]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!0),[C,A]=(0,a.useState)(0),[D,M]=(0,a.useState)(!1),F=(0,O.fO)(e),U={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[m],B={large:1,medium:.9,small:.8,xSmall:.7}[m];(0,a.useEffect)(()=>{if("selected"!==r)return;let e=e=>{(0,g.Zm)(e.target,E.current)||o()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[r,o,e.guid]);let W=t?h.sx.colorBgvotingtertiary.$.backgroundColor:h.sx.colorBg.$.backgroundColor,z={default:{transform:`scale(${B})`,backgroundColor:W,borderColor:W,opacity:1,...U},dimmed:{transform:`scale(${B})`,backgroundColor:W,borderColor:W,opacity:.5,...U},hovered:{transform:"scale(1)",backgroundColor:W,borderColor:W,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:W,...h.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},Z={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:N.kjy,height:N.kjy,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:N.kjy,height:N.kjy,marginLeft:"8px",marginRight:"12px",opacity:1}},Y=(0,a.useMemo)(()=>{let t=(0,O.oe)(_);return Object.entries(e.userIdToNodeVotes).sort((e,r)=>t(e[0],r[0]))},[e.userIdToNodeVotes,_]),j=Y.length>3,$=j?Y.slice(0,2):Y,q=j?Y.slice(2):[],X={hovered:{height:`${R}px`},selected:{height:"auto"}},J=(0,a.useCallback)(e=>{var t,r;let n=0!==e;n!==I&&T(n);let i=null==(t=y.current)?void 0:t.getScrollHeight(),a=null==(r=y.current)?void 0:r.getTrackHeight(),o=void 0===i||void 0===a||x({clientHeight:a,scrollHeight:i,scrollTop:e});o!==w&&S(o)},[I,w]),Q=(0,a.useCallback)(e=>{if(!e||!y.current){T(!1),S(!0);return}let t=y.current.getScrollTop(),r=y.current.getScrollHeight(),n=y.current.getTrackHeight();T(0!==t),S(x({clientHeight:n,scrollHeight:r,scrollTop:t}))},[]);return a.createElement(l.A,{transition:{duration:.1,ease:"easeInOut"}},a.createElement("div",{role:"button",tabIndex:0,className:L.g0,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:d.Wn(f,"click",i),ref:E,style:{transform:`translateX(${10-v}px)`}},a.createElement(s.E.div,{className:L.VV,initial:!1,animate:r,variants:z},a.createElement("p",{className:L.Fs},a.createElement(V,{numTotalVotes:F,isMostVoted:t}),a.createElement(s.E.span,{className:L.Y1,initial:!1,animate:r,variants:Z},"selected"===r&&a.createElement(u.PZ,{className:t?L.HV:void 0,onClick:e=>{e.stopPropagation(),o(),n(!1)}}))),a.createElement(c.M,null,["selected","hovered"].includes(r)&&a.createElement(a.Fragment,null,a.createElement(s.E.div,{className:L.dP,animate:"selected"===r&&I&&!D?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),a.createElement(s.E.div,{className:L.bf,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/B})`},animate:{width:`${P}px`,height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/B})`}},a.createElement(p.l,{ref:y,maxHeight:R*k,width:P,allowScrollAndZoomOver:!0,onScroll:J,onCanScrollChange:Q,forceRerenderCount:C},a.createElement("ul",{className:L.Qm},$.map(([e,t])=>a.createElement(H,{key:e,userId:e,nodeVotes:t})),j&&a.createElement(s.E.div,{initial:!1,animate:r,variants:X,onAnimationStart:()=>M(!0),onAnimationComplete:()=>{M(!1),A(e=>e+1)}},"hovered"===r&&a.createElement(K,{overflowCount:Y.length-$.length}),"selected"===r&&q.map(([e,t])=>a.createElement(H,{key:e,userId:e,nodeVotes:t})))))),a.createElement(s.E.div,{className:L.dP,animate:"selected"!==r||w||D?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),a.createElement(G,{reportWidth:b,numTotalVotes:F,isMostVoted:t,scale:B,padding:U}))});function V({numTotalVotes:e,isMostVoted:t}){return a.createElement("span",{className:L.Nz},a.createElement("span",null,a.createElement(m.Tx,{id:"voting.pin.votes",numVotes:e})),t&&a.createElement("img",{src:C.hp,className:L.Tr,alt:(0,m.t)("voting.pin.medal_img_alt")}))}function G({reportWidth:e,numTotalVotes:t,isMostVoted:r,scale:n,padding:i}){let o=a.useRef(null);return a.useLayoutEffect(()=>{let t=o.current;if(t){let{width:r}=t.getBoundingClientRect();window.myEl=t,e(r)}},[o,t,r,n,i.paddingLeft,i.paddingRight,i.paddingTop,i.paddingBottom,e]),a.createElement("div",{className:L.G3,style:{transform:`scale(${n})`},"aria-hidden":!0},a.createElement("span",{style:i,ref:o},a.createElement(V,{numTotalVotes:t,isMostVoted:r})))}function H({userId:e,nodeVotes:t}){let r=t.length>3,n=r?t.slice(0,2):t,i=t.length-2;return a.createElement("li",{key:e,className:L.Zi},a.createElement(W,{userId:e}),a.createElement("div",{className:L.wg},n.map(e=>a.createElement(z,{key:e,stampId:e})),r&&a.createElement("span",{className:L.SR},i)))}function W({userId:e}){let{user:t,loading:r}=(0,y.xJ)(e);return a.createElement(a.Fragment,null,a.createElement(S.J,{userId:e,user:t,loading:r,size:24,loadingClassName:L.sd}),a.createElement(S._,{userId:e,user:t,loading:r,defaultClassName:L.RX,loadingClassName:L.W_}))}function K({overflowCount:e}){return a.createElement("li",{className:L.AA},a.createElement("div",{className:L.vN},a.createElement(C.TC,null)),a.createElement("span",{className:L.w9},a.createElement(m.Tx,{id:"voting.pin.voter_list_overflow",numOverflowingVoters:e})))}function z({stampId:e}){let t=(0,I.n)(),r=(0,b.OU)((e,t)=>{let r=e.get(t);return r?r.name:null},e),n=(()=>{let e=w.dM.find(e=>e.label===r);return e&&(0,T.lw)(e,t)||w.Hd})(),i=r?(0,m.t)("voting.pin.stamp_preview_alt_with_type",{stampType:r}):(0,m.t)("voting.pin.stamp_preview_alt_without_type");return a.createElement("img",{className:L.xV,src:n,alt:i})}function Z({votedNodes:e,votingStage:t,selectedNodeId:r,currentUserId:n}){let i=(0,o.I0)(),l=(0,o.v9)(e=>e.voting.hoveredInModalVotePinId),s=(0,a.useMemo)(()=>(0,O.Ub)(e),[e]),c=(0,a.useCallback)(e=>i(_.BR({votePinId:e})),[i]),d=(0,a.useCallback)(e=>i(_._g({votePinId:e})),[i]),u=(0,A.F)({votedNodes:e});return a.createElement(a.Fragment,null,e.map(e=>{let i=u[e.guid];if(!i)return null;let o=1===s.size&&s.has(e.guid)&&t===E.Kb2.ENDED;return a.createElement(U,{key:e.guid,nodeVoteInfo:e,isMostVoted:o,isSelected:r===e.guid,isHoveredInModal:l===e.guid,isOtherPinSelected:!!r&&r!==e.guid,selectPin:c,deselectPin:d,nodePosition:i,currentUserId:n})}))}let Y=a.memo(function(){let e=(0,o.I0)(),t=(0,v.dO)(),r=(0,o.v9)(e=>e.mirror.appModel.votingSessionInfo),n=(0,o.v9)(e=>e.voting.selectedVotePinId),i=[E.Kb2.ENDED,E.Kb2.JOINED].includes(r.votingStage),l=(0,a.useMemo)(()=>{var e;return r.votingStage===E.Kb2.JOINED?(e=r.votedNodes,t?e.filter(e=>{var r;return null==(r=e.userIdToNodeVotes[t])?void 0:r.length}).map(e=>({...e,userIdToNodeVotes:{[t]:e.userIdToNodeVotes[t]}})):[]):r.votedNodes},[r.votingStage,r.votedNodes,t]);return((0,a.useEffect)(()=>{n&&(i&&l.some(e=>e.guid===n)||e(_._g({votePinId:n})))},[l,i,n,e]),i)?a.createElement(Z,{votedNodes:l,votingStage:r.votingStage,selectedNodeId:n,currentUserId:t}):null})},646259:(e,t,r)=>{r.d(t,{$L:()=>B,$l:()=>f,AS:()=>E,DV:()=>D,GB:()=>l,IO:()=>b,JM:()=>C,Kn:()=>U,MI:()=>v,MM:()=>V,Ps:()=>p,Re:()=>g,T$:()=>R,TC:()=>o,VH:()=>P,VL:()=>s,WI:()=>d,Wo:()=>k,Ws:()=>x,XB:()=>u,YO:()=>O,YX:()=>m,Z7:()=>i,ZK:()=>T,b7:()=>A,e0:()=>M,ek:()=>c,h:()=>w,hp:()=>a,i3:()=>F,n4:()=>y,nM:()=>S,pO:()=>N,r7:()=>L,sl:()=>h,wB:()=>I,wc:()=>_});var n=r(652983);let i="https://static.figma.com/uploads/054596349bf8a2ae155aa7818cf2a3cbf483a9f4",a="https://static.figma.com/uploads/295306027f272a9b0931ddec9321361f7cd8299b";function o(){return n.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}function l({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4137_211384)"},n.createElement("g",{clipPath:"url(#clip1_4137_211384)"},n.createElement("rect",{width:"64",height:"64",transform:"translate(0 16.3726) rotate(-15)",fill:e}),n.createElement("rect",{x:"12.7651",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.7651 25.3755)",fill:"black",fillOpacity:"0.15"}),n.createElement("rect",{x:"15.871",y:"36.9666",width:"32",height:"6",transform:"rotate(-15 15.871 36.9666)",fill:"black",fillOpacity:"0.15"}))),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4137_211384"},n.createElement("rect",{width:"40",height:"72",fill:"white"})),n.createElement("clipPath",{id:"clip1_4137_211384"},n.createElement("rect",{width:"64",height:"64",fill:"white",transform:"translate(0 16.3726) rotate(-15)"}))))}function s(){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4119_210884)"},n.createElement("rect",{x:"1.93188",y:"17.8704",width:"40",height:"40",rx:"8",transform:"rotate(-15 1.93188 17.8704)",fill:"white"}),n.createElement("rect",{x:"4.65869",y:"35.7747",width:"4",height:"4",transform:"rotate(-15 4.65869 35.7747)",fill:"black",fillOpacity:"0.8"}),n.createElement("path",{d:"M6.55591 33.1958L4.61477 25.9514C3.47123 21.6836 5.43444 17.4495 9.59547 16.3346L33.1641 10.0194C37.3251 8.90444 41.1423 11.5897 42.2859 15.8574L44.227 23.1019",stroke:"black",strokeOpacity:"0.2"}),n.createElement("path",{d:"M8.62646 40.9232L10.5676 48.1676C11.7111 52.4354 15.5284 55.1206 19.6894 54.0057L43.258 47.6905C47.419 46.5755 49.3822 42.3414 48.2387 38.0737L46.2976 30.8293",stroke:"black",strokeOpacity:"0.2"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.2731 19.058L14.8865 23.7167L15.4041 25.6486L23.1315 23.578L28.3079 42.8965L30.2398 42.3789L25.0634 23.0604L32.7908 20.9898L32.2731 19.058Z",fill:"black",fillOpacity:"0.8"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4119_210884"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function c(){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4119_210979)"},n.createElement("rect",{x:"0.87391",y:"13.0737",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 0.87391 13.0737)",fill:"white",stroke:"#0D99FF",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("rect",{x:"17.4791",y:"74.8821",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 17.4791 74.8821)",fill:"white",stroke:"#0D99FF",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6782 27.9006L46.2859 22.7045L48.2177 22.1868L49.5833 27.2831L54.6798 25.9175L55.1974 27.8493L50.0013 29.2416L49.5104 27.4096L47.6782 27.9006ZM32.6806 33.8827L27.4845 35.275L26.9668 33.3431L32.0632 31.9775L30.6977 26.8814L32.6296 26.3637L34.0219 31.5598L34.1216 31.5331L47.5783 27.9274L49.5101 27.4097L50.0278 29.3416L53.6335 42.7982L54.1511 44.7301L52.2193 45.2477L38.7626 48.8534L36.8308 49.3711L36.8308 49.3711L38.6628 48.8802L40.0551 54.0763L38.1232 54.594L36.7577 49.4977L31.6615 50.8632L31.1438 48.9314L36.3399 47.5391L36.3131 47.4392L32.7074 33.9826L32.1898 32.0507L32.1897 32.0508L32.6806 33.8827ZM48.0959 29.8592L34.6393 33.4649L38.245 46.9216L51.7016 43.3159L48.0959 29.8592ZM54.278 44.8033L59.3744 43.4378L58.8568 41.5059L53.6607 42.8982L54.1515 44.73L52.3193 45.221L53.7116 50.4171L55.6435 49.8994L54.278 44.8033Z",fill:"#0D99FF"}),n.createElement("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#0D99FF",strokeWidth:"2"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4119_210979"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function d(){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4121_211214)"},n.createElement("rect",{x:"0.87391",y:"13.0737",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 0.87391 13.0737)",fill:"white",stroke:"#9747FF",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("rect",{x:"17.4789",y:"74.8821",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 17.4789 74.8821)",fill:"white",stroke:"#9747FF",strokeWidth:"2",strokeLinecap:"square"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.8154 33.1697L40.4705 25.1453L48.5141 29.7671L43.859 37.7915L35.8154 33.1697ZM37.1696 49.4156L29.1452 44.7605L33.767 36.7169L41.7914 41.372L37.1696 49.4156ZM53.4151 48.061L48.76 56.0855L40.7164 51.4636L45.3715 43.4392L53.4151 48.061ZM60.0855 36.4702L52.0611 31.8151L47.4393 39.8587L55.4637 44.5138L60.0855 36.4702Z",fill:"#8638E5"}),n.createElement("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#9747FF",strokeWidth:"2"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4121_211214"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function u(){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4591_210267)"},n.createElement("rect",{x:"-2",y:"15.4233",width:"48",height:"48",rx:"9.6",transform:"rotate(-15 -2 15.4233)",fill:"white"}),n.createElement("rect",{x:"-1.26515",y:"15.8476",width:"46.8",height:"46.8",rx:"9",transform:"rotate(-15 -1.26515 15.8476)",stroke:"black",strokeOpacity:"0.2",strokeWidth:"1.2"}),n.createElement("circle",{cx:"31.4811",cy:"24.4658",r:"4.2",transform:"rotate(-15 31.4811 24.4658)",stroke:"black",strokeOpacity:"0.8",strokeWidth:"2.4"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.606 20.7418L36.1064 13.909C37.3868 13.566 38.7028 14.3258 39.0458 15.6061L45.8786 41.1065C46.2217 42.3868 45.4619 43.7028 44.1816 44.0459L42.4018 44.5228L21.5894 30.0419L20.6167 29.3651L19.9277 30.3293L13.2094 39.7307L8.90894 23.6812C8.56588 22.4009 9.32568 21.0849 10.606 20.7418ZM14.0138 42.7329L15.7418 49.1817C16.0848 50.462 17.4008 51.2218 18.6812 50.8787L39.368 45.3357L21.1914 32.6888L14.0138 42.7329ZM6.59072 24.3024C5.9046 21.7418 7.4242 19.1097 9.98483 18.4236L35.4853 11.5908C38.0459 10.9047 40.6779 12.4243 41.364 14.9849L48.1969 40.4854C48.883 43.046 47.3634 45.678 44.8028 46.3641L19.3023 53.197C16.7417 53.8831 14.1097 52.3635 13.4235 49.8028L6.59072 24.3024Z",fill:"black",fillOpacity:"0.8"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4591_210267"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function p({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4121_211235)"},n.createElement("rect",{y:"16.5644",width:"64",height:"64",rx:"3",transform:"rotate(-15 0 16.5644)",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4121_211235"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function m({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4171_210078)"},n.createElement("rect",{x:"-5.5",y:"14.4346",width:"88.7204",height:"72.0853",rx:"25.2992",transform:"rotate(-15 -5.5 14.4346)",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4171_210078"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function h({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4171_210088)"},n.createElement("path",{d:"M16.5562 8.25247C16.8973 6.92671 18.0926 6 19.4615 6L89.4516 6C91.4118 6 92.8454 7.84915 92.357 9.74752L73.765 82.0085C73.4239 83.3342 72.2286 84.2609 70.8596 84.2609H0.869569C-1.09063 84.2609 -2.52423 82.4118 -2.0358 80.5134L16.5562 8.25247Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4171_210088"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function _({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4173_210152)"},n.createElement("path",{d:"M75.9438 8.25247C75.6027 6.92671 74.4074 6 73.0385 6L3.04841 6C1.08821 6 -0.34539 7.84915 0.143036 9.74752L18.735 82.0085C19.0761 83.3342 20.2714 84.2609 21.6404 84.2609H91.6304C93.5906 84.2609 95.0242 82.4118 94.5358 80.5134L75.9438 8.25247Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4173_210152"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function g({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4119_210848)"},n.createElement("circle",{cx:"40",cy:"46",r:"40",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4119_210848"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function f({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4119_210856)"},n.createElement("g",{clipPath:"url(#clip1_4119_210856)"},n.createElement("path",{d:"M18.693 6.40686C19.2012 4.50766 21.9085 3.78226 23.2982 5.17292L82.5015 64.4167C83.7556 65.6717 82.9788 67.752 81.0647 68.2649L0.211739 89.9294C-1.70237 90.4423 -3.41521 89.029 -2.95662 87.3152L18.693 6.40686Z",fill:e}))),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4119_210856"},n.createElement("rect",{width:"40",height:"72",fill:"white"})),n.createElement("clipPath",{id:"clip1_4119_210856"},n.createElement("rect",{width:"89.0428",height:"77.1705",fill:"white",transform:"translate(-22.3394 16.0794) rotate(-15)"}))))}function E({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4121_211255)"},n.createElement("path",{d:"M51.3523 84.6094C52.5437 86.3294 55.5163 86.0834 56.4088 84.191L94.4305 3.57293C95.2359 1.86524 93.7104 0.0603115 91.6086 0.234234L2.83059 7.58081C0.728861 7.75473 -0.479214 9.78588 0.59593 11.3379L51.3523 84.6094Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4121_211255"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function y({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4119_210865)"},n.createElement("ellipse",{cx:"36.0212",cy:"10.0459",rx:"36.2221",ry:"8.35894",transform:"rotate(-15 36.0212 10.0459)",fill:e}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.0853 4.68736C67.4361 9.37258 54.7615 15.1933 39.2535 19.3486C21.2873 24.2612 6.9678 24.914 1.84497 22.4498L15.4556 73.2452L15.4564 73.2483L15.4564 73.2483C16.6513 77.7075 33.2845 77.1251 52.6077 71.9474C71.9309 66.7698 86.6269 58.9575 85.4321 54.4984L72.0853 4.68736Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4119_210865"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function v({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4171_210106)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30957 14.019C11.2258 17.2597 17.7809 30.6301 22.2705 47.3855C27.6619 67.5064 28.033 84.8893 23.0994 86.2112C22.8341 86.2823 22.5589 86.3055 22.2747 86.2826L22.3557 86.5848L94.06 67.3717L94.072 67.3685L94.0839 67.3652L94.4168 67.276L94.4086 67.2455C98.6089 65.2803 97.911 48.5964 92.7387 29.2931C87.5664 9.98975 79.8288 -4.80791 75.2087 -4.40965L75.2005 -4.44026L6.30957 14.019Z",fill:e}),n.createElement("ellipse",{rx:"37.1231",ry:"8.56687",transform:"matrix(-0.258819 -0.965926 -0.965926 0.258819 12.747 50.7267)",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4171_210106"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function b({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4121_211283)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M67.808 -0.216748L71.1184 12.1379L84.015 60.2684C84.2789 61.2533 83.6944 62.2656 82.7096 62.5295L14.95 80.6856C13.9636 80.9499 12.9501 80.3633 12.6879 79.3764L0.985107 35.3241L17.2244 30.9728C18.2736 30.6916 18.8962 29.6132 18.6151 28.564L14.2374 12.2262L65.5469 -1.52218C66.5318 -1.78607 67.5441 -1.20161 67.808 -0.216748ZM14.1879 12.2394L12.5651 12.6743L12.5663 12.6788L14.1879 12.2394Z",fill:e}),n.createElement("path",{d:"M0.453613 33.7343L15.3437 29.7445C16.2999 29.4883 16.8674 28.5054 16.6112 27.5492L12.6214 12.6591L0.453613 33.7343Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4121_211283"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function I({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_4121_211302)"},n.createElement("path",{d:"M1.59945 13.1347C1.69191 12.2997 2.28702 11.6068 3.09854 11.3894L33.2368 3.31384C34.0484 3.09639 34.9102 3.39889 35.4078 4.07583L43.442 15.006L0.106658 26.6177L1.59945 13.1347Z",fill:e}),n.createElement("path",{d:"M0.49585 28.071L77.3176 7.48667C78.4055 7.19517 79.5237 7.84077 79.8152 8.92866L93.0608 58.3616C93.3523 59.4495 92.7067 60.5677 91.6188 60.8592L16.7668 80.9157C15.6789 81.2072 14.5607 80.5616 14.2692 79.4737L0.49585 28.071Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_4121_211302"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function T({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10125)"},n.createElement("path",{d:"M114.56 0.523225L5.97986 10.0227C2.09706 10.3624 -0.43629 14.2562 0.826349 17.9436L23.8419 80.1745C24.7355 82.7842 27.2933 84.4483 30.0413 84.2079L103.746 77.7596C106.494 77.5192 108.724 75.4361 109.151 72.7109L121.01 7.42886C121.613 3.57818 118.442 0.183524 114.56 0.523225Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10125"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function w({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1_2)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0018 18.1129C2.35849 15.712 3.7829 13.2449 6.18378 12.6015L8.11564 12.0839L28.0447 86.4602L26.1128 86.9778C23.712 87.6211 21.2448 86.1967 20.6015 83.7958L3.0018 18.1129ZM30.9425 85.6837L11.0134 11.3074L67.0371 -3.70406L86.9662 70.6722L30.9425 85.6837ZM89.864 69.8958L69.9349 -4.48052L71.8667 -4.99815C74.2676 -5.64147 76.7348 -4.21705 77.3781 -1.81617L94.9778 63.8668C95.6211 66.2677 94.1967 68.7348 91.7958 69.3781L89.864 69.8958Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1_2"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function S({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_9936)"},n.createElement("path",{d:"M1.28373 39.4007L27.401 4.53364C29.0584 2.33788 31.9967 1.55056 34.5299 2.62346L74.5817 19.7606C76.9322 20.7561 78.3955 23.1298 78.2289 25.677L74.5428 65.0534C74.3751 67.6187 72.5917 69.7921 70.1085 70.4574L30.506 81.0689C28.0228 81.7343 25.3917 80.7438 23.9638 78.606L1.08334 46.3481C-0.334505 44.2255 -0.254107 41.4381 1.28373 39.4007Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_9936"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function C({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_9948)"},n.createElement("path",{d:"M77.1821 12.7227L54.9038 -0.139714C53.5257 -0.935364 51.8879 -1.15098 50.3509 -0.739117L23.3659 6.49148C21.8288 6.90334 20.5183 7.90893 19.7227 9.28704L6.8603 31.5654C6.06465 32.9435 5.84904 34.5812 6.2609 36.1183L13.4915 63.1032C13.9034 64.6403 14.9089 65.9508 16.2871 66.7465L38.5654 79.6089C39.9435 80.4045 41.5812 80.6201 43.1183 80.2083L70.1032 72.9777C71.6403 72.5658 72.9508 71.5602 73.7465 70.1821L86.6089 47.9038C87.4045 46.5257 87.6201 44.888 87.2083 43.3509L79.9777 16.3659C79.5658 14.8288 78.5602 13.5183 77.1821 12.7227Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_9948"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function O({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_9990)"},n.createElement("path",{d:"M4.38961 47.4437L8.7529 18.3221C9.07419 15.9214 10.8074 13.9494 13.147 13.3225L79.3093 -4.40567C81.6489 -5.03256 84.1359 -4.1913 85.6145 -2.2729L103.954 20.7655C104.931 22.033 105.361 23.6381 105.149 25.2242L100.785 54.3458C100.464 56.7465 98.7309 58.7186 96.3914 59.3454L30.229 77.0736C27.8895 77.7005 25.4024 76.8592 23.9238 74.9408L5.58431 51.9024C4.60744 50.635 4.17733 49.0298 4.38961 47.4437Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_9990"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function A({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10069)"},n.createElement("path",{d:"M78.3034 46.7945L75.2573 11.9772C74.9685 8.67607 72.0583 6.23413 68.7572 6.52293L5.97724 12.0155C2.67614 12.3043 0.234196 15.2145 0.523004 18.5156L3.56912 53.3329C3.75676 55.4776 5.07913 57.3574 7.03428 58.2588L40.0733 74.3612C42.003 75.2509 44.2594 75.0535 46.0054 73.8422L75.7463 52.2473C77.5152 51.0201 78.4911 48.9392 78.3034 46.7945Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10069"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function N({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10082)"},n.createElement("path",{d:"M53.8362 -0.906348L28.8877 3.49274C25.6243 4.06816 23.4453 7.18012 24.0207 10.4435L25.9888 21.6046C26.5642 24.868 24.3852 27.98 21.1218 28.5554L9.96064 30.5234C6.69727 31.0988 4.51826 34.2108 5.09368 37.4741L9.49277 62.4226C10.0682 65.686 13.1801 67.865 16.4435 67.2896L27.6047 65.3216C30.868 64.7461 33.98 66.9252 34.5554 70.1885L36.5234 81.3496C37.0988 84.613 40.2108 86.792 43.4741 86.2166L68.4226 81.8175C71.686 81.2421 73.865 78.1301 73.2896 74.8668L71.3216 63.7056C70.7462 60.4423 72.9252 57.3303 76.1885 56.7549L87.3497 54.7869C90.613 54.2115 92.792 51.0995 92.2166 47.8362L87.8175 22.8877C87.2421 19.6243 84.1302 17.4453 80.8668 18.0207L69.7057 19.9887C66.4423 20.5641 63.3304 18.3851 62.7549 15.1218L60.7869 3.96061C60.2115 0.697243 57.0996 -1.48177 53.8362 -0.906348Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10082"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function L({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10095)"},n.createElement("path",{d:"M53.9511 20.3098L42.1525 3.16336C39.1912 0.00572091 33.9624 0.927699 32.2597 4.90774L27.0372 25.0555C26.4488 26.4308 25.3678 27.5367 24.0063 28.1564L3.71302 33.8825C-0.294145 35.7063 -1.03771 41.0813 2.32381 43.9245L20.084 54.7429C21.247 55.7266 21.9924 57.1158 22.1689 58.6287L21.3874 79.2433C21.8923 83.5712 26.6965 85.9346 30.4331 83.6935L46.7061 70.2694C47.9748 69.5084 49.4799 69.243 50.9323 69.5242L70.8153 76.573C75.0931 77.401 78.7991 73.537 77.7934 69.2974L70.0084 50.1933C69.6568 48.7113 69.8821 47.1509 70.6385 45.8288L83.6275 29.5885C85.8139 25.767 83.2768 20.9705 78.8875 20.6272L57.8597 22.1872C56.3683 22.0705 54.9743 21.401 53.9511 20.3098Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10095"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function P({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10138)"},n.createElement("path",{d:"M12.85 78.4563L1.39908 13.5151C0.701528 9.55913 4.01276 6.04841 8.00276 6.51361L106.493 17.9966C109.127 18.3037 111.247 20.3031 111.707 22.9144L118.224 59.876C118.8 63.1393 116.621 66.2513 113.357 66.8267L19.8007 83.3233C16.5373 83.8987 13.4254 81.7197 12.85 78.4563Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10138"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function R({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10170)"},n.createElement("path",{d:"M3.52293 10.7657C3.23413 7.46464 5.67607 4.55445 8.97717 4.26564L88.0582 -2.65305C91.3593 -2.94186 94.2695 -0.499919 94.5583 2.80118L98.93 52.7701C99.3106 57.1197 95.0142 60.5495 90.7364 59.6753C85.6875 58.6434 79.1215 57.7867 72.6631 58.3517C59.3871 59.5132 46.8006 72.394 33.8579 73.5263C25.4977 74.2577 16.8948 72.2143 12.2232 70.8232C10.0275 70.1694 8.54803 68.2028 8.34835 65.9205L3.52293 10.7657Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10170"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function k({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10181)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.3176 14.6705C1.88439 9.71881 5.54731 5.35352 10.499 4.92031L74.9606 -0.719357C77.7924 -0.967105 80.3366 0.794636 81.185 3.38441L12.8314 9.36458C8.98009 9.70152 6.13115 13.0967 6.4681 16.948L10.3685 61.53L7.72221 60.9899C6.90554 60.8233 6.29563 60.1395 6.22298 59.3092L2.3176 14.6705ZM13.0928 12.3532L15.0852 12.1789L81.6029 6.35932L83.1972 6.21983C86.4983 5.93102 89.4085 8.37296 89.6973 11.6741L93.3699 53.6516C93.7502 57.9988 89.453 61.4325 85.1642 60.627C80.8923 59.8246 75.5894 59.2269 70.3662 59.6838C64.4909 60.1979 58.7686 63.3152 53.0827 66.4127C47.4685 69.4711 41.8899 72.5101 36.2345 73.0049C29.1375 73.6258 21.8422 71.9786 17.6488 70.7666C15.4459 70.1298 13.96 68.1595 13.7601 65.8752L13.4347 62.1558L9.63099 18.679L9.45668 16.6866C9.26414 14.4858 10.8921 12.5457 13.0928 12.3532Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10181"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function D({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_1508_10194)"},n.createElement("path",{d:"M13.5958 79.9017C8.77167 80.3237 5.46072 75.1516 7.86364 70.9473L21.5019 47.0847C22.744 44.9115 22.5064 42.1954 20.9058 40.2709L3.33102 19.1391C0.234531 15.4159 2.59704 9.74744 7.42117 9.32538L90.1645 2.08628C92.2987 1.89955 94.3706 2.86499 95.6004 4.61925L115.109 32.4478C116.341 34.205 116.541 36.4863 115.633 38.4307L101.253 69.2241C100.346 71.1653 98.4734 72.4758 96.3391 72.6626L13.5958 79.9017Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_1508_10194"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function M({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_2094_1753)"},n.createElement("path",{d:"M16.731 20.0212C13.2433 16.3882 7.10166 18.409 6.4527 23.4032L1.37881 62.4502C0.884517 66.2541 4.03759 69.5386 7.85853 69.1999L47.08 65.7235C52.0965 65.2788 54.3663 59.2248 50.8786 55.5917L46.4318 50.9596L85.863 13.1058C88.2534 10.811 88.331 7.01278 86.0361 4.62231L69.0925 -13.0273C66.7977 -15.4178 62.9995 -15.4953 60.609 -13.2005L21.1778 24.6533L16.731 20.0212Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2094_1753"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function F({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_2094_1725)"},n.createElement("path",{d:"M52.9651 15.8477L35.2998 41.0764L59.9709 58.3513C64.1126 51.7654 65.9172 43.6796 64.4598 35.4144C63.0477 27.4063 58.8158 20.6037 52.9651 15.8477ZM49.7126 13.5191L32.0232 38.7821L6.79163 21.1147C11.5638 14.9703 18.5448 10.5091 26.81 9.05173C35.0608 7.59689 43.133 9.39265 49.7126 13.5191ZM4.53573 24.4182L29.7289 42.0587L12.4783 66.6951C6.35043 61.9235 1.90212 54.9524 0.447277 46.7016C-0.962241 38.7078 0.67945 30.8817 4.53573 24.4182ZM15.779 68.955C22.2492 72.8262 30.089 74.4763 38.0971 73.0642C46.0909 71.6547 52.8835 67.4354 57.6382 61.601L33.0055 44.353L15.779 68.955Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2094_1725"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function x({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_2094_1739)"},n.createElement("path",{d:"M28.644 8.74898L34.0412 39.3575L64.2193 34.0363C62.5252 26.3602 58.0606 19.2724 51.1138 14.4082C44.3027 9.63898 36.299 7.84315 28.644 8.74898Z",fill:e}),n.createElement("path",{d:"M25.4365 9.29133L30.8376 39.9224L0.206747 45.3234C-0.826765 37.5308 0.944422 29.3435 5.80863 22.3967C10.6728 15.45 17.7605 10.9854 25.4365 9.29133Z",fill:e}),n.createElement("path",{d:"M0.79417 48.523L31.4025 43.126L36.7236 73.3038C28.9311 74.3373 20.7439 72.5661 13.7972 67.7019C6.98606 62.9327 2.56115 56.0261 0.79417 48.523Z",fill:e}),n.createElement("path",{d:"M39.9232 72.7164C47.4263 70.9495 54.3331 66.5246 59.1023 59.7134C63.8715 52.9023 65.6673 44.8987 64.7616 37.2438L34.606 42.5611L39.9232 72.7164Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2094_1739"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function U({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_2094_1770)"},n.createElement("path",{d:"M16.7681 5.48015C8.61136 6.30146 2.66482 13.5796 3.48613 21.7363L5.92497 45.9576C6.74628 54.1143 14.0244 60.0609 22.1811 59.2396L22.4765 59.2098L23.2086 66.48C23.4012 68.393 25.6685 69.2962 27.1238 68.0396L39.3133 57.5145L68.2606 54.5998C76.4174 53.7785 82.3639 46.5004 81.5426 38.3436L79.1038 14.1224C78.2825 5.96563 71.0043 0.01909 62.8476 0.840394L16.7681 5.48015Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2094_1770"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function B({color:e="#699BF7"}){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_2094_1787)"},n.createElement("path",{d:"M4.01281 14.3118C3.61202 11.0224 5.95368 8.03096 9.24306 7.63016L9.73939 7.56969L10.5256 14.022L4.07329 14.8081L4.01281 14.3118ZM4.43614 17.7861L12.7213 85.7832C13.122 89.0726 16.1135 91.4143 19.4029 91.0135L19.8992 90.953L10.8884 16.9999L4.43614 17.7861ZM13.8664 16.6371L22.8772 90.5902L106.757 80.3698C110.046 79.969 112.388 76.9776 111.987 73.6882L103.702 5.69107L13.8664 16.6371ZM103.339 2.71309L103.279 2.21676C102.878 -1.07262 99.8864 -3.41428 96.597 -3.01349L12.7174 7.20684L13.5035 13.6591L103.339 2.71309Z",fill:e})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2094_1787"},n.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function V(){return n.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0_5859_244544)"},n.createElement("g",{clipPath:"url(#clip1_5859_244544)"},n.createElement("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"#2F2746"}),n.createElement("rect",{x:"12.5732",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.5732 25.3755)",fill:"#514670"}),n.createElement("rect",{x:"23.4062",y:"34.8961",width:"32",height:"6",transform:"rotate(-15 23.4062 34.8961)",fill:"#514670"}),n.createElement("rect",{x:"26.5122",y:"46.4872",width:"32",height:"6",transform:"rotate(-15 26.5122 46.4872)",fill:"#514670"}),n.createElement("rect",{x:"21.8906",y:"60.1488",width:"6",height:"6",transform:"rotate(-15 21.8906 60.1488)",fill:"#514670"}))),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_5859_244544"},n.createElement("rect",{width:"40",height:"72",fill:"white"})),n.createElement("clipPath",{id:"clip1_5859_244544"},n.createElement("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"white"}))))}},614766:(e,t,r)=>{r.d(t,{j:()=>i});var n=r(407908);function i(){return(0,n.v9)(e=>{var t;let r=(null==(t=null==e?void 0:e.openFile)?void 0:t.votingSessions)||null;return null==r?void 0:r.find(e=>e.inProgress)})}},404518:(e,t,r)=>{r.d(t,{$q:()=>I,Fw:()=>w,Ub:()=>N,fO:()=>A,h$:()=>k,i:()=>S,kA:()=>R,oe:()=>L,sn:()=>P,yU:()=>O,yd:()=>C});var n,i=r(652983),a=r(407908),o=r(337167),l=r(571529),s=r(970740),c=r(721127),d=r(493359),u=r(706039),p=r(158774),m=r(961215),h=r(761767),_=r(841017),g=r(614860),f=r(787618),E=r(88938),y=r(614543),v=r(242153),b=r(614766);function I(e){let t=(0,s.t)("voting.modal.voting_setup_responsive_placeholder_prompt",{numVotes:e.userVoteLimit});return e.title||t}let T=()=>!((0,l.Dv)()||(0,l.dB)()),w=()=>{let e=C(),t=!!(0,b.j)(),r=T()&&("eligible"===e||"eligibleWithUpgrade"===e),[n,a]=i.useState(t&&r);return i.useEffect(()=>{if(!t){a(!1);return}r&&a(!0)},[t,r]),r||n};var S=((n=S||{}).FEATURE_DISABLED="featureDisabled",n.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",n.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",n.ELIGIBLE="eligible",n);function C(){let e=(0,a.v9)(e=>e.openFile),t=(0,a.v9)(t=>e&&e.teamId?t.teams[e.teamId]:null),r=(0,a.v9)(e=>e.isFreeUser),n=(0,d.bI)((null==e?void 0:e.key)||"").enabled,i=null==e?void 0:e.isTryFile,o=!!e&&(e.canEdit||n);return i||!o?"featureDisabled":e.parentOrgId?"eligible":t?(0,_.cU)(t)?"eligible":"eligibleWithUpgrade":r?"eligibleWithUpgrade":"eligibleWithMoveFileToPaidTeam"}function O(){var e;let t=(0,a.v9)(e=>e.mirror.appModel.votingSessionInfo),r=p.ld.getUserId(),n=r&&(null==(e=t.userIdToVoteStampIds[r])?void 0:e.length)||0;return t.userVoteLimit-n}function A(e){return Object.values(e.userIdToNodeVotes).reduce((e,t)=>e+t.length,0)}function N(e){let t=e.reduce((e,t)=>{let r=A(t),n=e.voteCount;return r<n?e:r>n?{voteCount:r,nodes:[t]}:{voteCount:n,nodes:[...e.nodes,t]}},{voteCount:0,nodes:[]});return new Set(t.nodes.map(e=>e.guid))}function L(e){return function(t,r){return t===e?-1:r===e?1:t.localeCompare(r)}}function P(){let e=(0,a.v9)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,o.b9)(E.hr);i.useEffect(()=>{(e===m.Kb2.JOINED||e===m.Kb2.NOT_JOINED)&&t({type:"SET_VIEW",payload:E.Kt.DEFAULT})},[e,t])}function R(){let e=(0,a.v9)(e=>e.mirror.appModel.votingSessionInfo.votingStage),t=(0,o.b9)(E.hr),r=(0,y.lH)(),n=(0,y.RB)();i.useEffect(()=>{e!==m.Kb2.ENDED||r||(t({type:"VOTING_ENDED"}),(0,v.K)(n))},[e,t,r,n])}function k(e){let t=C(),r=(0,a.v9)(e=>{var t;return null==(t=e.selectedView)?void 0:t.editorType}),n=(0,a.v9)(e=>e.openFile),o=(0,a.v9)(e=>n&&n.teamId?e.teams[n.teamId]:null),l=(0,a.I0)();return i.useCallback(()=>{let n="whiteboard"===r?h.gg.WHITEBOARD:h.gg.DESIGN;if("eligibleWithUpgrade"===t)l(c.K4({type:f.yd,data:{team:o,resource:g.gx.VOTING,editorType:n,currentPlan:u.V.Plan.STARTER,upsellPlan:u.V.Plan.PRO}}));else if("eligible"===t)return e(),!0;return!1},[l,r,t,o,e])}},614543:(e,t,r)=>{r.d(t,{OC:()=>b,RB:()=>I,_i:()=>y,eV:()=>T,h1:()=>E,lH:()=>w});var n,i,a=r(652983),o=r(407908),l=r(807012),s=r(337167),c=r(571529),d=r(404330),u=r(961215),p=r(457753),m=r(187436),h=r(315997),_=r(614766),g=r(88938),f=r(242153),E=((n=E||{}).OPEN="meetings_panel_open",n.CLOSE="meetings_panel_close",n),y=((i=y||{}).MEETINGS_TOOLBAR="meetings_toolbar",i.MEETINGS_MINIMIZED="meetings_minimized",i.MEETINGS_PANEL="meetings_panel",i.INSERTS_MENU="inserts_menu",i.TEMPLATES_SIDEBAR="templates_sidebar",i.QUICK_ACTIONS="quick_actions",i.IPAD_MENU="ipad_menu",i);let v=()=>{let e=(0,l.zS)();return a.useCallback((t,r)=>{e(t,{source:r})},[e])},b=()=>{let e=(0,s.b9)(g.hr),t=v(),r=I();return a.useCallback(n=>{n&&t("meetings_panel_open",n.source),(0,f.K)(()=>{r()}),e({type:"OPEN"})},[t,e,r])},I=()=>{let e=(0,s.b9)(g.hr),t=v(),r=(0,o.I0)(),n=(0,o.v9)(e=>e.mirror.appModel.votingSessionInfo);return a.useCallback(i=>{i&&t("meetings_panel_close",i.source),e({type:"CLOSE"}),n.votingStage===u.Kb2.ENDED&&r(d.wx({votingStage:u.Kb2.NO_SESSION}))},[t,e,r,n])};function T(){var e,t;let r=(0,s.Dv)(h.iX),n=(0,o.v9)(e=>e.music),i=(0,_.j)(),a=(0,p.EK)(),l=null!=r.time&&0!==r.time.totalTimeMs,c=!!(null==(e=n.music)?void 0:e.selectedSongID)&&!(null==(t=n.music)?void 0:t.isPaused),d=[];return l&&d.push(g.jV.TIMER),a&&void 0!==i&&d.push(g.jV.VOTING),c&&d.push(g.jV.MUSIC),d}function w(){let e=(0,m.zD)(),t=(null==e?void 0:e.shouldOptimizeForIpadApp)||c.ZP.isIpad;return t}},616466:(e,t,r)=>{r.d(t,{$0:()=>f,Dg:()=>m,Jm:()=>T,Mo:()=>b,Ol:()=>S,g:()=>A,j5:()=>y,l2:()=>C,oW:()=>w,sK:()=>O,sh:()=>I,xw:()=>N,yZ:()=>L,z7:()=>_,zc:()=>v});var n=r(141757),i=r(970740),a=r(824801),o=r(961215),l=r(951261);function s(e,t,r){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,t])=>[t,e])),LIGHT_DISPLAY:t??e,DARK_DISPLAY:r??e}}let c=s(new Map([[o.I7V.BLACK,l.EFq],[o.I7V.GRAY_DARK,l.ycJ],[o.I7V.RED,l.rxm],[o.I7V.ORANGE,l.NIF],[o.I7V.YELLOW,l.U8U],[o.I7V.GREEN,l.mZL],[o.I7V.BLUE,l.dzA],[o.I7V.VIOLET,l.qrx],[o.I7V.WHITE,l.Q8e]]),void 0,new Map([[o.I7V.BLACK,l.Kh3],[o.I7V.GRAY_DARK,l.BgL],[o.I7V.BLUE,l.eC0],[o.I7V.VIOLET,l.WyP],[o.I7V.WHITE,l.I71],[o.I7V.RED,l.HYe],[o.I7V.ORANGE,l.sdA],[o.I7V.YELLOW,l.f1Q],[o.I7V.GREEN,l.K4i]])),d=s(new Map([[o.I7V.GRAY,l.$UP],[o.I7V.GRAY_LIGHT,l.euD],[o.I7V.RED_LIGHT,l.fgg],[o.I7V.ORANGE_LIGHT,l.s4T],[o.I7V.YELLOW_LIGHT,l.uGh],[o.I7V.GREEN_LIGHT,l.S5M],[o.I7V.BLUE_LIGHT,l.uvc],[o.I7V.VIOLET_LIGHT,l.PNU]]),void 0,new Map([[o.I7V.GRAY,l.BgL],[o.I7V.GRAY_LIGHT,l.VCs],[o.I7V.BLUE_LIGHT,l.WEE],[o.I7V.VIOLET_LIGHT,l.ozU],[o.I7V.RED_LIGHT,l.HDG],[o.I7V.ORANGE_LIGHT,l.A2d],[o.I7V.YELLOW_LIGHT,l.Htq],[o.I7V.GREEN_LIGHT,l.ZxS]])),u=s(new Map([[o.I7V.STICKY_GRAY,l.bbd],[o.I7V.STICKY_RED,l.pxC],[o.I7V.STICKY_ORANGE,l.$H5],[o.I7V.STICKY_YELLOW,l.JAg],[o.I7V.STICKY_GREEN,l.IDI],[o.I7V.STICKY_BLUE,l.S9D],[o.I7V.STICKY_VIOLET,l.WYH],[o.I7V.STICKY_PINK,l.dvp],[o.I7V.STICKY_GRAY_LIGHT,l.AFA]]),new Map([[o.I7V.STICKY_GRAY_LIGHT,l.YKu],[o.I7V.STICKY_GRAY,l.Zzn],[o.I7V.STICKY_BLUE,l.UVN],[o.I7V.STICKY_VIOLET,l.wXT],[o.I7V.STICKY_RED,l.NCY],[o.I7V.STICKY_PINK,l.wqq],[o.I7V.STICKY_ORANGE,l.P54],[o.I7V.STICKY_YELLOW,l.eI$],[o.I7V.STICKY_GREEN,l.tNV]]),new Map([[o.I7V.STICKY_GRAY_LIGHT,l.XLA],[o.I7V.STICKY_GRAY,l.p7d],[o.I7V.STICKY_BLUE,l.XlT],[o.I7V.STICKY_VIOLET,l.sY_],[o.I7V.STICKY_RED,l.z_2],[o.I7V.STICKY_PINK,l.VsZ],[o.I7V.STICKY_ORANGE,l.kC_],[o.I7V.STICKY_YELLOW,l.lvI],[o.I7V.STICKY_GREEN,l.pK8]])),p=s(new Map([[o.I7V.HIGHLIGHT_GRAY,l._ce],[o.I7V.HIGHLIGHT_RED,l.Its],[o.I7V.HIGHLIGHT_ORANGE,l.tWZ],[o.I7V.HIGHLIGHT_YELLOW,l.dKp],[o.I7V.HIGHLIGHT_GREEN,l.HKS],[o.I7V.HIGHLIGHT_BLUE,l.tS3],[o.I7V.HIGHLIGHT_VIOLET,l.u6w],[o.I7V.HIGHLIGHT_WHITE,l.n6G]]),new Map([[o.I7V.HIGHLIGHT_RED,l.U0x],[o.I7V.HIGHLIGHT_YELLOW,l.zgG],[o.I7V.HIGHLIGHT_GREEN,l.Iz_],[o.I7V.HIGHLIGHT_BLUE,l.AE7],[o.I7V.HIGHLIGHT_VIOLET,l.sgh],[o.I7V.HIGHLIGHT_ORANGE,l.T5M],[o.I7V.HIGHLIGHT_GRAY,l.aSu],[o.I7V.HIGHLIGHT_WHITE,l.Hdt]]),new Map([[o.I7V.HIGHLIGHT_RED,l.U0x],[o.I7V.HIGHLIGHT_YELLOW,l.zgG],[o.I7V.HIGHLIGHT_GREEN,l.Iz_],[o.I7V.HIGHLIGHT_BLUE,l.AE7],[o.I7V.HIGHLIGHT_VIOLET,l.sgh],[o.I7V.HIGHLIGHT_ORANGE,l.T5M],[o.I7V.HIGHLIGHT_GRAY,l.aSu],[o.I7V.HIGHLIGHT_WHITE,l.Hdt]])),m=new Map([[o.I7V.BLACK,"Black"],[o.I7V.WHITE,"White"],[o.I7V.GRAY_DARK,"Dark gray"],[o.I7V.GRAY,"Gray"],[o.I7V.GRAY_LIGHT,"Light gray"],[o.I7V.BLUE,"Blue"],[o.I7V.BLUE_LIGHT,"Light blue"],[o.I7V.VIOLET,"Violet"],[o.I7V.VIOLET_LIGHT,"Light violet"],[o.I7V.RED,"Red"],[o.I7V.RED_LIGHT,"Light red"],[o.I7V.ORANGE,"Orange"],[o.I7V.ORANGE_LIGHT,"Light orange"],[o.I7V.YELLOW,"Yellow"],[o.I7V.YELLOW_LIGHT,"Light yellow"],[o.I7V.GREEN,"Green"],[o.I7V.GREEN_LIGHT,"Light green"],[o.I7V.STICKY_GRAY_LIGHT,"Light gray"],[o.I7V.STICKY_GRAY,"Gray"],[o.I7V.STICKY_BLUE,"Blue"],[o.I7V.STICKY_VIOLET,"Violet"],[o.I7V.STICKY_RED,"Red"],[o.I7V.STICKY_PINK,"Pink"],[o.I7V.STICKY_ORANGE,"Orange"],[o.I7V.STICKY_YELLOW,"Yellow"],[o.I7V.STICKY_GREEN,"Green"],[o.I7V.HIGHLIGHT_RED,"Pink"],[o.I7V.HIGHLIGHT_YELLOW,"Yellow"],[o.I7V.HIGHLIGHT_GREEN,"Green"],[o.I7V.HIGHLIGHT_BLUE,"Blue"],[o.I7V.HIGHLIGHT_VIOLET,"Violet"],[o.I7V.HIGHLIGHT_ORANGE,"Orange"],[o.I7V.HIGHLIGHT_GRAY,"Gray"],[o.I7V.HIGHLIGHT_WHITE,"White"]]),h=[o.I7V.BLACK,o.I7V.GRAY_DARK,o.I7V.RED,o.I7V.ORANGE,o.I7V.YELLOW,o.I7V.GREEN,o.I7V.BLUE,o.I7V.VIOLET,o.I7V.WHITE],_=[o.I7V.GRAY,o.I7V.GRAY_LIGHT,o.I7V.RED_LIGHT,o.I7V.ORANGE_LIGHT,o.I7V.YELLOW_LIGHT,o.I7V.GREEN_LIGHT,o.I7V.BLUE_LIGHT,o.I7V.VIOLET_LIGHT],g=[o.I7V.BLACK,o.I7V.RED,o.I7V.ORANGE,o.I7V.YELLOW,o.I7V.GREEN,o.I7V.BLUE,o.I7V.VIOLET,o.I7V.WHITE],f=[o.I7V.STICKY_GRAY,o.I7V.STICKY_RED,o.I7V.STICKY_ORANGE,o.I7V.STICKY_YELLOW,o.I7V.STICKY_GREEN,o.I7V.STICKY_BLUE,o.I7V.STICKY_VIOLET,o.I7V.STICKY_PINK,o.I7V.STICKY_GRAY_LIGHT],E=[o.I7V.HIGHLIGHT_GRAY,o.I7V.HIGHLIGHT_RED,o.I7V.HIGHLIGHT_ORANGE,o.I7V.HIGHLIGHT_YELLOW,o.I7V.HIGHLIGHT_GREEN,o.I7V.HIGHLIGHT_BLUE,o.I7V.HIGHLIGHT_VIOLET,o.I7V.HIGHLIGHT_WHITE],y=[l.EFq,l.euD,l.rxm,l.U8U,l.mZL].map(e=>a.Z.parse(e));function v(){let e=b("base"),t=S(o.I7V.GRAY_LIGHT,"baseLight")||n.E5;return[...e.slice(0,2),t,...e.slice(2)]}function b(e){switch(e){case"widget":case"base":return h.map(e=>S(e,"base"));case"baseLight":return _.map(e=>S(e,"baseLight"));case"sticky":return f.map(e=>S(e,"sticky"));case"highlight":return E.map(e=>S(e,"highlight"))}}function I(){return g.map(e=>S(e,"base"))}let T=e=>"base"===e;function w(e,t,r=o.I7V.CUSTOM){let n;let i=a.Z.format(e);switch(t){case"widget":case"base":n=c.CSS_TO_COLOR.get(i);break;case"baseLight":n=d.CSS_TO_COLOR.get(i);break;case"sticky":n=u.CSS_TO_COLOR.get(i);break;case"highlight":n=p.CSS_TO_COLOR.get(i)}return n??r}function S(e,t){let r;switch(t){case"widget":case"base":r=c.COLOR_TO_CSS.get(e);break;case"baseLight":r=d.COLOR_TO_CSS.get(e);break;case"sticky":r=u.COLOR_TO_CSS.get(e);break;case"highlight":r=p.COLOR_TO_CSS.get(e)}return r?a.Z.parse(r):void 0}function C(e,t="base",r=(0,i.t)("whiteboard.colors.custom")){let n=Array.isArray(e)?e[0]:e,a=w(n,t);return"base"===t&&a===o.I7V.CUSTOM&&(a=w(n,"baseLight")),function(e){switch(e){case o.I7V.BLACK:return(0,i.t)("whiteboard.colors.black");case o.I7V.WHITE:return(0,i.t)("whiteboard.colors.white");case o.I7V.GRAY_DARK:return(0,i.t)("whiteboard.colors.dark_gray");case o.I7V.GRAY:return(0,i.t)("whiteboard.colors.gray");case o.I7V.GRAY_LIGHT:return(0,i.t)("whiteboard.colors.light_gray");case o.I7V.BLUE:return(0,i.t)("whiteboard.colors.blue");case o.I7V.BLUE_LIGHT:return(0,i.t)("whiteboard.colors.light_blue");case o.I7V.VIOLET:return(0,i.t)("whiteboard.colors.violet");case o.I7V.VIOLET_LIGHT:return(0,i.t)("whiteboard.colors.light_violet");case o.I7V.RED:return(0,i.t)("whiteboard.colors.red");case o.I7V.RED_LIGHT:return(0,i.t)("whiteboard.colors.light_red");case o.I7V.ORANGE:return(0,i.t)("whiteboard.colors.orange");case o.I7V.ORANGE_LIGHT:return(0,i.t)("whiteboard.colors.light_orange");case o.I7V.YELLOW:return(0,i.t)("whiteboard.colors.yellow");case o.I7V.YELLOW_LIGHT:return(0,i.t)("whiteboard.colors.light_yellow");case o.I7V.GREEN:return(0,i.t)("whiteboard.colors.green");case o.I7V.GREEN_LIGHT:return(0,i.t)("whiteboard.colors.light_green");case o.I7V.STICKY_GRAY_LIGHT:return(0,i.t)("whiteboard.colors.light_gray");case o.I7V.STICKY_GRAY:return(0,i.t)("whiteboard.colors.gray");case o.I7V.STICKY_BLUE:return(0,i.t)("whiteboard.colors.blue");case o.I7V.STICKY_VIOLET:return(0,i.t)("whiteboard.colors.violet");case o.I7V.STICKY_RED:return(0,i.t)("whiteboard.colors.red");case o.I7V.STICKY_PINK:return(0,i.t)("whiteboard.colors.pink");case o.I7V.STICKY_ORANGE:return(0,i.t)("whiteboard.colors.orange");case o.I7V.STICKY_YELLOW:return(0,i.t)("whiteboard.colors.yellow");case o.I7V.STICKY_GREEN:return(0,i.t)("whiteboard.colors.green");case o.I7V.HIGHLIGHT_RED:return(0,i.t)("whiteboard.colors.pink");case o.I7V.HIGHLIGHT_YELLOW:return(0,i.t)("whiteboard.colors.yellow");case o.I7V.HIGHLIGHT_GREEN:return(0,i.t)("whiteboard.colors.green");case o.I7V.HIGHLIGHT_BLUE:return(0,i.t)("whiteboard.colors.blue");case o.I7V.HIGHLIGHT_VIOLET:return(0,i.t)("whiteboard.colors.violet");case o.I7V.HIGHLIGHT_ORANGE:return(0,i.t)("whiteboard.colors.orange");case o.I7V.HIGHLIGHT_GRAY:return(0,i.t)("whiteboard.colors.gray");case o.I7V.HIGHLIGHT_WHITE:return(0,i.t)("whiteboard.colors.white");default:return}}(a)??r}function O(e,t="base"){let r=e+1;switch(t){case"highlight":return(0,i.t)("whiteboard.colors.palette.highlight",{index:r});case"baseLight":return(0,i.t)("whiteboard.colors.palette.light",{index:r});default:return(0,i.t)("whiteboard.colors.palette.base",{index:r})}}function A(e,t="rgba(255, 255, 255, 1)"){return c.COLOR_TO_CSS.get(e)??t}function N(e,t="rgba(255, 255, 255, 1)"){return u.COLOR_TO_CSS.get(e)??t}function L(e,t,r){let n;let i={...e,a:1},l=w(i,t);if(l===o.I7V.NONE||l===o.I7V.CUSTOM)return a.Z.format(i);switch(t){case"baseLight":n=d;break;case"sticky":n=u;break;case"highlight":n=p;break;default:n=c}return("light"===r?n.LIGHT_DISPLAY.get(l):n.DARK_DISPLAY.get(l))??a.Z.format(i)}},177303:(e,t,r)=>{r.d(t,{HG:()=>D,c4:()=>k});var n=r(652983),i=r(87608),a=r.n(i),o=r(141757),l=r(172497),s=r(365653),c=r(716250),d=r(204829),u=r(564380),p=r(680356),m=r(970740),h=r(824801),_=r(231690),g=r(809340),f=r(336980),E=r(225468),y=r(382476),v=r(414413),b=r(440153),I=r(406446),T=r(199593),w=r(458169),S=r(616466),C=r(821874),O=r(332224),A=r(880950),N=r(640458);let L=(0,l.F)(O.VRt);function P(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let R={right:w.ws,center:void 0,left:w.TB};function k({value:e,onColorChange:t,onOpacityChange:r,recordingKey:i,paletteType:a,additionalContentsTop:o,buttonSize:l,buttonBackground:c,buttonClassName:d,buttonCaretType:u,dropperDisabled:p,optionSize:m,customOpacity:h,ariaLabel:_,alignment:g,inlineButtonTooltip:E,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:b,isColorPopoverOpen:I,setIsColorPopoverOpen:T,positionX:w,positionY:C}){let O=(0,s.c)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),A={name:"figjam_node_color_change",properties:{node_type:O&&1===Object.keys(O).length&&Object.keys(O).pop()||"MIXED",...O}},{variations:N,type:L}=(0,y.tw)(),P=L===f.Fo.DEFAULT?(0,S.Mo)(a):N[a].slice(),R=P.map((e,t)=>({option:e,tooltip:L===f.Fo.DEFAULT?(0,S.l2)(e,a):(0,S.sK)(t,a)})),k=R.length;if("base"===a){let e=L===f.Fo.DEFAULT?(0,S.Mo)("baseLight"):N.baseLight,t=e.map((e,t)=>({option:e,tooltip:L===f.Fo.DEFAULT?(0,S.l2)(e,"baseLight"):(0,S.sK)(t,"baseLight")}));R.push(...t)}return n.createElement(D,{options:R,value:{option:e},onColorChange:e=>t(e.option),onOpacityChange:r,recordingKey:i,paletteType:a,numColumns:k,analytics:A,additionalContentsTop:o,buttonSize:l,buttonBackground:c,buttonClassName:d,buttonCaretType:u,dropperDisabled:p,optionSize:m,customOpacity:h,alignment:g,ariaLabel:_,inlineButtonTooltip:E,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:b,isColorPopoverOpen:I,setIsColorPopoverOpen:T,positionX:w,positionY:C})}function D({value:e,onColorChange:t,onOpacityChange:r,recordingKey:i,additionalContentsTop:a,additionalContentsBottom:l,options:s,inlineButtonTooltip:c,paletteType:u,numColumns:p,buttonSize:h,buttonBackground:_="dark",buttonClassName:g,buttonCaretType:f="down",dropperDisabled:E,optionSize:y,isDesignInlineMenu:b,analytics:w,customOpacity:C,ariaLabel:O,alignment:A,positionX:N,positionY:L,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:R,isColorPopoverOpen:k,setIsColorPopoverOpen:D,shouldCustomColorPopoverCloseOnEscape:F,hasNonWhiteboardColors:x,onlyShowCustomColorPopover:U,isCustomColorSwatchShown:B,customOptions:V,customOptionsHeader:G}){let[H,W]=n.useState(!1),K=Array.isArray(e.option)?e.option[0]:e.option,z={...K??o.Cj};return C&&(z.a=C),n.useEffect(()=>{D&&D(H)},[H,D]),U||H?n.createElement(T.n,{target:n.createElement(v.zx,{onClick:()=>W(!H),caret:f,active:"light"===_?"LOUD":"NORMAL",recordingKey:(0,d.ar)(i,"colorSelectorButton"),className:g,tooltip:c||(0,S.l2)(e.option,u,(0,m.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.l2)(e.option,u).toLocaleLowerCase()})},n.createElement(I.gl,{size:h,value:e.option,paletteType:u,background:_})),color:z,isOpen:H,onColorChange:e=>{t({option:e})},onOpacityChange:e=>{r&&r(e)},onClose:()=>{W(!1)},theme:"dark",analytics:w,recordingKey:(0,d.ar)(i,"customColorPopover"),showOpacity:null!=C,alignment:A,positionX:N,positionY:L,dropperDisabled:E,shouldCloseOnEscape:F}):n.createElement(M,{value:e,options:s,onColorChange:t,onCustomColor:()=>W(!0),additionalContentsTop:a,additionalContentsBottom:l,inlineButtonTooltip:c,paletteType:u,buttonSize:h,buttonClassName:g,buttonCaretType:f,buttonBackground:_,optionSize:y,isDesignInlineMenu:b,numColumns:p,analytics:w,recordingKey:i,ariaLabel:O,alignment:A,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:R,positionX:N,positionY:L,isColorPopoverOpen:k,setIsColorPopoverOpen:D,hasNonWhiteboardColors:x,isCustomColorSwatchShown:B,customOptions:V,customOptionsHeader:G})}function M({value:e,onColorChange:t,onCustomColor:r,recordingKey:i,additionalContentsTop:l,additionalContentsBottom:s,options:f,inlineButtonTooltip:T,paletteType:w,buttonSize:O,buttonClassName:k,buttonCaretType:D="down",buttonBackground:M="dark",optionSize:F,isDesignInlineMenu:x,numColumns:U,analytics:B,ariaLabel:V,alignment:G="center",palettePickerPopoverWrapper:H,shouldDisableDataTooltip:W,positionX:K,positionY:z,isColorPopoverOpen:Z,setIsColorPopoverOpen:Y,hasNonWhiteboardColors:j,isCustomColorSwatchShown:$,customOptions:q,customOptionsHeader:X}){let J=n.useRef((0,p.k)()),Q=n.useRef((0,p.k)()),ee=P(e.option),et=(0,y.DM)(ee,w),er=(0,y.DM)(ee,"baseLight")&&"base"===w,en=j?function(e,t){try{return!t.find(t=>{let r=P(t.option),n=P(e.option);return r&&n&&(0,o.l7)(r,n)})}catch(e){return console.error(e),!1}}(e,f):et&&er,ei=()=>{Z&&r()},ea=t=>en?n.createElement(u.sq,{id:Q.current,...W?{}:{"data-tooltip-type":E.fR.TEXT,"data-tooltip":(0,m.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:a()(N.W,{[A.B]:t}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),recordingKey:(0,d.ar)(i,"colorSelectorCustomOption"),onClick:(0,c.BZ)().figjam_inline_menu_on_pointer?void 0:r,onPointerUp:(0,c.BZ)().figjam_inline_menu_on_pointer?ei:void 0},n.createElement(I.gl,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:w,background:"dark",size:"medium"})):n.createElement(u.sq,{id:Q.current,key:"custom-color",recordingKey:(0,d.ar)(i,"colorSelectorCustomOption"),onClick:(0,c.BZ)().figjam_inline_menu_on_pointer?void 0:r,onPointerUp:(0,c.BZ)().figjam_inline_menu_on_pointer?ei:void 0,role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),className:a()(N.W,{[A.B]:t})},n.createElement(I.BP,{shouldDisableDataTooltip:W}));return n.createElement(b.qy,{value:e,onChange:e=>{t(e),B&&g.Tx.trackFromFullscreen("figjam_node_color_change",{source:"default",color:_.Co.format(e.option),...B.properties})},options:f,renderOption:({value:e,onClick:t,id:r,isSelected:o,isFocused:l})=>n.createElement(u.sq,{id:r,...W?{}:{"data-tooltip-type":E.fR.TEXT,"data-tooltip":e.tooltip||(0,S.l2)(e.option,w),"data-tooltip-show-above":!0},className:a()(N.W,{[A.B]:l}),key:h.Z.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,S.l2)(e.option,w),onClick:(0,c.BZ)().figjam_inline_menu_on_pointer?void 0:t,onPointerUp:(0,c.BZ)().figjam_inline_menu_on_pointer?e=>{Z&&t(e)}:void 0,recordingKey:(0,d.ar)(i,"colorSelectorOption",h.Z.format(e.option)),tabIndex:-1},n.createElement(I.gl,{value:e.option,selectionState:o?"selected":"unselected",paletteType:w,size:F,background:"dark"})),renderButton:({value:e,ref:t,onClick:r,onKeyDown:a,active:o,activeOptionId:l})=>n.createElement(v.zx,{role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.l2)(e.option,w).toLocaleLowerCase()}),onClick:(0,c.BZ)().figjam_inline_menu_on_pointer?void 0:r,onPointerDown:(0,c.BZ)().figjam_inline_menu_on_pointer?r:void 0,onKeyDown:a,ariaActiveDescendant:l,ariaControls:J.current,caret:D,active:o?"light"===M?"LOUD":"NORMAL":"NONE",recordingKey:(0,d.ar)(i,"colorSelectorButton"),tooltip:T||(0,S.l2)(e.option,w,(0,m.t)("whiteboard.inline_menu.color")),isDesignInlineMenu:x,isNewSubmenu:"light"===M,className:k},n.createElement(I.gl,{size:O,value:e.option,paletteType:w,background:M,ref:t})),optionEquality:(e,t)=>!(Array.isArray(e.option)||Array.isArray(t.option))&&(0,o.l7)(e.option,t.option),OptionWrapper:U?(0,I.vc)(U,L+"px",V,J.current):(0,I.lW)(f.length,L+"px",V,J.current),PopoverWrapper:H||b.zn,additionalOptions:(e=!1)=>n.createElement(C.F,{customOption:ea(e),paletteType:w,isCustomColorSwatchShown:$}),additionalOptionId:Q.current,additionalOptionOnChange:r,additionalContentsTop:l,additionalContentsBottom:s,positionX:K??R[G],positionY:z,onToggleMenuOpen:Y,customOptions:q,customOptionsHeader:X})}},402757:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(652983);function i({setMaxWidth:e,render:t}){let[r,i]=n.useState(new Map),a=n.useMemo(()=>r.size?Math.max(...r.values()):void 0,[r]);n.useLayoutEffect(()=>e(a),[a,e]);let o=n.useCallback((e,t)=>i(r=>{if(r.get(e)===t)return r;let n=new Map(r);return"number"==typeof t?n.set(e,t):n.delete(e),n}),[]);return n.createElement(n.Fragment,null,t({reportWidthOfValue:o}))}},414413:(e,t,r)=>{r.d(t,{Z0:()=>E,hU:()=>g,v2:()=>_,zx:()=>f});var n=r(652983),i=r(87608),a=r.n(i),o=r(716250),l=r(564380),s=r(435613),c=r(225468),d=r(442296),u=r(97710),p=r(403114);let m=r(527925),h=r(493068);function _({marginBottom:e,size:t,children:r,padding:i,menuRef:o,ariaLabel:l,role:s,tabIndex:c,ariaHidden:d,onBlurCapture:u,onFocus:m,propagateInputToFullscreen:h,testID:_,focusableDivTestId:g,darkModePreferred:f}){return n.createElement("div",{"aria-label":l,"aria-hidden":d,className:p.Y3,role:s,tabIndex:c,ref:o,onBlurCapture:u,onFocus:m,"data-fullscreen-intercept":h,"data-testid":g,"data-preferred-theme":f?"dark":void 0},n.createElement("div",{className:a()(p.Jz,{[p.yG]:"small"===t}),style:{paddingRight:i,paddingLeft:i,marginBottom:e},"data-testid":_},r))}let g=n.forwardRef((e,t)=>{let{id:r,svg:i,onClick:o,blurOnClick:l,onKeyDown:c,onMouseEnter:d,onMouseLeave:u,onPointerUp:m,onPointerDown:h,svgWidth:_,svgHeight:g,caret:E="none",size:y,tooltip:v,tooltipShortcutActionKey:b,tooltipType:I,resourceId:T,recordingKey:w,active:S="NONE",focused:C,disabled:O,svgStyle:A,buttonStyle:N,buttonChildrenStyle:L,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:R,ariaLabel:k,role:D,tabIndex:M,onboardingKey:F,testId:x}=e,{ariaActiveDescendant:U,ariaControls:B}=e;return n.createElement(f,{id:r,onClick:o,onKeyDown:c,onMouseEnter:d,onMouseLeave:u,onPointerUp:m,onPointerDown:h,blurOnClick:l,caret:E,ref:t,size:y,recordingKey:w,active:S,focused:C,disabled:O,className:a()({[p.C3]:O}),tooltip:v,tooltipShortcutActionKey:b,tooltipType:I,resourceId:T,buttonStyle:N,buttonChildrenStyle:L,isNewSubmenu:R,ariaLabel:k,ariaActiveDescendant:U,ariaControls:B,role:D,tabIndex:M,onboardingKey:F,testId:x},n.createElement(s.n,{svg:i,width:_,height:g,style:A,useOriginalSrcFills_DEPRECATED:P}))}),f=n.forwardRef((e,t)=>{let{id:r,children:i,onClick:_,onMouseEnter:g,onMouseLeave:f,onPointerUp:E,onPointerDown:y,onKeyDown:v,blurOnClick:b,disabled:I,caret:T="none",animateCaret:w=!1,size:S="large",buttonStyle:C,buttonChildrenStyle:O,isNewSubmenu:A,isDesignInlineMenu:N,recordingKey:L,active:P="NONE",focused:R,tooltip:k,tooltipShortcutActionKey:D,tooltipType:M,tooltipMaxWidth:F,resourceId:x,testId:U,className:B="",ariaLabel:V,role:G,tabIndex:H,onboardingKey:W}=e,{ariaControls:K,ariaActiveDescendant:z}=e,Z=(0,u.H5)(),Y=n.Children.toArray(i),j=1===Y.length&&"string"==typeof Y[0].props.children,$=k&&Z?M||c.fR.TEXT:void 0,q=(0,o.BZ)().ee_accessibility_inline_input,X="combobox"===G&&"NONE"!==P;return n.createElement(l.sq,{id:r,"aria-label":V??(0,d.Xw)({"data-tooltip-type":$??c.fR.TEXT,"data-tooltip":k??""}),"aria-controls":q?K:void 0,"aria-owns":q&&X?K:void 0,"aria-activedescendant":q&&X?z:void 0,"aria-pressed":"button"===G||null==G?"NONE"!==P:void 0,"aria-checked":"switch"===G?"NONE"!==P:void 0,"aria-expanded":"combobox"===G?"NONE"!==P:void 0,tabIndex:H??"option"===G?-1:0,role:G,onClick:I?void 0:_,onKeyDown:q&&!I?v:void 0,onMouseUp:!I&&b?e=>{e.currentTarget.blur()}:void 0,onMouseEnter:I?void 0:g,onMouseLeave:I?void 0:f,onPointerUp:I?void 0:E,onPointerDown:I?void 0:y,className:a()({[p.LI]:!0,[p.SB]:(0,o.BZ)().ee_accessibility_inline_css,[p.hz]:A,[p.Un]:N,[p.XP]:"none"!==T&&!!i,[p.Hf]:"none"!==T&&!i,[p.yG]:"small"===S,[p.B9]:"SOFT"===P,[p.gr]:"NORMAL"===P,[p.xK]:"LOUD"===P,[p.vh]:j,[p.N3]:!I,[p.gF]:R,[B]:!!B}),style:C,forwardedRef:t,recordingKey:L,"data-resource-id":x||void 0,"data-tooltip-show-above":!0,"data-tooltip-type":$,"data-tooltip-max-width":F,"data-tooltip-shortcut-key":D,"data-tooltip":k,"data-fullscreen-intercept":null!=v&&q?void 0:"true","data-onboarding-key":W,dataTestId:U},n.createElement("div",{className:a()({[p.wI]:j,[p.lt]:!j,[p.Un]:N,[p.yG]:"small"===S}),style:O},i),"none"!==T&&n.createElement(s.n,{className:a()({[p.Ud]:!0,[p.y1]:w,[p.S5]:w&&"LOUD"===P}),svg:"up"===T?h:m}))});function E({size:e="tall",margin:t}){return n.createElement("div",{className:p.kr,style:{height:"tall"===e?40:28,marginLeft:t,marginRight:t}})}},440153:(e,t,r)=>{r.d(t,{$r:()=>_,SZ:()=>f,cU:()=>g,qy:()=>y,zn:()=>E});var n,i=r(652983),a=r(335863),o=r(716250),l=r(810373),s=r(361763),c=r(680356);r(594619);var d=r(158774),u=r(393357),p=r(414413),m=r(318343),h=r(501564),_=((n=_||{}).fontFamilyControl="fontFamilyControl",n);function g(e,t){return function({children:r}){return i.createElement("div",{id:t,role:"listbox","aria-label":e,tabIndex:-1,className:h.xI},r)}}function f({children:e}){return i.createElement(i.Fragment,null,e)}function E({children:e,padding:t}){return i.createElement(p.v2,{padding:t},i.createElement("div",{className:h.i3},e))}function y({value:e,onChange:t,options:r,renderOption:n,renderButton:p,optionEquality:h,OptionWrapper:_=g(),additionalOptions:f,additionalOptionId:y,additionalOptionOnChange:v,additionalContentsTop:b,additionalContentsBottom:I,PopoverWrapper:T=E,positionX:w,positionY:S,responsivePositionY:C,popoverClassName:O,onToggleMenuOpen:A,parentComponent:N,customOptions:L,customOptionsHeader:P,overrideMenuOpenState:R}){let k=(0,i.useRef)(null),[D,M]=(0,i.useState)(!1),F=R?R.isOpenOverride:D,x=R?R.setIsOpenOverride:M,[U,B]=(0,i.useState)(0),[V,G]=(0,i.useState)(!1),H=r.length+(L?L.length:0)+(null!=f?1:0),[W]=(0,i.useState)(()=>{let e=Array(H);for(let t=0;t<r.length;t++)e[t]=(0,c.k)();return null!=f&&(e[r.length]=y),e}),K=new a.S,[z,Z]=(0,i.useState)(!0);return i.useEffect(()=>{A&&A(F)},[F,A]),i.createElement(m.J,{target:p({value:e,ref:k,onKeyDown:e=>{var n;switch(e.keyCode){case l.sr.ESCAPE:F?x(!1):null==(n=e.currentTarget)||n.blur();break;case l.sr.ENTER:F&&(U>=0&&U<r.length?t(r[U],e):U===r.length&&f&&(null==v||v(e)));break;case l.sr.RIGHT_ARROW:case l.sr.LEFT_ARROW:case l.sr.UP_ARROW:case l.sr.DOWN_ARROW:if(!(0,l.MA)(e,0))break;if(G(!0),F&&H){let t=U,r=e.keyCode===l.sr.UP_ARROW||e.keyCode===l.sr.LEFT_ARROW?-1:1;(t+=r)>=H?t=0:t<0&&(t=H-1),B(t)}else F||x(!0);e.preventDefault(),e.stopPropagation();break;case l.sr.TAB:G(!1);break;case l.sr.C:case l.sr.V:case l.sr.X:(0,l.w$)(e)&&(d.Gr.triggerAction(e.keyCode===l.sr.C?"copy":e.keyCode===l.sr.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,u.cY)(e)}},onClick:()=>{G(!1),x(!F),N&&"fontFamilyControl"===N&&((0,s.rm)()?Z(!0):(Z(!1),K.reset(),K.scheduleOnce(()=>{Z(!0)},250)))},active:F,activeOptionId:null!=U?W[U]:void 0}),onClose:()=>{(0,o.BZ)().figjam_inline_menu_on_pointer&&N&&"fontFamilyControl"===N&&K.reset(),x(!1)},renderPopoverContents:a=>{let l=(r,i)=>{let a=e=>t(r,e),l=e=>{a(e),x(!1)};return n({value:r,id:W[i],onClick:(0,o.BZ)().figjam_inline_menu_on_pointer?e=>{(!N||"fontFamilyControl"!==N||z)&&l(e)}:l,isSelected:h?h(r,e):r===e,isFocused:V&&U===i})},s=r.map(l),c=null==L?void 0:L.map((e,t)=>l(e,t+s.length));return c?i.createElement(T,{side:a},b,i.createElement(_,null,s),P,i.createElement(_,null,c,null==f?void 0:f(V&&U===s.length+c.length)),I):i.createElement(T,{side:a},b,i.createElement(_,null,s,null==f?void 0:f(V&&U===s.length)),I)},isOpen:F,positionX:w,positionY:S,responsivePositionY:C,className:O})}},406446:(e,t,r)=>{r.d(t,{BP:()=>y,R7:()=>g,VI:()=>v,c3:()=>T,gl:()=>E,kU:()=>b,lW:()=>S,qg:()=>I,uT:()=>f,vc:()=>w});var n=r(652983),i=r(87608),a=r.n(i),o=r(204829),l=r(564380),s=r(518484),c=r(435613),d=r(805992),u=r(970740),p=r(21616),m=r(225468),h=r(616466),_=r(694597);let g=r(295799),f=r(452262),E=n.forwardRef(({value:e,paletteType:t,background:r="dark",size:i="medium",selectionState:o="unselected",swatchStyle:s,onClick:c,recordingKey:d,tooltip:u},p)=>{let g,f=null;return Array.isArray(e)&&2===e.length&&(f=n.createElement("div",{className:_.Sn,style:{background:(0,h.yZ)(e[1],t,r)},"data-testid":"colorCircle"})),g=Array.isArray(e)?e.length<=2&&e[0]?(0,h.yZ)(e[0],t,r):"rgba(255, 255, 255, 1)":(0,h.yZ)(e,t,r),n.createElement("div",{ref:p,className:a()({[_.mc]:!0,[_.hv]:"selected"===o,[_.Oj]:"selected_custom"===o&&"light"===r,[_.SW]:"selected_custom"===o&&"dark"===r,[_.bH]:"large"===i,[_.yG]:"small"===i,[_.PE]:"xsmall"===i})},n.createElement("div",{className:_.U6},n.createElement(l.yh,{className:a()(_.Vm,{[_.Ac]:"light"===r,[_.KS]:"dark"===r}),style:{background:g,...s},onClick:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?m.fR.TEXT:void 0,"data-tooltip":u,"data-testid":"colorCircle"}),f))});function y({onClick:e,swatchStyle:t,recordingKey:r,shouldDisableDataTooltip:i}){return n.createElement(l.yh,{...i?{}:{"data-tooltip-type":m.fR.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:_.mc,onClick:e,recordingKey:(0,o.ar)(r,"colorSelectorCustomOption")},n.createElement("div",{className:_.U6},n.createElement(l.yh,{className:a()(_.Ln,_.KS),style:t})))}function v({value:e,onClick:t,onPointerUp:r,swatchStyle:i,tooltip:o,fallbackSvg:l,tooltipOffsetY:s,dataTestId:c,size:u}){return n.createElement("div",{className:a()(_.mc,["large"===u&&_.bH])},n.createElement("div",{"data-tooltip-type":m.fR.TEXT,"data-tooltip":o,"data-tooltip-offset-y":s,"data-tooltip-show-above":!0,className:_.U6},n.createElement(d.f,{svg:e,className:a()(_.Vm,_.KS),style:{display:"flex",alignItems:"center",justifyContent:"center",...i},dataTestId:c,onClick:t,onPointerUp:r,fallbackSvg:l})))}let b=n.forwardRef(({value:e,size:t="medium",selectionState:r="unselected",swatchStyle:i,onClick:o,onPointerUp:s,recordingKey:c,tooltip:d},u)=>n.createElement("div",{ref:u,className:a()({[_.mc]:!0,[_.hv]:"selected"===r,[_.yG]:"small"===t})},n.createElement("div",{className:_.U6},n.createElement(l.yh,{className:a()(_.Vm,_.KS),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...i},onClick:o,onPointerUp:s,recordingKey:c,"data-tooltip-show-above":!0,"data-tooltip-type":d?m.fR.TEXT:void 0,"data-tooltip":d})))),I=n.forwardRef(({imagePaint:e,background:t,size:r="medium",selectionState:i="unselected",hovered:o,onClick:l,onMouseEnter:d,onMouseLeave:h,onPointerUp:f},E)=>{let[y,v]=n.useState(""),I=n.useCallback(e=>{let t=p.Km(e,new s.OW((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0}),r=t&&t.pixels&&t.pixelSize;if(r){let e=p.Ze(t.pixels,t.pixelSize);v(e)}},[]);return n.useEffect(()=>{e&&I(e)},[e,I]),n.createElement("div",{style:{position:"relative"},onMouseEnter:d,onMouseLeave:h,"data-tooltip-type":m.fR.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},n.createElement(b,{value:y,size:r,selectionState:i,onClick:l,onPointerUp:f,ref:E}),o&&n.createElement("div",{className:_.s3},n.createElement(c.n,{svg:g,style:{fill:"dark"===t?"white":void 0},className:a()({[_.Ru]:!0,[_.x]:"light"===t,[_.T6]:"dark"===t,[_.yG]:"small"===r})})))});function T({children:e,numColumns:t=4,columnWidth:r="1fr",gap:i=0,padding:a,ariaLabel:o,swatchGridRef:l,id:s}){let c=`repeat(${t}, ${r})`;return n.createElement("div",{className:_.UO,style:{gridTemplateColumns:c,gap:`${i}px`,padding:a},"aria-label":o,role:"listbox",tabIndex:-1,id:s,"data-fullscreen-intercept":!0,ref:l},e)}function w(e,t,r,i){return function({children:a}){return n.createElement(T,{numColumns:e,columnWidth:t,padding:8,ariaLabel:r,id:i},a)}}function S(e,t,r,i){let a;return a=e<6?e:6===e?3:e<=8?4:5,function({children:e}){return n.createElement(T,{numColumns:a,columnWidth:t,padding:8,ariaLabel:r,id:i},e)}}},458169:(e,t,r)=>{r.d(t,{tq:()=>y,Jr:()=>d,b$:()=>g,Mb:()=>f,iL:()=>u,VO:()=>E,Dc:()=>h,TB:()=>p,fP:()=>_,ws:()=>m});var n=r(652983),i=r(87608),a=r.n(i),o=r(814754),l=r(490875),s=r(496417),c=r(209006);function d({targetRect:e,targetRef:t,children:r,onClose:i,onMeasure:o,onMouseEnter:l,onMouseLeave:c,pointerEvents:d="none",style:p,offset:m=4,positionX:h=u,positionY:_=g,onPosition:f,frozen:E,setSizeChanged:v}){return n.createElement("div",{className:a()("window_positioner--positionerRoot--nDb0j",s.Hy,s.tJ),style:{pointerEvents:d}},n.createElement(y,{targetRect:e,targetRef:t,onClose:i,onMeasure:o,onMouseEnter:l,onMouseLeave:c,style:p,offset:m,positionX:h,positionY:_,onPosition:f,frozen:E,setSizeChanged:v},r))}let u=(e,t)=>e.x+e.width/2-t.width/2,p=(e,t)=>e.x,m=(e,t)=>e.x+e.width-t.width,h=(e,t,r)=>e.x-t.width-r,_=(e,t)=>e.x+e.width+t,g=(e,t,r)=>e.y-t.height-r,f=(e,t,r)=>e.height+e.y+r,E=(e,t)=>e.y+e.height/2-t.height/2;function y({targetRect:e,targetRef:t,children:r,onClose:i,onMeasure:a,onMouseEnter:s,onMouseLeave:d,style:p,offset:m=4,positionX:h=u,positionY:_=g,childRef:f,onPosition:E,frozen:y,setSizeChanged:v}){let[b,I]=n.useState({x:0,y:0}),[T,w]=n.useState(!1),S=n.useRef(null),C=n.useCallback(e=>{let t=0!==e.width||0!==e.height;w(t),a&&a(e),t||I({x:0,y:0})},[a]),O=(0,o.y)(S,C)??o.Q;(0,c.C)(i,{ignore:[null==t?void 0:t.current,S.current]});let A=(0,l.w)(T)&&T,N=(0,l.w)(O);n.useEffect(()=>v&&v(N),[v,N]);let{x:L,y:P}=b;(A||T&&!y)&&(L=h(e,O,m),P=_(e,O,m)),n.useEffect(()=>{I({x:L,y:P})},[L,P]);let{width:R,height:k}=O;return n.useEffect(()=>{T&&E&&E(L,P,{width:R,height:k},m)},[L,P,R,k,E,m,T]),n.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${L}px, ${P}px, 0)`,...p,...T?{}:{opacity:0}},onMouseEnter:s,onMouseLeave:d,ref:e=>{S.current=e,f&&f(e)}},r)}},229382:(e,t,r)=>{r.r(t),r.d(t,{SectionPresetsExperimentLoader:()=>m,showSectionPresetsTreatment:()=>u,useSectionPresetsExperimentLoader:()=>p});var n=r(652983),i=r(337167),a=r(571529),o=r(458324),l=r(70918),s=r(364404),c=r(425285);let d=(0,i.cn)(!1),u=(0,i.cn)(e=>e(d));function p(){let e;let t=(0,l.dO)(),{getConfig:r}=(0,o.it)("exp_figjam_section_presets"),p="whiteboard"===(0,c.fg)(),m=(0,i.Dv)(u),h=(0,s.L)();e=!!t&&!h&&!a.s2&&!!p&&r().get("show_treatment",!1),(0,n.useEffect)(()=>{e!==m&&i.n_.set(d,e)},[e,m])}function m(){return p(),n.createElement(n.Fragment,null)}},93421:(e,t,r)=>{r.d(t,{SW:()=>c,cW:()=>d,ex:()=>u});var n=r(111120),i=r(496417),a=r(852601),o=r(158774),l=r(948150);let s=["#FFC470","#DA9DFF","#D5EB97","#DA8167","#E9FAFF"];function c(e){return s[e%s.length]}function d(e,t,r){let n=e.find(e=>e.id===t);if(!n)return null;let i=n.shelf_content.find(e=>e.id===r);if(!i)return null;let o={type:l.W.HubFile,template:i,category:n.id};return(0,a.gA)(o)}function u(e,t){if(!e||!e.isSection||!o.Gr.isReady())return!1;let r=e.sectionPresetShelfId,a=e.sectionPresetTemplateId,l=e.name,s=e.hasSectionPresetWithEdits;return!!l&&(t(n.SP({type:i.IN,data:{sectionId:e.guid,sectionName:l,initialShelfId:r,initialTemplateId:a,showAlertOnSelect:s}})),!0)}},338162:(e,t,r)=>{r.d(t,{d:()=>l,k:()=>s});var n=r(652983),i=r(970740),a=r(507025),o=r(237386);let l=["diagram","meeting","brainstorm"],s={brainstorm:{displayName:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.display_name"}),headingFiller:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.heading_filler"}),description:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.description"}),listItemDescription:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.list_item_description"}),iconUrl:a.U.Brainstorm,iconPositionInHeading:"top",accentColor:"#f0e3ff",previewVideo:{url:a.F.Brainstorm.Preview,caption:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.preview_caption"}),alt:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.preview_alt"}),features:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.brainstorm.features"})},chapters:[o.ff.Templates,o.ff.Stickies,o.ff.CursorChat,o.ff.Stamps,o.ff.Widgets,o.ff.Voting],templateId:"1251669162688060313"},meeting:{displayName:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.display_name"}),headingFiller:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.heading_filler"}),description:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.description"}),listItemDescription:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.list_item_description"}),iconUrl:a.U.Meeting,iconPositionInHeading:"top",accentColor:"#e4ff97",previewVideo:{url:a.F.Meeting.Preview,caption:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.preview_caption"}),alt:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.preview_alt"}),features:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.meeting.features"})},chapters:[o.HJ.Templates,o.HJ.PhotoBooth,o.HJ.CursorChat,o.HJ.TimerAndMusic,o.HJ.Stickies,o.HJ.AtMentions],templateId:"1251668903176805272"},diagram:{displayName:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.display_name"}),headingFiller:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.heading_filler"}),description:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.description"}),listItemDescription:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.list_item_description"}),iconUrl:a.U.Diagram,iconPositionInHeading:"bottom",accentColor:"#fff2df",previewVideo:{url:a.F.Diagram.Preview,caption:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.preview_caption"}),alt:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.preview_alt"}),features:n.createElement(i.Tx,{id:"whiteboard.simulated_use_cases.diagram.features"})},chapters:[o.ku.ShapesAndConnectors,o.ku.AnnotateFlows,o.ku.ChangingShapeAndColor,o.ku.Sharing,o.ku.Comments],templateId:"1251668654050657175"}}},53797:(e,t,r)=>{r.d(t,{D6:()=>w,Hl:()=>P,Ks:()=>I,Ku:()=>E,Nc:()=>y,Nz:()=>C,Pr:()=>f,Yp:()=>M,cW:()=>k,dM:()=>O,dk:()=>_,e0:()=>T,gM:()=>v,jP:()=>R,lt:()=>A,n2:()=>S,oy:()=>D,pJ:()=>L,uI:()=>N,vU:()=>b,xN:()=>g,xm:()=>h});var n=r(337167),i=r(11802),a=r(536562),o=r(622003),l=r(338162),s=r(252032);let c=(0,n.cn)({type:"closed"}),d=(0,n.cn)(l.d[0]),u=(0,n.cn)(!1),p=(0,n.cn)(e=>l.d.filter(t=>e((0,a.n_)(`seen_use_case_${t}`)).data)),m=(0,n.cn)(e=>!!e((0,a.n_)("seen_help_menu_onboarding_tips")).data),h=(0,n.cn)(e=>e(c).type),_=(0,n.cn)(e=>e(d)),g=(0,n.cn)(e=>l.k[e(_)]),f=(0,n.cn)(e=>{let t=e(c);return"list"===t.type||"popup"===t.type||"chapter"===t.type?t.videoProgress:0}),E=(0,n.cn)(e=>{let t=e(c);return("list"===t.type||"popup"===t.type||"chapter"===t.type)&&t.autoCycle}),y=(0,n.cn)(e=>{let t=e(c);return"chapter"===t.type?t.chapterIndex:0}),v=(0,n.cn)(e=>{let t=e(c);return"chapter"===t.type&&t.enlargedVideo}),b=(0,n.cn)(e=>{let t=e(c);return("popup"===t.type||"chapter"===t.type)&&t.expanded}),I=(0,n.cn)(e=>{let t=e(c);return"tooltip"===t.type}),T=(0,n.cn)(null,(e,t,r)=>{t(C),t(d,l.d[0]),(0,s.g)({eventName:"opened",source:r})}),w=(0,n.cn)(null,(e,t,r)=>{let{disableEffects:n,source:i}=r,a=e(c);if("closed"===a.type)return;let o=()=>{i&&(0,s.g)({eventName:"exited",viewType:a.type,source:i})};if(!n){if(e(u)){t(D),t(M,!0);return}if(!e(m)){o(),t(c,{type:"tooltip"});return}}o(),t(c,{type:"closed"})}),S=(0,n.cn)(null,(e,t)=>{t(w,{disableEffects:!0,source:null})}),C=(0,n.cn)(null,(e,t)=>{t(c,{type:"list",videoProgress:0,autoCycle:!0})}),O=(0,n.cn)(null,(e,t,r,n=!0)=>{e(_)!==r&&(t(d,r),n&&(0,s.g)({eventName:"use_case_changed",useCase:r,viewType:e(h),autoCycle:e(E)}),("list"===e(h)||"popup"===e(h)||"chapter"===e(h))&&t(A,0))}),A=(0,n.cn)(null,(e,t,r)=>{let n=e(c);("list"===n.type||"popup"===n.type||"chapter"===n.type)&&t(c,{...n,videoProgress:r})}),N=(0,n.cn)(null,(e,t)=>{let r=e(c);("list"===r.type||"popup"===r.type||"chapter"===r.type)&&r.autoCycle&&t(c,{...r,autoCycle:!1})}),L=(0,n.cn)(null,(e,t)=>{let r=e(_),n=l.d.indexOf(r),i=(n+1)%l.d.length;t(O,l.d[i])}),P=(0,n.cn)(null,(e,t,r)=>{let n=e(o.DW),a=(0,i.uj)(n)===i.tf.POPUP_VIDEO;t(c,{type:"chapter",chapterIndex:0,videoProgress:0,expanded:!0,autoCycle:a,enlargedVideo:!1}),r&&t(u,!0)}),R=(0,n.cn)(null,(e,t,r)=>{let n=e(c),{chapters:i}=e(g),a=0<=r&&r<i.length;"chapter"===n.type&&a&&(t(c,{...n,chapterIndex:r}),t(A,0))}),k=(0,n.cn)(null,(e,t,r)=>{let n=e(c);"chapter"===n.type&&t(c,{...n,enlargedVideo:r})}),D=(0,n.cn)(null,(e,t)=>{let r=e(h),n=1===e(p).length;if(t(c,{type:"popup",expanded:n,autoCycle:!0,videoProgress:0}),"popup"!==r){let r=l.d.find(t=>!e((0,a.n_)(`seen_use_case_${t}`)).data)??l.d[0];t(O,r,!1)}t(u,!1)}),M=(0,n.cn)(null,(e,t,r)=>{let n=e(c);("popup"===n.type||"chapter"===n.type)&&t(c,{...n,expanded:r})})},252032:(e,t,r)=>{r.d(t,{g:()=>i});var n=r(600486);function i(e){(0,n.L9)("simulated_use_cases_event",e,{batchRequest:!1})}},900294:(e,t,r)=>{r.d(t,{uZ:()=>P,sI:()=>A,YO:()=>k,tN:()=>L,GD:()=>F,nN:()=>N,r_:()=>M,sA:()=>D});var n,i=r(652983),a=r(407908),o=r(444348),l=r(51550),s=r(9247),c=r(716250),d=r(337167),u=r(385431),p=r(955687),m=r(135458),h=r(493359),_=r(448694),g=r(961215),f=r(366721);function E(){let[e,t]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=e=>{if(-1===e[0]&&-1===e[1]){t(null);return}t(e)};return f.uS.on("action",e),()=>{f.uS.removeListener("action",e)}},[t]),e}var y=r(875343),v=r(271774),b=r(70918),I=r(312616),T=r(413810),w=r(996068),S=r(53797),C=r(984702),O=r(34731),A=((n=A||{})[n.TRUE=0]="TRUE",n[n.FALSE=1]="FALSE",n[n.LOADING=2]="LOADING",n);function N(){let e=(0,y.K)(),t=(0,a.v9)(e=>e.mirror.appModel.showUi),r=(0,a.v9)(e=>e.mirror.appModel.topLevelMode===g.bN1.LAYOUT),n=(0,a.v9)(e=>(0,T.lV)(e.selectedView)),l=(0,i.useMemo)(()=>new Date,[]),{createdAt:s,key:u}=(0,a.v9)(e=>e.openFile||{createdAt:null,key:null}),_=(0,i.useMemo)(()=>s&&3e5>=Math.abs(s.getTime()-l.getTime()),[s,l]),f=(0,a.v9)(e=>{var t,r,n;let i=null==(r=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:r.currentPage,a=null==(n=null==e?void 0:e.mirror)?void 0:n.sceneGraph,o=null==a?void 0:a.get(i);return o?!o.childrenNodes.length||o.childrenAreAllGhosts?0:1:2}),E=function(e,t){let r=(0,o.e)((0,I.p)("figjam_editor_onboarded")),n=(0,i.useMemo)(()=>r.current,[e,r]),a=(0,I.p)("figjam_browse_templates_modal_onboarded"),l=(0,I.p)("figjam_browse_templates_modal_onboarding_item_selected"),s=(0,b.dO)();return!!n||!!t&&!!a&&!l&&(0,p.E)("exp_figjam_starterkit_onboarding",s).defaultValue(!1).treatment("variant",!0).get()}(u,0===f),v=(0,m.DO)(),A=(0,h.nO)(),N=A.enabled?A.id:null,L=(0,O.m)(),P="closed"!==(0,d.Dv)(S.xm);if(P||L)return 1;let R=(0,C.U)();if(v){let e=localStorage.getItem((0,w.i4)(N));if(!(0,c.BZ)().exp_figjam_try_v3)return 1;if(!e)return 2;if(1!==f)return 0}return!E||R||n?1:e&&s?t&&r&&_?f:1:2}function L(e){let t=(0,l.C)(1===e);return 0===t}let P={marginLeft:40,marginRight:24,width:216};function R(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function k(e,t){let r=(0,v.Mz)({subscribeToUpdates_expensive:e}),n=(0,v.k$)(r),i=E();if(!e||!t||!i)return!1;if(r.zoomScale>=2)return!0;let a={x:n.x,y:n.y,width:280/r.zoomScale,height:n.height},o={x:-.5*Math.min(i[0],2432),y:-.5*Math.min(i[1],1212),width:i[0],height:i[1]};return R(a,o)}function D(e,t){let r=E(),n=(0,v.Mz)({subscribeToUpdates_expensive:e}),i=(0,v.k$)(n);if(!e||!t||!r)return!1;let a=function(e,t){let r=e.x+e.width/2,n=e.y+e.height/2;return{x:t*e.x+(1-t)*r,y:t*e.y+(1-t)*n,width:t*e.width,height:t*e.height}}({x:-.5*Math.min(r[0],2432),y:-.5*Math.min(r[1],1212),width:r[0],height:r[1]},1.5);return!R(i,a)}function M(e){let{fileKey:t,didUserCancel:r,showStarterKit:n}=e;(0,i.useEffect)(()=>{r&&(0,_.T6)({fileKey:t,text:"Close starter kit",triggeredFrom:"starter_kit"})},[t,r]);let a=(0,s.D)(n);(0,i.useEffect)(()=>{0===a&&1===n&&(0,_.T6)({fileKey:t,text:"Close starter kit implicit",triggeredFrom:"starter_kit"})},[t,a,n])}let F=(e,t,r)=>{let[n,a]=(0,i.useState)(!1),o=(0,l.C)(1===e);(0,i.useEffect)(()=>{(t||0!==o)&&!n&&(r(u.cB()),a(!0))},[e,o,n,r,t])}},516739:(e,t,r)=>{r.d(t,{Hv:()=>S,Rw:()=>w,Sq:()=>E,T6:()=>L,ch:()=>g,cy:()=>O,pm:()=>C,qW:()=>N,sZ:()=>T,v:()=>_,v2:()=>A,wg:()=>f});var n=r(337167),i=r(75388),a=r(961215),o=r(269075),l=r(393932),s=r(903358);let c=(0,n.cn)(null),d=(0,n.cn)(null),u=(0,n.cn)({x:0,y:0}),p=(0,n.cn)(null),m=(0,n.cn)(!1),h=(0,n.cn)(!1),_=(0,n.cn)(e=>e(d)),g=(0,n.cn)(e=>e(m)),f=(0,n.cn)(e=>e(h)),E=(0,n.cn)(e=>e(u)),y=(0,n.cn)(!1),v="new_preview",b=null;function I(){b&&b.abort(v),b=null}let T=(0,n.cn)(null,async(e,t,r,n)=>{let i=!e(m)&&(0,s.a)(r.template,e(d));if(e(h)||i||e(y))return!1;t(C),t(m,!0),t(c,n.previewManager),t(d,r.template),I();let o=(b||(b=new TaskController({priority:"background"})),b);function _(t){return scheduler.postTask(()=>!!((0,s.a)(r.template,e(d))&&e(l.k))&&(t(),!0),{signal:o.signal}).catch(e=>{if(e===v)return!1;throw e})}o.setPriority(n.priority);let g=e(c),f=(async()=>{try{let i=await e(L(r)),o=(null==g?void 0:g.nodeType)===a.Jqs.SECTION?g.options:null;if(!await _(()=>a.XZt.prepareTemplatePreview(i,o))||!await _(()=>a.XZt.insertTemplatePreview(n.moveViewportAfterPreview)))return!1;let l=a.XZt.getTemplatePreviewSize();return t(u,l),t(m,!1),!0}catch(n){throw(0,s.a)(r.template,e(d))&&t(C),n}})();return t(p,f),await f}),w=(0,n.cn)(null,async(e,t,r)=>{let n=e(p);if(!n||e(h))return!1;t(h,!0);try{if(!await n||!e(l.k))return!1;return await scheduler.postTask(()=>{o.y2.user("commit-figjam-template-preview",()=>a.XZt.commitTemplatePreview(r.selectTemplateAfterCommit,r.moveViewportAfterCommit))},{priority:r.priority}),t(d,null),t(y,!0),t(A),!0}finally{t(h,!1)}}),S=(0,n.cn)(null,(e,t)=>{t(y,!1),e(m)&&(I(),t(C))}),C=(0,n.cn)(null,(e,t)=>{t(d,null),t(p,null),t(m,!1),t(h,!1),e(l.k)&&a.XZt.clearTemplatePreview()}),O=(0,n.cn)(null,(e,t)=>{t(S),t(C)}),A=(0,n.cn)(null,(e,t)=>{t(c,null),a.XZt.clearSectionPreviewSupport()}),N={clearTemplatePreview(){n.n_.set(C)}},L=(0,n.xu)(e=>(0,n.cn)(async()=>await (0,i.Fe)(e)),(e,t)=>e.fileKey===t.fileKey&&e.fileVersion===t.fileVersion&&(0,s.a)(e.template,t.template))},680726:(e,t,r)=>{r.d(t,{C$:()=>d,IA:()=>c,PO:()=>p,RC:()=>m,XB:()=>u});var n=r(286206),i=r(117986),a=r(961215),o=r(269075),l=r(347712);let s=Object.create(null);async function c(e){var t;let r=await (0,l.f)(e,s);null==(t=a.iTB)||t.setWashiTapePresetPattern(r)}async function d(e,t){let r=await (0,l.f)(e,s);(0,o.y2)(t,"set-paint-from-washi-tape-preset",()=>{var e;return null==(e=a.iTB)?void 0:e.setWashiTapePresetPatternAndUpdateSelectedNodes(r)})}function u(e){if(e.image)return`https://static.figma.com/uploads/${e.image}`;throw Error(`Invalid washi tape ${e} has no image`)}function p(e){for(let t of e){let e=u(t);e&&(0,l.f)(e,s).catch(e=>{(0,n.Jz)(i.k.FIGJAM_CORE,e)})}}function m(e){let t=u(e);return(0,l.f)(t,s)}},380811:(e,t,r)=>{r.d(t,{C:()=>a,X:()=>i});var n=r(970740);let i=[{name:"w-purple-grid",image:"e8f28ec5039355c942bce9dd61f44dcd638451f9",label:"Graph-iti"},{name:"w-party",image:"089335580a69c785276a5ab39dd58fef8955279c",label:"Birthday party"},{name:"w-checkerboard",image:"65bcec2ad90b12e9dbe4ee53bc88de29e11109dc",label:"Gingham style"},{name:"w-star",image:"c2225d84b705c120a715d0bbd57d7632fd4b0b4b",label:"Starry night"},{name:"w-stripe",image:"71592dc10e91a87c21e4dd41ef0deb43a3ba5480",label:"Lemon lime"},{name:"w-frog",image:"277013045fb026a81e7bd812a35d37018945d308",label:"Lily pad-ding"},{name:"w-fruit",image:"227e1eec26d471e194f4feec632b2f791f0a2706",label:"Fruit salad"},{name:"w-sushi",image:"5e62eac33aa794bd0450c039a60ad0c42ee0881d",label:"On a roll"}];function a(e){switch(e.name){case"w-party":return(0,n.t)("whiteboard.washi_tapes.party");case"w-star":return(0,n.t)("whiteboard.washi_tapes.star");case"w-grid":return(0,n.t)("whiteboard.washi_tapes.grid");case"w-flower":return(0,n.t)("whiteboard.washi_tapes.flower");case"w-desert":return(0,n.t)("whiteboard.washi_tapes.desert");case"w-frog":return(0,n.t)("whiteboard.washi_tapes.frog");case"w-fruit":return(0,n.t)("whiteboard.washi_tapes.fruit");case"w-sushi":return(0,n.t)("whiteboard.washi_tapes.sushi");case"w-tree":return(0,n.t)("whiteboard.washi_tapes.tree");case"w-pride":return(0,n.t)("whiteboard.washi_tapes.pride");case"w-purple-grid":return(0,n.t)("whiteboard.washi_tapes.purple_grid");case"w-checkerboard":return(0,n.t)("whiteboard.washi_tapes.checkerboard");case"w-stripe":return(0,n.t)("whiteboard.washi_tapes.stripe");default:return(0,n.t)("whiteboard.washi_tapes.custom")}}},34731:(e,t,r)=>{r.d(t,{k:()=>l,m:()=>s});var n=r(970740),i=r(312616),a=r(3342),o=r(686688);function l(e){let t=(0,n.t)("whiteboard.inserts.use_cases_brainstorm_together"),r=(0,n.t)("whiteboard.inserts.use_cases_diagram_anything"),i=(0,n.t)("whiteboard.inserts.use_cases_run_a_meeting"),o=(0,n.t)("whiteboard.inserts.use_cases_lead_a_workshop");switch(e){case"design":return{id:"Whats New design control",title:t,resourceType:a.P.ALL};case"software-development":return{id:"Whats New software-development control",title:r,resourceType:a.P.ALL};case"product-management":return{id:"Whats New product-management control",title:i,resourceType:a.P.ALL};case"marketing":return{id:"Whats New marketing control",title:o,resourceType:a.P.ALL};case"user-research":return{id:"Whats New user-research control",title:o,resourceType:a.P.ALL};default:return{id:"Whats New other control",title:r,resourceType:a.P.ALL}}}function s(){let e=(0,i.p)("interacted_figjam_whats_new_v2_cta");return(0,o._n)(e)}},871432:(e,t,r)=>{r.d(t,{TG:()=>o,Fl:()=>l,EV:()=>E,PG:()=>h,dF:()=>y,M2:()=>_,hM:()=>g,om:()=>u,Hm:()=>d,Un:()=>p,hu:()=>m,by:()=>f,nI:()=>s,ZT:()=>c});var n=r(524261),i=r(242107);let a=new i.Z({name:"whiteboard",enforce:!1,dependencies:[],exports:["whiteboard_components"],friendFiles:[],routeHints:["fullscreen","whiteboard"]}),o=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,323497)).then(e=>e.AiModal),{loading:n.NY.NONE,error:n.NY.NONE}),l=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,435692)).then(e=>e.AiStatusBell),{loading:n.NY.NONE,error:n.NY.NONE}),s=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,269821)).then(e=>e.WhiteboardInlineMenu),{loading:n.NY.NONE,error:n.NY.NONE}),c=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,917539)).then(e=>e.WhiteboardInlineQuickAddMenu),{loading:n.NY.NONE,error:n.NY.NONE}),d=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,881344)).then(e=>e.PanZoomTooltip),{loading:n.NY.NONE,error:n.NY.NONE}),u=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,738040)).then(e=>e.MindmapQuickAddButtons),{loading:n.NY.NONE,error:n.NY.NONE}),p=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,229382)).then(e=>e.SectionPresetsExperimentLoader),{loading:n.NY.NONE,error:n.NY.NONE}),m=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,495437)).then(e=>e.SimulatedUseCasesFileBrowserEntrypoint),{loading:n.NY.NONE,error:n.NY.NONE}),h=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,603639)).then(e=>e.FigJamEmptyFileHelper),{loading:n.NY.NONE,error:n.NY.NONE}),_=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,898598)).then(e=>e.FigJamTemplatesSidebar),{loading:n.NY.NONE,error:n.NY.NONE}),g=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,91946)).then(e=>e.JoinVotingOverlay),{loading:n.NY.NONE,error:n.NY.NONE}),f=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,465898)).then(e=>e.VotePinsOverlay),{loading:n.NY.NONE,error:n.NY.NONE}),E=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,632106)).then(e=>e.DelightfulToolbarWithErrorBoundary),{loading:n.NY.NONE,error:n.NY.NONE}),y=a.createLazyComponent(()=>Promise.all([r.e(6535),r.e(8284),r.e(6274),r.e(142),r.e(9681),r.e(4418),r.e(3750),r.e(2757),r.e(5353),r.e(2433),r.e(6378),r.e(9797),r.e(9016),r.e(704),r.e(6091),r.e(9717),r.e(5017),r.e(5195)]).then(r.bind(r,669727)).then(e=>e.FigJamMiniHome),{loading:n.NY.NONE,error:n.NY.NONE})},881477:(e,t,r)=>{r.d(t,{z:()=>E,f:()=>y});var n=r(652983),i=r(87608),a=r.n(i),o=r(716250),l=r(571529),s=r(496417),c=r(441678),d=r(961215),u=r(572333),p=r(225468),m=r(321336),h=r(425285);let _=Math.log(10),g=Math.log(200);function f(e){return(Math.log(e)-_)/(g-_)*190+10}function E(){let[e,t]=n.useState(0),r=(0,u.mA)((0,c.Y)().activeCanvasCurrentZoom),i=Math.round(100*r),o=n.useRef(null),l=n.useRef(null),h=e=>{let t=Number(e.target.value);d.iTB.setCanvasZoomScale(Math.exp((t-10)/190*(g-_)+_)/100)};return n.useEffect(()=>{l.current&&l.current.style.setProperty("--sliderThumbSize","14px")},[l]),n.useEffect(()=>{if(o.current&&l.current){let e=o.current.clientHeight,r=f(i),n=(200-Math.max(10,Math.min(r,200)))/190;t(e*n-(e/2+(14*n-7)))}},[o,l,i]),n.createElement("div",{className:"zoom_slider--sliderOuterContainer--NbVeP","data-onboarding-key":m.cy,"data-tooltip":p._7.ZOOM_SLIDER,"data-tooltip-zoom-percentage":i,"data-tooltip-type":p.fR.SPECIAL,"data-tooltip-offset-y":e,"data-tooltip-offset-x":6,"data-tooltip-show-left":!0,"data-tooltip-show-immediately":!0},n.createElement("div",{className:"zoom_slider--sliderContainer--VZPpJ",ref:o},n.createElement("input",{className:a()("zoom_slider--sliderInput--W3iDP",s.Hy),type:"range",min:10,max:200,step:.1,value:f(i),onChange:h,onInput:h,ref:l})))}function y(){return(0,h.bR)()&&(0,o.BZ)().figjam_zoom_control_redesign&&!l.ZP.isIpad}},848080:(e,t,r)=>{r.d(t,{Fg:()=>o,Zz:()=>s,f6:()=>l});var n=r(652983);let i=n.createContext(null),a={brand:"design",version:"ui2",updateMode:()=>{}};function o(){let e=n.useContext(i);return e||(console.debug("No theme provider exists currently, returning defaults, but switching modes is disabled"),a)}function l({children:e,color:t="light",brand:r="design",version:a="ui2"}){let[o,l]=n.useState({color:t,brand:r,version:a}),s=n.useCallback(e=>{l(t=>({...t,...e}))},[]),c=n.useMemo(()=>({updateMode:s,...o}),[s,o]),d=n.useContext(i);return d&&console.error("Only one instance of theme provider should exist"),n.useEffect(()=>{l({color:t,brand:r,version:a})},[t,r,a]),n.useEffect(()=>{"ui2"===o.version?document.body.removeAttribute("data-fpl-version"):document.body.setAttribute("data-fpl-version",o.version)},[o.brand,o.version]),n.createElement(i.Provider,{value:c},e)}function s(e){return function(t){let r=o();return n.createElement(e,{...t,theme:r})}}}},e=>{e.O(0,[3813],()=>{[4736,6535,8284,6274,142,9681,4418,3750,2757,5353,2433,6378,9797,9016,3729,9717,1528,7588,7234,3339,3683,1006,5376,6709,6883,6602,704,9457,7353,8449,5017,7046,6091,5195,5226].map(e.E)},5);var t=t=>e(e.s=t);e.O(0,[4736,6535,8284,6274,142,9681,4418,3750,2757,5353,2433,6378,9797,9016,8515,9368,7774,3729,2759,9234,7234],()=>t(606936)),e.O()}]);

//# debugId=87ccdf0f-9253-5209-80c3-f08640b3f4ab

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/db8ca3a5afe833a5fb33dca4a2e35399fb12337b/figma_app-9c87eb365d0eec41.min.js.map